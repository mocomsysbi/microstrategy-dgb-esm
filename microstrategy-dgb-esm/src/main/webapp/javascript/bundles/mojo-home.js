mstrmojo.vi.enums.EnumFeatures={SUPPORT_RESPONSIVE:"support-responsive",SUPPORT_RESPONSIVE_RESIZING:"support-responsive-resizing",SUPPORT_GHOST_IMG:"support-ghost-img",SUPPORT_NLP:"use-natural-language",SUPPORT_CONDITION_METRIC:"support_condition_metric",USE_WORKSTATION_NAMING_STYLE:"use-workstation-naming-style",SUPPORT_TOC_UPDATEPOISITION:"support-toc-updatePosition",SUPPORT_LIVEMODE:"support-livemode",NUMBER_FORMATTING:"number-formatting",SAVE_ANALYSIS:"save-analysis",INSERT_NEW_METRIC:"insert-new-metric",DATA_ENGINE_VERSION:"data-engine-version",WEB_DRILL_AND_LINK:"web-drill-and-link",WEB_IMPORT_DATABASE:"web-import-database"};mstrmojo.warehouse.EnumDatabaseType={SAP:1200,MSAS:1500,EssBase:1600,TM1:2900,SAPHana:4000,BDE:5400,SearchEngineSOLR:5500,Hive:3100,Impala:4100,SearchEngineSPLUNK:5600,Pig:6400,PHOENIX:6800,IBMBigInsights:700,Drill:7300,DB_TYPE_NEWDB_1:8100,DB_TYPE_NEWDB_5:8500,AzureCosmosDB:8700};mstrmojo.EnumAuthenticationModes={DEFAULT:0,STANDARD:1,NTCREDENTIAL:2,PASSTHRU:4,ANONYMOUS:8,LDAP:16,DATABASE:32,PLUGIN:64,INTEGRATED:128,USHER:256};(function(){var A=/^mstrmojo./;mstrmojo.DynamicClassFactory={newComponent:function(C,B,F){var H=C.prototype.scriptClass.replace(A,"");for(var E=0,D=B&&B.length||0;E<D;E++){if(!B[E]._mixinName){throw new Error('Mixins must have a "_mixinName" property to be used with DynamicClassFactory');}H+="_"+B[E]._mixinName.replace(A,"");}var G=mstrmojo[H];if(!G){G=mstrmojo.declare(C,B,F);mstrmojo[H]=G;}return G;}};}());mstrmojo.requiresDescs(5547,5217,5218,5219,5220,5221);var EnumWebPromptsList=[{n:"Hierarchy Qualification Prompt",desc:"Hierarchy Qualification prompt",descId:5547,value:"editPrompt",name:"hierarchyPrompt",params:{evt:3004,target:"editPrompt",promptType:3,promptExpressionType:16}},{n:"Attribute Qualification Prompt",desc:"Attribute Qualification prompt",descId:5217,name:"aqPrompt",value:"editPrompt",params:{evt:3004,target:"editPrompt",promptType:3,promptExpressionType:17}},{n:"Attribute Element List",desc:"Att Element List prompt",descId:5218,value:"editPrompt",name:"attributePrompt",params:{evt:3004,target:"editPrompt",promptType:2}},{n:"Metric Qualification Prompt",desc:"Metric Qualification prompt",descId:5219,value:"editPrompt",name:"mqPrompt",params:{evt:3004,target:"editPrompt",promptType:3,promptExpressionType:10}},{n:"Object Prompt",desc:"Object",descId:5220,value:"editPrompt",name:"objectPrompt",params:{evt:3004,target:"editPrompt",promptType:4,}},{n:"Value Prompt",desc:"Value",descId:5221,value:"editPrompt",name:"valuePrompt",params:{evt:3004,target:"editPrompt",promptType:1,constDataType:14}}];mstrmojo.mstr.ui.EnumWebPromptsList={get:function(){var A=mstrApp.servletName||mstrApp.name;return mstrmojo.array.map(EnumWebPromptsList,function(B){B.src=A+B.evt;return B;});}};mstrmojo.mstr.EnumDSSXMLTokenTypes={EndOfInput:-1,Reserved:0,Error:1,Unknown:2,Empty:3,ExclamationPoint:33,NumberSign:35,Dollar:36,Percent:37,Ampersand:38,LeftParen:40,RightParen:41,Asterisk:42,PlusSign:43,Comma:44,MinusSign:45,Dot:46,FwdSlash:47,Colon:58,Semicolon:59,LeftAngleBracket:60,EqualSign:61,RightAngleBracket:62,QuestionMark:63,AtSign:64,LeftSquareBracket:91,RightSquareBracket:93,Caret:94,Underscore:95,LeftAccolade:123,VerticalBar:124,RightAccolade:125,Tilda:126,Literal:258,Identifier:259,Reserved1:260,DoubleQString:261,Integer:262,Float:263,AttrRef:264,DimRef:265,MetricRef:266,AggMetricRef:267,FactRef:268,ReportRef:269,FilterRef:270,RoleRef:271,TableRef:272,PromptRef:273,ColumnRef:274,AttrFormRef:275,DimFormRef:276,SimpInfixFun1:277,SimpInfixFun2:278,SimpPrefixFun:279,AggFun:280,RelativeFun:281,CompareFun:282,AndFun:283,OrFun:284,NotFun:285,BoolPrefixFun:286,IntersectFun:287,Reserved2:288,InSetFun:289,BetweenFun:290,LikeFun:291,EnhCompareFun:292,EnhBetweenFun:293,ArrowUp:294,ArrowDown:295,ArrowUpDown:296,AggFirstInFact:297,AggLastInFact:298,KwdTrue:299,KwdFalse:300,KwdBreakBy:301,KwdSortBy:302,KwdFactID:303,DateTime:304,CaseFun:305,FreeVariable:306,LongNumber:307,RWMetricRef:308,CSQLRef:309,ConsolidationRef:310,DssTokenTypeKwdCSIUpdate:312,DssTokenTypeKwdCSISet:313,DssTokenTypeKwdCSIInsert:314,DssTokenTypeKwdCSIDelete:315,DssTokenTypeKwdCSIWhere:316,DssTokenTypeKwdCSIInto:317,DssTokenTypeKwdCSIValues:318,DssTokenTypeKwdCSIFrom:319,DssTokenTypeCSIFieldUnit:321,Elements:323,ConsolidationElementRef:324,EndOfTypes:340};mstrmojo.warehouse.EnumObjectTypes={FILTER:1,METRIC:4,ATTRIBUTE:12,FACT:13,DIMENSION:14,TABLE:15,TABLE_LOGICAL_VIEW:151,TABLE_PARTITION:152,FORM:21,COLUMN:26,DBROLE:29,PROJECT:32,TRANSFORMATION:43,DBTABLE:53,LAYER:70,RELATIONSHIP:99,COMPOUND_FORM:1001,RELATIONSHIP_ATTRIBUTE:1002};mstrmojo.gm.GMEnums={};mstrmojo.gm.DualAxisSubAxisBit={PRIMARY:0,SECONDARY:1};mstrmojo.gm.StackExetrmeId={PRIMARY_Y_AXIS:-2,SECONDARY_Y_AXIS:-18,PRIMARY_X_AXIS:-1,SECONDARY_X_AXIS:-17};mstrmojo.gm.FormNameType={OFF:0,ON:1,FORM_NAME_ONLY:2,SHOW_ATT_NAME_ONCE:3,AUTO:4};mstrmojo.gm.EnumSelectionOptionLevel={GLOBAL:1,ITSELF:2,ATTS_METRIC_COMBINATION:3,METRIC_AXIS:4,METRIC:5,AXIS:6,COLOR_BY:7,ALL_SHAPE:8,ITSELF_RESOLVED:9};mstrmojo.gm.EnumLabelRotation={VERTICAL:2,HORIZONTAL:0,AUTOMATIC:-1};mstrmojo.gm.EnumIdentityType={LEGEND:Math.pow(2,0),GRAPH_SHAPE:Math.pow(2,1),X_AXIS:Math.pow(2,2),Y_AXIS:Math.pow(2,3),X2_AXIS:Math.pow(2,4),Y2_AXIS:Math.pow(2,5),GRID_LINE:Math.pow(2,6),TREND_LINE:Math.pow(2,7),REF_LINE:Math.pow(2,8),DATA_LABEL:Math.pow(2,9),COLOR_SQUARE:Math.pow(2,10),ROW_TITLE:Math.pow(2,11),COL_TITLE:Math.pow(2,12),ROW_HEADER:Math.pow(2,13),COL_HEADER:Math.pow(2,14),LOG_SCALE:Math.pow(2,15),H_MATRIX_LINE:Math.pow(2,16),V_MATRIX_LINE:Math.pow(2,17),LEGEND_TEXT:Math.pow(2,18),SHAPE_COLLECTION:Math.pow(2,19),MINOR_GRID_LINE:Math.pow(2,20),AXIS_SCALE:Math.pow(2,22),AXIS_ORIGIN:Math.pow(2,23),ROWS_BACKGROUND:Math.pow(2,24),COLS_BACKGROUND:Math.pow(2,25),X_NUMERIC:Math.pow(2,26),X_CATEGORY:Math.pow(2,27),Y_NUMERIC:Math.pow(2,28),Y_CATEGORY:Math.pow(2,29),X_METRIC_AXIS_TITLE:Math.pow(2,30),Y_METRIC_AXIS_TITLE:Math.pow(2,31),VIZ_BOX_TITLE:Math.pow(2,32),REF_LINE_LABEL:Math.pow(2,33),LINE_MARKER:Math.pow(2,34),X_AXIS_ORIGIN_LABEL:Math.pow(2,35),Y_AXIS_ORIGIN_LABEL:Math.pow(2,36),X_AXIS_ORIGIN_LINE:Math.pow(2,37),Y_AXIS_ORIGIN_LINE:Math.pow(2,38),Y_ATTRIBUTE_AXIS_TITLE:Math.pow(2,39),ROW_HEADER_TEXT:Math.pow(2,40),ROW_TITLE_TEXT:Math.pow(2,41),COL_HEADER_TEXT:Math.pow(2,42),COL_TITLE_TEXT:Math.pow(2,43),VIZ_BOX_CONTAINER:Math.pow(2,44),X_ATTRIBUTE_AXIS_TITLE:Math.pow(2,45),AXIS_ORIGIN_DEFINE:Math.pow(2,46)};mstrmojo.gm.EnumGMZoneIds={ROWS:1,COLUMNS:2,XAXIS:3,YAXIS:4,BREAKBY:5,SLICEBY:6,COLORBY:7,SIZEBY:8,TOOLTIP:9,ANGLEBY:10};mstrmojo.gm.EnumClickType={NONE:-1,LEFT_CLICK:1,RIGHT_CLICK:2,DOUBLE_CLICK:3};mstrmojo.gm.EnumLegendSlot={RIGHT_TOP:1,RIGHT_MIDDLE:2,RIGHT_BOTTOM:3,LEFT_TOP:4,LEFT_MIDDLE:5,LEFT_BOTTOM:6,LEFT:7,RIGHT:8};mstrmojo.gm.EnumAxisType={ATTRIBUTE:0,METRIC:1};mstrmojo.gm.EnumGraphType={UNDEFINED:-1,AREA:1,BAR:2,LINE:3,SCATTER:4,BUBBLE:5,PIE:6,GRID:7,HISTOGRAM:8,BOXPLOT:9,WATERFALL:10};mstrmojo.gm.EnumContextMenu={SEPARATOR:0,KEEP_ONLY:1,EXCLUDE:2,SORT_ASCENDING:3,SORT_DESCENDING:4,CLEAR_SORT:5,SHOW_DATA:6,SWITCH_THEME:7,KEEP_ONLY_AND_SHOW:8,CLOSE_LEGEND:9,OPEN_LEGEND:10,AXIS_SCALE:11,DRILL_TO:100,CHART_TYPE:200,AREA_ABS:201,AREA_STACKED:202,AREA_PERCENT:203,BAR_SBS:204,BAR_ABS:205,BAR_STACKED:206,BAR_PERCENT:207,LINE_ABS:208,LINE_STACKED:209,LINE_PERCENT:210,BUBBLE:211,SCATTER:212,H_AREA_ABS:213,H_AREA_STACKED:214,H_AREA_PERCENT:215,H_BAR_SBS:216,H_BAR_ABS:217,H_BAR_STACKED:218,H_BAR_PERCENT:219,H_LINE_ABS:220,H_LINE_STACKED:221,H_LINE_PERCENT:222,GRID:223,CIRCLE:224,SQUARE:225,PIE:226,TICKER:227,RING:228,CANVAS:229,SVG:230,LARGE_ABL:231,OUTPUT_EXTREMES:232,COMBINATION:233,ENABLE_PARTIAL_RENDERING:234,DISABLE_PARTIAL_RENDERING:235,OUTPUT_DATA_COUNT:236,ENABLE_TIMER:239,DISABLE_TIMER:240,ENABLE_CE_TIMER:241,DISABLE_CE_TIMER:242};mstrmojo.gm.EnumColorRankMode={RANK_MODE_VALUE:0,RANK_MODE_TOP:1,RANK_MODE_BOTTOM:2,RANK_MODE_TOP_PERCENT:3,RANK_MODE_BOTTOM_PERCENT:4};mstrmojo.gm.EnumColorByType={NULL:0,ATT:1,METRICS_ITEM:2,METRICS:3,ATT_METRICS:4};mstrmojo.gm.EnumDockPosition={TOP:1,RIGHT:2,BOTTOM:3,LEFT:4};mstrmojo.gm.EnumXAxisLabelStatus={NORMAL:1,STAGGER:2,ROTATE:3,HORI_DROP:4};mstrmojo.gm.EnumABLDirection={UNDEFINED:-1,NONE:0,HORIZONTAL:1,VERTICAL:2};mstrmojo.gm.EnumMetricsPosition={MetricsByRow:0,MetricsByColumn:1,MetricsByAxis:2,MetricsByBreakBy:3,MetricsBySlice:4,MetricsByXAxis:5,MetricsByYAxis:6};mstrmojo.gm.EnumDrawingAPI={GET_CHART_WIDTH:0,GET_CHART_HEIGHT:1,GET_ROW_HEADER:2,GET_COLUMN_HEADER:3,CREATE_UNIT_Y_AXIS:4,CREATE_UNIT_X_AXIS:5,GET_FULL_FLEDGED_CHART:6,GET_ROW_SPAN:7,GET_COLUMN_SPAN:8,GET_METRICS_ON_X:9,GET_METRICS_ON_Y:10,GET_METRICS_ON_SIZE_BY:11,UPDATE_MINI_CHART:12,UPDATE_X_AXIS:13,UPDATE_Y_AXIS:14,MAX_RADIUS_CALC:15,GET_EXTRA_COLUMN_HEADER:16,UPDATE_COLUMN_HEADER:17,UPDATE_ROW_HEADER:18,LAYOUT_ALL_X_AXIS_LABELS:19,LAYOUT_ONE_X_AXIS_LABELS:20};mstrmojo.gm.WidgetPropertyTag={FIT_TO:"FitTo",AXIS_SCALE:"MinMax",SHAPE:"Shape",SUB_TYPE:"Subtype",VIS_TYPE:"visType",DATA_LABEL:"DataLabel",DATA_LABELS_PLACEMENT:"DataLabelPalcement",METRIC_LEVEL_DATA_LABEL:"mtcLvlDataLabel",DATA_LABEL_FONT_SIZE_CONSTRAINT:"DataLabelFontSizeConstraint",DATA_LABEL_TEXT_ANGLE:"DataLabelTextAngle",BANDING:"Banding",LEGEND_VISIBLE:"LegendVisibleness",COL_ALIGNMENT:"Columnalignment",ROW_ALIGNMENT:"Rowalignment",MAX_SIZE_TYPE:"SizeType",MAX_SIZE_VALUE:"SizeValue",MIN_SIZE_TYPE:"minSizeType",MIN_SIZE_VALUE:"minSizeValue",OUTSIDE_BORDER:"OutSideBorder",AXES:"AxisLine",MATRIX_LINES:"MatrixLine",GRID_LINES:"GridLine",SELECTION_TYPE:"SelectionType",SELECTIONS:"Selections",LEGEND_MODE:"lm",LEGEND_POSITION:"LegendPosition",SCALE_LEGEND_WIDTH:"lwr",SCALE_CHART_HEIGHT:"rr",SCALE_CHART_WIDTH:"cr",SCALE_ROW_HEADERS:"rvr",SCALE_COL_HEADERS:"chr",SCALE_Y:"yr",SCALE_X:"xr",SCALE_Y2:"y2r",SCALE_X2:"x2r",SCALE_ALL:"scales",SCALE_V_EXTRA_LINE:"vExtraLine",SORT_ORDER:"so",SORT_INDEX:"si",AXIS_SCALE_DATA:"AxisScale",AXIS_SCALE_REAL_MIN:"rMin",AXIS_SCALE_REAL_MAX:"rMax",AXIS_SCALE_MANUAL_MIN:"mMin",AXIS_SCALE_MANUAL_MAX:"mMax",AXIS_SCALE_AUTO_MIN:"autoMin",AXIS_SCALE_AUTO_MAX:"autoMax",SINGLE_AXIS_SCALE_TYPE:"scaleType",LOG_SCALE:"logScale",GROUP_INFO:"groupInfo",METRIC_SHAPES:"metricShapes",AXIS_ORIGIN:"axisOrigin",AXIS_ORIGIN_AUTO:"axOriAuto",AXIS_ORIGIN_VALUE:"axOriValue",TREND_LINE_DEF:"trdDef",REF_LINE_DEF:"refDef",TREND_TYPE:"trdTp",TREND_LEVEL:"trdLvl",TREND_ENABLED:"trdEnabled",TREND_INCLUDE_BREAK_BY:"trdIncBB",TREND_POLY_DEGREE:"trdDgr",TREND_FORECAST_ENABLED:"trdFstEnabled",TREND_BWD_FORECAST:"trdBwdFst",TREND_FWD_FORECAST:"trdFwdFst",TREND_SEASONALITY:"trdSeason",TREND_BUBBLE_FORE_DEF:"trdBbForeDef",TREND_BUBBLE_FORE_FWD:"trdBbForeFwd",TREND_BUBBLE_FORE_BWD:"trdBbForeBwd",TREND_BUBBLE_FORE_ENABLED:"trdBbForeEnabled",TREND_BUBBLE_MAX:"trdBbMax",TREND_BUBBLE_MIN:"trdBbMin",REF_TYPE:"refTp",REF_LEVEL:"refLvl",REF_ENABLED:"refEnabled",REF_SHOW_LABEL:"refLbShw",REF_LABEL_TYPE:"refLbTp",REF_CONST_VALUE:"refCstVl",REF_LINE_NAME:"refLnName",TREND_REF_LINE_THICKNESS:"trdRefLnThk",TREND_REF_LINE_COLOR:"trdRefLnClr",TREND_REF_LINE_STYLE:"trdRefLnStyle",TREND_REF_LINE_COMBINED_STYLE:"trdRefLnCmbStyle",FORMATS_ON_COMBINATION:"fmtOnComb",PARTIAL_RENDER:"prtRdn",SHOW_BOTH_TOTALS:"totalShw:intSumShw"};mstrmojo.gm.FormatingPropertyTag={IS_DEFAULT_VALUE:"_default",MODIFIED_DEF_FILL_COLOR:"modDefFillClr",ALL_SHAPE_FORMAT:"allShpFmt",SHAPE_LINE_THICKNESS:"shpLnThk",SHAPE_LINE_COLOR:"shpLnClr",SHAPE_LINE_STYLE:"shpLnStyle",SHAPE_LINE_COMBINED_STYLE:"shpLnCmbStyle",SHAPE_FILL_COLOR:"shpFillClr",SHAPE_FILL_COLOR_DEFAULT:"shpFillClr_default",SHAPE_FILL_STYLE:"shpFillStyle",SHAPE_FILL_TRANSPARENCY:"shpFillTrans",SHAPE_FILL_EFFECT:"shpFillEff",SHAPE_BORDER_COLOR:"shpBdrClr",SHAPE_BORDER_STYLE:"shpBdrStyle",SHAPE_BORDER_COMBINED_STYLE:"shpBdrCmbStyle",SHAPE_BORDER_THICKNESS:"shpBdrThk",LINE_MARKER_SHOW:"lnMkShw",LINE_MARKER_SHAPE:"lnMkShp",LINE_MARKER_SIZE:"lnMkSz",LINE_MARKER_COLOR:"lnMkClr",LINE_MARKER_COLOR_EQUAL:"lnMkClrEq",LINE_MARKER_BORDER_COLOR:"lnMkBdrClr",PIE_EXPLODE:"pieExpl",DATA_LABELS_SHOW:"dlShw",DATA_LABELS_FONT_FAMILY:"dlFntFml",DATA_LABELS_FONT_SIZE:"dlFntSz",DATA_LABELS_FONT_STYLE:"dlFntStyle",DATA_LABELS_FONT_COLOR:"dlFntClr",REF_LABELS_FONT_FAMILY:"rfLnFntFml",REF_LABELS_FONT_SIZE:"rfLnFntSz",REF_LABELS_FONT_STYLE:"rfLnFntStyle",REF_LABELS_FONT_COLOR:"rfLnFntClr",LEGEND_BG_COLOR:"lgdBgFillClr",LEGEND_BG_FILL_STYLE:"lgdBgFillStyle",LEGEND_BG_FILL_EFFECT:"lgdBgFillEff",LEGEND_BG_FILL_TRANSPARENCY:"lgdBgFillTrans",LEGEND_FONT_SIZE:"lgdFntSz",LEGEND_FONT_FAMILY:"lgdFntFml",LEGEND_FONT_STYLE:"lgdFntStyle",LEGEND_FONT_COLOR:"lgdFntClr",LEGEND_BORDER_SHOW:"lgdBdrShw",LEGEND_BORDER_COLOR:"lgdBdrClr",LEGEND_BORDER_THICKNESS:"lgdBdrThk",LEGEND_BORDER_LINE_STYLE:"lgdBdrStyle",LEGEND_BORDER_LINE_COMBINED_STYLE:"lgdBdrCmbStyle",ALL_LINE_SHOW:"allLnShw",ALL_LINE_COLOR:"allLnClr",ALL_LINE_STYLE:"allLnStyle",ALL_LINE_COMBINED_STYLE:"allLnCmbStyle",ALL_LINE_THICKNESS:"allLnThk",ALL_AXIS_ORIGIN_LINE_SHOW:"axOriLnShw",ALL_AXIS_ORIGIN_LINE_COLOR:"axOriLnClr",ALL_AXIS_ORIGIN_LINE_COMBINED_STYLE:"axOriLnCmbStyle",X_AXIS_ORIGIN_LINE_SHOW:"xAxOriLnShw",X_AXIS_ORIGIN_LINE_COLOR:"xAxOriLnClr",X_AXIS_ORIGIN_LINE_STYLE:"xAxOriLnStyle",X_AXIS_ORIGIN_LINE_COMBINED_STYLE:"xAxOriLnCmbStyle",X_AXIS_ORIGIN_LINE_THICKNESS:"xAxOriLnThk",Y_AXIS_ORIGIN_LINE_SHOW:"yAxOriLnShw",Y_AXIS_ORIGIN_LINE_COLOR:"yAxOriLnClr",Y_AXIS_ORIGIN_LINE_STYLE:"yAxOriLnStyle",Y_AXIS_ORIGIN_LINE_COMBINED_STYLE:"yAxOriLnCmbStyle",Y_AXIS_ORIGIN_LINE_THICKNESS:"yAxOriLnThk",ALL_AXIS_LINE_SHOW:"allAxLnShw",ALL_AXIS_LINE_COLOR:"allAxLnClr",ALL_AXIS_LINE_STYLE:"allAxLnStyle",ALL_AXIS_LINE_COMBINED_STYLE:"allAxLnCmbStyle",ALL_AXIS_LINE_THICKNESS:"allAxLnThk",ALL_AXIS_TITLE_SHOW:"allAxTtShw",ALL_AXIS_TITLE_CONTENT:"allAxTtCtt",ALL_AXIS_TITLE_FONT_COLOR:"allAxTtFntClr",ALL_AXIS_TITLE_FONT_FAMILY:"allAxTtFntFml",ALL_AXIS_TITLE_FONT_STYLE:"allAxTtFntStyle",ALL_AXIS_TITLE_FONT_SIZE:"allAxTtFntSz",ALL_AXIS_LABELS_FONT_SIZE:"allAxLbFntSz",ALL_AXIS_LABELS_FONT_FAMILY:"allAxLbFntFml",ALL_AXIS_LABELS_FONT_STYLE:"allAxLbFntStyle",ALL_AXIS_LABELS_FONT_COLOR:"allAxLbFntClr",ALL_AXIS_LABELS_ROTATION:"allAxLbRtt",ALL_AXIS_LABELS_SHOW:"allAxLbShw",X_AXIS_LINE_SHOW:"xAxLnShw",X_AXIS_LINE_COLOR:"xAxLnClr",X_AXIS_LINE_STYLE:"xAxLnStyle",X_AXIS_LINE_COMBINED_STYLE:"xAxLnCmbStyle",X_AXIS_LINE_THICKNESS:"xAxLnThk",X_AXIS_TITLE_SHOW:"xAxTtShw",X_AXIS_TITLE_CONTENT:"xAxTtCtt",X_AXIS_TITLE_FONT_COLOR:"xAxTtFntClr",X_AXIS_TITLE_FONT_FAMILY:"xAxTtFntFml",X_AXIS_TITLE_FONT_STYLE:"xAxTtFntStyle",X_AXIS_TITLE_FONT_SIZE:"xAxTtFntSz",X_AXIS_LABELS_FONT_SIZE:"xAxLbFntSz",X_AXIS_LABELS_FONT_FAMILY:"xAxLbFntFml",X_AXIS_LABELS_FONT_STYLE:"xAxLbFntStyle",X_AXIS_LABELS_FONT_COLOR:"xAxLbFntClr",X_AXIS_LABELS_ROTATION:"xAxLbRtt",X_AXIS_LABELS_SHOW:"xAxLbShw",Y_AXIS_LINE_SHOW:"yAxLnShw",Y_AXIS_LINE_COLOR:"yAxLnClr",Y_AXIS_LINE_STYLE:"yAxLnStyle",Y_AXIS_LINE_COMBINED_STYLE:"yAxLnCmbStyle",Y_AXIS_LINE_THICKNESS:"yAxLnThk",Y_AXIS_TITLE_SHOW:"yAxTtShw",Y_AXIS_TITLE_CONTENT:"yAxTtCtt",Y_AXIS_TITLE_FONT_COLOR:"yAxTtFntClr",Y_AXIS_TITLE_FONT_FAMILY:"yAxTtFntFml",Y_AXIS_TITLE_FONT_STYLE:"yAxTtFntStyle",Y_AXIS_TITLE_FONT_SIZE:"yAxTtFntSz",Y_AXIS_LABELS_FONT_SIZE:"yAxLbFntSz",Y_AXIS_LABELS_FONT_FAMILY:"yAxLbFntFml",Y_AXIS_LABELS_FONT_STYLE:"yAxLbFntStyle",Y_AXIS_LABELS_FONT_COLOR:"yAxLbFntClr",Y_AXIS_LABELS_ROTATION:"yAxLbRtt",Y_AXIS_LABELS_SHOW:"yAxLbShw",ALL_FILL_COLOR:"allFillClr",ALL_FILL_TRANSPARENCY:"allFillTrans",BG_COLOR:"bgFillClr",BG_FILL_EFFECT:"bgFillEff",BG_FILL_STYLE:"bgFillStyle",BG_FILL_TRANSPARENCY:"bgFillTrans",ROW_HEADER_FILL_COLOR:"rwHdrFillClr",ROW_HEADER_FILL_EFFECT:"rwHdrFillEff",ROW_HEADER_FILL_STYLE:"rwHdrFillStyle",ROW_HEADER_FILL_TRANSPARENCY:"rwHdrFillTrans",COLUMN_HEADER_FILL_COLOR:"colHdrFillClr",COLUMN_HEADER_FILL_EFFECT:"colHdrFillEff",COLUMN_HEADER_FILL_STYLE:"colHdrFillStyle",COLUMN_HEADER_FILL_TRANSPARENCY:"colHdrFillTrans",ALL_MATRIX_LINES_SHOW:"allMatrixLnShw",ALL_MATRIX_LINES_COLOR:"allMatrixLnClr",ALL_MATRIX_LINES_THICKNESS:"allMatrixLnThk",ALL_MATRIX_LINES_STYLE:"allMatrixLnStyle",ALL_MATRIX_LINES_COMBINED_STYLE:"allMatrixLnCmbStyle",V_MATRIX_LINES_SHOW:"vMatrixLnShw",V_MATRIX_LINES_COLOR:"vMatrixLnClr",V_MATRIX_LINES_THICKNESS:"vMatrixLnThk",V_MATRIX_LINES_STYLE:"vMatrixLnStyle",V_MATRIX_LINES_COMBINED_STYLE:"vMatrixLnCmbStyle",H_MATRIX_LINES_SHOW:"hMatrixLnShw",H_MATRIX_LINES_COLOR:"hMatrixLnClr",H_MATRIX_LINES_THICKNESS:"hMatrixLnThk",H_MATRIX_LINES_STYLE:"hMatrixLnStyle",H_MATRIX_LINES_COMBINED_STYLE:"hMatrixLnCmbStyle",OUTSIDE_BORDER_SHOW:"outBdrShw",OUTSIDE_BORDER_COLOR:"outBdrClr",OUTSIDE_BORDER_STYLE:"outBdrStyle",OUTSIDE_BORDER_THICKNESS:"outBdrThk",OUTSIDE_BORDER_COMBINED_STYLE:"outBdrCmbStyle",GRID_LINE_AUTO:"gridLineAuto",ALL_GRID_LINES_SHOW:"allGridLnShw",ALL_GRID_LINES_COLOR:"allGridLnClr",ALL_GRID_LINES_THICKNESS:"allGridLnThk",ALL_GRID_LINES_STYLE:"allGridLnStyle",ALL_GRID_LINES_COMBINED_STYLE:"allGridLnCmbStyle",AUTO_GRID_LINES_COLOR:"autoGridLnClr",AUTO_GRID_LINES_COMBINED_STYLE:"autoGridLnCmbStyle",MAJOR_GRID_LINES_SHOW:"majorGridLnShw",MAJOR_GRID_LINES_COLOR:"majorGridLnClr",MAJOR_GRID_LINES_THICKNESS:"majorGridLnThk",MAJOR_GRID_LINES_STYLE:"majorGridLnStyle",MAJOR_GRID_LINES_COMBINED_STYLE:"majorGridLnCmbStyle",MINOR_GRID_LINES_SHOW:"minerGridLnShw",MINER_GRID_LINES_COLOR:"minerGridLnClr",MINER_GRID_LINES_THICKNESS:"minerGridLnThk",MINER_GRID_LINES_STYLE:"minerGridLnStyle",MINER_GRID_LINES_COMBINED_STYLE:"minerGridLnCmbStyle",ALL_NGM_GRID_LINES_SHOW:"allNGMGridLnShw",X_GRID_LINES_SHOW:"xGridLnShw",Y_GRID_LINES_SHOW:"yGridLnShw",ALL_ROW_COLUMN_SHOW:"allRwColShw",COLUMN_TEXT_SHOW:"colTxtShw",ROW_TEXT_SHOW:"rwTxtShw",COLUMN_HEADER_SHOW:"colHdrShw",ROW_HEADER_SHOW:"rwHdrShw",COLUMN_VALUES_SHOW:"colVlShw",ROW_VALUES_SHOW:"rwVlShw",ALL_TEXT_FONT_COLOR:"allTxtFntClr",ALL_TEXT_FONT_SIZE:"allTxtFntSz",ALL_TEXT_FONT_FAMILY:"allTxtFntFml",ALL_TEXT_FONT_STYLE:"allTxtFntStyle",ALL_ROW_COLUMN_TEXT_FONT_COLOR:"allRwColTxtFntClr",ALL_ROW_COLUMN_TEXT_FONT_SIZE:"allRwColTxtFntSz",ALL_ROW_COLUMN_TEXT_FONT_FAMILY:"allRwColTxtFntFml",ALL_ROW_COLUMN_TEXT_FONT_STYLE:"allRwColTxtFntStyle",ALL_ROW_COLUMN_TEXT_ALIGNMENT_HORIZONTAL:"allRwColTxtAlignH",ALL_ROW_COLUMN_TEXT_ALIGNMENT_VERTICAL:"allRwColTxtAlignV",ROW_TEXT_TEXT_FONT_COLOR:"rwTxtTxtFntClr",ROW_TEXT_TEXT_FONT_SIZE:"rwTxtTxtFntSz",ROW_TEXT_TEXT_FONT_FAMILY:"rwTxtTxtFntFml",ROW_TEXT_TEXT_FONT_STYLE:"rwTxtTxtFntStyle",ROW_TEXT_TEXT_ALIGNMENT_HORIZONTAL:"rwTxtTxtAlignH",ROW_TEXT_TEXT_ALIGNMENT_VERTICAL:"rwTxtTxtAlignV",COLUMN_TEXT_TEXT_FONT_COLOR:"colTxtTxtFntClr",COLUMN_TEXT_TEXT_FONT_SIZE:"colTxtTxtFntSz",COLUMN_TEXT_TEXT_FONT_FAMILY:"colTxtTxtFntFml",COLUMN_TEXT_TEXT_FONT_STYLE:"colTxtTxtFntStyle",COLUMN_TEXT_TEXT_ALIGNMENT_HORIZONTAL:"colTxtTxtAlignH",COLUMN_TEXT_TEXT_ALIGNMENT_VERTICAL:"colTxtTxtAlignV",ROW_HEADER_TEXT_FONT_COLOR:"rwHdrTxtFntClr",ROW_HEADER_TEXT_FONT_SIZE:"rwHdrTxtFntSz",ROW_HEADER_TEXT_FONT_FAMILY:"rwHdrTxtFntFml",ROW_HEADER_TEXT_FONT_STYLE:"rwHdrTxtFntStyle",ROW_HEADER_TEXT_ALIGNMENT_HORIZONTAL:"rwHdrTxtAlignH",ROW_HEADER_TEXT_ALIGNMENT_VERTICAL:"rwHdrTxtAlignV",COLUMN_HEADER_TEXT_FONT_COLOR:"colHdrTxtFntClr",COLUMN_HEADER_TEXT_FONT_SIZE:"colHdrTxtFntSz",COLUMN_HEADER_TEXT_FONT_FAMILY:"colHdrTxtFntFml",COLUMN_HEADER_TEXT_FONT_STYLE:"colHdrTxtFntStyle",COLUMN_HEADER_TEXT_ALIGNMENT_HORIZONTAL:"colHdrTxtAlignH",COLUMN_HEADER_TEXT_ALIGNMENT_VERTICAL:"colHdrTxtAlignV",ROW_VAVLUE_TEXT_FONT_COLOR:"rwVlTxtFntClr",ROW_VAVLUE_TEXT_FONT_SIZE:"rwVlTxtFntSz",ROW_VAVLUE_TEXT_FONT_FAMILY:"rwVlTxtFntFml",ROW_VAVLUE_TEXT_FONT_STYLE:"rwVlTxtFntStyle",ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL:"rwVlTxtAlignH",ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL:"rwVlTxtAlignV",COLUMN_VAVLUE_TEXT_FONT_COLOR:"colVlTxtFntClr",COLUMN_VAVLUE_TEXT_FONT_SIZE:"colVlTxtFntSz",COLUMN_VAVLUE_TEXT_FONT_FAMILY:"colVlTxtFntFml",COLUMN_VAVLUE_TEXT_FONT_STYLE:"colVlTxtFntStyle",COLUMN_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL:"colVlTxtAlignH",COLUMN_VAVLUE_TEXT_ALIGNMENT_VERTICAL:"colVlTxtAlignV",TITLE_FONT_COLOR:"ttlFntClr",TITLE_FONT_SIZE:"ttlFntSz",TITLE_FONT_FAMILY:"ttlFntFml",TITLE_FONT_STYLE:"ttlFntStyle",COLOR_SQUARE_COLOR:"clrSqrClr",SELECTION_LIMIT:"slctnLmt",CONTAINER_FIT_MODE:"cntrFitMode",SHOW_MODEBAR:"showModeBar",MEAN_SD:"meanSD",POINT_SIZE:"ptSize",PTSZ_TYPE:"ptSzType",JITTER:"jitter",JTR_TYPE:"jtrType",POINT_POS:"ptPos",PTPOS_TYPE:"ptPosType",SHOW_OUTLIERS:"shwOutliers",CUSTOM_BINS_MODE:"custMode",MANUAL_BINS_MODE:"manualBinsMode",RANGE_TYPE:"rangeType",NUM_BINS:"numBins",XBINS_START:"xBinsStart",XBINS_END:"xBinsEnd",XBINS_SIZE:"xBinsSize",HAS_UNCHECKED_AUTO:"hasUncheckedAuto",HAS_UNCHECKED_DATASET_RANGE:"hasUncheckedDstRng",TOTAL_SHOW:"totalShw",TOTAL_LABEL:"totalLabel",INT_SUM_SHOW:"intSumShw",POSITIVE_COLOR:"posClr",NEGATIVE_COLOR:"negClr",TOTAL_COLOR:"totalClr",INT_SUM_COLOR:"intSumClr",INT_SUM_FULL:"intSumFull"};mstrmojo.gm.EnumAxis={DssAxisReserved:0,DssAxisRows:1,DssAxisColumns:2,DssAxisPages:3,DssAxisChapters:4,DssAxisAll:5};mstrmojo.gm.EnumCombinedLineStyle={NONE:99,THIN:1,THICK:2,DASHED:3,DOTTED:4};mstrmojo.gm.EnumSizeByType={SQUARE:1,CIRCLE:4};mstrmojo.gm.EnumTheme={DARK:0,LIGHT:1};mstrmojo.gm.EnumFitTo={NONE:1,AUTOMATIC:2,COMPACT:3,MANUAL:4};mstrmojo.gm.EnumAxisScale={GLOBAL:0,PERROWCOL:1,PERCELL:2,CUSTOM:3,DIFFERENT:4};mstrmojo.gm.EnumShape={GENERIC:-1,AREA:0,BAR:1,LINE:2,STEPLINE:3,CIRCLE:4,RECTANGLE:5,SQUARE:6,TICK:7,PIESLICE:8,POLYGON:9,PIE:10,RING:11,DEFAULT:12,BULLET:13};mstrmojo.gm.EnumSubtype={AUTO:1,ABSOLUTE:2,STACKED:3,CLUSTERED:4,PERCENT:5};mstrmojo.gm.EnumDataLabels={HIDE:1,SHOW_VALUE_ONLY:2,SHOW_TEXT_ONLY:3};mstrmojo.gm.EnumDataLabelPlacements={AUTOMATIC:1,GENERIC:2,RESERVED:3};mstrmojo.gm.EnumLegend={SHOW:0,HIDE:1,MINIMIZED:2};mstrmojo.gm.EnumLegendMode={RESTORED:1,MINIMIZED:2};mstrmojo.gm.EnumTextAlignH={LEFT:0,MIDDLE:1,RIGHT:2};mstrmojo.gm.EnumTextAlignV={TOP:0,MIDDLE:1,BOTTOM:2};mstrmojo.gm.EnumMaxSizeType={AUTO:1,MANUAL:2,AUTO_FIT:3};mstrmojo.gm.EnumMinSizeType={AUTO:1,MANUAL:2,PROPORTIONAL:3};mstrmojo.gm.EnumAxes={SHOW_BOTH:1,SHOW_NONE:2,SHOW_X:3,SHOW_Y:4};mstrmojo.gm.EnumMatrixLines={SHOW_ALL:1,SHOW_NONE:2,SHOW_HORIZONTAL:3,SHOW_VERTICAL:4};mstrmojo.gm.EnumGridLines={AUTO:1,SHOW:2,HIDE:3,SHOW_MAJOR_ONLY:4};mstrmojo.gm.EnumNGMGridLines={SHOW_Y:1,SHOW_X:2,SHOW:3,HIDE:4,AUTO:5};mstrmojo.gm.LineMarkerShape={Circle:4,Square:1};mstrmojo.gm.ShapeFillType={Solid:0,Gradient:14,Pattern:3};mstrmojo.gm.ShapeFillEffect={None:1,Bevel:2};mstrmojo.gm.Enum3DGMapping={SizeType:"9999_1002",SizeValue:"9999_1003",lgdBgFillClr:"6_564",lgdBgFillStyle:"6_10002",lgdBgFillEff:"6_608",lgdFntSz:"9_603",lgdFntFml:"9_576",lgdFntStyle:"9_584",lgdFntClr:"9_574",LegendVisibleness:"9999_116",xAxShw:"9999_124",xAxTtCtt:"293_9999",xAxTtFntClr:"293_574",xAxTtFntFml:"293_576",xAxTtFntStyle:"293_584",xAxLbFntSz:"272_603",xAxLbFntFml:"272_576",xAxLbFntStyle:"272_584",yAxShw:"9999_125",yAxTtCtt:"299_9999",yAxTtFntClr:"299_574",yAxTtFntFml:"299_576",yAxTtFntStyle:"299_584",yAxLbFntSz:"296_603",yAxLbFntFml:"296_576",yAxLbFntStyle:"296_584",bgFillClr:"1_564",bgFillEff:"1_879",bgFillTrans:"1_608",outBdrClr:"1_588"};mstrmojo.gm.EnumRefLineModelType={MAX:1,MIN:2,AVG:3,MED:4,FIRST:5,LAST:6,CONST:7};mstrmojo.gm.EnumTrendLineModelType={BEST_FIT:256,LINEAR:257,LOG:258,EXP:259,POW:260,POLY:261};mstrmojo.gm.EnumTrendRefLevel={DssModelLevelReserved:0,DssModelLevelPerCell:1,DssModelLevelPerRow:2,DssModelLevelPerColumn:3,DssModelLevelPerPanel:4,DssModelLevelLastOne:5};mstrmojo.gm.EnumTimeRole={None:0,YearOfDecade:3083,QuarterOfYear:2826,MonthOfYear:2825,MonthOfQuarter:2569,WeekOfYear:2824,WeekOfQuarter:2568,WeekOfMonth:2312,DayOfYear:2823,DayOfQuarter:2567,DayOfMonth:2311,DayOfWeek:2055,HourOfDay:1798,MinuteOfDay:1797,MinuteOfHour:1541,SecondOfDay:1796,SecondOfHour:1540,SecondOfMinute:1284};mstrmojo.gm.EnumTrendRefModelLabels={DssModelLabelsReserved:-1,DssModelLabelsNone:0,DssModelLabelsType:1,DssModelLabelsMetric:2,DssModelLabelsValue:4};mstrmojo.gm.EnumTRFManipulations={AddTRLine:"141",RemoveTRLine:"142",UpdateTRLine:"143",UpdateForecastInfo:"144"};mstrmojo.gm.EnumShapeFormatStatus={NORMAL:0,PER_COLORBY:1,PER_SHAPE:2};mstrmojo.gm.EnumNGMSubtype={CLUSTERED:0,STACKED:1,PERCENT:2};mstrmojo.gm.EnumBoxPlotMean={NO_MEAN:0,ONLY_MEAN:1,MEAN_STDEV:2};mstrmojo.gm.EnumBoxPlotOutliers={OUTLIERS:0,ALL_POINTS:1,JITTER:0,JTR_MAN:0.5,POINT_POS:0,POS_MAN:-1.8,POINT_SIZE:6,SIZE_MAN:10,MANUAL:1};mstrmojo.gm.EnumHistogram={AUTOMATIC:1,MANUAL:0,CUST_INPUT:2,DATASET:3,BY_BIN_SIZE:4,BY_BIN_NUMBER:5};mstrmojo.gm.EnumContainerFitModes={AUTOMATIC:0,FIT_TO_CONTAINER:1,FIT_TO_CONTENT:2};mstrmojo.mstr.EnumDataType={DataTypeUnknown:-1,DataTypeReserved:0,DataTypeInteger:1,DataTypeUnsigned:2,DataTypeNumeric:3,DataTypeDecimal:4,DataTypeReal:5,DataTypeDouble:6,DataTypeFloat:7,DataTypeChar:8,DataTypeVarChar:9,DataTypeLongVarChar:10,DataTypeBinary:11,DataTypeVarBin:12,DataTypeLongVarBin:13,DataTypeDate:14,DataTypeTime:15,DataTypeTimeStamp:16,DataTypeShort:21,DataTypeLong:22,DataTypeMBChar:23,DataTypeBool:24,DataTypePattern:25,DataTypeBigDecimal:30,DataTypeCellFormatData:31,DataTypeInt64:34};(function(){function A(C){return C.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&");}mstrmojo._ImageHelper=mstrmojo.provide("mstrmojo._ImageHelper",{getImage:function B(D){var E=mstrApp,C=E.getConfiguration();if(D){if(D.indexOf("\\")>=0){D=D.replace(/\\/g,"/");}D=A(D);if(D===decodeURI(D)){D=encodeURI(D);}}if(C&&D&&D.indexOf("://")===-1){D=C.getHostUrlByProject(E.getCurrentProjectId())+D;}return(mstrApp.useBinaryFormat)?String(mstrMobileApp.getImage(D)):D;}});}());mstrmojo.mstr.EnumDSSXMLBaseFormType={DssXmlBaseFormReserved:0,DssXmlBaseFormHidden:-1,DssXmlBaseFormDateTime:1,DssXmlBaseFormNumber:2,DssXmlBaseFormText:3,DssXmlBaseFormPicture:4,DssXmlBaseFormUrl:5,DssXmlBaseFormEmail:6,DssXmlBaseFormHTMLTag:7,DssXmlBaseFormDate:8,DssXmlBaseFormTime:9,DssXmlBaseFormSymbol:10,DssXmlBaseFormBigDecimal:11,DssXmlBaseFormPhoneNumber:12};mstrmojo.mstr.EnumDSSXMLBaseFormType.convertDataType2BaseFormType=function(B){var A={0:2,1:2,2:2,3:2,4:2,5:2,6:2,7:2,8:3,9:3,10:3,11:2,12:2,13:2,14:8,15:9,16:1,17:3,18:3,21:2,22:2,23:3,30:11,31:2,33:3,34:2};return A[B]||0;};(function(){mstrmojo.vi._MonitorsAppState=mstrmojo.provide("mstrmojo.vi._MonitorsAppState",{onAppStateChange:function(B){if(this._super){this._super(B);}},init:function A(B){this._super(B);if(mstrApp.attachEventListener){mstrApp.attachEventListener("appStateChange",this.id,"onAppStateChange");}}});}());(function(){mstrmojo.StringBuffer=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.StringBuffer",append:function A(C){if(!this.buf){this.reset();}this.buf[++this.len]=C;return this;},reset:function B(){this.buf=[];this.len=-1;}});mstrmojo.StringBuffer.prototype.toString=function(D){var C=this.buf;return(C&&C.join(D||""))||"";};}());mstrmojo.mstr.EnumFunction={FunctionCustom:-1,FunctionReserved:0,FunctionPlus:1,FunctionMinus:2,FunctionTimes:3,FunctionDivide:4,FunctionUnaryMinus:5,FunctionEquals:6,FunctionNotEqual:7,FunctionGreater:8,FunctionLess:9,FunctionGreaterEqual:10,FunctionLessEqual:11,FunctionSum:12,FunctionCount:13,FunctionAvg:14,FunctionMin:15,FunctionMax:16,FunctionBetween:17,FunctionLike:18,FunctionAnd:19,FunctionOr:20,FunctionNot:21,FunctionIn:22,FunctionRank:23,FunctionAbs:24,FunctionRunningSum:25,FunctionRunningAvg:26,FunctionMovingSum:28,FunctionMovingAvg:27,FunctionProduct:29,FunctionMedian:30,FunctionMode:31,FunctionStdev:32,FunctionVar:33,FunctionGeomean:34,FunctionEqualEnhanced:35,FunctionNotEqualEnhanced:36,FunctionGreaterEqualEnhanced:37,FunctionLessEqualEnhanced:38,FunctionBetweenEnhanced:39,FunctionBanding:40,FunctionBandingC:41,FunctionBandingP:42,FunctionNotLike:43,FunctionNotBetween:44,FunctionIntersect:45,FunctionIntersectIn:46,FunctionNullToZero:47,FunctionZeroToNull:48,FunctionApplySimple:49,FunctionApplyAggregation:50,FunctionApplyLogic:51,FunctionApplyComparison:52,FunctionApplyRelative:53,FunctionIsNull:54,FunctionIsNotNull:55,FunctionUcase:56,FunctionNotIn:57,FunctionNTile:58,FunctionPercentile:59,FunctionMovingMax:60,FunctionMovingMin:61,FunctionMovingDifference:62,FunctionMovingStdev:63,FunctionExpWghMovingAvg:64,FunctionMovingCount:65,FunctionRunningMax:66,FunctionRunningMin:67,FunctionRunningStdev:68,FunctionRunningCount:69,FunctionExpWghRunningAvg:70,FunctionNotBetweenEnhanced:71,FunctionConcat:72,FunctionFirstInRange:73,FunctionLastInRange:74,FunctionValueSegment:75,FunctionContains:76,FunctionBeginsWith:77,FunctionEndsWith:78,FunctionNotContains:79,FunctionNotBeginsWith:80,FunctionNotEndsWith:81,FunctionCase:82,FunctionCaseV:83,FunctionStdevP:84,FunctionRunningStdevP:85,FunctionMovingStdevP:86,FunctionNTileS:87,FunctionNTileVS:88,FunctionVarP:89,FunctionCurrentDate:90,FunctionDayOfMonth:91,FunctionDayOfWeek:92,FunctionDayOfYear:93,FunctionWeek:94,FunctionMonth:95,FunctionQuarter:96,FunctionYear:97,FunctionCurrentDateTime:98,FunctionCurrentTime:99,FunctionHour:100,FunctionMinute:101,FunctionSecond:102,FunctionMilliSecond:103,FunctionConcatNoBlank:104,FunctionLength:105,FunctionLower:106,FunctionLTrim:107,FunctionPosition:108,FunctionRTrim:109,FunctionSubStr:110,FunctionInitCap:111,FunctionTrim:112,FunctionRightStr:113,FunctionLeftStr:114,FunctionGreatest:115,FunctionLeast:116,FunctionFirst:117,FunctionLast:118,FunctionAdd:134,FunctionAverage:135,FunctionMultiply:136,FunctionBandingM:137,FunctionOLAPSum:138,FunctionOLAPAvg:139,FunctionOLAPCount:140,FunctionOLAPMax:141,FunctionOLAPMin:142,FunctionLag:143,FunctionLead:144,FunctionPercentRank:166,FunctionConcatAgg:177,FunctionTuple:1000};mstrmojo.EnumRWUnitType={LAYOUT:0,HEADER:2,FOOTER:3,SUBSECTION:4,DETAILS:5,PAGEHEADER:6,PAGEFOOTER:7,PANELSTACK:8,PANEL:9,UNITCONTAINER:11,GRID:521,GRAPH:522,GRIDGRAPH:527,RECTANGLE:101,IMAGE:102,LINE:105,TEXTFIELD:106,HTMLCONTAINER:107,SELECTOR:111,ROUNDEDRECTANGLE:112,VISUALIZATION:114,MOJOVISUALIZATION:115};mstrmojo.mstr.EnumDSSConsolidationType={DssNormal:0,DssDerivedElement:1,DssRecursiveDerivedElement:2};(function(){mstrmojo.mstr.search._IconCssClassBuilder=mstrmojo.provide("mstrmojo.mstr.search._IconCssClassBuilder",{_mixinName:"mstrmojo.mstr.search._IconCssClassBuilder",getIconCssClass:function A(B){B=B||this.data;return B.ccss||("t"+B.t+(B.st?" st"+B.st:"")+(B.isc?" isc":"")+(B.dvm?" dvm"+B.dvm:""));}});}());(function(){mstrmojo.vi.ui.theme=mstrmojo.provide("mstrmojo.vi.ui.theme",{getThemeClass:function A(){var D=this.parent||this.opener,C="",B;while(D){var E=D.themeClassName;if(E){C=E;break;}B=D.parent||D.opener;if(B===D){break;}D=B;}return C;}});}());(function(){var A=400,B=1500;mstrmojo._CanHandleTwoClicks=mstrmojo.provide("mstrmojo._CanHandleTwoClicks",{firstClickTimeStamp:undefined,firstClickTarget:undefined,onclick:function(C){var D=new Date();timeStamp=D.getTime();if(D-this.firstClickTimeStamp<B&&D-this.firstClickTimeStamp>A){C.secondTarget=C.getTarget();C.firstTarget=this.firstClickTarget;this.onTwoClicks(C);C.cancel();}else{this.firstClickTarget=C.getTarget();this.firstClickTimeStamp=timeStamp;}if(this._super){this._super(C);}},onTwoClicks:mstrmojo.emptyFn});}());(function(){function Q(U,R,S){if(U.nodeType===3&&R){return U;}else{var T=(R&&U.nodeType===1&&U.lastChild)?U.lastChild:F(U,S);return T?D(T,S):null;}}function F(S,R){return(S===R)?null:(S.previousSibling||F(S.parentNode,R));}function D(S,R){if(S===R){return null;}if(S.nodeType===3&&I(S)){return S;}else{if(S.nodeType===1&&S.lastChild){return D(S.lastChild);}else{return D(F(S,R));}}}function I(R){return R.textContent||R.nodeValue||R.innerText;}function M(U,R,S){if(U.nodeType===3&&R){return U;}else{var T=(R&&U.nodeType===1&&U.firstChild)?U.firstChild:B(U,S);return T?E(T,S):null;}}function B(S,R){return(S===R)?null:(S.nextSibling||B(S.parentNode,R));}function E(S,R){if(S===R){return null;}if(S.nodeType===3&&I(S)){return S;}else{if(S.nodeType===1&&S.firstChild){return E(S.firstChild);}else{return E(B(S,R));}}}mstrmojo.range=mstrmojo.provide("mstrmojo.range",{EDGE:{EDGE_BEGIN:1,EDGE_END:2,EDGE_MIDDLE:-1},getEdgeInfo:function P(T,U){var R=0,S;if(T.nodeType===1){if(window.getSelection){S=document.createRange();S.selectNode(T);R=S.toString().length;}else{S=document.body.createTextRange();S.moveToElementText(T);R=S.text.length;}}else{R=I(T).length;}return U===R?this.EDGE.EDGE_END:(U===0?this.EDGE.EDGE_BEGIN:this.EDGE.EDGE_MIDDLE);},collapseOnNode:function K(U,S){if(!U.offsetParent){return ;}var T=this.getSelection(),R=this.getRange();if(window.getSelection){R.selectNodeContents(U);R.collapse(S);T.removeAllRanges();T.addRange(R);}else{R.moveToElementText(U);R.collapse(S);R.select();}},collapseOnTextNode:function L(U,V){var T=this.getSelection(),S=this.getRange();if(window.getSelection){var R=M(U,true);S.setStart(R,V);S.collapse(true);T.removeAllRanges();T.addRange(S);}else{S.moveToElementText(U);S.collapse(true);S.move("character",V);S.select();}},collapseOnTextNodeIE:function C(S,T){var U=M(S,true),R;while(U!==null){R=I(U).length;if(R>=T){this.collapseOnTextNode(U,T);break;}else{T-=R;U=M(U,false);}}},getRangeInfo:function J(X,e){var Z=null,k,c=this.getRange(),b;if(X&&X===c.startContainer){var g=c.startContainer.firstChild,U=g&&g.firstChild,d=U&&U.firstChild;if(d){c.setStart(d,c.startOffset);c.setEnd(d,c.endOffset);}}if(window.getSelection){var W=function(m,o,n){var l=m.cloneRange();l.collapse(n);l.setStartBefore(o);return l.toString().length;},S=c.startContainer,f=c.startOffset;if(S.nodeType===1){f=W(c,S,true);}Z={collapsed:c.collapsed,startContainer:S,startOffset:e?e.startOffset:f};if(!c.collapsed){var V=c.endContainer,R=c.endOffset;if(V.nodeType===1){R=W(c,V,false);}Z.endContainer=V;Z.endOffset=R;}Z.range=c;}else{var j,a,Y=function(o,p){var n=o.duplicate(),l=document.body.createTextRange(),m;n.collapse(p);m=n.parentElement();l.moveToElementText(m);l.setEndPoint("EndToStart",n);return{container:m,offset:l.text.length};},h=Y(c,true),T;Z={collapsed:(c.compareEndPoints("StartToEnd",c)===0),startContainer:h.container,startOffset:h.offset};if(!Z.collapsed){T=Y(c,false);Z.endContainer=T.container;Z.endOffset=T.offset;}}return Z;},collapse:function O(S){if(window.getSelection){var T=this.getSelection();if(S){T.collapseToStart();}else{T.collapseToEnd();}}else{var R=this.getRange();R.collapse(S);R.select();}},selectSingleNode:function H(T){var S=this.getSelection(),R=this.getRange();if(window.getSelection){R.selectNodeContents(T);S.removeAllRanges();S.addRange(R);}else{R.moveToElementText(T);R.select();}},selectMultipleNodes:function N(W,S,X,U){var V=this.getSelection(),T=this.getRange();if(window.getSelection){T.setStart(W,S);T.setEnd(X,U);V.removeAllRanges();V.addRange(T);}else{W=(W.nodeType===3)?W.parentNode:W;T.moveToElementText(W);T.move("character",S);X=(X.nodeType===3)?X.parentNode:X;var R=document.body.createTextRange();R.moveToElementText(X);R.move("character",U);T.setEndPoint("EndToStart",R);T.select();}},getSelection:function G(){if(window.getSelection){return window.getSelection();}else{return document.selection;}},getRange:function A(){if(window.getSelection){selection=window.getSelection();if(selection.rangeCount>0){return selection.getRangeAt(0);}else{return document.createRange();}}else{return document.selection.createRange();}}});}());mstrmojo.mstr.EnumNodeProperties={NORMAL:0,DRILL:1,CONDITION:2};(function(){mstrmojo._CanRenderChildrenOnShow=mstrmojo.provide("mstrmojo._CanRenderChildrenOnShow",{_subs_renderOnShow:null,childRenderCheck:function B(D){if(this.renderMode!=="onshow"){return this._super(D);}if(D.visible){return this._super(D);}var C=this._subs_renderOnShow;if(!C){C={};this._subs_renderOnShow=C;}if(!C[D.id]){C[D.id]=D.attachEventListener("visibleChange",this.id,"_on_child_visibleChange");}return false;},_on_child_visibleChange:function A(C){if(this.hasRendered){var E=C&&C.src;if(E&&this.childRenderCheck(E)){var D=this._subs_renderOnShow;if(D){E.detachEventListener(D[E.id]);delete D[E.id];}E.render();}}}});}());mstrmojo.vi.models.EnumDragSources={DATASETS:1,VIZ_EDITOR:2,FILTERS:3,ALL_OBJECT_LIST:4,VIZ:5,TOC_CHAPTER:6,TOC_PAGES_LIST:7,VIZ_LAYER:8};(function(){mstrmojo.cookies={};var C="%26",E="%3D",B=mstrmojo.cookies,D=function(){var F=document.cookie;if(!F||!(typeof F==="string")||F.indexOf("bSet")<0){return false;}return true;},A=function(){var F=document.cookie;F=F.split(";");for(s in F){if(F[s].indexOf("bSet")>=0){return F[s];}}return null;};mstrmojo.cookies.updateCookieSetting=function(H,N,J){try{if(!D()&&!J){return ;}var K=document.cookie,M=H+E+N+C;if(K.indexOf(H)>=0){var F=H+E,G=F+(B.getCookieSetting(H)||0),I=F+N;if(I!=G){document.cookie=K.replace(G,I);}}else{if(K.indexOf("bSet")>=0){document.cookie=K.replace("bSet=","bSet="+M);}else{if(J){document.cookie="bSet="+M+";"+K;}}}}catch(L){mstrmojo.alert(L);return ;}};mstrmojo.cookies.getCookieSetting=function(F){try{return B.getCookieList()[F];}catch(G){mstrmojo.alert(G);return ;}};mstrmojo.cookies.getCookieList=function(){try{if(!D()){return[];}var G=A(),F={},H=null;G=G.replace("bSet=","").split(C);for(H in G){H=G[H].split(E);F[H[0]]=H[1];}return F;}catch(I){mstrmojo.alert(I);return ;}};mstrmojo.cookies.enabledCookieOnBrowser=function(){var F=document.cookie;if(!F||!(typeof F==="string")){return false;}return true;};})();mstrmojo.mstr.EnumDSSXMLObjectSubTypes={Unknown:-1,Reserved:0,Filter:256,CustomGroup:257,Template:512,ReportGrid:768,ReportGraph:769,ReportEngine:770,ReportText:771,ReportDatamart:772,ReportBase:773,ReportGridAndGraph:774,ReportNonInteractive:775,ReportCube:776,ReportIncrementalRefresh:777,ReportTransaction:778,ReportEmmaCube:779,ReportEmmaIncrementalRefresh:780,Metric:1024,SubtotalDefinition:1025,SystemSubtotal:1026,MetricDMX:1027,DssSubTypeMetricTraining:1028,Style:1536,AggMetric:1792,Folder:2048,Device:2304,Prompt:2560,PromptBoolean:2561,PromptLong:2562,PromptString:2563,PromptDouble:2564,PromptDate:2565,PromptObjects:2566,PromptElements:2567,PromptExpression:2568,PromptExpressionDraft:2569,PromptDimty:2570,PromptBigDecimal:2571,Function:2816,Attribute:3072,AttributeRole:3073,AttributeTransformation:3074,AttributeAbstract:3075,AttributeRecursive:3076,Fact:3328,DimensionSystem:3584,DimensionUser:3585,DimensionOrdered:3586,DimensionUserHierarchy:3587,Table:3840,TablePartitionMD:3841,TablePartitionWH:3842,DatamartReport:4096,FactGroup:4352,Resolution:4864,AttributeForm:5376,FormSystem:5377,FormNormal:5378,Schema:5632,Format:5888,Catalog:6144,CatalogDefn:6400,Column:6656,PropertyGroup:6912,PropertySet:7168,DBRole:7424,DBRoleDataImport:7425,DBRoleOAuth:7427,DBRoleGenericDataConnector:7430,DBLogin:7680,DBConnection:7936,Project:8192,ServerDef:8448,User:8704,UserGroup:8705,Transmitter:8705,Configuration:9216,Request:9472,Search:9984,SearchFolder:10240,Datamart:10496,FunctionPackageDefinition:10752,Role:11008,RoleTransformation:11009,SecurityRole:11264,InBox:11520,InBoxMsg:11776,Consolidation:12032,ConsolidationManaged:12033,ConsolidationElement:12288,ScheduleEvent:12544,ScheduleObject:12800,ScheduleTrigger:13056,Link:13312,DBTable:13568,DBTablePMT:13569,TableSource:13824,DocumentDefinition:14080,ReportWritingDocument:14081,DocumentTheme:14082,DrillMap:14336,DBMS:14592,MDSecurityFilter:14848,MonitorPerformance:15104,MonitorJobs:15105,MonitorUserConnections:15106,MonitorDBConnections:15107,PromptAnswer:15232,PromptAnswers:15360,PromptAnswerBoolean:15233,PromptAnswerLong:15234,PromptAnswerString:15235,PromptAnswerDouble:15236,PromptAnswerDate:15237,PromptAnswerObjects:15238,PromptAnswerElements:15239,PromptAnswerExpression:15240,PromptAnswerExpressionDraft:15241,PromptAnswerDimty:15242,PromptAnswerBigDecimal:15243,PromptAnswerInt64:15244,GraphStyle:15616,ChangeJournalSearch:15872,BlobUnknown:16128,BlobOther:16129,BlobImage:16130,BlobProjectPackage:16131,BlobExcel:16132,BlobHTMLTemplate:16133,DashboardTemplate:16384,Flag:16640,ChangeJournal:16896,ExternalShortcutUnknown:17152,ExternalShortcutURL:17153,ExternalShortcutSnapshot:17154,ExternalShortcutTarget:17408,Reconciliation:17664,DerivedAttribute:3077,PaletteSystem:17920,PaletteCustom:17921,Thresholds:18432,SubscriptionAddress:65281,SubscriptionContact:65282,SubscriptionInstance:65283};mstrmojo.chart.model.enums.EnumDSSObjectType={DssTypeUnknown:-1,DssTypeReserved:0,DssTypeGeneric:5,DssTypeFormatBAD:46,DssTypeFilter:1,DssTypeTemplate:2,DssTypeReportDefinition:3,DssTypeMetric:4,DssTypeStyle:6,DssTypeAggMetric:7,DssTypeFolder:8,DssTypeDevice:9,DssTypePrompt:10,DssTypeFunction:11,DssTypeAttribute:12,DssTypeFact:13,DssTypeDimension:14,DssTypeTable:15,DssTypeDatamartReport:16,DssTypeFactGroup:17,DssTypeShortcut:18,DssTypeResolution:19,DssTypeMonitor:20,DssTypeAttributeForm:21,DssTypeSchema:22,DssTypeFormat:23,DssTypeCatalog:24,DssTypeCatalogDefn:25,DssTypeColumn:26,DssTypePropertyGroup:27,DssTypePropertySet:28,DssTypeDBRole:29,DssTypeDBLogin:30,DssTypeDBConnection:31,DssTypeProject:32,DssTypeServerDef:33,DssTypeUser:34,DssTypeTransmitter:35,DssTypeConfiguration:36,DssTypeRequest:37,DssTypeScript:38,DssTypeSearch:39,DssTypeSearchFolder:40,DssTypeDatamart:41,DssTypeFunctionPackageDefinition:42,DssTypeRole:43,DssTypeSecurityRole:44,DssTypeLocale:45,DssTypeConsolidation:47,DssTypeConsolidationElement:48,DssTypeScheduleEvent:49,DssTypeScheduleObject:50,DssTypeScheduleTrigger:51,DssTypeLink:52,DssTypeDbTable:53,DssTypeTableSource:54,DssTypeDocumentDefinition:55,DssTypeDrillMap:56,DssTypeDBMS:57,DssTypeMDSecurityFilter:58,DssTypePromptAnswer:59,DssTypePromptAnswers:60,DssTypeGraphStyle:61,DssTypeChangeJournalSearch:62,DssTypeNCSObjects:255,DssTypeReservedLastOne:63};(function(){var B=1,C=2,A=4;mstrmojo._IsThresholdConditionTarget=mstrmojo.provide("mstrmojo._IsThresholdConditionTarget",{_mixinName:"mstrmojo._IsThresholdConditionTarget",update:function D(G){var E=G.data.tta;var F=(E&B)>0,H=(E&C)>0;if(F&&this.preservedEnabled===undefined){this.preservedEnabled=!!this.enabled;}if(H&&this.preservedVisible===undefined){this.preservedVisible=!!this.visible;}this.set("enabled",F?false:this.preservedEnabled!==undefined?this.preservedEnabled:this.enabled);this.set("visible",H?false:this.preservedVisible!==undefined?this.preservedVisible:this.visible);this.set("required",(E&A)>0);if(this._super){this._super(G);}}});}());mstrmojo.mstr.EnumDSSXMLObjectTypes={Generic:-2,Unknown:-1,Reserved:0,Filter:1,Template:2,ReportDefinition:3,Metric:4,Style:6,AggMetric:7,Folder:8,SubscriptionDevice:9,Prompt:10,Function:11,Attribute:12,Fact:13,Dimension:14,Table:15,DatamartReport:16,FactGroup:17,Shortcut:18,Resolution:19,Monitor:20,AttributeForm:21,Schema:22,Format:23,Catalog:24,CatalogDefn:25,Column:26,PropertySet:28,DBRole:29,DBLogin:30,DBConnection:31,Project:32,ServerDef:33,User:34,Configuration:36,Request:37,Script:38,Search:39,SearchFolder:40,Datamart:41,FunctionPackageDefinition:42,Role:43,SecurityRole:44,Locale:45,Consolidation:47,ConsolidationElement:48,ScheduleEvent:49,ScheduleObject:50,ScheduleTrigger:51,Link:52,DbTable:53,TableSource:54,DocumentDefinition:55,DrillMap:56,DBMS:57,MDSecurityFilter:58,PromptAnswer:59,PromptAnswers:60,ObjectTag:65,ReservedLastOne:66};(function(){var C="xviPopopNode";function A(G){var H={};H[C]=G;return H;}mstrmojo.ui.menus._IsMenuPopup=mstrmojo.provide("mstrmojo.ui.menus._IsMenuPopup",{init:function E(G){this._super(G);var J=this.popupConfig;if(!J){throw new Error("Cannot instantiate popup without supplying the popupConfig property.");}this.addDisposable(J);var H=mstrmojo.all[J.hostId],I=J.hostElement;if(J.isHostedWithin&&H&&I){H.addSlots(A(I));this.slot=C;}},closeAllMenus:function F(){var G=this.opener;if(G&&G.closePopup){G.closePopup();}if(G&&G.closeAllMenus){G.closeAllMenus();}},open:function B(H,G){if(this._super){this._super(H,G);}},close:function D(G){if(this.slot===C){this.opener.removeSlots(A(null));}if(this._super){this._super(G);}var H=mstrmojo.all[this.popupConfig.hostId];if(H){H.closePopup();}this.destroy();}});}());if(!mstrmojo.LoadedExternalJSURLs){mstrmojo.LoadedExternalJSURLs={};}function LoadScriptsExternalJSCallback(){mstrmojo.LoadedExternalJSURLs[mstrmojo._LoadsScript.esScripts.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(mstrmojo._LoadsScript.esScripts,mstrmojo._LoadsScript.callback,mstrmojo._LoadsScript.esScritsContext);mstrmojo._LoadsScript.ExternalJSCallbackIsBusy=false;}if(!mstrmojo._LoadsScript){mstrmojo._LoadsScript=mstrmojo.provide("mstrmojo._LoadsScript",{_meta_usesSuper:false,requiresMethod:function requiresMethod(B){if(!B){return false;}if(typeof this[B]==="function"){return true;}var A=this[B]||(this.methods&&(this.methods[B]||this.methods["*"]));if(typeof A==="string"){this.requiresCls(A);return typeof this[B]==="function";}return false;},requiresCls:function req(mixins,callback){if(mixins){if(typeof mixins==="string"){mixins=[mixins];}mstrmojo.requiresCls.apply(mstrmojo,mixins);var p=this.constructor.prototype,pm=p.mixins;if(!pm){p.mixins={};pm=p.mixins;}var mx=mstrmojo.mixin,i,len;for(i=0,len=mixins.length;i<len;i++){var fqcn=mixins[i];if(!pm[fqcn]){var m=eval(mixins[i]);mx(m,p);pm[fqcn]=true;if(m.__onmixin__){m.__onmixin__.apply(this,[]);}}}if(callback){callback.apply(this,[]);}}},requiresContrib:function reqCb(C,B){var A=this[C];if(A){var E,D=false;if(typeof A==="string"){E=mstrmojo.registry.ref(A);this[C]=E;D=true;}else{E=A;}if(E&&(D||B)){E.parent=this;if(E.startup){E.startup();}}return E;}return null;},requiresExternalScripts:function requiresExternalScripts(G,H,C){if(G&&G instanceof Array){if(G.length===0){if(H){H.call(C);}return false;}if(G[0]&&G[0].forceReload===false&&mstrmojo.LoadedExternalJSURLs[G[0].url]){G.splice(0,1);return this.requiresExternalScripts(G,H,C);}var A=document.createElement("script"),D=!!document.all,B=G[0].url,F=G[0].onError;if(B.substr(0,7)==="file://"){B=B.substr(7);}else{if(mstrApp.isSingleTier&&B.substr(0,4)!=="http"){B="http:"+B;}}A.type="text/javascript";A.src=B;if(F){A.onerror=function(){if(F&&F.callback&&C){F.callback.call(C,F.params);}};}if(!G[0].callbackParamName){if(D){A.onreadystatechange=function(){if(A.readyState==="loaded"||A.readyState==="complete"){A.onreadystatechange=null;A.onerror=null;if(G.length>1){mstrmojo.LoadedExternalJSURLs[G.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(G,H,C);}else{if(G.length===1){mstrmojo.LoadedExternalJSURLs[G[0].url]=true;if(H){H.call(C);}}}}};}else{A.onload=function(){A.error=null;A.onload=null;if(G.length>1){mstrmojo.LoadedExternalJSURLs[G.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(G,H,C);}else{if(G.length===1){mstrmojo.LoadedExternalJSURLs[G[0].url]=true;if(H){H.call(C);}}}};}}else{if(G[0].callbackParamName.length!==0){if(mstrmojo._LoadsScript.ExternalJSCallbackIsBusy&&mstrmojo._LoadsScript.ExternalJSCallbackIsBusy===true){var E=this;window.setTimeout(function(){E.requiresExternalScripts(G,H,C);},500);return ;}mstrmojo._LoadsScript.ExternalJSCallbackIsBusy=true;A.src+="&"+G[0].callbackParamName+"=LoadScriptsExternalJSCallback";mstrmojo._LoadsScript.esScripts=G;mstrmojo._LoadsScript.callback=H;mstrmojo._LoadsScript.esScritsContext=C;}}document.getElementsByTagName("head")[0].appendChild(A);}}});}(function(){mstrmojo._Fetchable=mstrmojo.provide("mstrmojo._Fetchable",{_mixinName:"mstrmojo._Fetchable",blockBegin:1,blockCount:-1,concat:false,items:null,size:function A(){var B=this.items;return(B&&B.length)||0;},next:function(B){if(this.hasNext()){this.getItems(this.blockBegin+this.blockCount,B);}},previous:function(B){if(this.hasPrevious()){var C=this.blockBegin-this.blockCount;C=C<0?0:C;this.getItems(C,B);}},getItems:function(H,F,B){F=F||{};var E=this,D=mstrmojo.emptyFn,C=F.success||D,G=F.failure||D,I=F.complete||D;this._retrieveItems(H,{success:function(J){E.blockBegin=H;E.blockCount=J.bc||30;E.set("items",(E.concat?(E.items||[]).concat(J.items||[]):(J.items||[])));if(J.totalSize){E.totalSize=J.totalSize;}C(J);},failure:function(J){G(J);},complete:function(J){I(J);}},B);},_retrieveItems:function(D,C,B){alert("Object which mixes in this mixin has not implemented this method - _retrieveItems().");},hasNext:function(){return(((this.concat?1:this.blockBegin)+((this.items&&this.items.length)||0))<((mstrApp.isAppStatePause&&mstrApp.isAppStatePause())?this.totalSize:(this.totalSize+1)));},hasPrevious:function(){return this.blockBegin>1;}});}());(function(){mstrmojo.requiresDescs(9380,9381,9382,9383,9384,9385,9379,15106,15107,10639,10159,9705,9704);mstrmojo.DI.DIConstants=mstrmojo.provide("mstrmojo.DI.DIConstants",{invalidObjectNameChars:'\\"[]',invalidObjectNameCharsRegex:/[\\"\[\]]/,sourceItemLinkType:{dbList:0,oauthPara:1},setDefaultOAuthParamCMD:"MSTR_DEFAULT_OAUTH_PARAMS",actions:{none:0,importSource:1,editImport:2,transform:3,changeSheet:4,publish:5,changeMappings:6,refine:7,quickPreview:8,savePublish:9,getFlatPreview:10,refreshData:11,mergeCube:12},localStorageKey:{HGOSFileTypeTooltipPop:"HGOSFileTypeTooltipPop"},requestFlag:{mapping:1,preview:2,sourceInfo:4,refineSourceInfo:8,sheets:16,crb:32,transformations:64,transformedPreview:128,relationship:256,stateInfo:512,anyState:268435456,fullData:1024,refineInnerData:2048},formMappingFlag:{formMappingFlagReserved:0,formMappingFlagRemoveGeoRole:1,formMappingFlagRemoveTimeRole:2,formMappingFlagRemoveDeriveFlags:4},browseFlag:{reportBindingTable:1,dataPreview:4,publish:16,cubeConfig:68,reportLevelProperty:256},importBehaviorFlag:{reserved:0,newColumnsSilent:1,dataTypeSilent:2},saveAsFlags:{saveAsOverWrite:32,saveAsManaged:524288,saveAsDDA:33554432,saveAsInMemory:67108864,saveAsWithPrompts:4096,saveAsWithAnswers:4},connectLiveSupport:{connectLiveSupportUnknown:0,connectLiveSupportDDAOrInMemory:1,connectLiveSupportInMemoryOnly:2,connectLiveSupportDDAOnly:3},xdaType:{excel:272,text:288,refine:384,salesforce:337,querybuilder:352,ffsql:304,mdx:2,customFreeFormSQL:3,googleAnalytics:390,googleBigQuery:341,googleBigQueryFFSQL:342,googleBigQuerySingleTable:345,qbSingleTable:368,twitter:343,facebook:344,dataImport:256,projectsImport:400,sparkDataset:416,dataImportFileExcel:16|256,dataImportFileText:32|256,dataImportCustomSQL:48|256,dataImportTable:64|256,dataImportOAuth:80|256,dataImportBISource:144|256,dataImportOAuthSalesforce:1|336,dataImportOAuthGDocs:2|336,dataImportOAuthGDrive:2|336,dataImportOAuthDropbox:3|336,dataImportOAuthGAnalytics:4|336,dataImportOAuthGBigQuery:5|336,dataImportOAuthGBigQueryFFSQL:6|336,dataImportOAuthGBigQuerySingleTable:9|336,spark:160|256},fileTypes:[{n:"CSV/TXT",v:"CSV"},{n:"PARQUET",v:"PARQUET"},{n:"AVRO",v:"AVRO"},{n:"ORC",v:"ORC"},{n:"JSON",v:"JSON"},{n:"PARQ",v:"PARQUET",visible:false}],sourceInfoDesc:{json:"DB_FILE_TYPE_JSON"},sourceType:{file:1,salesforce:2,dropbox:3,googleDrive:4,googleAnalytics:5,googleBigQuery:6,querybuilder:7,mstrFile:8,mdx:9,hadoop:10,twitter:11,facebook:12,bisource:13,remoteProject:14,importfromcube:15,dataFromPushApi:16,newConnector:17,cloudElement:18},sourceSubtype:{localFile:1,url:2,salesforce:3,dropbox:4,googleDrive:5,googleAnalytics:6,googleBigQuery:7,querybuilder:8,samplefile:9,clipboard:10,googleBigQueryFFSQL:11,searchOnSource:12,mdx:13,hadoop:14,twitter:15,facebook:16,bisource:17,remoteProject:18,googleBigQuerySingleTable:19,hanaSingleTable:20,publicData:21,importfromcube:22,dataFromPushApi:23,cloudElement:24,},backendSourceSubtype:{localFile:65537,url:65539,samplefile:65540,clipboard:65538,newConnector:65544,cloudElement:65552,hadoopFileBrowser:65541,customSQL:131073,customSQLWizard:131074,singleTable:131075,bISources:131076,searchAsASource:131078,salesforce:196609,dropbox:196610,facebook:196611,twitter:196612,googleDrive:196613,googleAnalytics:196614,googleBigQuery:196615,googleBigQueryFFSQLModel:196616,googleBigQuerySingleTable:196617,OLAPSources:327681,publicData:65542,dataFromPushApi:65543,dataFromPushApiV2:65545,cloudElement:65552,},sourceItemType:{file:0,url:1,database:2,hadoop:3,olap:4,publicData:5,salesforce:6,googleAnalytics:7,googleBigQuery:8,googleDrive:9,dropbox:10,searchAsASource:11,clipboard:12,bISources:13,facebook:14,twitter:15,samplefile:16,importFromCube:17,addNewConnector:18,newConnector:19,cloudElement:20,unknow:-1},columnState:{reserved:0,unchanged:1,newColumn:2,missing:4,changed:8},operationMode:{create:0,edit:1,refresh:2,subscribe:3,enterCredentials:4,oauth:5,pickTable:6,hadoopPickTable:7,ffsql:8,hadoopFFsql:9},statusCode:{obtainSource:-2147071874,xformsError:-2147071872,mappingError:-2147071871,edit:1,republish:2,schedule:3,enterCredentials:4,pickTable:5,hadoopPickTable:6,ffsql:7,hadoopFFsql:8},pageType:{intro:0,file:1,database:2,emmaPreview:3,redirect:4,analytics:5,dataSelection:6,suggestNewSource:7,sourceIntro:8,sourceObjects:10,sampleFiles:11,dataset:12,externalPage:13,preview:14,clipboard:15,refine:16,parse:17,mstrFile:18,allProjectSource:19,hadoop:20,twitter:21,facebook:22,sourceObjectsDnD:23,schedule:24,publicData:25,republish:26,sourceAdmin:27,importFromCube:28,addNewConnector:29,newConnector:30,addConnectorList:31,cloudElement:32},backendError:{overwriteObject:-2147212339,noPermission:-2147214579,invalidObjectName:-2147213715,unexpectedDataType:-2147212539,noExternalSession:-2147071844,noPrivilege:-2147212082,salesforceUnsavedReport:-2147212081,salesforceObsoleteReport:-2147212080,maxSizeExceeded:-2147212076,maxSizeExceededURL:-2147212121,salesforceUnresolvedFilter:-2147212074,incrementalRefresh:-2147212287,invalidUrl:-2147212062,fileVersionError:-2147212064,emptySheet:-2147212144,refreshTokenUnavailable:-2147202875,cubeQuotaExceeded:-2147071825,notEnoughSpace:-2147071811,importedURLInvalid:-2147212122,unsupportedFileFormat:-2147212063,objectNameTooLong:-2147217407,noExternalSourceInfo:-2147215346,memoryConsumptionExceeded:-2147215346,cubeQuotaReached:-2147071870,switchingFileType:-2147212140,memoryGovernSizeExceeded:-2147181051,stringTooLong:-2147213718,missingColumn:-2147071871,dataDiscoveryError:-2147211998,refineApplyError:-2147202299,serverOutOfMemory:-2147212055,columnCountMatchError:-2147467259,incompatibleDataTypeError:-2147211983,reportTimeout:-2147212335,requestTimeout:-2147206497,databaseCredentialsNotAvailable:-2147212037,ddasupportIncompatible:-2147215326,mergeInvalidXdatype:-2147215325,notFullyControl:-2147214579,shouldBeIgnored:-2147212123,CECredentialNotAvailable:-2147215317,AuthenticationError:-2147215346,queryEngineGeneralError:-2147212544},transformation:{xtab:1,delimiter:2},application:{platform:"Platform",cloudPersonal:"Personal",cloudProfessional:"Professional"},refreshOptions:{replace:1,append:2,update:4},cubeRefreshType:{dummy:-1,reserved:0,add:1,remove:2,update:3,upsert:4,addNewTable:5,deleteTable:6,replaceTable:7,preserve:8},tableStatsExecutionAction:{reserved:0,forceExecution:1,ignore:4,requireFreshData:268435456},sourcesInfoFlags:{none:0,getReports:1,getUserName:2,getTokensInfo:4,revokeSession:8,getGAnalyticsAccount:64},queryBuilderType:{individualTable:1,multipleTables:2,queryScript:3},relationshipEditType:{create:1,changeERType:2,remove:3,flip:8001},ERType:{reserved:0,ERType11:1,ERType1M:2,ERTypeM1:3,ERTypeMM:4,ERTypeParallel:5,ERTypePerpendicular:6},RSType:{reserved:0,auto:1,geo:2,defined:3},tableStates:{newly:1,old:2},behaviorChangeFlag:{multiSheet:4,remapping:8,refreshData:16},menuItems:{SEPARATOR:-1,NONE:0,TABLE_RENAME:1,DO_NOT_IMPORT:2,FLIP_ORDER:3,DELETE:4,RELATIONSHIP_TYPE:5,ONE_TO_ONE:6,ONE_TO_MANY:7,MANY_TO_ONE:8,MANY_TO_MANY:9,REMOVE:10,REFRESH_DATA:11,REFINE:12,CANCEL_REFINE:13,UNLINK:14,CHANGE_DATA_TYPE:15,MARK_GEO_ROLES:16,CREATE_TIME_ATTRIBUTES:17,TO_METRIC:18,TO_ATTRIBUTE:19,MAP_TO_PROJECT_ATTRIBUTE:20,UNMAP:21,MODIFY_ATTRIBUTE_GROUP:22,CREATE_ATTRIBUTE_GROUP:23,HIDE_ALL_ATTRIBUTE_FORMS:24,DEFINE_RELATIONSHIPS:25,LINK:26,ITEM_RENAME:27,CREATE_MULTIFORM_ATTRIBUTE:28,EDIT_MULTIFORM_ATTRIBUTE:29,ADDTO_MULTIFORM_ATTRIBUTE:30,SHOW_ALL_ATTRIBUTE_FORMS:31,SHOW_ALL_COLUMNS:32,PARTITION:33,REFINE_RENAME:34,REFINE_DELETE:35,REFINE_DELETE_ALL:36,REFINE_RESET:37,REFINE_RESET_ALL:38,PARSE:39,IMPORT:40,UNLINK_ALL:41,CREATE_HIERARCHY_ATTRIBUTE:42,EDIT_HIERARCHY_ATTRIBUTE:43,RESET_HIERARCHY_ATTRIBUTE:44},dataTypeMenuItems:{DATE_TIME:"1",NUMBER:"2",TEXT:"3",URL:"5",EMAIL:"6",HTML_TAG:"7",DATE:"8",TIME:"9",SYMBOL:"10",BIG_DECIMAL:"11",PHONE_NUMBER:"12"},columnDataTypes:{reserved:0,integer:1,unsigned:2,numeric:3,decimal:4,real:5,dtdouble:6,dtfloat:7,dtchar:8,varChar:9,longVarChar:10,binary:11,varBin:12,longVarBin:13,date:14,dttime:15,timeStamp:16,nChar:17,nVarChar:18,nlong:22,bigDecimal:30,cellFormatData:31,utf8Char:33,int64:34},formsOptions:{CREATE_MULTIFORM_ATTRIBUTE:1,EDIT_MULTIFORM_ATTRIBUTE:2,ADDTO_MULTIFORM_ATTRIBUTE:3},hierarchyOptions:{CREATE_HIERARCHY_ATTRIBUTE:1,EDIT_HIERARCHY_ATTRIBUTE:2,RESET_HIERARCHY_ATTRIBUTE:3},rdcsFlag:{ID:1,JOIN_ID:2,FILTER_ID:3,DISTANCE:4},timeRoles:{NONE:0,DATE:1,DATE_TIME:2,TIME:3,SECOND:4,MINUTE:5,HOUR:6,DAY:7,WEEK:8,MONTH:9,QUARTER:10,YEAR:11},contextMenuType:{ITEM_MENU:0,TABLE_MENU:1,PREVIEW_ITEM_MENU:2,LINK_MENU:3},dialogType:{fixRefreshErrorDialog:1,allObjectsViewDialog:2,missingColumnsDialog:3,diPageDialog:4,refreshHistoryDialog:5,alternateSourceValidateDialog:6,ddaConfirmDialog:7,publishStatusDialog:8,saveAsDialog:9,cubesList:10,refinePage:11,multiFormEditor:12,sheetsSelectionDialog:13,partitionGroupDialog:14,parseDataDialog:15,errorDialog:16,warningDialog:17,relationDefineDialog:18,qbImportOptionDialog:19,previewRenameDialog:20,mapProjectsAttributeDialog:21,setOAuthParaDialog:22,objectPicker:23,refineClusteringPage:24,refineExtractDialog:25,refineImportDialog:26,twitterAdvOptDialog:27,credentialsDialog:28,mapProjectsAttributeDialog2:29,setWhiteListDialog:30,binaryUploadDialog:31,authenticationDialog:32,sharingDialog:33,hadoopGatewayManagerDialog:34,hadoopGatewayDialog:35,addConnectorDialog:36,hierarchyAttributeDialog:37,hierarchyAttributeResetDialog:38},dataEvents:{DATA_PREVIEW_EVENT:"dataReturned",NO_DATA_RETURNED_EVENT:"noDataReturned"},cubeSchedStatus:{unexecuted:1,successful:2,unscheduled:3,failed:4},privilegeType:{accessDatabase:1,accessFile:2,accessCloud:3},dbType:{MS_ACCESS:100,ORACLE:200,SQL_SERVER:300,INFORMIX:400,SYBASE:500,REDBRICK:600,DB2:700,TANDEM:800,TERADATA:900,UNKNOWN:1000,GENERIC:1100,SAP:1200,NETEZZA:1300,EXCEL:1400,MSFT_AS:1500,ESSBASE:1600,MYSQL:1700,POSTGRESQL:1800,HPNEOVIEW:1900,METAMATRIX:2000,DATALLEGRO:2100,COMPOSITE:2200,ASTER:2300,VERTICA:2400,OPENACCESS:2500,SYBASE_SQL_ANY:2600,SYBASE_IQ:2700,PARACCEL:2800,TM1:2900,XQUERY:3000,HIVE:3100,SAND:3200,SALESFORCE:3300,HIVETHRIFT:3400,VECTORWISE:3500,ENTERPRISEDB:3600,KOGNITIOWX2:3700,EXASOLUTION:3800,INFORMATICA:3900,SAPHANA:4000,IMPALA:4100,AMAZON_REDSHIFT:4200,DENODO:4300,GOOGLE_DRIVE:4400,DROPBOX:4500,GOOGLE_ANALYTICS:4600,GOOGLE_BIGQUERY:4700,CONNECTION_CLOUD:4800,GOOGLE_BIG_QUERY_FFSQL_MODEL:4900,PARSTREAM:5100,MONGODB:5200,MARKLOGIC:5300,BIG_DATA_ENGINE:5400,SEARCH_ENGINE_SOLR:5500,SPLUNK:5600,TWITTER:5700,FACEBOOK:5800,PIG:6400,URL:7700,newConnector:7900,LOACLFILE:8200},getCubeQuotaAndInfosOptions:{GetCubeQuotaAndInfosReserved:0,GetCubeQuotaAndInfosDefault:1,GetCubeQuotaAndInfosQuotaOnly:2,GetCubeQuotaAndInfosAll:3,GetCubeQuotaAndInfosVI:4},homepageViewMode:{GRID_VIEW:0,LIST_VIEW:1},datasetServeMode:{inMemory:1,dda:2,unknow:3},cubePollStatus:{msgID:0,result:1,prompt:2,error:3,xmlResult:21},ibmDb2Versions:[17,18,21,22,23,24,25,37,45,46,47,48,63,66,74,89,92,101,103,105,123,134,157,172,202,232],hadoopDbTypes:[3100,1100,700,4100,7300,6800,6400,8100],formCategory:{longitude:"2345134F4F5E261C3BB902A874467080",latitude:"B191051C48221A6AE44CA2B65B1B65E3"},urlAuthDBRoles:{anonymous:"CB1CB472A07E41D5AE038232839F2064",windows:"95A5ACC02FE94CBABCB65E4F2D2415B2",kerberos:"317D6F016D784836A724AD4D739E1E9C",integrated:"E966E1A0A4C949108287B2E5086B68EB"},urlAuthDBMSId:"497F2406FA154B86810C71EA3D401D6D",newConnectorDBMSId:"565D5DC3A1124726B85FE53EF992472A",hadoopGateWay:{HGoS_CONFIG_HAS_EXIT:1510,CONNOT_AUTHENTICATE:1511,SPACE_OVER:1512,FAIL_COPY_TO_HOST:1513,INSUFFICIENT:1514,DIRECTORY_NO_EXIST:1515,HGOS_DEPLOYED:1518,HGOS_DEPLOYING:1519,CONNOT_AUTHENTICATE2:1520,HGOS_RUNNING:1521,HGOS_STOPPED:1522,HGOS_NOT_DEPLOYING:1523,HGOST_TAR_NOT_EXIST:1524,HGOS_CONF_NOT_EXIST:1530},workstation:{filerBreakLine:new RegExp("[\r\n]","g"),utils:{shouldShowTitleBar:function(){var A=mstrApp.getRootController().rootView.inPageDialog;return !!mstrApp.isWorkstation&&(!!mstrApp.isPopup||!!A);},setNativeWindow:function(C,F){var B=1110,E=590,D=parseInt(C,10),A=parseInt(F,10);if(!window.FormWrapper||!window.FormWrapper.setWindowFrame){return ;}if(C.match(/%$/)&&F.match(/%$/)){window.FormWrapper.setWindowContentSize(1200,680);}else{D=D<B?B:D;A=A<E?E:A;window.FormWrapper.setWindowContentSize(D,A);}},lockResize:function(){if(!window.FormWrapper||!window.FormWrapper.lockResize){return ;}window.FormWrapper.lockResize();},unlockResize:function(){if(!window.FormWrapper||!window.FormWrapper.unlockResize){return ;}window.FormWrapper.unlockResize();}}},authMode:{ANONYMOUS:0,USERNAME:1,OAUTH:2},authModePrefix:{ANONYMOUS:"AuthMode=Anonymous;URL=",USERNAME:"AuthMode=Basic;URL=",OAUTH:"AuthMode=OAuth;URL="},sdkUrl:{MARKPLACE_URL:"https://community.microstrategy.com/s/gallery?tabset-89baf=202df",QUICK_START_URL:"https://lw.microstrategy.com/msdz/MSDL/GARelease_Current/docs/projects/DataConnectorSDK/Content/topics/Quick_Start_Guide.htm"},originalConnector:{elastic:"DE4A8E15405A36D80BF1E1A2BA6F9B66",tapClicks:"1E8ADD3975DA4609B8D00E6211ACAB6A"},googleAnalyticsUrl:{queryExplorer:"https://ga-dev-tools.appspot.com/query-explorer/"},weekDay:[{n:mstrmojo.desc(9380,"Monday"),v:0},{n:mstrmojo.desc(9381,"Tuesday"),v:1},{n:mstrmojo.desc(9382,"Wednesday"),v:2},{n:mstrmojo.desc(9383,"Thursday"),v:3},{n:mstrmojo.desc(9384,"Friday"),v:4},{n:mstrmojo.desc(9385,"Saturday"),v:5},{n:mstrmojo.desc(9379,"Sunday"),v:6}],dateMon:[{n:mstrmojo.desc(15106,"1st day"),v:"1"},{n:mstrmojo.desc(15107,"15th day"),v:"15"}],timeOfDay:[{n:"12:00AM",v:"12:00AM"},{n:"1:00AM",v:"1:00AM"},{n:"2:00AM",v:"2:00AM"},{n:"3:00AM",v:"3:00AM"},{n:"4:00AM",v:"4:00AM"},{n:"5:00AM",v:"5:00AM"},{n:"6:00AM",v:"6:00AM"},{n:"7:00AM",v:"7:00AM"},{n:"8:00AM",v:"8:00AM"},{n:"9:00AM",v:"9:00AM"},{n:"10:00AM",v:"10:00AM"},{n:"11:00AM",v:"11:00AM"},{n:"12:00PM",v:"12:00PM"},{n:"1:00PM",v:"1:00PM"},{n:"2:00PM",v:"2:00PM"},{n:"3:00PM",v:"3:00PM"},{n:"4:00PM",v:"4:00PM"},{n:"5:00PM",v:"5:00PM"},{n:"6:00PM",v:"6:00PM"},{n:"7:00PM",v:"7:00PM"},{n:"8:00PM",v:"8:00PM"},{n:"9:00PM",v:"9:00PM"},{n:"10:00PM",v:"10:00PM"},{n:"11:00PM",v:"11:00PM"}],schedule:{DAILY:"Daily",WEEKDAY:"Weekday",WEEKLY:"Weekly",MONTHLY:"Monthly"},mainPage:{GRID_MODE:0,LIST_MODE:1},sourceIconClsName:{0:"ds-Generic",1:"ds-DB2",2:"ds-DB2",3:"ds-DB2",4:"ds-InformixWire",5:"ds-InformixXPS",6:"ds-PostgreSQL",7:"ds-SAP",8:"ds-SAP",9:"ds-Oracle",10:"ds-MicroSoft",11:"ds-Teradata",12:"ds-MySQL",13:"ds-GreenPlum",14:"ds-Netezza",15:"ds-WebServices",17:"ds-Infobright",18:"ds-Salesforce",19:"ds-MicroSoft",20:"ds-Actian-n",21:"ds-Amazon-Redshift",22:"ds-Impala",23:"ds-Aster",25:"ds-Actian-n",26:"ds-EnterpriseDB",27:"ds-Vertica",28:"ds-Denodo",29:"ds-CiscoDataVirtualization",31:"ds-MicroSoft",32:"ds-GoogleBigQuery",33:"ds-SAP",35:"ds-IBMBigInsights",39:"ds-TM1",41:"ds-WebServices",43:"ds-Amazon-EMR",44:"ds-Apache-Hive",45:"ds-ClouderaHive",46:"ds-HortonworksHive",47:"ds-MapRHive",48:"ds-apache",49:"ds-SharkSpark",50:"ds-MongoDB",52:"ds-MariaDB",51:"ds-MarkLogic",54:"ds-Splunk",55:"ds-DataDirectCloud",56:"ds-ParStream",58:"ds-Phoenix",59:"ds-MicroSoft",60:"ds-DB2",61:"ds-Oracle",62:"ds-Teradata",63:"ds-SAP",65:"ds-PostgreSQL",66:"ds-MySQL",67:"ds-MariaDB",68:"ds-Amazon-EMR",69:"ds-Apache-Hive",70:"ds-ClouderaHive",71:"ds-HortonworksHive",72:"ds-MapRHive",73:"ds-SharkSpark",75:"ds-Amazon-Redshift",76:"ds-PIVOTALHAWQ",77:"ds-MemSQL",78:"ds-Arcadia-Platform",79:"ds-Altibase",80:"ds-MongoDB",81:"ds-Presto",82:"ds-DB2",83:"ds-DB2",84:"ds-InformixWire",85:"ds-SAP",86:"ds-MicroSoft",87:"ds-MicroSoft",88:"ds-MemSQL",90:"ds-GreenPlum",91:"ds-PIVOTALHAWQ",92:"ds-Netezza",93:"ds-Infobright",94:"ds-Actian-n",95:"ds-Impala",96:"ds-IBMBigInsights",97:"ds-Aster",99:"ds-Actian-n",100:"ds-EnterpriseDB",101:"ds-Vertica",102:"ds-Denodo",103:"ds-CiscoDataVirtualization",105:"ds-DataDirectCloud",106:"ds-ParStream",107:"ds-Arcadia-Platform",109:"ds-Presto",110:"ds-Phoenix",111:"ds-Kognitio",112:"ds-Kognitio",113:"ds-Informatica",114:"ds-Informatica",115:"ds-Apache-Cassandra-JDBC",116:"ds-SAP",117:"ds-Actian",118:"ds-Actian",119:"ds-InformixXPS",120:"ds-Apache-Cassandra-JDBC",121:"ds-MapRDrill",122:"ds-Cirro",123:"ds-EXASolution",124:"ds-EXASolution",125:"ds-Oracle",126:"ds-Oracle",127:"ds-Snowflake",128:"ds-Snowflake",129:"ds-Amazon-Aurora",130:"ds-Amazon-Aurora",131:"ds-Amazon-Athena",132:"ds-Amazon-Athena",133:"ds-MapRDrill",134:"ds-Druid",135:"ds-Druid",139:"ds-MongoBI",157:"ds-GoogleBigQuery",161:"ds-MapD",168:"ds-HortonworksSpark",169:"ds-HortonworksSpark",170:"ds-Yellowbrick",},dispTag:{1:"Database",2:"OLAP",4:"BigData",8:"Database",16:"BigData",32:"BigData"},searchTags:{100:["Database","ODBC"],200:["Database","ODBC"],300:["Database","ODBC"],400:["Database","ODBC"],500:["Database","ODBC"],600:["Database","ODBC"],700:["Database","ODBC"],900:["Database","ODBC"],1100:["Database","ODBC"],1200:["OLAP","Cube"],1300:["Database","ODBC"],1400:["Database"],1500:["OLAP","Cube"],1600:["OLAP","Cube"],1700:["Database","ODBC"],1800:["Database","ODBC"],2200:["Database","ODBC"],2300:["Database","ODBC"],2400:["Database","ODBC"],2800:["Database","ODBC"],2900:["OLAP","Cube"],3000:["Database"],3100:["Database","BigData","Hadoop"],3300:["Cloud"],3500:["Database","ODBC"],3600:["Database","ODBC","BigData"],3800:["Database"],3900:["Database"],4000:["Database","ODBC"],4100:["Database","BigData","Hadoop"],4200:["Database","ODBC"],4300:["Database","ODBC"],4700:["Database","Cloud","BigData"],4800:["Cloud"],5200:["Database","NoSQL"],5300:["Database","NoSQL"],5400:["Hadoop"],6400:["Database","BigData","Hadoop"],6600:["Database"],6700:["Database"],6800:["BigData"],6900:["BigData"],7100:["NoSQL"],7200:["Database"],7300:["BigData","Hadoop"],7500:["Database"],7600:["Database"],8000:["Database"],8100:["BigData"],},srcItemTypes:{ALL_SOURCES:"ALL_SOURCES",STATIC_SOURCE:"STATIC_SOURCE",DBTYPE_SOURCE:"DBTYPE_SOURCE",CUSTOM_CONNECTOR:"CUSTOM_CONNECTOR",CLOUDELEMENT_CONNECTOR:"CLOUDELEMENT_CONNECTOR"},combination:{BigData:["BigData","NoSQL","Search","Hadoop"],Apps:["Apps","oAuth","Cloud","Social","BI","PublicData","CE"]},GenericDBStr:"Generic",dataSourceType:{MONGODB:"mongodb",FILE_URL:"fileUrl",FILE_LOCAL:"fileLocal",ES:"elasticsearch",DROPBOX:"dropbox",GOOGLE_DRIVE:"googleDrive",GOOGLE_ANALYTICS:"googleAnalytics",GOOGLE_BIGQUERY:"googleBigQuery",SALESFORCE:"salesforce",FILE:"file",GENERIC_JDBC:"genericJdbc"},ERDF:{ENUM_LOAD_REPORT_BROWSE_TYPE_BINDINGTABLE:1,ENUM_LOAD_REPORT_BROWSE_TYPE_DATAPREVIEW:4,ENUM_LOAD_REPORT_BINDING_FLAG_ALL:15,ENUM_LOAD_REPORT_PREVIEW_FLAG_MappingInfo:1,ENUM_LOAD_REPORT_PREVIEW_FLAG_DataInfo:2,ENUM_LOAD_REPORT_PREVIEW_FLAG_SourceInfo:4,ENUM_LOAD_REPORT_PREVIEW_FLAG_InnerDataInfo:2048,},DSSSubType:{DSSSUBTYPEATTRIBUTE:3072,DSSSUBTYPEATTRIBUTEROLE:3073,DSSSUBTYPEATTRIBUTETRANSFORMATION:3074,DSSSUBTYPEATTRIBUTEABSTRACT:3075,DSSSUBTYPEATTRIBUTERECURSIVE:3076},DSSExType:{DSSEXDISPARK:416},URLMode:{NormalUrl:0,NewConnector:1,NewConnectorEdit:2,CloudElement:3},disableFeatures:{DISABLE_CUSTOM_CONNECTOR:"disableCustomerConnector",DISABLE_DDA:"disableDDA",DISABLE_QUOTA:"disableQuota",DISABLE_HADOOP:"disableHadoop",DISABLE_BI_TOOLS:"disableBITools",DISABLE_CLIP_BOARD:"disableClipboard",DISABLE_FACE_BOOK:"disableFacebook",DISABLE_TWITTER:"disableTwitter",DISABLE_SAMPLE_FILES:"disableSampleFiles",DISABLE_PUBLIC_DATA:"disablePublicData",DISABLE_MERGE_CUBE:"disableMergeCube",DISABLE_CE_SOURCE:"disableCESource",DISABLE_FLATTERN_DB_SOURCE:"disabledSources"},DssXmlPrivileges:{DssXmlPrivilegesUseDatabaseInstanceManager:57},Enum_SourceCategoryType:{File:1,BigData:2,Database:3,OLAP:4,Customized:5,Apps:6,}});}());(function(){mstrmojo.boxmodel=mstrmojo.provide("mstrmojo.boxmodel",{rangeIntersect:function E(J,H,I,G){if(J<I){return I<=H;}if(J>I){return J<=G;}return true;},px2Inches:function C(H,G){G=parseInt(G,10);return mstrmojo.NumberFormat.getInstance(mstrConfig.decimalSep,mstrConfig.thousandsSep).format(parseFloat((G/H.zf/H.dpi).toFixed(4)));},offset:function F(I,H){var L=I,G=0,K=0;while(I){G+=I.offsetLeft;K+=I.offsetTop;I=I.offsetParent;if(I===H){break;}}var J;for(J=L&&L.parentNode;J&&J!==H;J=J.parentNode){if(J.scrollTop){K-=J.scrollTop;}if(J.scrollLeft){G-=J.scrollLeft;}}return{left:G,top:K};},convert2px:function D(K,I){if(!/px$/.test(I)){var H=document.createElement("img"),G=H.style,J;G.zIndex=-1;G.left=I;K.appendChild(H);J=G.pixelLeft;K.removeChild(H);return J+"px";}return I;},getEdgeQuadrantByPoint:function B(I,H){var G=H.x-I.x,M=H.y-I.y,J=I.w,L=I.h,K=[["Left","Bottom"],["Top","Right"]];if(M>L/J*G){K=K[0];}else{K=K[1];}return(M<-L/J*G+L)?K[0]:K[1];},isPtInPolygon:function A(I,K){var G=I.x,J=I.y,H=false;K.forEach(function(N,L){var M=K[L-1]||K[K.length-1];if((N.y>=J)!==(M.y>=J)){if((G<(M.x-N.x)*(J-N.y)/(M.y-N.y)+N.x)){H=!H;}}});return H;}});}());mstrmojo.mstr.EnumNodeDimty={NodeDimtyReserved:0,NodeDimtyNone:1,NodeDimtyContinuation:2,NodeDimtyExclusiveContinuation:3,NodeDimtyOutputLevel:4,NodeDimtyBreakBy:5,NodeDimtyEmbedded:6,NodeDimtyUnspecified:7};(function(){mstrmojo._HasPopup=mstrmojo.provide("mstrmojo._HasPopup",{_mixinName:"mstrmojo._HasPopup",_lastOpened:null,openPopup:function A(G,E){var C=!!G&&(typeof G==="string")&&!G.match(/\./)&&!!this[G],D=mstrmojo.registry.ref(C?this[G]:G);if(D&&D.open){if(C){this[G]=D;}if(D.disposable!==false){this.addDisposable(D);}var J=D.slot&&this[D.slot];if(J){if(D.parent!==this){if(this.addChildren){this.addChildren([D]);}else{var I=false,F=D.domNode||D.placeholder;if(F&&typeof F==="string"){F=document.getElementById(F);}if(!F){I=true;F=document.createElement("span");D.placeholder=F;}if(I||(F.parentNode!==J)){J.appendChild(F);}}}}try{D.open(this,E);}catch(H){console.log("Error opening popup: "+H);}this._lastOpened=D;}},closePopup:function B(){var C=this._lastOpened;if(C&&C.visible&&C.close){C.close();delete this._lastOpened;}}});}());mstrmojo.EnumSelectionType={ALL:0,ELEMENT:1,BRANCH:2,LEVEL:3,BRANCH_LEVEL:4};(function(){mstrmojo.requiresDescs(2,3,835,2922,4538,14354,14568);var A={ADD:-1,BROWSE:-2,IMAGE:1,MY:2,SHARED:3,RECENT:4,HTML:5,FOLDER:6};mstrmojo.home.EnumHomeCards={types:A,items:[{n:mstrmojo.desc(2922,"Image"),t:A.IMAGE},{n:mstrmojo.desc(3373,"Folder"),t:A.BROWSE,items:[{n:mstrmojo.desc(3,"My Reports"),t:A.MY},{n:mstrmojo.desc(2,"Shared Reports"),t:A.SHARED},{n:mstrmojo.desc(14568,"Other..."),t:A.FOLDER}]},{n:mstrmojo.desc(14354,"Recents"),t:A.RECENT},{n:mstrmojo.desc(4538,"HTML Container"),t:A.HTML}]};}());(function(){mstrmojo.vi._MonitorsLayoutMode=mstrmojo.provide("mstrmojo.vi._MonitorsLayoutMode",{onLayoutModeChange:function(B){if(this._super){this._super(B);}},init:function A(B){this._super(B);if(mstrApp.attachEventListener){mstrApp.attachEventListener("layoutModeChange",this.id,"onLayoutModeChange");}}});}());(function(){mstrmojo._IsGraphDataService=mstrmojo.provide("mstrmojo._IsGraphDataService",{handleUserSingleTap:function A(D,E,B,G,C,F){if(mstrApp.onMobileDevice()){mstrApp.serverRequest({taskId:"handleUserSingleTap",sliceID:D,nodekey:E,x:B,y:G,selectable:C},F);}}});}());(function(){var A={};mstrmojo.NumberFormat={getInstance:function B(F,G){var E=F+"--"+G;if(E in A){return A[E];}var C={parse:function(H){},format:function(H){}};if(F==="."&&G===","){C.parse=function(H){if(!H){return NaN;}var I=H.replace(/,/g,"");return Number(I);};C.format=function(H){return Number(H).toString();};}else{var D=new RegExp("\\"+G,"g");C.parse=function(I){if(!I){return NaN;}var H=I.replace(D,"").replace(F,".");return Number(H);};C.format=function(I){var H=Number(I).toString();return H.replace(".",F);};}A[E]=C;return C;}};})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.hash");var I=mstrmojo.array,B=mstrmojo.hash,D="u;",C="-1";ELEM_HIDDEN_PROP="hid";mstrmojo.elementHelper=mstrmojo.provide("mstrmojo.elementHelper",{buildElemsTerseID:function F(R,Q,U){var P,O;for(O in R){P=R[O];if(P.v){var S=P.v.replace(/\\\\/g,"\u001e").replace(/\\\;/g,"\u001f");var T=S.split(";");if(T&&T.length>1){T[1]=Q;if(U&&T.length>2){T.pop();}P.v=T.join(";").replace(/\u001e/g,"\\\\").replace(/\u001f/g,"\\;");}}}return R;},buildElemsCountStr:function K(T,Q,P){T=(!T||!T.length)?[]:T;Q=(!Q||!Q.length)?[]:Q;function S(U){return U.filter(function(V){return !V[ELEM_HIDDEN_PROP];});}var R=S(T).length,O=S(Q).length;if(I.find(Q,"v",D)>-1){O-=1;}if(I.find(Q,"v",C)>-1){O-=1;}if(P){R=(R<O)?O-R:0;}if(I.find(T,"v",D)>-1||I.indexOf(T,D)>-1){R=O;}return this.buildElemsCountStrByNum(R,O);},buildElemsCountStrByNum:function K(P,O){if(P===O){if(O===0){return"";}return O.toString();}else{if(O===0){return P+" "+mstrmojo.desc(514);}else{if(P>O){return"("+O+")";}}}return mstrmojo.desc(4891,"").replace("##",String(P)).replace("###",String(O));},browseElements:function G(Q,R,P){var O={doNotHold:!(P&&mstrApp.serverProxy),silent:true};mstrApp.serverRequest(mstrmojo.hash.copy(P,R),Q,O);},getIdPresentation:function J(R){if(!!R){var Q=R.charAt(0),O,P,S;if((Q>="g"&&Q<="w")||(Q>="V"&&Q<="Z")){P=false;for(S=1;S<R.length;++S){if(P){P=false;}else{switch(R.charAt(S)){case";":return"terseLong";case"\\":P=true;break;}}}return"terse";}if(Q>="B"&&Q<="Q"){if(R.length>2){O=R.charAt(1);if(O>="A"&&O<="Q"){if(R.charAt(2)===":"){return"oldLong";}}}}if(R.length>=33&&R.charAt(32)===":"){return"old";}}return null;},terseLong2OldShort:function N(P){if(this.getIdPresentation(P)!=="terseLong"){return P;}var O=P.replace(/\\\\/g,"\u001e").replace(/\\\;/g,"\u001f"),Q=O.substring(1,O.length).split(";");return(Q[1]+":"+Q[0]).replace(/\u001e/g,"\\\\").replace(/\u001f/g,"\\;");},oldShort2terseLong:function L(P,S){if(this.getIdPresentation(P)!=="old"){return P;}var O=P.replace(/\\\\/g,"\u001e").replace(/\\\:/g,"\u001f"),R=O.split(":"),Q=R.shift();return(S||"h")+(R.join(":")+";"+Q).replace(/\u001e/g,"\\\\").replace(/\u001f/g,"\\:");},isNullElem:function H(O){if(!O){return true;}var R=this.getIdPresentation(O),P=false,Q;switch(R){case"terse":case"terseLong":Q=O.substring(1,O.length).split(";");P=Q[0].indexOf(this.TERSE_NULL)>-1;break;case"old":case"oldLong":P=O.indexOf(this.OLD_NULL)>-1;break;}return P;},isNonGroupNull:function(Q){var O=Q.eid||(Q._e&&Q._e.id),P=O&&O.split(":")[0];return P&&P===this.NON_GROUP_NULL;},getAttributeId:function M(Q){var P,O;if(Q){O=Q.split(";");P=O[1];}return P;},getElementValue:function A(P){var Q,O;if(P){O=P.split(";");if(O.length>2){Q=O[0]+" "+O[2];}else{Q=O[0];}}return Q;},isAttributeIdsLinked:function E(P,O,Q){var S=false,R=B.keyarray(Q);I.forEach(R,function(T){if(T===P){I.forEach(Q[T],function(U){if(U===O){S=true;return false;}});}if(S){return false;}});return S;},ELEM_ALL_ID:"u;",ELEM_DUMMY_ID:"-1",ELEM_SEPARATOR:"\u001E",OLD_NULL:"~!@@~~!@@~",TERSE_NULL:"\\N",NON_GROUP_NULL:"n00000000000000000000000000000000",ELEM_ALL:{t:mstrmojo.chart.model.enums.EnumDSSObjectType.DssTypeDimension,v:"u;",n:"(All)"}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var B=mstrmojo.hash;mstrmojo.Base=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.Base",init:function A(C){B.copy(C,this);if(this.postApplyProperties){this.postApplyProperties();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var A=mstrmojo.hash;mstrmojo.requiresDescs(2213,3326,3327,3329,4531,13283,13284,13285,13286);mstrmojo.ME.Enum={METRIC_ACTIONS:{ADD:"add",EDIT:"edit",EDIT_NEW:"editNew"},EDITOR_IDS:{ADVANCED:"mstrME",FORMULA:"mstrME",WIZARD:"mstrFE",SIMPLE:"mstrSME",SELECOTR:"mstrFSE"},EDITOR_TYPES:{ADVANCED:"ADVANCED",FUNCTION:"FUNCTION",SIMPLE:"SIMPLE",SELECTOR:"SELECTOR"},METRIC_EDIT_TYPES:{ADVANCED:65536,SIMPLE:131072,FUNCTION:196608},METRIC_TYPES:{65536:"ADVANCED",131072:"SIMPLE",196608:"FUNCTION"},NEW_METRIC_DEFINITION:{did:"",n:mstrmojo.desc(2213,"New Metric"),tks:{items:[],vs:0,vm:""},mhfts:{},mvfts:{}},getNewDefinition:function(){return{did:"",n:mstrmojo.desc(2213,"New Metric"),tks:{items:[],vs:0,vm:""},mhfts:{},mvfts:{}};},FBFlag:{Automatic:0,Manual:3},AFB:{Automatic:-1,False:0,True:1},SFB:{Automatic:-1,False:1,True:2},UI_OBJECT_TYPE:{Dimty:-1,Sub_Expression:-2,Level:-4,Condition:-5,Transformation:-6,Row_Count:-7},UI_DATA_TYPE:{Sortby:-1,Breakby:-2,Level:-4,Condition:-5,Transformation:-6},SHORTCUT_FUNCTIONS:{Level:-4,Condition:-5,Transformation:-6,Row_Count:-7},DYNAMIC_DIMTY:{CODES:{auto:{n:mstrmojo.desc(4531,"Automatic"),did:"@auto",t:-1},page:{n:mstrmojo.desc(3329,"Grand Total"),did:"@p",t:-1},byCol:{n:mstrmojo.desc(3326,"By Columns"),did:"@cols",t:-1},byRow:{n:mstrmojo.desc(3327,"By Rows"),did:"@rows",t:-1},byCell:{n:mstrmojo.desc(13283,"By Cell"),did:"@cell",t:-1},byShape:{n:mstrmojo.desc(13284,"By Shape"),did:"@shape",t:-1},downCross:{n:mstrmojo.desc(13285,"Down, Then Across"),did:"@cr",t:-1},crossDown:{n:mstrmojo.desc(13286,"Across, Then Down"),did:"@rc",t:-1}},getItems:function D(G){var F=this.CODES,E=[];switch(G){case"breakby":E=[F.auto,A.copy({n:mstrmojo.desc(2057,"None")},A.copy(F.page)),A.copy({n:mstrmojo.desc(122,"Columns")},A.copy(F.byCol)),A.copy({n:mstrmojo.desc(2968,"Rows")},A.copy(F.byRow)),A.copy({n:mstrmojo.desc(13399,"Cell")},A.copy(F.byCell)),A.copy({n:mstrmojo.desc(2923,"Shape")},A.copy(F.byShape))];break;case"level":E=[F.auto,F.page,F.byCol,F.byRow,F.byCell,F.byShape];break;case"sortby":E=[F.auto,F.downCross,F.crossDown];}return E;},getAutomaticDimtyObject:function C(){return A.copy(this.CODES.auto);},getDimtyObject:function B(E,H){var F=null;var G=false;if(H){A.forEach(mstrmojo.ME.Enum.DYNAMIC_DIMTY.CODES,function(I){if(I.did===E){F=A.copy(I);G=true;return false;}});}if(!G){F={n:E,t:-1,dimty:true};}return F;}},NonExposableParams:["IsNewOLAP","OLAPPattern","OLAPHasWindow"]};mstrmojo.ME.Enum.DEFAULT_MPS={mps:{afb:mstrmojo.ME.Enum.AFB.False,sfb:mstrmojo.ME.Enum.SFB.False,fbf:mstrmojo.ME.Enum.FBFlag.Automatic}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array");var C=mstrmojo.hash,E=mstrmojo.array;function D(F){return function(G){F[G]=true;};}mstrmojo.rw.model.UpdateKeysConfig=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.rw.model.UpdateKeysConfig",init:function B(){this.nodes=[];this.selectors={};this.objects={};}});mstrmojo.rw.model.UpdateKeysConfig.getConsolidatedConfig=function A(J){var F={},K={},G={},I={};E.forEach(J,function H(M){var L=M.partialUpdate;if(L){E.forEach(L.nodes,D(K));E.forEach(L.selectors,D(G));E.forEach(L.objects,function(N){if(!I[N.id]||N.flag>I[N.id].flag){I[N.id]=N;}});delete M.partialUpdate;}E.forEach(M.actions,H);});if(!C.isEmpty(K)){F.nodes=C.keyarray(K);}if(!C.isEmpty(G)){F.selectors=C.keyarray(G);}if(!C.isEmpty(I)){F.objects=C.valarray(I);}return F;};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var K=mstrmojo.array,D=mstrmojo.hash;function E(V,T){var W=[],Q=V.selectedIndices,P=V.allIdx;var R,S,U=V.items;if(V.multiSelect&&(P>-1)&&(K.indexOf(T,V.allIdx)>-1)){for(R=0,S=U.length;R<S;R++){if(!Q[R]){W.push(R);Q[R]=true;V.selectedIndex=R;V.selectedItem=U[R];}}}else{for(R=0,S=T.length;R<S;R++){var X=T[R];if(!Q[X]){Q[X]=true;W.push(X);V.selectedIndex=X;V.selectedItem=U[X];}}}return W;}function J(R){var Q=[],S=R.selectedIndices,P;for(P in S){delete S[P];Q.push(parseInt(P,10));}R.selectedIndex=-1;R.selectedItem=null;return Q;}function H(V,U){var S=[],Q=V.selectedIndices,X=K.indexOf,P=V.allIdx;if(V.multiSelect&&(P>-1)&&(X(U,P)>-1)){return J(V);}if(U.length>0&&Q[P]){if(X(U,P)<0){U.push(P);}}var T=U.length,R;for(R=0;R<T;R++){var W=U[R];if(Q[W]){delete Q[W];S.push(W);if(V.selectedIndex===W){V.selectedIndex=-1;V.selectedItem=null;}}}return S;}function A(S,R){var P=S.selectedIndices;if(!P){P={};S.selectedIndices=P;}if(!R){R={};}var U=S.selectedIndex,T=[],V,Q;for(Q in P){if(!R[Q]){V=parseInt(Q,10);delete P[Q];T.push(V);if(U===V){S.selectedIndex=-1;S.selectedItem=null;}}}var X=[],W=S.items;for(Q in R){if(!P[Q]){V=parseInt(Q,10);P[Q]=true;X.push(V);S.selectedIndex=V;S.selectedItem=W&&W[V];}}return{add:X,rmv:T};}function G(Q,P,R){if(Q.raiseEvent&&((P&&P.length)||(R&&R.length))){Q.raiseEvent({name:"change",added:P,removed:R});}}mstrmojo._ListBase2Selections=mstrmojo.provide("mstrmojo._ListBase2Selections",{multiSelect:false,selectedIndices:null,selectedIndex:-1,selectedItem:null,selectedIndices_bindEvents:"change",selectedIndex_bindEvents:"change",selectedItem_bindEvents:"change",allowUnlistedValues:true,insertUnlistedValuesAt:-1,allIdx:-1,singleSelect:function F(P,Q){if(!this.selectedIndices[P]||(this.selectionPolicy==="reselect")||(P!==this.allIdx&&this.selectedIndices[this.allIdx])){var R=J(this),S=E(this,[P]);if(Q!==true){G(this,S,R);}}},toggleSelect:function O(P,Q){var S,R;if(this.selectedIndices[P]){R=H(this,[P]);}else{S=E(this,[P]);}if(Q!==true){G(this,S,R);}},rangeSelect:function N(P,Q){this.singleSelect(P,Q);},clearSelect:function I(P){var Q=J(this);if(P!==true){G(this,null,Q);}},select:function L(R,P){var Q=A(this,K.hash(R));if((P!==true)&&(Q.add.length||Q.rmv.length)){G(this,Q.add,Q.rmv);}},addSelect:function B(R,P){if(R===null||R===undefined){return null;}if(R.constructor!==Array){R=[R];}var Q=E(this,R);if(P!==true){G(this,Q,null);}return Q;},removeSelect:function M(R,P){if(R===null||R===undefined){return null;}if(R.constructor!==Array){R=[R];}var Q=H(this,R);if(P!==true){G(this,null,Q);}return Q;},_set_selectedIndices:function(S,Q,P){if(this.selectedIndices===Q){return false;}var R=A(this,Q);if(R.add.length||R.rmv.length){if(P!==true){G(this,R.add,R.rmv);}}return false;},_set_selectedIndex:function(S,Q,P){var R={};if(Q>-1){R[Q]=true;}return this._set_selectedIndices(null,R,P);},_set_selectedItem:function(W,T,S){var R=T&&(typeof T==="object"),V=this.itemIdField,Q=-1,U=this.items;if(R&&V!=null){Q=K.find(U,V,T[V]);}else{if(T!=null){Q=K.indexOf(U,T);}}if((Q===-1)&&(T!=null)&&this.allowUnlistedValues){var P=this.insertUnlistedValuesAt;if(P==null||P<0){P=(U&&U.length)||0;}Q=P;this.add([T],Q);}return this._set_selectedIndex(null,Q,S);},initSelections:function C(T,Q,P,S,R){if(!this.selectedIndices){this.selectedIndices={};this.selectedIndex=-1;}if(T){this._set_selectedIndices(null,T,R);}else{if(Q){this.select(Q,R);}else{if(S){this._set_selectedItem(null,S,R);}else{if(P!==null&&P!==undefined){this._set_selectedIndex(null,P,R);}}}}},sortSelectedIndices:function(){return D.keyarray(this.selectedIndices,true).sort(K.numSorter);},removeSelectedItems:function(){var R=this.sortSelectedIndices(),P=R.length,S=R[P-1],Q=this.remove(R);S=Math.min(S+1-P,this.items.length-1);if(S>=0){this.singleSelect(S);}return Q;},getSelectedItems:function(){return K.get(this.items,this.sortSelectedIndices())||[];},setSelectedItems:function(Q,d){if(!Q||!Q.length){return ;}var S=this.items||[],t=this.itemIdField!=null?K.findMulti(S,this.itemIdField,Q):K.indexOfMulti(S,Q),V=Q.length,T=V-t.count,q=this.allowUnlistedValues,b=this.insertUnlistedValuesAt,X=(q&&(b>-1))?T:0;if(b<0){b=S.length;}var R=[],U=[],f=t.map;if(T&&q){var p=0,e;for(e=0;e<V;e++){if(f[e]==null){R.push(Q[e]);U.push(b+p++);}}this.add(R,b);}var W=[],h;for(h in f){var o=f[h];if(o>=b){o+=X;}W.push(o);}var r=W.concat(U),Y=this.addSelect(r,!d);if(!d){var Z=K.hash(Y),g=this.selectedIndices,a=[],l;for(l in g){if(!Z[l]){a.push(parseInt(l,10));}}var P=this.removeSelect(a,true);G(this,Y,P);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var C=mstrmojo.array,B=mstrmojo.hash;mstrmojo.models.datasets.DataInterface=mstrmojo.provide("mstrmojo.models.datasets.DataInterface",{getFormsByAttrId:function A(F,E){var D=[];E=E||[];B.forEach(E,function(G){C.forEach(G.att||[],function(H){if(H.did===F){D=D.concat(H.fs||[]);return false;}});});D=C.filter(D,function(G){return !!G.obf;});return C.distinct(D,"fid");}});}());mstrmojo.DPIManager={classes:[],registerClass:function registerClass(B,C,D,A){this.classes.push({c:B,d:C,s:D,v:A});},setDPI:function(){var A=mstrMobileApp.getDeviceDPI();mstrmojo.array.forEach(this.classes,function(B){B.c.prototype.layoutConfig[B.d][B.s]=B.v[A]+"px";});this.classes=[];}};(function(){document.msCSSOMElementFloatMetrics=true;mstrmojo.requiresCls("mstrmojo.hash");var S=mstrmojo.hash,H="containerNode",G="auto",Q="px";var I={v:G,c:undefined,sv:G};function E(c,f,e){var g=this._layoutWidgets[f],k=c.slot||H,h=g.f,j=g.p,d=(h&&h[k]!==undefined),b=(j&&j[k]!==undefined);if(k&&((!e&&d)||b)){return d?h[k]:(g.x*parseInt(j[k],10)/100)+Q;}return c[(f==="h")?"height":"width"];}function K(g,d,b){if(g.ignoreLayout){return ;}var c=(d===G)||d==="NaNpx",f=(b===G)||b==="NaNpx";var e=g.getLayoutOffsets&&g.getLayoutOffsets();if(e){if(!c){d=(parseInt(d,10)-e.h)+Q;}if(!f){b=(parseInt(b,10)-e.w)+Q;}}if(g.setDimensions){g.setDimensions(d,b);}else{if(g.set){if(!c){g.set("height",d);}if(!f){g.set("width",b);}}}}function Z(e){var c=this.children,g,k;for(g=0,k=(c&&c.length)||0;g<k;g++){var d=c[g],l=d.slot||H;if(l){var j=E.call(this,d,"h",e),m=E.call(this,d,"w",e);this.setSlotDimensions(l,j,m);K(d,j,m);var b=E.call(this,d,"h",e),f=E.call(this,d,"w",e);if(b!==j||f!==m){K(d,b,f);}this.setSlotDimensions(l,b,f);}}this.afterLayout();}function B(){var c=this.children,b=this._layoutWidgets;S.forEach(this.slotNames,function(g,j){if(!g||this.skipsSlotLayout(j)){return ;}var f=(b.h&&b.h.getSlotSizeInfo(j,c))||I,d=(b.w&&b.w.getSlotSizeInfo(j,c))||I,e=f.c||d.c;mstrmojo.array.forEach(e,function(h){K(h,f.v,d.v);});this.setSlotDimensions(j,f.sv,d.sv);},this);this.afterLayout();}function D(c){var b=this.layoutConfig.xt?B:Z;b.call(this,c);}function T(j,e,g){var h=j.slot||H,f=e&&e.a;if(!f||f[h]===undefined){return ;}var b=this[h]["offset"+g],c=f[h];if(b===c){return ;}e.x-=(b-c);f[h]=b;}function J(b){this.beforeLayout();var c=this._layoutWidgets,d=b.src;T.call(this,d,c.h,"Height");T.call(this,d,c.w,"Width");D.call(this,true);}function O(d,h){if(!d){return null;}var b=this.children,r=h.toLowerCase(),j=parseInt(this[r],10),l=j,n={},p={},g={},c={},o={},k,m,e,t,q;for(q in d){if(!d.hasOwnProperty(q)){continue;}t=d[q];if(t.match(/px$/)){j-=parseInt(t,10);n[q]=t;}else{if(t.match(/%$/)){p[q]=t;}else{if(t.match(/all/)){o[q]=l;}else{g[q]=t;}}}}if(!S.isEmpty(g)&&!S.isEmpty(p)){for(k=0,m=(b&&b.length)||0;k<m;k++){e=b[k];q=e.slot||H;if(q&&g[q]&&!e.ignoreLayout){if(e.hasRendered){var f=this[q];c[q]=f.getBoundingClientRect?Math.round(f.getBoundingClientRect()[h.toLowerCase()]):f["offset"+h];j-=c[q];}else{c[q]=0;e.attachEventListener((e instanceof mstrmojo.Container)?"childrenRendered":"renderComplete",this.id,J);}}}}return{f:S.isEmpty(n)?undefined:n,p:S.isEmpty(p)?undefined:p,a:S.isEmpty(c)?undefined:c,n:S.isEmpty(o)?undefined:o,x:j,getSlotSizeInfo:function(AB,w){if(!d[AB]){return I;}var v=mstrmojo.array.filter(w,function(AD){var AC=AD.slot;return AC===AB||(AB===H&&!AC);}),z,AA;var u=n[AB];if(u){AA=u;}var y=p[AB];if(y){AA=(this.x*parseInt(y,10)/100)+Q;}if(g[AB]){AA=c[AB];if(AA){AA+=Q;}else{AA=G;}z=G;}var x=o[AB];if(x){AA=z=x+Q;}AA=AA||"0px";return{v:AA,c:v,sv:z||AA};}};}function R(c){var b=this.domNode;if(!b||!this.layoutConfig){return ;}b.style[c]=this[c];this.doLayout();}mstrmojo._HasLayout=mstrmojo.provide("mstrmojo._HasLayout",{_mixinName:"mstrmojo._HasLayout",height:"auto",width:"auto",ignoreLayout:false,beforeLayout:mstrmojo.emptyFn,afterLayout:mstrmojo.emptyFn,forceLayout:false,layoutConfig:null,init:function V(b){this._super(b);this.layoutConfig=S.clone(this.layoutConfig);},preBuildRendering:function C(){var d=this.cssText||"";var b=this.height;if(b&&b!==G){d+="height:"+this.height+";";}var c=this.width;if(c&&c!==G){d+="width:"+this.width+";";}this.cssText=d;return(this._super)?this._super():true;},postBuildRendering:function W(){this.doLayout();return this._super();},modifyLayoutConfig:function Y(d,c){var b=this.layoutConfig=this.layoutConfig||{};b.h=S.copy(d,b.h);b.w=S.copy(c,b.w);this.doLayout();},getLayoutOffsets:mstrmojo.emptyFn,set:function P(d,b){var c=this._super(d,b);if(d==="visible"&&this._pendingLayoutOnVisible){delete this._pendingLayoutOnVisible;this.doLayout();}return c;},doLayout:function A(){var b=this.layoutConfig;if(!b||(this.height===G&&this.width===G)){return ;}if(b.xt){if(!this.visible){this._pendingLayoutOnVisible=true;return ;}}this.beforeLayout();this._layoutWidgets={h:O.call(this,b.h,"Height"),w:O.call(this,b.w,"Width")};D.call(this,false);this.widgetResized();},browserResized:function F(b){this.setDimensions(b.h,b.w);return true;},onwidthChange:function N(){R.call(this,"width");},onheightChange:function M(){R.call(this,"height");},skipsSlotLayout:function(b){return false;},adjustParentDimensions:function L(){var c=this.parent,b=c&&c._layoutWidgets;if(b){T.call(c,this,b.h,"Height");T.call(c,this,b.w,"Width");}},setDimensions:function U(e,c){var d=(e===G)||e==="NaNpx",f=(c===G)||c==="NaNpx";if((!d&&parseInt(this.height,10)!==parseInt(e,10))||(!f&&parseInt(this.width,10)!==parseInt(c,10))||this.forceLayout){if(!d){this.height=e;}if(!f){this.width=c;}var b=this.domNode,g=b&&b.style;if(g){if(!d){g.height=e;}if(!f){g.width=c;}this.doLayout();}return true;}return false;},setSlotDimensions:function X(e,d,c){var b=this[e]&&this[e].style;if(!b){return ;}if(d!==G&&d!==undefined&&d!=="NaNpx"&&b.height!==d&&parseInt(d)>=0){b.height=d;}if(c!==G&&c!==undefined&&c!=="NaNpx"&&b.width!==c&&parseInt(c)>=0){b.width=c;}}});mstrmojo._HasLayout.getSlotSize=function a(e,f){var c=e&&e.prototype.layoutConfig;if(c){var d=c.h,b=c.w;return{h:(d&&d[f])||undefined,w:(b&&b[f])||undefined};}return null;};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var I=mstrmojo.array,M=mstrmojo.hash;function J(U){if(U!==null){return(U.constructor!==Array)?[U]:U;}return null;}function F(e,c,Y){if(!c){return null;}var f=[],V=e.selectedIndices,U=e.allIdx,a=e.noneIdx;if(e.multiSelect&&(a>-1)&&(I.indexOf(c,a)>-1)){return f;}var X,Z,d=e.items,b=e.itemIdField,W=e.selectedItems,h;if(e.multiSelect&&(U>-1)&&(I.indexOf(c,e.allIdx)>-1)){for(X=0,Z=d.length;X<Z;X++){if(!V[X]){f.push(X);V[X]=true;e.selectedIndex=X;e.selectedItem=d[X];}}}else{for(X=0,Z=c.length;X<Z;X++){var g=c[X];if(!V[g]){V[g]=true;if(Y){f.push({idx:g,positions:Y});}else{f.push(g);}e.selectedIndex=g;h=e.selectedItem=d[g];if(W){W[h[b]]=h;}}}}return f;}function D(X,U){var W=[],Y=X.selectedIndices,Z=X.selectedItems,V;for(V in Y){delete Y[V];if(U){W.push({idx:parseInt(V,10),positions:U});}else{W.push(parseInt(V,10));}}X.selectedIndex=-1;X.selectedItem=null;if(Z){X.selectedItems={};}return W;}function T(e,d,Y){if(!d){return null;}var a=[],V=e.selectedIndices,g=I.indexOf,U=e.allIdx,b=e.noneIdx,c=e.itemIdField,W=e.selectedItems;if(e.multiSelect&&(((U>-1)&&(g(d,U)>-1))||((b>-1)&&(g(d,b)>-1)))){return D(e);}if(d.length>0&&V[U]){if(g(d,U)<0){d.push(U);}}var Z=d.length,X;for(X=0;X<Z;X++){var f=d[X];if(V[f]){delete V[f];if(Y){a.push({idx:f,positions:Y});}else{a.push(f);}if(W){delete W[e.items[f][c]];}if(e.selectedIndex===f){e.selectedIndex=-1;e.selectedItem=null;}}}return a;}function C(X,Y,V,U){if(U){return ;}if(this.raiseEvent){if((X&&X.length)||(Y&&Y.length)){try{this.raiseEvent({name:"selectionChange",added:X,removed:Y});}catch(W){T(this,X);F(this,Y);throw W;}}}}function B(V){var W=this.itemIdField,U=this.items;if(typeof V==="object"&&W){return I.find(U,W,V[W]);}return I.indexOf(U,V);}mstrmojo._ListSelections={multiSelect:false,allIdx:-1,noneIdx:-1,itemIdField:"",items:null,selectedIndices:null,selectedIndex:-1,selectedIndices_bindEvents:"selectionChange",selectedIndex_bindEvents:"selectionChange",selectedItem:null,selectedItem_bindEvts:"selectionChange",allowUnlistedValues:true,selectedItems:null,supportsIncFetch:false,init:function(U){this._super(U);if(this.supportsIncFetch&&this.itemIdField){this.selectedItems={};}if(!this.items){this.items=[];}if(!this.selectedIndices){this.selectedIndices={};if(this.selectedIndex>-1){this._set_selectedIndex("selectedIndex",this.selectedIndex,true);}else{if(this.selectedItem){this._set_selectedItem("selectedItem",this.selectedItem,true);}}}},addItems:function K(d){d=J(d);if(!d){return ;}var a=this.items,U=this.items.length,W=this.selectedItems,Y=[],V;a=this.items=a.concat(d);V=a.length;if(W){var Z=this.itemIdField,X,c;for(X=U;X<a.length;X++){c=a[X];if(W[c[Z]]){Y.push(X);}}}if(Y&&Y.length){F(this,Y);}if(V>U){var b=this.itemsContainerNode;if(b){b.innerHTML+=this._buildItemsMarkup(U,V-1).join("");}}},addSelectedItems:function S(U){this.selectItems(U,false);},setSelectedItems:function L(U){this.selectItems(U,true);},selectItems:function R(c,e){c=J(c);if(!c){return ;}if(e&&this.selectedItems){this.selectedItems={};}var W=this.selectedItems,a=this.itemIdField,U=[],Y=this.items.length,Z=[],V=this.allowUnlistedValues,d,b,X;for(X=0;X<c.length;X++){d=c[X];b=B.call(this,d);if(b<0){if(W===null){if(V){U.push(d);b=Y++;Z.push(b);}}else{W[d[a]]=d;}}else{Z.push(b);}}if(U.length>0){this.addItems(U);}if(Z.length>0){if(e){this.select(Z);}else{this.addSelect(Z);}}},unselectItems:function A(V){V=J(V);if(!V){return ;}var a=this.selectedItems,W=[],Z=this.itemIdField,Y,U,X;if(a===null){return ;}for(X=0;X<V.length;X++){Y=V[X];if(a){delete a[Y[Z]];}U=B.call(this,Y);if(U<0){W.push(U);}}if(W.length>0){this.removeSelect(W);}},getSelectedItems:function G(){if(this.selectedItems){return M.valarray(this.selectedItems);}return I.get(this.items,M.keyarray(this.selectedIndices,true));},singleSelect:function(V,W,U){if(V!==-1){this.select([V],W,U);}},singleSelectByField:function O(V,W,U){this.singleSelect(I.find(this.items,W,V),U);},toggleSelect:function Q(U){var W,V;if(this.selectedIndices[U]){V=T(this,[U]);}else{W=F(this,[U]);}C.call(this,W,V,[U]);},select:function(W,V,U){W=J(W);if(!W){return ;}var Y=D(this,U),a=F(this,W,U),X;if(this.selectionPolicy!=="reselect"){for(X=Y.length-1;X>=0;X--){var Z=I.indexOf(a,Y[X]);if(Z>-1){Y.splice(X,1);a.splice(Z,1);}}}C.call(this,a,Y,W,V);},rangeSelect:function H(V,U){var a=this.selectedIndex,Y=a,Z=this.allIdx,W=[],X;if(V===Z||this.selectedIndices[Z]){W.push(Z);}else{if(Y===-1&&this.selectedIndices){for(X in this.selectedIndices){Y=parseInt(X,10);break;}}Y=Y===-1?0:Y;if(Y>V){Y=V;V=a;}for(X=Y;X<=V;X++){W.push(X);}}this.select(W,U);this.selectedIndex=a;},clearSelect:function(U){C.call(this,null,D(this),[],U);if(!U){this.raiseEvent({name:"clearSelection"});if(this.parent){this.parent.raiseEvent({name:"clearSelection"});}}},addSelect:function(X,U,V){X=J(X);if(!X){return ;}var W=F(this,X,V),Z=null,Y=this.noneIdx;if(this.multiSelect&&(Y>-1&&I.indexOf(X,Y)>-1)){Z=T(this,X);}C.call(this,W,Z,X,U);},removeSelect:function(W,U,V){W=J(W);if(!W){return ;}C.call(this,null,T(this,W,V),W,U);},_set_selectedIndices:function P(W,c,U){if(this.selectedItems){this.selectedItems={};}var V=this.selectedIndices;if(V===c){return false;}if(!V){V={};this.selectedIndices=V;}if(!c){c={};}var a=this.selectedIndex,Z=[],b;for(b in V){if(!c[b]){b=parseInt(b,10);delete V[b];Z.push(b);if(a===b){this.selectedIndex=-1;this.selectedItem=null;}}}var f=[],d=this.items,Y=this.itemIdField,e;for(b in c){if(!V[b]){b=parseInt(b,10);V[b]=true;f.push(b);this.selectedIndex=b;e=this.selectedItem=d[b];if(this.selectedItems){this.selectedItems[e[Y]]=e;}}}if(U!==true){var X=[];for(b in c){if(V[b]){b=parseInt(b,10);X.push(b);}}C.call(this,f,Z,X);}return(f.length||Z.length);},_set_selectedIndex:function N(X,V,U){var W={};if(V>-1){W[V]=true;}return this._set_selectedIndices("selectedIndices",W,U);},_set_selectedItem:function E(X,W,V){var U=B.call(this,W);if((U<0)&&(W!==null&&W!==undefined)&&this.allowUnlistedValues&&this.items){this.set("items",this.items.concat(W));U=this.items.length-1;}return this._set_selectedIndex("selectedIndex",U,V);},_addSelections:function(U){return F(this,U);},_removeAll:function(){return D(this);}};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");var D=mstrmojo.dom,L=mstrmojo.hash;var O=100;var F=D.supportsTouches?0.5:1;var G=1;var R=100;var P={onvscrollVisibleChange:function(){var U=this.vscrollNode,V=U&&U.style;if(!V){return ;}if(this.vscrollVisible){var T=this.maxPos,W=this.clientSize;V.height=Math.round(W.y*W.y/T.y)+"px";V.left=(W.x-5)+"px";V.display="block";V.opacity=0.5;}else{V.opacity=0;}},onhscrollVisibleChange:function(){var V=this.hscrollNode,U=V&&V.style;if(!U){return ;}if(this.hscrollVisible){var T=this.maxPos,W=this.clientSize;U.width=Math.round(W.x*W.x/T.x)+"px";U.top=(W.y-5)+"px";U.display="block";U.opacity=0.5;}else{U.opacity=0;}}};var M=L.copy({onposChange:function(){var V=this.clientSize,U=this.maxPos,T=0,W=0;if(this.scrollsVert){W=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style[D.CSS3_TRANSFORM]="translateY("+Math.round((V.y-(V.y*V.y/U.y))*this.pos.y/U.y)+"px)";}}if(this.scrollsHoriz){T=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style[D.CSS3_TRANSFORM]="translateX("+Math.round((V.x-(V.y*V.x/U.x))*this.pos.x/U.x)+"px)";}}this.scrollChild.style[D.CSS3_TRANSFORM]="translate3d(-"+parseInt(T,10)+"px, -"+parseInt(W,10)+"px, 0px)";},ondeceleratingChange:function(){this.scrollChild.style[D.CSS3_TRANSITION]=this.decelerating?(D.CSS3_PREFIX+"transform 0.2s linear"):"";}},L.copy(P));var H=L.copy({onposChange:function(){var V=this.clientSize,U=this.maxPos,T=0,X=0,W=this.scrollboxNode;if(this.scrollsVert){X=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style.top=Math.round((V.y-(V.y*V.y/U.y))*this.pos.y/U.y)+"px";}W.scrollTop=parseInt(X,10);}if(this.scrollsHoriz){T=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style.left=Math.round((V.x-(V.y*V.x/U.x))*this.pos.x/U.x)+"px";}W.scrollLeft=parseInt(T,10);}}},L.copy(P));mstrmojo._TouchScrolling=mstrmojo.provide("mstrmojo._TouchScrolling",{FRICTION:0.65,BOUNCEFRICTION:0.5,usesTouches:false,bounces:true,scrollsHoriz:true,scrollsVert:true,pos:null,preBuildRendering:function N(){this.usesTouches=(mstrmojo.dom.supportsTouches&&this.usesTouches&&(this.scrollsHoriz||this.scrollsVert));if(this.usesTouches){this.pos={x:0,y:0};}if(this._super){this._super();}},postBuildRendering:function C(){if(this._super){this._super();}if(this.usesTouches){var W=this.scrollboxNode,V=this.itemsContainerNode||W.firstChild;if(W&&W!==V){this.scrollChild=V;var T=W.style;T.position="relative";T.overflow="hidden";var U=V.style;U.position="absolute";U.left=0;U.top=0;this.markupMethods=L.copy(D.isSafari?M:H,L.copy(this.markupMethods));this.attachTouchEvents();}}},unrender:function(T){if(this.usesTouches){this.detachTouchEvents();}this._super(T);},attachTouchEvents:function(){var U=this.touchNode||this.scrollboxNode;if(U){if(!this._tsCallback){var T=this;this._tsCallback=function(V){T.touchesBegin(self,V);};this._tmCallback=function(V){T.touchesMoved(self,V);};this._teCallback=function(V){T.touchesEnd(self,V);};}D.attachEvent(U,D.TOUCHSTART,this._tsCallback);this._tsNode=U;}},detachTouchEvents:function(){var T=this._tsNode;if(T){D.detachEvent(T,D.TOUCHSTART,this._tsCallback);delete this._tsNode;}},touchesBegin:function J(T,V){var U=V.target&&V.target.tagName;if(U&&(U==="SELECT"||U==="INPUT")){return ;}D.preventDefault(T,V);this.stopDeceleration();this.startTime=new Date();this.startTimePos={x:this.pos.x,y:this.pos.y};this.startTouchPos=D.getMousePosition(D.firstTouch(T,V),T);this.dragging=false;D.attachEvent(window,D.TOUCHMOVE,this._tmCallback);D.attachEvent(window,D.TOUCHEND,this._teCallback);},touchesMoved:function E(b,d){var Z=D.getMousePosition(D.firstTouch(b,d),b);D.preventDefault(b,d);if(!this.dragging){var T=5,h=Math.abs;if((this.scrollsHoriz&&h(Z.x-this.pos.x)>T)||(this.scrollsVert&&h(Z.y-this.pos.y)>T)){this.dragging=true;this.dragStartTime=new Date();this.startTouchPos=Z;var V=this.scrollboxNode,Y={x:V.clientWidth,y:V.clientHeight},f={x:V.scrollWidth,y:V.scrollHeight};this.clientSize=Y;this.scrollSize=f;this.maxPos={x:Math.max(f.x-Y.x,0),y:Math.max(f.y-Y.y,0)};this.showScroll();}}if(this.dragging){D.stopPropogation(b,d);var c=this.startTimePos,X=this.startTouchPos,a=this.maxPos;var W={x:this.scrollsHoriz?Math.max(Math.min(c.x-(Z.x-X.x),a.x),0):0,y:this.scrollsVert?Math.max(Math.min(c.y-(Z.y-X.y),a.y),0):0};this.set("pos",W);this.nextLastDragPos=this.lastDragPos;this.lastDragPos=Z;var U=new Date(),g=this.lastDragTime;this.nextLastDragTime=g;this.lastDragTime=U;if((U-g)>R){this.startTime=this.lastDragTime;this.dragStartTime=this.startTime;this.startTimePos={x:W.x,y:W.y};this.startTouchPos=Z;}}},touchesEnd:function I(T,U){D.preventDefault(T,U);D.detachEvent(window,D.TOUCHMOVE,this._tmCallback);D.detachEvent(window,D.TOUCHEND,this._teCallback);if(this.dragging){this.dragging=false;D.stopPropogation(T,U);if((new Date())-this.lastDragTime<=R){this.startDeceleration(T,U);}else{this.hideScroll();}}},startDeceleration:function B(Y,Z){var W=D.getMousePosition(D.firstChangedTouch(Y,Z),Y),c=((mstrmojo.dom.supportsTouches===null)?this.lastDragPos:this.nextLastDragPos)||W,b={x:W.x-c.x,y:W.y-c.y},T=((mstrmojo.dom.supportsTouches===null)?this.lastDragTime:this.nextLastDragTime),d=T?(new Date())-T:0,V={x:d?Number(b.x*O*F/d).toFixed(2):0,y:d?Number(b.y*O*F/d).toFixed(2):0};var a=this,U=function(e){return(a.scrollsHoriz&&Math.abs(e.x)>=G)||(a.scrollsVert&&Math.abs(e.y)>=G);};if(U(V)){this.velocity=V;this.friction={x:this.FRICTION,y:this.FRICTION};this.set("decelerating",true);var X=function(){a.decelerate();if(!U(a.velocity)){a.stopDeceleration();a=null;}};X();if(this.decelerating){this.decelerationTimer=window.setInterval(X,O);}}else{this.hideScroll();}},stopDeceleration:function A(){this.set("decelerating",false);delete this.velocity;if(this.decelerationTimer){window.clearTimeout(this.decelerationTimer);delete this.decelerationTimer;}this.hideScroll();},decelerate:function S(){var W=this.pos,V=this.velocity,U=this.friction,Z=this.maxPos,X={x:W.x-V.x,y:W.y-V.y},b=this.bounces,T=this.BOUNCEFRICTION;var a=X.x;if(a<0||a>Z.x){X.x=(a<0)?0:Z.x;V.x*=b?-T:0;U.x=T;}var Y=X.y;if(Y<0||Y>Z.y){X.y=(Y<0)?0:Z.y;V.y*=b?-T:0;U.y=T;}this.set("pos",X);this.velocity={x:U.x*V.x,y:U.y*V.y};},hideScroll:function K(){this.set("vscrollVisible",false);this.set("hscrollVisible",false);},showScroll:function Q(){var T=this.maxPos;if(this.scrollsVert&&T.y&&this.vscrollNode){this.set("vscrollVisible",true);}if(this.scrollsHoriz&&T.x&&this.hscrollNode){this.set("hscrollVisible",true);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array");var H=mstrmojo.array,B=mstrmojo.hash,J=B.isEmpty;var G=1;function D(Q){return(typeof Q==="object")?Q:{};}function E(R,Q){B.forEach(Q,function(S,V){var T=R[V];if(T===undefined){delete Q[V];return true;}S=Q[V]=D(S);T=R[V]=D(T);if(J(S)&&J(T)){throw (G);}else{if(J(T)){delete R[V];if(J(R[V])){E(R,Q);}}else{if(J(S)){delete R[V];if(J(R[V])){E(R,Q);}}else{try{E(R[V],Q[V]);}catch(U){switch(U){case G:R[V]=Q[V]={};break;}}}}}});}function I(Q){B.forEach(Q,function(R){B.forEach(R,function(U,S){var T=U.include,W=U.exclude;if(J(T)||J(W)){return true;}if(!J(T)&&!J(W)){try{E(W,T);}catch(V){switch(V){case G:R[S]={};break;}}}});});return Q;}function F(S,R,Q){B.forEach(S,function(U,T){if(U===true||J(U)){Q.push(R+T);}else{F(U,R+T+".",Q);}});return Q;}function P(Q){B.forEach(Q,function(R){B.forEach(R,function(U,S){var T=[];F(U.include,"",T);F(U.exclude,"!",T);R[S]=T.join(";");});});return Q;}function K(Q,R){B.forEach(Q,function(S,U){var T=R[U];if(T!==undefined){if(S!==true&&T!==true){K(S,T);}else{if(S===true&&T!==true){R[U]=true;}else{if(S!==true&&T===true){Q[U]=true;}}}}});}function L(R,S){var Q=true;B.forEach(R,function(Y,T){var W=S[T];if(W){var U=Y.include,Z=Y.exclude,X=W.include,V=W.exclude;if(!J(V)&&!J(Z)){Q=false;return Q;}if(!J(X)&&!J(U)){K(X,U);}}return Q;});return Q;}function C(S,Q){Q=Q||{};if(S){var R=Q;H.forEach(S.split("."),function(W,U,T,V){R[W]=V?true:{};R=R[W];});}return Q;}mstrmojo.rw.model.RetrievalKeysConfig=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.rw.model.RetrievalKeysConfig",init:function M(){this.nodes=[];this.filters={};},addNode:function A(R,T){var S=this.filters,Q=S[R];if(!Q){this.nodes.push(R);Q=S[R]={data:{},defn:{}};}if(T){if(L(Q,T)){S[R]=B.mergeHashes(Q,T);}else{throw ("The new filters for node key ## cannot be merged with the filters currently defined".replace("##",R));}}return this;}});mstrmojo.rw.model.RetrievalKeysConfig.getConsolidatedConfig=function O(T){var Q={},U={},S={};H.forEach(T,function R(W){var V=W.partialRetrieval;if(V){H.forEach(V.nodes,function(X){U[X]=true;});S=B.mergeHashes(S,V.filters);delete W.partialRetrieval;}H.forEach(W.actions,R);});if(!J(U)){Q.nodes=B.keyarray(U);}if(!J(S)){Q.filters=P(I(S));}return Q;};mstrmojo.rw.model.RetrievalKeysConfig.parseResponseFilters=function N(R){var Q=function(T){var S={};B.forEach(T,function(W,V){var U=S[V]={serialized:W,include:{},exclude:{}};H.forEach(W.split(";"),function(Y){var X=Y.indexOf("!")===0;Y=X?Y.slice(1):Y;C(Y,X?U.exclude:U.include);});});return S;};return{data:Q(R.data),defn:Q(R.defn)};};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");var E=mstrmojo.dom,M=mstrmojo.hash,B,I=mstrmojo.global.document,K="mousedown",O="mousemove",Q="mouseup";function G(X){if(E.isPrimaryMouseBtn(X)){B.startDragCheck(self,X);}}var U,P,A="mstrmojo-dnd-avatar",T;function F(Y,X){if(X!==undefined&&X!==null){P.innerHTML=X;}T.left=Y.x+"px";T.top=Y.y+"px";}function L(Y,X){if(!U){U=I.createElement("div");T=U.style;U.className=A;U.innerHTML='<div class="'+A+'-inner"></div>';P=U.firstChild;I.body.appendChild(U);}F(Y,X);T.display="block";}function R(){if(T){T.display="none";}}function H(X){var Y=++B.ctxt.moveCount;if(Y>=B.minMoves){B.stopDragCheck();if((X.buttons===1||X.buttons===undefined||E.isIE9)&&(X.which===1||X.button===0||E.isIE8)){B.startDrag(self,X);}}}function N(X){if(E.isPrimaryMouseBtn(X)){B.stopDragCheck();delete B.ctxt;}}function D(X){B.onDragMove(self,X);}function C(X){if(E.isPrimaryMouseBtn(X)){B.stopDrag(window,X);}}function J(Y){var X=E.findWidget(Y);while(X){if(X.draggable){return X;}X=X.parent;}return null;}function S(X){var Z=X.src,Y=J(Z.node);if(!Y){return null;}if(Y.getDragAction){X.action=Y.getDragAction(X);}Z.widget=Y;Z.data=Y.getDragData&&Y.getDragData(X);if(Y.isDragValid){if(!Y.isDragValid(X)){if(!mstrApp.isInVFInteractMode&&(!Y.shouldDragBubble||Y.shouldDragBubble(X)===true)){X.src.node=Y.domNode.parentNode;return S(X);}return null;}}if(Y.ondragstart){Y.ondragstart(X);}return Y;}function W(Z,Y){var X=E.findWidget(Z),a=Y.tgt&&Y.tgt.widget;while(X){if(X.dropZone){if(X===a){return X;}if(X.allowDrop&&X.allowDrop(Y)){return X;}}X=X.parent;}return null;}function V(){if(this.set){this.set("allowingDrop",false);}}mstrmojo.dnd=mstrmojo.dnd||mstrmojo.provide("mstrmojo.dnd",{minMoves:3,enable:function(){if(!mstrmojo.dndEnabled){E.attachEvent(I,K,G);mstrmojo.dndEnabled=true;}},disable:function(){mstrmojo.dndEnabled=false;E.detachEvent(I,K,G);},startDragCheck:function(X,Y){delete this.ctxt;var Z=E.captureEventInfo({hWin:X,e:Y});this.ctxt={src:Z,moveCount:0,last:M.copy(Z.pos),getDirection:function(a){return !!this.dir[a];},getCtxtDragData:function(){var a=this.src;return(a&&a.data)||{};},getCtxtDropData:function(){var a=this.tgt;return(a&&a.data)||{};}};if(this.minMoves){E.attachEvent(I,O,H);E.attachEvent(I,Q,N);}else{this.startDrag(X,Y);}},stopDragCheck:function(){E.detachEvent(I,O,H);E.detachEvent(I,Q,N);},startDrag:function(X,a){var Y=this.ctxt;Y.id=mstrmojo.now();var Z=S(Y);if(!Z){return ;}E.clearBrowserHighlights(X);E.preventDefault(self,a);E.attachEvent(I,O,D);E.attachEvent(I,Q,C);var c=window.mstrApp;if(c&&c.setInteractive){this._changeAppStatus=c.setInteractive(false);}if(!Z.ownAvatar){var b=Y.src;L(b.pos,b.data&&b.data.html);}},stopDrag:function(X,d){E.detachEvent(I,O,D);E.detachEvent(I,Q,C);var a=this.ctxt,Z=a.tgt||{},Y=E.captureEventInfo({hWin:X,e:d,data:Z.data}),c=W(Y.node,a);Y.widget=c;a.tgt=Y;if(c){if(c.ondrop){c.ondrop(a);}else{V.call(c);}}var b=a.src.widget;if(b&&b.ondragend){b.ondragend(a);}if(b&&!b.ownAvatar){R();}if(this._changeAppStatus){window.mstrApp.setInteractive(true);delete this._changeAppStatus;}},onDragMove:function(b,d){if(E.isSafari){E.clearBrowserHighlights();}var X=this.ctxt,a=X.tgt||{},Y=a.widget,c=E.captureEventInfo({hWin:b,e:d,data:a.data}),h=c.widget=W(c.node,X),g=X.last,Z=c.pos;X.dir={x:Z.x>g.x,y:Z.y>g.y};X.last=M.copy(c.pos);X.tgt=c;if(Y!==h){if(Y){if(Y.ondragleave){Y.ondragleave(X);}else{V.call(Y);}}if(h){X.tgt.data=(h.getDropData&&h.getDropData(X))||{};if(h.ondragenter){h.ondragenter(X);}else{if(h.set){h.set("allowingDrop",true);}}}}if(h){if(h.ondragover){h.ondragover(X);}}var f=X.src.widget;if(f&&f.ondragmove){f.ondragmove(X);}if(f&&!f.ownAvatar){F(c.pos);}}});B=mstrmojo.dnd;B.enable();}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var O=/this\.([\w\.\[\]\'\"\-]+)/m,D=/this\./m,M=/mstrmojo\.all\[[\'\"]([\w]+)[\'\"]\]\.([\w\.\[\]\'\"\-]+)/m,R=/mstrmojo\.all\[/m,L=/mstrmojo\.all\.([\w]+)\.([\w\.\[\]\'\"\-]+)/m,B=/mstrmojo\.all\./m,C=/\[(\d+)\]/g,E=/\[\'([\w\-]+)\'\]/g,P=/\[\"([\w\-]+)\"\]/g,H=/([\[\]].*)/;mstrmojo.Binding=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.Binding",parent:null,source:null,destination:null,enabled:false,setter:"set",executing:0,init:function N(S){mstrmojo.hash.copy(S,this);mstrmojo.registry.add(this);},destroy:function F(){mstrmojo.publisher.clearSubscriptions(this.id);mstrmojo.registry.remove(this);},exec:function K(){this.executing++;var W=this._sourceFn;if(!W){var V=this.source;if(V!=null){if(typeof (V)=="string"){if(!(V.match("return "))&&!(V.match(/\;\s*\S/))){V="return "+V;}W=new Function(V);}else{if(typeof (V)=="function"){W=V;}}this._sourceFn=W;}}var S,X=this.parent;if(W){try{S=W.apply(X,[]);}catch(U){}}var T=this.setter,Y=this.destination;if(T==null){X[Y]=S;}else{if(typeof (T)=="string"){X[T](Y,S);}else{if(typeof (T)=="function"){T.apply(X,[Y,S]);}}}this.executing--;},enable:function A(){if(!this.enabled){this.exec();var T=this._chains;if(!T){this._parseChains();T=this._chains;}for(var S in T){this._attachChain(T[S]);}this.enabled=true;}},disable:function J(){if(this.enabled){var T=this._chains;if(T){for(var S in T){this._detachChain(T[S]);}}this.enabled=false;}},_chains:null,_parseChains:function(){this._chains={};var U=this._chains;var T=this.source;if(T&&(typeof (T)=="function")){T=T.toString&&T.toString();}if(!T){return ;}function S(b,e,V,X){var W=b,Z;while(Z=W.match(e)){var c=Z[0],a=c.length,d=true;c=c.replace(C,".$1").replace(E,".$1").replace(P,".$1").replace(H,"");for(var Y in U){if(Y.substr(0,a)===c){d=false;break;}else{if(c.indexOf(Y)===0){delete U[Y];}}}if(d){U[c]={host:(V==null)?null:Z[V],parts:Z[X].replace(C,".$1").replace(E,".$1").replace(P,".$1").replace(H,"").split(".")};}W=W.substr(Z.index+a);}}if(D.test(T)){S(T,O,null,1);}if(R.test(T)){S(T,M,1,2);}if(B.test(T)){S(T,L,1,2);}},_attachChain:function Q(S,U){if(!S.evt2idx){S.evt2idx={};}if(!S.idx2evt){S.idx2evt=[];}var d=S.evt2idx,g=S.idx2evt,Z=S.parts;var e=(U>=0)?U:0,b=this.id,W=mstrmojo.all,c=(U>0)?W[g[e-1].context][Z[e-1]]:(S.host?W[S.host]:this.parent),T=Z[e];var V=mstrmojo.array;while(c&&T){if(c.attachEventListener){var f=c[T+"_bindEvents"]||(T+"Change");if(typeof (f)=="string"){f=[f];}var Y=[];for(var a=0,X=f.length;a<X;a++){Y[a]=c.attachEventListener(f[a],b,"_callback");}for(var a=0;a<f.length;a++){d[c.id+"_"+f[a]]=e;}g[e]={context:c.id,evts:f,subs:Y};}c=c[T];T=S.parts[++e];}},_detachChain:function G(S,T){var U=mstrmojo.all,h=S.idx2evt,d=S.evt2idx,a=this.id;var Y=(T>-1)?T:0,b=h.length;if(Y<b){for(;Y<b;Y++){var Z=h[Y];if(!Z){break;}var W=Z.context,c=U[W],g=Z.evts;if(c&&c.detachEventListener){var k=Z.subs;for(var f=0,V=k.length;f<V;f++){c.detachEventListener(k[f]);}}h[Y]=null;for(var X=0,e=g.length;X<e;X++){delete d[W+"_"+g[X]];}}}},_callback:function I(T){this.exec();if(!T||!T.name||!T.src){return ;}var U=T.src.id+"_"+T.name,W=this._chains;for(var X in W){var V=W[X],S=V.evt2idx[U];if(S!=null){this._detachChain(V,S+1);this._attachChain(V,S+1);}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash");var E=mstrmojo.hash;var B=function(G){return(mstrmojo.now()-G.getTime());};mstrmojo.storage.DOMStorage=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.storage.DOMStorage",mIsSupported:false,mStorageObj:null,itemTimeToLive:3600,init:function F(G){E.copy(G,this);return this;},isSupported:function C(){return this.mIsSupported;},checkVersion:function A(G){var H=this.getItem("__version__");if(H&&H<G){mstrmojo.dbg("DOMStorage data is old - clearing, v="+H);this.clear();}this.setItem("__version__",G,-1);return this;},length:function(){return(this.mIsSupported?this.mStorageObj.length:0);},_keyExpired:function D(G){return(G&&(G.ts>0)&&(mstrmojo.now()>G.ts));},key:function(G){return(this.mIsSupported?this.mStorageObj.key(G):null);},getItemAsString:function(H){var G=this.getItem(H);if(G){if(typeof G=="object"){G=JSON.stringify(G);}else{G=G+"";}}return G;},getItem:function(H){var G=null;if(this.mIsSupported){var J=this.mStorageObj.getItem(H);if(J){try{J=JSON.parse(J);}catch(I){}if(this._keyExpired(J)){this.removeItem(H);}else{G=J.data;}}}return G;},setItem:function(H,J,G){G=G||this.itemTimeToLive;try{if(this.mIsSupported){this.mStorageObj.removeItem(H);var L=(G>0)?(mstrmojo.now()+(G*1000)):-1;var I={ts:L,data:J};this.mStorageObj.setItem(H,JSON.stringify(I));}}catch(K){if(K!==QUOTA_EXCEEDED_ERR){throw K;}}finally{}return this;},removeItem:function(G){if(this.mIsSupported){this.mStorageObj.removeItem(G);}return this;},clear:function(){if(this.mIsSupported){this.mStorageObj.clear();}return this;}});})();(function(){mstrmojo.requiresCls("mstrmojo.cookies");mstrmojo.requiresDescs(14356,11866);mstrmojo.mstr._RecentObjectsHelper=mstrmojo.provide("mstrmojo.mstr._RecentObjectsHelper",{_mixinName:"mstrmojo.mstr._RecentObjectsHelper",handleRecentObjects:function B(){var F=this.recentObjects();var D=Math.min(F.length,10);var C=-1;for(i=0;i<D;i++){if(F[i].lastRecovered!==undefined&&F[i].lastRecovered===true){F[i].iconClass="mstrIcon-lv mstrIcon-recover";F[i].recoveryName=mstrmojo.desc(11866,"Recover #").replace("#",F[i].recoveryName);F[i].itemClass="mstr-recent-item";C=i;}else{F[i].itemClass="mstr-recent-item";F[i].iconClass="mstrIcon-lv "+F[i].iconClass;}}if(C!=-1){F[C].cssText="border-bottom: 1px solid #D6D6D6;";}var E={};if(D==0){E.recoveryURL="";E.recoveryName=mstrmojo.desc(14356,"No recent items");E.iconClass="";E.lastRecovered=false;F.push(E);}return F;},recentObjects:function A(){try{var J=window.localStorage,P=window.sessionStorage;if(!J||!window.JSON){return ;}var E=[];var N=function(U){var V="";switch(U){case 3:V="reportID=";break;case 55:V="documentID=";break;default:V="messageID=";break;}return V;};var H=function(Y){var X=Y.ty;var U="";switch(X){case 55:var W=Y.vm;switch(W){case 8192:case 2048:U="mstrIcon-lv-rw avm";break;case 1:default:U="mstrIcon-lv-rw";break;}break;case 3:var V=Y.viewMode;switch(V){case 1:U="mstrIcon-lv-g";break;case 2:U="mstrIcon-lv-gp";break;case 3:U="mstrIcon-lv-gpgs";break;default:U="";break;}break;}return U;};var T=JSON.parse(J.getItem("recentObjects"+mstrConfig.lastMsgKey));try{var S=mstrConfig.lastMsgKey,D="lastMsgID"+S,G=(JSON.parse(decodeURIComponent(mstrmojo.cookies.getCookieSetting("lastMsgID")||"{}")))[S],I=function(U){return U&&(U.length===32)&&/^[A-Z0-9]{32}$/.test(U);};}catch(R){}if(I(G)){var K={};var O="lastMsgRecoveryInfo"+S,C=J.getItem(O);if(C){var C=JSON.parse(C);K.recoveryInfo=C;K.recoveryURL=mstrmojo.addCSRFTokenToURL("?"+C.url.replace(/messageID.*/,"messageID="+G)),K.recoveryName=C.n;K.recoveryType=C.ty;K.did=C.did;K.iconClass=H(C);K.lastRecovered=true;E.push(K);}}for(var Q in T){var L=T[Q];if(L===""){continue;}var K={};var C=JSON.parse(L);K.recoveryInfo=C;K.recoveryURL=mstrmojo.addCSRFTokenToURL("?"+C.url.replace(/messageID.*/,N(C.ty)+C.did));K.recoveryName=C.n;K.recoveryType=C.ty;K.did=C.did;K.iconClass=H(C);K.lastRecovered=false;var M=mstrmojo.array.find(E,"did",K.did);if(M===-1){E.push(K);}else{E[M].recoveryInfo.imgData=K.recoveryInfo.imgData;}}return E;}catch(F){mstrmojo.errors.log(F);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.models.EnumDragSources");function D(H){this.cleanUpAfterTarget(H);var G=H.tgtData;if(G){delete H.tgtData;}var I=this.getContextDragData(H);if(I&&I.setAvatarClass){I.setAvatarClass("");}}mstrmojo.vi.ui._IsDropTarget=mstrmojo.provide("mstrmojo.vi.ui._IsDropTarget",{_mixinName:"mstrmojo.vi.ui._IsDropTarget",dropZone:true,getDropAvatarIcon:function B(G){return"add";},getContextDragData:function F(G){return G.getCtxtDragData();},cleanUpAfterTarget:mstrmojo.emptyFn,ondragenter:function A(G){var H=this.getContextDragData(G);if(H&&H.setAvatarClass){H.setAvatarClass(this.getDropAvatarIcon(G));}if(this._super){this._super(G);}},ondragleave:function E(G){D.call(this,G);if(this._super){this._super(G);}},ondrop:function C(G){D.call(this,G);if(this._super){this._super(G);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var A=mstrmojo.array;mstrmojo.fe._IsRelationTreeNode=mstrmojo.provide("mstrmojo.fe._IsRelationTreeNode",{createSetHtml:'<span class="mstrmojo-textset mstrmojo-create-set-text" mstrAttach:click >'+mstrmojo.desc(12034,"Create a Set")+"</span>",syncRootOperator:function(){var F=this.parent,H=function(){var J=this.parent,I=[];if(J){I=J.ctxtBuilder.itemWidgets;}return I;},E,D,B,C,G;if(F){E=H.call(this);B=E.length;D=A.find(E,"noRelationOperator",true)!==-1;for(C=0;C<B;C++){G=E[C];G&&G.set("noRelationOperator",D);}this.set("noRelationOperator",D);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var I=mstrmojo.array,Q=mstrmojo.desc(2412,"Default"),P=mstrmojo.desc(3433,"Font"),K=mstrmojo.desc(3434,"Number"),D=mstrmojo.desc(3435,"Alignment"),N=mstrmojo.desc(2886,"Borders"),E=mstrmojo.desc(3905,"Background"),R="-1,234.12",C="1,234.12",M="(1,234.12)",H="-$1,234.12",B="$1,234.12",J="($1,234.12)";var O=[{n:Q,v:"pru"}];I.forEach(["Arial","Arial Black","Arial Narrow","Arial Unicode MS","Batang","Book Antiqua","Bookman Old Style","Bookshelf Symbol 1","Bookshelf Symbol 2","Bookshelf Symbol 3","Comic Sans MS","Courier New","Garamond","Haettenschweiler","Helvetica","Impact","Lucida Console","Lucida Sans Unicode","Map Symbols","Marlett","Monotype Corsiva","Monotype Sorts","MS Gothic","MS Outlook","Microsoft Sans Serif","MT Extra","Open Sans SemiBold","Open Sans","Symbol","Tahoma","Times New Roman","Trebuchet MS","Verdana","Webdings","Wingdings","Wingdings 2","Wingdings 3"],function(S){O.push({n:S,v:S,symbolic:true});});function G(T,S,U){return(S&&S>=T)?G(T,S-U,U).concat(S):[];}var A=G(2,12,1);A=A.concat(G(14,24,2));A=A.concat(G(36,48,12));A=A.concat(G(72,72,1));var F=[{n:Q,v:"pru"}];I.forEach(A,function(S){F.push({n:String(S),v:String(S)});});mstrmojo._FormatDefinition={Formats:[{n:P},{n:K},{n:D},{n:mstrmojo.desc(3436,"Color and Lines")}],FormatTarget:[{n:mstrmojo.desc(7942,"Element Header"),v:1,p:"header_format"},{n:mstrmojo.desc(7943,"Element Value"),v:2,p:"grid_format"},{n:mstrmojo.desc(7944,"Individual Items Header"),v:3,p:"child_header_format"},{n:mstrmojo.desc(7945,"Individual Items Value"),v:4,p:"child_grid_format"}],MetricFormatTarget:[{n:mstrmojo.desc(9710,"Metric Headers"),v:1,p:"header_format"},{n:mstrmojo.desc(9711,"Metric Values"),v:2,p:"grid_format"}],MetricValueFormats:[{n:K},{n:D},{n:P},{n:N},{n:E}],MetricHeaderFormats:[{n:K},{n:D},{n:P},{n:N},{n:E},{n:mstrmojo.desc(12139,"Chart")}],NumberFormatCategory:{Automatic:-3,Default:-2,General:9,Fixed:0,Currency:1,Date:2,Time:3,Percentage:4,Fraction:5,Scientific:6,Custom:7},DefaultFormat:{FormattingAlignment:{Horizontal:"1",Vertical:"1",TextWrap:"0",TextDirection:"0"},FormattingBorder:{HInsideStyle:"1",VInsideStyle:"1",TopStyle:"1",LeftStyle:"1",BottomStyle:"1",RightStyle:"1",HInsideColor:"0",VInsideColor:"0",TopColor:"0",LeftColor:"0",BottomColor:"0",RightColor:"0",Border3DStyle:"0",Border3DWeight:"0",Border3DBottomColor:"0",Border3DLeftColor:"0",Border3DRightColor:"0",Border3DTopColor:"0"},FormattingFont:{Name:"Arial",Bold:"0",Italic:"0",Size:"10",Strikeout:"0",Underline:"0",Color:"0",Script:"0"},FormattingNumber:{Category:"9",DecimalPlaces:"0",ThousandSeparator:"-1",CurrencySymbol:"$",CurrencyPosition:"0",Format:"General",NegativeNumbers:"3"},FormattingPadding:{LeftPadding:"1",RightPadding:"1",TopPadding:"1",BottomPadding:"1",LineSpacing:"0"},FormattingPatterns:{FillColor:"16777215",PatternColor:"8650752",PatternStyle:"1",FillStyle:"0",ApplyToGraphThreshold:"0",GradientColor:"16777215",GradientAngle:"0",GradientXOffset:"0",GradientYOffset:"0",SelectorSelectionColor:"16167264",SelectorSelectionFillStyle:"0",SeriesFillColor:"pru",SeriesPatternColor:"8650752",SeriesPatternStyle:"1",SeriesFillStyle:"0",SeriesApplyToGraphThreshold:"0",SeriesGradientColor:"16777215",SeriesGradientAngle:"0",SeriesGradientXOffset:"0",SeriesGradientYOffset:"0",SeriesSelectorSelectionColor:"16167264",SeriesSelectorSelectionFillStyle:"0"}},Families:O,Sizes:F,SizesInVI:F.slice(7,19),Styles:[{n:Q,v:"pru"},{n:mstrmojo.desc(3440,"Regular"),v:"0,0"},{n:mstrmojo.desc(2718,"Bold"),v:"-1,0",v2:"-1,"},{n:mstrmojo.desc(2719,"Italic"),v:"0,-1",v2:",-1"},{n:mstrmojo.desc(3441,"Bold Italic"),v:"-1,-1"}],Effects:[{n:"Underline",v:0},{n:"Strike",v:1}],Category:[{n:Q,v:-2},{n:mstrmojo.desc(2378,"General"),v:9},{n:mstrmojo.desc(2050,"Fixed"),v:0},{n:mstrmojo.desc(2051,"Currency"),v:1},{n:mstrmojo.desc(2052,"Date"),v:2},{n:mstrmojo.desc(2170,"Time"),v:3},{n:mstrmojo.desc(2053,"Percentage"),v:4},{n:mstrmojo.desc(2054,"Fraction"),v:5},{n:mstrmojo.desc(2055,"Scientific"),v:6},{n:mstrmojo.desc(2056,"Custom"),v:7}],MaxNegativeDidigts:30,FixedNegative:[{n:R,v:1,f:"#,##0.00"},{n:R,r:true,v:5,f:"#,##0.00;[RED]-#,##0.00"},{n:C,r:true,v:2,f:"#,##0.00;[RED]#,##0.00"},{n:M,v:3,f:"#,##0.00;(#,##0.00)"},{n:M,r:true,v:4,f:"#,##0.00;[RED](#,##0.00)"}],CurrencyNegative:[{n:H,v:1,f:'"$"#,##0.00'},{n:H,r:true,v:5,f:'"$"#,##0.00;[RED]-"$"#,##0.00'},{n:B,r:true,v:2,f:'"$"#,##0.00;[RED]"$"#,##0.00'},{n:J,v:3,f:'"$"#,##0.00;("$"#,##0.00)'},{n:J,r:true,v:4,f:'"$"#,##0.00;[RED]("$"#,##0.00)'}],CurrencyPosition:[{n:mstrmojo.desc(2194,"Left"),v:0},{n:mstrmojo.desc(2195,"Right"),v:1},{n:mstrmojo.desc(2183,"Left with space"),v:2},{n:mstrmojo.desc(2182,"Right with space"),v:3}],Date:[{n:mstrmojo.desc(2231,"4/7"),v:"m/d"},{n:mstrmojo.desc(2232,"04/07"),v:"mm/dd"},{n:mstrmojo.desc(2233,"4/7/98"),v:"m/d/yy"},{n:mstrmojo.desc(2234,"04/07/98"),v:"mm/dd/yy"},{n:mstrmojo.desc(2235,"04/07/1998"),v:"mm/dd/yyyy"},{n:mstrmojo.desc(2236,"7-Apr"),v:"d-mmm"},{n:mstrmojo.desc(2237,"7-Apr-98"),v:"d-mmm-yy"},{n:mstrmojo.desc(2238,"Apr-98"),v:"mmm-yy"},{n:mstrmojo.desc(2239,"Apr '98"),v:"mmm 'yy"},{n:mstrmojo.desc(2240,"April 1998"),v:"mmmm yyyy"},{n:mstrmojo.desc(2241,"4/7/98 15:41"),v:"m/d/yy h:mm"},{n:mstrmojo.desc(2242,"4/7/98 3:41 PM"),v:"m/d/yy h:mm AM/PM"},{n:mstrmojo.desc(2243,"April 7, 1998"),v:"mmmm d, yyyy"}],Time:[{n:mstrmojo.desc(2244,"15:41"),v:"h:mm"},{n:mstrmojo.desc(2245,"3:41 PM"),v:"h:mm AM/PM"},{n:mstrmojo.desc(2246,"15:41:46"),v:"h:mm:ss"},{n:mstrmojo.desc(2247,"3:41:46 PM"),v:"h:mm:ss AM/PM"},{n:mstrmojo.desc(2241,"4/7/98 15:41"),v:"m/d/yy h:mm"},{n:mstrmojo.desc(2242,"4/7/98 3:41 PM"),v:"m/d/yy h:mm AM/PM"},{n:mstrmojo.desc(2250,"04/07/98 15:41"),v:"mm/dd/yy h:mm"},{n:mstrmojo.desc(2248,"04/07/98 3:41 PM"),v:"mm/dd/yy h:mm AM/PM"}],PercentNegative:[{n:"-12.12%",v:1,f:"0.00%"},{n:"-12.12%",r:true,v:5,f:"0.00%;[RED]-0.00%"},{n:"12.12%",r:true,v:2,f:"0.00%;[RED]0.00%"},{n:"(12.12%)",v:3,f:"0.00%;(0.00%)"},{n:"(12.12%)",r:true,v:4,f:"0.00%;[RED](0.00%)"}],Fraction:[{n:"12 1/3",v:"# ?/?"},{n:"37/3",v:"?/?"},{n:"12 26/81",v:"# ??/??"},{n:"998/81",v:"??/??"}],TextDirection:[{n:Q,v:"pru"},{n:mstrmojo.desc(4601,"Horizontal"),v:0},{n:mstrmojo.desc(5156,"-90 Degree"),v:-90}],Horizontal:[{n:mstrmojo.desc(2296,"Use Default"),v:"pru"},{n:mstrmojo.desc(2378,"General"),v:1},{n:mstrmojo.desc(2194,"Left"),v:2},{n:mstrmojo.desc(2193,"Center"),v:3},{n:mstrmojo.desc(2195,"Right"),v:4},{n:mstrmojo.desc(2068,"Justify"),v:6}],Vertical:[{n:mstrmojo.desc(2296,"Use Default"),v:"pru"},{n:mstrmojo.desc(2256,"Top"),v:1},{n:mstrmojo.desc(2067,"Center"),v:2},{n:mstrmojo.desc(2257,"Bottom"),v:3}],TextWrap:[{v:0},{v:-1}],BorderStyles:[{n:Q,v:"pru"},{n:mstrmojo.desc(2258,"None"),v:0},{n:mstrmojo.desc(2259,"Dashed"),v:3},{n:mstrmojo.desc(2260,"Dotted"),v:4},{n:mstrmojo.desc(2261,"Hair"),v:7},{n:mstrmojo.desc(2262,"Thin"),v:1},{n:mstrmojo.desc(2264,"Thick"),v:5},{n:mstrmojo.desc(15361,"Double"),v:6}],extractModel:function(U,W,T){var Y=T||this.DefaultFormat,X;for(X in U){var S=U[X];if(!S.attachEventListener){if(!mstrmojo.hash.isEmpty(S)){W[X]=S;}}else{var V;for(V in S){if(Y[X]&&Y[X][V]){if(!W[X]){W[X]={};}W[X][V]=S[V];}}}}},getAvailableFonts:function L(){var S={success:function(U){if(U.name==="fontPicker"){var T=[{n:Q,v:"pru"}];I.forEach(U.shortcuts,function(W){var X=W.attributes,Y=I.filterOne(X,function(Z){return Z.value;}),V=I.filterOne(X,function(Z){return Z.symbolic;});T.push({n:Y&&Y.value,v:Y&&Y.value,symbolic:(V&&V.symbolic||"false").toUpperCase()==="TRUE"});});mstrmojo._FormatDefinition.Families=T;}}};mstrmojo.xhr.request("POST",mstrConfig.taskURL,S,{taskId:"getSystemPickerJson",name:"fontPicker"},false,null,true);},getStandardFormat:function(T,S){var V=mstrmojo.hash.clone(S||this.DefaultFormat),U;T=T||{};for(U in V){T[U]=T[U]||{};}for(U in T){if(!T[U].attachEventListener){T[U]=mstrmojo.hash.make(T[U],mstrmojo.Obj);}}return T;},saveFormatModel:function(W,c,T,d){var b=d||this.DefaultFormat,Y,S;for(Y=0;Y<T.length;Y++){var X=T[Y],V=c[X]||null,a=W[X];if(a===undefined){delete c[X];continue;}for(S in b){var Z=b[S],U;if((!V&&!a)||(V&&!V[S]&&!a[S])){continue;}for(U in Z){if(a[S]===undefined||a[S]===""||a[S][U]==="pru"||a[S][U]===undefined){if(V&&V[S]&&(V[S][U]!==undefined&&V[S][U]!==null&&V[S][U]!=="pru")){V[S][U]="pru";}}else{V=V||{};V[S]=V[S]||{};V[S][U]=a[S][U];}}}if(V){c[X]=V;}}}};}());(function(){mstrmojo.requiresCls("mstrmojo.array");var B=mstrmojo.array;function A(C){if(C.parent){if(C.parent.shouldEllipsizeChildren===undefined){mstrmojo.mixin(mstrmojo._HasEllipsis,C.parent);}C.parent.set("shouldEllipsizeChildren",true);}}mstrmojo._HasEllipsis=mstrmojo.provide("mstrmojo._HasEllipsis",{shouldEllipsize:false,shouldEllipsizeChildren:false,doEllipsize:function(){if(this.shouldEllipsizeChildren){B.forEach(this.children,function(D,C){if(D.hasRendered&&D.doEllipsize){D.doEllipsize();}});}},onshouldEllipsizeChange:function(){this._onEllipsizeFlagChange(this.shouldEllipsize,this.shouldEllipsizeChildren);},onshouldEllipsizeChildrenChange:function(){this._onEllipsizeFlagChange(this.shouldEllipsizeChildren,this.shouldEllipsize);},_onEllipsizeFlagChange:function(D,C){if(D&&!C){A(this);this.markupMethods=mstrmojo.mixin({onvisibleChange:function(){if(this._super){this._super();}if(this.visible&&this.hasRendered){this.doEllipsize();}}},mstrmojo.hash.copy(this.markupMethods));}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var E=mstrmojo.array;mstrmojo._BindTargetChildren=mstrmojo.provide("mstrmojo._BindTargetChildren",{target:null,targetProps:null,addTabButtons:null,removeTabButtons:null,clearButtons:null,ontargetChange:function D(L){var M=L&&L.valueWas;if(M){var J=this._targetSubs;if(J){M.detachEventListener(J.add);M.detachEventListener(J.rem);M.detachEventListener(J.sel);}this.clearButtons();}var N=this.target;if(N){var I=this.targetProps,H=(I&&I.children)||"children",F=N[H];this.addTabButtons(F,0);this._onTargetSelChg();if(N.attachEventListener){var G=this.id,K="attachEventListener";this._targetSubs={add:N[K]("addChild",G,"_onTargetAddChild"),rem:N[K]("removeChild",G,"_onTargetRemoveChild"),sel:N[K]("selectedChange",G,"_onTargetSelChg")};}}this._ontargetChange();},_ontargetChange:mstrmojo.emptyFn,_onTargetAddChild:function A(F){var G=F&&F.value;if(G&&G.length){this.addTabButtons(G,F.index);}this._postTargetAddChild();},_postTargetAddChild:mstrmojo.emptyFn,_onTargetRemoveChild:function B(G){var F=G&&G.value,H;for(H=((F&&F.length)||0)-1;H>-1;H--){this.removeTabButton(F[H]);}this._postTargetRemoveChild();},_postTargetRemoveChild:mstrmojo.emptyFn,_onTargetSelChg:function C(L){var G=this.targetProps||{},F=this[G.names||"children"],J=function(O,P){if(O.set){O.set("selected",P);}else{O.selected=P;}};if(L){var H=L.valueWas,K=H?E.find(F,"target",H):-1;if(K>-1){J(F[K],false);}}var M=this.target,N=M&&M.selected,I=N?E.find(F,"target",N):-1;if(I>-1){J(F[I],true);}this._postTargetSelChg();},_postTargetSelChg:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var I="#000000",E=Math.round;function O(Y){return("0"+parseInt(Y,10).toString(16)).slice(-2);}mstrmojo.color=mstrmojo.provide("mstrmojo.color",{rgbStr2rgb:function W(Y){if(Y==="transparent"){return["0","0","0"];}else{return Y.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i).slice(1);}},rgbStr2hex:function G(Y){if(Y.indexOf("rgb")>=0){var Z=this.rgbStr2rgb(Y);return"#"+this.rgb2hex(Z[0],Z[1],Z[2]);}return Y;},rgb2hex:function B(a,Z,Y){return O(a)+O(Z)+O(Y);},rgb2hsv:function V(Y,f,k){var c=Math.min(Y,f,k),l=Math.max(Y,f,k),e=0,o,n;n=l/255;o=(l!==0)?(parseFloat(l)-parseFloat(c))/parseFloat(l):0;if(o===0){e=0;}else{var j=l-c,Z=(l-Y)/j,a=(l-f)/j,m=(l-k)/j;if(Y===l){e=m-a;}else{if(f===l){e=2+Z-m;}else{e=4+a-Z;}}e=e/6;if(e<0){e=e+1;}}return[E(e*360),E(o*100),E(n*100)];},rgb2hsl:function D(Y,d,e){Y/=255;d/=255;e/=255;var f=Math.max(Y,d,e),a=Math.min(Y,d,e),Z=(f+a)/2,c,k;if(f===a){c=k=0;}else{var j=f-a;k=Z>0.5?j/(2-f-a):j/(f+a);switch(f){case Y:c=(d-e)/j+(d<e?6:0);break;case d:c=(e-Y)/j+2;break;case e:c=(Y-d)/j+4;break;}c/=6;}return[c,k,Z];},hsl2rgb:function C(e,k,d){var c=function c(h,g,b){if(b<0){b+=1;}if(b>1){b-=1;}if(b<1/6){return h+(g-h)*6*b;}if(b<1/2){return g;}if(b<2/3){return h+(g-h)*(2/3-b)*6;}return h;},Y,f,j;if(k===0){Y=f=j=d;}else{var Z=d<0.5?d*(1+k):d+k-d*k,a=2*d-Z;Y=c(a,Z,e+1/3);f=c(a,Z,e);j=c(a,Z,e-1/3);}return[E(Y*255),E(f*255),E(j*255)];},hsl2hex:function J(a,Z,Y){return"#"+mstrmojo.array.map(this.hsl2rgb(a,Z,Y),function(b){return O(b);}).join("");},hex2rgb:function Q(b){var Y=this.fixFullHexValue("#"+b.replace("#","")),Z=[],a;Y=Y.replace("#","");for(a=0;a<3;a++){Z.push(parseInt(Y.substr(a*2,2),16));}return Z;},hex2bgr:function L(Y){return this.hex2rgb(Y).reverse();},hex2hsv:function T(Z){var Y=this.hex2rgb(Z);return this.rgb2hsv(Y[0],Y[1],Y[2]);},hex2hsl:function X(Y){return this.rgb2hsl.apply(this,this.hex2rgb(Y));},hsv2rgb:function H(j,u,n){j=j/360;u=u/100;n=n/100;var Y,k,m;if(u===0){Y=n*255;k=n*255;m=n*255;}else{var c=j*6;if(c===6){c=0;}var f=Math.floor(c);var a=n*(1-u);var Z=n*(1-u*(c-f));var o=n*(1-u*(1-(c-f)));var l,d,e;switch(f){case 0:l=n;d=o;e=a;break;case 1:l=Z;d=n;e=a;break;case 2:l=a;d=n;e=o;break;case 3:l=a;d=Z;e=n;break;case 4:l=o;d=a;e=n;break;default:l=n;d=a;e=Z;break;}Y=l*255;k=d*255;m=e*255;}return[E(Y),E(k),E(m)];},hsv2hex:function M(b,a,Y){var Z=this.hsv2rgb(b,a,Y);return this.rgb2hex(Z[0],Z[1],Z[2]);},getContrastingColor:function N(b,Z,Y){var a=this.hex2rgb(b);return(((a[0]*299)+(a[1]*587)+(a[2]*114))/1000<125)?Z:Y;},getLuminance:function F(Z){var Y=this.hex2rgb(Z);return 0.2126*Y[0]+0.7152*Y[1]+0.0722*Y[2];},getHighlightColor:function S(h,e){var Y,f,j,k,l=this.hex2rgb(!e?"#FFCE7F":"#EFE6D8"),d=parseInt(h[0],10),a=parseInt(h[1],10),n=parseInt(h[2],10),c=parseInt(l[0],10),Z=parseInt(l[1],10),m=parseInt(l[2],10);Y=(d*c)/255;f=(a*Z)/255;j=(n*m)/255;k=d*0.3+a*0.59+n*0.11;if(k<85){Y=Y+(63*(85-k)/85);Y=Y>255?255:Y;f=f+(63*(85-k)/85);f=f>255?255:f;j=j+(63*(85-k)/85);j=j>255?255:j;}return"#"+this.rgb2hex(E(Y),E(f),E(j));},get3DBorderColor:function R(a,e){var Z=parseInt(a[0],10)*0.3+parseInt(a[1],10)*0.59+parseInt(a[2],10)*0.11;var d=parseInt(a[0],10);var c=parseInt(a[1],10);var Y=parseInt(a[2],10);switch(e){case"light":if(Z>150){d=d*0.9;c=c*0.9;Y=Y*0.9;}else{d=d*0.6+102;c=c*0.6+102;Y=Y*0.6+102;}break;case"dark":if(Z>10){d=d*0.4;c=c*0.4;Y=Y*0.4;}else{d=d*0.8+30;c=c*0.8+30;Y=Y*0.8+30;}break;}return"#"+this.rgb2hex(E(d),E(c),E(Y));},encodeColor:function K(Y,Z){if(Z!==undefined&&(Y===null||Y.length===0||Y==="undefined")){Y=Z;}if(Y==="transparent"){return -1;}if(parseInt(Y,10)===-2){return -2;}if(Y.substring(0,1)==="#"){Y=Y.substring(1);}return parseInt(Y.substring(4)+Y.substring(2,4)+Y.substring(0,2),16);},decodeColor:function A(Y){Y=parseInt(Y,10);if(Y===0){return I;}var Z=16777216+(Y&255)*65536+(Y&65280)+(Y&16711680)/65536;return"#"+Z.toString(16).substring(1).toUpperCase();},fixFullHexValue:function U(Y){if(Y&&Y.length===4){return Y.replace(/([0-9a-f])/ig,"$1$1");}return Y;},findMidColorHex:function P(b,a){var c=this.hex2rgb(b),Y=this.hex2rgb(a),Z=[];c.forEach(function(d,e){Z.push(parseInt((d+Y[e])/2,10));});return("#"+this.rgb2hex(Z[0],Z[1],Z[2]));}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var E=mstrmojo.dom;mstrmojo.ui._IsIncFetchList=mstrmojo.provide("mstrmojo.ui._IsIncFetchList",{_mixinName:"mstrmojo.ui._IsIncFetchList",ifDataHelper:null,supportsIncFetch:false,isFetching:false,initScroll:function A(){var I=this.ifDataHelper,H=this,G=this.scrollNode||this.domNode;this.supportsIncFetch=I&&I.hasNext();if(I&&this.supportsIncFetch){this._scroll=function F(){var J=this.scrollNode||this.domNode||G;if(Math.ceil(J.offsetHeight+J.scrollTop)>=J.scrollHeight){H.raiseEvent({name:"incFetch",id:H.id});}};E.attachEvent(G,"scroll",this._scroll);this.attachEventListener("incFetch",this.id,function(J){if(!this.supportsIncFetch||this.isFetching){return ;}if(this.preNext){this.preNext();}this.set("isFetching",true);I.next({complete:function(K){if(H.postNext){H.postNext();}H.set("isFetching",false);},success:function(K){H.addItems(K.items||null);},failure:function(K){H.supportsIncFetch=false;mstrmojo.alert("Error in fetching next: "+K);}});});}},unrender:function D(F){var G=this.scrollNode||this.domNode;E.detachEvent(G,"scroll",this._scroll);this._super(F);},render:function C(){this._super();if(this.supportsIncFetch){var F=this.scrollNode||this.domNode;E.attachEvent(F,"scroll",this._scroll);}},addItems:function B(F){if(this._super){this._super(F);}if(!this.ifDataHelper.hasNext()){this.supportsIncFetch=false;var G=this.scrollNode||this.domNode;E.detachEvent(G,"scroll",this._scroll);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");function G(J){return(J&&J.id);}mstrmojo._HasScrollbox=mstrmojo.provide("mstrmojo._HasScrollbox",{_mixinName:"mstrmojo._HasScrollbox",scrollListeners:null,scrollListenerCount:0,scrollInterval:50,scrollboxNode:undefined,scrollTo:function F(L,K){var J=this.scrollboxNode;J.scrollLeft=L.x;J.scrollTop=L.y;if(K){this.notifyScrollListeners(L);}},connectScrollbox:function E(K){if(!G(K)){return ;}var L=this.scrollListeners,J=K.id;if(!L){L={};this.scrollListeners=L;}if(!L[J]){L[J]=K;this.scrollListenerCount++;if(this.scrollListenerCount===1){this._attachScrollDom();}}},disconnectScrollbox:function D(K){if(!G(K)){return ;}var L=this.scrollListeners,J=K.id;if(L&&L.hasOwnProperty(J)){delete this.scrollListeners[J];this.scrollListenerCount--;if(!this.scrollListenerCount){this._detachScrollDom();}}},notifyScrollListeners:function C(K){var N=K||this.getScrollPos(),M=N.y,L=N.x;this.scrollboxTop=M;this.scrollboxLeft=L;this.scrollboxRight=L+this.scrollboxWidth;this.scrollboxBottom=M+this.scrollboxHeight;var J=this.scrollListeners,O;for(O in J){J[O].onscroll(this);}},getScrollPos:function H(){var J=this.scrollboxNode;return{x:J.scrollLeft,y:J.scrollTop};},_attachScrollDom:function A(){var M=this.scrollboxNode;if(M){var L=this.usesTouches;if(!L){if(!this.scrollCallback){var K=this.id;this.scrollCallback=function(){mstrmojo.all[K].notifyScrollListeners();};}mstrmojo.dom.attachBufferedEvent(M,"scroll",this.scrollCallback,this.scrollInterval);}if(this.scrollboxTop===null){this.scrollboxTop=L?0:M.scrollTop;}if(this.scrollboxLeft===null){this.scrollboxLeft=L?0:M.scrollLeft;}var J=function(P){var O=P.toLowerCase();var N=M.style[O];return(!isNaN(N)&&N.charAt(N.length-1)!=="%")?parseInt(N,10):M["client"+P];};if(this.scrollboxHeight===null){this.scrollboxHeight=J("Height");}if(this.scrollboxWidth===null){this.scrollboxWidth=J("Width");}this.scrollboxBottom=this.scrollboxTop+this.scrollboxHeight;this.scrollboxRight=this.scrollboxLeft+this.scrollboxWidth;this._attachedScrollbox=M;}},_detachScrollDom:function I(){var J=this._attachedScrollbox;if(J&&this.scrollCallback){mstrmojo.dom.detachBufferedEvent(J,"scroll",this.scrollCallback,this.scrollInterval);}delete this._attachedScrollbox;},scrollboxTop:null,scrollboxLeft:null,scrollboxHeight:null,scrollboxBottom:null,buildRendering:function B(){this._detachScrollDom();this._super();if(this.scrollListenerCount){this._attachScrollDom();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var D=mstrmojo.dom;mstrmojo._FillsBrowser=mstrmojo.provide("mstrmojo._FillsBrowser",{_mixinName:"mstrmojo._FillsBrowser",getBrowserDimensions:function F(H){if(H){return{w:H.innerWidth,h:H.innerHeight};}var G=D.windowDim(),I=(D.isFF||D.isWK)?0:2;return{w:Math.max(G.w,0)+"px",h:Math.max(G.h-I,0)+"px"};},preBuildRendering:function B(){var I=this._super(),H=this.getBrowserDimensions();if(!this.browserResized||this.browserResized(H)!==true){this.height=H.h;this.width=H.w;}if(!this._listenerProc){var K=this.id,J=null,G=this._listenerProc=function(M){if(mstrApp&&mstrApp.isExporting){var L=M||window.event;mstrmojo.all[K].monitorWindow(L);}else{window.clearTimeout(J);J=window.setTimeout(function(){var N=M||window.event;mstrmojo.all[K].monitorWindow(N);},150);}};D.attachEvent(window,"resize",G);}return I;},destroy:function C(G){if(this._listenerProc){D.detachEvent(window,"resize",this._listenerProc);}this._super(G);},getResizeDimensions:function A(G){var J=G.currentTarget,I=this.getBrowserDimensions(),H={w:(J?J.innerWidth+"px":I.w),h:(J?J.innerHeight+"px":I.h)};return H;},monitorWindow:function E(G){var H=this.getResizeDimensions(G);if((H.h===this.height&&H.w===this.width)||parseInt(H.h,10)<=20||parseInt(H.w,10)<=20){return ;}if(!this.browserResized||this.browserResized(H,true)!==true){if(H.h!==this.height){this.set("height",H.h);}if(H.w!==this.width){this.set("width",H.w);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var F=mstrmojo.dom;var V="touchstart",J="mousedown",P=F.isIOSTouch,S=P?V:J;function W(Y){var X=Y[Y.hotSlot||"domNode"];if(X){if(!Y._closeCallback){var a=Y.id,Z=function(b){return function(d){var c=mstrmojo.all[a];if(c&&!c.ignoreHover){c["auto"+b](d,self);}};};Y._uncloseCallback=Z("Unclose");Y._closeCallback=Z("Close");}F.attachEvent(X,"mouseover",Y._uncloseCallback);F.attachEvent(X,"mouseout",Y._closeCallback);}}function C(Y){if(Y._closeCallback){var X=Y[Y.hotSlot||"domNode"];if(X){F.detachEvent(X,"mouseover",Y._uncloseCallback);F.detachEvent(X,"mouseout",Y._closeCallback);}}}function G(a,Y){var X=a,Z;while(X){if(X.open||X.openPopup){Z=X.ignoreHoverCount||0;Z=Y?(Z+1):(Z>0?Z-1:Z);X.ignoreHoverCount=Z;if(X.set){X.set("ignoreHover",(Z>0));}else{X.ignoreHover=(Z>0);}}X=X.opener||X.parent;if(X&&X.shouldPropagateLockHover&&!X.shouldPropagateLockHover()){break;}}}function E(){var Z=this._lockHoverCallback,Y=this.curtainNode,b=this._onClickChange;if(Z){F.detachEvent(document.body,S,Z,true);delete this._lockHoverCallback;}if(!Y||!b){return ;}var X=mstrApp&&mstrApp.isTouchApp&&mstrApp.isTouchApp()||P,a=X?V:J;F.detachEvent(Y,a,b);delete this._onClickChange;}mstrmojo._CanAutoClose=mstrmojo.provide("mstrmojo._CanAutoClose",{autoCloses:false,autoCloseDelay:100,locksHover:false,hotSlot:null,closeOnClick:false,curtainNode:null,postBuildRendering:function T(){this._super();if(this.autoCloses){W(this);}this.oncloseOnClickChange();},onautoClosesChange:function N(){var X=(this.autoCloses)?W:C;X(this);},oncloseOnClickChange:function I(){if(!this.curtainNode){return ;}var Z=this,X=mstrApp&&mstrApp.isTouchApp&&mstrApp.isTouchApp()||P,Y=X?V:J;this._onClickChange=function(){Z.close();if(X){mstrmojo.touchManager.notify([]);}};F.attachEvent(Z.curtainNode,Y,this._onClickChange);},autoUnclose:function H(){var X=this._autoCloseTimer;if(X){self.clearTimeout(X);delete this._autoCloseTimer;}},autoClose:function L(){if(this.ignoreHover){return ;}if(this._autoCloseTimer){self.clearTimeout(this._autoCloseTimer);}if(this.opener){if(this.autoCloseDelay){var X=this.opener.id;this._autoCloseTimer=self.setTimeout(function(){mstrmojo.all[X].closePopup();},this.autoCloseDelay);}else{this.opener.closePopup();}}},destroy:function U(X){E.call(this);this._super(X);},lockHover:function R(){G(this,true);if(!this._lockHoverCallback){var Y=this.id,X=this._lockHoverCallback=function(Z){mstrmojo.all[Y]._unlockHoverCheck(Z,self);};if((F.isIE7||F.isIE8)&&window.event&&(window.event.type===S)&&this.opener){this.opener._ignoreMousedown=true;}F.attachEvent(document.body,S,X,true);}},unlockHover:function O(){G(this,false);E.call(this);},hoverLock:function(X){G(this,X);},suppressClose:function B(X){return F.contains(this.domNode,X,true,document.body);},_unlockHoverCheck:function D(a,X){var Y=this.opener;if(Y&&Y._ignoreMousedown){delete Y._ignoreMousedown;return ;}var Z=F.eventTarget(X,a);if(!this.suppressClose(Z)){if(this.isWithinParentWidget(Z)){return ;}if(Y&&Y.onPopupAutoClosed){Y.onPopupAutoClosed(a,X);}this.close(Z);}},isWithinParentWidget:function Q(Y){var X=F.findWidget(Y);while(X){if(X===this){return true;}X=X.parent||X.opener;}return false;},open:function K(Y,X){if(this.autoCloses){this.autoUnclose();}this._super(Y,X);if(this.locksHover){this.lockHover();}},close:function M(X){if(this.locksHover){this.unlockHover();}this._super(X);},shouldPropagateLockHover:function A(){return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");mstrmojo.fx={enabled:true};var E=mstrmojo.dom;mstrmojo.fx._Effect=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.fx._Effect",duration:500,interval:50,delay:null,target:null,getTarget:null,widget:null,slot:null,preStart:null,postStart:null,onCancel:null,onEnd:null,revertOnCancel:true,isPlaying:false,started:false,init:function R(W){mstrmojo.hash.copy(W,this);},play:function C(){this.isPlaying=true;this.started=false;if(this.delay){var W=this;this.delayTimer=window.setTimeout(function(){W._start();W=null;},this.delay);}else{this._start();}},pause:function H(){if(this.delayTimer){window.clearTimeout(this.delayTimer);delete this.delayTimer;}if(this.timer){window.clearInterval(this.timer);delete this.timer;}this.isPlaying=false;},cancel:function U(){this.pause();if(this.started){if(this.revertOnCancel){this.counter=0;this.exec();}if(this.onCancel){this.onCancel();}this.started=false;}},_start:function F(){this.started=true;this._doTarget();this.steps=Math.max(Math.ceil(this.duration/this.interval),1);var W=this.ease;if(typeof W==="string"){this.ease=mstrmojo.registry.ref(W);}if(this._doPreStart()===false){this.started=false;this.isPlaying=false;return ;}this.counter=0;this.exec();this.counter++;this._doPostStart();if(this.counter>=this.steps){this._end();}else{var X=this;if(this.timer){window.clearInterval(this.timer);}this.timer=window.setInterval(function Y(){if(X){X.exec();X.counter++;if(X.counter>=X.steps){X._end();X=null;}}},this.interval);}},exec:null,_end:function D(){this.pause();this.started=false;if(this.onEnd){this.onEnd();}},_doTarget:function T(){if(this.getTarget){this.target=this.getTarget();}else{if(this.widget){this.target=this.widget[this.slot||"domNode"];}else{if(this.target){var X=this.target;if(X&&this.slot&&X.scriptClass){var Y=X[this.slot];if(Y){this.widget=X;this.target=Y;}}}}}if(!this.target){var W=this;while(W=W.parent){if(!W||W.domNode){break;}}if(W){this.widget=W;this.target=W[this.slot||"domNode"];}}},_doPreStart:function N(){if(this.preStart){return this.preStart();}},_doPostStart:function S(){if(this.postStart){this.postStart();}}});function M(Z,a){var X=Z.children,W=(X&&X.length)||0,Y;for(Y=0;Y<W;Y++){X[Y][a]();}}mstrmojo.fx.Parallel=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Parallel",init:function R(Z){this._super(Z);var Y=this.children;mstrmojo.registry.refArray(Y);var W=(Y&&Y.length)||0,X;for(X=0;X<W;X++){Y[X].parent=this;}},_start:function F(){this.started=true;if(this.preStart){this.preStart();}M(this,"play");if(this.postStart){this.postStart();}},pause:function H(){M(this,"pause");},cancel:function U(){M(this,"cancel");}});mstrmojo.fx.AnimateProp=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.AnimateProp",props:null,_start:function O(){var Y=this.props,Z;for(Z in Y){var X=Y[Z],W=X.ease;if(typeof W==="string"){X.ease=mstrmojo.registry.ref(W,{dontInst:true});}}this._super();},exec:function P(){var Z=this.props,a;for(a in Z){var X=Z[a],W=(X.ease||mstrmojo.ease.sin)(this.counter,X.start,X.stop-X.start,this.steps-1);if(X.fn){W=X.fn(W);}if(X.suffix){W+=X.suffix;}var Y=X.isStyle===false?this.target:this.target.style;Y[a]=W;}}});mstrmojo.fx.Typewriter=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Typewriter",charGroupSize:1,srcProp:"text",_doPreStart:function(){this._super();this._dynStop=false;if(this.stop==null){var a=this.srcProp,Y;if(a){var W=this.widget||this.parent;Y=W&&W[a];if((Y!=null)&&(typeof (Y)!=="string")){Y=String(Y);}}this.stop=Y;this._dynStop=true;}if(this.stop==null){this.stop="";}var Z=this.target,b=null,X=1;if(Z){Z.innerHTML="";b=document.createTextNode("");Z.appendChild(b);X=Math.max(Math.floor(this.stop.length/this.steps),1);}this.targetTextNode=b;this.charGroupSize=X;},exec:function(){var X=this.targetTextNode;if(!X){return ;}var W;if(this.counter>=this.steps-1){W=this.stop;}else{if(this.counter===0){W="";}else{W=this.stop.substring(0,this.charGroupSize*this.counter)+"_";}}X.nodeValue=W;},_end:function D(){this._super();if(this._dynStop){this.stop=null;delete this._dynStop;}},cancel:function U(){if(this._dynStop){this.stop=null;delete this._dynStop;}}});mstrmojo.requiresCls("mstrmojo.dom");mstrmojo.fx.Fade=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Fade",start:null,stop:null,ease:null,suffix:null,exec:function P(W){if(W==null){W=(this.ease||mstrmojo.ease.sin)(this.counter,this.start,this.stop-this.start,this.steps-1);}if(E.isIE&&!E.isWinPhone){this.target.style.filter="alpha(opacity="+parseInt(W*100,10)+")";}else{this.target.style.opacity=W;}}});mstrmojo.fx.FadeOut=mstrmojo.declare(mstrmojo.fx.Fade,null,{scriptClass:"mstrmojo.fx.FadeOut",start:1,stop:0,revertOnCancel:true,cssDisplay:"block",_end:function D(){if(this.cssDisplay){this.target.style.display="none";this.exec(this.start);}this._super();},cancel:function U(){if(this.started&&this.cssDisplay){this.target.style.display=this.cssDisplay;}this._super();}});mstrmojo.fx.FadeIn=mstrmojo.declare(mstrmojo.fx.Fade,null,{scriptClass:"mstrmojo.fx.FadeIn",start:0,stop:1,revertOnCancel:true,cssDisplay:"block",_doPostStart:function V(){if(this.cssDisplay){this.target.style.display=this.cssDisplay;}this._super();},cancel:function(){if(this.started&&this.revertOnCancel&&this.cssDisplay){this.target.style.display="none";}this._super();}});function I(Y,X,Z){var W=Math.pow(10,Z||2);if(X){return parseInt(W*Y/X,10)/W;}return parseInt(W*Y,10)/W;}mstrmojo.ease={linear:function L(X,W,Z,Y){if(X===Y){return W+Z;}if(X===0){return W;}return W+Z*I(X,Y);},sin:function A(X,W,Z,Y){return W+Z*Math.sin((Math.PI/2)*X/Y);},cos:function B(X,W,Z,Y){return W+Z*Math.cos((Math.PI/2)*(1-X/Y));},sincos:function K(X,W,Z,Y){if(X>Y/2){return W+Z*Math.cos((Math.PI/2)*(1-X/Y));}return W+Z*Math.sin((Math.PI/2)*X/Y);},cossin:function Q(X,W,Z,Y){if(X>Y/2){return W+Z*Math.sin((Math.PI/2)*X/Y);}return W+Z*Math.cos((Math.PI/2)*(1-X/Y));},bounce:function G(X,W,Z,Y){if((X/=Y)<(1/2.75)){return Z*(7.5625*X*X)+W;}if(X<(2/2.75)){return Z*(7.5625*(X-=(1.5/2.75))*X+0.75)+W;}if(X<(2.5/2.75)){return Z*(7.5625*(X-=(2.25/2.75))*X+0.9375)+W;}return Z*(7.5625*(X-=(2.625/2.75))*X+0.984375)+W;},shake:function J(X,W,Z,Y){if(X<Y/2){return W+Z*I(Math.sin(2*Math.PI*X/8),null,2)*2*X/Y;}return W+Z*I(Math.sin(2*Math.PI*X/8),null,2)*2*(1-X/Y);}};}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var B=mstrmojo.dom;mstrmojo.ui.pathbar._PreAppExit=mstrmojo.provide("mstrmojo.ui.pathbar._PreAppExit",{_mixinName:"mstrmojo.ui.pathbar._PreAppExit",onmouseover:function C(E){if(this._super){this._super(E);}if(this.handleMouseOver){var H=E.target||B.eventTarget(E.hWin,E.e),F=B.findAncestorByAttr(H,"idx",true,this.domNode),D=F&&parseInt(F.value,10),G=this.items[D];this.handleMouseOver(E,G);}},onclick:function A(E){var J=E.target||B.eventTarget(E.hWin,E.e),H=B.findAncestorByAttr(J,"idx",true,this.domNode),D=H&&parseInt(H.value,10),I=this.items[D];if(this.handleClick){var F=this.handleClick(E,I);if(F){E.cancel();return ;}}if(this._super){this._super(E);}if(!J.attributes.menu&&I&&I.en!==false){var G=function(){mstrmojo.form.sendLink(I.href,I.target);};if(mstrApp.onNavigateOut(I,G)!==true){G();}return false;}return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var C=mstrmojo.dom;function D(J,I){var G=[];if(J){var F;for(F in J){var H=Number(F);if(H>=I){G.push(H);}}}G.sort(mstrmojo.array.numSorter);return G;}mstrmojo.ListSelector=mstrmojo.provide("mstrmojo.ListSelector",{premousedown:function E(L,F,N){if(C.isPrimaryMouseBtn(N.e)){var I=N.hWin,J=N.e,G=C.eventTarget(I,J),M=L.listMapper.findIndex(L,F,G);if(M>-1){var H=L.multiSelect,K=C.ctrlKey(I,J),O=C.shiftKey(I,J);if(K||O){C.clearBrowserHighlights(I);}if(H&&(K||(L.selectionPolicy==="toggle"))){L.toggleSelect(M);}else{if(H&&O){L.rangeSelect(M);}else{L.singleSelect(M);}}}}},premouseup:function B(H,K,G){var F=G.hWin,J=G.e,L=C.ctrlKey(F,J),I=C.shiftKey(F,J);if(L||I){C.clearBrowserHighlights(F);}},onadd:function A(I,H){var M=H&&H.value&&H.value.length;if(M){var G=H.index,K=I.selectedIndices,L=D(K,G),J;for(J=L.length-1;J>-1;J--){var F=L[J];K[F+M]=true;delete K[F];}if(I.selectedIndex>=G){I.selectedIndex+=M;}}},onremove:function A(Q,S){var O=S&&S.value&&S.value.length;if(O){var R=S.index,I=R+O-1,M=Q.selectedIndices,L=Q.selectedIndex,G=[],T=[],P=false;if(M){var H;for(H in M){var K=Number(H);if(K>I){G.push(K);}else{if(K>=R){T.push(K);P=true;}}}}G.sort(mstrmojo.array.numSorter);var J,N;for(J=0,N=G.length;J<N;J++){var F=G[J];M[F-O]=true;delete M[F];}if(L>I){Q.selectedIndex-=O;}if(P){Q.removeSelect(T);}}}});}());mstrmojo.requiresCls("mstrmojo.gm.GMEnums");var $GM=mstrmojo.gm,CHART_TYPE=$GM.EnumGraphType,PRP_DATA_LABELS=$GM.EnumDataLabels,PRP_LEGEND=$GM.EnumLegend,PRP_MIN_SIZE_TYPE=$GM.EnumMinSizeType,PRP_FIT_TO=$GM.EnumFitTo,ENUM_FIT_MODES=$GM.EnumContainerFitModes,NGM_GRID_LINE=$GM.EnumNGMGridLines;var ARIAL="Arial",OPEN_SANCE="Open Sans",ALL="ALL";var ENUM_LAYOUT_THEME={DEFAULT:"spatial",CLASSIC:"classic"};var classicProps={THEME_STYLE:ENUM_LAYOUT_THEME.CLASSIC,LAYOUT:{allFF:ARIAL,titleFF:ARIAL,dlvPadding:2,dlvMargin:4,dlvLOH_Compensation:1,ucTBLOHeight:1,drpChildPadding:4,drpLOHW_Compensation:0,cueBottomOffset:1},GRID:{paddingSize:5,mRatio:2,lRatio:3,gridTemplateVisible:false},HEATMAP:{smallGap:2,middleGap:4,largeGap:6,largerGap:8},NGM:{GENERAL_PROPS:(function(){var A={};A[ALL]={dataLabels:PRP_DATA_LABELS.HIDE};return A;}()),DEFAULT_PROPS:(function(){var A={};A[ALL]={cntrFitMode:ENUM_FIT_MODES.AUTOMATIC};return A;}())},OGM:{GENERAL_PROPS:(function(){var A={};A[ALL]={dataLabels:PRP_DATA_LABELS.HIDE,minRowHeight:20,fitTo:PRP_FIT_TO.AUTOMATIC};return A;}()),DEFAULT_PROPS:(function(){var A={};A[ALL]={};A[CHART_TYPE.BAR]={shpBdrThk:1,shpBdrStyle:0};A[CHART_TYPE.PIE]={shpBdrThk:1,shpBdrStyle:0};A[CHART_TYPE.GRID]={shpFillTrans:70};return A;}())},KPI:{fontFamily:ARIAL,defaultFontClr:{1:"#444649",2:"#FFFFFF",3:"#FFFFFF",4:"#FFFFFF"}}},defaultProps={THEME_STYLE:ENUM_LAYOUT_THEME.DEFAULT,LAYOUT:{allFF:OPEN_SANCE,titleFF:OPEN_SANCE,dlvPadding:0,dlvMargin:0,dlvLOH_Compensation:0,ucTBLOHeight:0,drpChildPadding:12,drpLOHW_Compensation:12,cueBottomOffset:-2},GRID:{paddingSize:4.52,mRatio:1050/452,lRatio:1205/452,gridTemplateVisible:true},HEATMAP:{smallGap:1,middleGap:3,largeGap:5,largerGap:5,cellTextSize:11,fontFamily:"Open Sans SemiBold",leftPadding:10,topPadding:8,lineHeightTime:1.3,marginTop:"3px"},NGM:{GENERAL_PROPS:(function(){var A={};A[ALL]={dataLabels:PRP_DATA_LABELS.HIDE};A[CHART_TYPE.WATERFALL]={dataLabels:PRP_DATA_LABELS.HIDE};return A;}()),DEFAULT_PROPS:(function(){var A={};A[ALL]={cntrFitMode:ENUM_FIT_MODES.FIT_TO_CONTENT,dlFntFml:OPEN_SANCE,rfLnFntFml:OPEN_SANCE,lgdFntFml:OPEN_SANCE,xAxTtFntFml:OPEN_SANCE,xAxLbFntFml:OPEN_SANCE,yAxTtFntFml:OPEN_SANCE,yAxLbFntFml:OPEN_SANCE,allTxtFntFml:OPEN_SANCE,rwHdrTxtFntFml:OPEN_SANCE,colHdrTxtFntFml:OPEN_SANCE,rwVlTxtFntFml:OPEN_SANCE,colVlTxtFntFml:OPEN_SANCE,ttlFntFml:OPEN_SANCE,dlFntSz:"9pt",rfLnFntSz:"9pt",lgdFntSz:"9pt",xAxTtFntSz:"9pt",xAxLbFntSz:"9pt",yAxTtFntSz:"9pt",yAxLbFntSz:"9pt",allTxtFntSz:"9pt",rwHdrTxtFntSz:"9pt",colHdrTxtFntSz:"9pt",rwVlTxtFntSz:"9pt",colVlTxtFntSz:"9pt",ttlFntSz:"9pt"};A[CHART_TYPE.WATERFALL]={yGridLnShw:NGM_GRID_LINE.AUTO,xGridLnShw:NGM_GRID_LINE.AUTO};return A;}())},OGM:{GENERAL_PROPS:(function(){var A={};A[ALL]={dataLabels:PRP_DATA_LABELS.HIDE,minRowHeight:20,fitTo:PRP_FIT_TO.NONE};A[CHART_TYPE.PIE]={legend:PRP_LEGEND.HIDE,legendShow:false,dataLabels:PRP_DATA_LABELS.SHOW_TEXT_ONLY};A[CHART_TYPE.SCATTER]={minSizeType:PRP_MIN_SIZE_TYPE.AUTO};return A;}()),DEFAULT_PROPS:(function(){var A={};A[ALL]={rwHdrShw:false,colHdrShw:false,dlFntFml:OPEN_SANCE,rfLnFntFml:OPEN_SANCE,lgdFntFml:OPEN_SANCE,xAxTtFntFml:OPEN_SANCE,xAxLbFntFml:OPEN_SANCE,yAxTtFntFml:OPEN_SANCE,yAxLbFntFml:OPEN_SANCE,allTxtFntFml:OPEN_SANCE,rwHdrTxtFntFml:OPEN_SANCE,colHdrTxtFntFml:OPEN_SANCE,rwVlTxtFntFml:OPEN_SANCE,colVlTxtFntFml:OPEN_SANCE,ttlFntFml:OPEN_SANCE,dlFntClr:3815477,rfLnFntClr:3815477,lgdFntClr:3815477,xAxTtFntClr:3815477,xAxLbFntClr:3815477,yAxTtFntClr:3815477,yAxLbFntClr:3815477,allTxtFntClr:3815477,rwHdrTxtFntClr:3815477,colHdrTxtFntClr:3815477,rwVlTxtFntClr:3815477,colVlTxtFntClr:3815477,ttlFntClr:3815477,yAxTtFntStyle:1,xAxTtFntStyle:1,rwHdrTxtFntStyle:1,colHdrTxtFntStyle:1,dlFntSz:"9pt",rfLnFntSz:"9pt",lgdFntSz:"9pt",xAxTtFntSz:"9pt",xAxLbFntSz:"9pt",yAxTtFntSz:"9pt",yAxLbFntSz:"9pt",allTxtFntSz:"9pt",rwHdrTxtFntSz:"9pt",colHdrTxtFntSz:"9pt",rwVlTxtFntSz:"9pt",colVlTxtFntSz:"9pt",ttlFntSz:"9pt"};A[CHART_TYPE.AREA]={shpBdrThk:1,shpFillTrans:100,shpBdrClr:15461355};A[CHART_TYPE.BAR]={shpBdrClr:15461355,shpBdrStyle:0,shpBdrThk:1,shpFillTrans:100};A[CHART_TYPE.LINE]={shpFillTrans:100};A[CHART_TYPE.PIE]={shpBdrThk:1,shpBdrStyle:0,shpFillTrans:100,shpBdrClr:15461355};A[CHART_TYPE.SCATTER]={shpBdrStyle:99,shpFillTrans:40};A[CHART_TYPE.BUBBLE]={shpBdrStyle:99,shpFillTrans:40};A[CHART_TYPE.GRID]={shpBdrThk:1,shpFillTrans:100};return A;}())},KPI:{fontFamily:OPEN_SANCE,defaultFontClr:{1:"#35383A",2:"#FFFFFF",3:"#FFFFFF",4:"#FFFFFF"}}};mstrmojo.vi.enums.EnumThemeProperties={CLASSIC_THEME_PROPS:classicProps,DEFAULT_THEME_PROPS:defaultProps};mstrmojo.vi.enums.EnumThemeProperties.SUBTYPE={GRID:"GRID",LAYOUT:"LAYOUT",HEATMAP:"HEATMAP"};mstrmojo.vi.enums.EnumThemeProperties.ENUM_LAYOUT_THEME=ENUM_LAYOUT_THEME;mstrmojo.vi.enums.EnumThemeProperties.ENUM_LAYOUT_STYLE={DEFAULT:0,CARD:1,FLAT:2};(function(){mstrmojo.requiresCls("mstrmojo.EnumAuthenticationModes");var A=mstrmojo.EnumAuthenticationModes;function C(G){var H,F,E={success:function(I){H=I.identityToken;},complete:function(){if(H){G=G+"?idToken="+H;}F.location.href=G;}};if(mstrConfig.seamlessLoginEnabled){if(mstrConfig.authMode===A.INTEGRATED.toString()){G+="?loginMode="+A.INTEGRATED;window.open(G,"_blank");}else{F=window.open();mstrmojo.xhr.request("GET",mstrConfig.taskURL,E,{taskId:"createIdentityToken"});}}else{window.open(G,"_blank");}}function D(){return mstrConfig&&mstrConfig.features&&mstrConfig.features["show-dossier-library-link"]&&!!mstrConfig.libraryWebBaseURL;}function B(F){var E=mstrConfig.libraryWebBaseURL+"app";if(F){E+="/"+mstrConfig.projectId+"/"+F;}return E;}mstrmojo.util.LibraryHelper=mstrmojo.provide("mstrmojo.util.LibraryHelper",{createTokenAndOpenLink:C,isLibraryConfigured:D,constructLibraryUrl:B});})();(function(){mstrmojo.requiresCls("mstrmojo.vi.enums.EnumThemeProperties");var A=mstrmojo.vi.enums.EnumThemeProperties,B=A.ENUM_LAYOUT_THEME;mstrmojo.util.ThemeHelper=mstrmojo.provide("mstrmojo.util.ThemeHelper",{getThemePropConfig:function C(E){var F=E&&E.layoutTheme,D=E&&E.layoutstyle;if(!F){F=!!D?B.DEFAULT:B.CLASSIC;}return F===B.DEFAULT?A.DEFAULT_THEME_PROPS:A.CLASSIC_THEME_PROPS;}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.ListSelector");var A=mstrmojo.dom;mstrmojo.TreeBrowserSelector=mstrmojo.provide("mstrmojo.TreeBrowserSelector",mstrmojo.hash.copy({premousedown:function B(F,I,E){if(A.isPrimaryMouseBtn(E.e)){var D=E.hWin,H=E.e,G=A.eventTarget(D,H),C=F.listMapper.findIndex(F,I,G);if(C>-1){F.toggleSelect(C);}}}},mstrmojo.hash.copy(mstrmojo.ListSelector)));})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.dom","mstrmojo.ListSelector");var C=mstrmojo.dom,B=C.isIE;mstrmojo.TreeNodeSelector=mstrmojo.provide("mstrmojo.TreeNodeSelector",mstrmojo.mixin({premousedown:function A(E,I,D){var G=(E&&E.tree)||E,H=D&&D.e;if(!H){return false;}var F=G.lastMouseDown;if(F){if((F.e===H)||(B&&((new Date())-F.dt<50))){return false;}}this._super(E,I,D);if(G){if(G.onnodemousedown){G.onnodemousedown(D);}G.lastMouseDown={e:H,dt:new Date()};}return true;}},mstrmojo.hash.copy(mstrmojo.ListSelector)));}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.form");var F=mstrmojo.dom;var A=mstrmojo.form;function C(J,I,H,L){var G=J.getElementsByTagName(I);var K=mstrmojo.array.filter(G,function(M){return M.getAttribute(H)===L;});return K[0];}function B(M){var K=document.getElementById(M),J=C(K,"input","name","myFile"),I=J.value,L=function(){if(F.isIE){var N=document.createElement("form");J.parentNode.insertBefore(N,J);N.appendChild(J);N.reset();N.removeNode(false);}};if(I===""){return ;}else{if(/\.mstr$/.test(I.toLowerCase())){mstrApp.showWait(true);A.addURLAsHiddenInputsToForm(K,mstrmojo.addCSRFTokenToURL(mstrApp.name+"="+encodeURIComponent(mstrApp.servletState)));if(mstrApp.currentFolderId){var H=document.getElementById("import_folderID");H.value=mstrApp.currentFolderId;}if(!C(K,"input","name","formId")){var G=document.createElement("input");G.type="hidden";G.name="formId";G.value=K.id;K.appendChild(G);}K.submit();K.reset();}else{mstrmojo.alert(mstrmojo.desc(11227),null,mstrmojo.desc(11226));}}L();}function E(Q){var V=Q.status===200,K=Q.content,J=mstrApp.name,L=function(a){mstrApp.showWait();var Z=document.getElementById(K.formId||"import_form"),Y=[],X=0,W;mstrmojo.hash.forEach(a,function(d,c){if(c==="folderId"){if(F.isIE8){var b=document.getElementById("import_folderID");if(b){b.value=d;}}}else{W=document.createElement("input");W.type="hidden";W.name=c;W.value=d;Z.appendChild(W);Y[X++]=W;}});window.setTimeout(function(){Z.submit();for(var b=0;b<Y.length;b++){Z.removeChild(Y[b]);}},0);};if(K&&K.messageID){var I=(K.fdid?K.fdid:"");if(K.isConflict){var P=function(){L({messageID:K.messageID,resume:true});},M=function(){var W=mstrmojo.insert({scriptClass:"mstrmojo.ui.editors.RenameEditor",renameText:mstrmojo.string.decodeHtmlString(K.n),title:mstrmojo.desc(13052,"Upload"),zIndex:1002,onRename:function(X){if(mstrmojo.string.isEmpty(X)){mstrmojo.alert("Please enter a valid name",null,null,1004);return false;}else{L({messageID:K.messageID,resume:true,dashboardName:X});var Y=mstrmojo.all.ImportNameConflictDialog;if(Y){Y.destroy();}}}});W.open();return false;},H=function(){mstrApp.hideWait();};H();mstrmojo.confirm(mstrmojo.desc(15454,"The Dossier ## already exists. Do you want to replace the existing Dossier?").replace("##",("<strong>"+K.n+"</strong>")),null,{id:"ImportNameConflictDialog",title:mstrmojo.desc(13052,"Upload"),allowHTML:true,buttons:[mstrmojo.Button.newWebButton(mstrmojo.desc(219,"Yes"),P,true),mstrmojo.Button.newWebButton(mstrmojo.desc(3167,"Save As"),M,true),mstrmojo.Button.newWebButton(mstrmojo.desc(3416,"Cancel"),H)],onPreClose:function(){H();return true;}});}else{L({messageID:K.messageID,folderId:I});}}else{if(V){var O=mstrmojo.addCSRFTokenToURL(J+"?evt=2001&src="+J+".2001"+((K&&K.fdid)?("&folderID="+K.fdid):"&systemFolder=20")),G=D(K.did),U=function(W){if(this.parent===null&&this.close){this.close();}else{this.parent.parent.close();}if(W){location.href=W;}},S=mstrmojo.emptyFn,R=function(){mstrmojo.mstr._ObjectActions.openSharingEditor(K.servletPath+G,{objectName:K.n,objId:K.did,objType:"55",mid:-1},false,{showLinkOnOpen:true});};if(!mstrmojo.resolveFeature("flashvi")&&(F.isIE8)){S=function(){U.call(this);mstrmojo.alert(mstrmojo.desc(15474));};}else{S=function(){U.call(this,G);};}var T=mstrApp.currentFolderName&&mstrApp.currentFolderName();var N=mstrmojo.insert({scriptClass:"mstrmojo.onetier.vi.ui.UploadResultEditor",folderName:T||"My Reports",dashboardName:K.n,okFn:function(){U.call(this,T&&O);},viewDashboardFn:S,shareDashboardFn:R});N.open();}else{mstrmojo.error({longDesc:Q.errorMsg});}mstrApp.hideWait(true);}}function D(K){var I=mstrApp.name,J,L;if(mstrmojo.resolveFeature("flashvi")){J=2048001;L={visMode:0};}else{J=3140;L={};}L.documentID=K;L.evt=J;L.src=I+"."+J;var G=[];for(var H in L){if(!L.hasOwnProperty(H)){continue;}G.push(encodeURIComponent(H)+"="+encodeURIComponent(L[H]));}return mstrmojo.addCSRFTokenToURL(I+"?"+G.join("&"));}mstrmojo.mstr.ui.MstrFileUploadHelper={uploadDashboardFile:B,uploadCallback:E};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.locales");var c=mstrmojo.array,P=mstrmojo.meta.TP,G=mstrmojo.meta.STP,O=mstrmojo.hash,F={ANDOR:14,MQ:10,MC:12,AQ:2,AL:6,AC:9,AE:5,F:13,R:21,B:20,XML:1,RLS:15},B={};var W;for(W in F){B[F[W]]=true;}var a={};a[F.AQ]="a";a[F.AL]="a";a[F.AC]="a";a[F.AE]="a";a[F.MQ]="m";a[F.MC]="m";a[F.F]="f";a[F.R]="r";a[F.XML]="p";a[F.ANDOR]="nds";var K={};K[F.MQ]=["not","m","fn","fnt","cs","dmy","idcsi"];K[F.MC]=["not","m","fn","fnt","m2","m3","p","dmy","idcsi"];K[F.AE]=["not","a","fn","es","a2","fm2","p"];K[F.AQ]=["not","a","fm","fn","cs"];K[F.AL]=["not","a","fm","fn","cs"];K[F.AC]=["not","a","fm","a2","fm2","a3","fm3","fn","cs"];K[F.R]=["not","r"];K[F.F]=["not","f"];K[F.XML]=["not","n","p"];K[F.ANDOR]=["not","node","nds","fn"];var M={};M[F.MQ]="METRIC_FNS";M[F.MC]="METRIC_FNS";M[F.AQ]="FORM_FNS";M[F.AL]="FORM_FNS";M[F.AC]="FORM_FNS";M[F.AE]="ELEM_FNS";var N={FILTER:1,REPORT:3,METRIC:4,FOLDER:8,PROMPT:10,FUNCTION:11,ATTR:12,FACT:13,DIM:14,FORM:21,ROLE:43,CONS:47},b={FILTER:256,CUSTOMGROUP:257,PROMPT:2560,PROMPT_BOOLEAN:2561,PROMPT_LONG:2562,PROMPT_STRING:2563,PROMPT_DOUBLE:2564,PROMPT_DATE:2565,PROMPT_OBJECTS:2566,PROMPT_ELEMENTS:2567,PROMPT_EXPRESSION:2568,PROMPT_EXPRESSION_DRAFT:2569,PROMPT_DIMTY:2570,PROMPT_BIGDECIMAL:2571,REPORT_GRID:768,REPORT_GRAPH:769,REPORT_ENGINE:770,REPORT_TEXT:771,REPORT_DATAMART:772,REPORT_BASE:773,REPORT_GRIDGRAPH:774,REPORT_NONINTERACTIVE:775,REPORT_CUBE:776,REPORT_EMMACUBE:779,CONS:12032,NDE:12033},T={a:N.ATTR,a2:N.ATTR,m:N.METRIC,m2:N.METRIC,r:N.REPORT,f:N.FILTER,p:N.PROMPT},U={f:b.FILTER};var V={};V[F.MQ]=N.METRIC;V[F.MC]=N.METRIC;V[F.AQ]=N.ATTR;V[F.AL]=N.ATTR;V[F.AC]=N.ATTR;V[F.AE]=N.ATTR;V[F.F]=N.FILTER;V[F.R]=N.REPORT;var J=function(d){var H=d.length,g={},e;for(e=0;e<H;e++){var h=d[e];g[h.did]=h.n;}return g;},E=function(e){var H=e.length,f;for(f=0;f<H;f++){var d=e[f];if("tp" in d){d.t=d.tp;}}return e;},X=function(e,g){var H=e.length,f;for(f=0;f<H;f++){var d=e[f];if("tp" in d){if(g){d.t=g;}else{delete d.t;}}}return e;},Z=function(d,f){if(!f){f=[];}f.length=0;var e,H;for(e=0,H=d.length;e<H;e++){f[e]=d[e];}return f;},L={0:[{did:"1,76"},{did:"1,79"},{did:"1,77"},{did:"1,80"},{did:"1,78"},{did:"1,81"},{did:"1,18"},{did:"1,43"}],1:[{did:"2,1"},{did:"2,2"},{did:"3,1"},{did:"3,2"}]};var R={0:[{did:"1,22"},{did:"1,57"}]};mstrmojo.expr=mstrmojo.provide("mstrmojo.expr",{ET:F,ETs:B,ET2TGT:a,ET2COND:K,ET2TP:V,FN:{EQUAL:6,NOT_EQUAL:7,GREATER:8,LESS:9,GREATER_EQUAL:10,LESS_EQUAL:11,IN_LIST:22,NOT_IN_LIST:57,BETWEEN:17,NOT_BETWEEN:44,IS_NULL:54,IS_NOT_NULL:55,AND:19,OR:20,NOT:21,SEARCH:158,DESCENDANT:187},FN_MRP:{BETWEEN:3,EXCLUDE_TOP:4,EXCLUDE_BOTTOM:5,BETWEEN_DESCENDING:13},FNT:{DEF:1,RANK:2,PER:3},FN_SEP:",",TP:N,STP:b,DMY_TP:{ATTR:-1,DIM:-2},DTP:{UNKNOWN:-1,INTEGER:1,UNSIGNED:2,NUMERIC:3,DECIMAL:4,REAL:5,DOUBLE:6,FLOAT:7,CHAR:8,VARCHAR:9,LONGVARCHAR:10,BINARY:11,VARBIN:12,LONGVARBIN:13,DATE:14,TIME:15,TIMESTAMP:16,SHORT:21,LONG:22,MBCHAR:23,BOOLEAN:24,PATTERN:25,BIGDECIMAL:30},BFTP:{RESERVED:0,HIDDEN:-1,DATETIME:1,NUMBER:2,TEXT:3,PICTURE:4,URL:5,EMAIL:6,TAG:7,DATE:8,TIME:9,SYMBOL:10,BIGDECIMAL:11,PHONENUMBER:12},METRIC_DTP:3,FN_DTP:{NUM:0,CHAR:1,DATE:2},DTP2PROMPT_STP:{"-1":b.PROMPT,1:b.PROMPT_LONG,2:b.PROMPT_LONG,3:b.PROMPT_LONG,4:b.PROMPT_DOUBLE,5:b.PROMPT_DOUBLE,6:b.PROMPT_DOUBLE,7:b.PROMPT_DOUBLE,8:b.PROMPT_STRING,9:b.PROMPT_STRING,10:b.PROMPT_STRING,14:b.PROMPT_DATE,15:b.PROMPT_DATE,16:b.PROMPT_DATE,21:b.PROMPT_LONG,22:b.PROMPT_LONG,23:b.PROMPT_STRING,24:b.PROMPT_BOOLEAN,30:b.PROMPT_BIGDECIMAL},DTP2FN_DTP:{"-1":0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:1,9:1,10:1,11:0,12:0,13:0,14:0,15:0,16:0,21:0,22:0,23:1,24:0,25:1,30:0,34:0},fnCstCount:function A(e,d){var g=this.FN,h=this.FN_MRP,H=this.FNT;if(d===H.DEF||d===undefined){switch(e){case g.BETWEEN:case g.NOT_BETWEEN:return 2;case g.IS_NULL:case g.IS_NOT_NULL:return 0;}}else{if(d===H.PER||d===H.RANK){switch(e){case h.BETWEEN:case h.BETWEEN_DESCENDING:return 2;}}}return 1;},fn_List:function S(d,H){var e=this.FN;return d==e.IN_LIST||d==e.NOT_IN_LIST;},fn_AC_MC:function Y(d,H){var e=this.FN;return(d==e.EQUAL)||(d==e.NOT_EQUAL)||(d==e.GREATER)||(d==e.LESS)||(d==e.GREATER_EQUAL)||(d==e.LESS_EQUAL);},fnName:function Q(h,g,d,f){var H=this[M[h]];if(H&&H.constructor===Object){H=H[this.DTP2FN_DTP[f]]||H["*"];}if(h===F.MQ){H=H.concat(mstrmojo.locales.expression.MetricRP);}var e=c.find(H,"did",(d||1)+this.FN_SEP+g);if(e>-1){return H[e].n;}return"";},findTargets:function I(n,f,p){if(!p){p={};}if(n){var m;for(m in T){var y=n[m];if(y){if(!y[P]){y[P]=T[m];}if(!y[G]&&U[m]){y[G]=U[m];}p[y[f]]=y;}}if(n.dmy){var j=this.TP.ATTR,q=this.DMY_TP.ATTR,e=n.dmy.uts,x,d;for(x=0,d=(e&&e.length)||0;x<d;x++){var l=e[x];if(l&&l.utp===q){var g=l.utgt;if(!g.t){g.t=j;}p[g[f]]=g;}}}var H=n.nds,o,v;for(o=0,v=(H&&H.length)||0;o<v;o++){this.findTargets(H[o],f,p);}var r=n.cs,w=r&&r.length;if(w){for(o=0;o<w;o++){this.findTargets(r[o],f,p);}}}return p;},onLocaleUpdated:function(){var d=mstrmojo.locales.expression,H=mstrmojo.expr;H.BRANCH_FNS=O.copy(J(d.BranchQual),H.BRANCH_FNS);H.ELEM_FNS=Z(X(d.Element,"fn"),H.ELEM_FNS);H.METRIC_FNS={"*":X(c.filter(d.Metric.concat(d.MetricRP),function(e){return e.did&&(c.find(R["0"],"did",e.did)<0);}))};H.FORM_FNS={0:X(c.filter(d.Attribute,function(e){return e.did&&(c.find(L["0"],"did",e.did)<0);})),1:X(c.filter(d.Attribute,function(e){return e.did&&(c.find(L["1"],"did",e.did)<0);})),2:X(c.filter(d.Attribute,function(e){return e.did&&(c.find(L["0"],"did",e.did)<0)&&(c.find(L["1"],"did",e.did)<0);}))};H.DIMTYLEVELS=Z(X(d.DimtyLevels),H.DIMTYLEVELS);},getSortedObjectsByTypeGroup:function D(g){var e=-1,H=0,d=1,f=2;function h(j){switch(j.t){case N.METRIC:return d;case N.ATTR:case N.DIM:case N.CONS:return H;case N.FILTER:return j.st===b.CUSTOMGROUP?H:f;case -1:return e;default:return f;}}g=c.map(g||[],function(j){return O.copy(j,{});});return g.sort(function(n,m){var o=h(n)-h(m);if(o){return o;}var l=n.n.toUpperCase(),k=m.n.toUpperCase(),j=l.localeCompare(k);if(j){return j;}return n.n.localeCompare(m.n);});},mapBaseFormTypeToDataType:function C(e){e=parseInt(e);if(e===NaN){return -1;}var d=this.BFTP,H=this.DTP;switch(e){case d.DATETIME:return H.TIMESTAMP;case d.DATE:return H.DATE;case d.TIME:return H.TIME;case d.NUMBER:return H.REAL;case d.TEXT:return H.CHAR;case d.BIGDECIMAL:return H.BIGDECIMAL;default:return H.CHAR;}}});mstrmojo.expr.onLocaleUpdated();}());(function(){mstrmojo.requiresCls("mstrmojo.locales");var X=function(){return mstrmojo.locales.datetime;},L=mstrmojo.string;mstrmojo.date=mstrmojo.provide("mstrmojo.date",{monthNumbers:{Jan:1,Feb:2,Mar:3,Apr:4,May:5,Jun:6,Jul:7,Aug:8,Sep:9,Oct:10,Nov:11,Dec:12},REGEXPS:{DATES:{},TIMES:{}},CACHE:{PARSEDATE:{CONTAINS:{},EQUALS:{}},PARSETIME:{CONTAINS:{},EQUALS:{}}},now:Date.now||function D(){return new Date().getTime();},isDate:function Y(b,f,a){var d=this.parseDate(b,a);var e=!!(d&&this.doesDateExist(d.month,d.day,d.year));if(f){if(e){var c=this.formatDateInfo(d,X().DATEOUTPUTFORMAT);if(a){return{match:d.match,formatted:c};}return c;}return null;}return !!e;},formatDateInfo:function R(d,f){if(!f){return"";}var a=d.day,e=d.month,c=d.year;var b=f.replace(/dd/g,this.formatInteger(a,2)).replace(/d/g,Number(a)).replace(/yyyy/g,Number(c)).replace(/yy/g,this.formatInteger(Number(c)%100,2)).replace(/MMM/g,"~~~~").replace(/MM/g,"@@").replace(/M/g,"^").replace(/MMMM/g,X().MONTHNAME_FULL[Number(e)-1]).replace(/\~\~\~\~/g,X().MONTHNAME_SHORT[Number(e)-1]).replace(/\@\@/g,this.formatInteger(e,2)).replace(/\^/g,Number(d.month));return b;},parseDate:function Z(l,f,j){if(l==null){return false;}if(typeof l!=="string"){l=String(l);}l=L.trim(l);var a=this.CACHE.PARSEDATE[f?"CONTAINS":"EQUALS"],c=a[l];if(c||(c===null)){return c;}var b=null;var h;if(j){h=[j];}else{h=[].concat(X().DATEINPUTFORMATS);h.unshift(X().DATEOUTPUTFORMAT);}var d,e;for(d=0,e=h.length;d<e;d++){var g=this._buildRegExp4DateFormat(h[d]),k=g&&l.match(f?g.reContains:g.reEquals);if(k){b={match:k[0],year:g.yearIndex&&this.fourDigitYear(k[g.yearIndex]),day:g.dayIndex&&parseInt(Number(k[g.dayIndex]),10),month:g.monthIndex&&this.numericMonth(k[g.monthIndex])};break;}}a[l]=b;return b;},isTime:function I(b,e,a){var f=this.parseTime(b,a);var d=!!(f&&this.doesTimeExist(f.hour,f.min,f.sec));if(e){if(d){var c=this.formatTimeInfo(f,X().TIMEOUTPUTFORMAT);if(a){return{match:f.match,formatted:c};}return c;}return null;}return !!d;},parseTime:function J(m,f,k){if(m==null){return false;}if(typeof m!=="string"){m=String(m);}m=L.trim(m);var a=this.CACHE.PARSETIME[f?"CONTAINS":"EQUALS"],c=a[m];if(c||(c===null)){return c;}var b=null;var j;if(k){j=[k];}else{j=[].concat(X().TIMEINPUTFORMATS);j.unshift(X().TIMEOUTPUTFORMAT);}var d,e;for(d=0,e=j.length;d<e;d++){var h=this._buildRegExp4TimeFormat(j[d]),l=h&&m.match(f?h.reContains:h.reEquals);if(l){var g=h.ampmIndex&&l[h.ampmIndex];b={match:l[0],hour:h.hourIndex&&this.capitalHour(l[h.hourIndex],g),min:h.minIndex&&parseInt(Number(l[h.minIndex]),10),sec:h.secIndex&&parseInt(Number(l[h.secIndex]),10)};break;}}a[m]=b;return b;},formatTimeInfo:function S(d,b){if(!b){return"";}var c=!(Number(d.hour)%12)?12:(Number(d.hour)%12),a=b.replace(/HH/g,this.formatInteger(d.hour,2)).replace(/H/g,Number(d.hour)).replace(/hh/g,this.formatInteger(c,2)).replace(/h/g,c).replace(/mm/g,this.formatInteger(Number(d.min)||0,2)).replace(/m/g,Number(d.min)||0).replace(/ss/g,this.formatInteger(Number(d.sec)||0,2)).replace(/s/g,Number(d.sec)||0).replace(/a/g,(Number(d.hour)<12)?X().AM_NAME:X().PM_NAME).replace(/tt/g,(Number(d.hour)<12)?X().AM_NAME:X().PM_NAME).replace(/AM\/PM/g,(Number(d.hour)<12)?X().AM_NAME:X().PM_NAME);return a;},doesTimeExist:function G(f,b,e){var d=parseInt(f,10);if(d>=0&&d<=23){var a=parseInt(b,10);if(a>=0&&a<=59){if(!e){return true;}var c=parseInt(e,10);if(c>=0&&c<=59){return true;}}}return false;},capitalHour:function C(a,b){a=parseInt(Number(a),10);if(b&&(b.match(X().AM_NAME)||b.match(/AM/i))){return a%12;}if(b&&(b.match(X().PM_NAME)||b.match(/PM/i))){return 12+(a%12);}return a;},getTimeStamp:function O(){var b=new Date();var a=[b.getMonth()+1,b.getDate(),b.getFullYear()];var e=[b.getHours(),b.getMinutes(),b.getSeconds()];var d=(e[0]<12)?"AM":"PM";e[0]=(e[0]<12)?e[0]:e[0]-12;e[0]=e[0]||12;for(var c=1;c<3;c++){if(e[c]<10){e[c]="0"+e[c];}}return a.join("-")+" "+e.join("")+" "+d;},isDateAndOrTime:function V(a,b){return this.isDateTime(a,b)||this.isDate(a,b)||this.isTime(a,b);},isDateTime:function B(k,a){var e=this.parseDateAndOrTime(k),h=e&&e.date,d=e&&e.time,g=!!h&&!!d&&this.doesDateExist(h.month,h.day,h.year)&&this.doesTimeExist(d.hour,d.min,d.sec);if(a){if(g){var b=this.formatDateInfo(h,X().DATEOUTPUTFORMAT),c=this.formatTimeInfo(d,X().TIMEOUTPUTFORMAT),j=k.indexOf(h.match),f=k.indexOf(d.match);return(f<j)?c+" "+b:b+" "+c;}return null;}return !!g;},parseDateAndOrTime:function Q(b,a,f){var c=this.parseDate(b,true,a);var d=L.trim((c&&c.match)?b.replace(c.match,""):b),e=this.parseTime(d,false,f);if(!c&&!e){return null;}return{date:c,time:e};},inDateTimeRange:function P(c,e,h){var b=this.parseDateAndOrTime(c),f=b&&b.date,j=b&&b.time;if(!f&&!j){return 0;}if(e!=null){var d=this.parseDateAndOrTime(e);if(f&&d&&d.date){var k=this.compareDate(f,d.date);if(k<0){return -1;}if(k==0){if(j&&d.time&&(this.compareTime(j,d.time)<0)){return -1;}}}}if(h!=null){var a=this.parseDateAndOrTime(h);if(f&&a&&a.date){var g=this.compareDate(f,a.date);if(g>0){return 1;}if(g==0){if(j&&a.time&&(this.compareTime(j,a.time)>0)){return 1;}}}}return 0;},compareDate:function A(c,a){if(c===a){return 0;}var d=typeof c==="string"?this.parseDate(c):c,b=typeof a==="string"?this.parseDate(a):a;if(!d){return -1;}if(!b){return 1;}return(d.year-b.year)||(d.month-b.month)||(d.day-b.day)||0;},compareTime:function K(b,a){if(b===a){return 0;}var d=typeof b==="string"?this.parseTime(b):b,c=typeof a==="string"?this.parseTime(a):a;if(!d){return -1;}if(!c){return 1;}return(d.hour-c.hour)||(d.min-c.min)||(d.sec-c.sec)||0;},compareDateTime:function U(b,a){return this.compareDate(b,a)||this.compareTime(b,a);},compareDateAndOrTime:function E(h,f){if(h===f){return 0;}var b=typeof h==="string"?this.parseDateAndOrTime(h):h,a=typeof f==="string"?this.parseDateAndOrTime(f):f;if(!b){return -1;}if(!a){return 1;}var g=b.date,e=a.date,d=b.time,c=a.time;return this.compareDate(g,e)||this.compareTime(d,c);},_buildRegExp4DateFormat:function N(c){if(!c){return null;}var e=this.REGEXPS.DATES[c];if(!e){if(!this.REGEXPS.MONTHNAME_FULL){this.REGEXPS.MONTHNAME_FULL=X().MONTHNAME_FULL.join("|");this.REGEXPS.MONTHNAME_SHORT=X().MONTHNAME_SHORT.join("|");}e=this.REGEXPS.DATES[c]={};e.formatStr=c;var b=e.reStr=c.replace(/([^M|d|y|\s])/g,"\\$1").replace(/dd/g,"~~~~").replace(/d/g,"(\\d{1,2})").replace(/\~\~\~\~/g,"(\\d\\d)").replace(/yyyy/g,"(\\d\\d\\d\\d)").replace(/yy/g,"(\\d\\d)").replace(/MMMM/g,"@@@@").replace(/MMM/g,"@@@").replace(/MM/g,"(\\d\\d)").replace(/M/g,"(\\d{1,2})").replace("@@@@","("+this.REGEXPS.MONTHNAME_FULL+")").replace("@@@","("+this.REGEXPS.MONTHNAME_SHORT+")");e.reEquals=new RegExp("^"+b+"$");e.reContains=new RegExp("^"+b+"\\b");var f=[{key:"monthIndex",index:c.indexOf("M")},{key:"dayIndex",index:c.indexOf("d")},{key:"yearIndex",index:c.indexOf("y")}];f.sort(function(h,g){return h.index-g.index;});var a=1,d;for(d=0;d<3;d++){e[f[d].key]=f[d].index>-1?a++:null;}}return e;},_buildRegExp4TimeFormat:function F(d){if(!d){return null;}var f=this.REGEXPS.TIMES[d];if(!f){if(!this.REGEXPSTR_AMPM){this.REGEXPSTR_AMPM=[X().AM_NAME,X().PM_NAME,String(X().AM_NAME).toLowerCase(),String(X().PM_NAME).toLowerCase()].join("|");}f=this.REGEXPS.TIMES[d]={};f.formatStr=d;var c=d.replace(/\'\'/g,'"');var g=c.match(/\'(.+?)\'/g);c.replace(/\'(.+?)\'/g,"*");c=c.replace(/([^H|h|m|s|z|Z|a|t|\s|A|P|M|\/])/g,"\\$1").replace(/HH|hh/g,"(\\d\\d)").replace(/H|h/g,"(\\d{1,2})").replace(/mm/g,"(\\d\\d)").replace(/m/g,"(\\d{1,2})").replace(/ss/g,"(\\d\\d)").replace(/s/g,"(\\d{1,2})").replace(/a/g,"("+this.REGEXPSTR_AMPM+")").replace(/AM\/PM/,"("+this.REGEXPSTR_AMPM+")").replace(/tt/g,"("+this.REGEXPSTR_AMPM+")").replace(/z|Z/g,"(.+?)");var e,a;for(e=1,a=(g&&g.length)||0;e<a;e++){c=c.replace(/\*/,g[e]);}c=c.replace(/\"/g,"'");f.reEquals=new RegExp("^"+c+"$");f.reContains=new RegExp(c);var h=[{key:"hourIndex",index:d.search(/h|H/)},{key:"minIndex",index:d.indexOf("m")},{key:"secIndex",index:d.indexOf("s")},{key:"ampmIndex",index:d.search(/tt|a|AM\/PM/)},{key:"zoneIndex",index:d.search(/z|Z/)}];h.sort(function(k,j){return k.index-j.index;});var b=1;for(e=0;e<5;e++){f[h[e].key]=h[e].index>-1?b++:null;}}return f;},doesDateExist:function M(d,a,b){var c=new Date(b,d-1,a);return b==c.getFullYear()&&d==c.getMonth()+1&&a==c.getDate();},fourDigitYear:function T(b){b=parseInt(Number(b),10);if(!isNaN(b)){var a=(X().TWODIGITYEARSTART%100)||0;if(b>=0&&b<=a){b=2000+b;}else{if(b>a&&b<100){b=1900+b;}}}return b;},numericMonth:function W(e){var d=parseInt(Number(e),10),c=mstrmojo.array;if(!isNaN(d)){return d;}var a=(e&&e.length)||0,b=-1;if(a){if(a<=3){b=c.indexOf(X().MONTHNAME_SHORT,e);}if(b===-1){b=c.indexOf(X().MONTHNAME_FULL,e);}}return b+1;},formatInteger:function H(c,b){var f=String(c),e=Math.max(b-f.length,0);if(e>0){var a=[f],d;for(d=1;d<=e;d++){a.push("0");}f=a.reverse().join("");}return f;},getFirstDateOfMonth:function(b,a){return new Date(b,a-1,1);},getDateObject:function(g,a,f,c,e,b){g=g||0;a=a||1;f=f||1;c=c||0;e=e||0;b=b||0;return new Date(g,a-1,f,c,e,b);},getDateFromDateInfo:function(a){return this.getDateObject(a.date&&a.date.year,a.date&&a.date.month,a.date&&a.date.day,a.time&&a.time.hour,a.time&&a.time.min,a.time&&a.time.sec);},getDateJson:function(a){return{year:a.getFullYear(),month:a.getMonth()+1,day:a.getDate(),hour:a.getHours(),min:a.getMinutes(),sec:a.getSeconds()};},isLeapYear:function(a){return !(a%400)||(!(a%4)&&!!(a%100));},getDaysOfMonth:function(c,a){var b=[31,28,31,30,31,30,31,31,30,31,30,31];if(a==2&&this.isLeapYear(c)){return 29;}return b[a-1];},getPreMonth:function(b,a){if(a===1){return{y:b-1,m:12};}return{y:b,m:a-1};},getNextMonth:function(b,a){if(a===12){return{y:b+1,m:1};}return{y:b,m:a+1};}});}());(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.string","mstrmojo.array");var M=mstrmojo.locales,I=mstrmojo.string,P=window.mstrConfig,F=mstrmojo.array,C=P.units,R={CM:1,IN:2,MM:3,PT:4,PC:5,PX:6},A={1:"cm",2:"in",3:"mm",4:"pt",5:"pc",6:"px"},E={DEFAULT:-2,FIXED:0,CURR:1,PERCENT:4,FRACTION:5,SCIENTIFIC:6,GENERAL:9};var G=96;String.prototype.reverse=function(){var U="",T;for(T=this.length;T>0;--T){U+=this.charAt(T-1);}return U;};function K(T,V){T=T||"";V=V||T.match(/\".+?\"/g)||[];for(var U=0;U<V.length;U++){T=T.replace(V[U],V[U].substring(1,V[U].length-1).replace(/\$/g,"$$$$"));}return T;}function S(Y){var T=86400000,X=new Date(1900,0,1,0,0,0,0),U=Math.floor(Y)-1,W=Y-U-1;if(Y>=59){U--;}var V=new Date(X.getTime()+(U*T));V.setTime(V.getTime()+W*T+500);return V;}function H(X,e,g){var Y={"d+":X.getDate(),"h+|H":X.getHours(),"s+":X.getSeconds()},T=M.datetime,Z;if(/(y+)/.test(e)){var W=X.getFullYear().toString(),d=RegExp.$1,V=d.length===2,U=W.length;e=e.replace(d,W.substr(V?U-2:0,V?2:U));}if(/(^\[h\])/.test(e)&&g){e=e.replace(RegExp.$1,""+(Math.floor(g*24)));}if(/(\"?:\"?mm)/.test(e)){var a=X.getMinutes();e=e.replace(RegExp.$1,":"+(RegExp.$1.length===1?a:("00"+a).substr(a.toString().length)));}if(/(AM\/PM)/.test(e)){var f=Y["h+"],b=f>11;Y["h+"]=f-(b?12:0);e=e.replace(RegExp.$1,b?"PM":"AM");}for(Z in Y){if(new RegExp("("+Z+")").test(e)){e=e.replace(RegExp.$1,RegExp.$1.length===1?Y[Z]:("00"+Y[Z]).substr((Y[Z].toString()).length));}}if(/(mmmm)/.test(e)){e=e.replace(RegExp.$1,T.MONTHNAME_FULL[X.getMonth()]);}else{if(/(mmm)/.test(e)){e=e.replace(RegExp.$1,T.MONTHNAME_SHORT[X.getMonth()].substr(0,3));}else{if(/((m|M)+)/.test(e)){var c=(X.getMonth()+1).toString();e=e.replace(RegExp.$1,RegExp.$1.length===1?c:("00"+c).substr(c.length));}}}return K(e);}function N(U,X){var V=0,T=X.length,W=0;for(;V<T;V++){if(X[V]==="0"){W++;}else{if(X[V]==="#"){if(W<U){W++;}}else{continue;}}}return W;}mstrmojo.num=mstrmojo.provide("mstrmojo.num",{isInt:function D(T){var W=this.getThousand(),V=new RegExp("^(-)?[0-9]{1,3}(\\"+W+"[0-9]{3})*$"),U=new RegExp("^(-)?[0-9]+$");return(String(T).indexOf(W)&&V.test(T))||U.test(T);},isNumeric:function O(X){var W=this.getDecimal(),Y=this.getThousand(),V=new RegExp("^(-)?[0-9]{1,3}(\\"+Y+"[0-9]{3})*(\\"+W+"[0-9]+)?$"),U=new RegExp("^(-)?[0-9]*(\\"+W+")?[0-9]+$"),T=new RegExp("^(-)?[0-9]{1}(\\"+W+")[1-9]+[eE]{1}[-]{0,1}[0-9]+$");return(String(X).indexOf(Y)&&V.test(X))||U.test(X)||T.test(X);},isBigDecimal:function(U){if(!U){return false;}var T=String(U).match(/^#([^#]+)#$/);if(!T||T.length<=1){return false;}var V=T[1];return this.isNumeric(V);},parseInteger:function L(T,U){if(!this.isInt(T)){return Number.NaN;}return parseInt(this.toString(T,true),U);},parseNumeric:function B(T){if(!this.isNumeric(T)){return Number.NaN;}return parseFloat(this.toString(T,true));},parseBigDecimal:function(T){return String(T).match(/^#(.+)#$/)[1];},inNumericRange:function Q(U,V,T){U=this.parseNumeric(U);T=(T!=null)?this.parseNumeric(this.toLocaleString(T)):Number.NaN;V=(V!=null)?this.parseNumeric(this.toLocaleString(V)):Number.NaN;if(T!=Number.NaN&&(U>T||isNaN(U))){return 1;}if(V!=Number.NaN&&(U<V||isNaN(U))){return -1;}return 0;},convertToUSUnits:function(W,V,U){var T=W;V=V||C;switch(parseInt(V,10)){case R.CM:T=parseFloat(this.toString(W))/2.54+"";break;case R.MM:T=parseFloat(this.toString(W))/25.4+"";break;case R.PT:T=parseFloat(this.toString(W))/72+"";break;case R.PC:T=parseFloat(this.toString(W))/6+"";break;case R.PX:T=parseFloat(this.toString(W))/G+"";break;}return U?T:this.toLocaleString(T);},convertToLocalUnits:function(W,V,U){var T;V=V||C;switch(parseInt(V,10)){case R.CM:T=(parseFloat(this.toString(W))*2.54).toFixed(4)+"";break;case R.MM:T=(parseFloat(this.toString(W))*25.4).toFixed(4)+"";break;case R.PT:T=(parseFloat(this.toString(W))*72).toFixed(4)+"";break;case R.PC:T=(parseFloat(this.toString(W))*6).toFixed(4)+"";break;case R.PX:T=(parseFloat(this.toString(W))*G)+"";break;default:T=parseFloat(this.toString(W)).toFixed(4)+"";}return U?T:this.toLocaleString(T);},convertUnits:function(U,V,T){return this.convertToLocalUnits(this.convertToUSUnits(T,U,true),V,true);},toLocaleString:function(T){return(T+"").replace(".",this.getDecimal());},toString:function(V,T){if(T===true){var U=this.getThousandSepRegex();if(U){V=String(V).replace(U,"");}}return String(V).replace(this.getDecimal(),".");},getThousandSepRegex:function(){if(this.thousandSeparatorRegex==null){this.thousandSeparatorRegex=new RegExp(this.getThousand().replace(/(\W){1}/g,"\\$1"),"g");}return this.thousandSeparatorRegex;},addSeparators:function(V,U){var T=U;if(U=="."||U=="*"||U=="\\"){T="\\"+U;}return V.reverse().replace(/(\d{3})/g,"$1"+U).reverse().replace(new RegExp("^(-)?"+T),"$1");},addSeparators2:function(W,V){var T=W,U=/(\d+)(\d{3})/;while(U.test(T)){T=T.replace(U,"$1"+V+"$2");}return T;},format:function(X,W,a,T){var Z="",Y=(W>0)?".":"",U=[];a=(a)?a:"";for(var V=0;V<W;V++){U.push("0");}U=U.join("");switch(X){case E.GENERAL:Z="0.00";break;case E.PERCENT:Z="0"+Y+U+"%";break;case E.SCIENTIFIC:Z="0"+Y+U+"E+00";break;default:Z='"'+a+'"#,##0'+Y+U;}return this.formatByMask(Z,T);},getDecimalLength:function J(V){var T=V.indexOf("."),W=0;if(T!==-1){var U=V.substr(T+1,V.length).match(/\d+/);if(U&&U.length>0){W=U[0].length;}}return W;},formatByMask:function(AF,AX){var z,l="",r,Aa=false;if(isNaN(AX)){z=new Date(AX);if(isNaN(z)){return AX;}r=true;}if(AF==="General"){var AK=String(parseFloat(AX).toFixed(2));l=AK.split(".");if(l.length===2){return l.join(this.getDecimal());}return AK;}var q=String(AF).split(";"),W=q[0],g="\u00A4",AQ=/"[^"]*"/g,k=(AF&&AF.replace(AQ,g).replace(/\[.*\]/g,g))||"",AW=["m","y","d","h","s"],AL=false;F.forEach(AW,function(j){AL=AL||k.indexOf(j,0)!==-1;});if(AL){if(window.SSF&&!Aa){l=this.formatBySSF(AF,AX);Aa=true;}if(l!==""){return l;}else{return H(r?z:S(AX),AF,AX);}}var AJ=W.indexOf("E+"),c=W.indexOf("%"),w=W.match(/\".+?\"/g),AC=W.match(/\[([=<>]*)(-?\d+\.?\d*)\]/),x=W.indexOf("?/?")>-1,AD=(AJ!=-1)?E.SCIENTIFIC:((c!=-1)?E.PERCENT:((w&&!AC)?E.CURR:x?E.FRACTION:E.FIXED)),p="",AS="",n=false,U=new String(AX),b=parseFloat(AX)||this.parseNumeric(AX);if(w){if(W.match(/\[\$.+?\]/g)){for(var d=0;d<w.length;d++){W=W.replace(w[d],w[d].substring(1,w[d].length-1));if(w[d].match(/\[\$.+?\]/g)){w[d]=w[d].replace(/\[\$.+?\]/g,w[d][w[d].indexOf("[$")+2]);}}W=W.replace(/\[\$.+?\]/g,'"#"'.replace("#",W[W.indexOf("[$")+2]));}p=K(W,w);p=p.replace(W.replace(/\".+?\"/g,""),g);}if(b<0){U=U.substring(1,U.length);b=-b;n=true;if(q.length>1){var Z=q[1].replace(/\[.*\]/,"");AS=K(Z.replace(q[0],g));}}var h=this,a=function(v,j){var m=j&&j.replace(g,v);if(j&&(m===j)&&window.SSF){if(Aa){return v;}else{Aa=true;return h.formatBySSF(j,v);}}return(j)?m:"-"+v;};if(AD===E.FRACTION){var AO,AN,AV,o=10,y,u=0,AH,AR,X,V=false,AE;if(AF.indexOf("# ")>-1){V=true;}for(AO=5;AO>0;AO--){AE="/";for(AN=0;AN<AO;AN++){AE+="?";}if(AF.indexOf(AE)>-1){for(AN=1;AN<AO;AN++){o*=10;}break;}}if(V){u=Math.floor(Number(b));b-=u;}AR=o/2;AV=-1;AH=b*o;for(AO=o-1;AO>=2;AO--){X=(AH*AO)/o;X=X-Math.floor(X);X=X*o;if(Math.abs(X-o)<X){X=Math.abs(X-o);}X=X/AO;if(X<AR){AR=X;AV=AO;}else{if((X==AR)&&(X==0)){AR=X;AV=AO;}}}y=Math.round(AV*AH/o);for(AO=AV;AO>=2;AO--){if((y%AO==0)&&(AV%AO==0)){y=y/AO;AV=AV/AO;break;}}if(AV==o){AV=1;y=0;}if(y==0){AV=1;}if(y==AV){if(V){l=""+(u+1);}else{l="1";}}else{if(V&&u>0){if(y==0){l=u;}else{l=u+" "+y+"/"+AV;}}else{if(y==0){l="0";}else{l=y+"/"+AV;}}}if(n){l=a(l,AS);}}else{if(AD==E.SCIENTIFIC){if(b!=0){var AY=Math.floor(Math.log(b)/Math.LN10),AM=b/Math.pow(10,AY),AZ=W.substring(0,AJ),f=AZ.indexOf("."),AG=W.length-W.indexOf("E+")-(""+Math.abs(AY)).length-2,AO,T=AY<0;AY=Math.abs(AY);for(AO=0;AO<AG;AO++){AY="0"+AY;}l+=Number(AM).toFixed((f!=-1)?AZ.length-f-1:0);l=((n)?a(l,AS):l)+"E"+(T?"-":"+")+AY;}else{l="0";}}else{if(AD==E.PERCENT){W=W.substring(0,W.length-1);U=String(b*100);}var f=W.indexOf("."),Y=0,AU,t=f>=0?W.substring(0,f):W,AA=f>=0?W.substring(f+1,W.length):"",e=false;if(t.match(/[#0\?],$/)){b/=1000;U=String(b);}else{if(AA.match(/^[#0]*,/)){var AB=0;e=true;while(AB<AA.length){if(AA[AB]==="0"||AA[AB]==="#"){AB++;}else{if(AA[AB]===","){b/=1000;U=String(b);AB++;}else{break;}}}}}AU=this.getDecimalLength(U);if(f!=-1){Y=N(AU,W.substr(f+1,W.length));}l=String((+(Math.round(+(U.indexOf("e")>0?String(parseFloat(U).toFixed(Math.min(Y+2,20))):U+"e"+Math.min(Y,20)))+"e"+-Math.min(Y,20))).toFixed(Math.min(Y,20)));if(AD===E.FIXED){if(/[\[\]><=A-Za-z]|,{2}/.test(W)&&window.SSF){var AP=this.formatBySSF(AF,AX);l=AP!==""?AP:l;Aa=true;}}var AT=l.split(".");var AI=W.replace(/"[^"]*"/g,"").match(/[#\d]+[^\.\d#]+[#\d]+/);if(AI!==null){if(AD===E.CURR){AT[0]=(this.formatBySSF((e?AI[0]&&AI[0].trim():AI.input&&AI.input.trim()),parseFloat(AT[0]))||"").split(".")[0];Aa=true;}if(AT[0].indexOf(",")>=0){AT[0]=AT[0].replace(/,/g,this.getThousand());}else{if(!(this.getThousand()===","&&AT[0].search(this.getThousand())>0)){AT[0]=this.addSeparators2(AT[0],this.getThousand());}}}l=AT.join(this.getDecimal());if(AD==E.CURR){l=p.replace(g,l);if(l===p&&window.SSF){l=this.formatBySSF(AF,AX,l);Aa=true;}}if(AD==E.PERCENT){l+="%";}if(n){l=a(l,AS);}}}return l;},formatBySSF:function(V,U,W){var T=(W!==undefined&&W!==null)?W:"";if(typeof U==="string"){U=parseFloat(U);}try{T=window.SSF.format(V,U);}catch(X){if(window.mstr_profile){window.mstr_profile.log(X);}T=(W||U).toString();}return T;},validateFormat:function(T){var U=true,V=String(T).split(";");if(V[1]&&V[1].indexOf(V[0])<0){U=false;}return U;},generateUniqueID:function(T){var V="0123456789ABCDEF".split(""),W=[];for(var U=0;U<T;U++){W[U]=V[0|Math.random()*16];}return W.join("");},countOfDecimals:function(U,V){var T=String(U);return T.length-(T.indexOf(V!==undefined?V:this.getDecimal())+1);},getThousand:function(){return mstrmojo.locales.number.THOUSANDSEPARATOR;},getDecimal:function(){return mstrmojo.locales.number.DECIMALSEPARATOR;}});mstrmojo.num.UNIT=R;mstrmojo.num.UNIT_SYMBOL=A;})();(function(){mstrmojo.requiresCls("mstrmojo.storage.DOMStorage");var A=4;mstrmojo.storage.DOMLocalStorage=mstrmojo.declare(mstrmojo.storage.DOMStorage,null,{scriptClass:"mstrmojo.storage.DOMLocalStorage",init:function(B){this._super(B);try{this.mIsSupported=("localStorage" in window)&&(window.localStorage!==null);this.mStorageObj=this.mIsSupported?window.localStorage:null;this.checkVersion(A);}catch(C){this.mIsSupported=false;}}});$LS=mstrmojo.global.localStore=new mstrmojo.storage.DOMLocalStorage({itemTimeToLive:(3600*24)});})();(function(){mstrmojo.requiresCls("mstrmojo.registry");mstrmojo._PagingList=mstrmojo.provide("mstrmojo._PagingList",{usePaging:false,page:0,totalPages:1,_set_page:function(B,A){if(this.page!==A&&this.usePaging){if(A>=0&&A<this.totalPages){this.page=A;}return true;}return false;},_inScroll:false,_inPaging:false,onscroll:function(){if(this.usePaging&&!this._inPaging){this._inScroll=true;this.set("page",this.listMapper.whichPage(this));this._inScroll=false;}if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.registry","mstrmojo.array","mstrmojo.publisher");var D=mstrmojo.registry,K=mstrmojo.array,I=mstrmojo.publisher;function G(Q,R){if(R){R.parent=Q;var P=D.ref(R);if(R!==P){delete R.parent;}return P;}return null;}function L(Q,R){var P=R.alias;if(P!==null&&P!==""){Q[P]=R;}}function N(Q,R){var P=R.alias;if(R.parent===Q){delete R.parent;}if((P!==null&&P!=="")&&(Q[P]===R)){delete Q[P];}}function A(T,Q){var P=Q&&Q.length,S,R;if(P){S=[];for(R=0;R<P;R++){var U=G(T,Q[R]);if(!U){continue;}S.push(U);L(T,U);}}return S;}mstrmojo._HasChildren=mstrmojo.provide("mstrmojo._HasChildren",{_meta_usesSuper:false,children:null,postCreateChildren:mstrmojo.emptyFn,onaddChild:null,onremoveChild:null,initChildren:function F(){var P="children",Q=this[P];if(!Q){return ;}this[P]=null;this._set_children(P,Q,true);this.postCreateChildren();},_set_children:function E(S,Q,P){var R=this.children;if(Q!==R){if(R){this.removeChildren(null,P);}this.addChildren(Q,0,P);}return false;},destroyChildren:function C(S){var R=this.children,P=(R&&R.length)||0,Q;if(P){for(Q=P-1;Q>-1;Q--){var T=R[Q];if(T&&T.destroy){T.destroy(S);if(!S){N(this,T);}}}if(!S){R.length=0;}}},invalidateChildren:function B(){mstrmojo.array.forEach(this.children,function(P){P.invalidate();});},invalidate:function H(){this.invalidateChildren();},addChildren:function O(U,Q,R){if(!U){return U;}var T=U.constructor===Array,P=A(this,T?U:[U]);if(P&&P.length){var S=this.children||[];if(Q===null||Q===undefined){Q=S.length;}this.children=K.insert(S,Q,P);if(!R&&(this.onaddChild||I.hasSubs(this.id,"addChild"))){this.raiseEvent({name:"addChild",value:P,index:Q});}}return T?P:(P&&P[0]);},removeChildren:function J(V,R){var T=this.children,U=V?[V]:(this.children||[]).concat(),Q=U.length,P=-1,S;if(Q){for(S=Q-1;S>-1;S--){N(this,U[S]);}if(V){P=K.removeItem(T,V);}else{if(T){T.length=0;P=0;}}if(!R&&(this.onremoveChild||I.hasSubs(this.id,"removeChild"))){this.raiseEvent({name:"removeChild",value:U,index:P});}}return P;},removeAndDestroyChild:function M(R,P,Q){if(R){if(R.parent!==this){throw"Unable to remove an object that is not in the children collection.";}this.removeChildren(R,P);R.destroy(Q);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.registry","mstrmojo.hash");var A=false,D="mstrmojo.Binding",I="bindings",H=mstrmojo.registry;function B(K){var L;for(L in K){var J=K[L];if(J&&J.disable){J.destroy();}}}function C(K,M){if(!A){mstrmojo.requiresCls(D);A=true;}var N;for(N in K){var J=K[N];if(J===null||J===undefined){continue;}var L=typeof J;if(L==="string"||L==="function"){J={destination:N,source:J,scriptClass:D};}J.parent=M;J=H.ref(J,{skipLoadChecks:true});K[N]=J;J.enable();}}mstrmojo._HasBindings=mstrmojo.provide("mstrmojo._HasBindings",{_meta_usesSuper:false,initBindings:function E(){this.hasInitBindings=true;var K=mstrmojo.hash.copy(this[I]);if(K){delete this[I];this._set_bindings(I,K);if(this.postCreateBindings){this.postCreateBindings();}}var M=this.children,J=(M&&M.length)||0;if(J){var L;for(L=0;L<J;L++){var N=M[L];if(N&&N.initBindings){N.initBindings();}}}},destroyBindings:function G(){var J=this.bindings;if(J){B(J);delete this.bindings;}},_set_bindings:function F(L,J){var K=this[I];if(J!==K){if(K){B(K);}this[I]=J;if(J){C(J,this);}return true;}return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.dnd");var E=mstrmojo.dom;function B(I){return E.contains(this.getMovingHandle(),I.src.node,true,document.body);}mstrmojo._IsMovable=mstrmojo.provide("mstrmojo._IsMovable",{draggable:true,ownAvatar:true,getMovingHandle:function G(){return this.domNode;},getMovingTarget:function H(){return this.domNode;},isDragValid:function A(I){return B.call(this,I)||(this._super&&this._super(I))||false;},ondragstart:function C(J){if(B.call(this,J)){var K=this.getMovingHandle(),I=this.getMovingTarget().style;this._leftPos=parseInt(I.left,10);this._topPos=parseInt(I.top,10);this._hWidth=K.clientWidth;this._hHeight=K.clientHeight;}if(this._super){this._super();}},ondragmove:function F(L){if(B.call(this,L)){var M=L.tgt.pos,J=L.src.pos,K=this.getMovingTarget().style,I=E.windowDim();K.left=this.left=Math.min(Math.max(this._leftPos+M.x-J.x,-this._hWidth+40),I.w-40)+"px";K.top=this.top=Math.min(Math.max(this._topPos+M.y-J.y,-this._hHeight+20),I.h-20)+"px";}if(this._super){this._super();}},ondragend:function D(I){if(B.call(this,I)){delete this._leftPos;delete this._topPos;delete this._hWidth;delete this._hHeight;}if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.publisher");var C=mstrmojo.publisher;mstrmojo._Provider=mstrmojo.provide("mstrmojo._Provider",{_meta_usesSuper:false,audibles:{"*":true},set:function F(N,H){var G=false,K=this["_set_"+N],I=this[N];if(K){G=K.apply(this,arguments);}else{this[N]=H;G=(I!==H);}if(G){var L=N+"Change",M=this.audibles||{},J=(M[N]===true)||((M[N]!==false)&&(M["*"]!==false));if(J&&(this["pre"+L]||this["on"+L]||this["post"+L]||C.hasSubs(this.id,L))){this.raiseEvent({name:L,prop:N,value:H,valueWas:I});}}return this;},raiseEvent:function B(H){var M=H&&H.name;if(!M){return null;}H.src=this;this.preHandleEvent(H);var K=["pre","on","post"],L=false,I,G;for(I=0,G=K.length;I<G;I++){var J=K[I]+M;if(this[J]){if(this[J](H)===false){L=true;break;}}}if(!L){this.postHandleEvent(H);C.publish(this.id,M,H);}return H;},preHandleEvent:mstrmojo.emptyFn,postHandleEvent:mstrmojo.emptyFn,attachEventListener:function A(G,H,I){return C.subscribe(this.id,G,I,H);},detachEventListener:function E(G){C.unsubscribe(G);},destroy:function D(){C.clearSubscriptions(this.id);if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.array","mstrmojo.string");var W=mstrmojo.dom,L=mstrmojo.string,a=mstrmojo.array;mstrmojo.css=mstrmojo.provide("mstrmojo.css",{DISPLAY_TABLE:W.isNSIE?"block":"table",DISPLAY_CELL:W.isNSIE?"block":"table-cell",MINHEIGHT:W.isIE6?"height":"minHeight",addClass:function M(h,g){if(h){if(g.constructor!==Array){g=[g];}var d=h.className||"",k=" "+d+" ",e=false,b=g.length,f;for(f=0;f<b;f++){var j=g[f];if(!k.match(new RegExp("\\s"+j+"\\s"))){d+=" "+j;e=true;}}if(e){h.className=L.trim(d);}}return h;},removeClass:function O(f,e){if(!f){return ;}if(e.constructor!==Array){e=[e];}var c=" "+(f.className||"")+" ",b=e.length,d;for(d=0;d<b;d++){c=c.replace(new RegExp("\\s"+e[d]+"\\s","g")," ");}f.className=L.trim(c);},addWidgetCssClass:function N(g,e){var c=g.cssClass,f=(c&&c.split(" "))||[],d;e=[].concat(e);for(d=0;d<e.length;d++){var b=e[d];if(a.indexOf(f,b)===-1){f.push(b);}}g.cssClass=f.join(" ");},removeWidgetCssClass:function G(h,f){var c=h.cssClass,g=(c&&c.split(" "))||[],e;f=[].concat(f);for(e=0;e<f.length;e++){var b=f[e];var d=a.indexOf(g,b);if(d!==-1){g.splice(d,1);}}h.cssClass=g.join(" ");},toggleClass:function V(e,d,c){if(c){this.addClass(e,d);}else{this.removeClass(e,d);}},hasClass:function A(d,e){if(d){var b=" "+(d.className||"")+" ";return !!b.match(new RegExp("\\s"+e+"\\s"));}return false;},applyShadow:function H(f,g,e,d,b){var c=f.style;if(W.isDXIE){c.filter+="progid:DXImageTransform.Microsoft.dropshadow(OffX="+g+"px, OffY="+e+"px, Color='"+b+"')";}else{if(W.isFF||W.isWK||W.isIE10){c[W.CSS3_BOXSHADOW]=g+"px "+e+"px "+d+"px "+b;}}},removeShadow:function C(c){var b=c.style;if(W.isFF||W.isWK||W.isIE10){b[W.CSS3_BOXSHADOW]="";}},setOpacity:function X(c,e){if(W.isDXIE&&!W.isIE9){var f=c.currentStyle.filter;var b=null;if(f.length>0){b=c.filters["DXImageTransform.Microsoft.Alpha"];}if(b){b.opacity=e;b.enabled=(e!==100);}else{if(e<100){var d="progid:DXImageTransform.Microsoft.Alpha(Opacity="+e+")";c.style.filter=(f||"")+" "+d;}}}else{c.style.opacity=e/100-(W.isIE9?0.00001:0);}},buildGradient:function P(c,e,b){if(W.supports(W.cssFeatures.GRADIENTS)){var d={};if(W.isDXIE){d.n="filter";d.v="progid:DXImageTransform.Microsoft.Gradient(GradientType="+c+",StartColorStr='"+e+"',EndColorStr='"+b+"')";}else{if(W.isFF){d.n="background-image";d.v="-moz-linear-gradient("+((c===0)?"top":"left")+","+e+","+b+")";}else{if(W.isWK){d.n="background";d.v="-webkit-gradient(linear,"+((c===0)?"left top, left bottom":"left top, right top")+",from("+e+"),to("+b+"))";}else{if(W.isIE10||W.isIEW3C){d.n="background";d.v="linear-gradient("+((c===0)?"to bottom":"to right")+","+e+","+b+")";}}}}return d;}return null;},buildRoundCorners:function R(g,f){if(W.supports(W.cssFeatures.ROUND_CORNERS)){var c=g+"px";var j=c+(f?" "+c+" 0 0":"")+";";if(W.isFF||W.isWinPhone||W.isIE10){return"border-radius:"+j;}if(W.isWK){if(!f){return"-webkit-border-radius:"+c+";";}var h=["left","right"],e=[],b=-1,d;for(d=0;d<2;d++){e[++b]="-webkit-border-top-"+h[d]+"-radius:"+c;e[++b]="-webkit-border-bottom-"+h[d]+"-radius:0";}return e.join(";");}}return"";},getBorderWidthsOrPaddings:function E(d,g){var h={t:0,r:0,b:0,l:0,h:0,w:0};if(!d){return h;}var e=d.split(" "),c=e.length,f;for(f=0;f<c;f++){e[f]=Math.round(g*parseFloat(e[f])/72);}if(c<4){if(c===1){e[1]=e[2]=e[3]=e[0];}else{e[3]=e[1];if(c===2){e[2]=e[0];}}}h.t=e[0];h.r=e[1];h.b=e[2];h.l=e[3];h.h=h.t+h.b;h.w=h.l+h.r;return h;},getBorderWidths:function I(c,b){return this.getBorderWidthsOrPaddings(c,b);},getPaddings:function D(c,b){return this.getBorderWidthsOrPaddings(c,b);},parkAfterFade:function B(b){var c=b.target.style;if(c.opacity===0){c.left="-10000px";window.setTimeout(function(){c.opacity=0.99;},0);return true;}return false;},getStyleValue:function J(b,f){var d=(f==="float"),e;if(b.currentStyle){f=d?"styleFloat":f;e=b.currentStyle[f];}else{if(document.defaultView&&document.defaultView.getComputedStyle){f=d?"cssFloat":f;var c=document.defaultView.getComputedStyle(b,null);e=c?c[f]:null;}}return e;},getComputedStyle:function U(b,d){var c=(window.getComputedStyle)?function(e,f){return window.getComputedStyle(e,f||null);}:function(e){return e.currentStyle||{};};mstrmojo.css.getComputedStyle=c;return c(b,d);},getCssTextFromObj:function F(d){var c="",b;for(b in d){c+=b+":"+d[b]+";";}return c;},onTransitionEnd:function Z(d,b){var c="transition",e=window.Modernizr;if(e.testProp(c)){W.attachOneTimeEvent(d,W.transEndEvtNames[e.prefixed(c)],b);}else{window.setTimeout(b,0);}},onAnimationEnd:function T(d,b){var c="animation",e=window.Modernizr;if(e.testProp(c)){W.attachEvent(d,W.animationEndEvtNames[e.prefixed(c)],b);}else{window.setTimeout(b,0);}},flashClass:function Q(c,b,e){this.toggleClass(c,b,true);var d=this;window.setTimeout(function(){d.toggleClass(c,b,false);},e);},convertCssToCamelCase:function K(b){return b.replace(/\-([a-z])/gi,function(c,d){return d.toUpperCase();});},printCSSInfo:function Y(f){var l=document.styleSheets,o=l.length,g,h;for(h=0;h<o;h++){var k=l[h],m=k.cssRules,d=m?m.length:0,n=0;for(g=0;g<d;g++){var b=m[g].selectorText;if(b){try{n+=b.split(",").length;}catch(e){}}}var c=k.href;if(!f||(c&&c.indexOf(f)>-1)){console.log("Stylesheet: "+c||"Inline CSS Block");console.log("Total rules: "+d);console.log("Total selectors: "+n);}}},cssEscape:function S(h){if(arguments.length===0){throw new TypeError("`CSS.escape` requires an argument.");}var e=String(h),g=e.length,d=-1,f,b="",c=e.charCodeAt(0);while(++d<g){f=e.charCodeAt(d);if(f==0){b+="\uFFFD";continue;}if((f>=1&&f<=31)||f==127||(d==0&&f>=48&&f<=57)||(d==1&&f>=48&&f<=57&&c==45)){b+="\\"+f.toString(16)+" ";continue;}if(d==0&&g==1&&f==45){b+="\\"+e.charAt(d);continue;}if(f>=128||f==45||f==95||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122){b+=e.charAt(d);continue;}b+="\\"+e.charAt(d);}return b;}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.hash");var M=mstrmojo.string,L=mstrmojo.hash,E=mstrmojo.dom;var R=mstrmojo.usesFrames?null:document.createElement("span");var J=/mstrAttach:([\w,]+)/g;var Q;function U(a,b){if(Q===undefined){Q=(mstrApp!==undefined&&mstrApp.isTouchApp&&mstrApp.isTouchApp())||false;}return a.replace(J,function Z(h,k){var d=k.split(","),f=[],c=d.length,g;for(g=0;g<c;g++){var j=d[g];if(j){if(Q){if(j.indexOf("mouse")>-1){continue;}else{if(j==="click"){j="touchend";}}}f.push("on"+j+"=\"mstrmojo.dom.captureDomEvent('{@id}','"+j+"', self, event)\"");}}return f.join(" ");});}var N="preBuildRendering",C="buildRendering",B="postBuildRendering";function X(b){var a=b.markupString;if(a.match(/mstrAttach:/)){a=U(a,b);if(b.markupString===b.constructor.prototype.markupString){b.constructor.prototype.markupString=a;}}var Z=M.apply(a,b);if(Z){if(Z.indexOf("oncontextmenu")>-1){b.hasContextMenuEvent=true;}if(mstrmojo.usesFrames){var c=(b.domNode&&b.domNode.ownerDocument)||window.document;if(!R||R.ownerDocument!==c){R=c.createElement("span");}}R.innerHTML=Z;var e=R.removeChild(R.firstChild);e.mstrmojoId=b.id;return e;}return null;}function A(b){var a=b.markupSlots,Z,c;if(a){Z={};for(c in a){Z[c]=a[c].call(b);}}return Z;}mstrmojo._HasMarkup=mstrmojo.provide("mstrmojo._HasMarkup",{markupString:null,markupMethods:null,markupSlots:null,onRender:mstrmojo.emptyFn,onUnRender:mstrmojo.emptyFn,render:function Y(){if((this[N]&&this[N]()===false)||(this[C]()===false)||(this[B]&&this[B]()===false)){return false;}this.hasRendered=!!this.domNode;this.onRender();var Z="renderComplete";if(mstrmojo.publisher.hasSubs(this.id,Z)){this.raiseEvent({name:Z});}return true;},buildDom:function T(){return X(this);},postBuildDom:null,preBuildRendering:mstrmojo.emptyFn,buildRendering:function F(){var Z=this.domNode,a=this.buildDom();this.domNode=a;if(this.postBuildDom){this.postBuildDom();}if(this.slotNames){this.removeSlots(this.slotNames);}this.addSlots(A(this));this.paint();if(a){var d=Z;if(!d){d=this.placeholder;if(d){if(typeof d==="string"){d=document.getElementById(d);}delete this.placeholder;}}if(d){E.replace(d,a);}}var b="onchildRenderingChange",c=this.parent;if(c&&c[b]){c[b](this);}return true;},postBuildRendering:mstrmojo.emptyFn,unrender:function S(b){if(this.hasRendered){if(!b){try{var Z=this.domNode;if(Z.parentNode){Z.parentNode.removeChild(Z);}if(mstrmojo.dom.isIE&&Z.outerHTML!=="undefined"){Z.outerHTML="";}}catch(a){}}this.domNode=null;this.removeSlots(this.slotNames);this.hasRendered=false;this.onUnRender();}},paint:function K(){var a=this.markupMethods;if(!a){return ;}var d=this,e=function(j){var h=a[j];if(h){try{h.apply(d,[true]);}catch(g){throw new Error(["Error in markup method.","Script class: "+d.scriptClass,"Widget id: "+d.id,"Method name: "+j,"Err: "+g.message].join("\n\n"));}}};var c=a.sequence,Z,b,f;if(c){Z=c.length||0;for(b=0;b<Z;b++){e(c[b]);}}else{for(f in a){e(f);}}},redraw:function P(){return false;},refresh:function D(Z){if(this.hasRendered){if(this.redraw()!==true){var a=this.domNode;this.unrender(true);this.placeholder=a;if(Z){Z();}this.render();}}},set:function I(c,Z){this._super(c,Z);if(this.domNode){var a=this.markupMethods,b=a&&a["on"+c+"Change"];if(b){b.apply(this);}}return this;},slotNames:null,addSlots:function G(a){var Z=this.slotNames,b;if(!Z){Z={};this.slotNames=Z;}for(b in a){this[b]=a[b];Z[b]=true;}},removeSlots:function H(Z){if(Z){var a=this.slotNames,b;for(b in Z){delete this[b];if(a){delete a[b];}}}},captureDomEvent:function W(b,Z,c,a){if(this.enabled!==false){this.raiseEvent(mstrmojo._HasMarkup.newDomEvent(b,Z,c||Z.event,a));}},playEffect:function V(a){var Z=this[a];if(Z&&Z.constructor===Object){Z=mstrmojo.insert(mstrmojo.hash.clone(Z));Z.widget=this;this[a]=Z;}if(Z){Z.play();}}});mstrmojo._HasMarkup.addMarkupMethods=function O(a,Z){a.prototype.markupMethods=L.copy(Z,L.copy(a.prototype.markupMethods));};mstrmojo._HasMarkup.MSTRDomEventType=null;mstrmojo._HasMarkup.newDomEvent=function(c,Z,b,a){return{name:c,hWin:Z,e:b,config:a,ctrlKey:E.ctrlKey(Z,b),shiftKey:E.shiftKey(Z,b),metaKey:E.isMetaKey(Z,b),cancel:function(){E.stopPropogation(Z,b);},preventDefault:function(){E.preventDefault(Z,b);},getTarget:function(){return E.eventTarget(Z,b);}};};}());(function(){mstrmojo.requiresCls("mstrmojo.string");var D=mstrmojo.string,F=1;mstrmojo.ListBuilder=mstrmojo.provide("mstrmojo.ListBuilder",{newContext:function E(G){var I=G.itemMarkupFunction;if(!I){var H=G.itemMarkup||(G.itemField&&'<div class="mstrmojo-text">{@'+G.itemField+"}</div>");I=H?function(K,J,L){return D.apply(H,K);}:null;}return{itemStatus:[],itemFunc:I};},build:function A(I,H,J,G){H.itemStatus[G]=F;return H.itemFunc(J,G,I);},onadd:function B(I,G,H){if(G){mstrmojo.array.insert(G.itemStatus,H.index,new Array(H.value.length));}},onremove:function C(I,G,H){if(G){G.itemStatus.splice(H.index,H.value.length);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.array");var H=mstrmojo,F=H.array,A="00000000000000000000000000000000",E=-1;function J(K){return K&&K.t===4&&K.id!==A;}function G(L){var K,M=(L&&L.length)||0;if(M===0){return false;}for(K=0;K<M;K++){if(!J(L[K])){return false;}}return true;}mstrmojo.VisProps=null;mstrmojo.vi.viz.DropZoneHelper=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.vi.viz.DropZoneHelper",getXml:function B(){return"";},setData:function I(K){},isMetric:function(K){return J(K);},isMetricZone:function(K){return G(K);},getMetricCountInZone:function D(L){var K=0;F.forEach(L,function(M){if(J(M)){K++;}});return K;}});mstrmojo.vi.viz.DropZoneHelper.METRIC_NAMES_ID=A;mstrmojo.vi.viz.DropZoneHelper.isMetricNames=function C(K){return(parseInt(K.did,10)===E)||(K.id===A)||(K.did===A);};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.QueuedXHR");var F=mstrmojo.hash;function J(K,L){return function(){if(K[L]){K[L]();}};}var B=[];function H(L){var K;switch(L.cacheLevel){case mstrmojo.AjaxCall.CACHELEVEL_LOCAL:if(L._cache==null){L._cache=[];}K=L._cache;break;default:if(B==null){B=[];}K=B;break;}return K;}function E(N){var M=H(N);var P={cache:M,idx:-1},O=N.params;if("xts" in O){delete O.xts;}for(var L=0,K=M.length;L<K;L++){var Q=M[L];if(Q&&F.equals(Q.url,N.url)&&F.equals(Q.params,O)){P.idx=L;break;}}return P;}function C(L){var K=H(L),M=F.copy(L.params);delete M.xts;K.push({url:L.url,params:M,res:F.copy(L.response)});}function D(K){var L=E(K);if(L&&L.idx>=0){K.response=L.cache[L.idx].res;return true;}return false;}mstrmojo.AjaxCall=mstrmojo.declare(mstrmojo.QueuedXHR,null,{scriptClass:"mstrmojo.AjaxCall",method:"POST",url:"",params:null,onsuccess:null,onerr:null,oncomplete:null,oncancel:null,readCache:false,writeCache:false,cacheLevel:"",_cache:null,useQueue:false,init:function I(K){this._super(K);F.copy(K,this);},send:function A(){var K=this;if(this.readCache&&D(this)){this.onsuccess();return ;}this.request(this.method,this.url,{success:function(L){K.response=L;if(K.writeCache){C(K);}if(K&&K.onsuccess){K.onsuccess();}},failure:J(K,"onerr"),complete:J(K,"oncomplete")},this.params,!this.useQueue);},cancel:function G(){this._super();if(this.oncancel){this.oncancel();}}});mstrmojo.AjaxCall.CACHELEVEL_GLOBAL="global";mstrmojo.AjaxCall.CACHELEVEL_LOCAL="local";})();(function(){var D={};var B="XHRServerTransport";mstrmojo.XHRServerTransport={serverRequest:function A(I,G,F){var E=mstrmojo.all[I],H=D[G]=new mstrmojo.SimpleXHR();$MAPF(true,B,"transportRequest");if(F.params&&!F.params.sessionState&&mstrConfig&&mstrConfig.isAddSessionState&&mstrApp&&mstrApp.sessionState){F.params.sessionState=mstrApp.sessionState;}H.request(F.config.method||"POST",F.taskURL||mstrConfig.taskURL,{success:function(J){if(typeof J==="string"&&J[0]==="{"){try{J=JSON.parse(J);}catch(K){}}if(J.mstrerr){J.code=J.mstrerr.code;J.message=J.mstrerr.message;}E&&E.response(G,true,J);},failure:function(L){var M=L.status,K=L.getResponseHeader("X-MSTR-TaskErrorCode"),J;if(M===0){M=K||M;J=mstrmojo.desc(15666,"The connection to the MicroStrategy Web Server failed. Please wait a few minutes and then attempt to reload the page. If the condition persists, please contact your administrator.");}else{M=K||M||"-999";J=L.getResponseHeader("X-MSTR-TaskFailureMsg")||L.responseText||"Unexpected error, please contact your administrator";}E&&E.response(G,false,{code:M,message:J});},complete:function(){delete D[G];},textResponse:F.callback.textResponse},F.params);},cancelRequest:function C(F){var G=D[F],E=false;if(G){E=G.cancel();delete D[F];}$MAPF(false,B,"transportRequest");return E;}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.registry","mstrmojo.ListBuilder");var H=mstrmojo.hash,E=mstrmojo.registry,G=1;mstrmojo.WidgetListBuilder=mstrmojo.provide("mstrmojo.WidgetListBuilder",mstrmojo.mixin({newContext:function F(J){var K=J.itemFunction;if(!K){var I=J.itemConfig;K=I?function(M,L,N){var O=H.clone(I);O.data=M;O.parent=N;return E.ref(O);}:null;}return{itemStatus:[],itemWidgets:[],itemFunc:K};},build:function A(K,J,N,I){var L=J.itemFunc(N,I,K);if(L){J.itemStatus[I]=G;J.itemWidgets[I]=L;if(L.set){var M=K.selectedIndices;if(M&&M[I]){L.set("selected",true);}}}return L;},onadd:function C(K,I,J){if(I){mstrmojo.array.insert(I.itemWidgets,J.index,new Array(J.value.length));}this._super(K,I,J);},onremove:function D(L,J,K){if(J){var O=J.itemWidgets.splice(K.index,K.value.length),N,I;for(N=0,I=O.length;N<I;N++){var M=O[N];if(M&&M.destroy){delete M.parent;M.destroy();}}}this._super(L,J,K);},onchange:function B(S,J,P,T){if(T){var N=P.itemWidgets,L,O,I,R;for(O=0,I=T.removed,R=I&&I.length;O<R;O++){L=N[I[O]];if(L&&L.set){L.set("selected",false);}}var M,Q,K;for(M=0,Q=T.added,K=Q&&Q.length;M<K;M++){L=N[Q[M]];if(L&&L.set){L.set("selected",true);}}}}},H.copy(mstrmojo.ListBuilder)));}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash","mstrmojo._HasMarkup");var J=mstrmojo.dom,D=mstrmojo._HasMarkup,P,Q=mstrmojo.global.document,K,A="touchstart",C="touchmove",I="touchend",N="contextmenu";function O(S){var R=J.findWidget(S);while(R){if(R.hasContextMenuEvent){return R;}R=R.parent;}return null;}function M(R){var T=R.src,S=O(T&&T.node);if(!S){return null;}return S;}H:function H(R){if(R&&R.touches.length===1){P.startTapHoldCheck(self,R);}}B:function B(){var R=++P.ctxt.moveCount;if(R>P.minMoves){P.stopTapHoldCheck();if(K){window.clearTimeout(K);}}}L:function L(){P.stopTapHoldCheck();if(K){window.clearTimeout(K);}}mstrmojo.taphold=mstrmojo.taphold||mstrmojo.provide("mstrmojo.taphold",{timeThreshold:750,minMoves:3,startTapHoldCheck:function G(R,S){delete this.ctxt;var T=J.captureEventInfo({hWin:R,e:S});this.ctxt={src:T,moveCount:0};J.attachEvent(Q,C,B);J.attachEvent(Q,I,L);S.name=N;K=window.setTimeout(function(){P.stopTapHoldCheck();var U=D.newDomEvent(N,window,S),V;for(V in S){if(!U[V]){U[V]=S[V];}}U.type=N;P.triggerContextMenu(U);},this.timeThreshold);},triggerContextMenu:function F(R){var S=this.ctxt,T=M(S);if(!T){return ;}if(T.raiseEvent){T.raiseEvent(R);}},stopTapHoldCheck:function E(){J.detachEvent(Q,C,B);J.detachEvent(Q,I,L);},enable:function(){if(J.isIOSTouch){J.attachEvent(Q,A,H);}},disable:function(){J.detachEvent(Q,A,H);}});P=mstrmojo.taphold;P.enable();}());(function(){mstrmojo.requiresCls("mstrmojo.css");function B(){var D=this.maskNode,E=this.isMasked;D.style.display=E?"block":"none";mstrmojo.css.toggleClass(D,"masked",E);}mstrmojo.vi.ui._HasMask=mstrmojo.provide("mstrmojo.vi.ui._HasMask",{_mixinName:"mstrmojo.vi.ui._HasMask",isMasked:false,postBuildRendering:function C(){if(this._super){this._super();}B.call(this);},onisMaskedChange:function A(){if(!this.hasRendered){return ;}B.call(this);}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.fx");var d=mstrmojo.css,J=mstrmojo.dom,R=mstrmojo.array,N={v:{styleDim:"height",styleDir:"top",dimension:"h",position:"y",scroll:"scrollTop",scrollDimension:"scrollHeight",cls:"vertical",hostCls:"hasVertical",scrollNodeCls:"hasVertical"},h:{styleDim:"width",styleDir:"left",dimension:"w",position:"x",scroll:"scrollLeft",scrollDimension:"scrollWidth",cls:"horizontal",hostCls:"hasHorizontal",scrollNodeCls:"hasHorizontal"}},b="scrollingMode",U="scrolling",g=3;var O=J.getOSInfo().name.toLowerCase().indexOf("mac")>=0;function M(){return(this.scrollbarHostNode||(this.scrollNode&&this.scrollNode.parentNode));}function V(m,j){var l=this.scrollNode,h=M.call(this),k={v:m,h:j};R.forEach(["v","h"],function(o){var n=N[o];d.toggleClass(h,n.hostCls,k[o]);d.toggleClass(l,n.scrollNodeCls,k[o]);});}function S(j,h){var o=J.eventTarget(h,j),m=this.scrollNode,l=J.position(m),n=this.scrollTrackNodes,k=this.scrollBarNodes,p=function p(y){var w=o===n[y];if(w){var z=N[y],q=k[y],AA=J.position(q),t=J.getMousePosition(j,h)[z.position],u=t-AA[z.position],r=u>0?1:-1,x=m[z.scrollDimension],AB=Math.abs(u-(AA.h/2))*(x/l[z.dimension]),v={};v[z.scroll]={isStyle:false,start:m[z.scroll],stop:m[z.scroll]+(r*Math.min(x/3,500,AB)),ease:mstrmojo.ease.linear};(new mstrmojo.fx.AnimateProp({props:v,duration:200,interval:10,target:m})).play();}};p.call(this,"h");p.call(this,"v");}function C(j,h){var m=this.scrollNode,l=j.type==="mousewheel",k=l?-1:1;mstrmojo.array.forEach(["h","v"],function(u){var r=N[u],o=l?"wheelDelta":"delta",q=j[o+{h:"X",v:"Y"}[u]]*k,p=Math.abs(q),n=q/p,t=p===3&&J.isFF&&!O;m[r.scroll]+=t?n*40:q;});J.stopPropogation(h,j);J.preventDefault(h,j);}function f(n){var m=N[n],l=this.scrollNode,k=J.position(l),j=k[m.dimension],o=l[m.scrollDimension],h=Math.ceil(j)/o;return A(h,j,o);}function A(j,h,k){return(!isNaN(j)&&j<1)&&(Math.abs(h-k)>g);}function D(AH){var AA="px",t=N[AH],m=this.scrollNode,u=M.call(this),AJ=J.position(m),v=AJ[t.dimension],AC=m[t.scrollDimension],l=Math.ceil(v)/AC,AG=this.scrollBarNodes,q=AG[AH],y=this.scrollTrackNodes,z=y[AH],AE=A(l,v,AC),n=t.cls;if(!q){z=y[AH]=document.createElement("div");var o=this,x=function(AL){S.call(o,AL);},r=function(AL){C.call(o,AL);},AD=function(AN,AL,AM){J.attachEvent(AN,AL,AM);o.installedEventListeners.push({e:AN,evt:AL,fn:AM});};AD(z,"click",x);z.className="mstrmojo-scrolltrack "+n;q=AG[AH]=document.createElement("div");q.className="mstrmojo-scrollbar "+n;z.appendChild(q);u.appendChild(z);var AF=mstrApp.isSingleTier?"mousewheel":"wheel";AD(z,AF,r);AD(q,AF,r);}var AK=q.style,p=(m[t.scroll]/m[t.scrollDimension]),j=J.delta(m,M.call(this))[t.position],AB=z.style;if(AE){AB[t.styleDir]=j+AA;var k=l*v,w=35,AI=v*p,h=v-35;AK[t.styleDim]=(k<w?w:k)+AA;AK[t.styleDir]=(AI>h?h:AI)+AA;}return AE;}function I(){return !(mstrApp.isSingleTier&&O);}mstrmojo.ui._HasScroller=mstrmojo.provide("mstrmojo.ui._HasScroller",{_mixinName:"mstrmojo.ui._HasScroller",hasCustomScrollbar:null,draggable:true,ownAvatar:true,scrollNode:undefined,scrollbarHostNode:undefined,scrollBarNodes:undefined,setupScrollNodes:mstrmojo.emptyFn,installedEventListeners:null,init:function X(h){this._super(h);if(this.hasCustomScrollbar===null){this.hasCustomScrollbar=I();}this.installedEventListeners=[];},onRender:function L(){if(this._super){this._super();}this.updateScrollbars();this.addScrollNodeProperties();},addScrollNodeProperties:function G(){var j=this.scrollNode,k=J.isFF&&!O;if(j){var h=J.attachMarkupEvent(this.id,j,"scroll");this.installedEventListeners.push({e:j,evt:"scroll",fn:h});}if(k){d.addClass(j,"firefox-on-windows");}else{if(J.isEdge){d.addClass(j,"ms-edge");}}if(!this.hasCustomScrollbar){d.addClass(M.call(this),"mstrmojo-sb-host-show-default");d.addClass(j,"mstrmojo-sb-show-default");return ;}if(j){d.addClass(M.call(this),"mstrmojo-scrollbar-host");d.addClass(j,"mstrmojo-scrollNode");}},updateScrollbars:function e(){if(!this.hasRendered){return ;}this.setupScrollNodes();var h,k=false;if(!this.hasCustomScrollbar){if(this.scrollNode){h=this.scrollNode.style;h.overflowY=f.call(this,"v")?"scroll":"hidden";h.overflowX=f.call(this,"h")?"scroll":"hidden";}return ;}if(this.scrollNode){this.scrollBarNodes=this.scrollBarNodes||{};this.scrollTrackNodes=this.scrollTrackNodes||{};V.call(this,k,k);h=this.scrollNode.style;var l=D.call(this,"v"),j=D.call(this,"h");h.overflowY=l?"scroll":"hidden";h.overflowX=j?"scroll":"hidden";V.call(this,l,j);}},onscroll:function a(){var p=this.scrollNode;if(p&&this.hasCustomScrollbar){var m=function m(q){var r=parseInt(q);return r===null||isNaN(r)?0:r;},n=J.position(p),o=n.h-m(d.getStyleValue(p,"padding-bottom")),j=n.w-m(d.getStyleValue(p,"padding-right")),l=this.scrollBarNodes,k=l.v,h=l.h;if(p.scrollHeight-o>0){k.style.top=((o-J.position(k).h)*(p.scrollTop/(p.scrollHeight-o)))+"px";}if(p.scrollWidth-j>0){h.style.left=((j-J.position(h).w)*(p.scrollLeft/(p.scrollWidth-j)))+"px";}}if(this._super){this._super();}if(this.onScrollEnd){this.onScrollEnd();}},getDragData:function F(j){var m=this.scrollNode,l=J.position(m),k=j.src.node,h=this.scrollBarNodes;if(this.isDraggingScrollBar(j)){return{isScrollBar:true,direction:k===h.v?"v":"h",scrollTop:m.scrollTop,scrollLeft:m.scrollLeft,conversionRatio:{y:m.scrollHeight/l.h,x:m.scrollWidth/l.w}};}return(this._super&&this._super(j));},isDragValid:function E(h){return this.isDraggingScrollBar(h)||(this._super&&this._super(h))||false;},isDraggingScrollBar:function W(j){var k=j.src.node,h=this.scrollBarNodes;return !!h&&(k===h.v||k===h.h);},ondragstart:function c(h){if(this.isDraggingScrollBar(h)){d.addClass(h.src.node,U);d.addClass(M.call(this),b);}if(this._super){this._super(h);}},shouldDragBubble:function T(h){var j=h.src.node,k=this.scrollTrackNodes;return !(!!k&&(j===k.v||j===k.h));},ondragmove:function Q(j){if(this.isDraggingScrollBar(j)){var r=j.tgt,h=j.src,t=r.pos,k=h.pos,o=h.node,n=this.scrollNode,q=this.scrollBarNodes,p=h.data,m={y:(t.y-k.y),x:(t.x-k.x)},l=p.conversionRatio;if(o===q.v){n.scrollTop=p.scrollTop+(m.y*l.y);}else{n.scrollLeft=p.scrollLeft+(m.x*l.x);}}if(this._super){this._super(j);}},ondragend:function K(h){if(this.isDraggingScrollBar&&this.isDraggingScrollBar(h)){d.toggleClass(h.src.node,U,false);d.toggleClass(M.call(this),b,false);}if(this._super){this._super(h);}},widgetResized:function P(){if(this._super){this._super();}this.updateScrollbars();},unrender:function Y(h){R.forEach(this.installedEventListeners,function(j){J.detachEvent(j.e,j.evt,j.fn);});this.installedEventListeners=[];delete this.scrollNode;delete this.scrollbarHostNode;delete this.scrollBarNodes;delete this.scrollTrackNodes;this._super(h);},getDefaultScrollBarProps:function Z(h){return N[h];},disableScroll:function B(h,l){var k=this.scrollNode,j=M.call(this);R.forEach(["v","h"],function(n){var m=N[n];d.toggleClass(j,m.hostCls,false);d.toggleClass(k,m.scrollNodeCls,false);});if(k){if(l||l===undefined){k.style.overflowY="hidden";}else{if(k.style.overflowY==="hidden"){k.style.overflowY="auto";}}if(h||h===undefined){k.style.overflowX="hidden";}}},enableScroll:function H(){this.updateScrollbars();if(!this.hasCustomScrollbar&&this.scrollNode){this.scrollNode.style.overflowY=f.call(this,"v")?"scroll":"hidden";}},scrollIntoViewIfNeeded:function(l){var q=this.scrollNode,n=l.clientHeight,m=q.clientHeight,j=J.position(l).y,o=J.position(q).y,k=j-o,h=k<0,p=k+n>m;if(h||p){q.scrollTop+=k+n/2-m/2;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.css","mstrmojo.array");var E=mstrmojo.dom,Q=mstrmojo.css,B=mstrmojo.string,I="selected",L="hidden";function P(V,W,X,U,Z){var Y=Z.listHooks[V];if(Y&&Y.call(Z,W,X,U)){return ;}Q.toggleClass(W,I,V==="select");}function G(X,W,V){var Y=this[X],U=Y?Y.split(W):[];this[X]=mstrmojo.array.distinct(U.concat(V.split(W))).join(W);}mstrmojo._IsList=mstrmojo.provide("mstrmojo._IsList",{_mixinName:"mstrmojo._IsList",listHooks:{},useListModKeys:false,init:function N(U){this._super(U);this._shiftStartIndex=-1;},getItemMarkup:function D(V,U){return'<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}" title="{@title}">{@en@n}</{@tag}>';},getItemDisplayName:function M(U){return U.n||"";},getItemProps:function R(Y,U){var V=!!this.selectedIndices[U],Z={tag:"div",sel:V,cls:"",n:this.getItemDisplayName(Y),style:"",idx:U,addCls:function W(b){G.call(this,"cls"," ",b);},addStyle:function X(b){G.call(this,"style",";",b);},title:Y.title||""};if(Z.n&&B.isEmpty(Z.n)){Z.n=B.decodeHtmlString("<br/>");}if(V){Z.addCls(I);}var a=Y.cls;if(a){Z.addCls(a);}if(Y.hid){Z.addCls(L);}return Z;},itemRenderer:{render:function S(V,U,W){V._renderIdx=U;return mstrmojo.string.apply(W.getItemMarkup(V,U),W.getItemProps(V,U));},select:function K(V,W,U,X){P("select",V,W,U,X);},unselect:function H(V,W,U,X){P("unselect",V,W,U,X);}},onclick:function T(U){try{var W=this.getItemFromTarget(U.getTarget());if(W){U.cancel();this.doItemSelect(W,U||{});}}catch(V){mstrApp.onerror(V);}},doItemSelect:function C(k,j){var b=j.hWin,c=j.e,g=k._renderIdx,d=k._positionIdx,V=E.isMetaKey(b,c),a=E.shiftKey(b,c),W=this.multiSelect,Z=this.useListModKeys,h=this._shiftStartIndex,X=this.selectedIndices;if(W&&Z&&a&&h>-1){var U=[],Y=[];this.processContinuousSelection(U,Y,g);this.addSelect(U);this.removeSelect(Y);}else{if(W&&(!Z||V)){var f=(X[g])?"remove":"add";this[f+"Select"](g,false,d);}else{this.singleSelect(g,false,d);}this._shiftStartIndex=g;}},processContinuousSelection:function J(W,V,U){var b=this._shiftStartIndex,a=this.selectedIndices,Z=Math.min(b,U),Y=Math.max(b,U),X;for(X=0;X<this.items.length;X++){if(Z<=X&&X<=Y){if(!a[X]){W.push(X);}}else{if(a[X]){V.push(X);}}}},onclearSelection:function A(){this._shiftStartIndex=-1;},getItemNodeFromTarget:function F(V){var U=E.findAncestorByAttr(V,"idx",true,this.domNode);return(U&&U.node)||null;},getItemFromTarget:function O(W){var V=this.getItemNodeFromTarget(W),U=V&&parseInt(V.getAttribute("idx"),10);if(U!==null&&!isNaN(U)&&this.items){return this.items[U];}return undefined;}});mstrmojo._IsList.SELECTED_CLS=I;mstrmojo._IsList.HIDDEN_CLS=L;}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.string","mstrmojo.css");var K=mstrmojo.css,N=mstrmojo.string,H=mstrmojo.dom,L=13,C=27;function I(T){if(this._editComplete){return ;}var X,R=false,W=this.text,U=false;if(T===C){X=W;U=true;R=true;}if((!T&&T!==0)||(!this.allowNewLine&&T===L)){var S=this[this.editableSlot],V=S.innerText||S.textContent||"";if(!this.allowNewLine){X=V.replace(/\n/g,"");}else{X=V;}R=true;if(!this.allowEmptyText&&X.length===0){X=W;U=true;}}if(R){this._editComplete=true;X=X.replace(/\u00A0/g,"\u0020");this.text=X;this.set("isEditing",false);this.onTextEditComplete(X!==W,W);delete this._editComplete;}if(U){this.refresh();}}function E(R){var S={dblclick:"editOnDoubleClick",click:"editOnClick"};if(this[S[R.name]]||(R.name==="click"&&this.editOnTwoClicks)&&R.getTarget()===this[this.editableSlot]){this.set("isEditing",true);}}function F(T,S,R){if(typeof S["on"+R]!=="function"){H.attachMarkupEvent(T,S,R);}}mstrmojo._HasEditableText=mstrmojo.provide("mstrmojo._HasEditableText",{_mixinName:"mstrmojo._HasEditableText",editableSlot:"domNode",editButtonSlot:null,isEditing:false,editOnClick:true,editOnTwoClicks:false,firstClickTime:undefined,allowEmptyText:false,allowTrimming:true,allowNewLine:false,editOnDoubleClick:false,onTextEditBegin:mstrmojo.emptyFn,onTextEditComplete:mstrmojo.emptyFn,postBuildRendering:function A(){this._super();var T=this.editableSlot,R=this[T],U=this[this.editButtonSlot||T];K.addClass(R,"hasEditableText");this.text=this.text||R.innerText||R.textContent||"";R.innerHTML=this.getEditableTextInnerHTML();var S=this.id;if(this.editOnClick||this.editOnTwoClicks){F(S,U,"click");}F(S,U,"dblclick");F(S,R,"blur");F(S,R,"keyup");F(S,R,"keydown");},getEditableTextInnerHTML:function Q(){return N.encodeHtmlString(this.text,true).replace(/ (?= )/g,"&nbsp;");},onclick:function P(R){if(this.editOnClick){E.call(this,R);}if(this._super){this._super(R);}},onTwoClicks:function(R){if(this.editOnTwoClicks){E.call(this,R);}if(this._super){this._super(R);}},ondblclick:function G(R){E.call(this,R);},onblur:function M(){I.call(this);},onkeyup:function B(S){var R=window.event||S.e;I.call(this,R.keyCode);},onkeydown:function J(S){var R=window.event||S.e;if(R.keyCode===L){I.call(this,R.keyCode);S.cancel();}},_set_text:function D(T,R){var S=this.text;this.text=R;if(this.hasRendered){this[this.editableSlot].innerHTML=N.encodeHtmlString(R||"",true);}return(S!==R);},onisEditingChange:function O(){if(this.hasRendered){var R=this[this.editableSlot],S=!!this.isEditing;R.contentEditable=S;R.spellcheck=false;K.toggleClass(R,"editable",S);if(S){R.focus();H.setElementSelection(R);this.onTextEditBegin();}else{R.blur();R.scrollLeft=0;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.css");var A=1,K="mstrmojo-itemwrap",J="&nbsp;",I=mstrmojo.array;function B(V){if(!V.pageSize||V.pageSize<=0){var W=V.scrollboxNode;V.pageSize=W&&W.clientHeight||0;}return V.pageSize;}function T(V,W){if(V.usePaging){V.totalPages=1;var Y=V.itemsContainerNode,X=B(V);if(V.usePaging&&Y&&X){V.totalPages=Math.ceil((Y.clientHeight-parseInt(Y.style&&Y.style.paddingBottom||0,10))/X);}if(Y){V.itemsContainerNode.style.paddingBottom=X+"px";}}}mstrmojo.ListMapper=mstrmojo.provide("mstrmojo.ListMapper",{markupPrefix:"",markupSuffix:"",itemWrapperPrefix:function(V){return'<div class="'+this.getWrapperCss(V)+'">';},itemWrapperSuffix:"</div>",itemWrapperPrefill:"&nbsp",wrapperNodes:function C(V){return V.childNodes;},wrapperParentNode:function D(V){return V;},createWrapperNode:function G(V){var W=V.ownerDocument,X=W.createElement("div");return X;},findScrollRange:function N(k,Z,j,n,W,c,o,m){if(!Z){return{start:0,end:0};}var e=this.wrapperNodes(k),g=parseInt(Z/2,10),Y=parseInt(Math.log(Z)/Math.log(2),10),X=0,V=Z-1,f=j+n,d=e[0].offsetTop,b;for(var l=1;l<=Y;l++){b=e[g].offsetTop-d+m;if(b<j){X=g;}else{if(b>f){V=g;}}var a=Math.round(Z/Math.pow(2,l+1));g+=(b>j)?-a:a;g=Math.min(Math.max(0,g),Z-1);}return{start:X,end:V};},findWrapper:function L(X,V){var W=this.wrapperNodes(X);return W&&W[V];},findIndex:function F(V,Y,X){var W=this._nd2iw(V,Y,X);return W?this._iw2idx(V,Y,W):-1;},itemOffsetTop:function U(W,a,V,Y){if(!Y){var X=this.wrapperNodes(a);Y=X&&X[V];if(!Y){return 0;}}var Z=a.firstChild;if(!Z||(Z===Y)){return 0;}else{return Y.offsetTop-Z.offsetTop;}},whereDrop:function S(c,V,X,b,W){var Y=this._nd2iw(c,V,X),d,a,e;if(Y){a=this._iw2idx(c,V,Y);d=a;e=this.itemOffsetTop(c,V,null,Y);var Z=Y.offsetHeight;if(b.y>W.top+e+Z/2){d++;e+=Z;}}else{return c.dropCuePos;}return{left:0,top:e,idx:d,idxActual:a};},getWrapperCss:function(V){return K;},postBuildRendering:function(Z,Y,X,W,V){T(W,this);},buildItemWrappers:function P(e,b,h,d,a,l){var m=this.itemWrapperPrefix(h),g=this.itemWrapperSuffix,Z=m+this.itemWrapperPrefill+g,Y=[this.markupPrefix],W=1,V=h.selectedIndices||{},o=function n(k,j){for(var p=k;p<j;p++){Y[W++]=m;var q=b.build(h,d,e[p],p);if(V[p]){q=q.replace(/class\=\"([^\"]*)\"/,'class="$1 selected"');}Y[W++]=q;Y[W++]=g;}};var c=(e&&e.length)||0;a=a&&b?Math.min(a,c):0;if(a){o(0,a);}l=l&&b?Math.min(l,c-a):0;var f=c-l;for(var X=a;X<f;X++){Y[W++]=Z;}if(l){o(f,c);}Y.push(this.markupSuffix);return Y;},fillItemWrappers:function H(X,g,d,m,f,W,b,l){var e=(g&&g.length)||0,j=this.wrapperNodes(X),n=f.itemStatus,V=mstrmojo.css,Z=m.selectedIndices||{};for(var c=W,h=Math.min(b+1,e),a=0;c<h;c++){if(n[c]!==A){j[c].innerHTML=d.build(m,f,g[c],c);if(Z[c]){var Y=j[c].firstChild;if(Y){V.addClass(Y,["selected"]);}}a++;if(a===l){break;}}}return a;},onadd:function O(e,V,Z,f){if(V&&f){var a=f.value.length,b=this.wrapperNodes(V),d=b[f.index],Y=this.getWrapperCss(e);for(var X=0;X<a;X++){var W=this.createWrapperNode(V);W.className=Y;W.innerHTML=J;if(d){this.wrapperParentNode(V).insertBefore(W,d);}else{this.wrapperParentNode(V).appendChild(W);}}T(e,this);}},onremove:function Q(Y,b,V,X){if(b&&X){var a=this.wrapperNodes(b);if(a){var d=X.value.length;for(var Z=X.index+d-1,W=X.index;Z>=W;Z--){this.wrapperParentNode(b).removeChild(a[Z]);}}T(Y,this);}},onchange:function R(g,X,c,k){if(X&&k){var d=this.wrapperNodes(X);if(d){var W=mstrmojo.css,l=c.itemStatus,h;for(var b=0,V=k.removed,f=V&&V.length;b<f;b++){h=V[b];if(l[h]){W.removeClass(d[h].firstChild,["selected"]);}}for(var Z=0,e=k.added,Y=e&&e.length;Z<Y;Z++){h=e[Z];if(l[h]){W.addClass(d[h].firstChild,["selected"]);}}}}},_nd2iw:function E(W,Z,Y){Z=this.wrapperParentNode(Z);if(Z&&Y&&Z!==Y){var V=W.domNode,X=Y.parentNode;while(X){if(X===Z){return Y;}if(X===V){break;}Y=X;X=Y.parentNode;}}return null;},_iw2idx:function M(X,b,a){var W=X.items&&X.items.length,Y=this.wrapperNodes(b),V=I.findBin(Y,a,"offsetTop",W);for(var Z=V;Z<W;Z++){if(Y[Z].offsetHeight){return Z;}}return -1;},toPage:function(V,X){var W=V.scrollboxNode;if(V.usePaging&&W){W.scrollTop=X*B(V);}else{mstrmojo.alert("paging is not setup, can not perform paging.");}},whichPage:function(V){var W=V.scrollboxNode,X=B(V);return Math.round((W&&X&&W.scrollTop/X)||0);},toItem:function(Z,a){var X=Z&&Z.itemsContainerNode,e=Z.scrollboxNode,V=this.itemOffsetTop(Z,X,a),b=this.wrapperNodes(X)[a].clientHeight,W=e.clientHeight,d=e.scrollTop,Y=d;if(V<d){Y=V;}else{if(d+W-b<V){Y=Math.min(V,V-W+b);}}e.scrollTop=Y;}});})();(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.fx.AnimateProp");var S=mstrmojo.css;var Q=10;function C(W,Z,Y){W.pauseScrollRendering(true);var X=W.scrollboxNode,V=W.animate?W.scrollEffect:null;if(V&&V.play){if(V.isPlaying){V.cancel();}V.props={scrollTop:{start:X.scrollTop,stop:Z,isStyle:false}};V.onEnd=function(){W.pauseScrollRendering(false,null,Y);};V.play();}else{X.scrollTop=Z;W.pauseScrollRendering(false,null,Y);}}function K(c,e,V){var W=4;if(!V){V=0;}var f=Math.round(c.renderBlockSize/2);c.fillAt(Math.max(0,e-f),e+f);var b=c.itemsContainerNode,a=b.childNodes[e],Z=c.listMapper.itemOffsetTop(c,b,null,a),d=parseInt(c.scrollboxNode.clientHeight/2,10)-a.offsetHeight/2,X=Math.max(0,c.spacerMargin+Z-d);if(Math.abs(c.scrollboxNode.scrollTop-X)>2){C(c,X,c.renderOnScroll?function(){if(V<=W){K(c,e,V++);}}:null);}else{var Y=c.animate?c.scrollEffect:null;if(Y&&Y.isPlaying&&Y.cancel){Y.cancel();c.pauseScrollRendering(false);}}}function J(X){var Y=X.itemsContainerNode,V=Y.lastChild,W=V?V.offsetTop+V.offsetHeight-Y.firstChild.offsetTop:0;return W;}function U(W){var V=J(W),X=Math.max(0,parseInt((W.scrollboxNode.clientHeight-V)/2,10));C(W,Math.max(0,W.spacerMargin-X));}function H(X){var V=X.selectedIndex,W=V>-1;X.set("hasSelection",W);if(!X.domNode){return ;}if(W){K(X,V);}else{U(X);}}function E(W){var Y=W.scrollboxNode,V=J(W),X=V>Y.clientHeight/2;S.toggleClass(W.upArrowNode,["enabled"],X);S.toggleClass(W.downArrowNode,["enabled"],X);}function N(V,W){var X=V.scrollboxNode;X.scrollTop=Math.min(Math.max(X.scrollTop+W,0),X.scrollHeight-X.offsetHeight);}function B(W,V){if(!W._scrollInter){var X=Q*(V?-1:1);W._scrollInter=window.setInterval(function(){N(W,X);},50);}}function R(V){if(V._scrollInter){window.clearInterval(V._scrollInter);V._scrollInter=null;}}mstrmojo._IsDial=mstrmojo.provide("mstrmojo._IsDial",{markupString:'<div id="{@id}" class="mstrmojo-Dial {@cssClass}" style="position:relative;"><div class="mstrmojo-Dial-uparrow"  onmouseover="mstrmojo.all.{@id}.onmouseoverarrow(self, arguments[0], true)" onmouseout="mstrmojo.all.{@id}.onmouseoutarrow(self, arguments[0], true)" onclick="mstrmojo.all.{@id}.onclickarrow(self, arguments[0], true)" onmousedown="mstrmojo.all.{@id}.onmousedownarrow(self, arguments[0], true)" onmouseup="mstrmojo.all.{@id}.onmouseuparrow(self, arguments[0], true)"></div><div class="mstrmojo-Dial-scrollbox {@cssClass}" style="position:relative;{@cssText}" mstrAttach:mousedown,mouseup><div class="mstrmojo-Dial-spacer" style="{@spacerCssText}"><div class="mstrmojo-Dial-itemsContainer" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div></div></div><div class="mstrmojo-Dial-dnarrow" onmouseover="mstrmojo.all.{@id}.onmouseoverarrow(self, arguments[0], false)" onmouseout="mstrmojo.all.{@id}.onmouseoutarrow(self, arguments[0], false)" onclick="mstrmojo.all.{@id}.onclickarrow(self, arguments[0], false)" onmousedown="mstrmojo.all.{@id}.onmousedownarrow(self, arguments[0], false)" onmouseup="mstrmojo.all.{@id}.onmouseuparrow(self, arguments[0], false)"></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode.childNodes[1];},spacerNode:function(){return this.domNode.childNodes[1].firstChild;},itemsContainerNode:function(){return this.domNode.childNodes[1].firstChild.firstChild;},upArrowNode:function(){return this.domNode.childNodes[0];},downArrowNode:function(){return this.domNode.childNodes[2];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onhasSelectionChange:function(){S.toggleClass(this.domNode,["hasSelection"],!!this.hasSelection);}},animate:true,itemsEffect:{scriptClass:"mstrmojo.fx.AnimateProp",duration:500,interval:25,slot:"itemsContainerNode",preStart:function(){var W=this.widget[this.slot],V=(W&&W.offsetWidth)||0;this.props=V?{left:{start:-V,stop:0,suffix:"px",isStyle:true}}:{};},revertOnCancel:false},scrollEffect:{scriptClass:"mstrmojo.fx.AnimateProp",duration:250,interval:25,slot:"scrollboxNode",revertOnCancel:false},multiSelect:false,holdJumpOnly:true,audibles:{"*":true,hasSelection:false},initSpacer:function I(){var V=(this.cssText||"").match(/height:\s*(\d*)px/);if(V){this.spacerMargin=parseInt(Number(V[1])/2,10);var W=this.spacerMargin+"px";this.spacerCssText="padding-top: "+W+"; padding-bottom: "+W+";";}else{this.spacerMargin=0;delete this.spacerCssText;}},center:function T(){H(this);},preBuildRendering:function(){this.initSpacer();return this._super();},postBuildRendering:function D(){this._super();this.center();E(this);},refreshScroll:function G(){this.center();E(this);},prechange:function O(V){this._super(V);if(this.hasRendered){if(!this.multiSelect||(V&&V.added&&V.added.length)){this.center();}}},onclickarrow:function A(X,W,V){N(this,Q*(V?-1:1));},onmouseoverarrow:function L(X,W,V){if(!this.holdJumpOnly){B(this,V);}},onmouseoutarrow:function M(X,W,V){R(this);},onmousedownarrow:function F(X,W,V){if(this.holdJumpOnly){B(this,V);}},onmouseuparrow:function P(X,W,V){R(this);}});}());(function(){mstrmojo.requiresCls("mstrmojo.css");var A=mstrmojo.css;mstrmojo.ui._HasUITheme=mstrmojo.provide("mstrmojo.ui._HasUITheme",{_mixinName:"mstrmojo.ui._HasUITheme",themeClassName:"",postBuildRendering:function B(){var D=this.themeClassName;if(D){this.onthemeClassNameChange({value:D});}return this._super();},onthemeClassNameChange:function C(D){var F=this.domNode;if(F){var G=D.value,E=D.valueWas;if(G){A.addClass(F,D.value);}if(E){A.removeClass(F,D.valueWas);}}}});mstrmojo.ui._HasUITheme.EnumThemeNames={LIGHT_THEME:"mojo-theme-light",DARK_THEME:"mojo-theme-dark"};}());(function(){mstrmojo.requiresCls("mstrmojo._HasPopup","mstrmojo.hash","mstrmojo.css");var F=mstrmojo.hash,C=mstrmojo.css;var D="open";function E(G){return G?G.popupConfig.hostElement:null;}mstrmojo.ui.menus._HasMenuPopup=mstrmojo.provide("mstrmojo.ui.menus._HasMenuPopup",F.copy(mstrmojo._HasPopup));mstrmojo.ui.menus._HasMenuPopup.openPopup=function A(I,G){var H=this._lastOpened;if(H){this.closePopup();}mstrmojo._HasPopup.openPopup.call(this,I,G);C.addClass(E(I),D);};mstrmojo.ui.menus._HasMenuPopup.closePopup=function B(){C.removeClass(E(this._lastOpened),D);mstrmojo._HasPopup.closePopup.call(this);};}());(function(){mstrmojo.requiresClsP("mstrmojo","hash","css","array","desc");var R=mstrmojo.hash,l=mstrmojo.func,B=mstrmojo.css,e=mstrmojo.array;var E={lv:-1,hcd:false,epd:false,hid:false,dhid:false,children:[],displayChildren:[],parent:null,displayParent:null},j={rootItems:{},items:[],itemMap:{}};var k="hidden",C="expanded",p="collapsed",J="hierarchy",b="hasChildren",o="u;",W=10,M=7,n=32;mstrmojo.ui._IsHierarchyList=mstrmojo.provide("mstrmojo.ui._IsHierarchyList",{_mixinName:"mstrmojo.ui._IsHierarchyList",itemValueField:"v",init:function m(q){this._super(q);this.clearItems();},getItemProps:function f(t,q){var r=this._super(t,q),u=0;if(t.hcd){r.addCls(b);}if(t.v===o){r.addCls(k);}if(this.isHiearachyDisplay()){r.addCls(J);if(t.hid){r.addCls(k);}u=t.lv>=0?t.lv*W:0;}r.indent=u;return r;},_getItemNode:function S(q){var r=this.itemsContainerNode;return e.filterOne(r&&r.childNodes,function(t){return parseInt(t.getAttribute("idx"),10)===q;});},_buildItemsMarkup:function h(x,r,t,u,v,w){var q;if(this.isHiearachyDisplay()){q=this._buildDescendantsMarkup();}else{q=this._super(x,r,t,u,v,w);}return q;},_buildDescendantsMarkup:function Z(x,v){var AA=[],w=this.itemRenderer&&this.itemRenderer.render,y=x?(v?[x]:x.displayChildren):(this.raad?this.getDisplayRoots():this.getRootItems()),r=this.blockCount,u=function(AB){if(!AB.hid&&!AB.dhid){AA.push(w(AB,AB.idx,this));}if(AB.epd||AB.hid){e.forEach(AB.displayChildren,function(AD,AC){return z.call(this,AD,AC);},this);}},z=function(AC,AB){if(this.raad&&AB>=r){var AD=this.createRenderer(AC.lv,AC.displayParent,AC.parent,this.items.length,AB);this.items.push(AD);if(AD.displayParent){AD.displayParent.displayChildren.push(AD);}if(AD.parent){AD.parent.children.push(AD);}u.call(this,AD);return false;}else{u.call(this,AC);}};if(w&&typeof w==="function"){if(this.raad&&!x){if(y.length>r){var q=y.slice(0,r),t=this.createRenderer(y[r-1].lv,null,null,this.items.length,r);this.items.push(t);y.push(t);q.push(t);AA=this._buildSiblingsMarkup(q);}else{AA=this._buildSiblingsMarkup(y);}}else{e.forEach(y,function(AC,AB){return z.call(this,AC,AB);},this);}}return AA;},getItems:function T(){return this.items;},getItemByValue:function D(q){return this.itemMap[q];},isRootItem:function(q){return q.lv>=0&&q.v!==o&&!q.pid&&!q.parent;},getRootItems:function c(){return R.valarray(this.rootItems);},getDisplayRoots:function X(){if(!this.displayRoots){var t=this.displayRoots=[],q=this.getRootItems(),r=function(u){e.forEach(u,function(v){if(!v.hid){t.push(v);}if(v.epd||v.hid){r(v.displayChildren);}});};r(q);}if(!this.initialDisplayRoots){this.initialDisplayRoots=t.slice();}return this.displayRoots;},getInitialDisplayRoots:function A(){if(!this.initialDisplayRoots){this.initialDisplayRoots=(this.getDisplayRoots()||[]).slice();}return this.initialDisplayRoots;},createRenderer:function I(v,r,u,q,t){return{n:mstrmojo.desc(1005,"More..."),lv:v,displayParent:r,parent:u,idx:q,fetcher:true,fake:true,config:{nextSiblingIdx:t}};},getItemAncestorMap:function F(r){var q=this.itemValueField,t={};while(r&&r[q]){t[r[q]]=true;r=r.parent;}return t;},getItemDescendantMap:function Y(t){var q=this.itemValueField,u={},r=function(v){u[v[q]]=true;e.forEach(v.children,function(w){r(w);});};r(t);return u;},clearItems:function g(){var q=this.itemsContainerNode;R.copy(R.clone(j),this);if(q){q.innerText="";this.updateScrollbars();}},addItems:function d(w,t){var r=this.items,v=this.itemMap,q=this.rootItems,u=this.itemValueField,y=[];e.forEach(w,function(z){var AC=z[u],AA=this.getItemByValue(AC),AB=R.copy(z,(AA?AA:R.clone(E)));if(!AA){AB.idx=r.length;r.push(AB);if(AC){v[AC]=AB;}}if(this.isRootItem(AB)){q[AC]=AB;}y.push(AB);},this);e.forEach(y,function(AB){var z=this.getItemByValue(AB.pid),AA=this.getItemByValue(AB.dpid)||z;if(z){if(!AB.parent){AB.parent=z;z.children.push(AB);}if(!AB.hid&&!AB.dhid&&!AB.displayParent){AA.hcd=true;AB.displayParent=AA;AA.displayChildren.push(AB);}}delete AB.pid;delete AB.dpid;},this);if(!t){if(this.postAddItems){this.postAddItems(y);}var x=this.itemsContainerNode;if(x){if(this.isHiearachyDisplay()){this.refresh();}else{x.innerHTML+=this._buildSiblingsMarkup(this.getFlatDisplayItems(y)).join("");this.updateScrollbars();}}}return y;},addSiblingItems:function G(y,v){var u=this.getItemByValue(v),r;if(u){e.forEach(y,function(AA){if(AA.v!==v){AA.pid=AA.pid||v;}});}r=this.addItems(y,true);if(this.postAddSiblingItems){this.postAddSiblingItems(r,u);}var w=this.itemsContainerNode;if(w&&this.isHiearachyDisplay()){var x=this._buildSiblingsMarkup(r).join("");if(!v){w.innerHTML+=x;}else{if(u){var z={},t=this._getItemNode(u.idx),q;if(t){z[u.v]=true;while(t.nextSibling){q=this.getItemFromTarget(t.nextSibling);if(q&&q.displayParent&&z[q.displayParent.v]){z[q.v]=true;t=t.nextSibling;}else{break;}}t.outerHTML+=x;}}}this.updateScrollbars();}return r;},addBranchItems:function L(r,v){var q=this.getItemByValue(v),u;if(q){e.forEach(r,function(x){x.pid=x.pid||v;});}u=this.addItems(r,true);if(this.postAddBranchItems){this.postAddBranchItems(u,q);}var t=this.itemsContainerNode;if(t&&this.isHiearachyDisplay()){if(!v){e.forEach(u,function(x){if(this.isRootItem(x)){t.innerHTML+=this._buildDescendantsMarkup(x,true).join("");}},this);}else{if(q){var w=this._getItemNode(q.idx);if(w){w.outerHTML+=this._buildDescendantsMarkup(q).join("");}}}this.updateScrollbars();}return u;},updateItems:function H(q,r){if(r){e.forEach(q,function(x,u,v){var w=r[u],t=v[w.p_index];if(t){x.pid=t.v;}});}this.handleOriginalParent(q,r);this.setDisplayParent(q,r);this.clearItems();this.addItems(q,true);},handleOriginalParent:function P(q,r){if(r){e.forEach(q,function(y,u,v){var x=r[u],t=v[x.p_index],w=v[x.original_p_index];if(t&&t.t===M&&y.lv!==t.lv&&w&&w.pid===t.v){y.pid=w.v;}});}},setDisplayParent:function K(q,v,u){if(u){this.idMap=this.idMap||{};e.forEach(q,function(x){this.idMap[x.v]=x;},this);}var t=this,r=function(z,y){var x;if(!u&&v){var AA=v[y].p_index;x=q[AA];}else{if(u){x=t.idMap[z.pid];}}return x;};e.forEach(q,function w(AA,y,z){var x=r(AA,y);if(!x||t.isRootItem(AA)){return AA.v;}if(!AA.dpid){AA.dpid=x.hid?w(x,v&&v[y]&&v[y].p_index,z):x.v;}return AA.dpid;});},fetchItems:function U(u,x){if(this.raad&&this.isHiearachyDisplay()&&(this.items||[]).length>0){return ;}u=u||{};var r=this,q=u.branch,w=u.browseFlags&n,v=parseInt(u.level,10),t=v>=0;this.fetchItemsThroughTaskCall(u,l.wrapMethods(x,{success:function(y){if(r.raad===undefined&&y&&r.isHiearachyDisplay()){r.raad=y.raad;}if(y&&y.es){var z=y.es;if(v===(q&&q.lv+1||0)||(w&&!r.raad)){r.addSiblingItems(z,q&&q.v);}else{if(q&&!t){r.addBranchItems(z,q.v);}else{r.addItems(z);}}}}}));},updateItemNodesStatus:function V(){var q=this.itemsContainerNode&&this.itemsContainerNode.childNodes;e.forEach(q,function(t){var r=this.getItemFromTarget(t);if(r){B.toggleClass(t,CSS_SELECTED,r.isSelected);}},this);},_buildSiblingsMarkup:function O(t){var q=[],r=this.itemRenderer&&this.itemRenderer.render;if(r&&typeof r==="function"){e.forEach(t,function(u){q.push(r(u,u.idx,this));},this);}return q;},toggleCollapseExpandCss:function Q(r,q){B.toggleClass(r,p,!q);B.toggleClass(r,C,q);},doExpandCollapse:function a(q,z){var AA=!z.epd;z.epd=AA;this.toggleCollapseExpandCss(q,AA);if(!this.isHiearachyDisplay()){return ;}var x=this.getItemDescendantMap(z),t,y;if(AA){var r=z.displayChildren&&z.displayChildren[0];if(r){var v=this.getItemFromTarget(q.nextSibling);if(v&&v.displayParent===z){var w={},u;t=q.nextSibling;while(t){y=this.getItemFromTarget(t);u=y&&y.displayParent;if(!u||!x[y.v]){break;}if(w[u.v]){B.addClass(t,k);w[y.v]=true;}else{B.removeClass(t,k);if(!y.epd){w[y.v]=true;}}t=t.nextSibling;}}else{q.outerHTML+=this._buildDescendantsMarkup(z).join("");}}else{this.fetchItems({branch:z,level:z.lv+1});}}else{t=q.nextSibling;while(t){y=this.getItemFromTarget(t);if(!y||!x[y.v]){break;}B.addClass(t,k);t=t.nextSibling;}}this.updateScrollbars();},isHiearachyDisplay:function N(){return true;},fetchItemsThroughTaskCall:mstrmojo.emptyFn,getFlatDisplayItems:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css");var C=mstrmojo.dom,G=100,L=700;var B="mojo-safari-hide-nativeTooltip",H=mstrmojo.css;function M(O,N){return function(Q){var P=mstrmojo.all[O];if(P.customTooltipHandler){P.customTooltipHandler(Q);}P[(N?"move":"show")+"Tooltip"](Q,self);};}function A(){var O=this.tooltipNode||this.domNode,Q=this.id,N,P="_ontooltip"+(this.isDynamicTooltip?"move":"over");if(!this._ontooltipout){this._ontooltipout=function(R){mstrmojo.all[Q].hideTooltip(R,self);};}if(!this[P]){this[P]=M(Q,this.isDynamicTooltip);}O=[].concat(O);for(N=0;N<O.length;N++){O[N].removeAttribute("title");C.attachEvent(O[N],(this.isDynamicTooltip?"mousemove":"mouseover"),this[P]);C.attachEvent(O[N],"mouseout",this._ontooltipout);}}function I(){var Q=this.tooltipNode||this.domNode,P;if(Q&&Q.constructor!==Array){Q=[Q];}if(Q){var R=this._ontooltipover,O=this._ontooltipout,N=this._ontooltipmove;for(P=0;P<Q.length;P++){if(R){C.detachEvent(Q[P],"mouseover",R);}if(O){C.detachEvent(Q[P],"mouseout",O);}if(N){C.detachEvent(Q[P],"mousemove",N);}}}}mstrmojo._HasTooltip=mstrmojo.provide("mstrmojo._HasTooltip",{tooltip:"",richTooltip:null,useRichTooltip:false,isDynamicTooltip:false,tooltipNode:null,tooltipOpenDelay:700,isIgnoreTooltipCloseDelay:false,hasWidgetContent:false,tooltipCloseDelay:G,hasOpenTooltip:false,postBuildRendering:function(){var N=this._super();if(this.useRichTooltip){A.call(this);}return N;},onuseRichTooltipChange:function K(){if(this.hasRendered){if(this.useRichTooltip){A.call(this);}else{I.call(this);this.hideTooltip();}}},showTooltip:function J(Q,P){var O=this;if(!O.hasOpenTooltip&&(!mstrApp.isInteractive||mstrApp.isInteractive&&mstrApp.isInteractive())){mstrmojo.requiresCls("mstrmojo.tooltip");if(this.updateTooltipConfig){this.updateTooltipConfig(Q);}window.clearTimeout(this._tooltipTimeOut);if(mstrmojo.dom.isIE){var S={};for(var N in Q){S[N]=Q[N];}Q=S;}var T=this.richTooltip?this.richTooltip.areaId:undefined;if(C.isSafari&&Q){var R=Q.srcElement;if(window.getComputedStyle(R)["text-overflow"]==="ellipsis"){this.baseElement=R;H.toggleClass(R,B,true);}}this._tooltipTimeOut=window.setTimeout(function(){var U=O.richTooltip;if(O._closeTooltipTimeout){window.clearTimeout(O._closeTooltipTimeout);delete O._closeTooltipTimeout;}mstrmojo.tooltip.open(O,Q,P);O.tooltip.onmouseover=function(){if(O.richTooltip&&O.richTooltip.enableHover){window.clearTimeout(O._closeTooltipTimeout);window.clearTimeout(O._deactivationTimeout);if(O.tooltip){O.tooltip.onmouseout=function(V){var W=V.e;if((!W.toElement&&!W.relatedTarget)||!C.contains(this.domNode,V.e.toElement||V.e.relatedTarget)){O.hideTooltip();}};}}};O.tooltip.allowOtherTooltips=O.allowOtherTooltips;if(U&&U.onClose){O.tooltip.onClose=U.onClose;}O.hasOpenTooltip=true;O._hasActiveArea=true;O._tooltipAreaId=T;window.clearTimeout(O._deactivationTimeout);delete O._deactivationTimeout;},(this._hasActiveArea&&T&&T===this._tooltipAreaId)?0:this.tooltipOpenDelay);}},moveTooltip:function D(N,P){if(this._tooltipTimeOut){window.clearTimeout(this._tooltipTimeOut);this._tooltipTimeOut=null;mstrmojo.tooltip.close();}var R=this,O=N,Q=P;this._tooltipTimeOut=setTimeout(function(){mstrmojo.tooltip.open(R,O,Q);},this.tooltipOpenDelay);},hideTooltip:function F(){var N=this;window.clearTimeout(this._tooltipTimeOut);if(C.isSafari&&this.baseElement){H.toggleClass(this.baseElement,B,false);}if(this._closeTooltipTimeout){window.clearTimeout(this._closeTooltipTimeout);}if(this._hasActiveArea&&!this._deactivationTimeout){this._deactivationTimeout=window.setTimeout(function(){delete N._deactivationTimeout;delete N._hasActiveArea;delete N._tooltipAreaId;},100);}mstrmojo.requiresCls("mstrmojo.tooltip");if((!this.isIgnoreTooltipCloseDelay)&&N.richTooltip&&N.richTooltip.enableHover){this._closeTooltipTimeout=window.setTimeout(function(){mstrmojo.tooltip.close();delete N._closeTooltipTimeout;},N.richTooltip.tooltipCloseDelay||this.tooltipCloseDelay);}else{if(N.tooltip){this.isIgnoreTooltipCloseDelay=false;mstrmojo.tooltip.close();}}this.hasOpenTooltip=false;},unrender:function E(N){I.call(this);this._super(N);}});mstrmojo._HasTooltip.TOOLTIP_OPEN_DELAY=L;mstrmojo._HasTooltip.TOOLTIP_CLOSE_DELAY=G;}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.expr","mstrmojo.css");var G=mstrmojo.array,F=mstrmojo.expr,H=mstrmojo.css;mstrmojo._IsExprNode=mstrmojo.provide("mstrmojo._IsExprNode",{ind:function B(){var L=this.parent;if(L&&L.indent){var K=this.childIndex();K=(K>-1&&(K>0))?[K,K-1]:null;if(K){L.indent(K);}}},out:function D(){var L=this.parent;if(L&&L.outdent){var K=this.childIndex();K=(K>-1&&(K>0))?[K,K-1]:null;if(K){L.outdent(K);}}},andOrTxt:function A(){var M=this.parent,K=M&&M.data,L="",N=this.data;if(K&&(K.et===F.ET.ANDOR)&&K.fn){L=K.fn+(N&&N.not?"_"+F.FN.NOT:"");L=F.BRANCH_FNS[L];}return'<span class="mstrmojo-text mstrmojo-andor">'+L+"</span>";},getPrefixAndOrToolsMarkup:function(){return('<span class="mstrmojo-indent" onclick="mstrmojo.all[\'{@id}\'].ind()" mstrAttach:mouseover,mouseout>'+mstrmojo.desc(5895,"Group conditions")+'</span><span class="mstrmojo-outdent" onclick="mstrmojo.all[\'{@id}\'].out()" mstrAttach:mouseover,mouseout>'+mstrmojo.desc(5896,"Ungroup Conditions")+"</span>");},premousedown:function J(K){var L=mstrmojo.dom.eventTarget(K.hWin,K.e);if(this.prefixHoverNode&&mstrmojo.dom.contains(this.prefixHoverNode,L,false)){mstrmojo.dom.stopPropogation(K.hWin,K.e);return ;}if(this._super){this._super(K);}},isSelectableArea:function E(K){return true;},childIndex:function I(){var M=this.parent,K=M&&M.data,L=K&&K.nds,N=this.data;if(L&&N){return G.indexOf(L,N);}return -1;},toggleGroupBorder:function C(K){H.toggleClass(this.parent.itemsContainerNode.childNodes[this.childIndex()-1].firstChild,"upgroup",K);H.toggleClass(this.domNode,"downgroup",K);}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css");var J={T:["top","left"],D:["height","width"],B:["border","border-color","border-style","border-width"],F:["font","color","text-decoration"],P:["padding"],BG:["background-color","fx"],RW:[]};J.RW=["z-index"].concat(J.T.concat(J.D));var D=mstrmojo.dom,O=mstrmojo.css;function N(T,V,S){var U=T[V]||[];U.push(S);T[V]=U;}function L(W,V){var U=((W&&W.fmts)||null);if(V){var Y=W.thresholds,T=Y&&Y[V];if(T){var X={},Z;for(Z in U){X[Z]=T[Z]||U[Z];}for(Z in T){var S=T[Z];X[Z]=(typeof S==="string")?(S+" !important"):S;}U=X;}}return U;}mstrmojo._Formattable=mstrmojo.provide("mstrmojo._Formattable",{_mixinName:"mstrmojo._Formattable",formatHandlers:null,thresholdId:null,getCacheKey:function E(){return"css_cache"+(this.thresholdId||"");},update:function G(T){var S=true;this.invisible=!!(T&&T.data&&T.data.invisible);if(this._super){S=this._super(T);}return S;},buildCSSFormatString:function H(U,d){var h=this.formatHandlers[U],k=h.src?d[h.src]:d;if(!k){return null;}var b=h.props||h;if(!b){return null;}var X=[],g=-1;var V=b.length-1;for(V;V>=0;V--){var j=b[V];var c=J[j]||[j];var a=c.length-1;for(a;a>=0;a--){j=c[a];var T=k[j];if(T!==undefined){if(j==="fx"){var Y=T,S={};var e=Y.gd;if(e){this.formatGradient(e,S);}var W=parseInt(Y.rt,10);if(W){if(W===1||W===3){this.formatTextRotation(Y.rt,S);}}if(Y.ds){this.formatDropShadow(Y,S);}var Z;for(Z in S){X[++g]=Z+":"+S[Z].join(" ");}}else{X[++g]=j+":"+T;}}}}if(this.invisible){X.push("visibility:hidden");}return X.join(";")+";";},applyCSSFormatToNode:function I(U,S){var V=this[U],T=V&&V.style;if(T){this.buildCSSFormatString(U,S).split(";").forEach(function(W){var X=W.split(":");T[O.convertCssToCamelCase(X[0])]=X[1];});}},clearSlotBackgroundCSS:function F(T){var U=this[T],S=U&&U.style;if(S){S.background="transparent none 0 0 no-repeat";S.filter="none";}},preBuildRendering:function B(){this._super();var V=this.formatHandlers,S=this.getFormats();if(V&&S){var W=this.defn=this.defn||{},X=this.getCacheKey(),U=W[X];if(!U){U=W[X]={};for(var T in V){var Z=T+"CssText";this[Z]=U[Z]=this.buildCSSFormatString(T,S)||"";}}else{var Y;for(Y in U){this[Y]=U[Y];}}}return true;},formatGradient:function P(S,U){var T=O.buildGradient(S.t,S.sc,S.ec);if(T){N(U,T.n,T.v);}},formatDropShadow:function K(W,U){if(D.supports(D.cssFeatures.DROP_SHADOW)){var V=W.ds;if(D.isDXIE){N(U,"filter","progid:DXImageTransform.Microsoft.DropShadow(Color='#66000000',Positive='true',OffX="+V+",OffY="+V+")");}else{var S=[V,V],T=parseInt(W.rt,10);if(T===1||T===3){S[((T===1)?1:0)]=-V;}N(U,(D.isWK?"-webkit-":"")+"box-shadow",S.join("px ")+"px 3px 0px #888");}}},formatTextRotation:function C(T,S){if(D.supports(D.cssFeatures.TEXT_ROTATION)){if(D.isDXIE){N(S,"filter","progid:DXImageTransform.Microsoft.BasicImage(rotation="+T+")");}else{var U=(T===1)?90:-90;N(S,D.CSS3_PREFIX+"transform-origin","top left");N(S,D.CSS3_PREFIX+"transform","rotate("+U+"deg)");}}},getFormats:function R(){if(!this.fmts){this.fmts=L.call(this,this.defn,this.thresholdId);}return this.fmts;},clearFormats:function A(){this.fmts=undefined;},createEmptyFormats:function(){return(this.fmts=this.fmts||{});},clearCache:function Q(){delete this.defn[this.getCacheKey()];},unrender:function M(S){if(this.thresholdId){this.fmts=null;}this._super(S);}});mstrmojo._Formattable.getBorderWidths=function(W){var V=W.getFormats(),S=(V.border)?V.border.match(/(\d*|\d*\.\d*)pt/)[0]:V["border-width"],U=W.model,T=U.docModel;return O.getBorderWidths(S,(T&&T.dpi)||U.dpi);};}());(function(){mstrmojo.requiresCls("mstrmojo.css");var F=mstrmojo.css,E="px",J="hasOwnAvatar",I={x:0,y:0};function B(L){var K=this.createAvatar(L.src.node,L);if(K){F.addClass(K,[this.avatarCssClass,J]);this.avatar=L.avatar=document.body.appendChild(K);}}function C(){var K=this.avatar;if(K){K.parentNode.removeChild(K);delete this.avatar;F.removeClass(K,[this.avatarCssClass,J]);}}mstrmojo._HasOwnAvatar=mstrmojo.provide("mstrmojo._HasOwnAvatar",{_mixinName:"mstrmojo._HasOwnAvatar",draggable:true,ownAvatar:true,avatarCssClass:"",restrictedToAxis:undefined,isDragValid:function H(K){if(this._super){return this._super(K);}return false;},ondragstart:function D(K){B.call(this,K);this.positionAvatar(K.src.pos,K);if(this._super){this._super(K);}},ondragmove:function A(K){this.positionAvatar(K.tgt.pos,K);if(this._super){this._super(K);}},ondragend:function A(K){C.call(this);if(this._super){this._super(K);}},createAvatar:mstrmojo.emptyFn,positionAvatar:function G(O,L){if(this.avatar){var N=this.avatar.style,M=this.restrictedToAxis,K=(L&&L.dragOffsets)||I;if(M!=="y"){N.left=O.x+K.x+E;}if(M!=="x"){N.top=O.y+K.y+E;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.registry","mstrmojo._Provider","mstrmojo.array");var B=mstrmojo.registry,F=mstrmojo.array;mstrmojo.Obj=mstrmojo.declare(mstrmojo.Base,[mstrmojo._Provider],{scriptClass:"mstrmojo.Obj",id:"",init:function I(J){this.disposables=[];this._super(J);B.add(this);if(this.postCreate){this.postCreate();}},addDisposable:function G(M){var K=this.disposables,L,J;if(M.constructor===Array){for(L=0,J=M.length;L<J;L++){K.push(M[L]);}}else{K.push(M);}return M;},destroyDisposables:function D(J){F.forEach(this.disposables,function(K){if(K.destroy){K.destroy(J);}else{if(K.clear){K.clear();}}});this.disposables=[];},throwAbstractMethodError:function A(J){throw new Error(this.scriptClass+" must implement "+J+".");},destroy:function H(J){if(this.destroyed){return ;}this._super(J);this.destroyDisposables(J);B.remove(this);delete this.parent;this.destroyed=true;}});var C=mstrmojo.Obj;C.free=function E(J){if(J instanceof C){J.destroy();}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.registry","mstrmojo.publisher","mstrmojo._Provider");var G=mstrmojo.hash,A=mstrmojo.array,B=mstrmojo.registry,D=mstrmojo.publisher;mstrmojo.Arr=mstrmojo.declare(null,[mstrmojo._Provider],{scriptClass:"mstrmojo.Arr",postApplyProperties:null,postCreate:null,length_bindEvents:["add","remove"],init:function H(K){var J;if(K&&K.data){J=K.data;delete K.data;}else{if(K){J=K;K=null;}}if(!J||J.constructor!==Array){J=[];}G.copy(mstrmojo.Arr.prototype,J);if(K){G.copy(K,J);}if(J.postApplyProperties){J.postApplyProperties();}B.add(J);if(J.postCreate){J.postCreate();}return J;},destroy:function E(){D.clearSubscriptions(this.id);B.remove(this);},add:function I(L,J,K){var M=L&&L.length;if(M){if(J==null){J=this.length;}A.insert(this,J,L);if(!K&&(this.onadd||D.hasSubs(this.id,"add"))){this.raiseEvent({name:"add",value:L,index:J});}}},remove:function F(J,L,K){if(L==null){L=1;}if((J!=null)&&L){var M=this.splice(J,L);if(!K&&(this.onremove||D.hasSubs(this.id,"remove"))){this.raiseEvent({name:"remove",value:M,index:J});}}}});mstrmojo.Arr.makeObservable=function C(J,K){if(!J){return ;}if(!K){K={};}K.data=J;return this.prototype.init(K);};})();(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.expr","mstrmojo.date","mstrmojo.num","mstrmojo.string");mstrmojo.validation={STATUSCODE:{UNKNOWN:-1,VALID:0,INVALID:1,INVALID_EMPTY:2,INVALID_CHAR:3,INVALID_OUTOFRANGE:4,INVALID_REGEX:5,INVALID_VALIDATOR:6,INVALID_BAD_NUMERICFORMAT:7,INVALID_BAD_DATESTRING:8},TRIGGER:{NONE:0,ONBLUR:1,ONKEYUP:2,VALUESET:4,ALL:7},REGEXP:{US_ZIP:/^\d{5}([\- ]?\d{4})?$/,EMAIL_ADDRESS:/^([a-zA-Z0-9_\.\-])+@(([a-zA-Z0-9\-])+[\.])+([a-zA-Z0-9]{2,4})+$/,SOCIAL_SECURITY_NUMBER:/^((?!000)(?!666)\d{3})(\s|\-)?((?!00)\d{2})\2((?!0000)\d{4})$/,PHONE_NUMBER:/^(?!-)[ \d\-\(\)\.\+]+$/,FILE_NAME:new RegExp('^[^:*?"<>|/\\\\()]+$'),FOLDER_PATH_WIN:new RegExp('^([a-zA-Z]:|\\\\\\\\[^:*?"<>|/\\\\]+|[^:*?"<>|/\\\\]*)(\\\\[^:*?"<>|/\\\\]+)*(\\\\){0,1}$'),FOLDER_PATH_UNIX:new RegExp('^(/){0,1}([^:*?"<>|/\\\\]+/)*([^:*?"<>|/\\\\]+){0,1}$'),PRINTER_PATH_SINGLE:new RegExp('^[^$%:*?"<>|/\\\\]*$'),PRINTER_PATH_MULTIPLE:new RegExp('^((/|\\\\\\\\)[^$%:*?"<>|/\\\\]+)((/|\\\\)[^$%:*?"<>|/\\\\]+)*(/|\\\\){0,1}$')}};var H=mstrmojo.validation,B=H.TRIGGER,b=H.STATUSCODE,A={"-1":-1,1:1,2:1,3:2,4:2,5:2,6:2,7:2,8:3,9:3,10:3,11:4,12:4,13:4,14:6,15:6,16:6,17:3,18:3,21:2,22:2,23:3,24:4,25:3,30:5,34:5};H.VALIDATOR={DEMO:function N(e){var d=parseInt(e,10),f=mstrmojo.validation.STATUSCODE;if(d===0||d===1||d>10){return{code:f.VALID};}return{code:f.INVALID,msg:"This field must be either 0, 1 or greater than 10"};},VALIDATE_PHONENO:function I(d){var e=String(d).replace(/[^\d]/g,"");if(e.length<10){return{code:b.INVALID,msg:mstrmojo.desc(9203,"A telephone number must contain at least 10 digits.")};}if(!H.REGEXP.PHONE_NUMBER.test(d)){return{code:b.INVALID,msg:mstrmojo.desc(9204,"The telephone number contains invalid characters.")};}return{code:b.VALID};},VALIDATE_ZIPCODE:function G(d){var f="",e=this.dtp;if(!H.REGEXP.US_ZIP.test(d)){if(H.isNumeric(e)||H.isInt(e)){f=mstrmojo.desc(9208,"A zip code must be 5 digits or 5+4 digits.");}else{if(H.isString(e)){f=mstrmojo.desc(9206,"The zip code is invalid");}}return{code:b.INVALID,msg:f};}return{code:b.VALID};},VALIDATE_EMAIL:function T(d){var e=d.indexOf("@");if(e===-1){return{code:b.INVALID,msg:mstrmojo.desc(9197,"The email address is missing an at sign (@).")};}if(d.substring(e).indexOf(".")===-1){return{code:b.INVALID,msg:mstrmojo.desc(9198,"The email address is missing a period on the domain.")};}return H.REGEXP.EMAIL_ADDRESS.test(d)?{code:b.VALID}:{code:b.INVALID,msg:mstrmojo.desc(9207,"The email address is invalid.")};},VALIDATE_SSN:function Q(d){var f=this.dtp,e;if(H.isNumeric(f)||H.isInt(f)){e=String(d).replace(/[^\d]/g,"");if(e.length!==9){return{code:b.INVALID,msg:mstrmojo.desc(9209,"A Social Security Number must be 9 digits.")};}}if(!H.REGEXP.SOCIAL_SECURITY_NUMBER.test(d)){return{code:b.INVALID,msg:mstrmojo.desc(9210,"The Social Security Number is invalid.")};}return{code:b.VALID};}};H.isInt=function D(d){return A[d]===1;};H.isNumeric=function Y(d){return A[d]===2||A[d]===5;};H.isString=function J(d){return A[d]===3;};var C=window.mstrConfig,L=C.listSep,S=mstrmojo.expr,M=S.DTP,Z=mstrmojo.num,U=mstrmojo.string,F=mstrmojo.date;function P(l,m){var h=l.dtp,k=l.constraints,o=k.allowedFormatChars||"",g=(A[h]===1),d=H.isNumeric(h),e=(A[h]===6),n=mstrmojo.locales.number.THOUSANDSEPARATOR,f=mstrmojo.locales.number.DECIMALSEPARATOR,j;if(g){if(!l._intRegExp){o+="0-9-"+(l.isList?L:"")+n;l._intRegExp=new RegExp("[^"+o+"]");}j=l._intRegExp;}if(d){if(!l._numericRegExp){o+="0-9-#"+(l.isList?L:"")+f+n;l._numericRegExp=new RegExp("[^"+o+"]");}j=l._numericRegExp;}return !!j&&j.test(m);}function c(l,n){var h=l.dtp,k=l.constraints,g=(A[h]===1),d=H.isNumeric(h),e=(A[h]===6),f=k.min,m=k.max,j;if(f===undefined&&m===undefined){return false;}if(g||d){if(Z.isBigDecimal(n)){return Z.inNumericRange(Z.parseBigDecimal(n),f,m)!==0;}return Z.inNumericRange(n,f,m)!==0;}if(e){return F.inDateTimeRange(n,f,m)!==0;}return false;}function K(e,d){return !Z.isNumeric(d)&&!Z.isBigDecimal(d);}function R(g,e){var f=(g.dtp===M.DATE),d=(g.dtp===M.TIME);return(f?!F.isDate(e):(d?!F.isTime(e):!F.isDateAndOrTime(e)));}mstrmojo._CanValidate=mstrmojo.provide("mstrmojo._CanValidate",{constraints:null,required:false,dtp:M.INTEGER,isList:false,autoFormat:false,validationStatus:null,init:function W(d){this._super(d);if(!this.constraints){this.constraints={};}var e=this.constraints;if(!e.hasOwnProperty("trigger")){e.trigger=B.NONE;}},_set_value:function(j,f){var g=this.value,e=(g!==f);if(e){this.value=f;var h=this.constraints.trigger,d=(h&B.VALUESET)>0;if(d){this.validate(f);}}return e;},validate:function O(){var f=(this.value!==null&&this.value!==undefined)?this.value:"",j=this.isList?f.split(L):[f],h,e,k,d=j.length,g;for(g=0;g<d;g++){h=this.doValidation(j[g]);e=(h.code>b.VALID);if(e){if(d>1){h.msg=mstrmojo.locales.validation.invalidValueInListError.replace("#",j[g]||" ");}break;}}k=e?"onInvalid":"onValid";if(!e&&this.autoFormat){this.format();}this.set("validationStatus",h);if(this[k]){this[k](h);}},format:function X(){var j=this.dtp,f=(A[j]===6);if(!f){return ;}var l=mstrConfig.listSep,o=this.value||"",e=this.isList?o.split(l):[o],n=j===14,m=[],d,g=mstrmojo.locales.datetime,k=e.length,h;for(h=0;h<k;h++){o=e[h];d=F.parseDateAndOrTime(o);if(d){if(n&&d.date){m.push(F.formatDateInfo(d.date,g.DATEOUTPUTFORMAT));}else{m.push((d.date?F.formatDateInfo(d.date,g.DATEOUTPUTFORMAT):"")+" "+(d.time?F.formatTimeInfo(d.time,g.TIMEOUTPUTFORMAT):""));}}}this.set("value",m.join(l));},isValid:function V(){var d=this.validationStatus;if(!d){this.validate();}return this.validationStatus.code===b.VALID;},clearValidation:function a(){this.set("validationStatus",{code:b.VALID});if(this.onClearValidation){this.onClearValidation();}},doValidation:function E(q){var n=this.constraints,o=n.regExp,f=n.validator,d={id:this.id,code:b.VALID,msg:""},m=this.dtp,l=(A[m]===1),e=H.isNumeric(m),g=(A[m]===3),h=(A[m]===6),k=U.isEmpty(q),p=String(q).length,j="",u=mstrmojo.locales.validation;if(this.required&&k){d.code=b.INVALID_EMPTY;d.msg=u.requiredFieldError;return d;}q=U.trim(q);if(!k&&P(this,q)){if(l){j=u.integerDataType;}if(e){j=u.numericDataType;}if(h){j=u.dateDataType;}d.code=b.INVALID_CHAR;d.msg=u.invalidCharError.replace("#",j);return d;}if(!k&&h&&R(this,q)){d.code=b.INVALID_BAD_DATESTRING;d.msg=u.invalidDateStringError;return d;}if(!k&&(e||l)&&K(this,q)){d.code=b.INVALID_BAD_NUMERICFORMAT;d.msg=u.invalidNumericFormatError;return d;}if(!k&&(l||e||h)&&c(this,q)){d.code=b.INVALID_OUTOFRANGE;if(n.min!==null&&n.max!==null){j=u.outofRangeError.replace("# ","").replace("##",Z.toLocaleString(n.min)).replace("###",Z.toLocaleString(n.max));}else{if(n.min!==null){j=u.noLessMinError.replace("##",Z.toLocaleString(n.min)).replace("# ","");}else{if(n.max!==null){j=u.noGreaterMaxError.replace("###",Z.toLocaleString(n.max)).replace("# ","");}}}d.msg=j;return d;}if(g&&n.minLen!==null&&n.maxLen!==null){if(p<n.minLen||p>n.maxLen){d.code=b.INVALID;d.msg=mstrmojo.desc(9211).replace(/#/,n.minLen).replace(/##/,n.maxLen);return d;}}if(o&&!o.test(q)){d.code=b.INVALID_REGEX;d.msg=mstrmojo.desc(9205);return d;}var t=f&&f.apply(this,[q]);if(t){d.code=t.code;d.msg=t.msg;return d;}return d;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.num","mstrmojo.locales");var D=mstrmojo.array,A=mstrmojo.num,B=mstrmojo.locales;mstrmojo.vi.util.NumberFormatUtility=mstrmojo.provide("mstrmojo.vi.util.NumberFormatUtility",{applyFormatToNumber:function C(P,Q,G){var H="\u00A4",L=/"[^"]*"/g,F=P.match(L),K=P.replace(L,H),O=["m","y","d","h","s"],N=G||false,E=new Date(),M=E.getFullYear(),J=E.getMonth(),I=E.getDay(),S=B.datetime,R;D.forEach(O,function(T){N=N||K.indexOf(T,0)!==-1;});if(N){K=K.replace(/y{3,}/g,M).replace(/y{1,2}/g,M.toString().slice(2,4));K=K.replace(/m{4,}/g,S.MONTHNAME_FULL[J-1]).replace(/m{3}/g,S.MONTHNAME_SHORT[J-1]).replace(/mm/g,"07").replace(/m/g,"7").replace(/7ber/g,"mber");K=K.replace(/d{4,}/g,S.dayNames[I-1]).replace(/d{3}/g,"Mon").replace(/dd/g,"10").replace(/d/g,"1").replace(/1ay/g,"day");K=K.replace(/hh/g,"08").replace(/h/g,"8");K=K.replace(/ss/g,"04").replace(/s/g,"4");K=K.split(H);R=K[0];D.forEach(F,function(U,T){R+=U+K[T+1];});return R;}if(A.isNumeric(Q)){return A.formatByMask(P,A.parseNumeric(Q));}return Q;}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.expr","mstrmojo.array","mstrmojo.hash");mstrmojo.requiresDescs(308,5923,7930,5282,5283,2793,2787,2788,12298);var D=mstrmojo.string,S=mstrmojo.expr,M=S.ET,L=mstrmojo.array,R=mstrmojo.hash;var U=S.FN,K=S.BRANCH_FNS[U.NOT],Y=mstrmojo.mstr.EnumDSSXMLObjectTypes,H=mstrmojo.mstr.EnumDSSXMLObjectSubTypes,N=mstrmojo.mstr.EnumDSSConsolidationType;function C(Z){return D.htmlAngles(Z)||"";}var A={betweenText:mstrmojo.desc(308,"and"),atText:mstrmojo.desc(5923,"at"),emptyText:mstrmojo.desc(7930,"Empty condition"),andText:mstrmojo.desc(5282,"AND"),orText:mstrmojo.desc(5283,"OR"),boldandText:"<span style='font-weight:bold;'>"+mstrmojo.desc(5282,"AND")+"</span>",boldorText:"<span style='font-weight:bold;'>"+mstrmojo.desc(5283,"OR")+"</span>",whereText:mstrmojo.desc(2793,"Where (##)"),notText:mstrmojo.desc(12298,"NOT")};var X={"*":function(a,Z){return{html:a?('<span class="mstrmojo-unknown">'+(C(a.n||a.xml)||"...")+"</span>"):null,text:a?(C(a.n||a.xml)||"..."):null};}};function V(Z){return !!Z.not||Z.fn===U.NOT_EQUAL||Z.fn===U.NOT_IN_LIST||Z.fn===U.NOT_BETWEEN||Z.fn===U.NOT;}function I(Z){if(Z&&Z.not){return{html:'<span class="mstrmojo-text mstrmojo-not">'+K+"</span>",text:K+" "};}return{html:"",text:""};}function T(b,a){var Z=b&&((a?'<span class="mstrmojo-ListIcon t'+a+'"></span>':"")+'<span class="mstrmojo-text mstrmojo-embedobj">'+C(b)+"</span>");return{html:Z,text:b&&((a?a+" ":"")+C(b))};}function Q(Z,b){var a=b&&b.trim().split(" ")||[];if(Z.t===Y.Attribute&&Z.st===H.AttributeRecursive){a.push("recursive");}else{if(Z.t===Y.Consolidation&&Z.st===H.ConsolidationManaged){a.push("derived");if(Z.ndetype===N.DssRecursiveDerivedElement){a.push("recursive");}}}return a.join(" ");}function G(a,Z){var b=C(a.n);return{html:'<span class="mstrmojo-text mstrmojo-attr '+Q(a,Z)+'">'+b+"</span>",text:b};}X[M.R]=function(a,Z){return T(a.r&&a.r.n,a.r&&a.r.t);};X[M.F]=function(a,Z){return T(a.f&&a.f.n,a.f&&a.f.t);};X[M.XML]=function(a,Z){return T(a.n||a.p&&a.p.n||a.xml,a.p&&a.p.t);};X[M.AE]=function(p,c){var m=[],j=[],b=(c&&c.elemsEmpty)||"("+mstrmojo.desc(2210,"Empty")+")";if(p&&p.a&&p.a.n){var a=G(p.a);m.push(a.html);j.push("{"+a.text+"}");var Z=C(S.fnName(p.et,p.fn,p.fnt));m.push('<span class="mstrmojo-text mstrmojo-fn">'+Z+"</span>");j.push(" "+Z+" ");var q=p.es,f=q&&q.length||0;if(f){m.push('<span class="mstrmojo-elems">');j.push("[");var g=m.length,o="";for(var n=0;n<f;n++){m[g++]='<span class="mstrmojo-text mstrmojo-elem">';o=C(q[n].n);m[g++]=o;j.push(o);if(n<f-1){m[g++]=", ";j.push(", ");}m[g++]="</span>";}m[g++]="</span>";j.push("]");}else{m.push('<span class="mstrmojo-text mstrmojo-emptyelems">'+b+"</span>");j.push(b);}}return{html:m.join(""),text:j.join("")};};X[M.AQ]=function(v,x){var r=[],g=[];if(v&&v.a&&v.a.n){var c=G(v.a);r.push(c.html);g.push("{"+c.text+"}");if(v.fm&&v.fm.n){var y=C(v.fm.n);r.push('<span class="mstrmojo-text mstrmojo-form">'+y+"</span>");g.push("("+y+")");if(v.fn!=null){var j=C(S.fnName(v.et,v.fn,v.fnt,v.fm.dtp));r.push('<span class="mstrmojo-text mstrmojo-fn">'+j+"</span>");g.push(" "+j+" ");var k=S.fnCstCount(v.fn,v.fnt);if(v.et===M.AC){if(k>=1){if(v.a2&&v.a2.n){var o=C(v.a2.n);r.push('<span class="mstrmojo-text mstrmojo-attr2">'+o+"</span>");g.push("{"+o+"}");if(v.fm2&&v.fm2.n){var u=C(v.fm2.n);r.push('<span class="mstrmojo-text mstrmojo-form2">'+u+"</span>");g.push("("+u+")");}}if(k>1){r.push('<span class="mstrmojo-text mstrmojo-btwn">'+A.betweenText+"</span>");g.push(" "+A.betweenText+" ");if(v.a3&&v.a3.n){var a=C(v.a3.n);r.push('<span class="mstrmojo-text mstrmojo-attr3">'+a+"</span>");g.push("{"+a+"}");if(v.fm3&&v.fm3.n){var b=C(v.fm3.n);r.push('<span class="mstrmojo-text mstrmojo-form3">'+b+"</span>");g.push("("+b+")");}}}}}else{if(v.et===M.AL){var Z=v.cs||[],e=[];for(var p=0,q=Z.length;p<q;p++){e.push(Z[p].v);}var m=e.join(mstrConfig.listSep);r.push('<span class="mstrmojo-text mstrmojo-c1">'+m+"</span>");g.push("["+m+"]");}else{if(k>=1){var Z=v.cs,n=Z&&Z[0];var w=C(n&&n.p&&n.p.n||n&&n.v);r.push('<span class="mstrmojo-text mstrmojo-c1">'+w+"</span>");g.push(w);if(k>1){var l=Z&&Z[1];r.push('<span class="mstrmojo-text mstrmojo-btwn">'+A.betweenText+"</span>");g.push(" "+A.betweenText+" ");var f=C(l&&l.p&&l.p.n||l&&l.v);r.push('<span class="mstrmojo-text mstrmojo-c1">'+f+"</span>");g.push(f);}}}}}}}return{html:r.join(""),text:g.join("")};};X[M.AC]=X[M.AQ];X[M.AL]=X[M.AQ];X[M.MQ]=function(x,y){var w=[],m=[],q=x&&x.m,AA=q&&q.n;if(AA){var a=x.fnt,f=S.FNT.PER,v=S.FNT.RANK;AA=a===f?mstrmojo.desc(2787,"Percentage of ##").replace("##",AA):a===v?mstrmojo.desc(2788,"Rank of ##").replace("##",AA):AA;w.push('<span class="mstrmojo-text mstrmojo-metric">'+C(AA)+"</span>");m.push(C(AA));if(x.fn!=null){var n=C(S.fnName(x.et,x.fn,a,S.DTP.REAL));w.push('<span class="mstrmojo-text mstrmojo-fn">'+n+"</span>");m.push(" "+n+" ");var o=S.fnCstCount(x.fn,a);if(x.et==S.ET.MC){if(o>=1){var z=(x.m2&&x.m2.n)||(x.c2&&x.c2.v)||"?";w.push('<span class="mstrmojo-text mstrmojo-m2">'+C(z)+"</span>");m.push(C(z));if(o>1){w.push('<span class="mstrmojo-text mstrmojo-btwn">'+A.betweenText+"</span>");m.push(" "+A.betweenText+" ");var c=(x.m3&&x.m3.n)||(x.c3&&x.c3.v)||"?";w.push('<span class="mstrmojo-text mstrmojo-m3">'+C(c)+"</span>");m.push(C(c));}}}else{if(o>=1){var b=x.cs,r=b&&b[0];var Z=function(h){var d=h.v;if(x.fnt==f){if(d.replace){h.v=d.replace(/%$/,"");}d=h.v+"%";}return d;};var k=C(r&&r.p&&r.p.n||r&&r.v&&Z(r));w.push('<span class="mstrmojo-text mstrmojo-c1">'+k+"</span>");m.push(k);if(o>1){var p=b&&b[1],l=C(p&&p.p&&p.p.n||p&&p.v&&Z(p));w.push('<span class="mstrmojo-text mstrmojo-btwn">'+A.betweenText+"</span>");m.push(" "+A.betweenText+" ");w.push('<span class="mstrmojo-text mstrmojo-c2">'+l+"</span>");m.push(l);}}}var t=x.dmy&&x.dmy.uts,j=t&&t.length;if(j){w.push('<span class="mstrmojo-text mstrmojo-at">'+A.atText+"</span>");m.push(" "+A.atText+" ");w.push('<span class="mstrmojo-dmy">');for(var g=0;g<j;g++){var e=t[g];w.push('<span class="mstrmojo-text mstrmojo-dmyunit">');w.push(C(e.utgt?e.utgt.n:e.n));m.push(C(e.utgt?e.utgt.n:e.n));if(g<j-1){w.push(",");m.push(",");}w.push("</span>");}w.push("</span>");}}}return{html:w.join(""),text:m.join("")};};X[M.MC]=X[M.MQ];X[M.ANDOR]=function(k,b){var g=[],f=[],a=(b&&b.elemsEmpty)||"("+mstrmojo.desc(2210,"Empty")+")",c=R.valarray(S.findTargets(k,"did"))[0],e=true;function l(d){if(!e){g.push('<span class="spliter"></span>');f.push(", ");}e=false;if(d){f.push(mstrmojo.desc(12298,"NOT")+" ");}}if(!c){return{html:'<span class="mstrmojo-text mstrmojo-emptyelems">'+a+"</span>",text:a};}var Z=G(c,"andor");g.push(Z.html);f.push("{"+Z.text+"}");g.push("<span>:</span>");f.push(" : ");g.push('<span class="mstrmojo-elems">');f.push("[");L.forEach(k.nds,function j(m){if(!m){return ;}var d=V(m),t=m.fm,p=m.cs,n,q,h,o;switch(m.et){case M.ANDOR:L.forEach(m.nds,j);break;case M.AE:switch(m.fn){case U.IN_LIST:case U.NOT_IN_LIST:L.forEach(m.es,function(u){l(d);n=d?" not":"";q=C(u.n);g.push('<span class="mstrmojo-text mstrmojo-elem single'+n+'">'+q+"</span>");f.push(q);});break;case U.DESCENDANT:var r=(m.es||[]).slice();if(r.length===0){r.push({n:a});}L.forEach(r,function(v){l(d);n=d?" not":"";q=C(v.n);if(p&&p[0]){var u;o=p[0].v;if(isNaN(o)){h=o.substr(o.indexOf(";")+1);}else{h=mstrmojo.desc(493,"Level")+" "+(parseInt(o,10)+1);}u=h+" "+mstrmojo.desc(12853,"of")+" "+q;g.push('<span class="mstrmojo-text mstrmojo-elem level'+n+'">');g.push(u);f.push(u);}else{g.push('<span class="mstrmojo-text mstrmojo-elem descendant'+n+'">');g.push(C(v.n));f.push(q);}g.push("</span>");});break;}break;case M.AQ:L.forEach(m.cs,function(u){l(d);n=d?" not":"";o=u.v;h=(t&&t.n)?C(t.n+" "+o):"";if(t&&t.n==="LEVEL_NUMBER"){n+=" level";if(isNaN(o)){h=o.substr(o.indexOf(";")+1);}else{h=mstrmojo.desc(493,"Level")+" "+(parseInt(o,10)+1);}}g.push('<span class="mstrmojo-text mstrmojo-elem constant'+n+'">'+h+"</span>");f.push(h);});break;}});g.push("</span>");f.push("]");return{html:g.join(""),text:f.join("")};};function O(e,d){var b=X[e&&e.et]||X["*"],a=I(e),c=b&&b(e,d),Z=d&&d.emptyText||A.emptyText;return{html:a&&a.html+((c&&c.html)||('<span class="mstrmojo-text empty-cond">'+Z+"</span>")),text:a&&a.text+((c&&c.text)||Z)};}function F(Z){return O(Z).text;}function J(d,c,a){if(!d){return null;}var n=d.et,k=d.fn,Z=d.nds;if(n===M.ANDOR){var o=a?"bold":"";splitter=k===U.AND?A[o+"andText"]:(k===U.OR?A[o+"orText"]:"");Z=[].concat(Z);if(Z.length<1){return null;}var j=[],p;L.forEach(Z,function(q){p=J(q,false,a);if(p){j.push(p);}});var m,l=j.length;if(l<1){return null;}else{if(l===1){m=j[0];}else{m=j.join(" "+splitter+" ");}}m=c||d.not?m:"("+m+")";return d.not?A.notText+" "+m:m;}else{if(n===M.RLS){var h=d.dmy&&d.dmy.uts||[],f=[],e;L.forEach(h,function(q){f.push("{"+q.n+"}");});e=f.join(", ");var b=d.nds&&d.nds[0],g=J(b,false,a);if(g){return"("+e+" "+A.whereText.replace(/\(##\)/g,"").replace(/'##'/g,"")+g+")";}return null;}else{return F(d);}}}function B(Z){if(mstrmojo.fe.FilterUtils.isExprEmpty(Z)){return{et:14,fn:19};}else{((Z&&Z.nds)||[]).forEach(function(b,a){Z.nds[a]=B(b);});return Z;}}mstrmojo.fe.FilterUtils=mstrmojo.provide("mstrmojo.fe.FilterUtils",{getExprXml:function(f){var a="<exp>",Z="</exp>",d={a:true,a2:true,a3:true,agg:true,cc:true,ce:true,cgp:true,cs:true,conid:true,desc:true,did:true,attId:true,dmt:true,dmy:true,dtp:true,es:true,et:true,expr:true,f:true,flat:true,flt:true,fm:true,fm2:true,fm3:true,fn:true,fnt:true,fres:true,gb:true,isp:true,items:true,m:true,m2:true,m3:true,n:true,nds:true,not:true,pf:true,p:true,r:true,rps:true,st:true,t:true,utgt:true,utp:true,uts:true,v:true,xml:true,relation:true,applySubExpr:true,useSchema:true,guide:true,rsTp:true,joTp:true,paTp:true,erTp:true,exp:true,joAttrs:true,ph:true,idx:true,idc:true,idcsi:true,ucfg:true,node:true},c={getArrItemName:function(g){return g.substr(0,g.length-1);},isSerializable:function(r,p,o){if(r==="xml"){var j=p[o].xml;return{att:'hasXML = "-1"',child:j};}else{if(mstrmojo.array.indexOf(["header_format","grid_format","child_header_format","child_grid_format"],r)>-1){var t=p[o][r];if(!t){return{};}var l="<"+r+">";for(var q in t){l+="<prs n='"+q+"'>";var k=t[q];for(var g in k){var n=k[g];l+="<pr n='"+g+"' v='"+(n==="pru"?"":n)+"'";l+=n==="pru"?' pru="1"':"";l+="/>";}l+="</prs>";}l+="</"+r+">";return{child:l};}else{if(r==="cs"){var h=p[o],m=p[o][r];if(h&&h.fnt&&h.fnt==S.FNT.PER&&m){if(m[0]){m[0].v+="%";}if(m[1]){m[1].v+="%";}}return true;}else{if(r==="c2"||r==="c3"){var h=p[o];if(h&&h.et==S.ET.MC&&(h.fn==S.FN.BETWEEN||h.fn==S.FN.NOT_BETWEEN)){return true;}else{return false;}}}}}return(d[r])?true:false;},skipNull:true},b=B(f);if(!b||b.et!=M.ANDOR||b.fn===U.NOT||b.not){b={et:M.ANDOR,fn:S.FN.AND,nds:b?[b]:[]};}var e=D.json2xml("nd",[{},b],c);return a+e+Z;},isExprEmpty:function(Z){return(!Z||(Z.et===M.ANDOR&&(Z.nds||[]).length<1));},getExprConditionNodeHtml:function E(Z){return O(Z).html;},getExprConditionNodeText:function F(Z){return O(Z).text;},getExprNodeHtmlAndText:function P(a,Z){return O(a,Z);},getExprText:function W(a,Z){return J(a,true,Z);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.expr","mstrmojo.elementHelper","mstrmojo.mstr.EnumNodeProperties","mstrmojo.EnumSelectionType");var j=mstrmojo.array,T=mstrmojo.hash,Q=mstrmojo.expr,e=mstrmojo.elementHelper,Y=Q.ET,E=Q.FN,l=Q.DTP,C=mstrmojo.mstr.EnumNodeProperties,b=mstrmojo.EnumSelectionType;var AC=0,F=1,M=2,K=3,c=4,t=5;var m=0,AD="u;",X="LEVEL_NUMBER",W=false,J=7;function AB(AF){return AF.t===47&&AF.st===12033;}function S(AF,AG){if(AF&&AG&&AG.t===J){return AF.parent===AG&&AF.lv===AG.lv;}return false;}function k(AF){if(AF&&AF.t===J){return j.filter(AF.children,function(AG){return AG.lv===AF.lv;});}return[];}function AA(AF){return !!AF.not||AF.fn===E.NOT_IN_LIST||AF.fn===E.NOT_EQUAL;}function x(AF){return T.copyProps(["did","n","t","st"],AF);}function P(AI,AF){var AH=AB(AF),AJ=AH?AI.v:e.terseLong2OldShort(AI.v),AG={v:AJ.replace(/\\:/g,"*:"),n:AI.n};if(AH){AG.t=AI.t;AG.conid=AF.did;}return AG;}function R(AI,AG){if(parseInt(AI,10)>=0){var AH=AG.lvfs||[],AF=AH[AI]&&AH[AI].lvfn||"";return{v:AF?AI+";"+AF:AI,dtp:AF?l.CHAR:l.INTEGER};}return null;}function w(AI,AK,AH){var AF=e.getIdPresentation(AI),AG=AB(AH);AI=AI.replace(/\*:/g,"\\:");switch(AK){case"old":case"oldLong":switch(AF){case"old":case"oldLong":return AI;case"terse":case"terseLong":switch(AI[0]){case"V":return AI.substring(1).split(";")[0];case"n":return"HF:"+ +e.terseLong2OldShort(AI)+":47";default:return e.terseLong2OldShort(AI);}}break;case"terse":case"terseLong":switch(AF){case"old":return AG?("V"+AI+";"+AH.did):e.oldShort2terseLong(AI,"h");case"oldLong":switch(AI.substring(0,2)){case"HF":var AJ=AI.substr(3).split(":");if(AJ.length>3){AJ.pop();}return e.oldShort2terseLong(AJ.join(":"),"n");default:return AI;}case"terse":case"terseLong":return AI;}break;default:return AI;}}function r(AF){if(isNaN(AF)&&typeof AF==="string"){return parseInt(AF.split(";")[0],10);}return parseInt(AF,10);}function n(AF){return !AF||AF.lv>0&&!AF.parent;}function Z(AF,AN,AM){var AK=AM.item,AH=AM.ancestorMap,AL=AM.descendantMap,AG=this.getItemByValue(AF.itemValue),AJ=this.getItemByValue(AN.itemValue),AI=function(AO,AP){if(AK&&AK===AO&&AL){return AL[AP.v];}if(AK&&AK===AP&&AH){return AH[AO.v];}while(AP){if(AO===AP){return true;}AP=AP.parent;}return false;};switch(AF.func){case b.ALL:return AN.func===b.ALL?AC:K;case b.ELEMENT:switch(AN.func){case b.ALL:return M;case b.ELEMENT:return AG===AJ?AC:S(AG,AJ)?M:S(AJ,AG)?K:t;case b.BRANCH:return AI(AJ,AG)?M:S(AJ,AG)?c:n(AG)?F:t;case b.LEVEL:return AG.lv===AN.level?M:t;case b.BRANCH_LEVEL:return AG.lv!==AN.level?t:n(AG)?F:AI(AJ,AG)?M:t;}break;case b.BRANCH:switch(AN.func){case b.ALL:return M;case b.ELEMENT:return AI(AG,AJ)?K:S(AG,AJ)?c:n(AJ)?F:t;case b.BRANCH:return AG===AJ?AC:(n(AG)||n(AJ))?F:AI(AJ,AG)?M:AI(AG,AJ)?K:t;case b.LEVEL:return AG.lv<=AN.level?c:t;case b.BRANCH_LEVEL:return AG===AJ?K:(n(AG)||n(AJ))?F:AI(AG,AJ)?K:(AI(AJ,AG)&&AN.level>=AG.lv)?c:t;}break;case b.LEVEL:switch(AN.func){case b.ALL:return M;case b.ELEMENT:return AJ.lv===AF.level?K:t;case b.BRANCH:return AJ.lv<=AF.level?c:t;case b.LEVEL:return AF.level===AN.level?AC:t;case b.BRANCH_LEVEL:return AF.level===AN.level?K:t;}break;case b.BRANCH_LEVEL:switch(AN.func){case b.ALL:return M;case b.ELEMENT:return AJ.lv!==AF.level?t:n(AJ)?F:AI(AG,AJ)?K:t;case b.BRANCH:return AG===AJ?M:(n(AG)||n(AJ))?F:AI(AJ,AG)?M:(AI(AG,AJ)&&AF.level>=AJ.lv)?c:t;case b.LEVEL:return AF.level===AN.level?M:t;case b.BRANCH_LEVEL:return AF.level!==AN.level?t:AG===AJ?AC:(n(AG)||n(AJ))?F:AI(AJ,AG)?M:AI(AG,AJ)?K:t;}break;}return F;}function D(AG,AK,AH,AL,AF){var AJ=(AG.fs||[]).filter(function(AM){return(AM.n||AM.fnm)===X;})[0],AI=j.ensureArray(AH).map(function(AM){return P(AM,AG);});switch(AK){case b.ELEMENT:if(AI.length>0){return{et:Y.AE,fn:AF?E.NOT_IN_LIST:E.IN_LIST,a:x(AG),es:AI};}break;case b.BRANCH:if(AI.length>0){return{et:Y.AE,fn:E.DESCENDANT,not:AF,a:x(AG),es:AI};}break;case b.LEVEL:if(AJ&&parseInt(AL,10)>=0){return{et:Y.AQ,fn:E.EQUAL,not:AF,a:x(AG),fm:{did:AJ.did||AJ.fid,n:X,dtp:Q.mapBaseFormTypeToDataType(AJ.bftp)},cs:[R(AL,AG)]};}break;case b.BRANCH_LEVEL:if(AI.length>0&&parseInt(AL,10)>=0){return{et:Y.AE,fn:E.DESCENDANT,not:AF,a:x(AG),es:AI,cs:[R(AL,AG),{v:18,dtp:l.INTEGER}]};}break;}return null;}function B(){var AF={};this.selectionList.forEach(function(AH,AG){if(AH.func===b.ELEMENT){AF[AH.itemValue]=AG;var AI=this.getItemByValue(AH.itemValue);j.forEach(k(AI),function(AJ){AF[AJ.v]=AG;});}},this);return AF;}function u(){var AF={};this.selectionList.forEach(function(AH,AG){if(AH.func===b.BRANCH){AF[AH.itemValue]=AG;}});return AF;}function A(){var AF={};this.selectionList.forEach(function(AH,AG){if(AH.func===b.LEVEL){AF[AH.level]=AG;}});return AF;}function h(){var AF={};this.selectionList.forEach(function(AI,AG){if(AI.func===b.BRANCH_LEVEL){var AJ=AI.itemValue,AK=AI.level,AH=AF[AJ];if(!AH){AH=AF[AJ]={};}AH[AK]=AG;}});return AF;}function V(AH){var AG=u.call(this),AF=m;while(AH&&AH.v){AF=Math.max(AF,AG[AH.v]||m);AH=AH.parent;}return AF;}function p(AH,AJ){var AF=h.call(this),AI=A.call(this),AG=AJ?m:V.call(this,AH),AL=AH&&AH.lv||0,AK={};if(!AJ){T.forEach(AI,function(AN,AM){if(AM>=AL&&AN>AG){AK[AM]=AN;}});}while(AH&&AH.v){T.forEach(AF[AH.v],function(AN,AM){if(AM>=AL&&AN>AG){AK[AM]=Math.max(AN,AK[AM]||AG);}});AH=AH.parent;}return AK;}mstrmojo.ui._HierarchyListSelection=mstrmojo.provide("mstrmojo.ui._HierarchyListSelection",{_mixinName:"mstrmojo.ui._HierarchyListSelection",init:function v(AF){this._super(AF);this.clearSelections();},getAllSelection:function I(){return !this.selectionList[m].isNot;},setAllSelection:function f(AF){this.selectionList[m].isNot=!AF;},clearSelections:function g(){this.selectionList=[{func:b.ALL,isNot:!W}];return this.selectionList;},addSelection:function U(AF){var AJ=this.selectionList,AH=this.getItemByValue(AF.itemValue),AG={item:AH,ancestorMap:AH&&this.getItemAncestorMap(AH),descendantMap:AH&&this.getItemDescendantMap(AH)},AI=true;if(!AH&&(AF.func===b.ELEMENT||AF.func===b.BRANCH||AF.func===b.BRANCH_LEVEL)){return ;}AJ=this.selectionList=AJ.filter(function(AK){var AM=Z.call(this,AK,AF,AG),AL=AK.isNot===AF.isNot;if(AM===K||AM===c&&!AL){AI=!AL;}return !(AM===AC||AM===M);},this);if(AI){AJ.push(AF);}},updateSiblingItemSelection:function o(AG){var AI=this.selectionList,AF=B.call(this),AH=u.call(this);j.forEach(AG,function(AN){var AK=AN.parent,AJ=AK?V.call(this,AK):m,AL=AK?p.call(this,AK):A.call(this),AM=Math.max(AH[AN.v]||m,AJ),AO=Math.max(AF[AN.v]||m,AM,AL[AN.lv]||m);AN.isSelected=!AI[AO].isNot;AN.isBranchSelected=!AI[AM].isNot;},this);},updateItemSelection:function N(AG){var AO=this.selectionList,AH=B.call(this),AP=u.call(this),AK=A.call(this),AL=h.call(this),AI=AG?[AG]:this.getRootItems(),AJ=AG?[]:this.getItems().filter(function(AQ){return AQ&&n(AQ);}),AF=AG?V.call(this,AG):m,AN=AG?p.call(this,AG,true):{};(AI.concat(AJ)).forEach(function AM(AU){var AS=AF,AR=T.copy(AN);AF=Math.max(AF,AP[AU.v]||m);T.forEach(AL[AU.v],function(AX,AW){AN[AW]=Math.max(AX,AN[AW]||m);});var AV=Math.max(AH[AU.v]||m,AK[AU.lv]||m,AF,AN[AU.lv]||m);AU.isSelected=!AO[AV].isNot;AU.isBranchSelected=!AO[AF].isNot;j.forEach(AU.children,function(AW){AM.call(this,AW);},this);var AT=k(AU);if(AT.length>0){var AQ=j.find(AT,"isSelected",true)>=0;if(AU.isSelected!==AQ){this.addSelection({func:b.ELEMENT,itemValue:AU.v,isNot:!AQ});AU.isSelected=AQ;}}AF=AS;AN=AR;},this);},updateDescendantsStatus:function AE(){var AK=this.selectionList,AF=this.getMaxLevel(),AI=u.call(this),AG=h.call(this),AH=m,AL=A.call(this);this.getRootItems().forEach(function AJ(AV){var AN=AV.children||[],AR=AV.displayChildren||[],AT=AH,AU=T.copy(AL),AO=false;AH=Math.max(AH,AI[AV.v]||m);T.forEach(AG[AV.v],function(AX,AW){AL[AW]=Math.max(AX,AL[AW]||m);});AN.forEach(function(AW){if(AJ(AW)||!AW.hid&&AW.isSelected){AO=true;}});if(AV.hcd&&AR.length===0){var AP=!AK[AH].isNot,AS,AM;for(var AQ=AV.lv+1;AQ<=AF;AQ++){AS=AL[AQ]||m;AM=AS>AH&&!AK[AS].isNot;if(AM||AP&&AS<=AH){AO=true;break;}}}AV.hasDsctSelected=AO;AH=AT;AL=AU;return AO;});},getMaxLevel:function a(){var AF=0;this.getItems().forEach(function(AG){var AH=AG.lv;if(AH>AF&&!AG.hid){AF=AH;}});this.selectionList.forEach(function(AG){if(AG.func===b.LEVEL||AG.func===b.BRANCH_LEVEL){AF=Math.max(AF,AG.level);}});return AF;},getLevelSelection:function G(AF){var AJ=this.selectionList,AH=AF?p.call(this,AF):A.call(this),AG=AF?AF.isBranchSelected:this.getAllSelection(),AI={};T.forEach(AH,function(AM,AL){var AK=!AJ[AM].isNot;if(AK!==AG){AI[AL]=AK;}});return T.copy({allLevel:AG,isLevelSelected:function(AK){return this[AK]||this.allLevel&&this[AK]!==false;}},AI);},buildSelectionExprJSON:function d(AH){var AJ=this.getAllSelection(),AG=[],AK=null,AI={selected:[],unselected:[]},AF=function(AL,AM){if(!T.isEmpty(AM)&&(AL.length>0||AJ===AA(AM))){AL.push(AM);}};this.selectionList.forEach(function(AM){var AO=AM.func,AL=AM.isNot,AQ=AM.level,AP=AM.itemValue,AN=AP?this.getItemByValue(AP):null;if((AN||{}).fetcher){return ;}if(AM.func===b.ELEMENT&&!n(AN)){AI[AL?"unselected":"selected"].push(AN);}else{if(AM.func!==b.ALL){AF(AG,D(AH,AO,AN,AQ,AL));}}},this);AF(AG,D(AH,b.ELEMENT,AI.selected));AF(AG,D(AH,b.ELEMENT,AI.unselected,null,true));if(AG.length>0){AK=AG[0];AG.forEach(function(AO,AL,AN){var AM=AA(AO);if(AL>0){if(AM===AA(AN[AL-1])&&AK.nds){AK.nds.push(AO);}else{AK={et:Y.ANDOR,fn:AM?E.AND:E.OR,nds:[AK,AO]};}}});}if(AK){if(AK.et===Y.ANDOR){AK.node=C.CONDITION;}else{AK={et:Y.ANDOR,fn:E.AND,nds:[AK],node:C.CONDITION};}}return AK;},setSelectionByExprJSON:function q(AH){var AI=this.clearSelections(),AG=false,AF=this.getItems(),AK=e.getIdPresentation(AF[0]&&AF[0].v),AJ=function(AM,AN){if(T.isEmpty(AM)){return ;}if(AM.et===Y.ANDOR){(AM.nds||[]).forEach(function(AO){AJ.call(this,AO,AN);},this);}else{var AL=AA(AM);if(!AG){AG=true;this.setAllSelection(AL);}if(AM.et===Y.AQ&&AM.fm&&AM.fm.n===X){(AM.cs||[]).forEach(function(AP){var AO=r(AP.v);if(AO>=0){AN.push({func:b.LEVEL,level:AO,isNot:AL});}});}if(AM.et===Y.AE){(AM.es||[]).forEach(function(AO){var AP=w(AO.v,AK,AM.a),AQ=r(AM.cs&&AM.cs[0].v);if(!this.getItemByValue(AP)){this.addItems([T.copy({v:AP,dhid:true},T.clone(AO))],true);}if(AM.fn===E.DESCENDANT){if(AQ>=0){AN.push({func:b.BRANCH_LEVEL,itemValue:AP,level:AQ,isNot:AL});}else{AN.push({func:b.BRANCH,itemValue:AP,isNot:AL});}}else{AN.push({func:b.ELEMENT,itemValue:AP,isNot:AL});}},this);}}};AJ.call(this,AH,AI);this.updateItemSelection();},setSelectionByList:function L(AG,AF){var AH=[],AI=false;j.forEach(AG,function(AJ){var AK=AJ.v;if(AK===AD){AI=true;return false;}if(!this.getItemByValue(AK)){this.addItems([AJ],true);}AH.push({func:b.ELEMENT,itemValue:AK,isNot:!AF});},this);this.clearSelections();if(!AI){this.setAllSelection(!AF);this.selectionList=this.selectionList.concat(AH);}this.updateItemSelection();},onSelectionChange:function O(AG,AF,AH,AI){if(AG===b.ALL){this.clearSelections();this.setAllSelection(AF);}else{this.addSelection({func:AG,itemValue:AH&&AH.v,level:AI,isNot:!AF});}if(this.postSelectionChange){this.postSelectionChange();}},postAddItems:function H(AF){this.updateItemSelection();},postAddSiblingItems:function z(AG,AF){this.updateSiblingItemSelection(AG);},postAddBranchItems:function y(AG,AF){this.updateItemSelection(AF);}});}());(function(){mstrmojo.requiresCls("mstrmojo.StringBuffer","mstrmojo.hash","mstrmojo.array","mstrmojo.dom","mstrmojo._IsGraphDataService","mstrmojo.func","mstrmojo._ImageHelper","mstrmojo.fe.FilterUtils","mstrmojo.rw.model.RetrievalKeysConfig","mstrmojo.rw.model.UpdateKeysConfig");var d=mstrmojo.hash,B=d.copy,U=mstrmojo.array,AW=mstrmojo.dom,x=mstrmojo.func,AM=[mstrmojo.desc(8445,"Loading")],AD=mstrmojo.fe.FilterUtils.getExprXml,Ap=mstrmojo.array.ensureArray,P=0;function W(BT){BT=BT||{};BT.preserveUndo=true;return BT;}function Am(BX,BY,BT){if(this.blockRequests){throw ("The data service is currently ignoring all requests to the server.");}var BU=P++,BW=this.getTxUpdates(BU);BT=BT||{};BT.src=Am.caller.name;if(!mstrmojo.string.isEmpty(BW)){BX.updateChanges=BW;}BX.zoomFactor=this.model.getZoomFactor();var BV=this.cmdMgr;if(!BT.preserveUndo&&BV){BV.onSubmitUpdates();}mstrApp.serverRequest(BX,this.wrapCallback(BY,BU,BT.preserveStid),BT);}function N(BV,BU,BT){d.copy({unitType:BU.defn&&BU.defn.t,unitKey:BU.k},BV);if(BT.layoutKey){d.copy({toKey:BT.layoutKey,analysisSectionType:BT.analysisSectionType},BV);}else{d.copy({toKey:BT.parentKey},BV);}return BV;}function As(BU){BU=BU||{};if(mstrApp.optimizeFitToPage){var BT=window.mstrMobileApp?this.model.controller.getContentDimensions():mstrApp.getContentDimensions();if(BT){BU.styleName="RWDocumentMobileStyle";BU.availableWidth=BT.w;BU.availableHeight=BT.h;}else{BU.innerWidth=mstrmojo.dom.windowDim().w;BU.innerHeight=mstrmojo.dom.windowDim().h;}}return BU;}function BO(BU){var BT=BU&&BU.style,BV=BT&&BT.params;return BV&&BV.treesToRender;}function C(BT,BU){return{act:"moveUnit",toKey:BT,unitType:BU};}function Ar(BT){return BT.split("\u001E")[2];}function M(BU,BY){if(BU!==mstrmojo.DocDataService.UNDO_KEY){return BU;}if(!this.undoSectionKey){var BX=this.undoSectionKey=this.model.getNextKey(),BV=this.undoFGKey=this.model.getNextKey();BY.addActions({act:"addUndoSection",cbKey:this.cbKey,nodeKey:BX,fgKey:BV});var BW=this;BY.addCallbacks({failure:function BT(){delete BW.undoSectionKey;}});}return this.undoSectionKey;}function Al(BV,BU){var BT={dsid:BV.dsid,formula:BV.tokenStreamXML,isTokenStream:!mstrmojo.string.isEmpty(BV.tokenStreamXML),name:BV.alias,afb:BV.afb,sfb:BV.sfb};if(BU){BT.Ids=["$GUID_135"];}return this.getAddDerivedMetricToDatasetAction(BT);}function L(BU){var BT="USE_DEFAULT_INDICATOR";BU=BU||{};BU.mptso=BU.mptso||{pru:true};BU.mptsim=BU.mptsim||{pru:true};BU.mptfms=BU.mptfms||"";return{MDXPassThrough:{SolveOrder:BU.mptso.pru?BT:BU.mptso.v,ScopeIsolationMode:BU.mptsim.pru?BT:BU.mptsim.v,FormatString:BU.mptfms}};}function AI(BT,BU){return{act:"formatDerivedMetric",dsid:BT.dsid||"",mid:(BU||!BT.did)?"$GUID_135":BT.did,format:L(BT.mptf),};}function AL(BW,BZ,BU,Ba,BT,BV){var BX=[this.getNodeKeyFromKeyContext(BZ)];if(!BV){BX=Ap(Ba).concat(BX);}var BY={act:BW,keyContext:BZ,tgtKey:BU,partialRetrieval:{nodes:BX}};if(!BT){BY.partialUpdate={selectors:[Ar(BZ)]};}return BY;}function m(BV){var BX=false;if(BV===1||BV===2){var BU=this.model,BT=BU.controller,BY=BT.getRequiredZoomFactor&&BT.getRequiredZoomFactor(BV),BW=BU.getZoomFactor();if(isNaN(BY)||parseInt(Math.abs((BY-BW)*100),10)<=2){BX=false;}else{BX=true;}}return BX;}mstrmojo.DocDataService=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._IsGraphDataService,mstrmojo._ImageHelper],{scriptClass:"mstrmojo.DocDataService",defaultStyle:{params:{treesToRender:2}},cmdMgr:null,stid:-1,blockRequests:false,clientAuto:false,init:function Aj(BT){this._super(BT);this.cmdMgr=this.model.controller&&this.model.controller.cmdMgr;},wrapCallback:function Ac(BY,BV,BU){var BW=this;return x.wrapMethods({success:function BX(BZ){if(BZ){BW.model.bs=BW.rwb=BZ.bs||BW.rwb;BW.msgId=BZ.mid||BW.msgId;BW.cbKey=BZ.cbKey||BW.cbKey;if(BZ.stid!==undefined&&!BU){BW.stid=BZ.stid;}if(BZ.clientAuto!==undefined){BW.clientAuto=BZ.clientAuto;}if(mstrApp.parseSecondaryDataProviders){mstrApp.parseSecondaryDataProviders(BZ);}}BW.clearTxUpdates(BV);},failure:function BT(){BW.resetTxUpdates(BV);}},BY);},getNodeKeyFromKeyContext:function Y(BT){return BT.split("\u001E")[1];},refresh:function Az(BV,BW){var BU=!!BV.useRefreshProgress,BT=BU?[mstrmojo.desc(10078,"Refreshing data. Please wait.")]:AM;delete BV.useRefreshProgress;BV=As.call(this,BV);Am.call(this,B(BV,{taskId:"docRefresh",rwb:this.rwb,rePrompt:false,fresh:false,regenerate:false,displayNoResErr:true,compress:1}),BW,{showProgress:true,hideProgress:true,progressStateText:BT,useRefreshProgress:BU});},saveRW:function A3(BT,BU){Am.call(this,B(BT,{taskId:"saveRW",msgID:this.msgId}),BU);},saveThresholds:function h(BU,BV,BT){Am.call(this,B(BU,{taskId:"saveThresholds"}),BV,BT);},getThresholds:function BH(BU,BV,BT){Am.call(this,B(BU,{taskId:"getThresholds"}),BV,BT);},browseElements:function AH(BU,BV,BT){Am.call(this,B(BU,{taskId:"browseElements",styleName:"MojoAttributeStyle",blockBegin:1,blockCount:mstrApp.elementsBlockCount||30}),BV,BT);},removeUnit:function X(BU,BV){var BT=B(BU,{act:"removeUnit"});this.submitTemplateUpdates(BT.nodeKey,BT,BV);},removeLayout:function AQ(BU,BT,BV){this.submitUpdates({act:"removeLayout",unitKey:BU,isCurrent:BT},BV);},moveLayout:function v(BV,BT,BU){this.submitUpdates(this.getMoveNodeAction(BV,BT,BU),mstrmojo.DocDataService.EMPTY_CALLBACK,mstrmojo.DocDataService.SUPPRESS_DATA);},getMacroCopyNodeAction:function An(BU,BT,BW){var BV={act:"macroCopyUnit",newKey:BW,partialRetrieval:this.newRetrievalKeysConfig().addNode(BW)};N(BV,BU,BT);return BV;},getMacroMoveNodeAction:function AC(BU,BT){var BV={act:"macroMoveUnit",partialRetrieval:this.newRetrievalKeysConfig().addNode(BU.k)};N(BV,BU,BT);return BV;},getMoveNodeAction:function q(BX,BT,BU){var BW=BX.defn,BV=BW?BW.t:mstrmojo.EnumRWUnitType.LAYOUT;return this.getMoveNodeActionUsingKey(BX.k,BV,BT,BU);},getMoveNodeActionUsingKey:function A6(BX,BV,BT,BU){var BW=C(BT,BV);BW.unitKey=BX;if(BU!==undefined){BW.index=BU;}return BW;},getMoveControlAction:function c(BW,BU,BT){var BV=C(BU,mstrmojo.EnumRWUnitType.SELECTOR);BV.keyContext=BW;if(BT){BV.partialRetrieval={nodes:Ap(BT)};}return BV;},addMoveControlAction:function I(BW,BV,BU,BT){BW.addActions(this.getMoveControlAction(BV,M.call(this,BU,BW),BT));},getSetCtrlSourceAction:function AJ(BU,BW,BT,BV){return{act:"setControlSource",keyContext:BU,unitId:BW,unitType:BT,removeCGB:BV||[],partialRetrieval:this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(BU)),partialUpdate:{selectors:[Ar(BU)]}};},getRemoveCtrlTargetAction:function G(BV,BU,BW,BT){return AL.call(this,"removeControlTarget",BV,BU,BW,BT);},getClearCtrlTargetAction:function BD(BT){return{act:"clearControlTarget",keyContext:BT};},getAddCtrlTargetAction:function Ax(BX,BU,BY,BZ,BT,BV){var BW=AL.call(this,"addControlTarget",BX,BU,BY,BT,BV);BW.isUC=!BZ;return BW;},getAddCtrlTargetDatasetAction:function BA(BU,BT){return{act:"addControlTargetDataset",keyContext:BU,tgtDid:BT};},getRemoveCtrlTargetDatasetAction:function g(BU,BT){return{act:"removeControlTargetDataset",keyContext:BU,tgtDid:BT};},getClearCtrlTargetDatasetAction:function AP(BT){return{act:"clearControlTargetDataset",keyContext:BT};},getChangeControlElementSource:function BN(BU,BT){return{act:"changeControlElementSource",keyContext:BU,ctlElementSrc:BT};},getSetAttributesJoinTypeAction:function Ag(BT,BU){return{act:"setAttributesJoinType",nodeKey:BT,value:BU,partialRetrieval:this.newRetrievalKeysConfig().addNode(BT)};},getSetMetricJoinTypeAction:function AY(BV,BX,BT,BU,BW){return{act:"setMetricJoinType",nodeKey:BV,unitId:BX,dataType:BT,unitType:BU,value:BW,partialRetrieval:this.newRetrievalKeysConfig().addNode(BV)};},getTxUpdates:function AV(BU){var BT=this.model;return BT&&BT.getTransactionUpdates&&BT.getTransactionUpdates(BU);},clearTxUpdates:function Ak(BU){var BT=this.model;if(BT&&BT.clearTransactionUpdates){BT.clearTransactionUpdates(BU);}},resetTxUpdates:function D(BU){var BT=this.model;if(BT&&BT.resetTransactionUpdates){BT.resetTransactionUpdates(BU);}},loadDocLayout:function K(BX,BZ,BY){var BW={act:"setCurrentLayout",unitKey:BX.layoutKey,disablePU:true,panelUnitKey:BX.panelKey},BV={style:{params:{treesToRender:3}},params:As.call(this,BX)},BT=this.model,BU=!!BY;if(!BY){BY=BT.getDataService().newUpdateWithoutCmd();}if(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()){BT.applyBufferedSelections(BY);}BY.add(BW,BZ,BV);if(!BU){this.submitUpdates(BW,BZ,BV);}},checkMissingCredentials:function y(BT,BU){Am.call(this,B(BT,{taskId:"checkMissingCredentials"}),BU);},setCurrentDocLayout:function Au(BV,BZ,BY){var BX={act:"setCurrentLayout",unitKey:BV},BW={config:{silent:(BZ===null)&&(!!BY&&Object.keys(BY.callback||{}).length===0)}},BT=this.model,BU=!!BY;BZ=BZ||null;if(!BY){BY=BT.getDataService().newUpdateWithoutCmd();}if(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()){BT.applyBufferedSelections(BY);}BY.add(BX,BZ,BW);if(!BU){BY.submit();}if(window.mstrMobileApp!==undefined){mstrMobileApp.clearWebViewCache(false);}},fetchDocPage:function BE(BT,BU){Am.call(this,{taskId:"fetchDocPage",rwb:this.rwb,pos:BT},BU);},requestPanelChangeDeferred:function BM(BZ,BY,BT,BU,BW,BX){var BV={act:"setCurrentPanel",unitKey:BY};if(BT){BV.partialRetrieval={nodes:BT.split(",")};}BZ.add(BV,BX,{config:{showProgress:BW,hideProgress:BW,progressStateText:AM},style:{params:{treesToRender:BU?3:0}}});},getGraphSelectionAction:function E(BX,BT,BV,Ba,BZ,BU){var BY=this.model.getCurrentLayoutDef(),Bb=(BY&&BY.dzf)||1,BW={act:"graphSelector",nodeKey:BX,sliceID:BV,x:Math.round(Ba/Bb),y:Math.round(BZ/Bb)};if(BU){BW.usePartialUpdate="0";}else{BW.partialUpdate={selectors:BT.split("\u001E")};}return BW;},getSelectorElementsAction:function r(BV){var BU={act:"setSelectorElements",keyContext:BV.ck,ctlKey:BV.ctlKey,elemList:mstrmojo.string.decodeHtmlString(BV.eid),isVisualization:!!BV.isDocVis},BT=BV.include;if(BT!==undefined){BU.include=!!BT;}if(BV.tks){BU.tks=BV.tks;}if(BV.disablePU){BU.usePartialUpdate="0";}else{if(BV.ignoreTargetData){BU.partialRetrieval=this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(BV.ck));}else{BU.partialUpdate={selectors:BV.ctlKey.split("\u001F")};}}return BU;},getUpdateTransactionAction:function BR(BU){var BT={act:"updateTransaction"};if(BU){if(BU.ctlKey){BT.partialUpdate={selectors:[BU.ctlKey]};}}return BT;},getSelectorFromGMAction:function n(BU){var BT={act:"setSelectorFromGM",keyContext:BU.ck,ctlKey:BU.ctlKey,keepOnly:!!BU.keepOnly,selectorObjects:BU.selectorObjects,isVisualization:!!BU.isDocVis,include:!!BU.include};if(BU.tks){BT.tks=BU.tks;}if(BU.disablePU){BT.usePartialUpdate="0";}else{BT.partialUpdate={selectors:[BU.ctlKey]};}return BT;},getGMViewFilterAction:function AG(BU){var BT={act:"keepOnlyGM",selectorObjects:BU.selectorObjects,isVisualization:!!BU.isDocVis,keepOnly:!!BU.keepOnly};if(BU.tks){BT.tks=BU.tks;}if(BU.disablePU){BT.usePartialUpdate="0";}else{BT.partialUpdate={selectors:[BU.ctlKey]};}return BT;},browseControlElements:function BI(BX,Bg,BU){var BW=BX.searchPattern,Bd=BX.attributeId,BZ=this.model;if(!BW||BW===""){return ;}var Ba={taskId:"browseElements",styleName:"MojoAttributeStyle",attributeID:Bd,expressionXML:BX.expressionXML||"",dataSourcesXML:BX.dataSourcesXML||"",blockBegin:BX.blockBegin,blockCount:BX.blockCount,searchPattern:BW,rawInput:BW,browseFlags:BX.browseFlags||0,otp:BX.objectType};if(BX.datasetId){B({datasetID:BX.datasetId,messageID:BZ.mid,ctlKey:BX.controlKey},Ba);}var Bf=BX.searchForms;if(Bf){var BV="",BY="";U.forEach(Bf,function(Bh){BV+=BY+Bh.did;BY=";";});Ba.searchForms=BV;if(BZ.isnew||BX.useClientForm){var BT="",Bc="",Bb=U.filterOne(BZ.getDatasetUnits(["att"]),function(Bh){return Bh.did===Bd;}),Be=Bb.fs||[];U.forEach(Bf,function(Bh){var Bi=U.filterOne(Be,function(Bj){return Bj.fid===Bh.did;});BT+=Bc+Bh.did+":"+(Bi&&Bi.bftp||0);Bc=";";});Ba.clientFormPatterns=BT;}}Am.call(this,Ba,Bg,BU);},setMultiDocSelectorElements:function AE(BT,BU,BW){var BV={taskId:"setMultiDocSelectorElements",rwb:this.rwb,multiSelect:BU,selectorObjects:BT};Am.call(this,BV,BW,{showWait:true,hideWait:true,delay:true});},setDocSelectorTexts:function T(BY,Ba,Bc,BZ,Bb,BU,BT,BV,BX){var BW={taskId:"setDocSelectorTexts",rwb:this.rwb,unitKeyContext:BY,ctlTexts:Ba,ctlKey:Bc,zoomFactor:BU};if(AW.isAndroid||BT){BW.taskId="androidSetDocSelectorElements";}if(BZ!==null&&BZ!==undefined){BW.include=BZ;}if(BV!==null&&BV!==undefined){BW.usePartDisplay=BV;}if(BX!==null&&BX!==undefined){BW.treesToRender=BX;}Am.call(this,BW,Bb);},getSelectorExpressionAction:function t(BV){var BU={act:"setSelectorExpression",keyContext:BV.ck,ctlType:BV.type,objId:BV.srcid,objType:BV.srct,expFunction:BV.f,expFunctionType:BV.ft,include:!!BV.include,qt:BV.qt,unset:!!BV.unset};if(BV.disablePU){BU.usePartialUpdate="0";}else{BU.partialUpdate={selectors:[BV.ckey]};if(BV.retrieveCtrlKey){BU.partialRetrieval=this.newRetrievalKeysConfig().addNode(BV.ctlKey);}}if(BV.changeQual){BU.changeQual=BV.changeQual;}var BT=BV.cs;if(BT!==null&&BT!==undefined){BU.expConstants=BT;BU.dataType=BV.dtp;}if(BV.fid){BU.fid=BV.fid;}return BU;},getAttributeSelectorExpressionAction:function Aw(BU){var BT={act:"setAttributeSelectorExpression",keyContext:BU.ck,ctlKey:BU.ctlKey,ctlType:BU.type,expr:BU.expr,partialUpdate:{selectors:[BU.ctlKey]}};if(BU.tks){BT.tks=BU.tks;}return BT;},getMultiUnitSelectorAction:function BK(BT){return{act:"multiUnitSelection",keyContext:BT.ck,include:BT.include!==false,sels:BT.selections,partialUpdate:{selectors:[BT.ctlKey]}};},getRemoveCtrlAction:function Ao(BU,BT){return{act:"removeControl",key:BU,partialUpdate:{selectors:[BU]},partialRetrieval:{nodes:Ap(BT)}};},getAddCtrlAction:function Af(Ba,BY,BU,BZ,BV,Bb,BT,BW,Bc){if(isNaN(Bc)){Bc=1;}var BX={act:"addControl",parentKey:Ba,nodeKey:BY,ctlKey:BU,isUC:!!BV,unitType:Bb||-1,unitId:BT||"",targetKeys:Ap(BW),ctlType:Bc,gpType:Bc,partialRetrieval:{nodes:Ap(BZ)}};if(!BX.isUC){BX.partialUpdate={selectors:[BU]};}return BX;},getReplaceCtrlAction:function S(BV,BY,BT,BX,BU,BW){return{act:"replaceControl",nodeKey:this.getNodeKeyFromKeyContext(BV),ctlKey:BY,ctlType:BT,unitId:BX,unitType:BU,partialUpdate:{selectors:[BY]},partialRetrieval:{nodes:Ap(BW)}};},getSaveGraphPropertiesAction:function l(BT,BU){return{act:"saveGraphProperties",nodeKey:BT,properties:BU};},getSelectorIncludeAction:function A5(BU){var BT=BU.ckey;return{act:"setSelectorInclude",keyContext:BU.ck,ctlKey:BT,ctlType:BU.type,include:BU.include,partialUpdate:{selectors:[BT]}};},getSelectorShowAllAction:function Q(BT){return{act:"setSelectorShowAll",keyContext:BT.ck,ctlKey:BT.ckey,ctlType:BT.type,showAll:BT.showAll,partialRetrieval:this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(BT.ck))};},getUnsetSelectorAction:function f(BW){var BV=BW.ckey,BT=BW.ck,BU={act:"unsetSelector",keyContext:BT,ctlKey:BV,ctlType:BW.type};if(BW.ignoreTargetData){BU.partialRetrieval=this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(BT));}else{BU.partialUpdate={selectors:[BV]};}if(BW.retrieveCtrlKey){BU.partialRetrieval=this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(BT));BU.partialRetrieval=BU.partialRetrieval.addNode(BV);}return BU;},getRASelectorExpandAction:function p(BU){var BT=BU.ckey;return{act:"raSelectorExpandCollapse",keyContext:BU.ck,ctlKey:BT,ctlType:BU.type,elementId:BU.elementId,isExpand:BU.isExpand,partialRetrieval:this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(BU.ck))};},getChangeFilteringAction:function A1(BT,BW,BV,BU){return{act:"changeFiltering",nodeKey:BT,filterMode:BW,isUC:BV,partialRetrieval:{nodes:(BU?Ap(BU):[])}};},getAddDerivedMetricToDatasetAction:function A9(BT){return{act:"addDerivedMetricToDataset",dsid:BT.dsid,formula:BT.formula,isTokenStream:BT.isTokenStream,name:BT.name,newObjectIds:BT.Ids,afb:BT.afb,sfb:BT.sfb};},getSetMDXPassThroughOptionsForCMAction:function A(BT){var BU={act:"formatDerivedElement",format:L(BT.mptf)};if(BT.cid){BU.cid=BT.cid;}if(BT.ceid){BU.ceid=BT.ceid;}return BU;},getEditDocUnitPropAction:function AB(BT){return{act:"editDocUnitProp",dsid:BT.dsid,formId:BT.formId,unitId:BT.unitId,unitType:BT.unitType,prop:BT.prop,value:BT.value};},getRWGraphImage:function BQ(BX,Bb){if(mstrApp.isExpress&&!mstrApp.optimizeFitToPage&&m.call(this,this.model.zt)){return ;}var BW=mstrApp,BT=this.id,BU={taskId:"getRWGraphImage",taskEnv:"xhr",imgType:4,messageID:this.msgId,nodeKey:BX.k,sliceID:parseInt(BX.sid,10),width:parseInt(BX.w,10),height:parseInt(BX.h,10)};if(BX.needCoordinate){BU.needCoordinate=1;}if(BW.onMobileDevice()&&BW.useBinaryFormat){window.setTimeout(function(){Am.call(mstrmojo.all[BT],BU,Bb,W());},0);}else{if(BX.encodeImage){BU.taskContentEncoding="base64";delete BU.taskEnv;Am.call(this,BU,{success:function Bc(Bd){Bb.success(Bd);},failure:function BV(Bd){(Bb.failure||BW.onerror)(Bd);}},W());}else{var BZ=BW.getConfiguration(),BY=BW.getCurrentProjectId(),Ba=new mstrmojo.StringBuffer();BU.__ts__=new Date().getTime();BU.sessionState=BW.getSessionState(BY);d.forEach(BU,function(Bd,Be){Ba.append(Be+"="+encodeURIComponent(Bd));});Bb.success(BZ.getTaskUrlByProject(BY)+"?"+Ba.toString("&"));}}},getImage:function BP(BU){var BV=mstrApp,BT=BV.getConfiguration();if(BT&&BU&&BU.indexOf("://")===-1){BU=BT.getHostUrlByProject(BV.getCurrentProjectId())+BU;}return(mstrApp.useBinaryFormat)?String(mstrMobileApp.getImage(BU)):BU;},setGridDisplayMode:function u(BV,BU,BW,BT){d.copy(mstrmojo.DocDataService.RAPID_EXEC,BT);this.submitUpdates({act:"setGridDisplayMode",unitKey:BV,displayMode:BU},BW,BT);},setDocZoom:function H(BT,BU){this.submitUpdates(B(BT,{act:"setDocZoom",disablePU:true}),BU,{style:{params:{treesToRender:3}}});},sortGrid:function AN(BT,BU){this.submitTemplateUpdates(BT.nodeKey,B({act:"sort"},BT),BU);},getAdvSortData:function Ai(BT,BU){this.rwExecute(B(BT,{styleName:"RWGridStyle"}),BU);},getFilterExpression:function AS(BV,BU){var BW=BV&&BV.expr,BT=this.model;if(BW&&BT&&BT.getVfexprWithUpdatedVf){BW=BT.getVfexprWithUpdatedVf(BU,BW);}return AD(BW);},saveViewFilter:function Av(BY,BZ){var BX=this.msgId,BT=BY&&BY.nodeKeys,BW=this,BV=U.map(BT,function(Ba){return{act:"saveViewFilter",messageID:BX,nodeKey:Ba,expr:BW.getFilterExpression(BY.filterModel,Ba),partialUpdate:{nodes:[Ba]}};}),BU=U.map(BT,function(Ba){return{act:"saveViewFilterLimit",messageID:BX,nodeKey:Ba,limitExp:BY.limitExp,limitToRemove:BY.limitMdxToRemove||[]};});this.submitUpdates(BV.concat(BU),BZ);},getViewFilter:function AO(BU,BV){var BT=this.model;if(BT.getViewFilter){BT.getViewFilter(BU,BV);}else{Am.call(this,{taskId:BU.taskId,rwb:BU.rwb,msgID:BU.msgID,nodeKey:BU.nodeKey},BV);}},createEmbeddedFilter:function Aq(BV,BY){var BT=BV.filterId,BW=BV.expJson,BX={act:"createEmbeddedFilter",messageID:this.msgId,expr:BV.expr,filterId:BT,filterName:BV.filterName};var BU=this.model;x.wrapMethods({success:function(){var BZ=BU.defn.efs||[];BZ.push({did:BT,exp:BW});BU.defn.efs=BZ;}},BY);this.submitUpdates([BX],BY,{style:{params:{treesToRender:mstrmojo.DocDataService.EnumTreesToRender.NONE}},params:{suppressData:true}});},rwExecute:function BG(BT,BU){Am.call(this,B(BT,{taskId:"RWExecute",rwb:this.rwb,messageID:this.msgId}),BU);},pivot:function o(BT,BU){this.submitTemplateUpdates(BT.nodeKey,{act:"pivot",unitId:BT.unitId,unitType:BT.unitType,attFormId:BT.attFormId,axis:BT.axis,unitPos:BT.unitPos},BU);},resizeXtabColumn:function BC(BT,BU){this.submitUpdates([this.getUpdateTemplateAction(BT.nodeKey,BT),{act:"format",unitType:52,unitKey:BT.nodeKey,formatType:1,format:{FormattingSize:{WidthMode:2}}}],BU);},showTotals:function V(BT,BU){this.submitTemplateUpdates(BT.nodeKey,{act:"showTotals",unitId:BT.unitId,unitType:BT.unitType,subtotalType:BT.subtotalType,clearSubtotalType:BT.clearSubtotalType},BU);},drillGrid:function AK(BT,BU){this.submitUpdates(this.getDrillGridAction(BT),BU,{config:{showProgress:true,hideProgress:true,progressStateText:AM,delay:true}});},getDrillGridAction:function BJ(BU){var BT={act:"gridDrillWithin",messageID:this.msgId,nodeKey:BU.nodeKey,sliceId:BU.sliceId,drillPathIndex:BU.drillPathIndex,drillPathKey:BU.drillPathKey,elementList:BU.drillElements,retainParent:BU.retainParent,partialUpdate:{nodes:Ap(BU.updateNodeKey||BU.nodeKey)}};if(BU.x){BT.x=BU.x;BT.y=BU.y;}return BT;},changeDocGroupBy:function O(BV,BW,BT){var BU={act:"changeDocGroupBy",disablePU:true};if(BV.flags){BU.flags=BV.flags;}if(BV.groupbyKey){BU.gbKey=BV.groupbyKey;BU.elemId=BV.elementId;}else{BU.gbUnits=BV.gbUnits;}this.submitUpdates(BU,BW,{config:BT,style:{params:{treesToRender:3}},params:As.call(this,BV)});},setOutlineExpanding:function A2(BV,BW,BT){var BU={act:"updateTemplate",keyContext:BV.unitKey,actions:[{act:"setOutlineExpanding",prs:"Template Formatting",pr:"OutlineLevelExpanding",v:BV.outlineLevel}]};this.submitUpdates(BU,BW,d.copy(mstrmojo.DocDataService.RAPID_EXEC,{config:{silent:true},style:{params:{treesToRender:mstrmojo.DocDataService.EnumTreesToRender.BOTH}}}));},retrieveServerJson:function e(BV,Bf,BW){if(mstrApp.isExpress&&!mstrApp.optimizeFitToPage&&m.call(this,this.model.zt)){return ;}var BY=this.model,BZ=BY.controller,Bd={},BT,BU,Bb;var Bc=BV.nodes;if(Bc){Bd.partialRetrieval=Bc;}var Be=BV.slices;if(Be){Bd.slices=Be;}if(BW){BT=BW.style;BU=BW.config;Bb=BW.params;}if(!BU){BU={showProgress:true,hideProgress:true,progressStateText:AM};}var Bg=BV.style=d.clone(this.defaultStyle),Ba=mstrApp.isAppStatePause&&mstrApp.isAppStatePause();B(BT.params,Bg.params);var BX={taskId:"getServerJSONResults",styleName:"ServerJsonRWDStyle",compress:1,rwb:this.rwb,messageID:this.msgId,stateID:-1,excludeData:!!(Ba||mstrConfig.resolveOnly),params:JSON.stringify(Bd),treesToRender:Bg.params.treesToRender};B(Bb,BX);BU.preserveUndo=(BW&&BW.preserveUndo)||false;Am.call(this,BX,Bf,BU);},downloadGridData:function J(BW,BX){var BV={act:"gridIncrementalFetch",nodeKey:BW.nodeKey,rowPosition:BW.rowPosition,maxRows:BW.maxRows,colPosition:BW.colPosition,sliceId:BW.sliceId,maxColumns:BW.maxColumns,rowMode:BW.rowMode||1,partialRetrieval:this.newRetrievalKeysConfig().addNode(BW.nodeKey)};if(BW.partialUpdate){BV.partialUpdate=BW.partialUpdate;}var BU=mstrmojo.all[BW.xtabId],BT=BU&&BU.isCustomSort;this.submitUpdates(BV,BX,d.copy(W(),{noUpdate:true,preserveStid:BT,config:{silent:true}}));},txMarkRows:function AU(BT,BU){if(mstrApp&&mstrApp.isNativeAndroid){mstrMobileTransport.applyTransactionMarkRow(BT.nodeKey,BT.sliceId,BT.rowOrdinal,BT.actionType);}else{Am.call(this,{taskId:"markRow",rwb:this.rwb,nodeKey:BT.nodeKey,sliceId:BT.sliceId,rowOrdinal:BT.rowOrdinal,actionType:BT.actionType},BU);}},txChangeData:function w(BT,BU){if(mstrApp&&mstrApp.isNativeAndroid){mstrMobileTransport.applyTransactionDataChange(BT.nodeKey,BT.sliceId,JSON.stringify(BT.cells),BT.autoRefresh);}else{Am.call(this,{taskId:"changeData",rwb:this.rwb,nodeKey:BT.nodeKey,sliceId:BT.sliceId,cells:BT.cells,autoRefresh:BT.autoRefresh},BU);}},sendTransactionActions:function b(BU,BV){var BT={taskId:"DocTransaction",rwb:this.rwb,keyContext:BU.keyContext,actions:BU.actions,messageID:this.msgId};if(BU.txrcd){BT.isPending=BU.txrcd.pending;BT.timestamp=BU.txrcd.timestamp;}Am.call(this,BT,BV,{silent:!!BV});},newUpdate:function A8(BV,BU){var BT=new mstrmojo.DocDataService.Update(BU);BT.ds=this;BT.cmd=BV;return BT;},newUpdateWithoutCmd:function k(BU){var BT=new mstrmojo.DocDataService.Update(BU);BT.ds=this;return BT;},newRetrievalKeysConfig:function Ae(){return new mstrmojo.rw.model.RetrievalKeysConfig();},newUpdateKeysConfig:function R(){return new mstrmojo.rw.model.UpdateKeysConfig();},submitCmd:function BF(BU,BT){this.newUpdate(BU,BT).submit();},submitUpdates:function Ah(Bc,Bi,BZ){Bc=Ap(Bc);var BY={actions:Bc},BT,BW,Bf,BV=false;U.forEach(Bc,function Bb(Bk){if(Bk.disablePU){BV=true;delete Bk.disablePU;}U.forEach(Bk.actions,Bb);return !BV;});if(!BV){var BU=mstrmojo.rw.model.RetrievalKeysConfig.getConsolidatedConfig(Bc),Bh=mstrmojo.rw.model.UpdateKeysConfig.getConsolidatedConfig(Bc);if(!d.isEmpty(BU)){BY.partialRetrieval=BU;}if(!d.isEmpty(Bh)){BY.partialUpdate=Bh;}}if(BZ){BT=BZ.style;BW=BZ.config;Bf=BZ.params;}if(!BW){BW={showProgress:true,hideProgress:true,progressStateText:AM};}if(!BT){BY.style=this.defaultStyle;}else{var Bj=BY.style=d.clone(this.defaultStyle);B(BT.params,Bj.params);}BY.style.name=(BT&&BT.name)||mstrApp.styleName;var Ba={taskId:"mojoRWManipulation",rwb:this.rwb,messageID:this.msgId,stateID:-1,params:JSON.stringify(BY)};B(Bf,Ba);BW.preserveUndo=(BZ&&BZ.noUpdate)||false;BW.preserveStid=(BZ&&BZ.preserveStid)||false;var Be=this,Bg=true,BX=x.override({success:function(Bk,Bl){if(Bk.status===2){Bg=false;Be.submitUpdates([],Bi,BZ);}else{Bg=true;return this._super(Bk,Bl);}},complete:function(){if(this._super&&Bg){this._super();}}},B(Bi));if(!(BZ&&BZ.hideCancel)){BW.waitBoxCfg=d.copy({showCancel:true},BW.waitBoxCfg);}if(BZ&&BZ.message){BW.waitBoxCfg=d.copy({message:BZ.message},BW.waitBoxCfg);}var Bd=mstrApp.isAppStatePause&&mstrApp.isAppStatePause();if(BZ&&BZ.resolveOnly!==undefined){Ba.resolveOnly=BZ.resolveOnly;}else{if(Bd){Ba.resolveOnly=true;}}if(BZ&&BZ.excludeData!==undefined){Ba.excludeData=BZ.excludeData;}else{if(Bd){Ba.excludeData=true;}}if(BZ&&BZ.noDeltaXML!==undefined){Ba.noDeltaXML=BZ.noDeltaXML;}if(Ba.resolveOnly&&Ba.excludeData){mstrApp.enableUpdate=true;}Am.call(this,Ba,BX,BW);},submitTemplateUpdates:function z(BT,BV,BW,BU){this.submitUpdates(this.getUpdateTemplateAction(BT,BV),BW,BU);},getUpdateTemplateAction:function Ab(BT,BV,BU){return{act:"updateTemplate",keyContext:BT,partialRetrieval:this.newRetrievalKeysConfig().addNode(BT,BU),partialUpdate:{selectors:BV.selectors},actions:Ap(BV)};},addUpdateTemplateAction:function BL(BV,BT,BU){BV.addActions(this.getUpdateTemplateAction(BT,BU));},applySegment:function AR(BU,BT,BV){Am.call(this,{taskId:"applySegment",rwb:this.rwb,segmentID:BU,nodeKey:BT},BV);},getPageByTree:function AT(BT){mstrApp.serverRequest({taskId:"getPageByTree",msgID:this.msgId},BT);},getUserDICubeInfo:function Z(BT,BU){Am.call(this,{taskId:"getUserDICubeInfo",cubeIds:BT.join(",")},BU);},applySorts:function A7(BU,BV,BT,BW){Am.call(this,{taskId:"applySorts",key:BU,sortType:BV,sortList:BT},BW,mstrmojo.DocDataService.PROGRESS_CONFIG);},getAddNewDerivedMetricToDatasetSubmitFunc:function A4(BU){var BT=this;return function(BX){var BY=BT.model,BW=BY.controller,BV=d.copy(BX,BU),BZ=[Al.call(BT,BV,true)],Ba=BY.getDatasetsUpdateCallback();if((BV.mptf||{}).dirty||this.enablePTO){BZ.push(AI(BV));}BW.submitUndoRedoUpdates(BZ,null,Ba,{style:{params:{treesToRender:1}}});};},getAddNewDerivedMetricToXtabSubmitFunc:function At(BU){var BT=this;return function(BY){var BZ=BT.model,BX=BZ.controller,BW=d.copy(BY,BU),BV=BW.idx,Bb=[],Bc=x.wrapMethods(BZ.getDatasetsUpdateCallback(),BX._getXtabCallback(BW.host));Bb.push(Al.call(BT,BW,true));if((BW.mptf||{}).dirty||this.enablePTO){Bb.push(AI(BW,true));}if(BW.replace){Bb.push(BT.getUpdateTemplateAction(BW.nodeKey,[BW.host.model.getRemoveTemplateUnitAction({did:BW.replace.did,t:BW.replace.t})]));}else{BV++;}var Ba=BT.getUpdateTemplateAction(BW.nodeKey,[BW.host.model.getAddTemplateUnitAction({did:"$GUID_135",t:4},BW.dsid,BW.zoneid,BV),{act:"renameUnit",id:"$GUID_135",type:4,name:BW.alias,isDynamicAlias:false}]);Bb.push(Ba);BX.submitUndoRedoUpdates(Bb,null,Bc);};},getAddNewDerivedMetricToDropzoneSubmitFunc:function AF(BU){var BT=this;return function(Ba){var Bb=BT.model,Bc=Bb.controller,Be=d.copy(Ba,BU),Bg=Be.host.zonesModel,Bh=Be.idx,BZ=[],BV=[],Bf={id:Be.zoneid},Bd={did:"$GUID_135",t:4},Bi=x.wrapMethods(Bb.getDatasetsUpdateCallback(),Bc._getXtabCallback(Be.host));BZ.push(Al.call(BT,Be,true));if((Be.mptf||{}).dirty||this.enablePTO){BZ.push(AI(Be));}if(Be.replace){var BX={did:Be.replace.did,t:Be.replace.t};Array.prototype.push.apply(BV,Bg.getRemoveDropZoneUnitActions(Bf,BX));}else{Bh++;}BV.push(Bg.getAddDropZoneUnitAction(Bf,Bd,Bh,{datasetId:Be.dsid}));if(Be.extraZone){BV.push(Bg.getAddDropZoneUnitAction({id:Be.extraZone.id},Bd,Be.extraZone.idx,{datasetId:Be.dsid}));}if(!Be.replace){var BW=(BU.zoneid===4)?1:2,BY=Bg.getAddMetricNameAction(BU.host,BW);if(BY){BZ.push(BY);}}if(!Be.replace&&Bg.gmZones){BY=Bg.gmZones.getUpdateGroupInfoActionForNewMetric(BU.zoneid,Bh,true);if(BY){BZ.push(BY);}}Bg.checkAndAddThresholdAction(Be.zoneid,Bd,BV);BZ.push(BT.getUpdateTemplateAction(Be.nodeKey,BV));Bc.submitUndoRedoUpdates(BZ,null,Bi);};},getEditDerivedMetricSubmitFunc:function j(BU){var BT=this;return function(BX){var BZ=BT.model,BW=BZ.controller,BV=d.copy(BX,BU),BY=BU.nodeKey,Ba={act:"editDM",formula:BV.tokenStreamXML,isTokenStream:!mstrmojo.string.isEmpty(BV.tokenStreamXML),afb:BU.afb,sfb:BU.sfb,dsid:BV.dsid||"",did:BV.did},Bb=[BZ.addUpdateObjects(Ba,{id:BV.did,type:4,flag:mstrmojo.DocDataService.PARTIAL_UPDATE_FLAGS.DATA_CHANGE})],Bc=x.wrapMethods(BZ.getDatasetsUpdateCallback(),BW.getPartialUpdateCallback());if(mstrApp.isSingleTier&&BU.originTokenStream){Ba.originFormula=BU.originTokenStream;Ba.originAfb=BU.originAfb;Ba.originSfb=BU.originSfb;}if((BV.mptf||{}).dirty){Bb.push(AI(BV));}if(BY){Bb.push(BT.getUpdateTemplateAction(BY,[{act:"renameUnit",id:BV.did,type:4,name:BV.alias,isDynamicAlias:false}]));}else{Ba.name=BV.alias;}BW.submitUndoRedoUpdates(Bb,null,Bc,{style:{params:{treesToRender:mstrmojo.DocDataService.EnumTreesToRender.BOTH}}});};},resetSelections:function BB(BU,BT,BV){Am.call(this,{taskId:"resetSelections",rwb:this.rwb,unitKeyContext:BU||"",usePartDisplay:BT?"0":"1",treesToRender:BT?3:2},BV);},setPreference:function F(BT,BU){Am.call(this,{taskId:"setPreference",prefs:BT},BU);},getObjectInfo:function AZ(BT,BU){Am.call(this,B(BT,{taskId:"getObjectInfo"}),BU,W());},addSuppressData:function Ay(BT){if(BO(BT)===mstrmojo.DocDataService.EnumTreesToRender.NONE){d.copy({params:{suppressData:true}},BT);}},uploadImageToServer:function(BV,BW){var BU={taskId:"importImage",imageFieldName:"imageData",isEdit:1,fieldKey:BV.fieldKey,fieldName:BV.fieldName,imageName:encodeURIComponent(BV.imageName),imageSize:BV.imageSize,nodeKey:BV.nodeKey,sectionKey:BV.sectionKey,msgID:this.msgId||""};if(mstrApp.isSingleTier){var BT=";base64,";BU.rwNodeKey=BV.fieldGroupKey;BU.imageData=BV.base64Str.split(BT)[1]||BV.base64Str;mstrApp.serverRequest(BU,BW);}else{BU.imageData=BV.imageData;mstrmojo.xhr.upload("POST",mstrConfig.taskURL,BW,BU);}}});mstrmojo.DocDataService.Update=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.DocDataService.Update",actions:null,callback:null,extras:null,init:function Aj(BT){B(BT,this);this.actions=this.actions||[];this.callback=this.callback||{};this.extras=this.extras||{};},addActions:function Ad(BT){this.actions=this.actions.concat(Ap(BT));},addCallbacks:function A0(BT){this.callback=x.wrapMethods(this.callback,BT);},addExtras:function AX(BU){var BT=BO(BU),BV=BO(this.extras);this.extras=B(BU,this.extras);if(BT!==undefined&&BV!==undefined){this.extras.style.params.treesToRender|=BV;}},addUpdate:function Aa(BT){this.add(BT.actions,BT.callback,BT.extras);},setTreesToRender:function BS(BT){if(BT){this.addExtras({style:{params:{treesToRender:BT}}});}return this.extras.style.params.treesToRender;},add:function a(BU,BV,BT){if(BU){this.addActions(BU);}if(BV){this.addCallbacks(BV);}if(BT){this.addExtras(BT);}},submit:function AA(){var BU=this.actions,BV=this.callback,BT=this.extras;if(this.cmd){this.cmd.submit(BU,BV,BT);}else{this.ds.submitUpdates(BU,BV,BT);}}});mstrmojo.DocDataService.PUInfoType=null;mstrmojo.DocDataService.ExtrasType=null;mstrmojo.DocDataService.PROGRESS_CONFIG={showProgress:true,hideProgress:true,progressStateText:AM,delay:true};mstrmojo.DocDataService.UNDO_KEY="undo";mstrmojo.DocDataService.REQUEST_DEFN_DATA={style:{params:{treesToRender:3}}};mstrmojo.DocDataService.REQUEST_ONLY_DEFINITION={style:{params:{treesToRender:1}}};mstrmojo.DocDataService.REQUEST_ONLY_DATASETS={style:{params:{treesToRender:0}}};mstrmojo.DocDataService.SUPPRESS_DATA={params:{suppressData:true}};mstrmojo.DocDataService.RAPID_EXEC={params:{suppressData:true,rapidExec:true}};mstrmojo.DocDataService.EMPTY_CALLBACK={success:mstrmojo.emptyFn};mstrmojo.DocDataService.CopyMoveDestinationType=null;mstrmojo.DocDataService.PARTIAL_UPDATE_FLAGS={FORMAT_CHANGE:1,DATA_CHANGE:2};mstrmojo.DocDataService.EnumTreesToRender={NONE:0,DEFN:1,DATA:2,BOTH:3};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.expr","mstrmojo.func","mstrmojo.css","mstrmojo.UUID","mstrmojo.fe.FilterUtils","mstrmojo.desc");var Q=mstrmojo.func,L=mstrmojo.hash,J=mstrmojo.array,N=mstrmojo.expr,T=mstrmojo.css,R=N.DTP,F=mstrmojo.UUID,U=mstrmojo.fe.FilterUtils,T=mstrmojo.css;var H=16,E=32;function O(Z,Y,b){var W=L.copyProps(["did","t","st","n"],Z),X=(Z.fs||[]).filter(function(c){return c.fnm==="LEVEL_NUMBER"||c.n==="LEVEL_NUMBER";})[0],a;if(Y){a={et:N.ET.AE,fn:N.FN.DESCENDANT,a:W,es:[{v:Y.v,n:Y.n}]};if(parseInt(b,10)>=Y.lv){a.cs=[{v:b-Y.lv,dtp:R.INTEGER},{v:2,dtp:R.INTEGER}];}}else{if(parseInt(b,10)>=0&&X){a={et:N.ET.AQ,fn:N.FN.EQUAL,a:W,fm:{did:X.did||X.fid,n:X.n||X.fnm,dtp:R.INTEGER},cs:[{v:b,dtp:R.INTEGER}]};}}return a?U.getExprXml(a):"";}mstrmojo.ui._IsIncFetchHierarchyList=mstrmojo.provide("mstrmojo.ui._IsIncFetchHierarchyList",{_mixinName:"mstrmojo.ui._IsIncFetchHierarchyList",blockCount:500,getDataHelper:mstrmojo.emptyFn,getAttribute:mstrmojo.emptyFn,isHiearachyDisplay:mstrmojo.emptyFn,getItemMarkup:function C(Y,W){var X;if(Y.fetcher){X='<{@tag} class="item fetcher {@cls}" idx="{@idx}" style="{@style}"><span class="indent" style="padding-left: {@indent}px;"></span><span class="text">{@en@n}</span></{@tag}>';}else{X=this._super(Y,W);}return X;},isFetcher:function K(W){if(W instanceof HTMLElement){W=this.getItemFromTarget(W);}return W&&W.fetcher;},fetchItems:function I(W,X){this._super(W,Q.wrapMethods(this.getFetchItemsCallback(W),X));},fetchItemsThroughTaskCall:function P(a,f){var Z=this.getDataHelper(),Y=this.getAttribute();if(Z&&Y&&!this.isFetching){this.set("isFetching",true);var c=this,d=a.branch,W=parseInt(a.level,10),b=a.blockBegin||1,e=a.blockCount||this.blockCount,X=a.browseFlags||0;Z.set("browseConfig",L.copy({blockBegin:b,blockCount:e,browseFlags:X,expressionXML:(d||W>=0)?O(Y,d,W):"",otp:Y.t,compress:1},L.copy(Z.browseConfig)));Z.getItems(b,Q.wrapMethods({success:function(g){if(g){L.copy({bb:b,bc:e},g);J.forEach(g.es,function(h){if(!h.pid&&h.pi>-1){h.pid=g.es[h.pi].v;delete h.pi;}L.copy({lv:h.lv||0,hcd:!!h.hcd,hid:!!h.hid,dhid:!!h.hid,pid:h.pid||""},h);});}}},f,{complete:function(g){c.set("isFetching",false);}}),{hideFailureErr:f.failure});}},getFlatDisplayItems:function B(W){return W.filter(function(X){var Y=X.fhid;delete X.fhid;return !Y;});},getFetchItemsCallback:function M(Z){var Y=this,X=Z.branch,a=parseInt(Z.level,10),W=this.isHiearachyDisplay();return{success:function(b){if(b&&b.es){var d=b.es,c=b.bb+b.bc-1;if(b.sz>c&&!b.raad){d.push({v:"fetcher"+F.create(),n:mstrmojo.desc(1005,"More..."),fetcher:true,lv:W?(a>=0?a:(X?X.lv+1:0)):-1,config:L.copy({blockBegin:c+1},L.copy(Z))});}if(!W){d.forEach(function(g){var h=g.hid,f=Y.getItemByValue(g.v);delete g.epd;delete g.hid;if(f){delete g.hcd;}L.copy({fhid:h,dhid:!f||f.dhid},g);});}if(Y.setDisplayParent){Y.setDisplayParent(d,null,true);}}}};},getMaxLevel:function A(){var W=this.getAttribute(),X=(W&&W.lvfs||[]).length;if(X>0){return X-1;}return this._super?this._super():0;},getLevels:function D(){var W=this.getAttribute(),X=W&&W.lvfs||[];return X.map(function(Z,Y){return{v:Y,n:Z.lvfn};});},initElements:function S(b){if(this.isHiearachyDisplay()){delete this.displayRoots;var Y=this.getItems(),X=Y.length,a,W;if(X>0){if(this.raad){for(var Z=X-1;Z>-1;Z--){a=Y[Z];if(a.fetcher&&a.fake){a.hid=true;W=J.find(a.parent&&a.parent.children,"idx",a.idx);if(W>-1){a.parent.children.splice(W,1);}W=J.find(a.displayParent&&a.displayParent.displayChildren,"idx",a.idx);if(W>-1){a.displayParent.displayChildren.splice(W,1);}}}}this.refresh();}else{this.fetchItems({browseFlags:E},b);}}else{this.clearItemsNode();this.fetchItems({blockCount:500,browseFlags:H},b);}},clearItemsNode:function G(){var W=this.itemsContainerNode;if(W){W.innerText="";this.updateScrollbars();}},onclick:function V(g){var d=g.getTarget(),X=this.getItemNodeFromTarget(d),h=this.getItemFromTarget(d);if(h&&h.fetcher){if(T.hasClass(d,"text")){if(h.fake){var c=function(j){if(j.displayParent){if(!j.displayParent.hid){return j.displayParent;}else{return c(j.displayParent);}}},a=c(h),Z=a?a.displayChildren:this.getDisplayRoots(),e=this.items,W=h.config.nextSiblingIdx,b=this.blockCount,Y=W+b,f;if(Z.length-1>Y){f=Z.slice(W,Y);h.config.nextSiblingIdx+=b;h.lv=f[f.length-1].lv;f.push(h);}else{Z.pop();if(h.parent){h.parent.children.pop();}e.splice(J.find(e,"idx",h.idx),1);f=Z.slice(W,Z.length);}X.outerHTML=this._buildSiblingsMarkup(f).join("");this.updateScrollbars();}else{this.fetchItems(h.config,{success:function(j){h.hid=true;X.outerHTML="";}});}}g.cancel();}else{this._super(g);}},});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");mstrmojo.StepperContentProvider=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.StepperContentProvider",item:null,renderer:null,min:null,max:null,interval:1,minField:"min",maxField:"max",maxLengthField:"maxLength",valField:"value",intField:"interval",canLoop:false,next:mstrmojo.emptyFn,prev:mstrmojo.emptyFn,hasPrev:mstrmojo.emptyFn,hasNext:mstrmojo.emptyFn,renderItemAt:mstrmojo.emptyFn,setVal:mstrmojo.emptyFn,getVal:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");var M=mstrmojo.DI.DIConstants,H=mstrmojo.array,D=M.dbType,F=M.xdaType,I=M.sourceType,K=M.backendSourceSubtype;mstrmojo.DI.DIDatabaseHelper=mstrmojo.declare(mstrmojo.Obj,null,null);mstrmojo.DI.DIDatabaseHelper.getImportOptionByDBType=function A(N){switch(N){case D.SAP:case D.MSFT_AS:case D.ESSBASE:case D.TM1:case D.PIG:return false;default:return true;}};mstrmojo.DI.DIDatabaseHelper.getSourceTypeByDBType=function E(N){switch(N){case D.SAP:case D.MSFT_AS:case D.ESSBASE:case D.TM1:return F.mdx;case D.PIG:return F.ffsql;default:return -1;}};mstrmojo.DI.DIDatabaseHelper.getDescriptionIdByDBType=function(N){switch(N){case D.MS_ACCESS:return 9149;case D.ORACLE:return 8545;case D.SQL_SERVER:return 8552;case D.INFORMIX:return 12995;case D.SYBASE:return 12998;case D.REDBRICK:return 10059;case D.DB2:return 8516;case D.TERADATA:return 8553;case D.SAP:return 13107;case D.NETEZZA:return 8558;case D.EXCEL:return 3958;case D.MSFT_AS:return 13225;case D.ESSBASE:return 13224;case D.MYSQL:return 8556;case D.POSTGRESQL:return 8541;case D.COMPOSITE:return 12991;case D.ASTER:return 10058;case D.VERTICA:return 10062;case D.PARACCEL:return 10056;case D.TM1:return 13223;case D.XQUERY:return 8560;case D.HIVE:return 8561;case D.SALESFORCE:return 9213;case D.SAPHANA:return 12997;case D.GOOGLE_BIGQUERY:return 12450;default:return 4444;}};mstrmojo.DI.DIDatabaseHelper.getOASTFromBEST=function L(N){switch(N){case K.googleBigQuery:case K.googleBigQueryFFSQLModel:case K.googleBigQuerySingleTable:return I.googleBigQuery;case K.dropbox:return I.dropbox;case K.googleAnalytics:return I.googleAnalytics;case K.googleDrive:return I.googleDrive;case K.facebook:return I.facebook;case K.twitter:return I.twitter;case K.salesforce:return I.salesforce;default:return -1;}};mstrmojo.DI.DIDatabaseHelper.isOAuthSourceType=function C(N){var O=[I.googleBigQuery,I.dropbox,I.googleAnalytics,I.googleDrive,I.facebook,I.twitter,I.salesforce];return H.indexOf(O,N)!==-1;};mstrmojo.DI.DIDatabaseHelper.filterDBById=function B(P,N,O){return H.filter(P,function(S){var R=H.indexOf(N,S.id),Q;if(R>-1){Q=O;}else{Q=!O;}return Q;});};mstrmojo.DI.DIDatabaseHelper.filterDBByDispOption=function B(P,N,O){return H.filter(P,function(R){var Q=false;if((R.disp&N)===N){H.forEach(O,function(S){if(R.id===S){Q=true;return false;}});return !Q;}});};mstrmojo.DI.DIDatabaseHelper.getDBIds=function J(O){var N=[];H.forEach(O,function(P){N=N.concat(P.id);});return N;};mstrmojo.DI.DIDatabaseHelper.getUniqueDBTypes=function G(P){var O=[],N;H.forEach(P,function(Q){N=H.indexOf(O,Q.dbType);if(N<0){O.push(Q.dbType);}});return O;};mstrmojo.DI.DIDatabaseHelper.filterDBByAdminConfig=function(O,N){return H.filter(O,function(R){var P=H.indexOf(N,R.id),Q=true;if(P>=0){Q=false;}return Q;});};}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo._LoadsScript","mstrmojo._HasChildren","mstrmojo.Binding","mstrmojo._HasBindings");mstrmojo.Model=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._LoadsScript,mstrmojo._HasChildren,mstrmojo._HasBindings],{scriptClass:"mstrmojo.Model",init:function A(C){this._super(C);if(this.children){this.initChildren();}if(!this.parent){this.initBindings();}},destroy:function B(C){if(this.children){this.destroyChildren(true);}if(this.bindings){this.destroyBindings();}this._super(C);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.array");var C=mstrmojo.array;mstrmojo.ObjectBrowserDataProvider=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ObjectBrowserDataProvider",path:mstrConfig.taskURL,serverRequest:function(D,E){if(mstrApp&&mstrApp.serverRequest){mstrApp.serverRequest(D,E,{silent:true});}else{mstrmojo.xhr.request("POST",this.path,E,D,undefined,this.XServer,this.baseParams);}},fetchFolderContents:function(D,E,H){var F=D.blockCount,G={taskId:"searchMetadata",styleName:"MojoFolderStyle",blockCount:F,includeAncestorInfo:"true",includeObjectDesc:D.includeObjectDesc,encodeObjectInfo:false};if(D.folderLinksContextId){G.folderLinksContextId=D.folderLinksContextId;}if(D.sId){G.sessionState=D.sId;}if(E.fid){G.rootFolderID=E.fid;}else{if(E.fty){G.rootFolderType=E.fty;}}if(D.browsableTypes){G.objectType=D.browsableTypes;}if(E.blockBegin){G.blockBegin=E.blockBegin;}if(E.searchPattern){if(D.enableQuickSearch){G.quickSearch=D.enableQuickSearch;}G.searchPattern=E.searchPattern;if(E.recursive){G.recursive=E.recursive;}}this.serverRequest(G,H);},newFolder:function(G,H,F,D){var E={taskId:"createFolder",taskContentType:"json",folderID:G,name:H,description:F};this.serverRequest(E,D);},loadObjects:function B(H,I,D,G){var E=[],F=[];C.forEach(H,function(J){E.push(J.did);F.push(J.t);});if(H.length>0&&G){this.serverRequest({taskId:"getObjectInfo",objectIDs:E.join(","),objectTypes:F.join(","),includeDetails:true},I,D);}else{I.success();}},loadRecentSaveAsFolders:function A(E){var D={taskId:"getRecentSaveAsFolders"};this.serverRequest(D,E);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo._LoadsScript","mstrmojo.Binding","mstrmojo._HasBindings","mstrmojo._HasMarkup","mstrmojo._HasTooltip","mstrmojo.css");mstrmojo.Widget=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._LoadsScript,mstrmojo._HasBindings,mstrmojo._HasMarkup,mstrmojo._HasTooltip],{scriptClass:"mstrmojo.Widget",domNode:null,hasRendered:false,visible:true,enabled:true,tooltip:"",cssClass:"",cssText:"",cssDisplay:"block",slot:"",alias:"",parent:null,init:function A(C){this._super(C);var D=this.parent;if(!D||D.hasInitBindings){this.initBindings();}},destroy:function B(C){if(this.hasRendered){this.unrender(C);}if(this.bindings){this.destroyBindings();}this._super();},invalidate:mstrmojo.emptyFn,widgetResized:mstrmojo.emptyFn});mstrmojo.Widget.cssTextMarkupMethod=function(){this.domNode.style.cssText=this.cssText||"";};mstrmojo.Widget.visibleMarkupMethod=function(){this.domNode.style.display=(this.visible)?this.cssDisplay:"none";};mstrmojo.Widget.topMarkupMethod=function(){var C=this.top;if(C){this.domNode.style.top=C;}};mstrmojo.Widget.leftMarkupMethod=function(){var C=this.left;if(C){this.domNode.style.left=C;}};mstrmojo.Widget.heightMarkupMethod=function(){var C=this.height;if(C){this.domNode.style.height=C;}this.widgetResized();};mstrmojo.Widget.widthMarkupMethod=function(){var C=this.width;if(C){this.domNode.style.width=C;}this.widgetResized();};mstrmojo.Widget.enabledMarkupMethod=function(){mstrmojo.css.toggleClass(this.domNode,"disabled",!this.enabled);};}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.hash","mstrmojo._Fetchable");var A=mstrmojo.hash;mstrmojo.mstr.DocElementDataHelper=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._Fetchable],{scriptClass:"mstrmojo.mstr.DocElementDataHelper",source:null,items:null,browseConfig:null,concat:true,init:function(B){var C=B&&B.browseConfig;this.blockBegin=(C&&C.blockBegin)||1;this.blockCount=(C&&C.blockCount)||mstrApp.elementsBlockCount||30;if(this._super){this._super(B);}},getBrowseConfig:function(){if(!this.browseConfig){this.browseConfig={blockBegin:this.blockBegin,blockCount:this.blockCount};}return this.browseConfig;},_retrieveItems:function(E,C,B){var D=this.getBrowseConfig();D.blockBegin=E;mstrmojo.func.override({success:function(F){if(this._super){this._super(mstrmojo.hash.copy(F,{items:F.es,totalSize:F.sz}));}}},C);this.source.browseElements(D,C,B);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");function B(J,I){this.raiseEvent({name:"viCompBuilt",type:J,widget:I});}mstrmojo.vi.models.VIComponentMap=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.vi.models.VIComponentMap",init:function G(I){this._super(I);this.relativePanels={};this.comps={};},addRelativePanel:function H(I){this.relativePanels[I]=true;},isRelativePanel:function F(I){return !!this.relativePanels[I];},isComponent:function C(J,I){return this.getComponentKey(J)===I;},getComponent:function A(I){return this.comps[I];},getComponentKey:function D(J){var I=this.getComponent(J);return(I&&I.k)||"";},createComponent:function E(L,K,J){B.call(this,L);var I=new K(J);this.comps[L]=I;B.call(this,L,I);return I;}});mstrmojo.vi.models.VIComponentMap.TYPES={FILTER_STACK:1,FILTER_PANEL:2,PAGEBY_STACK:3,PAGEBY_PANEL:4,VIZ_CONTENT:5,MAIN_CONTENT:6};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.Obj","mstrmojo.string","mstrmojo.hash","mstrmojo.expr","mstrmojo.num","mstrmojo.mstr.EnumNodeDimty");var G=mstrmojo.array,S=mstrmojo.expr,L=S.ET,K=S.TP,D=S.DTP,M=mstrmojo.mstr.EnumNodeDimty,P=S.ET2TGT,O=S.ET2COND,C=mstrmojo.meta.TP,B=mstrmojo.num;function Q(V,A){var U=(A&&A.did)?A.did.split(S.FN_SEP):null,E=U&&parseInt(U[0],10),T=U&&parseInt(U[1],10),W=V.et;V.fnt=E;V.fn=T;if(W!=L.AE&&S.fn_List(T,E)){V.et=L.AL;V.a2=null;V.cs=null;}else{if(W==L.AL&&!S.fn_List(T,E)){V.et=L.AQ;V.cs=null;}else{if(W==L.MC&&!S.fn_AC_MC(T,E)){V.et=L.MQ;V.m2=null;}else{if(W==L.AC&&!S.fn_AC_MC(T,E)){V.et=L.AQ;V.a2=null;}}}}switch(T){case S.FN.IS_NULL:case S.FN.IS_NOT_NULL:V.a2=null;V.a3=null;V.fm2=null;V.fm3=null;V.m2=null;V.m3=null;V.cs=null;break;case S.FN.BETWEEN:case S.FN.NOT_BETWEEN:break;default:V.a3=null;V.fm3=null;V.m3=null;while(V.cs&&V.cs.length>1){V.cs.pop();}}}function H(Y,Z,a){var E=2+Z,W;if(B.isBigDecimal(a.v)){a.dtp=D.BIGDECIMAL;}switch(a.t){case K.PROMPT:W=Y.cs;var X;if(!W){W=[];Y.cs=W;}W[Z]={};X=W[Z];X.p=a;Y["a"+E]=null;Y["m"+E]=null;switch(Y.et){case L.AC:Y.et=L.AQ;break;case L.MC:Y.et=L.MQ;break;}break;case K.METRIC:Y["a"+E]=null;Y.cs=null;Y.et=L.MC;Y["m"+E]=a;break;case K.ATTR:Y["m"+E]=null;Y.cs=null;Y.et=L.AC;Y["a"+E]=a;Y["fm"+E]=null;break;default:Y["a"+E]=null;Y["m"+E]=null;W=Y.cs;if(!W){W=[];Y.cs=W;}if("did" in a){Y["a"+E]=null;Y["fm"+E]=null;Y["m"+E]=null;if(W[Z]&&W[Z].p){W[Z].p=null;}}else{if(a&&a.v!=null){W[Z]=a;}else{if(W[Z]&&Y.et!==L.AL){W=W.splice(Z,1);}}}if(!a.skipET){switch(Y.et){case L.MC:if((!Y.c2||!Y.m3)&&(!Y.m2||!Y.c3)){Y.et=L.MQ;}break;case L.AC:Y.et=L.AQ;break;case L.AL:if(!("did" in a)&&a.v){var A,U=a.dtp;W=[];A=a.v.split(mstrConfig.listSep);for(var T=0,V=A.length;T<V;T++){W.push({v:mstrmojo.string.trim(A[T]),dtp:U});}Y.cs=W;}break;}}}}var J={};J[L.AQ]={target:1,fm:1,fn:1,cs:1};J[L.AL]={target:1,fm:1,fn:1,cs:1};J[L.AE]={target:1,fn:1,es:1};J[L.AC]={target:1,a2:1,a3:1,fm:1,fm2:1,fm3:1,fn:1};J[L.MQ]={target:1,fn:1,cs:1,dmy:1};J[L.MC]={target:1,fn:1,m2:1,m3:1,dmy:1};J[L.F]={target:1};J[L.R]=J[L.F];J[L.XML]={target:1};J[L.ANDOR]={target:1};var I=function(A){return A!==null&&A!==undefined;};var N=function(Z){if(Z.data){return true;}if(!Z||!I(Z.et)){return false;}var Y=true,A=J[Z.et],W=Z.cs,V;Y=Y&&(!A.target||Z[P[Z.et]]);Y=Y&&(!A.fm||Z.fm);Y=Y&&(!A.fn||I(Z.fn));var U=S.fnCstCount(Z.fn,Z.fnt);if(Y&&A.cs){for(V=0;V<U;V++){Y=Y&&W&&I(W[V]);}}if(Y){var X=[P[Z.et],"fm"];for(var E=0;E<2;E++){for(V=0;V<U;V++){var a=X[E]+(2+V);Y=Y&&(!A[a]||Z[a]);}}}Y=Y&&(!A.es||Z.es&&(Z.es.length>0));var T=Z.dimtyTypes;Y=Y&&(!A.dmy||T[M.NodeDimtyUnspecified]||T[M.NodeDimtyNone]||(T[M.NodeDimtyOutputLevel]&&Z.dmy&&Z.dmy.uts&&(Z.dmy.uts.length>0)));return Y;};mstrmojo.ConditionModel=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ConditionModel",data:null,completed:false,defaultETAttr:L.AQ,init:function(A){if(this._super){this._super(A);}this._updateCompleted();},edit:function R(o,e,AA){var V=this[o];if(V===e){return ;}this.etWas=this.et;switch(o){case"not":e=!!(e&&e.did===S.FN.NOT);V=!!this.not;if(e===V){return ;}this.not=!!e||null;break;case"target":var AE=this.et;if(e){switch(e[C]){case K.ATTR:case K.CONS:V=this.a;if(AE!==L.AQ&&AE!==L.AE&&AE!==L.ANDOR){this.et=this.defaultETAttr;this.m=null;this.m2=null;this.m3=null;this.r=null;this.f=null;}if(AE!==L.AE){this.fn=null;this.fnt=null;}this.fm=null;this.fm2=null;this.fm3=null;this.cs=null;break;case K.METRIC:V=this.m;if((AE!==L.MQ)&&(AE!==L.MC)){this.et=L.MQ;this.fm=null;this.fm2=null;this.fm3=null;this.fn=null;this.fnt=null;this.a=null;this.a2=null;this.a3=null;this.r=null;this.f=null;this.cs=null;this.dmt=M.NodeDimtyUnspecified;}this.m2=null;break;case K.REPORT:V=this.r;if(AE!==L.R){this.et=L.R;this.fm=null;this.fm2=null;this.fm3=null;this.fn=null;this.fnt=null;this.a=null;this.a2=null;this.a3=null;this.m=null;this.m2=null;this.m3=null;this.f=null;}break;case K.FILTER:V=this.f;if(AE!==L.F){this.et=L.F;this.fm=null;this.fm2=null;this.fm3=null;this.fn=null;this.fnt=null;this.a=null;this.a2=null;this.a3=null;this.m=null;this.m2=null;this.m3=null;this.r=null;}break;case K.PROMPT:V=this.prms&&this.prms[0];if(AE!==L.XML){this.et=L.XML;this.fm=null;this.fm2=null;this.fm3=null;this.fn=null;this.fnt=null;this.a=null;this.a2=null;this.a3=null;this.m=null;this.m2=null;this.m3=null;this.r=null;this.f=null;}break;}}this.es=null;this.data=null;this[P[this.et]]=e;break;case"fm":if(e&&e[C]==="fn"){this.et=L.AE;this.fm=null;Q(this,e);}else{this.fm=e;if(e&&(this.et==L.AE)){this.et=L.AQ;}this.fnt=null;this.fn=null;this.cs=null;this.a2=null;this.fm2=null;}break;case"fm2":case"fm3":this[o]=e;break;case"fn":Q(this,e);break;case"es":var AH=this.es;if(e&&e.removed&&AH){G.removeItems(AH,e.itemIdField,e.removed);}if(e&&e.added){if(!AH){AH=e.added.concat();this.es=AH;}else{G.insert(AH,AH.length,e.added);}}break;case"c0":H(this,0,e);break;case"c1":H(this,1,e);break;case"dmy":var AB=this.dmy;if(!AB){AB={cc:true,fres:true,uts:[]};this.dmy=AB;}var x=AB&&AB.uts;if(!x){x=[];AB.uts=x;this.dmt=M.NodeDimtyOutputLevel;}var T={};T[S.TP.ATTR]=true;T[S.TP.DIM]=true;if(e&&e.removed){var j=[],A=false,Z=[],U=false;for(var m=0,W=e.removed,E=W.length;m<E;m++){var Y=W[m],AD=Y[C] in T;if(AD){U=true;}else{A=true;}var l=AD?Z:j;l.push(Y);}if(A){G.removeItems(x,"did",j);}if(U){var AG={};for(var g=0,f=x&&x.length;g<f;g++){var d=x[g];if(d&&d.utgt){AG[d.utgt.did]=g;}}var X=[];for(var AC=0,z=Z.length;AC<z;AC++){var k=AG[Z[AC].did];if(k>-1){X.push(k);}}X.sort(G.numSorter);for(var w=X.length-1;w>-1;w--){x.splice(X[w],1);}}}if(e&&e.added){var AI=[],p=S.DMY_TP.DIM,t=S.DMY_TP.ATTR;for(var AF=0,y=e.added,h=y.length;AF<h;AF++){var q=y[AF];AI.push((q[C] in T)?{utgt:q,utp:q[C]===K.DIM?p:t,agg:1,flt:2,gb:true,rps:0,n:q.n}:q);}G.insert(x,x.length,AI);}break;case"data":this.data=e;break;}this._updateCompleted();if(!AA){this.raiseEvent({name:"edit",prop:o,value:e,valueWas:V});}},get:function F(){var A=this.data?this.data:this;var E=O[A.et]||[];E.push("et");return mstrmojo.hash.copyProps(E,A);},_updateCompleted:function(){this.set("completed",N(this));}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.func","mstrmojo.Obj");var K=mstrmojo.hash;var P=0;var F=[];var J={};var L=false;function I(T){var U=T.callback;if(U.submission){U.submission(T.id,this.userInteractionRequired(T),T);}this.submitRequest(T);}function G(){if(F.length&&!L){I.call(this,F.shift());}}mstrmojo.ServerProxy=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ServerProxy",transport:null,cnt:0,request:function E(d,a,U,V){if(U){this.cancelRequests();}var X=this.id,Y=this.transport,T=mstrmojo.now()+a.taskId+P++,W=d.canceled||mstrmojo.emptyFn;d.canceled=function(e){W();d.complete(true);return Y.cancelRequest(e);};d=mstrmojo.func.wrapMethods(d,{complete:function(e){mstrmojo.all[X]&&mstrmojo.all[X].deleteRequest(e);}});var Z=!K.isEmpty(this._requests),b=this.createRequest(T,d,a,V),c=(L||Z)&&!V.doNotHold;if(c){F.push(b);}else{I.call(this,b);}return T;},hasRequests:function O(){return !K.isEmpty(this._requests)||L;},createRequest:function Q(V,X,W,T){var U=this._requests;if(!U){U=this._requests={};}U[V]={id:V,callback:X,params:W,config:T};return U[V];},submitRequest:function M(T){this.transport.serverRequest(this.id,T.id,T);},cancelRequests:function S(){var T=false;K.forEach(this._requests,function(U){if(U.gotResponse===undefined){T|=U.callback.canceled(U.id);}});this._requests={};F=[];return T;},cancelRequest:function B(X){var U=false,W=this._requests[X],V,T=F.length;for(V=0;V<T;V++){if(F[V]===W){break;}}if(V<T){F.splice(V,1);delete this._requests[X];U|=W.callback.canceled(W.id);}return U;},response:function A(X,T,V){$MAPF(false,"AndroidServerTransport","transportRequest");var W=this.getRequest(X);if(W){W.gotResponse=true;var Y=W.callback,U=(T&&!V.mstrerr)?"success":"failure";try{if(Y[U]){Y[U](V,W);}}finally{Y.complete(X);}}G.call(this);},deleteRequest:function N(U){var T=this._requests;delete T[U];},getRequest:function H(U){var T=this._requests;return T&&T[U];},userInteractionRequired:function C(T){return false;},addLoadingGraph:function D(T){J[T]=true;L=true;},removeLoadingGraph:function R(T){delete J[T];if(K.isEmpty(J)){L=false;G.call(this);}},_serverRequestParallel:function(U,W,X,T){var V=T||new mstrmojo.SimpleXHR();V.request("POST",U,{success:function(Y){if(X.success){X.success(Y);}},failure:function(Y){if(X.failure){X.failure({code:Y.getResponseHeader("X-MSTR-TaskErrorCode"),message:Y.getResponseHeader("X-MSTR-TaskFailureMsg")});}},complete:function(){if(X.complete){X.complete();}}},W);},serverRequestParallel:function(U,V,T){this._serverRequestParallel(mstrConfig.taskURL,U,V,T);},upload:function(Z,Y,X,U,W,V,T){mstrmojo.xhr.upload("POST",mstrConfig.taskURL,Z,Y,X,U,W,V,T);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");var D={TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4};var C={LEFT_TO_RIGHT:0,RIGHT_TO_LEFT:1};mstrmojo.ui.PopupConfig=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ui.PopupConfig",ENUM_CORNERS:D,isHostedWithin:true,position:null,hostProxyCssClass:"",hostId:"",hostElement:null,anchorElement:null,popupHandlers:null,alignment:null,alignWithAnchor:false,useTooltip:false,useDarkTheme:false,init:function H(I){this.clear();this._super(I);},setAlignment:function E(I,J){this.alignment={host:I,popup:J};},addPopupHandlers:function F(I,K,J){this.popupHandlers[I]={open:K,close:J};},clear:function B(){this.popupHandlers={};var I=this.ENUM_CORNERS;this.alignment={host:I.BOTTOM_LEFT,popup:I.TOP_LEFT};},destroy:function(I){this.anchorElement=null;this.hostElement=null;if(this._super){this._super(I);}}});mstrmojo.ui.PopupConfig.ENUM_CORNERS=D;mstrmojo.ui.PopupConfig.directionCfg={menuDirection:C.LEFT_TO_RIGHT,isRightToLeft:function G(){return this.menuDirection===C.RIGHT_TO_LEFT;},setDirection:function A(I){this.menuDirection=I?C.RIGHT_TO_LEFT:C.LEFT_TO_RIGHT;}};}());(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var D=1,B="mstrmojo-itemwrap";mstrmojo.ListMapperHoriz=mstrmojo.provide("mstrmojo.ListMapperHoriz",mstrmojo.hash.copy({markupPrefix:'<table class="mstrmojo-itemwrap-table" cellspacing="0" cellpadding="0"><tbody><tr>',markupSuffix:"</tr></tbody></table>",itemWrapperPrefix:function(H){return'<td class="'+this.getWrapperCss(H)+'">';},getWrapperCss:function(H){return"mstrmojo-itemwrap-td";},itemWrapperPrefill:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",itemWrapperSuffix:"</td>",wrapperNodes:function G(H){return this.wrapperParentNode(H).cells;},wrapperParentNode:function F(H){return H.firstChild.rows[0];},createWrapperNode:function E(H){var I=H.ownerDocument,J=I.createElement("td");return J;},findScrollRange:function C(U,L,S,X,I,P,Y,W){var Q=this.wrapperNodes(U),R=parseInt(L/2,10),K=parseInt(Math.log(L)/Math.log(2),10),J=0,H=L-1,T=I+P,M=Q[0].offsetLeft,O;for(var V=1;V<=K;V++){O=Q[R].offsetLeft-M+Y;if(O<=I){J=R;}else{if(O>=T){H=R;}}var N=Math.round(L/Math.pow(2,V+1));R+=(O>I)?-N:N;R=Math.min(Math.max(0,R),L-1);}return{start:J,end:H};},findIndex:function A(I,M,K){if(M&&K){var H=I.domNode,L=this.wrapperParentNode(M),J=K.parentNode;while(J){if(J===L){return mstrmojo.array.findBin(this.wrapperNodes(M),K,"offsetLeft",I.items&&I.items.length);}else{if(J===H){break;}}K=J;J=K.parentNode;}}return -1;}},mstrmojo.hash.copy(mstrmojo.ListMapper)));})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.taphold");var A=false,Q=mstrmojo.dom,U=16;mstrmojo._HasContextMenu=mstrmojo.provide("mstrmojo._HasContextMenu",{cm:null,cmPos:null,itemField:"n",itemIdField:"did",itemChildrenField:"items",dynamicUpdate:false,queryChecked:function(V){return false;},queryEnabled:function(V){return true;},queryVisible:function(V){return true;},executeCommand:function P(V){},item2textCss:function E(V){return V.cssClass||V.cmdId||("cmd"+V[this.itemIdField]);},showContextMenu:function J(){if(!A){mstrmojo.requiresCls("mstrmojo.ContextMenu");A=true;}var b=this._subMenu,Z=this.getMenuPosition();if(!b){var d=(this.menuZIndex||this.zIndex||10)+1,X={left:Z.x+"px",top:Z.y+"px",zIndex:d,visible:false,dynamicUpdate:this.dynamicUpdate,itemField:this.itemField,itemIdField:this.itemIdField,itemChildrenField:this.itemChildrenField,_cmSource:this.getContextMenuSource(),items:this.getContextMenuItems(),cssClass:this.getContextMenuCssClass(),placeholder:document.body.appendChild(document.createElement("div")),parent:this};b=new mstrmojo.ContextMenu(X);b.render();this._subMenu=b;}else{b.set("left",Z.x+"px");b.set("top",Z.y+"px");}if(this.dynamicUpdate){var W=b.ctxtBuilder.itemWidgets,Y=W&&W.length,V,a,c=this.getContextMenuSource();for(V=0;V<Y;V++){a=W[V];if(c.queryVisible){a.set("visible",c.queryVisible(a.data));}if(c.queryChecked){a.set("checked",c.queryChecked(a.data));}if(c.queryEnabled){a.set("enabled",c.queryEnabled(a.data));}}}b.set("visible",true);this.callOnContextMenuOpen();this.adjustMenuPosition();this.attachMousedownEvent();},hideContextMenu:function I(){var V=this._subMenu;if(V&&V.visible){this._subMenu.set("visible",false);this.callOnContextMenuClose();}},adjustMenuPosition:function O(){var V=this._subMenu,Y=this._subMenu.domNode,X=Y.offsetHeight,W=Y.offsetWidth,b=Q.windowDim(),a=Q.position(Y,false),Z=Q.position(Y,true);if((a.x+W+U)>b.w){V.set("left",(b.w-W-U+(Z.x-a.x))+"px");}if((a.y+X+U)>b.h){V.set("top",(b.h-X-U+(Z.y-a.y))+"px");}},attachMousedownEvent:function M(){var V=this;if(!this._close_handler){this._close_handler=function(W){V.closeMenuHandler(W);};}Q.attachEvent(document.body,"mousedown",this._close_handler);},closeMenuHandler:function R(V){if(!this.isOnMySubmenu(Q.eventTarget(self,V))){this.closeMenuTree();}},isOnMySubmenu:function N(Z){var W=this._subMenu;if(!W){return false;}if(Q.contains(W.domNode,Z,true,document.body)){return true;}var a=W.ctxtBuilder.itemWidgets,V=a&&a.length,Y,X;for(Y=0;Y<V;Y++){X=a[Y];if(X.isOnMySubmenu(Z)){return true;}}return false;},oncmChange:function K(){delete this._subMenu;},callOnContextMenuOpen:function D(){if(this.onContextMenuOpen){this.onContextMenuOpen();}},callOnContextMenuClose:function C(){if(this.onContextMenuClose){this.onContextMenuClose();}},getContextMenuItems:function T(){return this.cm;},getContextMenuCssClass:function B(){return this.cmCssClass||"";},getContextMenuSource:function H(){return this;},getMenuPosition:function F(){if(this.cmPos){return this.cmPos;}var V=Q.position(this.domNode,true);return{x:Math.round(V.x),y:Math.round(V.y+V.h)};},isSeparatorItem:function G(V){return V[this.itemIdField]===-1||V[this.itemField]==="-";},hasSubmenu:function L(V){return !!V[this.itemChildrenField];},closeMenuTree:function S(X){var W=this.activeMenuItem,V=this._cmSource||this;if(!W){if(X){this.activeMenuItem=X;}else{V.hideContextMenu();}return ;}if(W===X){return ;}if(X){this.activeMenuItem=X;if(X.parent.parent===W){return ;}if(X.parent===W.parent){W.hideContextMenu();return ;}}else{X=V;this.activeMenuItem=null;}W.hideContextMenu();while(W!==V){W=W.parent.parent;if(W!==X||V===X){W.hideContextMenu();if(V===X){Q.detachEvent(document.body,"mousedown",this._close_handler);}}if(W.parent===X.parent){break;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.WidgetListBuilder");mstrmojo.WidgetTreeBuilder=mstrmojo.provide("mstrmojo.WidgetTreeBuilder",mstrmojo.mixin({newContext:function A(B){var D=this._super(B);if(!B.itemFunction&&D.itemFunc){var C=D.itemFunc;D.itemFunc=function(G,F,H){var E=C(G,F,H);if(E){E.tree=H.tree||H;}return E;};}return D;}},mstrmojo.hash.copy(mstrmojo.WidgetListBuilder)));})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.registry","mstrmojo._HasContextMenu","mstrmojo.Widget");var F=mstrmojo.dom,K=mstrmojo.css,N=16;mstrmojo.ContextMenuItem=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._HasContextMenu],{scriptClass:"mstrmojo.ContextMenuItem",SUBMENU_SHIFT:3,visible:true,checked:false,enabled:true,buildDom:function(){var U=document.createElement("tr"),V=this.data,Y=this._cmSource,R,S;U.id=this.id;U.className="mstrmojo-ContextMenuItem "+(Y.isSeparatorItem(V)?"separator":Y.item2textCss(V));var W=this,X=function(){W.handleMouseOver();},T=function(){W.handleMouseOut();},Q=function(){W.handleClick();};F.attachEvent(U,"mouseover",X);F.attachEvent(U,"mouseout",T);F.attachEvent(U,"click",Q);R=document.createElement("td");U.appendChild(R);R.className="mstrmojo-CMI-left";S=document.createElement("img");S.src="../images/1ptrans.gif";R.appendChild(S);R=document.createElement("td");U.appendChild(R);R.className="mstrmojo-CMI-text";if(Y.isSeparatorItem(V)){S=document.createElement("img");S.src="../images/1ptrans.gif";}else{S=document.createElement("div");S.className="mstrmojo-CMI-content";R.innerHTML=V.itemWidget?"&nbsp":V[this.itemField];}R.appendChild(S);R=document.createElement("td");U.appendChild(R);R.className="mstrmojo-CMI-right "+(this.hasSubmenu?"sm":"");S=document.createElement("img");S.src="../images/1ptrans.gif";R.appendChild(S);return U;},buildRendering:function L(){this._super();var Q=this.data.itemWidget;if(Q){Q.placeholder=this.domNode.cells[1].children[0];Q.data=this.data;Q=mstrmojo.insert(Q);Q.render();Q.parent=this;this.itemWidget=Q;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"":"none";},oncheckedChange:function(){K.toggleClass(this.domNode,["checked"],this.checked);},onenabledChange:function(){K.toggleClass(this.domNode,["disabled"],!this.enabled);}},getMenuPosition:function I(){var Q=F.position(this.domNode,true);return{x:Math.round(Q.x+Q.w-this.SUBMENU_SHIFT),y:Math.round(Q.y)};},getContextMenuItems:function B(){return this.data[this.itemChildrenField];},getContextMenuCssClass:function D(){return this.data.cmCssClass||"";},callOnContextMenuOpen:function M(){var Q=this.data;if(Q.onContextMenuOpen){Q.onContextMenuOpen.apply(this,[]);}},callOnContextMenuClose:function A(){var Q=this.data;if(Q.onContextMenuClose){Q.onContextMenuClose.apply(this,[]);}},attachMousedownEvent:function J(){},getContextMenuSource:function P(){return this._cmSource;},adjustMenuPosition:function G(){var Q=this._subMenu,T=this._subMenu.domNode,S=T.offsetHeight,R=T.offsetWidth,W=F.windowDim(),V=F.position(T,false),U=F.position(T,true);if((V.x+R+N)>W.w){Q.set("left",(F.position(this.domNode,true).x-R)+"px");}else{Q.set("left",(F.position(this.domNode,true).x+this.domNode.offsetWidth)+"px");}if((V.y+S+N)>W.h){Q.set("top",(W.h-S-N+(U.y-V.y))+"px");}},handleMouseOver:function O(){var Q=this,R=function(){if(Q.hasSubmenu){Q.showContextMenu();}Q._cmSource.closeMenuTree(Q);Q._mouseOverTimer=null;};if(this._cmSource.activeMenuItem!==this){this._mouseOverTimer=window.setTimeout(R,80);}},handleMouseOut:function H(){if(this._mouseOverTimer){window.clearTimeout(this._mouseOverTimer);this._mouseOverTimer=null;}},closeMenuTree:function C(){this._cmSource.closeMenuTree();},handleClick:function E(){if(this.hasSubmenu){return ;}var Q=this._cmSource,R=this.data;if(!this.itemWidget){if(!Q.isSeparatorItem(R)&&Q.queryEnabled(R)){if(Q.executeCommand){Q.executeCommand(this.data);}Q.closeMenuTree();}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var C=1;mstrmojo._hasWidgetListMapper={buildItemWrappers:function A(H,G,F,E,J,I){E.first=J;E.last=I;return this._super(H,G,F,E,0,0);},postBuildRendering:function B(K,I,H,G,F){var J=F.first;if(J){this.fillItemWrappers(K,I,H,G,F,0,J);}if(F.last){var E=I&&I.length||0,L=Math.max(Math.max(0,E-F.last),J);this.fillItemWrappers(K,I,H,G,F,L,E);}if(this._super){this._super(K,I,H,G,F);}},fillItemWrappers:function D(F,N,K,R,M,E,I,Q){var L=(N&&N.length)||0,P=this.wrapperNodes(F),S=M.itemStatus;for(var J=E,O=Math.min(I+1,L),H=0;J<O;J++){if(S[J]!==C){var G=K.build(R,M,N[J],J);if(G){G.placeholder=P[J].firstChild;G.render();}H++;if(H===Q){break;}}}return H;},onchange:null};mstrmojo.WidgetListMapper=mstrmojo.provide("mstrmojo.WidgetListMapper",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapper)));mstrmojo.WidgetListMapper.RENDERED=C;mstrmojo.requiresCls("mstrmojo.ListMapperHoriz");mstrmojo.WidgetListMapperHoriz=mstrmojo.provide("mstrmojo.WidgetListMapperHoriz",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapperHoriz)));})();(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.ui._HasUITheme","mstrmojo.vi.ui.theme","mstrmojo.dom");function f(g,j){if(!mstrmojo.DocInfoWindow){return ;}var h=g;while(h){if(h instanceof mstrmojo.DocInfoWindow){h[j?"registerScrollLock":"releaseScrollLock"](this);break;}h=h.parent;}}var N=mstrmojo.array,D=mstrmojo.dom,S=mstrmojo.hash,d=mstrmojo.css,G="px",K=mstrmojo.ui._HasUITheme.EnumThemeNames;var C=false;function M(g,j){if(!mstrmojo.DocInfoWindow){return ;}var h=g;while(h){if(h instanceof mstrmojo.DocInfoWindow){h[j?"registerLock":"releaseLock"](this);this.lockIW=j?h:null;break;}h=h.parent;}}var V=mstrmojo.ui.PopupConfig,O=V.directionCfg,B=V.ENUM_CORNERS,Y=B.TOP_LEFT,U=B.TOP_RIGHT,I=B.BOTTOM_RIGHT,H=B.BOTTOM_LEFT;function J(g){return(g===H||g===Y);}function c(g){return(g===U||g===I);}function Q(g){return(g===I||g===H);}function T(g){return(g===U||g===Y);}function Z(p,j,y,AE){var AH=y.x,AG=y.y,AD=y.w||0,t=y.h||0,h=AE.w,z=AE.h,AC=p.alignment,n=AC.popup,l=AC.host,AF=c(l),AI=Q(l),AB=false,w=false,k=false,x=false,m=false,u=false,AA=D.isMobile,q=mstrmojo.ui.PopupConfig.directionCfg;if(J(n)){var o=AH+h+(AF?AD:0);AB=j.w<o;m=AA&&(AB||q.isRightToLeft());}if(T(n)){var v=AG+z+(AI?t:0);w=j.h<v;u=AA&&w;}if(c(n)||m){var r=AH-h+((AF&&!m)?AD:0);k=r<0;}if(Q(n)||u){var g=AG-z+((AI&&!u)?t:0);x=g<0;}return{top:x,bottom:w,left:k,right:AB};}function F(h){var g=this.popupConfig;if(g){S.forEach(g.popupHandlers,function(k,l){var j=k[h?"open":"close"];if(j){j.call(mstrmojo.all[l]||j,!!h);}});}}function L(h){var g=this.popupConfig;if(g&&!g.isHostedWithin){var j=this.hostProxy;if(j){j.style.display=h?"":"none";}}}function e(g){return g!==undefined&&g!==null&&!isNaN(g);}mstrmojo._IsPopup={visible:false,lockIWForScroll:false,disposable:true,opener:null,onOpen:mstrmojo.emptyFn,onClose:mstrmojo.emptyFn,popupConfig:null,hostProxy:undefined,open:function P(j,g){F.call(this,true);if(this.updatePopupConfig){this.updatePopupConfig(g,j);}else{S.forEach(g,function(m,l){this.set(l,m);},this);}var h="popup-mid-render";this.set("opener",j);if(!this.hasRendered){var k=this.visible;this.visible=false;this.render();d.addClass(this.domNode,h);this.set("visible",k);}if(this.nudge){this.domNode.style.top="-10000px";}L.call(this,true);this.set("visible",true);if(this.lockIWForScroll){f.call(this,this.opener,true);}if(g&&g.lockIW){M.call(this,g.lockIW,true);}if(this.nudge){this.nudge();}if(this.adjustSize){this.adjustSize();}this.adjustCornersForPopupOverflow();this.onOpen();d.removeClass(this.domNode,h);},adjustCornersForPopupOverflow:function a(){var r=this.popupConfig;if(!r){return false;}var AW=(r.includeScroll!==undefined)?r.includeScroll:true;var m=r.anchorElement||r.hostElement,k=r.position||D.position(m,AW),AC=m&&m.style&&m.style.zIndex;if(!r.isHostedWithin){var Ae=this.hostProxy,AV=this.hostProxy=document.createElement("div");document.body.appendChild(AV);AV.appendChild(this.domNode);if(Ae){Ae.parentNode.removeChild(Ae);}var AM=AV.style,AN={x:"left",y:"top",w:"width"};AV.className=r.hostProxyCssClass;AM.position="absolute";AM.background="none";d.addClass(AV,"mstrmojo-popup-widget-hosted");AM.height="0";N.forEach(["x","y","w"],function(An){var Am=k[An];if(e(Am)){AM[AN[An]]=Am+G;}});}var AB=r.ENUM_CORNERS,Ak=AB.BOTTOM_LEFT,AO=AB.BOTTOM_RIGHT,h=AB.TOP_RIGHT,AH=AB.TOP_LEFT;var p=D.position(document.body),AQ=D.position(this.domNode),AZ=Z(r,p,k,AQ),o=AZ.right,AA=AZ.bottom,Al=AZ.left,AU=AZ.top,AD=r.alignment,AL=AD.popup,j=AD.host,v=AL,z=j,AP=D.isMobile,y=m&&m.classList&&m.classList.contains("mstrmojo-ui-Menu-item"),AR=this.id,w=m&&m.parentNode,AS=w&&w.parentElement,AK=m||this.domNode,AI,Af=this.domNode.style;if(AS&&AS.classList.contains("mstrmojo-ui-Menu")){AK=AS;}AI=D.position(AK);if(y&&((Al&&o)||(AU&&AA))){if(AS){Af.top=AI.y+"px";Af.left=AI.x+"px";var Ad=document.getElementsByClassName("mstrmojo-ui-Menu");N.forEach(Ad,function(Am){if(AR!==Am.id){Am.style.visibility="hidden";}});}r.anchorElement=AK;r.position={h:0,w:0,x:(AI.x+AQ.w)>p.w?Math.min(AI.x,5):AI.x,y:(AI.y+AQ.h)>p.h?Math.min(AI.y,90):AI.y};this.adjustCornersForPopupOverflow();return ;}if(O.isRightToLeft()&&(!AP||AQ.w>0)){if(!AP||!Al){o=true;}else{if(!AP||!o){O.setDirection(false);this.resetDirection=true;if(AP){z=(z===h)?AH:Ak;}}}}else{if(o){O.setDirection(true);this.resetDirection=true;}}if(o||Al){if(J(z)){z=T(z)?h:AO;}else{if(c(z)){z=T(z)?AH:Ak;}}if(o&&J(v)){v=T(v)?h:AO;}else{if(Al&&c(v)){v=T(v)?AH:Ak;}}}if(AA||AU){if(J(z)){z=T(z)?Ak:AH;}else{if(c(z)){z=T(z)?AO:h;}}if(AA&&T(v)){v=J(v)?Ak:AO;}else{if(AU&&Q(v)){v=J(v)?AH:h;}}}if(AU||o||AA||Al){if(C){console.log("Overflow directions: "+JSON.stringify(AZ));}this._orgalgn={host:j,popup:AL};r.setAlignment(z,v);}if(!r.isHostedWithin){if(e(k.y)&&e(k.h)){this.hostProxy.style.top=(k.y+(Q(v)?(r.alignWithAnchor===true?k.h:0):(r.alignWithAnchor===true?0:k.h)))+G;this.hostProxy.style.zIndex=(e(AC)&&(AC>100))?AC+1:101;}}var AT,Ah={};if(r.isHostedWithin&&!!this.opener){AT=d.getComputedStyle(this.opener.domNode);}N.forEach(["left","right","top","bottom"],function(Am){Ah[Am]=AT?parseInt(AT["border-"+Am+"-width"]||0,10):0;});var Ab=Q(z),Ac=c(z),u=Q(v),n=c(v),AX=function(An,Am){return"calc(100% + "+(Am?Ah[An]:0)+"px)";},x=function(An,Am){return(Am?-Ah[An]:0)+"px";};var q,AY,g,l;q=AY=g=l="auto";if(u){g=Ab?x("top"):AX("top");}else{q=Ab?AX("bottom"):x("bottom");}if(n){AY=Ac?x("left"):AX("left");}else{l=Ac?AX("right"):x("right");}Af.top=q;Af.right=AY;Af.bottom=g;Af.left=l;var t=D.position(this.domNode),AJ=5;if(AA||AU){var Ai=t.y,AE=D.getMaxScrollHeight()+"px",Ag=this.scrollNode,AF=Ag&&Ag.style.maxHeight;if(Ai<0||(Ai+t.h>p.h)){if(Ag&&AE!==AF){Ag.style.maxHeight=AE;this.updateScrollbars();}var Aa=(-k.y+AJ)+G;if(!r.isHostedWithin){if(this.hostProxy){this.hostProxy.style.top=0;}Aa=AJ+G;}Af.top=Aa;Af.bottom="auto";}}if(Al||o){var Aj=t.x;if(Aj<0||(Aj+t.w>p.w)){var AG=(-k.x+AJ)+G;if(!r.isHostedWithin){if(this.hostProxy){this.hostProxy.style.left=0;}AG=AJ+G;}Af.left=AG;Af.right="auto";}}return true;},close:function R(h){if(this.keepOpen){return ;}if(this.onClose){this.onClose(h);}L.call(this,false);if(this.lockIWForScroll){f.call(this,this.opener,false);}this.set("visible",false);this.set("opener",null);if(this.lockIW){M.call(this,this.lockIW,false);}F.call(this,false);var g=this._orgalgn;if(g){this.popupConfig.setAlignment(g.host,g.popup);}if(this.resetDirection){this.resetDirection=false;O.setDirection(false);}},preBuildRendering:function A(h){this._super(h);var l=this.popupConfig;if(l&&!l.isHostedWithin){var g=l.hostProxyCssClass.split(" "),k=false;N.forEach(S.keyarray(K),function(m){if(g.indexOf(K[m])>=0){k=true;return false;}});if(!(k||l.noInheritTheme)){var j=mstrmojo.vi.ui.theme.getThemeClass.call(this);if(j){g.push(j);}}l.hostProxyCssClass=g.join(" ");}},buildRendering:function E(){var g=this._super();if(g){if(!this.parent&&!this.domNode.parentElement){document.body.appendChild(this.domNode);}}return g;},postBuildRendering:function X(){var g=this,h=this.popupConfig;if(h&&!this._ListenerProc){this._ListenerProc=function(){g.monitorWindow();};D.attachEvent(window,"resize",this._ListenerProc);}this._super();},monitorWindow:function(){var h=D.getMaxScrollHeight();if(this.updateScrollbars&&this.scrollNode){this.scrollNode.style.maxHeight=(this.scrollNodeMaxHeight||h)+"px";this.updateScrollbars();}if(this.visible){var g=this,j=null;window.clearTimeout(j);j=window.setTimeout(function(){g.scrollNode.style.maxHeight=(g.scrollNodeMaxHeight||h)+G;g.adjustCornersForPopupOverflow();},175);}},destroy:function b(g){if(this._ListenerProc){D.detachEvent(window,"resize",this._ListenerProc);delete this._ListenerProc;}this._super(g);},unrender:function W(g){if(this.popupConfig&&!this.popupConfig.isHostedWithin&&this.hostProxy){document.body.removeChild(this.hostProxy);delete this.hostProxy;}this._super(g);}};}());(function(){mstrmojo.requiresCls("mstrmojo.ServerProxy");mstrmojo.QueueNative=mstrmojo.declare(mstrmojo.ServerProxy,null,{scriptClass:"mstrmojo.QueueNative",queue:[],requestCount:0,transport:null,createRequest:function(C,E,D,B){return this._super(C,E,D,B);},advance:function(){var B=this.queue.shift();if(B){this.request(B.callback,B.params,false,{});}},queueHandle:function(B,C){if(this.requestCount>0){this.queue.push({callback:C,params:B});this.requestCount++;}else{this.requestCount++;this.request(C,B,false,{});}},response:function A(F,B,D){var E=this.getRequest(F);if(E){E.gotResponse=true;var G=E.callback,C=(B&&!D.mstrerr)?"success":"failure";try{if(G[C]){G[C](D,E);}}finally{G.complete(F);}this.requestCount--;this.advance();}},});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.hash","mstrmojo.array","mstrmojo.ServerProxy","mstrmojo.XHRServerTransport","mstrmojo.mstr.EnumFunction");var l=mstrmojo.array,f=mstrmojo.mstr.EnumFunction;var N={"8107C31BDD9911D3B98100C04F2233EA":"Sum","548C68A0F60811D3ACC300C04F0423DE":"StdevP","8107C31FDD9911D3B98100C04F2233EA":"Max","8107C331DD9911D3B98100C04F2233EA":"GeoMean",B2C0FA4220C711D6AD1400C04F0423DE:"First","8107C32CDD9911D3B98100C04F2233EA":"Product",B2C0FA4020C711D6AD1400C04F0423DE:"Greatest","8107C330DD9911D3B98100C04F2233EA":"Var","8107C32FDD9911D3B98100C04F2233EA":"Stdev","8107C32DDD9911D3B98100C04F2233EA":"Median",B2C0FA4320C711D6AD1400C04F0423DE:"Last","8107C31CDD9911D3B98100C04F2233EA":"Count","8107C31DDD9911D3B98100C04F2233EA":"Avg","8107C31EDD9911D3B98100C04F2233EA":"Min","8107C32EDD9911D3B98100C04F2233EA":"Mode",D64F1B10F6C011D3ACC300C04F0423DE:"VarP",B2C0FA4120C711D6AD1400C04F0423DE:"Least"},Q={"8107C326DD9911D3B98100C04F2233EA":"Rank"},w={D221F90EB35540E3A1204ED6CC9A8267:"Avg",D221F90FB35540E3A1204ED6CC9A8267:"Count",D221F910B35540E3A1204ED6CC9A8267:"Max",D221F911B35540E3A1204ED6CC9A8267:"Min",D221F90DB35540E3A1204ED6CC9A8267:"Sum"},x={"8107C32ADD9911D3B98100C04F2233EA":"Avg","8107C350DD9911D3B98100C04F2233EA":"Count","8107C34BDD9911D3B98100C04F2233EA":"Max","8107C34CDD9911D3B98100C04F2233EA":"Min","8107C32BDD9911D3B98100C04F2233EA":"Sum"},p={"8107C329DD9911D3B98100C04F2233EA":"Avg","8107C354DD9911D3B98100C04F2233EA":"Count","8107C351DD9911D3B98100C04F2233EA":"Max","8107C352DD9911D3B98100C04F2233EA":"Min","8107C328DD9911D3B98100C04F2233EA":"Sum"},W={"8107C337DD9911D3B98100C04F2233EA":"Banding","8107C338DD9911D3B98100C04F2233EA":"BandingC","8107C339DD9911D3B98100C04F2233EA":"BandingP"},H={"8107C31DDD9911D3B98100C04F2233EA":"Avg","8107C31CDD9911D3B98100C04F2233EA":"Count",B2C0FA4220C711D6AD1400C04F0423DE:"First","8107C331DD9911D3B98100C04F2233EA":"GeoMean",B2C0FA4320C711D6AD1400C04F0423DE:"Last","8107C31FDD9911D3B98100C04F2233EA":"Max","8107C32DDD9911D3B98100C04F2233EA":"Median","8107C31EDD9911D3B98100C04F2233EA":"Min","8107C32EDD9911D3B98100C04F2233EA":"Mode","8107C32CDD9911D3B98100C04F2233EA":"Product","8107C32FDD9911D3B98100C04F2233EA":"Stdev","548C68A0F60811D3ACC300C04F0423DE":"StdevP","8107C31BDD9911D3B98100C04F2233EA":"Sum","8107C330DD9911D3B98100C04F2233EA":"Var",D64F1B10F6C011D3ACC300C04F0423DE:"VarP",A202C23DDD9D11D3B98100C04F2233EA:"Fvschedule",A202C23CDD9D11D3B98100C04F2233EA:"IRR",A202C240DD9D11D3B98100C04F2233EA:"MIRR",A202C23EDD9D11D3B98100C04F2233EA:"NPV","8107C34ADD9911D3B98100C04F2233EA":"Percentile","9C374203DD9F11D3B98100C04F2233EA":"AvgDev","9C374228DD9F11D3B98100C04F2233EA":"ChiSquareTest","9C374225DD9F11D3B98100C04F2233EA":"Correlation","9C374224DD9F11D3B98100C04F2233EA":"Covariance","9C374237DD9F11D3B98100C04F2233EA":"ForecastV","9C37422FDD9F11D3B98100C04F2233EA":"FTest","9C374234DD9F11D3B98100C04F2233EA":"GrowthV","9C37422EDD9F11D3B98100C04F2233EA":"HeteroscedasticTTest","9C37422DDD9F11D3B98100C04F2233EA":"HomoscedasticTTest","9C37422ADD9F11D3B98100C04F2233EA":"Intercept","9C374204DD9F11D3B98100C04F2233EA":"Kurtosis","9C374222DD9F11D3B98100C04F2233EA":"MeanTTest","9C37422CDD9F11D3B98100C04F2233EA":"PairedTTest","9C374226DD9F11D3B98100C04F2233EA":"Pearson","9C374227DD9F11D3B98100C04F2233EA":"RSquare","9C374205DD9F11D3B98100C04F2233EA":"Skew","9C374229DD9F11D3B98100C04F2233EA":"Slope","9C37422BDD9F11D3B98100C04F2233EA":"SteYX","9C374231DD9F11D3B98100C04F2233EA":"TrendV","9C374223DD9F11D3B98100C04F2233EA":"VarTest","4A99DC7BC5254A319F6B8098E7D652C1":"ConcatAgg"},Y={AND283:"And",OR284:"Or",NOT285:"Not",IF305:"If"},n={BEGINSWITH279:"Begins with",ENDSWITH279:"Ends with",IN289:"In",BETWEEN290:"Between",CONTAINS291:"Contains",LIKE291:"Like"};function P(AC){var AA=function(AE,AD){return mstrmojo.array.stringSorter(AE.n,AD.n);},AB,z;AC=AC.sort(AA);for(AB=0,z=AC.length;AB<z;AB++){AC[AB].fns=AC[AB].fns.sort(AA);}return AC;}function X(AC,AD){var z=AC.length,AB;for(AB=0;AB<z;AB++){var AA=AC[AB].fns;if(mstrmojo.array.find(AA,"did",AD)>-1){return AB;}}return -1;}function M(AA){var z=mstrApp&&mstrApp.useQuickSearch&&mstrApp.useQuickSearch();AA=mstrmojo.hash.copy(AA,{taskId:"searchMetadata",recursive:true,styleName:"MojoFolderStyle",includeObjectDesc:true,includeAncestorInfo:false});if(z){AA.quickSearch=z;AA.nameWildcards=16;AA.sortKey=-1;}return AA;}function I(AA,z){if(mstrApp.serverRequest){mstrApp.serverRequest(z,AA);}else{window.$MAPF=function(){return false;};this.getServerProxy().request(AA,z,false,{});}}mstrmojo.ME.MetricDataService=mstrmojo.provide("mstrmojo.ME.MetricDataService",{rootFolderTypes:{ALL:39,FILTERS:4,METRICS:5,FACTS:29,SCHEMA:24,ATTRIBUTES:26,TRANSFORMATIONS:38},blockCount:10,suggestCount:10,suggestDelay:200,noCache:true,functions:null,metricComponents:null,functionsDetails:null,getServerProxy:function F(){if(!this.serverProxy){this.serverProxy=new mstrmojo.ServerProxy({transport:mstrmojo.XHRServerTransport});}return this.serverProxy;},getMetricDefintion:function S(AB,z){var AA={taskId:"getMetricDefinition",metricId:AB.id,outputFlags:65599};if(AB.msgID){AA.msgID=AB.msgID;}I.call(this,z,AA);},validateMetric:function d(AB,z){var AA={taskId:"validateMetric",metricId:AB.metricId,tokenStreamXML:AB.tokenStreamXML,metricXML:AB.metricXML,outputFlags:327695};if(mstrmojo.string.isEmpty(AB.metricId)){AA.isNew=true;}if(AB.msgID){AA.msgID=AB.msgID;}if(AB.formID){AA.frmid=AB.formID;}if(AB.isIDForm){AA.isIDForm=AB.isIDForm;}if(AB.objectType){AA.objectType=AB.objectType;}I.call(this,z,AA);},getMetricComponents:function B(AD,AA){var z=this,AB=this.metricComponents;if(!this.noCache&&AB&&AB.items.length==AB.sz){AA.success(AB);return ;}AA.success=mstrmojo.func.composite([AA.success,function(AE){if(z.metricComponents&&z.metricComponents.items){z.metricComponents.items.push(AE.items);}else{z.metricComponents=AE;}}]);var AC=M({blockBegin:AD.blockBegin,blockCount:AD.blockCount,searchPattern:AD.pattern,rootFolderType:AD.rootFolderType||24,objectType:AD.objectType||"12,13,43"});I.call(this,AA,AC);},getAttributes:function R(AB,z){var AA=M({blockBegin:AB.blockBegin,blockCount:AB.blockCount,searchPattern:AB.pattern,rootFolderType:AB.rootFolderType||26,objectType:12});I.call(this,z,AA);},getFacts:function L(AB,z){var AA=M({blockBegin:AB.blockBegin,blockCount:AB.blockCount,searchPattern:AB.pattern,rootFolderType:AB.rootFolderType||29,objectType:13});I.call(this,z,AA);},getMetrics:function G(AB,z){var AA=M({blockBegin:AB.blockBegin,blockCount:AB.blockCount,searchPattern:AB.pattern,rootFolderType:AB.rootFolderType||5,objectType:4});if(AB.isVerify){AA.nameWildcards=2;}I.call(this,z,AA);},getFunctions:function T(AE){var AG=this,AH=window.sessionStorage,AD=this.functions||(AH&&AH.getItem("functions")),AF=AH&&AH.getItem("mstrLocaleId"),AB=mstrApp&&mstrApp.localeId;if(AD&&AF==AB){AD=P(JSON.parse(AD).fncs);AE.success(AD);}else{var AA={failure:AE.failure,textResponse:true},AC={taskId:"getSystemFunctions",includeFunctionDetails:true,functionFlags:2|2147483648,includeFunctionHelpTopic:true};var z=function(AI){l.forEach(AI,function(AK){var AJ=AK&&AK.fns;l.forEach(AJ,function(AM){var AL=AM.pros;var AN=l.filterOne(AL,function(AO){return AO.n==="UseLookupForAttributes";});if(AN){AN.dfv="0";}});});};AA.success=function(AI){if(typeof AI==="string"||!mstrApp.isSingleTier){AI=AI.replace(/\\'/g,"'");var AK=JSON.parse(AI),AJ=AK.fncs;z(AJ);AI=JSON.stringify(AK);if(AH){AH.setItem("functions",AI);AH.setItem("mstrLocaleId",AB);}AG.functions=AI;AD=P(JSON.parse(AI).fncs);}else{z(AI.fncs);AD=P(AI.fncs);AG.functions=JSON.stringify(AI);}AE.success(AD);};I.call(this,AA,AC);}},getAggFunctions:function C(){if(this._aggFunctions){return this._aggFunctions;}var z=this.parseFuncStr();z=mstrmojo.array.filter(z[this.getBasicCategoryIndex(z)].fns,function(AB){var AA=AB.did,AC;if(AA!=="B2C0FA4020C711D6AD1400C04F0423DE"&&AA!=="B2C0FA4120C711D6AD1400C04F0423DE"){AC=N[AA];}return AC;});return z;},getOLAPAggFunctions:function E(z){var AA=this.parseFuncStr();AA=mstrmojo.array.filter(AA[this.getOLAPCategoryIndex(AA)].fns,function(AB){switch(z){case"moving":return x[AB.did];case"running":return p[AB.did];case"olap":default:return w[AB.did];}return false;});return AA;},getFunctionCatList:function r(){if(this._functionCatList){return this._functionCatList;}var z=this.parseFuncStr();z=mstrmojo.hash.make(z,mstrmojo.Arr);this._functionCatList=z;return z;},getCategoryIndex:function q(AA,z){return X(z||this.getFunctionCatList(),AA);},getBasicCategoryIndex:function J(AA){var z="B2C0FA4020C711D6AD1400C04F0423DE";return X(AA||this.getFunctionCatList(),z);},getDataMiningCatIndex:function j(z){var AA="F17CD4F3FF134D91B80DDAB9CA73C919";return X(z||this.getFunctionCatList(),AA);},getDateTimeCategoryIndex:function v(AA){var z="C50F2A4F75AE49D6B20E00224967B500";return X(AA||this.getFunctionCatList(),z);},getStringCategoryIndex:function g(AA){var z="6F7DF5FF449111D5BEA300B0D01A55EF";return X(AA||this.getFunctionCatList(),z);},getOLAPCategoryIndex:function J(AA){var z="D221F90EB35540E3A1204ED6CC9A8267";return X(AA||this.getFunctionCatList(),z);},getInternalCategoryIndex:function U(AA){var z="8107C337DD9911D3B98100C04F2233EA";return X(AA||this.getFunctionCatList(),z);},getFunctionDetails:function t(AB,z){var AA={taskId:"getSystemFunctions",functionId:AB.did,includeFunctionDetails:true,includeFunctionHelpTopic:true};I.call(this,z,AA);},getTransformations:function O(AB,z){var AA=M({blockBegin:AB.blockBegin,blockCount:AB.blockCount,searchPattern:AB.pattern,rootFolderType:AB.rootFolderType||38,objectType:43});I.call(this,z,AA);},getFilters:function k(AB,z){var AA=M({blockBegin:AB.blockBegin,blockCount:AB.blockCount,searchPattern:AB.pattern,rootFolderType:AB.rootFolderType||4,objectType:1});I.call(this,z,AA);},getAttributeForms:function e(AB,z){var AA={taskId:"getAttributeForms",attributeID:AB.attributeID,displayedForms:AB.displayedForms,styleName:"WidgetElementListStyle"};I.call(this,z,AA);},getSubtotalFunctions:function V(AB,z){var AA=M({objectType:"1025,1026",searchPattern:""});I.call(this,z,AA);},isBasicAggMap:function m(z){var AA=!!N[z];if(z==="B2C0FA4020C711D6AD1400C04F0423DE"||z==="B2C0FA4120C711D6AD1400C04F0423DE"){AA=false;}return AA;},isOLAPAgg:function y(z){return !!w[z];},isMovingAgg:function Z(z){return !!x[z];},isRunningAgg:function c(z){return !!p[z];},isBanding:function h(z){return !!W[z];},isOLAP:function K(AA){var AB=this.getFunctionCatList(),z=AB[this.getOLAPCategoryIndex(AB)].fns;return mstrmojo.array.find(z,"did",AA)>-1;},isRank:function D(z){return !!Q[z];},isScalar:function b(z){return(z||{}).sqt===3;},hasLookupForAttributesProps:function(z){return !!H[z];},getFunctionHelpTopic:function o(z){var AA="<div class='func-details' onclick='mstrmojo.ME.MetricDataService.showFunctionHelpTopic(\"##HELPTOPIC##\")'>"+mstrmojo.desc(5811,"Details...")+"</div>";AA=AA.replace("##HELPTOPIC##",z);return AA;},showFunctionHelpTopic:function u(AA){var AB=mstrApp.isSingleTier,z=((mstrApp.helpUrl||"../help/")+"FunctionsRef/");if(AB){z=z+"index.htm#cshid="+(AA||"");window.FormWrapper.openPage(z);}else{if(AA){z=z+"Content/"+AA+".htm";}else{z=z+"index.htm";}window.open(z);}return false;},sortFunctions:function A(AA){var AB={},z=function(AD,AC){return mstrmojo.array.stringSorter(AD.n,AC.n);};mstrmojo.array.forEach(AA,function(AC){mstrmojo.array.forEach(AC&&AC.fns,function(AD){if(AD&&AD.did){AB[AD.did]=AD;}});});return mstrmojo.hash.valarray(AB).sort(z);},parseFuncStr:function a(){var z=window.sessionStorage,AA=this.functions||z&&z.getItem("functions");if(AA){return P(JSON.parse(AA).fncs);}},isValEqual:function(AC,AB){if(AC===AB){return true;}var z=[-1,"-1","True",true],AA=[0,"0","False",false];if(z.indexOf(AC)>-1&&z.indexOf(AB)>-1){return true;}else{if(AA.indexOf(AC)>-1&&AA.indexOf(AB)>-1){return true;}}return false;},isFuncHasUseLookupForAttributeProp:function(AA){var z=[f.FunctionSum,f.FunctionCount,f.FunctionAvg,f.FunctionMin,f.FunctionMax,f.FunctionProduct,f.FunctionMedian,f.FunctionMode,f.FunctionStdev,f.FunctionVar,f.FunctionGeomean,f.FunctionPercentile,f.FunctionStdevP,f.FunctionVarP,f.FunctionFirst,f.FunctionLast,f.ConcatAgg];return z.indexOf(AA)>-1;},isLogicOrCompFunc:function(AA){var z=AA.v.toUpperCase()+AA.tp;return !!Y[z]||!!n[z];}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.Widget","mstrmojo._ListSelections");var E=mstrmojo.dom;mstrmojo.ListBase=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._ListSelections],{scriptClass:"mstrmojo.ListBase",selectionPolicy:null,itemRenderer:null,icnCssText:"",icnCss:"",markupString:'<div id="{@id}" tstid="{@tstid}" class="mstrmojo-ListBase {@cssClass}" style="{@cssText}" mstrAttach:click,dblclick,mousedown,mouseover,mouseout,contextmenu><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div>',markupSlots:{itemsContainerNode:function G(){return this.domNode.firstChild;},scrollboxNode:function A(){return this.domNode;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod},autoHide:false,itemsContainerNode:null,_markupPrefix:null,_markupSuffix:null,_itemPrefix:null,_itemSuffix:null,init:function J(K){this._super(K);if(this.autoHide){this.visible=!!(this.items&&this.items.length);}},buildRendering:function D(){this.itemsHtml="";var K=(this.renderOnScroll?this.items&&((this.renderIndex+1)*this.renderBlockSize):this.items&&this.items.length);if(K){this.itemsHtml=this._buildItemsMarkup(0,K-1,this._markupPrefix&&this._markupPrefix(),this._markupSuffix&&this._markupSuffix(),this._itemPrefix&&this._itemPrefix(),this._itemSuffix&&this._itemSuffix()).join("");}this._super();delete this.itemsHtml;this.addSlots({itemsNode:this.itemsContainerNode.firstChild});},_buildItemsMarkup:function B(K,N,U,L,V,M){var W=[],Q=0;W[Q++]=U||"";var P=this.itemRenderer,T=P&&P.render;if(T&&typeof T==="function"){var R=this.items,S=Math.min(N+1,((R&&R.length)||0)),O;for(O=K;O<S;O++){W[Q++]=V||"";W[Q++]=T(R[O],O,this);W[Q++]=M||"";}}W[Q+1]=L||"";return W;},onselectionChange:function H(W){if(!W){return ;}var S=this.itemRenderer;if(!S){return ;}var U=this.items;if(W.added&&W.added.length>0&&U.length>0&&!mstrmojo.array.some(W.added,function(Z){return !U[Z]||!U[Z].dsbld;})){return ;}var O=S.unselect,R=this.items||[],X=W.removed,N,M,L,P,Y;if(O&&X){for(P=0,Y=X.length;P<Y;P++){N=X[P];if(typeof (N)==="object"){M=(N.idx==0)?0:N.positions;N=N.idx;}else{M=N;}L=this._getItemNode(M);if(L){O(L,R[N],M,this);}}}var K=S.select,V=W.added,Q,T;if(K&&V){for(Q=0,T=V.length;Q<T;Q++){N=V[Q];if(typeof (N)==="object"){M=(N.idx==0)?0:N.positions;N=N.idx;}else{M=N;}L=this._getItemNode(M);if(L){K(L,R[N],M,this);}}}if(this.onchange){this.onchange({added:W.added,removed:W.removed});}},_set_items:function C(N,K){this.renderIndex=0;if(this.autoHide){this.set("visible",!!(K&&K.length));}var M=this.items;this.items=K;if(M!==K){var L=this.hasRendered;if(L){this.unrender(false);}this.clearSelect();if(L){this.render();}return true;}return false;},onItemContextMenu:mstrmojo.emptyFn,oncontextmenu:function F(K){E.preventDefault(window,K.e);var M=K.getTarget(),L=this.getItemFromTarget&&this.getItemFromTarget(M);if(L){if(this.onItemContextMenu(L,K)){K.cancel();}}},_getItemNode:function I(K){var L=this.itemsContainerNode;return(L&&L.childNodes[K])||null;},renderOnScroll:false});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom");var B="mstrmojo-Image";mstrmojo.Image=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Image",markupString:'<div id="{@id}" class="'+B+' {@cssClass}" style="{@cssText}" mstrAttach:click><image class="{@imgCssClass}" src="{@src}" mstrAttach:load /></div>',markupSlots:{imgNode:function(){return this.domNode.firstChild;}},markupMethods:{onsrcChange:function(){var C=this.imgNode;if(C){C.src=this.src||"../javascript/mojo/css/images/1ptrans.gif";}},oncssClassChange:function(){var C=this.domNode;if(C){C.className=this.cssClass||B;}},onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},src:"",getImageSize:function A(){var C=this.imgNode;return{w:C.clientWidth,h:C.clientHeight};}});mstrmojo.Image.baseCssClass=B;}());(function(){mstrmojo.requiresCls("mstrmojo.Widget");mstrmojo.WaitIcon=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.WaitIcon",cssFloat:"left",visible:false,markupString:'<div id="{@id}" class="mstrmojo-WaitIcon {@cssClass}" style="float:{@cssFloat};{@cssText};"></div>',markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},markupSlots:{}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.css");var C=mstrmojo.Widget;mstrmojo.ui.Checkbox=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.ui.Checkbox",markupString:'<div id="{@id}" class="mstrmojo-ui-Checkbox {@cssClass}" mstrAttach:click></div>',markupMethods:{onvisibleChange:C.visibleMarkupMethod,oncheckedChange:function B(){mstrmojo.css.toggleClass(this.domNode,"checked",this.checked);},onenabledChange:C.enabledMarkupMethod},checked:false,onclick:function A(){this.set("checked",!this.checked);}});}());(function(){mstrmojo.requiresCls("mstrmojo.boxmodel","mstrmojo.array","mstrmojo.hash","mstrmojo.dom","mstrmojo.css","mstrmojo.Widget","mstrmojo.Arr","mstrmojo._HasLayout","mstrmojo._ListBase2Selections","mstrmojo.ListSelector","mstrmojo._TouchScrolling","mstrmojo._PagingList");var a=mstrmojo.hash,f=mstrmojo.array,e=mstrmojo.boxmodel,c=mstrmojo.dom;function A(j,l,h){var k=j.listSelector;if(k){k[l](j,j.itemsContainerNode,h);}}function L(j,h){var k=j.lastPagePos;if(!k||k.dragId!==h){k=e.offset(j.itemsContainerNode);k.dragId=h;j.lastPagePos=k;var l=j.scrollboxNode;j.lastScrollPos={left:l.scrollLeft,top:l.scrollTop,width:l.clientWidth,height:l.clientHeight};}}function O(l,o,j){var k=o&&o.node;if(k===l.dropCueNode||k===l.dropCueNode.firstChild){return l.dropCuePos;}var m=l.listMapper;var h=m&&m.whereDrop(l,l.itemsContainerNode,k,o.pos,{left:l.lastPagePos.left-l.lastScrollPos.left,top:l.lastPagePos.top-l.lastScrollPos.top,width:l.lastScrollPos.width,height:l.lastScrollPos.height});var n=l.dropCuePos;return((j!==false)&&n&&h&&(n.idx===h.idx)&&(n.left===h.left)&&(n.top===h.top))?n:h;}var g="attachEventListener";function D(j,h){if(j.makeObservable){h=h||[];if(!h[g]){mstrmojo.hash.make(h,j.itemsScriptClass||mstrmojo.Arr);}}return h;}function H(j,h){if(h&&h[g]){j._sub_its=h;j._sub_add=h[g]("add",j.id,"preadd");j._sub_rmv=h[g]("remove",j.id,"preremove");}}function G(h){if(h._sub_its){var j=mstrmojo.publisher;j.unsubscribe(h._sub_add);j.unsubscribe(h._sub_rmv);delete h._sub_add;delete h._sub_rmv;delete h._sub_its;}}mstrmojo.ListBase2=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._ListBase2Selections,mstrmojo._TouchScrolling,mstrmojo._PagingList,mstrmojo._HasLayout],{scriptClass:"mstrmojo.ListBase2",items:null,markupString:'<div id="{@id}" class="mstrmojo-ListBase2 {@cssClass}" style="position:relative;{@cssText}" mstrAttach:keyup,keypress,mousedown,mouseup,dblclick><div class="mstrmojo-ListBase2-itemsContainer" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode;},itemsContainerNode:function(){return this.domNode.firstChild;},dropCueNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},ondropCuePosChange:function(){var j=this.dropCueNode,h=j&&j.style;if(!h){return ;}var l=this.dropCuePos,k=!!l;if(k){h.left=l.left+"px";h.top=l.top+"px";}h.display=k?"block":"none";},onpageChange:function(){if(this.usePaging&&!this._inScroll){this._inPaging=true;this.listMapper.toPage(this,this.page);this._inPaging=false;}},onwidthChange:function(){if(!isNaN(parseInt(this.width))){this.domNode.style.width=this.width;}},onheightChange:function(){if(!isNaN(parseInt(this.height))){this.domNode.style.height=this.height;}}},autoHide:false,renderOnScroll:false,firstRenderBlockSize:50,renderBlockSize:50,listMapper:null,listBuilder:null,listSelector:mstrmojo.ListSelector,animate:false,itemsEffect:null,containerResizable:true,init:function Z(m){this._super(m);this.items=this.initItems(this.items);var l=this.selectedIndices,j=this.selectedIndicesList,k=this.selectedIndex,n=this.selectedItem;this.selectedIndices={};this.selectedIndex=-1;delete this.selectedIndicesList;delete this.selectedItem;if(l||j||(k>-1)||n){this.initSelections(l,j,k,n);}if(this.postInitItems){this.postInitItems();}},initItems:function I(h){return D(this,h);},preBuildRendering:function W(){var m=this.listBuilder,p=m.newContext(this);this.ctxtBuilder=p;var j=this.markupSlots,l=!!(this.renderOnScroll&&this.renderBlockSize&&j&&j.scrollboxNode),k=this.items,h=(k&&k.length)||0,n=l?this.firstRenderBlockSize:h,o=l?this.firstRenderBlockSize:0;this._eros=l;this.paused=false;this.itemsHtml=this.listMapper.buildItemWrappers(k,m,this,p,n,o).join("");this.itemsContainerCssText="visibility: hidden";if(this._super){this._super();}},postBuildRendering:function E(){delete this.itemsHtml;var m=this.listMapper;if(m&&m.postBuildRendering){m.postBuildRendering(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder);}H(this,this.items);if(this._eros||this.usePaging){if(!this._cb_scroll){var p=this.id;this._cb_scroll=function(){var n=mstrmojo.all[p];n.onscroll();};}mstrmojo.dom.attachEvent(this.scrollboxNode,"scroll",this._cb_scroll);this.onscroll();}if(this.animate){for(var k=0,j=["itemsEffect","scrollEffect"],h=j.length;k<h;k++){var o=j[k],l=this[o];if(l&&l.constructor===Object){l=mstrmojo.insert(mstrmojo.hash.clone(l));l.widget=this;this[o]=l;}}if(this.itemsEffect){this.itemsEffect.play();}}this.itemsContainerNode.style.visibility="inherit";if(this.containerResizable&&this.itemsContainerNode.scrollWidth<this.domNode.scrollWidth){this.itemsContainerNode.style.width=this.domNode.scrollWidth+"px";}if(this._super){this._super();}},unrender:function X(l){G(this);if(this._eros){mstrmojo.dom.detachEvent(this.scrollboxNode,"scroll",this._cb_scroll);delete this._cb_scroll;}for(var j=0,k=["itemsEffect","scrollEffect"],h=k.length;j<h;j++){var m=this[k[j]];if(m&&m.isPlaying){m.cancel();}}this._super(l);},pauseScrollRendering:function P(k,h,j){if(k!==false){k=true;}if(this.paused===!!k){return ;}this.paused=!!k;if(k){if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}}else{this.fill(h,j);}},onscroll:function K(){if(this.paused){return ;}if(this._eros){if(!this._fillTmr){var h=this;this._fillTmr=self.setTimeout(function(){h.fill();h=null;},50);}}if(this._super){this._super();}},fill:function b(h,m){if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}var n=(this.items&&this.items.length)||0;if(!n){if(m){m();}}else{var k=this.scrollboxNode,o=this.itemsContainerNode,l=mstrmojo.boxmodel.offset(o,k),q=this.listMapper,p=q.findScrollRange(o,n,(this.usesTouches&&this.pos&&parseInt(this.pos.y,10))||k.scrollTop,k.clientHeight,(this.usesTouches&&this.pos&&parseInt(this.pos.x,10))||k.scrollLeft,k.clientWidth,l.left,l.top);if(this.fillAt(p.start,p.end)){if(h){h();}var j=this.id;this._fillTmr=window.setTimeout(function(){mstrmojo.all[j].fill(h,m);},100);}else{if(m){m();}}}},fillAt:function M(k,j){var h=this.listMapper;if(h){return h.fillItemWrappers(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder,k,j,this.renderBlockSize);}else{return false;}},add:function R(j,h){if(!j||!j.length){return -1;}var k=this.items;if(h==null){h=a.min(this.selectedIndices,false,true);if(h!==null&&h!==undefined){h++;}}if(h==null||h===-1){h=(k&&k.length)||0;}if(k&&k.add){k.add(j,h);}else{this.set("items",k?f.insert(k.concat(),h,j):j);}return h;},preadd:function B(k){if(this.hasRendered){var n=this.listMapper;if(n){n.onadd(this,this.itemsContainerNode,this.ctxtBuilder,k);}var m=this.listBuilder;if(m){m.onadd(this,this.ctxtBuilder,k);}var j=this.listSelector;if(j){j.onadd(this,k);}if(this._eros){this.onscroll();}else{var l=k.index,h=k.value.length;this.fillAt(l,l+h-1);}}if(this.onadd){this.onadd(k);}if(this._super){this._super(k);}},remove:function U(h){if(h==null){return -1;}if(h.constructor!==Array){return this._remove(h);}var k=this.items;if(k){var j;if(k.remove){for(j=h.length-1;j>-1;j--){k.remove(h[j],1);}}else{k=k.concat();for(j=h.length-1;j>-1;j--){k.splice(h[j],1);}this.set("items",k);}return h[0];}return -1;},_remove:function U(k){var j=this.items;if(!j||(k==null)){return -1;}var h;if(!isNaN(k)){h=k;}else{h=this.itemIndex(k);}if(h>-1){if(j.remove){j.remove(h,1);}else{j=j.concat();j.splice(h,1);this.set("items",j);}}return h;},duplicate:function Y(n,j,k){var l=this.items,h=-1;if(!l||(n==null)){return -1;}if(!isNaN(n)){if(j===null||j===undefined){j=n+1;}n=l[n];}else{if(j===null||j===undefined){j=this.itemIndex(n)+1;}}if(n){var m;m=a.copy(k,a.clone(n));h=this.add([m],j);}return h;},preremove:function N(j){if(this.hasRendered){var l=this.listMapper;if(l){l.onremove(this,this.itemsContainerNode,this.ctxtBuilder,j);}var k=this.listBuilder;if(k){k.onremove(this,this.ctxtBuilder,j);}var h=this.listSelector;if(h){h.onremove(this,j);}if(this._eros){this.onscroll();}}if(this.onremove){this.onremove(j);}if(this._super){this._super(j);}},move:function S(l,q){function o(t,r){return q>=t&&q<=t+r;}var p=(this.items&&this.items.length)||0;if(q===-1||q==null||isNaN(q)){q=p;}else{q=Math.min(q,p);}var k,h,n,m;if(l.constructor===Array){h=l;n=l;m=(h&&h.length)||0;if(o(l[0],l.length)){return false;}k=f.get(this.items,l);}else{if(typeof (l)==="object"){k=[l];m=1;h=this.itemIndex(k[0]);n=[h];if(o(h,1)){return false;}}else{h=l;n=[l];m=1;if(o(h,1)){return false;}k=[this.items[h]];}}for(var j=0;j<m;j++){if(n[j]<=q){q--;}}if(k[0]!=null){this.remove(h);this.add(k,q);}return true;},itemIndex:function F(h){if(h==null){return -1;}var j=this.itemIdField;return j?f.find(this.items,j,h[j]):f.indexOf(this.items,h);},prechange:function T(k){if(this.hasRendered){var j=[this.listBuilder,this.listMapper];for(var l=0,h=j.length;l<h;l++){var m=j[l];if(m&&m.onchange){m.onchange(this,this.itemsContainerNode,this.ctxtBuilder,k);}}}},makeObservable:false,_set_items:function J(o,h){var m=this.items;h=this.initItems(h);this.items=h;if(m!==h){var l=this,k=function(){if(l.autoHide){l.set("visible",!!(h&&h.length));}l=null;},j=this.hasRendered;if(j){this.refresh(k);}else{k();}}return m!==h;},premousedown:function d(h){A(this,"premousedown",h);},premouseup:function Q(h){A(this,"premouseup",h);},scrollTo:function V(j){var h,k=this.listMapper;if(k&&k.toItem){if(!isNaN(j)){h=j;}else{h=this.itemIndex(j);}if(h>=0){k.toItem(this,h);}}},draggable:false,getDragData:function(m){L(this,m.id);var k=O(this,m.src),j=k&&k.idxActual;if((j>-1)&&this.selectedIndices[j]){var l=this.sortSelectedIndices(),h=f.get(this.items,l)||[];switch(h.length){case 1:return a.copy({html:h[0][this.itemDisplayField],index:l[0]},a.copy(h[0]));case 0:return null;default:return a.copy({html:h.length+" selections",indices:l},h);}}},dropZone:false,ondragenter:function(h){L(this,h.id);this.set("dropCuePos",O(this,h.tgt));},ondragover:function(h){this.set("dropCuePos",O(this,h.tgt));},ondragleave:function(h){this.set("dropCuePos",null);},isDragValid:function C(h){return h&&h.src&&h.src.data;},ondragstart:function(h){if(!(h&&h.src&&h.src.data)){return false;}},allowCopy:false,ondragend:function(l){var j=l&&l.tgt,h=j&&j.widget;if(h===this){}else{if(this.tree&&h&&h.tree===this.tree){if(!this.allowCopy||!c.ctrlKey(j.hWin,j.e)){var k=l.src&&l.src.data;if(k&&(k.indices||(k.index!==null))){this.remove(k.indices||k.index);}}}}},ondrop:function(q){var u=q&&q.src,p=u&&u.data;if(p){var k=O(this,q.tgt,false),r=k&&k.idx,l=(p&&p.constructor===Array),j=this.sortSelectedIndices();var n=this.items;r=Math.min(r,n&&n.length)||0;var t=true;if(u.widget===this){t=this.move(j,r);f.forEach(j,function(v){if(v<=r){r--;}});}else{this.add(l?p:[p],r);}if(t){var o=l?p.length:1,h={};for(var m=0;m<o;m++){h[r+m]=true;}this.set("selectedIndices",h);}}this.set("dropCuePos",null);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.hash");function A(H,E,G,F){var D=mstrmojo.hash.copy(F,{props:{left:{isStyle:true,start:H,stop:E,suffix:"px",ease:mstrmojo.ease.linear}},duration:G});(new mstrmojo.fx.AnimateProp(D)).play();}function B(K,N,G,L){var I=K.domNode,M=I.offsetWidth,D=K.scrollableIncFetch;var E=K.hasAnimation&&(!(/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent))||Number(RegExp.$1)>3.5),J=L?1:-1,F=parseInt(M,10)*J,H=E?500:0;A(0,-F,H,{target:G,duration:H,preStart:function(){this.target.style.overflowY="hidden";},onEnd:function(){this.target.style.display="none";}});A(F,0,H,{target:N,preStart:function(){this.target.style.display="block";this.target.style.overflowY=(D?"visible":"auto");}});if(K.waiting){A(0,-F,H,{widget:K,slot:"loaderNode",onEnd:function(){this.widget.waiting=false;}});}}var C=function(D){var E=D.currentPage;if(E===D.p1Node){E=D.p2Node;}else{E=D.p1Node;}D.currentPage=E;};mstrmojo.Booklet=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Booklet",pageClass:"mstrmojo-BookletPage",markupString:'<div id="{@id}" class="mstrmojo-Booklet {@cssClass}" style="{@cssText}"><div id="{@id}_p1" class="mstrmojo-BookletPage" ></div><div id="{@id}_p2" class="mstrmojo-BookletPage" style="left:-100%;"></div><div id="{@id}_ldr" class="mstrmojo-BookletLoader" ></div></div>',markupSlots:{containerNode:function(){return this.domNode;},p1Node:function(){return this.domNode.firstChild;},p2Node:function(){return this.domNode.childNodes[1];},loaderNode:function(){return this.domNode.childNodes[2];}},markupMethods:{onnextChange:function(){var G=this.next;if(!G){return ;}var D=this.currentPage,F=this.p1Node,E=this.currentPage=(D==F)?this.p2Node:F;if(!(G instanceof mstrmojo.Obj)){G=this.next=mstrmojo.insert(G);}if(!G.hasRendered){G.placeholder=E.appendChild(document.createElement("span"));G.render();}else{if(E.firstChild){E.replaceChild(G.domNode,E.firstChild);}else{E.appendChild(G.domNode);}}this.set("waiting",false);if(E&&D){B(this,E,D,this.turnDirFwd);}else{if(this.scrollableIncFetch){E.style.overflowY="visible";}}},onwaitingChange:function(D){this.loaderNode.style.left=(this.waiting)?0:"-100%";},onheightChange:function(D){if(this.height){this.domNode.style.height=this.height;}},onwidthChange:function(D){if(this.width){this.domNode.style.width=this.width;}}},enabled:true,waiting:false,next:null,currentPage:null,turnDirFwd:true,hasAnimation:true,scrollableIncFetch:false,FORWARD:true,REVERSE:false,turnFwd:function(D){this.turn(D,this.FORWARD);},turnBack:function(D){this.turn(D,this.REVERSE);},turn:function(D,E){this.set("turnDirFwd",E);this.set("next",D);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.hash","mstrmojo.css","mstrmojo.string");function A(C,B){return mstrmojo.hash.copy(B,{label:"",tabIndex:"",cssDisplay:"inline",name:null,markupString:'<span id="{@id}" class="'+C+' {@cssClass}" style="{@cssText}" title="{@tooltip}"><input id="{@id}_input"  type="{@type}" name="{@name}" value="{@value}" tabIndex="{@tabIndex}" mstrAttach:click tstid="{@tstid}"/><label for="{@id}_input">{@label}</label></span>',markupSlots:{inputNode:function(){return this.domNode.firstChild;},labelNode:function(){return this.domNode.childNodes[1];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=(this.visible)?this.cssDisplay:"none";},onenabledChange:function(){this.inputNode.disabled=!this.enabled;mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,"disabled");},onlabelChange:function(){this.labelNode.innerHTML=mstrmojo.string.encodeHtmlString(this.label);},oncheckedChange:function(){this.inputNode.checked=this.checked;}},checked:false,preclick:function(){this.set("checked",this.inputNode.checked);},isChecked:function(){return this.inputNode.checked;}});}mstrmojo.CheckBox=mstrmojo.declare(mstrmojo.Widget,null,A("mstrmojo-CheckBox",{scriptClass:"mstrmojo.CheckBox",type:"checkbox"}));mstrmojo.ImageCheckBox=mstrmojo.declare(mstrmojo.Widget,null,A("mstrmojo-CheckBox mstrmojo-ImageCheckBox",{scriptClass:"mstrmojo.CheckBox",type:"image",cssDisplay:"block",preclick:function(){this.set("checked",!this.checked);},postCreate:function(){this.markupMethods=mstrmojo.hash.copy(this.markupMethods);this.markupMethods.oncheckedChange=function(){mstrmojo.css.toggleClass(this.inputNode,["checked"],this.checked);};},postBuildRendering:function(){this.inputNode.src=this.src||"../images/1ptrans.gif";if(this._super){return this._super();}return true;}}));mstrmojo.RadioButton=mstrmojo.declare(mstrmojo.Widget,null,A("mstrmojo-RadioButton",{scriptClass:"mstrmojo.RadioButton",type:"radio",postBuildRendering:function(){if(mstrmojo.dom.isIE){this.inputNode.checked=this.checked;}}}));}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.Widget");var B=mstrmojo.dom;mstrmojo.InlineEditBox=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.InlineEditBox",text:null,editMode:false,allowEdit:true,okSave:false,allowHighlight:false,emptyHint:"Enter your text here.",markupString:'<div id="{@id}" class="mstrmojo-InlineEditBox {@cssClass}" style="{@cssText}" mstrAttach:click><div class="mstrmojo-InlineEditBox-text"></div><div class="mstrmojo-InlineEditBox-edit"><input type="text" class="mstrmojo-InlineEditBox-input" mstrAttach:keyup/><img class="mstrmojo-InlineEditBox-ok" src="../images/1ptrans.gif" title="Save"/><img class="mstrmojo-InlineEditBox-cancel" src="../images/1ptrans.gif" title="Cancel"/></div></div>',markupSlots:{textNode:function(){return this.domNode.firstChild;},editNode:function(){return this.domNode.lastChild;},inputNode:function(){return this.domNode.lastChild.firstChild;},okNode:function(){return this.domNode.lastChild.childNodes[1];},cancelNode:function(){return this.domNode.lastChild.lastChild;}},markupMethods:{ontextChange:function(){var C=this.text||this.emptyHint||"";this.textNode.innerHTML=this.allowHighlight?C:mstrmojo.string.encodeHtmlString(C);},oneditModeChange:function(){var H=this.editMode,E=this.domNode,D=this.textNode,G=this.editNode;mstrmojo.css.toggleClass(E,["edit"],H);if(H){D.style.display="none";G.style.display="block";D=this.inputNode;var F=D.style;D.value=this.text||"";F.width=(E.clientWidth-(this.okSave?(this.okNode.offsetWidth+this.cancelNode.offsetWidth):0))+"px";F.height=E.clientHeight+"px";D.focus();if(D.createTextRange){var I=D.createTextRange(),C=D.value.length;I.move("character",C);I.select();}}else{D.style.display="block";G.style.display="none";}},onokSaveChange:function(){var C=this.okSave?"inline":"none";this.okNode.style.display=C;this.cancelNode.style.display=C;},onallowEditChange:function(){mstrmojo.css.toggleClass(this.domNode,["disable"],!this.allowEdit);}},onvisibleChange:function A(){if(this.domNode){this.domNode.style.display=(this.visible?"block":"none");}},preclick:function(C){var E=C.e,D=B.eventTarget(C.hWin,E);if(D===this.okNode){this.save();}else{if(D===this.cancelNode){this.cancel();}else{if(this.editMode!==this.allowEdit){this.set("editMode",this.allowEdit);}}}},prekeyup:function(C){var E=C.e,D=E.keyCode||E.charCode;if(D===mstrmojo.Enum_Keys.ENTER){this.save();}else{if(D===mstrmojo.Enum_Keys.ESCAPE){this.cancel();}}},_attachEvents:function(){var C=this;if(this.editMode){if(!this._save_handler){this._save_handler=function(){var D=B.eventTarget(self,arguments[0]);if(!B.contains(C.domNode,D,true,document.body)){C.save();}};}B.attachEvent(document.body,"mousedown",this._save_handler);}else{if(this._save_handler){B.detachEvent(document.body,"mousedown",this._save_handler);}}},postBuildRendering:function(){if(this._super){this._super();}this._em_sub=this.attachEventListener("editModeChange",this.id,"_attachEvents");},destroy:function(){this.detachEventListener(this._em_sub);if(this._super){this._super();}},save:function(){this.set("text",this.inputNode.value);this.set("editMode",false);if(this.onSave){this.onSave();}},cancel:function(){this.set("editMode",false);if(this.onCancel){this.onCancel();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget");var C=mstrmojo.css,G=mstrmojo.array;function F(H,J){var I={searchMetadata:{taskId:"searchMetadata",styleName:this.searchStyleName,rootFolderID:this.rootID,searchPattern:this.searchPattern+"*",nameWildcards:(this.qse?16:1),quickSearch:this.qse,sortKey:(this.qse?-1:6),blockBegin:this.blockBegin||1,blockCount:this.blockCount,recursive:1,folderBrowserStyle:0,includeAncestorInfo:"true",includeObjectDesc:this.includeObjectDesc,searchXML:this.searchXML||"",dataSourcesXML:this.dataSources||"",objectType:this.objectTypes},browseFolder:{taskId:"searchMetadata",rootFolderID:this.rootID,blockBegin:this.blockBegin,blockCount:this.blockCount,recursive:this.hierarchical?0:(this.searchXML?"":1),folderBrowserStyle:this.hierarchical?1:0,includeAncestorInfo:String(!!this.hierarchical),searchXML:this.searchXML||"",dataSourcesXML:this.dataSources||"",objectType:this.objectTypes},browseElements:{taskId:"browseElements",styleName:"MojoAttributeStyle",attributeID:this.rootID,blockBegin:this.blockBegin,blockCount:this.blockCount,filterXML:this.filterXML||"",searchPattern:this.searchPattern||"",matchCase:!!this.matchCase,dataSourcesXML:this.dataSourcesXML||"",includeFormNames:!!this.collectForms,includeFormValues:!!this.bIncludeFormValues,displayedForms:this.displayedForms||1,dimensionID:this.dimensionId||""}}[H]||{};if(typeof J==="object"){mstrmojo.hash.copy(J,I);}return I;}var B="##searchPattern";mstrmojo.SearchBox2=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.SearchBox2",taskId:"searchMetadata",rootID:null,searchStyleName:"MojoFolderStyle",objectTypes:"3,14,256,257,1024,1027,2048,3072,10",token:{searchMetadata:/\//,browseElements:/(^-)|(,)|( OR )|( AND)|([<>]=?)|(&)|( )|(["\[\]\/])/},blockCount:50,blockBegin:1,minSearchLength:2,matchCase:false,enableMatchCase:true,supportIncFetch:true,quickSearch:false,searchAfterSearchPatternRestored:false,includeObjectDesc:true,forceResetCache:false,onUpdateSearchParams:mstrmojo.emptyFn,markupString:'<table id={@id} cellspacing=0 cellpadding=0 class="mstrmojo-SearchBox-Wrapper {@cssClass}" style="{@cssText};"><tr><td><div class="mstrmojo-SearchBox" mstrAttach:click ><input class="mstrmojo-SearchBox-input" type="text" mstrAttach:keyup,blur /></div></td><td><div class="mstrmojo-SearchBox-bg"><div class="mstrmojo-SearchBox-search" id="{@id}sbSearch" mstrAttach:click ></div></div></td><td><div class="mstrmojo-SearchBox-options" style="{@cssTextShowMC}"><input id="{@id}sbMatchCase" type="checkbox" mstrAttach:click /><label for="{@id}sbMatchCase">'+mstrmojo.desc(4326,"Case Sensitive")+"</label></div></td></tr></table>",markupSlots:{inputNode:function(){return this.domNode.rows[0].cells[0].firstChild.firstChild;},searchNode:function(){return this.domNode.rows[0].cells[1].firstChild.firstChild;},optionNode:function(){return this.domNode.rows[0].cells[2].firstChild.firstChild;}},preBuildRendering:function(){this.cssTextShowMC=this.enableMatchCase?"":"display: none";},postBuildRendering:function(){if(this._super){this._super();}this.matchCase=this.optionNode.checked;},onkeyup:function E(H){var J=this;var I=J.searchTimer;if(I){window.clearTimeout(I);}J.searchTimer=window.setTimeout(function(){J.onkeyupDelayed(H);delete J._searchTimer;},parseInt(H.e.keyCode||H.e.charCode,10)===13?0:J.searchDelay);},onkeyupDelayed:function A(I){var H=I.hWin,K=I.e||H.event;var J=mstrmojo.string.trim(this.inputNode.value);if(this.searchNode){C.toggleClass(this.searchNode,["clear"],J.length>0);}this.showTaskError=false;this.click2Search=false;if(J.length==0||this.autoSubmit||this.onEnter&&K.keyCode===13){this._onsearch();}},onEnter:function(){this._onsearch();},onclick:function(I){var H=I.hWin,K=I.e||H.event,M=K.target||K.srcElement,L=M&&M.id;switch(L.replace(this.id,"")){case"sbDown":if(this.enableMatchCase){var J=this.optionNode.parentNode.style;J.display=J.display=="block"?"none":"block";}break;case"sbSearch":if(this.inputNode.value.length>0){this.clearSearch();}break;case"sbMatchCase":this.set("matchCase",this.optionNode.checked);break;case"sbSpinner":break;}},clearSearch:function(){this.inputNode.value="";C.removeClass(this.searchNode,["clear"]);var I=this.searchCache,H=this.rootID;if(I&&I[H]){I[H][B]="";}this._onsearch(true);},onmatchCaseChange:function(){this.matchCaseChanged=true;this._onsearch();},onrootIDChange:function(){this.rootChanged=true;this._setupCache(this.forceResetCache);var I=this.searchCache[this.rootID];if(I){var H=I[B]||"";this.inputNode.value=H;if(H.length>0){if(H.length>=this.minSearchLength&&this.searchAfterSearchPatternRestored){this._onsearch();}}}},getRootID:function(){},contentWidget:null,_notifyContentWidget:function(I){var H=this.contentWidget||this;H.set("items",I[0]);if(this.supportIncFetch){var J=I[1],L=I[2],K=this.blockCount;H.set("ifs",{np:Math.floor(J/K)+((J%K>0)?1:0),cp:Math.floor(L/K)+((L%K>0)?1:0)});}},_onsearch:function(H){this.getRootID();this._setupCache();var K=mstrmojo.string.trim(this.inputNode.value);if(K.length===0){H=true;}var L=this.token[this.taskId];if(L.test(K)){}if(this.searchPattern==K&&!this.rootChanged&&!this.matchCaseChanged&&!this.click2Search){return ;}var M=this.rootID,J=this.searchCache[M];if((K.length<this.minSearchLength&&!this.click2Search)&&!H){if(this.searchPattern&&this.searchPattern.length>=this.minSearchLength){this._notifyContentWidget(J[M]);this.searchPattern=K;}}else{this.searchPattern=K;J[B]=this.searchPattern;var I=this.filterCache(K,J,H);if((this.click2Search||I===null)&&!H){this.blockBegin=1;this.fetch();return ;}else{this._notifyContentWidget(I);}}J[B]=K;},_setupCache:function(J){var K=this.searchCache,I=this.rootID;if(K&&(J||!K[I])){K[I]=K[I]||{};var H=this.contentWidget&&this.contentWidget.items||this.rootCacheItems||[];K[I][I]=[H,this.totalSize||0,this.blockBegin||1].concat();}},taskCallId:0,path:mstrConfig.taskURL,method:"POST",serverRequest:function D(H,I){if(mstrApp&&mstrApp.serverRequest){mstrApp.serverRequest(H,I);}else{mstrmojo.xhr.request("POST",this.path,I,H,undefined,this.XServer,this.baseParams);}},fetch:function(){this.rootChanged=false;this.matchCaseChanged=false;if(this.spinnerNode){this.spinnerNode.style.display="block";}if(this.preFetch){this.preFetch();}var H=this,I=F.apply(this,[this.taskId]);I.searchPattern=this.searchPattern;this.onUpdateSearchParams(I);var J={success:function(K){var L=K.items||K.es||[];L=[L,K.totalSize||K.sz||0,K.blockBegin||K.bb];mstrmojo.all[H.id].searchCache[H.rootID][(I.searchPattern.length==0?H.rootID:H.buildIndex(I.searchPattern))]=L;H._notifyContentWidget(L);},failure:function(K){if(H.showTaskError){mstrmojo.alert(mstrmojo.desc(8117,"Data request failed:")+" \n"+K.getResponseHeader("X-MSTR-TaskFailureMsg"));}},complete:function(){if(H.spinnerNode){H.spinnerNode.style.display="none";}if(H.postFetch){H.postFetch();}}};this.serverRequest(I,J);},fetchPage:function(H){this.blockBegin=H*this.blockCount+1;this.fetch();},filterCache:function(J,M,I){var H=M&&M[I?this.rootID:this.buildIndex(J)];if(H){return H;}var K=this.token[this.taskId];if(K.test(J)||this.totalSize>this.blockCount){return null;}var O=J.replace(/.$/,"");H=M&&M[this.buildIndex(O)];while(H===undefined&&(O=O.replace(/.$/,"")).length>0){H=M&&M[this.buildIndex(O)];}if(H!==undefined){if(H[1]>this.blockCount){return null;}var L=H[0],N=[];G.forEach(L,function(P){if(P.n.search(new RegExp(J,this.matchCase?"":"i"))>-1){N.push(P);}});this.totalSize=N.length;return(M[this.buildIndex(J)]=[N,N.length,this.blockBegin].concat());}return null;},buildIndex:function(H){if(H.replace(/^\s|\s$/g,"").length===0){return"";}return !this.matchCase?H.toUpperCase():H+"::0";},init:function(H){if(this._super){this._super(H);}this.qse=mstrApp.useQuickSearch&&mstrApp.useQuickSearch()||0;this.autoSubmit=this.quickSearch&&(mstrApp.searchAutoComplete&&mstrApp.searchAutoComplete()||false);this.searchDelay=mstrApp.searchAutoCompleteDelay&&mstrApp.searchAutoCompleteDelay()||0;this.xhr=new mstrmojo.SimpleXHR();this.searchCache=this.searchCache||{};},clear:function(){this.inputNode.value="";C.removeClass(this.searchNode,["clear"]);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.css","mstrmojo.string");function C(H,D,E){var K=[];var G=H.optionRenderer,I=G&&G.render;if(I&&typeof I==="function"){var L=H.options,J=Math.min(E,((L&&L.length)||0)),F;for(F=D;F<J;F++){K.push(I(L[F],F,H));}}return K.join("");}mstrmojo.DropDownList=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.DropDownList",title:"",selectCssClass:"",tooltip:"",cssDisplay:"inline",value:"",unset:false,options:null,optionValueField:"v",optionNameField:"n",idx:-1,renderedOptions:"",markupString:'<span id="{@id}"  class="mstrmojo-DropDownList {@cssClass}">{@en@title}<select id="{@id}_select" class="mstrmojo-DropDownList-select {@selectCssClass}"  style="{@cssText}" title="{@tooltip}"onchange="mstrmojo.all[\'{@id}\'].set(\'selected\', this.options[this.selectedIndex].value);">{@renderedOptions}</select><div class = "strikeoutContainer"></div></span>',markupSlots:{selectNode:function(){return this.domNode.getElementsByTagName("select")[0];}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onidxChange:function(){var D=this.domNode.getElementsByTagName("select");if(D&&D.length){D[0].selectedIndex=this.idx;}},onvalueChange:function(){var I=this.selectNode,G=I.options,F=this.value,E,H;for(H=0;H<G.length;H++){var D=G[H].value.toString()===F;if(D){E=H;if(F!==""){mstrmojo.css.toggleClass(G[H],"selected",D);}break;}}if(I.length>0&&E>0&&this.unset){if(this.options[0].v==="-1"){I.remove(0);E--;}this.unset=false;}this.set("idx",E);},onwidthChange:function(){var D=this.width;if(D>=0){this.selectNode.style.width=D+"px";}}},_set_selected:function(G,D){var E=this.selectNode,F=this[G]!==D;this[G]=D;if(E){this.set("value",D);}return F;},preBuildRendering:function A(){var F=this;if(F.unset){F.idx=0;}var E=F.options,D=(E&&E.length)||0;if(D){F.renderedOptions=C(F,0,D);}return this._super();},optionRenderer:{render:function(E,D,F){return mstrmojo.string.apply(F.getOptionMarkup(E),F.getOptionProps(E,D));}},getOptionMarkup:function(D){return'<option value="{@en@v}" class="{@cls}" style="{@style}" {@sel}>{@en@n}</option>';},getOptionProps:function B(F,D){var G=this,H=F[G.optionValueField],E=D===parseInt(G.idx,10);G.selected=G.value=E?H.toString():G.value;return{cls:E?"selected":"",v:H===undefined?"":H,n:F[G.optionNameField]||"",style:"",sel:E?"selected":""};}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.string");var B=mstrmojo.string;mstrmojo.Label=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Label",allowHTML:false,text:"",title:"",markupString:'<div id="{@id}" class="mstrmojo-Label {@cssClass}" style="{@cssText}" title="{@title} "mstrAttach:click></div>',markupMethods:{ontitleChange:function(){this.domNode.title=this.title;},ontextChange:function(){var C=this.text;C=B.isEmpty(C)?"":C.toString();this.domNode.innerHTML=this.allowHTML?C:B.encodeHtmlString(B.decodeHtmlString(C),true);},oncssTextChange:mstrmojo.Widget.cssTextMarkupMethod,onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:mstrmojo.Widget.enabledMarkupMethod},autoHide:false,_set_text:function A(E,C){if(this.autoHide){this.set("visible",(C!==null)&&(C!=="")&&(C!==undefined));}var D=this.text;this.text=C;return(D!==C);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget");var E=mstrmojo.Widget;mstrmojo.ui._IsPulldown=mstrmojo.provide("mstrmojo.ui._IsPulldown",{scriptClass:"mstrmojo.ui._IsPulldown",markupString:'<div id="{@id}" style="{@cssText}" class="mstrmojo-ui-Pulldown {@cssClass}" mstrAttach:mousedown,click><div class="mstrmojo-ui-Pulldown-text {@cssTextClass}" title="{@title}" style="{@labelCssText}">{@value}</div><div class="container"></div></div>',markupSlots:{selectedNode:function D(){return this.domNode.firstChild;},containerNode:function A(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:E.visibleMarkupMethod,onheightChange:E.heightMarkupMethod,onwidthChange:E.widthMarkupMethod,onvalueChange:function F(){this.selectedNode.innerHTML=this.value||"";},onenabledChange:mstrmojo.Widget.enabledMarkupMethod},getPopupList:mstrmojo.emptyFn,anchorSlot:"selectedNode",postBuildRendering:function B(){this._super();this.getPopupList().set("items",this.items);var G=this.selectedIndex,H=this.selectedIndices;if(G!==undefined){this.set("selectedIndex",G);}if(H!==undefined){this.set("selectedIndices",mstrmojo.hash.copy(H||{}));}},onitemsChange:function C(){var G=this.getPopupList();if(G){G.set("items",this.items);}},onPopupWidgetOpened:function(){var G=this.getPopupList();if(G&&(!G.items||G.items.length===0)){G.close();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._IsExprNode","mstrmojo.fe._IsRelationTreeNode","mstrmojo._HasEditableText","mstrmojo.css","mstrmojo.string","mstrmojo.dom");var C=mstrmojo.css,A=mstrmojo.dom,F=mstrmojo.string,E=function(H){this._super&&this._super(H);A.stopPropogation(H.hWin,H.e);},G=mstrmojo.fe._IsRelationTreeNode.createSetHtml;mstrmojo.fe.DynamicNode=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._IsExprNode,mstrmojo.fe._IsRelationTreeNode,mstrmojo._HasEditableText],{scriptClass:"mstrmojo.fe.DynamicNode",markupString:'<div id="{@id}" class="mstrmojo-dynamic {@cssClass}"  style="position:relative;{@cssText}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-dynamic-prefix {@cssClass}"><span class="mstrmojo-textset mstrmojo-dynamic-prefix-text"  mstrAttach:click></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">'+G+'<span class="mstrmojo-indent" onclick="mstrmojo.all[\'{@id}\'].ind()">'+mstrmojo.desc(5895,"Group conditions")+'</span><span class="mstrmojo-outdent" onclick="mstrmojo.all[\'{@id}\'].out()">'+mstrmojo.desc(5896,"Ungroup Conditions")+'</span></span></div><div class="mstrmojo-onhoverparent mstrmojo-dynamicNode" title="'+mstrmojo.desc(13229,"Add this condition to the target list of a selector.")+'"><span class="mstrmojo-dynamicNode-info"><span class="mstrmojo-textset"></span></span><span class="mstrmojo-onhover-bl mstrmojo-abs mstrmojo-topright mstrmojo-cond-tools {@cssClass}"><img class="mstrmojo-del" src="../images/1ptrans.gif" title="'+mstrmojo.desc(7931,"Delete condition")+'" onclick="mstrmojo.all[\'{@id}\'].del()" ></img></span><span class="mstrmojo-textset mstrmojo-rename-text" mstrAttach:click >'+mstrmojo.desc(1388,"Rename")+"</span>"+G+"</div></div>",markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},dynamicNode:function(){return this.domNode.lastChild;},textNode:function(){return this.domNode.lastChild.firstChild.lastChild;},createSetOptNode:function(){return this.domNode.firstChild.childNodes[1].firstChild;},createSetNode:function(){return this.domNode.lastChild.lastChild;},renameNode:function(){return this.domNode.lastChild.childNodes[2];}},markupMethods:{onprefixedAndOrEditableChange:function(){C.toggleClass(this.prefixNode,["editable"],this.prefixedAndOrEditable);},onselectedChange:function(){C.toggleClass(this.dynamicNode,["selected"],this.selected);},onisEditingChange:function(){C.toggleClass(this.domNode,["renaming"],this.isEditing);},ondataChange:function(){this.prefixNode.innerHTML=this.andOrTxt();this.textNode.innerHTML=this.data.ph.n;},onglowChange:function(){var H=this;C.toggleClass(H.dynamicNode,["glow"],this.glow);if(this.glow){setTimeout(function(){C.toggleClass(H.dynamicNode,["glow"],false);H.glow=false;},1000);}},onnoRelationOperatorChange:function(){C.toggleClass(this.prefixHoverNode,["noRelation"],this.noRelationOperator);},onnoRelationChange:function(){C.toggleClass(this.dynamicNode,["noRelation"],this.noRelation);}},editableSlot:"textNode",editButtonSlot:"renameNode",init:function(H){var J=H.data;if(J){var I=H.tree.nameFactory;if(J.ph.n){I.setName(J.ph.n,this);}else{J.ph.n=I.getNewName(this,mstrmojo.desc(12033,"Dynamic Condition")+" ");}}this._super(H);},_set_data:function(K,H){var I=this.data,J=(I!==H);if(J){this.data=H;this.text=H.ph.n;}return J;},preclick:function D(H){var J=null,I=A.eventTarget(H.hWin,H.e);if(A.contains(this.prefixNode,I,true)){J="andor";}else{if(A.contains(this.createSetOptNode,I,true)&&!this.noRelationOperator&&!this.noRelation){J="createSetOpt";}else{if(A.contains(this.createSetNode,I,true)&&!this.noRelation){J="createSet";}else{if(A.contains(this.renameNode,I,true)){this.set("isEditing",true);}}}}H.part=J;},isEmpty:function(){var I=this.data,H=I&&I.ph;return !(H&&H.n);},del:function B(){var I=this.parent,H=this.tree.nameFactory;if(I&&I.remove&&this.data){I.remove(this.data);H.removeName(this.data.ph.n);}},onkeyup:E,onkeydown:E,onTextEditComplete:function(){var J=this.tree,K=J.nameFactory,H=F.trim(this.text||""),I=this.data.ph.n;if(H&&H!==I){if(K.isNameExist(H)){K.names[H].set("glow",true);this.set("isEditing",true);}else{K.changeName(I,H,this);this.data.ph.n=H;}}},isSelectableArea:function(H){return mstrmojo.dom.contains(this.dynamicNode,H,true);},avatarCssCls:"mstrmojo-FE mstrmojo-dynamicNode",getAvatarNode:function(){return this.dynamicNode.cloneNode(true);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom","mstrmojo.hash","mstrmojo.css");var C=mstrmojo.dom,B=mstrmojo.hash,E=mstrmojo.css;mstrmojo.Button=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Button",iconClass:"",innerIconClass:"",title:"",text:"&nbsp;",enabled:true,selected:false,markupString:'<div id="{@id}" class="mstrmojo-Button {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}" mstrAttach:touchstart,click,mousedown,mouseup><div class="mstrmojo-Button-text {@innerIconClass}"></div></div>',markupSlots:{textNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:function(){E.toggleClass(this.domNode,"disabled",!this.enabled);},onselectedChange:function(){E.toggleClass(this.domNode,"selected",this.selected);},ontextChange:function(){this.textNode.innerHTML=this.text;},ontitleChange:function(){this.domNode.title=this.title;},onwidthChange:mstrmojo.Widget.widthMarkupMethod},oniconClassChange:function D(J){var K=this.domNode;if(this.hasRendered&&K){K.className=K.className.replace(J.valueWas,"")+" "+J.value;}},onclick:mstrmojo.emptyFn,ontouchend:function I(J){this.onclick(J);}});mstrmojo.Button.newIconButton=function H(L,O,M,J,N){var K={scriptClass:"mstrmojo.Button",title:L,cssClass:O,text:"",onclick:M};if(J){K.bindings=J;}B.copy(N,K);return K;};function F(M,N,J,P){var L=[];if(J){L.push(J);}var O=P&&P.cssClass;if(O){L.push(O);delete P.cssClass;}var K={scriptClass:"mstrmojo.Button",cssClass:L.join(" "),text:M};if(N){K.onclick=N;}return B.copy(P,K);}mstrmojo.Button.newInteractiveButton=function G(M,N,P,O){var L={glowClass:"glow"};if(P&&(C.isFF||C.isWK)){B.copy({onmousedown:function J(){E.applyShadow(this.domNode,0,0,10,P);},onmouseup:function K(){E.removeShadow(this.domNode);}},L);}return F(M,N,"mstrmojo-InteractiveButton",B.copy(O,L));};mstrmojo.Button.newWebButton=function A(K,J,M,L){return F(K,J,"mstrmojo-WebButton"+(M?" hot":""),L);};mstrmojo.Button.newActionButton=function(K,L,M){var J=mstrmojo.Button.newWebButton(K,L,false,M);J.cssClass=J.cssClass+" action-button";return J;};}());(function(){mstrmojo.requiresCls("mstrmojo.publisher","mstrmojo.Widget","mstrmojo.array","mstrmojo._HasChildren");var G=mstrmojo.array;function E(P){if(!this.shouldPropagateEnabled){return ;}var O=this._disabledChildren;G.forEach(P,function(Q){if(Q.enabled){O.push(Q.id);Q.set("enabled",false);}});}function J(){G.forEach(this._disabledChildren,function(O){var P=mstrmojo.all[O];if(P&&P.parent===this){P.set("enabled",true);}},this);this._disabledChildren=[];}mstrmojo.Container=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._HasChildren],{scriptClass:"mstrmojo.Container",defaultChildSlot:"containerNode",containerNode:null,preserveChildDomOrder:true,shouldPropagateEnabled:false,init:function M(P){this._super(P);this._disabledChildren=[];this.attachEventListener("addChild",this.id,function(Q){if(this.shouldPropagateEnabled&&!this.enabled){E.call(this,Q.value);}});if(this.children){this.initChildren();}var O=this.parent;if(!O||O.hasInitBindings){this.initBindings();}},destroy:function H(O){if(this.children){this.destroyChildren(true);}if(this.bindings){this.destroyBindings();}this._super(O);},unrender:function I(Q){var R=this.children,O=(R&&R.length)||0,P;for(P=O-1;P>-1;P--){R[P].unrender(true);}this._super(Q);},postBuildRendering:function A(){if(this._super()!==false){this.renderChildren();return true;}return false;},renderChildren:function L(){var Q=this.children,O=(Q&&Q.length)||0,P;for(P=0;P<O;P++){var R=Q[P];if(this.childRenderCheck(R)){R.render();}}},childRenderCheck:function D(P){if(P&&!P.hasRendered){var O=P.slot||this.defaultChildSlot;return !!this[O];}return false;},addChildren:function N(R,P,Q){var O=this._super(R,P,Q);if(O){this.childRenderOnAddCheck(O);}return O;},removeChildren:function F(V,R){var U=V?[V]:(this.children||[]),O=U.length,S;for(S=O-1;S>-1;S--){var Q=U[S],P=Q&&Q.domNode;if(P){var T=this[(Q.slot||this.defaultChildSlot)];if(P.parentNode===T){T.removeChild(P);}}}return this._super(V,R);},childRenderOnAddCheck:function B(Q){if(this.hasRendered&&Q){var O=Q.length,P;for(P=0;P<O;P++){var R=Q[P];if(this.childRenderCheck(R)){R.render();}else{if(R&&R.hasRendered){this.onchildRenderingChange(R);}}}}},onchildRenderingChange:function K(O){var W=O&&O.domNode;if(!W){return ;}var P=this.defaultChildSlot,V=O.slot||P,Y=this[V],Q=this.children;if(!Y){if(W.parentNode){W.parentNode.removeChild(W);}}else{if(W.parentNode===Y){return ;}if(!this.preserveChildDomOrder){Y.appendChild(W);}else{var R,U;for(U=Q.length-1;U>=0;U--){var X=Q[U];if(X===O){break;}if(V===(X.slot||P)){var Z=X.domNode;if(Z&&Z.parentNode===Y){R=Z;}}}if(R){Y.insertBefore(W,R);}else{Y.appendChild(W);}}}if(mstrmojo.publisher.hasSubs(this.id,"childrenRendered")){var S=Q.length,T;for(T=0;T<S;T++){if(!Q[T].domNode){return ;}}this.raiseEvent({name:"childrenRendered"});}},propagateChildProps:function C(S){var R=this[S],Q=this.children||[],O=Q.length,P;for(P=0;P<O;P++){Q[P].set(S,R);}}});mstrmojo.Container.enabledMarkupMethod=function(){mstrmojo.Widget.enabledMarkupMethod.apply(this,arguments);if(this.shouldPropagateEnabled){if(this.enabled){J.call(this);}else{E.call(this,this.children);}}};}());(function(){mstrmojo.requiresCls("mstrmojo.expr","mstrmojo.css","mstrmojo._IsExprNode","mstrmojo._HasPopup","mstrmojo.Widget","mstrmojo.fe.FilterUtils");var I=mstrmojo.dom,A=mstrmojo.css,E=mstrmojo.fe.FilterUtils,D=E.getExprConditionNodeHtml,B=E.getExprNodeHtmlAndText;function C(J){var K=J.data;return D(K);}mstrmojo.ConditionNode=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._IsExprNode,mstrmojo._HasPopup],{scriptClass:"mstrmojo.ConditionNode",data:null,editable:false,prefixedAndOrEditable:false,markupString:'<div id="{@id}" class="mstrmojo-cond mstrmojo-ConditionNode {@cssClass}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-cond-prefix {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-prefix-text" mstrAttach:click></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">{@_prefixAndOrToolsMarkup}</span></div><div class="mstrmojo-onhoverparent mstrmojo-cond-contents {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-text {@cssClass}" mstrAttach:click></span><span class="mstrmojo-cond-text-postfix {@cssClass}"></span><span class="mstrmojo-rel mstrmojo-cond-popupNode {@cssClass}"></span><span class="mstrmojo-onhover-bl mstrmojo-abs mstrmojo-topright mstrmojo-cond-tools {@cssClass}"><img class="mstrmojo-del" src="../images/1ptrans.gif" tooltip="'+mstrmojo.desc(7931,"Delete condition")+'" onclick="mstrmojo.all[\'{@id}\'].del()" /></span></div></div>',markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},prefixAndOrToolsNode:function(){return this.domNode.firstChild.childNodes[1];},condNode:function(){return this.domNode.childNodes[1];},textNode:function(){return this.domNode.childNodes[1].firstChild;},textPostfixNode:function(){return this.domNode.childNodes[1].childNodes[1];},popupNode:function(){return this.domNode.childNodes[1].childNodes[2];}},markupMethods:{onprefixedAndOrEditableChange:function(){A.toggleClass(this.prefixNode,["editable"],this.prefixedAndOrEditable);},oneditableChange:function(){A.toggleClass(this.textNode,["editable"],this.editable);},onselectedChange:function(){A.toggleClass(this.condNode,["selected"],this.selected);},ondataChange:function(){this.prefixNode.innerHTML=this.andOrTxt();var J=B(this.data);this.textNode.innerHTML=J.html;this.textNode.title=J.text;this.textPostfixNode.innerHTML=this.getConditionTextPostfix();}},betweenText:mstrmojo.desc(308,"and"),atText:mstrmojo.desc(5923,"at"),emptyText:mstrmojo.desc(7930,"Empty condition"),init:function H(J){this._super(J);this.markupString=this.markupString.replace("{@_prefixAndOrToolsMarkup}",this.getPrefixAndOrToolsMarkup());},getConditionTextPostfix:function(){return"";},del:function G(){var J=this.parent;if(J&&J.remove&&this.data){J.remove(this.data);}},isEmpty:function(){var K=this.data,J=K&&K.et,L=J&&mstrmojo.expr.ET2TGT[J];return !(L&&K[L]);},isSelectableArea:function(J){return I.contains(this.condNode,J,true);},preclick:function F(J){var L=null,K=I.eventTarget(J.hWin,J.e);if(I.contains(this.prefixNode,K,true)){L="andor";}else{if(I.contains(this.textNode,K,true)){L="condition";}else{if(I.contains(this.textPostfixNode,K,true)){I.stopPropogation(J.hWin,J.e);return false;}}}J.part=L;}});mstrmojo.ConditionNode.getFunctionNode=C;})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._Formattable");mstrmojo.DocHTMLContainer=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._Formattable],{scriptClass:"mstrmojo.DocHTMLContainer",scrolling:"auto",markupString:'<iframe id="{@id}" k="{@k}" class="mstrmojo-DocHTMLContainer" title="{@tooltip}" style="{@domNodeCssText}" src="{@v}" scrolling="{@scrolling}"></iframe>',formatHandlers:{domNode:["RW","B","F","background-color","text-align","white-space","fx"]},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},update:function A(B){this.v=B.data.v;if(mstrApp&&mstrApp.isTouchApp()){this.scrolling="no";}if(this.thresholdId||B.data.tid){delete this.fmts;}this.thresholdId=B.data.tid;this.set("visible",!B.data.hidden);}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.Model","mstrmojo.storage.DOMLocalStorage");var D=mstrmojo.hash,I=mstrmojo.array;function G(N){if(mstrApp&&mstrApp.optimizeFitToPage){N+="&innerWidth="+window.innerWidth+"&innerHeight="+window.innerHeight;}return N;}mstrmojo.home.HomeModel=mstrmojo.declare(mstrmojo.Model,[],{scriptClass:"mstrmojo.home.HomeModel",controller:null,modelData:null,cards:null,init:function L(N){this._super(N);this.loadCards();},loadCards:function K(){this.cards=this.modelData||[];this.cards=mstrmojo.array.filter(this.cards,function(N){return N!==null;});this.sortCards();return this.cards;},sortCards:function M(){mstrmojo.array.forEach(this.cards,function(O,N){O.pos=N;});},saveCards:function E(Q,N){Q=Q||{};N=N||"0";var P=(this.cards===null);mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(R){if(Q.success){Q.success(R);}},failure:function(R){if(Q.failure){Q.failure(R);}},complete:function(R){if(Q.complete){Q.complete(R);}}},{taskId:"setPreference",clearPrefValue:P,prefs:"homecardsDef\u001E"+JSON.stringify(this.cards,function O(R,S){if(R==="pos"){return undefined;}return S;})+"\u001E"+N});this.raiseEvent("cardsChange",{cards:this.cards});},updateCard:function H(N){this.cards[N.pos]=N;this.saveCards();},addCard:function C(N){N.pos=this.cards.length;this.cards.push(N);this.saveCards();},removeCard:function B(N){if(this.cards.length===1){this.cards=[];}else{this.cards.splice(N.pos,1);this.sortCards();}this.saveCards();},switchCards:function(R,S,P){var O=R.pos;var Q=S.pos;this.cards.splice(O,1);var N=mstrmojo.array.find(this.cards,"pos",Q);this.cards.splice(N+(P?0:1),0,R);this.sortCards();this.saveCards();},loadDefaultCard:function J(){this.cards=null;this.saveCards({success:function(){mstrmojo.form.send({evt:5005,src:mstrApp.name+"."+mstrApp.pageName+".5005"});},failure:function(N){mstrmojo.alert(N.message||N.getResponseHeader("X-MSTR-TaskFailureMsg"));}},"0");},saveDefaultCard:function A(){this.saveCards({success:function(){mstrmojo.alert(mstrmojo.desc(3336,"## layout has been saved successfully.").replace("##",mstrmojo.desc(14510,"My Page")));},failure:function(N){mstrmojo.alert(N.message||N.getResponseHeader("X-MSTR-TaskFailureMsg"));}},"1");},getRecentObjects:function F(){try{var R=window.localStorage;if(!R||!window.JSON){return ;}var Z=function(a){return{3:"reportID=",55:"documentID="}[a]||"messageID=";},P=function(e){var b=e.ty,a="";switch(b){case 55:var d=e.vm;switch(d){case 8192:case 2048:a="mstrmojo-ListIcon t55 dvm8192";break;case 1:default:a="mstrmojo-ListIcon t55";break;}break;case 3:var c=e.viewMode;switch(c){case 1:a="mstrmojo-ListIcon t3 st768";break;case 2:a="mstrmojo-ListIcon t3 st769";break;case 3:a="mstrmojo-ListIcon t3 st774";break;default:a="";break;}break;}return a;};var W=[];var S=mstrConfig.lastMsgKey,T=(JSON.parse(decodeURIComponent(mstrmojo.cookies.getCookieSetting("lastMsgID")||"{}")))[S],V=function(a){return a&&(a.length===32)&&/^[A-Z0-9]{32}$/.test(a);};if(V(T)){var Y=R.getItem("lastMsgRecoveryInfo"+S);if(Y){Y=JSON.parse(Y);var N=G("?"+Y.url.replace(/messageID.*/,"messageID="+T));W.push({url:mstrmojo.addCSRFTokenToURL(N),n:mstrmojo.desc(14706,"# (Recovered)").replace("#",mstrmojo.string.decodeHtmlString(Y.n)),did:Y.did,iconCls:"mstrmojo-ListIcon recover",isLastMsg:true});}}var U=JSON.parse(R.getItem("recentObjects"+S));mstrmojo.array.forEach(U,function(b){if(!mstrmojo.string.isEmpty(b)){var c=JSON.parse(b),d=G("?"+c.url.replace(/messageID.*/,Z(c.ty)+c.did));c.url=mstrmojo.addCSRFTokenToURL(d);c.iconCls=P(c);c.isMsg=false;c.n=mstrmojo.string.decodeHtmlString(c.n);if(c.imgData===undefined){c.html='<div class="preview no-recent-img">'+mstrmojo.desc(14558,"No preview image available.")+"<br/></div>";}var a=mstrmojo.array.find(W,"did",c.did);if(a===-1){W.push(c);}else{W[a].imgData=c.imgData;W[a].html=c.html;}}});if(W.length===0){var O;if(mstrmojo.resolveFeature("create-analysis")&&mstrmojo.resolveFeature("dhtml")){var N=mstrmojo.addCSRFTokenToURL("?evt=3187&src="+mstrApp.name+".3187");if(mstrmojo.resolveFeature("show-sample-recents")){O=mstrmojo.desc(15527,"Your Recents list is empty.# ###Create a new dossier## # or # view a sample dossier for inspiration.").replace("###",'<a href="'+N+'">').replace("##","</a>").replace(/#/g,"<br/>");}else{O=mstrmojo.desc(15528,"Your Recents list is empty.# ###Create a new dossier##").replace("###",'<a href="'+N+'">').replace("##","</a>").replace(/#/g,"<br/>");}W=[{n:"",html:'<div class="no-recent">'+O+"</div>",url:N,info:true}];}else{if(mstrmojo.resolveFeature("show-sample-recents")){O=mstrmojo.desc(15529,"Your Recents list is empty.# view a sample dossier for inspiration.").replace(/#/g,"<br/>");}else{O=mstrmojo.desc(14711,"Your Recents list is empty.");}W=[{n:"",html:'<div class="no-recent">'+O+"</div>",info:true}];}}if(mstrmojo.resolveFeature("show-sample-recents")){var X=[{n:"Airline Flight Analysis",url:mstrmojo.addCSRFTokenToURL("?evt=3140&src=#.3140&documentID=233AE5EF48F48E84B4626D8E0E8806DE".replace("#",mstrApp.name)),iconCls:P({ty:55,vm:8192}),pos:0,overlayText:mstrmojo.desc(10293,"Sample")},{n:"Slot Machine Performance",url:mstrmojo.addCSRFTokenToURL("?evt=3140&src=#.3140&documentID=C495AFFF435BB7A2896A7E953425AB97".replace("#",mstrApp.name)),iconCls:P({ty:55,vm:8192}),pos:1,overlayText:mstrmojo.desc(10293,"Sample")},{n:"Technology Adoption Trend",url:mstrmojo.addCSRFTokenToURL("?evt=3140&src=#.3140&documentID=553B744D4EC7568C1370E28D1B4B27D0".replace("#",mstrApp.name)),iconCls:P({ty:55,vm:8192}),pos:2,overlayText:mstrmojo.desc(10293,"Sample")},{n:"Worldwide Emissions",url:mstrmojo.addCSRFTokenToURL("?evt=3140&src=#.3140&documentID=CB525E944363EA469F4E29A5C01608D6".replace("#",mstrApp.name)),iconCls:P({ty:55,vm:8192}),pos:3,overlayText:mstrmojo.desc(10293,"Sample")}];return W.concat(X);}return W;}catch(Q){}}});mstrmojo.home.HomeModel.CardDefType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.locales","mstrmojo.date","mstrmojo.DI.DIConstants","mstrmojo.DI.DIDatabaseHelper");mstrmojo.requiresDescs(2052,2170,2265,3434,3544,4530,4699,8002,8984,9614,9919,9920,9921,9922,12491,12492,12493,12494,12495,12509,12771,13031,13131,13132,13980,13981,8536);var T=mstrmojo.DI.DIConstants,O=T.dataTypeMenuItems,L=T.rdcsFlag,D=mstrmojo.dom,J=mstrmojo.array;mstrmojo.DI.DIHelpers=mstrmojo.declare(mstrmojo.Obj,null,null);mstrmojo.DI.DIHelpers.isIE7=function N(){return mstrmojo.dom.isIE7;};mstrmojo.DI.DIHelpers.isIE=function(){return D.isIE||!!D.userAgent.match(/Trident\/7\.0/);};mstrmojo.DI.DIHelpers.isIEOrEdge=function(){return mstrmojo.dom.isEdge||this.isIE();};mstrmojo.DI.DIHelpers.getURLCaption=function(){var U="";if(mstrApp.diParams&&mstrApp.diParams.EnableURLImport){if(mstrApp.diParams.EnableFileImport){if(mstrApp.isSingleTier){if(window.FormWrapper!==window.client){U+="File://";}}else{U+="File://";}}if(mstrApp.diParams.EnableHttpImport){if(U!==""){U+=", ";}U+="Http://, Https://";}if(mstrApp.diParams.EnableFTPImport){if(U!==""){U+=", ";}U+="Ftp://";}}return U;};mstrmojo.DI.DIHelpers.getUrlTooltip=function C(){var U="";if(!mstrApp.diParams){return U;}if(!mstrApp.diParams.EnableURLImport){U=mstrmojo.desc(12491,"URL file uploads are currently disabled. Please contact your administrator.");}else{U=mstrmojo.desc(12492,"Use one of the following URL formats to upload your file:")+" ";U+=mstrmojo.DI.DIHelpers.getURLCaption();if(mstrApp.enableFileImport){U+="\r\r";U+=mstrmojo.desc(12493,"'File://' format allows you to upload files in your local machine. For example: File://ComputerName/path/FileName.");}if(mstrApp.enableHttpImport||mstrApp.enableHttpsImport){U+="\r\r";if(mstrApp.enableFileImport){U+=mstrmojo.desc(12494,"Some other examples are:");}else{U+=mstrmojo.desc(12495,"Some examples are:");}}if(mstrApp.enableHttpImport){U+="\r";U+="http://host/path/FileName";U+="\r";U+="https://user:password@host/path/FileName";}if(mstrApp.enableFtpImport){U+="\r";U+="ftp://user:password@host/path/FileName";U+="\r";U+="ftp://user:password@host:port/path/FileName";}}return U;};mstrmojo.DI.DIHelpers.createMSTRObjects=function(W,Y){var U,X,V;if(W.constructor===Array){U=W;for(V=0;V<U.length;V++){U[V]=mstrmojo.DI.DIHelpers.createMSTRObjects(W[V],Y);}}else{if(typeof W==="object"){U=new mstrmojo.Obj(W);for(X in W){if(!Y||Y.indexOf(X)===-1){if(W.hasOwnProperty(X)){U.set(X,mstrmojo.DI.DIHelpers.createMSTRObjects(W[X],Y));}}}}else{U=W;}}return U;};mstrmojo.DI.DIHelpers.getURLParameters=function(U){var V;var Y;var X=[];if(U){if(U.indexOf("?")>0){U=U.substr(U.indexOf("?")+1);}Y=U.split("&");for(V=0;V<Y.length;V++){var W=Y[V].split("=");if(W.length===2){X[W[0]]=W[1];}}}return X;};mstrmojo.DI.DIHelpers.getBackendSourceType=function(U){var V=T.backendSourceSubtype.localFile;switch(U){case T.sourceSubtype.dropbox:V=T.backendSourceSubtype.dropbox;break;case T.sourceSubtype.bisource:V=T.backendSourceSubtype.bISources;break;case T.sourceSubtype.clipboard:V=T.backendSourceSubtype.clipboard;break;case T.sourceSubtype.facebook:V=T.backendSourceSubtype.facebook;break;case T.sourceSubtype.googleAnalytics:V=T.backendSourceSubtype.googleAnalytics;break;case T.sourceSubtype.googleBigQuery:V=T.backendSourceSubtype.googleBigQuery;break;case T.sourceSubtype.googleBigQueryFFSQL:V=T.backendSourceSubtype.googleBigQueryFFSQLModel;break;case T.sourceSubtype.googleBigQuerySingleTable:V=T.backendSourceSubtype.googleBigQuerySingleTable;break;case T.sourceSubtype.googleDrive:V=T.backendSourceSubtype.googleDrive;break;case T.sourceSubtype.hadoop:V=T.backendSourceSubtype.hadoopFileBrowser;break;case T.sourceSubtype.localFile:V=T.backendSourceSubtype.localFile;break;case T.sourceSubtype.mdx:V=T.backendSourceSubtype.OLAPSources;break;case T.sourceSubtype.salesforce:V=T.backendSourceSubtype.salesforce;break;case T.sourceSubtype.samplefile:V=T.backendSourceSubtype.samplefile;break;case T.sourceSubtype.searchOnSource:V=T.backendSourceSubtype.searchAsASource;break;case T.sourceSubtype.twitter:V=T.backendSourceSubtype.twitter;break;case T.sourceSubtype.url:V=T.backendSourceSubtype.url;break;case T.sourceSubtype.publicData:V=T.backendSourceSubtype.publicData;break;case T.sourceSubtype.cloudElement:V=T.backendSourceSubtype.cloudElement;break;}return V;};mstrmojo.DI.DIHelpers.getStateParameters=function(V){var U;var Y;var W=[];if(V.indexOf(":")>=0){Y=V.split(":");}else{Y=V.split("%3A");}for(U=0;U<Y.length;U++){var X=Y[U];if(X.substr(2,1)==="_"){W[X.substr(0,2)]=X.substr(3);}}return W;};mstrmojo.DI.DIHelpers.getExtensionType=function(W){var V=W.toLowerCase(),U;if(V===".xls"||V===".xlsx"||V===".xlsm"){U=T.xdaType.excel;}else{if(V===".txt"||V===".csv"||V===".tsv"||V===".prn"){U=T.xdaType.text;}else{U=0;}}return U;};mstrmojo.DI.DIHelpers.setTablesrc=function(U,W,V){if(W){if(!U.tablesSrc[W]){U.tablesSrc[W]=[];}U.tablesSrc[W].push(V);}};function S(U){var W={0:2,1:2,2:2,3:2,4:2,5:2,6:2,7:2,8:3,9:3,10:3,11:2,12:2,13:2,14:8,15:9,16:1,17:3,18:3,21:2,22:2,23:3,30:11,31:2,33:3,34:2},Z={1:T.columnDataTypes.integer,2:T.columnDataTypes.integer,6:T.columnDataTypes.dtdouble,7:T.columnDataTypes.dtfloat,21:T.columnDataTypes.integer,22:T.columnDataTypes.nlong,30:T.columnDataTypes.bigDecimal,34:T.columnDataTypes.int64},V=W[U],Y=Z[U],X="";switch(V.toString()){case T.dataTypeMenuItems.NUMBER:switch(Y){case T.columnDataTypes.integer:X=mstrmojo.desc(9614,"Integer");break;case T.columnDataTypes.nlong:X=mstrmojo.desc(13131,"Long");break;case T.columnDataTypes.int64:X=mstrmojo.desc(13132,"Big Integer");break;case T.columnDataTypes.dtfloat:X=mstrmojo.desc(8002,"Float");break;case T.columnDataTypes.dtdouble:X=mstrmojo.desc(2265,"Double");break;case T.columnDataTypes.bigDecimal:X=mstrmojo.desc(9920,"Big Decimal");break;default:X=mstrmojo.desc(3434,"Number");break;}break;case T.dataTypeMenuItems.DATE:X=mstrmojo.desc(2052,"Date");break;case T.dataTypeMenuItems.DATE_TIME:X=mstrmojo.desc(9919,"DateTime");break;case T.dataTypeMenuItems.TIME:X=mstrmojo.desc(2170,"Time");break;case T.dataTypeMenuItems.TEXT:X=mstrmojo.desc(3544,"Text");break;case T.dataTypeMenuItems.HTML_TAG:X=mstrmojo.desc(9921,"HTML Tag");break;case T.dataTypeMenuItems.PHONE_NUMBER:X=mstrmojo.desc(8984,"Phone Number");break;case T.dataTypeMenuItems.SYMBOL:X=mstrmojo.desc(4530,"Symbol");break;case T.dataTypeMenuItems.URL:X=mstrmojo.desc(9922,"URL");break;case T.dataTypeMenuItems.EMAIL:X=mstrmojo.desc(4699,"Email");break;}return X;}mstrmojo.DI.DIHelpers.getDataTypeString=S;mstrmojo.DI.DIHelpers.parseAlternateSourceValidationResults=function M(c){var a=[],Y,Z,b,d,U,W,X,V;J.forEach(c,function(e){Y=Z=b=d="";W=(e.vt===3)?1:0;switch(e.vt){case 0:case 1:case 2:case 3:Y=e.n;Z=S(e.ddt);U=e.src;b=U.n;d=S(U.ddt);break;case 4:Y=e.n;Z=S(e.ddt);break;case 8:U=e.src;b=U.n;d=S(U.ddt);break;}X=Z?Y+"("+Z+")":Y;V=d?b+"("+d+")":b;a.push([X,W,V]);});return a;};mstrmojo.DI.DIHelpers.getURLFileName=function(V){var U=V.lastIndexOf("/");return U>=0&&U+1!==V.length?V.substr(U+1):V;};mstrmojo.DI.DIHelpers.isOperationMode=function(U){return U!==undefined&&U!==null;};mstrmojo.DI.DIHelpers.isCtrlKey=function(U,W){var V=W||(U||window).event;return V.ctrlKey||V.metaKey;};mstrmojo.DI.DIHelpers.isRefreshable=function(V){var U,W=0;for(U in V.importSources){var X=V.importSources[U];if(X.type===T.sourceType.file&&(X.subtype===T.sourceSubtype.url||X.subtype===T.sourceSubtype.publicData)){if(!X.sourceInfo||X.sourceInfo.url.indexOf("http://mirror.microstrategy.com/datahub/samples")!==0){W++;}}}if(V.getAllTableID().length===W&&!mstrApp.diParams.EnableHttpImport&&!mstrApp.diParams.EnableFTPImport&&!mstrApp.diParams.EnableFileImport&&!mstrApp.diParams.EnableURLImport){return false;}return true;};mstrmojo.DI.DIHelpers.strStartsWith=function(V,U){return V.indexOf(U)===0;};mstrmojo.DI.DIHelpers.adjustDataIdx=function(X,W){var U=[],V;if(!X||X.length===0){return ;}J.forEach(X,function(Y){V=Y.subColumns;if(V&&V.length>1){U=U.concat(V);}else{U.push(Y);}});U.sort(function(Z,Y){return Z[W]-Y[W];});};mstrmojo.DI.DIHelpers.setDataIdx=function(W,V,U){if(!V||V.length===0){return ;}if(V[0].hasOwnProperty("clix")){J.forEach(W,function(Y){var X=Y.ix;Y[U]=J.find(V,"clix",X);if(Y.isMultiForm){J.forEach(Y.subColumns,function(Z){Z[U]=J.find(V,"clix",Z.ix);});}});}if(V[0].hasOwnProperty("did")){J.forEach(W,function(Z){var Y=Z.did;var X=J.find(V,"did",Y);if(X!==-1){Z[U]=X;}if(Z.isMultiForm){J.forEach(Z.subColumns,function(a){X=J.find(V,"did",a.did);if(X!==-1){a[U]=X;}});}});}};mstrmojo.DI.DIHelpers.encodeData=function(U){var V="";if(U!==undefined){if(typeof U==="number"){V=U;}else{V=mstrmojo.string.encodeHtmlString(U,false,true);}}return V;};var E={0:"Bytes",1:"KB",2:"MB",3:"GB",4:"TB",5:"PB"};function P(U){return E[U]||"unknown";}mstrmojo.DI.DIHelpers.getRoundSize=function I(V){var U;for(U=0;(V/1024)>1;U++){V=V/1024;}V=V.toPrecision(3);return V+P(U);};mstrmojo.DI.DIHelpers.findNewElements=function(W,X){var V=[],U;if(W&&W.length){J.forEach(X,function(Y){U=J.indexOf(W,Y);if(U===-1){V.push(Y);}});}else{if(X&&X.length){V=[].concat(X);}}return V;};mstrmojo.DI.DIHelpers.generateCubeName=function(V){var U,W,X=50;U=V.join(" ");if(U.length>X){U=U.slice(0,X)+"...";}W=V.length;if(W>1){U+=" ("+W+" tables)";}return U;};mstrmojo.DI.DIHelpers.parseValidateSourceResults=function(V){var U={isValidate:true,hasError:false,tbids:[],tableValidate:[],missingColumnTbids:[],mismatchedDatatypeTbids:[],missingTableTbids:[],errorTableTbids:[],missingColumns:{},mismatchedDatatypeColumns:{},missingTablesColumns:{},errorTableErrCode:{},errorTableErrMsg:{}},W=V&&V.vts;J.forEach(W,function(e){var X=e.tbid,f=e.vt,Z=e.emsg,c=e.cols||[],Y=true,d=false,b,g=[],a=[];if(f===1){Y=true;}else{switch(f){case T.backendError.switchingFileType:case T.backendError.noExternalSession:case T.backendError.databaseCredentialsNotAvailable:case T.backendError.CECredentialNotAvailable:case T.backendError.AuthenticationError:case T.backendError.shouldBeIgnored:d=true;break;}J.forEach(c,function(h){var j=h.vt;switch(j){case 1:a.push(h);break;case 4:g.push(h);break;}});}if(d){U.errorTableTbids.push(X);U.errorTableErrCode[X]=f;U.errorTableErrMsg[X]=Z;U.isValidate=false;U.hasError=true;}b=g.length>0&&g.length===c.length;if(g.length>0||a.length>0){Y=false;}else{Y=true;}if(Y===false){U.isValidate=false;}U.tbids.push(X);U.tableValidate.push(Y);if(g.length>0){if(b){U.missingTableTbids.push(X);U.missingTablesColumns[X]=g;}else{U.missingColumnTbids.push(X);U.missingColumns[X]=g;}}if(a.length>0){U.mismatchedDatatypeTbids.push(X);U.mismatchedDatatypeColumns[X]=a;}});return U;};mstrmojo.DI.DIHelpers.truncate=function(W,Y,U){if(W&&W.length>Y){var a=3,V=Y-a,Z=Math.ceil(V/2),X=Math.floor(V/2);if(U){return W.substr(0,V)+"...";}else{return W.substr(0,Z)+"..."+W.substr(W.length-X);}}else{return W;}};mstrmojo.DI.DIHelpers.getAbsoluteFileName=function(U){var V,W=U.lastIndexOf("\\");if(W===-1){W=U.lastIndexOf("/");}V=U.substring(W+1,U.length);return V;};mstrmojo.DI.DIHelpers.reevaluatePopupPosition=function(U){if(U){var V=U.style,Y=V.display,X=V.left,W=V.top;V.display="block";if(parseInt(X.substring(0,X.length-2))<0){V.left="0px";}if(parseInt(W.substring(0,W.length-2))<0){V.top="0px";}V.display=Y;}};mstrmojo.DI.DIHelpers.expandNode=function(V){var U=V.visible;V.set("visible",!U);return !U;};mstrmojo.DI.DIHelpers.normalizeTimestamp=function(W){var V=W.replace(/-/g,"/");var U=V.indexOf(".");if(U>0){V=V.substring(0,U);}return V;};mstrmojo.DI.DIHelpers.getBackendErrorStr=function(V,U){var W="";switch(V){case T.backendError.switchingFileType:W=mstrmojo.desc(12509,"Switching the file type is not allowed during republishing or editing the cube.");break;case T.backendError.noExternalSession:case T.backendError.databaseCredentialsNotAvailable:case T.backendError.CECredentialNotAvailable:case T.backendError.AuthenticationError:W=mstrmojo.desc(14392,"We do not have the credentials needed to get the data for this table. Please provide the credentials to proceed publishing this table.");break;}return W;};mstrmojo.DI.DIHelpers.getCommonElements=function(X,Z,Y){var V=[],W,U;for(W=0;X&&W<X.length;W++){for(U=0;Z&&U<Z.length;U++){if(Y(X[W],Z[U])){V.push(X[W]);break;}}}return V;};mstrmojo.DI.DIHelpers.formatDateAndTime=function(c,X){var b=mstrmojo.date;var V=mstrmojo.locales;var W,d,a,Z,U,Y;W=b.parseDateAndOrTime(c);d=W.date;a=W.time;if(X){Y=new Date(Date.UTC(d.year,d.month-1,d.day,a.hour,a.min,a.sec));W=b.getDateJson(Y);d=W;a=W;}Z=b.formatDateInfo(d,V.datetime.DATEDISPLAYFORMAT);U=b.formatTimeInfo(a,V.datetime.TIMEDISPLAYFORMAT);return Z+" "+U;};mstrmojo.DI.DIHelpers.isServerBasedWS=function(){return !!mstrApp.isWorkstation&&!mstrApp.isSingleTier;};mstrmojo.DI.DIHelpers.isLocalWS=function(){return !!mstrApp.isWorkstation&&!!mstrApp.isSingleTier;};mstrmojo.DI.DIHelpers.isDIinVI=function(){return !!mstrApp.isWorkstation&&!!mstrApp.isSingleTier&&!!mstrApp.isPopup;};mstrmojo.DI.DIHelpers.extractFileNameFromHadoopURL=function(V){if(!V){return"";}var U,W;U=V.lastIndexOf("/")+1;W=V.substring(U);return W;};mstrmojo.DI.DIHelpers.extractFileExtensionFromHadoopURL=function(V){if(!V){return"";}var U,W;U=V.lastIndexOf("/")+1;W=V.substring(U);return W.substring(W.lastIndexOf(".")+1);};mstrmojo.DI.DIHelpers.isWS=function(){return !!mstrApp.isWorkstation;};mstrmojo.DI.DIHelpers.getEnvObj=function(){var X=(navigator.platform.indexOf("Win")!==-1?"Win":"Mac"),U=!!mstrApp.isWorkstation?"WS":"Web",V=[];V.push(U,X);return{ENV:V.join("-"),isWSClient:function(){if(!window.FormWrapper||!window.FormWrapper.isDesktop){return false;}return !window.FormWrapper.isDesktop();},isDesktopClient:function(){if(!window.FormWrapper||!window.FormWrapper.isDesktop){return false;}return window.FormWrapper.isDesktop();},isWeb:function(){return U==="Web";},isWS:function(){return U==="WS";},isWin:function(){return X==="Win";},isMac:function(){return X==="Mac";},isDataSet:function(){return mstrApp.placeholder==="DIApp"||mstrApp.placeholder==="mainDIApp"||mstrApp.placeholder==="QBApp";},isDIinVI:function(){return !!mstrApp.isFromVI;},isInDI:function(){return mstrApp.placeholder==="DIApp"||mstrApp.placeholder==="mainDIApp";},isInQB:function(){return mstrApp.placeholder==="QBApp";},isAppSchema:function(){return !!window.mstrAppSchema;},isWebWin:function(){return this.isWeb()&&this.isWin();},isWebMac:function(){return this.isWeb()&&this.isMac();},isWebDataSet:function(){return this.isWeb()&&this.isDataSet();},isWebDossier:function(){return this.isWeb()&&this.isDIinVI();},isWSWin:function(){return this.isWS()&&this.isWin();},isWSMac:function(){return this.isWS()&&this.isMac();},isWSDataSet:function(){return this.isWS()&&this.isDataSet();},isServerBasedWS:mstrmojo.DI.DIHelpers.isServerBasedWS,isWSDossier:function(){return this.isWS()&&this.isDIinVI();},isWSLiveMode:function W(){return this.isWS()&&parseInt(window.FormWrapper.isWSLiveMode(),10)===1;},isWSDossierLocalMode:function(){return this.isWSDossier()&&!this.isWSLiveMode();},isWebWinDataSet:function(){return this.isWeb()&&this.isWin()&&this.isDataSet();},isWebMacDataSet:function(){return this.isWeb()&&this.isMac()&&this.isDataSet();},isWebWinDossier:function(){return this.isWeb()&&this.isWin()&&this.isDIinVI();},isWebMacDossier:function(){return this.isWeb()&&this.isMac()&&this.isDIinVI();},isWSWinDataSet:function(){return this.isWS()&&this.isWin()&&this.isDataSet();},isWSMacDataSet:function(){return this.isWS()&&this.isMac()&&this.isDataSet();},isWSWinDossier:function(){return this.isWS()&&this.isWin()&&this.isDIinVI();},isWSMacDossier:function(){return this.isWS()&&this.isMac()&&this.isDIinVI();},isStandaloneDataSet:function(){return !this.isDIinVI()&&this.isDataSet();}};};mstrmojo.DI.DIHelpers.isOnetier=function(){return !!mstrApp.isSingleTier;};mstrmojo.DI.DIHelpers.getHierarchyMappingXML=function(Z,a){var W="";var V=0,X=1,Y=12;if(a&&a[L.ID]){W+="<mpcs>";W+="<mpc ";W+='did="'+a[L.ID].did+'" drvflg="'+V+(a[L.ID].n?('" n="'+a[L.ID].n+'" ot="'):"")+Y+'" recurisve="'+X+'" ';if(!!Z&&Z!==""){W+='oid="'+Z+'" ';}W+=">";if(a[L.JOIN_ID]){W+="<rdcs>";}for(var U=L.JOIN_ID;U<=L.DISTANCE;U++){if(a[U]!==undefined){W+='<rdc did="'+a[U].did+'" fg="'+U+'"/>';}}if(a[L.JOIN_ID]){W+="</rdcs>";}W+="</mpc>";W+="</mpcs>";}return W;};mstrmojo.DI.DIHelpers.getOperationMode=function(){return mstrApp.getRootController().getModel().operationMode;};mstrmojo.DI.DIHelpers.standardizeDBRolesFormat=function Q(c){var W=["att","dbRole","tableMap"],d,f,Z,U,X,V,a,Y,e,g,b=(function(){var h="list",k="number",j="text";function l(m,r,q,p,o,n){if(m&&q){if(n){m.push({field:r,fieldV:q,IDS:p,options:n,tp:o});}else{m.push({field:r,fieldV:q,IDS:p,tp:o});}}}return{authenticationmethod:function(m,n){l(m,"auth",n,7776,h,[{IDS:13980,n:mstrmojo.desc(13980),v:"1"},{IDS:13981,n:mstrmojo.desc(13981),v:"4"}]);},databasename:function(m,n){l(m,"db",n,8519,j);},hostname:function(m,n){l(m,"host",n,8533,j);},port:function(m,n){l(m,"port",n,8534,k);},server:function(m,n){l(m,"svr",n,8536,j);}};}());c=Object.keys(c).map(function(h){return mstrmojo.DI.DIHelpers.createMSTRObjects(c[h],W);});J.forEach(c,function(h){J.forEach(h.tables,function(j){j.dbRole=(j.dbRole&&j.dbRole.oi)||j.dbRole;j.dbmsObj=j.dbmsObj&&j.dbmsObj.oi;f=j.dbRole;if(f){f.dbmsObj=j.dbmsObj;Z=f.dbmsObj;if(!f.dbms){f.dbms=f.def&&f.def.dbms&&f.def.dbms.did;}}if(!Z||Z.DBInfo){return ;}Z.DBInfo={};d=Z.DBInfo;U=f.efd;if(!U){return ;}U.forEach(function(k){X=k.oi&&k.oi.def;if(!X){return ;}g=X.dbtp;if(g){f.db_type=g;d.dbTypes={dbt:{v:g,n:mstrmojo.desc(mstrmojo.DI.DIDatabaseHelper.getDescriptionIdByDBType(g))}};}V=X.cnsr;if(!V){return ;}e=[];Y=null;f.connstr=V;V.split(";").forEach(function(l){a=l.split("=");a[0]=a[0].toLowerCase().trim();if(a[0]==="driver"){d.driverInstalled=true;}else{if(a[0]==="authenticationmethod"){Y=a;}else{if(b[a[0]]){b[a[0]](e,a[1]);}}}});if(Y){b[Y[0]](e,Y[1]);}});});});return c;};mstrmojo.DI.DIHelpers.filterDisableSources=function A(U){return J.indexOf(mstrApp.diParams.disabledSources,U)<0;};mstrmojo.DI.DIHelpers.getPopupWindowOptions=function R(){var Y={};var W=window.screenX||window.screenLeft||0,V=window.screenY||window.screenTop||0,X=800,U=600,Z;if(document.body&&document.body.offsetWidth){X=document.body.offsetWidth;U=document.body.offsetHeight;}if(document.compatMode==="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth){X=document.documentElement.offsetWidth;U=document.documentElement.offsetHeight;}if(window.innerWidth&&window.innerHeight){X=window.innerWidth;U=window.innerHeight;}if(window.outerWidth){X=window.outerWidth;}if(window.outerHeight){U=window.outerHeight;}Y.height=U*0.5;Y.width=X*0.8;if(Y.height<600||isNaN(Y.height)){Y.height=600;}if(Y.width<800||isNaN(Y.width)){Y.width=800;}Y.left=W+(X-Y.width)/2;Y.top=V+(U-Y.height)/8;if(this.getEnvObj().isWSWin()&&this.getEnvObj().isDIinVI()){Y.left=(window.screen.width-Y.width)/2;Y.top=(window.screen.height-Y.height)/2;}Z="width="+Y.width+",height="+Y.height;Z+=",toolbar=0,scrollbars=1,status=1,resizable=1,location=1,menuBar=0";Z+=",left="+Y.left+",top="+Y.top;return Z;};mstrmojo.DI.DIHelpers.createPopupWindow=function G(V,U){var W,X;X=this.getPopupWindowOptions();if(!V){V="";}W=window.open(V,U,X);return{wnd:W};};mstrmojo.DI.DIHelpers.openPopupWindow=function H(X,V,U){var W;if(X&&!X.closed){X.location=U;X.focus();}else{W=this.createPopupWindow(U);X=W.wnd;if(X){X.focus();}}return X;};mstrmojo.DI.DIHelpers.sendResponse2Window=function B(V,U,Y){var X;if(Y){X=Y;}else{X=window.opener;}if(X){if(U===undefined){U=window.location.origin;if(!U){U=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");}}try{if(this.isIE()&&X.postMessagePassthrough){X.postMessagePassthrough(V,U);try{window.open("","_self","");window.close();}catch(Z){window.close();}}else{X.postMessage(V,U);}}catch(W){console.log("postMessage error: "+W);}}};mstrmojo.DI.DIHelpers.convertDataSourceType2SourceType=function F(U){switch(U){case T.dataSourceType.DROPBOX:return T.sourceType.dropbox;case T.dataSourceType.GOOGLE_DRIVE:return T.sourceType.googleDrive;case T.dataSourceType.GOOGLE_ANALYTICS:return T.sourceType.googleAnalytics;case T.dataSourceType.SALESFORCE:return T.sourceType.salesforce;case T.dataSourceType.GOOGLE_BIGQUERY:return T.sourceType.googleBigQuery;default:return -1;}};mstrmojo.DI.DIHelpers.highlightKeyWords=function K(c,d,U){var W="\\*.?+$^[](){}|/",e=c,a,X;if(c===""){return d;}for(X in W){if(W.hasOwnProperty(X)){a=W[X];e=e.replace(new RegExp("\\"+a,"g"),"\\"+a);}}var b=new RegExp("("+e+")","ig");var V="\u001E",Z=mstrmojo.string.encodeHtmlString,Y;if(b.test(d)){d=d.replace(b,function(f){return V+f+V;});Y=J.map((d||"").split(V),function(g,f){return(f%2===0)?Z(g):('<span class="'+U+'">'+Z(g)+"</span>");});return Y.join("");}};mstrmojo.DI.DIHelpers.detectCustomImg=function(X,W){if(!X||!(W.nodeType&&W.nodeType===window.Node.ELEMENT_NODE)){return ;}var U=X.replace?X.replace(/\s+/g,""):"";var Y=document.getElementsByTagName("head")[0];var V=document.createElement("img");V.src="../javascript/mojo/css/images/DI/connectors/"+U+".png";V.onload=function(){W.style.background="url(../javascript/mojo/css/images/DI/connectors/"+U+".png) no-repeat";Y.removeChild(V);};V.onerror=function(){W.style.background="url(../javascript/mojo/css/images/DI/connectors/default.png) no-repeat";Y.removeChild(V);};Y.appendChild(V);};mstrmojo.DI.DIHelpers.spliceUrlBySeparator=function(V){var U=V.split("#");return U.slice(U.length/2+1).join("#");};mstrmojo.DI.DIHelpers.isOriginalConnector=function(V){var U=T.originalConnector;if(U.elastic===V||U.tapClicks===V){return true;}return false;};mstrmojo.DI.DIHelpers.acceptEventFromAncestor=function(U){if(!U){return true;}if(!this.domNode||typeof U.contains!=="function"||!this.hasRendered){return false;}return U.contains(this.domNode);};mstrmojo.DI.DIHelpers.isdbRoleWritable=function(U){if(mstrmojo.DI.DIHelpers.isOnetier()){return true;}else{return U.writable==="1"&&mstrApp.rootController.hasPrivilege(T.DssXmlPrivileges.DssXmlPrivilegesUseDatabaseInstanceManager);}};mstrmojo.DI.DIHelpers.isdbRoleUsable=function(U){return mstrmojo.DI.DIHelpers.isOnetier()?true:U.usable==="1";};mstrmojo.DI.DIHelpers.applyDriverSuffix=function(W){if(!W||!W.Preferences){return ;}var U=JSON.stringify(W),V=W.Preferences.driverNameSuffix,Y=this.getEnvObj();var X="Platform";if(Y.isDesktopClient()){X=Y.isMac()?"DesktopMac":"DesktopWin";}else{if(Y.isWSClient()){X=Y.isMac()?"WorkstationMac":"WorkstationWin";}}var Z=V[J.find(V,"n",X)];return JSON.parse(U.replace(/!#DRIVERSUFFIX#!/g,Z?Z.value:""));};mstrmojo.DI.DIHelpers.isGeo=function(U){return U.georole&&U.georole>0;};mstrmojo.DI.DIHelpers.isTime=function(U){return U.dtp===parseInt(O.DATE,10)||U.dtp===parseInt(O.DATE_TIME,10)||U.dtp===parseInt(O.TIME,10);};}());(function(){mstrmojo.requiresCls("mstrmojo.StepperContentProvider","mstrmojo.num");var A=mstrmojo.num;function B(G,F){var H=F?G.max:G.min,D=F?G.min:G.max,E=G.getVal(F?1:-1);return(H===null||(F?(E<=H):(E>=H))||(D!==null&&G.canLoop));}function C(H,G){var F=H.min,D=H.max,E=H.getVal(G?1:-1);if((G&&D!==null&&E>D)||(!G&&F!==null&&(E<F))){if(H.canLoop){E=((E-F)%(D-F+1))+F;E=(E>=F)?E:E+(D-F+1);}else{return ;}}H.item[H.valField]=H.curVal=E;H.onTraverse();}mstrmojo.NumStepperContentProvider=mstrmojo.declare(mstrmojo.StepperContentProvider,null,{scriptClass:"mstrmojo.NumStepperContentProvider",curVal:null,init:function(E){this._super(E);var F=this.item,D=function(I){var H=I&&F[I];return(H===null||H===undefined);},G=function(I,K,H){var J=H&&D.call(this,K)?null:F[K];if(J!==null&&J!==undefined){this[I]=J;}};G.call(this,"min",this.minField,true);G.call(this,"max",this.maxField,true);G.call(this,"maxLength",this.maxLengthField,true);G.call(this,"interval",this.intField);this._initCurrent();},_initCurrent:function(){var E=this.item,F=this.curVal=E[this.valField];if(F===null||F===undefined){var D=this.min;this.curVal=D!==null?D:0;}},next:function(){C(this,true);},prev:function(){C(this,false);},hasPrev:function(){return B(this,false);},hasNext:function(){return B(this,true);},renderItemAt:function(F){var E=this.getVal(F),D=this.renderer;return D?D.render(E,this):E;},getVal:function(D){return this.curVal+(this.interval*(D||0));},setVal:function(F){var G=this.min,D=this.max,E=this.getVal();if(typeof F!=="number"||isNaN(F)||F===E||A.inNumericRange(F,G,D)!==0){return ;}this.item[this.valField]=this.curVal=F;this.onTraverse();},onTraverse:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.boxmodel","mstrmojo.DocDataService");mstrmojo.vi.models.PanelFormatSaver=mstrmojo.provide("mstrmojo.vi.models.PanelFormatSaver",{getPanelSaver:function A(C,B,D){return{saveProperty:function E(G,H){var J=B[G];if(J){if(J.convert){H=mstrmojo.boxmodel.px2Inches(C.getZoomProps(),H);}var I={},F=I[J.set]={};F[J.name]=H;C.updateUnitFormat(D||C.getRootNode(),1,I,undefined,mstrmojo.DocDataService.RAPID_EXEC);}}};}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.models.PanelFormatSaver");mstrmojo.vi.ui._IsViPanel=mstrmojo.provide("mstrmojo.vi.ui._IsViPanel",{_mixinName:"mstrmojo.vi.ui._IsViPanel",getPanelSaver:function A(){return null;},setOpenStatus:function D(F,E,I,H){if(this.visible!==F){this.set("visible",F);if(!H){this.resetLayout(H);}if(!E){var G=this.getPanelSaver();if(G){G.saveProperty("visible",F);}}mstrApp.rootCtrl.generateToolbar();}},getOpenStatus:function C(){return !!this.visible;},resetLayout:function B(){this.height=this.width="1px";this.parent.doLayout();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.ui._HasScroller","mstrmojo.css","mstrmojo.DI.DIHelpers");var F=mstrmojo.css,H=mstrmojo.string,A=mstrmojo.desc(14058,"Show Details"),E=mstrmojo.desc(14059,"Hide Details"),B=mstrmojo.DI.DIHelpers,D=mstrmojo.desc(14060,"We are sorry for the inconvenience. Please {contact} your administrator for help.").replace("{",'<span class="dyn-link">').replace("}","</span>");mstrmojo.ui.editors.ErrorDialogContent=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.editors.ErrorDialogContent",markupString:'<div class="mstrmojo-error-content {@cssClass}" mstrAttach:click><div class="scroll-container"><div>{@shortDesc}</div><div class="contact">'+D+'</div><div class="toggle-details-link" >'+A+'</div><div class="error-details">{@longDesc}</div></div></div>',markupSlots:{scrollNode:function(){return this.domNode.firstChild;},contactNode:function(){return this.domNode.firstChild.children[1].getElementsByClassName("dyn-link")[0];},toggleDetailsNode:function(){return this.domNode.firstChild.children[2];},errorDetailsNode:function(){return this.domNode.firstChild.children[3];}},markupMethods:{onshowDetailsChange:function(){var K=this.showDetails;this.toggleDetailsNode.innerHTML=K?E:A;F.toggleClass(this.domNode,"show-details",K);this.updateScrollbars();}},cssClass:undefined,shortDesc:undefined,longDesc:undefined,showDetails:false,showToggle:true,enableContactStr:true,allowHTML:false,init:function I(K){this._super(K);this.shortDesc=this.shortDesc||mstrmojo.desc(14061,"An error has occurred");},onclick:function J(K){var M=K.getTarget(),L,N=this.longDesc;if(M===this.contactNode){L="mailto:?subject="+encodeURI("Issue: "+this.shortDesc)+(N?("&body="+encodeURI("Detail:\r\n"+N)):"");mstrApp.openPage(L,"_self");}else{if(M===this.toggleDetailsNode){this.set("showDetails",!this.showDetails);this.parent.raiseEvent({name:"EditorResized"});this.parent.positionDialog();}}},setupScrollNodes:function C(){this.scrollNode=this.scrollNode;},preBuildRendering:function G(){this._super&&this._super();if(!this.allowHTML){this.longDesc=H.encodeHtmlString(H.decodeHtmlString(this.longDesc,true),true);}},postBuildRendering:function(){var K=this.domNode.firstChild.children[1];this._super&&this._super();!this.showToggle&&F.addClass(this.toggleDetailsNode,"hide");!this.enableContactStr&&F.addClass(K,"invisible");}});})();(function(){mstrmojo.requiresCls("mstrmojo.ConditionNode","mstrmojo.fe._IsRelationTreeNode","mstrmojo.dom","mstrmojo.css","mstrmojo.expr");mstrmojo.requiresDescs(1994,5893,7931,15671);var A=mstrmojo.dom,B=mstrmojo.css,D=mstrmojo.expr.ET,E=mstrmojo.fe._IsRelationTreeNode.createSetHtml;mstrmojo.fe.ConditionNode=mstrmojo.declare(mstrmojo.ConditionNode,[mstrmojo.fe._IsRelationTreeNode],{scriptClass:"mstrmojo.fe.ConditionNode",emptyText:mstrmojo.desc(5893,"New Condition"),markupString:'<div id="{@id}" class="mstrmojo-cond mstrmojo-ConditionNode {@cssClass}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-cond-prefix {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-prefix-text" mstrAttach:click></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">{@_prefixAndOrToolsMarkup}</span></div><div class="mstrmojo-onhoverparent mstrmojo-cond-contents {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-text {@cssClass}" mstrAttach:click></span><span class="mstrmojo-cond-text-postfix {@cssClass}"></span><span class="mstrmojo-rel mstrmojo-cond-popupNode {@cssClass}"></span><span class="mstrmojo-onhover-bl mstrmojo-abs mstrmojo-topright mstrmojo-cond-tools {@cssClass}"><img class="mstrmojo-del" src="../images/1ptrans.gif" tooltip="'+mstrmojo.desc(7931,"Delete condition")+'" onclick="mstrmojo.all[\'{@id}\'].del()" /><img class="mstrmojo-lock" src="../images/lock_view.svg"/></span><span class="mstrmojo-add-cond" mstrAttach:click>'+mstrmojo.desc(1994,"Add Condition")+"</span>"+E+"</div></div>",getPrefixAndOrToolsMarkup:function(){return(E+this._super());},markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},prefixAndOrToolsNode:function(){return this.domNode.firstChild.childNodes[1];},condNode:function(){return this.domNode.childNodes[1];},textNode:function(){return this.domNode.childNodes[1].firstChild;},textPostfixNode:function(){return this.domNode.childNodes[1].childNodes[1];},popupNode:function(){return this.domNode.childNodes[1].childNodes[2];},createSetNode:function(){return this.domNode.childNodes[1].lastChild;},createSetOptNode:function(){return this.domNode.firstChild.childNodes[1].firstChild;},addConditionNode:function(){return this.domNode.childNodes[1].childNodes[4];}},markupMethods:mstrmojo.hash.copy({onnoRelationOperatorChange:function(){B.toggleClass(this.prefixHoverNode,["noRelation"],this.noRelationOperator);},onnoRelationChange:function(){B.toggleClass(this.condNode,["noRelation"],this.noRelation);},onnoCreateSetChange:function(){B.toggleClass(this.condNode,["noRelation"],this.noCreateSet);},onlockedChange:function(){B.toggleClass(this.condNode,["locked"],this.locked);}},mstrmojo.hash.copy(mstrmojo.ConditionNode.prototype.markupMethods)),init:function(I){if(this._super){this._super(I);}var K=this.data&&this.data.et;if(K){this.set("noCreateSet",mstrApp.supportAdvFilter?false:(K===D.MQ||K===D.MC));}var G=this.tree.editor;if(G){var F=G.scriptClass==="mstrmojo.fe.FilterEditor";var H=typeof (G.disableElementsBrowsing)==="function"&&G.disableElementsBrowsing();if(F&&H&&K===D.AE){this.set("locked",true);this.set("editable",false);this.set("useRichTooltip",true);var J=this;this.set("updateTooltipConfig",function(){var L=mstrmojo.dom.position(J.domNode);this.richTooltip={content:mstrmojo.desc(15671,"Edit or remove is only available in workstation"),refNode:J.domNode,enableHover:true,cssClass:"vi-regular vi-tooltip-V V-center",posType:mstrmojo.tooltip.POS_BOTTOMCENTER,left:L.w/2,top:-10};});}}},preclick:function C(F){var I=null,H=A.eventTarget(F.hWin,F.e),G=this._super(F);if(A.contains(this.createSetOptNode,H,true)&&!this.noRelationOperator&&!this.noRelation){I="createSetOpt";}else{if(A.contains(this.createSetNode,H,true)&&!this.noRelation){I="createSet";}else{if(A.contains(this.addConditionNode,H,true)){I="addCondition";}}}F.part=I||F.part;return G;},onmouseover:function(){this.toggleGroupBorder(true);},onmouseout:function(){this.toggleGroupBorder(false);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout");var D=' style="display:inline-block;vertical-align:middle;"';mstrmojo.ui.editors.controls.TwoColumnContainer=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",markupString:'<div id="{@id}" class="mstrmojo-vi-TwoColumnProp {@cssClass}" style="{@cssText}"><div class="vi-col1"'+D+'></div><div class="divider"'+D+'></div><div class="vi-col2"'+D+"></div></div>",markupSlots:{col1Node:function C(){return this.domNode.firstChild;},dividerNode:function B(){return this.domNode.childNodes[1];},col2Node:function A(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:mstrmojo.Container.enabledMarkupMethod},layoutConfig:{w:{col1Node:"40%",dividerNode:"5px",col2Node:"60%"},xt:true},shouldPropagateEnabled:true,col1Width:"40%",dividerWidth:"5px",col2Width:"60%",init:function F(G){this._super(G);var H=this.layoutConfig=JSON.parse(JSON.stringify(this.layoutConfig)),I=H.w;I.col1Node=this.col1Width;I.dividerNode=this.dividerWidth;I.col2Node=this.col2Width;},getControl:function E(G){return(this.children||[]).filter(function(H){return H.slot==="col"+G+"Node";})[0];}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.dom","mstrmojo.css");var I=mstrmojo.css,G={9:"Tab",13:"Enter",27:"Esc",38:"ArrowUp",40:"ArrowDown"},E="sbClear",N="sbSearch";mstrmojo.SearchWidget=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.SearchWidget",quickSearch:false,quickSearchForClear:false,showClearNode:true,placeholderText:"",markupString:'<table id={@id} cellspacing="0" cellpadding="0" class="mstrmojo-SearchWidget mstrmojo-SearchBox-Wrapper {@cssClass}" style="{@cssText};"><tr><td><div class="mstrmojo-SearchBox" mstrAttach:click ><input class="mstrmojo-SearchBox-input" type="text" style="width:{@width};" placeholder="{@placeholderText}" mstrAttach:keyup,focus,blur/></div></td><td><div class="mstrmojo-SearchBox-clear" id="{@id}'+E+'" mstrAttach:click></div></td><td><div class="mstrmojo-SearchBox-bg"><div class="mstrmojo-SearchBox-search" id="{@id}'+N+'" mstrAttach:click ></div></div></td></tr></table>',markupSlots:{inputNode:function(){return this.domNode.rows[0].cells[0].firstChild.firstChild;},clearNode:function(){return this.domNode.rows[0].cells[1].firstChild;},searchNode:function(){return this.domNode.rows[0].cells[2].firstChild.firstChild;}},markupMethods:{onquickSearchChange:function(){I.toggleClass(this.domNode,"quick-search",this.quickSearch);},onwidthChange:function(){if(this.inputNode&&this.inputNode.style&&this.inputNode.style.width){this.inputNode.style.width=this.width;}},ondisabledChange:function O(){var Q=this.disabled;I.toggleClass(this.domNode,"disabled",Q);if(this.inputNode){this.inputNode.disabled=Q;}}},clearNode:null,searchNode:null,isFocus:false,disabled:false,onsearch:mstrmojo.emptyFn,onclear:mstrmojo.emptyFn,prekeyup:function M(R){var Q=R.hWin,S=R.e||Q.event;this.updateSearch();var T=G[S.keyCode];if(this["on"+T]){this["on"+T](R);}},setClearIcon:function C(){var R=this.parent;if(!R){return ;}var Q=R.search&&R.search.searchNode,S=this.getSearchPattern(),T=(S.length===0);if(Q){I.toggleClass(this.searchNode,"clear",!T&&this.quickSearch);}},onEnter:function D(Q){this.onsearch(this.getSearchPattern());},onEsc:function A(Q){this.clearSearch();},getSearchPattern:function K(){return mstrmojo.string.trim(this.inputNode.value);},setSearchPattern:function K(Q){if(this.inputNode){this.inputNode.value=Q||"";this.updateSearch();}},preclick:function H(Q){var S=Q.getTarget(),R=S&&S.id;switch(R.replace(this.id,"")){case N:if(this.quickSearch){this.clearSearch();}else{this.onsearch(this.getSearchPattern());}break;case E:this.clearSearch();break;}},updateSearch:function B(){var R=this.getSearchPattern(),Q=(R.length===0),S=this.quickSearch;I.toggleClass(this.clearNode,"show",this.showClearNode&&!Q&&!S);I.toggleClass(this.searchNode,"clear",!Q&&S);I.toggleClass(this.domNode,"hasPattern",!Q);if(S||this.quickSearchForClear&&Q){this[Q?"clearSearch":"onsearch"](R);}},clearSearch:function L(){var Q=this.getSearchPattern();this.reset();this.onclear(Q);},onfocus:function P(){this.isFocus=true;I.addClass(this.domNode,"focus");},onblur:function J(){this.isFocus=false;I.removeClass(this.domNode,"focus");},reset:function F(){this.inputNode.value="";I.removeClass(this.clearNode,"show");I.removeClass(this.domNode,"hasPattern");I.removeClass(this.searchNode,"clear");}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash","mstrmojo.Container","mstrmojo._Formattable","mstrmojo._IsThresholdConditionTarget","mstrmojo.EnumRWUnitType");var TP_HTML_CONTAINER=mstrmojo.EnumRWUnitType.HTMLCONTAINER;var $DOM=mstrmojo.dom,$HASH=mstrmojo.hash;function buildScriptNode(scriptNode){var node=document.createElement("script"),attributes=scriptNode.attributes,length=attributes.length;for(var i=0;i<length;i++){node.setAttribute(attributes[i].name,attributes[i].value);}return node;}mstrmojo.DocTextfield=mstrmojo.declare(mstrmojo.Container,[mstrmojo._Formattable,mstrmojo._IsThresholdConditionTarget],{scriptClass:"mstrmojo.DocTextfield",markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocTextfield {@cssClass}" title="{@tooltip}" style="{@domNodeCssText}"><div class="mstrmojo-DocTextfield-valueNode" style="{@valueNodeCssText}" mstrAttach:click >{@v}</div>{@buttonNodeMarkup}</div>',markupSlots:{valueNode:function(){return this.domNode.firstChild;}},formatHandlers:{domNode:["T","z-index"],valueNode:["D","B","F","P","background-color","fx","text-align","white-space","overflow"]},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},update:function update(node){var d=node.data,v=d.v||"";if(node.defn.t===TP_HTML_CONTAINER){var div=document.createElement("div");div.innerHTML="<textarea>"+v+"</textarea>";v='<div style="display:none">&nbsp;</div>'+div.firstChild.value;div=null;}this.v=v;this.tooltip=d.tooltip||this.tooltip;if(this.thresholdId||d.tid){delete this.fmts;}this.thresholdId=d.tid;this.set("visible",!node.data.hidden);if(this._super){this._super(node);}},init:function(props){this._super(props);},postBuildRendering:function postBuildRendering(){var i,len;this.handleRotatedText();if(this.defn.t===TP_HTML_CONTAINER){var scripts=this.domNode.getElementsByTagName("script");for(i=0,len=scripts.length;i<len;i++){if(scripts[i].src){var parentNode=scripts[i].parentNode,node=buildScriptNode(scripts[i]);parentNode.removeChild(scripts[i]);parentNode.appendChild(node);}else{try{eval(scripts[i].innerHTML);}catch(err){console.log(err);}}}}return this._super();},isTextFieldRotated:function isTextFieldRotated(){var formats=this.getFormats();return(formats.fx&&formats.fx.rt&&!$DOM.isDXIE&&$DOM.supports($DOM.cssFeatures.TEXT_ROTATION));},handleRotatedText:function handleRotatedText(){var formats=this.getFormats(),rotateValue=formats.fx&&formats.fx.rt;if(this.isTextFieldRotated()){var domNode=this.domNode,domNodeStyle=domNode.style;switch(rotateValue){case 1:domNodeStyle.left=(parseInt(formats.left,10)+domNode.offsetHeight)+"px";break;case 3:domNodeStyle.top=(parseInt(formats.top,10)+domNode.offsetWidth)+"px";break;}}},getAnchor:function getAnchor(){return this.valueNode;}});mstrmojo.DocSummaryTextfield=mstrmojo.declare(mstrmojo.DocTextfield,null,{scriptClass:"mstrmojo.DocSummaryTextfield",markupString:'<span id="{@id}" class="mstrmojo-DocSumTextfield {@cssClass}" title="{@tooltip}" style="{@domNodeCssText}"><span class="mstrmojo-DocTextfield-valueNode" style="{@valueNodeCssText}" mstrAttach:click >{@openLink}{@v}{@closeLink}</span>{@buttonNodeMarkup}</span>',formatHandlers:{domNode:["T","z-index"],valueNode:["D","B","F","background-color","fx","text-align","white-space","overflow"]},update:function update(node){this._super(node);if(this.v){var v=this.v,p1=new RegExp("&lt;bold&gt;","g"),p2=new RegExp("&lt;/bold&gt;","g");if(v.indexOf("&lt;empty/&gt;")>-1){this.v="";return ;}v=v.replace(p1,"<b>");v=v.replace(p2,"</b>");this.v=v;}},preBuildRendering:function preBuildRendering(){if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.Container","mstrmojo._CanRenderChildrenOnShow");var A=mstrmojo.array;mstrmojo.StackContainer=mstrmojo.declare(mstrmojo.Container,[mstrmojo._CanRenderChildrenOnShow],{scriptClass:"mstrmojo.StackContainer",isStack:true,markupString:'<div id="{@id}" class="mstrmojo-StackContainer {@cssClass}" style="{@cssText}"></div>',markupMethods:{onwidthChange:function(){if(!isNaN(parseInt(this.width))){this.domNode.style.width=this.width;}},onheightChange:function(){if(!isNaN(parseInt(this.height))){this.domNode.style.height=this.height;}},onborderChange:function(){this.domNode.style.border=this.border||"";},onbackgroundChange:function(){this.domNode.style.background=this.background||"";}},markupSlots:{containerNode:function(){return this.domNode;}},_set_selected:function D(H,F){var G=this.selected;if(G===F){return false;}if(G){G.set("visible",false);}this.selected=F;if(F){F.set("visible",true);}return true;},addChildren:function B(J,G,H){var K=this.selected,L;for(var I=0,F=(J&&J.length)||0;I<F;I++){L=J[I];if(L&&L.set){L.set("visible",L===K);}}return this._super(J,G,H);},removeChildren:function C(H,F){var G=this._super(H,F);if(!H||(H===this.selected)){this.set("selected",null);}return G;},destroy:function E(F){this._super(F);this.selected=null;},renderMode:"onshow"});})();mstrmojo.requiresCls("mstrmojo.Container");mstrmojo.TBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.TBox",markupString:'<table id="{@id}" class="mstrmojo-TBox {@cssClass}" cellspacing="{@cellSpacing}" cellpadding="{@cellPadding}" style="{@cssText}"><tbody><tr><td></td></tr></tbody></table>',markupSlots:{containerNode:function(){return this.domNode.rows[0].cells[0];}},cellSpacing:0,cellPadding:0});(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.Widget","mstrmojo.css","mstrmojo.dom");var Y=mstrmojo.css,F=mstrmojo.dom;var Z={9:"Tab",13:"Enter",27:"Esc",38:"ArrowUp",40:"ArrowDown"};function A(){var c=this.value,b=this.inputNode,d=b.value,a=(c!==null&&c!==undefined)?String(c):"";if(a!==d&&(!this.keepEmpty||d!==this.emptyText)){b.value=a;}if(b.mstrmojoEmpty){Y.removeClass(b,[this.emptyClass]);b.mstrmojoEmpty=null;}}function X(){var a=this.inputNode;a.value=this.emptyText||"";Y.addClass(a,[this.emptyClass]);a.mstrmojoEmpty=true;}function N(){var a=this.inputNode;if(a){this.readingDom=true;this.set("value",a.value);this.readingDom=false;}}function U(a){var b=this;if(a===-1){N.call(this);}else{if(this._lastTimeoutId){window.clearTimeout(this._lastTimeoutId);}this._lastTimeoutId=window.setTimeout(function(){delete b._lastTimeoutId;N.call(b);},a||100);}}mstrmojo.TextBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.TextBox",value:"",type:"text",hint:"",readOnly:false,size:"",maxLength:"",cssDisplay:"inline",tabIndex:"",emptyText:"",keepEmpty:false,emptyClass:"mstrmojo-empty",valueChangeDelay:-1,textValid:true,autoComplete:true,autoCorrect:true,autoCapitalize:true,spellCheck:true,markupString:'<input id="{@id}" class="mstrmojo-TextBox {@cssClass}"  style="{@cssText}" title="{@tooltip}" type="{@type}" value="" size="{@size}" maxlength="{@maxLength}" index="{@tabIndex}"min="{@min}" max="{@max}" placeholder="{@hint}" mstrAttach:focus,keyup,blur,paste,cut,input,click,keydown,mousedown  tstid="{@tstid}"/>',markupSlots:{inputNode:function D(){return this.domNode;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,oncssClassChange:function S(){this.inputNode.className="mstrmojo-TextBox "+(this.cssClass||"");},onhintChange:function O(){this.inputNode.setAttribute("placeholder",this.hint);},onenabledChange:function E(){var a=this.inputNode;a.disabled=!this.enabled;Y.toggleClass(a,"disabled",!this.enabled);},onvalueChange:function P(){var a=this.value,b=(a===undefined)||(a===null)||(a==="");if(b){if(!this.hasFocus){X.call(this);}else{this.inputNode.value="";}}else{A.call(this);}if(F.isIE9){this.inputNode.type=b?"text":this.type;}},ontooltipChange:function R(){this.domNode.title=this.tooltip;},onreadOnlyChange:function H(){this.inputNode.readOnly=this.readOnly;},ontextValidChange:function B(){Y.toggleClass(this.inputNode,["err"],!this.textValid);}},postBuildRendering:function V(){this._super();var a=this.inputNode;a.setAttribute("autocomplete",this.autoComplete?"on":"off");a.setAttribute("autocorrect",this.autoCorrect?"on":"off");a.setAttribute("autocapitalize",this.autoCapitalize?"on":"off");a.setAttribute("spellcheck",this.spellCheck?"true":"false");},focus:function Q(){if(this.inputNode&&this.inputNode.offsetParent){try{this.inputNode.focus();}catch(a){}}},prefocus:function M(){this.hasFocus=true;A.call(this);},blur:function T(){this.inputNode.blur();},preblur:function W(){window.setTimeout(function(){},200);this.hasFocus=false;N.call(this);var a=this.value;if(((a===null||a==="")&&this.emptyText)||(this.keepEmpty&&a===this.emptyText)){X.call(this);}},prekeyup:function I(b){var a=b.hWin,c=b.e||a.event;U.call(this,this.valueChangeDelay);var d=Z[c.keyCode];if(this["on"+d]){this["on"+d](b);}},preinput:function J(){U.call(this,this.valueChangeDelay);},prepaste:function K(){U.call(this);},precut:function G(){U.call(this);},setInvalidState:function C(a){this.set("textValid",false);if(a){this.domNode.setAttribute("title",a);}},cleanUp:function L(){this.inputNode.value="";this.set("textValid",true);this.domNode.setAttribute("title",this.tooltip);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container");mstrmojo.FieldSet=mstrmojo.declare(mstrmojo.Container,null,{legend:null,scriptClass:"mstrmojo.FieldSet",markupString:'<fieldset id="{@id}" class="mstrmojo-FieldSet {@cssClass}" style="{@cssText}"><legend class="{@cssClass}-legend">{@legend}</legend></fieldset>',markupSlots:{legendNode:function(){return this.domNode.firstChild;},containerNode:function(){return this.domNode;}},markupMethods:{onlegendChange:function(){this.legendNode.innerHTML=mstrmojo.string.encodeHtmlString((this.legend!=null)?this.legend:"");},onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._IsPopup","mstrmojo._CanAutoClose");function A(B){return function(){this.domNode.style[B]=this[B]||"";};}mstrmojo.Popup=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.Popup",shadowNodeCssClass:"mstrmojo-popup-shadow",titleNodeCssClass:"mstrmojo-popup-title",contentNodeCssClass:"mstrmojo-popup-content",cssDisplay:"block",keepOpen:false,markupString:'<div id="{@id}" class="mstrmojo-Popup {@cssClass}" style="{@cssText}"><div class="mstrmojo-Popup-shadow {@shadowNodeCssClass}"></div><div class="mstrmojo-Popup-title {@titleNodeCssClass}">{@title}</div><div class="mstrmojo-Popup-content {@contentNodeCssClass}"></div></div>',markupSlots:{containerNode:function(){return this.domNode.lastChild;},shadowNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onleftChange:A("left"),ontopChange:A("top"),onzIndexChange:A("zIndex")}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.Container","mstrmojo._HasPopup");var B=mstrmojo.func,D=mstrmojo.dom,C=mstrmojo.ui._HasUITheme.EnumThemeNames,G="mstrmojo-popup-widget-hosted";mstrmojo.ui.PopupButton=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.ui.PopupButton",onPopupWidgetClosed:mstrmojo.emptyFn,onPopupWidgetOpened:mstrmojo.emptyFn,anchorSlot:"domNode",isHostedWithin:true,hostedCSSClass:"",destroy:function J(N){if(this._listenerProc){D.detachEvent(window,"resize",this._listenerProc);}this._super(N);},getPopupWidget:mstrmojo.emptyFn,postCreateChildren:function E(){var N=this.getPopupWidget();if(!N||N._pbCfg){return ;}var O=function O(Q,P){return function(){Q.apply(P,arguments);};};N.onOpen=B.composite([O(this.onPopupWidgetOpened,this),N.onOpen||mstrmojo.emptyFn]);N.onClose=B.composite([O(this.onPopupWidgetClosed,this),N.onClose||mstrmojo.emptyFn]);N._pbCfg=true;},onclick:function L(N){if(this.isClickingAnchorSlot(N)){var O=this.getPopupWidget();if(!O.visible){this.openPopup(O);}else{this.closePopup();}}},isClickingAnchorSlot:function M(N){var O=N.getTarget();return O===this[this.anchorSlot]||O.parentNode===this[this.anchorSlot];},onPopupAutoClosed:function I(O,N){if(D.contains(this[this.anchorSlot],D.eventTarget(N,O),true)){return false;}},getPopupHostNode:function K(){return this.containerNode;},getPopupConfig:function H(){var O=[G],N=this.hostedCSSClass;if(N){O.push(N);}var P=new mstrmojo.ui.PopupConfig({hostId:this.id,hostElement:this.getPopupHostNode(),anchorElement:this[this.anchorSlot],isHostedWithin:this.isHostedWithin,hostProxyCssClass:O.join(" ")});return this.disposables?this.addDisposable(P):P;},unrender:function F(N){if(this._listenerProc){D.detachEvent(window,"resize",this._listenerProc);delete this._listenerProc;}this._super(N);},postBuildRendering:function A(){var R=this.getPopupWidget();if(R){var T=this.getPopupConfig();if(!T.isHostedWithin){var P=this.parent||this.opener,O=T.hostProxyCssClass.split(" ");O.push(this.domNode.className);while(P){var S=P.themeClassName;if(S){O.push(S);break;}P=P.parent||P.opener;}if(T.useDarkTheme){O.splice(O.indexOf(C.LIGHT_THEME),1);O.push(C.DARK_THEME);}T.hostProxyCssClass=O.join(" ");}mstrmojo.Obj.free(R.popupConfig);R.popupConfig=R.addDisposable(T);}if(!(this.editableSlot&&D.isMobile)){var N=R.id,Q=this._listenerProc=function(){var U=mstrmojo.all[N];if(U&&U.visible&&U.adjustCornersForPopupOverflow){U.adjustCornersForPopupOverflow();}};if(this.isHostedWithin===false){D.attachEvent(window,"resize",Q);}}return this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.Container","mstrmojo._HasPopup");var E=function(){var G=this.opener;if(G.direction.toLowerCase()==="up"){this.domNode.style.top=-G.domNode.offsetHeight+"px";}};mstrmojo.DropDownButton=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.DropDownButton",height:"",text:"",direction:"down",enabled:true,title:"",allowHTML:true,markupString:'<div id="{@id}" class="mstrmojo-DropDownButton {@cssClass} {@direction}" style="{@cssText}"><div class="mstrmojo-DropDownButton-boxNode {@cssClass}-boxNode" title="{@title}" mstrAttach:mousedown><div class="mstrmojo-DropDownButton-iconNode {@cssClass}-iconNode">{@text}</div></div><div class="mstrmojo-DropDownButton-popupNode {@cssClass}-popupNode"></div></div>',markupSlots:{boxNode:function(){return this.domNode.firstChild;},iconNode:function(){return this.domNode.firstChild.firstChild;},popupNode:function(){return this.domNode.lastChild;}},markupMethods:{onheightChange:function(){this.boxNode.style.height=this.height||"";},ontextChange:function(){this.iconNode.innerHTML=this.getTextInnerHTML();},ontitleChange:function(){this.boxNode.title=this.title;},onenabledChange:function(){mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);},onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},preBuildRendering:function C(){if(this._super){this._super();}var G=this.popupRef;if(G){if(G.nudge){G.nudge=mstrmojo.func.composite([G.nudge,E]);}else{if(this.direction.toLowerCase()!=="down"){G.nudge=E;}}}},popupRef:null,popupOpenConfig:null,destroy:function D(G){var H=this.popupRef;if(H&&H.hasRendered){H.destroy(false);}if(this._super){this._super(G);}},togglePopup:function F(){var G=this._lastOpened;if(G&&G.visible){this.closePopup();}else{this.openPopup("popupRef",this.popupOpenConfig);}},premousedown:function A(G){this.togglePopup();},getTextInnerHTML:function B(){return this.allowHTML?this.text:mstrmojo.string.encodeHtmlString(this.text);}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.Container");var D="slot";mstrmojo.HBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.HBox",cellCssClass:"",cellSpacing:0,cellPadding:0,markupString:'<table id="{@id}" class="mstrmojo-HBox {@cssClass}" style="{@cssText}" cellspacing="{@cellSpacing}" cellpadding="{@cellPadding}">{@colHTML}<tr>{@tableHtml}</tr></table>',colHTML:"",markupSlots:{containerNode:function(){return this.domNode.rows[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}},buildRendering:function B(){this.tableHtml="";var N=[],F=this.children,K=(F&&F.length)||0,I;if(K){var G=0,J=this.cellCssClass?' class="mstrmojo-HBox-cell '+this.cellCssClass+'" ':"",M="<td "+J+"></td>";for(I=0;I<K;I++){N[G++]=M;F[I].slot=D+I;}this.tableHtml=N.join("");}this._super();if(K){var L={},H=this.containerNode.cells;for(I=0;I<K;I++){L["slot"+I]=H[I];}this.addSlots(L);}},addChildren:function E(K,F,G){if(!K){return K;}if(F===undefined||isNaN(F)||F<0){var J=this.children;F=(J&&J.length)||0;}var I=0,H;if(K.constructor===Array){for(I=0,H=K.length;I<H;I++){K[I].slot=D+(F+I);}}else{K.slot=D+F;}return this._super(K,F,G);},childRenderCheck:function C(G){if(G&&!G.hasRendered){var F=G.slot||this.defaultChildSlot;return !!this[F]||F.match(/^slot[\d]+$/);}return false;},onchildRenderingChange:function A(I){var F=(I&&I.src)||I,L=F&&F.domNode;if(L){var Q=F.slot;if(!this[Q]){var J=Q&&Q.match(/^slot([\d]+)$/);if(J){var O=parseInt(J[1],10),N=this.containerNode,P=N.cells,M=(P&&P.length)||0,K={};for(var H=M;H<=O;H++){var G=N.insertCell(H);K["slot"+H]=G;if(this.cellCssClass){G.className=this.cellCssClass;}}this.addSlots(K);}}}this._super(I);}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.Container","mstrmojo._IsPopup","mstrmojo.boxmodel","mstrmojo.dom","mstrmojo.ui._HasScroller");var L=mstrmojo.boxmodel,I=mstrmojo.dom,M=mstrmojo.css,O="mstrmojo-Tooltip",A="mstrmojo-scrollNode",E=20;function C(S,T,R){var U="connectScrollbox";if(R){U="dis"+U;}var Q=S&&S.parent;while(Q){if(Q[U]){Q[U](T);}Q=Q.parent;}}function G(){if(!this._paintHandle){var R=this.id,Q=function(V){var Z=mstrmojo.all[R];if(!Z){return ;}delete Z._paintHandle;var T=[O],a=Z.cssClass;if(a){T.push(a);}var S=mstrApp.getThemeClassName&&mstrApp.getThemeClassName(),X=Z.opener;if(X&&X.getTooltipThemeClass){S=X.getTooltipThemeClass();}T.push(S);Z.domNode.className=T.join(" ");var Y=Z.content,U=Z.contentNode,W=Z.arrowNode;U.className=(O+"-content "+A+" "+Z.contentNodeCssClass);U.style.cssText=Z.contentNodeCssText;if(!Z.hasWidgetContent){U.innerHTML=Y;}W.style.cssText="";Z.domNode.style.visibility=!!Y?"visible":"hidden";Z.updatePosition();if(!V&&Z.optimizePos){Z.optimizePos();}Z.updateScrollbars();};if(!this._hasPaint){Q(true);this._hasPaint=true;}else{this._paintHandle=window.setTimeout(Q,0);}}}function B(U,c,j,V){var Y=c&&(c.richTooltip||c.tooltip),m=j?I.getMousePosition(j,V||self):null,b=Y&&(typeof Y==="string");var k="",a="",X="",g=Y,Z=null,Q=mstrmojo.tooltip.POS_TOPLEFT,S=null,d=null,R=null,l=false,T=null,W=mstrmojo._HasTooltip.TOOLTIP_CLOSE_DELAY;var f=false,h=false;if(Y&&!b){a=Y.cssClass||a;k=Y.contentNodeCssClass||k;X=Y.contentNodeCssText||X;g=Y.content||"";Z=Y.refNode||Z;Q=Y.posType||Q;S=Y.left||0;d=Y.top||0;f=Y.keepArrowXPos||f;h=Y.keepArrowYPos||h;R=Y.updatePosition||null;l=Y.hasWidgetContent;T=Y.children;W=Y.tooltipCloseDelay||mstrmojo._HasTooltip.TOOLTIP_CLOSE_DELAY;}U.set("contentNodeCssClass",k);U.set("cssClass",a);U.set("contentNodeCssText",X);U.set("content",g);U.set("refNode",Z);U.set("posType",Q);U.set("left",b?((m&&m.x)||U.left):S);U.set("top",(b||!Y)?((m&&(m.y+E))||U.top):d);U.set("keepArrowXPos",f);U.set("keepArrowYPos",h);if(R){U.set("updatePosition",R);}else{U.set("updatePosition",mstrmojo.Tooltip.prototype.updatePosition);}U.set("hasWidgetContent",l);U.set("children",T);U.set("tooltipCloseDelay",W);}mstrmojo.Tooltip=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsPopup,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.Tooltip",content:null,top:null,left:null,refNode:null,keepArrowXPos:false,keepArrowYPos:false,posType:"TL",allowOtherTooltips:false,markupString:'<div id="{@id}" class="'+O+' {@cssClass}" style="{@cssText}" mstrAttach:mouseover,mouseout><div class="'+O+'-shadow {@shadowNodeCssClass}"></div><div class="'+O+'-contentWrapper"><div class="'+O+"-content "+A+' {@contentNodeCssClass}" style="{@contentNodeCssText}"></div></div><div class="'+O+'-arrow"></div></div>',markupSlots:{containerNode:function(){return this.domNode.children[1];},contentNode:function(){return this.domNode.children[1].firstChild;},shadowNode:function(){return this.domNode.firstChild;},arrowNode:function(){return this.domNode.children[2];}},setupScrollNodes:function D(){this.scrollNode=this.contentNode;this.scrollbarHostNode=this.containerNode;},_previousVisible:false,markupMethods:{onvisibleChange:function(){var R=this.domNode.style,Q=!!this.visible;if(this._previousVisible!==Q){R.visibility="hidden";}R.display=Q?"block":"none";this._previousVisible=Q;if(Q){this.updatePosition();if(this.content){G.call(this);}}},onleftChange:G,ontopChange:G,onrefNodeChange:G,onposTypeChange:G,oncontentNodeCssClassChange:G,oncontentNodeCssTextChange:G,oncontentChange:G,oncssClassChange:G},preBuildRendering:function N(){if(!this.slot&&!this.placeholder){this.placeholder=document.body.appendChild(document.createElement("div"));}return this._super();},updatePosition:function H(V){if(!this.visible&&!V){return ;}var U=this.refNode,T=U?L.offset(U,document.body):{left:I.getHorizontalScroll(),top:I.getVerticalScroll()},m=this.domNode.style,f=this.containerNode,h=f.offsetWidth,Z=f.offsetHeight,R=this.posType,c=R.indexOf("R")>-1,W=R.indexOf("B")>-1,b=this.top!==null?parseInt(this.top,10)+T.top-(W?Z:0):null,S=this.left!==null?parseInt(this.left,10)+T.left-(c?h:((R.indexOf("C")>-1)?Math.floor(h/2):0)):null,k=false,a=false,d,X,j=I.windowDim(),g=I.getHorizontalScroll()+j.w,Q=I.getVerticalScroll()+j.h,e=this.arrowNode,l=null;if(S!==null){d=Math.min(Math.max(S,0),g-h);m.left=d+"px";k=S!==d;}if(b!==null){X=Math.min(Math.max(b,0),Q-Z);m.top=X+"px";a=b!==X;}if(k||a){var Y,o=this.keepArrowXPos&&k,n=this.keepArrowYPos&&a;if(o||n){l=M.getComputedStyle(e);Y=l.left;}if(Y&&Y.endsWith("%")){Y=parseFloat(Y)/100*h;}if(o){e.style.left=(parseInt(Y,10)+S-d)+"px";}if(n){e.style.top=(parseInt(l.top,10)+b-X)+"px";}}M.toggleClass(this.domNode,"offset",k||a);},_on_tooltip_change:function(Q){B(this,Q&&Q.src);},_set_opener:function(T,S){var R=this.opener,Q=S!==R;if(Q){if(S){C(S,this);}if(R){C(S,this,true);}if(R&&R.detachEventListener){R.detachEventListener(this._richSubs);R.detachEventListener(this._ttpSubs);}if(S&&S.attachEventListener){this._richSubs=S.attachEventListener("richTooltipChange",this.id,"_on_tooltip_change");this._ttpSubs=S.attachEventListener("tooltipChange",this.id,"_on_tooltip_change");}this.opener=S;}return Q;},updatePopupConfig:function(Q,R){B(this,R,Q&&Q.e,Q&&Q.win);},onscroll:function K(){if(this.visible&&this.nudge){this.nudge();}this._super();},onmouseover:mstrmojo.emptyFn,onmouseout:mstrmojo.emptyFn});var J=null;mstrmojo.tooltip={POS_TOPLEFT:"TL",POS_BOTTOMLEFT:"BL",POS_TOPRIGHT:"TR",POS_BOTTOMRIGHT:"BR",POS_BOTTOMCENTER:"BC",POS_TOPCENTER:"TC",open:function F(R,T,S,Q){if(R&&R.hasWidgetContent&&J){J.destroy();}if(!J||!mstrmojo.all[J.id]){J=new mstrmojo.Tooltip();}Q=Q||{};Q.e=T;Q.win=S;J.open(R,Q);R.tooltip=J;},close:function P(){if(J&&!J.allowOtherTooltips){var Q=J.opener;if(Q){Q.tooltip=null;}J.close();if(Q&&Q.hasWidgetContent){J.destroy();}}}};}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.dom","mstrmojo._IsPopup","mstrmojo._CanAutoClose");var C=mstrmojo.dom;mstrmojo.ui.PopupWidget=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.ui.PopupWidget",markupString:'<div id="{@id}" class="mstrmojo-ui-PopupWidget {@cssClass}" style="{@cssText}" mstrAttach:mouseover,mouseout,click><div class="pw-content"></div></div>',markupSlots:{containerNode:function A(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},autoCloses:true,locksHover:true,closeOnClick:true,visible:true,onclick:function B(D){C.stopPropogation(null,D.e);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container");var A=mstrmojo.Widget;mstrmojo.Box=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Box",markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:A.visibleMarkupMethod,onheightChange:A.heightMarkupMethod,onwidthChange:A.widthMarkupMethod}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom");var M=mstrmojo.Widget,G=mstrmojo.dom,N=mstrmojo.global.document,C=50,B=500;mstrmojo.Stepper=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Stepper",orientation:"vertical",provider:null,title:"",markupString:'<div id="{@id}" class="mstrmojo-Stepper {@orientation} {@cssClass}" mstrAttach:click,mousedown,selectstart><div class="title">{@title}</div><div class="next">+</div><div class="text">{@itemHtml}</div><div class="prev">-</div></div>',markupSlots:{titleNode:function(){return this.domNode.firstChild;},nextNode:function(){return this.domNode.children[1];},textNode:function(){return this.domNode.children[2];},prevNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:M.visibleMarkupMethod,onheightChange:M.heightMarkupMethod,onwidthChange:M.widthMarkupMethod,onenabledChange:function I(){mstrmojo.css.toggleClass(this.domNode,"disabled",!this.enabled);}},preBuildRendering:function J(){this.itemHtml=this.provider.renderItemAt();this._super();},processEvent:function A(O){if(G.contains(this.textNode,O)||O===this.titleNode){return ;}var Q=this.provider,P=((O===this.nextNode)?"Next":"Prev");if(Q["has"+P]()){Q[P.toLowerCase()]();this.updateDisplayText();}},updateDisplayText:function E(){this.textNode.innerHTML=this.provider.renderItemAt();},startStepperInterval:function F(O,P){var Q=this;this._holdTimer=setInterval(function(){Q[P](O);},C);},stopStepperInterval:function H(){if(this._holdTimer){clearInterval(this._holdTimer);delete this._holdTimer;}},onclick:function L(O){this.processEvent(O.e.target);},onmousedown:function D(O){if(!this._holdTimer&&!this._startHoldTimer){var P=this;this._startHoldTimer=setTimeout(function(){delete P._startHoldTimer;P.startStepperInterval(O,"onclick");},B);G.attachOneTimeEvent(N,"mouseup",function(){if(P._startHoldTimer){clearTimeout(P._startHoldTimer);delete P._startHoldTimer;}P.stopStepperInterval();},true);}},onselectstart:function K(){return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.Container");mstrmojo.VBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.VBox",markupString:'<table id="{@id}" class="mstrmojo-VBox {@cssClass}" style="{@cssText}" cellspacing="0" cellpadding="0"><tr><td></td></tr></table>',markupSlots:{containerNode:function(){return this.domNode.rows[0].cells[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Container","mstrmojo._FormatDefinition","mstrmojo.CheckBox","mstrmojo.array");var E=mstrmojo.hash,A=mstrmojo._FormatDefinition,F=mstrmojo.array;var D=function(G){return mstrmojo.hash.copy(G,{scriptClass:"mstrmojo.TextBox",alias:"decimalPlaces",bindings:{m:G.modelBinding,value:function(){return this.m.DecimalPlaces||"2";},category:function(){var H=this.m.Category;this.onkeyup();}},onkeyup:function(H){if(/^\d{1,2}$/.test(this.value)){var O=this.m.DecimalPlaces,J=this.value;this.m.DecimalPlaces=J;if(O!=J&&this.negative){var K=this.parent[this.negative],M;if(K&&K.refreshFormatList){K.refreshFormatList();}else{M=mstrmojo.hash.clone(A[this.negative]);if(M){var N=J>0?".":"",I=N,L;for(L=0;L<Math.min(J,A.MaxNegativeDidigts);L++){N+=L%9;I+="0";}for(L=0;L<M.length;L++){M[L].n=M[L].n.replace(/\.\d{2}/g,N);M[L].f=M[L].f.replace(/\.\d{2}/g,I);}K.set("items",M);}}}}}});},B=function(G){return mstrmojo.hash.copy(G,{scriptClass:"mstrmojo.List",cssClass:"mstrmojo-FormatEditor-numberFormatList",itemMarkupFunction:function(J,H,K){var I=J.r?"color: red":"";return'<div class="mstrmojo-FormatEditor-bullet"><div class="mstrmojo-text" style="'+I+'">'+J.n+"</div></div>";},selectionPolicy:"reselect",bindings:{m:G.modelBinding,selectedIndex:function(){var H=F.find(this.items,"v",this.m.NegativeNumbers);if(H===-1){H=F.find(this.items,"f",this.m.Format);}this.singleSelect(H);return H==-1?3:H;},category:function(){var H=this.m.Category;this.onchange();}},onchange:function(H){if(this.parent.idx===F.find(A.Category,"v",this.m.Category)&&this.selectedItem){this.m.NegativeNumbers=this.selectedItem.v;this.m.set("Format",this.selectedItem.f||this.selectedItem.v);}},onmChange:function(H){if(this.m){var M=this.m.DecimalPlaces;if(M!=2){var K=mstrmojo.hash.clone(A[this.alias]);if(K){var L=M>0?".":"",I=L,J;for(J=0;J<Math.min(M,A.MaxNegativeDidigts);J++){L+=J%9;I+="0";}for(J=0;J<K.length;J++){K[J].n=K[J].n.replace(/\.\d{2}/g,L);K[J].f=K[J].f.replace(/\.\d{2}/g,I);}this.set("items",K);}}}},postCreate:function(){this.onmChange();}});},C=function(G){return mstrmojo.hash.copy(G,{scriptClass:"mstrmojo.List",cssClass:"mstrmojo-FormatEditor-numberFormatList "+G.alias,itemMarkupFunction:function(I,H,J){return'<div class="mstrmojo-FormatEditor-bullet"><div class="mstrmojo-text">'+I.n+"</div></div>";},selectedIndex:0,bindings:{m:G.modelBinding,selectedIndex:function(I){var H=F.find(this.items,"v",this.m.Format);return H===-1?0:H;},category:function(){var H=this.m.Category;this.onchange();}},onchange:function(H){if(this.parent.idx===F.find(A.Category,"v",this.m.Category)){this.m.set("Format",this.selectedItem.f||this.selectedItem.v);}}});};mstrmojo.NumberFormatter=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.NumberFormatter",cssClass:"mstrmojo-NumberFormatter",markupString:'<div id={@id} class="{@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},postCreate:function(){this.onmodelChange();},onmodelChange:function(){if(this.model&&!this.model.scriptClass){E.make(this.model,mstrmojo.Obj);}},children:[{scriptClass:"mstrmojo.Table",layout:[{cells:[{colSpan:2}]},{cells:[{},{}]}],children:[{slot:"0,0",scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7940),cssClass:"category",cssText:"font-weight: bold"},{slot:"1,0",scriptClass:"mstrmojo.List",alias:"numberCategory",cssClass:"mstrmojo-FormatEditor-numberCategory",items:A.Category,selectionPolicy:"reselect",bindings:{m:"this.parent.parent.model",selectedIndex:function(){var H=this.m.Category,G=F.find(this.items,"v",(H==="pru"?-2:H));return(G===-1)?0:G;}},onchange:function(G){if(this.m){this.m.set("Category",this.selectedIndex===0?"pru":this.selectedItem.v);}}},{slot:"1,1",scriptClass:"mstrmojo.Container",alias:"numberSubpanelContainer",width:"300px",markupString:'<div id={@id} class="mstrmojo-FormatEditor-numberPanel-subpanel {@cssClass}"><div class="mstrmojo-FormatEditor-numberPanel-subpanel-container"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},postBuildRendering:function(){var G=mstrmojo.Container.prototype.postBuildRendering.apply(this);this.parent.numberCategory.singleSelect(this.parent.numberCategory.selectedIndex);return G;},children:[{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-FormatEditor-numberPanel-subpanel-item",idx:0,rows:1,cols:1,children:[{scriptClass:"mstrmojo.Label",text:" ",slot:"0,0"}],bindings:{visible:'this.parent.parent.parent.model.Category=="pru"',category:function(){var H=this.parent.parent.parent.model,G=this.parent.parent.parent.model.Category;if(H&&this.idx===F.find(A.Category,"v",G)){H.set("Format","");}}}},{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-FormatEditor-numberPanel-subpanel-item",idx:1,rows:1,cols:1,children:[{scriptClass:"mstrmojo.Label",text:" ",slot:"0,0"}],bindings:{visible:"this.parent.parent.parent.model.Category==9",category:function(){var H=this.parent.parent.parent.model,G=this.parent.parent.parent.model.Category;if(H&&this.idx===F.find(A.Category,"v",G)){H.set("Format","");}}}},{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-FormatEditor-numberPanel-subpanel-item fixed",idx:2,rows:3,cols:2,layout:[{cells:[{},{}]},{cells:[{},{}]},{cells:[{colSpan:2}]}],bindings:{visible:"this.parent.parent.parent.model.Category==0"},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2046),slot:"0,0"},D({modelBinding:"this.parent.parent.parent.parent.model",negative:"FixedNegative",alias:"FixedDecimalPlaces",slot:"0,1"}),{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2044),slot:"1,0"},B({modelBinding:"this.parent.parent.parent.parent.model",items:A.FixedNegative,refreshFormatList:function(){var H=this.parent,K=H&&H.FixedDecimalPlaces,N=H&&H.ThousandSeparator;if(!K||!N){return ;}var I=K.value||0,R=mstrmojo.hash.clone(A.FixedNegative),G=N.checked,Q=I>0?".":"",P=Q,O,M,L;for(M=0,L=Math.min(I,A.MaxNegativeDidigts);M<L;M++){Q+=M%9;P+="0";}var J;for(J=0;J<R.length;J++){O=R[J].n.replace(/\.\d{2}/g,Q);if(!G){O=O.replace("1,234","1234");}R[J].n=O;O=R[J].f.replace(/\.\d{2}/g,P);if(!G){O=O.replace(/#,##/g,"###");}R[J].f=O;}this.set("items",R);},alias:"FixedNegative",slot:"1,1"}),{scriptClass:"mstrmojo.ImageCheckBox",alias:"ThousandSeparator",label:mstrmojo.desc(2049),cssText:"width:auto;",bindings:{m:"this.parent.parent.parent.parent.model",checked:function(){var G=this.m.ThousandSeparator;if(G==null){G=-1;}return parseInt(G,10)!==0;}},oncheckedChange:function(){if(this.m&&this.parent.idx===F.find(A.Category,"v",this.m.Category)){this.m.ThousandSeparator=this.checked?-1:0;this.parent.FixedNegative.refreshFormatList();}},slot:"2,0"}]},{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-FormatEditor-numberPanel-subpanel-item currency",idx:3,rows:4,cols:2,bindings:{visible:"this.parent.parent.parent.model.Category==1"},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2046),slot:"0,0"},D({modelBinding:"this.parent.parent.parent.parent.model",negative:"CurrencyNegative",alias:"currencyDecimal",slot:"0,1"}),{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2047),slot:"1,0"},{scriptClass:"mstrmojo.TextBox",alias:"currencySymbol",maxLength:5,bindings:{m:"this.parent.parent.parent.parent.model",value:function(){return this.m.CurrencySymbol||mstrmojo.desc("2369");},category:function(){var G=this.m.Category;this.onkeyup();}},onkeyup:function(G){this._update();},onvalueChange:function(){this._update();},_update:function(){if(this.m){var H=this.m.CurrencySymbol;this.m.CurrencySymbol=this.value;var G=this.parent.CurrencyNegative;if(G&&(H!=this.value)){G.refreshFormatList();}}},slot:"1,1"},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2048),slot:"2,0"},{scriptClass:"mstrmojo.List",cssClass:"mstrmojo-FormatEditor-numberFormatList",alias:"CurrencyPosition",items:A.CurrencyPosition,itemMarkupFunction:function(H,G,I){return'<div class="mstrmojo-FormatEditor-bullet"><div class="mstrmojo-text">'+H.n+"</div></div>";},bindings:{m:"this.parent.parent.parent.parent.model",selectedIndex:function(){var G=F.find(A.CurrencyPosition,"v",this.m.CurrencyPosition);return(G===-1?0:G);},category:function(){var G=this.m.Category;this.onchange();}},onchange:function(G){if(this.m){this.m.CurrencyPosition=this.selectedItem.v;var H=this.parent.CurrencyNegative;if(H){H.refreshFormatList();}}},slot:"2,1"},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2044),slot:"3,0"},B({modelBinding:"this.parent.parent.parent.parent.model",items:A.CurrencyNegative,refreshFormatList:function(){var O=this.parent,J=O&&O.currencyDecimal,N=O&&O.CurrencyPosition,K=O&&O.currencySymbol;if(!J||!N||!K){return ;}var M=J.value||0,I=parseInt(N.selectedIndex,10)||0,H=K.value||"",L=mstrmojo.hash.clone(A.CurrencyNegative),Y=M>0?".":"",W=Y,Q,X,U;H=(I===2?H+" ":(I===3?" "+H:H));for(X=0,U=Math.min(M,A.MaxNegativeDidigts);X<U;X++){Y+=X%9;W+="0";}var P=mstrConfig.decimalSep,G=mstrConfig.thousandsSep,T;for(T=0;T<L.length;T++){var R=L[T].n,V=L[T].f,S;if(I===1||I===3){Q=V.split(";");for(S=0,U=Q.length;S<U;S++){Q[S]=Q[S].replace(/(\"\$\")(.*)/g,"$2$1");}R=R.replace(/(\$)(.*)/g,"$2$1");V=Q.join(";");}R=R.replace(/\$/g,H).replace(/\.\d{2}/g,Y);V=V.replace(/\$/g,H).replace(/\.\d{2}/g,W);L[T].n=R.replace(/,/,G).replace(/(\d{2,3})\./,"$1"+P);L[T].f=V.replace(/,/,G).replace(/(\d{2,3})\./,"$1"+P);}this.set("items",L);},alias:"CurrencyNegative",slot:"3,1"})]},{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-FormatEditor-numberPanel-subpanel-item Date",idx:4,rows:1,cols:2,bindings:{visible:"this.parent.parent.parent.model.Category==2"},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2869),slot:"0,0"},C({modelBinding:"this.parent.parent.parent.parent.model",items:A.Date,alias:"Date",slot:"0,1"})]},{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-FormatEditor-numberPanel-subpanel-item Time",idx:5,rows:1,cols:2,bindings:{visible:"this.parent.parent.parent.model.Category==3"},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2869),slot:"0,0"},C({modelBinding:"this.parent.parent.parent.parent.model",items:A.Time,alias:"Time",slot:"0,1"})]},{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-FormatEditor-numberPanel-subpanel-item percentage",idx:6,rows:2,cols:2,bindings:{visible:"this.parent.parent.parent.model.Category==4"},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2046),slot:"0,0"},D({modelBinding:"this.parent.parent.parent.parent.model",negative:"PercentNegative",slot:"0,1"}),{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2044,"Negative numbers"),slot:"1,0"},B({modelBinding:"this.parent.parent.parent.parent.model",items:A.PercentNegative,alias:"PercentNegative",slot:"1,1"})]},{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-FormatEditor-numberPanel-subpanel-item Fraction",idx:7,rows:1,cols:2,bindings:{visible:"this.parent.parent.parent.model.Category==5"},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2869),slot:"0,0"},C({modelBinding:"this.parent.parent.parent.parent.model",items:A.Fraction,alias:"Fraction",slot:"0,1"})]},{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-FormatEditor-numberPanel-subpanel-item scientific",idx:8,rows:1,cols:2,children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2046),slot:"0,0"},D({slot:"0,1",modelBinding:"this.parent.parent.parent.parent.model"})],bindings:{m:"this.parent.parent.parent.model",visible:"this.m.Category==6",category:function(){if(this.m&&this.idx===F.find(A.Category,"v",this.m.Category)){this.m.set("Format","0.00E+00");}}}},{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-FormatEditor-numberPanel-subpanel-item custom",idx:9,rows:1,cols:2,bindings:{visible:"this.parent.parent.parent.model.Category==7"},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2133),slot:"0,0"},{scriptClass:"mstrmojo.TextBox",alias:"custom",value:"",bindings:{m:"this.parent.parent.parent.parent.model",value:function(){return this.m.Format;}},onvalueChange:function(){if(this.m&&this.parent.idx===F.find(A.Category,"v",this.m.Category)){this.m.Format=this.value;}},slot:"0,1"}]}]}]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.css");var F="",B="row-",E=mstrmojo.css.DISPLAY_TABLE;mstrmojo.Table=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Table",cellCssClass:"",rows:-1,cols:-1,_trows:-1,cellPadding:0,cellSpacing:0,layout:null,markupString:'<table id="{@id}" class="mstrmojo-Table {@cssClass}" style="{@cssText}" cellpadding="{@cellPadding}" cellspacing="{@cellSpacing}">{@tableHtml}</table>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?E:"none";}},preBuildRendering:function G(){var I=[],P=this.cellCssClass;if(this.layout){var Q=this._trows=this.layout.length;for(var K=0;K<Q;K++){var H=this.layout[K],R=H.cells,O=R.length,L=[];for(var J=0;J<O;J++){var N=R[J],M="";M+=((N.cssClass||P)?' class="'+(N.cssClass||P)+'"':"");M+=(N.cssText?' style="'+N.cssText+'"':"");M+=(N.rowSpan?' rowspan="'+N.rowSpan+'"':"");M+=(N.colSpan?' colspan="'+N.colSpan+'"':"");L[J]="<td"+M+"></td>";}var S="";S+=(H.cssClass?' class="'+H.cssClass+'"':"");S+=(H.cssText?' style="'+H.cssText+'"':"");I[K]="<tr"+S+">"+L.join("")+"</tr>";}}else{this._trows=this.rows;var M=(P?' class="'+P+'"':""),L=[];for(var K=0;K<this.rows;K++){for(var J=0;J<this.cols;J++){L[J]="<td"+M+"></td>";}I[K]="<tr>"+L.join("")+"</tr>";}}this.tableHtml=I.join("");if(this._super){this._super();}},postBuildRendering:function C(){if(this._trows){var M={},I=this.containerNode.rows,N=I.length;for(var L=0;L<N;L++){var K=I[L].cells,H=K.length;M[B+L]=I[L];for(var J=0;J<H;J++){M[F+L+","+J]=K[J];}}this.addSlots(M);}this._super();},childRenderCheck:function D(I){if(I&&!I.hasRendered){var H=I.slot||this.defaultChildSlot;return !!this[H]||H.match(/^([\d]+),([\d]+)$/);}return false;},on_child_change_rendering:function A(L){var H=(L&&L.src)||L,O=H&&H.domNode;if(O){var U=H.slot;if(!this[U]){var M=U&&U.match(/^([\d]+),([\d]+)$/);if(M){var R=parseInt(M[1],10),V=parseInt(M[2],10),Q=this.containerNode,T=this[(B+R)],N=[];if(!T){var J=Q.rows,S=J&&J.length||0;for(var K=S;K<=R;K++){N[B+K]=Q.insertRow();}T=N[B+R];}var P=T.cells&&T.cells.length||0;for(var K=P;K<=V;K++){var I=T.insertCell(K);N[F+R+","+K]=I;if(this.cellCssClass){I.className=this.cellCssClass;}}this.addSlots(N);}}}this._super(L);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Button");mstrmojo.HTMLButton=mstrmojo.declare(mstrmojo.Button,null,{scriptClass:"mstrmojo.HTMLButton",markupString:'<input id="{@id}" type="button" class="mstrmojo-text mstrmojo-HTMLButton mstrButton {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}" mstrAttach:click />',markupSlots:{inputNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"inline":"none";},onenabledChange:function(){mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);},onselectedChange:function(){mstrmojo.css[this.selected?"addClass":"removeClass"](this.domNode,["selected"]);},ontextChange:function(){this.inputNode.value=this.text!=null?this.text:"";},oniconClassChange:function(){this.domNode.className="mstrmojo-text mstrmojo-HTMLButton mstrButton "+this.cssClass+" "+this.iconClass+(this.enabled?"":" disabled");}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Label","mstrmojo._HasEditableText","mstrmojo.css","mstrmojo._CanHandleTwoClicks","mstrmojo.Label","mstrmojo.Widget");var C=mstrmojo.css,A=mstrmojo.Label.prototype.markupMethods;mstrmojo.EditableLabel=mstrmojo.declare(mstrmojo.Label,[mstrmojo._CanHandleTwoClicks,mstrmojo._HasEditableText],{scriptClass:"mstrmojo.EditableLabel",autoApplyDelay:-1,markupString:'<div id="{@id}" class="mstrmojo-EditableLabel {@cssClass}" title="{@title}" contenteditable="{@isEditing}" style="{@cssText}" mstrAttach:click,mousedown,blur,keydown,keyup></div>',markupMethods:mstrmojo.hash.copy({onwidthChange:function(){mstrmojo.Widget.widthMarkupMethod.call(this);},ontextChange:function(){if(A.ontextChange){A.ontextChange.call(this);}this.widgetResized();},onvisibleChange:function(){if(A.onvisibleChange){A.onvisibleChange.call(this);}if(this.visible){this.widgetResized();}}},mstrmojo.hash.copy(A)),onkeyup:function E(F){this._super(F);if(this._autoApplyTimer){window.clearTimeout(this._autoApplyTimer);}if(this.autoApplyDelay!==-1){var G=this;this._autoApplyTimer=window.setTimeout(function(){G.set("isEditing",false);},this.autoApplyDelay);}},postBuildRendering:function D(){if(this._super){this._super();}this.widgetResized();},selectable:true});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.EditableLabel,{onselectableChange:function B(){var G=this[this.editableSlot],F=!!this.selectable;G.selectable=F;G.setAttribute("unselectable",!F?"on":"off");C.toggleClass(G,"unselectable",!F);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Label","mstrmojo.css","mstrmojo.hash");mstrmojo.TristateCheckBox=mstrmojo.declare(mstrmojo.Label,null,{scriptClass:"mstrmojo.TristateCheckBox",grayed:true,checked:true,cssClass:"tristate",onclick:function(){if(this.grayed){this.set("grayed",!this.grayed);}else{this.set("checked",!this.checked);}},markupMethods:mstrmojo.hash.copy({oncheckedChange:function(){mstrmojo.css.toggleClass(this.domNode,"checked",this.checked);},ongrayedChange:function(){mstrmojo.css.toggleClass(this.domNode,"grayed",this.grayed);},onenabledChange:function(){mstrmojo.css.toggleClass(this.domNode,"disabled",!this.enabled);}},mstrmojo.hash.copy(mstrmojo.Label.prototype.markupMethods))});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2","mstrmojo.ListMapperHoriz","mstrmojo.ListBuilder");mstrmojo.ListHoriz=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.ListHoriz",renderOnScroll:true,listMapper:mstrmojo.ListMapperHoriz,listBuilder:mstrmojo.ListBuilder,itemField:"n",itemMarkup:null,itemMarkupFunction:null});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2","mstrmojo.ListMapper","mstrmojo.ListBuilder","mstrmojo.ListSelector");mstrmojo.List=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.List",renderOnScroll:true,listMapper:mstrmojo.ListMapper,listBuilder:mstrmojo.ListBuilder,listSelector:mstrmojo.ListSelector,itemIdField:"dssid",itemField:"n",itemMarkup:null,itemMarkupFunction:null});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2");function B(E){var I=E.ctxtBuilder;if(I){var H=I.itemWidgets,G;for(G=H.length-1;G>-1;G--){var F=H[G];if(F){F.destroy(true);}}}}mstrmojo.WidgetListBase=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.WidgetListBase",unrender:function C(G){var I=this.ctxtBuilder;if(I){var H=I.itemWidgets,F;for(F=H.length-1;F>-1;F--){var E=H[F];if(E&&E.hasRendered){E.unrender(true);}}}this._super(G);},refresh:function A(E){B(this);if(this._super){this._super(E);}},destroy:function D(E){B(this);this._super(E);}});})();(function(){mstrmojo.requiresCls("mstrmojo.ui.Checkbox");var A={ROUND:"round",RECT:""};mstrmojo.ui.ToggleButton=mstrmojo.declare(mstrmojo.ui.Checkbox,null,{scriptClass:"mstrmojo.ui.ToggleButton",markupString:'<div id="{@id}" class="mstrmojo-ui-ToggleButton {@cssClass}" mstrAttach:click><div class="container"><div class="slider {@sliderStyle}"></div></div></div>',sliderStyle:A.ROUND});mstrmojo.ui.ToggleButton.EnumStyle=A;}());(function(){mstrmojo.requiresCls("mstrmojo.string");mstrmojo.DivItemRenderer={render:function(E,C,F){var D=mstrmojo.string.encodeHtmlString((F.getItemName?F.getItemName(E,C):(F.itemDisplayField&&E[F.itemDisplayField])));return'<div mstridx="'+C+'" class="'+F.itemCssClass+(F.selectedIndices[C]?" "+F.itemSelectedCssClass:"")+(E.cssClass?" "+E.cssClass:"")+'" style="'+F.itemCssText+'">'+D+"</div>";},select:function(C){if(C&&C.className){C.className+=" selected";}},unselect:function(C){if(C&&C.className){C.className=C.className.replace(/selected/g,"");}},rowHeight:21};mstrmojo._RendersItemDivs={tableCssClass:"mstrmojo-ListBox-table",tableCssText:"",rowCssClass:"",rowCssText:"",cellCssClass:"mstrmojo-ListBox-cell",cellCssText:"",itemCssClass:"mstrmojo-ListBox-item",itemSelectedCssClass:"selected",itemDisplayField:"n",itemRenderer:mstrmojo.DivItemRenderer,rangeSelected:false,_findMatch:function(C,D){return mstrmojo.dom.findAncestorByAttr(mstrmojo.dom.eventTarget(C,D),"mstridx",true,this.itemsNode);},premousedown:function A(C){if(mstrmojo.dom.shiftKey(C.hWin,C.e)){mstrmojo.dom.preventDefault(C.hWin,C.e);}},preclick:function B(K){var G=K.hWin,H=K.e,F=this._findMatch(G,H);if(F){var J=parseInt(F.value,10),I=mstrmojo.dom,C=I.ctrlKey(G,H),D=I.shiftKey(G,H);if(C||D){I.clearBrowserHighlights(G);}if(this.multiSelect&&(this.selectionPolicy==="toggle"||C)){var E=this.rangeSelected||this.selectedIndex===-1;this.toggleSelect(J);if(E&&J<this.items.length&&this.selectedIndices[J+1]){J++;}this.selectedIndex=J;this.rangeSelected=false;}else{if(this.multiSelect&&D){this.rangeSelected=true;this.rangeSelect(J);}else{this.singleSelect(J);this.rangeSelected=false;}}}}};mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._RendersItemDivs");mstrmojo.ListBoxBase=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._RendersItemDivs],{scriptClass:"mstrmojo.ListBoxBase",cssClass:"mstrmojo-ListBox",itemCssClass:"mstrmojo-ListBox-item",_markupPrefix:function(){var C=this.itemRenderer;return(C&&C.markupPrefix)||('<table class="'+this.tableCssClass+'" style="'+this.tableCssText+'" cellspacing="0" cellpadding="0"><tbody>');},_markupSuffix:function(){var C=this.itemRenderer;return(C&&C.markupSuffix)||"</tbody></table>";},_itemPrefix:function(){var C=this.itemRenderer;return(C&&C.itemPrefix)||('<tr class="'+this.rowCssClass+'" style="'+this.rowCssText+'"><td class="'+this.cellCssClass+'" style="'+this.cellCssText+'">');},_itemSuffix:function(){var C=this.itemRenderer;return(C&&C.itemSuffix)||"</td></tr>";},_getItemNode:function(C){var H=this.itemsNode,G=this.renderAllItems,F=H&&H.tBodies,E=G?0:Math.floor(C/100),D=G?C:C%100,I=F&&F[E]&&F[E].rows&&F[E].rows[D];return I&&I.cells[0].firstChild;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList");var D=mstrmojo.dom,E=mstrmojo.hash;var A;mstrmojo.SuggestionList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.SuggestionList",itemField:"n",getItemMarkup:function(G,F){if(!A){var H=this.itemField;A=this._super(G).replace('@title}">{@en@n}<',"@en@"+H+'}">{@en@'+H+"}<");}return A;},getItemProps:function C(H,F){var G=this._super(H,F),I=this.itemField;if(!mstrmojo.string.isEmpty(H[I])){G[I]=H[I];}return G;},onclick:function B(F){if(this.disableClick){return false;}var K=this,H=this.parent,J=H.opener,G=D.isMetaKey(F.hWin,F.e);if(G&&!this.multiSelect){this.multiSelect=J.parent.defn.multi;if(this.multiSelect){D.attachOneTimeEvent(document.documentElement,"keyup",function(){var M=K.selectedIndices;if(J){J.suggestionShown=false;if(M&&!E.isEmpty(M)){var L=[];E.forEach(K.selectedIndices,function(O,N){L.push(K.items[N]);});J.handleSuggestionItemSelect(L);}H.close();}K.multiSelect=false;});}}this._super(F);if(!this.multiSelect){J.suggestionShown=false;var I=this.selectedItem;if(I){J.handleSuggestionItemSelect(I);}H.close();}},bindings:{itemField:"this.parent.opener.itemField",items:"this.parent.opener.suggestionItems",disableClick:"this.parent.opener.disableClick"}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList");mstrmojo.ui.List=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.ui.List",postselectionChange:function C(D){var G=D.added||[],F=G.length,I=D.removed||[],E=I.length;if(E){this.selectionRemoved({added:G,removed:I,isReselect:false});}if(F){var H=function(J){return[].concat(J).sort().join(",");};this.selectionAdded({added:G,removed:I,isReselect:H(G)===H(I)});}},selectionAdded:function A(D){},selectionRemoved:function B(D){}});mstrmojo.ui.List.SelectionChangeEvtType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList","mstrmojo.css");var B=mstrmojo.css;var A;var D;mstrmojo.ui.ButtonBar=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.ui.ButtonBar",markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onenabledChange:function G(){B.toggleClass(this.domNode,"disabled",!this.enabled);}},cssDisplay:"table",icnCssText:"display:table-row;",items:null,showIcon:true,hasSpacing:false,init:function F(I){this._super(I);var H=["mstrmojo-ui-ButtonBar"];if(this.hasSpacing){H.push("spacing");}if(!this.showIcon){H.push("btn-text");}B.addWidgetCssClass(this,H);},getItemMarkup:function E(H){if(!D){D=this._super(H);}if(!A){A=D.replace(">{@en@n}<",'title="{@en@n}"><div>&nbsp;</div><');}return this.showIcon&&!H.tx?A:D;},getItemProps:function C(J,H){var I=this._super(J,H);var K=J.css;if(K){I.addCls(K);}I.n=J.n||"";return I;}});mstrmojo.ui.ButtonBar.ItemType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");mstrmojo.ListMapperTable=mstrmojo.provide("mstrmojo.ListMapperTable",mstrmojo.hash.copy({markupPrefix:'<table class="mstrmojo-itemwrap-table">',markupSuffix:"</table>",itemWrapperPrefix:function(E){return'<tbody class="'+this.getWrapperCss(E)+'">';},itemWrapperPrefill:"<tr><td>&nbsp;</td></tr>",itemWrapperSuffix:"</tbody>",wrapperNodes:function D(E){return this.wrapperParentNode(E).tBodies;},wrapperParentNode:function C(E){return E.getElementsByTagName("table")[0];},createWrapperNode:function B(E){var F=E.ownerDocument,G=F.createElement("tbody");return G;},findIndex:function A(G,J,I){if(J&&I){var F=G.domNode,E=this.wrapperParentNode(J),H=I.parentNode;while(H){if(H===E){return mstrmojo.array.findBin(this.wrapperNodes(J),I,"offsetTop",G.items&&G.items.length);}else{if(H===F){break;}}I=H;H=I.parentNode;}}return -1;}},mstrmojo.hash.copy(mstrmojo.ListMapper)));mstrmojo.requiresCls("mstrmojo.WidgetListMapper");mstrmojo.WidgetListMapperTable=mstrmojo.provide("mstrmojo.WidgetListMapperTable",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapperTable)));})();(function(){mstrmojo.requiresCls("mstrmojo.ui.List","mstrmojo.ui._HasScroller","mstrmojo.css");var G=mstrmojo.css;var D;mstrmojo.ui.CheckList=mstrmojo.declare(mstrmojo.ui.List,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.CheckList",markupString:'<div id="{@id}" class="mstrmojo-ui-CheckList {@cssClass}" style="{@cssText}" mstrAttach:click,contextmenu><div class="scroll-container"><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{scrollboxNode:function A(){return this.domNode.firstChild;},itemsContainerNode:function J(){return this.domNode.firstChild.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onorientationChange:function M(){G.toggleClass(this.domNode,"horizontal",this.orientation!=="v");},onmultiSelectChange:function K(){G.toggleClass(this.domNode,"radio",!this.multiSelect);},onenabledChange:function I(){G.toggleClass(this.domNode,"disabled",!this.enabled);},onhideCheckMarkChange:function B(){G.toggleClass(this.domNode,"hideCheckMark",this.hideCheckMark);}},multiSelect:true,hideCheckMark:false,orientation:"v",minimumSelectCnt:0,icnCss:"icn",items:null,getItemMarkup:function L(N){if(!D){D=this._super(N).replace(">{@en@n}<",'title="{@tt}"><span class="text">{@en@n}</span><');}return D;},getItemProps:function H(Q,O){var P=this._super(Q,O),N={"\r\n":" ","\n":" ","\r":" "};var R=Q.css;if(R){P.addCls(R);}P.tt=Q.tt||"";Q.n=mstrmojo.string.multiReplace(Q.n,N);P.n=Q.n||"";return P;},setupScrollNodes:function E(){this.scrollNode=this.scrollboxNode;},preselectionChange:function C(O){var P=this.minimumSelectCnt,N=this.getSelectedItems().length,Q=O.removed;if(Q&&P){if(N<P){this.select(Q,true);return false;}}G.toggleClass(this.itemsContainerNode,"disableSelected",N<=P);return true;},buildRendering:function F(){this._super();G.toggleClass(this.itemsContainerNode,"disableSelected",this.getSelectedItems().length<=this.minimumSelectCnt);}});mstrmojo.ui.CheckList.ItemType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.ui.List","mstrmojo.ui._HasScroller");mstrmojo.ui.ScrollableList=mstrmojo.declare(mstrmojo.ui.List,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.ScrollableList",markupString:'<div id="{@id}" class="mstrmojo-ListBase {@cssClass}" style="{@cssText}" mstrAttach:click,dblclick,mousedown,mouseover,mouseout,contextmenu><div class="list-content"><div class="items-container {@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{itemsContainerNode:function C(){return this.domNode.firstChild.firstChild;},scrollboxNode:function D(){return this.domNode.firstChild;},scrollNode:function E(){return this.domNode.firstChild;}},postBuildRendering:function B(){if(this.renderOnScroll){if(!this.onScrollEnd){var G=this.id;this.onScrollEnd=function F(){var H=mstrmojo.all[G];H.doScroll();H.updateScrollbars();};}}if(this._super){this._super();}},renderBlockSize:150,renderIndex:0,onScrollEnd:undefined,doScroll:function A(){if(this.renderOnScroll){var G,H=this.scrollNode,F=(this.renderIndex+1)*this.renderBlockSize;if(F>=this.items.length){return ;}if(mstrmojo.dom.position(H).h===H.scrollHeight){G=this.domNode;}else{G=H;}if((mstrmojo.dom.position(G).h+G.scrollTop)>=G.scrollHeight){this.renderIndex++;var I=this._buildItemsMarkup(this.renderIndex*this.renderBlockSize,((this.renderIndex+1)*this.renderBlockSize)-1,this._markupPrefix&&this._markupPrefix(),this._markupSuffix&&this._markupSuffix(),this._itemPrefix&&this._itemPrefix(),this._itemSuffix&&this._itemSuffix()).join("");G.innerHTML+=I;this.itemsContainerNode.innerHTML+=I;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.SuggestionList","mstrmojo.mstr.EnumDSSXMLObjectTypes");var C=function(S,U,T){var R=S.parent.opener,J=R&&R.showDesc,Q=R&&R.showPath,I=U[S.itemField];var P=mstrmojo.string.escape4HTMLText,V="";if(Q){var M=U.anc&&U.anc.items,O=M&&M.length;if(O>0){for(var L=0;L<O-1;L++){V+=M[L].n+" > ";}V+=P(M[O-1].n);}else{if(U.path){V+=P(U.path);}}}if(!T){V+=(V.length===0?"":" > ")+P(I);}if(J){var N=U[S.itemDescField],K=120;if(N){V+="\r\n\r\n<br>"+P(N.substring(0,K)+(N.length>K?"...":""));}}return V;};var A=function(I,J,K){I.path=null;if(!J||!K||K.path){if(K&&K.path){I.set("path",K.path);}return ;}window.clearTimeout(this.pathTmr);this.pathTmr=window.setTimeout(function(){var L=J.path||J.getAttribute("path");if(L){I.set("path",K.path);return ;}mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(M){var N=H(M.toString())||"";K.path=N;I.set("path",N);}},{taskId:"getObjectDetails",objectID:K.did,objectType:K.t},undefined);},200);};var H=function(K){var N;if(window.DOMParser){N=(new DOMParser()).parseFromString(K,"text/xml");}else{N=new ActiveXObject("Microsoft.XMLDOM");N.async="false";N.loadXML(K);}var P=N.getElementsByTagName("path")[0],L=P.childNodes,O="";if(L){for(var J=0,I=L.length;J<I;J++){var M=L[J].childNodes&&L[J].childNodes[0];if(M){O+=mstrmojo.string.escape4HTMLText(M.nodeValue)+(J<I-1?"> ":"");}}}return O;};mstrmojo.LegacySuggestionList=mstrmojo.declare(mstrmojo.SuggestionList,null,{scriptClass:"mstrmojo.LegacySuggestionList",useRichTooltip:false,itemDescField:"desc",getItemMarkup:function(K,I){var J=this.parent.opener,L=this.useRichTooltip?"":this.buildTooltip(K);return'<div class="mstrmojo-suggest-text '+((J&&J.item2textCss(K))||"")+'" idx="'+I+'" title="'+L+'">'+J.getHighlightedText(J.getSearchPattern(),mstrmojo.string.escape4HTMLText(K[this.itemField]))+"</div>";},getItemProps:function E(){return{};},onmouseover:function(J){var M=this.parent.opener;if(M&&M.showPath){var K=mstrmojo.dom.eventTarget(J.hWin,J.e),I=K.getAttribute("idx"),L=I!=null?this.items[I]:null;if(L&&L.t>-1){this.targetEl=K;this.targetItem=L;this.requestPath(K,L);}}},requestPath:function D(I,K){var J=this.parent.opener;if(K.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Function&&J.showFunctionSyntaxAsPath){this.buildFunctionSyntax(K);}else{A(this,I,K);}},buildFunctionSyntax:function G(J){var K=J.path;if(!K&&J.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Function){var I=function I(P){if(P.did<0){return P.n;}var O=P.pars,M=[],N,L;M.push(P.n);if(O){M.push("(");for(N=0,L=O.length;N<L;N++){M.push(O[N].n);if(N!==(L-1)){M.push(", ");}}M.push(")");}return M.join("");};J.path=I(J);}this.set("path",{path:J.path,excludeSelf:true});},buildTooltip:function B(I,J){return C(this,I,J);},onpathChange:function F(){var I=this.targetEl;I.path=1;var J=this.buildTooltip(this.targetItem,this.path.excludeSelf);if(this.useRichTooltip){this.useRichTooltip=true;this.hasOpenTooltip=false;if(!I.ttp){I.ttp=J;this.showTooltip();}}else{I.title=J;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._ListSelections");mstrmojo.ListBoxHoriz=mstrmojo.declare(mstrmojo.ListBoxBase,[mstrmojo._ListSelections],{scriptClass:"mstrmojo.ListBoxHoriz",cssClass:"mstrmojo-ListBoxHoriz",tableCssClass:"mstrmojo-ListBox-table",tableCssText:"",rowCssClass:"",rowCssText:"",cellCssClass:"",cellCssText:"",cellSpacing:0,cellPadding:0,_markupPrefix:function(){var A=this.itemRenderer;return(A&&A.markupPrefix)||('<table class="'+this.tableCssClass+'" style="'+this.tableCssText+'" cellspacing="'+this.cellSpacing+'" cellpadding="'+this.cellPadding+'"><tbody><tr class="'+this.rowCssClass+'" style="'+this.rowCssText+'">');},_markupSuffix:function(){var A=this.itemRenderer;return(A&&A.markupSuffix)||"</tr></tbody></table>";},_itemPrefix:function(){var A=this.itemRenderer;return(A&&A.itemPrefix)||('<td class="'+this.cellCssClass+'" style="'+this.cellCssText+'">');},_itemSuffix:function(){var A=this.itemRenderer;return(A&&A.itemSuffix)||"</td>";},_getItemNode:function(A){if(A<0){return null;}var B=this.itemsNode,C=B&&B.rows[0];return C&&C.cells[A].firstChild;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBoxBase","mstrmojo._HasScrollbox");mstrmojo.ListBox=mstrmojo.declare(mstrmojo.ListBoxBase,[mstrmojo._HasScrollbox],{scriptClass:"mstrmojo.ListBox",renderAllItems:false,renderPause:10,numPagesRendered:0,pageStatus:null,_rc:null,_totalPages:null,_rh:null,_rhMin:8,_rowsPerPage:null,_defaultRowsPerPage:100,_minRowsPerPage:100,_pageHeight:null,buildRendering:function K(){if(this.renderAllItems===true){this._super();return true;}this._initPageSettings();var L=this.items;this.items=this._rc?this.items.slice(0,Math.min(this._rowsPerPage,this._rc)):[];this._super();this.items=L;this.postRenderPage(0,true);if(this._rc>this._rowsPerPage){this.itemsContainerNode.style[mstrmojo.css.MINHEIGHT]=(this._rh*this._rc)+"px";if(!this.connectedScrollbox){this.connectScrollbox(this);this.connectedScrollbox=true;}}else{this.postRenderingCleanup();}},_initPageSettings:function E(){var L=this.items;this._rc=(L&&L.length)||0;var N=this.itemRenderer;this._rh=(N&&N.rowHeight)||this._rhMin||3;var M=this._defaultRowsPerPage;if(!isNaN(this.scrollboxHeight)){M=Math.ceil(this.scrollboxHeight/this._rh);M=Math.max(M,this._minRowsPerPage);}this._rowsPerPage=M;this._totalPages=Math.ceil(this._rc/this._rowsPerPage);this._pageHeight=this._rh*this._rowsPerPage;this._pageStatus=new Array(this._totalPages);this._numPagesRendered=0;},onscroll:function J(){if(!this._renderingRows){this._startPageRenderThread();}},_startPageRenderThread:function F(){this.renderingRows=true;var M=this,L=this._renderTimer=self.setInterval(function(){if(!M){self.clearInterval(L);return ;}var N=M.getPagesToRender();if(N.length>0){M.renderPages(N);}else{M.renderingRows=false;self.clearInterval(M._renderTimer);delete M._renderTimer;if(M.isRenderingComplete()){M.postRenderingCleanup();}M=null;}},this.renderPause);},getPagesToRender:function I(){var P=[],Z=this._pageHeight,b=null,W=this._pageStatus,Y=this;function R(c){var d=W[c];if(d&&d.filled){if(!d.height){if(!b){b=Y.itemsNode.tBodies;}d.height=b[c].offsetHeight;}return d.height;}else{return Z;}}var a=0,S=null,O=null,M=this.scrollboxTop;for(var V=0,X=this._totalPages;V<X;V++){a+=R(V);if(a>=M){S=V;break;}}if(S==null){S=O=X-1;}else{var L=this.scrollboxBottom;for(var T=S+1;T<X;T++){if(a>=L){O=T-1;break;}a+=R(T);}}if(O==null){O=X-1;}for(var N=this._numPagesRendered;N<S;++N){P.push({idx:N,fill:false});}for(var Q=S;Q<=O;++Q){var U=W[Q];if(!U||!U.filled){P.push({idx:Q,fill:true});}}return P;},renderPages:function D(M){for(var N=0,L=M.length;N<L;++N){this.renderPage(M[N].idx,M[N].fill);}},renderPage:function B(R,M){var V=this._pageStatus,P=(this._numPagesRendered>=R+1);if(P){if(!M||(V[R]&&V[R].filled)){return ;}}var U=this._rowsPerPage,L=R*U,N=Math.min(L+U,this._rc)-1;var T=this.tempTableCont;if(!T){T=this.tempTableCont=this.domNode.ownerDocument.createElement("div");}var Q=M?this._buildItemsMarkup(L,N,'<table><tbody idx="'+R+'">',"</tbody></table>",this._itemPrefix&&this._itemPrefix(),this._itemSuffix&&this._itemSuffix()).join(""):'<table><tbody idx="'+R+'"><tr><td style="height:'+this._pageHeight+'px">&nbsp;</td></tr></tbody></table>';T.innerHTML=Q;var O=T.firstChild.tBodies[0],S=this.itemsNode;if(!P){S.appendChild(O);}else{S.replaceChild(O,S.tBodies[R]);}this.postRenderPage(R,M);},postRenderPage:function G(M,O){if(M+1>this._numPagesRendered){this._numPagesRendered=M+1;}var L=this._pageStatus,N=L[M];if(!N){N=L[M]={};}if(O){N.filled=true;}if(M>0&&M==this._totalPages-1){this.itemsContainerNode.style[mstrmojo.css.MINHEIGHT]="";}},isRenderingComplete:function C(){if(this._numPagesRendered==this._totalPages){for(var L=this._pageStatus,M=this._totalPages-1;M>-1;M--){if(!L[M]||!L[M].filled){return false;}}return true;}return false;},postRenderingCleanup:function A(){if(this.connectedScrollbox){this.disconnectScrollbox(this);this.connectedScrollbox=false;}},unrender:function(L){this.postRenderingCleanup();this._super(L);},refresh:function H(){if(!this.hasRendered){return ;}var N=this.domNode,L=N&&N.parentNode;if(!this.parent&&L){var M=N.ownerDocument.createElement("span");L.insertBefore(M,N);}this.unrender();if(!this.parent&&L){this.domNode=M;}this.render();if(this.defn&&this.defn.set){this.defn.set("readyState",mstrmojo.EnumReadystate.IDLE);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.WidgetListBase","mstrmojo.WidgetListMapper","mstrmojo.WidgetListBuilder");mstrmojo.WidgetList=mstrmojo.declare(mstrmojo.WidgetListBase,null,{scriptClass:"mstrmojo.WidgetList",renderOnScroll:true,listMapper:mstrmojo.WidgetListMapper,listBuilder:mstrmojo.WidgetListBuilder,itemConfig:null,itemFunction:null,initBindings:function(){this._super();var E=this.ctxtBuilder,D=E&&E.itemWidgets;if(D){for(var C=0,A=D.length;C<A;C++){var B=D[C];if(B&&B.initBindings){B.initBindings();}}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListSelector","mstrmojo.List","mstrmojo.string");mstrmojo.OBList=mstrmojo.declare(mstrmojo.List,null,{scriptClass:"mstrmojo.OBList",cssClass:"mstrmojo-OBList",itemClass:"mstrmojo-OBListItem",iconClass:"mstrmojo-OBListItemIcon",textClass:"mstrmojo-OBListItemText",iconCssPrefx:"mstrmojo-OBIcon_",itemMarkupFunction:function(C,A,B){return'<div class="'+B.itemClass+(C[B.itemType]?" t_"+C[B.itemType]:"")+(C[B.itemSubType]?" st_"+C[B.itemSubType]:"")+(C[this.itemISC]?" isc":"")+(C[B.itemViewMedia]?" vm_"+C[B.itemViewMedia]:"")+'"><table cellspacing="0" cellpadding="0"><tbody><tr><td>'+B.getIcon(C)+'</td><td><div class="'+B.textClass+'" title="'+B.getTooltip(C)+'">'+mstrmojo.string.htmlAngles(C.n)+"</div></td></tr></tbody></table></div>";},getIcon:function(F){var E=F[this.itemType],D=F[this.itemSubType],B=" t"+E,C=(parseInt(E,10)===1||parseInt(E,10)===3||parseInt(D,10)===14082)?" st"+D:"",G=F[this.itemISC]?'class="mstrmojo-ListIcon isc"':"",A=(F[this.itemViewMedia]===2048||F[this.itemViewMedia]===8192)?" hvi":"";return'<span class="mstrmojo-ListIcon '+B+C+A+'"><span '+G+"></span></span>";},getTooltip:function(C){var D="",F=C.anc&&C.anc.items,A=F&&F.length,B;if(A>0){for(B=0;B<A-1;B++){D+=F[B].n+" > ";}D+=F[A-1].n;}var E=C.desc,G=128;if(E){D+="\r\n\r\n"+mstrmojo.string.encodeHtmlString(E.substring(0,G))+(E.length>G?"...":"");}return D;},listSelector:mstrmojo.ListSelector,selectionPolicy:"reselect",itemType:"t",itemSubType:"st",itemISC:"isc",itemViewMedia:"dvm",useDblSelect:false});}());(function(){mstrmojo.requiresCls("mstrmojo.Label","mstrmojo.HTMLButton","mstrmojo.CheckBox","mstrmojo.HBox","mstrmojo.VBox","mstrmojo.Box","mstrmojo.Popup","mstrmojo.List","mstrmojo.DropDownButton");var A=function(E){E.attachEventListener("pfChange",E.id,"positionChange");E.boxes.left.flat.attachEventListener("checkedChange",E.id,"flatChange");var D={pf:"this.boxes.left.pf.value",flat:"!this.boxes.left.flat.checked",agg:function(){return this.boxes.left.agg.checked?"2":"1";},rfi:"this.boxes.left.rfi.value"};E.set("bindings",D);},C=function(E){var D=E.boxes.left;D.pf.set("value",E.pf);D.flat.set("checked",!E.flat);D.agg.set("checked",E.agg==2);D.rfi.set("value",E.rfi);};function B(M,I,E,F,L,D,H,K){var J={target:I,onEnd:function(){if(D){D();}},props:{}};J.props[E]={ease:H||mstrmojo.ease.sin,start:parseInt(F,10),stop:parseInt(L,10),suffix:"px"};J=mstrmojo.hash.copy(K,J);var G=new mstrmojo.fx.AnimateProp(J);G.play();}mstrmojo.CGEOptions=mstrmojo.declare(mstrmojo.VBox,null,{scriptClass:"mstrmojo.CGEOptions",children:[{scriptClass:"mstrmojo.HBox",alias:"boxes",cellCssClass:"cell",children:[{alias:"left",scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-CGEOptions-options",children:[{scriptClass:"mstrmojo.ImageCheckBox",alias:"flat",cssClass:"row",label:mstrmojo.desc(7954,"Enable hierarchical display")},{scriptClass:"mstrmojo.ImageCheckBox",alias:"agg",cssClass:"row",label:mstrmojo.desc(7955,"Enable subtotals display")},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7956,"Position parent header:"),cssClass:"row"},{scriptClass:"mstrmojo.Pulldown",itemIdField:"v",alias:"pf",cssClass:"CGE-parent-header mstrmojo-FormatEditor-DropDownButton",items:[{n:mstrmojo.desc(7957,"Above child items"),v:true},{n:mstrmojo.desc(7958,"Below child items"),v:false}],bindings:{value:"this.parent.parent.parent.pf"}},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7959,"Interaction with report filter:"),cssClass:"row"},{scriptClass:"mstrmojo.Pulldown",itemIdField:"v",alias:"rfi",cssClass:"CGE-report-filter mstrmojo-FormatEditor-DropDownButton",items:[{n:mstrmojo.desc(7960,"Default (Database Instance level)"),v:-1},{n:mstrmojo.desc(7961,"No interaction"),v:0},{n:mstrmojo.desc(2398,"Apply"),v:1},{n:mstrmojo.desc(7962,"Apply but ignore related elements"),v:2}],bindings:{value:function(){var D=this.parent.parent.parent.rfi,D=D==undefined?"-1":D;return D;}}}]},{scriptClass:"mstrmojo.Box",alias:"preview",cssClass:"mstrmojo-CGEOptions-preview",children:[{scriptClass:"mstrmojo.Label",cssClass:"title",text:mstrmojo.desc(3389,"Preview")},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7963,"Element Header 1"),alias:"g1t"},{scriptClass:"mstrmojo.Box",alias:"e1",cssClass:"e",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7965,"Item 1-1")},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7966,"Item 1-2")}],onflatChange:function(){mstrmojo.css.toggleClass(this.domNode,["flat"],this.flat);}},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7963,"Element Header 1"),cssText:"margin-bottom:10px;",alias:"g1b"},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7964,"Element Header 2"),cssText:"margin-top:10px;",alias:"g2t"},{scriptClass:"mstrmojo.Box",alias:"e2",cssClass:"e",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7967,"Item 2-1")},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7968,"Item 2-2")}],onflatChange:function(){mstrmojo.css.toggleClass(this.domNode,["flat"],this.flat);}},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7964,"Element Header 2"),alias:"g2b"}]}]},{scriptClass:"mstrmojo.HBox",alias:"btns",cssClass:"mstrmojo-Editor-buttonBar",cssText:"margin-top: 10px;",children:[{scriptClass:"mstrmojo.HTMLButton",alias:"ok",text:mstrmojo.desc(2397,"OK"),cssClass:"mstrmojo-Editor-button",onclick:function(){this.parent.parent.save();}},{scriptClass:"mstrmojo.HTMLButton",alias:"cancel",text:mstrmojo.desc(2399,"Cancel"),cssClass:"mstrmojo-Editor-button",onclick:function(){this.parent.parent.cancel();}}]}],pf:true,flat:false,agg:"1",rfi:"-1",postBuildRendering:function(){if(this._super){this._super();}A(this);this.preview();},open:function(E,F){var D=E.cgp;this.pp=D;this.set("pf",D.pf);this.set("flat",D.flat);this.set("agg",D.agg);this.set("rfi",D.rfi);C(this);for(var G in F){this[G]=F[G];}this.set("visible",true);if(!this.hasRendered){this.render();}},cancel:function(){var D=this.closeCB;if(D){D[0][D[1]]();}},save:function(){this.pp.pf=this.pf;this.pp.flat=this.flat;this.pp.agg=this.agg;this.pp.rfi=this.rfi;this.cancel();},positionChange:function(D){this.preview(D.value,null);},flatChange:function(D){this.preview(null,!D.value);},preview:function(G,E){G=!!G?String(G)==="true":!(String(this.pf)==="false");E=(E==null?this.flat:E);var F=!!G,D=this.boxes.preview;D.g1t.set("visible",F);D.g1b.set("visible",!F);D.g2t.set("visible",F);D.g2b.set("visible",!F);D.e1.set("flat",E);D.e2.set("flat",E);}});})();(function(){mstrmojo.requiresCls("mstrmojo.List","mstrmojo._IsDial");mstrmojo.Dial=mstrmojo.declare(mstrmojo.List,[mstrmojo._IsDial],{scriptClass:"mstrmojo.Dial",markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onhasSelectionChange:function(){mstrmojo.css.toggleClass(this.domNode,["hasSelection"],!!this.hasSelection);},hideIfEmpty:function(){this.onadd();}},hideIfEmpty:false,onadd:function(A){if(this._super){this._super(A);}if(this.hideIfEmpty){if(this.domNode){this.domNode.style.display=(!this.items||this.items.length==0)?"none":"block";}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo._BindTargetChildren","mstrmojo.List");mstrmojo.TabNameList=mstrmojo.declare(mstrmojo.List,[mstrmojo._BindTargetChildren],{scriptClass:"mstrmojo.TabNameList",isStrip:true,targetProps:{names:"items"},makeObservable:true,postchange:function A(){var E=this.selectedIndex,F=this.target;if(F&&E!=null&&parseInt(E,10)!==-1){F.set("selected",F.children[E]);}},addTabButtons:function B(E,M){var J=this.targetProps||{},Q=J.childTitle||"n",G=this.itemIdField||"v",F=this.itemField||"n",P=[],I=(this.items)?this.items.length:0,L=(E&&E.length)||0,K;for(K=0;K<L;K++,I++){var O=E[K],H=O[Q];if(H){var N={target:O};N[F]=H;N[G]=I;P.push(N);}}if(P.length){this.add(P,M);}},removeTabButton:function D(F){var E=mstrmojo.array.filter(this.items,function(G){return(G.target===F);},{max:1});if(E&&E[0]){this.remove(E[0]);}},clearButtons:function C(){this.remove(this.items);}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.string","mstrmojo.dom","mstrmojo.Popup","mstrmojo.List","mstrmojo.DropDownButton");var B=mstrmojo.dom;mstrmojo.Pulldown=mstrmojo.declare(mstrmojo.DropDownButton,null,{scriptClass:"mstrmojo.Pulldown",cssClass:"mstrmojo-Pulldown",items:null,itemIdField:"dssid",itemField:"n",itemCSS:"css",itemTitleField:null,defaultSelection:0,defaultText:null,title:"",value:null,popupToBody:false,popupCssClass:"",popupZIndex:null,fixWidth:false,fixHeight:false,allowHTML:false,_set_items:function(H,F){var G=this.items;this.items=F||[];return G!==this.items;},markupMethods:mstrmojo.hash.copy({onvalueChange:function(){var G=this.value,F=this.selectedIndex,I=this.items||[],J,H;if(F===undefined||(G!==null&&(F===-1||(F!==-1&&I[F]&&I[F][this.itemIdField]!==G)))){F=mstrmojo.array.find(I,this.itemIdField,G);F=(F>-1)?F:this.defaultSelection;this.selectedIndex=F;}else{if(G===null){this.selectedIndex=this.defaultSelection;}}this.selectedItem=J=I[this.selectedIndex];if(J){H=J[this.itemField];}else{H=this.defaultText||"";}this.set("text",H);}},mstrmojo.hash.copy(mstrmojo.DropDownButton.prototype.markupMethods)),prevalueChange:function D(){var G=this.value,F=-1;if(G!==null){F=mstrmojo.array.find(this.items,this.itemIdField,G);}if(F>-1){this.selectedItem=this.items[F];this.selectedIndex=F;}},togglePopup:function E(){if(this.popupToBody){var I=B.position(this.popupNode,true),H=this.popupRef,F={left:Math.round(I.x)+"px",top:Math.round(I.y)+"px"};if(!H.hasRendered){delete H.slot;F.placeholder=document.body.appendChild(document.createElement("div"));}this.popupOpenConfig=this.popupOpenConfig||{};mstrmojo.hash.copy(F,this.popupOpenConfig);}else{this.popupRef.slot="popupNode";}if(this._super){this._super();}var G=this.popupRef.domNode;if(G){if(this.fixWidth){G.style.width=(this.domNode.offsetWidth-2)+"px";}else{G.style.minWidth=(this.domNode.offsetWidth-2)+"px";}}},premousedown:function A(F){if(B.getButton(F.hWin,F.e)===B.MOUSE_BUTTON.LEFT){this.togglePopup();}},unrender:function C(F){var G=this.popupRef;if(this.popupToBody&&G.hasRendered){G.unrender(false);}if(this._super){this._super(F);}},itemName:function(H,F,G){return this.allowHTML?H[G.itemField]:mstrmojo.string.encodeHtmlString(H[G.itemField]);},popupRef:{scriptClass:"mstrmojo.Popup",slot:"popupNode",cssClass:"mstrmojo-Pulldown-Popup",autoCloses:false,modal:false,autoClose:true,locksHover:true,adjustSize:function(){var G=this.opener,F=this.domNode;if(G&&G.fixWidth){mstrmojo.css.addClass(F,["fix-width"]);}if(G&&G.fixHeight){mstrmojo.css.addClass(F,["fix-height"]);}},onOpen:function(){var H=this.opener,G=H&&H.popupZIndex,I=(H&&H.popupCssClass)||"",F=this.domNode;if(G){F.style.zIndex=G;}if(I){mstrmojo.css.addClass(F,[I]);}this.adjustSize();},children:[{scriptClass:"mstrmojo.List",alias:"list",itemMarkupFunction:function(I,F,G){var H=I[G.itemCSS]||G.parent.opener.item2textCss&&G.parent.opener.item2textCss(I)||"",J=G.parent.opener.itemName;return'<div class="mstrmojo-Pulldown-listItem"><div class="mstrmojo-text '+H+'" title="'+I[G.itemTitleField||G.itemField]+'">'+(J(I,F,G)||"&nbsp;")+"</div></div>";},renderOnScroll:false,bindings:{itemIdField:"this.parent.opener.itemIdField",itemField:"this.parent.opener.itemField",itemCSS:"this.parent.opener.itemCSS",itemTitleField:"this.parent.opener.itemTitleField",items:"this.parent.opener.items",selectionPolicy:"this.parent.opener.selectionPolicy",selectedIndex:"this.parent.opener.selectedIndex"},onmousedown:function(){this.parent.close();},onchange:function(){var H=this.parent,I=H.visible,F=H.opener,G=this.selectedItem;if(!F||!G||!I){return ;}F.set("value",G[this.itemIdField]);}}]}});}());(function(){mstrmojo.requiresClsP("mstrmojo","List","desc");mstrmojo.requiresDescs(2827,11897);var B=mstrmojo.desc,A={OPERATOR:1,VALIDATE:2,CLEAR:3};mstrmojo.ExpressionToolbar=mstrmojo.declare(mstrmojo.List,null,{scriptClass:"mstrmojo.ExpressionToolbar",cssClass:"mstrmojo-ExpressionToolbar",items:[{t:A.OPERATOR,v:"+",cls:"plus"},{t:A.OPERATOR,v:"-",cls:"minus"},{t:A.OPERATOR,v:"*",cls:"multi"},{t:A.OPERATOR,v:"/",cls:"divide"},{t:A.OPERATOR,v:"()",cls:"par"},{t:A.OPERATOR,v:"<>",cls:"bra"},{t:A.CLEAR,v:"V",cls:"clear right",n:B(2827,"Clear")},{t:A.VALIDATE,v:"",cls:"validate right",n:B(11897,"Validate")}],itemMarkupFunction:function(F,D){var C=F.cls,G=F.n||"",E=F.t;if(E===A.OPERATOR){return'<div class="mstrmojo-item '+C+'" idx='+D+' title="'+G+'">'+G+"</div>";}if(E===A.VALIDATE){return"";}return'<div class="mstrmojo-Button mstrmojo-WebHoverButton '+C+' hoverLink"><div class="mstrmojo-Button-text" idx='+D+">"+G+"</div></div>";}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListHoriz","mstrmojo.fx");mstrmojo.FishEye=mstrmojo.declare(mstrmojo.ListHoriz,null,{scriptClass:"mstrmojo.FishEye",width:16,size:10,step:16,speed:2,cssClass:"mstrmojo-FishEye",cssClassItem:"mstrmojo-dot",itemMarkupFunction:function(B,A,C){return'<div class="mstrmojo-fisheye-item '+C.cssClassItem+'" title="'+B.n+'" idx="'+A+'" did="'+B.did+'">&nbsp;</div>';},onchange:function(){this.scroll2();this.parent.set("selectedIndex",this.selectedIndex);},as:new mstrmojo.fx.AnimateProp(),onitemsChange:function(){if(this._super){this._super();}this.last=this.items.length-1;this.first=Math.max(0,this.last-this.size);if(this.items.length>this.size){this.scroll("left",this.width);}},scroll2:function(){var A=this.selectedIndex-this.last;if(this.selectedIndex==this.first&&this.first>0){this.scroll("right",this.width);}else{if(this.selectedIndex==this.last&&this.last<this.items.length-1){this.scroll("left",this.width);}else{if(this.selectedIndex>this.last){A=this.selectedIndex-this.last;this.scroll("left",this.width*A,A);this.last=Math.min(this.items.length-1,this.last+A);}else{if(this.selectedIndex<this.first){A=this.first-this.selectedIndex;this.scroll("right",this.width*A,A);this.first=Math.max(0,this.first-A);}}}}},scroll:function(C,F,E){var B=this.itemsContainerNode,I=B&&B.style;var D=this.as,H=parseInt(mstrmojo.css.getStyleValue(B,{left:"right",right:"left"}[C]),10),H=isNaN(H)?0:H,A=parseInt(I.left,10)||0,G=A+(C=="left"?-1:1)*(F||(Math.min(this.step,(-1)*H)));D.target=B;D.props={left:{start:A,stop:G,duration:100,interval:10,suffix:"px"}};D.play();E=E===undefined?1:E;this.first+=(C=="left"?1:-1)*E;this.last=this.first+this.size-1;this.parent.set("scrollable",this.last<this.items.length-1);this.parent.set("rightScrollable",this.first>0);return G;},srcId:null,postBuildRendering:function(){if(this._super){this._super();}this.hasRendered=!!this.domNode;var E=this.itemsContainerNode,A=E&&E.firstChild,B=A&&A.rows&&A.rows[0],D=B&&B.cells&&B.cells[0];this.first=0;this.last=this.size-1;var C=this.srcId;if(C&&mstrmojo.all[C]&&mstrmojo.all[C].attachEventListener){mstrmojo.all[C].attachEventListener("change",this.id,function(F){if(this.items[this.items.length-1]!=F.src.selectedItem){this.items.add([mstrmojo.hash.copy(F.src.selectedItem)]);this.set("selectedIndex",this.items.length-1);}if(this.items.length>this.size){this.set("rightScrollable",this.items.length>this.size);this.scroll("left",this.width*(this.selectedIndex-this.last),(this.selectedIndex-this.last));}});}this.itemsContainerNode.style.left=Math.min(0,(this.size-this.items.length+1))*this.width+"px";}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Container","mstrmojo._FormatDefinition","mstrmojo.TristateCheckBox","mstrmojo.FieldSet","mstrmojo.Table");var A=mstrmojo.hash,B=mstrmojo._FormatDefinition;mstrmojo.AlignmentFormatter=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.AlignmentFormatter",cssClass:"mstrmojo-AlignmentFormatter",markupString:'<div id={@id} class="{@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},postCreate:function(){this.onmodelChange();},onmodelChange:function(){if(this.model&&!this.model.scriptClass){A.make(this.model,mstrmojo.Obj);}},children:[{scriptClass:"mstrmojo.FieldSet",alias:"textAlignment",cssClass:"mstrmojo-FormatEditor-textAlignment",legend:mstrmojo.desc(2065),children:[{scriptClass:"mstrmojo.Table",rows:2,cols:2,children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(3691),slot:"0,0"},{scriptClass:"mstrmojo.Pulldown",itemIdField:"v",items:B.Horizontal,bindings:{m:"this.parent.parent.parent.model",value:"this.m.Horizontal"},onvalueChange:function(){if(this.m&&this.value!=null){this.m.Horizontal=this.value;}},slot:"0,1"},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(3692),slot:"1,0"},{scriptClass:"mstrmojo.Pulldown",itemIdField:"v",items:B.Vertical,bindings:{m:"this.parent.parent.parent.model",value:"this.m.Vertical"},onvalueChange:function(){if(this.m&&this.value!=null){this.m.Vertical=this.value;}},slot:"1,1"}]}]},{scriptClass:"mstrmojo.FieldSet",alias:"textControl",cssClass:"mstrmojo-FormatEditor-textControl",legend:mstrmojo.desc(2884),children:[{alias:"TextWrap",scriptClass:"mstrmojo.TristateCheckBox",text:mstrmojo.desc(2070),checked:false,grayed:false,pr:"TextWrap",bindings:{m:"this.parent.parent.model",checked:function(){return this.m[this.pr]==-1;},grayed:function(){return(typeof this.m[this.pr]=="undefined")||this.m[this.pr]=="pru";}},oncheckedChange:function(C){if(this.m){this.m.set(this.pr,this.checked?-1:0);}}},{scriptClass:"mstrmojo.HBox",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(5159)},{scriptClass:"mstrmojo.Pulldown",itemIdField:"v",items:B.TextDirection,bindings:{m:"this.parent.parent.parent.model",value:"this.m.TextDirection"},onvalueChange:function(){if(this.m&&this.value!=null){this.m.TextDirection=this.value;}},slot:"1,1"}]}]}]});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Container","mstrmojo._FormatDefinition","mstrmojo.FieldSet","mstrmojo.Table");var D=mstrmojo.hash,B=mstrmojo.num;var C=function(F){return D.copy(F,{scriptClass:"mstrmojo.ValidationTextBox",maxLength:6,dtp:4,min:0,max:100,constraints:{trigger:mstrmojo.validation.TRIGGER.ONKEYUP},bindings:{m:F.modelBinding,value:function(){var G=this.m[this.pr];return G==null?"":this._PT2UserUnits(G).replace(/([\.,][1-9]{1,})0{1,}$/,"$1").replace(/\.$/,".0").replace(/,$/,",0");}},postCreate:function(){this.markupMethods=D.copy({onvalueChange:function(){this.inputNode.value=this.value;}},D.copy(this.markupMethods));},onValid:function(){this.m[this.pr]=this._UserUnits2PT(this.value);},_PT2UserUnits:function(G){return B.toLocaleString(B.convertToLocalUnits(B.toString(G),mstrApp.units));},_UserUnits2PT:function(G){return B.toLocaleString(B.toString(B.convertToUSUnits(G,mstrApp.units)));}});};var A=function(F,G){return{scriptClass:"mstrmojo.Label",text:F,slot:G};};mstrmojo.PaddingFormatter=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.PaddingFormatter",cssClass:"mstrmojo-PaddingFormatter",markupString:'<div id={@id} class="{@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},postCreate:function(){this.onmodelChange();},onmodelChange:function(){if(this.model&&!this.model.scriptClass){D.make(this.model,mstrmojo.Obj);}},init:function E(F){var G=mstrConfig.unitsLabel||mstrApp.unitsLabel;this.children=[{scriptClass:"mstrmojo.FieldSet",alias:"padding",cssClass:"mstrmojo-FormatEditor-padding",legend:mstrmojo.desc(2883),children:[{scriptClass:"mstrmojo.HBox",cssClass:"paddingBox",children:[{scriptClass:"mstrmojo.Table",rows:2,cols:3,children:[A(mstrmojo.desc(3528),"0,0"),C({pr:"LeftPadding",slot:"0,1",modelBinding:"this.parent.parent.parent.parent.model"}),A(G,"0,2"),A(mstrmojo.desc(3526),"1,0"),C({pr:"TopPadding",slot:"1,1",modelBinding:"this.parent.parent.parent.parent.model"}),A(G,"1,2")]},{scriptClass:"mstrmojo.Table",rows:2,cols:3,children:[A(mstrmojo.desc(3529),"0,0"),C({pr:"RightPadding",slot:"0,1",modelBinding:"this.parent.parent.parent.parent.model"}),A(G,"0,2"),A(mstrmojo.desc(3527),"1,0"),C({pr:"BottomPadding",slot:"1,1",modelBinding:"this.parent.parent.parent.parent.model"}),A(G,"1,2")]}]}]}];this._super(F);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.ui._HasScroller","mstrmojo.css");var B=mstrmojo.css;mstrmojo.ui.ColumnContainer=mstrmojo.declare(mstrmojo.Box,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.ColumnContainer",markupString:'<div id="{@id}" class="mstrmojo-ui-ColumnContainer {@cssClass}"><div></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;},scrollNode:function(){return this.domNode.firstChild;}},markupMethods:{onnextChange:function A(){B.toggleClass(this.domNode,"hasNext",!!this.next);}},active:false,next:null,idx:undefined,updateColumnContainer:function D(){var E=this.next;if(E){E.updateColumnContainer();}},onactiveChange:function C(){B.toggleClass(this.domNode,"active",this.active);var E=this.next;if(E){E.updateColumnContainer();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.func","mstrmojo.array","mstrmojo.Button","mstrmojo.HBox","mstrmojo.dom","mstrmojo.Box");var D=mstrmojo.dom;mstrmojo.Dialog=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Dialog",title:"",buttons:null,alignment:"center",btnAlignment:"right",zIndex:10,modal:true,markupString:'<div id="{@id}" class="mstrmojo-Dialog {@cssClass}" style="z-index: 1100;" tabindex="0" mstrAttach:click><div class="win mstrmojo-Editor" style="{@cssText}"><div class="mstrmojo-Editor-titlebar"><div class="mstrmojo-Editor-title">{@title}</div></div><div class="mstrmojo-Editor-content"></div><div class="mstrmojo-Editor-buttons"></div></div><div class="mstrmojo-Editor-curtain"></div><div class="mstrmojo-Editor-tip"></div></div>',markupSlots:{editorNode:function(){return this.domNode.firstChild;},curtainNode:function(){return this.domNode.childNodes[1];},titleNode:function(){return this.domNode.firstChild.firstChild;},containerNode:function(){return this.domNode.firstChild.childNodes[1];},buttonNode:function(){return this.domNode.firstChild.lastChild;},tipNode:function(){return this.domNode.lastChild;}},editorNode:null,btnHbox:null,markupMethods:{onzIndexChange:function(){this.editorNode.style.zIndex=this.zIndex;this.curtainNode.style.zIndex=this.zIndex-1;},onwidthChange:function(){this.editorNode.style.width=this.width||"auto";},onvisibleChange:function(L){if(L){return ;}var J=this.visible,K=J?"block":"none";this.editorNode.style.display=K;if(this.modal){this.curtainNode.style.display=K;}},onleftChange:function(){this.editorNode.style.left=this.left||"";},ontopChange:function(){this.editorNode.style.top=this.top||"";},ontitleChange:function(){this.titleNode.firstChild.innerHTML=this.title||"";}},preBuildRendering:function F(){var J;var K=this.buttons;if(K&&!this.btnHbox){for(J in K){K[J].cssClass=(K[J].cssClass||"")+(this.noButtonCls?"":" mstrmojo-Editor-button");}this.addChildren([{scriptClass:"mstrmojo.HBox",cssText:"float:"+this.btnAlignment,slot:"buttonNode",alias:"btnHbox",children:K},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-clearMe",slot:"buttonNode"}]);}if(this.modal){this.cssClass+=" modal";}return this._super();},buildRendering:function B(){var J=this.placeholder;if(this._super()){if(!this.parent&&!J){document.body.appendChild(this.domNode);}return true;}return false;},getResizeHandler:function E(){var J=this.id;return function(){var K=mstrmojo.all[J];K.resizeDialog();K.positionDialog();};},postBuildRendering:function A(){this._super();if(this.modal&&this.visible){this.curtainNode.style.display="block";}if(!this._resizeHandler){var K=this._resizeHandler=this.getResizeHandler();D.attachEvent(window,"resize",K);}this.resizeDialog();this.positionDialog();try{this.domNode.focus();}catch(J){}return true;},resizeDialog:function G(){if(this.modal){this.resizeCurtain();}},resizeCurtain:function C(){var K=this,O=K.curtainNode,J=document.body,M=document.documentElement,N=O.style,L=K.curtainPosition;N.width=Math.max(J.clientWidth,M.scrollWidth)+"px";if(L&&L.h){N.height=L.h+"px";}else{N.height=Math.max(J.clientHeight,M.scrollHeight)+"px";}if(L&&L.y){N.top=L.y+"px";}K.raiseEvent({name:"resizeCurtain"});},positionDialog:function H(){var K=this.editorNode,M=this.left,L=this.top;if(!M||!L){D.center(K);var J=K.style;if(this.alignment==="top"){J.top="10px";}if(M){J.left=M;}if(L){J.top=L;}}},destroy:function(K){var J=this._resizeHandler;if(J){D.detachEvent(window,"resize",J);}this._super(K);}});mstrmojo.toast=function I(O,M,Q,J){var P="mojoToast9",N,L=M||3000;if(J&&J.id){P=J.id+"-"+P;}try{mstrmojo.all[P].destroy();}catch(K){}mstrmojo.insert({id:P,scriptClass:"mstrmojo.Label",cssClass:(J&&J.cssClass)?J.cssClass:"toastCss",text:O}).render();N=mstrmojo.all[P].domNode;if(J&&J.dom){J.dom.appendChild(N);}else{document.body.appendChild(N);D.bottomCenter(N);}window.setTimeout(function(){if(Q){Q();}try{mstrmojo.all[P].destroy();}catch(R){}},L);};mstrmojo.mask={show:function(){var J=mstrmojo.mask.win=mstrmojo.insert({scriptClass:"mstrmojo.Box",cssClass:"fullscreen-mask"});J.render();document.body.appendChild(J.domNode);},hide:function(){mstrmojo.mask.win.destroy();}};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.Box","mstrmojo.ui._HasScroller","mstrmojo.ME.Enum");mstrmojo.requiresDescs();var M=mstrmojo.dom,B=mstrmojo.string,D=mstrmojo.Widget;var H=/\r?\n?----\r?\n?/;function F(N){var O=B.decodeHtmlString((N||{}).desc||"",true).split(H);return{desc:O[0],example:O.length===2?O[1]:""};}mstrmojo.ME.FunctionInfo=mstrmojo.declare(mstrmojo.Box,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ME.FunctionInfo",markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" style="{@cssText}"><div class="mstrmojo-FunctionInfo-container"><div class="mstrmojo-FunctionInfo-syntax"></div><div class="mstrmojo-FunctionInfo-desc"></div><div class="mstrmojo-FunctionInfo-eg"><span class="icon" t="icon"></span><span class="text"></span></div></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;},syntaxNode:function(){return this.domNode.firstChild.firstChild;},descNode:function(){return this.domNode.firstChild.childNodes[1];},egNode:function(){return this.domNode.firstChild.lastChild;},egTextNode:function(){return this.domNode.firstChild.lastChild.lastChild;}},markupMethods:{onvisibleChange:D.visibleMarkupMethod,onfoiChange:function(){this.syntaxNode.innerHTML=B.htmlAngles(this.syntax)||"";this.descNode.innerHTML=this.desc;this.egTextNode.innerHTML=this.example;this.egNode.style.display=this.example?"block":"none";this.updateScrollbars();}},foi:{},syntax:"",desc:"",example:"",init:function L(N){this._super(N);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-FunctionInfo");},setupScrollNodes:function C(){if(!mstrmojo.dom.ISIE8){this.scrollNode=this.containerNode;}},onfoiChange:function A(){this.set("syntax",this.getFunctionSyntax());this.set("desc",this.getDesc()+" "+this.getHelpTopic());this.set("example",this.getExample());},getFunctionSyntax:function K(R){var T=R||this.foi;if(!T){return"";}if(T.did<0){return T.n;}var Q=T.pars,S=T.pros,O=[],P,N;O.push(T.n);S=mstrmojo.hash.clone(S)||[];if(T.ios){S.push({n:"SortBy"});}if(T.sqt===5){S.push({n:"BreakBy"});}if(this.showFullSyntax){if(S.length>0){O.push("<");for(P=0,N=S.length;P<N;P++){if(mstrmojo.array.indexOf(mstrmojo.ME.Enum.NonExposableParams,S[P].n)===-1){O.push(S[P].n);O.push(", ");}}O.pop();O.push(">");}}O.push("(");for(P=0,N=Q.length;P<N;P++){O.push(Q[P].n);if(P!==(N-1)){O.push(", ");}}O.push(")");return O.join("");},getDesc:function E(){return F(this.foi).desc;},getExample:function J(){return F(this.foi).example;},getHelpTopic:function G(N){var O=N||this.foi;if(!O||O.did===mstrmojo.ME.Enum.SHORTCUT_FUNCTIONS.Row_Count){return"";}return mstrmojo.ME.MetricDataService.getFunctionHelpTopic(O.h);},useRichTooltip:true,showTooltip:function I(N,Q){var P=M.eventTarget(Q,N),O=this.foi;if(P&&P.getAttribute("t")==="icon"){this.richTooltip=this.getTooltip(O,P);if(this.richTooltip){this._super(N,Q);}}},getTooltip:function(Q,R){var O=M.position(R),P=R.egTip||"";var N={areaId:Q._renderIdx+"text",cssClass:"vi-regular vi-tooltip-V",contentNodeCssClass:"regular-unitlist-tooltips",posType:"",content:P,top:O.y-75,left:O.x+O.w-30,enableHover:false};return N;}});mstrmojo.ME.FunctionInfo.getDescAndExample=F;}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupWidget","mstrmojo.ui.menus._IsMenuPopup","mstrmojo.css");mstrmojo.ui.menus.MenuPopup=mstrmojo.declare(mstrmojo.ui.PopupWidget,[mstrmojo.ui.menus._IsMenuPopup],{scriptClass:"mstrmojo.ui.menus.MenuPopup",popupConfig:null,init:function B(E){this._super(E);var C=this.popupConfig;if(!C.contents){throw new Error("Cannot open popup without contents.");}var D=["mstrmojo-ui-MenuPopup"],F=C.cssClass;if(F){D.push(F);}if(C.hasToggleItem){D.push("hasToggleItem");}mstrmojo.css.addWidgetCssClass(this,D);this.addChildren(C.contents);},shouldPropagateLockHover:function A(){return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.tooltip","mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.hash","mstrmojo.string");mstrmojo.requiresDescs(11038,11935,11936,11937,11856,11938,13138,13230,13260,14633,14636);var C=mstrmojo.hash.copy,P=mstrmojo.css,J=mstrmojo.dom,N=mstrmojo.array,E=mstrmojo.string,Q=function Q(V,T){if(!V){return ;}var S=T&&T.length||0,U;for(U=S;U>0;U--){V=V.replace(new Array(U+2).join("#"),T[U-1]);}return V;},L=function L(T){if(!T){return ;}var Z=this,V=J.position(T.refNode||Z.refNode),Y=J.position(Z.domNode),X=T.position||R.RIGHT,U=0,a=0,S=9+(T.margin!==undefined?T.margin:0),W=" ";switch(X){case R.TOP:a=-Y.h-S;W+="t";break;case R.BOTTOM:a=V.h+S;W+="b";break;case R.LEFT:U=-Y.w-S;W+="l";break;case R.RIGHT:U=V.w+S;W+="r";break;}mstrmojo.hash.forEach(C(T,{left:U,top:a,contentNodeCssClass:W,visible:false}),function(b,c){this[c]=b;},this);this.set("visible",T.invalid);},A=function A(S){var W=this,U,V=S.errorCode,X=S.errorMsg,T=S.args,Y=mstrmojo.vi.ui.rw.selectors.EnumWarningMessages;if(S.invalid){U={content:V!==null?(W.generateContentHTML(Q(Y[V],T))||Y["*"]):X};}return U;};mstrmojo.vi.ui.rw.selectors.EnumWarningMessages=C(mstrmojo.locales.validation,{"*":mstrmojo.desc(11038,"Invalid"),invalidValueVIWarning:mstrmojo.desc(11935,"Invalid characters"),emptyValueVIWarning:mstrmojo.desc(11936,"Please enter a number"),notIntegerVIWarning:mstrmojo.desc(11937,"Please enter an integer"),outOfRangeVIWarning:mstrmojo.desc(11856,"Please enter value between ## and ###."),noMultiSelectionVIWaring:mstrmojo.desc(11938,"This selector does not support multiple selections."),continuousSelectionVIWaring:mstrmojo.desc(13138,"This selector does not support non-continuous selections."),bigDecimalMetricSliderVIWaring:mstrmojo.desc(13230,"Cannot qualify on big decimal value. Please change qualification type to Rank"),unableDisplaySelectionVIWarning:mstrmojo.desc(13260,"Filter cannot display actual selections."),imageSizeExceedLimitVIWarning:mstrmojo.desc(14633,"Cannot embed an image larger than ##MB. Your image is still ###MB after compression. Enter a URL to the image instead."),imageFileTypeNotSupportedVIWarning:mstrmojo.desc(14636,"Invalid image format. Please use .png, .jpg, .jpeg, .gif or .bmp."),imageOverSizeNoCompessionVIWarning:mstrmojo.desc(14665,"Cannot embed an image larger than ##MB. Enter a URL to the image instead.")});mstrmojo.vi.ui.rw.selectors.EnumWarningPosition={TOP:1,BOTTOM:2,LEFT:3,RIGHT:4};var R=mstrmojo.vi.ui.rw.selectors.EnumWarningPosition;mstrmojo.vi.ui.rw.selectors._HasWarningMessage=mstrmojo.provide("mstrmojo.vi.ui.rw.selectors._HasWarningMessage",{_mixinName:"mstrmojo.vi.ui.rw.selectors._HasWarningMessage",warningSlotName:"warning",showWarning:function G(U){var Y=this,a=Y.warningSlotName,c=Y[a],S=U&&U.lasting||6000,X=U.refNode||this.domNode,T=U.highlight!==false,b=U.closeOnClick===false?false:true,Z;if(!c){c=new mstrmojo.Tooltip({refNode:X,highlight:T,closeOnClick:b,updatePopupConfig:null,cssClass:"vi-warning vi-tooltip-V"});Y.addDisposable(c);Y[a]=c;Z=Y.closeOnClick=Y.getCloseOnClickListener();J.attachEvent(document.body,"click",Z);}var W=U.position||R.TOP,V="vi-warning vi-tooltip-";switch(W){case R.TOP:c.cssClass=V+"V";break;case R.BOTTOM:c.cssClass=V+"A";break;case R.LEFT:c.cssClass=V+"D";break;case R.RIGHT:c.cssClass=V+"C";break;}c.open(Y,A.call(Y,U));this.adjustPosition(U);if(T){P.toggleClass(c.refNode,"mstrmojo-Warning",true);}window.clearTimeout(Y._warningTimeOut);Y._warningTimeOut=window.setTimeout(function(){Y.hideWarning();},S);},hideWarning:function H(){var T=this,S=T[T.warningSlotName];if(S&&S.visible&&S.close){if(S.highlight){P.toggleClass(S.refNode,"mstrmojo-Warning",false);}S.close();window.clearTimeout(T._warningTimeOut);delete T._warningTimeOut;}},getCloseOnClickListener:function I(){var S=this;return function(){var T=S[S.warningSlotName];if(T.closeOnClick){S.hideWarning();}};},adjustPosition:function M(S){var T=this;L.call(T[T.warningSlotName],S);},generateContentHTML:function D(S){return E.encodeHtmlString(S,true);},bindWarningHandler:function F(){N.forEach(arguments,function S(U){if(!U||!U.attachEventListener){return ;}var V=U._validationEventListener,T;if(V){U.detachEventListener(V);delete U._validationEventListener;}T=this.getValidationEvtListener();if(T){U._validationEventListener=U.attachEventListener("validationChange",this.id,T);}},this);},getValidationEvtListener:function B(){var T=this;return function S(U){var V=U.value;T[(V&&V.invalid?"show":"hide")+"Warning"](V);};},unrender:function K(S){var T=this[this.warningSlotName];if(T){T.unrender();}this._super(S);},destroy:function O(S){J.detachEvent(document.body,"click",this.closeOnClick);return this._super(S);}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.tooltip");var E=mstrmojo.dom,D=mstrmojo.string,F=mstrmojo.hash,H=mstrmojo.array,C=mstrmojo.tooltip;mstrmojo.ui._HasListTooltip=mstrmojo.provide("mstrmojo.ui._HasListTooltip",{_mixinName:"mstrmojo.ui._HasListTooltip",tooltipOrientation:"horizontal",tooltipOffset:8,tooltipMarkup:'<div class="content" style="{@style}">{@c}</div>',tooltipCss:{},tooltipContrast:false,getTooltipText:function A(I){return I&&(D.encodeHtmlString(I.ttp,true)||D.encodeHtmlString(I.n,true));},showTooltip:function G(Z,N){var Q=this;if(!Q.hasOpenTooltip&&!(Q._lastOpened&&Q._lastOpened.visible)){var f=E.eventTarget(N,Z),a=Q.getItemFromTarget(f),U=Q.getItemNodeFromTarget(f),h=Q.getTooltipText(a),P=Q.tooltipCss;if(!h||a.ttpDisabled){return ;}if(Q.showTooltipForLargeText){if(U.offsetWidth>=U.scrollWidth){return ;}}var g=E.position(U),Y,R,L,W="",X=Q.tooltipOffset,O=(a&&a.ctxt)||{};if(this.tooltipOrientation==="vertical"){Y=g.x+g.w/2;L=O.posType||C.POS_TOPCENTER;R=g.y+g.h+X;var M="mojo-theme-light vi-regular vi-tooltip-A";if(!O.posType){M+=" A-center";}Q.tooltipCss=F.copy({cssClass:M},P);}else{var K=E.windowDim(),V=40,b=g.x+g.w+X,J=g.x-X,d=J-V,I=K.w-(b+V),c="vi-regular vi-tooltip-",T;R=g.y;if(I>=d){Y=b;T=I;L=O.posType||C.POS_TOPLEFT;P.cssClass=c+"C "+P.rightCssClass;}else{Y=J;T=d;L=O.posType||C.POS_TOPRIGHT;P.cssClass=c+"D "+P.leftCssClass;}W="max-width: "+T+"px;";}if(Q.tooltipContrast){P.cssClass=P.cssClass+" contrast";}if(P&&P.getItemCssClass){P.cssClass=H.filter([P.cssClass,P.getItemCssClass(a)],function(e){return !!e;}).join(" ");}var S=Q.richTooltip=F.copy(Q.tooltipCss,{content:D.apply(Q.tooltipMarkup,{c:h,style:W}),top:R,left:Y,posType:L});if(Q.itemDisabled){S.cssClass+=" vi-warning";}if(O.hoverable){S.enableHover=true;}if(O.posType==="TL"){S.left=g.x;}S.keepArrowXPos=!!Q.keepArrowXPos;S.keepArrowYPos=!!Q.keepArrowYPos;this._super(Z,N);}},onclick:function B(I){var J=this;window.setTimeout(function(){if(J.hasOpenTooltip){J.hideTooltip();}window.clearTimeout(J._tooltipTimeOut);},0);this._super(I);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.Button","mstrmojo.DropDownButton","mstrmojo.Label","mstrmojo.WaitIcon");mstrmojo.IncFetch=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.IncFetch",markupString:'<div id="{@id}" class="mstrmojo-IncFetch {@cssClass}" style="{@cssText}"><div class="mstrmojo-IncFetch-content"></div><div class="mstrmojo-clearMe"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},preBuildRendering:function A(){var J=[],F=this.ds,M=this.cp,P=this.np,C=this.ps,E=this.id,G=2;var L=function(){mstrmojo.all[E].set("cp",this.text);};var H={f:1,p:Math.max(M-1,1),n:Math.min(M+1,P),l:P};for(var O in H){J.push(new mstrmojo.Button({iconClass:"arrow "+O,title:F[O],enabled:(H[O]!==M),text:H[O],onclick:L}));}var D=Math.max(Math.min(M-2,P-4),1),I=Math.min(D+4,P);for(var K=D;K<=I;K++){var N;if(K===M){if(I-D===4&&P!==5){N=new mstrmojo.DropDownButton({height:"13px",title:F.a?F.a:"",text:K,direction:"up",popupRef:{scriptClass:"mstrmojo.Popup",slot:"popupNode",contentNodeCssClass:"goto",autoCloses:false,locksHover:true,children:[{scriptClass:"mstrmojo.VBox",children:[{scriptClass:"mstrmojo.Label",cssText:"float:left;",text:F.gt},{scriptClass:"mstrmojo.TextBox",cssText:"float:left;",size:3,maxLength:String(P).length,onEnter:function(){var R=this.inputNode.value,T=this.parent.parent;if(R===""){T.close();return ;}var Q=parseInt(R,10),S=!(isNaN(Q)||Q<1||Q>P);if(S){mstrmojo.all[E].set("cp",Q);T.close();}else{this.setInvalidState(F.v.replace("###",P).replace("##",1).replace(" #",""));}}},{scriptClass:"mstrmojo.Button",cssText:"float:left",iconClass:"apply",title:F.ap?F.ap:"",onclick:function(){this.parent.children[1].onEnter();}}]}],onOpen:function(){mstrmojo.css.addClass(this.parent.domNode,["open"]);var Q=this.children[0].children[1].inputNode;window.setTimeout(function(){Q.focus();},0);},onClose:function(){mstrmojo.css.removeClass(this.parent.domNode,["open"]);this.children[0].children[1].cleanUp();}}});}else{N=new mstrmojo.Button({iconClass:"pg on",text:K});}}else{N=new mstrmojo.Button({iconClass:"pg",text:K,onclick:L});}J.splice(G++,0,N);}J.splice(G++,0,new mstrmojo.Label({text:F.pgs.replace("###",P).replace("##",""),cssText:"float:left;margin:1px 1px 1px 3px;"}));this._iWait=new mstrmojo.WaitIcon({cssText:"margin-top:-2px;"});J.push(this._iWait);this.addChildren(J);return this._super?this._super():true;},_set_cp:function B(D,C){if(parseInt(C,10)!==this.cp){this.raiseEvent({name:"fetch",v:C,iWait:this._iWait});}}});})();(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupButton","mstrmojo._HasLayout");mstrmojo.ui.editors.controls.PreviewButton=mstrmojo.declare(mstrmojo.ui.PopupButton,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.editors.controls.PreviewButton",markupString:'<div id="{@id}" class="mstrmojo-ui-PreviewButton {@cssClass}" style="{@cssText}"><div class="cf" mstrAttach:click><div class="preview"></div><div class="btn">&nbsp;</div></div><div class="host"></div></div>',markupSlots:{previewNode:function(){return this.domNode.firstChild.firstChild;},btnNode:function(){return this.domNode.firstChild.lastChild;},widgetHostNode:function(){return this.domNode.lastChild;},clickableNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},layoutConfig:{h:{previewNode:"100%",btnNode:"100%",widgetHostNode:"0px"},w:{previewNode:"100%",btnNode:"20px",widgetHostNode:"all"},xt:true},isHostedWithin:false,getLayoutOffsets:function B(){return{h:2,w:2};},anchorSlot:"clickableNode",updatePreview:function C(){throw new Error(this.scriptClass+" must implement updatePreview.");},getPopupHostNode:function A(){return this.widgetHostNode;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Popup","mstrmojo.css");mstrmojo.ui.pathbar.PathPopup=mstrmojo.declare(mstrmojo.Popup,null,{scriptClass:"mstrmojo.ui.pathbar.PathPopup",autoCloses:true,locksHover:true,markupMethods:{onvisibleChange:function(){if(this.isOpen){mstrmojo.css.toggleClass(this.domNode,"open",this.visible);}},onleftChange:mstrmojo.Widget.leftMarkupMethod,ontopChange:mstrmojo.Widget.topMarkupMethod},cssClass:null,targetNode:null,offsetTop:0,offsetLeft:0,onOpen:function B(){var D=this,C=D.domNode,E=mstrmojo.dom.position(D.targetNode);C.style.top=(E.y+E.h+D.offsetTop)+"px";C.style.left=(E.x+D.offsetLeft)+"px";D.set("visible",false);D.isOpen=true;window.setTimeout(function(){D.set("visible",true);},100);mstrmojo.css.toggleClass(D.targetNode,"opened",true);},onClose:function A(){var C=this;window.setTimeout(function(){delete C.isOpen;mstrmojo.css.toggleClass(C.targetNode,"opened",false);},500);C.domNode.style.left="";},children:null});}());(function(){mstrmojo.requiresCls("mstrmojo.TextBox","mstrmojo.hash");var A="mstrmojo-TextBoxWithLabel";mstrmojo.TextBoxWithLabel=mstrmojo.declare(mstrmojo.TextBox,null,{scriptClass:"mstrmojo.TextBoxWithLabel",label:"",rightLabel:"",cssDisplay:"inline",type:"text",markupString:'<div class="'+A+' {@cssClass}" style="{@cssText}"><span class="mstrmojo-TextBox-label">{@label}</span><input id="{@id}" class="mstrmojo-TextBox {@inputNodeCssClass}"  style="{@inputNodeCssText}" title="{@tooltip}" type="{@type}" size="{@size}" maxlength="{@maxLength}" index="{@tabIndex}" mstrAttach:focus,keyup,blur/><span class="mstrmojo-TextBox-label-right">{@rightLabel}</span></div>',markupSlots:{inputNode:function(){return this.domNode.firstChild.nextSibling;},lblNode:function(){return this.domNode.firstChild;}}});mstrmojo.TextBoxWithLabel.prototype.markupMethods=mstrmojo.hash.copy({oncssClassChange:function(){var B=this.cssClass;this.domNode.className=A+(B?" "+B:"");},onlabelChange:function(){this.lblNode.innerText=this.label||"";}},mstrmojo.hash.copy(mstrmojo.TextBoxWithLabel.prototype.markupMethods));}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.TextBox");var A=mstrmojo.css,C=mstrmojo.dom;mstrmojo.TextArea=mstrmojo.declare(mstrmojo.TextBox,null,{scriptClass:"mstrmojo.TextArea",markupString:'<textarea id="{@id}" class="mstrmojo-TextArea {@cssClass}"  style="{@cssText}" title="{@tooltip}" placeholder="{@placeholderText}" rows="{@rows}" cols="{@cols}" maxlength="{@maxLength}" index="{@tabIndex}" mstrAttach:focus,keydown,keyup,blur></textarea>',maxLength:256,onkeydown:function B(K){var I=this.inputNode,J=this.value,E=this.maxLength,F=(J&&J.length)||0,M=K.e,L=M.keyCode;this.isDeleteKeys=L===8||L===46;this.isArrowKeys=L===37||L===38||L===39||L===40;if(E!==undefined&&E<=F){var G=I.selectionEnd,H=(G!==undefined)?(G-I.selectionStart)>0:document.selection.createRange().text.length>0;if(!this.isDeleteKeys&&!this.isArrowKeys&&!H){if(C.isIE7||C.isIE8||C.isIE9){I.blur();window.setTimeout(function(){I.focus();},1);}C.preventDefault(window,M);return false;}}}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.TextArea,{oncssClassChange:function D(){A.addClass(this.domNode,this.cssClass||"");}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout","mstrmojo.StackContainer");mstrmojo.TabContainer=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.TabContainer",markupString:'<div id="{@id}" class="mstrmojo-tabcontainer {@cssClass}"><div class="mstrmojo-tabcontainer-tabs"></div><div class="mstrmojo-tabcontainer-stack"></div><div></div></div>',markupMethods:{onborderChange:function(){if(this.border){this.domNode.style.border=this.border;}},onbackgroundChange:function(){this.domNode.style.background=this.background||"";}},markupSlots:{top:function(){return this.domNode.childNodes[0];},stack:function(){return this.domNode.childNodes[1];},containerNode:function(){return this.domNode.childNodes[1];},bottom:function(){return this.domNode.childNodes[2];}},addChildren:function A(D,K,H){var G=this._super(D,K,H);var B=this.children,F=B.length;if(F>=2){var L,I,E;for(E=0;E<F;E++){var C=B[E],J=C&&C.slot;if(!L&&C.isStrip){L=C;}else{if(!I&&(!J||J==="stack")){I=C;}}if(L&&I){L.set("target",I);break;}}}return G;}});}());(function(){mstrmojo.requiresCls("mstrmojo.DocTextfield","mstrmojo.ui._HasScroller");mstrmojo.vi.ui.ScrollableDocTextfield=mstrmojo.declare(mstrmojo.DocTextfield,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.vi.ui.ScrollableDocTextfield",setupScrollNodes:function A(){this.scrollNode=this.valueNode;}});}());(function(){mstrmojo.requiresCls("mstrmojo.TabContainer");mstrmojo.TabListContainer=mstrmojo.declare(mstrmojo.TabContainer,null,{scriptClass:"mstrmojo.TabListContainer",markupString:'<table id="{@id}" class="mstrmojo-tabcontainer {@cssClass}"><tr><td class="mstrmojo-tabcontainer-tabs {@listCssClass}"></td><td class="mstrmojo-tabcontainer-stack {@containerCssClass}"></td><td class="{@bottomCssClass}"></td></tr></table>',markupSlots:{top:function(){return this.domNode.firstChild.childNodes[0].childNodes[0];},stack:function(){return this.domNode.firstChild.childNodes[0].childNodes[1];},containerNode:function(){return this.domNode.firstChild.childNodes[0].childNodes[1];},bottom:function(){return this.domNode.firstChild.childNodes[0].childNodes[2];}}});})();(function(){mstrmojo.requiresCls("mstrmojo.TextArea","mstrmojo.ui._HasScroller");function E(){var L=this.inputNode,F=L.style,J=this.scrollNode,G=J.scrollTop,M=parseInt(F.height),N=L.scrollHeight,I=M<N,H=M>J.clientHeight;if(I){F.height=N+"px";}else{if(H){var K=M;while(K>0&&L.offsetHeight===L.scrollHeight){F.height=--K+"px";}F.height=K+1+"px";}}if(I||H){this.updateScrollbars();}if(I){J.scrollTop=G+(N-M);}}mstrmojo.ui.ScrollableTextArea=mstrmojo.declare(mstrmojo.TextArea,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.ScrollableTextArea",markupSlots:{scrollNode:function(){return this.domNode.firstChild;},inputNode:function(){return this.domNode.firstChild.firstChild;}},cssDisplay:"block",init:function D(F){this.markupString='<div class="mstrmojo-ui-TextArea {@cssClass}"><div class="ta-sc">'+this.markupString+"</div></div>";this._super(F);},postBuildRendering:function A(){this._super();var G=this.inputNode,F=G.style;F.height=G.scrollHeight+"px";},onRender:function C(){this._super();E.call(this);},prevalueChange:function B(){if(!this.hasRendered){return ;}E.call(this);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.ui.pathbar.PathPopup","mstrmojo.mstr._RecentObjectsHelper","mstrmojo.util.LibraryHelper");function D(O,J){var F=[],I,G=1;F[0]={name:mstrmojo.desc(8661,"All Projects"),href:mstrApp.name+"?evt=3001&src="+mstrApp.name+".3001",isSpecial:true};if(mstrApp.projectsList&&mstrApp.projectsList.projects){var H=mstrApp.projectsList.projects;for(I=0;I<H.length;I++){F[G++]=H[I];}}var P;O.addDisposable(P=new mstrmojo.ui.pathbar.PathPopup({id:"mstrProjectsGenPopup",cssClass:"mstrShortcutsListPopup",targetNode:J,children:[{scriptClass:"mstrmojo.ui.pathbar.ScrollableList",alias:"menuItems",useRichTooltip:true,items:F,preclick:function L(){this.parent.close();},getItemMarkup:function(Q){if(Q.isSpecial){if(this.items.length===1){Q.cssText="border-bottom: none;";}return'<span id="allProjectsItem" class="item mstrMenuItem {@itemCls}" style="{@cssText}"><a class="mstrLink project{@idx}" href="{@href}" idx="{@idx}" style="width:100%;">{@en@displayName}</a></span>';}return'<span class="item mstrMenuItem {@itemCls}" style="{@cssText}"><a class="mstrLink project{@idx}" href="{@href}" idx="{@idx}" style="width:100%;"><div class="projectName">{@en@displayName}</div>  <div class="serverName">{@srvrName}</div></a></span>';},getItemProps:function N(S,Q){var R=!!S.selected;return{sel:R,itemCls:"mstr-project-item",cssText:S.cssText||"",cls:R?"selected":"",newGroup:!!S.grp?"grp":"",displayName:S.alias||S.name,idx:Q,href:S.href||mstrApp.name+"?evt=3010&src="+mstrApp.name+".3010&Port="+encodeURIComponent(S.port)+"&Project="+encodeURIComponent(S.name)+"&Server="+encodeURIComponent(S.server),srvrName:S.server,target:S.target||"_self"};},getTooltipText:function K(Q){if(Q&&!Q.isSpecial){$STR=mstrmojo.string;return $STR.encodeHtmlString((Q.alias||Q.name))+"<br/>"+Q.server+"<br/>"+$STR.encodeHtmlString(Q.desc);}},onclick:function(Q){var S=function(){mstrmojo.dom.preventDefault(Q.hWin,Q.e);mstrmojo.dom.stopPropogation(Q.hWin,Q.e);};var R=Q.getTarget();if(!R.getAttribute("href")){R=R.parentElement;}mstrmojo.form.sendLinkAsForm(R.href);S();return false;}}],onvisibleChange:function(){if(this.visible){setTimeout(this.menuItems.updateScrollbars(),200);}},onClose:function M(){this.isOpen=false;mstrmojo.css.toggleClass(this.targetNode,"opened",false);this.domNode.style.left="";}}));return P;}function E(J,K){var I=this.handleRecentObjects();var L;J.addDisposable(L=new mstrmojo.ui.pathbar.PathPopup({id:"mstrRecentsGenPopup",cssClass:"mstrShortcutsListPopup",targetNode:K,children:[{scriptClass:"mstrmojo.ui.pathbar.List",alias:"menuItems",items:I,preclick:function F(){this.parent.close();},getItemMarkup:function(O){var M="";if(mstrConfig.showPreviews){if(O.recoveryInfo!==undefined){var N=(O.recoveryInfo.imgData!==undefined)?"data:image/png;base64,"+O.recoveryInfo.imgData:"";if(N!==""){M='<img class = "img-preview" src = "'+N+'" height="200" width="250" style="z-index: 100; position: absolute;">';}}}return'<span class="item mstrMenuItem {@itemCls}" style="{@cssText}"><span class="{@iconCls}"></span><a class="mstrLink" href="{@href}"><div>{@n}</div>'+M+"</a></span>";},getItemProps:function H(P,M){var O=!!P.selected,N=(mstrApp&&mstrApp.optimizeFitToPage)?"&innerWidth="+window.innerWidth+"&innerHeight="+window.innerHeight:"";return{sel:O,iconCls:P.iconClass,itemCls:P.itemClass,cssText:P.cssText||"",cls:O?"selected":"",newGroup:!!P.grp?"grp":"",n:P.recoveryName,idx:M,href:P.recoveryURL+N,name:P.recoveryName,target:P.target||"_self"};},onclick:function(M){var O=function(){mstrmojo.dom.preventDefault(M.hWin,M.e);mstrmojo.dom.stopPropogation(M.hWin,M.e);};var N=M.getTarget();if(N.getAttribute("href")){mstrmojo.form.sendLinkAsForm(N.href);}else{mstrmojo.form.sendLinkAsForm(N.parentElement.href);}O();return false;}}],onClose:function G(){this.isOpen=false;mstrmojo.css.toggleClass(this.targetNode,"opened",false);this.domNode.style.left="";}}));return L;}function A(){var L=this;this.addDisposable(this.popup=new mstrmojo.ui.pathbar.PathPopup({id:"mstrSCList",cssClass:"mstrShortcutsListPopup",targetNode:this.domNode,offsetTop:2,recentsPopup:null,children:[{scriptClass:"mstrmojo.ui.pathbar.List",alias:"menuItems",preclick:function F(M){var N=M.getTarget();if(N.getAttribute("name")!=="recentObjects"&&N.getAttribute("name")!=="projects"){this.parent.close();}},handleMouseOver:function I(M,N){var O=M.getTarget(),Q=this.parent.projectsPopup,P=this.parent.recentsPopup;if(O.getAttribute("name")=="recentObjects"){if(Q!=null){Q.close();}this.handleClick(M,N);}else{if(O.getAttribute("name")=="projects"){if(P!=null){P.close();}this.handleClick(M,N);}else{if(P!=null){P.close();}if(Q!=null){Q.close();}}}return false;},handleClick:function G(N,O){var P=N.getTarget();var M=this.parent;if(P.getAttribute("name")=="recentObjects"){if(P.nodeName==="SPAN"){P=P.parentNode;}if(M.recentsPopup==null){M.recentsPopup=E.call(L,M,P);}this.openHelper(P,M.recentsPopup);return true;}else{if(P.getAttribute("name")=="projects"){if(P.nodeName==="SPAN"){P=P.parentNode;}if(M.projectsPopup==null){this.loadProjects(P);}else{this.openHelper(P,M.projectsPopup);}return true;}else{if(P.getAttribute("name")=="dossierLibrary"){mstrmojo.util.LibraryHelper.createTokenAndOpenLink(O.href);return true;}}}return false;},openHelper:function K(N,O){O.autoPosition=false;var M=N.getBoundingClientRect();if(!O.isOpen){O.offsetTop=M.top-M.bottom;O.offsetLeft=this.domNode.clientWidth-M.left;O.open();}},loadProjects:function J(O){var N=this;var M=N.parent;if(!mstrApp.projectsList){mstrApp.showWait();mstrApp.serverProxy.request({success:function(P){if(P){mstrApp.projectsList=P;M.projectsPopup=D.call(L,M,O);N.openHelper(O,M.projectsPopup);}},complete:function(){mstrApp.hideWait(true);}},{taskId:"getProjectsInfo",sort:true},false,{});}else{M.projectsPopup=D.call(L,M,O);N.openHelper(O,M.projectsPopup);}},items:mstrApp.pathInfo.sb,getItemMarkup:function(N){var M="{@cls}";if(N.name==="recentObjects"||N.name==="projects"){M="";}return'<a name="{@name}" class="item {@name} '+M+' {@newGroup}" idx="{@idx}" onclick="{@onclick}" href="#" target="{@target}"><span name="{@name}" class="icon"></span><span name="{@name}">{@n}</span></a>';},getItemProps:function H(O,M){var N=!!O.selected;return{sel:N,cls:N?"selected":"",newGroup:!!O.grp?"grp":"",n:O.n,idx:M,href:O.href,name:O.name,onclick:O.onclick||"return true",target:O.target||"_self"};}}]}));}mstrmojo.ui.pathbar.PathStarBurst=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.mstr._RecentObjectsHelper],{scriptClass:"mstrmojo.ui.pathbar.PathStarBurst",markupString:'<a id="mstrStarburst {@id}" mstrAttach:click,mouseover,mouseout class="mstrLink" style="top:0"><div id="mstrLogo" class="mstrLogo path"></div><div id="mstrLogoMenu" class="mstrLogoMenu path mstrPullArrow"></div></a>',markupSlots:{logoNode:function(){return this.domNode.children[0];},logoMenuNode:function(){return this.domNode.children[1];}},popup:null,postBuildRendering:function C(){A.call(this);this.domNode.setAttribute("href",mstrApp.name+"?evt=3010&src="+mstrApp.name+".3010");},onclick:function B(F){var G=function(){mstrmojo.dom.preventDefault(F.hWin,F.e);mstrmojo.dom.stopPropogation(F.hWin,F.e);};if(F.getTarget()===this.logoMenuNode){var H=this.popup;if(!H.isOpen){H.open();}G();}else{mstrmojo.form.sendLinkAsForm(F.src.domNode.href);G();return false;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.ui.pathbar.PathPopup","mstrmojo.dom","mstrmojo.css");function D(){var N=this,J=N.domNode,L=false;pos=mstrmojo.dom.position(N.targetNode),winDimension=mstrmojo.dom.windowDim();J.style.top=(pos.y+pos.h+N.offsetTop)+"px";var P=pos.x+pos.w,M=winDimension.w-P-J.offsetWidth;if(P+J.offsetWidth>winDimension.w){M=winDimension.w-pos.x;L=true;if(M+J.offsetWidth>winDimension.w){M=0;}}if(N.id==="mstrToolbarList"){if(L){M=M-pos.w*0.6;}else{M=M+pos.w+6;}}J.style.right=M+"px";N.set("visible",false);N.isOpen=true;N.set("visible",true);var O=parseInt(J.style.top,10);if(O+J.offsetHeight>winDimension.h){var K=O-J.offsetHeight+pos.h;J.style.top=(K>0?K:0)+"px";}mstrmojo.css.toggleClass(N.targetNode,"opened",true);}function B(){var J=this.popup,M=J.containerNode.childNodes[0].childNodes[0].childNodes[J.zoomChildIndex].lastChild,L=M.textContent||M.innerText,K=J.dc.view.zoomValue;L=L.substr(0,L.indexOf("("));M.innerHTML=L+"("+K.n+")";}function C(N){var O=N.selectedItem;if(O===null){return ;}var S=N.containerNode.firstChild.firstChild,J=N.dc.view.zoomValue,Q=O.getAttribute("dssid");if(Q===J.dssid){return ;}mstrmojo.css.removeClass(O,"selected");var M=S.childNodes,R=M.length,P=0,K=-1,L;for(P=0;P<R;P++){L=M[P];if(L.getAttribute("dssid")===J.dssid){K=P;break;}}if(K===-1){var T=N.children[0];T.addItems([J]);L=S.childNodes[T.items.length-1];}mstrmojo.css.addClass(L,"selected");N.selectedItem=L;}function F(J,Q,M){var L;Q.addDisposable(L=new mstrmojo.ui.pathbar.PathPopup({id:"mstrZoomPopup",cssClass:"mstrShortcutsListPopup",targetNode:M,dc:Q.dc,slectedIndex:-1,selectedItem:null,onOpen:function K(){D.call(this);},onClose:function P(){delete this.isOpen;mstrmojo.css.toggleClass(this.targetNode,"opened",false);this.domNode.style.top="-10000px";},children:[{scriptClass:"mstrmojo.ui.pathbar.List",alias:"menuItems",preclick:function N(){this.parent.close();},items:J,getItemMarkup:function(){return'<a class="item {@cls}" dssid="{@dssid}"><span class="icon"></span><span>{@name}</span></a>';},getItemProps:function O(V,S){var T=V.dssid===this.parent.dc.view.zoomValue.dssid,U="";if(T){this.parent.selectedIndex=S;U="selected";}return{cls:U,dssid:V.dssid,name:V.n};},onclick:function R(a){var Z=this.parent,U=mstrmojo.dom.findAncestorByAttr(a.getTarget(),"dssid",true,Z.domNode),Y=U.node,W=Y.getAttribute("dssid"),T=Z.targetNode.getAttribute("cmdid"),b=Z.dc,S=b.view.zoomValue,V=S.dssid;if(W!==V){b[T](W);var X=Z.targetNode.lastChild.textContent||Z.targetNode.lastChild.innerText;Z.targetNode.lastChild.innerHTML=X.replace(S.n,Y.lastChild.textContent||Y.lastChild.innerText);if(Z.selectedItem===null){Z.selectedItem=this.domNode.firstChild.childNodes[Z.selectedIndex];}mstrmojo.css.removeClass(Z.selectedItem,"selected");mstrmojo.css.addClass(Y,"selected");Z.selectedItem=Y;}}}]}));return L;}function E(J,P,L){var Q;P.addDisposable(Q=new mstrmojo.ui.pathbar.PathPopup({id:"mstrExportPopup",cssClass:"mstrShortcutsListPopup",targetNode:L,dc:P.dc,onOpen:function K(){D.call(this);},onClose:function O(){delete this.isOpen;mstrmojo.css.toggleClass(this.targetNode,"opened",false);this.domNode.style.top="-10000px";},children:[{scriptClass:"mstrmojo.ui.pathbar.List",alias:"menuItems",preclick:function M(){this.parent.close();},items:J,getItemMarkup:function(){return'<a class="item" dssid="{@dssid}"><span class="icon" style="display:none;"></span><span>{@name}</span></a>';},getItemProps:function N(S){return{cls:S.cssClass,dssid:S.dssid,name:S.n};},onclick:function R(T){var V=mstrmojo.dom.findAncestorByAttr(T.getTarget(),"dssid",true,this.parent.domNode),W=V.node,U=parseInt(W.getAttribute("dssid"),10),S=this.parent.dc;S.exportCmd(U);}}]}));return Q;}function G(){this.addDisposable(this.popup=new mstrmojo.ui.pathbar.PathPopup({id:"mstrToolbarList",cssClass:"mstrShortcutsListPopup",targetNode:this.domNode,offsetTop:0,zoomChildIndex:null,onOpen:function K(){D.call(this);},children:[{scriptClass:"mstrmojo.ui.pathbar.List",alias:"menuItems",items:mstrApp.pathInfo.tbModelData.n.items,getItemMarkup:function(){return'<a class="item {@cls}" cmdId="{@cmdid}" idx="{@idx}"><span class="icon" style="display:none;"></span><span>{@name}</span></a>';},getItemProps:function M(R,O){var Q=!!R.selected,S=R.cmdid,P=R.tooltip||R.title||S;if(S==="zoom"){P+=" ("+this.parent.dc.view.zoomValue.n+")";this.parent.zoomChildIndex=O;}return{sel:Q,idx:O,cls:S,n:S,cmdid:S,name:P};},closePopup:function J(O){if(O){O.close();}},onmouseover:function N(S){var R=mstrmojo.dom.findAncestorByAttr(S.getTarget(),"cmdid",true,document.getElementById("mstrToolbarList")),T=R&&R.value,Q=this.parent,P=Q.exportPopup,O=Q.zoomPopup;if(T==="export"){this.onclick(S,R);this.closePopup(O);}else{if(T==="zoom"){this.onclick(S,R);this.closePopup(P);}else{if(T){this.closePopup(P);this.closePopup(O);}}}return false;},onclick:function L(P,T){P.cancel();var R=T||mstrmojo.dom.findAncestorByAttr(P.getTarget(),"cmdid",true,document.getElementById("mstrToolbarList")),V=R.node,Y=V.getAttribute("idx"),Q=R&&R.value,X=this.parent,Z=X.dc,O=[],W=null;if(Q==="export"){if(!X.exportPopup){O=this.items[Y].items;X.exportPopup=E(O,X,V);}var U=X.exportPopup;U.autoPosition=false;W=V.getBoundingClientRect();if(!U.isOpen){U.offsetTop=-(W.height||V.offsetHeight);U.open();}}else{if(Q==="zoom"){if(!X.zoomPopup){O=this.items[Y].items;X.zoomPopup=F(O,X,V);}var S=X.zoomPopup;S.autoPosition=false;W=V.getBoundingClientRect();if(!S.isOpen){S.offsetTop=-(W.height||V.offsetHeight);if(S.hasRendered){C.call(this,S);}S.open();}}else{if(Z[Q]){Z[Q]();X.close();}}}}}]}));}mstrmojo.ui.pathbar.PathHamburger=mstrmojo.declare(mstrmojo.Widget,null,{userName:null,init:function I(J){this._super(J);},scriptClass:"mstrmojo.ui.pathbar.PathHamburger",markupString:'<div id="mstrHamburger" mstrAttach:click class="mstrHamburgerButton" style="top:0"><div class="mstrHamburger path"></div></div>',popup:null,postBuildRendering:function A(){G.call(this);},onclick:function H(){var J=this.popup;if(!J.dc){J.dc=this.parent.dc;}if(!J.isOpen){if(J.hasRendered){B.call(this);}J.open();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.pathbar.PathPopup","mstrmojo.dom","mstrmojo.ListBase","mstrmojo._IsList","mstrmojo.ui.pathbar._PreAppExit");var D=mstrmojo.dom;function C(){this.addDisposable(this.pickerMenu=new mstrmojo.ui.pathbar.PathPopup({id:"mojoPathPickerMenu",cssClass:"mojoPathPicker",offsetLeft:-23,children:[{scriptClass:"mstrmojo.ui.pathbar.List",alias:"menuItems",preclick:function F(){this.parent.close();},items:null,getItemMarkup:function(){return'<a href="#" idx="{@idx}"><span>{@en@n}</span></a>';},getItemProps:function G(I,H){return{n:I.n,idx:H,href:I.href};}}]}));}mstrmojo.ui.pathbar.PathNavigation=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList,mstrmojo.ui.pathbar._PreAppExit],{scriptClass:"mstrmojo.ui.pathbar.PathNavigation",icnCss:"pathNavigationRight",pickerMenu:null,init:function E(F){this._super(F);C.call(this);},onclick:function A(G){var H=this.pickerMenu;if(!this._super(G)){return false;}var K=G.target||D.eventTarget(G.hWin,G.e),I=D.findAncestorByAttr(K,"idx",true,this.domNode),F=I&&parseInt(I.value,10),J=this.items[F];if(J&&J.en&&J.items){if(H.targetNode!==I.node){H.set("targetNode",I.node);H.menuItems.set("items",J.items);}if(!H.isOpen){H.open();}}},getItemMarkup:function(F){if(F.items){return'<span class="tb{@n} mstrComboDown" idx="{@idx}"><a class="tb{@n}0 mstrIcon-tb {@en}" title="{@desc}" href="#"></a><span class="tb{@n}1 mstrPullArrow {@en}" title="{@desc}" menu="true"></span></span>';}if(F.visible===false){return"";}return'<a href="#" idx="{@idx}"><span title="{@desc}" class="tb{@n} mstrIcon-tb {@en}"></span></a>';},getItemProps:function B(G,F){return{n:G.n,idx:F,href:G.href,desc:G.desc,en:G.en?"":"disabled"};}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.ui.pathbar.PathPopup");function D(F){return(F!=="myPage");}function A(){this.addDisposable(this.popup=new mstrmojo.ui.pathbar.PathPopup({id:"mstrAccountSCList",cssClass:"mstrShortcutsListPopup mstrAccountSCListPopup",targetNode:this.domNode,offsetTop:0,children:[{scriptClass:"mstrmojo.ui.pathbar.List",alias:"menuItems",useRichTooltip:true,postclick:function H(){if(D(this.selectedItem.name)){this.parent.close();}},items:mstrApp.pathInfo.el,getTooltipText:function F(I){if(I&&I.name==="save"){return mstrmojo.desc("14684","Publish current layout as default layout for other users");}else{return null;}},getItemMarkup:function(){return'<a class="item {@name} {@cls} {@newGroup}" idx="{@idx}" onclick="{@onclick}" href="#" target="{@target}"><span class="icon"></span><span>{@n}</span></a>';},getItemProps:function G(K,I){var J=!!K.selected;return{sel:J,cls:J?"selected":"",newGroup:!!K.grp?"grp":"",n:K.n,idx:I,href:K.href,name:K.name,onclick:K.onclick||"return false;",target:K.target||"_self"};}}]}));}mstrmojo.ui.pathbar.PathExtraLinks=mstrmojo.declare(mstrmojo.Widget,null,{userName:null,init:function E(G){var H=this;this._super(G);var F=this.items;this.userName=F[0].user;mstrmojo.array.forEach(this.items,function(I){if(I.name==="save"){I.onclick="mstrmojo.all."+H.id+".raiseEvent({name:'saveDefaultCard'})";I.en=false;}if(I.name==="load"){I.onclick="mstrmojo.all."+H.id+".raiseEvent({name:'loadDefaultCard'})";I.en=false;}if(I.name==="myPage"){I.en=false;}});F.splice(0,1);},scriptClass:"mstrmojo.ui.pathbar.PathExtraLinks",markupString:'<div id="mstrPathAccount" mstrAttach:click class="mstrLink" style="cursor:pointer;"><span class="mstrAccountName" title="{@userName}">{@userName}</span><div id="mstrAccountMenu" class="mstrAccountMenu path"></div></div>',popup:null,postBuildRendering:function C(){A.call(this);},onclick:function B(){var F=this.popup;if(!F.isOpen){F.open();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.pathbar.PathPopup","mstrmojo.ListBase","mstrmojo._IsList","mstrmojo.dom","mstrmojo.css","mstrmojo.ui.pathbar._PreAppExit");function A(){this.addDisposable(this.breadCrumbs=new mstrmojo.ui.pathbar.PathPopup({id:"mojoPathBreadCrumbs",cssClass:"mojoPathPicker",offsetLeft:0,children:[{scriptClass:"mstrmojo.ui.pathbar.List",alias:"breadCrumbsItems",preclick:function I(){this.parent.close();},items:null,getItemMarkup:function(){return'<a href="#" idx="{@idx}"><span>{@en@n}</span></a>';},getItemProps:function J(L,K){return{n:mstrmojo.string.decodeHtmlString(L.n),idx:K,href:L.href};}}]}));}var D=mstrmojo.css,G=mstrmojo.dom;mstrmojo.ui.pathbar.PathAncestors=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList,mstrmojo.ui.pathbar._PreAppExit],{scriptClass:"mstrmojo.ui.pathbar.PathAncestors",markupString:'<div id="{@id}" class="mstrmojo-ListBase {@cssClass}" style="{@cssText}" mstrAttach:click,dblclick,mouseover,mouseout><div class="pathText"><div class="pathBreadCrumbs"><span class="pathBreadCrumbsParent"><a href="{@pathParentLink}">{@pathParentName}</a></span><span class="pathBreadCrumbsPullArrow"></span><span class="pathDelim">{@delimiter}</span></div><div class="pathAncestor hidden">{@itemsHtml}</div><div class="pathCurrent"><span>{@pathCurrent}</span></div></div></div>',markupSlots:{breadCrumbsNode:function(){return this.domNode.firstChild.children[0];},breadCrumbsParentNode:function(){return this.domNode.firstChild.children[0].firstChild;},breadCrumbsArrowNode:function(){return this.domNode.firstChild.children[0].children[1];},ancestorNode:function(){return this.domNode.firstChild.children[1];},currentNode:function(){return this.domNode.firstChild.lastChild;},itemsContainerNode:function(){return this.domNode.firstChild.children[1];}},markupMethods:{onwidthChange:function(){var K=this,I=K.ancestorNode,J=K.breadCrumbsNode;if(K.getNeededWidth()>K.getAvailWidth()){D.toggleClass(J,"hidden",false);D.toggleClass(I,"hidden",true);K.resizeBreadCrumbs();}else{K.resizePathBar();}}},delimiter:">",pathCurrent:null,pathFirst:null,pathParent:null,breadCrumbs:null,reversedItems:null,init:function H(J){this._super(J);var I=this.items;this.pathCurrent=I[I.length-1].n;this.pathFirstLink=I[0].href;this.pathFirstName=I[0].n;if(I.length>1){this.pathParentLink=I[I.length-2].en!=true?"#":I[I.length-2].href;this.pathParentName=I[I.length-2].n;}I.splice(I.length-1,1);this.reversedItems=[].concat(I).reverse();A.call(this);},resizePathBar:function(){var P=this,M=P.ancestorNode,I=P.currentNode,K=P.breadCrumbsNode,R=M.style,J=I.style,Q=G.position(P.domNode).w-23-20,O,N,L;O=Math.min(Q/2,G.position(I).w);N=Q-O;L=N>M.scrollWidth?N-M.scrollWidth:0;N-=L;R.maxWidth=Math.max(0,N)+"px";J.maxWidth=Math.max(0,Q-N)+"px";},resizeBreadCrumbs:function(){var N=this,I=N.currentNode,O=N.breadCrumbsParentNode,J=I.style,L=O.style,P=G.position(N.domNode).w-60,M,Q,K;L.maxWidth=Math.max(0,P)+"px";J.maxWidth=Math.max(0,P)+"px";M=Math.min(P/2,G.position(I,true).w);Q=P-M;K=Q>O.scrollWidth?Q-O.scrollWidth:0;Q-=K;L.maxWidth=Math.max(0,Q)+"px";J.maxWidth=Math.max(0,P-Q)+"px";},onclick:function C(I){var J=this.breadCrumbs;if(!this._super(I)){return false;}var K=I.getTarget();if(K==this.breadCrumbsArrowNode){J.set("targetNode",this.breadCrumbsNode);J.breadCrumbsItems.set("items",this.reversedItems.slice(1));if(!J.isOpen){J.open();}}},getItemMarkup:function(){return'<span idx="{@idx}"><a href="#">{@n}</a></span><span class="pathDelim">{@dl}</span>';},getItemProps:function E(J,I){return{n:J.n,href:J.href,dl:this.delimiter,idx:I};},getNeededWidth:function B(){var L=this.breadCrumbsNode,I=this.ancestorNode,K=this.currentNode,J=this.breadCrumbs;D.toggleClass(L,"hidden",true);D.toggleClass(I,"hidden",false);if(J.isOpen){J.close();}return I.scrollWidth+K.scrollWidth+30;},getAvailWidth:function F(){var I=this;return G.position(I.domNode).w-23-20;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.Container","mstrmojo.Box","mstrmojo.List","mstrmojo.SearchBox2","mstrmojo.WaitIcon","mstrmojo.IncFetch");var A=mstrmojo.array,B=mstrmojo.hash;mstrmojo.ElementsBrowser=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.ElementsBrowser",cssClass:"mstrmojo-ElementBrowser",rootCached:null,attributeID:null,onOK:null,onUpdateBrowseElementsParams:mstrmojo.emptyFn,init:function(C){this._super(C);this.rootCached={};},postBuildRendering:function(){if(this._super){this._super();}var E=this.ebIncFetch,C=this.ebSearchBox,D=this.ebList;E.attachEventListener("fetch",C.id,function(F){E.cp=F.v;E.children=null;E.refresh();this.fetchPage(F.v-1);});C.attachEventListener("ifsChange",E.id,function(F){var G=this.np;B.copy(F.value,this);if(this.np>1){this.children=null;this.refresh();}if(G<=1&&this.np>1||G>1&&this.np<=1||G===0&&this.np>0){this.set("visible",this.np>1);}});C.attachEventListener("itemsChange",D.id,function(F){this.set("items",F.value||[]);});},initBrowser:function(){var C=this.ebSearchBox,D=this.attributeID;C.set("rootID",D);C.clear();C.searchPattern="";if(D&&!this.rootCached[D]){C.set("items",[]);C.blockBegin=1;C.fetch();this.rootCached[D]=true;}else{if(D){C._notifyContentWidget(C.searchCache[D][D]);this.ebList.updateSelections();}}},children:[{alias:"ebSearchBox",scriptClass:"mstrmojo.SearchBox2",cssClass:"mstrmojo-ElementsBrowser-SearchBox",taskId:"browseElements",quickSearch:true,getRootID:function(){this.rootID=this.parent.attributeID;},onUpdateSearchParams:function(C){this.parent.onUpdateBrowseElementsParams(C);}},{alias:"ebList",scriptClass:"mstrmojo.List",cssClass:"mstrmojo-ELementsBrowser-List",itemIdField:"v",allowUnlistedValues:false,itemMarkup:'<div class="mstrmojo-bullet"><div class="mstrmojo-ebIcons ae"><div class="mstrmojo-text">{@en@n}</div></div></div>',updateSelections:function(){var C=this.parent,D=C.selectedItems;if(D){this.initializing=true;this.clearSelect(false);this.setSelectedItems(D,false);this.initializing=false;}},onitemsChange:function(){this.updateSelections();},onchange:function(N){if(this.initializing){return ;}var I=this.items,J=this.parent,D=J.selectedItems,G,M;for(var H=0,C=N.removed,L=C&&C.length;H<L;H++){G=I[C[H]];M=A.find(D,this.itemIdField,G[this.itemIdField]);if(M>-1){D.splice(M,1);}}for(var F=0,K=N.added,E=K&&K.length;F<E;F++){G=B.clone(I[K[F]]);D.push(G);}},multiSelect:true,selectionPolicy:"toggle"},{alias:"ebIncFetch",scriptClass:"mstrmojo.IncFetch",cssClass:"mstrmojo-ElementsBrowser-IncFetch",height:"20px",np:0,cp:0,ds:{f:mstrmojo.desc(4046,"First"),p:mstrmojo.desc(1058,"Previous"),n:mstrmojo.desc(1059,"Next"),l:mstrmojo.desc(4049,"Last"),pgs:mstrmojo.desc(5972,"## of ### pages"),gt:mstrmojo.desc(5878,"Go to:"),v:mstrmojo.desc(6079,"This field should be # between ## and ###.")},onvisibleChange:function(C){this.domNode.style.display=C.value?"block":"none";}}]});})();(function(){mstrmojo.requiresCls("mstrmojo.ui.ScrollableList","mstrmojo._IsPopup","mstrmojo._CanAutoClose","mstrmojo.ui._HasListTooltip");mstrmojo.ui.PopupList=mstrmojo.declare(mstrmojo.ui.ScrollableList,[mstrmojo._IsPopup,mstrmojo._CanAutoClose,mstrmojo.ui._HasListTooltip],{scriptClass:"mstrmojo.ui.PopupList",autoCloses:true,locksHover:true,closeOnClick:true,scrollNodeMaxHeight:undefined,parentDomNode:undefined,keydownString:null,lastKeydownTime:null,keydownInterval:500,closeAfterSelection:true,markupString:'<div id="{@id}" class="mstrmojo-PopupList {@cssClass}" style="{@cssText}" tabIndex="-1" mstrAttach:click,dblclick,mouseover,mouseout,contextmenu,keydown><div class="mstrmojo-popupList-scrollBar"><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{itemsContainerNode:function I(){return this.domNode.firstChild.firstChild;},scrollboxNode:function A(){return this.domNode.firstChild;}},setupScrollNodes:function F(){this.scrollNode=this.scrollboxNode;},onOpen:function E(){this._super();this.updateScrollbars();var M=this;setTimeout(function(){M.scrollToSelectedItem();},10);},onclick:function K(M){this.closeAfterSelection=true;this._super(M);},postBuildRendering:function B(){var N=this._super();if(!this.parent){var M=this.parentDomNode=this.parentDomNode||document.body;M.appendChild(this.domNode);}return N;},closePopup:function J(){this.set("visible",false);},onkeydown:function H(O){if(!this.opener||!this.opener.focusOnPopup){return ;}var M=O.hWin,R=O.e||M.event,T=this.keydownString;this.locksHover=false;this.closeAfterSelection=false;if(R.keyCode===mstrmojo.Enum_Keys.DOWN_ARROW){if(this.selectedIndex<this.items.length-1){this.set("selectedIndex",this.selectedIndex+1);this.scrollToSelectedItem();}}else{if(R.keyCode===mstrmojo.Enum_Keys.UP_ARROW){if(this.selectedIndex>0){this.set("selectedIndex",this.selectedIndex-1);this.scrollToSelectedItem();}}else{if(R.keyCode===mstrmojo.Enum_Keys.ENTER||R.keyCode===mstrmojo.Enum_Keys.ESCAPE){this.closeAfterSelection=true;this.singleSelect(this.selectedIndex);}else{var S=new Date(),P=S.getTime(),N=String.fromCharCode(R.keyCode).toLowerCase(),Q=this;if(this.lastKeydownTime===null){this.keydownString=N;}else{if(P-this.lastKeydownTime<this.keydownInterval){this.keydownString=this.keydownString+N;}else{this.keydownString=N;}}T=this.keydownString;if(this._holdTimer){clearTimeout(this._holdTimer);}this._holdTimer=setTimeout(function(){Q.changeSelectedItem(O);Q.adjustPosition();},Q.keydownInterval);this.lastKeydownTime=P;}}}},changeSelectedItem:function D(M){var P=this.selectedIndex,O=this.items&&this.items.length;if(O>0){var N;for(N=this.selectedIndex+1;N<this.items.length;N++){if(this.items[N].n.toLowerCase().indexOf(this.keydownString)==0){P=N;break;}}if(P===this.selectedIndex){for(N=0;N<this.selectedIndex;N++){if(this.items[N].n.toLowerCase().indexOf(this.keydownString)==0){P=N;break;}}}if(P!==this.selectedIndex){this.set("selectedIndex",P);}}},focus:function L(){this.domNode.focus();},scrollToSelectedItem:function G(){var P=this.itemsContainerNode.childNodes[this.selectedIndex];if(P){var M=this.scrollNode,O=M.clientHeight,N=P.offsetTop;if(N-M.scrollTop+P.offsetHeight>O){M.scrollTop=P.offsetTop+P.offsetHeight-O;}else{if(N<M.scrollTop){M.scrollTop-=P.offsetHeight;}}}},adjustPosition:function C(){this.adjustCornersForPopupOverflow();this.scrollToSelectedItem();this.focus();}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList","mstrmojo._CanAutoClose","mstrmojo._IsPopup","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.ui.menus._IsMenuPopup","mstrmojo.ui.PopupConfig","mstrmojo.ui._HasScroller","mstrmojo.ui._HasUITheme","mstrmojo.dom","mstrmojo.css","mstrmojo.ui._HasListTooltip");var E=mstrmojo.dom,H=mstrmojo.css,F=mstrmojo.ui.PopupConfig.directionCfg;var C={};var B=false;function O(V,W){if(V.pop){if(W&&V.ax){window.clearTimeout(this._popupAxTimeout);V.actionFn();this.closeAllMenus();}else{var T=V.fn.call(mstrmojo.all[V.scope],V.ctxt);var U=T.ENUM_CORNERS,S=T.maxHeight,R=E.getMaxScrollHeight();T.setAlignment(U.TOP_RIGHT,U.TOP_LEFT);T.hostId=this.id;T.hostElement=this._getItemNode(V._renderIdx);T.includeScroll=this.includeScroll;T.supportsScroll=true;T.alignWithAnchor=true;T.isHostedWithin=false;T.maxHeight=S?Math.min(R,S):R;this.openPopup(T.newInstance());}}else{if(V.dsbld!==true){if(V.fn(V,this)!==false){this.closeAllMenus();}}}}mstrmojo.ui.menus.Menu=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList,mstrmojo.ui.menus._HasMenuPopup,mstrmojo._IsPopup,mstrmojo.ui.menus._IsMenuPopup,mstrmojo._CanAutoClose,mstrmojo.ui._HasListTooltip,mstrmojo.ui._HasScroller,mstrmojo.ui._HasUITheme],{scriptClass:"mstrmojo.ui.menus.Menu",selectionPolicy:"reselect",locksHover:true,closeOnClick:true,themeClassName:"mojo-theme-dark",icnCss:"mstrmojo-ui-Menu-item-container",popupConfig:null,tooltipCss:{leftCssClass:"menuTooltip",rightCssClass:"menuTooltip"},setupScrollNodes:function(){if(this.popupConfig&&this.popupConfig.supportsScroll){this.scrollNode=this.itemsContainerNode;this.scrollbarHostNode=this.domNode;}},updateScrollbars:function(){this._super();if(this.popupConfig&&this.popupConfig.supportsScroll&&this.hasCustomScrollbar){var S=this.scrollNode;if(!S){return ;}var R=E.getComputedScrollbarWidth(S);S.style.marginRight=-R+"px";S.style.paddingRight=0;}},onscroll:function(){this.closePopup();this._super();},init:function P(T){this._super(T);if(!!mstrApp.isWSStyling){this.themeClassName="mojo-theme-light";}if(T.themeClassName){this.themeClassName=T.themeClassName;}var R=this.popupConfig;this.items=R.getMenuItems();var S=["mstrmojo-ui-Menu","unselectable"],U=R.menuCssClass;if(U){S.push(U);}if(R.hasToggleItem){S.push("hasToggleItem");}H.addWidgetCssClass(this,S);if(R&&R.supportsScroll&&R.maxHeight>0){this.icnCssText=(this.icnCssText||"")+";max-height:"+R.maxHeight+"px";}this.useRichTooltip=!!R.useTooltip;this.tstid=R.tstid;},markupMethods:{onvisibleChange:function M(){var R=this.visible;if(!B||R){H.toggleClass(this.domNode,"visible",R);}}},getItemMarkup:function L(W,S){if(W.getItemMarkup){return W.getItemMarkup.apply(this,[W,S]);}var U=!!W.pop,V=U?"submenu":"item",T=C[V],R='<div class="micn"></div>';if(!T){R+=!!mstrApp.isWSStyling?'<div class="mtxt">{@en@n}</div>':"{@en@n}";if(U){R+='<div class="arw"></div>';}T=this._super(W,S).replace("{@en@n}",R);C[V]=T;}if(W.tstid){T=T.replace("{@tag}","{@tag} "+mstrmojo.tstid(W)+" ");}return T;},getItemProps:function J(T,R){var S=this._super(T,R);S.tag="a";S.addCls("mstrmojo-ui-Menu-item");S.addCls(T.cls);return S;},onmouseover:function Q(X){var V=X.config&&X.config.targetHostElement?X.config.targetHostElement:X.getTarget(),Z=this.getItemFromTarget(V),W=this,S=W._lastOpened,R=S&&this.getItemFromTarget(S.popupConfig.hostElement)._renderIdx,T=this.getItemNodeFromTarget(V),U=(R!==undefined&&E.contains(this._getItemNode(R),V,true,this.domNode));if(Z){this._lastHoverIx=Z._renderIdx;window.clearTimeout(this._popupTimeOut);window.clearTimeout(this._popupAxTimeout);if(this._lastHoverIx!==R&&!U){this._popupTimeOut=window.setTimeout(function(){if(W._lastOpened&&W._lastOpened.visible){W.closePopup();}if(W.visible&&Z.pop){if(Z.ax){W._popupAxTimeout=window.setTimeout(function(){H.removeClass(T,"hlt-ax");O.call(W,Z);},0);}else{O.call(W,Z);}}},400);if(Z.pop&&Z.ax){H.addClass(T,"hlt-ax");}}}var Y=this.popupConfig;if(Y&&!Y.isHostedWithin&&this.opener){this.opener.raiseEvent(mstrmojo._HasMarkup.newDomEvent(X.name,X.hWin,X.e,{targetHostElement:Y.hostElement}));}},onclick:function N(R){this._evtTarget=R.getTarget();this._super(R);R.cancel();},postselectionChange:function D(R){var S=R.added;if(S){var T=this.items[S[0]];O.call(this,T,!(T.ax&&this._evtTarget.className==="arw"));delete this._evtTarget;}},oncontextmenu:function G(R){E.preventDefault(window,R.e);return false;},postBuildRendering:function A(R){this._super(R);if(this.popupConfig.supportsScroll){var S=this;window.setTimeout(function(){S.updateScrollbars();},10);}},showTooltip:function K(V,U){var T=E.eventTarget(U,V),S=this.getItemNodeFromTarget(T),R=this.getItemFromTarget(T);this.itemDisabled=R&&R.dsbld;if(S&&((R&&R.ttp)||(S.scrollWidth>S.clientWidth)||(T.scrollWidth>T.clientWidth))){this._super(V,U);}},onCloseMenuCallBack:null,onClose:function I(R){if(this._super){this._super(R);}this.closePopup();if(this.onCloseMenuCallBack){this.onCloseMenuCallBack();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.TextBox","mstrmojo._CanValidate","mstrmojo.css","mstrmojo.validation","mstrmojo.vi.ui.rw.selectors._HasWarningMessage");var H=mstrmojo.css,E=mstrmojo.validation,G=E.TRIGGER,J=E.STATUSCODE;function F(L){if((this.constraints.trigger&L)>0){this.validate();}}mstrmojo.ValidationTextBox=mstrmojo.declare(mstrmojo.TextBox,[mstrmojo._CanValidate,mstrmojo.vi.ui.rw.selectors._HasWarningMessage],{scriptClass:"mstrmojo.ValidationTextBox",validationDelay:500,getInvalidMsg:function K(L){return(L&&L.msg?L.msg:"");},postBuildRendering:function A(){this._super();this._original_tooltip=this.inputNode.title;},prekeyup:function I(L){this._super(L);var P=(this.constraints.trigger&G.ONKEYUP)>0;if(P){var M=this.validationDelay;if(M){this.clearValDelayTimer();var O=this._validateHandler;if(!O){var N=this;this._validateHandler=O=function(){N.validate();if(N._valDelayTimer){window.clearTimeout(N._valDelayTimer);delete N._valDelayTimer;}};}this._valDelayTimer=window.setTimeout(O,M);}else{this.validate();}}},preinput:function D(L){this._super(L);F.call(this,G.ONKEYUP);},preblur:function B(L){this._super(L);F.call(this,G.ONBLUR);},clearValidation:function C(){this._super();var L=this.inputNode;H.removeClass(L,this.constraints.invalidCssClass||"mstrmojo-TextBox-ErrValidation");L.title=this._original_tooltip;},clearValDelayTimer:function(){var L=this._valDelayTimer;if(L){window.clearTimeout(L);}}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.ValidationTextBox,{onvalidationStatusChange:function(){var P=this.validationStatus;if(!P){return ;}var N=this.inputNode,L=(P.code>J.VALID),M=this.constraints.invalidCssClass;H.toggleClass(N,M||"mstrmojo-TextBox-ErrValidation",L);var O=L?this.getInvalidMsg(P):this._original_tooltip;if(!this.useRichTooltip&&O!==undefined&&O!==null){N.setAttribute("title",O);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.ui.menus.MenuPopup");mstrmojo.ui.menus.PopupConfig=mstrmojo.declare(mstrmojo.ui.PopupConfig,null,{scriptClass:"mstrmojo.ui.menus.PopupConfig",cssClass:"",hasToggleItem:false,contents:null,clear:function A(){this._super();this.contents=null;},close:function C(){([].concat(this.contents)[0]).parent.closeAllMenus();},newInstance:function B(){return new mstrmojo.ui.menus.MenuPopup({popupConfig:this});}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.menus.MenuPopup","mstrmojo.Button","mstrmojo.dom","mstrmojo.ui._HasScroller");mstrmojo.requiresDescs(1442,2140);var D=mstrmojo.dom,E=mstrmojo.array;function G(L,N){var K=2140,P="Cancel",O="this.parent.popupConfig."+(L?"ok":"cancel"),M=N&&N[(L?"ok":"cancel")+"BtnText"];if(L){K=1442;P="Ok";}return mstrmojo.Button.newWebButton(M||mstrmojo.desc(K,P),function(R){var S=this.parent,Q=S.popupConfig;S.closeAllMenus();Q["fn"+P](Q.data,S);D.stopPropogation(R.hWin,R.e);},L,{slot:"btnNode",bindings:{enabled:O+"Enabled",visible:O+"Visible"},cssDisplay:"inline-block"});}mstrmojo.ui.menus.MenuEditor=mstrmojo.declare(mstrmojo.ui.menus.MenuPopup,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.menus.MenuEditor",markupString:'<div id="{@id}" class="mstrmojo-ui-MenuEditor {@cssClass}" style="{@cssText}" mstrAttach:mouseover,mouseout,click><div class="scroll-container" style="{@scCssText}"><div class="me-content"></div><div class="me-buttons"></div><div class="me-bottom"></div></div></div>',markupSlots:{containerNode:function C(){return this.domNode.firstChild.firstChild;},btnNode:function H(){return this.domNode.firstChild.children[1];},bottomNode:function H(){return this.domNode.firstChild.children[2];},scrollNode:function(){return this.domNode.firstChild;},scrollbarHostNode:function(){return this.domNode;}},popupConfig:null,postBuildRendering:function A(K){this._super(K);if(this.popupConfig&&this.popupConfig.supportsScroll){var L=this;window.setTimeout(function(){L.updateScrollbars();},10);}},onmouseover:function J(L){var K=this.popupConfig;if(K&&!K.isHostedWithin&&this.opener){this.opener.raiseEvent(mstrmojo._HasMarkup.newDomEvent(L.name,L.hWin,L.e,{targetHostElement:K.hostElement}));}},updateScrollbars:function(){this._super();if(this.popupConfig&&this.popupConfig.supportsScroll){var L=this.scrollNode;if(!L){return ;}var K=D.getComputedScrollbarWidth(L);L.style.marginRight=-K+"px";L.style.paddingRight=0;}},monitorWindow:function F(){var L=document.activeElement,K=null;if(L!==null&&L.id!==""){K=this.domNode.querySelector("#"+L.id)?L:null;}this._super();if(K){K.focus();}},init:function I(M){this._super(M);var L=this.popupConfig,K=L.bottomNode;if(L&&L.supportsScroll&&L.maxHeight>0){if(L.cssClass.indexOf("RoleMenu")>-1){L.maxHeight=360;}this.cssText=(this.cssText||"")+";max-height:"+L.maxHeight+"px";this.scCssText=(this.scCssText||"")+";max-height:"+L.maxHeight+"px";}if(!!mstrApp.isWSStyling){this.themeClassName="mojo-theme-light";}this.data=L.data||{};if(L.onOpen){this.onOpen=L.onOpen;}this.addChildren([G(true,L),G(false)]);if(K){K.slot="bottomNode";this.addChildren(K);}},onOpen:function B(){E.forEach(this.children,function(K){if(K.scriptClass==="mstrmojo.ui.ScrollableContainer"&&K.onOpen){K.onOpen();}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.fx","mstrmojo.Dialog","mstrmojo.Label","mstrmojo._IsPopup","mstrmojo._HasPopup","mstrmojo._IsMovable","mstrmojo.ui._HasUITheme","mstrmojo.Button","mstrmojo.dom","mstrmojo.hash","mstrmojo.array","mstrmojo.tooltip","mstrmojo.ui.editors.ErrorDialogContent");var j=mstrmojo.func.composite,M=mstrmojo.dom,Z=mstrmojo.Button.newWebButton,C=mstrmojo.css,Y=mstrmojo.all,N=mstrmojo.hash,b=mstrmojo.DI.DIHelpers,W=mstrmojo.array;function V(q){if(!this.modal){return ;}var r=window.mstrApp;if(r&&r.modalEditorChange){r.modalEditorChange(this.id,q);}}mstrmojo.Editor=mstrmojo.declare(mstrmojo.Dialog,[mstrmojo._IsPopup,mstrmojo._HasPopup,mstrmojo._IsMovable,mstrmojo.ui._HasUITheme],{scriptClass:"mstrmojo.Editor",title:"",allowHTMLTitle:false,help:"",autoClose:false,showTitle:true,openEffect:null,themeClassName:"mojo-theme-light",useRichTooltip:true,closeEffect:null,onEditorResized:null,markupString:'<div id="{@id}" class="mstrmojo-Editor-wrapper"><div class="mstrmojo-Editor {@cssClass}" style="z-index:{@zIndex};{@cssText}" mstrAttach:mouseup,mousedown,click,contextmenu>{@titlebarHTML}<div class="mstrmojo-Editor-content"></div><div class="mstrmojo-Editor-buttons"></div></div><div class="mstrmojo-Editor-curtain"></div></div>',titleMarkupString:'<div class="mstrmojo-Editor-title-container"><div class="mstrmojo-Editor-title"></div><div class="edt-title-btn mstrmojo-Editor-help" tooltip="'+mstrmojo.desc(1143,"help")+'"></div><div class="edt-title-btn mstrmojo-Editor-close" tooltip="'+mstrmojo.desc(2102,"Close")+'"></div></div><div class="mstrmojo-Editor-titleSpacer"></div>',markupSlots:{editorNode:function X(){return this.domNode.firstChild;},titleContainerNode:function k(){return this.domNode.firstChild.firstChild;},titlebarNode:function m(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild:null;},titleNode:function R(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild:null;},helpNode:function n(){return this.showTitle?this.domNode.firstChild.firstChild.children[1]:null;},closeNode:function E(){return this.showTitle?this.domNode.firstChild.firstChild.lastChild:null;},containerNode:function S(){return this.domNode.firstChild.childNodes[2];},buttonNode:function I(){return this.domNode.firstChild.childNodes[3];},curtainNode:function o(){return this.domNode.lastChild;}},markupMethods:{ontitleChange:function(){if(this.showTitle){this.titleNode.innerHTML=this.allowHTMLTitle?this.title:mstrmojo.string.encodeHtmlString(this.title);}},onzIndexChange:function(){var q=this.zIndex;this.editorNode.style.zIndex=q;this.curtainNode.style.zIndex=q-1;},onvisibleChange:function(u){if(u){return ;}var t=this.visible,r="closeEffect",q="none";if(t){r="openEffect";q="block";}if(this[r]){this.playEffect(r);}else{this.editorNode.style.display=q;if(this.modal){this.curtainNode.style.display=q;}}},onhelpChange:function e(){if(this.showTitle){var r=this.help,q=this.helpNode;if(!r){q.style.display="none";}else{q.style.display="block";}}},onleftChange:function F(){this.editorNode.style.left=this.left||"";},ontopChange:function H(){this.editorNode.style.top=this.top||"";}},open:function Q(r,q){this._super(r,q);V.call(this,true);},close:function g(q){this._super(q);V.call(this,false);},unrender:function B(q){this._super(q);V.call(this,false);},destroy:function h(q){this._super(q);V.call(this,false);},preBuildRendering:function A(){if(!this.slot&&!this.placeholder){this.placeholder=document.body.appendChild(document.createElement("div"));this._curtain_to_body=true;V.call(this,true);}this.titlebarHTML=(this.showTitle)?this.titleMarkupString:"<div></div><div></div>";return this._super();},getMovingHandle:function l(){return this.titlebarNode;},getMovingTarget:function U(){return this.editorNode;},onPreClose:function G(){this.hideTooltip();return true;},premousedown:function P(q){var r=q.getTarget();if(r===this.closeNode||r===this.helpNode){C.toggleClass(r,"active",true);}},premouseup:function O(q){var r=q.getTarget();if(r===this.closeNode||r===this.helpNode){C.toggleClass(r,"active",false);}if(q.getTarget()===this.closeNode&&this.onPreClose()){this.close();}},onclick:function d(q){if(q.getTarget()===this.helpNode){if(mstrApp.showHelpTopic){mstrApp.showHelpTopic(this.help);}else{window.open(mstrmojo.helpPath()+(this.help||""),"_blank");return false;}}},_set_visible:function c(x,t){var r=(this[x]!==t);if(r){this[x]=t;var w=this._close_handler;if(t){if(this._curtain_to_body){this.resizeDialog();this.positionDialog();}if(this.autoClose){var u=this;w=this._close_handler=w||function(v){var y=M.eventTarget(self,v);if(y&&y.parentNode&&!M.contains(u.editorNode,y,true,document.body)){u.close();}};M.attachEvent(document.body,"mousedown",w);}}else{var q=this._curtain_handler;if(q){M.detachEvent(window,"resize",q);}if(w){M.detachEvent(document.body,"mousedown",w);}}}return r;},showTooltip:function p(x,w){var v=this,r=M.findAncestorByAttr(M.eventTarget(w,x),"tooltip",true,this.domNode),u=r&&r.value;if(!v.hasOpenTooltip&&u){var q=M.position(r.node);v.richTooltip={cssClass:"vi-regular A-center vi-tooltip-A",content:u,top:Math.max(q.y+40,0),left:Math.max(q.x+4,0),posType:mstrmojo.tooltip.POS_TOPCENTER};this._super(x,w);}}});mstrmojo.Editor.openEffect_fadeIn={scriptClass:"mstrmojo.fx.AnimateProp",slot:"curtainNode",props:{backgroundColor:{start:255,stop:0,fn:function(q){q=Math.round(q);return["rgb(",q,",",q,",",q,")"].join("");}}},preStart:function(){var r=this.target,q=this.widget;q.editorNode.style.display="block";if(!q.modal){return false;}r.style.display="block";C.setOpacity(r,60);return true;}};mstrmojo.Editor.closeEffect_fadeOut={scriptClass:"mstrmojo.fx.FadeOut",slot:"curtainNode",start:0.6,stop:0,preStart:function(){var q=this.widget;q.editorNode.style.display="none";return !!q.modal;}};function D(q){return function(){Y[q].destroy();};}function J(r,z,AA,AB){var q=z.id||"mojoAlertx9",w,y=z.buttons;W.forEach(y,function(AD){var AC=AD.onclick;AD.onclick=function(AE){var AF=Y[q];if(AC&&AC.call(AD,AE)===false){return ;}AF.destroy();AF=null;};});try{!!Y[q]&&Y[q].destroy();}catch(x){}var t=z.cssClass,u=[];if(t){u.push(t);delete z.cssClass;}if(AB){u.push(AB);}u.push("mstrmojo-alert");w={scriptClass:"mstrmojo.Editor",id:q,width:"475px",zIndex:1000,title:AA||mstrmojo.desc(11812,"Notification"),cssClass:u.join(" "),children:[{scriptClass:"mstrmojo.Box",cssClass:"alert-content",children:[{scriptClass:"mstrmojo.Label",text:r,allowHTML:z.allowHTML}]}],visible:true};var v=new mstrmojo.Editor(N.copy(z,w));v.render();return v;}if(window.mstrConfig&&!window.mstrConfig.simpleDialog){mstrmojo.notify=function L(r,y,t){t=t||{};var z=t.forceClose,x=t.callback||mstrmojo.emptyFn,w=N.copy(y||{},{buttons:z?[mstrmojo.Button.newActionButton((t.buttonText||mstrmojo.desc(8607,"Dismiss")),x)]:null,showTitle:false,modal:false,top:"42px"}),u=t.duration||6000;var v=J(r,w,"",z?"ed-notify":"ed-toast"),q=v.id;if(!z){window.setTimeout(j([x,D(q)]),u);}else{window.setTimeout(function(){if(Y[q]){Y[q].editorNode.style.opacity=0.75;}},6000);}return v;};mstrmojo.confirm=function f(q,x,z){x=x||{};var t=x.confirmBtn||{},w=x.cancelBtn||{},y=t.hot!==false,r=!!w.hot,v=z&&z.title,u=[Z(t.t||mstrmojo.desc(219,"Yes"),t.fn,y,t.cfg),Z(w.t||mstrmojo.desc(218,"No"),w.fn,r,w.cfg)];return J(q,N.copy(z||{},{buttons:u,onPreClose:function(){if(w&&w.fn){w.fn();}return true;}}),v,b.getEnvObj().isStandaloneDataSet()?["error-dialogue-in-dataset"]:[]);};mstrmojo.warn=function K(t,q,r){r=r||{};r.cssClass=(r.cssClass||"")+" mstrmojo-warning";return mstrmojo.confirm(t,q,r);};mstrmojo.alert=function a(w,t,v,x,q,u){var r={title:v||mstrmojo.desc(12405,"Alert"),zIndex:x,cssClass:q,buttons:[Z(mstrmojo.desc(1442,"OK"),t,true)],onPreClose:function(){if(t){t();}return true;}};N.forEach(r,function(z,y){if(!z){delete r[y];}});return J(w,N.copy(u,r),v,b.getEnvObj().isStandaloneDataSet()?["error-dialogue-in-dataset"]:[]);};mstrmojo.error=function T(w,r,v){var t=w||{};var u=mstrmojo.desc(96,"Error");var q=!(b.getEnvObj().isInDI()||b.getEnvObj().isInQB());if(v){u=(v.title)?v.title:mstrmojo.desc(96,"Error");v.title=u;if(v.enableContactStr===false){q=false;}}J("",N.copy(v||{},{buttons:[Z(mstrmojo.desc(1442,"OK"),r,true)],children:[{scriptClass:"mstrmojo.ui.editors.ErrorDialogContent",shortDesc:t.shortDesc,longDesc:t.longDesc,showToggle:!!(t.longDesc),enableContactStr:q,allowHTML:!!(v&&v.allowHTML===true)}]}),u,b.getEnvObj().isStandaloneDataSet()?["error-dialogue-in-dataset"]:[]);};}mstrmojo.Editor.ButtonConfigType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash","mstrmojo.Box","mstrmojo.array","mstrmojo._HasLayout","mstrmojo.ui.ColumnContainer");var E=mstrmojo.dom,G=mstrmojo.hash,C=mstrmojo.array;mstrmojo.ui.ColumnWalk=mstrmojo.declare(mstrmojo.Box,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.ColumnWalk",markupString:'<div id="{@id}" class="mstrmojo-ui-ColumnWalk cf {@cssClass}" mstrAttach:click></div>',layoutConfig:{h:{containerNode:"100%"},xt:true},currentColumn:-1,addNextColumn:function B(K){var J=this.children||[],L=J.length,I=J[L-1];var M=this.addChildren([G.copy(K,{scriptClass:"mstrmojo.ui.ColumnContainer",idx:L})])[0];if(I){I.set("next",M);}},onclick:function A(I){var K=I.getTarget();if(K){var J=this.children;C.forEach(J,function(M,L){if(E.contains(M.domNode,K,true,M.domNode)){this.set("currentColumn",L);}},this);}},oncurrentColumnChange:function D(I){var K=this.children,M=K[I.valueWas],J=K[this.currentColumn],L="active";if(M){M.set(L,false);}J.set(L,true);},removeTrailingContainer:function H(K){var J=this,I=this.children;if(!I||K>=I.length-1){return ;}C.forEach(I.slice(K+1),function(L){J.removeAndDestroyChild(L);});if(K>=0){I[K].set("next",null);}},insertAndRemoveTrailing:function F(J,I){this.removeTrailingContainer(J);this.addNextColumn(I);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Arr","mstrmojo.Button","mstrmojo.HBox","mstrmojo.FishEye");var A=function(B){return mstrmojo.hash.copy(B,{scriptClass:"mstrmojo.Button",text:"",enabled:false,dir:"left",cssClass:"mstrmojo-icon left",onclick:function(){var D=this.parent.fishEyeList,C=D&&D.scroll(this.dir,D.step);}});};mstrmojo.FishEyeContainer=mstrmojo.declare(mstrmojo.HBox,null,{scriptClass:"mstrmojo.FishEyeContainer",cssClass:"mstrmojo-FishEyeContainer",selectedIndex:-1,setItems:function(B){this.fishEyeList.set("items",B);},setSelectedIndex:function(B){this.fishEyeList.set("selectedIndex",B);},scrollable:false,rightScrollbale:false,children:[A({bindings:{enabled:"!!this.parent.scrollable"}}),({scriptClass:"mstrmojo.FishEye",alias:"fishEyeList",items:mstrmojo.Arr.makeObservable([]),srcId:"obList"}),A({alias:"feScrollRight",cssClass:"mstrmojo-icon right",dir:"right",bindings:{enabled:"!!this.parent.rightScrollable"}})]});mstrmojo.css=mstrmojo.hash.copy({getStyleValue:function(D,E){var B=null;if(D.currentStyle){E=(E==="float"?"styleFloat":E);B=D.currentStyle[E];}if(document.defaultView&&document.defaultView.getComputedStyle){E=(E==="float"?"cssFloat":E);var C=document.defaultView.getComputedStyle(D,null);B=C?C[E]:null;}return B;},setStyleValue:function(D,F,E){var B=function(G){return !!(G&&(typeof G==="object")&&(typeof G.length==="number"));};if(B(F)&&B(E)){var C;for(C in F){D.style[F[C]]=E[C];}}else{D.style[F]=E;}}},mstrmojo.css);}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo._HasPopup","mstrmojo.string","mstrmojo.Pulldown","mstrmojo.Container");var C=mstrmojo.css;mstrmojo.CustomGroupEl=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.CustomGroupEl",markupString:'<div id="{@id}" class="mstrmojo-onhoverparent mstrmojo-CustomGroupEl {@cssClass}" style="{@cssText}" mstrAttach:mouseover><div class="mstrmojo-CustomGroupEl-title {@cssClass}" mstrAttach:click><img class="mstrmojo-CustomGroupEl-state {@cssClass}" src="../images/1ptrans.gif" align="absmiddle" onclick="var w = mstrmojo.all[\'{@id}\']; w.set(\'state\', !w.state)" /><span class="mstrmojo-text"></span></div><div class="mstrmojo-onhover mstrmojo-abs mstrmojo-topright mstrmojo-CustomGroupEl-tools {@cssClass}"><img class="mstrmojo-dup" src="../images/1ptrans.gif" title="'+mstrmojo.desc(3397,"Duplicate")+'" onclick="mstrmojo.all[\'{@id}\'].dup()" /><img class="mstrmojo-ops" src="../images/1ptrans.gif"onclick="var w = mstrmojo.all[\'{@id}\'].showOps();" title="'+mstrmojo.desc(7932,"Element display options")+'" /><img class="mstrmojo-del" src="../images/1ptrans.gif" onclick="mstrmojo.all[\'{@id}\'].del()" title="'+mstrmojo.desc(7933,"Delete element")+'"/></div><div class="mstrmojo-CustomGroupEl-details {@cssClass}"><div class="mstrmojo-CustomGroupEl-expr {@cssClass}"></div><div class="mstrmojo-CustomGroupEl-expr-tools {@cssClass}"></div></div></div>',markupSlots:{stateNode:function(){return this.domNode.firstChild.firstChild;},titleNode:function(){return this.domNode.firstChild.lastChild;},detailsNode:function(){return this.domNode.lastChild;},exprNode:function(){return this.domNode.lastChild.firstChild;},exprToolsNode:function(){return this.domNode.lastChild.lastChild;},titlebarNode:function(){return this.domNode.firstChild;}},markupMethods:{ondataChange:function(){var G=this.data,F=G&&G.n;this.titleNode.innerHTML=(F!=null)?mstrmojo.string.encodeHtmlString(F):"";},onstateChange:function(){var F=this.stateNode;F.className="mstrmojo-CustomGroupEl-state "+(this.state?"opened":"closed");this.detailsNode.style.display=this.state?"block":"none";},onselectedChange:function(){C.toggleClass(this.domNode,["selected"],this.selected);},onshowaddChange:function(){this.exprToolsNode.style.display=this.showadd?"block":"none";}},_set_data:function A(H,F){var G=this.data;this.data=F;this.set("expr",F&&F.expr);return G!==F;},optionsRef:{scriptClass:"mstrmojo.Editor",title:mstrmojo.desc(7934,"Element Options"),contentNodeCssClass:"mstrmojo-balloon",cssClass:"mstrmojo-CGEOptionsEditor",help:"element_options_dialog_box.htm",ce:false,isp:false,onOpen:function(){var F=this.opener.data,G=this.ops.dsplb.dspl;G.set("value",F.ce?2:(F.isp?1:0));},save:function(){var F=this.ops.dsplb.dspl.value,G=this.opener.data;G.ce=(F==2);G.isp=(F==1);this.close();},children:[{scriptClass:"mstrmojo.VBox",cssClass:"mstrmojo-ElementOptions",alias:"ops",children:[{scriptClass:"mstrmojo.HBox",alias:"dsplb",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(168,"Display:"),cssText:"margin: 0 5px;"},{alias:"dspl",scriptClass:"mstrmojo.Pulldown",itemIdField:"v",items:[{n:mstrmojo.desc(7935,"Display element name only (Default)"),v:0},{n:mstrmojo.desc(7936,"Display individual items only"),v:1},{n:mstrmojo.desc(7937,"Display element name and individual items"),v:2}]}]},{scriptClass:"mstrmojo.HBox",alias:"btns",cssText:"float:right;width:150px;margin:5px;",children:[{scriptClass:"mstrmojo.HTMLButton",alias:"ok",text:mstrmojo.desc(118,"Save"),cssClass:"mstrmojo-Editor-button",cssText:"width:72px;",onclick:function(){this.parent.parent.parent.save();}},{scriptClass:"mstrmojo.HTMLButton",alias:"cancel",text:mstrmojo.desc(221,"Cancel"),cssClass:"mstrmojo-Editor-button",cssText:"width:72px;margin: 5px;",onclick:function(){this.parent.parent.parent.close();}}]}]}]},showOps:function(){var G=this.titlebarNode,F=mstrmojo.dom.position(G,true);this.openPopup("optionsRef",{zIndex:30,left:Math.round(F.x+F.w-300)+"px",top:Math.round(F.y+F.h)+"px"});},init:function E(F){this._super(F);var G=this.data;if(G){delete this.data;this._set_data(null,G);}},del:function B(){var F=this.parent;if(F&&F.remove){F.remove(this.data);}},dup:function D(){var F=this.parent;if(F&&F.duplicate){var K=this.data,L=F.items,N=K.did,M=1,O=new RegExp(K.n+"_(\\d+)");for(var I=0,J=L.length;I<J;I++){var H=L[I],G=H.n&&H.n.match(O);if(G){M=Math.max(M,G[1]);}N=Math.max(N,parseInt(H.did,10));}F.duplicate(this.data,null,{n:mstrmojo.desc(3651,"Copy of ##").replace("##",K.n),did:F.getNextId(),state:1});}},onmouseover:function(F){this.set("showadd",this.state?true:false);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Pulldown");var C={ENTER:13,LEFT:37,UP:38,TAB:9,RIGHT:39,DOWN:40,ESC:27};function D(L,M){var G,J,F,H=[],I,N;try{I=new RegExp(L,"i");}catch(K){I=new RegExp(mstrmojo.string.regEscape(L));}for(G=0,J=M.length;G<J;G++){if(I.test(M[G][this.itemField])){H.push(M[G]);}}return H;}function B(F){return !(F<0||F===undefined||F===null);}mstrmojo.SearchablePulldown=mstrmojo.declare(mstrmojo.Pulldown,null,{scriptClass:"mstrmojo.SearchablePulldown",popupCssClass:"mstrmojo-SearchablePulldown-Popup",searchEnabled:false,allowCustomInput:false,useItemCssOnInput:false,lastSearchPattern:"",isEditing:false,allItems:null,markupString:'<div id="{@id}" class="mstrmojo-SearchablePulldown mstrmojo-DropDownButton {@cssClass} {@direction}" style="{@cssText}"><div class="mstrmojo-SearchablePulldown-boxNode mstrmojo-DropDownButton-boxNode {@cssClass}-boxNode" title="{@title}" mstrAttach:mousedown><input class="mstrmojo-SearchablePulldown-inputNode" value="{@text}" mstrAttach:keyup,blur/><div class="mstrmojo-SearchablePulldown-iconNode mstrmojo-DropDownButton-iconNode {@cssClass}-iconNode" mstrAttach:mouseover,mouseout></div></div><div class="mstrmojo-DropDownButton-popupNode {@cssClass}-popupNode"></div></div>',markupSlots:{boxNode:function(){return this.domNode.firstChild;},inputNode:function(){return this.domNode.firstChild.firstChild;},iconNode:function(){return this.domNode.firstChild.children[1];},popupNode:function(){return this.domNode.lastChild;}},markupMethods:mstrmojo.hash.copy({ontextChange:function(){if(this.inputNode.value!==this.text){this.inputNode.value=this.text;}},onheightChange:function(){this.domNode.style.height=this.height||"";this.boxNode.style.height=this.height||"";},onsearchEnabledChange:function(){this.inputNode.readOnly=this.searchEnabled?false:true;this.items=this.allItems||this.items;},onallowCustomInputChange:function(){if(this.allowCustomInput){this.set("searchEnabled",true);}},onvalueChange:function E(){if(this.useItemCssOnInput&&this.selectedItem){this.inputNode.className="mstrmojo-SearchablePulldown-inputNode "+(this.selectedItem[this.itemCSS]||"");}}},mstrmojo.hash.copy(mstrmojo.Pulldown.prototype.markupMethods)),prevalueChange:function(){this.synchronize();},synchronize:function(){var G=this.value,H=this.items||[],I=H[this.selectedIndex],F=-1;if(I&&G===I[this.itemIdField]){this.selectedItem=I;this.set("text",I[this.itemField]);return ;}F=mstrmojo.array.find(this.items,this.itemIdField,G);if(!B(F)&&this.allowCustomInput){this.selectedItem=undefined;this.selectedIndex=undefined;return ;}this.selectedIndex=B(F)?F:this.defaultSelection;this.selectedItem=I=this.items[this.selectedIndex];this.value=I?I[this.itemIdField]:undefined;this.set("text",I?I[this.itemField]:(this.defaultText||""));},preBuildRendering:function A(){if(this._super){this._super();}this.allItems=this.allItems||this.items;this.synchronize();},premousedown:function(F){if(this.searchEnabled&&F.getTarget()===this.iconNode){this.set("items",this.allItems);}this._super(F);},onkeyup:function(M){var J=mstrmojo.string.trim(this.inputNode.value),I=M.e,N=I.keyCode||I.which,L=B(this.selectedIndex)?this.selectedIndex:-1,F=this.allowCustomInput,H=this.items.length;this.isEditing=true;switch(N){case C.ENTER:if(H>0&&!F){this.set("selectedIndex",L===-1?0:L);this.synchronize();}this.closePopup();break;case C.ESC:this.closePopup();this.synchronize();break;case C.UP:if(this.popupRef.visible&&H>0){this.set("selectedIndex",(L+H-1)%H);this.synchronize();}break;case C.DOWN:if(!this.popupRef.visible&&H>0){this.togglePopup();}this.set("selectedIndex",(L+1)%H);this.synchronize();break;default:if(J===this.lastSearchPattern){return ;}var K=[];if(J&&J.length>0&&J.indexOf(this.lastSearchPattern)>-1){K=D.apply(this,[J,this.items]);}else{K=D.apply(this,[J,this.allItems]);}this.set("items",K);if(K.length===0){this.closePopup();}else{if(!this.popupRef.visible){this.togglePopup();}}this.set("selectedIndex",undefined);if(J&&J.length){var G=mstrmojo.array.find(K,this.itemField,J);if(G!==-1){this.set("selectedIndex",G);}}}if(F&&!B(this.selectedIndex)){this.set("value",this.inputNode.value);}this.lastSearchPattern=J;},onblur:function(F){this.isEditing=false;if(!this.searchEnabled){return ;}if(!this.allowCustomInput){this.items=this.allItems;this.synchronize();}}});}());(function(){var F=mstrmojo.string;function H(Q,R,K){var L,O,J,M=[],N,S;try{N=new RegExp(mstrmojo.string.regEscape(Q),"i");}catch(P){return M;}for(L=0,O=R.length;L<O;L++){J=R[L][K];N.lastIndex=0;if(N.test(J)){M.push(R[L]);}}return M;}function C(){if(this.searchEnabled){this.iconNode.style.display="none";this.inputBar.style.display="";if(this.autofocus){this.inputNode.focus();this.inputNode.select();}}else{this.hideInputNode();if(this.autofocus){if(mstrmojo.dom.isIE7||mstrmojo.dom.isIE8){var J=this;window.setTimeout(function(){try{J.iconNode.focus();}catch(K){}},100);}else{this.iconNode.focus();}}}}var G={8:"BackSpace",9:"Tab",13:"Enter",27:"Esc",38:"ArrowUp",40:"ArrowDown"};mstrmojo.SearchableDropDownList=mstrmojo.declare(mstrmojo.Pulldown,null,{scriptClass:"mstrmojo.SearchableDropDownList",markupString:'<div id="{@id}" class="mstrmojo-SearchableDropDownList mstrmojo-DropDownButton {@cssClass} {@direction}" style="{@cssText}"><div class="mstrmojo-DropDownButton-boxNode {@cssClass}-boxNode" title="{@title}"><div class="mstrmojo-DropDownButton-iconNode {@cssClass}-iconNode" tabindex="0" mstrAttach:mousedown,keyup>{@text}</div><table class="mstrmojo-InputNodeBar"><colgroup><col class="inputCol"/><col class="iconCol"/></colgroup><tr><td><input class="mstrmojo-SearchableDropDownList-inputNode" value="{@text}" placeholder="{@placeholderText}" mstrAttach:keyup,blur,click/></td><td><div class="mstrmojo-DropDownButton-iconNode {@cssClass}-iconNode" mstrAttach:mousedown></div></td></tr></table></div><div class="mstrmojo-DropDownButton-popupNode {@cssClass}-popupNode"></div></div>',markupSlots:mstrmojo.hash.copy(mstrmojo.Pulldown.prototype.markupSlots,{inputBar:function(){return this.domNode.firstChild.lastChild;},inputNode:function(){return this.domNode.firstChild.lastChild.rows[0].cells[0].firstChild;}}),markupMethods:mstrmojo.hash.copy({ontextChange:function(){this.iconNode.innerHTML=F.decodeHtmlString(this.text);this.inputNode.value=this.text;},onheightChange:function(){var J=parseInt(this.height,10);if(J>=0){this.domNode.offsetHeight=J+"px";this.inputBar.offsetHeight=J+"px";}}},mstrmojo.hash.copy(mstrmojo.Pulldown.prototype.markupMethods)),popupToBody:true,searchEnabled:false,selectedIndex:-1,placeholderText:"",allItems:null,autofocus:true,focus:function(){C.call(this);},hideInputNode:function B(){this.inputBar.style.display="none";this.iconNode.style.display="block";},postBuildRendering:function A(){if(!this.allItems){this.allItems=this.items;}this._super();C.call(this);},clickInput2pop:false,onclick:function I(J){if(this.clickInput2pop){this.togglePopup();}},prekeyup:function E(R){var K=this.getSearchPattern(),P=[],M,Q=this.inputNode,O=R.e,J,L,N=this.items.length;if(G[O.keyCode]==="Enter"){if(this.items.length>0){this.set("selectedIndex",this.selectedIndex===-1?0:this.selectedIndex);}this.onEnter&&this.onEnter();this.closePopup();return ;}else{if(G[O.keyCode]==="Esc"){this.onEsc&&this.onEsc();if(this.popupRef.visible){this.popupRef.close();}return ;}else{if(G[O.keyCode]==="ArrowDown"){if(!this.popupRef.visible){this.togglePopup();}this.set("selectedIndex",(this.selectedIndex+1)%N);}else{if(G[O.keyCode]==="ArrowUp"){if(this.popupRef.visible&&N>0){this.set("selectedIndex",(this.selectedIndex+N-1)%N);}}else{if(this.searchEnabled){if(K&&K.length>0&&K.indexOf(this.lastSearchPattern)>-1){P=H(K,this.items,this.itemField);}else{P=H(K,this.allItems,this.itemField);}this.set("selectedIndex",-1);this.set("items",P);N=P.length;if(N===0){this.closePopup();}else{if(!this.popupRef.visible){this.togglePopup();}}if(K&&K.length>0){this.set("selectedIndex",mstrmojo.array.find(P,this.itemField,Q.value));}}}}}}this.lastSearchPattern=K;},getSearchPattern:function D(){return F.trim(this.inputNode.value);}});}());(function(){mstrmojo.requiresCls("mstrmojo.OBList","mstrmojo.ui._IsIncFetchList","mstrmojo.ui._HasScroller");var F=mstrmojo.array,A=mstrmojo.chart.model.enums.EnumDSSObjectType;function D(G){return{browseConfig:null,parent:G,next:function(J){var I=this.browseConfig;if(!I){return ;}I.blockBegin+=I.blockCount;var H={taskId:"searchMetadata",styleName:"MojoFolderStyle",blockBegin:I.blockBegin,blockCount:I.blockCount,includeAncestorInfo:true};if(I.folderLinksContextId){H.folderLinksContextId=I.folderLinksContextId;}if(I.includeObjectDesc){H.includeObjectDesc=I.includeObjectDesc;}if(I.rootFolderID){H.rootFolderID=I.rootFolderID;}else{if(I.rootFolderType){H.rootFolderType=I.rootFolderType;}}if(I.browsableTypes){H.objectType=I.browsableTypes;}if(I.searchPattern){H.searchPattern=I.searchPattern;if(I.recursive){H.recursive=I.recursive;}}this.parent.set("waiting",true);if(I.dataProvider){I.dataProvider.serverRequest(H,J);}else{mstrmojo.xhr.request("POST",mstrConfig.taskURL,J,H);}},hasNext:function(){var H=this.browseConfig;return(H.blockBegin+H.blockCount-1)<H.totalSize;}};}mstrmojo.mstr.ui.IncFetchOBList=mstrmojo.declare(mstrmojo.OBList,[mstrmojo.ui._IsIncFetchList,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.mstr.ui.IncFetchOBList",cssClass:"mstrmojo-OBList mstrmojo-IF-OBList",makeObservable:true,renderOnScroll:false,waiting:false,markupString:'<div id="{@id}" class="mstrmojo-ListBase2 {@cssClass}" style="position:relative;{@cssText}" mstrAttach:keypress,mousedown,mouseup,dblclick><div class="scroll-box" style="{@scrollBoxCssText}"><div class="mstrmojo-ListBase2-itemsContainer" style="{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode.firstChild;},itemsContainerNode:function(){return this.domNode.firstChild.firstChild;},dropCueNode:function(){return this.domNode.firstChild.lastChild;}},markupMethods:{onwaitingChange:function(){this.onwaitingChange();}},init:function E(G){if(this._super){this._super(G);}this.ifDataHelper=D(this);if(G.browseConfig){this.ifDataHelper.browseConfig=G.browseConfig;}},onwaitingChange:mstrmojo.emptyFn,addItems:function B(G){var H=this.browseConfig.browsableViewMedias;if(G&&H){var I={};F.forEach(H.split(","),function(J){I[parseInt(J,10)]=true;});G=F.filter(G,function(J){return(J.t!==A.DssTypeDocumentDefinition)||I[J.dvm];});}this.add(G,-1);this.set("waiting",false);if(this._super){this._super(G);}if(this.scrollNode){this.updateScrollbars();}},setupScrollNodes:function C(){this.scrollNode=this.scrollboxNode;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.ContextMenuItem","mstrmojo.WidgetList","mstrmojo.ListMapperTable");var H=false,B=20;function G(J,K){var L=J.itemsContainerNode;L.scrollTop=Math.min(Math.max(L.scrollTop+K,0),L.scrollHeight-L.offsetHeight);}function I(K,J){if(!K._scrollInter){var L=B*(J?-1:1);K._scrollInter=window.setInterval(function(){G(K,L);},50);}}function E(J){if(J._scrollInter){window.clearInterval(J._scrollInter);J._scrollInter=null;}}mstrmojo.ContextMenu=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.ContextMenu",zIndex:100,visible:true,makeObservable:true,markupString:'<div id={@id} class="mstrmojo-ContextMenu {@cssClass}" style="z-index: {@zIndex};{@cssText}"><div class="mstrmojo-CM-scrollup" onmousedown="mstrmojo.all.{@id}.onmousedownarrow(self, arguments[0], true)" onmouseup="mstrmojo.all.{@id}.onmouseuparrow(self, arguments[0], true)"onclick="mstrmojo.all.{@id}.onclickarrow(self, arguments[0], true)" ></div><div class="mstrmojo-CM-itemsContainer">{@itemsHtml}</div><div class="mstrmojo-CM-scrolldown" onmousedown="mstrmojo.all.{@id}.onmousedownarrow(self, arguments[0], false)" onmouseup="mstrmojo.all.{@id}.onmouseuparrow(self, arguments[0], false)"onclick="mstrmojo.all.{@id}.onclickarrow(self, arguments[0], false)" ></div></div>',markupSlots:{scrollupNode:function(){return this.domNode.firstChild;},itemsContainerNode:function(){return this.domNode.childNodes[1];},scrolldownNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){var K=this.domNode,P=this.itemsContainerNode,N=this.scrollupNode,M=this.scrolldownNode;K.style.display=this.visible?"block":"none";if(this.visible){N.style.display="none";M.style.display="none";P.style.overflow="auto";P.style.height="auto";var J=mstrmojo.dom.windowDim().h,O=K.offsetHeight,L=K.offsetWidth;if(J<O){N.style.display="block";N.style.minWidth=L+"px";M.style.display="block";M.style.minWidth=L+"px";P.style.overflow="hidden";P.style.height=(J-42)+"px";}}},onleftChange:function(){this.domNode.style.left=(this.left!=null)?this.left:"";},ontopChange:function(){this.domNode.style.top=(this.top!=null)?this.top:"";}},listMapper:mstrmojo.WidgetListMapperTable,itemFunction:function C(N,J,L){if(!H){mstrmojo.requiresCls("mstrmojo.ContextMenuItem");H=true;}var K={data:N,parent:L,hasSubmenu:L._cmSource.hasSubmenu(N),dynamicUpdate:L.dynamicUpdate,_cmSource:L._cmSource,zIndex:L.zIndex,itemIdField:L.itemIdField,itemField:L.itemField,itemChildrenField:L.itemChildrenField,itemFunction:L.itemFunction},M=new mstrmojo.ContextMenuItem(K);return M;},onmousedownarrow:function A(L,K,J){I(this,J);},onclickarrow:function F(L,K,J){G(this,B*(J?-1:1));},onmouseuparrow:function D(L,K,J){E(this);}});})();(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo.dom","mstrmojo.TreeNodeSelector");var B=mstrmojo.dom,A={0:"closed",1:"opened",2:"leaf"};mstrmojo.TreeNode=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.TreeNode",markupString:'<li id="{@id}" class="mstrmojo-TreeNode {@cssClass}" style="{@cssText}" mstrAttach:mousedown,mouseover><div class="mstrmojo-TreeNode-div"><img class="mstrmojo-TreeNode-state" src="../images/1ptrans.gif" /><span class="mstrmojo-TreeNode-text {@textCssClass}"></span></div><ul class="mstrmojo-TreeNode-itemsContainer">{@itemsHtml}</ul></li>',markupSlots:{stateNode:function(){return this.domNode.firstChild.firstChild;},textNode:function(){return this.domNode.firstChild.lastChild;},itemsContainerNode:function(){return this.domNode.lastChild;}},markupMethods:{ontextChange:function(){this.textNode.innerHTML=mstrmojo.string.encodeHtmlString(this.text);},onstateChange:function(){this.stateNode.className="mstrmojo-TreeNode-state "+(A[this.state]||"closed");this.itemsContainerNode.style.display=(this.state===1)?"block":"none";},onselectedChange:function(){var D=this.selected?"addClass":"removeClass";mstrmojo.css[D](this.domNode.firstChild,["selected"]);},ondropCuePosChange:mstrmojo.WidgetList.prototype.markupMethods.ondropCuePosChange},renderOnScroll:false,listSelector:mstrmojo.TreeNodeSelector,premousedown:function C(D){var E=this._super(D),F=B.eventTarget(D.hWin,D.e);if(F===this.stateNode){if(this.state!==2){this.set("state",this.state===1?0:1);}}return E;},preclick:function(D){mstrmojo.dom.stopPropogation(D.hWin,D.e);},prechange:function(D){var E=this._super(D);if(E!==false){var F=this.tree;if(F&&F.onnodechange){F.onnodechange(D);}}return E;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dnd","mstrmojo.ui._HasScroller","mstrmojo.DI.DIConstants");var e=mstrmojo.DI.DIConstants;function Z(g){var j=document.createElement("div"),h=j.style,f=g.domNode;j.className="mstrmojo-DataGrid-avatar";h.height=f.clientHeight+"px";f.appendChild(j);g.avatar=j;return j;}function Q(f){var g=mstrmojo.dom.position(f.domNode,true);return g.x;}function O(f){return'<div class="mstrmojo-DataGrid-resizeHandle" unselectable="on" onselectstart="return false" rh="'+f+'"></div>';}function b(h){var g=h.getAttribute("rh"),f=g&&parseInt(g,10);return f;}function Y(g,k,f){var j=f.src,l=j&&j.data,h=l&&l.resizingIdx;if(!(h&&h>0)){return k&&k.apply(g,[f]);}}mstrmojo.RESIZE_NEXT_COLUMN_MODE={getRange:function G(j,h){var f=j.colSizeArray;var g=[-f[h-1]+j.minColWidth,(h==f.length-1)?f[h]-j.resizeHandleWidth-j.minColWidth:f[h]-j.minColWidth];return g;},updateSize:function F(j,h,g){var f=j.colSizeArray;f[h-1]=f[h-1]+g;f[h]=f[h]-g;},updateColumnWidth:function T(j,g,k,h){var f=j.colSizeArray;g[h-1].style.width=f[h-1]+"px";k[h-1].style.width=f[h-1]+"px";g[h].style.width=f[h]+"px";k[h].style.width=f[h]+"px";}};mstrmojo.RESIZE_ALL_COLUMN_MODE={getRange:function G(l,k){var m=l.minColWidth+l.resizeHandleWidth,f=l.colSizeArray,h=0;for(var j=k;j<f.length;++j){h+=f[j]-m;}var g=[-f[k-1]+m,h];return g;},updateSize:function F(j,n,g){var m=j.minColWidth+j.resizeHandleWidth,k=j.colSizeArray;k[n-1]=k[n-1]+g;var f=[];for(var h=0;h<k.length-n;++h){f[h]=n+h;}f.sort(function(p,q){return k[p]-k[q];});for(var h=0;h<f.length;++h){var o=g/(f.length-h);var l=k[f[h]];g-=(l>=o+m)?o:l-m;k[f[h]]=(l>=o+m)?l-o:m;}},updateColumnWidth:function T(k,g,l,j){var f=k.colSizeArray;for(var h=j-1;h<f.length;++h){g[h].style.width=f[h]+"px";l[h].style.width=f[h]+"px";}}};mstrmojo.RESIZE_CURRENT_COLUMN_MODE={getRange:function G(l,k){var m=l.minColWidth+l.resizeHandleWidth,f=l.colSizeArray,h=0;for(var j=k;j<f.length;++j){h+=f[j]-m;}var g=[-f[k-1]+m,h];return g;},updateSize:function F(j,h,g){var f=j.colSizeArray;f[h-1]=f[h-1]+g;},updateColumnWidth:function T(j,g,k,h){var f=j.colSizeArray;g[h-1].style.width=f[h-1]+"px";k[h-1].style.width=f[h-1]+"px";j.widgetResized();}};mstrmojo._CanResizeColumn=mstrmojo.provide("mstrmojo._CanResizeColumn",{draggable:true,dropZone:false,avatar:null,colSizeArray:null,resizableColumns:true,resizeHandleWidth:10,minColWidth:5,resizeColumnBehavior:mstrmojo.RESIZE_NEXT_COLUMN_MODE,createColSizeArray:function c(){var g,l,j,h,k,f;l=this.headerContainerNode;j=l&&l.getElementsByTagName("table")[0];h=j.rows[0].cells;g=[];for(k=0,f=h.length;k<f;k++){g.push(h[k].offsetWidth);}return g;},postBuildRendering:function V(){if(this._super){this._super();}if(this.avatar){this.domNode.appendChild(this.avatar);}this.colSizeArray=null;},getDragData:function E(f){var h=f.src,j=h.node,g=b(j);if(g&&g>0){return{resizingIdx:g,startingX:h.pos.x,baseX:Q(this)};}if(this._super){return this.dropZone&&this._super(f);}return null;},allowDrop:function K(f){var h=f.src,j=h&&h.data,g=j&&j.resizingIdx;if(g&&g>0){return true;}return this.dropZone;},ondragenter:function R(f){Y(this,this._super,f);},ondragover:function S(f){Y(this,this._super,f);},ondragleave:function B(f){Y(this,this._super,f);},ondrop:function W(f){Y(this,this._super,f);},isDragValid:function C(f){var h=f.src,j=h&&h.data,g=j&&j.resizingIdx;if(g&&g>0){return true;}if(this._super){return this._super(f);}return false;},ondragstart:function X(f){var j=f.src,k=j&&j.data,h=k&&k.resizingIdx;if(h&&h>0){var g=this.avatar||Z(this);this.ownAvatar=true;g.style.left=(k.startingX-k.baseX)+"px";g.style.display="block";document.body.style.cursor="col-resize";if(!this.colSizeArray){this.colSizeArray=this.createColSizeArray();this._firstTimeResize=true;}k.resizingRange=this.resizeColumnBehavior.getRange(this,h);return ;}if(this._super){this._super(f);}},ondragmove:function P(g){var o=g.src,h=o&&o.data,m=h&&h.resizingIdx;if(m&&m>0){var n=g.tgt,j=this.avatar,l=h.resizingRange,k=n.pos.x-h.startingX,f=Math.min(l[1],Math.max(k,l[0]));h.deltaX=f;if(j){j.style.left=(h.startingX-h.baseX+f)+"px";}}else{if(this._super){this._super(g);}}},ondragend:function L(k){var r=k.src,l=r&&r.data,p=l&&l.resizingIdx;if(p&&p>0){var f=this.titleColGroup,q=f&&f.childNodes,n=this.dataColGroup,o=n&&n.childNodes,j=q.length,m=this.colSizeArray,g=l.deltaX;this.resizeColumnBehavior.updateSize(this,p,g);if(this._firstTimeResize){var h;for(h=0;h<j;h++){q[h].style.width=m[h]+"px";o[h].style.width=m[h]+"px";}this._firstTimeResize=false;}else{this.resizeColumnBehavior.updateColumnWidth(this,q,o,p);}this.avatar.style.display="none";document.body.style.cursor="";this.ownAvatar=false;}else{if(this._super){this._super(k);}}}});mstrmojo.requiresCls("mstrmojo._CanResizeColumn","mstrmojo.ListMapperTable","mstrmojo.WidgetList");function J(h){var l=document.createElement("colgroup"),f=h.length,g,k;for(k=0;k<f;k++){var j=document.createElement("col");g=h[k];if(g.colWidth){j.style.width=g.colWidth+"px";}j.className=g.colCss||("col"+k);l.appendChild(j);}return l;}function I(g){var h=g._headerWidgets_,f=h&&h.length;if(f>0){var j;for(j=0;j<f;j++){h[j].destroy(true);}}}function A(k,f,j,m,g){var h=[],l=k.headerWidget;j=j?(" "+j):"";m=m||this._headerWidgets;g=g?(" "+g):' w="1"';h.push("<td"+j+">");if(f>0&&this.resizableColumns){h.push(O(f));}h.push('<div class="mstrmojo-DataGrid-headerText');h.push(k.headerCss?" "+k.headerCss:"");if(l){m.push(mstrmojo.hash.copy(l));h.push('"'+g+">");}else{h.push('">');}h.push(k.headerText||"&nbsp");h.push("</div>");h.push("</td>");return h.join("");}function a(f,n){var h,l,m,g,o,k,j=[];f=f||"_headerWidgets";n=n||"1";h=this[f];l=h.length;if(l>0){m=this.headerContainerNode.getElementsByTagName("div");g=mstrmojo.array.filter(m,function(p){return p.getAttribute("w")==n;});for(k=0;k<l;k++){h[k].placeholder=g[k].firstChild;h[k].dataGrid=this;o=mstrmojo.registry.ref(h[k]);o.render();j.push(o);}}this[f+"_"]=j;}mstrmojo.DataGrid=mstrmojo.declare(mstrmojo.WidgetList,[mstrmojo._CanResizeColumn,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.DataGrid",banding:true,resizableColumns:true,columns:null,items:null,listMapper:mstrmojo.WidgetListMapperTable,lockHeader:false,contentWidth:"",renderHook:{},shouldDisableItem:function(){return false;},markupString:'<div id="{@id}" class="mstrmojo-DataGrid {@cssClass}" style="{@cssText}" mstrAttach:mousedown,mouseup><div class="mstrmojo-DataGrid-headerContainer">{@headerHtml}</div><div class="mstrmojo-DataGrid-itemsScrollBox" style="position:relative;"><div class="mstrmojo-DataGrid-itemsContainer" style="{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode.lastChild;},itemsContainerNode:function(){return this.domNode.lastChild.firstChild;},dropCueNode:function(){return this.domNode.lastChild.lastChild;},headerContainerNode:function(){return this.domNode.firstChild;},headerRows:function(){return this.domNode.firstChild.firstChild.rows;},bodyRows:function(){return this.domNode.lastChild.firstChild.firstChild.rows;}},markupMethods:{oncontentWidthChange:function(){var g=this.contentWidth,h=this.headerContainerNode,f=this.itemsContainerNode;if(g&&h&&f){h.style.width=g;f.style.width=g;}},onlockHeaderChange:function(){mstrmojo.css.toggleClass(this.domNode,"lockHeader",this.lockHeader);},onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";}},setupScrollNodes:function M(){this.scrollNode=this.scrollboxNode;},itemFunction:function(h,f,g){var j=new mstrmojo.DataRow({columns:g.columns,data:h,disable:g.shouldDisableItem(h),idx:f,dataGrid:g,parent:g});return j;},preBuildRendering:function D(){var l=this.renderHook;if(l&&l.pre){l.pre.apply(this,[A]);}else{var g=this.columns,f=g.length,h=['<table class="mstrmojo-DataGrid-headerTable" cellspacing="0" cellpadding="0"><tr>'],k;this._headerWidgets=[];var j;for(j=0;j<f;j++){k=A.apply(this,[g[j],j]);h.push(k);}h.push("</tr></table>");this.headerHtml=h.join("");}if(this._super){this._super();}},postBuildRendering:function V(){if(this._super){this._super();}var h=this.renderHook;if(h&&h.post){h.post.apply(this,[J,a]);}else{a.apply(this);this.titleColGroup=J(this.columns);}var f=this.titleColGroup,n=f.cloneNode(true),k=this.headerContainerNode,m=k&&k.getElementsByTagName("table")[0],o=this.itemsContainerNode,l=this.scrollboxNode,j=this.domNode,g=o&&o.getElementsByTagName("table")[0];this.dataColGroup=n;if(m&&g){m.insertBefore(f,m.firstChild);g.insertBefore(n,g.firstChild);}if(this.lockHeader){l.style.height=j.offsetHeight-k.offsetHeight+"px";mstrmojo.dom.attachEvent(l,"scroll",function(p){k.style.left=-l.scrollLeft+"px";});}},refresh:function H(f){I(this);if(this._super){this._super(f);}},destroy:function d(f){I(this);this._super(f);},unrender:function U(k){var h=this._headerWidgets_,g=h&&h.length,f;if(g>0){var j;for(j=0;j<g;j++){f=h[j];if(f&&f.hasRendered){f.unrender(true);}}}this._super(k);}});mstrmojo.requiresCls("mstrmojo.css","mstrmojo.hash","mstrmojo.Container");mstrmojo.DataRow=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.DataRow",cssClass:"mstrmojo-DataRow",dataTextCSSClass:"mstrmojo-DataRow-text",columns:null,disable:false,markupMethods:{onselectedChange:function(){mstrmojo.css.toggleClass(this.domNode,"selected",this.selected);}},buildDom:function(){this.children=[];var m=document.createElement("tr"),q=this.data,u=this.idx,g=this.dataGrid,n=this.cssClass,x=this.columns,f=this.children,j=this.disable,h,r=-1,v,t;m.setAttribute("id",this.id);if(g.banding){n+=(u%2==1)?" odd":" even";}m.className=n+(mstrmojo.string.isEmpty(q[g.itemDisplayField||"n"])?" empty-row":"")+(" "+q[g.itemCSSField||"itemCss"]||"")+(j?" disabled":"");var l,p;for(l=0,p=x.length;l<p;l++){v=x[l];t=(v.dataWidgetBuilder&&v.dataWidgetBuilder(q))||v.dataWidget;h=document.createElement("td");if(v.applyStyle2Cell&&v.colCss){h.setAttribute("class",v.colCss);}m.appendChild(h);if(t){h.setAttribute("w","1");r++;f.push(mstrmojo.hash.copy(t,{slot:"slot"+r,data:q,idx:u,dataGrid:g}));}else{if(v.dataFunction){h.innerHTML=v.dataFunction(q,u,g);}else{var k=mstrmojo.string.htmlAngles(q[v.dataField||"n"])||"&nbsp",o=v.tooltip?' title="'+k+'"':"";h.innerHTML='<div class="'+this.dataTextCSSClass+'" '+o+">"+k+"</div>";}}}this.initChildren();m.mstrmojoId=this.id;return m;},buildRendering:function N(){this._super();var k=this.domNode.childNodes,f=k.length,j={},h=0,l,g;for(g=0;g<f;g++){l=k[g];if(l.getAttribute("w")=="1"){j["slot"+h]=l;h++;}}this.addSlots(j);}});}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo._IsDial");mstrmojo.WidgetDial=mstrmojo.declare(mstrmojo.WidgetList,[mstrmojo._IsDial],{scriptClass:"mstrmojo.WidgetDial"});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBox","mstrmojo.ListBoxHoriz","mstrmojo.string");var B=mstrmojo.string;var A={render:function(G,C,H){var I=(H.htmlName+C),E=H.selectedIndices[C]?"checked ":"",F=E?" selected":"",D=G.v!=="u;"?" nAll":"";return'<div class="'+H.itemCssClass+F+D+'"><input type="'+H.inputType+'" name="'+H.htmlName+'" id="'+I+'" value="'+C+'" '+E+'/><label for="'+I+'" title="'+B.encodeHtmlString(G[H.itemTitleField]||"")+'" style="'+H.labelCssText+'">'+B.encodeHtmlString(G[H.itemDisplayField||"n"])+"</label></div>";},select:function(D){var C=D&&D.firstChild;if(C){if(!C.checked){C.checked=true;}mstrmojo.css.toggleClass(D,"selected",C.checked);}},unselect:function(D){var C=D&&D.firstChild;if(C){if(C.checked){C.checked=false;}mstrmojo.css.toggleClass(D,"selected",C.checked);}},rowHeight:23};mstrmojo._RendersInputItems=mstrmojo.provide("mstrmojo._RendersInputItems",{inputType:null,htmlName:null,itemRenderer:A,init:function(C){this._super(C);if(!this.htmlName){this.htmlName=this.id;}},preclick:function(F){var E=F.hWin,H=F.e,G=mstrmojo.dom.eventTarget(E,H);if(G&&G.nodeName.match(/input/i)){var D=parseInt(G.value,10);if(this.inputType&&this.inputType.match(/radio/i)){this.singleSelect(D);}else{var C=(G.checked)?"add":"remove";this[C+"Select"](D);}}}});mstrmojo._InputList=mstrmojo.declare(mstrmojo.ListBox,[mstrmojo._RendersInputItems],{scriptClass:"mstrmojo._InputList"});mstrmojo._InputListHoriz=mstrmojo.declare(mstrmojo.ListBoxHoriz,[mstrmojo._RendersInputItems],{scriptClass:"mstrmojo._InputListHoriz"});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBox","mstrmojo.ListBoxBase");mstrmojo.ButtonItemRenderer=mstrmojo.hash.copy(mstrmojo.DivItemRenderer);mstrmojo.ButtonItemRenderer.render=function(D,A,E){var B=D.v!=="u;"?" nAll":"",C=(E.enabled===false);return'<input mstridx="'+A+'" class="'+E.itemCssClass+(E.selectedIndices[A]?" "+E.itemSelectedCssClass:"")+" "+(D.css||"")+B+'" style="'+E.itemCssText+'" type="button"  value="'+D[E.itemDisplayField]+'" '+(C?"disabled ":"")+"/>";};mstrmojo._RendersItemButtons=mstrmojo.hash.copy(mstrmojo._RendersItemDivs);mstrmojo._RendersItemButtons.itemRenderer=mstrmojo.ButtonItemRenderer;mstrmojo.ButtonList=mstrmojo.declare(mstrmojo.ListBox,[mstrmojo._RendersItemButtons],{scriptClass:"mstrmojo.ButtonList",cssClass:"mstrmojo-ButtonList",itemCssClass:"mstrmojo-ButtonItem",selectionPolicy:"toggle"});mstrmojo.requiresCls("mstrmojo.ListBoxHoriz");mstrmojo.ButtonListHoriz=mstrmojo.declare(mstrmojo.ListBoxHoriz,[mstrmojo._RendersItemButtons],{scriptClass:"mstrmojo.ButtonListHoriz",cssClass:"mstrmojo-ButtonListHoriz",itemCssClass:"mstrmojo-ButtonItem",selectionPolicy:"toggle"});}());(function(){mstrmojo.requiresCls("mstrmojo.LegacySuggestionList","mstrmojo.ui._HasScroller");var E=mstrmojo.dom;mstrmojo.ui.ScrollableSuggestionList=mstrmojo.declare(mstrmojo.LegacySuggestionList,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.ScrollableSuggestionList",markupString:'<div id="{@id}" class="mstrmojo-ListBase mstrmojo-scrollable-suggestlist {@cssClass}" style="{@cssText}" mstrAttach:click,dblclick,mouseover,mouseout,contextmenu><div class="list-content"><div class="items-container {@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{itemsContainerNode:function B(){return this.domNode.firstChild.firstChild;},scrollboxNode:function D(){return this.domNode.firstChild;},scrollNode:function H(){return this.domNode.firstChild;}},onclick:function A(I){var J=this.getItemFromTarget(I.getTarget());if(J){this._super(I);}},onitemsChange:function C(){var I=this;window.setTimeout(function(){I.hideTooltip();I.updateScrollbars();},0);},updateScrollbars:function F(){this._super();var K=this,M=K.scrollNode,I=M.clientWidth,L=K.itemsContainerNode,J=L.clientWidth;L.style.width="auto";window.setTimeout(function(){if(I>J){L.style.width=J+(I-J)+"px";}},10);},useRichTooltip:true,getItemTooltip:function(L,M){var J=E.position(M),K=M.ttp;var I={areaId:L._renderIdx+"text",cssClass:"vi-regular vi-tooltip-C",contentNodeCssClass:"regular-unitlist-tooltips",posType:"",content:K,top:J.y,left:J.x+J.w+6,enableHover:false};return I;},showTooltip:function G(I,L){var K=this.targetEl,J=this.targetItem;if(K&&K.ttp){this.richTooltip=this.getItemTooltip(J,K);if(this.richTooltip){this._super(I,L);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.CheckList","mstrmojo.ui._IsHierarchyList","mstrmojo.css","mstrmojo.array","mstrmojo.EnumSelectionType");var S=mstrmojo.css,K=mstrmojo.array,A=mstrmojo.EnumSelectionType;var U="hidden",Q="selected",R="expanded",F="collapsed",I="hierarchy",M="hasChildren";var P="u;",Y=10;mstrmojo.ui.HierarchyCheckList=mstrmojo.declare(mstrmojo.ui.CheckList,[mstrmojo.ui._IsHierarchyList],{scriptClass:"mstrmojo.ui.HierarchyCheckList",markupString:'<div id="{@id}" class="mstrmojo-ui-CheckList {@cssClass}" style="{@cssText}" mstrAttach:click,contextmenu><div class="header"></div><div class="scroll-container"><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div><div class="footer"></div></div>',markupSlots:{headerNode:function E(){return this.domNode.firstChild;},footerNode:function C(){return this.domNode.lastChild;},scrollboxNode:function H(){return this.domNode.children[1];},itemsContainerNode:function T(){return this.domNode.children[1].firstChild;}},getItemMarkup:function D(a,Z){return'<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}" title="{@tt}"><span class="indent" style="padding-left: {@indent}px;"></span><span class="triangle"></span><span class="checkbox"></span><span class="text">{@en@n}</span></{@tag}>';},getItemProps:function W(b,Z){var a=this._super(b,Z);if(b.isSelected){a.addCls(Q);}if(this.isHiearachyDisplay()){if(b.hcd){a.addCls(b.epd?R:F);}}return a;},setupScrollNodes:function J(){this.scrollNode=this.scrollboxNode;var Z=this.domNode.clientHeight-this.headerNode.clientHeight-this.footerNode.clientHeight;if(Z>0){this.scrollNode.style.height=Z+"px";}},onclick:function X(Z){var b=Z.getTarget(),c=this.getItemNodeFromTarget(b),a=this.getItemFromTarget(b);if(a){if(S.hasClass(b,"triangle")){if(a.hcd){this.doExpandCollapse(c,a);}}else{if(!S.hasClass(b,"indent")){this.doBranchSelect(c,a,!a.isSelected);}}Z.cancel();}},doElementSelect:function V(b,a,Z){a.isSelected=Z;this.onSelectionChange(A.ELEMENT,Z,a);this.updateItemNodesStatus();},doBranchSelect:function O(c,a,Z){var b=function(d){d.isSelected=Z;d.isBranchSelected=Z;(d.children||[]).forEach(function(e){b(e);});};b(a);this.onSelectionChange(A.BRANCH,Z,a);this.updateItemNodesStatus();},doLevelSelect:function G(a,Z){this.getItems().forEach(function(b){if(b.lv===a){b.isSelected=Z;}});this.onSelectionChange(A.LEVEL,Z,null,a);this.updateItemNodesStatus();},doBranchLevelSelect:function B(d,a,c,Z){var b=function(e){if(e.lv===c){e.isSelected=Z;}else{if(e.lv<c){(e.children||[]).forEach(function(f){b(f);});}}};b(a);this.onSelectionChange(A.BRANCH_LEVEL,Z,a,c);this.updateItemNodesStatus();},doAllSelect:function L(Z){this.getItems().forEach(function(a){a.isSelected=a.isBranchSelected=Z;});this.onSelectionChange(A.ALL,Z);this.updateItemNodesStatus();},updateItemNodesStatus:function N(){var Z=this.itemsContainerNode&&this.itemsContainerNode.childNodes;K.forEach(Z,function(b){var a=this.getItemFromTarget(b);if(a){S.toggleClass(b,Q,a.isSelected);}},this);},onSelectionChange:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.HierarchyCheckList","mstrmojo.ui._HierarchyListSelection","mstrmojo.EnumSelectionType","mstrmojo.hash","mstrmojo.array","mstrmojo.css");var L=mstrmojo.hash,S=mstrmojo.css,H=mstrmojo.array,A=mstrmojo.EnumSelectionType;var R="dynamic",K="hasSelectedDsct";var V=7;function G(Z,W,Y){var a=[],X={};H.forEach(Z,function(c){var b=c.v;if(b>=Y){a.push(c);if(W.isLevelSelected(b)){X[a.length-1]=true;}}});return{items:a,selectedIndices:X};}mstrmojo.vi.ui.HierarchyCheckList=mstrmojo.declare(mstrmojo.ui.HierarchyCheckList,[mstrmojo.ui._HierarchyListSelection],{scriptClass:"mstrmojo.vi.ui.HierarchyCheckList",getItemMarkup:function D(X,W){return'<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}" title="{@tt}"><div class="right"><span class="refresh" title="{@refreshTitle}"></span><span class="branch" title="{@branchTitle}"></span><span class="level" title="{@levelTitle}"></span></div><div class="content"><span class="indent" style="padding-left: {@indent}px;"></span><span class="triangle"></span><span class="checkbox"></span><span class="text">{@en@n}</span></div></{@tag}>';},getItemProps:function T(Y,W){var X=this._super(Y,W);if(Y.isBranchSelected){X.addCls(R);}if(Y.hasDsctSelected){X.addCls(K);}L.copy({refreshTitle:mstrmojo.desc(15251,"Dynamic"),branchTitle:Y.isSelected?mstrmojo.desc(15921,"Single Deselect"):mstrmojo.desc(15920,"Single Select"),levelTitle:mstrmojo.desc(15919,"Level Select"),},X);return X;},onclick:function U(W){var Y=W.getTarget(),Z=this.getItemNodeFromTarget(Y),X=this.getItemFromTarget(Y);if(X){if(S.hasClass(Y,"triangle")){if(X.hcd){this.doExpandCollapse(Z,X);}}else{if(S.hasClass(Y,"branch")){this.doElementSelect(Z,X,!X.isSelected);}else{if(S.hasClass(Y,"level")){this.openLevelPopup(Z,X,Y);}else{if(!S.hasClass(Y,"indent")&&!S.hasClass(Y,"refresh")){this.doBranchSelect(Z,X,!X.isSelected);}}}}W.cancel();}},onSelectionChange:function I(X,W,Y,Z){if(X===A.ALL&&W){this.clearSelections();(this.raad?this.getInitialDisplayRoots():this.getRootItems()).forEach(function(a){if(a.v){this.selectionList.push({func:A.BRANCH,itemValue:a.v,isNot:false});}},this);if(this.postSelectionChange){this.postSelectionChange();}}else{this._super(X,W,Y,Z);}},updateItemNodesStatus:function M(){var W=this.itemsContainerNode&&this.itemsContainerNode.childNodes;this._super();H.forEach(W,function(Z){var Y=this.getItemFromTarget(Z),X=Z.getElementsByClassName("branch")[0];if(Y){S.toggleClass(Z,R,Y.isBranchSelected);S.toggleClass(Z,K,Y.hasDsctSelected);if(X){X.title=Y.isSelected?mstrmojo.desc(15921,"Single Deselect"):mstrmojo.desc(15920,"Single Select");}}},this);},getSummaryText:function J(){return"";},getLevels:function E(){return[];},getLevelItems:function B(X){var Z=this.getLevels(),a=X?[{v:-1,n:mstrmojo.desc(15824,"All Levels")}]:[];if(Z.length>0){return a.concat(Z);}var W=this.getMaxLevel();for(var Y=0;Y<=W;Y++){a.push({v:Y,n:mstrmojo.desc(493,"Level")+" "+(Y+1)});}return a;},postBuildRendering:function Q(){var Y=this.levelPopup,X=this.domNode;if(!Y){var W=this.getLevelPopupConfig(),Z=L.walk(W.scriptClass,window);delete W.scriptClass;Y=this.levelPopup=new Z(W);this.addDisposable(Y);}Y.placeholder=X.insertBefore(document.createElement("div"),X.firstChild);Y.render();return this._super();},unrender:function P(W){var X=this.levelPopup;if(X){X.unrender(W);}return this._super(W);},onScrollEnd:function C(){var X=this.levelPopup,W=X&&X.getPopupWidget();if(W&&W.visible){X.closePopup();}this.hideTooltip();},openLevelPopup:function O(a,Y,X){var Z=this.levelPopup,W=Z.getPopupWidget();if(Z&&Y.hcd&&this.isHiearachyDisplay()){Z.openPopup(W,{branch:Y,branchNode:a});if(X){W.domNode.style.left=X.offsetLeft+"px";W.domNode.style.top=X.offsetTop+X.offsetHeight-this.scrollNode.scrollTop+"px";}}},getLevelPopupConfig:function N(Y){return L.copy(Y,{scriptClass:"mstrmojo.ui.PopupButton",markupString:'<div id="{@id}" class="level-popup-btn" title="{@title}" mstrAttach:click></div>',title:mstrmojo.desc(15919,"Level Select"),isHostedWithin:false,parent:this,widget:this,children:{scriptClass:"mstrmojo.ui.PopupWidget",alias:"levelPopup",visible:false,children:[{scriptClass:"mstrmojo.ui.CheckList",alias:"checklist",doItemSelect:function a(h,f){var e=this.parent,j=e.opener.widget,g=!this.selectedIndices[h._renderIdx];if(e.branch&&e.branchNode){j.doBranchLevelSelect(e.branchNode,e.branch,h.v,g);}else{j.doLevelSelect(h.v,g);}mstrmojo._IsList.doItemSelect.call(this,h,f);},onclick:function X(e){if(!S.hasClass(e.getTarget(),"refresh")){mstrmojo._IsList.onclick.call(this,e);}},getItemMarkup:function c(e){return mstrmojo.ui.CheckList.prototype.getItemMarkup.call(this,e).replace('<span class="text">{@en@n}</span>','<span class="refresh"></span><span class="text">{@en@n}</span>');}}],onOpen:function W(){var g=this.opener.widget,e=this.branch,f=G(g.getLevelItems(),g.getLevelSelection(e),e&&e.lv+1||0);this.checklist.set("items",f.items);this.checklist.set("selectedIndices",f.selectedIndices);}},getPopupWidget:function b(){return this.levelPopup;},onPopupWidgetOpened:function Z(){S.addClass(this.levelPopup.branchNode,"level-popup-open");},onPopupWidgetClosed:function d(){S.removeClass(this.levelPopup.branchNode,"level-popup-open");}});},getAllButtonConfig:function F(X,W){return L.copy(W,X?{scriptClass:"mstrmojo.Button",text:mstrmojo.desc(3474,"Select All"),alias:"selectAllBtn",cssClass:"selectAll",widget:this,onclick:function(){this.widget.doAllSelect(true);}}:{scriptClass:"mstrmojo.Button",text:mstrmojo.desc(1763,"Clear All"),alias:"clearAllBtn",cssClass:"clearAll",widget:this,onclick:function(){this.widget.doAllSelect(false);}});}});}());(function(){mstrmojo.requiresCls("mstrmojo._InputList","mstrmojo._InputListHoriz");mstrmojo.RadioList=mstrmojo.declare(mstrmojo._InputList,null,{scriptClass:"mstrmojo.RadioList",inputType:"radio",cssClass:"mstrmojo-RadioList",itemCssClass:"mstrmojo-RadioList-item",onenabledChange:function A(B){for(var C=0;C<this.items.length;C++){this._getItemNode(C).firstChild.disabled=!B.value;}}});mstrmojo.RadioListHoriz=mstrmojo.declare(mstrmojo._InputListHoriz,null,{scriptClass:"mstrmojo.RadioListHoriz",inputType:"radio",cssClass:"mstrmojo-RadioListHoriz",itemCssClass:"mstrmojo-RadioListHoriz-item"});})();(function(){mstrmojo.requiresCls("mstrmojo._InputList","mstrmojo._InputListHoriz","mstrmojo.hash");mstrmojo.CheckList=mstrmojo.declare(mstrmojo._InputList,null,{scriptClass:"mstrmojo.CheckList",inputType:"checkbox",cssClass:"mstrmojo-CheckList",itemCssClass:"mstrmojo-CheckList-item"});mstrmojo.requiresCls("mstrmojo._InputListHoriz");mstrmojo.CheckListHoriz=mstrmojo.declare(mstrmojo._InputListHoriz,null,{scriptClass:"mstrmojo.CheckListHoriz",inputType:"checkbox",cssClass:"mstrmojo-CheckListHoriz",itemCssClass:"mstrmojo-CheckListHoriz-item"});})();(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo.WidgetTreeBuilder","mstrmojo.TreeNodeSelector");var E=false;mstrmojo.WidgetTree=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.WidgetTree",listBuilder:mstrmojo.WidgetTreeBuilder,listSelector:mstrmojo.TreeNodeSelector,renderOnScroll:true,itemIdField:"dssid",itemDisplayField:"n",itemIconField:"tp",itemChildrenField:"items",itemFunction:function D(L,I,J){if(!E){mstrmojo.requiresCls("mstrmojo.TreeNode");E=true;}var H=J.tree||J,K=new mstrmojo.TreeNode({data:L,state:0,parent:J,tree:H,multiSelect:J.multiSelect,text:L[J.itemDisplayField],textCssClass:H.item2textCss(L),items:L[J.itemChildrenField],itemIdField:J.itemIdField,itemDisplayField:J.itemDisplayField,itemIconField:J.itemIconField,itemChildrenField:J.itemChildrenField,itemFunction:J.itemFunction,listSelector:J.listSelector});return K;},item2textCss:function B(H){return H[this.itemIconField];},selectionParentNode:null,init:function F(H){this._super(H);this.selectionParentNode=this;this.tree=this;},clearTreeSelect:function A(){(this.selectionParentNode||this).clearSelect();},prechange:function G(H){var I=this._super(H);this.onnodechange(H);return I;},onnodechange:function C(I){if(!I){return ;}var J=mstrmojo.hash,M=this.selectionParentNode,L=I.src;if(L===M){if(J.isEmpty(L.selectedIndices)){L=this;this.selectionParentNode=this;}this.raiseEvent({name:"selectionChange",parentNode:L,parentNodeWas:M,added:I.added,removed:I.removed});}else{if(I.added&&I.added.length){var K=[];if(!J.isEmpty(M.selectedIndices)){K=mstrmojo.hash.keyarray(M.selectedIndices,true);M.clearSelect();}this.selectionParentNode=L;this.raiseEvent({name:"selectionChange",parentNode:L,parentNodeWas:M,added:I.added,removed:K});}else{}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.TreeNode","mstrmojo._IsExprNode","mstrmojo.array","mstrmojo.dom","mstrmojo.css","mstrmojo.expr","mstrmojo._HasOwnAvatar");var F=mstrmojo.array,M=mstrmojo.expr,P=mstrmojo.dom,A=mstrmojo.css;function J(R,Q){var T=R.data,S=T&&T.nds;if(!S){return null;}if(Q){Q.sort(F.numSorter);}else{Q=R.sortSelectedIndices();}if(!Q.length){return null;}return{idxs:Q,nds:F.get(S,Q)};}function N(S){var R=S.ctxtBuilder,U=R&&R.itemWidgets,Q=U&&U[0],T=Q&&Q.data;if(T&&T.not&&(U.length>0)){delete T.not;Q.paint();}}mstrmojo.AndOrNode=mstrmojo.declare(mstrmojo.TreeNode,[mstrmojo._IsExprNode,mstrmojo._HasOwnAvatar],{scriptClass:"mstrmojo.AndOrNode",data:null,editable:false,prefixedAndOrEditable:false,markupString:'<div id="{@id}" class="mstrmojo-andor mstrmojo-AndOrNode {@cssClass}"  style="position:relative;{@cssText}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-andor-prefix" mstrAttach:click><span class="mstrmojo-textset mstrmojo-andor-prefix-text"></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">{@_prefixAndOrToolsMarkup}</span></div><div class="mstrmojo-andor-top"></div><div class="mstrmojo-andor-contentsWrapper" style="position:relative"><div class="mstrmojo-andor-contents" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue mstrmojo-AndOrNode-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner mstrmojo-AndOrNode-dropCue-inner"></div></div></div><div class="mstrmojo-andor-bottom"></div></div>',markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},prefixAndOrToolsNode:function(){return this.domNode.firstChild.childNodes[1];},itemsContainerPrefix:function(){return this.domNode.childNodes[1];},itemsContainerNode:function(){return this.domNode.childNodes[2].firstChild;},dropCueNode:function(){return this.domNode.childNodes[2].lastChild;},itemsContainerSuffix:function(){return this.domNode.lastChild;},scrollboxNode:function(){return this.domNode;}},markupMethods:{onitemCntChange:function(){A.toggleClass(this.itemsContainerNode,["multi"],this.itemCnt>2);},onprefixedAndOrEditableChange:function(){A.toggleClass(this.prefixNode,["editable"],this.prefixedAndOrEditable);},ondataChange:function(){this.prefixNode.innerHTML=this.andOrTxt();},ondropCuePosChange:mstrmojo.TreeNode.prototype.markupMethods.ondropCuePosChange},multiSelect:true,itemIdField:null,init:function(Q){this._super(Q);this.markupString=this.markupString.replace("{@_prefixAndOrToolsMarkup}",this.getPrefixAndOrToolsMarkup());var R=this.data;if(R){delete this.data;this._set_data(null,R);}},itemCnt:0,postBuildRendering:function(){var Q;this.set("itemCnt",this.items.length);if(this._super){Q=this._super();}N(this);return Q;},preadd:function L(Q){if(this._super){this._super(Q);}this.set("itemCnt",this.items.length);N(this);},preremove:function O(Q){if(this._super){this._super(Q);}this.set("itemCnt",this.items.length);N(this);},_set_data:function(T,Q){var R=this.data,S=(R!==Q);if(S){this.data=Q;if(Q&&!Q.nds){Q.nds=[];}this.set("items",Q&&Q.nds);}return S;},isDragValid:function K(){return true;},isSelectableArea:function(Q){return false;},getDragData:function(Q){var S=this._super(Q);if(S&&!S.html){var R=S.et&&M.ET2TGT[S.et];S.html=R?S[R]&&S[R].n||"":S.n||"";}return S;},remove:function I(R,S){var Q=this._super(R);if(Q>-1){var T=S||this.suppressConsolidation;if(!T){this.consolidate(false);}}return Q;},move:function(R,Q){this.suppressConsolidation=true;var S;if(this._super){S=this._super(R,Q);}this.suppressConsolidation=false;return S;},consolidate:function E(){var U=this.parent;if(!U||!U.remove){return ;}var S=this.items,R=S&&S.length;if(R<2){var T=R?S[0]:null,Q=this.childIndex();if(T){U.add([T],Q);}U.remove(this.data);}},indent:function G(S,Q){var R=J(this,S);if(!R){return ;}this.remove(R.idxs,true);var W=R.nds,V=Q&&Q.fn||this.data&&this.data.fn,U={et:M.ET.ANDOR,nds:W,fn:V};if(W.length===2&&W[0].not){if(W[1].not){delete W[0].not;delete W[1].not;U.not=true;U.fn=(V===M.FN.AND?M.FN.OR:M.FN.AND);}else{var T=W[0];W[0]=W[1];W[1]=T;}}this.add([U],R.idxs[0]);this.consolidate(false);},outdent:function C(R){var S=this.parent,Q=S&&S.data;if(!Q||Q.et!==M.ET.ANDOR){return ;}var T=J(this,R);if(!T){return ;}this.remove(T.idxs,true);if(this.data.not){T.nds[0].not=true;}S.add(T.nds,this.childIndex());this.consolidate(false);},edit:function D(Z,a,S){if(!Z){return ;}var Y=this.data,X=Y&&Y.fn,R=Z.data,f=R&&R.not;if(!R){R={};Z.data=R;}R.not=!!S;if(X!==a){var Q=Y.nds;if(Q&&Q.length>2){var e=Z.childIndex();if(e>0){this.indent([e-1,e],{fn:a});}}else{Y.fn=a;var V=this.ctxtBuilder,U=V&&V.itemWidgets;for(var T=0,W=(U&&U.length)||0;T<W;T++){var b=U[T];if(b){b.paint();}}}}else{Z.paint();}},preclick:function H(Q){var S=null,R=P.eventTarget(Q.hWin,Q.e);if(R===this.prefixNode){}else{if(P.contains(this.prefixNode,R,true)){S="andor";}}Q.part=S;},createAvatar:function B(S){var R=document.createElement("div"),T=P.findWidget(S),Q=T.getAvatarNode&&T.getAvatarNode();if(!Q){Q=T.condNode.cloneNode(true);Q.style.boxSizing="border-box";Q.style.width=T.condNode.offsetWidth+"px";}R.appendChild(Q);A.addClass(R,T.avatarCssCls||"mstrmojo-FE mstrmojo-ConditionNode");R.style.zIndex=20;return R;},_ndsToMove:J});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.hash","mstrmojo.fx","mstrmojo.TreeNode");var K=mstrmojo.dom,E={0:"closed",1:"opened",2:"leaf"},I=function(R,Q){var N=R.style,M,P,L,S,O;N.display="block";N.height="auto";M=R.offsetHeight;P=Q?M:0;L=Q?0:M;S=Q?"block":"none";N.overflow="hidden";O=new mstrmojo.fx.AnimateProp({target:R,props:{height:{start:L,stop:P,suffix:"px",fn:Math.round,ease:mstrmojo.ease.linear}},onEnd:function(){N.height="auto";N.display=S;},interval:30,duration:300});O.play();};mstrmojo.TreeBrowserNode=mstrmojo.declare(mstrmojo.TreeNode,null,{scriptClass:"mstrmojo.TreeBrowserNode",markupString:'<div id="{@id}" class="mstrmojo-TreeNode {@cssClass}" style="{@cssText}" mstrAttach:mousedown,mouseup,click,dblclick><div class="mstrmojo-TreeNode-div"><img class="mstrmojo-TreeNode-state" src="../images/1ptrans.gif" /><img class="mstrmojo-TreeNode-checkBox" src="../images/1ptrans.gif" /><span class="mstrmojo-TreeNode-text {@textCssClass}"></span></div><div class="mstrmojo-TreeNode-itemsContainer">{@itemsHtml}</div></div>',markupSlots:mstrmojo.hash.copy({displayNode:function(){return this.domNode.firstChild;},checkBoxNode:function(){return this.domNode.firstChild.childNodes[1];}},mstrmojo.TreeNode.prototype.markupSlots),markupMethods:mstrmojo.hash.copy({onstateChange:function(L){this.stateNode.className="mstrmojo-TreeNode-state "+(E[this.state]||"closed");if(this.tree.anim&&this.contentRetrieved&&!L){I(this.itemsContainerNode,this.state===1);}else{this.itemsContainerNode.style.display=(this.state===1)?"block":"none";}}},mstrmojo.TreeNode.prototype.markupMethods),blockBegin:1,allowUnlistedValues:false,contentRetrieved:false,_set_items:function(N,M){var L=this._super(N,M);if(L&&this.tree.anim){I(this.itemsContainerNode,true);}return L;},onstateChange:function J(){var L=this.tree;if(!this.contentRetrieved&&(this.state==1)){this.set("items",[L.loadingItemCreaterFunc()]);L.getContent(this,this.blockBegin);}else{if((this.state==1)&&L.onNodeExpand){L.onNodeExpand(this);}if((this.state==0)&&L.onNodeCollapse){L.onNodeCollapse(this);}}},toggleState:function G(){if(this.state!==2){this.set("state",this.state===1?0:1);}},preclick:function H(L){K.clearBrowserHighlights(L.hWin);return false;},predblclick:function D(L){K.clearBrowserHighlights(L.hWin);return false;},premousedown:function B(M){var R=mstrmojo.dom,O=mstrmojo.dom.eventTarget(M.hWin,M.e),L=this.tree,N=(this.state==2),Q=R.contains(this.itemsContainerNode,R.eventTarget(M.hWin,M.e),true,this.domNode),P=(L.branchClickPolicy==mstrmojo.TreeBrowserEnum.BRANCH_POLICY_TOGGLE);if((this.isSpecialNode()||!(O==this.checkBoxNode||((O==this.textNode||O==this.displayNode)&&(N||!P))))&&!this.draggable){R.stopPropogation(M.hWin,M.e);}if((O==this.stateNode)||((O==this.textNode||O==this.displayNode)&&!N&&P)){if(!N){this.toggleState();}}else{if(O==this.checkBoxNode||Q){if(this._super){this._super(M);}}else{this.handleNodeClicked();}}},isSpecialNode:function C(){var L=this.data&&this.data.st;return(L<0);},handleNodeClicked:function F(){var L=this.tree,M=this.parent,N=this.data;switch(N&&N.st){case"-4":mstrmojo.css.addClass(this.textNode,["loading"]);L.getContent(M,M.blockBegin-L.blockCount);break;case"-3":mstrmojo.css.addClass(this.textNode,["loading"]);L.getContent(M,M.blockBegin+L.blockCount);break;case"-1":case"-2":break;default:if(L.handleNodeClicked){L.handleNodeClicked(N);}}},init:function(L){this._super(L);this.set("state",this.tree.isBranch(this.data)?0:2);},postBuildRendering:function A(){if(this._super){this._super();}var L=function(M){K.preventDefault(window,M||window.event);return false;};K.attachEvent(this.domNode,"mousedown",L);if(this.isSpecialNode()||this.tree.noCheckBox){this.checkBoxNode.style.display="none";}}});})();(function(){mstrmojo.requiresCls("mstrmojo.HTMLButton","mstrmojo._HasContextMenu","mstrmojo.ContextMenu");mstrmojo.MenuButton=mstrmojo.declare(mstrmojo.Button,[mstrmojo._HasContextMenu],{preclick:function A(B){this.showContextMenu();},openPopupMenu:function(){this.showContextMenu();}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.css","mstrmojo.string","mstrmojo._HasPopup","mstrmojo.ListBase","mstrmojo.Popup","mstrmojo.Editor","mstrmojo.SuggestionList");function D(a,X){var Z=this.list,V=Z.selectedIndex,U=Z.items.length,W=a?U-1:0;if(V===W){Z.clearSelect();return ;}if(V===null||V<0){V=a?0:U-1;}else{V+=a?1:-1;}if(X){var Y=Z.items[V];while(Y&&Y.type==="dummy"){if(V===W){Z.clearSelect();return ;}V+=a?1:-1;Y=Z.items[V];}}Z.singleSelect(V);}mstrmojo._HasSuggestion=mstrmojo.provide("mstrmojo._HasSuggestion",mstrmojo.hash.copy(mstrmojo._HasPopup,{blockBegin:1,blockCount:-1,suggestCount:15,autoSelect:true,itemField:"n",candidates:null,suggestionShown:false,suggestionItems:null,_last_hit:null,_request_pattern:null,browseItemVisible:false,folderLinksContextId:25,browsableTypes:"1,8",REQUEST_THRESHOLD:20,noCache:false,disableClick:false,getCandidatesThroughTaskCall:mstrmojo.emptyFn,onSuggestionItemSelect:function J(U){this.hideSuggestion();},getSearchPattern:function T(){return"";},getSuggestionPos:function N(){return{left:"100px",top:"100px"};},getSuggestionTarget:function G(){return this;},showSuggestion:function B(V){var U=this.getSuggestion(V);if(!this.noCache&&U!==-1){this.updateSuggestion(U);}},hideSuggestion:function C(){this.suggestionShown=false;if(this.suggestionPopup.visible){this.suggestionPopup.close();}},getSelected:function M(){return(this.suggestionShown)?this._lastOpened.getSelected():null;},nextHighlight:function E(U){if(this.suggestionShown){this._lastOpened.nextHighlight(U);}},preHighlight:function H(U){if(this.suggestionShown){this._lastOpened.preHighlight(U);}},getSuggestion:function S(h){var d=this.candidates,a=d&&d.items,X=d&&d.isComplete,g=this._last_hit;if(!this.noCache&&(d||g)){var f=this.filterCandidates(a,h,this.REQUEST_THRESHOLD),b=f.length,e=this.suggestCount,U=false;if(!X&&b<e){var V=g&&g.pattern;if(g&&V&&(h.indexOf(V)>-1)){U=true;var k=this.filterCandidates(g.items,h,this.REQUEST_THRESHOLD),Y=k&&k.length,W=mstrmojo.array,j=this.itemField,Z;for(Z=0;Z<Y;Z++){if(W.find(f,j,k[Z][j])===-1){f.push(k[Z]);}}b=f.length;}}if(!X&&((h.length>2&&b<this.REQUEST_THRESHOLD)||(b<e))){this.requestCandidates(h);return -1;}return(b<e)?f:f.slice(0,e);}this.requestCandidates(h);return -1;},requestCandidates:function A(U){this._request_pattern=U;var X=this,V=this.getSuggestionTarget(),W={success:function(e){if(!e){return ;}var d=X.getSuggestionTarget();if(!d||(V!==d)){return ;}var j=d.getSearchPattern(),a=e.items;X._last_hit={items:a,pattern:U};X.sz=e.sz;if(!X.noCache&&a){var f=(X.candidates&&X.candidates.items)||[],g=[].concat(a),b=a.length,Z;for(Z=0;Z<b;Z++){var Y=g[Z];if(mstrmojo.array.indexOf(f,Y)>-1){mstrmojo.array.removeItem(a,Y);}}if(X.candidates){X.candidates.items=f.concat(a);}}if((j||j==="")&&j.indexOf(U)>-1){var h=X.filterCandidates(a,j);X.updateSuggestion(h);}},failure:function(Y){if(Y.getResponseHeader){mstrmojo.alert(Y.getResponseHeader("X-MSTR-TaskFailureMsg"));}}};this.getCandidatesThroughTaskCall({pattern:U,blockBegin:this.blockBegin,blockCount:this.blockCount,isSuggest:true},W);},filterCandidates:function Q(X,W,U){U=U||this.suggestCount;W=mstrmojo.string.regEscape(W);var Y=this.itemField,V=mstrmojo.array.filter(X,function(Z){return(new RegExp("\\s"+W+"|^"+W,"i")).test(Z[Y]);},{max:U});return V;},getHighlightedText:function P(W,Z){if(!this.highlightPattern||mstrmojo.string.isEmpty(W)){return Z;}try{if(!this.nameWildcards||mstr.$A.find([2,32],parseInt(this.nameWildcards,10))>-1){Z=Z.replace(new RegExp("(^|\\s)("+W+")","gi"),"$1<b>$2</b>");}else{var Y=W.split(" "),V,U;for(V=0,U=Y.length;V<U;V++){if(Y[V]!==""){Z=Z.replace(new RegExp("("+Y[V]+")","gi"),"<b>$1</b>");}}}}catch(X){}return Z;},updateSuggestion:function O(X){var V=X&&X.length,U=this.browseItemVisible;if(V||U){if(U){X=X||[];X.push({n:"Browse...",t:-99,cssClass:(V?"br":"bro")});}this.set("suggestionItems",X);if(this.suggestionShown){var W=this._lastOpened;if(W&&W.nudge){W.nudge();}if(this.autoSelect&&W){W.list.singleSelect(0);}}else{this.openPopup("suggestionPopup",this.getSuggestionPos());this.suggestionShown=true;}}else{this.hideSuggestion();}},ob:{scriptClass:"mstrmojo.Editor",title:mstrmojo.desc(5298,"Select an Object"),help:"Select_Objects_dialog_box_.htm",onClose:function(){var U=this.opener;if(U&&U.onBrowserClose){U.onBrowserClose();}},onOpen:function(){var U=this.opener;if(U&&U.onBrowserOpen){U.onBrowserOpen();}},children:[{scriptClass:"mstrmojo.ObjectBrowser",alias:"browser",fishEyeVisible:false,closeable:false,closeOnSelect:false}]},onBrowserClose:function L(){this.browserShown=false;},handleSuggestionItemSelect:function K(U,V){if(this.browseItemVisible&&U.t===-99){this.hideSuggestion();mstrmojo.requiresCls("mstrmojo.ObjectBrowser");var W=this.zIndex;this.openPopup("ob",{zIndex:(W&&(W+10))||110});this.ob.browser.browse(mstrmojo.hash.copy(V,{folderLinksContextId:this.folderLinksContextId,onSelectCB:[this,"onSuggestionItemSelect"],browsableTypes:this.browsableTypes}));this.browserShown=true;}else{this.onSuggestionItemSelect(U);}},highlightPattern:true,suggestionPopupCssClss:"",suggestionPopup:{scriptClass:"mstrmojo.Popup",cssClass:"mstrmojo-ObjectInputBox-suggest",autoClose:true,locksHover:true,nextHighlight:function(U){D.call(this,true,U);},preHighlight:function(U){D.call(this,false,U);},getSelected:function M(){var U=this.list;return U.items[U.selectedIndex];},onOpen:function I(){var U=this.opener;if(U){mstrmojo.css.addClass(this.domNode,U.suggestionPopupCssClss||"");if(U.autoSelect){this.list.singleSelect(0);}if(U.nudge){U.nudge(this);}}},onClose:function F(){this.list.clearSelect();var U=this.opener;if(U){U.suggestionShown=false;mstrmojo.css.removeClass(this.domNode,U.suggestionPopupCssClss||"");}}},suggestionListClass:"mstrmojo.SuggestionList",postApplyProperties:function R(){this.suggestionPopup.children=[{scriptClass:this.suggestionListClass,alias:"list",cssClass:"mstrmojo-suggest-list"}];}}));}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Editor","mstrmojo.Box","mstrmojo.CheckBox","mstrmojo.Label","mstrmojo.Button");mstrmojo.requiresDescs(4531,8262,12437,12438,12439,15645);var D=mstrmojo.hash;var E={Automatic:0,Manual:3};var J={Automatic:-1,False:0,True:1};var H={Automatic:-1,False:1,True:2};var F={mps:{afb:J.False,sfb:H.False,fbf:E.Automatic}};var B=["mps"],L=function(Q,O){var P=this.parent.parent,M=P.cloneModel,N=M.mps||{};if(N[Q]!==O){N[Q]=O;if(Q==="fbf"&&O===E.Manual){N.afb=(N.afb===J.Automatic)?J.False:N.afb;N.sfb=(N.sfb===H.Automatic)?H.False:N.sfb;}P.set("dirty",true);}};var I=function(M){return M&&M.afb===J.False&&M.sfb===H.False&&M.fbf===E.Manual;};mstrmojo.ME.DerivedMetricOptions=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.ME.DerivedMetricOptions",cssClass:"mstrmojo-DerivedMetricOptions",dirty:false,init:function K(M){this._super(M);mstrmojo.css.addWidgetCssClass(this,"dme");},updateModel:function C(){var N=this.model,M=this.cloneModel,O=M.mps;if(O.fbf===E.Automatic){O.afb=J.Automatic;O.sfb=H.Automatic;}else{if(O.fbf===E.Manual){O.afb=O.afb===J.Automatic?J.False:O.afb;O.sfb=O.sfb===H.Automatic?H.False:O.sfb;}}O.dirty=true;N.mps=M.mps;},onOpen:function A(){var O=this.cloneModel||{};D.make(O,mstrmojo.Obj);var N=mstrmojo.hash.copy(this.model,mstrmojo.hash.copy(F)),P,M;for(P=0,M=B.length;P<M;P++){O.set(B[P],D.clone(N[B[P]]));}this.cloneModel=null;this.set("cloneModel",O);},onClose:function G(){this.set("dirty",false);delete this.cloneModel;},children:[{scriptClass:"mstrmojo.HBox",alias:"fbFlagBox",cssClass:"mstrmojo-DerivedMetricOptions-aggBox",children:[{scriptClass:"mstrmojo.Label",cssText:"white-space: nowrap; margin-right: 8px; vertical-align: top;",text:mstrmojo.desc(12437,"Aggregation And Subtotal Behavior:")},{scriptClass:"mstrmojo.Pulldown",alias:"fbFlag",cssText:"min-width: 100px;",cssClass:"mstrmojo-ME-Pulldown",popupCssClass:"mstrmojo-ME-Pulldown-Popup",itemIdField:"v",items:[{n:mstrmojo.desc(4531,"Automatic"),v:E.Automatic},{n:mstrmojo.desc(8262,"Manual"),v:E.Manual}],bindings:{value:function(){return this.parent.parent.cloneModel.mps.fbf||E.Automatic;}},onvalueChange:function(M){if(M.value!==undefined&&M.valueWas!==undefined){L.call(this,"fbf",M.value);}}}]},{scriptClass:"mstrmojo.Box",cssText:"height: 30px",cssClass:"mstrmojo-DerivedMetricOptions-afbBox",children:[{scriptClass:"mstrmojo.CheckBox",alias:"afb",cssDisplay:"inline-block",label:mstrmojo.desc(12438,"Aggregate From Base"),bindings:{visible:function(){return this.parent.parent.fbFlagBox.fbFlag.value===E.Manual;},checked:function(){return this.parent.parent.cloneModel.mps.afb===J.True;}},onclick:function(M){var N=this.parent.parent.fbFlagBox.fbFlag.value;L.call(this,"afb",N===E.Automatic?J.Automatic:(this.checked?J.True:J.False));}},{scriptClass:"mstrmojo.CheckBox",alias:"sfb",cssDisplay:"inline-block",label:mstrmojo.desc(12439,"Subtotals From Base"),oncheckedChange:function(M){var N=this.parent.afb;if(M.value){if(!N.checked){N.checked=J.True;N.onclick();}if(N.inputNode){N.inputNode.checked=true;N.inputNode.disabled=true;}}else{if(N.inputNode){N.inputNode.disabled=false;}}},bindings:{visible:function(){return this.parent.parent.fbFlagBox.fbFlag.value===E.Manual;},checked:function(){return this.parent.parent.cloneModel.mps.sfb===H.True;}},onclick:function(){var M=this.parent.parent.fbFlagBox.fbFlag.value;L.call(this,"sfb",M===E.Automatic?H.Automatic:(this.checked?H.True:H.False));}}]},{scriptClass:"mstrmojo.HBox",alias:"buttonBar",slot:"buttonNode",cssClass:"mstrmojo-Editor-buttonBar",cellCssClass:"subBox",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Editor-button mstrmojo-WebButton hot",alias:"saveokButton",text:mstrmojo.desc(2397,"OK"),bindings:{enabled:function(){return this.parent.parent.dirty;}},onclick:function(){var P=this.parent.parent,R=P&&P.opener;var Q=function(){P.updateModel();if(P.onOK){P.onOK();}P.close();};var M=P.cloneModel,N=M&&M.mps;if(I(N)&&R&&R.hasConditionFilter&&R.hasConditionFilter()){mstrmojo.warn(mstrmojo.desc(15645,"There is a filter defined for this metric, if you proceed this filter will be removed."),{confirmBtn:{t:mstrmojo.desc(212,"Continue"),fn:function O(){Q();R.clearConditionFilter();},hot:false},cancelBtn:{t:mstrmojo.desc(221,"Cancel"),fn:mstrmojo.emptyFn,hot:true}});}else{Q();if(R&&R.onMpsChange){R.onMpsChange();}}}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Editor-button mstrmojo-WebButton",text:mstrmojo.desc(2399,"Cancel"),onclick:function(){var M=this.parent.parent;M.close();}}]}]});mstrmojo.ME.DerivedMetricOptions.isNonAFB=I;}());(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.HTMLButton","mstrmojo.Label","mstrmojo.TextBox","mstrmojo.TextArea","mstrmojo.Table","mstrmojo.HBox","mstrmojo.Editor");function C(E,F){var D=this;if(mstrApp&&mstrApp.serverRequest){mstrApp.serverRequest(E,F,{silent:true});}else{mstrmojo.xhr.request("POST",D.path,F,E,undefined,D.XServer,D.baseParams);}}function A(H,I,G,D){var E=this,F={taskId:"createFolder",taskContentType:"json",folderID:H,name:I,description:G};C.call(E,F,D);}function B(E,I,F){if(!E){mstrmojo.alert(mstrmojo.desc(3380));return false;}var G=this,H=G.fId,D={success:function(J){G.contPanel.name.set("value","");G.contPanel.desc.set("value","");if(G.okFn){G.okFn(J,F);}},failure:function(J){var K="";if(J.getResponseHeader){K=J.getResponseHeader("X-MSTR-TaskFailureMsg");}else{if(J.message){K=J.message;}}K&&mstrmojo.alert(K);}};if(mstrApp.isSingleTier&&this.dp){this.dp.newFolder(H,E,I,D);}else{A.call(G,H,E,I,D);}}mstrmojo.NewFolderEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.NewFolderEditor",cssClass:"mstrmojo-NewFolderEditor",title:mstrmojo.desc(663,"Create Folder"),help:"Create_a_new_folder.htm",navigateAfter:false,okFn:mstrmojo.emptyFn,path:mstrConfig.taskURL,fId:null,children:[{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-Input-Panel",rows:2,cols:2,alias:"contPanel",children:[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-Name-Label",slot:"0,0",text:mstrmojo.desc(2211,"Name:")},{scriptClass:"mstrmojo.TextBox",slot:"0,1",value:mstrmojo.desc(8116,"New Folder"),alias:"name",cssClass:"mstrmojo-SaveAsEditor-nameInput"},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-Desc-Label",slot:"1,0",text:mstrmojo.desc(1154,"Description:")},{scriptClass:"mstrmojo.TextArea",cssClass:"mstrmojo-SaveAsEditor-descInput",slot:"1,1",alias:"desc",rows:5}]},{scriptClass:"mstrmojo.HBox",alias:"btns",slot:"buttonNode",cssClass:"mstrmojo-Editor-buttonBar",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton hot",alias:"ok",text:mstrmojo.desc(1442,"OK"),onclick:function(){var E=this.parent.parent,G=E&&E.opener,D=E.contPanel.name.value,F=E.contPanel.desc.value;if(!B.call(E,D,F,E.navigateAfter)){E.close();}}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton",alias:"cancel",text:mstrmojo.desc(221,"Cancel"),onclick:function(){this.parent.parent.close();}}]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.expr","mstrmojo.func","mstrmojo.string","mstrmojo.Box","mstrmojo.HBox","mstrmojo.TextBox","mstrmojo.Button","mstrmojo.Label","mstrmojo._HasLayout","mstrmojo.Editor","mstrmojo.ui.CheckList","mstrmojo.ui.ToggleButton","mstrmojo.mstr.EnumDSSXMLObjectTypes");mstrmojo.requiresDescs(10,1763,15120,15801);var L=mstrmojo.array,Y=mstrmojo.css,D=mstrmojo.dom,Q=mstrmojo.expr,T=mstrmojo.func,B=mstrmojo.string,R=mstrmojo.Button.newWebButton,a=mstrmojo.mstr.EnumDSSXMLObjectTypes;var V=mstrmojo.desc(1763,"Clear All");mstrmojo.vi.ui.IncCheckList=mstrmojo.declare(mstrmojo.ui.CheckList,[mstrmojo.ui._IsIncFetchList],{scriptClass:"mstrmojo.vi.ui.IncCheckList",allowUnlistedValues:false,cssClass:"elementsList",initElements:function X(d){var c=this.ifDataHelper,b=this;if(!c){return ;}d=T.wrapMethods({success:function(e){b.clearSelect(true);b.set("items",[]);b.initScroll();b.addItems(e&&e.es);}},d);c.getItems(1,d,{hideFailureErr:true});},addItems:function N(b){this._super(b||[]);this.postAddItems();this.updateScrollbars();},postAddItems:mstrmojo.emptyFn});function F(b){return !L.filterOne(b.fs,function(c){return c.isbf&&(!!c.dtp?c.dtp:Q.mapBaseFormTypeToDataType(c.bftp))!==Q.DTP.CHAR;});}mstrmojo.vi.ui.ElementsBrowser=mstrmojo.declare(mstrmojo.Box,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.vi.ui.ElementsBrowser",markupString:'<div id="{@id}" class="mstrmojo-Box mstrmojo-ui-vi-ElementsBrowser {@cssClass}" style="{@cssText}"><div></div><div></div><div></div></div>',markupSlots:{containerNode:function(){return this.domNode;},searchBoxNode:function(){return this.domNode.firstChild;},buttonPanelNode:function(){return this.domNode.childNodes[1];},elementListNode:function(){return this.domNode.childNodes[2];}},layoutConfig:{h:{searchBoxNode:"26px",buttonPanelNode:"36px",elementListNode:"100%"},w:{searchBoxNode:"100%",buttonPanelNode:"100%",elementListNode:"100%"},xt:true},onBrowseElementsFailure:mstrmojo.emptyFn,onUpdateBrowseElementsParams:mstrmojo.emptyFn,children:[{scriptClass:"mstrmojo.HBox",slot:"searchBoxNode",alias:"util",cssClass:"elemsBrowser-utils-bar",children:[{scriptClass:"mstrmojo.Box",cssClass:"eb-box-search",alias:"box",children:[{scriptClass:"mstrmojo.TextBox",alias:"searchBox",hint:mstrmojo.desc(10,"Search"),cssClass:"eb-searchBox",valueChangeDelay:300,onEnter:function I(){var c=this.value,b=this.parent.parent.parent;b.set("searchPattern",c);},onvalueChange:function P(){var c=this.value,b=this.parent.parent.parent;b.set("searchPattern",c);}},{scriptClass:"mstrmojo.Button",cssClass:"eb-searchBox-clear",text:"",onclick:function(){var b=this.parent.searchBox;b.set("value","");b.cleanUp();b.focus();},bindings:{visible:"(this.parent.searchBox.value || '').length > 0"}}]},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(15120,"View Selected"),cssClass:"eb-viewSelected",title:mstrmojo.desc(15120,"View Selected")},{scriptClass:"mstrmojo.ui.ToggleButton",alias:"toggleSelected",oncheckedChange:function J(){var b=this.parent.parent;b.onsearchPatternChange();}}]},{scriptClass:"mstrmojo.HBox",slot:"buttonPanelNode",alias:"buttonPanel",cssClass:"elemsBrowser-button-panel",children:[{scriptClass:"mstrmojo.Button",text:V,title:V,alias:"clearAllBtn",cssClass:"eb-clearAll",useRichTooltip:true,updateTooltipConfig:function U(){var b=D.position(this.domNode);this.richTooltip={content:mstrmojo.desc(16192,"This function is currently not supported for non-text elements in the searching result."),cssClass:"vi-info vi-tooltip-C",left:b.x+60,top:b.y+5};},onclick:function(){var c=this.parent.parent,e=c.elementList;e.clearSelect(false);var b=c.getLocalSearchItems(),d=c.itemIdField;c.onItemsSelectionChange({added:[],removed:b,itemIdField:d});L.removeItems(c.selectedItems,d,b);},showTooltip:function C(d,c){var b=this.parent.parent;if(!this.enabled&&!B.isEmpty(b.getSearchBox().value)&&!F(b.attribute)){mstrmojo._HasTooltip.showTooltip.call(this,d,c);}}},]},{scriptClass:"mstrmojo.vi.ui.IncCheckList",alias:"elementList",slot:"elementListNode",itemIdField:null,bindings:{ifDataHelper:"this.parent.ifDataHelper",itemIdField:"this.parent.itemIdField"},postAddItems:function(){var b=this.parent.selectedItems||[];this.setSelectedItems(b);}}],itemIdField:"v",ifDataSource:null,searchPattern:null,ifDataHelper:null,attribute:null,attributeId:null,selectedItems:[],init:function(b){this._super(b);this.set("ifDataHelper",new mstrmojo.mstr.DocElementDataHelper({source:this.ifDataSource}));if(this.ifDataSource&&this.attribute){this.onattributeChange();}this.elementList.attachEventListener("selectionChange",this.id,"onElementsListchange");},updateClearAllBtnState:function O(){this.buttonPanel&&this.buttonPanel.clearAllBtn.set("enabled",(B.isEmpty(this.getSearchBox().value)||F(this.attribute))&&(this.getLocalSearchItems().length>0));},onElementsListchange:function H(h){var g=h&&h.added||[],e=h&&h.removed||[],f=this.elementList.items,b=this.itemIdField;if(!this.selectedItems){this.selectedItems=[];}var d=this.selectedItems,c=[],j=L.get(f,e);L.removeItems(d,b,j);var k;L.forEach(g,function(l){k=f[l];if(k&&L.find(d,b,k[b])<0){d.push(k);c.push(k);}});this.updateClearAllBtnState();if(j.length>0||c.length>0){this.onItemsSelectionChange({added:c,removed:j,itemIdField:b});}},onItemsSelectionChange:mstrmojo.emptyFn,updateBrowseConfig:function K(){var d=this,h=this.attributeId,b=this.attribute,g=this.searchPattern,f=function(k,l){k.set("textValid",!l);k.domNode.title=B.encodeHtmlString(l,true);};if(!h){return ;}this.ifDataHelper.set("items",null);var c={attributeID:h};if(g&&g!==""){c.searchPattern=g;c.matchCase=false;c.otp=b.t||a.Attribute;}this.onUpdateBrowseElementsParams(c);this.ifDataHelper.set("browseConfig",c);var j=d.getSearchBox();this.elementList.initElements({success:function(k){f(j,"");},failure:function(p){var m=parseInt(p.code,10)+4294967296,o=2147762269,k=2147762227,l=2147762262,n=2147894808;if(m===k||m===l){f(j,"");}else{if(m!==o){var q=(m!==n)?d.onBrowseElementsFailure.bind(d):null;var r={shortDesc:mstrmojo.desc(15402,"This object is not available at this time."),longDesc:p.message},t={title:mstrmojo.desc(15403,"Invalid Object"),buttons:[R(mstrmojo.desc(13197,"Got it"),q,false)]};mstrmojo.error(r,undefined,t);f(j,"");}else{f(j,p.message);}}}});var e=this.util&&this.util.toggleSelected;if(e){e.checked=false;Y.toggleClass(e.domNode,"checked",false);}this.updateClearAllBtnState();},isObjSearchable:function E(b){return !(b&&b.t===a.Consolidation);},onattributeChange:function A(){var b=this.attribute;this.attributeId=b&&b.did;this.searchPattern=null;this.selectedItems=[];this.updateBrowseConfig();var d=this.getSearchBox(),c=this.isObjSearchable(b);if(d){d.set("enabled",c);d.set("hint",c?mstrmojo.desc(10,"Search"):mstrmojo.desc(15801,"Not searchable"));}},getSearchBox:function M(){var b=this.util,c=this.util&&this.util.box;return c&&c.searchBox;},onifDataSourceChange:function G(){this.ifDataHelper.set("source",this.ifDataSource);this.ifDataHelper.set("items",null);},onsearchPatternChange:function W(){var c=this.util&&this.util.toggleSelected;if(!c||!c.checked){this.updateBrowseConfig();}else{var b=this.getLocalSearchItems();this.elementList.clearSelect(true);this.elementList.set("items",[]);this.elementList.addItems(b);this.updateClearAllBtnState();}},getLocalSearchItems:function S(){var c=[],b;if(this.searchPattern&&this.searchPattern!==""){var d=this.searchPattern.toLowerCase();L.forEach(this.selectedItems,function(e){b=(e.n||"").toLowerCase();if(b.indexOf(d)>-1){c.push(e);}});}else{c=(this.selectedItems||[]).slice(0);}return c;},_set_selectedItems:function Z(f,b){var e=this.selectedItems,d=this.itemIdField;b=b||[];this.selectedItems=b;this.updateClearAllBtnState();if(e.length!==b.length){return true;}var c=L.intersection(e,b,d);return c.length!==e.length;},onselectedItemsChange:function(){this.elementList.setSelectedItems(this.selectedItems);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.menus.PopupConfig","mstrmojo.ui.menus.MenuEditor");mstrmojo.ui.menus.EditorConfig=mstrmojo.declare(mstrmojo.ui.menus.PopupConfig,[mstrmojo._HasBindings],{scriptClass:"mstrmojo.ui.menus.EditorConfig",data:null,fnOk:null,fnCancel:null,okEnabled:true,cancelEnabled:true,okVisible:true,cancelVisible:true,init:function D(E){this._super(E);if(this.data&&!mstrmojo.all[this.data.id]){mstrmojo.hash.make(this.data,mstrmojo.Obj);}this.initBindings();},clear:function A(){this._super();this.data=null;this.fnOk=this.fnCancel=mstrmojo.emptyFn;},newInstance:function C(){return new mstrmojo.ui.menus.MenuEditor({popupConfig:this});},destroy:function B(){if(this.data){this.data.destroy();}this.destroyBindings();this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.ValidationTextBox","mstrmojo.hash");var A=mstrmojo.hash;mstrmojo.ui.editors.controls.ValidationTextBox=mstrmojo.declare(mstrmojo.ValidationTextBox,null,{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",errRevert:true,dtp:null,validationDelay:3000,orignText:null,trigger:mstrmojo.validation.TRIGGER.ONKEYUP,init:function(B){B=B||{};B.constraints=B.constraints||{};B.constraints.trigger=this.trigger;this._super(B);},prekeyup:function(B){if(B.e.keyCode===13){this.blur();return ;}this._super(B);},onfocus:function(){this.orignText=this.value;},onblur:function(){if(this.value!=this.orignText){this.validate();}},validate:function(){this._super();this.orignText=this.value;this.clearValDelayTimer();},preinput:mstrmojo.emptyFn,postinput:function(){var B=this.doValidation(this.value);if(B.code<=mstrmojo.validation.STATUSCODE.VALID){this.clearValidation();if(!this.errRevert){this.hideTooltip();}}},updateTooltipConfig:function(){this.richTooltip={posType:mstrmojo.tooltip.POS_BOTTOMLEFT,cssClass:"vi-warning vi-tooltip-C vi-calculation-warning",left:this.domNode.offsetWidth+12,top:this.domNode.offsetHeight+5,refNode:this.domNode,content:mstrmojo.desc(13819,"Invalid input")};},onInvalid:function(){if(!this.errRevert){this.hideTooltip();this.showTooltip();}else{this.clearValidation();this.set("value",this.orignText);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.hash","mstrmojo.Box","mstrmojo.Label","mstrmojo.expr","mstrmojo.ValidationTextBox","mstrmojo.Dialog","mstrmojo.cookies","mstrmojo.string");mstrmojo.requiresDescs(17,18,221,9772,11773,14028,16220,16227,14138,14139,14140,14149,14522,14523,14524,16224,14526,14527);var M=mstrmojo.css,V=mstrmojo.dom,I=mstrmojo.hash;var D=mstrmojo.validation,G=D.STATUSCODE,H=D.TRIGGER,U=D.VALIDATOR,K=mstrmojo.expr.DTP;var b={intervalCtr:0,qrLoaded:false,maxPollingAttempts:80,timeDelay:3000};var Q={mini_badge:"#ddd",mini_badge_icon:"../style/mstr/images/badge-placeholder-m.png",t_color:"#797979",appName:"",name:""};var F={firstName:"",badgeId:""};var J={duration:undefined,elem:undefined,callback:undefined,timerInterval:null,init:function(d,c,e){this.duration=d;this.elem=c;this.callback=e;},startTimer:function(){this.stopTimer();var h=Date.now(),e,c,f;var d=this;function g(){e=d.duration-(((Date.now()-h)/1000)|0);c=(e/60)|0;f=(e%60)|0;c=c<10?"0"+c:c;f=f<10?"0"+f:f;d.elem.set("text",c+":"+f);if(e<=0){h=Date.now()+1000;d.callback();d.stopTimer();}}g();this.timerInterval=setInterval(g,1000);},stopTimer:function(){if(this.timerInterval){clearInterval(this.timerInterval);}}};function B(c){c.sn=this.serverName||mstrConfig.serverName;c.sp=this.serverPort||mstrConfig.serverPort;c.connectionId=this.connectionId||"";return c;}function R(){this.set("expired",true);this.usherProps.qrLoaded=false;}function N(){try{var d=this.usherProps;var c=this;if(d.qrLoaded){if(d.intervalCtr>d.maxPollingAttempts){R.call(c);}else{clearTimeout(this.pullTimeout);this.pullTimeout=setTimeout(function(){d.intervalCtr+=1;if(!c.stopPolling){W.call(c);}},d.timeDelay);}}}catch(f){}}function P(e,d,c){if(mstrApp.serverRequest){mstrApp.serverRequest(e,d,c);}else{mstrmojo.xhr.request("POST",mstrConfig.taskURL,d,e);}}function W(){var d=this,e=this.usherProps,f={taskId:"usherLoginWeb",pollOnly:"true",server:this.serverName||mstrConfig.serverName,port:this.serverPort||mstrConfig.serverPort,project:this.projectName||mstrConfig.projectName,connectionId:this.connectionId},c={success:function(h){try{if(h.status=="invalid"){N.call(d);}else{if(h.status=="success"){function g(m){d.onUsherLogin(m);e.qrLoaded=false;}if(d.rememberMe===true){var j={success:function(m){g(m);},failure:function(m){d.onUsherError(m);}};var l={taskId:"usherRememberMe"};l.deviceId=mstrmojo.cookies.getCookieSetting("usher_sso_device")?mstrmojo.cookies.getCookieSetting("usher_sso_device"):"";P(l,j,{doNotHold:true});}else{g(h);}}}}catch(k){mstrmojo.alert("usherPollForScan:\n "+k.messsage);}},failure:function(g){R.call(d);d.onUsherError(g);}};P(f,c,{doNotHold:true});}function Z(c){this.userDetails.set("text",c||"");}function L(c){var d=this;d.loginButton.set("visible",c);d.loginNotificationBox.set("visible",!c);}function C(){var f=this.usherProps;var e=this.notificationTimer;var d=this,c={success:function(j){try{if(j.status==1){function m(){L.call(d,true);}function h(){if(d.pullTimeout){clearTimeout(d.pullTimeout);}d.usherProps.intervalCtr=0;f.qrLoaded=true;N.call(d);}var l=60*5;e.init(l,d.loginNotificationBox.timer,m);e.startTimer();L.call(d,false);h();}else{d.onUsherError(j);}}catch(k){mstrmojo.alert("Error:\n"+k.message);}},failure:function(h){d.onUsherError(h);}},g={taskId:"usherNotifyMe"};g.deviceId=mstrmojo.cookies.getCookieSetting("usher_sso_device")?mstrmojo.cookies.getCookieSetting("usher_sso_device"):"";P(B.call(this,g),c,{doNotHold:true});}function A(){var d=this,c={success:function(f){try{d.set("notificationMode",false);d.reloadQR();}catch(g){mstrmojo.alert("Error:\n"+g.messsage);}},failure:function(f){d.onUsherError(f);}},e={taskId:"usherRememberMe",rememberMe:false};if(d.userInfo.badgeId!==""){e.badgeId=d.userInfo.badgeId;}e.deviceId=mstrmojo.cookies.getCookieSetting("usher_sso_device")?mstrmojo.cookies.getCookieSetting("usher_sso_device"):"";P(B.call(this,e),c,{doNotHold:true});}function O(g){if(this.notificationMode==true&&!g){return ;}var e=this.usherProps;this.showQRLoading(true);var d=this,c={success:function(j){try{if(j.img){d.set("notificationMode",false);d.updateQRCode(j.img);d.set("badge",j.badgeInfo&&j.badgeInfo[0]);e.intervalCtr=0;e.qrLoaded=true;this.stopPolling=false;N.call(d);}else{var k=JSON.parse(j.data);var h=k.pnEnabled||k.isPNEnabled;d.set("isPnEnabled",h);if(k.code||k.proximityBasedLogin){d.set("notificationMode",false);if(k.proximityBasedLogin&&!g){d.updateQRCodeProximity();d.set("proximityMode",true);}else{d.updateQRCode(k.code);d.set("proximityMode",false);}d.set("badge",j.badgeInfo&&j.badgeInfo[0]);e.intervalCtr=0;e.qrLoaded=true;this.stopPolling=false;mstrmojo.cookies.updateCookieSetting("usher_sso_device",j.device_id);N.call(d);}else{d.set("proximityMode",false);d.set("notificationMode",true);d.refresh.set("visible",false);if(k.photoData&&d.userInfoNode){d.userInfoNode.src="data:image/png;base64,"+k.photoData;}d.userInfo.firstName=k.firstName;d.userInfo.badgeId=k.badgeId;L.call(d,true);d.set("badge",j.badgeInfo&&j.badgeInfo[0]);}}}catch(l){mstrmojo.alert("getQRCode:\n "+l.messsage);}},failure:function(h){d.handleQRCodeError(h);R.call(d);d.onUsherError(h);},complete:function(){d.showQRLoading(false);}},f={taskId:"usherQRWeb"};f.deviceId=mstrmojo.cookies.getCookieSetting("usher_sso_device")?mstrmojo.cookies.getCookieSetting("usher_sso_device"):"";P(B.call(this,f),c,{doNotHold:true});}function E(){var e=this,h=this.registerButton,f=this.parent.badgeNode.childNodes[1];if(h.enabled){h.set("enabled",false);M.addClass(f,["anim"]);var c={},d={success:function(j){var k=j&&j.name==e.user.value;c={msg:k?mstrmojo.desc(14139,"You've successfully registered. Please check your email to continue.")+" "+mstrmojo.desc(16222,"Or perform a MicroStrategy badge recovery."):j.getResponseHeader("X-MSTR-TaskFailureMsg"),successful:k};},failure:function(j){c={msg:j.getResponseHeader("X-MSTR-TaskFailureMsg"),successful:false};},complete:function(){h.set("enabled",true);M.removeClass(f,["anim"]);e.set("regMsg",c);}},g={taskId:"usherRegUsr",server:this.serverName||mstrConfig.serverName,project:mstrConfig.projectName,port:this.serverPort||mstrConfig.serverPort,email:this.email.value,userid:this.user.value,password:this.pwd.value};P(g,d);}}function T(c){return mstrmojo.hash.copy(c,{scriptClass:"mstrmojo.ValidationTextBox",cssDisplay:"block",postCreate:function(){if(V.isIE9||V.isIE8||V.isIE7){this.emptyText=this.hint;}},onEnter:function(){E.call(this.parent);}});}mstrmojo.UsherLogin=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.UsherLogin",markupString:'<div id="{@id}" class="mstrmojo-UsherLogin-Container {@cssClass}" style="{@cssText}" ><div class="mstrmojo-UsherLogin-badge"><div class="icn"><img src="../images/1ptrans.gif"/></div><div class="dots"><div class="dot1"></div><div class="dot2"></div><div class="dot3"></div></div><div class="app"><img src="../style/mstr/images/badge-app.png"/></div></div><div class="mstrmojo-UsherLogin-badgeLabel"><div class="app-name"></div><div id="badgename" class="badge-name"></div></div><div class="mstrmojo-UsherLogin"><div class="mstrmojo-UsherLogin-QR mode"><img class="QR" src="../images/1ptrans.gif" alt="" /></div><div class="mstrmojo-UsherLogin-register mode"></div></div><div class="mstrmojo-UsherLogin-userInfo mode"><img class="userInfo" src="../images/1ptrans.gif" alt="" /></div><div class="mstrmojo-UsherLogin-notification"></div><div class="mstrmojo-UsherLogin-remember-setting"><div class = "mstrmojo-UsherLogin-remember"></div><div class = "mstrmojo-UsherLogin-forget"></div></div><div class="mstrmojo-UsherLogin-link"></div></div>',markupSlots:{containerNode:function(){return this.domNode;},badgeNode:function(){return this.domNode.firstChild;},badgeIconNode:function(){return this.domNode.firstChild.firstChild.firstChild;},badgeLabelNode:function(){return this.domNode.childNodes[1];},usherNode:function(){return this.domNode.childNodes[2];},qrNode:function(){return this.domNode.childNodes[2].firstChild;},qrCodeNode:function(){return this.domNode.childNodes[2].firstChild.firstChild;},refreshNode:function(){return this.domNode.childNodes[2].firstChild.lastChild;},registerNode:function(){return this.domNode.childNodes[2].lastChild;},userNode:function(){return this.domNode.childNodes[3];},userInfoNode:function(){return this.domNode.childNodes[3].firstChild;},notificationNode:function(){return this.domNode.childNodes[4];},rememberSettingsNode:function(){return this.domNode.childNodes[5];},rememberNode:function(){return this.domNode.childNodes[5].firstChild;},forgetNode:function(){return this.domNode.childNodes[5].lastChild;},linksNode:function(){return this.domNode.lastChild;}},markupMethods:{onqrCodeChange:function(){if(this.qrCodeNode){this.qrCodeNode.src=this.qrCode;}},onbadgeChange:function(){var d=this.badge||Q,h=d.badgeFormat,c=h&&JSON.parse(h)||{isnull:true},f=this.badgeLabelNode,e=this.badgeIconNode,g=this.domNode;if(this.showBadgeBackgroundImage){g.style.backgroundColor=c.mini_badge;if(c.bg_4){g.style.backgroundImage="url("+c.bg_4+")";}}e.src=c.mini_badge_icon||Q.mini_badge_icon;if(!c.isnull&&!c.mini_badge_icon){M.addClass(e.parentNode,"default");}f.firstChild.innerHTML=mstrmojo.string.encodeHtmlString(d.appName||Q.appName);f.lastChild.innerHTML=mstrmojo.string.encodeHtmlString(d.name||Q.name);f.lastChild.title=d.name||Q.name;f.style.color=c.t_color||Q.t_color;this.linksNode.style.color=c.t_color||Q.t_color;},onexpiredChange:function(){M.toggleClass(this.usherNode,"expired",this.expired);},onloadingChange:function(){M.toggleClass(this.usherNode,"loading",this.loading);},onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";if(this.visible&&this.canRequestQR()&&!this._lastVisible){O.call(this);}this.stopPolling=!this.visible;this._lastVisible=this.visible;},onnotificationModeChange:function(c){M.toggleClass(this.containerNode,"notificationMode",this.notificationMode);},onproximityModeChange:function(c){M.toggleClass(this.containerNode,"proximityMode",this.proximityMode);},onisPnEnabledChange:function(){this.hideRememberMe(!this.isPnEnabled);}},qrCode:"../images/1ptrans.gif",badge:Q,expired:false,onUsherLogin:mstrmojo.emptyFn,onUsherError:mstrmojo.emptyFn,showBadgeBackgroundImage:true,usherProps:null,serverName:null,serverPort:null,rememberMe:false,userInfo:null,notificationTimer:null,loadQR:false,notificationMode:false,isPnEnabled:false,init:function S(c){if(this._super){this._super(c);}M.addWidgetCssClass(this,"");this.usherProps=this.usherProps?I.copy(this.usherProps,I.clone(b)):I.clone(b);this.userInfo=this.userInfo?I.copy(this.userInfo,I.clone(F)):I.clone(F);this.notificationTimer=this.notificationTimer?I.copy(this.notificationTimer,I.clone(J)):I.clone(J);},destroy:function X(c){this.stopPolling=true;clearTimeout(this.pullTimeout);this._super(c);},canRequestQR:function(){return this.usherProps&&(this.loadQR||(this.serverName||mstrConfig.serverName));},showUserInfo:function(c){this.refresh.set("visible",false);this.refresh.set("visible",false);},updateQRCode:function(c){this.set("qrCode","data:image/png;base64,"+c);this.set("expired",false);this.refresh.set("visible",false);},updateQRCodeProximity:function(){this.set("qrCode","../images/WaitUsherRadar.gif");this.set("expired",false);this.refresh.set("visible",false);},handleQRCodeError:function(){this.set("qrCode","../style/mstr/images/msgError.gif");this.set("expired",true);this.refresh.set("visible",true);},showQRLoading:function Y(c){this.set("loading",c);if(c){this.refresh.set("visible",false);}},postBuildRendering:function(){this._super();this.registerForm.set("tabIndex",-1);},toggleRegister:function(c){this.registerVisible=(c!==undefined)?c:!this.registerVisible;M.toggleClass(this.usherNode,"show-register",this.registerVisible);this.registerLink.set("text",this.registerLink.texts[this.registerVisible?1:0]);if(this.isPnEnabled===true){this.hideRememberMe(this.registerVisible&&this.isPnEnabled);}},hideRememberMe:function(c){M.toggleClass(this.rememberSettingsNode,"hide-rememeber",c);},reloadQR:function(){if(this.canRequestQR()){if(this.pullTimeout){clearTimeout(this.pullTimeout);}this.usherProps.intervalCtr=0;this.usherProps.qrLoaded=false;if(this.visible){O.call(this);}}},children:[{scriptClass:"mstrmojo.Label",slot:"qrNode",alias:"refresh",cssClass:"refresh",text:mstrmojo.desc(14028,"Refresh QR Code"),visible:false,onclick:function(){O.call(this.parent);}},{scriptClass:"mstrmojo.Box",slot:"registerNode",alias:"registerForm",regMsg:null,children:[T({alias:"user",cssClass:"login-username",cssDisplay:"block",hint:mstrmojo.desc(17,"User name")}),T({alias:"pwd",cssClass:"login-pwd",hint:mstrmojo.desc(18,"Password"),type:"password"}),T({alias:"email",cssClass:"login-email",dtp:K.VARCHAR,constraints:{validator:U.VALIDATE_EMAIL,trigger:mstrmojo.validation.TRIGGER.ONKEYUP},bindings:{visible:"this.parent.parent.usherRegistrationOption > 2"},hint:mstrmojo.desc(9772,"Email")}),T({alias:"confirmEmail",cssClass:"login-email",bindings:{visible:function(){return this.parent.parent.usherRegistrationOption>2;}},hint:mstrmojo.desc(14149,"Confirm Email"),onpaste:function(c){V.preventDefault(c.hWin,c.e||c.hWin.event);}}),{scriptClass:"mstrmojo.Box",alias:"regMsg",cssClass:"register-msg",bindings:{regMsg:function(){return this.parent.regMsg;},visible:function(){return this.parent.regMsg;}},onregMsgChange:function(){if(this.domNode){this.domNode.style.color=this.regMsg&&this.regMsg.successful?"#42C31E":"#f00";}},children:[{scriptClass:"mstrmojo.Label",alias:"msg",cssClass:"register-msg-txt",bindings:{text:function(){return this.parent.regMsg.msg;}}},{scriptClass:"mstrmojo.Label",alias:"icn",cssClass:"register-msg-icn",onclick:function(){this.parent.parent.parent.toggleRegister();this.parent.parent.set("regMsg",null);}}]},{scriptClass:"mstrmojo.Button",alias:"registerButton",cssClass:"register mstrmojo-WebButton hot",cssDisplay:"inline-block",text:mstrmojo.desc(11773,"Register"),bindings:{enabled:function(){var j=this.parent.user.value,f=this.parent.email.value,d=this.parent.confirmEmail.value;var e=j.length>0;if(e){if(this.parent.parent.usherRegistrationOption>1){var h=f.length>=3&&d.length>=3&&f.toUpperCase()===d.toUpperCase()&&this.parent.email.validationStatus.code===G.VALID;if(h){if(this.parent.parent.usherRegistrationOption==7){var g=this.parent.parent.usherRegistrationDomain.toUpperCase();var c=f.substr(f.indexOf("@")+1).toUpperCase();return g.indexOf(c)>=0;}}return h;}}return e;}},onclick:function(){E.call(this.parent);}},{scriptClass:"mstrmojo.Button",alias:"registerCancelButton",cssClass:"register-cancel",cssDisplay:"inline-block",text:mstrmojo.desc(221,"Cancel"),onclick:function(){var c=this.parent;c.parent.toggleRegister();c.set("regMsg",null);c.user.set("value","");c.pwd.set("value","");c.email.set("value","");c.confirmEmail.set("value","");c.user.domNode.focus();}}]},{scriptClass:"mstrmojo.CheckBox",slot:"rememberNode",alias:"remember-me",label:mstrmojo.desc(14522,"Remember me"),onclick:function a(){this.parent.set("rememberMe",this.checked);}},{scriptClass:"mstrmojo.Label",slot:"forgetNode",allowHTML:true,text:mstrmojo.desc(14527,"Forget me/Switch user"),onclick:function(){A.call(this.parent);}},{scriptClass:"mstrmojo.Label",slot:"linksNode",allowHTML:true,text:'<a id="proximityProblems" href="#">Login via Phone</a>',onclick:function(c){O.call(this.parent,true);return false;},bindings:{visible:"this.parent.proximityMode"},},{scriptClass:"mstrmojo.Label",slot:"linksNode",allowHTML:true,text:mstrmojo.desc(16220,"Use your ###MicroStrategy Badge## app to scan the QR Code.").replace("###","").replace("##",""),},{scriptClass:"mstrmojo.Label",slot:"linksNode",alias:"registerLink",cssClass:"register-label",allowHTML:true,bindings:{visible:"this.parent.usherRegistrationOption > 0"},text:"",texts:[mstrmojo.desc(16227,"Don't have MicroStrategy Badge? Click ###here## to register."),mstrmojo.desc(14140,"Display your ###QR Code##.")],postCreate:function(){this.set("text",this.texts[0]);},ontextChange:function(){this.text=this.text.replace("###",'<a href="#" onclick="mstrmojo.all.'+this.parent.id+'.toggleRegister(); return false;">').replace("##","</a>");}},{scriptClass:"mstrmojo.Label",alias:"userDetails",cssClass:"user-details",slot:"userNode"},{scriptClass:"mstrmojo.Button",alias:"loginButton",cssClass:"mstrmojo-WebButton login-button .mstrButton",cssDisplay:"inline-block",text:mstrmojo.desc(16224,"Login with MicroStrategy Badge"),slot:"notificationNode",visible:false,onclick:function(){C.call(this.parent);},onvisibleChange:function(){var c=this.parent,d=mstrmojo.desc(14523,"Hi ")+" "+c.userInfo.firstName;this.visible?d+="!":d+=mstrmojo.desc(14524,", please approve on your device.");Z.call(c,d);}},{scriptClass:"mstrmojo.Box",alias:"loginNotificationBox",cssClass:"login-notification",slot:"notificationNode",visible:false,children:[{scriptClass:"mstrmojo.Label",alias:"timer",cssClass:"notification-timer"},{scriptClass:"mstrmojo.Label",alias:"notificationFailure",cssClass:"notification-failure",text:mstrmojo.desc(14526,"Did not get notification"),onclick:function(){L.call(this.parent.parent,true);}}]},]});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.List","mstrmojo.Button","mstrmojo.color","mstrmojo.Model","mstrmojo.Table","mstrmojo._CanValidate","mstrmojo.ValidationTextBox");var L=mstrmojo.color,C=mstrmojo.hash;function H(V,R,N,O,U,M,Q,T){var S={target:R,onEnd:function(){if(M){M();}},props:{}};S.props[N]={ease:Q,start:parseInt(O,10),stop:parseInt(U,10),suffix:"px"};S=C.copy(T,S);var P=new mstrmojo.fx.AnimateProp(S);P.play();}var D=function(Q){if(Q===null){return ;}var P=mstrmojo.locales.color.userPalette,M=P.length;if(M===8){P.remove(M-1,1);}P.add([{n:Q,v:Q}],0);var N="",O;for(O=0;O<8;O++){if(P[O]&&P[O].v){N+=P[O].v+",";}}N=N.replace(/,$/,"");mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(R){},failure:function(R){mstrmojo.alert(R.getResponseHeader("X-MSTR-TaskFailureMsg"));}},{taskId:"setPreference",prefs:"userPalette\u001E"+N});};var I=function(M,N,O){return{scriptClass:"mstrmojo.Label",text:M+":",cssClass:N,slot:O};};var K=function(M,P,O,N){return C.copy(N||{},{scriptClass:"mstrmojo.ValidationTextBox",cssDisplay:"block",cssText:"padding: "+(mstrmojo.dom.isIE7?"0":"1px"),bindings:{value:function(){return this.parent.parent.colorModel[O]||"0";}},onValid:function(){this.parent.parent.colorModel.set(O,this.value);},min:0,max:255,constraints:{trigger:mstrmojo.validation.TRIGGER.ONKEYUP,validator:function(R){var S=this.min,Q=this.max;R=parseInt(R,10);if(R>=S&&R<=Q){return{code:mstrmojo.validation.STATUSCODE.VALID};}return{code:mstrmojo.validation.STATUSCODE.INVALID,msg:mstrmojo.desc(7883,"Please enter an integer between ## and ###").replace("##",S).replace("###",Q)};}},slot:P});};var G=function(M){return C.copy({scriptClass:"mstrmojo.Slider",alias:M+"Slider",cssClass:"sc "+M,isHoriz:true,width:130,cssBkBW:0,items:[],getItemTooltip:function(){return this.items[this.min].n;},postCreate:function(){var N;for(N=0;N<{r:256,g:256,b:256,s:101,v:101,h:360}[M];N++){this.items.push({n:N,v:N});}},bindings:{selectedIndex:function(){return this.parent.parent.colorModel[M]||"0";}},onselectedIndexChange:function(){this.parent.parent.colorModel.set(M,this.selectedIndex);if(this.domNode){this.min=this.max=this.selectedIndex;this.typeHelper.updateThumb();}},select:function(N){this.set("selectedIndex",N);},slot:"1,3"});};var A=function(N,M,O){return'<div mstridx="'+M+'" class="mstrmojo-ColorPicker-item '+O.itemCssClas+'" style="background-color:'+N.v+';" type="button" title="'+N.n+'"></div>';};var F=C.copy({findIndex:function(M,O,N){return N.getAttribute("mstridx")||-1;}},C.copy(mstrmojo.ListMapper));var B=function(M,N){return C.copy(N,{scriptClass:"mstrmojo.List",cssClass:"mstrmojo-ColorPicker-list",itemMarkupFunction:A,listMapper:F,onchange:null,_onchange:function(){this.set("selectedColor",this.selectedItem.v);M.set("selectedColor",this.selectedItem.v);if((M.isSimple||!M.expanded)&&M.onChange){M.onChange();}},onselectedColorChange:function(){M.colorModel.set("hex",this.selectedColor);}});};mstrmojo.ColorPicker=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.ColorPicker",markupString:'<div id={@id} class="mstrmojo-ColorPicker {@cssClass} {@shadowCssClass}" style="height:{@height}; width:{@width};{@cssText}"><div class="mstrmojo-ColorPicker-box"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onexpandedChange:function(){this.domNode.className=this.domNode.className.replace(/ expanded/,"")+(this.expanded?" expanded":"");}},useAnimate:true,useShadow:true,isSimple:false,showNoColor:true,showMoreColors:true,showGradients:false,showUserPalette:true,height:"168px",fullHeight:"326px",width:"158px",fullWidth:"366x",expanded:false,onexpandedChange:function(N){var Q=this.domNode,M=parseInt(this.height,10),P=parseInt(this.width,10),O=parseInt(this.fullHeight,10),R=Math.max(parseInt(this.fullWidth,10),Q.scrollWidth);if(this.useAnimate!==false){if(N.value){H(true,Q,"width",P,R);H(true,Q,"height",M,O);}else{H(true,Q,"width",R,P);H(true,Q,"height",O,M);}}else{if(N.value){Q.style.width=R+"px";Q.style.height=O+"px";}else{Q.style.width=P+"px";Q.style.height=M+"px";}}},selectedColor:null,onChange:null,_updateSelection:function(N){var O=(this.isSimple)?this:this.layout.cp;if(N){var M=mstrmojo.array.find(O.basicColors.items,"v",N);if(M>-1){O.basicColors.set("selectedIndex",M);}else{M=mstrmojo.array.find(O.userPalette.items,"v",N);if(M>-1){O.userPalette.set("selectedIndex",M);}}}},visible:false,onvisibleChange:function(){if(this.visible){this.selectedColor=(this.selectedColor&&this.selectedColor.replace(/transparent/,"#FFFFFF"))||"#FFFFFF";this.colorModel.set("hex",this.selectedColor);this._updateSelection(this.selectedColor);}},onselectedColorChange:function(){this._updateSelection(this.selectedColor);},init:function(M){var N=this;this.colorModel=new mstrmojo.Model({h:0,s:0,v:100,_hsvChange:function(){this.hex="#"+L.hsv2hex(this.h,this.s,this.v);var O=L.hsv2rgb(this.h,this.s,this.v);this.r=O[0];this.g=O[1];this.b=O[2];N.set("colorModel",C.copy(this,{}));},_rgbChange:function(){this.hex="#"+L.rgb2hex(this.r,this.g,this.b);var O=L.rgb2hsv(this.r,this.g,this.b);this.h=O[0];this.s=O[1];this.v=O[2];N.set("colorModel",C.copy(this,{}));},onhChange:function(){this._hsvChange();},onsChange:function(){this._hsvChange();},onvChange:function(){this._hsvChange();},onrChange:function(){this._rgbChange();},ongChange:function(){this._rgbChange();},onbChange:function(){this._rgbChange();},onhexChange:function(){var P=L.hex2rgb(this.hex);this.r=P[0];this.g=P[1];this.b=P[2];var O=L.hex2hsv(this.hex);this.h=O[0];this.s=O[1];this.v=O[2];N.set("colorModel",C.copy(this,{}));}});this._super(M);},postBuildRendering:function(){if(this._super){this._super();}this.colorModel.set("hex",this.selectedColor||"#FFFFFF");this.colorModel.set("s",50);},preBuildRendering:function(){if(this._super){this._super();}var P=this.isSimple?100:124;if(this.showNoColor){P+=20;}if(this.showUserPalette){P+=25;}this.height=P+"px";if(this.isSimple){this.width="155px";}this.shadowCssClass=this.useShadow?"shadow":"";var Q=this,M={scriptClass:"mstrmojo.Button",cssClass:"nocolor",text:mstrmojo.desc(959,"Default"),visible:this.showNoColor,onclick:function(){Q.set("selectedColor","transparent");if(Q.onChange){Q.onChange();}}},O=B(this,{alias:"basicColors",items:mstrmojo.locales.color.colors,onchange:function(){if(this.selectedIndex>-1){this.parent.userPalette.set("selectedIndex",-1);this._onchange();}}}),R=B(this,{alias:"userPalette",cssClass:"mstrmojo-ColorPicker-list userPalette",makeObservable:true,visible:this.showUserPalette,bindings:{items:function(){return Q.showUserPalette!==false?mstrmojo.locales.color.userPalette:[];}},onchange:function(){if(Q.visible){if(this.selectedIndex>-1){this.parent.basicColors.set("selectedIndex",-1);this._onchange();}}},onadd:function(){this.refresh();if(Q.visible){this.parent.basicColors.set("selectedIndex",-1);this.set("selectedIndex",0);}}});if(this.isSimple){if(this.showNoColor){this.addChildren(M,0);}this.addChildren(O);this.addChildren(R);return ;}var N={scriptClass:"mstrmojo.Table",alias:"layout",rows:2,cols:5,layout:[{cells:[{colSpan:2},{colSpan:2},{}]},{cells:[{},{},{},{},{}]}],children:[{scriptClass:"mstrmojo.VBox",cssClass:"mstrmojo-ColorPicker-palette shadow",alias:"cp",children:[M,O,R],slot:"0,0"},{scriptClass:"mstrmojo.Container",cssClass:"sbSlider",markupString:'<div class="{@cssClass}" style="position:relative; {@cssText}" mstrAttach:click,mouseover,mousemove,mousedown,mouseup,mouseout><div class="sbThumb"></div></div>',markupSlots:{containerNode:function(){return this.domNode;},thumbNode:function(){return this.domNode.firstChild;}},markupMethods:{onbgColorChange:function(){this.domNode.style.backgroundColor=this.bgColor;}},hex:null,bindings:{hex:"this.parent.parent.colorModel.hex",bgColor:function(){return"#"+L.hsv2hex(this.parent.parent.colorModel.h,100,100);}},onhexChange:function(){if(this.domNode){this.thumbNode.style.left=this.parent.parent.colorModel.s/100*160-3+"px";this.thumbNode.style.top=(1-this.parent.parent.colorModel.v/100)*160-3+"px";}},onmousedown:function(){var T=this.domNode.getBoundingClientRect();this.mouseX0=T.left;this.mouseY0=T.top;this.onmousemove=this._update;var S=this;this.onmouseup=function(){S.onmousemove=null;mstrmojo.dom.detachEvent(document.body,"mouseup",S.onmouseup);};mstrmojo.dom.attachEvent(document.body,"mouseup",this.onmouseup);},onclick:function(S){this._update(S);},_update:function(S){var V={x:S.e.clientX,y:S.e.clientY},U=Math.min(Math.max(0,V.x-this.mouseX0),160),T=Math.min(Math.max(0,V.y-this.mouseY0),160);this.thumbNode.style.left=(U-3)+"px";this.thumbNode.style.top=(T-3)+"px";this.parent.parent.colorModel.s=Math.floor(100*U/160);this.parent.parent.colorModel.set("v",Math.floor(100*(1-T/160)));},slot:"0,1"},{scriptClass:"mstrmojo.Container",cssClass:"hueSlider",markupString:'<div class="{@cssClass}" style="position:relative; {@cssText}" mstrAttach:click,mouseover,mousedown,mouseup,mousemove,mouseout><div class="hThumb"></div></div>',markupSlots:{containerNode:function(){return this.domNode;},thumbNode:function(){return this.domNode.firstChild;}},bindings:{hex:"this.parent.parent.colorModel.hex",h:"this.parent.parent.colorModel.h"},onhexChange:function(){this._moveThumb();},onhChange:function(){this._moveThumb();},_moveThumb:function(){if(this.thumbNode){this.thumbNode.style.top=(1-this.parent.parent.colorModel.h/360)*160-1+"px";}},onmousedown:function(){this.mouseY0=this.domNode.getBoundingClientRect().top;this.onmousemove=this._update;var S=this;this.onmouseup=function(){S.onmousemove=null;mstrmojo.dom.detachEvent(document.body,"mouseup",S.onmouseup);};mstrmojo.dom.attachEvent(document.body,"mouseup",S.onmouseup);},onclick:function(S){this._update(S);},_update:function(S){var U={x:S.e.clientX,y:S.e.clientY},T=Math.min(Math.max(0,U.y-this.mouseY0),160);this.thumbNode.style.top=(T-1)+"px";this.parent.parent.colorModel.set("h",Math.max(0,Math.floor(360*(1-T/160))));},slot:"0,2"},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-ColorPicker-preview",markupMethods:{onbgColorChange:function(){this.domNode.style.backgroundColor=this.bgColor;}},bindings:{bgColor:"this.parent.parent.colorModel.hex"},onclick:function(){if(Q.showUserPalette){D(this.bgColor);}},slot:"1,0"},I(mstrmojo.desc(7848,"Hex"),"Hex","1,0"),K(mstrmojo.desc(7848,"Hex"),"1,0","hex",{cssClass:"hex",cssDisplay:"block",inputNodeCssClass:"hex",dtp:25,constraints:{trigger:mstrmojo.validation.TRIGGER.ONKEYUP,validator:function(S){if(/^#[0-9a-fA-F]{6}$/.test(S)){return{code:mstrmojo.validation.STATUSCODE.VALID};}return{code:mstrmojo.validation.STATUSCODE.INVALID,msg:mstrmojo.desc(7882,"Please enter a 6-digit HEX color value in format: #xxxxxx")};}}}),I(mstrmojo.desc(3604,"Red"),"Red","1,1"),I(mstrmojo.desc(3606,"Green"),"Green","1,1"),I(mstrmojo.desc(3608,"Blue"),"Blue","1,1"),I(mstrmojo.desc(3605,"Hue"),"Hue","1,1"),I(mstrmojo.desc(3607,"Saturation"),"Saturation","1,1"),I(mstrmojo.desc(3609,"Brightness"),"Brightness","1,1"),K(mstrmojo.desc(3604,"Red"),"1,2","r"),G("r"),K(mstrmojo.desc(3606,"Green"),"1,2","g"),G("g"),K(mstrmojo.desc(3608,"Blue"),"1,2","b"),G("b"),K(mstrmojo.desc(3695,"Hue"),"1,2","h",{cssClass:"h",max:360}),G("h"),K(mstrmojo.desc(3607,"Saturation"),"1,2","s",{max:100}),G("s"),K(mstrmojo.desc(3609,"Brightness"),"1,2","v",{max:100}),G("v")]};if(this.showMoreColors){N.children.push({scriptClass:"mstrmojo.Button",cssClass:"more",alias:"more",title:mstrmojo.desc(7833,"More >>>"),onclick:function(){var S=this.parent.parent;S.set("expanded",!S.expanded);this.domNode.setAttribute("title",S.expanded?mstrmojo.desc(7834,"Less Colors"):mstrmojo.desc(7833,"More Colors"));this.domNode.className=S.expanded?"less":"more";},slot:"0,0"});}if(this.showGradients){N.children.push({scriptClass:"mstrmojo.Button",alias:"showGradients",cssClass:"ge",text:mstrmojo.desc(4786,"Gradients..."),title:mstrmojo.desc(7970,"Open Graident Editor"),onclick:function(){var S=this.parent.parent;S.set("show",false);S.parent.ge.set("show",true);},slot:"0,0"});}this.addChildren(N);this.addChildren({scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-ColorPicker-buttonBar",children:[mstrmojo.Button.newInteractiveButton(mstrmojo.desc(1442,"Ok"),function(){var S=this.parent.parent;if(!S.useAnimate){S.set("visible",false);}var T=S.colorModel.hex;if(S.showUserPalette){D(T);}S.set("selectedColor",T);if(S.onOK){S.onOK();}},"#999",{alias:"ok",cssClass:"mstrmojo-Editor-button"}),mstrmojo.Button.newInteractiveButton(mstrmojo.desc(221,"Cancel"),function(){var S=this.parent.parent;if(!S.useAnimate){S.set("visible",false);}if(S.onCancel){S.onCancel();}},"#999",{alias:"cancel",cssClass:"mstrmojo-Editor-button"})]});}});var J={scriptClass:"mstrmojo.Popup",slot:"popupNode",contentNodeCssClass:"mstrmojo-ColorPicker-popup-content",autoCloses:false,locksHover:true,colorPicker:null,onOpen:function(){this.colorPicker.set("selectedColor",this.opener.fillColor);var N=this;var M=function(){N.lastOpener=N.lastOpener||N.opener;if(N.opener!==N.lastOpener){N.opener.popupNode.appendChild(N.lastOpener.popupRef.domNode);N.lastOpener=N.opener;}N.colorPicker.set("show",true);};window.setTimeout(function(){M();},100);},onClose:function(){this.colorPicker.set("show",false);if(this.ge){this.ge.set("show",false);}},postCreate:function(){this.markupMethods=C.copy(this.markupMethods);this.markupMethods.onvisibleChange=null;},preBuildRendering:function(){if(this.showGradients||this.colorPicker.showGradients){this.addChildren(this.gradientRef);}},gradientRef:{scriptClass:"mstrmojo.GradientEditor",alias:"ge",cssText:"height:0; display:none; position:absolute; z-index: 4;",left:"0px",top:"0px",visible:false,showTitle:false,height:245,_resizeHandler:function(){},onOK:function(){this.parent.opener.set("gradient",this.gradient);this.parent.opener.set("gradientCss",this.gradient.css);this.set("show",false);},onCancel:function(){this.set("show",false);},onshowChange:function(O){var N=O.value,M=parseInt(this.height,10);var R=this.domNode.firstChild;if(N){this.set("model",this.parent.opener.gradient);R.style.display="block";}if(this.useAnimate!==false){var S=N?0:M,P=M-S,Q=this;R.style.overflow="hidden";if(N){R.style.display="block";}H(N,R,"height",S,P,function(){if(!N){R.style.display="none";var T=Q.parent.opener;if(T){T.closePopup();}}else{R.style.overflow="visible";}});}else{R.style.height=N?M+"px":0;R.style.display=N?"block":"none";}},postCreate:function(){this.bindings={useAnimate:"this.parent.opener.useAnimate"};}},children:[{scriptClass:"mstrmojo.ColorPicker",alias:"colorPicker",onChange:function(){if(!this.parent.opener){return ;}this.parent.opener.set("fillColor",this.selectedColor);this.set("show",false);this.parent.opener.closePopup();},onOK:function(){this.onApply();this._closePopup();},onApply:function(){this.parent.opener.set("fillColor",this.selectedColor);},onCancel:function(){this._closePopup();},_closePopup:function(){this.set("show",false);if(!this.showGradients||!this.parent.ge||(this.parent.ge&&!this.parent.ge.show)){this.parent.opener.closePopup();}},show:false,onEnd:function(){this.set("visible",this.show);},onshowChange:function(){var M=parseInt(this.expanded?this.fullHeight:this.height,10);if(this.useAnimate!==false){var Q=this.show?0:M,O=M-Q,P=this,N=(!this.show?function(){P.onEnd();}:null);if(this.show){this.set("visible",true);}H(this.show,this.domNode,"height",Q,O,N);}else{this.set("visible",this.show);this.domNode.style.height=M+"px";}},postCreate:function(){this.showGradients=this.parent.showGradients;this.bindings={showUserPalette:function(){return this.parent.opener?this.parent.opener.showUserPalette:this.showUserPalette;},useAnimate:function(){return this.parent.opener?this.parent.opener.useAnimate:this.useAnimate;},isSimple:function(){return this.parent.opener?this.parent.opener.isSimple:this.isSimple;},showNoColor:function(){return this.parent.opener?this.parent.opener.showNoColor:this.showNoColor;}};}}]};mstrmojo.colorPickerPopupRef=mstrmojo.insert(J);mstrmojo.simpleColorPickerPopupRef=mstrmojo.insert(C.copy({isSimple:true},C.copy(J)));mstrmojo.gradientColorPickerPopupRef=mstrmojo.insert(C.copy({showGradients:false},C.copy(J)));mstrmojo.ColorPicker.createDropDown=function E(O,N){O=O||{};var M=mstrmojo.colorPickerPopupRef;if(N){if(N.isSimple){M=mstrmojo.simpleColorPickerPopupRef;O.isSimple=N.isSimple;}else{if(N.showGradients){M=mstrmojo.gradientColorPickerPopupRef;O.showGradients=N.showGradients;}}}else{if(O){if(O.isSimple){M=mstrmojo.simpleColorPickerPopupRef;}else{if(O.showGradients){M=mstrmojo.gradientColorPickerPopupRef;}}}}return C.copy(O,{scriptClass:"mstrmojo.DropDownButton",cssClass:"mstrmojo-ColorPicker-DropDownButton",markupMethods:{onfillColorChange:function(){if(this.boxNode&&this.fillColor){this.boxNode.style.cssText="background-color: "+this.fillColor;this.gradient=null;this.gradientCss=null;}},ongradientCssChange:function(){if(this.boxNode&&this.gradientCss){this.boxNode.style.cssText=this.gradientCss;this.fillColor=null;}}},popupRef:M,showUserPalette:true,useAnimate:true,showGradients:false,isSimple:false,fillColor:undefined});};}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.ui.menus.Menu","mstrmojo.hash","mstrmojo.array");mstrmojo.ui.menus.MenuItemType=null;var B=mstrmojo.array,W="separator";mstrmojo.ui.menus.MenuConfig=mstrmojo.declare(mstrmojo.ui.PopupConfig,null,{scriptClass:"mstrmojo.ui.menus.MenuConfig",menus:null,menuCssClass:"",supportsScroll:false,maxHeight:0,hasToggleItem:false,hasMenuItems:function S(){var X=B.filter(this.menus||[],function(Y){return Y.cls!==W;});return !!X.length;},getMenuItems:function F(X){var Z=B.filter(this.menus.slice().reverse(),function(d,c,b){var a=b[c+1];return X||d.cls!==W||(c&&a&&a.cls!==W);}).reverse();var Y=(Z&&Z.length)||0;if(!X&&Y>0&&Z[Y-1].cls===W){Z.pop();}return Z;},getMenuItem:function D(a){var Z=this.menus,X;if(Z!==null){for(X=0;X<Z.length;X++){var Y=Z[X];if(Y.cls===a){return Y;}}}return null;},absorbMenuItems:function U(X){this.menus=this.menus.concat(X.menus);if(!this.hasToggleItem&&X.hasToggleItem){this.hasToggleItem=true;}},addMenuItem:function K(e,a,c,Y,b){var d,Z,X;if(!e||typeof e==="string"){d=e;}else{d=e.n;Z=e.ttp;}X={n:d,ttp:Z,cls:a,fn:c,ctxt:Y};if(isNaN(b)||b>=this.menus.length){this.menus.push(X);}else{this.menus.splice(b,0,X);}if(a.indexOf(/\bon\b/)>-1){this.hasToggleItem=true;}return X;},addCustomMenuItem:function V(c,Z,b,Y,X){var a=this.addMenuItem(c,Z,b,X);a.getItemMarkup=Y;return a;},addDisabledMenuItem:function Q(Y,X){this.addNonInteractiveMenuItem(Y,X,true);},addNonInteractiveMenuItem:function O(b,Y,X){var Z=["non-int"];if(Y){Z.push(Y);}if(X){Z.push("disabled");}if(b&&typeof b!=="string"&&b.ttp){this.useTooltip=true;}var a=this.addMenuItem(b,Z.join(" "),mstrmojo.emptyFn);a.dsbld=true;},addSeparator:function E(){this.addMenuItem("",W,function(){return false;});},addPopupMenuItem:function T(e,Z,d,a,Y,b){var c=["pop "];if(a){c.push(a);}var X=this.addMenuItem(e,c.join(" "),d,Y,b);X.pop=true;X.scope=Z;return X;},addActionPopupMenuItem:function N(e,Y,c,d,Z,X,b){var a=this.addPopupMenuItem(e,Y,d,(Z||"")+" ax",X,b);a.actionFn=c;a.ax=true;},addSubMenuItem:function M(b,Z,Y,a,X){this.addPopupMenuItem(b,Y,a,Z,X);},addEditorMenuItem:function R(b,Y,a,X,Z){this.addPopupMenuItem(b,Y,a,"",X,Z);},getToggleItemStates:function G(f,h,X,d,Z,c){var a,b,Y,e;if(typeof f==="string"){a=b=f;Y=e="";}else{a=f.on||"";b=f.off||"";Y=f.ttpOn||"";e=f.ttpOff||"";}var g=[{n:a,ttp:Y,cls:h+" on",fn:d,ctxt:c},{n:b,ttp:e,cls:h,fn:X,ctxt:c}];if(!Z){g.reverse();}return g;},addToggleMenuItem:function L(e,a,c,Z,Y,d,X){var b=this.getToggleItemStates(e,a,c,Z,d,X);this.hasToggleItem=true;return this.addDualStateItem(Y,b[0],b[1]);},addDualStateItem:function I(Y,X,Z){return this.addMenuItem({n:X.n,ttp:X.ttp},X.cls,this.getDualStateHandler(Y,X,Z),X.ctxt);},getDualStateHandler:function J(Y,X,Z){return function(b,c){var a=[X,Z];if(b.cls===X.cls){a.reverse();}a[1].fn.call(mstrmojo.all[Y],b,c);b.n=a[0].n;b.ttp=a[0].ttp;b.cls=a[0].cls;};},addRadioMenuGroup:function C(Z,e,a,Y,X,d,c){var b=[];this.hasToggleItem=true;a.forEach(function(j,f){if(j.separator){this.addSeparator();return ;}var l=j.text,k=(Y||"")+" "+(j.cls||"")+(d?"":" radio")+(j.value===Z?" on":""),h=function(){if(e.call(this.ctxt,j.value,Z,j)===false){return false;}Z=j.value;b.forEach(function(m){m.cls=m.cls.replace(/ on$/,"")+(m.radioValue===Z?" on":"");});return true;},g=c?this.addCustomMenuItem(l,k,h,c(j,f),X):this.addMenuItem(l,k,h,X);g.radioValue=j.value;b.push(g);},this);},clear:function P(){this._super();this.menus=[];},newInstance:function A(X){return new mstrmojo.ui.menus.Menu(mstrmojo.hash.copy({popupConfig:this},X));},addMenuTitle:function H(X){this.addMenuItem(X||"","menu-item-title",mstrmojo.emptyFn);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo.ui.menus.Menu","mstrmojo._IsList","mstrmojo.vi.ui._HasMask","mstrmojo.dom","mstrmojo.hash","mstrmojo.string","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.ui._HasListTooltip");var F=mstrmojo.dom;mstrmojo.vi.ui.toolbars.Toolbar=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList,mstrmojo.ui.menus._HasMenuPopup,mstrmojo.vi.ui._HasMask,mstrmojo.ui._HasListTooltip],{scriptClass:"mstrmojo.vi.ui.toolbars.Toolbar",tooltipOrientation:"vertical",init:function G(I){this._super(I);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-VIToolbar");},selectionPolicy:"reselect",toolbarCfg:null,toolbarClicked:mstrmojo.emptyFn,tooltipCss:null,_set_toolbarCfg:function(L,I){var J=this.toolbarCfg,K=(J!==I);if(K){if(J){J.destroy();}this.toolbarCfg=I;}return K;},getItemProps:function D(K,I){var J=this._super(K,I);J.addCls(K.cls);J.addStyle("display:inline-block");return J;},postBuildRendering:function C(){var I=document.createElement("div");I.className="mstrmojo-VIDND-mask";this.maskNode=this.domNode.appendChild(I);return this._super();},postselectionChange:function(I){var J=I.added;if(J){var K=this.items[J[0]];if(K.tp==="pb"&&K.isMenuClicked){K.menufn(K,this);}else{K.fn(K,this);}}},ontoolbarCfgChange:function H(I){var K=I.valueWas;if(K){K.destroy();}var J=I.value;if(!J){return ;}this.set("items",J.btns);if(this.hasRendered){this.raiseEvent({name:"renderComplete"});}},openMenu:function E(J,I){J.hostId=this.id;J.hostElement=this._getItemNode(I._renderIdx);this.openPopup(J.newInstance());},onclick:function A(I){var K=I.target||F.eventTarget(I.hWin,I.e),J=this.getItemFromTarget(K);if(J&&J.tp==="pb"){if(K&&K.className){J.isMenuClicked=K.className.indexOf("icn")===-1;}}this.toolbarClicked(I);this._super(I);},destroy:function B(J){var I=this.toolbarCfg;if(I){I.destroy();}delete this.items;this._super(J);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupButton","mstrmojo._HasTooltip","mstrmojo.ui._IsPulldown","mstrmojo.ui.PopupList","mstrmojo.hash","mstrmojo.dom","mstrmojo.string","mstrmojo.css","mstrmojo.array","mstrmojo._CanAutoClose");var T=mstrmojo.css,L=mstrmojo.array,F=mstrmojo.dom,B=mstrmojo.string;function H(V){this.set("richTooltip",{cssClass:"vi-regular vi-tooltip-C",content:B.encodeHtmlString(V)});}mstrmojo.ui.Pulldown=mstrmojo.declare(mstrmojo.ui.PopupButton,[mstrmojo.ui._IsPulldown,mstrmojo._HasTooltip],{scriptClass:"mstrmojo.ui.Pulldown",onitemSelected:mstrmojo.emptyFn,onSelectedItemChange:mstrmojo.emptyFn,useRichTooltip:true,allowHTML:false,useDarkTheme:false,init:function P(V){this._super(V);T.addWidgetCssClass(this.getPopupList(),"ctrl-popup-list");},initChildren:function C(){this.children=this.getPopupListConfig();this._super();},postBuildRendering:function Q(){if(this._super){this._super();}var V=this.getSelectedItem();if(V){H.call(this,V.n);}},showTooltip:function D(Z,Y){var W=this.selectedNode,X=this.richTooltip;if(W.offsetWidth>=W.scrollWidth){return ;}if(!X.top){var V=F.position(this.selectedNode);X.top=V.y-3;X.left=V.x+V.w+6;}if(this._super){this._super(Z,Y);}},getSelectedItem:function M(){var V=this.items;return V&&V[this.selectedIndex];},selectItemByField:function A(W,V){this.set("selectedIndex",L.find(this.items||[],W,V));},getPopupWidget:function E(){return this.list;},getPopupList:function J(){return this.list;},_set_items:function I(Y,V){var X=this.items;this.items=V;delete this.selectedIndex;if(X!==V){var W=this.hasRendered;if(W){this.refresh();}return true;}return false;},onclick:function U(V){this._super(V);var X=this,W=X.getPopupWidget();X.mw=X.mw||function(Y){if(!F.contains(W.domNode,F.eventTarget(self,Y),true,document.body)){W.close();F.detachEvent(document,F.isFF?"DOMMouseScroll":"mousewheel",X.mw);}};F.attachEvent(document,F.isFF?"DOMMouseScroll":"mousewheel",X.mw);if(X.focusOnPopup){W.domNode.focus();}},_set_selectedIndex:function N(c,Z,X){if((Z!==0&&!Z)||Z<0){return false;}var W=this.selectedIndex=Z,V=this.getPopupList(),Y=V&&V.items,b=Y&&Y[W],a=this.selectedNode;if(b&&b.dsbld){return false;}if(V){mstrmojo._ListSelections._set_selectedIndex.call(V,"selectedIndex",W,X);}if(a&&Y&&Y[W]){a.innerHTML=this.getPulldownTextInnerHTML(Y[W]);a.title=Y[W].title||"";}if(Y&&Y[W]){if(this.focusOnPopup&&V&&!V.closeAfterSelection){V.itemsContainerNode.children[W].style.color="";}else{this.onitemSelected(Y[W],W);}}return true;},getPulldownTextInnerHTML:function G(V){return this.allowHTML?V.n:B.encodeHtmlString(V.n,true);},postselectedIndexChange:function O(V){var Z=V.value,X=V.valueWas;if(Z!==X){var W=this.items,Y=W[Z];if(Y){H.call(this,Y.n);}this.onSelectedItemChange(Y,W[X]);}},getPopupConfig:function K(){var V=this._super();V.useDarkTheme=this.useDarkTheme;return V;},getPopupListConfig:function S(){return{scriptClass:"mstrmojo.ui.PopupList",alias:"list",selectionPolicy:"reselect",locksHover:true,useRichTooltip:true,showTooltipForLargeText:true,scrollNodeMaxHeight:this.scrollNodeMaxHeight,listHooks:{select:function V(Z,a,Y){this.parent.set("selectedIndex",Y);if(this.visible&&this.closeAfterSelection&&!this.selectedItem.dsbld){this.close();}}},getItemProps:function W(a,Y){var Z=mstrmojo._IsList.getItemProps.call(this,a,Y);Z.style=this.parent.itemCssText||"";return Z;},suppressClose:function X(Y){return mstrmojo._CanAutoClose.suppressClose.call(this,Y)||F.contains(this.parent.domNode,Y,true,document.body);}};},children:[]});mstrmojo.ui.Pulldown.newPulldown=function R(W,a,V,Z,Y){Z=Z||{};Z.items=W;var X;if(Y===true){X=mstrmojo.hash.copy({scriptClass:"mstrmojo.ui.Pulldown",selectedIndex:V||0},Z);}else{X=new mstrmojo.ui.Pulldown(Z);if(V!==undefined){X.set("selectedIndex",V);}}X.onSelectedItemChange=a||mstrmojo.emptyFn;return X;};}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.PreviewButton","mstrmojo.ui.PopupList","mstrmojo.array","mstrmojo.css");var F=mstrmojo.css,E=mstrmojo.array;mstrmojo.ui.editors.controls.ListPreviewButton=mstrmojo.declare(mstrmojo.ui.editors.controls.PreviewButton,null,{scriptClass:"mstrmojo.ui.editors.controls.ListPreviewButton",init:function G(L){this._super(L);var M=this.getListCfg(),K=this.itemValueField;M.alias="list";M.locksHover=true;M.slot="widgetHostNode";M.listHooks={select:function J(N,O){this.parent.set("selectedValue",O[K]);this.close();}};M.setDimensions=mstrmojo.emptyFn;this.addChildren([M]);F.addWidgetCssClass(this.list,"ctrl-popup-list");},getPopupWidget:function D(){return this.list;},items:null,onitemsChange:function H(){var J=this.items;if(J){this.list.set("items",J);}},selectedValue:"",itemValueField:"n",onselectedValueChange:function C(){var K=this.selectedValue,J=this.itemValueField,L=this.list;L.selectItems(E.filter(L.items||[],function(M){return M[J]===K;}),true);this.updatePreview();},updatePreview:function B(){throw new Error(this.scriptClass+" must implement updatePreview.");},getListCfg:function I(){return{scriptClass:"mstrmojo.ui.PopupList",selectionPolicy:"reselect"};},postBuildRendering:function A(){this.onitemsChange();this.onselectedValueChange();return this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.string","mstrmojo.Label","mstrmojo.vi.ui.ScrollableDocTextfield","mstrmojo.DocHTMLContainer","mstrmojo.ui.ScrollableTextArea","mstrmojo.ui.ButtonBar","mstrmojo.EnumRWUnitType");var S=mstrmojo.css,E=mstrmojo.dom;var L=0,A=1;var F="http://",U=null,J=[{n:mstrmojo.desc(4555,"iFrame"),v:L,id:0},{n:mstrmojo.desc(4554,"Html Text"),v:A,id:1}];var Q=mstrmojo.EnumRWUnitType.HTMLCONTAINER;function H(W,c,d){var V=d.boxContent,X={data:null,defn:null},Z=d.htmlType!==W;if(d.htmlType===L&&!mstrmojo.isUrlExternal(c)&&c.indexOf("track=")==-1){c+=(c.indexOf("?")>0)?"&":"?";c+="track=0";}X.data={v:c};X.defn={fmts:{top:"0px",left:"0px"},t:Q};X.defn.fmts.height=parseInt(d.domNode.clientHeight)+"px";if(Z||!V){d.htmlType=W;var b={scriptClass:W===L?"mstrmojo.DocHTMLContainer":"mstrmojo.vi.ui.ScrollableDocTextfield",node:X,defn:X.defn,slot:"containerNode",alias:"boxContent",setupScrollNodes:function Y(){this.scrollNode=null;},formatHandlers:{domNode:["D"]}};if(!!V){d.removeAndDestroyChild(V);}d.addChildren(b);d.boxContent.render();V=d.boxContent;}if(d.htmlType===A){V.updateScrollbars();}V.update(X);V.refresh();var a=d.ctrlOverlay;if(a&&a.visible&&!mstrmojo.string.isEmpty(c)){d.hideControlOverlay();}}mstrmojo.home.ui.HtmlBox=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.home.ui.HtmlBox",markupString:'<div id="{@id}" class="{@cssClass}" style="{@cssText}{@domNodeCssText}"><div class="mstrmojo-Card-Custom-content" style="{@cssText} {@domNodeCssText}"></div></div>',markupSlots:{containerNode:function(){return this.domNode.childNodes[0];}},htmlType:L,textArea:undefined,typeBtn:undefined,cachedHTMLContainerText:null,lastSelectedType:0,init:function N(V){this._super(V);this.cachedHTMLContainerText=[F,U];S.addWidgetCssClass(this,"mstrmojo-HtmlBox");this.addChildren(this.getEditOverlayControls());},postBuildRendering:function O(){this._super();},getDisplayName:function I(){return this.defn.n||mstrmojo.desc(4538,"HTML Container");},updateHtmlBox:function R(V,W){H(V,W,this);},setDefaultTextCaretPosition:function C(W,V){if(W.value===V){window.setTimeout(function(){var X=V===U?(V.indexOf("</body>")-1):(V.indexOf("//")+2);E.setCaret(W,X);},0);}},getHintText:function T(){return[F,U];},getEditOverlayControls:function D(){var X=this,W=this.htmlType;return[{scriptClass:"mstrmojo.Box",cssClass:"ctrlOverlay",alias:"ctrlOverlay",slot:"containerNode",visible:true,children:[{scriptClass:"mstrmojo.Label",cssClass:"icn"},{scriptClass:"mstrmojo.Label",cssClass:"title",text:mstrmojo.desc(13623,"HTML container:")},{scriptClass:"mstrmojo.ui.ButtonBar",items:J,alias:"typeBtn",showIcon:false,cssClass:"htmlTypeBtn",selectedIndex:X.lastSelectedType,postselectionChange:function(Z){var b=this.items,d=b[Z.added[0]],a=d.v,e=b[Z.removed&&Z.removed[0]],c=e.v,f=this.parent.textArea;X.cachedHTMLContainerText[c]=f.value;f.set("emptyText",X.cachedHTMLContainerText[a]);f.set("value",X.cachedHTMLContainerText[a]);f.refresh();}},{scriptClass:"mstrmojo.ui.ScrollableTextArea",emptyText:this.cachedHTMLContainerText[W],maxLength:undefined,alias:"textArea",cssClass:"htmlText",keepEmpty:true,enabled:mstrApp.features["create-html-container"],onfocus:function Y(){X.setDefaultTextCaretPosition(this.inputNode,this.emptyText);if(this.inputNode.value===this.emptyText){this.scrollNode.scrollTop=35;}},postvalueChange:function V(){var Z=this.value?this.value.trim():"";this.parent.ctrlOkBtn.set("enabled",Z&&Z!=="http://"&&Z!=="https://");}},mstrmojo.Button.newWebButton(mstrmojo.desc(8708,"OK"),function(){var a=this.parent,Z=a.textArea.value;X.lastSelectedType=a.typeBtn.selectedIndex;X.cachedHTMLContainerText[X.lastSelectedType]=Z;X.updateHtmlBox(a.typeBtn.selectedItem.v,Z);X.hideControlOverlay();X.parent.updateCardDef({type:X.lastSelectedType,val:escape(Z)});},true,{alias:"ctrlOkBtn",enabled:false})]}];},initControlOverlayWithCardDefinition:function G(V){var Y=this.ctrlOverlay,X=Y.textArea;if(!!V.type){Y.typeBtn.singleSelect(V.type);this.lastSelectedType=V.type;}if(!!V.val){var W=unescape(V.val);X.set("value",W);X.refresh();X.focus();this.cachedHTMLContainerText[this.lastSelectedType]=W;this.updateHtmlBox(Y.typeBtn.selectedItem.v,W);this.hideControlOverlay();}},switchToEditMode:function K(){var W=this.ctrlOverlay,V=W.textArea;W.typeBtn.singleSelect(this.lastSelectedType);V.set("value",this.cachedHTMLContainerText[this.lastSelectedType]);V.refresh();V.focus();},showControlOverlay:function B(){var W=this.ctrlOverlay,V;W.set("visible",true);this.clearOverlay(W);V=this.getEditOverlayControls();this.addChildren(V);if(!!this.boxContent){this.boxContent.set("visible",false);}this.switchToEditMode();},hideControlOverlay:function P(){var V=this.ctrlOverlay;V.set("visible",false);this.clearOverlay(V);if(!!this.boxContent){this.boxContent.set("visible",true);}},clearOverlay:function M(V){var W=V.children;if(W&&W.length){V.removeChildren();W.forEach(function(X){X.destroy();});V.destroy();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ListPreviewButton","mstrmojo.ui.editors.controls.ValidationTextBox","mstrmojo.EditableLabel");var A=mstrmojo.css,E=mstrmojo.validation.STATUSCODE;mstrmojo.ui.editors.controls.ComboBox=mstrmojo.declare(mstrmojo.ui.editors.controls.ListPreviewButton,null,{scriptClass:"mstrmojo.ui.editors.controls.ComboBox",markupMethods:{onenabledChange:function D(){this.txtLabel.set("enabled",this.enabled);this.txtLabel.set("editOnClick",this.enabled);A.toggleClass(this.domNode,"disabled",!this.enabled);}},init:function B(F){this._super(F);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-ComboBox");},updatePreview:function C(){this.txtLabel.set("value",this.selectedValue||"");},updateSelection:function(){this.set("selectedValue",this.txtLabel.value);},validateTextInput:function(F){return true;},txtLabel:null,children:[{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",alias:"txtLabel",slot:"previewNode",constraints:{validator:function(){if(!this.parent.validateTextInput(this.value)){return{id:this.id,code:E.INVALID,msg:""};}}},onValid:function(){this.parent.updateSelection();}}]});}());(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.ui.Pulldown");var B={DATA_SOURCES:0,CATALOGS:1,CUBES:2};function D(F,G){return mstrmojo.array.map(F,function(H){H.lv=G;return H;});}mstrmojo.mstr.MDXCubeBrowser=mstrmojo.declare(mstrmojo.Editor,null,{title:mstrmojo.desc(4380,"Select MDX Cube"),help:"Select_MDX_Cube_dialog_box.htm",items:null,selectedItem:null,loadMDXData:function(G){G=G||{};var F=G.item||{};mstrmojo.xhr.request("GET",mstrConfig.taskURL,{success:function(H){G.success(H);},failure:function(H){mstrmojo.alert(H);}},{taskId:"browseMDX",level:F.lv||B.DATA_SOURCES,unitId:F.did||"",roleId:F.roleId||""});},init:function E(F){this._super(F);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-MDXCubeBrowser");},children:[{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-MDXCubeBrowser-sources",alias:"mdxPulldown",selectedIndex:0,makeObservable:true,items:[{n:mstrmojo.desc(4381,"Data Sources"),did:"",lv:B.DATA_SOURCES}],getPopupListConfig:function(){var G=this;var F=mstrmojo.ui.Pulldown.prototype.getPopupListConfig();F.postclick=function(){G.handleSelection();};return F;},handleSelection:function(){var H=this,F=H.parent;H.set("items",this.items.slice(0,this.selectedIndex+1));H.set("selectedIndex",this.items.length-1);var G=this.selectedItem||this.items[this.selectedIndex];F.set("items",G.items);F.set("selectedItem",null);},addItem:function(F){F.cls="lv-"+F.lv;this.set("items",this.items.concat(F));this.set("selectedIndex",this.items.length-1);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-OBListItemIcon up mstrmojo-MDXCubeBrowser-sources-btn",bindings:{enabled:function(){return this.parent.mdxPulldown.selectedIndex>0;}},onenabledChange:function(){mstrmojo.css.toggleClass(this.domNode,"disabled",!this.enabled);},onclick:function(){var F=this.parent.mdxPulldown;F.set("selectedIndex",F.selectedIndex-1);F.handleSelection();}},{scriptClass:"mstrmojo.ui.List",cssClass:"mstrmojo-MDXCubeBrowser-cubes",alias:"cubeList",bindings:{items:function(){return this.setCssClass(this.parent.items);}},setCssClass:function(F){var G=this;return mstrmojo.array.map(F,function(H){H.cls=G.getItemCssClass(H);return H;});},selectionAdded:function(F){if(!F.isReselect){var J=this,H=J.parent,I=J.items[F.added];if(I.lv===B.CUBES+1){H.set("selectedItem",I);return ;}var G=this.parent.mdxPulldown;H.loadMDXData({item:I,success:function(L){var K=L.items;if(I.lv==B.CATALOGS){mstrmojo.array.map(K,function(M){M.roleId=I.did;return M;});}H.set("items",D(K,I.lv+1));I.items=K;G.addItem(I);}});}},getItemMarkup:function C(G,F){return'<{@tag} class="item" idx="{@idx}" style="{@style}" title="{@title}"><span class="{@cls}"></span>{@en@n}</{@tag}>';},getItemCssClass:function(F){return"mstrIcon-lv mstrIcon-lv-"+{"1048583":"fDataSource","1048584":"fCatalog","1048585":"qc"}[F.dt];}},{scriptClass:"mstrmojo.Label",bindings:{text:function(){return mstrmojo.desc(2107,"## items found").replace("##",(this.parent.items&&this.parent.items.length)||0);}}},{scriptClass:"mstrmojo.HBox",alias:"btnHBox",slot:"buttonNode",cssClass:"mstrmojo-Editor-buttonBar",children:[mstrmojo.Button.newWebButton(mstrmojo.desc(547,"Select"),function A(){var F=this.parent.parent;F.close();F.onOK(F.selectedItem);},true,{bindings:{enabled:function(){return this.parent.parent.selectedItem.lv===3;}}}),mstrmojo.Button.newWebButton(mstrmojo.desc(221,"Cancel"),function A(){this.parent.parent.close();})]}],postBuildRendering:function(){var G=this;this._super();var F=this.mdxPulldown;this.loadMDXData({success:function(H){G.set("items",D(H.items,B.CATALOGS));F.items[0].items=G.items;}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.dom","mstrmojo.expr","mstrmojo.Button","mstrmojo.ui._HasListTooltip","mstrmojo.ui.PopupWidget","mstrmojo.ui.Pulldown","mstrmojo.ui.CheckList");var E=mstrmojo.hash,L=mstrmojo.array,K=mstrmojo.dom,G=mstrmojo.Button.newWebButton,F=mstrmojo.expr.TP.DIM;function H(Q){var R=this.parent,S=this.list;if(Q){this.saveSelection();R.submitSelections();}else{S.selectedIndices=E.copy(R.selectedIndices);}this.close();}mstrmojo.ui.PulldownCheckList=mstrmojo.declare(mstrmojo.ui.PopupWidget,[mstrmojo.ui._HasListTooltip],{scriptClass:"mstrmojo.ui.PulldownCheckList",visible:false,itemCssText:"",onOpen:function C(){var Q=this.list;Q.updateScrollbars();},onClose:function N(){this.list.refresh();},adjustCheckListForPopupOverflow:function M(S){var U=this.domNode,T,R,X=this.list,W=X&&(X.scrollNode||X.scrollboxNode);if(S&&W){T=K.position(U);R=T.y;if(R+T.h>K.position(document.body).h){var Q=U.offsetHeight,V=W&&W.offsetHeight;W.style.maxHeight=K.getMaxScrollHeight()-(Q-V)+"px";X.updateScrollbars();}}},getItemFromTarget:function O(Q){return this.list.getItemFromTarget(Q);},getItemNodeFromTarget:function B(Q){return this.list.getItemNodeFromTarget(Q);},adjustCornersForPopupOverflow:function J(){var Q=this._super();this.adjustCheckListForPopupOverflow(Q);return Q;},saveSelection:function D(){this.parent.set("selectedIndices",E.copy(this.list.selectedIndices));},postselectionChange:function I(Z){var Y=this.list,W=Y.items,X=Z.added||[],U=Z.removed||[],T=Y.selectedIndices,Q=this.parent.allIdx,V=W[Q],S=X.length+U.length,R=false;if(V&&V.t===F&&S===1){if(Q===X[0]){W.forEach(function(b,a){if(!T[a]){R=true;T[a]=L.indexOf(U,a)===-1;}});}else{if(Q===U[0]){T={};L.forEach(X,function(a){T[a]=true;});R=true;}else{if(T[Q]){delete T[Q];R=true;}}}}if(R){Y.set("selectedIndices",E.copy(T));Y.refresh();}},onitemsChange:mstrmojo.emptyFn,children:[{scriptClass:"mstrmojo.ui.CheckList",alias:"list",postBuildRendering:function A(){this.icnCssText=this.parent.itemCssText||this.icnCssText;this.parent.adjustCheckListForPopupOverflow();},postselectionChange:function I(Q){this.parent.postselectionChange(Q);},onitemsChange:function P(Q){this.parent.onitemsChange(Q);}},{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-Buttons",children:[G(mstrmojo.desc(1442,"Ok"),function(){H.call(this.parent.parent,true);},true,{cssDisplay:"inline-block"}),G(mstrmojo.desc(2140,"Cancel"),function(){H.call(this.parent.parent,false);},false,{cssDisplay:"inline-block"})]}]});}());(function(){mstrmojo.requiresClsP("mstrmojo","Editor","HBox","Button","Label","TextBox","hash","dom","css","array","desc");mstrmojo.requiresCls("mstrmojo.warehouse.EnumDatabaseType","mstrmojo.ui.Checkbox","mstrmojo.ui.Pulldown","mstrmojo.ui.CheckList");mstrmojo.requiresDescs(959,2056,15656,15657,15658,15659,15660,15661,2397,2399);var M=mstrmojo.warehouse.EnumDatabaseType,D=mstrmojo.hash,J=mstrmojo.array,I=mstrmojo.dom,L=mstrmojo.css,F=mstrmojo.desc;var Q=[{v:"",n:F(959,"Default")},{v:"General Number",},{v:"Standard"},{v:"Currency"},{v:"Percent"},{v:"Scientific"},{v:"General Date"},{v:"Long Date"},{v:"Short Date"},{n:F(2056,"Custom")}];Q.forEach(function(R){if(R.n===undefined){R.n=R.v;}});var G={};G[M.MSAS]={min:0,max:65535,maxlength:5};G[M.EssBase]={min:0,max:126,maxlength:3};function O(T,V){var S=null,U=G[V],R=/^-?\d+$/;if(R.test(T)){T=parseInt(T);if(U&&T>=U.min&&T<=U.max||!U){S=T;}}return S;}function C(R){var S=/(\"|\-\-|\/\/|\/\*|\*\/)/;return R&&R.length&&!S.test(R);}var K={mptf:{mptso:{pru:1,v:500},mptsim:{pru:1,v:0},mptfms:""},dbt:M.MSAS,so_dft:0,sim_dft:0};function P(){return D.clone(K);}function B(R){switch(R){case"so":return this.config.mptf.mptso;case"si":return this.config.mptf.mptsim;case"fs":return this.config.mptf.mptfms;case"dbt":return this.config.dbt;case"soDefault":return this.config.so_dft;case"siDefault":return this.config.sim_dft;}}function N(){return{mptso:{pru:this.soBox.soDefaultCb.checked?1:0,v:parseInt(this.soBox.soTB.value)},mptsim:{pru:this.siBox.siDefaultCbBox.siDefaultCb.checked?1:0,v:this.siBox.siClBox.siCl.selectedIndex},mptfms:this.fsBox.fsTbBox.fsTb.value};}mstrmojo.PassThroughOptions=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.PassThroughOptions",cssClass:"mstrmojo-PassThroughOptions",title:F(15656,"Pass-through Options"),updatePopupConfig:function H(R,T){if(R){this.onOK=R.onOK;delete R.onOK;}["left","top","width","height","zIndex"].forEach(function(U){if(R[U]!==undefined){this.set(U,R[U]);delete R[U];}}.bind(this));var S=P();D.forEach(R,function(V,U){if(V===undefined){delete R[U];}});this.config=D.copy(R,S);},onOpen:function E(){this.soBox.set("dirty",false);this.soBox.set("valid",true);this.siBox.set("dirty",false);this.fsBox.set("dirty",false);this.fsBox.set("valid",true);var T=B.call(this,"dbt")===M.EssBase,V=B.call(this,"so");L.toggleClass(this.editorNode,"ess",T);this.soBox.soDefaultCb.set("checked",V.pru);if(!V.pru){this.soBox.soTB.set("value",V.v);}else{this.soBox.soTB.set("value",B.call(this,"soDefault"));}if(!T){var S=B.call(this,"si"),R=B.call(this,"fs"),U;this.siBox.siDefaultCbBox.siDefaultCb.set("checked",S.pru);if(!S.pru){this.siBox.siClBox.siCl.select(S.v);}else{this.siBox.siClBox.siCl.select(B.call(this,"siDefault"));}U=J.find(Q,"v",R);if(U<0){U=J.find(Q,"v",undefined);}this.fsBox.fsPdBox.fsPd.set("selectedIndex",U);this.fsBox.fsTbBox.fsTb.set("value",R);}},children:[{scriptClass:"mstrmojo.Box",alias:"soBox",cssClass:"mstrmojo-PassThroughOptions-soBox",processDirty:function A(){var X=this.parent,U=B.call(X,"so"),W=U.pru,R=U.v,T=this.soDefaultCb.checked,S=this.soTB.value,V=W!=T||(!T&&R!=S);this.set("dirty",V);},children:[{scriptClass:"mstrmojo.Label",cssDisplay:"inline-block",text:F(15657,"Solve Order:")},{scriptClass:"mstrmojo.TextBox",alias:"soTB",cssClass:"mstrmojo-PassThroughOptions-soTB",cssDisplay:"inline-block",useRichTooltip:true,enabled:false,updateTooltipConfig:function(){var V=this.parent.parent,T=this.domNode,R=I.position(T),U=B.call(V,"dbt"),S=F(15658,"The value has to be between # and ##.").replace("#",G[U].min).replace("##",G[U].max);this.richTooltip={cssClass:"vi-regular vi-tooltip-V",posType:mstrmojo.tooltip.POS_BOTTOMLEFT,content:S,top:R.y,left:R.x};},onvalueChange:function(){var U=this.parent.parent,T=B.call(U,"dbt"),S=O(this.value,T),R=(S!=null);this.set("textValid",R);if(!R){this.showTooltip();}else{this.hideTooltip();}this.parent.set("valid",R);this.parent.processDirty();}},{scriptClass:"mstrmojo.Label",cssDisplay:"inline-block",cssClass:"right",text:F(959,"Default")},{scriptClass:"mstrmojo.ui.Checkbox",alias:"soDefaultCb",cssDisplay:"inline-block",cssClass:"right",checked:true,oncheckedChange:function(R){var U=this.parent.parent,S=this.parent.soTB,T=this.checked;S.set("enabled",!T);if(T){S.set("value",B.call(U,"soDefault"));}this.parent.processDirty();}}]},{scriptClass:"mstrmojo.Box",alias:"siBox",cssClass:"mstrmojo-PassThroughOptions-siBox",processDirty:function A(){var X=this.parent,W=B.call(X,"si"),V=W.pru,R=W.v,T=this.siDefaultCbBox.siDefaultCb.checked,S=this.siClBox.siCl.selectedIndex,U=V!=T||(!T&&R!=S);this.set("dirty",U);},children:[{scriptClass:"mstrmojo.HBox",alias:"siDefaultCbBox",cssClass:"mstrmojo-PassThroughOptions-siDefaultCbBox",children:[{scriptClass:"mstrmojo.Label",text:F(15659,"Scope Isolation:")},{scriptClass:"mstrmojo.ui.Checkbox",alias:"siDefaultCb",checked:true,oncheckedChange:function(R){var S=this.parent.parent,U=S.parent,T=S.siClBox.siCl;T.set("enabled",!this.checked);if(this.checked){T.select(B.call(U,"siDefault"));}S.processDirty();}},{scriptClass:"mstrmojo.Label",text:F(959,"Default")}]},{scriptClass:"mstrmojo.HBox",alias:"siClBox",cssClass:"mstrmojo-PassThroughOptions-siClBox",children:[{scriptClass:"mstrmojo.ui.CheckList",alias:"siCl",multiSelect:false,orientation:"h",selectedIndex:1,items:[{n:"NONE",v:0},{n:"CUBE",v:1}],onchange:function(R){this.parent.parent.processDirty();}}]}]},{scriptClass:"mstrmojo.Box",alias:"fsBox",cssClass:"mstrmojo-PassThroughOptions-fsBox",children:[{scriptClass:"mstrmojo.HBox",alias:"fsPdBox",cssClass:"mstrmojo-PassThroughOptions-fsPdBox",children:[{scriptClass:"mstrmojo.Label",text:F(15660,"Format String:")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"fsPd",selectedIndex:0,items:Q,onselectedIndexChange:function(){var S=this.getSelectedItem(),R=S&&S.v===undefined,T=this.parent.parent.fsTbBox.fsTb;T.set("visible",R);if(R){T.set("value","");}else{T.set("value",S&&S.v);}}}]},{scriptClass:"mstrmojo.HBox",alias:"fsTbBox",cssClass:"mstrmojo-PassThroughOptions-fsTbBox",children:[{scriptClass:"mstrmojo.TextBox",alias:"fsTb",updateTooltipConfig:function(){var T=this.domNode,R=I.position(T),S=F(15661,'Custom Format String should not be empty or contain ", //, --, /*, */.');this.richTooltip={cssClass:"vi-regular vi-tooltip-V",posType:mstrmojo.tooltip.POS_BOTTOMLEFT,content:S,top:R.y,left:R.x};},onvalueChange:function(){var R=this.parent.parent;R.processDirty();},bindings:{textValid:function(){var R=this.parent.parent.fsPdBox.fsPd.selectedIndex,T=this.parent.parent,V=T.fsPdBox.fsPd.getSelectedItem(),S=V&&V.v===undefined,U=!S||C(this.value);T.set("valid",U);if(!U){this.showTooltip();}else{this.hideTooltip();}return U;}}}]}],processDirty:function(){var S=this.fsTbBox.fsTb.value,R=B.call(this.parent,"fs");this.set("dirty",S!==R);}},{scriptClass:"mstrmojo.HBox",alias:"buttonBar",slot:"buttonNode",cssClass:"mstrmojo-Editor-buttonBar",cellCssClass:"subBox",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Editor-button mstrmojo-WebButton hot",alias:"saveokButton",text:F(2397,"OK"),bindings:{enabled:function(){var T=this.parent.parent.soBox.dirty,S=this.parent.parent.siBox.dirty,V=this.parent.parent.fsBox.dirty,U=this.parent.parent.soBox.valid,R=this.parent.parent.fsBox.valid;return(T||S||V)&&(U&&R);}},onclick:function(){if(this.enabled){var R=this.parent.parent;if(R.onOK){R.onOK(N.call(R));}R.close();}}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Editor-button mstrmojo-WebButton",text:F(2399,"Cancel"),onclick:function(){var R=this.parent.parent;R.close();}}]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.dom","mstrmojo.hash","mstrmojo._HasEditableText","mstrmojo.ui.Pulldown");var K=mstrmojo.array,H=mstrmojo.dom,D=mstrmojo.hash,A=mstrmojo.Enum_Keys,C=19,M=A.ENTER,E=A.ESCAPE,N=A.DOWN_ARROW,F=A.UP_ARROW;mstrmojo.ui.SearchablePulldown=mstrmojo.declare(mstrmojo.ui.Pulldown,[mstrmojo._HasEditableText],{scriptClass:"mstrmojo.ui.SearchablePulldown",editableSlot:"selectedNode",allowCustomText:false,isSearching:false,editOnClick:false,init:function P(U){this._super(U);var Q=this.getPopupList();Q.renderOnScroll=this.renderOnScroll||Q.renderOnScroll;Q.renderBlockSize=this.renderBlockSize||Q.renderBlockSize;var T=[];if((mstrApp.isWorkstation&&H.isMac())||H.isSafari){T=["clip-safari"];}mstrmojo.css.addWidgetCssClass(this,["mstrmojo-ui-SearchablePulldown"].concat(T));var S=Q.constructor.prototype,R=Q.getItemProps||S.getItemProps,V=Q.getItemMarkup||S.getItemMarkup;Q.getItemProps=function(a,X){var Y=this._spft||"",c=a.n,Z=c?c.toUpperCase().indexOf(Y):-1,W=function(e){var d=[],f;K.forEach(e.split(";"),function(g){f=g.split(":");if(f.length===2&&f[0].toLowerCase()!=="color"){d.push(g);}});return d.join(";");};if(Z===-1){Y="";}var b=R.call(this,a,X);if(this.selectedIndices[X]){b.style=W(b.style);}if(c){b.before=c.slice(0,Z);b.input=c.substring(Z,Z+Y.length);b.after=c.slice(Z+Y.length,c.length);}return b;};Q.getItemMarkup=function(Y,W){var X=V.call(this,Y,W);if(Y.n&&Y.v!=="u;"){return X.replace("{@en@n}","{@en@before}<span class='sp-highlight'>{@en@input}</span>{@en@after}");}return X;};this._originalFocusOnPopup=this.focusOnPopup;this.focusOnPopup=false;},onclick:function O(Q){if(this._originalFocusOnPopup!==undefined){this.focusOnPopup=false;}if(this.isClickingAnchorSlot(Q)){var S=Q.e.offsetX>=(this.selectedNode.offsetWidth-C),R=this.getPopupWidget().visible;if(!R||(R&&S)){this.set("isEditing",!R);this._super(Q);}else{if(!this.isEditing){this.set("isEditing",true);}}}},setDefaultListAndIndex:function(U,V){var T=this.getPopupList(),R=this.text,Q=K.find(U,"n",R);if(Q===-1&&!this.allowCustomText){var S=T.items[0]||U[0];Q=K.find(U,"n",S.n);}T.set("items",U);if(V){this.set("selectedIndex",Q);}},onPopupWidgetClosed:function I(Q){this.set("isEditing",false);var R=this.getPopupList(),S=R._oldItems;delete R._oldItems;if(S){this.setDefaultListAndIndex(S,Q&&Q.pressingEnter);}},_set_selectedIndex:function G(S,Q){if(this.allowCustomText&&Q===-1){this.selectedIndex=-1;this.onitemSelected(null,Q);}else{this.isSearching=false;this._super(S,Q,true);if(this.hasRendered){var R=this.selectedNode;this.text=R.innerText||R.textContent;}}return true;},onkeydown:function J(S){this._super(S);var R=window.event||S.e,T=R.keyCode,Q=this.getPopupWidget();if(T===M){Q.close({pressingEnter:true});}else{if(this._originalFocusOnPopup&&(T===N||T===F)){this.focusOnPopup=true;if(Q.focus){Q.focus();}Q.raiseEvent(S);}}},onkeyup:function B(S){var Q=window.event||S.e,T=Q.keyCode,R=this.getPopupWidget();this._super(S);if(T===E||T===M){R.close();}else{if(T!==N&&T!==F){this.processSearch();}}},processSearch:function L(){this.isSearching=true;this.hideTooltip();var Q=[],S=this.getPopupList(),U=this.selectedNode.innerHTML,V=S._oldItems||S.items,R=U.toUpperCase(),T;R=R.replace(/<BR>/,"");if(R.length>0){K.forEach(V,function(W){T=W.n;if(T&&T.toUpperCase().indexOf(R)>-1){Q.push(D.clone(W));}},this);}else{Q=V;}S._spft=R;if(this.customizeSearchResult){this.customizeSearchResult(Q);}S.set("items",Q);if(S.adjustCornersForPopupOverflow){S.adjustCornersForPopupOverflow();}delete S._spft;S._oldItems=V;S.set("visible",S.items.length!==0);}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.toolbars.Toolbar","mstrmojo.css");var D=mstrmojo.css;var B;mstrmojo.vi.ui.toolbars.TitleToolbar=mstrmojo.declare(mstrmojo.vi.ui.toolbars.Toolbar,null,{scriptClass:"mstrmojo.vi.ui.toolbars.TitleToolbar",init:function F(H){this._super(H);D.addWidgetCssClass(this,"mstrmojo-VITitleToolbar");},markupMethods:{onvisibleChange:function A(){var H=this.visible,I=this.domNode;D.toggleClass(I,"visible",H);if(!H){D.onTransitionEnd(I,function(){D.addClass(I,"hidden");});}else{D.removeClass(I,"hidden");}}},getItemMarkup:function E(H){if(!B){B=this._super(H).replace("{@en@n}",'<div class="icn"></div>');}return B;},ontoolbarCfgChange:function G(H){var I=H.value;if(I){if(I.showContextMenu){I.addMenuToolbarBtn("","mnu");}if(I.hasCloseButton){I.addToolbarBtn(I.closeButtonText,"cls",function(K,J){J.parent.close();});}}this._super(H);},onItemContextMenu:function C(H){this.closePopup();if(H.fn){H.fn(H,this);return true;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.vi._MonitorsAppState","mstrmojo.vi._MonitorsLayoutMode","mstrmojo._HasOwnAvatar","mstrmojo.vi.ui._IsDropTarget","mstrmojo.EditableLabel","mstrmojo.ui.menus.MenuConfig","mstrmojo.css");var A=mstrmojo.css,N=mstrmojo.dom,M="draggedTab",J="stopDragging",l=1,L=2,p=4,G=8,k=16;function m(q){return function(){A.toggleClass(this.tabStripMenuNode,"active",q);};}function g(AB){var w=new mstrmojo.ui.menus.MenuConfig({supportsScroll:true,maxHeight:N.getMaxScrollHeight()}),q=this.getMenuActions(),z=this.index,t=this.id,u=this.total,x=this.parent,r=function(){var AC=x&&x.getTabs();return AC&&AC.length>z?AC[z]:mstrmojo.all[t];};if((q&k)>0){this.addNewTabMenuItem(w);}if((q&p)>0){var y=mstrmojo.desc(3397,"Duplicate"),AA=this.parent.scriptClass;if(AA.indexOf("LayoutTabStrip")>=0){y=mstrmojo.desc(15022,"Duplicate Chapter");}else{if(AA.indexOf("PanelTabStrip")>=0){y=mstrmojo.desc(14923,"Duplicate Page");}}w.addMenuItem(y,"dup",function(){r().tabDuplicated();});}if((q&L)>0){if(z){w.addMenuItem(mstrmojo.desc(5362,"Move Left"),"lft",function(){r().tabMoved(true);});}if(z<u-1){w.addMenuItem(mstrmojo.desc(5363,"Move Right"),"rgt",function(){r().tabMoved(false);});}}w.addSeparator();if((q&l)>0){w.addMenuItem(mstrmojo.desc(1388,"Rename"),"rnm",function(){r().lbl.set("isEditing",true);});}if((q&G)>0){if(u>1){w.addMenuItem(mstrmojo.desc(629,"Delete"),"cls",function(){r().tabDeleted();});}}var v=this.getCustomMenu();if(v&&v.hasMenuItems()){w.addSeparator();w.absorbMenuItems(v);}w.addPopupHandlers(this.id,m(true),m(false));this.showTabMenu(this.updateMenuCfg(w),AB);}mstrmojo.vi.ui.tabs.Tab=mstrmojo.declare(mstrmojo.Container,[mstrmojo.ui.menus._HasMenuPopup,mstrmojo._HasOwnAvatar,mstrmojo.vi.ui._IsDropTarget,mstrmojo.vi._MonitorsAppState,mstrmojo.vi._MonitorsLayoutMode],{scriptClass:"mstrmojo.vi.ui.tabs.Tab",markupString:'<div id="{@id}" class="mstrmojo-VITab unselectable {@cssClass}" style="{@cssText}" unselectable="on" mstrAttach:contextmenu,click><div><div class="mstrmojo-VITab-tab"></div><div class="mstrmojo-VITab-menu"></div></div></div>',markupSlots:{containerNode:function S(){return this.domNode.firstChild.firstChild;},menuBtnNode:function o(){return this.domNode.firstChild.lastChild;}},markupMethods:{ontitleChange:function I(){this.lbl.set("text",this.title);},onisSelectedChange:function h(){mstrmojo.css.toggleClass(this.domNode,"selected",this.isSelected);},onzIndexChange:function j(){this.domNode.style.zIndex=this.zIndex;}},zIndex:1,menuBtnNode:null,lbl:null,title:"",index:-1,total:-1,isSelected:false,isCutoff:false,isHidden:false,isLeftMost:false,isRightMost:false,leftEdgeHiddenWidth:0,rightEdgeHiddenWidth:0,children:[{scriptClass:"mstrmojo.EditableLabel",alias:"lbl",editOnClick:false,onTextEditComplete:function V(r,q){if(r){this.parent.titleEdited(this.text,q);}}}],postBuildRendering:function Q(){var q=this.isValidMode();if(!q||(mstrApp.isLayoutModePreview&&mstrApp.isLayoutModePreview())){this.draggable=false;}this.lbl.set("editOnDoubleClick",q);this._super();},oncontextmenu:function a(q){this.onclick(q);q.preventDefault();},onclick:function d(q){var t=this.domNode;if(A.hasClass(t,J)){A.removeClass(t,J);return ;}var r=function(){if(this.isValidMode()){this.postTabClicked(this,q);}};if(!this.isSelected){this.tabSelected({success:r.bind(this)});}else{r.call(this);}},postTabClicked:function n(u,r){u=this.findSelectedTab(this)||u;var q=u.menuBtnNode,v=r.getTarget().className===q.className,t;if(v){t=N.position(q);}if(r.name==="contextmenu"||(v&&!(t.x||t.y))){t={x:r.e.clientX,y:r.e.clientY};}if(t){g.call(u,t);}},getMenuActions:function c(){return 0;},getCustomMenu:function X(){return null;},isDragValid:function R(){return this.parent.children.length>1&&!this.lbl.isEditing&&this.isValidMode();},createAvatar:function T(){var q=document.createElement("div");q.appendChild(this.domNode.cloneNode(true));q.style.margin="-5px 0 0 10px";return q;},addTabDnDStyle:function W(){var q=this.lbl.domNode;if(q&&!this.isSelected){A.addClass(q,M);}},clearTabDnDStyle:function F(){var q=this.lbl.domNode;if(q&&!this.isSelected){A.removeClass(q,M);}},allowDrop:function D(q){var r=q.src.widget;return r&&r.parent===this.parent;},dropTab:function K(q){var u=q.src,t=u.data,r=u.widget;r.clearTabDnDStyle();this.parent.moveTab(t.idx,this.index,t.fromIdx);},ondragenter:function H(r){this._super(r);var u=r.src.data,t=r.src.widget,q=this.index;this.parent.moveTab(u.idx,q);u.idx=q;},ondragover:function Z(t){var q=t.tgt.node,r=t.tgtData,u=r&&r.node,v=t.src.widget;if(!r||u!==q){t.tgtData={node:q};}if(v&&!v.isSelected){v.addTabDnDStyle();}},ondragleave:function P(q){this._super(q);var r=q.src.widget;if(r&&!r.isSelected){r.addTabDnDStyle();}},ondragend:function C(q){this._super(q);A.addClass(this.domNode,J);this.dropTab(q);},getDragData:function b(){var t=this.id,q=this.index;return{setAvatarClass:function r(u){var x=mstrmojo.all[t],v=x.avatar;if(v){var w=[x.avatarCssClass,"hasOwnAvatar",u];v.className=w.join(" ");}},fromIdx:q,idx:q};},getDropAvatarIcon:function B(){return"pivot";},isValidMode:function E(){return !((mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation())||(mstrApp.isAppStateSelection&&mstrApp.isAppStateSelection())||(mstrApp.allowWebDashboardDesign&&!mstrApp.allowWebDashboardDesign()));},cleanUpAfterTarget:function e(q){this.clearTabDnDStyle();this._super(q);},onAppStateChange:function f(r){var u=this.lbl,t=this.isValidMode(),q=mstrApp.isLayoutPreview(r.value);u.set("isEditing",false);u.set("editOnDoubleClick",t);this.draggable=t&&!q;},onLayoutModeChange:function O(r){var t=this.isValidMode(),q=mstrApp.isLayoutPreview(r.value);this.draggable=t&&!q;},addNewTabMenuItem:function U(q){this.throwAbstractMethodError("addNewTabMenuItem");},findSelectedTab:mstrmojo.emptyFn,tabSelected:mstrmojo.emptyFn,titleEdited:mstrmojo.emptyFn,tabMoved:mstrmojo.emptyFn,tabDeleted:mstrmojo.emptyFn,tabDuplicated:mstrmojo.emptyFn,showTabMenu:mstrmojo.emptyFn,updateMenuCfg:function Y(q){return q;}});mstrmojo.vi.ui.tabs.Tab.ACTIONS={NEW_TAB:k,RENAME:l,MOVE:L,DUPLICATE:p,DELETE:G};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.string","mstrmojo.Widget","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.mstr.EnumDSSXMLObjectSubTypes","mstrmojo.ME.MetricDataService");mstrmojo.requiresDescs(3224);var Y=["(",")","{","}","-","+","*","/","<",">","|","~",","],I={" ":true,"@":true},X=null,W=mstrmojo.dom,K=mstrmojo.css,H=mstrmojo.mstr.EnumDSSXMLObjectTypes,D=mstrmojo.mstr.EnumDSSXMLObjectSubTypes,Z=mstrmojo.ME.MetricDataService;function O(e){if(!X){X={};var d,b;for(d=0,b=Y.length;d<b;d++){X[Y[d]]=true;}}return X.hasOwnProperty(e);}function a(e){if(!e){return false;}var b=e.length,d,f;for(d=0;d<b;d++){f=e.charAt(d);if(f==="["){return false;}if(O(f)||I[f]){return true;}}return false;}function A(b){return a(b)?"["+b+"]":b;}function M(f){if(!f){return null;}var b=f.length,e=f.split("["),d=e.length,h,g;if(d===1){return f.split("@");}else{if(d===3){h=e[1];h="["+h.substring(0,h.length-1);g="["+e[2];}else{if(e[0].length===0){var j=e[1],c=j.indexOf("]");h="["+j.substring(0,c+1);if(c===j.length-1){return[h];}else{g=j.substring(c+2);}}else{var j=e[0];h=j.substring(0,j.length-1);g="["+e[1];}}}return[h,g];}var R={8:true,9:true,10:true};var C=function(c,b){return R[c]&&!/^\".*\"$/.test(b)?'"'+b+'"':b;};var F=function(c,b,d){var e=typeof d==="undefined"?true:R[d];if(b.length===2&&b==='""'){return b;}return c.tp===261&&b.length>=2&&e?(/^\s+$/.test(b.substr(1,b.length-2))?b:b.substr(1,b.length-2)):b;};mstrmojo.ME.MetricToken=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui.menus._HasMenuPopup],{data:null,markupString:'<span id={@id} class="mstrmojo-token {@cssClass}" mstrAttach:contextmenu></span>',active:false,markupMethods:{ondataChange:function(){var c=this.data,e=this.isEmbeddedFilter(),b=e?"&nbsp;":mstrmojo.string.encodeHtmlString(String(c.v));if(c.v===","){this.domNode.innerHTML=b+"&nbsp;";}else{if(c.tp===259&&c.v==="Desc"){this.domNode.innerHTML="&nbsp;"+b;}else{if(Z.isLogicOrCompFunc(c)){this.domNode.innerHTML="&nbsp;"+b+"&nbsp;";}else{this.domNode.innerHTML=b;}}}K.toggleClass(this.domNode,["mstr"],this.isMstrO());K.toggleClass(this.domNode,["nfn"],!this.isFunction());K.toggleClass(this.domNode,["invalid"],c.sta===-1);K.toggleClass(this.domNode,["embeddedFilter"],e);},onactiveChange:function(){mstrmojo.css.toggleClass(this.domNode,["active"],this.active);}},oncontextmenu:function U(b){this.closePopup();if(this.isEmbeddedFilter()){var d=new mstrmojo.ui.menus.MenuConfig({position:W.getMousePosition(b.e,b.hWin),isHostedWithin:false,alignWithAnchor:true});var c=this;d.addMenuItem(mstrmojo.desc(3224,"Edit..."),"",function(){var e=c.parent;if(e&&e.editEmbeddedFilterToken){e.editEmbeddedFilterToken(c);}});this.openPopup(d.newInstance());}},isMstrO:function V(){return !!this.data.oi||!!this.data.rfd;},isFunction:function B(){return this.isMstrO()&&(this.data.oi&&this.data.oi.t===H.Function);},isEmbeddedFilter:function J(){var d=this.data.oi,c=d&&d.t,b=d&&d.st;return this.isMstrO()&&c===H.Filter&&b===D.Filter&&d.isEmbedded;},brackets:A,length:function E(){return this.isEmbeddedFilter()?1:this.data.v.toString().length;},isDelimiter:function T(){return this.data.isDelimiter||(this.length()===1&&O(this.data.v));},split2Tokens:function L(f){var e=this.data,c=e&&e.v.toString(),g=c.substring(0,f),b=c.substring(f);return[{v:g,isNew:true},{v:b,isNew:true}];},mergeTo:function N(c){var f=this.data,e=f&&f.v.toString(),b=c.data.v.toString();return{v:e+b,isNew:true};},brackets:A,setItemInfo:function S(b){var c=this.data;c.v=this.brackets(b.n);c.oi=b;c.sta=1;c.isNew=true;this.set("data",c);this.paint();},spliceContent:function P(j,g,c){var h=this.data,f=h&&h.v.toString(),k=f.substring(0,j);g=(g===null||g===undefined)?(f.length-j):g;var b=f.substring(j+g),e=k+(c||"")+b;h.v=e;h.isNew=true;h.sta=1;h.ift=(this.isAttributeToken()||h.at)&&(h.v.indexOf("@")>=0);if(h.ift){h.at=h.oi||h.at;}else{delete h.at;}delete h.oi;delete h.exv;delete h.extp;delete h.tp;this.set("data",h);this.paint();},isAttributeToken:function G(){return this.data&&this.data.oi&&this.data.oi.t===H.Attribute;},setFormInfo:function Q(c){var e=this.data,b=e.oi||e.at;e.v=this.brackets(b.n)+"@"+this.brackets(c.n);e.exv=c.did;e.extp=8;e.sta=1;e.isNew=true;e.oi=e.at;delete e.at;this.set("data",e);this.paint();}});mstrmojo.ME.MetricToken.isDelimiter=O;mstrmojo.ME.MetricToken.brackets=A;mstrmojo.ME.MetricToken.splitAttrAndAttrForm=M;mstrmojo.ME.MetricToken.quotes=C;mstrmojo.ME.MetricToken.unquotes=F;mstrmojo.ME.MetricToken.QUOTABLE_DATATYPES=R;mstrmojo.ME.MetricToken.argDelimiter={".":",",",":";"}[mstrConfig&&mstrConfig.decimalSep]||",";})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.string","mstrmojo.dom","mstrmojo.css","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.ui.menus.MenuConfig");var D=mstrmojo.string,A=mstrmojo.dom,E=mstrmojo.ui.PopupConfig.ENUM_CORNERS;function B(){var K=this,J=K.statusList,F=J&&J.length||0,G=K.statusConfig||new mstrmojo.ui.menus.MenuConfig(),L=function(M){return function(N){K.set("status",M);K.onStatusClick(M);};};if(!G.hasMenuItems()&&F){for(var H=0;H<F;H++){var I=J[H];G.addMenuItem(I.n,I.cls||"",L(I),K);}}else{}if(G.hasMenuItems()){G.alignment=K.alignment||{host:E.BOTTOM_LEFT,popup:E.TOP_LEFT};G.hostId=K.id;G.hostElement=K[K.hostElementName]||K.domNode;K.openPopup(G.newInstance());}}function C(){var F=this.statusConfig||this.statusList&&this.statusList.length>1;this.menuButtonNode.style.display=F?"":"none";}mstrmojo.ui.StatusButton=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.ui.StatusButton",markupString:'<div id="{@id}" class="mstrmojo-StatusButton {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}"><div class="mstrmojo-Button {@innerIconClass}"  mstrAttach:click><span class="mstrmojo-text"></span></div><div class="menuButton" mstrAttach:click></div></div>',markupSlots:{textNode:function(){return this.domNode.firstChild;},textSpanNode:function(){return this.domNode.firstChild.firstChild;},menuButtonNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onstatusChange:function(){this.textSpanNode.innerHTML=D.encodeHtmlString(this.status&&this.status.n||"");},onstatusListChange:function(){C.call(this);},onstatusConfigChange:function(){C.call(this);}},status:null,statusList:null,statusConfig:null,onclick:function(F){var G=A.eventTarget(F.hWin,F.e);if(A.contains(this.menuButtonNode,G,true)){B.call(this);}else{if(A.contains(this.textNode,G,true)){this.onButtonClick(this.status,F);}}},onButtonClick:mstrmojo.emptyFn,onStatusClick:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.ui.menus.MenuConfig");var A=mstrmojo.func,J=mstrmojo.desc(2177,"Close");function G(L){return function(N,M){M.openMenu(L,N);};}mstrmojo.ui.menus.ToolbarConfig=mstrmojo.declare(mstrmojo.ui.menus.MenuConfig,null,{scriptClass:"mstrmojo.ui.menus.ToolbarConfig",btns:null,hasCloseButton:false,closeButtonText:J,showContextMenu:true,addCloseButton:function E(L){this.hasCloseButton=true;if(L){this.closeButtonText=L;}},preShowMenu:mstrmojo.emptyFn,addToolbarBtn:function I(R,M,P,L,N,Q){var O={n:R,cls:M,fn:P,ctxt:L,ttp:Q};if(isNaN(N)||N>=this.btns.length){this.btns.push(O);}else{this.btns.splice(N,0,O);}return O;},addDisabledToolbarBtn:function I(O,M,L){var N=this.addToolbarBtn(O,(M||"")+" disabled",mstrmojo.emptyFn,L);N.dsbld=true;},addToolbarPickerBtn:function B(R,M,P,Q,L,N){var O={n:R,cls:M,fn:P,ctxt:L,tp:"pb",menufn:G(Q||this)};if(isNaN(N)||N>=this.btns.length){this.btns.push(O);}else{this.btns.splice(N,0,O);}},addMenuToolbarBtn:function H(P,L,O,M,N){if(!O&&!this.hasMenuItems()){return ;}this.addToolbarBtn(P,L,A.composite([this.preShowMenu,G(O||this),(N||mstrmojo.emptyFn)]),null,M);},addToggleToolbarButton:function D(S,O,Q,N,M,R,L){var P=this.getToggleItemStates(S,O,Q,N,R,L);this.addDualStateItem(M,P[0],P[1],true);},addDualStateItem:function K(M,L,N,O){this["add"+(O?"ToolbarBtn":"MenuItem")](L.n,L.cls,this.getDualStateHandler(M,L,N),L.ctxt,undefined,L.ttp);},getDualStateHandler:function C(M,L,N){var O=this._super(M,L,N);return function(P,Q){O.call(this,P,Q);Q.refresh();};},clear:function F(){this.btns=[];this.hasCloseButton=false;this.closeButtonText=J;this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.FieldSet","mstrmojo._FormatDefinition","mstrmojo.Label","mstrmojo.Pulldown","mstrmojo.ColorPicker");var C=mstrmojo.hash,A=mstrmojo.color,D=mstrmojo._FormatDefinition;var B=function(F,I,E){var H=["Left","Right","Top","Bottom"];for(var G=0;G<3;G++){F[H[G]+I]=E;}F.set(H[3]+I,E);};mstrmojo.BorderFormatter=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.BorderFormatter",cssClass:"mstrmojo-BorderFormatter",markupString:'<div id={@id} class="{@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},postCreate:function(){this.onmodelChange();},onmodelChange:function(){if(this.model&&!this.model.scriptClass){C.make(this.model,mstrmojo.Obj);}},children:[{scriptClass:"mstrmojo.FieldSet",alias:"borders",cssClass:"mstrmojo-FormatEditor-border",legend:mstrmojo.desc(2886),children:[{scriptClass:"mstrmojo.Table",alias:"borderTable",cssText:"width:100%;",rows:1,cols:2,children:[{scriptClass:"mstrmojo.List",alias:"borderTypes",selectedIndex:0,cssClass:"borderTypes",items:[{n:'<img border="0" align="absmiddle" src="../images/borders_none.gif" alt=""> '+mstrmojo.desc(2057),v:1},{n:'<img border="0" align="absmiddle" src="../images/borders_all.gif" alt=""> '+mstrmojo.desc(2058),v:2},{n:'<img border="0" align="absmiddle" src="../images/borders_custom.gif" alt=""> '+mstrmojo.desc(2056),v:3}],slot:"0,0",bindings:{m:"this.parent.parent.parent.model",selectedIndex:function(){var E=this.m;if(C.isEmpty(E)){return 0;}if(E.LeftStyle==0&&E.TopStyle==0&&E.RightStyle==0&&E.BottomStyle==0){return 0;}else{if(E.LeftStyle==E.TopStyle&&E.LeftStyle==E.RightStyle&&E.LeftStyle==E.BottomStyle){return 1;}}return 2;}},onchange:function(E){if(this.m){var G=this.parent.borderAndColor;if(!G){return ;}if(this.selectedIndex===0){var H=["Left","Right","Top","Bottom"];for(var F=0;F<4;F++){this.m.set(H[F]+"Style","0");this.m.set(H[F]+"Color","0");}}}}},{scriptClass:"mstrmojo.Container",alias:"borderAndColor",markupString:'<div class="borderStyles"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},children:[{scriptClass:"mstrmojo.Container",alias:"allBordersContainer",markupString:'<div class="mstrmojo-FormatEditor-ColorLine-borders"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},bindings:{visible:"this.parent.parent.borderTypes.selectedIndex==1"},children:[{scriptClass:"mstrmojo.Table",alias:"allBorders",rows:1,cols:3,onshowChange:function(){if(this.show){B(this.m,"Style",this.styles.value);B(this.m,"Color",A.encodeColor(this.colors.fillColor));}},bindings:{m:"this.parent.parent.parent.parent.parent.model"},postCreate:function(){var F=["Left","Right","Top","Bottom"];var E=[{scriptClass:"mstrmojo.Pulldown",alias:"styles",items:D.BorderStyles,itemIdField:"v",bindings:{m:"this.parent.m",value:function(){var I=this.m.LeftStyle,K=this.m.RightStyle,J=this.m.TopStyle,H=this.m.BottomStyle;var G=0;if(I==K&&K==H&&H==J){G=mstrmojo.array.find(D.BorderStyles,"v",I);}G=G==-1?0:G;return this.items[G][this.itemIdField];}},onvalueChange:function(){if(this.parent.parent.visible){B(this.m,"Style",this.value);}},slot:"0,1"},mstrmojo.ColorPicker.createDropDown({alias:"colors",bindings:{m:"this.parent.m",fillColor:function(){var H=this.m.LeftColor,K=this.m.RightColor,J=this.m.TopColor,G=this.m.BottomColor;if(H==K&&K==G&&G==J){var I=H;}if(typeof (I)!="undefined"&&/^\d{1,8}$/.test(I)){return A.decodeColor(I);}return"transparent";}},onfillColorChange:function(){if(this.parent.parent.visible){B(this.m,"Color",this.fillColor=="transparent"?"pru":A.encodeColor(this.fillColor));}},slot:"0,2"})];this.addChildren(E);}}]},{scriptClass:"mstrmojo.Container",alias:"customBordersContainer",markupString:'<div class="mstrmojo-FormatEditor-ColorLine-borders"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},bindings:{visible:"this.parent.parent.borderTypes.selectedIndex==2"},children:[{scriptClass:"mstrmojo.Table",alias:"customBorders",rows:1,cols:3,bindings:{m:"this.parent.parent.parent.parent.parent.model"},postCreate:function(){var H=["Left","Right","Top","Bottom"];var G=[];for(var F=0;F<H.length;F++){var E=H[F];G.push({scriptClass:"mstrmojo.Label",text:mstrmojo.desc({Left:3528,Right:3529,Top:3526,Bottom:3527}[E]),alias:E,slot:"0,0"},{scriptClass:"mstrmojo.Pulldown",items:D.BorderStyles,itemIdField:"v",pr:E+"Style",bindings:{m:"this.parent.m",value:function(){var K=this.m.LeftStyle,M=this.m.RightStyle,L=this.m.TopStyle,J=this.m.BottomStyle;var I=mstrmojo.array.find(D.BorderStyles,"v",this.m[this.pr]);I=I==-1?0:I;return this.items[I][this.itemIdField];}},onvalueChange:function(){if(this.parent.parent.visible){this.m.set(this.pr,this.value);}},slot:"0,1"},mstrmojo.ColorPicker.createDropDown({cssClassx:"mstrmojo-FormatEditor-colorPicker",alias:E+"Color",pr:E+"Color",bindings:{m:"this.parent.m",fillColor:function(){var J=this.m.LeftColor,M=this.m.RightColor,L=this.m.TopColor,I=this.m.BottomColor;var K=this.m[this.pr];if(typeof (K)!="undefined"&&/^\d{1,8}$/.test(K)){return A.decodeColor(K);}return"transparent";}},onfillColorChange:function(){if(this.parent.parent.visible){this.m.set(this.pr,this.fillColor=="transparent"?"pru":A.encodeColor(this.fillColor));}},slot:"0,2"}));}this.addChildren(G);}}]}],slot:"0,1"}]},{scriptClass:"mstrmojo.Label",cssClass:"borderPreview",text:mstrmojo.desc(7941),bindings:{m:"this.parent.parent.model",cssText:function(){var G={0:"None",3:"Dashed",4:"Dotted",6:"Double",7:"Solid"},E={1:"Thin",5:"Thick",6:"medium"};var F=this.parent.borderTable.borderTypes.selectedIndex;return";border-left-style: "+(G[this.m.LeftStyle]||"solid")+";border-right-style: "+(G[this.m.RightStyle]||"solid")+";border-top-style: "+(G[this.m.TopStyle]||"solid")+";border-bottom-style: "+(G[this.m.BottomStyle]||"solid")+";border-left-color: "+A.decodeColor(this.m.LeftColor||"0")+";border-right-color: "+A.decodeColor(this.m.RightColor||"0")+";border-top-color: "+A.decodeColor(this.m.TopColor||"0")+";border-bottom-color: "+A.decodeColor(this.m.BottomColor||"0")+";border-left-width: "+(E[this.m.LeftStyle]||"thin")+";border-right-width: "+(E[this.m.RightStyle]||"thin")+";border-top-width: "+(E[this.m.TopStyle]||"thin")+";border-bottom-width: "+(E[this.m.BottomStyle]||"thin");}}}]}]});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.FieldSet","mstrmojo.Label","mstrmojo.ColorPicker");var A=mstrmojo.hash,B=mstrmojo.color;mstrmojo.FillFormatter=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.FillFormatter",cssClass:"mstrmojo-FillFormatter",isChart:false,markupString:'<div id={@id} class="{@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},postCreate:function(){this.onmodelChange();},onmodelChange:function(){if(this.model&&!this.model.scriptClass){A.make(this.model,mstrmojo.Obj);}},children:[{scriptClass:"mstrmojo.FieldSet",alias:"fill",cssClass:"mstrmojo-FormatEditor-fill",legend:mstrmojo.desc(2885,"Fill"),bindings:{legend:"this.parent.isChart ? mstrmojo.desc(3902, 'Series Colors') : mstrmojo.desc(2885, 'Fill')"},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2060,"Color"),cssClass:"label"},mstrmojo.ColorPicker.createDropDown({bindings:{m:"this.parent.parent.model",fillStyle:function(){var H=this.m,J=parseInt(H.FillStyle,10);if(J===2){var E=parseInt(H.GradientAngle,10),I=E===0?1:0,D=B.decodeColor(H.FillColor),K=B.decodeColor(H.GradientColor),C=parseInt(H["Gradient"+(E===0?"X":"Y")+"Offset"],10)===100?1:0,G=(C!==1)?mstrmojo.css.buildGradient(I,D,K):mstrmojo.css.buildGradient(I,K,D);this.set("gradientCss",G.n+":"+G.v);this._updateGradientInfo();}else{var F=this.m.FillColor;if(F!==undefined&&/^\d{1,8}$/.test(F)){F=B.decodeColor(F);}else{F="transparent";}this.set("fillColor",F);}return J||0;}},_updateGradientInfo:function(){var C=this.m;this.gradient=mstrmojo.hash.copy({FillColor:B.decodeColor(C.FillColor),GradientColor:B.decodeColor(C.GradientColor)},A.copy(C));},onfillColorChange:function(){this.m.FillColor=(this.fillColor==="transparent"?"pru":B.encodeColor(this.fillColor));this.m.FillStyle=0;},ongradientChange:function(C){var F=["FillStyle","FillColor","GradientColor","GradientXOffset","GradientYOffset","GradientAngle"],E;for(E=0;E<F.length;E++){var D=C.value[F[E]];this.m[F[E]]=/Color$/.test(F[E])?B.encodeColor(D):D;}this.m.FillStyle=2;}},{showGradients:false})]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo._FormatDefinition","mstrmojo.Table","mstrmojo._HasLayout","mstrmojo.color","mstrmojo.ColorPicker");var D=mstrmojo.hash,C=mstrmojo.array,F=mstrmojo._FormatDefinition,B=mstrmojo.color;var A=function(G){var H={scriptClass:"mstrmojo.List",cssClass:"mstrmojo-FormatEditor-fontFamily",itemCssClass:"mstrmojo-FormatEditor-bullet",selectedIndex:0,itemIdField:"v",itemMarkup:'<div class="mstrmojo-FormatEditor-bullet"><div class="mstrmojo-text">{@n}</div></div>'};return D.copy(G,H);};var E=function(I){var H=I.alias,G=I.label,J=I.pr;return{alias:H,scriptClass:"mstrmojo.TristateCheckBox",text:G,checked:false,grayed:false,bindings:{m:I.modelBinding,checked:function(){return this.m[J]==-1;},grayed:function(){return(typeof this.m[J]=="undefined")||this.m[J]=="pru";}},oncheckedChange:function(K){if(this.m){this.m.set(J,this.checked?-1:0);}}};};mstrmojo.FontFormatter=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.FontFormatter",cssClass:"mstrmojo-FontFormatter",markupString:'<div id={@id} class="{@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},postCreate:function(){this.onmodelChange();},onmodelChange:function(){if(this.model&&!this.model.scriptClass){D.make(this.model,mstrmojo.Obj);}},children:[{scriptClass:"mstrmojo.Table",layout:[{cells:[{},{},{}]},{cells:[{},{colSpan:2}]}],children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2172),slot:"0,0"},A({items:F.Families,itemMarkup:'<div class="mstrmojo-FormatEditor-bullet"><div class="mstrmojo-text" style="font-family:{@n}">{@n}</div></div>',pr:"Name",bindings:{selectedIndex:function(){var H=this.parent.parent.model;if(H){var I=H.Name,G=C.find(this.items,this.itemIdField,I);return G==-1?0:G;}}},onchange:function(){var G=this.parent.parent.model;if(G){G.set("Name",this.selectedItem.v);}},slot:"0,0"}),{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(3059),slot:"0,1"},A({items:F.Styles,cssClass:"mstrmojo-FormatEditor-fontStyle",bindings:{selectedIndex:function(){var K=this.parent.parent.model;if(K){var I=K.Bold||"",H=K.Italic||"",J=I==""&&H==""?"":I+","+H,G=mstrmojo.array.find(this.items,this.itemIdField,J);G=G==-1?mstrmojo.array.find(this.items,"v2",J):G;return(G==-1?0:G);}}},onchange:function(){var I=this.parent.parent.model;if(I&&this.selectedItem){var H=this.selectedItem.v.split(","),G=italic="pru";if(H[0]!="pru"){G=H[0]=="-1"?"-1":"0";italic=H[1]=="-1"?"-1":"0";}I.set("Bold",G);I.set("Italic",italic);}},slot:"0,1"}),{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2178),slot:"0,2"},A({items:F.Sizes,cssClass:"mstrmojo-FormatEditor-fontSize",bindings:{selectedIndex:function(){var H=this.parent.parent.model;if(H){var I=H.Size,G=C.find(this.items,this.itemIdField,I);return G==-1?0:G;}}},onchange:function(){var G=this.parent.parent.model;if(G){G.set("Size",this.selectedItem.v);}},slot:"0,2"}),{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(3060),slot:"1,0"},{scriptClass:"mstrmojo.VBox",cssClass:"mstrmojo-FormatEditor-fontEffect",postCreate:function(){this.addChildren(E({alias:"Underline",label:mstrmojo.desc(3061),pr:"Underline",modelBinding:"this.parent.parent.parent.model"}));this.addChildren(E({alias:"Strikeout",label:mstrmojo.desc(3062),pr:"Strikeout",modelBinding:"this.parent.parent.parent.model"}));},slot:"1,0"},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(3063),slot:"1,1"},mstrmojo.ColorPicker.createDropDown({pr:"Color",bindings:{fillColor:function(){var G=this.parent.parent.model;if(G){var H=G[this.pr];if(typeof (H)!="undefined"&&/^\d{1,8}$/.test(H)){return B.decodeColor(H);}}return"transparent";}},onfillColorChange:function(){if(this.parent.parent.model){this.parent.parent.model.set(this.pr,this.fillColor=="transparent"?"pru":B.encodeColor(this.fillColor));}},slot:"1,1"}),{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2036),slot:"1,1"},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-FormatEditor-fontPreview",text:mstrmojo.desc(2037),bindings:{m:"this.parent.parent.model",cssText:function(){var H=this.m.Color,J=this.m.Size,K=this.m.Name,I=this.m.Bold,G=this.m.Italic,M=this.m.Underline,L=this.m.Strikeout;H=/^\d{1,8}$/.test(H)?B.decodeColor(H):B.decodeColor(F.DefaultFormat.FormattingFont.Color);J=J||F.DefaultFormat.FormattingFont.Size;K=K||F.DefaultFormat.FormattingFont.Name;I=I=="-1"?"bold":"normal";G=G=="-1"?"italic":"normal";M=parseInt(M)==-1;L=parseInt(L)==-1;return";font-family:"+K+";font-style:"+G+";font-weight:"+I+";font-size:"+J+"pt;color:"+H+";text-decoration:"+(M?" underline ":"")+(L?" line-through ":"");}},slot:"1,1"}]}]});})();(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.TextBox","mstrmojo.Button","mstrmojo.HBox","mstrmojo.EnumAuthenticationModes","mstrmojo.UsherLogin","mstrmojo.string","mstrmojo.cookies");mstrmojo.requiresDescs(17,18,221,11804,11863);var F=mstrmojo.EnumAuthenticationModes,D={};D[F.LDAP]=mstrmojo.desc(1947,"LDAP Authentication");D[F.DATABASE]=mstrmojo.desc(1948,"Database Authentication");var L={LIVE_OR_HL:0,PERSISTED:1};function B(){return(JSON.parse(decodeURIComponent(mstrmojo.cookies.getCookieSetting("lastMsgID")||"{}")))[mstrConfig.lastMsgKey];}function C(){var Q=this,R=Q.stdLoginInfo,O=R.user.value,N=R.tsvCode.value,S=R.pwd.value,T={taskId:"login",server:mstrConfig.serverName,project:mstrmojo.string.decodeHtmlString(mstrConfig.projectName),port:mstrConfig.serverPort,authMode:mstrConfig.authMode,setAsActiveSession:true};var P=B();if(P){T.msgID=P;}if((this.authMode&(F.STANDARD|F.LDAP|F.DATABASE))>0){T.userid=O;T.password=S;T.tsvCode=N;}mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(W){if(W&&W.sessionState){mstrApp.updateSessionState(W.sessionState);if(mstrApp.sessionManager){mstrApp.sessionManager.restart();}var Z=W;var Y=Z.servletState;if(Y){if(mstrApp){mstrApp.servletState=Y;}if(mstrConfig){mstrConfig.servleState=Y;}}var V=W.resCode;if(V==L.LIVE_OR_HL&&(mstrApp.isVI||mstrApp.scriptClass==="mstrmojo.OIVMApp"||mstrApp.analysisID)){mstrmojo.xhr.request("post",mstrConfig.taskURL,{success:function(){var a=Q.config.callback,b=a.success;if(b){b(Z);}},failure:function(){mstrmojo.form.send({evt:3010,src:mstrApp.name+".3010"},null,"POST");}},{taskId:"docXMLResults",sessionState:W.sessionState,msgID:W.msgID,resultFlags:33554432});}else{var U=Q.config.callback,X=U.success;if(X){X(Z);}}}Q.destroy();},failure:function(U){if(Q.authMode===mstrmojo.EnumAuthenticationModes.NTCREDENTIAL){Q.set("visible",true);}mstrmojo.alert(U.getResponseHeader("X-MSTR-TaskFailureMsg"),null,null,Q.zIndex);}},T);}function M(){if(mstrApp.sessionManager){mstrApp.sessionManager.gotoLogoutPage();}}mstrmojo.LoginEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.LoginEditor",cssClass:"mstrmojo-LoginEditor",title:mstrmojo.desc(11804,"Log in to"),btnAlignment:"right",help:null,config:{callback:{},taskParams:{}},authMode:F.STANDARD,usherEnabled:false,init:function K(N){this._super(N);this.title+=" "+mstrApp.projectName;this.set("authMode",parseInt(mstrConfig.authMode,10));if(this.isUsherLogin()){mstrmojo.css.addWidgetCssClass(this,"usher");}},isUsherLogin:function(){return this.authMode===F.USHER;},onvisibleChange:function J(){if(this.visible&&(mstrmojo.dom.isFF||mstrmojo.dom.isWK)){var N=this.stdLoginInfo.user;window.setTimeout(function(){N.focus();},50);}},onOpen:function E(){if(this.authMode===mstrmojo.EnumAuthenticationModes.NTCREDENTIAL){this.set("visible",false);}},onClose:function G(){M();},destroy:function I(){mstrmojo.dom.detachEvent(document.body,"mousedown",this.stopPropagation,true);this._super();},postBuildRendering:function A(){if(this.authMode===mstrmojo.EnumAuthenticationModes.NTCREDENTIAL){C.call(this);return ;}else{var N=this._super();this.stopPropagation=function(O){O.stopPropagation();};mstrmojo.dom.attachEvent(document.body,"mousedown",this.stopPropagation,true);return N;}},preBuildRendering:function H(){if(this.isUsherLogin()){var O=this,N=mstrmojo.insert({scriptClass:"mstrmojo.UsherLogin",alias:"usherLogin",onUsherLogin:function(){mstrConfig.authMode=F.USHER;C.call(O);}});this.addChildren([N],1);}return this._super();},children:[{scriptClass:"mstrmojo.Label",cssText:"margin-bottom: 20px; line-height: 1.5em;",text:mstrmojo.desc(11863,"Your user session has timed out due to inactivity, and you have been automatically logged out. Please log in again.")},{scriptClass:"mstrmojo.Box",alias:"stdLoginInfo",cssClass:"std-login-container",bindings:{visible:function(){return this.parent.authMode!==F.USHER;}},children:[{scriptClass:"mstrmojo.TextBox",alias:"user",cssClass:"login-username",cssDisplay:"block",hint:mstrmojo.desc(17,"User name"),postCreate:function(){if(mstrmojo.dom.isIE9||mstrmojo.dom.isIE8||mstrmojo.dom.isIE7){this.emptyText=mstrmojo.desc(17,"User name");}},onEnter:function(){C.call(this.parent.parent);}},{scriptClass:"mstrmojo.TextBox",alias:"pwd",cssClass:"login-pwd",cssDisplay:"block",hint:mstrmojo.desc(18,"Password"),type:"password",postCreate:function(){if(mstrmojo.dom.isIE9||mstrmojo.dom.isIE8||mstrmojo.dom.isIE7){this.emptyText=mstrmojo.desc(18,"Password");}},onEnter:function(){C.call(this.parent.parent);}},{scriptClass:"mstrmojo.TextBox",alias:"tsvCode",cssClass:"login-tsvCode",cssDisplay:"block",hint:mstrmojo.desc(13825,"Usher code"),bindings:{visible:function(){return mstrConfig.features["is-two-step-verification-required"];}},postCreate:function(){if(mstrmojo.dom.isIE9||mstrmojo.dom.isIE8||mstrmojo.dom.isIE7){this.emptyText=mstrmojo.desc(13825,"Usher code");}},onEnter:function(){C.call(this.parent.parent);}},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-LoginEditor-authMode",bindings:{visible:function(){return this.parent.parent.authMode===F.LDAP||this.parent.parent.authMode===F.DATABASE;},text:function(){return D[this.parent.parent.authMode]||"";}}}]},{scriptClass:"mstrmojo.HBox",slot:"buttonNode",alias:"btns",cssClass:"mstrmojo-Editor-buttonBar",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Button mstrmojo-WebButton hot",text:mstrmojo.desc(26,"Login"),bindings:{enabled:"this.parent.parent.stdLoginInfo.user.value.length > 0",visible:function(){return this.parent.parent.authMode!==F.USHER;}},onclick:function(){C.call(this.parent.parent);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Button mstrmojo-WebButton",text:mstrmojo.desc(221,"Cancel"),onclick:function(){M();}}]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.Stepper","mstrmojo._HasLayout","mstrmojo.ui.editors.controls.ValidationTextBox","mstrmojo.expr","mstrmojo.css");var C=mstrmojo.expr.DTP,B=mstrmojo.css,A="mstrmojo-Stepper-ErrValidation";mstrmojo.ui.editors.controls.Stepper=mstrmojo.declare(mstrmojo.Stepper,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.editors.controls.Stepper",markupString:'<div id="{@id}" class="mstrmojo-Stepper {@orientation} {@cssClass}" mstrAttach:click,mousedown,mouseup,mousemove,selectstart><div class="title">{@title}</div><div class="next">+</div><div class="text"></div><div class="prev">-</div></div>',layoutConfig:{w:{textNode:"100%"},xt:true},textInput:null,init:function E(F){var G=F.provider;if(!!mstrApp.isWSStyling){this.layoutConfig=null;}this.children=[{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",alias:"textInput",slot:"textNode",dtp:G.dtp||C.INTEGER,maxLength:G.maxLength,constraints:{validator:G.validator,max:G.max,min:G.min},onValid:function(){var H=this.parent;B.removeClass(H.domNode,A);G.setVal(parseInt(this.value,10)||0);H.updateDisplayText();}}];this._super(F);this.addDisposable(G);B.addWidgetCssClass(this,"mstrmojo-ui-ctrl-Stepper");},postBuildRendering:function(){this.updateDisplayText();this._super();},updateDisplayText:function D(){this.textInput.set("value",this.provider.getVal());}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.ME.MetricDataService","mstrmojo.ME.DerivedMetricOptions");mstrmojo.requiresDescs(2140);var B=mstrmojo.array;mstrmojo.ME._DerivedMetricEditorHelper=mstrmojo.provide("mstrmojo.ME._DerivedMetricEditorHelper",{isDME:true,noCache:false,closeLabel:mstrmojo.desc(2140,"Cancel"),saveAsEnabled:false,tbBrowsable:false,init:function C(D){this._super(D);},onApplyMetricCallback:mstrmojo.emptyFn,optionPopupRef:{scriptClass:"mstrmojo.ME.DerivedMetricOptions",title:mstrmojo.desc(13035,"Metric Options"),help:"create_derived_metric.htm",width:300},replaceAttributeWithForms:function A(E){var D=[];B.forEach(E,function(F){if(F.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Attribute&&F.fs){B.forEach(F.fs,function(G){if(G.obf||F.da){D.push({n:F.n+"@"+G.fnm,did:F.did+"@"+G.fid,fmdid:G.fid,fnm:G.fnm,t:G.t,frm:G,oi:F,path:F.path});}});}else{D.push(F);}});return D;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._HasLayout","mstrmojo._HasSuggestion","mstrmojo.css");var G=mstrmojo.css,D="clear";function E(){this.searchTriggered(this.inputNode.value);}mstrmojo.ui.SearchBox=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.SearchBox",markupString:'<div id={@id} class="mstrmojo-ui-SearchBox cf {@cssClass}" style="{@cssText}"><input class="mstrmojo-ui-sb-input" type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" mstrAttach:keyup,blur,focus/><div class="mstrmojo-ui-sb-btn" mstrAttach:click ></div></div>',markupSlots:{inputNode:function I(){return this.domNode.firstChild;},searchNode:function B(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},layoutConfig:{h:{inputNode:"20px",searchNode:"20px"},w:{inputNode:"100%",searchNode:"22px"},xt:true},getLayoutOffsets:function(){return{w:2,h:0};},searchNode:undefined,inputNode:undefined,searchDelay:-1,init:function M(P){this._super(P);var O=this.searchDelay;if(O===-1||isNaN(O)){this.searchDelay=parseInt(mstrApp.getSearchAutoCompleteDelay(),10);}},onfocus:function N(O){var P=O.getTarget();if(P===this.inputNode){this.inputNode.placeholder="";G.addClass(this.domNode,"onInputFocus");}},onblur:function H(O){var P=O.getTarget();if(P===this.inputNode){this.inputNode.placeholder="Search...";G.removeClass(this.domNode,"onInputFocus");}},onclick:function L(O){var P=O.getTarget();if(P===this.searchNode){if(this._hasText){this.clearSearch();}else{E.call(this);}}},onkeyup:function A(Q){var P=Q.hWin,T=Q.e||P.event;if(T.keyCode===27){this.clearSearch();return ;}var S=this,O=this.text,U=this.text=this.inputNode.value,R=this._hasText=U.length>0;if(O!==U){G.toggleClass(this.searchNode,[D],R);window.clearTimeout(this._searchTimeoutId);this._searchTimeoutId=window.setTimeout(function(){E.call(S);},this.searchDelay);}},unrender:function F(){this.text="";this._super();},clearSearch:function J(O){this.text=this.inputNode.value="";G.removeClass(this.searchNode,[D]);delete this._hasText;if(!O){E.call(this);}this.postClearSearch();},isClear:function C(){return !this.text||this.text.length===0;},postClearSearch:mstrmojo.emptyFn,searchTriggered:function K(O){}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo._HasSuggestion");var F=-1,E=0,D=1;mstrmojo._ValidateSuggestions=mstrmojo.provide("mstrmojo._ValidateSuggestions",mstrmojo.hash.copy(mstrmojo._HasSuggestion,{_mixinName:"mstrmojo._ValidateSuggestions",itemValidationField:"did",verifyObject:function C(J,H){var M=this.candidates,L;if(M){var I=M.items,G=mstrmojo.array.find(I,this.itemValidationField,H.data[this.itemValidationField]);G=G>-1?G:mstrmojo.array.find(I,this.itemField,J);if(G>-1){H.updateData(I[G]);L=E;}else{if(M.isComplete){L=D;}}}if(L!==undefined){return L;}var K=this._vqueue=this._vqueue||[];K.push({pattern:J,id:H.data[this.itemIdField]});if(!this._vInProgress){this.verifyNextCandidate();}return F;},verifyNextCandidate:function B(){var G=this._vqueue;if(!G||G.length===0){this._vInProgress=false;return ;}this.verifyCandidate(G.shift());},verifyCandidate:function A(H){var G=this;this._vInProgress=true;this.getCandidatesThroughTaskCall({pattern:H.pattern,blockBegin:1,blockCount:G.noCache?-1:this.suggestCount,isVerify:true},{success:function(N){var K=G.ctxtBuilder.itemWidgets,J=K&&K.length,O,M;for(M=0;M<J;M++){if(K[M].data[G.itemIdField]===H.id){O=K[M];break;}}if(!O){return ;}var L=N.items;if(L&&L.length===1){O.updateData(L[0]);}else{if(L&&L.length>1){var I=mstrmojo.array.find(L,"did",O.data.did);if(I>-1){O.updateData(L[I]);}else{O.set("state",D);}}else{O.set("state",D);}}},failure:function(I){mstrmojo.alert(I.getResponseHeader("X-MSTR-TaskFailureMsg"));},complete:function(){G.verifyNextCandidate();}});}}));mstrmojo._ValidateSuggestions.ENUM_STATES={UNDETERMINED:F,VALID:E,INVALID:D};}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.array","mstrmojo.WidgetTree","mstrmojo.TreeBrowserNode","mstrmojo.TreeBrowserSelector");mstrmojo.TreeBrowserEnum={};var I=mstrmojo.TreeBrowserEnum;I.BRANCH_POLICY_TOGGLE="toggle";I.BRANCH_POLICY_SELECT="select";mstrmojo.TreeBrowser=mstrmojo.declare(mstrmojo.WidgetTree,null,{scriptClass:"mstrmojo.TreeBrowser",cssClass:"mstrmojo-TreeBrowser",browserNodeClass:mstrmojo.TreeBrowserNode,blockCount:30,noCheckBox:false,selectionAcrossBranch:true,branchClickPolicy:I.BRANCH_POLICY_TOGGLE,contentRetrieved:false,listSelector:mstrmojo.TreeBrowserSelector,handleNodeClicked:function(J){},getContentThroughTaskCall:function H(K,J){},isBranch:function F(J){},item2textCss:function C(J){return{"-1":"failed","-2":"loading","-3":"next","-4":"prev"}[J.st]||"";},failItemCreaterFunc:function(){return{n:"Loading Failed!",did:"-1",tp:"-1",st:"-1"};},loadingItemCreaterFunc:function(){return{n:mstrmojo.desc(5674,"Loading..."),did:"-2",tp:"-2",st:"-2"};},nextItemCreaterFunc:function(J){return{n:mstrmojo.desc(4507,"Next ##  item(s)...").replace("##",J?Math.min(J,this.blockCount):this.blockCount),did:"-3",tp:"-3",st:"-3"};},prevItemCreaterFunc:function(){return{n:mstrmojo.desc(4508,"Previous ##  item(s)...").replace("##",this.blockCount),did:"-4",tp:"-4",st:"-4"};},updateTreeContent:function(K,M){K.contentRetrieved=true;var L=M[K.itemChildrenField]||[],J=K.tree||K,O=M.bc,N=M.sz,P=M.bb;if(O!==-1){if(P+O<=N){L.push(J.nextItemCreaterFunc(N-P-O+1));}if((P-O)>-1){L.unshift(J.prevItemCreaterFunc());}}K.blockBegin=P;J.initializing=true;K.clearSelect(false);K.set("items",L);K.setSelectedItems(J.getTotalSelections(),true);J.initializing=false;if(J.onNodeExpand){J.onNodeExpand(K);}},getContent:function(K,O){var L=(K===this),J=this,P=function(Q){if(L){mstrmojo.css.removeClass(J.domNode,["loading"]);}J.updateTreeContent(K,Q);},M=function(Q){K.contentRetrieved=true;K.set("items",[J.failItemCreaterFunc()]);},N={success:P,failure:M};if(L){mstrmojo.css.addClass(J.domNode,["loading"]);}this.getContentThroughTaskCall({isRoot:L,data:K.data,blockBegin:L?0:(O||K.blockBegin),blockCount:J.blockCount},N);},postBuildRendering:function A(){this._super();if(!this.contentRetrieved){var J=this;setTimeout(function(){J.getContent(J);},0);}},itemFunction:function G(N,K,L){var J=L.tree||L,M=new J.browserNodeClass({data:N,state:0,parent:L,tree:J,multiSelect:L.multiSelect,text:N[L.itemDisplayField],textCssClass:J.item2textCss(N),items:N[L.itemChildrenField],itemIdField:L.itemIdField,itemDisplayField:L.itemDisplayField,itemIconField:L.itemIconField,itemChildrenField:L.itemChildrenField,itemFunction:L.itemFunction,listSelector:L.listSelector});return M;},clearTreeSelect:function E(){if(!this.selectionAcrossBranch){this._super();}else{var L=this._selectionParentNode,J=L&&L.length,K;for(K=0;K<J;K++){L[K].clearSelect();}this._selectionParentNode=null;this._totalSelections=null;}},onnodechange:function D(T){if(this.initializing){return ;}if(!this.selectionAcrossBranch){this._super(T);}else{this._totalSelections=this._totalSelections||[];this._selectionParentNode=this._selectionParentNode||[];var R=this._totalSelections,J=this._selectionParentNode,S=T.added,P=T.removed,Q=[],L=[],K=T.src,N,M,O,U;J.push(K);for(N=0,O=P&&P.length;N<O;N++){L.push(K.items[P[N]]);}mstrmojo.array.removeItems(R,"did",L);for(M=0,U=S&&S.length;M<U;M++){Q.push(K.items[S[M]]);}this._totalSelections=R.concat(Q);}},getTotalSelections:function B(){if(this.selectionAcrossBranch){return this._totalSelections||[];}var J=this.selectionParentNode;return J&&J.getSelectedItems();}});}());(function(){mstrmojo.requiresCls("mstrmojo.AndOrNode","mstrmojo.fe._IsRelationTreeNode","mstrmojo.expr","mstrmojo.dom","mstrmojo.array","mstrmojo.css");var L=mstrmojo.expr,N=mstrmojo.dom,C=mstrmojo.array,A=mstrmojo.css,F=mstrmojo.fe._IsRelationTreeNode.createSetHtml;var M=function(){var T="noRelationOperator",P=this[T],R=this.ctxtBuilder&&this.ctxtBuilder.itemWidgets||[],S=mstrmojo.array.filter(R,function(U){return U&&U[T]!==P&&U.data.et!==L.ET.RLS;}),O=S.length;for(var Q=0;Q<O;Q++){S[Q].set(T,P);}};mstrmojo.fe.AndOrNode=mstrmojo.declare(mstrmojo.AndOrNode,[mstrmojo.fe._IsRelationTreeNode],{scriptClass:"mstrmojo.fe.AndOrNode",markupString:'<div id="{@id}" class="mstrmojo-andor mstrmojo-AndOrNode {@cssClass}"  style="position:relative;{@cssText}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-andor-prefix" mstrAttach:click><span class="mstrmojo-textset mstrmojo-andor-prefix-text"></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">{@_prefixAndOrToolsMarkup}</span></div><div class="mstrmojo-andor-top"></div><div class="mstrmojo-andor-contentsWrapper" style="position:relative"><div class="mstrmojo-andor-contents" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue mstrmojo-AndOrNode-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner mstrmojo-AndOrNode-dropCue-inner"></div></div></div><div class="mstrmojo-andor-bottom"></div></div>',getPrefixAndOrToolsMarkup:function(){return(F+this._super());},markupSlots:mstrmojo.hash.copy({createSetNode:function(){return this.domNode.firstChild.childNodes[1].firstChild;}},mstrmojo.hash.copy(mstrmojo.AndOrNode.prototype.markupSlots)),markupMethods:mstrmojo.hash.copy({onnoRelationOperatorChange:function(){A.toggleClass(this.prefixHoverNode,["noRelation"],this.noRelationOperator);}},mstrmojo.hash.copy(mstrmojo.AndOrNode.prototype.markupMethods)),removeSet:function G(P){var O=P.childIndex(),Q=P.data,R=[Q];if(O>=0){this.remove(O,true);if(Q.nds&&Q.nds.length>0){R=Q.nds;if(Q.not){R[0].not=true;}}else{delete Q.dmy;delete Q.relation;delete Q.applySubExpr;delete Q.relation;delete Q.useSchema;delete Q.dmt;}this.add(R,O);this.consolidate(false);}},createSet:function E(Q,O){var P=this._ndsToMove(this,Q);if(!P){return ;}this.remove(P.idxs,true);var U=P.nds,T;if(U){if(U.length>1){var S={et:L.ET.ANDOR,nds:U};S.fn=this.data.fn;U=[S];T=S.nds[0].not;}else{var V=U[0];if(V&&V.not&&V.et===L.ET.ANDOR){T=V.not;delete V.not;}}}if(O&&O.rq){var R;if(O.isMetric){R=O.cq;mstrmojo.hash.copyProps(["applySubExpr","dmy","dmt","relation","useSchema"],O.rq,R);}else{R=O.rq;R.nds=U;if(T){R.not=T;}}this.add([R],P.idxs[0]);}this.consolidate(false);},preclick:function H(O){var R=null,Q=N.eventTarget(O.hWin,O.e),P=this._super(O);if(N.contains(this.createSetNode,Q,true)&&!this.noRelationOperator){R="createSetOpt";}O.part=R||O.part;return P;},preadd:function I(O){if(this._super){this._super(O);}this.updateRelationOperator();},preremove:function K(O){if(this._super){this._super(O);}this.updateRelationOperator();},consolidate:function B(){this._super();this.updateRelationOperator();},postBuildRendering:function J(){var O=this._super();this.updateRelationOperator();return O;},updateRelationOperator:function D(){var O=this.ctxtBuilder&&this.ctxtBuilder.itemWidgets||[],P=!!C.filterOne(O,function(R){return R&&(R.data.et===L.ET.RLS||(R.data.et===L.ET.ANDOR&&R.noRelationOperator));}),Q=this.parent;this.set("noRelationOperator",P);M.call(this);if(Q&&Q.hasRendered&&Q.updateRelationOperator){Q.updateRelationOperator();}},onmouseover:function(){this.toggleGroupBorder(true);},onmouseout:function(){this.toggleGroupBorder(false);}});})();(function(){mstrmojo.requiresCls("mstrmojo.WidgetTree","mstrmojo.expr","mstrmojo.mstr.EnumNodeProperties","mstrmojo.AndOrNode","mstrmojo.ConditionNode");var H=mstrmojo.expr,B=mstrmojo.mstr.EnumNodeProperties,C=H.ET;function A(I){var K=I&&I.src,L=K&&K.data,J=L&&L.et;return(J in H.ETs);}function E(I){return I&&I.et===C.ANDOR&&!(I.node&B.CONDITION);}mstrmojo.FilterExpr=mstrmojo.declare(mstrmojo.WidgetTree,null,{scriptClass:"mstrmojo.FilterExpr",allowDrop:A,renderOnScroll:false,itemIdField:null,nodeClassMap:{14:mstrmojo.AndOrNode,"*":mstrmojo.ConditionNode},onBlankClick:function(I){this.clearTreeSelect();},onnodemousedown:function(J){var K=mstrmojo.dom.eventTarget(J.hWin,J.e),L=J.src,I=L.listMapper.findIndex(L,L.itemsContainerNode,K),M=I>=0?L.ctxtBuilder.itemWidgets[I]:null;if(!M||(M.isSelectableArea&&!M.isSelectableArea(K))){this.onBlankClick(J);}},getItemIdentityProp:function(I){return I.et;},itemFunction:function(N,K,O){var J=O.tree,L=J.getItemConfig(N,K,O),M=J.nodeClassMap,I=M[J.getItemIdentityProp(N)]||M["*"];return I&&(new I(L));},getItemConfig:function(L,I,M){var J=E(L),K=M.tree||M;return{data:L,tree:K,parent:M,bindings:{prefixedAndOrEditable:"this.parent.editable"},itemFunction:(J)?M.itemFunction:null,draggable:J?K.draggable:false,dropZone:J?K.dropZone:false,allowDrop:J&&K.dropZone?K.allowDrop:null,allowCopy:J?K.allowCopy:false,editable:K.isEditable?K.isEditable(L):K.editable,makeObservable:J&&M.makeObservable,onclick:K.onnodeclick,onadd:K.onnodeadd,onremove:K.onnoderemove};},getDragData:function(I){var K=this._super(I);if(K&&!K.html){var J=K.et&&H.ET2TGT[K.et];K.html=J?K[J]&&K[J].n||"":K.n||"";}return K;},newCondition:function G(M){M=M||{et:C.AQ};var L=this.selectionParentNode,I;L=(L&&L.hasRendered)?L:this;if(L!==this){I=L.add([M]);}else{var K=this.addCondition([M],null,true);I=K.index;L=K.widget;}var J={widget:L,index:I,data:M};if(this.onNew){this.onNew(J);}return J;},addCondition:function F(K,M){var N=this.items,J=N&&N.length,P=K&&K.length;if(!P){return null;}var L,I;if(J&&E(N[0])){L=this.ctxtBuilder.itemWidgets[0];I=L.add(K,null);}else{if(!J&&(P===1)){L=this;I=0;this.add(K,0);}else{if(J){var O=N[0];this.remove(O);K.unshift(O);}this.add([{et:C.ANDOR,fn:H.FN.AND,nds:K}],0);L=this.ctxtBuilder.itemWidgets[0];I=J?1:0;}}return{widget:L,index:I};},addSingleCondition:function D(J,I){var K=this.addCondition([J],I);return K.widget.ctxtBuilder.itemWidgets[K.index];},ondrop:function(L){if(this._super){this._super(L);}var J=this.items,I=J&&J.length,K=J.concat();if(I>1){if(J.remove){J.remove(0,J.length);}else{this.set("items",null);}this.add([{et:C.ANDOR,fn:H.FN.AND,nds:K}],0);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.hash","mstrmojo.func","mstrmojo.css","mstrmojo.string","mstrmojo.HBox","mstrmojo.Box","mstrmojo.DropDownButton","mstrmojo.Popup","mstrmojo.WidgetTree","mstrmojo.ObjectBrowserDataProvider","mstrmojo.OBList","mstrmojo.FishEyeContainer","mstrmojo.SearchBox2","mstrmojo.Booklet","mstrmojo.IncFetch","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.mstr.ui.IncFetchOBList","mstrmojo.DI.DIConstants");var Q=mstrmojo.hash,Y=mstrmojo.func,A=mstrmojo.string,M=mstrmojo.meta.TP,G="5CECE58CC1D549F890EB61C4DB2156A3",V="E0CCB9CF22104A489CBE78D974AFD19E",S=mstrmojo.chart.model.enums.EnumDSSObjectType,L=mstrmojo.array,E=mstrmojo.dom,P=mstrmojo.DI.DIConstants,a=function(j,k,d){var g=j.scrollableIncFetch,f=g?"mstrmojo.mstr.ui.IncFetchOBList":"mstrmojo.OBList",h={scriptClass:f,items:k.items,multiSelect:d};if(g){h.browseConfig={blockBegin:k.bb,blockCount:k.bc,totalSize:k.sz,folderLinksContextId:j.folderLinksContextId,rootFolderID:k.did,browsableTypes:j.browsableTypes,browsableViewMedias:j.browsableViewMedias,dataProvider:j.dataProvider};h.onwaitingChange=function(){if(j.booklet){j.booklet.set("waiting",this.waiting);}};}var e=mstrmojo.insert(h);e.render();return e;},B=function(f,g,d){var e=mstrmojo.ObjectBrowser.widgetHandler||a;return e(f,g,d);},O={success:function(f){var g=this.ob,e=f.items,h=g.pageCache[g.currentPage],d=h._w;h.items=e;d.set("items",e);this.ob=null;this.item=null;window.clearTimeout(g._btm);g.booklet.set("waiting",false);if(g.scrollableIncFetch&&d.scrollNode){d.initScroll();d.updateScrollbars();}},failure:function(d){window.alert(d.getResponseHeader("X-MSTR-TaskFailureMsg"));this.ob.booklet.set("waiting",false);}},U=function(j,h,f){var g=f?-1:1,e=j.pageCache.length,k;for(k=j.currentPage+g;k<e&&k>=0;k+=g){var d=j.pageCache[k];if(d._k===h.k){return{steps:k-j.currentPage,cache:d};}}return null;},D=function(h,g,f,j){var k=h.currentPage+1,e=h.pageCache.length,d;for(d=k;d<e;d++){h.pageCache[d]._w.destroy();delete h.pageCache[d].items;}h.pageCache=h.pageCache.slice(0,k);j._w=f;j._k=g.k;h.pageCache[k]=j;h.cacheChange();},I=function(e){var d=mstrmojo.hash.walk("anc.items.0.items",e);this.set("canGoUp",!(!e.pf||!d));},J=function(h,g,j,f,e){delete h._btm;var d;if(!f){d=B(h,j,h.multiSelect);d.attachEventListener("change",h.id,"navigate");if(h.useDblSelect||h.useBothSglDblSelect){d.attachEventListener("dblclick",h.id,"dblselect");}}else{d=j._w;}h.obList=d;h.booklet.turn(d,e>0);window.setTimeout(function(){h.onBrowsing=false;},300);if(!f){D(h,g,d,j);}h.set("currentFolder",j);h.set("currentPage",h.currentPage+e);h.updateUpButton(j);if(h.scrollableIncFetch&&d.scrollNode){d.initScroll();d.updateScrollbars();}},R=function(f,e,d){var g=U(f,e,false);g=g||U(f,e,true);if(!g){window.clearTimeout(f._btm);f._btm=window.setTimeout(function(){f.booklet.set("waiting",true);},300);d.ob=f;d.item=e;f.getDataProvider().fetchFolderContents(f,e,d);}else{J(f,e,g.cache,true,g.steps);}},C=function(e,f,g,d){R(e,{fid:e.pageCache[e.currentPage].did,blockBegin:f,searchPattern:g,recursive:d},O);},K={success:function(e){var f=this.ob;if(f){window.clearTimeout(f._btm);if(!e.items){e.items=[{did:"empty",n:"("+mstrmojo.desc(2210)+")",t:"e"}];}var d=function h(j){var m=j.length,k;for(k=0;k<m;k++){var l=j[k];if(l.did===G||l.did===V){l.n=(l.did===G)?mstrmojo.desc(8112):mstrmojo.desc(9277);}if(l.items){d(l.items);}}};if(e.did===G||e.did===V){e.n=(e.did===G)?mstrmojo.desc(8112):mstrmojo.desc(9277);if(e.anc&&e.anc.items){d(e.anc.items);}}if(e&&e.items&&f.browsableViewMedias){var g={};L.forEach(f.browsableViewMedias.split(","),function(j){g[parseInt(j,10)]=true;});e.items=L.filter(e.items,function(j){return(j.t!==S.DssTypeDocumentDefinition)||g[j.dvm];});}if(e&&e.items&&mstrApp&&mstrApp.isSingleTier){e.items=L.filter(e.items,function(j){return(j.st!==772);});}if(f.isImportFromCube){e.items=L.filter(e.items,function(j){return(j.et!==P.DSSExType.DSSEXDISPARK);});}if(e.did&&this.item.k!==e.did){this.item.k=e.did;}J(f,this.item,e,false,1);this.ob=null;this.item=null;}},failure:function(d){this.ob.booklet.set("waiting",false);if(this.ob.onError){this.ob.onError(d);}else{if(d.getResponseHeader){mstrmojo.alert(d.getResponseHeader("X-MSTR-TaskFailureMsg"));}else{mstrmojo.alert(d.message);}}},complete:function(){if(this.ob){this.ob.onBrowsing=false;}}},c=function(f){var e=f.pageCache.length,d;for(d=0;d<e;d++){f.pageCache[d]._w.destroy();}f.pageCache=[];f.currentPage=-1;f.cacheChange();},N=function(g,f,h){var d=g.onBrowseFolder;if(d){d[0][d[1]](f);}if(f&&parseInt(f.acg,10)===33){return ;}var e={};if(f){e.k=f.did;e.fid=f.did;}else{if(g.rootFolderID){e.k=g.rootFolderID;e.fid=g.rootFolderID;}else{if(g.rootFolderType){e.k=g.rootFolderType;e.fty=g.rootFolderType;}else{if(g.folderLinksContextId){e.k=g.folderLinksContextId;}}}}R(g,e,Y.wrapMethods(h,Q.copy(K)));},X=function(j,d,f){if(!f){return d;}var g=j.showCompletePath,l=d[0],h,e;while(l){var k;for(k=f.length-1;k>=0;k--){if(l.did===f[k].did){f.splice(k,1);l._isSc=true;}}e=l;l._open=true;l=l.items;l=l&&l[0];if(!l){e.lastLeaf=true;}}if(!g){l=d[0];while(l){if(l._isSc){d[0]=l;break;}l=l.items;l=l&&l[0];}}return d.concat(f);},W=function(e,d,f){e._naviInfo=X(e,d,f);};mstrmojo.ObjectBrowser=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.ObjectBrowser",rootFolderType:null,rootFolderID:null,sId:null,closeOnSelect:true,browsableTypes:null,browsableViewMedias:null,includeObjectDesc:false,closeable:true,fishEyeVisible:false,searchVisible:true,upButtonVisible:false,currentFolder:null,pageCache:[],currentPage:-1,blockCount:50,canGoUp:true,folderLinksContextId:null,minSearchLength:2,showCompletePath:true,multiSelect:false,onCloseCB:null,onSelectCB:null,onBrowseFolder:null,scrollableIncFetch:false,useBothSglDblSelect:false,displaySaveLabel:false,useOldSearch:false,getDataProvider:function(){if(!this.dataProvider){this.dataProvider=mstrmojo.insert({scriptClass:"mstrmojo.ObjectBrowserDataProvider"});}return this.dataProvider;},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},children:[{scriptClass:"mstrmojo.HBox",alias:"titleBar",cssClass:"mstrmojo-OB-titleTable",children:[{alias:"saveLabel",scriptClass:"mstrmojo.Label",cssClass:"msrmojo-save-label",text:mstrmojo.desc(3178,"Save in:"),bindings:{visible:"this.parent.parent.displaySaveLabel"}},{alias:"title",scriptClass:"mstrmojo.DropDownButton",cssClass:"mstrmojo-FormatEditor-DropDownButton",cssText:"margin:0px;",popupRef:{scriptClass:"mstrmojo.Popup",alias:"popup",contentNodeCssClass:"mstrmojo-OBNavigatorPopup",cssText:"position:relative;",slot:"popupNode",locksHover:true,onOpen:function(){var d=this.opener.parent.parent,g=this.tree,f=d._naviInfo,e=this.parent.parent.parent.extraDDItems;if(g.items!==f){g._pup=this;this.ob=d;if(e){L.forEach(e,function(h){h.isExtra=true;});f=f.concat(e);}g.set("items",f);}if(d.getRecents&&!mstrApp.isSingleTier){d.getRecents(this);}},children:[{alias:"tree",scriptClass:"mstrmojo.WidgetTree",itemIdField:"did",itemFunction:function(h,d,e){var g=mstrmojo.WidgetTree.prototype.itemFunction(h,d,e);if(h.isExtra){if(h.cssClass){g.cssClass=h.cssClass;}g.onmousedown=h.onmousedown||mstrmojo.emptyFn;return g;}if(h._open){g.state=1;}g._ll=!!h.lastLeaf;g._pup=e._pup;g.onmousedown=function(j){var k=mstrmojo.dom.eventTarget(j.hWin,j.e),l=this._pup;if(k===this.domNode||k===this.textNode){if(!this._ll){N(l.ob,this.data);}l.close();}};g.markupMethods=Q.copy(g.markupMethods);g.markupMethods.onstateChange=function(){var j=this.data.items?this.state:0;this.stateNode.className="mstrmojo-TreeNode-state "+({0:"closed",1:"opened",2:"leaf"}[j]||"closed");this.itemsContainerNode.style.display=(j===1)?"block":"none";};g.useRichTooltip=true;var f=g.postBuildRendering;g.postBuildRendering=function(){if(f){f.call(g);}if(g.textNode.parentNode.clientWidth){g.textNode.style.width=(g.textNode.parentNode.clientWidth-20)+"px";}};g.premouseover=function(l){if(this.useRichTooltip){var k=this.textNode;if(k.clientWidth<k.scrollWidth){var j=E.position(k);this.richTooltip={areaId:this.id,cssClass:"vi-regular vi-tooltip-C",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_TOPLEFT,content:A.encodeHtmlString(this.data[this.itemDisplayField]),top:j.y-2,left:j.x+j.w+6};}else{this.richTooltip=null;}mstrmojo.dom.stopPropogation(l.hWin,l.e);}return true;};return g;}}]}},{alias:"upButton",scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-OBListItemIcon up",title:mstrmojo.desc(1152,"Up One Level"),onclick:function(){this.parent.parent.goUp();},bindings:{enabled:"this.parent.parent.canGoUp",visible:"this.parent.parent.upButtonVisible"}},{alias:"closebtn",scriptClass:"mstrmojo.Button",iconClass:"mstrmojo-OBCloseButton",title:mstrmojo.desc(2102,"Close"),bindings:{visible:"this.parent.parent.closeable"},onclick:function(){this.parent.parent.close();}}]},{alias:"fishEye",scriptClass:"mstrmojo.FishEyeContainer",cssText:"width:100%",bindings:{visible:"this.parent.fishEyeVisible"}},{alias:"searchUpBar",scriptClass:"mstrmojo.HBox",cssClass:"searchBox",children:[{alias:"obSearchBox",scriptClass:"mstrmojo.SearchBox2",cssClass:"mstrmojo-charcoalbox mstrmojo-dxsprite",cssText:"margin: 3px 0; ",contentWidget:mstrmojo.all.obList,taskId:"searchMetadata",searchIncFetch:true,enableMatchCase:false,forceResetCache:true,bindings:{minSearchLength:"this.parent.parent.minSearchLength",quickSearch:"this.parent.parent.quickSearch"},serverRequest:function(d,e){this.parent.parent.getDataProvider().serverRequest(d,e);},preFetch:function(){this.objectTypes=this.parent.parent.browsableTypes||this.objectTypes;this.parent.parent.booklet.set("waiting",true);},postFetch:function(){this.parent.parent.booklet.set("waiting",false);},postBuildRendering:function Z(){if(this._super){this._super();}this.inputNode.setAttribute("placeholder"," "+mstrmojo.desc(12666,"Search..."));},onUpdateSearchParams:function H(f){var e=this.parent.parent,d=e.sId;if(d){f.sessionState=d;}if(e.useOldSearch){f.quickSearch=0;f.nameWildcards=1;f.sortKey=6;}}}],bindings:{visible:"this.parent.searchVisible"}},{scriptClass:"mstrmojo.Booklet",cssClass:"mstrmojo-OB-booklet",alias:"booklet",hasAnimation:false,bindings:{scrollableIncFetch:"this.parent.scrollableIncFetch"}},{alias:"obIncFetch",scriptClass:"mstrmojo.IncFetch",height:"17px",cssText:"height:0px;overflow:hidden;",visible:false,np:0,cp:0,ds:{f:mstrmojo.desc(4046,"First"),p:mstrmojo.desc(1058,"Previous"),n:mstrmojo.desc(1059,"Next"),l:mstrmojo.desc(4049,"Last"),pgs:mstrmojo.desc(5972,"## of ### pages"),gt:mstrmojo.desc(5878,"Go to:"),v:mstrmojo.desc(6079,"This field should be # between ## and ###.")},onvisibleChange:function(e){var g=parseInt(this.height,10),d=this.np>1,f={target:this.domNode,props:{height:{start:(d?0:g),stop:(d?g:0),suffix:"px"}},onEnd:function(){if(d){this.target.style.overflow="visible";}}},j=new mstrmojo.fx.AnimateProp(f);this.domNode.style.overflow="hidden";mstrmojo.css.toggleClass(this.parent.domNode,"show-inc-fetch",this.visible);j.play();},onifsChange:function(d){var e=this.np;mstrmojo.hash.copy(d.value,this);if(this.np>1){this.children=null;this.refresh();}if((e<=1&&this.np>1)||(e>1&&this.np<=1)||(e===0&&this.np>0)){this.set("visible",this.np>1);}this.cssText="";}}],destroy:function b(){c(this);if(this._super){this._super();}},postBuildRendering:function(){if(this._super){this._super();}if(this.fishEye&&this.fishEyeVisible){this.fishEye.attachEventListener("selectedIndexChange",this.id,"onFishEyeChange");}var f=this.searchUpBar;if(f&&f.obSearchBox&&this.searchVisible){this.obSearchBox=this.searchUpBar.obSearchBox;this.obSearchBox.attachEventListener("itemsChange",this.id,"onSearchItemsChange");var d=this.obSearchBox.contentWidget||this.obSearchBox;if(!this.scrollableIncFetch){d.attachEventListener("ifsChange",this.id,function(g){if(!this.scrollableIncFetch){this.obIncFetch.set("ifs",g.value);}});}}if(!this.scrollableIncFetch&&this.obIncFetch){var e=this.obIncFetch;e.attachEventListener("fetch",this.id,function(g){e.cp=g.v;e.children=null;e.refresh();C(this,(g.v-1)*this.blockCount+1,this.searchVisible?this.obSearchBox.inputNode.value:"",1);});}mstrmojo.css.addClass(this.domNode,"mstrmojo-ObjectBrowser");},onSearchItemsChange:function(e){var f=e.value,d=this.pageCache[this.currentPage]._w;if(!f||f.length===0){f=[{did:"empty",n:"("+mstrmojo.desc(2210,"")+")",t:"e"}];}else{if(this.browsableViewMedias){var g={};L.forEach(this.browsableViewMedias.split(","),function(h){g[parseInt(h,10)]=true;});f=L.filter(f,function(h){return(h.t!==S.DssTypeDocumentDefinition)||g[h.dvm];});}}d.set("items",f);},navigate:function(l){var d=l.src,n=d.selectedItem,f=this.multiSelect,j=f&&d.getSelectedItems(),k=this,e=l.added&&l.added.length,h=l.removed&&l.removed.length,g=f?j.length===1&&(!h||e):!!n;if(g&&n.did==="empty"){return ;}if(g&&parseInt(n[M],10)===8){if(!this.onBrowsing){this.onBrowsing=true;N(this,n);}}else{if((n&&(!this.useDblSelect||this.useBothSglDblSelect))||j){this.select(f?j:n);}}},browseFolder:function(d,e){N(this,{did:d,n:e});},onFishEyeChange:function(d){this.goToPage(d.value);},goToPage:function(d){if(d<this.pageCache.length&&d!==this.currentPage){var f=d>this.currentPage,e=this.pageCache[d];this.set("currentPage",d);this.booklet.turn(e._w,f);this.set("currentFolder",e);I.call(this,e);}},oncurrentPageChange:function(d){if(this.fishEye){this.fishEye.setSelectedIndex(d.value);}var e=this.pageCache[this.currentPage];this.titleBar.title.set("text",mstrmojo.string.encodeHtmlString(e.n));if(this.searchVisible&&this.obSearchBox){this.obSearchBox.set("rootCacheItems",e.items||[]);this.obSearchBox.set("totalSize",e.sz);this.obSearchBox.set("rootID",e.did);this.obSearchBox.clearSearch();}if(!this.scrollableIncFetch&&this.obIncFetch){this.obIncFetch.set("ifs",{np:Math.floor(e.sz/e.bc)+((e.sz%e.bc>0)?1:0),cp:Math.floor(e.bb/e.bc)+((e.bb%e.bc>0)?1:0)});}},cacheChange:function(){if(this.fishEye&&this.fishEyeVisible){this.fishEye.setItems(this.pageCache);}},browse:function(e,d){Q.copy(e,this);if(this.searchVisible&&this.obSearchBox){this.obSearchBox.clear();}c(this);N(this,undefined,d);},close:function(){var e=this.ctx||this,d=e.onCloseCB;if(d){d[0][d[1]]();}e.set("visible",false);},select:function(e){var d=this.onSelectCB;if(d){d[0][d[1]](e);}if(this.closeOnSelect){this.close();}},dblselect:function T(e){var f=e&&e.src.selectedItem;if(!f||(f&&f.did==="empty")||f[M]===8){return ;}if(this.useBothSglDblSelect){var d=this.onDblSelectCB;if(d){d[0][d[1]](f);}if(this.closeOnSelect){this.close();}}else{this.select(f);}},goUp:function(){if(this.canGoUp){N(this,{did:this.currentFolder.pf});}},updateUpButton:function F(d){I.call(this,d);},oncurrentFolderChange:function(d){var e=d.value;W(this,e.anc.items,e.sc);},refreshContent:function(d){C(this,d);},onError:null,onheightChange:function(){var d=["titleBar","fishEye","searchUpBar","obIncFetch"],f=0,e;for(e in d){f+=parseInt(this[d[e]].domNode.offsetHeight,10);}this.booklet.set("height",parseInt(this.height,10)-f+"px");}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.vi.ui.HierarchyCheckList","mstrmojo.ui._IsIncFetchHierarchyList");var A=mstrmojo.css;mstrmojo.vi.ui.IncHierarchyCheckList=mstrmojo.declare(mstrmojo.vi.ui.HierarchyCheckList,[mstrmojo.ui._IsIncFetchHierarchyList],{scriptClass:"mstrmojo.vi.ui.IncHierarchyCheckList",cssClass:"elementsList"});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.HBox","mstrmojo.TextBox","mstrmojo.Button","mstrmojo.css","mstrmojo.vi.ui.ElementsBrowser","mstrmojo.vi.ui.IncHierarchyCheckList","mstrmojo.mstr.EnumDSSXMLObjectTypes");var G=mstrmojo.css,A=mstrmojo.mstr.EnumDSSXMLObjectTypes;var E="36px";mstrmojo.vi.ui.HierarchyElementsCheckListBrowser=mstrmojo.declare(mstrmojo.vi.ui.ElementsBrowser,null,{scriptClass:"mstrmojo.vi.ui.HierarchyElementsCheckListBrowser",children:[{scriptClass:"mstrmojo.HBox",slot:"searchBoxNode",alias:"util",cssClass:"elemsBrowser-utils-bar",children:[{scriptClass:"mstrmojo.Box",cssClass:"eb-box-search",alias:"box",children:[{scriptClass:"mstrmojo.TextBox",alias:"searchBox",hint:"Search",cssClass:"eb-searchBox",onEnter:function B(){var O=this.value,M=this.parent.parent.parent,N=!M.searchPattern&&!O;if(!N){M.set("searchPattern",O);}this.blur();}},{scriptClass:"mstrmojo.Button",cssClass:"eb-searchBox-clear",text:"",onclick:function(){var M=this.parent.searchBox;M.set("value","");M.cleanUp();M.focus();M.onEnter();},bindings:{visible:"(this.parent.searchBox.value || '').length > 0"}},{scriptClass:"mstrmojo.Button",cssClass:"eb-searchBox-search",text:"",onclick:function(){var M=this.parent.searchBox;M.focus();M.onEnter();}}]}]},{scriptClass:"mstrmojo.HBox",slot:"buttonPanelNode",alias:"buttonPanel",cssClass:"elemsBrowser-button-panel"},{scriptClass:"mstrmojo.vi.ui.IncHierarchyCheckList",alias:"elementList",slot:"elementListNode",allowUnlistedValues:false,bindings:{disableLevel:"this.parent.disableLevel"},getDataHelper:function(){return this.parent.ifDataHelper;},getAttribute:function(){return this.parent.attribute;},isHiearachyDisplay:function F(){var M=this.parent;return !M.searchPattern||M.searchPattern==="";},setSelectedItems:function J(M){if(typeof M==="object"){this.setSelectionByExprJSON(M);}},postSelectionChange:function I(){var M=this.getAttribute();if(M){this.parent.onItemsSelectionChange(this.buildSelectionExprJSON(M));}}}],init:function L(M){this._super(M);G.addWidgetCssClass(this,"hierarchy");if(this.disableLevel){G.addWidgetCssClass(this,"disable-level");}},postCreateChildren:function D(){var M=this.elementList;this.util.addChildren(M.getLevelPopupConfig());this.buttonPanel.addChildren([M.getAllButtonConfig(true),M.getAllButtonConfig(false)]);},onattributeChange:function H(M){var N=this.elementList;N.clearItems();this._super(M);},onsearchPatternChange:function C(){var N=this.elementList,M=N.isHiearachyDisplay();this._super();this.buttonPanel.set("visible",M);this.layoutConfig.h.buttonPanelNode=M?E:"0px";this.doLayout();},isObjSearchable:function K(M){return true;},onElementsListchange:mstrmojo.emptyFn,updateClearAllBtnState:mstrmojo.emptyFn,_set_selectedItems:null});}());(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.HTMLButton","mstrmojo.Label","mstrmojo.TextBox","mstrmojo.TextArea","mstrmojo.Table","mstrmojo.HBox","mstrmojo.Editor","mstrmojo.ObjectBrowser","mstrmojo.NewFolderEditor","mstrmojo.DI.DIHelpers");var C=mstrmojo.func,F=mstrmojo.DI.DIHelpers,E=mstrmojo.array;function B(){var H={alias:"newFolder",scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-createfolder",text:mstrmojo.desc(3245,"Create New Folder"),onclick:function(){var J=this.parent.parent,I={zIndex:J.zIndex+10,navigateAfter:false,fId:J.ob.currentFolder.did,okFn:function(K,L){J.ob.refreshContent();if(L){J.ob.browseFolder(K.fid,J.newFolder);}}};if(J.ob.dataProvider){I.dp=J.ob.dataProvider;}J.openPopup("newFolder",I);},postCreate:function(){this.set("visible",false);}},G=mstrmojo.hash.clone(mstrmojo.ObjectBrowser.prototype.children);G.push(H);return G;}mstrmojo.SaveAsObjectBrowser=mstrmojo.declare(mstrmojo.ObjectBrowser,null,{scriptClass:"mstrmojo.SaveAsObjectBrowser",cssClass:"mstrmojo-SaveAs-OB",children:B(),getRecents:function(G){var H=this;G.onClose=function(){if(H.recentFolders){this.removeChildren(this.recentLable);this.removeChildren(this.recentList);delete H.recentFolders;}};this.getDataProvider().loadRecentSaveAsFolders({success:function(I){if(H.recentFolders){G.removeChildren(G.recentLable);G.removeChildren(G.recentList);delete H.recentFolders;}if(I&&I!==""){H.recentFolders=H.getList(I.objects,G);G.addChildren(H.recentFolders);}},failure:function(I){mstrmojo.alert(I.message||I.getResponseHeader("X-MSTR-TaskFailureMsg"));},});},getList:function(H,G){var I=this;return[{scriptClass:"mstrmojo.Label",alias:"recentLable",cssClass:"recentLabel",text:mstrmojo.desc(14354,"Recents")},{scriptClass:"mstrmojo.ui.List",alias:"recentList",items:H,cssClass:"recentList",onclick:function(J){var K=this.getItemFromTarget(J.getTarget());I.browseFolder(K.did,"");G.close();}}];}});var A={success:function(G){var H=this.parent;if(H.onObjectSaved){H.onObjectSaved({name:H.name,did:G.did,desc:H.desc});}mstrmojo.alert(mstrmojo.desc(7987,"The ## '###' has been saved successfully.").replace("##",H.typeDesc||"Object").replace("###",H.name),null,mstrmojo.desc(7984,"Object Saved"));H.ob.refreshContent();H.close();},failure:function(H){var G=parseInt(H.getResponseHeader("X-MSTR-TaskErrorCode"),10)+4294967296,I=this.parent;if(G===2147749923){mstrmojo.confirm(mstrmojo.desc(7986,"The ## '###' already exists. Do you want to replace the existing one?").replace("##",I&&I.typeDesc||"Object").replace("'###'",I&&I.name?'"'+I.name+'"':""),{confirmBtn:{fn:function(){I.saveAs(true);}}},{title:mstrmojo.desc(3179),zIndex:I&&I.zIndex+10});}else{mstrmojo.alert(mstrmojo.desc(7985,"Error while saving: ")+H.getResponseHeader("X-MSTR-TaskFailureMsg"));}}};mstrmojo.SaveAsEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.SaveAsEditor",cssClass:"mstrmojo-SaveAsEditor",title:mstrmojo.desc(3167,"Save As"),sId:null,rootFolderID:null,rootFolderType:null,folderLinksContextId:null,browsableTypes:null,showCompletePath:true,desc:"",name:"",displaySaveLabel:true,searchVisible:true,upButtonVisible:true,children:[{scriptClass:"mstrmojo.SaveAsObjectBrowser",alias:"ob",closeable:false,closeOnSelect:false,fishEyeVisible:false,bindings:{showCompletePath:"this.parent.showCompletePath",rootFolderID:"this.parent.rootFolderID",rootFolderType:"this.parent.rootFolderType",folderLinksContextId:"this.parent.folderLinksContextId",browsableTypes:"this.parent.browsableTypes",displaySaveLabel:"this.parent.displaySaveLabel",searchVisible:"this.parent.searchVisible",upButtonVisible:"this.parent.upButtonVisible",sId:"this.parent.sId"},postCreate:function(){this.onSelectCB=[this.parent,"onOBSelect"];this.onBrowseFolder=[this.parent,"onOBBrowseFolder"];}},{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-Input-Panel",rows:2,cols:2,alias:"contPanel",children:[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-Name-Label",slot:"0,0",text:mstrmojo.desc(2211,"Name:")},{scriptClass:"mstrmojo.TextBox",slot:"0,1",value:mstrmojo.desc(8116,"New Folder"),alias:"name",cssClass:"mstrmojo-SaveAsEditor-nameInput",bindings:{value:"this.parent.parent.name"}},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-Desc-Label",slot:"1,0",text:mstrmojo.desc(1154,"Description:")},{scriptClass:"mstrmojo.TextArea",cssClass:"mstrmojo-SaveAsEditor-descInput",slot:"1,1",alias:"desc",bindings:{value:"this.parent.parent.desc"},rows:5}]},{scriptClass:"mstrmojo.HBox",alias:"buttonBox",slot:"buttonNode",cssClass:"mstrmojo-Editor-buttonBar",children:[{alias:"newFolder",scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton mstrmojo-createfolder",text:mstrmojo.desc(3245,"Create New Folder"),onclick:function(){var H=this.parent.parent,G={zIndex:H.zIndex+10,navigateAfter:false,fId:H.ob.currentFolder.did,okFn:function(I,J){H.ob.refreshContent();if(J){H.ob.browseFolder(I.fid,H.newFolder);}},cssClass:F.getEnvObj().isAppSchema()?"workstation":undefined};if(H.ob.dataProvider){G.dp=H.ob.dataProvider;}H.openPopup("newFolder",G);},postCreate:function(){this.set("visible",mstrmojo.resolveFeature("create-folder")||F.getEnvObj().isAppSchema());}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton hot okButton",alias:"ok",text:mstrmojo.desc(2400,"Save"),onclick:function(){this.parent.parent.saveAs();}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton",alias:"cancel",text:mstrmojo.desc(221,"Cancel"),onclick:function(){this.parent.parent.close();}}]}],newFolder:{scriptClass:"mstrmojo.NewFolderEditor"},onOpen:function(){this.ob.browse();},onOBBrowseFolder:mstrmojo.emptyFn,onOBSelect:function(G){this.set("name",G.n);},saveAsCallback:function D(){return A;},saveAs:function(J){var H=this.contPanel;this.name=H.name.value;this.desc=H.desc.value;if(!this.name){mstrmojo.alert(mstrmojo.desc(3380,"Please enter valid name"));return ;}var L=this.saveParams||{};L.folderID=this.ob.currentFolder.did;L.description=this.desc||"";L.name=this.name||"";L.saveAsOverwrite=!!J;var G=this.saveAsCallback(),K=this,I={success:function(){K.saveRecentFolders(K.ob.currentFolder.did);},failure:function(M){mstrmojo.alert(M.message||M.getResponseHeader("X-MSTR-TaskFailureMsg"));}};G.parent=this;if(!mstrApp.isSingleTier){G=C.wrapMethods(G,I);}mstrmojo.xhr.request("POST",mstrConfig.taskURL,G,L);},saveRecentFolders:function(K){var I,G,H,J=this;J.ob.getDataProvider().loadRecentSaveAsFolders({success:function(L){G=[];E.forEach(L.objects,function(O){G.push(O.did);});H=mstrmojo.array.indexOf(G,K);if(H!==-1){G.splice(H,1);}G.unshift(K);I=G.slice(0,3).join(",")+",";var M={taskId:"setPreference",prefs:"recentFolders\u001E"+I};var N={success:function(){mstrConfig.recentFolders=I;},failure:function(O){mstrmojo.alert(O.message||O.getResponseHeader("X-MSTR-TaskFailureMsg"));}};J.ob.getDataProvider().serverRequest(M,N);},failure:function(L){mstrmojo.alert(L.message||L.getResponseHeader("X-MSTR-TaskFailureMsg"));}});}});mstrmojo.SaveAsEditor.SAVEAS_CALLBACK=A;})();(function(){mstrmojo.requiresCls("mstrmojo.ObjectBrowser","mstrmojo.HBox","mstrmojo.Button");mstrmojo.requiresDescs(14566);mstrmojo.home.ui.FolderPicker=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.home.ui.FolderPicker",title:mstrmojo.desc(14566,"Select Folder"),rootFolderID:null,rootFolderType:7,folderLinksContextId:21,onOK:mstrmojo.emptyFn,children:[{scriptClass:"mstrmojo.ObjectBrowser",alias:"ob",cssText:"border-width:1px; border-color:#ddd;",closeable:false,browsableTypes:"8",closeOnSelect:false,showCompletePath:false,searchVisible:true,upButtonVisible:true,bindings:{rootFolderID:"this.parent.rootFolderID",rootFolderType:"this.parent.rootFolderType",folderLinksContextId:"this.parent.folderLinksContextId"}},{scriptClass:"mstrmojo.HBox",alias:"btnHBox",slot:"buttonNode",cssClass:"mstrmojo-Editor-buttonBar",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Editor-button mstrmojo-WebButton",text:mstrmojo.desc(221,"Cancel"),onclick:function(){this.parent.parent.close();}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Editor-button mstrmojo-WebButton hot",text:mstrmojo.desc(1442,"OK"),onclick:function(){var B=this.parent.parent;B.close();B.onOK(B.ob.currentFolder);}}]}],init:function A(B){this._super(B);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-FolderPicker");},postBuildRendering:function(){if(this._super){this._super();}this.ob.browse();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.ObjectBrowser");var H=mstrmojo.array;var E=[257,1024,3072,12032];mstrmojo.vi.ui.editors.ObjectPicker=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.vi.ui.editors.ObjectPicker",cssClass:"mstrmojo-vi-ObjectPicker",zIndex:9,title:mstrmojo.desc(11496,"Select Object"),help:null,rootFolderID:null,rootFolderType:null,folderLinksContextId:4,supportedTypes:H.hash(E),item:null,OKFn:null,children:[{scriptClass:"mstrmojo.ObjectBrowser",alias:"ob",closeable:false,browsableTypes:"8,"+E.join(","),closeOnSelect:false,showCompletePath:false,searchVisible:false,scrollableIncFetch:true,bindings:{rootFolderID:"this.parent.rootFolderID",rootFolderType:"this.parent.rootFolderType",folderLinksContextId:"this.parent.folderLinksContextId",isImportFromCube:"this.parent.isImportFromCube",}},{scriptClass:"mstrmojo.HBox",slot:"buttonNode",alias:"btnHBox",cssClass:"mstrmojo-Editor-buttonBar",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton hot",text:mstrmojo.desc(1442,"OK"),onclick:function C(){var J=this.parent.parent;this.parent.parent.close({item:J.item});var I=J.OKFn;if(I){I(J.item);}J.set("item",null);},bindings:{enabled:function B(){return !!this.parent.parent.item;}}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton",text:mstrmojo.desc(2399,"Cancle"),onclick:function C(){var I=this.parent.parent;this.parent.parent.close();I.set("item",null);}}]}],preBuildRendering:function A(){if(this._super){this._super();}this.ob.onSelectCB=[this,"onOBSelect"];},postBuildRendering:function D(){if(this._super){this._super();}this.browse();},onOBSelect:function F(I){this.set("item",((this.supportedTypes[I.t]||this.supportedTypes[I.st])?I:null));},browse:function G(){this.ob.browse();}});}());(function(){mstrmojo.requiresCls("mstrmojo.VBox","mstrmojo.ObjectBrowser","mstrmojo.HTMLButton");mstrmojo.requiresDescs(1059,1441,3413,3414,4996,7972,9893);var A={768:true,769:true,774:true,776:true,779:true};mstrmojo.IVEDatasetPicker=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.IVEDatasetPicker",cssClass:"mstrmojo-vi-dataset-picker",title:mstrmojo.desc(11940,"Select Existing Dataset"),help:"add_existing_datasets.htm",startingFolder:null,item:null,multiSelect:false,selectedItems:null,children:[{alias:"newLabel",scriptClass:"mstrmojo.FieldSet",legend:mstrmojo.desc(4996,"New"),cssClass:"mstrmojo-ive-fs"},{alias:"btnImport",scriptClass:"mstrmojo.Button",text:mstrmojo.desc(13550,"Access External Data"),cssClass:"mstrmojo-ive-import",onclick:function(){this.parent.close({action:"import"});}},{alias:"useExistingLabel",scriptClass:"mstrmojo.FieldSet",legend:mstrmojo.desc(9893,"Use Existing"),cssClass:"mstrmojo-ive-fs"},{scriptClass:"mstrmojo.ObjectBrowser",alias:"ob",cssText:"border-width:1px;border-color:#DDDDDD;",closeable:false,browsableTypes:"8,768,769,774,776,779",closeOnSelect:false,showCompletePath:false,searchVisible:true,upButtonVisible:true,folderLinksContextId:1,bindings:{rootFolderID:function(){return this.parent.startingFolder;},multiSelect:"this.parent.multiSelect"}},{scriptClass:"mstrmojo.HBox",alias:"btnHBox",slot:"buttonNode",cssClass:"mstrmojo-Editor-buttonBar",children:[{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(1059,"Next"),onclick:function(){this.parent.parent.close({item:this.parent.parent.item});},bindings:{enabled:function(){return !!(this.parent.parent.multiSelect?this.parent.parent.selectedItem.length:this.parent.parent.item);}}}]}],preBuildRendering:function(){if(this._super){this._super();}this.ob.onSelectCB=[this,"onOBSelect"];this.ob.onBrowseFolder=[this,"onOBBrowseFolder"];this.ob.booklet.set("animates",false);this.ob.rootFolderID=this.startingFolder;},postBuildRendering:function(){if(this._super){this._super();}this.ob.browse();},onOBSelect:function(B){if(this.multiSelect){this.set("selectedItems",mstrmojo.array.filter(B,function(C){return A[C.st];}));}else{this.set("item",(A[B.st]?B:null));}},onOBBrowseFolder:function(B){if(this.multiSelect){this.set("selectedItems",null);}else{this.set("item",null);}},onstartingFolderChange:function(){this.ob.rootFolderID=this.startingFolder;this.ob.browse();}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.expr","mstrmojo.hash","mstrmojo.Box","mstrmojo.Button","mstrmojo.Editor","mstrmojo.FilterExpr","mstrmojo.Label","mstrmojo.Obj","mstrmojo.ui.Checkbox","mstrmojo.ui.CheckList","mstrmojo.warehouse.EnumObjectTypes");var H=mstrmojo.expr,I=H.ET,C=mstrmojo.array,F=mstrmojo.string,E=mstrmojo.warehouse.EnumObjectTypes,G=mstrmojo.mstr.EnumNodeDimty,D=mstrmojo.hash;mstrmojo.fe.CreateSetEditor=mstrmojo.declare(mstrmojo.Editor,null,{onOpen:function(){var Q=this.model,W=this.condition.data,R=!W.m,N=this.attrsBox.attrsList,J=this.relBox.relPd,S=C.filter(Q.metrics,function(Z){return !Z.um;}),X=[{n:mstrmojo.desc(12037,"System Default"),t:-1,did:"default"}].concat(S),L=this.appQualBox.appQual,Y=D.clone(Q.attrs);C.forEach(Y,function(a){var Z=false;if(a.t===E.ATTRIBUTE){C.forEach(a.fs,function(b){if(b.fgr>0){Z=true;return false;}});}a.css=(a.css||"")+" "+(a.t?("t"+a.t+((a.da||a.um)?"d":"")+(Z?"g":"")+(a.st?(" st"+a.st):"")):"");});N.set("items",Y);mstrmojo.array.forEach(["relBox","appQualBox"],function(Z){this[Z].set("visible",R);},this);if(W.dmt===4&&W.dmy.uts){var M={};C.forEach(W.dmy.uts,function(a){var Z=C.find(Q.attrs,"did",a.utgt.did);if(Z>=0){M[Z]=true;}});N.set("selectedIndices",M);}if(R){J.set("items",X);if(W.relation&&W.relation.guide){var O=W.relation.guide,V=C.find(X,"did",O.did);J.set("selectedIndex",V>=0?V:0);}else{J.set("selectedIndex",0);}L.set("checked",!!W.applySubExpr);}if(mstrApp.isWSStyling){var U={left:parseInt(this.left,10),top:parseInt(this.top,10)},K=this.editorNode.getBoundingClientRect(),T={width:window.innerWidth,height:window.innerHeight},P={width:K.right-K.left,height:K.bottom-K.top};if(K.right>T.width){this.set("left",(U.left-P.width)+"px");}if(K.bottom>T.height){this.set("top",(U.top-P.height)+"px");}}},onOK:function(){var Q=this.model,T=this.condition,V=this.condition.data,N=this.attrsBox.attrsList,J=this.relBox.relPd,L=this.appQualBox.appQual;var X=N.getSelectedItems(),K=[];C.forEach(X,function(Z){K.push({utgt:{n:Z.n,did:Z.did},utp:H.DMY_TP.ATTR,agg:1,flt:2,gb:true,rps:0,n:Z.n});});var W;if(J.selectedIndex>0){var O=J.items[J.selectedIndex];W={n:O.n,did:O.did,t:E.METRIC,st:1024};}var M;if(V.et===15){V.dmt=G.NodeDimtyOutputLevel;V.dmy=V.dmy||{};V.dmy.uts=K;M=V.relation=V.relation||{};if(W){M.guide=W;V.useSchema=false;}else{delete M.guide;delete M.rsTp;delete M.joTp;delete M.paTp;delete M.erTp;V.useSchema=true;}V.applySubExpr=L.checked;T.set("data",V);}else{var U={et:15};U.dmt=G.NodeDimtyOutputLevel;U.dmy={};U.dmy.uts=K;M=U.relation={};if(W){M.guide=W;}else{U.useSchema=true;}U.applySubExpr=L.checked;var P=T,R={rq:U,cq:V},S=[T.childIndex()];if(V.et===I.ANDOR){if(V.nds&&V.nds.length>2){var Y=Q.childIdx;S=[Y,Y-1];}else{P=T.parent;}}else{P=T.parent;R.isMetric=!!V.m;}P.createSet(S,R);}},children:[{scriptClass:"mstrmojo.Box",alias:"attrsBox",cssClass:"Attributes-Box",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(14613,"Select attributes to create the set"),cssClass:"Label",alias:"attrsBoxLabel"},{scriptClass:"mstrmojo.ui.CheckList",alias:"attrsList",cssClass:"CheckList"}]},{scriptClass:"mstrmojo.Box",alias:"relBox",cssClass:"RelatedBy-Box",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(12036,"Related by"),cssClass:"Label",cssDisplay:"inline-block"},{scriptClass:"mstrmojo.ui.Pulldown",alias:"relPd",cssClass:"Pulldown",cssDisplay:"inline-block",allowHTML:false,onitemSelected:function B(J){}}]},{scriptClass:"mstrmojo.Box",alias:"appQualBox",cssClass:"AppQual-Box",children:[{scriptClass:"mstrmojo.ui.Checkbox",alias:"appQual",cssClass:"AppQual-CheckBox"},{scriptClass:"mstrmojo.Label",cssClass:"AppQual-Label",text:mstrmojo.desc(12038,"Apply this qualification independently of the relationship filter"),postBuildRendering:function(){if(this._super){this._super();}if(mstrApp.isWSStyling){this.set("text",mstrmojo.desc(15015,"Apply this qualification to define the set, and also to the results of the visualization."));}}}]},{scriptClass:"mstrmojo.HBox",slot:"buttonNode",cssText:"float: right; border-collapse: separate; display: table;",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton hot",text:mstrmojo.desc(2397,"OK"),onclick:function(){var J=this.editor;J.onOK();J.close();},bindings:{enabled:function(){var K=this.parent.parent.attrsBox.attrsList,J=this.parent.parent.attrsBox.attrsList.selectedIndices;return K.getSelectedItems().length>0;},editor:"this.parent.parent"}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton",text:mstrmojo.desc(221,"Cancel"),onclick:function(){this.editor.close();},bindings:{editor:"this.parent.parent"}}]}],postBuildRendering:function A(){this._super();if(mstrApp&&mstrApp.isWSStyling){this.attrsBox.attrsBoxLabel.set("text",mstrmojo.desc(15013,"Select the attributes that you look for."));}}});})();(function(){mstrmojo.requiresCls("mstrmojo.expr","mstrmojo.hash","mstrmojo.FilterExpr");var D=mstrmojo.hash,B=mstrmojo.expr.ET;mstrmojo.fe.FilterExprTree=mstrmojo.declare(mstrmojo.FilterExpr,null,{scriptClass:"mstrmojo.fe.FilterExprTree",allowCopy:false,containerResizable:false,draggable:true,dropZone:true,editable:true,makeObservable:true,onConditionEdit:mstrmojo.emptyFn,modifyConditionNode:function(G,F){var H=G.data,E=H.isNew;D.copy(D.clone(F),D.clear(H));delete H.isNew;G.paint();if(H.et===B.MQ||H.et===B.MC){G.set("noCreateSet",!mstrApp.supportAdvFilter);}if(G.tree.onConditionEdit){G.tree.onConditionEdit(G,E);}},getItemConfig:function(H,E,I){var F=this._super(H,E,I),G=I.tree;return D.copy({onclick:G.prenodeclick,containerResizable:G.containerResizable,ondragend:G.ondragend,ondrop:G.ondrop},F);},ondragenter:function A(E){this.dropCuePos={left:0,top:0,idx:0,idxActual:0};this._super(E);},ondragend:function(E){if(this===this.tree){return this._super(E);}else{return this.constructor.prototype.ondragend.call(this,E);}},ondrop:function(E){if(this===this.tree){return this._super(E);}else{return this.constructor.prototype.ondrop.call(this,E);}},isEditable:function C(F){if(!this.editable){return false;}var E=false;switch(F&&F.et){case B.R:case B.F:E=false;break;case B.ANDOR:case B.MQ:case B.AQ:case B.AL:case B.AC:case B.MC:case B.AE:E=true;break;case B.XML:E=!F.xml||!!F.ph;}return E;},prenodeclick:function(E){if(!E||!E.part){return ;}if(E.part!=="createSet"&&E.part!=="createSetOpt"&&!(E.part==="andor"?this.prefixedAndOrEditable:this.editable)){return ;}var F=this.tree;if(F.onnodeclick){F.onnodeclick.call(this,E);}},getSelectedItemWidget:function(){var E=function(K){var I=K&&K.ctxtBuilder&&K.ctxtBuilder.itemWidgets,G=K.selectedIndex,F=I&&I.length||0;if(!I){return ;}if(G===-1){for(var H=0;H<F;H++){var J=E(I[H]);if(J){return J;}}}else{return I[G];}};return E(this);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._IsExprNode","mstrmojo.fe._IsRelationTreeNode","mstrmojo._HasPopup","mstrmojo.fe.AndOrNode","mstrmojo.fe.DynamicNode","mstrmojo.ConditionNode","mstrmojo.css","mstrmojo.string","mstrmojo.dom","mstrmojo.hash","mstrmojo.expr");var E=mstrmojo,A=E.css,I=E.dom,F=E.hash,G=E.string,C=function(N){var O=N.data,M=O.dmy&&O.dmy.uts||[],K=M.length,J=[],L;for(L=0;L<K;L++){J.push(G.encodeHtmlString(M[L].n));}return'<span class="mstrmojo-text">'+J.join(", ")+"</span>";};mstrmojo.fe.RelationNode=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsExprNode,mstrmojo.fe._IsRelationTreeNode,mstrmojo._HasPopup],{scriptClass:"mstrmojo.fe.RelationNode",markupString:'<div id="{@id}" class="mstrmojo-relation {@cssClass}"  style="position:relative;{@cssText}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-relation-prefix {@cssClass}"><span class="mstrmojo-textset mstrmojo-relation-prefix-text" mstrAttach:click></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}"><span class="mstrmojo-indent" onclick="mstrmojo.all[\'{@id}\'].ind()">'+mstrmojo.desc(5895,"Group conditions")+'</span><span class="mstrmojo-outdent" onclick="mstrmojo.all[\'{@id}\'].out()">'+mstrmojo.desc(5896,"Ungroup Conditions")+'</span></span></div><div class="mstrmojo-relationNode"><span class="mstrmojo-relationNode-inf"><span class="mstrmojo-relation-prefix-text">'+mstrmojo.desc(2790,"Set of").replace(/##/g,"")+'</span><span class="mstrmojo-textset"  mstrAttach:click></span><span class="mstrmojo-relation-postfix-text">'+mstrmojo.desc(2793,"Where").replace(/##/g,"")+'</span><span class="mstrmojo-relation-convert-text"  mstrAttach:click >'+mstrmojo.desc(15412,"Convert to Condition")+'</span><img class="mstrmojo-del" src="../images/1ptrans.gif" title="'+mstrmojo.desc(7931,"Delete condition")+'"onclick="mstrmojo.all[\'{@id}\'].del()" /></span><div class="mstrmojo-relation-childTreeNode" style="position:relative;"></div></div></div>',markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},relationNode:function(){return this.domNode.lastChild;},textNode:function(){return this.domNode.childNodes[1].firstChild.childNodes[1];},convertNode:function(){return this.domNode.childNodes[1].firstChild.childNodes[3];},containerNode:function(){return this.domNode.childNodes[1].childNodes[1];}},markupMethods:{onprefixedAndOrEditableChange:function(){A.toggleClass(this.prefixNode,["editable"],this.prefixedAndOrEditable);},onselectedChange:function(){A.toggleClass(this.relationNode,["selected"],this.selected);},ondataChange:function(){this.prefixNode.innerHTML=this.andOrTxt();this.textNode.innerHTML=C(this);}},noRelationOperator:true,children:[{scriptClass:"mstrmojo.fe.RelationFilterExprTree",alias:"childTree",ignoreLayout:true,dropZone:false,draggable:false,nodeClassMap:{14:mstrmojo.fe.AndOrNode,ph:mstrmojo.fe.DynamicNode,"*":mstrmojo.fe.ConditionNode},onNew:function(J){this.parent.tree.onNew(J);},getItemConfig:function(M,J,N){var K=mstrmojo.fe.RelationFilterExprTree.prototype.getItemConfig.call(this,M,J,N),L=N.tree||N;return F.copy({tree:L,rootTree:this.parent.tree,noRelation:true,inRelation:true},K);},prenodeclick:function(J){if(!J||!J.part){return ;}var K=this.rootTree;if(K&&K.onnodeclick&&this.editable){J.editor=K.editor;K.onnodeclick.call(this,J);}}}],premousedown:function(J){if(this._super){this._super(J);}var K=I.eventTarget(J.hWin,J.e);if(!I.contains(this.childTree.domNode,K,true)){this.childTree.clearTreeSelect();}},preselectedChange:function(J){if(!J.value){this.childTree.clearTreeSelect();}},init:function(J){this._super(J);var K=this.data;if(K){delete this.data;this._set_data(null,K);}},_set_data:function(M,J){var K=this.data;if(J&&(!J.relation)){J.relation={};}var L=(K!==J);if(L){this.data=J;if(J){this.childTree.set("items",J.nds||[J]);}}return L;},isSelectableArea:function(J){return mstrmojo.dom.contains(this.relationNode,J,true);},preclick:function D(J){var L=null,K=I.eventTarget(J.hWin,J.e);if(I.contains(this.prefixNode,K,true)){L="andor";}else{if(I.contains(this.textNode,K,true)){L="createSet";}else{if(I.contains(this.convertNode,K,true)){this.parent.removeSet(this);return false;}}}J.part=L;},del:function H(){var J=this.parent;if(J&&J.remove&&this.data){J.remove(this.data);}},newCondition:function B(J){this.childTree.newCondition(J);},avatarCssCls:"mstrmojo-FE mstrmojo-relationNode",getAvatarNode:function(){return this.relationNode.cloneNode(true);}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash","mstrmojo._ValidateSuggestions","mstrmojo.WidgetList","mstrmojo.Editor","mstrmojo.LegacySuggestionList");mstrmojo.Enum_OIB_States=mstrmojo.hash.copy(mstrmojo._ValidateSuggestions.ENUM_STATES,{EDITING:2,ADDING:3,EMPTY:4});mstrmojo.Enum_OIB_States_CSS=(function(){var AE=mstrmojo.Enum_OIB_States,AD={},AF;for(AF in AE){if(AE.hasOwnProperty(AF)){AD[String(AE[AF])]=AF;}}return AD;}());var Q=mstrmojo.dom,S=mstrmojo.hash,a=mstrmojo.Enum_OIB_States,I=0,c="_did_",z=mstrmojo.Enum_Keys,AB=80,U=200;function X(){return(mstrApp&&mstrApp.searchAutoCompleteDelay&&mstrApp.searchAutoCompleteDelay())?mstrApp.searchAutoCompleteDelay():U;}function P(){return I++;}function h(AD){return(AD&&AD.state===a.ADDING);}function q(AD){var AE={n:AD||"",state:a.EMPTY};AE[c]=-2;return AE;}function O(AD){return(AD&&AD.state===a.EMPTY);}function v(AE){var AF=AE.items,AD=AF&&AF.length;if(!AD){return true;}return(AD===1&&h(AF[0]))||(AD===2&&O(AF[0])&&h(AF[1]));}function m(){var AE=this.ctxtBuilder.itemWidgets,AD=AE[AE.length-1];if(AD&&AD.isAdding){var AF=this;Q.attachEvent(AD.domNode,"click",function(){AF.editingIdx=null;});return AD;}return null;}function L(){var AD=this.editingIdx;if(AD!==null){return this.ctxtBuilder.itemWidgets[AD];}return m.call(this);}function D(){this.isActive=false;var AE=this.emptyText||"",AF=this.items;if(v(this)&&!O(AF[0])&&(AE.length>0)){this.add([q(AE)],0);var AG=this.ctxtBuilder.itemWidgets[0];AG.set("shouldEllipsize",true);AG.doEllipsize();}var AD=L.call(this);if(AD){if(h(AD)&&this.showEmptyItem){AD.domNode.style.visibility="hidden";}AD.blur();}Q.detachEvent(document.body,"mousedown",this._mousedownHandler);if(this.tabNavigable){Q.detachEvent(AD.inputNode,"keydown",this._tabKeyHander);}}function N(){if(!this.enabled){return ;}this.isActive=true;if(O(this.items[0])){this.remove(0);}var AD=L.call(this);if(AD){if(h(AD)&&!this.isFull){AD.domNode.style.display="block";AD.domNode.style.visibility="visible";}this.scrollTo(AD.data);AD.focus();}Q.attachEvent(document.body,"mousedown",this._mousedownHandler);if(this.tabNavigable){Q.attachEvent(AD.inputNode,"keydown",this._tabKeyHander);}}mstrmojo.ObjectInputBox=mstrmojo.declare(mstrmojo.WidgetList,[mstrmojo._ValidateSuggestions],{scriptClass:"mstrmojo.ObjectInputBox",cssClass:"mstrmojo-ObjectInputBox",emptyText:"",showEmptyItem:true,items:null,itemField:"n",dynamicVerify:true,suggestCount:10,candidates:null,makeObservable:true,renderOnScroll:false,editingIdx:null,isActive:false,maxObjectCount:null,isFull:false,suggestionListClass:"mstrmojo.LegacySuggestionList",acptSugItemOnly:false,useKeyDelay:false,showSuggestionOnEdit:true,tabNavigable:false,getSearchPattern:function(){var AD=L.call(this);if(AD){return AD.getSearchPattern();}return"";},getSuggestionTarget:function n(){return this.suggestTarget;},onsuggestTargetChanged:function p(AD){this._request_pattern=null;},getSuggestionPos:function d(){return this._pop_cfg;},onSuggestionItemSelect:function w(AD){if(this.suggestTarget){this.suggestTarget.setItem(AD[this.itemField],AD,false);}this.hideSuggestion();this.closePopup();},hideEditButton:function(AD){return !!this.noEditButton;},_set_items:function l(AI,AF){AF=mstrmojo.hash.clone(AF)||[];var AH=this.maxObjectCount;this.set("isFull",(AH&&AF.length>=AH));if(AF.length===0){var AE=this.emptyText||"";if(AE.length>0){AF.push(q(AE));}}var AG={n:"",state:a.ADDING};AG[c]=-1;AF.push(AG);var AD=AF[AF.length-1];if(AD&&h(AD)&&this.maxObjectCount&&(this.getSelectedObjects().length>=this.maxObjectCount)){this.set("isFull",true);}this.itemIdField=c;return this._super(AI,AF);},add:function E(AE,AD){var AF=m.call(this);if(!this.maxObjectCount||this.getSelectedObjects().length<this.maxObjectCount){this._super(AE,AD);}if(!v(this)&&O(this.items[0])){this.remove(0);}if(AF){AF.adjustInputWidth();if(this.maxObjectCount&&(this.getSelectedObjects().length===this.maxObjectCount)){this.set("isFull",true);AF.domNode.style.display="none";}else{AF.domNode.style.display=this.showEmptyItem?"none":"";}}},remove:function b(AD){this._super(AD);var AE=m.call(this);if(AE){if(this.maxObjectCount&&(this.getSelectedObjects().length<this.maxObjectCount)){this.set("isFull",false);}AE.adjustInputWidth();}},preBuildRendering:function(){if(this.items==null||this.items.length==0){this.set("items",[]);}if(this._super){this._super();}},postBuildRendering:function Z(){this._super();var AE=this,AD=m.call(AE);if(AD&&(this.showEmptyItem||this.isFull)){AD.domNode.style.display="none";}this._clickHandler=function(){N.call(AE);};this._mousedownHandler=function(AF){if(!AE.isActive||AE.browserShown){return ;}var AG=Q.eventTarget(self,AF);if(AG&&AG.parentNode&&!Q.contains(L.call(AE).domNode,AG,false,document.body)&&!Q.contains(AE.suggestionPopup.domNode,AG,false,document.body)){D.call(AE);}};if(this.tabNavigable){this._tabKeyHander=function(AF){var AG=parseInt(AF.keyCode||AF.charCode,10);if(AG===z.TAB){if(!AE.isActive||AE.browserShown){return ;}D.call(AE);}};}Q.attachEvent(this.domNode,"click",this._clickHandler);},nextId:P,item2textCss:function M(AD){return AD.cssClass||"";},itemFunction:function G(AF,AD,AE){AF[AE.itemIdField]=P();var AG=new mstrmojo.ObjectItem({parent:AE,itemField:AE.itemField,cssClass:AE.item2textCss(AF),data:AF,showSuggestionOnEdit:this.showSuggestionOnEdit,enabled:AE.enabled});AE.attachEventListener4ItemWidget(AG,AE);return AG;},attachEventListener4ItemWidget:function j(AH,AF){var AE=["ItemEditBegin","ItemEditEnd","ItemDeletePrev","ItemDelete","ItemAdd","SuggestionOn","SuggestionOff","ItemEditing"],AD=AE.length,AG;for(AG=0;AG<AD;AG++){AH.attachEventListener(AE[AG],AF.id,"_itemChangeHandler");}return AH;},getSelectedObjects:function k(){if(v(this)){return[];}var AD=this.items,AE=AD.length-1;if((AE>-1)&&h(AD[AE])){return AD.slice(0,AE);}return AD.concat();},isValid:function C(){var AE=this.ctxtBuilder.itemWidgets,AD=AE&&AE.length,AF;for(AF=0;AF<AD;AF++){if(!AE[AF].isValid()){return false;}}return true;},isEmpty:function V(){return v(this);},_itemChangeHandler:function(AG){var AI=AG.name,AJ=AG.d,AE,AD=this.items.length,AF;switch(AI){case"ItemEditBegin":if(this.editingIdx!==null){AF=L.call(this);if(AF){AF.blur();}}AE=this.itemIndex(AJ);this.editingIdx=AE;N.call(this);break;case"ItemEditEnd":this.editingIdx=null;if(AG.deactivate){D.call(this);}else{N.call(this);}AF=m.call(this);if(AF){AF.adjustInputWidth();}break;case"ItemDelete":if(this.editingIdx!==null){AF=L.call(this);if(AF){AF.blur();}this.editingIdx=null;}AE=this.itemIndex(AJ);this.remove(AE);if(!AG.deactivate){this.editingIdx=null;N.call(this);}else{if(!this.isActive){D.call(this);}else{N.call(this);}}break;case"ItemDeletePrev":if(AD>1){this.remove(AD-2);}break;case"ItemAdd":var AH=S.copy(AG.d);this.add([AH],AD-1);if(AG.deactivate){D.call(this);}else{N.call(this);}break;case"SuggestionOn":this.set("suggestTarget",AG.target);this._pop_cfg={target:AG.target,left:AG.l,top:AG.t,zIndex:this.zIndex?this.zIndex:100};this.showSuggestion(AG.pattern);break;case"SuggestionOff":this.set("suggestTarget",null);this.hideSuggestion();break;}if(this.onitemchange&&(AI==="ItemEditEnd"||AI==="ItemAdd"||AI==="ItemDelete"||AI==="ItemDeletePrev"||AI==="ItemEditing")){this.onitemchange();}},unrender:function B(AE){var AD=this.suggestionPopup;if(AD.hasRendered){AD.unrender(false);}if(this._super){this._super(AE);}},destroy:function u(AE){var AD=this.suggestionPopup;if(AD&&AD.hasRendered){AD.destroy(false);}if(this._super){this._super(AE);}}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.ObjectInputBox,{onenabledChange:mstrmojo.Widget.enabledMarkupMethod});mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._HasEllipsis");var r="mstrmojo-ObjectItem-text";mstrmojo.ObjectItem=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._HasEllipsis],{scriptClass:"mstrmojo.ObjectItem",markupString:'<div id={@id} class="mstrmojo-ObjectItem" style="{@cssText}"><div class="mstrmojo-ObjectItem-displayNode"><span title=" {@en@title}" class="'+r+' {@cssClass}"></span><img class="mstrmojo-ObjectItem-edit" src="../images/1ptrans.gif" title="'+mstrmojo.desc(1088,"Edit")+'" onclick="mstrmojo.all[\'{@id}\'].edit()"/><img class="mstrmojo-ObjectItem-del" src="../images/1ptrans.gif" title="'+mstrmojo.desc(629,"Delete")+'" onclick="mstrmojo.all[\'{@id}\'].del(arguments[0])"/></div><div class="mstrmojo-ObjectItem-editNode"><input type="text" class="mstrmojo-ObjectItem-input" mstrAttach:keyup,keydown/></div></div>',markupSlots:{displayNode:function(){return this.domNode.firstChild;},editNode:function(){return this.domNode.childNodes[1];},textNode:function(){return this.domNode.firstChild.firstChild;},editButtonNode:function(){return this.domNode.firstChild.childNodes[1];},delButonNode:function(){return this.domNode.firstChild.lastChild;},inputNode:function(){return this.domNode.childNodes[1].firstChild;}},markupMethods:{oncssClassChange:function(){this.textNode.className=r+" "+this.cssClass;},onstateChange:function(){var AF=this.state,AE=mstrmojo.Enum_OIB_States_CSS[AF],AD=this.domNode;if(AF===a.EMPTY){AD.innerHTML=this.enabled?'<div class="mstrmojo-ObjectItem-emptyText">'+this.text+"</div>":"";}else{if(AF===a.EDITING){this.reduceWidth();}}AD.className="mstrmojo-ObjectItem "+AE;this.updateButtonsVisibility(this.data);},ontextChange:function(){this.inputNode.value=this.text;this.textNode.innerHTML=mstrmojo.string.encodeHtmlString(this.text);}},reduceWidth:function(){var AD=Math.round(this.displayNode.clientWidth);this.editNode.style.width=AD-4+"px";this.inputNode.style.width=AD-9+"px";},updateButtonsVisibility:function AC(){if(this.parent.hideEditButton(this.data)){this.editButtonNode.style.display="none";}},state:a.VALID,onstateChange:function f(AD){this.data.state=this.state;},ontextChange:function H(AD){this.data[this.itemField]=this.text;},onfocus:function x(){N.call(this.parent);},updateData:function F(AD){S.copy(AD,this.data);this.set("state",a.VALID);this.set("text",this.data[this.itemField]);this.set("cssClass",this.parent.item2textCss(this.data));},init:function y(AE){this._super(AE);var AG=this.data,AD=AG.state,AF=this.parent;AD=this.initState();this.cssClass=AF.item2textCss(AG);this.text=AG[this.itemField];this.state=AD;this.isAdding=h(AG);this.useRichTooltip=true;this.title=this.text;},initState:function K(){var AE=this.parent,AF=this.data,AD=AF.state;if(AF&&AF.did){AF.state=a.VALID;return AF.state;}if(typeof AD==="undefined"){AD=AE.dynamicVerify?AE.verifyObject(AF[this.itemField],this):a.UNDETERMINED;AF.state=AD;}return AD;},isValid:function C(){var AD=parseInt(this.state,10);return(AD!==a.INVALID&&AD!==a.UNDETERMINED);},adjustInputWidth:function A(){if(this.isAdding){var AG=this.inputNode.style;AG.width=AB+"px";var AF=this.domNode.parentNode,AD=AF.parentNode.offsetWidth,AE=Math.max(AD-AF.offsetLeft-20,AB);if(!isNaN(AE)){AG.width=AE+"px";}}},blur:function T(){this.hideSuggestion();if(!this.isActive){return ;}this.isActive=false;var AF=this.inputNode,AD=AF.value,AE=this.parent;window.setTimeout(function(){try{AF.blur();}catch(AG){}},0);if(!AD){return ;}if(AE.acptSugItemOnly&&this._tWas_){this.set("text",AD);this.set("text","");this._tWas_=null;return ;}this.setItem(AD,null,true);},focus:function t(){var AE=this.inputNode,AD=this.isActive;window.setTimeout(function(){try{AE.focus();if(AE.createTextRange&&!AD){var AG=AE.createTextRange(),AF=AE.value.length;AG.move("character",AF);AG.select();}else{if(AE.setSelectionRange&&!AD){var AF=AE.value.length;AE.setSelectionRange(AF,AF);}}}catch(AH){}},0);this.isActive=true;},prekeydown:function J(AD){var AF=this.inputNode.value,AE=parseInt(AD.e.keyCode||AD.e.charCode,10),AH=this.parent;if(!AF){return ;}if(AE===z.TAB||AE===z.ENTER){if(AE===z.ENTER){Q.preventDefault(AD.hWin,AD.e);}var AG=AH.getSelected();if(AG&&AG.did){AH.handleSuggestionItemSelect(AG);}else{this.hideSuggestion();if(!AH.acptSugItemOnly){this.setItem(AF,null,false);}else{this.set("text",AF);this.set("text","");}}}else{if(AE===z.DOWN_ARROW){if(!AH.noCache&&!AH.suggestionShown){this.showSuggestion(AF);AH.preHighlight();}AH.nextHighlight();}else{if(AE===z.UP_ARROW){AH.preHighlight();}}}},prekeyup:function AA(AD){var AF=this.inputNode.value,AE=parseInt(AD.e.keyCode||AD.e.charCode,10),AI=this.isAdding,AH=this.parent;if(!AF){if(AI){if(AE===z.BACKSPACE&&!this._tWas_){this.raiseEvent({name:"ItemDeletePrev"});Q.preventDefault(AD.hWin,AD.e);}this._tWas_=null;}else{this.raiseEvent({name:"ItemDelete",d:this.data});}this.hideSuggestion();return ;}if(AE===z.ESCAPE||AE===z.TAB){this.hideSuggestion();if(AH.acptSugItemOnly){this.set("text",AF);this.set("text","");this._tWas_=null;return ;}}else{if(this._tWas_!==AF){this.textChanged=true;this.raiseEvent({name:"ItemEditing",d:this.data});if(AH.useKeyDelay){window.clearTimeout(this._timerID);var AG=this;this._timerID=window.setTimeout(function(){var AJ=AG.inputNode.value;if(AJ){AG.showSuggestion(AJ);}AG._timerID=null;},X());}else{this.showSuggestion(AF);}}}this._tWas_=AF;},setItem:function(AD,AF,AE){var AG=this.isAdding;AE=AE||false;this.set("text",AD);if(AG){this.setItem_Adding(AD,AF,AE);}else{this.setItem_Editing(AD,AF,AE);}this._tWas_=null;},setItem_Adding:function(AD,AF,AE){this.set("text","");if(!AF){AF={};AF[this.itemField]=AD;}else{AF.state=a.VALID;}this.raiseEvent({name:"ItemAdd",d:AF,deactivate:AE});},setItem_Editing:function(AD,AF,AE){var AG=this.parent;this.set("text",AD);if(AF){this.updateData(AF);}else{if(this.textChanged){var AH={};AH[c]=this.data[c];delete this.data.did;this.data=AH;this.textChanged=false;}this.set("state",AG.verifyObject(AD,this));this.set("cssClass",AG.item2textCss(this.data));}this.isActive=false;this.raiseEvent({name:"ItemEditEnd",d:AF,deactivate:AE});},getSearchPattern:function W(){return(this.inputNode?this.inputNode.value:"");},showSuggestion:function o(AD){var AE=mstrmojo.dom.position(this.domNode,true);this.raiseEvent({name:"SuggestionOn",l:Math.round(AE.x)+"px",t:Math.round(AE.y+AE.h)+"px",pattern:AD,target:this});},hideSuggestion:function g(){this.raiseEvent({name:"SuggestionOff"});},del:function R(AD){AD=AD||self.event;Q.stopPropogation(self,AD);this.raiseEvent({name:"ItemDelete",d:this.data,deactivate:true});if(this.useRichTooltip&&this.hideTooltip){this.hideTooltip();}},edit:function Y(){this.set("state",a.EDITING);this.raiseEvent({name:"ItemEditBegin",d:this.data});if(this.showSuggestionOnEdit){this.showSuggestion(this.text);}},doEllipsize:function e(){if(!this.shouldEllipsize){return ;}var AE=this.maxItemWidth,AD;if(AE){this.domNode.style.maxWidth=AE;switch(parseInt(this.state,10)){case a.VALID:case a.UNDETERMINED:case a.INVALID:AD=this.textNode;break;case a.EMPTY:AD=this.domNode.firstChild;break;}if(AD){this.set("richTooltip",{content:this.text,contentNodeCssClass:"sp-tooltip",posType:mstrmojo.tooltip.POS_TOPLEFT,left:0,top:30,refNode:this.domNode});mstrmojo.css.addClass(AD,"truncated");}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.publisher","mstrmojo.Widget","mstrmojo.fx","mstrmojo.locales","mstrmojo.expr","mstrmojo.Button","mstrmojo.date","mstrmojo.ui.editors.controls.Stepper","mstrmojo.css");var AC=function(){return mstrmojo.locales.datetime;},j=mstrmojo.dom,h=mstrmojo.expr,z=h.DTP,Z=mstrmojo.date,J=mstrmojo.publisher,e=mstrmojo.hash,l=mstrmojo.array,N=l.removeIndices,k=mstrmojo.css;var AB=0,C=3,M=4,o=5,Q=6;var AD="month",c="day",V="year",X="hour",AG="minute",w="second";var G='<table border="0" cellpadding="0" cellspacing="0">',v="</table>";function O(AH){return'<table border="0" cellpadding="0" cellspacing="0" style="'+AH+'">';}function H(AK,AH,AI){var AJ=Z.getFirstDateOfMonth(AK,AH);return(AJ.getDay()-AI+8)%7;}function m(AK){var AJ=Z.parseDateAndOrTime(AK),AL,AH,AI;if(AJ){AI={};AL=AJ.date;AH=AJ.time;if(AL){e.copy(AL,AI);}if(AH){e.copy(AH,AI);}}return AI;}function F(AI,AL,AK,AJ,AH){var AM=Z.formatDateInfo({day:AI,month:AL,year:AK},AC().DATEOUTPUTFORMAT);return Z.inDateTimeRange(AM,AJ,AH)===0;}function T(AL,AK,AJ){var AI=AL.decreaseButton,AH=AL.increaseButton,AM="mstrmojo-Calendar";AI.className=(AM+"-decrease");AH.className=(AM+"-increase");}function W(AL,AI,AN,AK){var AJ=0,AH=AL.length,AM;for(AJ=0;AJ<AH;AJ++){AM=AL[AJ];if(AM&&AM.day===AI&&AM.month===AN&&AM.year===AK){return AJ;}}return -1;}function p(AH,AJ,AI){var AK=new Date();return(AK.getFullYear()===AI)&&((AK.getMonth()+1)===AJ)&&(AK.getDate()===AH);}function u(AO,AP){var AT=AO.dayView.getElementsByTagName("div"),AR=AO.selectedDates,AJ=AR[AP],AS=AO.browseYear,AI=AO.browseMonth,AL=Z.getDaysOfMonth(AS,AI),AK=Z.getPreMonth(AS,AI),AN=Z.getDaysOfMonth(AK.y,AK.m),AH=H(AS,AI,AO.firstDayOfWeek),AM=((AJ.month===AI)?AJ.day+AH-1:(AJ.month>AI?AJ.day+AH+AL-1:AH-AN+AJ.day-1)),AQ=AT[AM];if(AQ){b(AQ,AO,false);}N(AR,AP,1);}function B(AH){var AI=AH.selectedDates;while(AI.length){u(AH,0);}}function AF(AJ,AH){var AI=K(AJ,AH),AK=AJ.selectedDates;AK.push({day:AI.d,month:AI.m,year:AI.y});b(AH,AJ,true);}function n(AJ,AK){if(!AK||!AK.length){return null;}var AM=AJ.selectedDates;for(var AI=0,AH=AK.length;AI<AH;AI++){var AL=AK[AI],AN=q(AJ,AL);AM.push({day:AL.d,month:AL.m,year:AL.y});if(AN){b(AN,AJ,true);}}}function q(AP,AR){var AT=AP.dayView.getElementsByTagName("div"),AK=AT.length,AS=AP.browseYear,AI=AP.browseMonth,AL=Z.getPreMonth(AS,AI),AM=Z.getDaysOfMonth(AL.y,AL.m),AX=Z.getNextMonth(AS,AI),AJ=Z.getDaysOfMonth(AS,AI),AH=H(AS,AI,AP.firstDayOfWeek);var AN=AH>0?{y:AL.y,m:AL.m,d:AT[0].innerHTML}:{y:AS,m:AI,d:AT[0].innerHTML},AV=(AT.length-AJ-AH)>0?{y:AX.y,m:AX.m,d:AT[AK-1].innerHTML}:{y:AS,m:AI,d:AT[AK-1].innerHTML},AW=S(AN,AR),AO=S(AR,AV),AQ=null;if(AW>=0&&AO>=0){var AU=0;if(AW<AH){AU=-1;}if(AO<(AT.length-AH-AJ)){AU=1;}AQ=((AU===0)?AR.d+AH-1:(AU===1?AR.d+AH+AJ-1:AH-AM+AR.d-1));return AT[AQ];}else{return null;}}function f(AP,AH){var AR=AP.selectedDates,AJ=AR.length;if(!AJ){return null;}var AI=AR[AJ-1],AK=K(AP,AH),AU=S({y:AI.year,m:AI.month,d:AI.day},AK),AV=[],AM=AU>0,AS=Math.abs(AU);for(var AO=0;AO<=AS;AO++){var AN=new Date(AK.y,AK.m-1,AK.d);AN.setDate(AN.getDate()+(AM?-AO:AO));var AT=AN.getFullYear(),AL=AN.getMonth()+1,AQ=AN.getDate();if(AP.isDateDisabled(AQ,AL,AT,AP.min,AP.max)&&!AP.canSelectDisabledDate){continue;}AV.push({y:AT,m:AL,d:AQ});}return AV;}function S(AK,AJ){var AH=new Date(AK.y,AK.m-1,AK.d),AI=new Date(AJ.y,AJ.m-1,AJ.d);return(AI-AH)/1000/3600/24;}function K(AJ,AH){var AK=AJ.browseYear,AM=AJ.browseMonth,AL=parseInt(AH.innerHTML,10),AN=parseInt(AH.getAttribute("m"),10),AI=null;AI=(AN===0)?{y:AK,m:AM}:(AN===1?Z.getNextMonth(AK,AM):Z.getPreMonth(AK,AM));AI.d=AL;return AI;}function g(AH){var AJ=AH.selectedDates,AI=AJ.length;return(AI===0)?null:AJ[AI-1];}function b(AI,AJ,AH){var AK=AJ.selectedColor;k.toggleClass(AI,["selected",AJ.selectedCssStyle],AH);AI.parentNode.style.backgroundColor=AH?AK:"";AI.style.backgroundColor=AH?AK:"";}function y(AH){return AH.selectedColor?('style="background-color:'+AH.selectedColor+';"'):"";}function P(AH){return(AH.tagName.toLowerCase()==="td")?AH.firstChild:AH;}function R(AI,AJ){var AK=Z.getDateJson(AI),AH=Z.formatDateInfo(AK,mstrmojo.locales.datetime.DATEOUTPUTFORMAT);if(AJ===z.TIMESTAMP){AH+=" "+Z.formatTimeInfo(this.timeVal,mstrmojo.locales.datetime.TIMEOUTPUTFORMAT);}return AH;}function r(AM,AJ){var AH=this.advancedValues,AI=null;AH.set(AM,AJ);switch(AH.baseDate){case C:AI=new Date();break;case M:break;case o:break;case Q:break;default:return ;}var AK=AH.monthsToAdjust;if(AK>0){AI.setMonth(AI.getMonth()+(AH.toAddMonths?AK:-AK));}var AL=AH.daysToAdjust;if(AL>0){AI.setDate(AI.getDate()+(AH.toAddDays?AL:-AL));}this.set("value",R.call(this,AI,this.dtp));}function U(){var AH=this.advancedValues,AI=["isDyn"];if(AH.baseDate===AB){return null;}AI.push(AH.baseDate);AI.push(AH.toAddDays?AH.daysToAdjust:-AH.daysToAdjust);AI.push(AH.toAddMonths?AH.monthsToAdjust:-AH.monthsToAdjust);AI.push(0);AI.push(0);AI.push(0);AI.push(0);AI.push(this.value);AI.push(this.timeVal.hour);AI.push(this.timeVal.min);AI.push(this.timeVal.sec);return AI.join("::");}function AE(AH){if(AH.value!==undefined&&this.hasRendered){this.updateSelectedDate();}}function I(AJ,AI){var AK=this,AH=function(AL){return AL[0].toUpperCase()+AL.substring(1);};return{scriptClass:"mstrmojo.HBox",cssClass:"dateAdjustBox",alias:AJ+"AdjustBox",children:[{scriptClass:"mstrmojo.ui.Pulldown",selectedIndex:AI>0?0:1,onitemSelected:function(AM,AL){r.call(AK,"toAdd"+AH(AJ),AL===0);},items:[{did:0,n:mstrmojo.desc(9424,"plus")},{did:1,n:mstrmojo.desc(9425,"minus")}]},{scriptClass:"mstrmojo.ui.editors.controls.Stepper",width:null,height:null,provider:new mstrmojo.NumStepperContentProvider({item:{interval:1,min:0,value:Math.abs(AI)},onTraverse:function(){r.call(AK,AJ+"ToAdjust",this.curVal);}})},{scriptClass:"mstrmojo.Label",text:AJ==="days"?mstrmojo.desc(707,"Days"):mstrmojo.desc(710,"Months")}]};}function Y(){this.buttonsNode.style.display=(this.wasAdvanced||this.changeValueOnOK||(this.showAdvanced&&this.isAdvanced)?"block":"none");this.advancedNode.style.display=this.showAdvanced?"block":"none";}mstrmojo.Calendar=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Calendar",cssPrefix:"",browseMonth:null,browseYear:null,yearRangStart:null,selectedDates:null,selectedColor:"",isMultiSelect:false,hilightToday:false,yearViewSize:5,cssTextDay:"",cssTextMonth:"",cssTextYear:"",cssTextWeekDay:"",cssTextHeader:"",cssTextMonthYearLabel:"",forceNonEmptySelection:false,showCurMonthDatesOnly:false,currentView:c,duration:600,timeDelimiter:":",dtp:z.DATE,value:"",firstDayOfWeek:1,changeValueOnOK:false,wasAdvanced:false,showAdvanced:false,isAdvanced:false,dynDateValue:null,canSelectDisabledDate:false,monthNames:function(AH){return AC().MONTHNAME_SHORT[AH];},dayNames:function(AH){return AC().dayShortNames[AH];},min:null,max:null,supportedViews:{day:true,month:true,year:true,hour:true,minute:true,second:true},sDirMatrix:{day:{month:"down",year:"down",hour:"up",minute:"up",second:"up"},month:{day:"up",year:"left",hour:"up",minute:"up",second:"up"},year:{day:"up",month:"right",hour:"up",minute:"up",second:"up"},hour:{day:"down",month:"down",year:"down",minute:"left",second:"left"},minute:{day:"down",month:"down",year:"down",hour:"right",second:"left"},second:{day:"down",month:"down",year:"down",hour:"right",minute:"right"}},markupString:'<div id="{@id}" class="{@cssPrefix} mstrmojo-Calendar {@cssClass}" style="{@cssText}" mstrAttach:mousedown,mouseup,mouseover,mouseout><div class="mstrmojo-Calendar-header" style="{@cssTextHeader}"><div class="mstrmojo-Calendar-decrease"></div><div class="mstrmojo-Calendar-increase"></div><div class="mstrmojo-Calendar-title"><span class="mstrmojo-Calendar-monthLabel" style="{@cssTextMonthYearLabel}">{@browseMonth}</span><span class="mstrmojo-Calendar-yearLabel" style="{@cssTextMonthYearLabel}">{@browseYear}</span></div></div><div class="mstrmojo-Calendar-body" style="{@cssTextBody}"><div class="mstrmojo-Calendar-dayView"></div></div><div class="mstrmojo-Calendar-timePart"><span class="mstrmojo-Calendar-hourLabel">00</span><span class="mstrmojo-Calendar-timeDelimiter">{@timeDelimiter}</span><span class="mstrmojo-Calendar-minuteLabel">00</span><span class="mstrmojo-Calendar-timeDelimiter">{@timeDelimiter}</span><span class="mstrmojo-Calendar-secondLabel">00</span><span class="mstrmojo-Calendar-AMPMLabel">AM</span></div><div class="mstrmojo-Calendar-advanced"></div><div class="mstrmojo-Calendar-buttons cf"></div></div>',markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onbrowseMonthChange:function(){this.monthLabel.innerHTML=this.monthNames(this.browseMonth-1);},onbrowseYearChange:function(){this.yearLabel.innerHTML=this.browseYear;},ondtpChange:function(){this.timePart.style.display=(this.dtp===z.TIMESTAMP||this.dtp===z.TIME)?"block":"none";this.advancedNode.style.display=this.showAdvanced?"block":"none";},onvalueChange:function(){if(this.lastValue===undefined||this.value!==this.lastValue){this.updateSelectedDate();}},onchangeValueOnOKChange:Y,onisAdvancedChange:Y},markupSlots:{monthLabel:function(){return this.domNode.firstChild.lastChild.firstChild;},yearLabel:function(){return this.domNode.firstChild.lastChild.lastChild;},decreaseButton:function(){return this.domNode.firstChild.firstChild;},increaseButton:function(){return this.domNode.firstChild.childNodes[1];},bodyContainer:function(){return this.domNode.childNodes[1];},dayView:function(){return this.domNode.childNodes[1].firstChild;},monthView:function(){return this.domNode.childNodes[1].firstChild;},yearView:function(){return this.domNode.childNodes[1].firstChild;},hourView:function(){return this.domNode.childNodes[1].firstChild;},minuteView:function(){return this.domNode.childNodes[1].firstChild;},secondView:function(){return this.domNode.childNodes[1].firstChild;},timePart:function(){return this.domNode.childNodes[2];},hourLabel:function(){return this.domNode.childNodes[2].firstChild;},minuteLabel:function(){return this.domNode.childNodes[2].childNodes[2];},secondLabel:function(){return this.domNode.childNodes[2].childNodes[4];},AMPMLabel:function(){return this.domNode.childNodes[2].childNodes[5];},advancedNode:function(){return this.domNode.childNodes[3];},buttonsNode:function(){return this.domNode.childNodes[4];}},init:function AA(AH){if(this._super){this._super(AH);}if(this.duration<1){this.duration=1;}if(!this.selectedDates){this.selectedDates=[];}this.timeVal={hour:0,min:0,sec:0};},ondynDateValueChange:function t(AH){if(AH.value!==undefined&&this.hasRendered){this.updateSelectedDate();this.buildChildren();}},onminChange:AE,onmaxChange:AE,buildChildren:function a(){var AN=this;if(this.showAdvanced){var AK=this.dynDateValue,AJ=this.advancedValues||this.addDisposable(new mstrmojo.Model({})),AQ=AK&&AK.split("::")||[],AM=AQ[1]||AB,AI=AQ[2]||0,AR=AQ[3]||0,AO=function AO(){if(AN.isAdvanced){AN.wasAdvanced=true;AN.changeValueOnOK=true;}AN.set("isAdvanced",!AN.isAdvanced);mstrmojo.css.toggleClass(AN.markupSlots.dayView.call(AN),["ddSelected"],AN.isAdvanced);r.call(AN,"baseDate",AN.isAdvanced?3:0);if(AN.parent&&AN.parent.nudge&&AN.isAdvanced){AN.parent.nudge();}};this.advancedValues=AJ;AJ.baseDate=parseInt(AM);AJ.toAddDays=AI>=0;AJ.daysToAdjust=Math.abs(AI);AJ.toAddMonths=AR>=0;AJ.monthsToAdjust=Math.abs(AR);this.isAdvanced=!!this.dynDateValue;if(this.domNode){mstrmojo.css.toggleClass(this.markupSlots.dayView.call(this),["ddSelected"],this.isAdvanced);}if(this.isAdvanced&&this.value){var AH=m(this.value),AL=this.timeVal;if(AH&&AH.hour!==undefined){AL.hour=AH.hour;AL.min=AH.min;AL.sec=AH.sec;}}r.call(AN,"baseDate",this.isAdvanced?3:0);this.destroyChildren(false);this.addChildren([{scriptClass:"mstrmojo.HBox",alias:"checkLabel",slot:"advancedNode",children:[{scriptClass:"mstrmojo.ui.Checkbox",alias:"checkbox",checked:!!AN.isAdvanced,oncheckedChange:AO},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13844,"Dynamic Date"),onclick:function AP(){this.parent.checkbox.onclick();}}]},{scriptClass:"mstrmojo.Box",alias:"advancedPanel",slot:"advancedNode",bindings:{visible:"this.parent.isAdvanced"},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(9423,"Today"),cssClass:"tdLabel"},I.call(this,"days",AI),I.call(this,"months",AR)]},]);}else{this.destroyChildren(false);}this.addChildren([mstrmojo.Button.newWebButton(mstrmojo.desc(2140,"Cancel"),function(){AN.parent.close();},false,{slot:"buttonsNode"}),mstrmojo.Button.newWebButton(mstrmojo.desc(1442,"OK"),function(){if(AN.changeValueOnOK||AN.isAdvanced||AN.wasAdvanced){AN.updateValue(true);}},true,{slot:"buttonsNode"})]);},preBuildRendering:function A(){this.buildChildren();return this._super();},getSelectedDatesAsString:function E(AI){var AH=[];l.forEach(this.selectedDates,function(AJ){AH.push(Z.formatDateInfo(AJ,AI||AC().DATEOUTPUTFORMAT));});return AH;},updateSelectedDate:function L(AM){var AH=this.value,AJ=this.timeVal,AL=this.selectedDates,AK,AN=function(AP,AO){AP.set("browseYear",AO.year);AP.set("browseMonth",AO.month);AP.updateTimePart();AP.updateView(AP.currentView);if(!AP.changeValueOnOK&&AP.hasRendered&&AP.closeOnValueChange!=true){AP.updateValue();}};if(this.wasAdvanced){this.wasAdvanced=false;this.changeValueOnOK=false;}if(AH){AK=m(AH);if(AK&&AK.hour!==undefined){AJ.hour=AK.hour;AJ.min=AK.min;AJ.sec=AK.sec;if(this.dtp===z.TIME&&(AK.year===undefined||AK.month===undefined||AK.day===undefined)){var AI=Z.getDateJson(new Date());AK.year=AI.year;AK.month=AI.month;AK.day=AI.day;}}}if((AK&&!this.isMultiSelect)||AM){B(this);}if(AL.length===0){if(!AK){if(this.parent.opener&&this.parent.opener.defaultDate){AK=m(this.parent.opener.defaultDate);}else{AK=Z.getDateJson(new Date());}}if(!this.canSelectDisabledDate&&this.isDateDisabled(AK.day,AK.month,AK.year,this.min,this.max)){if(this.min&&Z.compareDate(AK,this.min)<0){AK=m(this.min);}else{if(this.max&&Z.compareDate(AK,this.max)>0){AK=m(this.max);}}}AL.push(AK);AN(this,AK);}else{AK=AL[0];if(this.value!==null){AN(this,AK);}}},updateValue:function d(AH){var AJ=g(this),AI="";if(AJ){AI=Z.formatDateInfo(AJ,AC().DATEOUTPUTFORMAT);if(this.dtp!==z.DATE){var AK=Z.formatTimeInfo(this.timeVal,AC().TIMEOUTPUTFORMAT);if(this.dtp===z.TIME){AI=AK;}else{AI+=" "+AK;}}}this.lastValue=AI;this.set("value",AI);if(this.showAdvanced){this.set("dynDateValue",AH?U.call(this):null);}if(this.onValueUpdate){this.onValueUpdate();}},updateTimePart:function x(){var AI=this.timeVal,AH=AI.hour||0,AJ=(AH%12===0)?12:(AH%12);this.hourLabel.innerHTML=AJ;this.minuteLabel.innerHTML=Z.formatInteger(AI.min||0,2);this.secondLabel.innerHTML=Z.formatInteger(AI.sec||0,2);this.AMPMLabel.innerHTML=AH<12?" "+AC().AM_NAME:" "+AC().PM_NAME;},premousedown:function(AH){var AJ=AH.e,AI=j.eventTarget(AH.hWin,AJ);if(AI===this.decreaseButton||AI===this.increaseButton){if(j.isFF){j.stopPropogation(window,AJ);}return true;}else{return this.processEvent(AI,AJ);}},premouseup:function(AH){var AJ=AH.e;if(AJ.ctrlKey||AJ.shiftKey){j.clearBrowserHighlights();}var AI=j.eventTarget(AH.hWin,AJ);if(AI===this.decreaseButton&&!AI.disabled){this.decrease();return true;}if(AI===this.increaseButton&&!AI.disabled){this.increase();return true;}},processEvent:function(AS,AZ){var AK=this.currentView,AL=this.selectedDates,AP,AU,Aa,AH,AR;if(AS===this.monthLabel){if(AK!==AD){this.switchViewTo(AD);}return true;}if(AS===this.yearLabel){if(AK!==V){this.adjustYearStart();this.switchViewTo(V);return true;}}if(AS===this.hourLabel){if(AK!==X){this.switchViewTo(X);}return true;}if(AS===this.minuteLabel){if(AK!==AG){this.switchViewTo(AG);}return true;}if(AS===this.secondLabel){if(AK!==w){this.switchViewTo(w);}return true;}if(AS===this.AMPMLabel){if(AK!==X){this.switchViewTo(X);}return true;}if(AK===X){var AN=AS.getAttribute("h");AR=parseInt(AS.innerHTML,10);if(!isNaN(AN)&&!isNaN(AR)){AN=parseInt(AN,10);this.timeVal.hour=AR%12+AN*12;this.updateTimePart();this.switchViewTo(c);if(!this.changeValueOnOK){this.updateValue();}}return true;}if(AK===AG){AR=parseInt(AS.innerHTML,10);if(!isNaN(AR)){this.timeVal.min=AR;this.updateTimePart();this.switchViewTo(c);if(!this.changeValueOnOK){this.updateValue();}}return true;}if(AK===w){AR=parseInt(AS.innerHTML,10);if(!isNaN(AR)){this.timeVal.sec=AR;this.updateTimePart();this.switchViewTo(c);if(!this.changeValueOnOK){this.updateValue();}}return true;}if(AK===c){var AY=this.browseYear,AI=this.browseMonth,AJ;AS=P(AS);Aa=parseInt(AS.innerHTML,10);AH=parseInt(AS.getAttribute("m"),10);if(!isNaN(Aa)&&!isNaN(AH)){AJ=(AH===0)?{y:AY,m:AI}:(AH===1?Z.getNextMonth(AY,AI):Z.getPreMonth(AY,AI));if((!this.canSelectDisabledDate&&this.isDateDisabled(Aa,AJ.m,AJ.y,this.min,this.max))||AZ.button===2){return true;}if(this.isAdvanced){return true;}var AV=W(AL,Aa,AI,AY),AT=AL.length>1,AQ=this.forceNonEmptySelection,AW=this.isMultiSelect,AO=AW&&AZ.ctrlKey,AX=AW&&AZ.shiftKey,AM=null;if(AX){AM=f(this,AS);B(this);n(this,AM);}else{if(AO){if(AV===-1){AF(this,AS);}else{if(!AQ||AT){u(this,AV);}}}else{B(this);if(AT||AV===-1||AQ){AF(this,AS);}}}if(this.onselect||J.hasSubs(this.id,"select")){this.raiseEvent({name:"select",value:this.selectedDates});}if(AH===1){this.increase();}else{if(AH===-1){this.decrease();}}if(!this.changeValueOnOK){this.updateValue();}else{if(this.showAdvanced){this.checkLabel.checkbox.set("checked",false);r.call(this,"baseDate",0);}}}return true;}if(AK===AD){AS=P(AS);AU=parseInt(AS.getAttribute("m"),10);if(!isNaN(AU)){this.set("browseMonth",AU+1);this.switchViewTo(c);}return true;}if(AK===V){AS=P(AS);AP=parseInt(AS.innerHTML,10);if(!isNaN(AP)){this.set("browseYear",AP);this.switchViewTo(c);}return true;}return true;},decrease:function(){var AJ=this.currentView,AM=AJ,AL=this.browseYear,AH=this.browseMonth,AI=this.yearRangStart,AK;switch(AJ){case c:AK=Z.getPreMonth(AL,AH);this.set("browseMonth",AK.m);this.set("browseYear",AK.y);break;case AD:this.set("browseYear",AL-1);break;case V:this.yearRangStart=AI-this.yearViewSize*this.yearViewSize;break;case X:AM=w;break;case AG:AM=X;break;case w:AM=AG;break;}this.switchViewTo(AM,"right");},increase:function(){var AJ=this.currentView,AM=AJ,AL=this.browseYear,AH=this.browseMonth,AI=this.yearRangStart,AK;switch(AJ){case c:AK=Z.getNextMonth(AL,AH);this.set("browseMonth",AK.m);this.set("browseYear",AK.y);break;case AD:this.set("browseYear",AL+1);break;case V:this.yearRangStart=AI+this.yearViewSize*this.yearViewSize;break;case X:AM=AG;break;case AG:AM=w;break;case w:AM=X;break;}this.switchViewTo(AM,"left");},updateView:function(AH){var AI=this[AH+"ViewHTML"]();this[AH+"View"].innerHTML=AI;},adjustYearStart:function(){this.yearRangStart=this.browseYear-10-this.browseYear%5;},switchViewTo:function(AI,AK){var AO="mstrmojo-Calendar-"+AI+"View",AN=document.createElement("div"),AH=this[this.currentView+"View"],AL=AI+"ViewHTML",AM=this[this.currentView+"Label"],AJ=this[AI+"Label"];if(!this.supportedViews[AI]){return ;}if(!AK){AK=this.sDirMatrix[this.currentView][AI];}AN.className=AO;AN.innerHTML=this[AL]();this.currentView=AI;this[AI+"View"]=AN;mstrmojo.css.toggleClass(AN,["ddSelected"],this.isAdvanced);this._slideIntoView(AH,AN,AK);},_slideIntoView:function(AL,AP,AJ){var AH=this.bodyContainer,AN=(AJ==="left"||AJ==="right")?AL.offsetWidth:AL.offsetHeight,AI=(AJ==="left"||AJ==="right")?"left":"top",AO=(AJ==="left"||AJ==="up")?AN:-AN,AM=new mstrmojo.fx.AnimateProp({props:{},duration:this.duration,interval:this.duration/10,target:AL,onEnd:function(){AH.removeChild(AL);}}),AK=new mstrmojo.fx.AnimateProp({props:{},duration:this.duration,interval:this.duration/10,target:AP});AP.style[AI]=AO+"px";AH.appendChild(AP);AM.props[AI]={start:0,stop:-AO,suffix:"px"};AK.props[AI]={start:AO,stop:0,suffix:"px"};AM.play();AK.play();},dayViewHTML:function(){var AM=this.browseYear,AP=this.browseMonth,AU=Z.getDaysOfMonth(AM,AP),AY=Z.getPreMonth(AM,AP),AJ=Z.getDaysOfMonth(AY.y,AY.m),AI=Z.getNextMonth(AM,AP),AQ=H(AM,AP,this.firstDayOfWeek),AN=[],AK=y(this),Aa=0,AH=this.selectedDates,AS=this.min,AW=this.max,Ab,AT,AX,AV,AZ=this.showCurMonthDatesOnly?'style="visibility:hidden;"':"";T(this,{d:AJ,m:AY.m,y:AY.y},{d:1,m:AI.m,y:AI.y});AN.push(O(this.cssTextDay));AN.push(this._dayViewTHead());AN.push("<tr>");for(AX=0;AX<AQ;AX++){Ab=AJ-AQ+AX+1;AT=this.isDateDisabled(Ab,AY.m,AY.y,AS,AW)?"disabled":"";AN.push("<td "+AZ+'><div class="mstrmojo-Calendar-day-pre '+AT+'" m="-1">');AN.push(Ab);AN.push("</div></td>");Aa++;}for(AX=0;AX<AU;AX++){Ab=AX+1;AT=this.isDateDisabled(Ab,AP,AM,AS,AW)?" disabled":"";var AL=p(Ab,AP,AM),AO=AL?" today":"",AR=W(AH,Ab,AP,AM)!==-1;AO=(this.hilightToday&&AL)?" hilightToday":AO;AN.push("<td "+(AL?('class="'+AO+'" '):" ")+(AR?AK:"")+'><div class="mstrmojo-Calendar-day-cur'+(AR?(" selected "):"")+AT+'" m="0"'+(AR?AK:"")+">");AN.push(AX+1);AN.push("</div></td>");if((++Aa)%7===0){AN.push("</tr><tr>");}}for(AV=Aa;AV<42;AV++){Ab=Aa-AU-AQ+1;AT=this.isDateDisabled(Ab,AI.m,AI.y,AS,AW)?"disabled":"";AN.push("<td "+AZ+'><div class="mstrmojo-Calendar-day-next '+AT+'" m="1">');AN.push(Ab);AN.push("</div></td>");if((++Aa)%7===0&&Aa!==42){AN.push("</tr><tr>");}}AN.push("</tr>");AN.push(v);return AN.join("");},_dayViewTHead:function(){var AK=[],AL='<thead><tr class="mstrmojo-Calendar-thead" style="'+this.cssTextWeekDay+';">',AJ="</tr></thead>",AI=this.firstDayOfWeek-1,AM=this.dayNames,AH;AK.push(AL);for(AH=AI;AH<AI+7;AH++){AK.push("<td>");AK.push(AM(AH%7));AK.push("</td>");}AK.push(AJ);return AK.join("");},monthViewHTML:function(){var AI=[],AK=this.browseMonth-1,AJ=this.browseYear,AH;T(this,{d:31,m:12,y:AJ-1},{d:1,m:1,y:AJ+1});AI.push(O(this.cssTextMonth));AI.push("<tr>");for(AH=0;AH<12;AH++){AI.push("<td "+((AH===AK)?y(this):"")+'><div class="mstrmojo-Calendar-month'+((AH===AK)?" selected":"")+'" m="');AI.push(String(AH));AI.push('">');AI.push(this.monthNames(AH));AI.push("</div></td>");if(AH%3===2){AI.push("</tr><tr>");}}AI.pop();AI.push("</tr>");AI.push(v);return AI.join("");},yearViewHTML:function(){var AM=this.yearRangStart,AI=[],AK=this.browseYear,AL,AH,AJ=this.yearViewSize;T(this,{d:31,m:12,y:AM-1},{d:1,m:1,y:AM+AJ*AJ});AI.push(O(this.cssTextYear));AI.push("<tr>");for(AH=0;AH<AJ*AJ;AH++){AL=AM+AH;AI.push("<td "+((AK===AL)?y(this):"")+'><div class="mstrmojo-Calendar-year'+((AK===AL)?" selected":"")+'">');AI.push(AL);AI.push("</div></td>");if(AH%AJ===(AJ-1)){AI.push("</tr><tr>");}}AI.pop();AI.push("</tr>");AI.push(v);return AI.join("");},hourViewHTML:function(){var AJ=[],AI=this.timeVal.hour,AH;AJ.push(G);AJ.push('<tr><td colspan="6"><div class="mstrmojo-Calendar-hourTitle">');AJ.push(AC().AM_NAME);AJ.push("</div></td></tr>");for(AH=0;AH<12;AH++){AJ.push('<td><div class="mstrmojo-Calendar-hour'+((AH===AI)?" selected":"")+'" h="0">');AJ.push((AH===0)?12:AH);AJ.push("</div></td>");if(AH===5){AJ.push("</tr><tr>");}}AJ.push('</tr><tr><td colspan="6"><div class="mstrmojo-Calendar-hourTitle">');AJ.push(AC().PM_NAME);AJ.push("</div></td></tr>");for(AH=0;AH<12;AH++){AJ.push('<td><div class="mstrmojo-Calendar-hour'+(((12+AH)===AI)?" selected":"")+'" h="1">');AJ.push((AH===0)?12:AH);AJ.push("</div></td>");if(AH===5){AJ.push("</tr><tr>");}}AJ.push("</tr>");AJ.push(v);return AJ.join("");},minuteViewHTML:function(){return this._minuteSecondViewHTML(this.timeVal.min,"mstrmojo-Calendar-minute");},secondViewHTML:function(){return this._minuteSecondViewHTML(this.timeVal.sec,"mstrmojo-Calendar-second");},_minuteSecondViewHTML:function(AJ,AK){var AI=[],AH;AI.push(G);AI.push("<tr>");for(AH=0;AH<60;AH++){AI.push('<td><div class="');AI.push(AK);AI.push((AH===AJ)?' selected">':'">');AI.push(AH);AI.push("</div></td>");if(AH%10===9){AI.push("</tr><tr>");}}AI.pop();AI.push("</tr>");AI.push(v);return AI.join("");},isDateDisabled:function(AH,AJ,AI){return !F(AH,AJ,AI,this.min,this.max);},unrender:function D(AH){delete this.lastValue;this._super(AH);}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.Dialog","mstrmojo.Button","mstrmojo.HTMLButton","mstrmojo.Label","mstrmojo.form","mstrmojo.LoginEditor");mstrmojo.requiresDescs(2699,7773,11812,11865,13380,13381,13382);var D=mstrmojo.desc(13382,"Your user session will time out due to inactivity in # ##."),S=60,M=false,G=null,A=null,H=null;function N(){return mstrApp.sessionState||window.microstrategy&&microstrategy.sessionState;}function K(V,U){if(mstrApp.is508){for(var T in U){V.setAttribute(T,U[T]);}}}mstrmojo.SessionManager=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.SessionManager",cssClass:"mstrmojo-SessionManager",width:"370px",title:mstrmojo.desc(11812,"Notification"),msgInterval:1,checkSessionInterval:20,zIndex:10000,maxSessionIdleTime:600,timeBeforeSessionTimeoutWarning:60,remainingTime:60,sessionTimedout:false,buttons:[mstrmojo.Button.newWebButton(mstrmojo.desc(13381,"Stay logged in"),function(){var T=this.parent.parent;if(A){T.keepSessionAlive();}T.hideMessage();},true,{onRender:function(){K(this.domNode,{tabindex:0,role:"button","aria-label":mstrmojo.desc(13381,"Stay logged in")});}}),mstrmojo.Button.newWebButton(mstrmojo.desc(13380,"Log out"),function(){this.parent.parent.hideMessage();mstrmojo.form.send({evt:3019,src:mstrApp.name+".3019"});},null,{onRender:function(){K(this.domNode,{tabindex:0,role:"button","aria-label":mstrmojo.desc(13380,"Log out")});}})],children:[{scriptClass:"mstrmojo.Label",alias:"message",cssClass:"mstrmojo-SessionManager-msg",text:"",allowHTML:true,ontextChange:function(){if(mstrApp.is508){this.refresh();var T=this.domNode;K(T,{tabindex:-1,role:"alert"});window.setTimeout(function(){T.focus();},0);}}}],postBuildRendering:function(){this._super();if(mstrApp.is508){this.msgInterval=10;K(this.editorNode,{role:"alertdialog",tabindex:-1});}},updateMsg:function B(U){var T;if(U>60){T=D.replace("##",mstrmojo.desc(2699,"minutes")).replace("#","<b>"+Math.ceil(U/S)+"</b>");}else{if(U>-1){T=D.replace("##",mstrmojo.desc(7773,"seconds")).replace("#","<b>"+U+"</b>");}else{T=mstrmojo.desc(11865,"Your session is expired.");}}this.message.text="";this.message.set("text",T);this.remainingTime=U;},showMessage:function F(T){this.updateMsg(T);this.set("visible",true);M=true;},hideMessage:function I(){if(A){window.clearInterval(A);A=null;window.clearInterval(H);H=null;}this.set("visible",false);M=false;},popupTimeoutWarning:function L(X){if(M){return ;}var V=this,W=(typeof X==="number")?X:V.timeBeforeSessionTimeoutWarning,T=W,U=mstrmojo.now();if(mstrApp.enableWarningSessionTimeout){if(!this.hasRendered){this.render();}this.showMessage(T);}window.clearInterval(A);A=window.setInterval(function(){if(T<1){window.clearInterval(A);A=null;window.clearInterval(H);H=null;window.setTimeout(function(){if(mstrApp.enableWarningSessionTimeout){V.gotoLogoutPage();}else{V.sessionTimedout=true;V.closeSession();}},200);}var Y=Math.round((mstrmojo.now()-U)/1000);T=W-Y;V.updateMsg(T);},this.msgInterval*1000);window.clearInterval(H);H=window.setInterval(function(){V.isSessionAlive();},this.checkSessionInterval*1000);},warningTimeoutTimer:function Q(T){var U=this;window.clearTimeout(G);G=window.setTimeout(function(){G=null;U.isSessionAlive();},(T-this.timeBeforeSessionTimeoutWarning)*1000);},isSessionAlive:function E(){var T=this,V={success:function(W){var X=parseInt(W,10);if(X!==-1){if(X>T.remainingTime){T.hideMessage();}if(X>T.timeBeforeSessionTimeoutWarning){T.warningTimeoutTimer(X);}else{T.popupTimeoutWarning(X);}}else{window.clearInterval(H);T.popupTimeoutWarning(0);}},failure:function(){mstrmojo.alert("Problems encountered during checking for whether session is alive. Connection is down or session already time out.");}},U={taskId:"isSessionAlive",notRestartSessionManager:true};mstrmojo.xhr.request("POST",mstrConfig.taskURL,V,U);},keepSessionAlive:function R(){var T=this,V={success:function(W){if(W){T.warningTimeoutTimer(T.maxSessionIdleTime);}else{T.sessionTimedout=true;mstrmojo.alert("Your session is expired.");}},failure:function(){mstrmojo.alert("Problems encountered during activating session. Connection is down or session already time out.");}},U={taskId:"keepSessionAlive"};mstrmojo.xhr.request("POST",mstrConfig.taskURL,V,U);},closeSession:function J(){var T=this;mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(){T.sessionTimedout=true;}},{taskId:"closeSessions",sessionStates:N(),notRestartSessionManager:true});},restart:function(){this.sessionTimedout=false;this.hideMessage();if(this.maxSessionIdleTime>this.timeBeforeSessionTimeoutWarning){this.warningTimeoutTimer(this.maxSessionIdleTime);}},start:function C(){var V=mstrConfig.lastMsgKey;if(this.maxSessionIdleTime>this.timeBeforeSessionTimeoutWarning){this.warningTimeoutTimer(this.maxSessionIdleTime);}var U=function(){window.localStorage.setItem("msg_recovery_notify"+V,1);};if(window.addEventListener){window.addEventListener("beforeunload",U);}else{window.attachEvent("onbeforeunload",U);}var T=window.sessionStorage;if(T){T.setItem("msg_browser_not_closed"+V,1);T.setItem("msg_user_login",0);}},openLoginEditor:function P(V){if(window.mstrmobile&&window.mstrmobile.onSessionExpired){window.mstrmobile.onSessionExpired();return ;}var U="LoginEditor",T=mstrmojo.all[U];if(!T){T=mstrmojo.insert({id:U,scriptClass:"mstrmojo.LoginEditor",config:{callback:{}},zIndex:10000});}T.config.callback=V;T.open();},gotoLogoutPage:function O(){mstrmojo.form.send({evt:3008,src:mstrApp.name+".3008",autoLoggedout:true,Server:mstrConfig.serverName,Port:mstrConfig.serverPort,Project:mstrmojo.string.decodeHtmlString(mstrConfig.projectName),loginReq:true},null,"POST");}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.fx","mstrmojo.Box","mstrmojo.Editor","mstrmojo.Button","mstrmojo._FormatDefinition","mstrmojo.TabListContainer","mstrmojo.TabNameList","mstrmojo.StackContainer","mstrmojo.FontFormatter","mstrmojo.NumberFormatter","mstrmojo.AlignmentFormatter","mstrmojo.PaddingFormatter","mstrmojo.FillFormatter","mstrmojo.BorderFormatter");var C=mstrmojo.array,M=mstrmojo.hash,F=mstrmojo._FormatDefinition,B=mstrmojo.Button,L=F.MetricFormatTarget;var G="#999",E="mstrmojo-Editor-button mstrButton",H=M.clone(F.DefaultFormat);H.FormattingPatternsChart={FillColor:"16777215",FillStyle:"0",GradientColor:"16777215",GradientAngle:"0",GradientXOffset:"0",GradientYOffset:"0"};H.FormattingPatterns=M.clone(H.FormattingPatternsChart);var I={n:mstrmojo.desc(3434,"Number"),scriptClass:"mstrmojo.NumberFormatter",visible:false,pr:"FormattingNumber"},K={n:mstrmojo.desc(3435),scriptClass:"mstrmojo.Box",visible:false,pr:["FormattingAlignment","FormattingPadding"],cssClass:"alignmentPanel",children:[{scriptClass:"mstrmojo.AlignmentFormatter",bindings:{model:"this.parent.FormattingAlignment"}},{scriptClass:"mstrmojo.PaddingFormatter",bindings:{model:"this.parent.FormattingPadding"}}]},N={n:mstrmojo.desc(3433,"Font"),scriptClass:"mstrmojo.FontFormatter",visible:false,pr:"FormattingFont",cssClass:"mstrmojo-FormatEditor-fontTable",cellPadding:5},D={n:mstrmojo.desc(2886,"Borders"),scriptClass:"mstrmojo.BorderFormatter",visible:false,pr:"FormattingBorder"},A={n:mstrmojo.desc(3905,"Background"),scriptClass:"mstrmojo.FillFormatter",visible:false,pr:"FormattingPatterns"},J={n:mstrmojo.desc(3479,"Graph"),scriptClass:"mstrmojo.FillFormatter",visible:false,isChart:true,pr:"FormattingPatternsChart"};mstrmojo.ME.MetricFormatEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.ME.MetricFormatEditor",cssClass:"mstrmojo-FormatEditor",title:mstrmojo.desc(2116,"Format"),model:null,obModel:null,_initModel:function(){if(!this.model){this.model={};for(var O=0;O<L.length;O++){this.model[L[O].p]={};}}if(!this.obModel){this.obModel=new mstrmojo.Model({onlevelNameChange:function(P){var Q=P.valueWas;if(Q){this._updateModel(Q);}this._setCurrentFormat();},onmodelChange:function(){return this.model?this._setCurrentFormat():false;},_updateModel:function(Q){var R=M.copy(this.currentFormat),Q=Q||this.levelName,P=this.model[Q];if(!P){P=this.model[Q]={};}F.extractModel(R,P,H);this.model.set(Q,P);},_setCurrentFormat:function(){var P=this.model?M.copy(this.model[this.levelName||L[0].p]):{};P=F.getStandardFormat(P,H);this.set("currentFormat",P);}});}},init:function(O){this._initModel();this._super(O);},onmodelChange:function(){this._initModel();var Q=this.obModel,O=M.clone(this.model)||{};if(O){var P={};if(O&&O[L[0].p]){var R=O[L[0].p].FormattingPatterns;if(R){for(pr in R){if(pr.match(/^Series\w+/gi)){P[pr.substring(6,pr.length)]=R[pr];}}}O[L[0].p].FormattingPatternsChart=P;}}if(O&&!O.attachEventListener){M.make(O,mstrmojo.Obj);}Q.set("model",O);Q.set("levelName",Q.levelName||L[0].p);},promptOnClearFormatRef:{scriptClass:"mstrmojo.Editor",cssText:"width:350px;",title:"",showTitle:false,children:[{scriptClass:"mstrmojo.Label",cssText:"margin:5px 5px 20px;",bindings:{text:function(){return mstrmojo.desc(9564,"Clear all formatting?");}}},{scriptClass:"mstrmojo.HBox",cssText:"float:right; margin-bottom:5px;",alias:"buttonBar",slot:"buttonNode",children:[{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(1442,"Ok"),onclick:function(){var O=this.parent.parent;O.opener.onClearFormat();O.close();}},{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(221,"Cancel"),onclick:function(){var O=this.parent.parent;O.close();}}]}]},prompt2ClearFormat:function(){this.openPopup("promptOnClearFormatRef",{zIndex:this.zIndex+1});},onClearFormat:function(){var P=this.obModel;for(var O=0;O<L.length;O++){delete P.model[L[O].p];}P._setCurrentFormat();},onOK:function(){var Q=this.obModel;Q._updateModel();var R=Q.model[L[0].p];if(R){var P=R.FormattingPatterns,O=R.FormattingPatternsChart;if(O){for(pr in H.FormattingPatternsChart){if(O[pr]!=null){P["Series"+pr]=O[pr];}}delete O;}}var S=mstrmojo.hash.clone(this.model);F.saveFormatModel(Q.model,this.model,[L[0].p,L[1].p],F.DefaultFormat);this.model.dirty=!mstrmojo.hash.equals(S,this.model);},children:[{scriptClass:"mstrmojo.VBox",children:[{scriptClass:"mstrmojo.HBox",alias:"btns",children:[{scriptClass:"mstrmojo.Pulldown",alias:"which",items:L,itemIdField:"v",bindings:{value:function(){var O=C.find(this.items,"p",this.parent.parent.parent.obModel.levelName);return this.items[O!=-1?O:0][this.itemIdField];}},cssClass:" mstrmojo-FormatEditor-DropDownButton",popupZIndex:100,value:L[0].v,onvalueChange:function(){var R=this.parent.parent.parent,P=this.parent.parent.formatPanels,S=P&&P.stck,Q=this.selectedItem;if(R&&R.obModel&&S){R.obModel.set("levelName",Q?Q.p:L[0].p);var O=C.find(S.children,"pr",J.pr);if(Q==null||Q.p==L[0].p){if(O==-1){S.addChildren(J);S.onchildRenderingChange(J);}}else{S.removeChildren(S.children[O]||[]);}}}},new B.newInteractiveButton(mstrmojo.desc(5976),function(O){var P=this.parent.parent.parent;P.prompt2ClearFormat();},G,{alias:"btnClear",cssClass:E+" clear"})]},{scriptClass:"mstrmojo.TabListContainer",alias:"formatPanels",listCssClass:"mstrmojo-FormatEditor-leftPanel",bindings:{currentModel:"this.parent.parent.obModel.currentFormat"},oncurrentModelChange:function(){this.parent.btns.which.onvalueChange();var O=this.lst;if(O.selectedIndex==0){O.onchange();}else{O.set("selectedIndex",0);}},children:[{scriptClass:"mstrmojo.TabNameList",alias:"lst",slot:"top",cssClass:"mstrmojo-FormatEditor-formatList",itemMarkup:'<div class="mstrmojo-FormatEditor-bullet"><div class="mstrmojo-text">{@n}</div></div>',onchange:function(){var R=this.parent,S=this.selectedIndex;if(R.stck&&S!=null&&S!=-1){var Q=this.items[S],O=Q&&Q.target;var T=O&&O.pr;if(T){if(T.constructor===Array){for(var P=0;P<T.length;P++){O.set(T[P],R.currentModel[T[P]]);}}else{O.set("model",R.currentModel[T]);}}}}},{scriptClass:"mstrmojo.StackContainer",cssClass:"mstrmojo-FormatEditor-rightPanel-container mstrmojo-FormatEditor-rightPanel",alias:"stck",slot:"stack",children:[I,K,N,D,A,J]}]}]},{scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBar",children:[new B.newInteractiveButton(mstrmojo.desc(2397),function(){var O=this.parent.parent;O.close();O.onOK&&O.onOK();},G,{alias:"btnOk",cssClass:E}),new B.newInteractiveButton(mstrmojo.desc(2399),function(){var O=this.parent.parent;O.close();},G,{alias:"btnCancel",cssClass:E})]}]});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Editor","mstrmojo._FormatDefinition","mstrmojo.FontFormatter","mstrmojo.NumberFormatter","mstrmojo.AlignmentFormatter","mstrmojo.PaddingFormatter","mstrmojo.FillFormatter","mstrmojo.BorderFormatter");var B=mstrmojo.hash,C=mstrmojo._FormatDefinition;var A=["header_format","grid_format","child_header_format","child_grid_format"];mstrmojo.CGFormatEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.CGFormatEditor",cssClass:"mstrmojo-FormatEditor",title:mstrmojo.desc(2116),model:null,obModel:null,_initModel:function(){if(!this.obModel){var D=this;this.obModel=new mstrmojo.Model({level1Index:A[0],onlevel0IndexChange:function(E){if(E.valueWas>-1){this._updateModel(E.valueWas,this.level1Index);}this._setCurrentFormat();},onlevel1IndexChange:function(E){if(E.valueWas!=undefined){this._updateModel(this.level0Index,E.valueWas);}this._setCurrentFormat();},onmodelChange:function(){return this.model.items.length>0?this._setCurrentFormat():false;},_updateModel:function(H,F){H=(typeof H!="undefined")?H:this.level0Index;F=F||this.level1Index;var G=mstrmojo.hash.copy(this.currentFormat);var E=this.model.items[H][F]||{};C.extractModel(G,E);this.model.items[H].set(F,E);},_setCurrentFormat:function(){var E=mstrmojo.hash.copy(this.model.items[this.level0Index||0][this.level1Index]);E=C.getStandardFormat(E);this.set("currentFormat",E);}});}},init:function(D){this._initModel();this._super(D);},onmodelChange:function(){this._initModel();var E=this.obModel;E.level0Index=E.level0Index||0;E.set("model",mstrmojo.hash.clone(this.model));var D=E.model.selectedIndex;E.set("level0Index",(D==-1?0:D));},onClearFormat:function(){var D=this.obModel.currentFormat;for(var G in D){delete D[G];}for(var F=0;F<A.length;F++){var E=this.obModel;delete E.model.items[E.level0Index][A[F]];}this.obModel._setCurrentFormat();},onOK:function(){this.obModel._updateModel();var D=this.obModel.model;for(var E=0;E<D.items.length;E++){C.saveFormatModel(D.items[E],this.model.items[E],A);}},postBuildRendering:function(){if(this._super){this._super();}var D=this.obModel.model.selectedIndex;this.obModel.set("level0Index",(D==-1?0:D));},children:[{scriptClass:"mstrmojo.VBox",children:[{scriptClass:"mstrmojo.HBox",alias:"btns",children:[{scriptClass:"mstrmojo.Pulldown",itemIdField:"did",bindings:{items:function(){return this.parent.parent.parent.obModel.model.items||[];},value:function(){var D=this.parent.parent.parent.obModel.level0Index;D=(D==-1?0:D);return this.items[D][this.itemIdField];}},cssClass:" mstrmojo-FormatEditor-DropDownButton",popupZIndex:100,value:1,allowHTML:false,onvalueChange:function(){var D=this.parent.parent.parent;if(D&&D.obModel){D.obModel.set("level0Index",this.selectedIndex);}}},{scriptClass:"mstrmojo.Pulldown",alias:"targetSelector",itemIdField:"v",cssClass:" mstrmojo-FormatEditor-DropDownButton",popupZIndex:100,value:1,items:C.FormatTarget,onvalueChange:function(){var D=this.parent.parent.parent;if(D&&D.obModel){D.obModel.set("level1Index",this.selectedItem.p);}}},new mstrmojo.Button.newInteractiveButton(mstrmojo.desc(5976),function(D){var E=this.parent.parent.parent;if(E.onClearFormat){E.onClearFormat();}},"#999",{alias:"btnClear",cssClass:"mstrmojo-Editor-button mstrButton clear"})]},{scriptClass:"mstrmojo.HBox",alias:"formatPanels",cssClass:"mstrmojo-FormatEditor-box",bindings:{currentModel:"this.parent.parent.obModel.currentFormat"},children:[{scriptClass:"mstrmojo.VBox",alias:"formatList",cssClass:"mstrmojo-FormatEditor-leftPanel",children:[{scriptClass:"mstrmojo.List",alias:"feFMTList",cssClass:"mstrmojo-FormatEditor-formatList",items:C.Formats,selectedIndex:0,itemMarkup:'<div class="mstrmojo-FormatEditor-bullet"><div class="mstrmojo-text">{@n}</div></div>',height:"200px"}]},{scriptClass:"mstrmojo.Container",alias:"rightPanelContainer",cssClass:"mstrmojo-FormatEditor-rightPanel-container mstrmojo-FormatEditor-rightPanel",markupString:'<div id={@id} class="{@cssClass}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},children:[{scriptClass:"mstrmojo.FontFormatter",cssClass:"mstrmojo-FormatEditor-fontTable",cellPadding:5,bindings:{visible:"this.parent.parent.formatList.feFMTList.selectedIndex==0",model:"this.parent.parent.currentModel.FormattingFont"}},{scriptClass:"mstrmojo.NumberFormatter",bindings:{visible:"this.parent.parent.formatList.feFMTList.selectedIndex==1",model:"this.parent.parent.currentModel.FormattingNumber"}},{scriptClass:"mstrmojo.AlignmentFormatter",bindings:{visible:"this.parent.parent.formatList.feFMTList.selectedIndex==2",model:"this.parent.parent.currentModel.FormattingAlignment"}},{scriptClass:"mstrmojo.PaddingFormatter",bindings:{visible:"this.parent.parent.formatList.feFMTList.selectedIndex==2",model:"this.parent.parent.currentModel.FormattingPadding"}},{scriptClass:"mstrmojo.FillFormatter",bindings:{visible:"this.parent.parent.formatList.feFMTList.selectedIndex==3",model:"this.parent.parent.currentModel.FormattingPatterns"}},{scriptClass:"mstrmojo.BorderFormatter",bindings:{visible:"this.parent.parent.formatList.feFMTList.selectedIndex==3",model:"this.parent.parent.currentModel.FormattingBorder"}}]}]}]},{scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBar",slot:"buttonNode",children:[new mstrmojo.Button.newInteractiveButton(mstrmojo.desc(2397),function(){var D=this.parent.parent;D.close();if(D.onOK){D.onOK();}},"#999",{alias:"btnOk",cssClass:"mstrmojo-Editor-button mstrButton"}),new mstrmojo.Button.newInteractiveButton(mstrmojo.desc(2399),function(){var D=this.parent.parent;D.close();},"#999",{alias:"btnCancel",cssClass:"mstrmojo-Editor-button mstrButton"})]}]});})();(function(){mstrmojo.requiresCls("mstrmojo.ui.menus.ToolbarConfig");mstrmojo.vi.ui.toolbars._HasToolbar=mstrmojo.provide("mstrmojo.vi.ui.toolbars._HasToolbar",{_mixinName:"mstrmojo.vi.ui.toolbars._HasToolbar",preBuildRendering:function A(){this.generateToolbar();return this._super();},generateToolbar:function B(){this.passToolbarCfg(this.updateToolbar(new mstrmojo.ui.menus.ToolbarConfig()));},updateToolbar:function D(E){if(this._super){E=this._super(E);}return E;},passToolbarCfg:function C(E){var F=this.toolbar.toolbarCfg;if(F){F.destroy();}this.toolbar.set("toolbarCfg",E);}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.dom","mstrmojo.expr","mstrmojo.range","mstrmojo.Widget","mstrmojo.WidgetList","mstrmojo.WidgetListMapper","mstrmojo._HasSuggestion","mstrmojo.ME.MetricToken","mstrmojo.ME.MetricDataService","mstrmojo.ui.ScrollableSuggestionList","mstrmojo.mstr.EnumDSSXMLObjectTypes");var R=mstrmojo.dom,T=mstrmojo.css,AH=mstrmojo.Enum_Keys,H=mstrmojo.range,k=H.EDGE,z=mstrmojo.ME.MetricToken.isDelimiter,Q=mstrmojo.expr,r=mstrmojo.array,K=mstrmojo.hash;var M=R.isIE||R.isIEW3C;function AP(E){return E.ctrlKey||R.isMetaKey(window,E)||(E.charCode||E.keyCode)===AH.CTRL;}mstrmojo.ME.SpanListMapper=mstrmojo.provide("mstrmojo.ME.SpanListMapper",mstrmojo.mixin({itemWrapperPrefix:function(E){return'<span class="'+this.getWrapperCss(E)+'">';},itemWrapperPrefill:"&nbsp;",itemWrapperSuffix:"</span>",createWrapperNode:function S(E){var AQ=E.ownerDocument,AR=AQ.createElement("span");return AR;},_iw2idx:function U(AQ,AT,AS){var AR=this.wrapperNodes(AT),E=mstrmojo.array.indexOf(AR,AS);return E===-1?AR.length:E;},itemOffsetLeft:function h(AQ,AU,E,AS){if(!AS){var AR=this.wrapperNodes(AU);AS=AR&&AR[E];if(!AS){return 0;}}var AT=AU.firstChild;if(!AT||(AT===AS)){return 0;}return AS.offsetLeft-AT.offsetLeft;},whereDrop:function AO(AY,E,AS,AX,AQ){var AU=this._nd2iw(AY,E,AS),AZ,AW,AT,AV,AR;if(AU){AW=this._iw2idx(AY,E,AU);AZ=AW;AT=this.itemOffsetLeft(AY,E,null,AU);AV=AU.offsetTop;AR=AU.offsetWidth;if(AX.x>AQ.left+AT+AR/2){AZ++;AT+=AR;}}else{return AY.dropCuePos;}return{left:AT,top:AV,idx:AZ,idxActual:AW};}},mstrmojo.hash.copy(mstrmojo.WidgetListMapper)));mstrmojo.ME.TokenInputBox=mstrmojo.declare(mstrmojo.WidgetList,[mstrmojo._HasSuggestion],{scriptClass:"mstrmojo.ME.TokenInputBox",containerResizable:false,dropZone:true,suggestionPopupCssClss:"mstrmojo-ME-TokenInputBox-suggest",allowDrop:function G(E){var AQ=E.src.data;return !!AQ;},createToken:function A(E){return{v:mstrmojo.ME.MetricToken.brackets(E.n),oi:K.copyProps(["did","n","t"],E),isNew:true};},ondrop:function(AQ){AQ.src.data=this.createToken(AQ.src.data.item);if(this.prepareDropItem){this.prepareDropItem(AQ);}var E=this.insertTokens([AQ.src.data]);this.set("dropCuePos",null);mstrmojo.css.removeClass(this.domNode,"unselectable");return E;},ondragenter:function I(E){this.dragdata=E.src.data;this._super(E);this.set("dropCuePos",{left:0,top:0});mstrmojo.css.addClass(this.domNode,"unselectable");},ondragleave:function V(){this.set("dropCuePos",null);mstrmojo.css.removeClass(this.domNode,"unselectable");},ondropCuePosChange:function X(AQ){var AR=AQ.value,E=this.dragdata;if(E&&E.setAvatarClass){if(AR){E.setAvatarClass("add");}else{E.setInvalidAvatarClass();}}},makeObservable:true,showDesc:true,showPath:true,showFunctionSyntaxAsPath:true,blockCount:mstrmojo.ME.MetricDataService.blockCount,suggestCount:mstrmojo.ME.MetricDataService.suggestCount,markupString:'<div id={@id} class="mstrmojo-TokenInputBox {@cssClass}" style="{@cssText}"><div class="mstrmojo-TokenInputBox-edit" contenteditable="true" tabindex="1" spellcheck="false"ondragstart = "return false;" oncontextmenu = "return false;" onkeydown = "return mstrmojo.all.{@id}.handlekeydown(event);" onkeypress = "return mstrmojo.all.{@id}.handlekeypress(event);" onkeyup = "return mstrmojo.all.{@id}.handlekeyup(event);" onmouseup = "return mstrmojo.all.{@id}.handlemouseup(event);" onpaste = "return mstrmojo.all.{@id}.handlepasteDirect(event);" onblur = "return mstrmojo.all.{@id}.handleblur(event);" >{@itemsHtml}</div><textarea class = "mstrmojo-TokenInputBox-clipboard" onkeyup = "return mstrmojo.all.{@id}.handlepaste(event);"></textarea><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div>',markupSlots:{editNode:function(){return this.domNode.firstChild;},itemsContainerNode:function(){return this.domNode.firstChild;},clipboardNode:function(){return this.domNode.childNodes[1];},scrollboxNode:function(){return this.domNode.firstChild;},dropCueNode:function(){return this.domNode.lastChild;}},suggestionListClass:"mstrmojo.ui.ScrollableSuggestionList",items:null,itemFunction:function J(AR,E,AQ){return new mstrmojo.ME.MetricToken({data:AR,parent:AQ});},listMapper:mstrmojo.ME.SpanListMapper,_set_items:function W(AQ,E){if(this._super){this._super(AQ,E);}if(this.oi){this.oi.tks.items=this.items;}if(!this.tokensCacheInitilized){this.pretokensModify();this.tokensCacheInitilized=true;}},tokensCache:[],tokensCachePointer:0,isDelimiter:z,postBuildRendering:function d(){if(this._super){this._super();}this._eros=false;if(R.isFF){document.body.spellCheck=false;}mstrmojo.dom.attachEvent(this.editNode,"compositionstart",function(){this.saveStateForIME();this.composing=true;this.toggleIMEStatusBar(true);}.bind(this));mstrmojo.dom.attachEvent(this.editNode,"compositionupdate",function AQ(AR){if(R.isIEW3C){this.lastImeChar=AR.data||(M&&this.lastImeChar);}else{this.lastImeChar=AR.data||this.lastImeChar;}}.bind(this));mstrmojo.dom.attachEvent(this.editNode,"compositionend",function E(AT){this.composing=false;if(R.isIE9||R.isIE10){var AS=H.getRangeInfo();this.imeBuffer=AS.startContainer.data.slice(this.prev_rInfo.startOffset,AS.startOffset).split("");}else{if(R.isIEW3C){var AS=H.getRangeInfo();this.imeBuffer=AS.startContainer.data.slice((this.prev_rInfo.startOffset-1)<0?0:this.prev_rInfo.startOffset,AS.startOffset).split("");}else{if(R.isEdge){var AR=AT.data||"";this.imeBuffer=(this.imeBuffer||[]).concat(AR.split(""));}else{var AR=AT.data||this.lastImeChar||"";this.imeBuffer=(this.imeBuffer||[]).concat(AR.split(""));}}}}.bind(this));},fnContextMenu:function N(E){if(E){E.cancelBubble=true;E.returnValue=false;}return false;},saveStateForIME:function g(){if(!this.doubleByte){this.doubleByte=true;this.prev_rInfo=H.getRangeInfo();this.prev_items=this.items;}},handleblur:function L(){if(this.doubleByte){this.doubleByte=false;this.widgetHandleImeInput(this.prev_rInfo);this.prev_items=this.items;}},processDeleteKeyDown:function D(AQ){if(!this.doubleByte){try{this.widgetHandleDelete(AQ);this.startTokenSuggestion();this.raiseChangeEvent({type:"delete"});}catch(E){}return true;}},processBackspaceKeyDown:function AN(AQ){if(!this.doubleByte){try{this.widgetHandleBackspace(AQ);this.raiseChangeEvent({type:"backspace"});this.startTokenSuggestion();this.editNode.focus();}catch(E){}return true;}},handlekeydown:function a(AS){AS=AS||window.event;var E=AS.keyCode||AS.charCode,AQ=false,AR=H.getRangeInfo();if((E===AH.LEFT_ARROW||E===AH.RIGHT_ARROW||E===AH.BACKSPACE)&&this.doubleByte){if(this.composing){return ;}this.doubleByte=false;if(E===AH.BACKSPACE){this.imeBuffer.pop();}this.widgetHandleImeInput(this.prev_rInfo);mstrmojo.dom.stopPropogation(window,AS);mstrmojo.dom.preventDefault(window,AS);return false;}switch(E){case AH.DELETE:AQ=this.processDeleteKeyDown(AR);break;case AH.BACKSPACE:AQ=this.processBackspaceKeyDown(AR);break;case AH.ENTER:if(this.breakOnEnterKeyDown&&this.breakOnEnterKeyDown()){break;}case AH.TAB:this._startDebug=true;if(this.suggestionShown){this.handleSuggestionItemSelect(this.getSelected());}else{this.startTokenSuggestion();}AQ=true;break;case AH.ESCAPE:this.endTokenSuggestion();AQ=true;break;case 86:if(AP(AS)){this.handlePasteTriggeredDeletion();AQ=false;}break;case 89:if(AP(AS)){this.widgetHandleUndoRedo("redo");AQ=true;}break;case 90:if(AP(AS)){this.widgetHandleUndoRedo("undo");AQ=true;}break;case 229:this.saveStateForIME();break;default:}if(AQ){R.stopPropogation(window,AS);R.preventDefault(window,AS);return false;}return true;},handlePasteTriggeredDeletion:function F(){this.set("_saveRangeInfo",H.getRangeInfo());if(!this._saveRangeInfo.collapsed){this.widgetHandleDelete(this._saveRangeInfo);this.set("_saveRangeInfo",H.getRangeInfo());}this.clipboardNode.focus();},getCharacter:function AJ(AQ){var E=(R.isIE&&!R.isIE9)?AQ.keyCode:AQ.charCode;return(E>0)?String.fromCharCode(E):null;},handleCharacter:function AA(AS){var AT=this.getCharacter(AS),AQ=false;if(AT&&!((AT==="c"||AT==="a")&&AP(AS))){try{this.widgetHandleInput(H.getRangeInfo(),AT);this.raiseChangeEvent({type:"input",character:AT});if(!this.isDelimiter(AT)){if(this.useKeyDelay){var AR=this;window.clearTimeout(this.tmr);this.tmr=window.setTimeout(function(){AR.startTokenSuggestion();},mstrmojo.ME.MetricDataService.suggestDelay);}else{this.startTokenSuggestion();}}else{this.endTokenSuggestion(true);}}catch(E){}AQ=true;}return AQ;},handlekeypress:function B(E){E=E||window.event;if(this.doubleByte){this.toggleIMEStatusBar(false);this.doubleByte=false;this.widgetHandleImeInput(this.prev_rInfo);window.setTimeout(function(){this.handleCharacter(E);}.bind(this),10);return false;}if(this.handleCharacter(E)){R.stopPropogation(window,E);R.preventDefault(window,E);return false;}return true;},handlekeyup:function f(AR){var E=AR.keyCode||AR.charCode,AQ;if(E===AH.LEFT_ARROW||E===AH.RIGHT_ARROW){AQ=this.findObjectToken();if(AQ&&AQ===this._saveActiveToken){this.startTokenSuggestion(AQ);}else{this.endTokenSuggestion();}}else{if(E===AH.UP_ARROW){this.preHighlight();}else{if(E===AH.DOWN_ARROW){this.nextHighlight();}else{if(E===AH.BACKSPACE&&this.doubleByte){if(E===AH.BACKSPACE&&!this.composing&&!R.isIE9){this.doubleByte=false;this.imeBuffer.pop();this.widgetHandleImeInput(this.prev_rInfo);this.prev_items=this.items;}}}}}this.set("_saveRangeInfo",H.getRangeInfo());},handlemouseup:function p(AS){if(this.dropCuePos){return false;}var AQ=this.findObjectToken();if(AQ&&AQ===this._saveActiveToken){this.startTokenSuggestion(AQ);}else{this.endTokenSuggestion();}var AR=H.getRangeInfo();if(this.doubleByte){this.doubleByte=false;var E=this.widgetHandleImeInput(this.prev_rInfo);this.prev_items=this.items;AQ=R.findWidget(AR.startContainer);if(AQ){this._delaySetTextCaretPos(AQ.domNode,AR.startOffset);}else{this._delaySetTextCaretPos(E.domNode,AR.startOffset-1);}this.prev_rInfo=AR;}this.set("_saveRangeInfo",AR);},handlepasteDirect:function AE(E){this.clipboardNode.value=E.clipboardData.getData("Text");this.handlepaste(E);R.stopPropogation(window,E);R.preventDefault(window,E);this.handlePasteTriggeredDeletion();return false;},handlepaste:function n(AU){var AQ=this.clipboardNode.value;this.clipboardNode.value="";var AT=[],E=AQ&&AQ.length,AS,AR="",AV;if(E>0){for(AS=0;AS<E;AS++){AV=AQ.charAt(AS);if(this.isDelimiter(AV)){if(!mstrmojo.string.isEmpty(AR)){AT.push({v:AR,isNew:true});AR="";}AT.push({v:AV,isDelimiter:true,isNew:true});}else{AR=AR+AV;}}if(!mstrmojo.string.isEmpty(AR)){AT.push({v:AR,isNew:true});AR="";}this.insertTokens(AT);}},raiseChangeEvent:function(E){E.name="tokensModify";this.raiseEvent(E);},getTokensAsString:function AM(){var AQ=[],AS=this.items,AR,E;for(AR=0,E=AS.length;AR<E;AR++){AQ[AR]=AS[AR].v;}return AQ.join("| ");},replaceErrorToken:function q(AS){var AR=this.items||[],AT=mstrmojo.array.find(AR,"sta",-1),AQ,AU=function(Aa,AY,Ab){var AX=(Aa&&Aa.items)||[],AW=r.find(AX,"did",AY),AV,AZ;if(AW>-1){AV=AX[AW].fs;AZ=r.filterOne(AV,function(Ac){return Ac.fnm&&Ac.fnm.toUpperCase()===Ab.toUpperCase();});}return AZ;},E=function(Aa,AY,AZ){var AV={v:AY.n,oi:AY,isNew:true},AX=Aa.v&&Aa.v.split("@"),AW;if(AX&&AX.length>1){AW=AU(AZ,AY.did,AX[1]);if(AW){AV.exv=AW.fmdid||AW.fid;AV.extp=8;AV.v=mstrmojo.ME.MetricToken.brackets(AY.n)+"@"+AW.fnm;}}return AV;};if(AT>-1){AQ=E(AR[AT],AS,this.candidates);this.remove(AT);this.add([AQ],AT);}},widgetHandleDelete:function e(AT){if(AT.collapsed){var AS,AR,E,AU=AT.startOffset,AQ=this.ctxtBuilder.itemWidgets;if(!R.contains(this.editNode,AT.startContainer,false,document.body)){H.collapseOnNode(this.editNode,false);return ;}AS=H.getEdgeInfo(AT.startContainer,AT.startOffset);AR=R.findWidget(AT.startContainer);E=this.itemIndex(AR.data);if(AS===k.EDGE_END){E++;AR=AQ[E];AU=0;}if(!AR){H.collapseOnNode(this.editNode,false);return ;}if(AR.length()===1){this.remove(E);AR=AQ[E];if(AR){H.collapseOnNode(AR.domNode,true);}else{H.collapseOnNode(this.editNode,false);}this.checkMergeTwoTokens(E-1,E);}else{AR.spliceContent(AU,1);H.collapseOnTextNode(AR.domNode,AU);}}else{this.widgetDeleteTokens(AT);}},widgetHandleBackspace:function y(AT){if(AT.collapsed){var AS,AR,E,AU=AT.startOffset,AQ=this.ctxtBuilder.itemWidgets;if(!R.contains(this.editNode,AT.startContainer,false,document.body)){if(AT.startOffset>0&&R.isFF){AR=AQ[this.items.length-1];H.collapseOnNode(AR.domNode,false);AT=H.getRangeInfo();AS=H.getEdgeInfo(AT.startContainer,AT.startOffset);}else{H.collapseOnNode(this.editNode,true);return ;}}AS=H.getEdgeInfo(AT.startContainer,AT.startOffset);AR=R.findWidget(AT.startContainer);E=this.itemIndex(AR.data);if(AS===k.EDGE_BEGIN){E--;AR=AQ[E];AU=AR.length();}if(!AR){H.collapseOnNode(this.editNode,true);return ;}if(AR.length()===1){this.remove(E);AR=AQ[E-1];if(AR){H.collapseOnNode(AR.domNode,false);this.checkMergeTwoTokens(E-1,E);AR=AQ[E-1];}else{H.collapseOnNode(this.editNode,true);}}else{AR.spliceContent(AU-1,1);H.collapseOnTextNode(AR.domNode,AU-1);}}else{this.widgetDeleteTokens(AT);}},widgetHandleInput:function AB(AU,AV){if(!AU.collapsed){this.widgetDeleteTokens(AU);AU=H.getRangeInfo();}var AR,AW,AX,AY,E,AQ,AS=this.ctxtBuilder.itemWidgets;if(!R.contains(this.editNode,AU.startContainer,false,document.body)){this.add([{v:AV,isDelimiter:this.isDelimiter(AV),isNew:true}],0);AW=AS[0];H.collapseOnTextNode(AW.domNode,1);return ;}AR=H.getEdgeInfo(AU.startContainer,AU.startOffset);AW=R.findWidget(AU.startContainer);AX=this.itemIndex(AW.data);if(this.isDelimiter(AV)){AY={v:AV,isDelimiter:true,isNew:true};if(AR===k.EDGE_MIDDLE){var AT=AW.split2Tokens(AU.startOffset);this.remove(AX);this.add([AT[0],AY,AT[1]],AX);AX=AX+1;}else{AX=(AR===k.EDGE_BEGIN)?AX:AX+1;this.add([AY],AX);}AW=AS[AX];H.collapseOnTextNode(AW.domNode,(AW.domNode.innerText||AW.domNode.textContent).length);}else{AQ=AU.startOffset;if(AW.isDelimiter()){E=AS[(AR===k.EDGE_BEGIN)?AX-1:AX+1];if(E&&!E.isDelimiter()){AW=E;AQ=(AR===k.EDGE_BEGIN)?AW.length():0;}}if(!AW.isDelimiter()){AW.spliceContent(AQ,0,AV);H.collapseOnTextNode(AW.domNode,AQ+1);}else{this.add([{v:AV,isNew:true}],(AR===k.EDGE_BEGIN)?AX:AX+1);AW=AS[(AR===k.EDGE_BEGIN)?AX:AX+1];H.collapseOnNode(AW.domNode,false);}}},widgetHandleImeInput:function AB(AT,AU){AU=AU||this.imeBuffer.join("");this.imeBuffer=[];this.lastImeChar=null;if(!AU){return ;}if(!AT.collapsed){this.widgetDeleteTokens(AT);AT=H.getRangeInfo();}var AR,AV,AW,AX,E,AQ,AS=this.ctxtBuilder.itemWidgets;if(!R.contains(this.editNode,AT.startContainer,false,document.body)||this.items.length==0){this.clearTokens();this.add([{v:AU,isDelimiter:this.isDelimiter(AU),isNew:true}],0);AS=this.ctxtBuilder.itemWidgets;AV=AS[0];H.collapseOnTextNode(AV.domNode,1);this._delaySetCaretPos(AV.domNode,false);return ;}AR=H.getEdgeInfo(AT.startContainer,AT.startOffset);AV=R.findWidget(AT.startContainer);AW=this.itemIndex(AV.data);AQ=AT.startOffset;if(AV.isDelimiter()){this.clearTokens();this.add(this.prev_items);AS=this.ctxtBuilder.itemWidgets;E=AS[(AR===k.EDGE_BEGIN)?AW-1:AW+1];if(E&&!E.isDelimiter()){AV=E;AQ=(AR===k.EDGE_BEGIN)?AV.length():0;}}if(!AV.isDelimiter()){AV.spliceContent(AQ,0,AU);this._delaySetTextCaretPos(AV.domNode,AQ+AU.length);}else{this.add([{v:AU,isNew:true}],(AR===k.EDGE_BEGIN)?AW:AW+1);AV=AS[(AR===k.EDGE_BEGIN)?AW:AW+1];this._delaySetCaretPos(AV.domNode,false);}this.startTokenSuggestion();return AV;},findObjectToken:function C(){var AT=H.getRangeInfo(),AR=R.findWidget(AT.startContainer);if(!R.contains(this.editNode,AT.startContainer,false,document.body)){return null;}if(!AR||AR===this||!AR.isDelimiter){return null;}if(AR&&!AR.isDelimiter()){return AR;}var AS=H.getEdgeInfo(AT.startContainer,AT.startOffset),AQ=this.ctxtBuilder.itemWidgets,E=this.itemIndex(AR.data);AR=AQ[(AS===k.EDGE_BEGIN)?E-1:E+1];if(AR&&!AR.isDelimiter()){return AR;}return null;},checkMergeTwoTokens:function w(AT,AR){var AS=this.ctxtBuilder.itemWidgets,AQ=AS[AT],E=AS[AR];if((AQ&&!AQ.isDelimiter())&&(E&&!E.isDelimiter())){this.remove([AT,AR]);this.add([AQ.mergeTo(E)],AT);H.collapseOnTextNode(AS[AT].domNode,AQ.length());}},insertTokens:function AD(AU){var AX=0,AW=this.editNode;var AR=this._saveRangeInfo||H.getRangeInfo();if(!AR||!R.contains(AW,AR.startContainer,false,document.body)){this.add(AU);AX=this.items.length-1;if(AX===0){this._delaySetTextCaretPos(AW,(AW.innerText||AW.textContent).length);}else{var E=this.ctxtBuilder.itemWidgets[AX].domNode;this._delaySetTextCaretPos(E,(E.innerText||E.textContent).length);}}else{var AQ=H.getEdgeInfo(AR.startContainer,AR.startOffset),AV=R.findWidget(AR.startContainer);AX=this.itemIndex(AV.data);if(AQ===k.EDGE_MIDDLE){var AS=AV.split2Tokens(AR.startOffset);this.remove(AX);AU.unshift(AS[0]);AU.push(AS[1]);this.add(AU,AX);}else{AX=(AQ===k.EDGE_BEGIN?AX:AX+1);this.add(AU,AX);}AX=AX+AU.length-1;AV=this.ctxtBuilder.itemWidgets[AX];this._delaySetCaretPos(AV.domNode,false);}this.raiseChangeEvent({type:"insert"});var AT=this;window.setTimeout(function(){AT.set("_saveRangeInfo",H.getRangeInfo());},50);return AX;},insertParenthesisTokens:function AG(AQ){var E=this;window.setTimeout(function(){var AR=E.insertTokens([{v:"(",isDelimiter:true,isNew:true},{v:")",isDelimiter:true,isNew:true}]);E._delaySetTextCaretPos(E.itemsContainerNode.childNodes[AR-1],1);},AQ||50);},clearTokens:function v(E){this.set("items",E||[]);this.set("_saveRangeInfo",null);this._delaySetCaretPos(this.editNode,false);},focus:function AC(){var AQ=this.ctxtBuilder.itemWidgets,E=AQ.length;this._delaySetCaretPos(E>0?AQ[E-1].domNode:this.editNode,false);},startTokenSuggestion:function AI(E){this.endTokenSuggestion();if(!E){E=this.findObjectToken();}if(E&&!E.isDelimiter()){E.set("active",true);this._saveActiveToken=E;this.showSuggestion(this.getSearchPattern());}if(!E||this.getSearchPattern().length===0){this.hideSuggestion();}},browseItemVisible:true,folderLinksContextId:25,browsableTypes:[Q.TP.FOLDER,Q.TP.FACT,Q.TP.ATTR,Q.TP.FUNCTION,Q.TP.FILTER,Q.STP.PROMPT_OBJECTS,Q.TP.ATTR,Q.TP.DIM,Q.TP.METRIC,Q.TP.ROLE].join(","),getSearchPattern:function Z(){var AQ=this._saveActiveToken,AS=AQ&&AQ.data.v,E=AS&&AS.length;if(E>2){if(AS.charAt(0)==="["){AS=AS.substring(1);}if(AS.charAt(AS.length-1)==="]"){AS=AS.substring(0,AS.length-1);}}if(AQ&&AQ.data.ift){var AR=AQ.data.v,AT=AR&&AR.indexOf("@");if(AT>=0){AS=AR.substring(AT);}}return AS||"";},getSuggestionPos:function j(){var E=this._saveActiveToken,AQ=null,AS,AR;if(E){AS=E.data&&E.data.ift;AR=mstrmojo.dom.position(E.domNode,true);AQ={left:Math.round(AR.x+(AS?AR.w:0))+"px",top:Math.round(AR.y+AR.h)+"px",zIndex:100};}return AQ;},item2textCss:function O(AQ){var E=(this._super&&this._super(AQ))||{4:"m",11:"fx",12:"a",13:"fc",43:"tr",21:"afm","-99":"br"}[AQ.t]||"";E+=AQ.da?" da":"";E+=(AQ.dm||AQ.um)?" dm":"";E+=AQ.de?" de":"";E+=AQ.fs&&AQ.fs.length&&AQ.fs.some(function(AR){return AR.fgr>0;})?" g":"";return E;},onBrowserOpen:function x(){this.editNode.blur();},onSuggestionItemSelect:function AF(AQ){var E=this._saveActiveToken;this.endTokenSuggestion();if(E){if(E.data.ift&&AQ.t===21){E.setFormInfo(AQ);}else{E.setItemInfo(AQ);if(AQ.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Function){this.insertParenthesisTokens();}}this._delaySetCaretPos(E.domNode,false);}this.closePopup();},_delaySetCaretPos:function AK(E,AR){var AQ=this.editNode,AS=this,AT=function(){AQ.focus();AQ.focus();H.collapseOnNode(E,AR);AS.set("_saveRangeInfo",H.getRangeInfo());};window.setTimeout(AT,0);},_delaySetTextCaretPos:function AK(E,AT){var AQ=this.editNode,AR=this,AS=function(){AQ.focus();AQ.focus();H.collapseOnTextNode(E,AT);AR.set("_saveRangeInfo",H.getRangeInfo());};window.setTimeout(AS,0);},getCandidatesThroughTaskCall:function c(AQ,E){AQ.objectType="11,12,13,43,4";AQ.rootFolderType=39;AQ.blockCount=this.blockCount;mstrmojo.ME.MetricDataService.getMetricComponents(AQ,E);},filterCandidates:function u(AT,AS,E){var AQ=this._saveActiveToken,AU=AQ&&(AQ.data.oi||AQ.data.at),AR;if(AU&&AQ.data.ift){E=E||this.suggestCount;AS=mstrmojo.string.regEscape(AS);AR=r.filter(AT,function(AV){return AV.t===21&&AV.attid===AU.did&&(new RegExp("^"+AS,"i")).test("@"+AV.n);},{max:E});}else{AR=r.filter(AT,function(AV){return AV.t!==21;});AR=this._super(AR,AS,E);}return AR;},endTokenSuggestion:function AL(AQ){var E=this._saveActiveToken;if(E){if(AQ){this.hideSuggestion();}E.set("active",false);this._saveActiveToken=null;}},widgetDeleteTokens:function o(AY){var AQ=AY.startOffset,E=AY.endOffset,Ab=R.findWidget(AY.startContainer),AZ=R.findWidget(AY.endContainer),AU=this.itemIndex(Ab.data),AS=this.itemIndex(AZ.data),AV=[],AW=H.getEdgeInfo(AY.startContainer,AQ),Aa=H.getEdgeInfo(AY.endContainer,E),AX=(AW===k.EDGE_BEGIN?AU:AU+1),AR=(Aa===k.EDGE_END?AS:AS-1),AT;if(Ab===AZ){if((AW===k.EDGE_BEGIN)&&(Aa===k.EDGE_END)){this.remove(AU);AZ=this.ctxtBuilder.itemWidgets[AU===0?AU:AU-1];if(AZ){H.collapseOnNode(AZ.domNode,AU===0);}else{H.collapseOnNode(this.editNode,true);}}else{Ab.spliceContent(AQ,E-AQ);H.collapseOnTextNode(AZ.domNode,AQ);}}else{for(AT=AX;AT<=AR;AT++){AV.push(AT);}this.remove(AV);if(AW===k.EDGE_MIDDLE){Ab.spliceContent(AQ);}if(Aa===k.EDGE_MIDDLE){AZ.spliceContent(0,E);}if(AW===k.EDGE_BEGIN){Ab=this.ctxtBuilder.itemWidgets[AU===0?AU:AU-1];}if(Ab){H.collapseOnNode(Ab.domNode,AU===0);}else{H.collapseOnNode(this.editNode,false);}AU=(AW===k.EDGE_BEGIN)?AU-1:AU;this.checkMergeTwoTokens(AU,AU+1);}this.editNode.focus();},oncandidatesChange:function t(){var AQ=this.candidates,E=(AQ&&AQ.items)||[];if(!this.noCache&&AQ&&AQ.isComplete){this.suggestCount=this.REQUEST_THRESHOLD=E.length;}else{this.suggestCount=mstrmojo.ME.MetricDataService.suggestCount;this.REQUEST_THRESHOLD=20;}},nudge:function(E){var AQ=this.getSuggestionPos();if(AQ){E.set("left",AQ.left);E.set("top",AQ.top);}},pretokensModify:function P(){this.tokensCache=this.tokensCache.slice(0,this.tokensCachePointer);var E=this.findObjectToken();this.tokensCache.push({items:K.clone(this.items),rInfo:H.getRangeInfo(),idx:E!==null?this.itemIndex(E.data):-1});this.tokensCachePointer=this.tokensCache.length;},widgetHandleUndoRedo:function m(AR){var AS,E,AQ=function(AU){if(!AU){return ;}AU=AU||{};this.set("items",K.clone(AU.items));var AX=this.ctxtBuilder.itemWidgets,AT=AX[AU.idx],AW=AT&&AT.domNode||this.editNode,AV=AU.rInfo;this._delaySetTextCaretPos(AW,AV&&AV.startOffset||0);};switch(AR){case"undo":AS=--this.tokensCachePointer;if(AS>-1){E=this.tokensCache[AS-1];AQ.call(this,E);}else{this.tokensCachePointer=1;}break;case"redo":AS=this.tokensCachePointer++;if(AS>-1&&AS<this.tokensCache.length){E=this.tokensCache[AS];AQ.call(this,E);}else{this.tokensCachePointer=Math.min(Math.max(this.tokensCachePointer,1),this.tokensCache.length);}break;}},resetTokensCache:function Y(){this.tokensCache=[];this.tokensCachePointer=-1;this.tokensCacheInitilized=false;},toggleIMEStatusBar:function b(E){if((R.isIE9||R.isIE10||R.isIEW3C||R.isEdge)&&this.detectKoreanLocale()){if(E){if(!this.elStatus||!this.elStatus.offsetParent){var AQ=this.elStatus=document.createElement("div");AQ.innerText=mstrmojo.desc(15003,"Please enter space key to finish IME typing");AQ.className="mstrmojo-TokenInputBox-status";this.domNode.appendChild(AQ);}}else{this.domNode.removeChild(this.elStatus);delete this.elStatus;}}},detectKoreanLocale:function l(){var E=window.navigator;if(window.mstrConfig&&(window.mstrConfig.browserLang||[]).indexOf("ko")>=0){return true;}else{if(E.userLanguage=="ko"||E.userLanguage=="ko-KR"||E.browserLanguage=="ko"||E.browserLanguage=="ko-KR"){return true;}}return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.vi._MonitorsAppState","mstrmojo.vi.ui.tabs.Tab","mstrmojo.dom","mstrmojo.css");var N=mstrmojo.dom,a=mstrmojo.array,B=mstrmojo.css,g="animate",h="90px",n="70px",F="52px",v=200,Q=700,A=750;function D(){var AD=window.Modernizr,AC="transition";if(AD&&AD.testProp(AC)){return N.transEndEvtNames[AD.prefixed(AC)];}return null;}function x(AC){return function(){this.menuNode.style.display=AC?"block":"none";};}function P(AC){return Math.min(AC.offsetWidth-AC.firstChild.offsetWidth,0);}function w(AC){return AC.isAlignRight?"right":"left";}function AA(AC,AD){return parseInt(AC.style[w(AD)],10)||0;}function L(){var AG=this.tabContainerNode,AF=false,AE=false,AH=false,AI=this.leftBtnNode,AC=this.rightBtnNode,AD=this.isValidMode();window.setTimeout(function(){if(P(AG)<0){var AK=N.position(AG),AJ=N.position(AG.firstChild);AF=(AJ.x<AK.x);AE=(AJ.x+AJ.w>AK.x+AK.w+1);}AH=AF||AE;B.toggleClass(this.btnBarNode,"highlightBar",AH);AI.style.display=AC.style.display=AH?"block":"none";AI.disabled=!AF;AC.disabled=!AE;B.toggleClass(AI,"disable",!AF);B.toggleClass(AC,"disable",!AE);if(this.domNode){this.addBtnNode.style.display=this.tabStripMenuNode.style.display=AD?"block":"none";this.bufferNode.style.display=AD?"none":"block";this.floaterNode.style.display=this.hasFloater&&AF?"block":"none";}this.widgetResized();}.bind(this),v);}function T(AC,AD){AC=(AC||[]);if(!AC.filter){return a.filter(AC,AD);}return AC.filter(AD);}function W(AC,AD){AC=(AC||[]);if(!AC.map){return a.map(AC,AD);}return AC.map(AD);}function r(AS,AE,AF){var AQ=this.tabContainerNode,AJ=this.domNode;if(this.isStatic||!AQ||!AJ||AJ.style.display==="none"){return ;}var AL=AQ.firstChild,AR=P(AQ),AI=AA(AL,this),AC=Math.max(AI,AR),AP=T(this.children,function(AT){return AT.isSelected;})[0],AN=AF&&AF.domNode||AP&&AP.domNode;if(AS&&AN){if(AR<0){var AK=N.position(AN),AG=N.position(AQ),AM=Math.floor(AK.x-AG.x),AO=Math.floor(AK.x+AK.w-(AG.x+AG.w));if(AF){var AD=Math.ceil(AN.offsetWidth);AM=AM===0?Math.max(AR,-AD):AM;AO=AO===0?Math.min(-AR,AD):AO;}var AH=AM<0?AM:(AO>0?AO:0);AC=this.isAlignRight?AC+AH:AC-AH;}}if(AC!==AI){if(AE){this.setAnimation(AL);}AL.style[w(this)]=Math.max(AR,Math.min(AC,0))+"px";}L.call(this);}function C(AC){return AC.hasOwnProperty("index");}function J(){var AD=this.tabContainerNode,AE=N.position(AD),AC=this.isAlignRight;a.forEach(this.children||[],function(AG){var AM=AG.domNode,AN=N.position(AM),AJ=Math.floor(AN.x-AE.x),AK=Math.floor(AN.x+AN.w-(AE.x+AE.w)),AF=AG.isSelected,AL=Math.ceil(AM.offsetWidth),AH=0;AG.isCutoff=AG.isHidden=AG.isLeftMost=AG.isRightMost=false;AG.leftEdgeHiddenWidth=AG.rightEdgeHiddenWidth=0;if(AJ<0){var AI=Math.abs(AJ);AH=AL-AI;AG.isLeftMost=AH>=0;AG.isCutoff=AG.isLeftMost&&AI>0&&AH>0;AG.isHidden=AH<=0;AG.leftEdgeHiddenWidth=AI;}else{if(AK>0){AH=AL-AK;AG.isRightMost=AH>=0;AG.isCutoff=AG.isRightMost&&AK>0&&AH>0;AG.isHidden=AH<=0;AG.rightEdgeHiddenWidth=AK;}}});}function Y(){var AC=this.children,AD=0;(AC||[]).every(function(AF,AE){if(!C(AF)){return false;}AD++;AF.index=AE;return true;});(AC||[]).every(function(AE){if(!C(AE)){return false;}AE.total=AD;return true;});}function f(AI,AE){var AH=AI.ENUM_CORNERS,AJ=[AH.TOP_LEFT,AH.BOTTOM_LEFT],AD=this.parent;if(AD.position!=="bottom"){AJ.reverse();}AI.setAlignment(AJ[0],AJ[1]);var AC=N.position(AD.domNode),AG=AD.menuNode;var AF=AG.style;AF.top=(AE.y-AC.y)+"px";AF.left=(AE.x-AC.x)+"px";AI.addPopupHandlers(AD.id,x(true),x(false));AI.hostId=AD.id;AI.hostElement=AG;AI.isHostedWithin=false;AD.openPopup(AI.newInstance());}function j(AC){AC.raiseEvent({name:"TabsChange"});}mstrmojo.vi.ui.tabs.TabStrip=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo.ui.menus._HasMenuPopup,mstrmojo.vi._MonitorsAppState],{scriptClass:"mstrmojo.vi.ui.tabs.TabStrip",markupString:'<div id="{@id}" class="mstrmojo-VITabStrip {@cssClass}" style="{@cssText}" ><div class="mstrmojo-VITabStrip-menu" mstrAttach:click><div id="tabCommonIcon" class="mstrmojo-VITabStrip-menuIcon"></div><div id="tabCommonButton" class="mstrmojo-VITabStrip-menuButton"></div><div id="tabCommonMenuHost" class="mstrmojo-VITabStrip-menuButtonHost"></div></div><div class="mstrmojo-VITabStrip-tabs"><div style="display:table"><div style="display:table-row"></div></div></div><div class="mstrmojo-VITabStrip-buffer"></div><div class="mstrmojo-VITabStrip-btnBar"><div class="mstrmojo-VITabStrip-addBtn" mstrAttach:click><div class="mstrmojo-VITabStrip-addBtn-Img"></div><div class="mstrmojo-VITabStrip-addBtn-Text"></div></div><div class="mstrmojo-VITabStrip-navBtns"><div id="tabRightButton" class="mstrmojo-VITabStrip-rightBtn" mstrAttach:click,mousedown,mouseup,mouseover,mouseout><div class="navBtnIcon"></div></div><div id="tabLeftButton" class="mstrmojo-VITabStrip-leftBtn" mstrAttach:click,mousedown,mouseup,mouseover,mouseout><div class="navBtnIcon"></div></div></div></div><div class="mstrmojo-VITabStrip-floater"></div><div class="mstrmojo-VITabStrip-menuHost"></div><div class="mstrmojo-VIDND-mask"></div></div>',markupSlots:{tabStripMenuNode:function(){return this.domNode.firstChild;},menuImgNode:function(){return this.domNode.firstChild.firstChild;},menuBtnNode:function(){return this.domNode.firstChild.childNodes[1];},menuBtnHostNode:function(){return this.domNode.firstChild.lastChild;},tabContainerNode:function(){return this.domNode.childNodes[1];},containerNode:function(){return this.domNode.childNodes[1].firstChild.firstChild;},bufferNode:function(){return this.domNode.childNodes[2];},btnBarNode:function(){return this.domNode.childNodes[3];},addBtnNode:function(){return this.domNode.childNodes[3].firstChild;},addBtnImgNode:function(){return this.domNode.childNodes[3].firstChild.firstChild;},addBtnTxtNode:function(){return this.domNode.childNodes[3].firstChild.lastChild;},navBtnsNode:function(){return this.domNode.childNodes[3].lastChild;},rightBtnNode:function(){return this.domNode.childNodes[3].lastChild.firstChild;},leftBtnNode:function(){return this.domNode.childNodes[3].lastChild.lastChild;},floaterNode:function(){return this.domNode.childNodes[4];},menuNode:function(){return this.domNode.childNodes[5];},maskNode:function(){return this.domNode.lastChild;}},isStatic:false,isAlignRight:true,tabStripMenuNode:null,menuImgNode:null,menuBtnNode:null,menuBtnHostNode:null,tabContainerNode:null,addBtnNode:null,bufferNode:null,navBtnsNode:null,leftBtnNode:null,rightBtnNode:null,menuNode:null,position:"bottom",selectMovedTab:false,hasFloater:false,tabObjects:null,layoutConfig:{w:{tabContainerNode:"100%",bufferNode:"6px",addBtnNode:h,navBtnsNode:F,tabStripMenuNode:n},xt:true},onAppStateChange:function p(AJ){var AH=mstrmojo.vi.VisualInsightApp.APP_STATES,AI=AH.PRESENTATION,AC=AH.SELECTOR_TARGETING,AD=AJ.value,AK=AJ.valueWas,AG=this.isValidMode();if(AD&AI||AK&AI||AD&AC||AK&AC){var AE=this.addBtnNode,AF=this.tabStripMenuNode;if(AE&&AF){AE.style.display=AF.style.display=AG?"block":"none";this.bufferNode.style.display=AG?"none":"block";this.doLayout();}}},setStatic:function R(AC,AD){this.isStatic=AC;if(!AC){r.call(this,true,AD);}},setTabs:function o(AE,AC){this.removeChildren();this.tabObjects=AE;var AF=this,AD=(AE&&AE.length)||0;this.addChildren(W(AE,function(AI,AG){var AH=AI.k;return AF.getTabCfg(AE,AI,{scriptClass:"mstrmojo.vi.ui.tabs.Tab",index:AG,total:AD,draggable:!!AD,dropZone:!!AD,k:AH,isSelected:AH===AC,showTabMenu:f,tabMoved:function(AK){var AJ=this.index;AF.moveTab(AJ,AJ+(AK?-1:1),AJ);}});}));r.call(this,true);j(this);},getTabs:function k(){return T(this.children,C);},getTabCfg:function AB(AD,AE,AC){return AC;},deleteTab:function I(AC){var AI=this.id,AH=this.children[AC],AG=D(),AF=function(){var AJ=mstrmojo.all[AI];AJ.removeChildren(AH);AH.destroy();Y.call(AJ);L.call(AJ);j(AJ);};if(AG){var AE=AH.domNode.firstChild,AD=AE.style;AD.width=AE.offsetWidth+"px";window.setTimeout(function(){B.addClass(AE,g);N.attachOneTimeEvent(AE,AG,AF);AD.width=0;},0);}else{AF();}},buildRendering:function b(){this._super();B.toggleClass(this.domNode,"alignLeft",!this.isAlignRight);},postBuildRendering:function U(){var AC=this._super();r.call(this,true);return AC;},doLayout:function K(){this._super();r.call(this,true);},isValidMode:function E(){return !((mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation())||(mstrApp.isAppStateSelection&&mstrApp.isAppStateSelection())||(mstrApp.allowWebDashboardDesign&&!mstrApp.allowWebDashboardDesign()));},setSelectedTab:function S(AC){a.forEach(this.children||[],function(AD){AD.set("isSelected",AD.k===AC);});j(this);},getSelectedTab:function e(){var AE=null,AD=this.children||[],AC;for(AC=0;AC<AD.length;AC++){if(AD[AC].isSelected){AE=AD[AC];break;}}return AE;},onclick:function m(AC){if(!this.isValidMode()){return ;}if(AC.getTarget()===this.addBtnImgNode||AC.getTarget()===this.addBtnTxtNode){this.addTab();}},addTab:mstrmojo.emptyFn,clearBtnTooltips:function O(AE){var AC=(AE===this.leftBtnNode),AD=(AE===this.rightBtnNode);if(AC||AD){this.clearTooltips();return true;}return false;},showBtnTooltips:function G(AC){var AE=AC.getTarget().parentNode,AD=this.clearBtnTooltips(AE);if(AD){this.toggleTooltip(AE);}},onmouseout:function t(AC){var AD=AC.getTarget().parentNode;this.clearBtnTooltips(AD);},onmouseover:function H(AC){this.showBtnTooltips(AC);},onmouseup:function Z(AC){window.setTimeout(function(){this.showBtnTooltips(AC);}.bind(this),v);},onmousedown:function d(AL){var AH=AL.getTarget().parentNode,AM=(AH===this.leftBtnNode),AF=(AH===this.rightBtnNode);if(AM||AF){var AK=this.tabContainerNode,AG=AK.firstChild,AC=this.id,AI=this,AE;if(mstrApp.setInteractive){mstrApp.setInteractive(false);}B.addClass(AH,"active");var AJ=function(){window.clearInterval(AE);B.removeClass(AH,"active");L.call(mstrmojo.all[AC]);if(mstrApp.setInteractive){mstrApp.setInteractive(true);}};N.attachOneTimeEvent(document.body,"mouseup",AJ);var AD=function(){var AP=P(AK),AS=AA(AG,AI),AT=AS-AP,AR=0-AS;J.call(AI);AI.setAnimation(AG);var AN=AI.getCornerTabs()||[],AQ=T(AN,function(AU){if(AM&&AU.isLeftMost||AF&&AU.isRightMost){return AU;}})[0],AO=0;if(AQ){AO=AQ.isCutoff?(AM?AQ.leftEdgeHiddenWidth:AQ.rightEdgeHiddenWidth):Math.ceil(AQ.domNode.offsetWidth);AO=Math.min(AO,AM?AR:AT);AO=AI.isAlignRight?(AM?-AO:AO):(AM?AO:-AO);}AG.style[w(AI)]=parseInt(AG.style[w(AI)]||0)+AO+"px";};AD();AE=window.setInterval(function(){AD();},A);}},getCornerTabs:function c(){return T(this.children,function(AC){return AC.isLeftMost||AC.isRightMost;});},setAnimation:function X(AC){var AD=D();if(AD){B.addClass(AC,g);N.attachOneTimeEvent(AC,AD,function(){B.removeClass(AC,g);});}},createTooltip:function y(AD){var AF=document.createElement("div");AF.className="navBtnTooltip";AF.appendChild(document.createTextNode(AD.getAttribute("tooltip")||""));var AI=document.body.firstChild;AI.parentNode.insertBefore(AF,AI);var AG=5,AJ=AF.offsetWidth-25,AE=AD.getBoundingClientRect(),AH=AF.getBoundingClientRect(),AC=AE.top-(AH.height+AG);AF.style.top=AC+"px";AF.style.left=(AE.left-AJ)+"px";return AF;},clearTooltips:function l(){window.clearTimeout(this._tooltipTimeOut);var AC=document.querySelectorAll(".navBtnTooltip");a.forEach(AC||[],function(AD){AD.parentNode.removeChild(AD);});},toggleTooltip:function z(AC){window.clearTimeout(this._tooltipTimeOut);if(AC.disabled){this._tooltipTimeOut=window.setTimeout(function(){this.createTooltip(AC);}.bind(this),Q);}},moveTab:function M(AC,AK,AI,AH){var AD=this.children,AL=AD.splice(AC,1)[0];AD.splice(AK,0,AL);Y.call(this);this.setAnimation(this.tabContainerNode.firstChild);var AE=this.containerNode,AF=AE.childNodes,AJ=AE.removeChild(AF[AC]),AG=AF[AK];if(AG){AE.insertBefore(AJ,AG);}else{AE.appendChild(AJ);}if(this.selectMovedTab||AL.isSelected){r.call(this,true,true,AL);}if(!AH&&AI!==undefined&&AI!==AK){this.commitTabMove(AI,AK);j(this);}},commitTabMove:function u(AC,AD){throw new Error(this.scriptClass+" must implement commitTabMove.");},updateTabTable:function q(){if(!this.isStatic){r.call(this,true);}},setLinkIcon:function V(AC,AF){var AE,AD;if(AC){if(AF){AD="src";a.some(this.getTabs(),function(AG){if(AG.k===AF){AE=AG;}return AE;});if(!AE){return ;}}else{AD="tgt";AE=this.getSelectedTab();}B.addClass(AE.domNode,AD);}else{AD=AF?["src","tgt"]:"tgt";a.forEach(this.children,function(AG){B.removeClass(AG.domNode,AD);});}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout","mstrmojo.vi._MonitorsAppState","mstrmojo.EditableLabel","mstrmojo.vi.ui.toolbars.TitleToolbar");var J=mstrmojo.dom;mstrmojo.vi.ui.TitleBar=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo.vi._MonitorsAppState],{scriptClass:"mstrmojo.vi.ui.TitleBar",markupString:'<div id="{@id}" class="mstrmojo-VITitleBar {@cssClass}" style="{@cssText}" mstrAttach:contextmenu,click><div class="left-toolbar"></div><div class="title-text"></div><div class="right-toolbar"></div></div>',markupSlots:{leftToolNode:function(){return this.domNode.firstChild;},textNode:function(){return this.domNode.childNodes[1];},rightToolNode:function(){return this.domNode.lastChild;},containerNode:function(){return this.domNode;}},markupMethods:{onhasContextMenuButtonChange:function(){var P=this.hasContextMenuButton;this.tbToolbar.set("visible",P);this.tbToolbar.set("enabled",P);},ontitleChange:function(){this.lblTitle.set("text",this.title||" ");},ontoolbarCfgChange:function(){var P=this.toolbarCfg;if(!P){return ;}this.tbToolbar.set("toolbarCfg",P);this.doLayout();},onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},layoutConfig:{w:{leftToolNode:"auto",textNode:"100%",rightToolNode:"auto"},h:{leftToolNode:"100%",textNode:"100%",rightToolNode:"100%"},xt:true},lblTitle:null,tbToolbar:null,hasContextMenuButton:true,editTitleOnClick:false,editTitleOnDoubleClick:true,editTitleOnTwoClicks:false,title:"",close:mstrmojo.emptyFn,toolbarCfg:null,beganEditingTitlebar:mstrmojo.emptyFn,titleEdited:mstrmojo.emptyFn,useRichTooltip:true,init:function O(P){this._super(P);this.addChildren([].concat(this.getLeftToolbarChildren()).concat(this.getTitleChildren()).concat(this.getRightToolbarChildren()));},shouldShowTooltip:function K(P,R){var Q=P.target||J.eventTarget(P.hWin,P.e);return Q===this.textNode.firstChild&&(Q.scrollWidth>Q.clientWidth);},getTooltipContent:function L(P){var R=P.target||J.eventTarget(P.hWin,P.e),Q=R.innerHTML;return Q;},showTooltip:function M(P,Q){if(this.shouldShowTooltip(P,Q)){this._super(P,Q);}},updateTooltipConfig:function I(Q){var R=Q.target||J.eventTarget(Q.hWin,Q.e),P=J.position(R);this.richTooltip={posType:mstrmojo.tooltip.POS_TOPLEFT,content:this.getTooltipContent(Q),top:P.y+P.h+3,left:P.x+4,cssClass:"vi-regular vi-tooltip-A"};},getLabelNode:function C(){return this.lblTitle.domNode;},getMenuConfig:function B(){var P=this.toolbarCfg;if(P){if(P.hasMenuItems()){return P;}}return null;},setToolbarVisibility:function D(P){this.tbToolbar.set("visible",P);},editTitle:function N(){this.lblTitle.set("isEditing",true);},onAppStateChange:function F(P){var Q=this.lblTitle,R=mstrApp.isAppStatePresentation(),S=!!(P.valueWas&mstrmojo.vi.VisualInsightApp.APP_STATES.PRESENTATION);if(R&&this._confgTitleEditable===undefined){this._confgTitleEditable=this.editTitleOnClick||this.editTitleOnDoubleClick||this.editTitleOnTwoClicks;}Q.set("isEditing",false);if(R||S){Q.set("editOnDoubleClick",!R&&this._confgTitleEditable);}},getLeftToolbarChildren:function A(){},getTitleChildrenLayoutOffsets:function H(){return{h:2,w:2};},getTitleChildren:function G(){return[{scriptClass:"mstrmojo.EditableLabel",slot:"textNode",alias:"lblTitle",bindings:{editOnClick:"this.parent.editTitleOnClick",editOnDoubleClick:"this.parent.editTitleOnDoubleClick",selectable:"this.isEditing",editOnTwoClicks:"this.parent.editTitleOnTwoClicks"},onTextEditBegin:function(){this.parent.beganEditingTitlebar();},onTextEditComplete:function(R,Q){this.parent.titleEdited(this.text,R,Q);},getLayoutOffsets:function P(){return this.parent.getTitleChildrenLayoutOffsets();}}];},getRightToolbarChildren:function E(){return[{scriptClass:"mstrmojo.vi.ui.toolbars.TitleToolbar",slot:"rightToolNode",alias:"tbToolbar",visible:true,useRichTooltip:true,bindings:{hasContextMenuButton:"this.parent.hasContextMenuButton",}}];}});}());(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.array","mstrmojo.Button","mstrmojo.css","mstrmojo.hash","mstrmojo.Label","mstrmojo.Box","mstrmojo.ui.Pulldown","mstrmojo.ui.SearchablePulldown","mstrmojo.func");mstrmojo.requiresDescs(221,1442,2751,2891,11949,11950,11951,11942,13397,13398,14640,14648);var R=mstrmojo.array,U=mstrmojo.css,N=mstrmojo.hash,O=mstrmojo.func,M=mstrmojo.Button.newWebButton,P=mstrmojo.dom,T="mstrmojo-link-validation",Q="mstrmojo-link-vt",F=function F(V){if(V.old){this.removedLinks.push(V);}this.links.removeChildren(V);},S=function S(){var t=this.dsMap,p=this.docModel,Y=p.datasets,v=function v(j,w,a){var k={n:a||"",did:w||null,parent:j||null,lv:(j?j.lv+1:-1),children:[]};if(j){j.children.push(k);}return k;},e=v(),X,W,V,g,Z,q,l,u,r,o,n,m,c,b,d,h,f;N.forEach(Y,function(a){if(p.isMDXDataset(a)){Z=a.tables;for(o=0,b=Z.length;o<b;o++){q=Z[o];X=v(e,q.did,q.n);X.isMDX=true;for(n=0,d=q.dimensions.length;n<d;n++){l=q.dimensions[n];W=v(X,l.did,l.n);for(m=0,h=l.hierarchies.length;m<h;m++){u=l.hierarchies[m];V=v(W,u.did,u.n);for(c=0,f=u.att.length;c<f;c++){r=u.att[c];g=v(V,r.did,r.n);g.att=r;t[q.did+":"+r.did]=g;}}}}}else{X=v(e,a.did,a.name);X.isMDX=false;R.forEach(a.att,function(j){g=v(X,j.did,j.n);g.att=j;t[a.did+":"+j.did]=g;});}});return e;},B=function B(b,c){b=R.ensureArray(b);var a=this,Z=this.attribute.did,d=this.docModel,X=this.datasetId,W="\u001F",V={success:function(f){var h=f.als,e=(d.als&&d.als.links)||{},g=a.dsTree;R.forEach(b,function(q,l){var r={},j={},k=[],m={},p=Z+" "+q,n=R.filter(h[l].ats,function(t){return !d.isInDataset(X,t.at,["att"]);}),o=function o(t,u){if(!m[t]){m[t]={};}if(!m[t][u]){m[t][u]=true;}};R.forEach(n,function(v){var t=v.at,u=v.fms;r[t]=true;if(u){R.forEach(u,function(w){o(t,w.fm);});}});N.keyarray(e).forEach(function(t){if(t===p){R.forEach(e[t],function(u){u=u.split(" ");r[u[0]]=true;o(u[0],u[1]);});}});if(N.keyarray(r).length>0){R.forEach(g.children,function(u){var t=function(v){var w;if(!v.att){return ;}v=v.att;if(r[v.did]){if(!j[v.n]){j[v.n]={};}if(!j[v.n][v.did]){j[v.n][v.did]=[];}j[v.n][v.did].push(u.n);w=N.copy(v,w);w.dsId=u.did;k.push(w);}};if(u.isMDX){R.forEach(u.children,function(v){R.forEach(v.children,function(w){R.forEach(w.children,t);});});}else{R.forEach(u.children,t);}});}a.tgtAttrs[q]=k;a.tgtForms[q]=m;a.namesHash[q]=j;});}},Y={taskId:"validateDocumentLinks",msgID:d.mid,action:1,attributeList:Z,attributeFormList:b.join(W)};mstrApp.serverRequest(Y,O.wrapMethods(V,c));},E=function(Y,a,W,Z){Y.richTooltip=null;if(!Y.isSearching){var X=a&&a.scrollWidth>a.clientWidth;W=X?mstrmojo.desc(14648,"## from ###").replace("##",W):"";if(Z){if(!X){W=mstrmojo.desc(14640,"From ###");}W=W.replace("###",Z);}var V=mstrmojo.dom.position(a);Y.richTooltip={cssClass:"vi-regular vi-tooltip-V",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_BOTTOMLEFT,content:W,top:V.y-6,left:V.x};}},D=function D(c){var d=this,f=function(n){var l=n.fs,o=n.de,m=[];(l||[]).forEach(function(p){if(p.obf&&(!o||p.idf)){m.push({n:p.fnm,v:p.fid,idf:p.idf});}});return m;},g=f(this.attribute),Z=function(o,m){var l=f(o);var p=(d.tgtForms[m]&&d.tgtForms[m][o.did])||{};var n=[];R.forEach(l,function(q){if(p[q.v]){n.push(q);}});return n;},b=function b(m){var l=[];R.forEach(d.tgtAttrs[m],function(n){if(Z(n,m||d.idFormId).length>0){var p=d.namesHash[m],o=n.n;if(p[n.n]&&N.keyarray(p[n.n]).length>1){o=o+" ("+p[n.n][n.did].join(",")+")";}l.push({n:n.n,v:n,tt:o});}});if(l.length===0){l.push({n:mstrmojo.desc(13398,"No valid object"),v:{did:null},cls:"nvo",t:1});}return l;},h=b((c&&c.srcFormId)||this.idFormId),j=function(l,m){return R.find(l.fs,m?"fid":"idf",m||true);},k=function(m){var l=-1;h.forEach(function(o,n){if(o.v.did===m){l=n;}});return l;},W=function(m){var l=h[m];if(!l){return mstrmojo.desc(13397,"Select an attribute");}else{return l.n;}},X=function(m){var n=m.items,l=m.selectedIndex;if(l>=0){if(n[l].idf){return ;}}n.forEach(function(p,o){if(p.idf){m.set("selectedIndex",o);}});};this.links.addChildren({scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-linkRow",slot:"containerNode",old:!!c,oldMeta:c,getMeta:function(){var l=this.linkFromForm,n=this.linkToAtt,m=this.linkToForm;return{srcAttrId:d.attribute.did,srcFormId:l.items[l.selectedIndex].v,tgtAttrId:n.items[n.selectedIndex]&&n.items[n.selectedIndex].v.did,tgtFormId:m.items[m.selectedIndex]&&m.items[m.selectedIndex].v};},children:[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-attName",text:d.attribute.n,useRichTooltip:true,updateTooltipConfig:function(p){var o=p.target,l=this.text,m=d.datasetId,n=m?d.docModel.datasets[m].name:"";E(this,o,l,n);}},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-linkFormFromPD",alias:"linkFromForm",value:"ID",isHostedWithin:true,items:g,selectedIndex:j(d.attribute,c&&c.srcFormId),onitemSelected:function(m){var l=this,n=function(){var p=l.parent.linkToAtt;h=b(m.v);p.set("items",h);p.set("selectedIndex",-1);p.set("text",mstrmojo.desc(13397,"Select an attribute"));U.addClass(p.selectedNode,"nvo");},o={success:n};if(this.hasRendered){if(this.parent.old){this.parent.oldUpdated=true;}if(!m.idf){X(this.parent.linkToForm);if(!d.tgtForms[m.v]){B.call(d,m.v,o);return ;}}n();}}},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-linksToLabel",text:mstrmojo.desc(11949,"links to")},{scriptClass:"mstrmojo.ui.SearchablePulldown",cssClass:"mstrmojo-linkToAtt",alias:"linkToAtt",useRichTooltip:true,isHostedWithin:false,items:h,text:W(k(c&&c.tgtAttrId)),selectedIndex:k(c&&c.tgtAttrId),allowCustomText:true,allowEmptyText:true,updateTooltipConfig:function(q){var p=q.target,l=p.getAttribute("tt"),n=this.getSelectedItem(),m=n?n.v.dsId:null,o=m?d.docModel.datasets[m].name:"";if(this.selectedNode===p&&n){l=n.tt;}E(this,p,l,o);},onitemSelected:function(p){if(!p||p.v.did===null){return ;}var o=this.parent.linkToForm,n=this.parent.linkFromForm,m=Z(p.v,n.items[n.selectedIndex].v),q=function q(r,u){var t=R.find(r,u?"v":"idf",u||true);if(t===-1&&r.length>0){t=0;}return t;},l;R.forEach(m,function(r){if(r.idf){l=false;return false;}});if(l){K.call(d,true);}o.set("items",m);o.set("selectedIndex",q(m,!this.hasRendered&&c&&c.tgtFormId));if(this.hasRendered&&this.parent.old){this.parent.oldUpdated=true;}J.call(d);},onPopupWidgetOpened:function a(){if(this.selectedIndex===-1){this.set("text","");}U.removeClass(this.selectedNode,"nvo");},onPopupWidgetClosed:function e(){mstrmojo.ui.SearchablePulldown.prototype.onPopupWidgetClosed.call(this);if(this.selectedIndex===-1&&this.text===""){this.set("text",mstrmojo.desc(13397,"Select an attribute"));U.addClass(this.selectedNode,"nvo");}else{U.removeClass(this.selectedNode,"nvo");}this.hideTooltip();R.forEach(d.collapseTargets,function(l){l.className="arrow-b";U.removeClass(l.parentNode.parentNode,"collapse");});R.forEach(d.collapseTreeNodes,function(l){delete l.collapse;});R.forEach(this.list.itemsContainerNode.childNodes,function(l){l.style.display="";});},postBuildRendering:function V(){mstrmojo.ui.SearchablePulldown.prototype.postBuildRendering.call(this);if(this.selectedIndex===-1){U.addClass(this.selectedNode,"nvo");}this.list.popupConfig.clear();},getPopupListConfig:function Y(){return{scriptClass:"mstrmojo.ui.PopupList",alias:"list",width:"170px",tooltipOrientation:"vertical",selectionPolicy:"reselect",useRichTooltip:true,locksHover:true,listHooks:{select:function l(r,t,q){this.parent.set("selectedIndex",q);this.close();}},onclick:function m(z){try{var r=z.getTarget(),AA=this.getItemFromTarget(r),w=P.findAncestorByAttr(r,"idx",true,this.domNode),v=this.items;if(v){this.parent.set("items",v);}if(AA){z.cancel();if(r.className==="arrow-b"||r.className==="arrow-r"){var q=this.itemsContainerNode.childNodes,u=function u(AC){var AB;while(AC){AB=AC.className||"";if(AB.indexOf("lv")===0){return window.parseInt(AB.substring(2),10);}AC=AC.firstChild;}return null;},y=function y(AB,AE){var AD=d.dsMap,AC=AD[AB.dsId+":"+AB.did];while(AC){if(AC.lv===AE){return AC;}AC=AC.parent;}return null;},x=function x(){var AK=(r.className==="arrow-b"),AE=r.parentNode.parentNode,AB=u(AE),AF=AA._renderIdx,AC=y(AA.v,AB),AI=v.length,AH,AD,AG,AJ,AM,AL;r.className=AK?"arrow-r":"arrow-b";if(!d.collapseTargets){d.collapseTargets=[];}d.collapseTargets.push(r);U.toggleClass(AE,"collapse",AK);AC.collapse=AK;if(!d.collapseTreeNodes){d.collapseTreeNodes=[];}d.collapseTreeNodes.push(AC);for(AH=AF+1;AH<AI;AH++){AD=q[AH];AG=u(AD);if(AG<=AB){break;}AJ=y(v[AH].v,AG);AM=AJ.parent;AL=true;while(AM){if(AM.collapse){AL=false;break;}AM=AM.parent;}AD.style.display=(AL?"":"none");}};x();}else{if(w&&w.node.className.indexOf("item")!==-1){this.doItemSelect(AA,z||{});}}}}catch(t){mstrApp.onerror(t);}},getItemProps:function n(t,q){var r=mstrmojo._IsList.getItemProps.call(this,t,q);var u=t.cls;if(u){r.addCls(u);}return r;},getItemMarkup:function p(AB,AA){if(AB.v.did===null){return'<{@tag} class="item {@cls}" did="'+AB.v.did+'" idx="{@idx}" style="{@style}">{@n}</{@tag}>';}var AC=[],y=AB.v.did,t=AB.v.dsId,u=t?d.docModel.datasets[t]:null,r=u?u.name:"",z=AA>0&&this.items[AA-1].v,w=d.dsMap,v=w[AB.v.dsId+":"+y],q=w[(z&&(z.dsId+":"+z.did))];AC.push("</div>");while(v){if(v.lv===-1){break;}if(v.att){var x=v.att.da?"derived-attr":"attr";AC.push('<div class="lv'+v.lv+' dim item {@cls}" tt="'+AB.tt+'" did="'+y+'" dsName="'+r+'" idx="{@idx}" style="{@style}"><div><div class="'+x+'"></div></div>{@n}</div>');}else{if(v!==q){AC.push('<div class="lv'+v.lv+' dim" dtt="'+v.n+'" idx="{@idx}"><div><div class="arrow-b"></div></div>'+v.n+"</div>");}else{break;}}v=v.parent;q=(q&&q.parent)||null;}AC.push("<div>");return AC.reverse().join("");},updateTooltipConfig:function o(w){var v=w.target,t=v.getAttribute("tt"),r=v.getAttribute("dtt"),u=v.getAttribute("dsName"),q=t||r;if(q){E(this,v,q,u);}}};}},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-linkFormToPD",alias:"linkToForm",value:"ID",isHostedWithin:true,items:[],onitemSelected:function(l){if(this.hasRendered){if(this.parent.old){this.parent.oldUpdated=true;}if(!l.idf){X(this.parent.linkFromForm);}}}},M("",function(){F.call(d,this.parent);},false,{cssClass:"mstrmojo-removeLink"})]});this.links.renderChildren();},K=function(V){U.toggleClass(this.editorNode,"mstrmojo-advanced",V);},L=function(Y){var W=this,Z=T,V;try{mstrmojo.all[Z].destroy();}catch(X){}V={scriptClass:"mstrmojo.Editor",id:Z,title:mstrmojo.desc(2751,"Message"),cssClass:"mstrmojo-alert",buttons:[M(mstrmojo.desc(1442,"Ok"),function(){mstrmojo.all[Z].destroy();H.call(W);},true)],children:[{scriptClass:"mstrmojo.Label",text:Y}],visible:true,zIndex:1000};mstrmojo.insert(V).render();},H=function(){var X=this,W=this.illLinks,V=this.links.children,Y=Q;R.forEach(W,function(Z){Z=Z.al;R.forEach(V||[],function(b){var d=b.getMeta(),e=b.linkToAtt,a,c;if(d.srcAttrId===Z.alaid1&&d.tgtAttrId===Z.alaid2){if(!mstrmojo.all[Y]){c=new mstrmojo.Tooltip({id:Y,cssClass:X.themeClassName+" vi-warning vi-tooltip-V",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_BOTTOMLEFT,updatePopupConfig:null});P.attachEvent(X.editorNode,"click",function(){c.close();U.toggleClass(e.selectedNode,"mstrmojo-Warning",false);});}else{c=mstrmojo.all[Y];}c.close();a=mstrmojo.dom.position(e.selectedNode);c.set("top",a.y-6);c.set("left",a.x);c.set("content",Z.alstmsg);U.toggleClass(e.selectedNode,"mstrmojo-Warning",true);c.open();return false;}});});},A=function(){var V=mstrmojo.all[Q];if(V){V.close();}},J=function J(){this.buttons[0].enabled=true;if(this.btnHbox){this.btnHbox.children[0].set("enabled",true);}},G=function G(){var V=this,W=[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-toolBox",alias:"tools",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebHoverButton mstrmojo-addLink",text:mstrmojo.desc(11950,"Add A Link"),title:mstrmojo.desc(11950,"Add A Link"),onclick:function(){D.call(V);A.call(V);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebHoverButton mstrmojo-showForms",text:mstrmojo.desc(2891,"Show Attribute Forms"),title:mstrmojo.desc(2891,"Show Attribute Forms"),onclick:function(){K.call(V,true);A.call(V);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebHoverButton mstrmojo-hideForms",text:mstrmojo.desc(11951,"Hide Attribute Forms"),title:mstrmojo.desc(11951,"Hide Attribute Forms"),onclick:function(){K.call(V,false);A.call(V);}}],slot:"containerNode"},{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-linksBox mstrmojo-advanced",alias:"links",slot:"containerNode"}];this.addChildren(W);};mstrmojo.vi.ui.editors.AttributeLinkEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.vi.ui.editors.AttributeLinkEditor",title:mstrmojo.desc(11942,"Link Attributes"),cssClass:"mstrmojo-att-link",btnAlignment:"right",buttons:null,modal:true,visible:false,help:"link_attributes_editor.htm",attribute:null,tgtAttrs:null,tgtForms:null,docModel:null,datasetId:null,namesHash:null,removedLinks:null,preBuildRendering:function C(){var Y=this,W=this.docModel,X=function(){var Z=(W.als&&W.als.links)||{},a=[];N.keyarray(Z).forEach(function(b){if(b.indexOf(Y.attribute.did+" ")===0){Z[b].forEach(function(c){a.push({srcAttrId:b.split(" ")[0],srcFormId:b.split(" ")[1],tgtAttrId:c.split(" ")[0],tgtFormId:c.split(" ")[1]});});}});return a;},V;this.set("buttons",[M(mstrmojo.desc(1442,"OK"),function(){var g=[],a=Y.links.children,Z=function(){var h=W.controller,j=W.controller.getRefreshCallback();if(g.length>0){h.cmdMgr.execute({execute:function(){this.submit(g,j,{style:{params:{treesToRender:3}}});},urInfo:{callback:j}});}Y.close();},f=false,c,d;Y.removedLinks.forEach(function(h){c=N.copy(h.oldMeta,{act:"applyAttributeLinking",unlink:true});g.push(c);});(a||[]).forEach(function(h){if(h.old&&h.oldUpdated){c=N.copy(h.oldMeta,{act:"applyAttributeLinking",unlink:true});g.push(c);}if(!h.old||(h.old&&h.oldUpdated)){d=h.getMeta();if(!d.tgtAttrId){return ;}c=N.copy(d,{act:"applyAttributeLinking",unlink:false});g.push(c);}});R.forEach(g,function(h){if(!h.unlink){f=true;return false;}});if(!f){Z();return ;}var e={taskId:"validateDocumentLinks",msgID:W.mid,action:2,manipulationList:'{"ml":'+JSON.stringify(g)+"}"},b={success:function(h){if(h.als&&h.als.length>0){var j="";R.forEach(h.als,function(k){j+=k.al.alstmsg+"\n";});Y.illLinks=h.als;L.call(Y,j);return ;}Z();}};mstrApp.serverRequest(e,b);},true,{enabled:false}),M(mstrmojo.desc(221,"Cancel"),function(){Y.close();})]);G.call(this);V=X(this.attribute.did);if(V.length>0){V.forEach(function(Z){D.call(Y,Z);});J.call(this);}else{D.call(this);}this._super();},close:function I(){A.call(this);this.destroy();}});mstrmojo.vi.ui.editors.AttributeLinkEditor.open=function(b){var W=mstrmojo.insert(N.copy(b,{scriptClass:"mstrmojo.vi.ui.editors.AttributeLinkEditor",tgtAttrs:{},tgtForms:{},namesHash:{},removedLinks:[]})),Z=W.attribute,c=Z.did,V=W.docModel,Y=(V.als&&V.als.links)||{},X=[],a={success:function(){W.set("visible",true);W.render();}};R.forEach(Z.fs,function(d){if(d.idf){W.idFormId=d.fid;return false;}});N.keyarray(Y).forEach(function(e){var d=e.split(" ");if(d[0]===c){X.push(d[1]);}});if(R.indexOf(X,W.idFormId)===-1){X.push(W.idFormId);}W.dsMap={};W.dsTree=S.call(W);B.call(W,X,a);};}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.hash","mstrmojo.ui.PopupButton","mstrmojo.ui.PulldownCheckList");var G=mstrmojo.css,D=mstrmojo.hash,E={0:true};function B(){var O=this.selectedIndices=D.copy(this.getPopupList().selectedIndices),K=this.items,N=[],M=this.allIdx,L=this.noneIdx;if(K){if(O[M]){N.push(K[M].n);}else{if(O[L]){N.push(K[L].n);}else{mstrmojo.array.forEach(K,function(Q,P){if(O[P]){N.push(Q.n);}});}}}this.set("value",N.join(", "));}mstrmojo.ui.MultiSelectPulldown=mstrmojo.declare(mstrmojo.ui.PopupButton,[mstrmojo.ui._IsPulldown],{scriptClass:"mstrmojo.ui.MultiSelectPulldown",isHostedWithin:false,popupWidget:undefined,init:function J(K){this._super(K);G.addWidgetCssClass(this,"multi");this.hostedCSSClass=this.hostedCSSClass+" multi";},submitSelections:function A(){B.call(this);this.onchange();},_set_selectedIndices:function F(M,K){var L=this.selectedIndices=D.copy(K||this.selectedIndices||E);this.getPopupList().set("selectedIndices",L);B.call(this);return true;},select:function H(K){this.getPopupList().select(K);},getPopupWidget:function C(){return this.popupWidget;},getPopupList:function I(){return this.popupWidget.list;},children:[{scriptClass:"mstrmojo.ui.PulldownCheckList",alias:"popupWidget",useRichTooltip:true,showTooltipForLargeText:true}]});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.array","mstrmojo.num","mstrmojo.dom","mstrmojo.date","mstrmojo.Container","mstrmojo.VBox","mstrmojo.Button","mstrmojo.locales","mstrmojo._FormatDefinition","mstrmojo.mstr.EnumFunction","mstrmojo.ui.editors.controls.ComboBox","mstrmojo.vi.util.NumberFormatUtility");var M=mstrmojo.hash,b=mstrmojo.array,G=mstrmojo.num,J=mstrmojo._FormatDefinition,B=mstrmojo.css,Z=mstrmojo.mstr.EnumFunction,L=mstrmojo.locales,H=mstrmojo.Button.newIconButton,O=mstrmojo.date,I=mstrmojo.vi.util.NumberFormatUtility,r="1234.12",E=J.NumberFormatCategory,p=J.FixedNegative,F=J.CurrencyNegative,e=J.PercentNegative,K=J.DefaultFormat.FormattingNumber,n="nf-MiddleRow ",W="nf-MiddleRow nf-HasWidget ",Y,T,d=function d(u,t){return{cls:this.value===u.v?"selected":"",v:u.v||"",n:u.n||"",style:u.r?"color:red;":"color:#fff;",sel:parseInt(this.idx,10)===t?"selected":""};},o={RIGHT:1,LEFT_WITH_SPACE:2,RIGHT_WITH_SPACE:3};var S=[{n:mstrmojo.desc(4531,"Automatic"),v:-3}].concat(J.Category.slice(2)),c=[{n:"$"},{n:"£"},{n:"€"},{n:"¥"},{n:"fr."}];function D(v,u){var t=b.find(v,"v",u);return t===-1?"":v[t].f;}function N(t){var v=this.parent.parent.parent.myData,u=t.v;v.set("format",D(this.items,u));v.set("negativeNumbers",u);B.toggleClass(this.selectedNode,"red",t.r);}function X(v,w,t){return{scriptClass:"mstrmojo.ui.Pulldown",isHostedWithin:false,items:v,onitemSelected:function u(x){var y=this.parent;while(y&&(!y.data||typeof y.data[w]==="undefined")){y=y.parent;}if(y){y.data.set(w,x.v);if(t){y.children[0].preview.preview_label.set("text",x.n);}}}};}function h(AD,y,x,AG,AC){var AF=M.clone(AD),u=y>0?L.number.DECIMALSEPARATOR:"",v=y>0?".":"",w=J.DefaultFormat.FormattingNumber,AE=new RegExp("\\"+L.number.THOUSANDSEPARATOR,"g"),t=new RegExp("\\"+L.number.DECIMALSEPARATOR+"\\d{2}","g"),AA;for(AA=0;AA<y;AA++){u+=AA%9;v+="0";}for(AA=0;AA<AF.length;AA++){var AB=AF[AA];AB.n=AB.n.replace(/,/g,"@");AB.n=AB.n.replace(/\./g,L.number.DECIMALSEPARATOR);AB.n=AB.n.replace(/@/g,L.number.THOUSANDSEPARATOR);if(x){AB.n=AB.n.replace(AE,"");AB.f=AB.f.replace(/,/g,"");}if(AG&&AG!==w.CurrencyPosition){switch(AG){case o.RIGHT:AB.n=AB.n.replace(/\$/g,"").replace(t,L.number.DECIMALSEPARATOR+"12$");AB.f=AB.f.replace(/"\$"/g,"").replace(/\.\d{2}/g,'.00"$"');break;case o.LEFT_WITH_SPACE:AB.n=AB.n.replace(/\$/g,"$ ");AB.f=AB.f.replace(/\$/g,"$ ");break;case o.RIGHT_WITH_SPACE:AB.n=AB.n.replace(/\$/g,"").replace(t,L.number.DECIMALSEPARATOR+"12 $");AB.f=AB.f.replace(/"\$"/g,"").replace(/\.\d{2}/g,'.00" $"');break;default:}}AB.n=AB.n.replace(t,u);AB.f=AB.f.replace(/\.\d{2}/g,v);if(AC&&AC!==w.CurrencySymbol){var z=AC.replace(/\$/g,"$$$$");AB.n=AB.n.replace(/\$/g,z);AB.f=AB.f.replace(/\$/g,z);}AB.cls=AB.r?"red":null;}return AF;}function U(w){var t="1"+(w>0?".":"").toString(),x="0"+(w>0?".":"").toString(),u;for(u=0;u<w;u++){t+=u%10;x+="0";}return[t+"E+03",x+"E+0#"];}function R(AG,AI){var AA="\u00A4",AE=/"[^"]*"/g,v=AG.match(AE),AJ="\u0091",AF=/\[[^\]]*\]/g,t=AG.match(AF),AD,AH;AD=AG.replace(AE,AA);AD=AD.replace(AF,AJ);var x=AG.indexOf("."),AC=G.getDecimalLength(AG),z=Math.max(0,AC+AI),w=AG.match(/\d(?!((\d)|(,\d)))/g),u=x!==-1?AG.charAt(x-1):w&&w[0],AB=(u||"0")+(z>0?".":"").toString();for(var y=0;y<z;y++){AB+="0";}AD=AD.replace(AC===0?/\d(?!((\d)|(,\d)))/g:/\d\.\d+/g,AB);AD=AD.split(AA);AH=AD[0];b.forEach(v,function(AL,AK){AH+=AL+AD[AK+1];});AD=AH.split(AJ);AH=AD[0];b.forEach(t,function(AL,AK){AH+=AL+AD[AK+1];});return AH;}function P(AA,t,z,y,v,u){var x=AA.parent.parent.parent,w=h(t,z.decimalPlaces,y,v,u);z.set("format",D(w,z.negativeNumbers.toString()));AA.set("items",w);AA.set("selectedIndex",b.find(w,"v",z.negativeNumbers.toString()));x.preview.preview_label.set("text",I.applyFormatToNumber(x.myData.format,r.replace(/\./g,L.number.DECIMALSEPARATOR)));}function l(){var AB=this.parent.parent,AF=AB.myData,w=AB.formatterContainer,u=S[AB.categoryPicker.selectedIndex].v,AI=this.funcType===Z.FunctionLeftStr?1:-1,y=null,AA=null,x=false,AH=0,AC=null,v=false,AE;switch(u){case E.Fixed:y=w.fixed_hBox.negativeDDL;AA=p;x=!AF.thousandSeparator;break;case E.Currency:y=w.currency_hBox2.negativeDDL;AA=F;AH=AF.currencyPosition;AC=AF.currencySymbol;break;case E.Percentage:y=w.percentage_hBox.negativeDDL;AA=e;break;case E.Scientific:v=true;break;case E.Custom:AE=true;break;default:return ;}if(AE){var AG=R(AF.format,AI);AB.preview.preview_label.set("text",I.applyFormatToNumber(AG,r.replace(".",L.number.DECIMALSEPARATOR)));AB.formatterContainer.custom_text.set("value",AG);return ;}var z=AF.decimalPlaces,t=z+AI;t=Math.max(0,t);t=Math.min(J.MaxNegativeDidigts,t);AF.set("decimalPlaces",t);if(v){var AD=U(t);AF.set("format",AD[1]);AB.preview.preview_label.set("text",AD[0]);}else{P(y,AA,AF,x,AH,AC);}}function q(t,u){return Math.max(b.find(t,"v",u),0);}function C(v){var u=this.parent.parent.categoryPicker,t=S.map(function(w){return w.v;}).indexOf(v);u.set("selectedIndex",t);}function m(t,u,w,v){return H(undefined,t,u,undefined,M.copy(v,{useRichTooltip:true,updateTooltipConfig:function(){this.richTooltip={cssClass:"vi-regular vi-tooltip-A A-center",content:w,refNode:this.domNode,posType:mstrmojo.tooltip.POS_TOPCENTER,left:15,top:33};}}));}function a(){if(mstrApp.isSingleTier&&!mstrmojo.dom.isMac()){var y=this.formatterContainer,x=L.datetime,t={day:7,month:4,year:1998},v={hour:9,min:41,sec:46},w=x&&x.DATEINPUTFORMATS,u=x&&x.TIMEINPUTFORMATS;Y=[];T=[];w.forEach(function(z){Y.push({v:z,n:O.formatDateInfo(t,z)});});u.forEach(function(z){T.push({v:z,n:O.formatTimeInfo(v,z)});});y.date_ddl.set("items",Y);y.time_ddl.set("items",T);}else{Y=J.Date;T=J.Time;}}mstrmojo.vi.ui.NumberFormatter=mstrmojo.declare(mstrmojo.VBox,null,{scriptClass:"mstrmojo.vi.ui.NumberFormatter",cssClass:"NumberFormatter-content",formatValue:null,myData:null,oldData:null,categoryPicker:null,formatterContainer:null,preview:null,shortcutRow:null,adjustAfterCategoryChange:mstrmojo.emptyFn,preBuildRendering:function(){if(this._super){this._super();}a.call(this);var t=this.formatterContainer;if(this.formatValue){t.currency_hBox1.currency_symbol.selectedValue=this.formatValue.currencySymbol;t.fixed_btn.checked=!!this.formatValue.thousandSeparator;B.addWidgetCssClass(t.fraction_ddl,e[b.find(e,"v",this.formatValue.negativeNumbers)].r?" red":"");}},postBuildRendering:function Q(){if(this._super){this._super();}if(this.formatValue){this.categoryPicker.set("selectedIndex",q(this.categoryPicker.items,this.formatValue.category.toString()));}},children:[M.copy({alias:"categoryPicker",cssClass:"nf-category",onitemSelected:function k(AG){if(!this.hasRendered){return ;}var AB=this,AE=AB.parent,w=AE.formatterContainer,t=AE.shortcutRow,AF=AE.preview.preview_label,AD=AG.v,y=AD===E.Automatic,v=AD===E.Scientific,u=[],AA=AE.myData;b.forEach(w.children,function(AH){AH.set("visible",false);});AE.border.set("visible",!y);AE.preview.set("visible",!y);AE.borderBottom.set("visible",!(!mstrApp.isWSStyling||y||v));["border","moveLeftBtn","moveRightBtn"].forEach(function(AH){t[AH].set("visible",!y);});AA.set("category",AD);AA.set("thousandSeparator",AD?K.ThousandSeparator:AE.formatValue.thousandSeparator);switch(AD){case E.Currency:P(w.currency_hBox2.negativeDDL,F,AA,false,AA.currencyPosition,AA.currencySymbol);w.currency_hBox1.currency_position.set("selectedIndex",q(J.CurrencyPosition,AA.currencyPosition.toString()));u=["currency_hBox1","currency_hBox2"];break;case E.Date:w.date_ddl.set("selectedIndex",q(Y,AA.format));u=["date_ddl"];break;case E.Time:w.time_ddl.set("selectedIndex",q(T,AA.format));u=["time_ddl"];break;case E.Percentage:P(w.percentage_hBox.negativeDDL,e,AA,false,0,null);u=["percentage_hBox"];break;case E.Fraction:w.fraction_ddl.set("selectedIndex",q(J.Fraction,AA.format));u=["fraction_ddl"];break;case E.Scientific:var z=U(AA.decimalPlaces||0);AA.set("format",z[1]);AF.set("text",z[0]);break;case E.Custom:var x=AA.customText||AA.format,AC=w.custom_text;AA.set("format",x);AC.value=x;AC.refresh();AF.set("text",I.applyFormatToNumber(x,r.replace(".",L.number.DECIMALSEPARATOR)));u=["custom_condense","custom_text"];break;case E.Fixed:P(w.fixed_hBox.negativeDDL,p,AA,!AA.thousandSeparator,0,null);u=["fixed_hBox","fixed_btn"];break;}b.forEach(u,function(AH){w[AH].set("visible",true);});AE.adjustAfterCategoryChange();}},X(S,"category")),{scriptClass:"mstrmojo.Box",cssClass:n+"nf-shortcut",alias:"shortcutRow",border:null,moveLeftBtn:null,moveRightBtn:null,children:[m("nf-shortcut-currency",function g(){C.call(this,E.Currency);},mstrmojo.desc(2051,"Currency"),undefined),m("nf-shortcut-percentage",function g(){C.call(this,E.Percentage);},mstrmojo.desc(2053,"Percentage"),undefined),m("nf-shortcut-fixed",function g(){C.call(this,E.Fixed);this.parent.parent.formatterContainer.fixed_btn.set("checked",true);},mstrmojo.desc(2050,"Fixed"),undefined),{scriptClass:"mstrmojo.Label",cssClass:"shortcut-border",alias:"border"},m("nf-MoveDecimalPoint left",function g(){l.call(this);},mstrmojo.desc(2189,"Increase Decimal"),{funcType:Z.FunctionLeftStr,alias:"moveLeftBtn"}),m("nf-MoveDecimalPoint right",function g(){l.call(this);},mstrmojo.desc(2188,"Decrease Decimal"),{funcType:Z.FunctionRightStr,alias:"moveRightBtn"})]},{scriptClass:"mstrmojo.Label",alias:"border",cssClass:"nf-border"},{scriptClass:"mstrmojo.Container",alias:"formatterContainer",cssClass:"nf-buttons",markupString:'<div id="{@id}" class="{@cssClass}" style="{@cssText}"></div>',fixed_hBox:null,fixed_btn:null,currency_hBox1:null,currency_hBox2:null,date_ddl:null,time_ddl:null,percentage_hBox:null,fraction_ddl:null,custom_condense:null,custom_text:null,markupSlots:{containerNode:function V(){return this.domNode;}},children:[{scriptClass:"mstrmojo.HBox",alias:"fixed_hBox",cssClass:W,negativeDDL:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"negative-label",text:mstrmojo.desc(13891,"Negative:")},M.copy({alias:"negativeDDL",cssClass:"nf-NegativePullDown",getOptionProps:d,onitemSelected:function k(t){N.call(this,t);}},X([],"format"))]},{scriptClass:"mstrmojo.CheckBox",alias:"fixed_btn",cssClass:n,label:"",onclick:function g(){var t=this.parent.parent;t.myData.set("thousandSeparator",this.checked?-1:0);P(this.parent.fixed_hBox.negativeDDL,p,t.myData,!this.checked,0,null);},preBuildRendering:function A(){this.set("label",mstrmojo.desc(13898,"Use 1000 Separator(#)").replace("#",L.number.THOUSANDSEPARATOR));}},{scriptClass:"mstrmojo.HBox",alias:"currency_hBox1",cssClass:W,visible:true,currency_symbol:null,currency_position:null,children:[{scriptClass:"mstrmojo.ui.editors.controls.ComboBox",alias:"currency_symbol",cssClass:"nf-CurrencySymbol",selectedValue:"$",items:c,postselectedValueChange:function j(t){var x=this,w=x.parent.parent.parent,v=t.value,u=w.myData;u.set("currencySymbol",v);P(this.parent.parent.currency_hBox2.negativeDDL,F,u,false,parseInt(u.currencyPosition,10),v);}},M.copy({cssClass:"nf-CurrencyPosition align-right",alias:"currency_position",onitemSelected:function k(t){var w=this,v=w.parent.parent.parent,u=t.v;v.myData.set("currencyPosition",parseInt(u,10));P(this.parent.parent.currency_hBox2.negativeDDL,F,v.myData,false,parseInt(u,10),v.myData.currencySymbol);}},X(J.CurrencyPosition,"currencyPosition"))]},{scriptClass:"mstrmojo.HBox",alias:"currency_hBox2",cssClass:W,negativeDDL:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"negative-label",text:mstrmojo.desc(13891,"Negative:")},M.copy({alias:"negativeDDL",cssClass:"nf-NegativePullDown",getOptionProps:d,onitemSelected:function k(t){N.call(this,t);}},X([],"format"))]},M.copy({alias:"date_ddl",cssClass:W},X(J.Date,"format",true)),M.copy({alias:"time_ddl",cssClass:W},X(J.Time,"format",true)),{scriptClass:"mstrmojo.HBox",alias:"percentage_hBox",cssClass:W,negativeDDL:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"negative-label",text:mstrmojo.desc(13891,"Negative:")},M.copy({alias:"negativeDDL",cssClass:"nf-NegativePullDown",getOptionProps:d,onitemSelected:function k(t){N.call(this,t);}},X([],"format"))]},M.copy({alias:"fraction_ddl",cssClass:W},X(J.Fraction,"format",true)),mstrmojo.Button.newWebButton(mstrmojo.desc(13893,"Condense (e.g.10M)"),function(){this.parent.custom_text.set("value",'[>=1000000]#,##0,,"M";[>=1000]#,##0,"K";0;[<=-1000000]#,##0,,"M";[<=-1000]#,##0,"K"');},false,{cssClass:"nf-condense",alias:"custom_condense"}),{scriptClass:"mstrmojo.TextBox",alias:"custom_text",cssClass:"nf-custom",onvalueChange:function f(){var v=this,u=v.parent.parent,t=v.value;u.myData.set("format",t);u.myData.set("customText",t);v.parent.parent.preview.preview_label.set("text",I.applyFormatToNumber(t,r.replace(".",L.number.DECIMALSEPARATOR)).replace(/\s/g,"&nbsp;"));}}]},{scriptClass:"mstrmojo.Label",alias:"borderBottom",cssClass:"nf-border"},{scriptClass:"mstrmojo.HBox",alias:"preview",cssClass:n+"nf-PreviewRow",preview_label:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"preview_lable",text:mstrmojo.desc(13892,"Preview:")},{scriptClass:"mstrmojo.Label",cssClass:"align-right preview-info-label",alias:"preview_label"}]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.TitleBar","mstrmojo.Image","mstrmojo.css");mstrmojo.vi.ui.CollapsibleTitleBar=mstrmojo.declare(mstrmojo.vi.ui.TitleBar,null,{scriptClass:"mstrmojo.vi.ui.CollapsibleTitleBar",btnCollapse:null,canCollapse:false,isCollapsed:false,collapse:mstrmojo.emptyFn,onToggleCollapseByUI:mstrmojo.emptyFn,setToolbarVisibility:function C(D){if(!D||!this.isCollapsed){this._super(D);}},onisCollapsedChange:function B(){if(this.canCollapse){var D=this.isCollapsed;this.parent.set("isCollapsed",D);}},getLeftToolbarChildren:function A(){var D=this;return[{scriptClass:"mstrmojo.Image",slot:"leftToolNode",alias:"btnCollapse",onclick:function(F){var G=this.parent,E=G.parent;if(G.canCollapse){G.set("isCollapsed",!G.isCollapsed);D.onToggleCollapseByUI();var H=F.e;if(H&&H.stopPropagation){H.stopPropagation();}}if(E&&E.clickToCollapse){E.clickToCollapse();}}}];}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.vi.ui.CollapsibleTitleBar,{oncanCollapseChange:function(){this.btnCollapse.set("visible",this.canCollapse);},onisCollapsedChange:function(){mstrmojo.css.toggleClass(this.domNode,"collapsed",this.isCollapsed);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout","mstrmojo._HasPopup","mstrmojo._HasOwnAvatar","mstrmojo.css","mstrmojo.dom","mstrmojo.vi.ui.TitleBar","mstrmojo.ui.menus.MenuConfig","mstrmojo.ui.menus.ToolbarConfig");mstrmojo.requiresDescs(629,1388,11477,11478);var W=mstrmojo.dom;var P=mstrmojo.string;var L="emptyTitle";var R=function(Z,X){var Y=Z.clientX,a=mstrmojo.dom.position(X);return Y<a.x+X.offsetWidth/2;};var D=function B(X){var Z=X&&X.src,Y=Z&&Z.data;return Y&&Y.id&&mstrmojo.all[Y.id];};mstrmojo.home.ui.Card=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo._HasPopup,mstrmojo._HasOwnAvatar],{scriptClass:"mstrmojo.home.ui.Card",markupString:'<div id="{@id}" class="mstrmojo-Card {@cssClass}" style="{@cssText} {@domNodeCssText}" mstrAttach:mouseover,mouseout,mouseup,click,contextmenu><div class="mstrmojo-Card-container"><div class="mstrmojo-Card-titlebar" style="{@titlebarNodeCssText}"></div><div class="mstrmojo-Card-content"></div><div class="mstrmojo-DND-mask"></div></div></div>',markupSlots:{titlebarNode:function(){return this.domNode.firstChild.firstChild;},containerNode:function(){return this.domNode.firstChild.childNodes[1];},maskNode:function(){return this.domNode.firstChild.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,ontopChange:mstrmojo.Widget.topMarkupMethod,onleftChange:mstrmojo.Widget.leftMarkupMethod,onzIndexChange:function(){this.domNode.style.zIndex=this.zIndex||1;},ondraggableChange:function(){},ontitleChange:function(){if(this.hasRendered){mstrmojo.css.toggleClass(this.domNode,L,P.isEmpty(this.title));}}},layoutConfig:{h:{titlebarNode:"auto",containerNode:"100%"},w:{titlebarNode:"100%",containerNode:"100%"},xt:true},titleBarCss:"",parent:null,model:null,title:"",titleBar:null,bubbleMouseOver:true,draggable:true,onClickTitleBar:mstrmojo.emptyFn,init:function O(X){this._super(X);this.cssClass=this.cssClass+" "+this.getTitleBarCss();this.addChildren([this.getTitleBarCfg()],0);},preBuildRendering:function C(){this.generateToolbar();return this._super();},postBuildRendering:function S(){this.titleBar.setToolbarVisibility(false);return this._super();},generateToolbar:function K(){var X=this.titleBar,Y=X.toolbarCfg;if(Y){Y.destroy();}X.set("toolbarCfg",this.updateToolbar(new mstrmojo.ui.menus.ToolbarConfig()));},getTitleBarCfg:function U(){return{scriptClass:"mstrmojo.vi.ui.TitleBar",slot:"titlebarNode",alias:"titleBar",title:this.title,editTitleOnDoubleClick:false,close:function(){this.parent.deleteSelf();},getLayoutOffsets:function X(){return{h:1,w:0};},onclick:this.onClickTitleBar};},getTitleBarCss:function A(){return P.isEmpty(this.title)?L:"";},getDisplayName:function I(){return this.title;},ontitleChange:function V(){this.titleBar.set("title",this.title);if(this.title!==this.cardDef.title){this.updateCardDef({title:this.title});}},oncontextmenu:function Q(X){if(this.shouldShowCustomizeContextMenu(X)){var Y=this.addContextMenuItems(new mstrmojo.ui.menus.MenuConfig({position:mstrmojo.dom.getMousePosition(X.e,X.hWin),isHostedWithin:false}),X);if(Y.hasMenuItems()){W.preventDefault(window,X.e);this.openPopup(Y.newInstance());}}X.cancel();},switchToEditMode:function J(){},shouldShowCustomizeContextMenu:function(X){var Y=X.getTarget(),Z=Y&&Y.nodeName.toLowerCase();return Z&&!(Z==="textarea"||(Z==="input"&&Y.type.toLowerCase()==="text"));},addContextMenuItems:function M(Y,X){return Y;},updateToolbar:function F(Z){var b=this;var Y=this.parent,X=Y.controller;var a=Z.ENUM_CORNERS;Z.setAlignment(a.BOTTOM_RIGHT,a.TOP_RIGHT);Z.isHostedWithin=false;Z.addSeparator();Z.addPopupMenuItem(mstrmojo.desc(531,"Add"),this.id,function(){return X.getAddMenuCfg();},"mstrmojo-CardMenu-add");if(this.getEditorConfig){this.getEditorConfig(this.cardDef,Z);}Z.addMenuItem(mstrmojo.desc(629,"Delete"),"cls",this.deleteSelf.bind(this));return Z;},deleteSelf:function H(){var Y=this,X=Y.parent;X.removeCard(Y);},onmouseover:function G(X){if(!mstrApp.isInteractive()){return ;}if(!this.bubbleMouseOver){X.cancel();}var Y=this._tmr;if(Y){window.clearTimeout(Y);delete this._tmr;}this.titleBar.setToolbarVisibility(true);},onmouseout:function E(){var X=this.id;this._tmr=window.setTimeout(function(){var Y=mstrmojo.all[X];if(Y){Y.titleBar.setToolbarVisibility(false);}},200);},dropZone:true,allowDrop:function(X){return X.src.data&&X.src.data.id!==this.id;},getDragData:function(){return{id:this.id};},isDragValid:function B(X){var Y=X&&X.src.node;return X&&X.src&&X.src.data&&(mstrmojo.dom.contains(this.titlebarNode,Y,true));},createAvatar:function(){var X=this.domNode.cloneNode(true);X.id="homeCardAvatar";X.style.cssText="z-index:1999; position:absolute; transition: none;";mstrmojo.css.removeClass(X,"drag");mstrmojo.css.addClass(X,"avatar");return X;},ondragstart:function(X){if(!(X&&X.src&&X.src.data)){return false;}this._super(X);if(D(X)){var Y=this.parent;mstrmojo.css.addClass(Y.domNode,"dragging");mstrmojo.css.addClass(this.domNode,"drag");}},ondragenter:function(X){if(D(X)){mstrmojo.css.addClass(this.domNode,"dragover");}},ondragover:function(X){if(D(X)){mstrmojo.css.toggleClass(this.domNode,"right",!R(X.tgt.e,this.domNode));}},ondragleave:function(X){mstrmojo.css.removeClass(this.domNode,["dragover","right"]);},ondragend:function(X){this._super(X);mstrmojo.css.removeClass((X.tgt.widget||this).domNode,["dragover","right"]);mstrmojo.css.removeClass(this.domNode,["drag"]);var Y=this.parent;window.setTimeout(function(){mstrmojo.css.removeClass(Y.domNode,"dragging");},10);},ondrop:function T(X){var e=X.tgt.widget.domNode,b=e.parentNode,d=X.src.data.id,a=mstrmojo.all[d];if(!D(X)){return ;}var c=a.domNode;var Z=R(X.tgt.e,X.tgt.node);if(Z){b.insertBefore(c,e);}else{if(e.nextSibling){b.insertBefore(c,e.nextSibling);}else{b.appendChild(c);}}var Y=mstrmojo.all[d];if(Y.htmlbox){Y.htmlbox.refresh();}this.parent.model.switchCards(mstrmojo.all[d].cardDef,this.cardDef,Z);},updateCardDef:function N(X){this.cardDef=mstrmojo.hash.copy(X,this.cardDef);this.parent.model.updateCard(this.cardDef);}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.Container","mstrmojo.desc","mstrmojo.ME.TokenInputBox","mstrmojo.mstr.EnumDSSXMLTokenTypes","mstrmojo.ME.Enum","mstrmojo._HasTooltip","mstrmojo.dom","mstrmojo.string");mstrmojo.requiresDescs(221,547,9106,9565,9566,9567,9568,11897,13542,13543,15665);var M=mstrmojo.array,S=mstrmojo.hash,I=mstrmojo.desc,O=mstrmojo.mstr.EnumDSSXMLTokenTypes,N=mstrmojo.ME.Enum.METRIC_EDIT_TYPES,L=mstrmojo.string.escape4HTMLText,E=mstrmojo.dom;var Q={VALID:0,UNKNOWN:1,VALIDATING:2,ERROR:3,AMBIGUITY:4},G={0:"valid",1:"unknown",2:"validating",3:"error",4:"ambiguity"},R={0:I(9565,"Valid Metric Formula."),1:I(9106,"Require Validation?"),2:I(9566,"Validation in Progress..."),3:I(9567,"Validation Failed with Syntax Error!"),4:I(9568,"Validation Failed with Object Ambiguity!")},T={ERROR:"-2147214845",AMBIGUITY:"-2147214846"},B={};B[T.ERROR]=Q.ERROR;B[T.AMBIGUITY]=Q.AMBIGUITY;function P(Z){if(!Z){return Q.VALID;}return B[Z]||Q.ERROR;}mstrmojo.ME.MetricEditBox=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup,mstrmojo._HasTooltip],{scriptClass:"mstrmojo.MetricEditBox",vStatus:Q.VALID,iStatus:"",showStatus:true,browseItemVisible:true,absorbAmbiguity:true,validateFunc:null,isObjectVisible:function(Z){return true;},markupString:'<div id="{@id}" class="mstrmojo-MEBox {@cssClass}" style="{@cssText}"><div class="mstrmojo-MEBox-edit"></div><div class="mstrmojo-MEBox-status {@statusCssClass}"><div class="mstrmojo-MEBox-vStatus"></div><div class="mstrmojo-MEBox-iStatus"></div></div></div>',markupSlots:{editNode:function(){return this.domNode.firstChild;},iStatusNode:function(){return this.domNode.lastChild.lastChild;},vStatusNode:function(){return this.domNode.lastChild.firstChild;},statusNode:function(){return this.domNode.lastChild;}},markupMethods:{onvStatusChange:function(){var a=this.vStatus,Z=this.vStatusNode;Z.className="mstrmojo-MEBox-vStatus "+G[a];Z.innerHTML=(this.getStatusDesc&&this.getStatusDesc(a))||R[a]||"";if(this.vStatus===Q.VALID){this.set("cValid",true);}},oniStatusChange:function(){this.iStatusNode.innerHTML=this.iStatus;}},children:[{scriptClass:"mstrmojo.ME.TokenInputBox",alias:"inputBox",slot:"editNode",renderOnScroll:false,renderBlockSize:0,bindings:{browseItemVisible:"this.parent.browseItemVisible",candidates:"this.parent.candidates"},editEmbeddedFilterToken:function(Z){var a=this.parent;if(a.editEmbeddedFilterToken){a.editEmbeddedFilterToken(Z);}}}],init:function U(Z){var a=this,b=Z.validateFunc||this.validateFunc;if(b){a.children=[{scriptClass:"mstrmojo.Button",alias:"validateBtn",slot:"statusNode",text:I(11897,"Validate"),cssClass:"mstrmojo-WebHoverButton right hoverLink",cssDisplay:"inline-block",onclick:b}].concat(this.children);}if(this._super){this._super(Z);}this.statusCssClass=this.showStatus?"":"hidden";},getSearchPattern:function Y(){return this.inputBox.getSearchPattern();},getHighlightedText:function V(a,Z){return this.inputBox.getHighlightedText(a,Z);},item2textCss:function K(Z){return{4:"m",7:"am",11:"fx",12:"a",13:"fc",43:"tr",47:"cs"}[Z.t]||"";},handleSuggestionItemSelect:function J(Z){var a=this.ambiguityDialog;if(Z){a.onItemSelect(Z);}a.close();},showDesc:true,showPath:true,ambiguityDialog:{scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-ME-ambiguityDialog",onOpen:function(){this.set("title",I(13542,"Object Ambiguity - ##").replace("##",this.ambiguousName));this.list.clearSelect();this.list.set("items",this.items);this.list.singleSelect(0);this.label.set("text",I(13543,"More than one object with the name '##' were found.").replace("##",this.ambiguousName));},children:[{scriptClass:"mstrmojo.Label",alias:"label",text:""},{scriptClass:"mstrmojo.ui.ScrollableSuggestionList",alias:"list",cssClass:"mstrmojo-ME-ambiguityList",bindings:{items:"this.parent.opener.suggestionItems"},onclick:function(Z){mstrmojo._IsList.onclick.call(this,Z);},getItemMarkup:function(c,Z){var b=this.parent.opener,a=mstrmojo.string.escape4HTMLText;var e=(b&&b.item2textCss(c))||"";var d="";if(c.path){d='<div class="mstrmojo-object-additional-info" idx="'+Z+'">'+mstrmojo.desc(16154,"From Dataset:")+" "+L(c.path)+"</div>";}else{c.standalone=true;}return'<div class="mstrmojo-object-item" idx="'+Z+'"><div class="mstrmojo-object-name '+e+'" idx="'+Z+'">'+L(c.n)+"</div>"+d+"</div>";},buildTooltip:function(Z,a){if(Z.standalone){return L(Z.path)+"> "+L(Z.n);}else{return L(Z.n)+'<div class="mstrmojo-object-additional-info">'+mstrmojo.desc(16154,"From Dataset:")+" "+L(Z.path)+"</div>";}}}],buttons:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Button mstrmojo-WebButton hot",text:I(547,"Select"),onclick:function(){var Z=this.parent.parent;Z.opener.handleSuggestionItemSelect(Z.list.selectedItem);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Button mstrmojo-WebButton",text:I(221,"Cancel"),onclick:function(){this.parent.parent.close();}}]},defaultOnTokensModify:function(){this.set("vStatus",Q.UNKNOWN);this.set("iStatus","");},postBuildRendering:function X(){this._super();this.inputBox.attachEventListener("tokensModify",this.id,"defaultOnTokensModify");this.inputBox.attachEventListener("tokensModify",this.id,"ontokensModify");},updateInputBoxItems:function H(Z){this.inputBox.set("items",Z.items);},replaceErrorToken:function C(Z){this.inputBox.replaceErrorToken(Z);},clientSideValidation:function A(f){if(!f){return ;}var b=false,d=false,a=f.items;try{b=mstrApp.rootCtrl.docCtrl.model.isMDXDataset(S.any(this.parent.parent.datasets));d=f.met==N.ADVANCED&&a[0].tp==O.SimpPrefixFun&&a[0].v==="ApplySimple";}catch(g){}if(b&&d){var Z=M.filterOne(a,function(e){return e.tp===O.DoubleQString;});var c=/(\'|\/\/|\-\-|\/\*|\*\/)/;if(Z&&c.test(Z.v)){f.vs=Q.ERROR;f.rjec=T.ERROR;f.rjed=I(15665,"MDX pass-through expression should not contain ', //, --, /*, */.");}}},handleValidation:function F(Z){if(!Z){this.set("vStatus",Q.ERROR);return ;}Z.vs=P(Z.rjec);this.set("vStatus",Z.vs);this.set("iStatus",mstrmojo.string.encodeHtmlString(Z.rjed)||"");this.updateInputBoxItems(Z);this.inputBox.focus();if(Z.vs===Q.AMBIGUITY){var k=this,g=Z.items,e=M.find(g,"sta",-1),a=g[e].v,h=function(c){k.replaceErrorToken(c);k.set("iStatus","");k.set("vStatus",Q.UNKNOWN);if(k.continueValidataion){k.continueValidataion();}else{k.set("vStatus",Q.VALID);}};var b=M.filter(Z.srfd.items,this.isObjectVisible);var j=this.parent.candidates,d=j&&j.items;if(d){M.forEach(b,function(f){var c=M.find(d,"did",f.did);if(c===-1){if(this.absorbAmbiguity){d.push(f);}}else{f.path=d[c].path;}});}if(b.length===1){h(b[0]);return ;}this.openPopup("ambiguityDialog",{zIndex:100,items:b,ambiguousName:a,onItemSelect:h});}else{if(this.postHandleValidation){this.postHandleValidation();}}},tooltip:"",useRichTooltip:true,updateTooltipConfig:function W(a){var b=a.target||E.eventTarget(a.hWin,a.e),Z=E.position(b);this.richTooltip={posType:mstrmojo.tooltip.POS_TOPLEFT,content:this.getTooltipContent(a),top:Z.y+Z.h,left:Z.x+10,cssClass:"vi-regular vi-tooltip-A"};},getTooltipContent:function(Z){return this.iStatus;},showTooltip:function D(Z,a){if(Z.target===this.iStatusNode){this._super(Z,a);}}});mstrmojo.ME.MetricEditBox.VALIDATION_STATUS=Q;mstrmojo.ME.MetricEditBox.VALIDATION_STATUS_CSS=G;mstrmojo.ME.MetricEditBox.VALIDATION_STATUS_DESC=R;}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.dom","mstrmojo.hash","mstrmojo.ServerProxy","mstrmojo.XHRServerTransport","mstrmojo.LoginEditor","mstrmojo.util.ThemeHelper","mstrmojo.SessionManager");function Q(h,f){var g=(f?"add":"remove")+"LoadingGraph";this.serverProxy[g](h);}var M=true,R=mstrmojo.hash,P="waitBox",V=".htm";function A(f){return f&&(f.sections||f.subsections||f.objects||f.panels||f.layouts||f.children);}mstrmojo._IsWebApp=mstrmojo.provide("mstrmojo._IsWebApp",{_mixinName:"mstrmojo._IsWebApp",serverProxy:null,init:function Y(f){this._super(f);if(!this.serverProxy){this.serverProxy=new mstrmojo.ServerProxy({transport:mstrmojo.XHRServerTransport});}},start:mstrmojo.emptyFn,styleName:"RWDocumentMojoStyle",modelFactory:null,enableWaitBox:false,primaryScdpMap:{},onMobileDevice:function E(){return false;},isTouchApp:function H(){return false;},getContentDimensions:function d(f){return null;},getConfiguration:mstrmojo.emptyFn,setInteractive:function L(f){if(M!==f){M=f;mstrmojo.dom.toggleSelection(window.document.body,f);return true;}return false;},isInteractive:function b(){return M;},addLoadingGraph:function G(f){Q.call(this,f,true);},removeLoadingGraph:function Z(f){Q.call(this,f);},serverRequest:function U(m,n,g){try{n=n||{};g=g||{};var j=g.src||(arguments.callee&&arguments.callee.caller.name),f=!this.enableWaitBox||g.silent,l=g.hideFailureErr,k=this;if(!m.noStyle){m.styleName=m.styleName||this.styleName;}n=mstrmojo.func.wrapMethods(n,{submission:function(o){if(!f&&mstrmojo.all[P]){mstrmojo.all[P].requestId=o;}},failure:function(o){if(!f){o.method=j;if(!(mstrApp.isSingleTier&&o.code===403)&&!l){mstrmojo.err(typeof o.mstrerr==="object"?o.mstrerr:o);}}},complete:function(){if(!f){if(mstrmojo.all[P]){delete mstrmojo.all[P].requestId;}k.hideWait();}}});if(!f){this.showWait(g&&g.waitBoxCfg);}window.setTimeout(function(){k.serverProxy.request(n,m,!!g.override,g);},0);}catch(h){mstrmojo.err(h);}},serverRequestParallelNative:function I(h,j,g){var f=g||new mstrmojo.QueueNative();f.queueHandle(h,j);},hasRequests:function T(){return this.serverProxy.hasRequests();},getWaitBoxPosition:function(){return null;},isWaiting:function C(){var f=mstrmojo.all[P];return !!(f&&f.visible);},showWait:function F(j){var l=this,n=mstrmojo.all[P]||mstrmojo.insert({scriptClass:"mstrmojo.Editor",id:P,cssClass:"mstrWaitBox",draggable:false,refreshOnNextShow:false,showTitle:false,zIndex:99999,counter:0,displayMsg:null,position:null,ondisplayMsgChange:function k(){this.msgfield.set("text",this.displayMsg);},oncounterChange:function g(){var p=this.counter,t=this.visible;if(p===0&&t){this.close();}else{if(p>0&&!t){this.open();mstrmojo.dom.center(this.editorNode);var o=this.position||l.getWaitBoxPosition();if(o){var r=o.top,q=o.left;if(r!==undefined){this.set("top",r+"px");}if(q!==undefined){this.set("left",q+"px");}}}}},children:[{scriptClass:"mstrmojo.Box",cssClass:"mstrIcon-wait",alias:"icon"},{scriptClass:"mstrmojo.Label",cssClass:"mstrWaitMsg",alias:"msgfield"},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Button mstrmojo-WebButton mstrWaitCancel",alias:"cancelBtn",text:mstrmojo.desc(2140,"Cancel")}]});n.cancelBtn.set("visible",!!(j&&j.showCancel));n.cancelBtn.onclick=function(){l.serverProxy.cancelRequests();if(j&&j.onCancel&&j.onCancel instanceof Function){j.onCancel.call(l);}};var f=j&&j.position;if(f&&((f.top||f.left)!==undefined)){n.position=j.position;}else{n.position=null;}n.set("displayMsg",(j&&j.message)||mstrmojo.desc(11960,"Loading Data..."));if(j&&j.cssClass){n.set("cssClass","mstrWaitBox "+((j&&j.cssClass)||""));n.refresh();n.refreshOnNextShow=true;}else{if(n.refreshOnNextShow){n.refresh();n.refreshOnNextShow=false;}}if(!this._waitUserLogin){n.set("counter",n.counter+1);}else{this._waitCounter=this._waitCounter+1;}var m;function h(){mstrApp.hideWait();clearTimeout(m);}if(j&&j.timeout){m=window.setTimeout(function(){h();},j.timeout);}if(j&&j._autoClose){mstrmojo.all.waitBox.curtainNode.onclick=function(){h();};}return n;},hideWait:function N(f){var g=mstrmojo.all[P];if(this._autoCloseFn){mstrmojo.dom.detachEvent(g.curtainNode,"mousedown",this._autoCloseFn,true);delete this._autoCloseFn;}if(g){g.set("cssClass","mstrWaitBox");if(!this._waitUserLogin){g.set("counter",f?0:Math.max(0,g.counter-1));}else{this._waitCounter=f?0:Math.max(0,g.counter-1);}}},getWaitBox:function(){return mstrmojo.all[P];},showProgress:mstrmojo.emptyFn,hideProgress:mstrmojo.emptyFn,startSessionManager:function X(g){var h=mstrApp,f=h.enableAutomaticSessionRecovery&&h.maxSessionIdleTime;h.sessionManager=h.addDisposable(new mstrmojo.SessionManager(mstrmojo.hash.copy(g,f?{timeBeforeSessionTimeoutWarning:mstrApp.timeBeforeSessionTimeoutWarning,maxSessionIdleTime:h.maxSessionIdleTime}:{})));if(f){h.sessionManager.start();}},isSessionExpiredError:function e(k){var j=2147760371,h=2147760372,g=2147758245,f=2147759877;k=(k<0)?(4294967296+parseInt(k,10)):k;switch(k){case j:case h:case g:case f:return true;}return false;},onSessionExpired:function a(h){if(!mstrConfig.features["enable-login-editor"]){var l=mstrApp.launchingApp||mstrApp;var m={evt:5005,src:l.name+"."+l.pageName+".5005"},g=(l.docModel&&l.docModel.bs)||(l.rootCtrl&&l.rootCtrl.docCtrl&&l.rootCtrl.docCtrl.model&&l.rootCtrl.docCtrl.model.bs)||(l.docModelData&&l.docModelData.bs);if(g){m.rwb=g;}mstrmojo.form.send(m);return ;}if(mstrApp.sessionManager){var k=mstrmojo.all[P],f=k&&k.counter>0,j=this;this._waitCounter=-1;if(f){this._waitCounter=k.counter-1;j.hideWait(true);}this._waitUserLogin=true;mstrApp.sessionManager.openLoginEditor({success:function(n){j._waitUserLogin=false;if(n&&n.sessionState){if(h){if(h.params.sessionState){h.params.sessionState=n.sessionState;}if(f){k.counter=j._waitCounter;j.showWait();}mstrmojo.xhr.request(h.method,h.baseUrl,h.callback,h.params);}}},cancelRequests:function(){mstrApp.serverProxy.cancelRequests();}});}},updateSessionState:function O(f){this.sessionState=f;},onNavigateOut:mstrmojo.emptyFn,showHelpTopic:function B(k,g){var j=g?g+"HelpPath":"helpPath",f=mstrmojo[j].call(),m=mstrApp.isSingleTier,l=mstrApp.isWorkstation,h=-1;if(k&&typeof k==="string"){f+=k;}if(m||l){window.FormWrapper.openPage(f);}else{mstrApp.openPage(f);}return false;},getSearchAutoCompleteDelay:function S(){return parseInt(mstrConfig&&mstrConfig.searchAutoCompleteDelay,10)||200;},getThemeClassName:function D(){return"mojo-theme-light";},openPage:function K(f,g){window.open(f,g);},modalEditorChange:function J(g,f){if(mstrApp&&mstrApp.isOIVM&&mstrApp.isOIVM()){if(!mstrApp.modalOpenEditors){mstrApp.modalOpenEditors={};}if(f){mstrApp.modalOpenEditors[g]=true;}else{delete mstrApp.modalOpenEditors[g];}}},parseSecondaryDataProviders:function W(k){var j,m,g,l=k.defn,n=l&&l.layouts,h=(n&&n.length)||0,f=mstrApp.primaryScdpMap;for(j=0;j<h;j++){m=n[j];g=m&&m.units;R.forEach(g,function(o,p){if(o&&o.scdp){f[p]=o.scdp.split(",");}});}},getPluginsRoot:function(){return((mstrApp.isSingleTier||mstrApp.isWorkstation)?"file://":"")+(this.pluginRoot||(mstrConfig&&mstrConfig.pluginRoot)||"../plugins/");},upload:function(m,l,k,g,j,h,f){this.serverProxy.upload(m,l,k,g,j,h,f);},getThemeProps:function c(f){var g;if(mstrApp&&mstrApp.isOIVM&&mstrApp.isOIVM()){if(!mstrApp.themeProps){mstrApp.themeProps=mstrmojo.util.ThemeHelper.getThemePropConfig({layoutstyle:mstrApp.docModel.getCurrentLayoutStyle()});}g=mstrApp.themeProps;}else{g=mstrApp.getRootController().view.themeProps;}return f?g[f]:g;}});window.$MAPF=function(){return false;};}());(function(){mstrmojo.requiresCls("mstrmojo.ValidationTextBox","mstrmojo.Calendar","mstrmojo.Popup","mstrmojo._HasPopup","mstrmojo.locales","mstrmojo.date","mstrmojo.string");var B=mstrmojo.ValidationTextBox.prototype.markupMethods,D=mstrmojo.string,A=function(){return mstrmojo.locales.datetime;},C=mstrmojo.date;mstrmojo.DateTextBox=mstrmojo.declare(mstrmojo.ValidationTextBox,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.DateTextBox",calendarToBody:false,calendarZIndex:100,changeValueOnOK:false,dynDateValue:null,showAdvanced:false,canSelectDisabledDate:false,isList:false,dtp:14,defaultDate:null,autoFormat:true,enabled:true,min:"",max:"",markupString:'<div id="{@id}" class="mstrmojo-DateTextBox {@cssClass}" style="{@cssText}"><input class="mstrmojo-DateTextBox-input" type="text" title="{@tooltip}"value="{@value}" size="{@size}" maxlength="{@maxLength}" index="{@tabIndex}" mstrAttach:focus,keyup,blur /><div class="mstrmojo-DateTextBox-icon" mstrAttach:click> </div><div class="mstrmojo-DateTextBox-popup"></div></div>',markupSlots:{inputNode:function(){return this.domNode.firstChild;},iconNode:function(){return this.domNode.childNodes[1];},popupNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},onwidthChange:function(){if(this.width){this.inputNode.style.width=(this.width-20)+"px";this.iconNode.style.left=(this.width-18)+"px";this.domNode.style.width=this.width+"px";}},onvalueChange:B.onvalueChange,onenabledChange:B.onenabledChange,onvalidationStatusChange:B.onvalidationStatusChange},calConfig:null,calendar:{scriptClass:"mstrmojo.Popup",cssClass:"mstrmojo-DateTextBox-calendar",locksHover:true,slot:"popupNode",onOpen:function(){var H=this.opener,G=H&&H.calendarZIndex,I=this.cal,E=H&&H.calConfig;if(G){this.domNode.style.zIndex=G;}for(var F in E){I.set(F,E[F]);}},children:[{scriptClass:"mstrmojo.Calendar",alias:"cal",forceNonEmptySelection:true,bindings:{showAdvanced:"this.parent.opener.showAdvanced",dtp:"this.parent.opener.dtp",value:"this.parent.opener.value",dynDateValue:"this.parent.opener.dynDateValue",enabled:"this.parent.opener.enabled",min:"this.parent.opener.min",max:"this.parent.opener.max",canSelectDisabledDate:"this.parent.opener.canSelectDisabledDate",changeValueOnOK:function(){var F=this.parent.opener.dtp,E=this.parent.opener.changeValueOnOK;return F===15||F===16||E;}},closeOnValueChange:true,onValueUpdate:function(F){var I=this.parent&&this.parent.opener;if(I){var G=I.value,E=window.mstrConfig&&window.mstrConfig.listSep||";",H=I.dtp===15?C.formatTimeInfo(this.timeVal,A().TIMEOUTPUTFORMAT):this.value;if(I.isList&&!D.isEmpty(G)){I.set("value",I.value+E+H);}else{I.set("dynDateValue",this.dynDateValue);I.set("value",H);}I.closePopup();}}}]},onclick:function(E){var F=this._lastOpened,G=this._calendarConfig;if(!G){G={};if(this.calendarToBody){delete this.calendar.slot;G.placeholder=document.body.appendChild(document.createElement("div"));G.nudge=function(){var M=this.opener;if(M){var H=mstrmojo.dom.position(M.popupNode,true),L=this.domNode,P=L.offsetHeight,I=L.offsetWidth,J=mstrmojo.dom.windowDim(),K=H.x,N=H.y;if(N+P>=J.h){N=Math.max(N-P,0);}if(K+I>=J.w){K=Math.max(K-I,0);}var O=L.style;O.top=N+"px";O.left=K+"px";}};}this._calendarConfig=G;}G.lockIW=this;if(F&&F.visible){this.closePopup();}else{this.openPopup("calendar",G);this.calendar.cal.updateSelectedDate(true);}},unrender:function(){this._super();if(this.calendarToBody&&this._calendarConfig){delete this._calendarConfig;}if(this.calendar.hasRendered){this.calendar.unrender();}},_set_value:function(H,F){var G=this.value,E=(G!==F);if(E){this.value=F;this.validate(F);}if(this.showAdvanced&&this.dynDateChanged){this.dynDateChanged=false;E=true;}return E;},_set_dynDateValue:function(H,F){var G=this.dynDateValue,E=(G!==F);if(E){this.dynDateValue=F;this.dynDateChanged=true;}return E;}});})();(function(){mstrmojo.requiresCls("mstrmojo.expr","mstrmojo.mstr.EnumNodeProperties","mstrmojo.fe.FilterExprTree","mstrmojo.fe.AndOrNode","mstrmojo.fe.RelationNode","mstrmojo.fe.DynamicNode","mstrmojo.fe.ConditionNode");var M=mstrmojo.expr.ET,K=mstrmojo.mstr.EnumNodeProperties;mstrmojo.fe.RelationFilterExprTree=mstrmojo.declare(mstrmojo.fe.FilterExprTree,null,{scriptClass:"mstrmojo.fe.RelationFilterExprTree",nodeClassMap:{14:mstrmojo.fe.AndOrNode,15:mstrmojo.fe.RelationNode,ph:mstrmojo.fe.DynamicNode,"*":mstrmojo.fe.ConditionNode},getItemIdentityProp:function(N){if(N.node&K.CONDITION){return"*";}if(N.ph){return"ph";}if((N.et===10||N.et===12)&&N.dmt===4){return M.RLS;}return N.et;},isEditable:function L(O){var N=false;switch(O&&O.et){case M.RLS:N=true;break;}return N||this._super(O);},getItemConfig:function B(Q,N,R){var O=this._super(Q,N,R),P=(Q.et===M.RLS||!!Q.relation);if(P){O.itemFunction=R.itemFunction;}return O;},newCondition:function F(P){var O=this.getSelectedItemWidget(),N=0;if((typeof microstrategy!=="undefined")&&microstrategy.bones&&microstrategy.bones.rwb_viewer){N=microstrategy.bones.rwb_viewer.nextPhIndex;}else{if(mstrApp&&mstrApp.docModelData&&mstrApp.docModelData.phIndex){N=mstrApp.docModelData.phIndex;}}if(P&&P.ph&&!P.ph.idx){P.ph.idx=N++;}if(O&&O.selected&&O.newCondition){return O.newCondition(P);}else{return this._super(P);}},createSet:function E(O,N){var P=N.rq,Q=N.cq;if(P&&Q){this.remove(Q);if(N.isMetric){mstrmojo.hash.copyProps(["applySubExpr","dmy","dmt","relation","useSchema"],P,Q);P=Q;}else{P.nds=[Q];}this.add([P],O[0]);}},removeSet:function I(N){var O=N.data,P=[O];this.remove(O);if(O.nds&&O.nds.length>0){P=O.nds;}else{delete O.dmy;delete O.relation;delete O.applySubExpr;delete O.relation;delete O.useSchema;delete O.dmt;}this.add(P,0);},nameFactory:{counter:1,names:{},clear:function(){this.resetCounter();this.names={};},resetCounter:function D(){this.counter=1;},isNameExist:function J(N){return !!this.names[N];},setName:function H(N,O){this.names[N]=O;},changeName:function C(O,N,P){this.removeName(O);this.setName(N,P);},getNewName:function G(Q,P,S){var R=P||"",O=S||"",N;while(this.isNameExist(R+this.counter+O)){this.counter++;}N=R+this.counter+++O;this.names[N]=Q;return N;},removeName:function A(N){delete this.names[N];this.resetCounter();}}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.css","mstrmojo.string","mstrmojo.fe.RelationNode","mstrmojo.fe.RelationFilterExprTree","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.mstr.EnumNodeDimty","mstrmojo.Box","mstrmojo.ui.Pulldown","mstrmojo.Label","mstrmojo.vi.ui.toolbars.TitleToolbar","mstrmojo.vi.ui.toolbars._HasToolbar");mstrmojo.requiresDescs(2790,5895,5896,7931,12036,12037,15121,15122);var F=mstrmojo.hash,A=mstrmojo.array,G=mstrmojo.mstr.EnumDSSXMLObjectTypes,H=mstrmojo.mstr.EnumNodeDimty,C=mstrmojo.css,E=mstrmojo.string,D=function(P){var Q=P.data,O=Q.dmy&&Q.dmy.uts||[],L=O.length,K=[],N,M;for(N=0;N<L;N++){K.push(E.encodeHtmlString(O[N].n));}M=K.join(", ");return'<span class="mstrmojo-text" title="'+M+'">'+M+"</span>";};var I=function(){var M=mstrmojo.desc(2790,"Set of ##"),L=M.split("##")[0];var K=L.length;if(K>0&&L[K-1]===" "){L+="&nbsp;";}return L;};mstrmojo.vi.ui.editors.fe.RelationNode=mstrmojo.declare(mstrmojo.fe.RelationNode,[mstrmojo.vi.ui.toolbars._HasToolbar],{scriptClass:"mstrmojo.vi.ui.editors.fe.RelationNode",markupString:'<div id="{@id}" class="mstrmojo-relation {@cssClass}"  style="position:relative;{@cssText}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-relation-prefix {@cssClass}"><span class="mstrmojo-textset mstrmojo-relation-prefix-text" mstrAttach:click></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}"><span class="mstrmojo-indent" onclick="mstrmojo.all[\'{@id}\'].ind()">'+mstrmojo.desc(5895,"Group conditions")+'</span><span class="mstrmojo-outdent" onclick="mstrmojo.all[\'{@id}\'].out()">'+mstrmojo.desc(5896,"Ungroup Conditions")+'</span></span></div><div class="mstrmojo-relationNode"><div class="mstrmojo-relationNode-inf"><div class="mstrmojo-relation-prefix-text">'+I()+'</div><div class="mstrmojo-textset"  mstrAttach:click></div><div class="mstrmojo-relation-prefix-text">'+(mstrmojo.desc(2790,"Set of ##").split("##")[1]||"")+'</div><div class="mstrmojo-relation-postfix-text">'+mstrmojo.desc(15121,"filtered by")+'</div><div class="mstrmojo-relation-related-by-box"></div><div class="mstrmojo-relation-toolbar"></div><img class="mstrmojo-del" src="../images/1ptrans.gif" title="'+mstrmojo.desc(7931,"Delete condition")+'"onclick="mstrmojo.all[\'{@id}\'].del()" /></div><div class="mstrmojo-relation-childTreeNode" style="position:relative;"></div></div></div>',markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},relationNode:function(){return this.domNode.lastChild;},textNode:function(){return this.domNode.childNodes[1].firstChild.childNodes[1];},relatedByBoxNode:function(){return this.domNode.childNodes[1].firstChild.childNodes[4];},toolbarNode:function(){return this.domNode.childNodes[1].firstChild.childNodes[5];},containerNode:function(){return this.domNode.childNodes[1].childNodes[1];}},markupMethods:{onprefixedAndOrEditableChange:function(){C.toggleClass(this.prefixNode,["editable"],this.prefixedAndOrEditable);},onselectedChange:function(){C.toggleClass(this.relationNode,["selected"],this.selected);},ondataChange:function(){this.prefixNode.innerHTML=this.andOrTxt();this.textNode.innerHTML=D(this);}},children:[{scriptClass:"mstrmojo.fe.RelationFilterExprTree",alias:"childTree",ignoreLayout:true,dropZone:false,draggable:false,nodeClassMap:{14:mstrmojo.fe.AndOrNode,ph:mstrmojo.fe.DynamicNode,"*":mstrmojo.fe.ConditionNode},onNew:function(K){this.parent.tree.onNew(K);},getItemConfig:function(N,K,O){var L=mstrmojo.fe.RelationFilterExprTree.prototype.getItemConfig.call(this,N,K,O),M=O.tree||O;return F.copy({tree:M,rootTree:this.parent.tree,noRelation:true,inRelation:true,onremove:function(){if(this.rootTree&&this.rootTree.onremove){this.rootTree.onremove();}},onadd:function(){if(this.rootTree&&this.rootTree.onadd){this.rootTree.onadd();}}},L);},prenodeclick:function(K){if(!K||!K.part){return ;}var L=this.rootTree;if(L&&L.onnodeclick&&this.editable){K.editor=L.editor;L.onnodeclick.call(this,K);}}},{scriptClass:"mstrmojo.Box",alias:"relBox",slot:"relatedByBoxNode",cssClass:"RelatedBy-Box",cssDisplay:"inline-block",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(12036,"Related by"),cssClass:"Label",cssDisplay:"inline-block"},{scriptClass:"mstrmojo.ui.Pulldown",alias:"relPd",cssClass:"Pulldown",cssDisplay:"inline-block",isHostedWithin:false,allowHTML:false,onitemSelected:function B(O){var N=this.parent.parent,L=N.data,K=null;if(this.selectedIndex>0){K={n:O.n,did:O.did,t:O.t||G.Metric,st:O.st||1024};}L.dmt=H.NodeDimtyOutputLevel;L.dmy=L.dmy||{};var M=L.relation=L.relation||{};if(K){M.guide=K;L.useSchema=false;}else{delete M.guide;delete M.rsTp;delete M.joTp;delete M.paTp;delete M.erTp;L.useSchema=true;}N.set("data",L);}}]},{scriptClass:"mstrmojo.vi.ui.toolbars.TitleToolbar",slot:"toolbarNode",alias:"toolbar",visible:true,hasContextMenuButton:true,cssClass:"relation-toolbar",cssDisplay:"inline-block"}],_set_data:function(N,S){var O=this._super(N,S);var L=this.data,P=!L.m,K=this.relBox.relPd,Q=A.filter(this.tree.editor.targetMetrics,function(U){return !U.um;}),T=[{n:mstrmojo.desc(12037,"System Default"),t:-1,did:"default"}].concat(Q);this.relBox.set("visible",P);if(P){var R=0;if(L.relation&&L.relation.guide){var M=L.relation.guide;R=A.find(T,"did",M.did);}if(R!==K.selectedIndex){K.set("items",T);K.set("selectedIndex",R>=0?R:0);}}return O;},updateToolbar:function J(K){var L=this;if(this._super){K=this._super(K);}K.addMenuItem(mstrmojo.desc(15122,"Convert to Condition"),"convert",function(){L.parent.removeSet(L);});K.isHostedWithin=false;return K;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.Model","mstrmojo.Container","mstrmojo.Button","mstrmojo.Label","mstrmojo.DateTextBox","mstrmojo.TextArea","mstrmojo.ui.CheckList","mstrmojo.ui.Pulldown","mstrmojo.ui.MultiSelectPulldown","mstrmojo.ui.editors.controls.TwoColumnContainer","mstrmojo._HasPopup");mstrmojo.requiresDescs(2,3,520,686,687,688,698,699,1050,5688,6013,8956,9163);var H=mstrmojo.desc,I=mstrmojo.array,C=mstrmojo.hash,K=mstrmojo.validation,F=mstrmojo.Button.newWebButton;var J;var E=function(P,N,O){if(!this.hasRendered){return ;}mstrmojo.all[J].model.settings[P]=N;if(O!==false){mstrmojo.all[J].onmodelChange();}};var G=function(O,N){N=N||{};return C.copy(N,{scriptClass:"mstrmojo.ui.CheckList",orientation:N.isVertical===false?"h":"v",multiSelect:!N.isRadio,items:O});};var L=function(P,O,N){return new mstrmojo.Box({alias:N,cssClass:"mstrmojo-SearchSettings-panel "+N,cssDisplay:"inline-block",children:[{scriptClass:"mstrmojo.Label",text:P}].concat(O)});};var B=function(N){var O=this;return{scriptClass:"mstrmojo.DateTextBox",alias:N,cssDisplay:"block",cssClass:N,width:120,required:false,calendarToBody:true,calendarZIndex:112,constraints:{trigger:K.TRIGGER.ALL},autoFormat:false,bindings:{value:function(){return O.model.settings[N];}},onfocus:function(){this.parent.parent.dateSubType.set("selectedIndex",1);},getSetting:function(){return{p:this.alias,v:this.value};}};};mstrmojo.mstr.search.SearchSettings=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.mstr.search.SearchSettings",visible:false,markupString:'<div class="mstrmojo-SearchSettings {@cssClass}" style="{@cssText}"><div class="mstrmojo-SearchSettings-container"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},onmodelChange:mstrmojo.emptyFn,init:function M(N){if(this._super){this._super(N);}J=this.id;},postBuildRendering:function A(){var O=this;this.prepareObjectTypes();var N=[];this.addChildren([L(H(8956,"Object type"),{scriptClass:"mstrmojo.ui.MultiSelectPulldown",alias:"objectType",isHostedWithin:true,orientation:"v",multiSelect:true,items:I.map(this.allowedObjectTypesData,function(R,Q){if(I.indexOf(O.model.settings.objectType,R.t)>-1){N[Q]=true;}return{n:R.d,t:R.t};}),selectedIndices:N,allIdx:-1,onselectionChanged:function(){var Q=this.items;E.call(this,this.alias,I.map(C.keyarray(this.selectedIndices),function(R){return Q[R].t;}));},onchange:function(){var Q=this.items;E.call(this,this.alias,I.map(C.keyarray(this.selectedIndices),function(R){return Q[R].t;}));},getPopupWidget:function P(){var Q=this;this.popupWidget.onClose=function(){this.list.selectedIndices=mstrmojo.hash.copy(Q.selectedIndices);this.list.refresh();};return this.popupWidget;}},"objectTypePanel"),L(H(60,"Owner"),mstrmojo.ui.Pulldown.newPulldown([{n:H(698,"Created by any user"),v:1},{n:H(699,"Created only by me"),v:2}],function(Q,R){if(Q.v!==R.v){E.call(this,this.alias,Q.v);}},0,{alias:"ownerType"}),"ownerPanel"),L(H(2052,"Date"),[mstrmojo.ui.Pulldown.newPulldown([{n:mstrmojo.desc(2058,"All"),v:0},{n:mstrmojo.desc(694,"Created"),v:1},{n:mstrmojo.desc(61,"Modified"),v:2}],function(Q,R){if(Q.v!==R.v){E.call(this,"dateType",Q.v===0?1:2,false);E.call(this,this.alias,Q.v,Q.v===0);}},0,{alias:"created",cssClass:"mstrmojo-SearchSettings-date-pulldown"}),mstrmojo.Button.newIconButton(H(5688,"Show dates"),"mstrmjo-SearchSettings-calendar",function(){this.parent.datePopup.open();},{visible:function(){var Q=this.parent.created.selectedIndex!==0;if(Q){this.parent.datePopup.open();}return Q;}},{alias:"calIcon"}),{scriptClass:"mstrmojo.ui.PopupWidget",cssClass:"mstrmojo-SearchSettings-dates-popupWidget",alias:"datePopup",visible:false,children:[{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:"dateContainer",cssClass:"mstrmojo-SearchSettings-dates",width:"238px",col1Width:"80px",col2Width:"130px",children:[G([{n:mstrmojo.desc(4049,"Last"),v:1},{n:mstrmojo.desc(294,"Between"),v:2}],{alias:"dateSubType",isRadio:true,bindings:{selectedIndex:function(){return I.find(this.items,"v",O.model.settings.dateSubType);}},postselectionChange:function(){if(this.hasRendered){if(this.selectedIndex===0){this.parent.intervalBox.intervalValue.inputNode.focus();}else{this.parent.intervalBox.startDate.inputNode.focus();}}},getSetting:function(){return{p:this.alias,v:this.items[this.selectedIndex].v};},slot:"col1Node"}),{scriptClass:"mstrmojo.Box",cssDisplay:"inline-block",alias:"intervalBox",children:[{scriptClass:"mstrmojo.TextBox",alias:"intervalValue",cssClass:"intervalValue",cssDisplay:"inline-block",size:1,maxLength:4,bindings:{value:function(){return mstrmojo.all.searchSettings.model.settings.intervalValue;}},onvalueChange:function(){},onfocus:function(){this.parent.parent.dateSubType.set("selectedIndex",0);},getSetting:function(){return{p:this.alias,v:this.value||""};}},mstrmojo.ui.Pulldown.newPulldown([{n:mstrmojo.desc(708,"Hours"),v:1},{n:mstrmojo.desc(707,"Days"),v:2},{n:mstrmojo.desc(714,"Weeks"),v:3},{n:mstrmojo.desc(710,"Months"),v:4},{n:mstrmojo.desc(709,"Years"),v:5}],function(Q,R){if(Q.v!==R.v){}},0,{alias:"intervalUnit",cssClass:"intervalUnit",cssDisplay:"inline-block",getSetting:function(){return{p:this.alias,v:this.items[this.selectedIndex].v};}}),B.call(this,"startDate"),B.call(this,"endDate")],slot:"col2Node"}]},{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-Buttons",children:[F(mstrmojo.desc(1442,"Ok"),function(){var R=this.parent.parent.dateContainer,Q=R.intervalBox;var S=[R.dateSubType,Q.intervalValue,Q.intervalUnit,Q.startDate,Q.endDate];I.forEach(S,function(T){var U=T.getSetting();mstrmojo.all[J].model.settings[U.p]=U.v;mstrmojo.all[J].onmodelChange();});this.parent.parent.close();},true,{cssDisplay:"inline-block"}),F(mstrmojo.desc(2140,"Cancel"),function(){this.parent.parent.close();},false,{cssDisplay:"inline-block"})]}]}],"datepanel"),L(H(6013,"Description (contains)"),{scriptClass:"mstrmojo.TextArea",alias:"description",rows:1,bindings:{value:function(){return mstrmojo.all.searchSettings.model.settings.description;}},onvalueChange:function(){E.call(this,this.alias,this.value);}},"descriptionPanel")]);if(this._super){this._super();}},prepareObjectTypes:function D(){var P=[],Q=[];this.allowedObjectTypes=this.allowedObjectTypesData.concat([]);I.forEach(this.allowedObjectTypes,function(S,R){P[R]=parseInt(S.t,10);Q[P[R]]=S.d;});if(this.allowedObjectTypes.length===0){this.model.settings.objectType=[];return ;}var N=this.allowedObjectTypes,O=this.model.settings.objectType;I.forEach([].concat(O),function(R){I.removeItems(O,"t",I.find(N,"t",parseInt(R,10))===-1?[R]:null);});if(O.length===0&&!(this.isMiniSearchBox||this.isDesktopSearchBox)){O=I.map(this.allowedObjectTypes,function(R){return R.t;});}this.model.settings.objectType=O;}});mstrmojo.mstr.search.SearchSettings.getLocationPulldown=function(N){var P=[{n:mstrApp.projectAlias||mstrConfig.projectName,v:39},{n:H(2,"Shared Reports"),v:7},{n:H(3,"My Reports"),v:20}],Q=0;if(N.rootFolderType===0){P.push({n:N.rootFolderName||"",v:0});Q=3;}else{Q=I.find(P,"v",N.rootFolderType);}return mstrmojo.ui.Pulldown.newPulldown(P,function O(R,S){if(R.v!==S.v){E.call(this,"rootFolderType",R.v);}},Q,mstrmojo.hash.copy(N,{cssDisplay:"inline-block"}));};mstrmojo.mstr.search.SearchSettings.getSearchTypePulldown=function(N){return mstrmojo.ui.Pulldown.newPulldown([{n:H(686,"Contains"),v:N.qse?16:1},{n:H(520,"Exactly"),v:2},{n:H(687,"Begins With"),v:4},{n:H(688,"Ends with"),v:8}],function O(P,Q){if(P.v!==Q.v){E.call(this,"nameWildcards",P.v);}},0,mstrmojo.hash.copy(N,{cssDisplay:"inline-block",cssClass:"searchType"}));};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.registry","mstrmojo.css","mstrmojo.Arr","mstrmojo.expr","mstrmojo.Label","mstrmojo.AjaxCall","mstrmojo.HTMLButton","mstrmojo.Container","mstrmojo._HasPopup","mstrmojo.HBox","mstrmojo.Dial","mstrmojo.WidgetDial","mstrmojo.ValidationTextBox","mstrmojo.Calendar","mstrmojo.DateTextBox","mstrmojo.Editor","mstrmojo.ObjectBrowser","mstrmojo.ElementsBrowser","mstrmojo.ConditionModel","mstrmojo.mstr.EnumNodeDimty");var D=mstrmojo.css,A=mstrmojo.registry,U=mstrmojo.hash,v=mstrmojo.array,F=v.find,H=mstrmojo.Arr,S=mstrmojo.expr,T=mstrmojo.dom,M=S.ET,AB=S.DTP,m=S.DTP2FN_DTP,W=S.ET2TGT,k=S.ET2TP,C=mstrmojo.meta.TP,P=mstrmojo.meta.STP,z=mstrmojo.string.encodeXMLAttribute,I=mstrmojo.mstr.EnumNodeDimty;var AI=v.hash([I.NodeDimtyOutputLevel]);var O={};O[M.AQ]={target:1,fm:1,fn:1,c0:1,c1:1};O[M.AL]={target:1,fm:1,fn:1,c0:1};O[M.AE]={target:1,fm:1,es:1};O[M.AC]={target:1,fm:1,fm2:1,fm3:1,fn:1,c0:1,c1:1};O[M.MQ]={target:1,fn:1,c0:1,c1:1,dmy:1};O[M.MC]=O[M.MQ];O["*"]={target:1};var x={};x[M.MQ]={key:"metricFns",def:S.METRIC_FNS};x[M.MC]={key:"metricFns",def:S.METRIC_FNS};x[M.AQ]={key:"formFns",def:S.FORM_FNS};x[M.AL]={key:"formFns",def:S.FORM_FNS};x[M.AC]={key:"formFns",def:S.FORM_FNS};x[M.AE]={key:"elemFns",def:S.ELEM_FNS};var AD={};AD[M.AQ]=mstrmojo.desc(7925,"Select Attribute...");AD[M.AL]=mstrmojo.desc(7926,"Browse...");AD[M.MQ]=mstrmojo.desc(7927,"Select Metric...");AD[M.MC]=mstrmojo.desc(7927,"Select Metric...");AD[M.AC]=mstrmojo.desc(7925,"Select Attribute...");function AF(AN,AP,AM){var AO=AN[AP].style;if(mstrmojo.dom.isFF){AO.overflow="hidden";AO.width=AM?"auto":"0px";AO.visibility=AM?"inherit":"hidden";}else{AO.display=AM?"block":"none";}}function u(AQ){var AP=true,AM=AQ.model,AN,AO=AM&&S.fnCstCount(AM.fn,AM.fnt);if(!AM){return ;}switch(AM.et){case M.AQ:case M.AL:case M.MQ:for(AN=0;AN<AO;AN++){AP=AP&&!AQ["invalid"+AN];}break;}AQ.okBtn.set("enabled",AP&&!!AM.completed);}function AG(AS){var AN=AS.model,AV=AN&&AN.et,AT=O[AV]||O["*"],AM=AS.children,AO,AP=AM.length;for(AO=0;AO<AP;++AO){var AR=AM[AO];if(!AR.isStep){continue;}var AU=AR.alias,AQ=AT[AU];AF(AS,AR.slot,AQ);if(AQ&&AR&&AR.update){AR.update();}}if(!AT.c1){AF(AS,"btwnNode",false);}if(!AT.dmy){AF(AS,"atNode",false);}u(AS);}function w(){var AN=this.parent,AM=((AN&&AN.cssText)||"").match(/height:\s*(\d*)px/);this.cssText=AM&&AM[0];}var c="dummy",B={did:"idBrowse",v:"idBrowse",n:mstrmojo.desc(6571,"Browse..."),t:c,css:"unselectable link"},J={did:"idErr",v:"idErr",n:mstrmojo.desc(7929,"Error loading data."),t:c,css:"unselectable"},q={did:"idWait",v:"idWait",n:mstrmojo.desc(2901,"Loading..."),t:c,css:"unselectable"};function Z(AO){if(this.updating){return ;}var AP=this.multiSelect,AR=this.selectedItem;if(AR&&AR[C]===c){this.updating=true;if(AP){this.removeSelect([this.selectedIndex]);}else{var AN=AO&&AO.removed&&Number(AO.removed[0]);AN=(AN==null)?-1:AN;this.set("selectedIndex",AN);}this.updating=false;if(AR===B){this.parent.browse(this);}}else{var AM=this.parent.model;if(AP){var AQ=this.items;AM.edit(this.alias,{added:AO.added&&v.get(AQ,AO.added),removed:AO.removed&&v.get(AQ,AO.removed),itemIdField:this.itemIdField});}else{AM.edit(this.alias,AR);}}}function E(AO,AQ,AN){var AP=AO.items,AM=v.indexOf(AP,AQ);if((AM===0)&&(AP.length===1)){AN=mstrmojo.Arr.makeObservable((AN&&AN.length)?AN.concat():[]);AO.set("items",AN);}else{if(AM>-1){AP.remove(AM,1);}if(AN&&AN.length){AP.add(AN,(AM>-1)?AM:null);}}}function L(AM){return U.copy(AM,{scriptClass:"mstrmojo.Dial",slot:AM.alias+"Node",isStep:true,cssClass:"mstrmojo-walkstep mstrmojo-"+AM.alias,itemIdField:"did",itemMarkupFunction:function(AO,AN,AP){var AQ=z(AO.n);return'<div class="dial-item '+AO.css+'" title="'+AQ+'">'+AQ+"</div>";},allowUnlistedValues:true,insertUnlistedValuesAt:0,onchange:Z,postCreate:w});}function n(AO,AM,AP){var AN=AO.cfg;if(AN){AN.data=AO;AN.parent=AP;return A.ref(AN);}AN=new mstrmojo.Label({text:AO.n,cssClass:"dial-item"});AN.markupMethods.onselectedChange=function(){mstrmojo.css.toggleClass(this.domNode,["selected"],this.selected);};AN.data=AO;AN.parent=AP;return AN;}function AK(AN,AM){var AO=AM+S.FN_SEP+AN;return(AN!=null)?{did:AO,n:AO}:null;}function N(){var AM=this.model;if(AM){if(!AM.attachEventListener){mstrmojo.hash.make(AM,mstrmojo.ConditionModel,{});}AM.attachEventListener("edit",this.id,"onmodeledit");}}function h(AM){return AM.targets?v.filter(AM.targets,function(AN){return AN[C]===S.TP.ATTR;}):[];}function Y(AN,AM){if(AM&&AM.detachEventListener){AM.detachEventListener("edit",AN.id,"onmodeledit");}}function p(AN,AM,AO,AR){AN.updating=true;AF(AN.parent,AN.slot,AM);if(AM){if(AO!=null){AN.clearSelect();AN.set("items",AO);}var AQ=AN.itemIdField,AP=AN.selectedItem;if((AP&&AP[AQ])!=(AR&&AR[AQ])){AN.set("selectedItem",AR);}else{AN.center();}}AN.updating=false;}function l(AM,AN,AP,AO){AM.updating=true;if(AN!=null){}AM.clearSelect();if(AN){AM.set("items",AN);}if(AP&&AP.length){AM.setSelectedItems(AP);}else{if(AO&&AO.length){AM.select(AO);}else{AM.center();}}AM.updating=false;}function b(AN,AM,AO,AQ,AP){AF(AN.parent,AN.slot,AM);if(AM){l(AN,AO,AQ,AP);}}function G(AO,AN){var AM=AO.model||{},AP=AM.fn;return(AP!=null)&&((AM.et===M.MQ)||(AM.et===M.MC)||(AM.et===M.AQ)||(AM.et===M.AL)||(AM.et===M.AC))&&(S.fnCstCount(AP,AM.fnt)>AN);}var AJ={};AJ[AB.DATE]=1;AJ[AB.TIME]=1;AJ[AB.TIMESTAMP]=1;function j(AP,AO,AR){var AN=[],AM=AP.length,AQ;for(AQ=0;AQ<AM;AQ++){if(F(AO,AR,AP[AQ][AR])<0){AN.push(AP[AQ]);}}return AN;}function AH(AM,AO){var AN;if(AO){switch(W[AM.et]){case"a":AN=AO[M.AC];break;case"m":AN=AO[M.MC];break;default:AN=false;break;}}else{AN=true;}return AN&&S.fn_AC_MC(AM&&AM.fn);}function o(AN){var AQ=AN&&k[AN.et],AP=AN&&AN.fm&&AN.fm.dtp,AM=AP&&S.DTP2PROMPT_STP[AP],AO={};AO[AQ]=true;if(AM){AO[AM]=true;}return AO;}function g(AS){var AM=this.targetsLastMod,Ad=AS.targetsLastMod,AP=AS.model,Ac=this._lastTargetId,AN=AP&&AP[W[AP.et]]&&AP[W[AP.et]][AS.target.itemIdField],AW=AP&&AP.fm,AY=AW&&AW.dtp,AZ=AH(AP,AS.ets),AT=false;if(!AM||!Ad||(AM!=Ad)||Ac!==AN){this.targetsLastMod=AS.targetsLastMod;AT=true;}else{if(this.lastFmDtp!==AY){this.lastFmDtp=AY;AT=true;}else{if(this.lastFnTp!==AZ){this.lastFnTp=AZ;AT=true;}}}if(AT){if(!AZ){this.clearSelect();if(this.items.length!==this.preLen){this.set("items",this.items.slice(0,this.preLen));}}else{var AU=o(AP),AQ=AS.targets?v.filter(AS.targets,function(Ae){return AU[Ae[C]]||AU[Ae[P]];}):[],AX=this.items.slice(this.preLen),AV=this.itemIdField,Ab=j(AX,AQ,AV)||[],AR=j(AQ,AX,AV)||[],Aa,AO;for(Aa=0,AO=Ab.length||0;Aa<AO;Aa++){this.remove(Ab[Aa]);}if(AR.length>0){this.add(AR,-1);}}this._lastTargetId=AN;}}function K(Ae,AT){Ae.updating=true;var AQ=Ae.parent,Ac=G(AQ,AT);AF(Ae.parent,Ae.slot,Ac);if(Ac){var AW=AQ.model||{},AP=AW.cs,Ab=AP&&AP[AT],AS=Ab&&Ab.v,AR;g.call(Ae,AQ);switch(AW.et){case M.MQ:case M.MC:AR=S.METRIC_DTP;break;case M.AQ:case M.AC:case M.AE:AR=AW.fm&&AW.fm.dtp;break;case M.AL:AR=AW.fm&&AW.fm.dtp;AS=[];for(var AX=0,AZ=AP&&AP.length;AX<AZ;AX++){AS.push(AP[AX].v);}AS=AS.join(mstrConfig.listSep);break;}AR=AR||AB.CHAR;var AU=S.fn_List(AW.fn,AW.fnt),AY=AJ[AR],Aa=AY&&!AU;var AN=Ae.ctxtBuilder,AM=AN&&AN.itemWidgets,Ad=AY?(Aa?Ae.calIndex:Ae.dtxtIndex):Ae.txtIndex,AV=AM&&AM[Ae.bwIndex],AO;for(var AX=0,AZ=Ae.preLen-1;AX<AZ;AX++){AO=AM[AX];if(AX==Ad){AO.set("dtp",AR);AO.set("isList",AU);AO.set("value",AS);AO.set("visible",true);if(AO.clearValidation){AO.clearValidation();}}else{AO.set("visible",false);}if(AU){AO.set("tooltip",mstrmojo.desc(8191,"value1## value2## ...## valueN").replace(/##/g,mstrConfig.listSep));}else{AO.set("tooltip","");}}if(AV){AV.set("text",AD[AW.et]);AV.set("visible",AQ.objectBrowsingEnabled&&AH(AW,AQ.ets));}switch(AW.et){case M.AQ:case M.AL:case M.MQ:if(Ab&&Ab.p){Ae.set("selectedItem",Ab.p);}else{Ae.set("selectedIndex",Ad);}break;case M.MC:case M.AC:Ae.set("selectedItem",AW[W[AW.et]+(2+AT)]);break;}}AF(AQ,"btwnNode",Ac);Ae.refreshScroll();Ae.updating=false;}function AE(){var AP=this.parent,AN=AP.parent,AO=(this.isValid&&this.isValid())||(!this.isValid&&!mstrmojo.string.isEmpty(this.value)),AM=AN.model;AN["invalid"+AP.cstIndex]=!AO;if(!this.updating&&AO){this.updating=true;if(AM){AM.edit(AP.alias,{v:this.value,dtp:this.dtp});}this.updating=false;}u(AN);}function X(){var AN=this.parent,AM=AN.parent;AM["invalid"+AN.cstIndex]=false;}function f(AM){return L(U.copy(AM,{scriptClass:"mstrmojo.WidgetDial",makeObservable:true,itemFunction:n,selectionPolicy:"reselect",items:[{did:0,cfg:{scriptClass:"mstrmojo.ValidationTextBox",required:true,constraints:{trigger:mstrmojo.validation.TRIGGER.ALL},onValid:AE,onInvalid:AE,onClearValidation:X,size:6,cssText:"text-align:right",visible:false}},{did:1,cfg:{scriptClass:"mstrmojo.Calendar",onvalueChange:AE,visible:false}},{did:2,cfg:{scriptClass:"mstrmojo.DateTextBox",required:true,constraints:{trigger:mstrmojo.validation.TRIGGER.ALL},onValid:AE,onInvalid:AE,onClearValidation:X,calendarToBody:true,calConfig:{onmousedown:function(AN){mstrmojo.dom.stopPropogation(AN.hWin,AN.e);}},visible:false}},{did:3,t:c,cfg:{scriptClass:"mstrmojo.Label",cssClass:"dial-item link",text:"Browse...",onclick:function(){this.parent.parent.browse(this.parent);},visible:false}}],txtIndex:0,calIndex:1,dtxtIndex:2,bwIndex:3,preLen:4,insertUnlistedValuesAt:-1,update:function(){K(this,this.cstIndex);}}));}function d(AM){return L(U.copy(AM,{insertUnlistedValuesAt:-1,postCreate:function(){w.apply(this,[]);this.ajx=mstrmojo.insert({parent:this,scriptClass:"mstrmojo.AjaxCall",isTask:true,readCache:true,writeCache:true,params:{taskId:"getAttributeForms",attributeId:null,displayedForms:"0",styleName:"MojoAttributeStyle"},onsuccess:function(){var AU=this.parent,AP=AU&&AU.parent&&AU.parent.model,AR=this.response;if((AR&&AR.did)!==AU.lastAttrId){return ;}var AQ=AR.fms||[],AT=AU.selectedItem;AQ=v.filter(AQ,function(AV){return(!AV.icf);});if(AT){var AO=v.find(AQ,AU.itemIdField,AT[AU.itemIdField]);if(AO>-1){AQ=AQ.concat();AQ.splice(AO,1);}}E(AU,q,AQ);var AS=AU.items,AN=AS.length;if(AN===1){AU.singleSelect(0);}},onerr:function(){E(this.parent,q,[J]);}});},update:function(){var AX=this.fmPost,AN=this.parent,AP=AN.model,AV=AP&&AP["a"+AX],AT=!!AV,AO,AS,AY=AP&&AP.tfm,AR=AY&&AY.dtp,AW;if(AT){switch(AP.et){case M.AQ:case M.AL:AS=AP.fm;break;case M.AC:AS=AP["fm"+AX];break;case M.AE:AS=AK(AP.fn,1);break;}if(this.lastAttrId!==AV.did){this.lastAttrId=AV.did;AO=[];if(AP.et!==M.AC){if(!AV.ilk&&(!AN.ets||AN.ets[M.AE])){var AQ=x[M.AE],AU=AQ&&AQ.key;AO=AO.concat((AU&&AN[AU])||AQ.def||[]);}}if(AS&&(AP.et!==M.AE)){AO.push(AS);}AW=this.ajx;AW.params.attributeId=AV.did;AO.push(q);H.makeObservable(AO);}}p(this,AT,AO,AS);if(AT&&AW){if(AW._delayId){window.clearTimeout(AW._delayId);delete AW._delayId;}AW._delayId=window.setTimeout(function(){delete AW._delayId;AW.send();},500);}}}));}var Q=[S.STP.PROMPT,S.STP.PROMPT_OBJECTS,S.STP.PROMPT_ELEMENTS,S.STP.PROMPT_EXPRESSION,S.STP.PROMPT_EXPRESSION_DRAFT];function AL(AM){if(AM&&!U.isEmpty(AM)){var AN=v.hash(Q);U.forEach(AM,function(AP,AO){if(AP){AN[k[AO]]=true;}});return AN;}return null;}function a(AP,AO,AR){AP.openPopup("eb",{zIndex:AP.parent.zIndex+10,left:Math.round(AR.x)+"px",top:Math.round(AR.y)+"px"});var AN=AP.eb.browser,AM=AP.model,AQ=AM&&AM.a&&AM.a.did;if(!AQ){return ;}AN.set("attributeID",AQ);AN.set("selectedItems",AM.es?U.clone(AM.es):[]);AN.initBrowser();}function AC(AT,AM,AN){AT.openPopup("ob",{zIndex:AT.parent.zIndex+10,left:Math.round(AN.x)+"px",top:Math.round(AN.y)+"px"});var AO=AT.ob.browser;AO.target=AM;var AP;switch(AM.alias){case"dmy":AP=[S.TP.ATTR,S.TP.DIM];break;case"c0":case"c1":var AR=AT.model,AQ=AR&&AR.et,AU=AR&&AR.fm,AS=AU&&AU.dtp||(AR.m?S.DTP.DECIMAL:S.DTP.UNKNOWN);AP=(AQ===M.MQ||AQ===M.MC)?[S.TP.METRIC,S.DTP2PROMPT_STP[AS]]:[S.TP.ATTR,S.DTP2PROMPT_STP[AS]];break;default:if(AT.browsableTypes){AP=AT.browsableTypes;}else{AP=AL(AT.ets);AP=AP?U.keyarray(AP,true):[S.TP.ATTR,S.TP.METRIC,S.STP.REPORT_GRID,S.STP.REPORT_GRAPH,S.STP.REPORT_ENGINE,S.STP.REPORT_TEXT,S.STP.REPORT_DATAMART,S.STP.REPORT_BASE,S.STP.REPORT_GRIDGRAPH,S.STP.REPORT_NONINTERACTIVE,S.STP.FILTER].concat(Q);}}AP[AP.length]=S.TP.FOLDER;AO.browse({folderLinksContextId:AR&&(AR.et===M.MQ||AR.et===M.MC)?27:23,onSelectCB:[AT,"onOBSelect"],browsableTypes:AP.join(",")});}mstrmojo.ConditionWalk=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.ConditionWalk",markupString:'<table id="{@id}" class="mstrmojo-walk mstrmojo-ConditionWalk {@cssClass}" style="{@cssText}" cellspacing="0" cellpadding="0" mstrAttach:click><tr><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-notNode"><div class="mstrmojo-walkstep-wrapper"></div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-targetNode"><div class="mstrmojo-walkstep-wrapper"><div class="mstrmojo-walkstep-browse">'+mstrmojo.desc(7926,"Browse...")+'</div></div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-fmNode"><div class="mstrmojo-walkstep-wrapper"></div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-esNode"><div class="mstrmojo-walkstep-wrapper"><div class="mstrmojo-walkstep-browse">'+mstrmojo.desc(7928,"Browse elements...")+'</div></div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-fnNode"><div class="mstrmojo-walkstep-wrapper"></div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-c0Node"><div class="mstrmojo-walkstep-wrapper"></div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-fm2Node"><div class="mstrmojo-walkstep-wrapper"></div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-btwnNode"><div class="mstrmojo-walkstep-wrapper">{@betweenText}</div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-c1Node"><div class="mstrmojo-walkstep-wrapper"></div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-fm3Node"><div class="mstrmojo-walkstep-wrapper"></div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-atNode"><div class="mstrmojo-walkstep-wrapper">{@atText}</div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-dmyNode"><div class="mstrmojo-walkstep-wrapper"><div class="mstrmojo-walkstep-browse">'+mstrmojo.desc(7925,"Select Attribute...")+'</div></div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-okNode"><div class="mstrmojo-walkstep-wrapper"><div></div></td></tr></table>',markupSlots:{notNode:function(){return this.domNode.rows[0].cells[0].firstChild;},targetNode:function(){return this.domNode.rows[0].cells[1].firstChild;},fmNode:function(){return this.domNode.rows[0].cells[2].firstChild;},esNode:function(){return this.domNode.rows[0].cells[3].firstChild;},fnNode:function(){return this.domNode.rows[0].cells[4].firstChild;},c0Node:function(){return this.domNode.rows[0].cells[5].firstChild;},fm2Node:function(){return this.domNode.rows[0].cells[6].firstChild;},btwnNode:function(){return this.domNode.rows[0].cells[7].firstChild;},c1Node:function(){return this.domNode.rows[0].cells[8].firstChild;},fm3Node:function(){return this.domNode.rows[0].cells[9].firstChild;},atNode:function(){return this.domNode.rows[0].cells[10].firstChild;},dmyNode:function(){return this.domNode.rows[0].cells[11].firstChild;},okNode:function(){return this.domNode.rows[0].cells[12].firstChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?D.DISPLAY_TABLE:"none";},onobjectBrowsingEnabledChange:function(){this.targetNode.firstChild.style.display=this.objectBrowsingEnabled?"":"none";}},okBtn:undefined,updateBrowseElementsParams:function(AN,AM){AN.attributeID=AM.did;},children:[L({alias:"target",insertUnlistedValuesAt:0,makeObservable:true,hideIfEmpty:true,update:function(){var AQ=this.parent,AN=AQ.model;if(this.lastModel!==AN){this.lastModel=AN;var AM=AQ.targets,AS=AQ.ets;if(AS&&AM&&AM.length){var AP=AL(AQ.ets);AM=v.filter(AM,function(AT){return AP[AT[C]];});}else{AM=AM?AM.concat():[];}var AR=AN&&AN.et,AO=AN&&AN[W[AR]];p(this,true,AM,AO);}}}),d({alias:"fm",fmPost:"",filter:false}),L({alias:"es",itemIdField:"v",insertUnlistedValuesAt:0,makeObservable:true,itemMarkupFunction:function(AN,AM,AO){var AP=z(AN.n);return'<div class="dial-checkitem '+AN.css+'" title="'+AP+'">'+AP+"</div>";},multiSelect:true,selectionPolicy:"toggle",postCreate:function V(){w.apply(this,[]);this.ajx=mstrmojo.insert({parent:this,scriptClass:"mstrmojo.AjaxCall",isTask:true,params:{taskId:"browseElements",attributeID:null,styleName:"MojoAttributeStyle",blockBegin:1,blockCount:mstrApp.elementsBlockCount||30},onsuccess:function(){var AO=this.parent,AM=this.response;if((AM&&AM.did)!==AO.lastAttrId){return ;}var AN=(AM&&AM.es)?AM.es.concat():[];l(AO,AN,AO.parent.model&&AO.parent.model.es,null);},onerr:function(){E(this.parent,q,[J]);}});},update:function R(){var AS=this.parent,AO=AS.model,AR=AO&&AO.a,AT=!!AR&&!AR.ilk,AU,AM,AQ,AV;if(AT){if(this.lastAttrId!==AR.did){this.lastAttrId=AR.did;AU=AO.es;var AP=AU&&AU.length;AU=AP?AU.concat():[];AU.push(q);if(AP){AQ=[];for(var AN=1;AN<=AP;AN++){AQ[AN]=AN;}}AV=this.ajx;AS.updateBrowseElementsParams(AV.params,AR);}else{AM=AO.es;}}b(this,AT,AU,AM,AQ);if(AT&&AV){AV.send();}}}),L({alias:"fn",allowUnlistedValues:false,update:function(){var AM=this.parent,AO=AM.model||{},AS=AO.et,AR,AT=false,AU,AN;switch(AS){case M.AE:AT=!!AO.a;break;case M.AQ:case M.AC:case M.AL:AT=!!(AO.fm&&AO.fm.did);AR=AT?AO.fm.dtp:null;break;case M.MQ:case M.MC:AT=!!AO.m;AR=AT?S.METRIC_DTP:null;break;}if(AT){var AV=m[AR];if((this.lastEt!==AS)||(this.lastFnDtp!==AV)){this.lastEt=AS;this.lastFnDtp=AV;var AQ=AS?x[AS]:null,AP=AQ&&AQ.key;AU=(AP&&AM[AP])||AQ.def||[];if(typeof (AU)==="object"){AU=AU[AV]||AU["*"];}}AN=AK(AO.fn,AO.fnt||1);}p(this,AT,AU,AN);}}),f({alias:"c0",cstIndex:0}),d({alias:"fm2",fmPost:"2"}),f({alias:"c1",cstIndex:1}),d({alias:"fm3",fmPost:"3"}),L({alias:"dmy",itemIdField:"did",hideIfEmpty:true,itemMarkupFunction:function(AN,AM,AO){var AP=z(AN.n);return'<div class="dial-checkitem '+AN.css+'" title="'+AP+'">'+AP+"</div>";},multiSelect:true,selectionPolicy:"toggle",insertUnlistedValuesAt:0,makeObservable:true,postCreate:function(){w.apply(this,[]);this.set("items",h(this.parent));},update:function t(){var AO=this.parent,AS=AO.model,AU=AS.et,AX=AS&&AS.m,AV=!!AX&&(AS.fn!==null)&&((AU===M.MQ)||(AU===M.MC))&&AS.dimtyTypes[I.NodeDimtyOutputLevel],AT,AP;if(AV){var AQ=this.targetsLastMod,AY=AO.targetsLastMod;if(!AQ||!AY||(AQ!=AY)){this.targetsLastMod=AO.targetsLastMod;AT=h(AO);}AP=[];var AN=AS.dmy&&AS.dmy.uts;for(var AW=0,AM=(AN&&AN.length)||0;AW<AM;AW++){var AR=AN[AW];AP.push(AR.utgt?AR.utgt:AR);}}b(this,AV,AT,AP);AF(AO,"atNode",AV);}}),{alias:"okBtn",slot:"okNode",scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(1442,"OK"),cssText:"width:66px;min-width:58px;",onclick:function(){var AM=this.parent;if(AM.onOK){AM.onOK();}}},{alias:"cancelBtn",slot:"okNode",scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",cssText:"width:66px;min-width:58px;",text:mstrmojo.desc(221,"Cancel"),onclick:function(){var AM=this.parent.parent;if(AM&&AM.close){AM.close();}}}],eb:{scriptClass:"mstrmojo.Editor",cssClass:T.isIE7?"mstrmojo-ElementsEditorIE7":"mstrmojo-ElementsEditor",title:mstrmojo.desc(6149,"Select Elements"),help:"element_browser_dialog_box.htm",children:[{scriptClass:"mstrmojo.ElementsBrowser",alias:"browser",onUpdateBrowseElementsParams:function(AN){var AM=this.parent.opener;AM.updateBrowseElementsParams(AN,AM.model.a);}},{scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBox",slot:"buttonNode",children:[{scriptClass:"mstrmojo.HTMLButton",alias:"ok",text:mstrmojo.desc(1442,"OK"),cssClass:"mstrmojo-Editor-button",cssText:"width:72px;margin-right:2px;",onclick:function(){var AM=this.parent.parent,AN=AM&&AM.opener;if(AN){AN.onEBSelect();AN.closePopup();}}}]}]},ob:{scriptClass:"mstrmojo.Editor",title:mstrmojo.desc(5298,"Select an Object"),help:"Select_Objects_dialog_box_.htm",children:[{scriptClass:"mstrmojo.ObjectBrowser",alias:"browser",cssText:"width:302px;",fishEyeVisible:false,closeable:false,closeOnSelect:false,browsableTypes:"3,4,8,10,12,256",includeObjectDesc:true,quickSearch:true}]},betweenText:mstrmojo.desc(308,"and"),atText:mstrmojo.desc(5923,"at"),model:null,targets:null,ets:null,defaultEt:null,defaultAttrEt:null,metricFns:null,formFns:null,elemFns:null,metricLevels:null,defaultMetricLevel:null,browsableTypes:null,postBuildRendering:function AA(){N.call(this);AG(this);return this._super();},_set_model:function e(AP,AM){var AN=this.model,AO=(AM!==AN);if(AO){Y(this,AN);AM.dimtyTypes=this.dimtyTypes||AI;this.model=AM;N.call(this);if(this.hasRendered){AG(this);}}return AO;},onmodeledit:function(AM){switch(AM&&AM.prop){case"es":case"dmy":u(this);return ;}AG(this);},browse:function r(AM){var AO=this.parent.editorNode,AN=function(AQ,AS){var AP=mstrmojo.dom.position(AQ,true),AR=mstrmojo.dom.position(AS,true);return{x:AP.x+AP.w,y:AR.y};};switch(AM&&AM.alias){case"target":case"dmy":AC(this,AM,AN(AM.alias=="target"?this.targetNode:this.dmyNode,AO));break;case"c0":case"c1":AC(this,AM,AN(AM.alias=="c0"?this.c0Node:this.c1Node,AO));break;case"es":a(this,AM,AN(this.esNode,AO));break;}},onOBSelect:function(AP){var AN=this.ob.browser,AR=AN.target;this.closePopup();var AQ=AR.itemIdField,AO=this.targets||[],AM=v.find(this.targets,AQ,AP[AQ]);if(AM===-1){AO.push(AP);this.targets=AO;this.targetsLastMod=new Date();}AR.setSelectedItems([AP],AR.multiSelect);AR.refreshScroll();},onEBSelect:function(){var AM=this.eb.browser;var AN=this.es;AN.set("selectedIndices",{});AN.setSelectedItems(AM.selectedItems,false);},onclick:function y(AM){var AN=mstrmojo.dom.eventTarget(AM.hWin,AM.e);if(AN==this.targetNode.firstChild){this.browse(this.target);}else{if(AN==this.esNode.firstChild){this.browse(this.es);}else{if(AN==this.dmyNode.firstChild){this.browse(this.dmy);}}}},objectBrowsingEnabled:true});})();(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.array","mstrmojo.Arr","mstrmojo.AjaxCall","mstrmojo.css","mstrmojo.Calendar","mstrmojo.WidgetDial","mstrmojo.Label","mstrmojo.dom","mstrmojo.expr","mstrmojo.hash","mstrmojo.registry","mstrmojo.string","mstrmojo.ListBase","mstrmojo._IsList","mstrmojo.ValidationTextBox","mstrmojo.DateTextBox","mstrmojo.mstr.EnumDataType","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.mstr.EnumDSSXMLObjectSubTypes","mstrmojo.mstr.EnumDSSConsolidationType");var r=mstrmojo.array,AG=r.map,J=mstrmojo.Arr,E=mstrmojo.css,U=mstrmojo.dom,V=mstrmojo.hash,AH=mstrmojo.string,A=mstrmojo.registry,T=mstrmojo.expr,O=T.ET,g=mstrmojo.mstr.EnumDataType,k=T.ET2TP,W=T.ET2TGT,AD=T.DTP,D=mstrmojo.meta.TP,P=mstrmojo.meta.STP,AN=mstrmojo.mstr.EnumDSSXMLObjectTypes,z=mstrmojo.mstr.EnumDSSXMLObjectSubTypes,G=mstrmojo.mstr.EnumDSSConsolidationType;var e="dummy",K={did:"idErr",v:"idErr",n:mstrmojo.desc(7929,"Error loading data."),t:e,css:"unselectable",cls:"temp"},p={did:"idWait",v:"idWait",n:mstrmojo.desc(2901,"Loading..."),t:e,css:"unselectable",cls:"temp"},C={did:"idAttribute",v:"idAttribute",n:mstrmojo.desc(518,"Attribute"),t:e,css:"unselectable"},AB={did:"idMetric",v:"idMetric",n:mstrmojo.desc(517,"Metric"),t:e,css:"unselectable"},AA={did:"idSelect",v:"idSelect",n:mstrmojo.desc(547,"Select"),t:e,css:"unselectable"},v={did:"idWait",v:"idQualification",n:mstrmojo.desc(5225,"Qualification"),t:e,css:"unselectable"},B={did:"idWait",v:"idQualification",n:mstrmojo.desc(15008,"Qualify on"),t:e,css:"unselectable"};var AM={};AM[AD.DATE]=1;AM[AD.TIME]=1;AM[AD.TIMESTAMP]=1;var w={};w[O.MQ]={key:"metricFns",def:T.METRIC_FNS};w[O.MC]={key:"metricFns",def:T.METRIC_FNS};w[O.AQ]={key:"formFns",def:T.FORM_FNS};w[O.AL]={key:"formFns",def:T.FORM_FNS};w[O.AC]={key:"formFns",def:T.FORM_FNS};w[O.AE]={key:"elemFns",def:T.ELEM_FNS};var S=[T.STP.PROMPT,T.STP.PROMPT_OBJECTS,T.STP.PROMPT_ELEMENTS,T.STP.PROMPT_EXPRESSION,T.STP.PROMPT_EXPRESSION_DRAFT];function Y(AO){if(AO&&AO.t===AN.Consolidation&&AO.st===z.ConsolidationManaged){return true;}return false;}function F(AQ,AS,AP){var AR=AQ.items,AO=r.indexOf(AR,AS);if((AO===0)&&(AR.length===1)){AP=mstrmojo.Arr.makeObservable((AP&&AP.length)?AP.concat():[]);AQ.set("items",AP);}else{if(AO>-1){AR.splice(AO,1);}if(AP&&AP.length){r.insert(AR,(AO>-1)?AO:AR.length,AP);}AQ.refresh();}}function a(AW,AV){if(this.updating){return ;}var AO=this.multiSelect,AQ=this.selectedItem,AT=AW&&AW.added,AS=AW&&AW.removed;AV=AV||this.alias;if(!AO&&AT&&AS&&AT[0]===AS[0]){return ;}if(AQ&&AQ[D]===e){this.updating=true;if(AO){this.removeSelect([this.selectedIndex]);}else{var AU=AS&&Number(AS[0]);AU=(AU==null)?-1:AU;this.set("selectedIndex",AU);}this.updating=false;}else{var AP=this.parent.parent.parent.model;if(AO){var AR=this.items;AP.edit(AV,{added:AT&&r.get(AR,AT),removed:AS&&r.get(AR,AS),itemIdField:this.itemIdField});}else{AP.edit(AV,AQ);}}}function R(AO,AQ,AR){if(this.updating){return ;}AR=AR||this.alias;var AP=AO.model;AP.edit(AR,AQ);}function t(){var AP=this.parent,AO=((AP&&AP.cssText)||"").match(/height:\s*(\d*)px/);this.cssText=AO&&AO[0];}function N(AO){return mstrmojo.mixin(AO,{scriptClass:"mstrmojo.rw.ConditionList",cssClass:"mstrmojo-"+AO.alias,postCreate:t});}function X(){var AP=this.parent,AO=AP.parent;AO["invalid"+AP.cstIndex]=false;}function m(AQ,AO,AR){var AP=AQ.cfg;if(AP){AP.data=AQ;AP.parent=AR;return A.ref(AP);}AP=new mstrmojo.Label({text:AQ.n||"&nbsp;",cssClass:"dial-item "+(AQ.t?("t"+AQ.t):"")});AP.markupMethods.onselectedChange=function(){E.toggleClass(this.domNode,["selected"],this.selected);};AP.data=AQ;AP.parent=AR;return AP;}function y(AO){switch(AO){case g.DataTypeInteger:case g.DataTypeUnsigned:case g.DataTypeDecimal:case g.DataTypeReal:case g.DataTypeDouble:case g.DataTypeFloat:case g.DataTypeCellFormatData:return g.DataTypeNumeric;default:return AO;}}function H(AQ,AP){var AO=AQ.model||{},AR=AO.fn;return(AR!=null)&&((AO.et===O.MQ)||(AO.et===O.MC)||(AO.et===O.AQ)||(AO.et===O.AL)||(AO.et===O.AC))&&(T.fnCstCount(AR,AO.fnt)>AP);}function o(AP){var AS=AP&&k[AP.et],AR=AP&&AP.fm&&AP.fm.dtp,AO=AR&&T.DTP2PROMPT_STP[AR],AQ={};AQ[AS]=true;if(AO){AQ[AO]=true;}return AQ;}function AJ(AO,AQ){var AP;if(AQ){switch(W[AO.et]){case"a":AP=AQ[O.AC];break;case"m":AP=AQ[O.MC];break;default:AP=false;break;}}else{AP=true;}return AP&&T.fn_AC_MC(AO&&AO.fn);}function j(AO){var AR=AO.model,AV=AR&&AR[W[AR.et]]&&AR[W[AR.et]][AO.columnWalk.target.itemIdField||"did"],AQ=AR&&AR.fm,AX=AQ&&AQ.dtp,AP=AJ(AR,AO.ets);if(this.targetsLastMod&&this.targetsLastMod===AO.targetsLastMod&&AV&&AV===this._lastTargetId&&this.lastFmDtp===AX&&this.lastFnTp===AP){return ;}if(!AP){this.clearSelect();if(this.items.length!==this.preLen){this.set("items",this.items.slice(0,this.preLen));}}else{var AT=AR.a?[C]:AR.m?[AB]:[],AS=d(AO),AW=AT.concat(AS),AU=this.items.slice(this.preLen);r.forEach(AU.reverse(),function(AY){this.remove(AY);},this);this.add(AW,-1);}this._lastTargetId=AV;this.lastFnTp=AP;this.lastFmDtp=AX;this.targetsLastMod=AO.targetsLastMod;}function d(AO){var AP=AO.model,AQ=o(AP),AR=AP[W[AP.et]];return T.getSortedObjectsByTypeGroup(r.filter(AO.targets,function(AS){return(AS.t!==4||AS.did!==AR.did)&&(AQ[AS[D]]||AQ[AS[P]]);}));}function Z(AP,AO){var AQ=AP.model||{},AR=AQ.cs,AS=AR&&AR[AO];if(AQ.et==O.MC&&AQ["c"+(AO+2)]){AS=AQ["c"+(AO+2)];}return AS;}function I(AO,AR){var AQ=AO.model||{},AP;switch(AQ.et){case O.MC:case O.MQ:AP=(AR&&AR.dtp)||y(AQ.m.dt)||T.METRIC_DTP;if(AP===AD.BIGDECIMAL){AP=T.METRIC_DTP;}break;case O.AQ:case O.AC:case O.AE:case O.AL:AP=AQ.fm&&AQ.fm.dtp;break;}return AP||AD.CHAR;}function AL(AP,AQ){if(!AP){return AP;}if(AP.dtp===AD.BIGDECIMAL&&AQ===O.MQ){var AO=String(AP.v);if(AO&&AO.indexOf("#")===-1){return"#"+AO+"#";}else{return AO;}}else{return AP.v;}}function x(AP,AO){var AR=AP.model||{},AS=AR.cs,AT,AQ;if(AR.et===O.AL){AQ=[];r.forEach(AS,function(AU){AQ.push(AU&&AU.v);});AQ=AQ.join(mstrConfig.listSep);}else{AT=Z(AP,AO);AQ=AL(AT,AR.et);}return AQ;}function L(Ai,Aa){Ai.updating=true;var AW=Ai.parent.parent.parent,Ah=H(AW,Aa),Ab,Ac;if(Ah){j.call(Ai,AW);var AR=AW.model||{},Ag=Z(AW,Aa),AX=I(AW,Ag),AZ=x(AW,Aa);var AV=AR.fn,AT=T.fn_List(AV,AR.fnt),Aj=AM[AX],Ad=Aj&&!AT;var AP=Ai.ctxtBuilder,Af=AP&&AP.itemWidgets,AQ=Aj?(Ad?Ai.calIndex:Ai.dtxtIndex):Ai.txtIndex,AU;for(Ab=0,Ac=Ai.preLen;Ab<Ac;Ab++){AU=Af[Ab];if(Ab==AQ){AU.set("dtp",AX);AU.set("isList",AT);var AO=AU.value,AS=AH.isEmpty(AO),Ae=AH.isEmpty(AZ);if(!(AS&&Ae)&&AO!==AZ){AU.set("value",AZ);}AU.set("visible",true);AU.set("hint",AT?mstrmojo.desc(8191,"value1## value2## ...## valueN").replace(/##/g,mstrConfig.listSep||";"):"");try{if(Ai.alias!=="c1"||Ai.parent.c1Selected){AU.focus&&AU.focus();}}catch(AY){}if(AV===1||AV===2){AU.constraints.min=0;}if(AU.clearValidation){AU.clearValidation();}}else{AU.set("visible",false);}}if(AW.hasPrompt&&Ai.selectedItem&&Ai.selectedItem.st===T.STP.PROMPT_STRING){AW.invalid0=false;}switch(AR.et){case O.AQ:case O.AL:case O.MQ:if(Ag&&Ag.p){Ai.set("selectedItem",Ag.p);}else{Ai.set("selectedIndex",AQ);}break;case O.MC:case O.AC:Ai.set("selectedItem",AR[W[AR.et]+(2+Aa)]);break;}}Ai.updating=false;}function AI(){var AR=this.parent,AP=AR.parent.parent.parent,AQ=(this.isValid&&this.isValid())||(!this.isValid&&!AH.isEmpty(this.value)),AO=AP.model;AP["invalid"+AR.cstIndex]=!AQ;if(!this.updating&&AQ){this.updating=true;if(AO){AO.edit(AR.alias,{v:this.value,dtp:this.dtp});}this.updating=false;}if(AP.updateOkBtn){AP.updateOkBtn();}}function h(AP){var AO=[{did:660,cfg:{scriptClass:"mstrmojo.ValidationTextBox",required:true,constraints:{trigger:mstrmojo.validation.TRIGGER.ONKEYUP|mstrmojo.validation.TRIGGER.VALUESET},onValid:AI,onInvalid:AI,onClearValidation:X,size:6,visible:false}},{did:154,cfg:{scriptClass:"mstrmojo.Calendar",onvalueChange:AI,visible:false}},{did:23,cfg:{scriptClass:"mstrmojo.DateTextBox",cssText:"margin-left:9px;",cssDisplay:"inline-block",required:true,constraints:{trigger:mstrmojo.validation.TRIGGER.ALL-mstrmojo.validation.TRIGGER.ALL.ONBLUR},onValid:AI,onInvalid:AI,onClearValidation:X,calendarToBody:true,autoFormat:false,calConfig:{onmousedown:function(AQ){U.stopPropogation(AQ.hWin,AQ.e);}},visible:false}}];return N(V.copy(AP,{scriptClass:"mstrmojo.WidgetDial",makeObservable:true,itemFunction:m,selectionPolicy:"reselect",items:AO.concat(),txtIndex:0,calIndex:2,dtxtIndex:2,preLen:AO.length,insertUnlistedValuesAt:-1,itemIdField:"did",update:function(){L(this,this.cstIndex);this.parent.updateScrollbars();},postCreate:function(){this._super();this.parent.parent.parent.attachEventListener("updateTargets",this.id,function(){this.update();});},itemsEffect:undefined,onchange:a}));}function AK(AP,AO){var AQ=AO+T.FN_SEP+AP;return(AP!=null)?{did:AQ,n:AQ}:null;}function Q(AQ){var AS=this.selectedItem;AQ=r.filter(AQ,function(AT){return(!AT.icf);});if(AS){var AP=r.find(AQ,this.itemIdField,AS[this.itemIdField]);if(AP>-1){AQ=AQ.concat();AQ.splice(AP,1);}}F(this,p,AQ);var AR=this.items,AO=AR.length;if(AO===1){this.singleSelect(0);}this.updateScrollbars&&this.updateScrollbars();this.parent.updateScrollbars();}function n(AQ,AP,AR,AU){AQ.updating=true;if(AP){if(AR!=null){AQ.set("items",[]);AQ.clearSelect();AQ.set("items",AR);}var AT=AQ.itemIdField,AS=AQ.selectedItem;if((AS&&AS[AT])!=(AU&&AU[AT])){var AO=Math.max(r.indexOf(AG((AR||[]),function(AV){return AV[AT];}),AU&&AU[AT]),0);AQ.set("selectedIndex",AO);}}AQ.updating=false;}function M(AQ,AP,AR,AU){AQ.updating=true;if(AP){if(AR!=null){AQ.set("items",AR);}var AT=AQ.itemIdField,AS=AQ.getSelectedItem();if((AS&&AS[AT])!=(AU&&AU[AT])){var AO=Math.max(r.indexOf(AG((AR||[]),function(AV){return AV[AT];}),AU&&AU[AT]),0);AQ.set("selectedIndex",AO);}}AQ.updating=false;}function f(AO){return N(V.copy(AO,{insertUnlistedValuesAt:-1,hasDummyLabel:true,postCreate:function(){t.apply(this,[]);this.ajx=mstrmojo.insert({parent:this,scriptClass:"mstrmojo.AjaxCall",isTask:true,readCache:true,writeCache:true,params:{taskId:"getAttributeForms",attributeId:null,displayedForms:"0",styleName:"MojoAttributeStyle"},onsuccess:function(){var AR=this.parent,AQ=this.response;if((AQ&&AQ.did)!==AR.lastAttrId){return ;}Q.call(this.parent,AQ.fms||[]);},onerr:function(){F(this.parent,p,[K]);}});},update:function AP(){var Af=this.fmPost,AY=this,AS=this.parent.parent.parent,AV=AS.model,Ad=AV&&AV["a"+Af],Aa=!!Ad,AU,AZ,Ae,AR=AS.disableElementsBrowsing,AQ=Ad&&AR&&AR(Ad),Ac=Y(Ad);if(Aa){switch(AV.et){case O.AQ:case O.AL:AZ=AV.fm;break;case O.AC:AZ=AV["fm"+Af];break;case O.AE:AZ=AK(AV.fn,1);break;}if(this.lastAttrId!==Ad.did){this.lastAttrId=Ad.did;AU=[];if(this.isFirstFm){if(!AQ&&(!Ad.ilk&&(!AS.ets||AS.ets[O.AE]))){if(this.hasDummyLabel){AU.push(AA);}var AX=w[O.AE],Ab=AX&&AX.key,AT=AX.def;AU=AU.concat((Ab&&AS[Ab])||(Ac?r.filter(AT,function(Ag){return Ag.did!=="1,57";}):AT)||[]);r.forEach(AU,function(Ag){Ag.cls="fn";});}if(this.hasDummyLabel){AU.push(mstrApp.isWSStyling?B:v);}}if(AZ&&(AV.et!==O.AE)){AU.push(AZ);}Ae=this.ajx;Ae.params.attributeId=Ad.did;Ae.params.otp=Ad.t||12;AU.push(p);J.makeObservable(AU);}}if(AQ&&AV.et===O.AE){AZ=null;}n(this,Aa,AU,AZ);if(Aa&&Ae){var AW;if(AS.getAttributeForms){AW=AS.getAttributeForms(Ad.did);}else{if(Ad.fms){AW=Ad.fms;}}if(AW&&AW.length>0){Q.call(this,AW);}else{if(Ad&&Ad.t===AN.Consolidation){Q.call(this,[]);}else{if(Ae){if(mstrApp&&mstrApp.isWorkstation){mstrApp.serverRequest(Ae.params,{success:function(Ag){if((Ag&&Ag.did)!==AY.lastAttrId){return ;}Q.call(AY,Ag.fms||[]);},failure:Ae.onerror});}else{if(Ae._delayId){window.clearTimeout(Ae._delayId);delete Ae._delayId;}Ae._delayId=window.setTimeout(function(){delete Ae._delayId;Ae.send();},500);}}}}}}}));}function AF(AO){if(AO&&!V.isEmpty(AO)){var AP=r.hash(S);V.forEach(AO,function(AR,AQ){if(AR){AP[k[AQ]]=true;}});return AP;}return null;}function l(AO,AP,AR,AQ){AO.updating=true;AO.clearSelect();r.forEach(AP,function(AS){AS.title=AH.encodeHtmlString(AS.title||AS.n||"");});if(AP){AO.set("items",AP);}if(AR&&AR.length){AO.setSelectedItems(AR);}else{if(AQ&&AQ.length){AO.select(AQ);}}AO.updating=false;}function c(AP,AO,AQ,AS,AR){if(AO){l(AP,AQ,AS,AR);}}mstrmojo.rw.ConditionList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.rw.ConditionList",allowUnlistedValues:true,itemIdField:"did",getItemProps:function u(AS,AO){var AR=!!this.selectedIndices[AO],AU=AS.n,AQ=false,AT=AS.ndetype===G.DssRecursiveDerivedElement;if(AS.t===12){var AP=r.filter(AS.fs,function(AV){return AV.fgr>0;});if(AP.length>0){AQ=true;}}return V.copy({cls:(AR?mstrmojo._IsList.SELECTED_CLS:"")+" "+(AS.css||"")+" "+(AS.t?("t"+AS.t+((AS.da||AS.um)?"d":"")+(AQ?"g":"")+(AS.st?(" st"+AS.st+(AT?" nde4ra":"")):"")):""),n:AU||"&nbsp;"},this._super(AS,AO));},onselectionChange:function AC(AO){this._super(AO);a.call(this,AO);}});mstrmojo.rw.ConditionWalkProviderBase=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.rw.ConditionWalkProviderBase",browseEs:function b(AR,AQ,AT){AR.openPopup("eb",{zIndex:AR.parent.zIndex+10,left:Math.round(AT.x)+"px",top:Math.round(AT.y)+"px"});var AP=AR.eb.browser,AO=AR.model,AS=AO&&AO.a&&AO.a.did;if(!AS){return ;}AP.set("attributeID",AS);AP.set("selectedItems",AO.es?V.clone(AO.es):[]);AP.initBrowser();},browseObjs:function AE(AV,AO,AP){AV.openPopup("ob",{zIndex:AV.parent.zIndex+10,left:Math.round(AP.x)+"px",top:Math.round(AP.y)+"px"});var AQ=AV.ob.browser;AQ.target=AO;var AR;switch(AO.alias){case"dmy":AR=[T.TP.ATTR,T.TP.DIM];break;case"c0":case"c1":var AT=AV.model,AS=AT&&AT.et,AW=AT&&AT.fm,AU=AW&&AW.dtp||(AT.m?T.DTP.DECIMAL:T.DTP.UNKNOWN);AR=(AS===O.MQ||AS===O.MC)?[T.TP.METRIC,T.DTP2PROMPT_STP[AU]]:[T.TP.ATTR,T.DTP2PROMPT_STP[AU]];break;default:AR=AF(AV.ets);AR=AR?V.keyarray(AR,true):[T.TP.ATTR,T.TP.METRIC,T.STP.REPORT_GRID,T.STP.REPORT_GRAPH,T.STP.REPORT_ENGINE,T.STP.REPORT_TEXT,T.STP.REPORT_DATAMART,T.STP.REPORT_BASE,T.STP.REPORT_GRIDGRAPH,T.STP.REPORT_NONINTERACTIVE,T.STP.FILTER].concat(S);}AR[AR.length]=T.TP.FOLDER;AQ.browse({rootFolderType:AT&&(AT.et===O.MQ||AT.et===O.MC)?5:26,folderLinksContextId:33,onSelectCB:[AV,"onOBSelect"],browsableTypes:AR.join(",")});},});var q=mstrmojo.rw.ConditionWalkProviderBase;q.onWalkChange=a;q.replaceItem=F;q.getChildJSON=N;q.walkChildPostCreateFn=t;q.cstJson=h;q.isComparisonAllowed=AJ;q.clearInvalid=X;q.updateCst=L;q.widgetItemFn=m;q.shouldShowCst=H;q.getConstant=Z;q.getConstantDataType=I;q.getConstantValue=x;q.isDATE=AM;q.getCstListCompareTgts=d;q.fmJson=f;q.fnItem=AK;q.updateList=n;q.allowedTargetTypes=AF;q.updatePulldown=M;q.onWalkChangeThroughPulldown=R;q.updateListMultiData=l;q.updateListMulti=c;})();(function(){mstrmojo.requiresCls("mstrmojo.form","mstrmojo.hash","mstrmojo.date","mstrmojo.dom","mstrmojo.expr","mstrmojo.NumberFormat","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.Button","mstrmojo._IsWebApp");var N=mstrmojo.dom,J=mstrmojo.expr,F=J.STP,C=256;var E=mstrmojo.mstr.EnumDSSXMLObjectTypes;var G={ExecuteCubeReport:"web-execute-cube-report",CreateAnalysis:"create-analysis"};function L(Q,O,S,P){var R=mstrApp.sessionManager;if(R&&R.sessionTimedout){R.openLoginEditor({success:function(){if(P!=="_blank"){mstrApp.showWait();}mstrmojo.form.send(Q,O,S,P);}});}else{if(mstrApp.pageName=="homecards"&&Q.exportMode&&Q.exportMode==1){if(!P){P=!!mstrApp.features["export-new-window"]?"_blank":"mstrExportWindow";}}if((P!=="_blank")&&(P!=="mstrExportWindow")){mstrmojo._IsWebApp.showWait({message:mstrmojo.desc(97,"Executing...")});}mstrmojo.form.send(Q,O,S,P);}}function M(O){L(O,null,"post");}mstrmojo.mstr._ObjectActions=mstrmojo.provide("mstrmojo.mstr._ObjectActions",{_mixinName:"mstrmojo.mstr._ObjectActions",execute:function I(c,P){mstrmojo.hash.copy(mstrApp.searchAppFeatures,mstrApp.features);var R=mstrApp.features;var a=mstrApp.name;var U=parseInt(c.tp||c.t,10),Z=parseInt(c.stp||c.st,10),f=c.et&&parseInt(c.et,10),g=c.dssid||c.did,b=c.viewMedia||c.dvm,X=c.visMode||0,d={};switch(U){case E.Filter:switch(Z){case 256:d={evt:3113,filterID:g,src:a+".3113"};break;case 257:this.openCustomGroupEditor(c,P);return ;}break;case E.Metric:this.openMetricEditor(c,P);return ;case E.Folder:d={evt:2001,folderID:g,src:a+".2001"};break;case E.ReportDefinition:if(this.designMode){d={evt:3005,src:a+".3005",reportID:g,reportDesignMode:this.designMode};break;}var e=1;switch(Z){case F.REPORT_CUBE:case F.REPORT_EMMACUBE:if(!mstrApp.features[G.CreateAnalysis]){return ;}var T=!R.IE9Pre||R.IE9Pre&&(R["run-vi-flash"]||R["run-vi-smart"]);if(T){var Q=R.flashvi?"analysis":"HTML5VI";B.convertFromCube({st:Z,type:Q,did:g,folderId:H(c),et:f});}else{mstrmojo.alert(mstrmojo.desc(15474,"Please upgrade your browser or turn off Internet Explorer Compatibility View to work with HTML5 dossiers."));}return ;case F.REPORT_GRID:e=1;break;case F.REPORT_GRAPH:e=2;break;case F.REPORT_GRIDGRAPH:e=3;break;}d={reportID:g,evt:4001,src:a+".4001",visMode:X,reportViewMode:e};break;case E.DocumentDefinition:var W={Reserved:0,ViewStatic:1,ViewInteractive:2,ViewEditable:4,ViewFlash:8,ExportExcel:16,ExportPDF:32,ExportHTML:64,ExportFlash:128,ExportExcelPlainText:256,ExportCSV:512,ExportPlainText:1024,ViewAnalysis:2048,HTML5Dashboard:8192,All:134217727},O={DATA:1,DESIGN:2,PDF:3,EXCEL:4,SAVE:5,DETAILS:6,FLASH_EXPORT:7,FLASH_VIEW:8,FLASH_BINARY_VIEW:9};var Y={};Y[W.ExportPDF]=O.PDF;Y[W.ExportExcel]=O.EXCEL;Y[W.ExportFlash]=O.FLASH_EXPORT;var S={};S[W.ViewStatic]=2048001;S[W.ViewInteractive]=2048001;S[W.ViewEditable]=2048001;S[W.ExportHTML]=3130;S[W.ExportExcel]=3069;S[W.ExportFlash]=3069;S[W.ExportPDF]=3069;S[W.ViewAnalysis]=2048001;S[W.HTML5Dashboard]=3140;var V=2048001;if(Z===14081){if(this.designMode){V=3104;d={evt:V,objectID:g,src:a+"."+V,rwDesignMode:this.designMode,executionMode:2};}else{if(b>8){V=S[b];d={evt:V,documentID:g,src:a+"."+V,};if((b===W.ExportExcel)||(b===W.ExportPDF)||(b===W.ExportHTML)||(b===W.ExportFlash)||(b===W.ExportExcelPlainText)||(b===W.ExportCSV)||(b===W.ExportPlainText)){d.exportMode=1;}if(b===W.HTML5Dashboard){if(N.ISDXIE&&!N.isIE9){mstrmojo.alert(mstrmojo.desc(15474,"Please upgrade your browser or turn off Internet Explorer Compatibility View to work with HTML5 dossiers"));return false;}}else{d.executionMode=Y[b]||0;}}else{V=2048001;d={evt:V,documentID:g,src:a+"."+V,visMode:X||0,currentViewMedia:b||2};if(mstrApp.optimizeFitToPage){d.innerWidth=window.innerWidth;d.innerHeight=window.innerHeight;}}}}else{if(Z===14080){d={evt:32001,documentID:g,src:a+".32001"};}}break;case E.Prompt:d={evt:3119,objectID:g,promptType:c.pt,src:a+".3119"};break;default:return false;}M(d);},openCustomGroupEditor:function(U,W){var R=U.did;var P="mstrCGE",T=mstrmojo.all[P],V=function(X){if(!T){return ;}X.scriptClass="mstrmojo.Obj";T.set("model",mstrmojo.insert(X));T.open();},Q=function(){var X={success:function(Y){if(!Y){mstrmojo.alert("Error retrieving the Custom Group definition!");return ;}V(Y);},failure:function(Y){mstrmojo.alert(Y.getResponseHeader("X-MSTR-TaskFailureMsg"));}};mstrmojo.xhr.request("POST",mstrConfig.taskURL,X,{taskId:"getCustomGroup",customGroupId:R,styleName:"MojoCustomGroupStyle"});},S=function(){V({cgp:{agg:1,flat:false,pf:true,rfi:-1,ce:true,isp:true}});},O=R?Q:S;if(!T){T=mstrmojo.insert(mstrmojo.CustomGroupEditor);T.set("noRefresh",true);if(W&&W.zIndex){T.set("zIndex",W.zIndex);}}O();},openMetricEditor:function(Q,O){var P=Q.did;var S="mstrMetricIDE",R=mstrmojo.all[S];if(!R){R=mstrmojo.insert({scriptClass:"mstrmojo.ME.MetricIDE",id:S,metricId:P,noRefresh:(mstrApp.pageName!=="my"&&mstrApp.pageName!=="shared")});if(O&&O.zIndex){R.zIndex=O.zIndex;}}else{R.set("metricId",P);}R.open(null,{action:{cmd:P?"edit":"add"}});},openDataImport:function(O){K(O||{});},createFilter:function(){var O={evt:3113,src:(mstrApp.servletName||mstrApp.name)+".3113",isNew:true};L(O);},createDashboard:function(){var P=!mstrmojo.resolveFeature("flashvi"),O={evt:3187,src:(mstrApp.servletName||mstrApp.name)+".3187"};if(P&&mstrmojo.dom.isIE8){mstrmojo.alert(mstrmojo.desc(15474));return false;}if(P&&mstrApp.currentFolderId){O.parentFolderId=mstrApp.currentFolderId();}L(O);},openSharingEditor:A});var B={isCubeSupportDDA:function(O){return !!(O&&(O.dda===1||O.dda===3));},allowCreateReport:function(O){if(O&&O.ddam===2){mstrmojo.alert(mstrmojo.desc(13384,"The 'Create Report' option is currently not available for Live Connection Datasets."));}return true;},getCubesInfo:function(O,P){mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(Q){P(Q);}},{taskId:"getUserDICubeInfo",cubeIds:O.join(",")});},convertFromCube:function(P){var S=this,R=P.type,O=P.did,Q=P.folderId;this.getCubesInfo([O],function(U){var V=U[O],Z=mstrApp.name,Y=(V&&!V.published&&S.isCubeSupportDDA(V)),X=!!Y?128:0,W={};if(V&&V.ddam!==2&&!V.published){if(window.mstrApp&&!mstrApp.features["web-execute-cube-report"]){mstrmojo.alert(mstrmojo.desc(14111,"This cube has not been published")+" "+mstrmojo.desc(12933,"You do not have enough privileges to perform this operation"));}else{mstrmojo.confirm(mstrmojo.desc(14111,"This cube has not been published"),{confirmBtn:{t:mstrmojo.desc(9242,"Republish"),fn:function T(){if(P.st===779&&(P.et&C)>0){K({CubeDesc:"",CubeName:P.executeReport,ReportId:O,folderId:Q,StatusCode:2,isEdit:false,callback:function(){S.convertFromCube(P);}});}else{var a={evt:4001,src:mstrApp.name+".4001",reportID:O,visMode:0,reportViewMode:1};M(a);}}}});}return ;}switch(R){case"document":W={evt:"3104",src:Z+".3104",executionMode:"2",rwDesignMode:"1",objectType:"3",objectID:O,rwCreateFlags:0};if(Q){W.saveFolderId=Q;}break;case"analysis":W={evt:"3104",src:Z+".3104",executionMode:"1",rwDesignMode:"0",objectType:"3",objectID:O,rwCreateFlags:16,rwViewMode:8192};break;case"HTML5VI":W={evt:"3185",src:Z+".3185",executionMode:"1",rwDesignMode:"0",objectType:"3",objectID:O,rwCreateFlags:32};if(Q){W.saveFolderId=Q;}break;case"report":if(!S.allowCreateReport(V)){return ;}W={evt:"3005",src:Z+".3005",srcID:O,srcType:2,reportDesignMode:1};break;}if(typeof W.rwCreateFlags==="number"){W.rwCreateFlags|=X;}M(W);});}};function H(Q){if(Q.fdid){return Q.fdid;}var O=Q.anc&&Q.anc.items||[],P=O[O.length-1];return P&&P.did;}function D(P){var O=function(){mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(Q){if(Q){var S=Q.descriptors.length,R;for(R=0;R<S;R++){var T=Q.descriptors[R];mstrmojo.descriptors[T.key]=T.v;}}if(P.callback){P.callback();}},failure:function(){if(P.callback){P.callback();}}},{taskId:"getBundleDescriptors",bundle:P.bundle});};O();}function K(Q){var S=Q.folderId,T=this,R=window.microstrategy;R?R.showWait():mstrmojo._IsWebApp.showWait();var P=function(){var V;if(T.dataImportId){V=mstrmojo.all[T.dataImportId];}if(!V){O();mstrmojo.requiresBundle("mojo-di.js");V=mstrmojo.insert({scriptClass:"mstrmojo.DI.DIContainer"});V.dataImportCallback=function(W){var X=document.getElementById("formRefresh");if(X&&W&&W.length>0){X.submit();}};T.dataImportId=V.id;}if(Q){mstrmojo.hash.copy(Q,V.dataImportParams);if(Q.callback){V.dataImportCallback=function(W){Q.callback(W);};}else{if(Q.isCalledByFlex){V.dataImportCallback=function(X){if(X&&X.length>0){var W;if(navigator.appName.indexOf("Microsoft")!==-1){W=window.MstrFlashFlashViewer;}else{W=document.MstrFlashFlashViewer;}if(W){W.onCloseDI(X);}}};}}}if(S){mstrmojo.hash.copy({cubeSaveFolderId:S},V.dataImportParams);}V.open();R?R.showWait(false):mstrmojo._IsWebApp.hideWait();};var U=function(){var W={success:function(X){if(X){P();}else{if(mstrApp.onSessionExpired){mstrApp.onSessionExpired();}}}},V={taskId:"keepSessionAlive"};mstrmojo.xhr.request("POST",mstrConfig.taskURL,W,V);};var O=function(){var V="data-import.css";if(N.isIE8||N.isIE9){V="data-import-ie.css";}var W=document.createElement("link");W.rel="stylesheet";W.href="../javascript/mojo/css/"+V;W.type="text/css";document.head.appendChild(W);};if(!this.dataImportId){D({bundle:"mojo-di",callback:U});}else{U();}}function A(Q,Y,P,V){var U="sharingEditor",O=mstrApp.oi,T=(Y&&Y.objId)||O.objId,R=(Y&&Y.objType)||O.objType,X=(Y&&Y.mid)||mstrApp.getMsgID&&mstrApp.getMsgID(),W=V&&V.showLinkOnOpen,Z=function(c){var b=mstrmojo.all[U];if(!b){V=V||{};c.acls=V.acls||c.acls;b=mstrmojo.insert(mstrmojo.hash.copy(V,{scriptClass:"mstrmojo.SharingEditor",guestModeEnabled:mstrApp.guestModeEnabled,mid:X,id:U,oi:c,href:Q,isLinkDirty:P,viewMode:Y?Y.viewMode:1,lastState:Y?Y.lastState:0,showWait:function(){mstrApp.showWait();},hideWait:function a(){mstrApp.hideWait();},onClose:function(){this.destroy();}}));}else{b.set("oi",c);b.href=Q;b.mid=X;b.isLinkDirty=P;b.viewMode=Y?Y.viewMode:1;b.lastState=Y?Y.lastState:0;b.showLinkOnOpen=W;}b.open();},S=function(){var a={success:function(b){Z(b.objects[0]);},failure:function(b){mstrmojo.alert(b.getResponseHeader("X-MSTR-TaskFailureMsg"));},complete:function(){mstrApp.hideWait();}};mstrmojo.xhr.request("POST",mstrConfig.taskURL,a,{taskId:"getObjectInfo",objectIDs:T,objectTypes:R,includeACL:mstrmojo.resolveFeature("web-use-sharing-editor"),sessionState:mstrApp.sessionState});};mstrApp.showWait();S();}}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.expr","mstrmojo.string","mstrmojo.form","mstrmojo._FormatDefinition","mstrmojo.ME.MetricDataService","mstrmojo.ME.MetricEditBox","mstrmojo.mstr.EnumDataType","mstrmojo.ME.Enum","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.mstr.EnumDSSXMLObjectSubTypes","mstrmojo.PassThroughOptions");mstrmojo.requiresDescs(218,219,221,531,628,1442,1918,2102,2116,2154,2213,2919,5298,5424,5728,5891,7558,7984,7987,11566,13249,15656);var o=mstrmojo.array,F=mstrmojo.string,t=mstrmojo.mstr.EnumDataType,A=mstrmojo.ME.MetricDataService,r=mstrmojo.mstr.EnumDSSXMLObjectTypes,V=mstrmojo.mstr.EnumDSSXMLObjectSubTypes,H=mstrmojo.hash;function U(z){var w=z.items,S=w.length,y="",x;for(x=0;x<S;x++){y+=w[x].v;}return y;}var L=mstrmojo.dom,E=mstrmojo.string,R=mstrmojo._FormatDefinition,n=mstrmojo.ME.MetricEditBox.VALIDATION_STATUS,C=mstrmojo.ME.Enum.METRIC_EDIT_TYPES;var X=function(S){if(!S){return n.VALID;}return{"-2147214845":n.ERROR,"-2147214846":n.AMBIGUITY}[S]||n.ERROR;},W=function(AC){var z=AC.items,w=z.length,AB=z[z.length-1],y,AA,x=[],S="";if(z[0]&&z[0].tp!==38){x.push({v:"&",tp:38,lv:4,sta:2});}for(y=0,w=z.length;y<w;y++){AA=z[y];if(AA.isNew&&!AA.oi&&AA.tp!==283){S+=AA.v;}else{if(!E.isEmpty(S)){x.push({v:S,tp:2,lv:1});S="";}x.push(AA);}}if(!E.isEmpty(S)){x.push({v:S,tp:2,lv:1});S="";}if(AB&&AB.tp!==-1){x.push({v:"",tp:-1,lv:4,sta:2});}return{items:x};},P=function(x){var y=W(x.tks);var w={items:true,v:true,tp:true,lv:true,oi:true,n:true,did:true,t:true,st:true,exv:true,extp:true,asc:true},S={getArrItemName:function(AB,z,AA){return"tkn";},isSerializable:function(AB,AA,z){return(w[AB])?true:false;}};return E.json2xml("tknstrm",y,S);},m=function(y){var w=y.items,S=w.length,x=w[w.length-1];if(x&&x.tp===-1){w.pop();}if(w[0]&&w[0].tp===38){w.splice(0,1);}},p=function(S){return"";},k=function(S,x){var w=[];S.oi.tks.items=w;x.clearTokens(w);},M=function(AA,z){var y=[];y.push("<mt>");if(AA.fmt&&!z){var S={getArrItemName:function(AD,AB,AC){return AD.substr(0,AD.length-1);},isSerializable:function(AI,AG,AF){if(mstrmojo.array.indexOf(["header_format","grid_format"],AI)>-1){var AJ=AG[AF][AI];if(!AJ){return{};}var AD="<"+AI+">",AH;for(AH in AJ){AD+="<prs n='"+AH+"'>";var AC=AJ[AH],AB;for(AB in AC){var AE=AC[AB];AD+="<pr n='"+AB+"' v='"+(AE==="pru"?"":AE)+"'";AD+=AE==="pru"?' pru="1"':"";AD+="/>";}AD+="</prs>";}AD+="</"+AI+">";return{child:AD};}return true;},skipNull:true};y.push(E.json2xml("fmt",AA.fmt,S));}if(AA.prss&&!z){var x={getArrItemName:function(AD,AB,AC){return AD.substr(0,AD.length-1);},isSerializable:function(AI,AF,AD){if(mstrmojo.array.indexOf(["AnalyticalEngineProperties","DatamartProperties","VLDBSelect","VLDBFunction","VLDBReport"],AI)>-1){var AE=AF[AD][AI];if(!AE){return{};}var AC=[],AG=[],AH;AC.push("<prs n='"+AI+"' ");for(AH in AE){var AB=AE[AH];if(AB!=null){if(typeof AB==="object"){AG.push(E.json2xml("pr",AB,{skipNull:true,convertBoolean:true,isSerializable:function(AL,AK,AJ){return true;}}));}else{AC.push(AH+"='"+AB+"' ");}}}AC.push(">");AC.push(AG.join(""));AC.push("</prs>");return{child:AC.join("")};}return true;},skipNull:true};y.push(E.json2xml("prss",AA.prss,x));}if(AA.mps){y.push(E.json2xml("mps",AA.mps,{skipNull:true,convertBoolean:true,isSerializable:function(AD,AC,AB){return true;}}));}if(AA.datp&&!z){y.push(E.json2xml("datp",AA.datp,{skipNull:true,convertBoolean:true,isSerializable:function(AD,AC,AB){return true;}}));}if(AA.sbs&&!z){var w={getArrItemName:function(AD,AB,AC){return(AD==="avs")?"sb":AD.substr(0,AD.length-1);},isSerializable:function(AD,AC,AB){return true;},skipNull:true};y.push(E.json2xml("sbs",AA.sbs,w));}y.push("</mt>");return y.join("");},G=function(w,S){w.set("enabled",!S);var x="mstrmojo-InlineWaitIcon";if(w.iconClass){w.set("iconClass",w.iconClass.replace(new RegExp(x),"")+" "+(S?x:""));}else{mstrmojo.css.toggleClass(w.domNode,x,S);}},I=function(w,S){var x={taskId:"saveMetricDefinition",tokenStreamXML:P(w),localSymbolFolderXML:p(w),metricXML:M(w),metricId:w.did||"",outputFlags:327695,description:w.desc||"",name:w.n||"",saveAs:S};if(E.isEmpty(w.metricId)){x.isNew=true;}return x;},O=function(x){var w=function(y){var AA=this.parent;var z=mstrmojo.desc(7987,"The ## '###' has been saved successfully.").replace("##","Object").replace("'###'","");if(AA){AA.ob.refreshContent();AA.onObjectSaved({name:AA.name,did:y.did,desc:AA.desc});z=mstrmojo.desc(7987,"The ## '###' has been saved successfully.").replace("##",AA.typeDesc||"Object").replace("###",AA.name);}mstrmojo.alert(z,x.onSaved,mstrmojo.desc(7984,"Object Saved"));if(AA){AA.close();}x.dirty=false;},S={success:w,failure:mstrmojo.SaveAsEditor.SAVEAS_CALLBACK.failure};return S;},K=function K(AC){var y=AC.items,S;for(var x=0;x<y.length;x++){var AD=y[x];if(AD&&AD.oi&&A.hasLookupForAttributesProps(AD.oi.did)){var AB=y[x+1];if(AB.v==="<"){var z=false;for(var AA=x+2;AA<y.length&&y[AA].v!==">";AA++){var w=y[AA];if(w&&w.v==="UseLookupForAttributes"){z=true;break;}}if(!z){S=x+2;y.splice(S,0,{v:"UseLookupForAttributes"},{v:"="},{v:"False"},{v:","});x=x+5;}}else{S=x+1;y.splice(S,0,{v:"<"},{v:"UseLookupForAttributes"},{v:"="},{v:"False"},{v:">"});x=x+5;}}}},N=function(AC,z){var x=this;G(x,true);var AD=mstrmojo.ME._MetricEditorHelper.oi=AC.oi,y=P(AD),AA=p(AD),AB=M(AD,true),AE=function(AH){if(AH&&AH.tks){var AI=AH.tks;m(AI);var AG=AI.items;if(mstrApp&&mstrApp.isVI){AD.conditions=[];var AF=mstrApp&&mstrApp.getRootController().docCtrl.model;o.forEach(AG,function(AL){var AM=AL.oi,AN=AM&&AM.t,AJ=AM&&AM.st,AK=AM&&AM.did;if(AN===r.Filter&&AJ===V.Filter){var AO=AF.getEmbeddedFilter(AK);if(AO){AM.isEmbedded=true;AD.conditions.push(AO);}}});}AD.tks=AI;if(AC.clientSideValidation){AC.clientSideValidation(AI);}AC.checkEditorFallback(AC.ide.candidates.items,AD);AI.vs=X(AI.rjec);AC.set("vStatus",AI.vs);AC.set("iStatus",AI.rjed||"");if(AC.handleValidation){AC.handleValidation(AI);}if(z&&(AI.vs===n.VALID)){K(AI);switch(z){case"save":case"saveAs":if(AC.isDME){AC.handleDerivedMetricAction(z,AD);}else{AC.handleMetricAction(z,AD);}break;case"switch":if(AC.cbSwtichEditor){AC.cbSwtichEditor(AC);}break;}}else{if(z&&AI.vs===n.ERROR){mstrmojo.alert(mstrmojo.desc(9826,"The metric definition has an error. Please correct before proceeding."),null,mstrmojo.desc(9571,"Syntax Error!"));}}}},w=function(AF){mstrmojo.alert(AF.message||AF.getResponseHeader("X-MSTR-TaskFailureMsg"));},S=function(AF){G(x,false);};A.validateMetric({tokenStreamXML:y,localSymbolFolderXML:AA,metricXML:AB,metricId:AD.did,isNew:E.isEmpty(AD.did),msgID:AC.ide.isDME?mstrApp.getMsgID():null},{success:AE,failure:w,complete:S});},D=function(w,y){var z=y,S=z.oi.fmt,x=R.MetricFormatTarget;G(w,true);window.setTimeout(function(){if(!S){S=z.oi.fmt={};var AA;for(AA=0;AA<x.length;AA++){S[x[AA].p]={};}}var AB=L.position(w.domNode,true);z.openPopup("formatPopupRef",{zIndex:z.zIndex+10,model:S,left:Math.max(0,(AB.x-(z.formatPopupRef.width||565)))+"px",top:AB.y+"px"});G(w,false);},50);},h=function(x,y){var z=y,S=z.oi,w=function(){var AA=L.position(x.domNode,true);z.openPopup(mstrmojo.all.mstrMEOptionsDialog||"optionPopupRef",{zIndex:z.zIndex+10,model:S,funcs:z.funcs,left:Math.max(0,(AA.x-(z.optionPopupRef.width||565)))+"px",top:AA.y+"px"});};if(!z.isDME&&!z.funcs){G(x,true);A.getSubtotalFunctions(null,{success:function(AA){if(AA.items){z.funcs=AA.items;w();G(x,false);}},failure:function(AA){mstrmojo.alert(AA.message||AA.getResponseHeader("X-MSTR-TaskFailureMsg"));G(x,false);}});}else{w();}},u=function(w,x){var z=L.position(w.domNode,true),y=H.any(x.ide.datasets),S={zIndex:x.zIndex+10,left:Math.max(0,(z.x-(x.ptoPopupRef.width||333)+z.w/2))+"px",top:z.y+"px",mptf:x.mptf||_getMptfFromDataset(x),dbt:y.tables[0].dbt,so_dft:y.so_dft,sim_dft:y.sim_dft,onOK:function(AB){x.mptf=AB;var AA=_getMptfFromDataset(x);if(!H.equals(AA,AB)){AB.dirty=true;}}};x.openPopup("ptoPopupRef",S);};_getMptfFromDataset=function(x){var S=mstrApp&&mstrApp.getRootController().docCtrl.model,z=x.oi.did,y=S.findUnitInDataSet(z),w;if(y){w=H.clone(y.mptf);}else{w={mptso:{pru:1,v:0},mptsim:{pru:1,v:0},mptfms:""};}return w;};mstrmojo.ME._MetricEditorHelper=mstrmojo.provide("mstrmojo.ME._MetricEditorHelper",{noCache:true,useKeyDelay:true,tbBrowsable:true,functionNameRef:{scriptClass:"mstrmojo.Label",alias:"fnLabel",cssClass:"mstrmojo-ME-fct-name",bindings:{visible:function(){return !this.parent.insertMode;},text:function(){return mstrmojo.desc(5424,"Function:")+" "+this.parent.fctName;}}},nameEditBoxRef:{scriptClass:"mstrmojo.Box",alias:"nameEditBox",cssClass:"mstrmojo-ME-nameEditBox",cssDisplay:"inline-block",visible:false,bindings:{visible:function(){return !this.parent.insertMode&&this.parent.visible;}},onvisibleChange:function(S){if(S.value==false){return ;}var w=this;if(!w.tmr){w.tmr=window.setInterval(function(){if(w.domNode){window.clearInterval(w.tmr);delete w.tmr;w.nameInput.inputNode.select();}},50);}},children:[{alias:"nameInput",scriptClass:"mstrmojo.TextBoxWithLabel",inputNodeCssClass:"mstrmojo-ME-nameInput",value:mstrmojo.desc(2213,"New metric"),size:20,useRichTooltip:true,showErrTooltip:function v(){var w=L.position(this.domNode),S=E.isEmpty(this.value)?mstrmojo.desc(9122,"Name cannot be empty"):mstrmojo.desc(11569,"Input contains invalid character");this.richTooltip={contentNodeCssClass:"me-tooltip-content left me-err",content:'<div class="content"><span>'+S+"</span></div>",top:w.y-5,left:w.x+w.w+10};this.hasOpenTooltip=false;this.showTooltip();},bindings:{value:function(){var S=this.parent.visible;return this.parent.parent.oi.alias||this.parent.parent.oi.n;},label:function(){var w=this.parent.parent.ide||{},S=w.nameLabel||mstrmojo.desc(11566,"Metric Name:");return this.parent.parent.oi.alias?mstrmojo.desc(13249,"Display Name:"):S;}},onvalueChange:function(x){var S=this.parent.parent.ide.action.alias,AB=function(AC){return !E.isEmpty(AC)&&(S?true:!/[\[\]\"\\]/g.test(AC));},AA=AB(this.value);if(AA){this.hideTooltip();}else{this.showErrTooltip();}mstrmojo.css.toggleClass(this.parent.domNode,"err",!AA);var y=this.parent.parent;y.set("cValid",AA);var z=y.oi;if(z){var w={n:z.n,alias:z.alias};z.n=this.value;z.alias=this.value;if(z.n!==w.n&&z.alias!==w.alias){y.dirty=true;}}}}]},saveasRef:{scriptClass:"mstrmojo.SaveAsEditor",typeDesc:"Metric",browsableTypes:"4,8",onObjectSaved:function(x){var w=this.opener,S=w&&w.oi;if(w&&S){S.did=x.did;S.n=x.name;S.desc=x.desc;w.set("title",mstrmojo.desc(2154,"Metric:")+" "+x.name);}}},optionPopupRef:{id:"mstrMEOptionsDialog",scriptClass:"mstrmojo.ME.OptionDialog",title:mstrmojo.desc(9572,"Advanced Metric Options"),help:"Advanced_Metric_Options_dialog_box.htm",height:340},ptoPopupRef:{scriptClass:"mstrmojo.PassThroughOptions",help:"create_derived_metric_mdx_hierarchy_reports.htm",width:333},formatPopupRef:{scriptClass:"mstrmojo.ME.MetricFormatEditor",contentNodeCssClass:"mstrmojo-balloon",alias:"formatEditor",title:mstrmojo.desc(2116,"Format"),left:"100px",top:"100px",useAnimate:false,height:360,width:565,help:"Format_Metric_dialog_box.htm",locksHover:true},ob:{scriptClass:"mstrmojo.Editor",title:mstrmojo.desc(5298,"Select an Object"),help:"Select_Objects_dialog_box_.htm",children:[{scriptClass:"mstrmojo.ObjectBrowser",alias:"browser",cssText:"width:200px;",fishEyeVisible:false,closeable:false,closeOnSelect:false}]},switchRef:{scriptClass:"mstrmojo.Button",slot:"buttonNode",alias:"switchToMetricEdtior",cssClass:"mstrmojo-ME-switch mstrmojo-Editor-button mstrmojo-WebButton",text:mstrmojo.desc(9563,"Switch to Formula Editor"),closeAfterSwitch:true,bindings:{visible:function(){return !this.parent.insertMode;}},getEditor:function(){return this.parent;},getFormulaEditorId:function(){var S=this.getEditor();return(S.ide&&S.ide.formulaEditorId)||"mstrME";},onclick:function(){var x=this.getEditor(),w=this.getFormulaEditorId();x.oi.tks.items=x.getMetricDefAsTokens();var S={vStatus:mstrmojo.ME.MetricEditBox.VALIDATION_STATUS.UNKNOWN,oi:x.oi,did:x.oi.did,cValid:true};if(x.dirty){S.dirty=x.dirty;}if(x.mptf){S.mptf=x.mptf;}x.switch2Editor(w,S);if(x.ide){x.ide.set("showLeftPanel",true);x.set("simple",false);}}},formatAndOptionsBarRef:{scriptClass:"mstrmojo.HBox",alias:"formatbar",cssClass:"mstrmojo-ME-formatbar",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-ME-link format",alias:"formatButton",text:mstrmojo.desc(1918,"Format"),bindings:{visible:function(){return this.parent.parent.tbFormatable&&!this.parent.parent.insertMode;}},onclick:function(){D(this,this.parent.parent);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-ME-link property",alias:"optButton",text:mstrmojo.desc(13035,"Metric Options"),bindings:{visible:function(){var S=this.parent.parent;return !S.insertMode&&!S.ide.disableAFB;}},onclick:function(){h(this,this.parent.parent);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-ME-link property",alias:"ptoButton",text:mstrmojo.desc(15656,"Pass-through Options"),bindings:{visible:function(){var S=this.parent.parent;return !S.insertMode&&S.ide.enablePTO&&(S.id===((S.ide&&S.ide.formulaEditorId)||"mstrME"));}},onclick:function(){u(this,this.parent.parent);}}]},saveLabel:mstrmojo.desc(5891,"Save"),saveAsLabel:mstrmojo.desc(628,"Save As"),closeLabel:mstrmojo.desc(221,"Cancel"),saveAsEnabled:true,cValid:true,buttonBarRef:{scriptClass:"mstrmojo.HBox",alias:"buttonBar",slot:"buttonNode",cssClass:"mstrmojo-ME-buttonBox",cellCssClass:"subBox",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Editor-button mstrmojo-WebButton hot",alias:"saveokButton",text:"",bindings:{enabled:function(){return this.parent.parent.cValid;},text:function(){return this.parent.parent.insertMode?mstrmojo.desc(531,"Add"):this.parent.parent.saveLabel;}},onclick:function(){var w=this.parent.parent;if(!w.insertMode&&w.isDirty&&!w.isDirty()){w.close();w.onCancel();return ;}if(!w.cValid){return ;}if(w.insertMode){w.insertOnFinish(w.getMetricDefAsTokens());w.close();}else{if(w.getMetricDefAsTokens){w.oi.tks.items=w.getMetricDefAsTokens();}var S=this;if(w.validateAndSave){G(S,true);w.validateAndSave(w.oi,function(){G(S,false);});}else{if(w.ide&&w.ide.validateAndSave){G(S,true);w.ide.validateAndSave(w.oi,function(){G(S,false);});}else{w.tbValidate=this;N.call(this,w,"save");}}}}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Editor-button mstrmojo-WebButton",alias:"btnSaveAs",text:mstrmojo.desc(628,"Save As"),bindings:{visible:function(){return !this.parent.parent.insertMode&&!this.parent.parent.isDME;},text:function(){return this.parent.parent.saveAsLabel;}},onclick:function(){var S=this.parent.parent;if(S.getMetricDefAsTokens){S.oi.tks.items=S.getMetricDefAsTokens();}S.tbValidate=this;N.call(this,this.parent.parent,"saveAs");}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Editor-button mstrmojo-WebButton",bindings:{text:function(){return this.parent.parent.closeLabel;}},onclick:function(){var S=this.parent.parent;if(S.onPreClose()){S.close();if(!S.insertMode){S.onCancel();}}}}]},validateSyntax:function B(S){N.call(S,this);},validateSyntaxAndSwitch:function b(S){N.call(S,this,"switch");},preprocessTokenStram:function T(S){m(S);},isDirty:function j(){if(this.insertMode){return false;}return this.dirty||this.oi.dirty||(this.oi.fmt||{}).dirty||(this.oi.mps||{}).dirty||(this.mptf||{}).dirty;},onmetricModify:function g(){this.dirty=true;},save:function Q(){this.buttonBar.btnSaveAs.onclick();},prompt2saveRef:{scriptClass:"mstrmojo.Editor",cssText:"width:350px;",title:mstrmojo.desc(5728,"Confirm save"),children:[{scriptClass:"mstrmojo.Label",cssText:"margin:5px 5px 20px;",allowHTML:true,bindings:{text:function(){return mstrmojo.desc(9573,"Do you want to save changes made to #?").replace("#","<b>"+mstrmojo.string.encodeHtmlString(this.parent.opener.oi.n)+"</b>");}}},{scriptClass:"mstrmojo.HBox",alias:"buttonBar",slot:"buttonNode",cssClass:"mstrmojo-ME-buttonBox",cellCssClass:"subBox",children:[{scriptClass:"mstrmojo.HBox",cssClass:"left",cssText:"width:10px;"},{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(219,"Yes"),onclick:function(){var S=this.parent.parent;S.opener.save();S.close();}},{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(218,"No"),onclick:function(){var S=this.parent.parent;S.opener.close();if(S.opener.onCancel){S.opener.onCancel();}S.close();}},{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(221,"Cancel"),onclick:function(){var S=this.parent.parent;S.close();}}]}]},prompt2save:function(){if(this.getMetricDefAsTokens){this.oi.tks.items=this.getMetricDefAsTokens();}this.openPopup("prompt2saveRef",{zIndex:this.zIndex+1});},handleMetricAction:function e(x,w){var S=this;var y=I(w,false);if((x==="save")&&w.did){mstrmojo.xhr.request("POST",mstrConfig.taskURL,O(S),y);}else{if(((x==="save")&&E.isEmpty(w.did))||x==="saveAs"){y.saveAs=true;S.openPopup("saveasRef",{zIndex:S.zIndex+10,folderLinksContextId:17,name:w.n||w.name||(S.name&&S.name.value)||mstrmojo.desc(2213,"New Metric"),saveParams:y,saveAsCallback:function(){var z=O(S);if(z.success){var AA=z.success;z.success=function(AB){AA.call(this,AB);if(S.ide.noRefresh!==true){var AC=mstrApp;mstrmojo.form.send({evt:5005,src:AC.name+"."+AC.pageName+".5005"});}};}return z;}});}}},handleDerivedMetricAction:function f(z,y){y=y||this.oi;if(z==="save"){var S={tokenStreamXML:P(y),alias:y.n};var w=y.mps||{};if(w.dirty){if(w.fbf===0){w.afb=w.sfb=-1;}S.afb=w.afb;S.sfb=w.sfb;}if(this.originTks){S.originTokenStream=P({tks:{items:this.originTks}});S.originAfb=this.originAfb;S.originSfb=this.originSfb;}var AA=mstrmojo.all.mstrMetricIDE,x=AA.disableAFB;if(x){S.afb=0;S.sfb=1;}if((this.mptf||{}).dirty){S.mptf=this.mptf;}AA.onApplyMetricCallback(S);AA.close();}},onPreClose:function(){var S=this;if(S.isDirty&&S.isDirty()&&!this.isDME){S.prompt2save();return false;}return true;},onClose:function Z(){this.dirty=false;delete this.mptf;if(this.onPostClose){this.onPostClose();}},init:function q(x){if(this._super){this._super(x);}var y=mstrApp,S=y&&y.useQuickSearch&&y.useQuickSearch(),w=S?((y&&y.searchAutoCompleteDelay&&y.searchAutoCompleteDelay())||0):0;this.suggestDelay=w||200;this.noCache=this.noCache&&S&&!this.isDME;this.ob.children[0].quickSearch=S;A.suggestDelay=this.suggestDelay;A.noCache=this.noCache;},_setupCandidatesCache:function l(S){if(this.candidates&&S){S.candidates=null;S.set("candidates",this.candidates);}},item2textCss:function J(S){return"mstrmojo-ME-icon t"+S.t+(S.st?" st"+S.st:(S.um||S.da?"d":""));},getSpecialFunctionEditorId:function d(S,y){var x=S&&S.did,w;if(x){if(A.isBasicAggMap(x)){w="mstrSME";}else{if(A.isRank(x)){w="mstrRFE";}else{if(A.isOLAPAgg(x)){w="mstrOFE";}else{w="mstrFE";}}}if(w){w+=y?"_1":"";}}return w;},isDimty:function(w,S){return(/^@[a-z]{1,}(\s*[+-]\s*\d{1,})?$/i).test(F.trim(w));},validateByDataType:function c(w,S){var x=false;switch(w){case t.DataTypeInteger:x=/^(-)?\d+$/.test(S);break;case t.DataTypeNumeric:case t.DataTypeReal:case t.DataTypeDouble:x=mstrmojo.num.isNumeric(S);break;case t.DataTypeChar:case t.DataTypeVarChar:x=true;break;case t.DataTypeDate:case t.DataTypeTimeStamp:x=true;break;default:x=true;}return x;},getRootFunction:function a(x){var w,S=x&&x.tks&&x.tks.met;if(S!==C.ADVANCED){var y=x.tks.items[0];w=y&&y.oi;}return w;},checkEditorFallback:function Y(S,y){var w=this.getRootFunction(y),x=mstrmojo.array.find(S,"did",w&&w.did)===-1;if(x&&y&&y.tks&&y.tks.items&&y.tks.items.length>0){y.tks.met=C.ADVANCED;}return x;}});mstrmojo.ME._MetricEditorHelper.getTokenStreamXML=P;}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.tabs.TabStrip","mstrmojo.vi.ui.tabs.Tab","mstrmojo.Label","mstrmojo.Button","mstrmojo.Pulldown","mstrmojo.Box","mstrmojo.dom","mstrmojo.css","mstrmojo.tooltip","mstrmojo.ME.MetricEditBox","mstrmojo.array","mstrmojo.hash","mstrmojo.mstr.EnumDSSXMLBaseFormType");var e=mstrmojo.array,N=mstrmojo.hash,M=mstrmojo.ME.MetricToken.brackets,B=mstrmojo.css,S=mstrmojo.vi.ui.tabs.Tab.ACTIONS,m=S.DELETE+S.RENAME,n=mstrmojo.ME.MetricEditBox.VALIDATION_STATUS,o=mstrmojo.ME.MetricEditBox.VALIDATION_STATUS_CSS,O=mstrmojo.ME.MetricEditBox.VALIDATION_STATUS_DESC,V=mstrmojo.mstr.EnumDSSXMLObjectTypes,D=mstrmojo.string,q="This@ID",X="45C11FA478E745FEA08D781CEA190FE5",U=mstrmojo.mstr.EnumDSSXMLBaseFormType,t=[{n:mstrmojo.desc(959,"Default"),v:U.DssXmlBaseFormReserved},{n:mstrmojo.desc(12276,"String"),v:U.DssXmlBaseFormText},{n:mstrmojo.desc(2052,"Date"),v:U.DssXmlBaseFormDate},{n:mstrmojo.desc(3434,"Number"),v:U.DssXmlBaseFormNumber}],Y=function(){var x="analytical_engine_version.htm",w=mstrApp.showHelpTopic;if(w){w(x,"upgrade");}else{window.open(mstrmojo.upgradeHelpPath()+x,"_blank");}};function H(w){return{n:w,k:w,ftk:[],vs:1,is:"",bft:U.DssXmlBaseFormReserved,bftp:U.DssXmlBaseFormReserved};}function Q(AC,AD,w,AA){var y=AC.forms[AD]||{},AB=AC.forms[w],x=AC.inputBox,z=AC.statusBox.pulldownBox.pulldown;if(AD!==w){y.vs=AC.vStatus;y.is=AC.iStatus;y.bft=AC.formType||z.getSelectedItem().v;y.bftp=AC.formType||z.getSelectedItem().v;y.ftk=x.items;AC.set("vStatus",n.UNKNOWN);}AC.set("vStatus",AB.vs);AC.set("iStatus",AB.is);AC.updateInputBoxItems({items:AB.ftk});if(AC.curFormIdx!==w){AC.curFormIdx=w;AC.tabstrip.setSelectedTab(AB.k);}z.set("selectedIndex",e.find(z.items,"v",AB.bft));AC.raiseEvent({name:"tabSwitch",tks:AB.ftk,vs:AB.vs,is:AB.is,bft:AB.bft,bftp:AB.bftp,oidx:AD,nidx:w,toNewTab:AA});}function P(x){var w=x.forms[x.curFormIdx];if(w){w.ftk=x.inputBox.items;w.vs=x.vStatus;w.is=x.iStatus;}}var l=0;function b(w){l=Math.max(w.length-1,l);}function a(){l=0;}function r(w){var x="DESC"+(l?" "+l:"");l++;if(e.find(w,"n",x)>=0){return r(w);}return x;}function J(z){var y={v:M(z.n),oi:z,isNew:true},x,w;if(z.t===12){x=e.filter(z.fs,function(AA){return AA.obf||z.da;}).length;if(x===1){w=z.fs[0];y=N.copy({v:M(z.n)+"@"+M(w.fnm),ift:true,exv:w.fid,extp:8},y);}else{y=N.copy({v:M(z.n)+"@",ift:true},y);}}return y;}function E(x,w){x.set("enabled",!w);var y="mstrmojo-InlineWaitIcon";if(x.iconClass){x.set("iconClass",x.iconClass.replace(new RegExp(y),"")+" "+(w?y:""));}else{mstrmojo.css.toggleClass(x.domNode,y,w);}}function L(w){return w.tp===33||w.tp===37;}function F(w){return w.tp===-1;}var Z=function(AC){var AA=AC.items,x=AA.length,z,AB,y=[],w="";y.push({v:"!",tp:33,lv:4,sta:2});for(z=0;z<x;z++){AB=AA[z];if((z===0&&L(AB))||F(AB)){continue;}if(AB.isNew&&!AB.oi){w+=AB.v;}else{if(!D.isEmpty(w)){y.push({v:w,tp:2,lv:1});w="";}if(AB.v&&AB.v.indexOf(q)>=0){AB.v=AB.v.replace("["+q+"]",q);AB.exv=X;AB.extp=8;delete AB.oi;}y.push(AB);}}if(!D.isEmpty(w)){y.push({v:w,tp:2,lv:1});w="";}y.push({v:"",tp:-1,lv:4,sta:2});return{items:y};},f=function(y){var w=y.items||[],x=w[w.length-1];if(x&&x.tp===-1){w.pop();}if(w[0]&&L(w[0])){w.splice(0,1);}e.forEach(w,function(z){if(z.v&&z.v.indexOf(q)>=0){N.copy({extp:8,exv:X,oi:{n:"This",did:"This",t:12}},z);}});},d=function(w){if(!w){return n.VALID;}return{"-2147214845":n.ERROR,"-2147214846":n.AMBIGUITY}[w]||n.ERROR;},T=function(y){y=Z(y);var x={items:true,v:true,tp:true,lv:true,oi:true,n:true,did:true,t:true,st:true,exv:true,extp:true,asc:true,vtp:true},w={getArrItemName:function(){return"tkn";},isSerializable:function(z){return(x[z])?true:false;}};return D.json2xml("tknstrm",y,w);},G=function(y,AB,AA,x){var z=T(AB),AC=function(AD){if(AD&&AD.tks){var AE=AD.tks;f(AE);AE.vs=d(AE.rjec);AE.tokenXML=z;if(x){x(AE);}}},w=function(AD){mstrmojo.alert(AD.message||AD.getResponseHeader&&AD.getResponseHeader("X-MSTR-TaskFailureMsg"));};mstrmojo.ME.MetricDataService.validateMetric({tokenStreamXML:z,localSymbolFolderXML:"",metricXML:"",metricId:y||"",isNew:true,objectType:12,isIDForm:AA,msgID:mstrApp.getMsgID()},{success:AC,failure:w});};mstrmojo.ME.DerivedAttributeFormTab=mstrmojo.declare(mstrmojo.vi.ui.tabs.Tab,null,{scriptClass:"mstrmojo.ME.DerivedAttributeFormTab",valid:true,editable:true,postBuildRendering:function W(){if(this._super){this._super();}var w=this,x=w.lbl;x.editOnDoubleClick=this.editable;x.onTextEditComplete=function(z,y){if(w.validate(x.text)){w.titleEdited(x.text,y);}};},onclick:function k(w){var x=mstrmojo.dom.eventTarget(w.hWin,w.e);if(x===this.menuBtnNode){this.tabDeleted();}else{if(!this.isSelected){this.tabSelected();}}},validate:function(w){var x=!/[\[\]\"\\]/g.test(w);if(!x){this.lbl.set("isEditing",true);}this.set("valid",x);return x;},showErrTooltip:function v(AA,y){var w=mstrmojo.dom.position(this.domNode),x=this,z=x.errTooltip;if(!z){x.errTooltip=z=new mstrmojo.Tooltip({contentNodeCssClass:"me-tooltip-content up me-err",updatePopupConfig:null});this.addDisposable(z);}z.set("top",w.y+w.h+2);z.set("left",w.x+w.w/2-y);z.set("content",'<div class="content"><span>'+AA+"</span></div>");z.open();window.setTimeout(function(){z.close();},2500);},onvalidChange:function(){if(this.valid){this.hideTooltip();}else{this.showErrTooltip(mstrmojo.desc(11569,"Input contains invalid character"),95);}}});function j(z,AA,AB){var y=e.find(AA,"k",AB.k);return{scriptClass:"mstrmojo.ME.DerivedAttributeFormTab",title:AB.n,draggable:false,editable:y!==0,cssClass:"mstrmojo-AEB-Tab "+(y===0?"mstrmojo-AEB-IDTab":""),getMenuActions:function(){return m;},tabSelected:function(){Q(z,z.curFormIdx,y);},titleEdited:function x(AD,AC){if(AD!==AC){if(e.find(z.forms,"n",AD)>=0){this.showErrTooltip(mstrmojo.desc(7209,"Name already exists"),69);}else{var AE=z.forms[y];AE.n=AD;z.set("dirty",true);}}},tabDeleted:function w(){var AC=z.forms.length,AF=(z.curFormIdx===AC-1)?0:z.curFormIdx,AD=z.forms.slice(0),AE=AD[y];if(AE&&AE.did){z.delForms.push({n:AE.n,did:AE.did});}AD.splice(y,1);z.curFormIdx=AF;z.set("forms",AD);Q(z,-1,AF);z.set("dirty",true);}};}mstrmojo.ME.AttributeEditBox=mstrmojo.declare(mstrmojo.ME.MetricEditBox,null,{scriptClass:"mstrmojo.ME.AttributeEditBox",markupString:'<div id="{@id}" class="mstrmojo-MEBox {@cssClass}" style="{@cssText}"><div class="mstrmojo-AEB-TabStrip"></div><div class="mstrmojo-MEBox-edit mstrmojo-AEB-edit"></div><div class="mstrmojo-AEBox-status {@statusCssClass}"></div></div>',markupSlots:{tabstripNode:function(){return this.domNode.firstChild;},editNode:function(){return this.domNode.childNodes[1];},statusNode:function(){return this.domNode.lastChild;}},markupMethods:{onvStatusChange:function(){var x=this.vStatus,AB=(x===n.VALID),z=(x===n.UNKNOWN||x===n.VALIDATING),y=this.statusBox.infoBox;this.validateBtn.set("visible",z);y.set("visible",!z);if(!z){y.infoLabel.set("text",AB?mstrmojo.desc(11655,"Valid formula."):mstrmojo.desc(15953,"Validation failed."));var AA=o[x],w=y.infoIcon.domNode;if(!B.hasClass(AA)){B.removeClass(w,[o[n.VALID],o[n.ERROR],o[n.AMBIGUITY]]);B.addClass(w,AA);}}},oniStatusChange:function(){var y=this.vStatus,w=(y===n.ERROR||y===n.AMBIGUITY),x=this.statusBox.infoBox.infoIcon;x.title=w?(this.getStatusDesc&&this.getStatusDesc(y))||O[y]+" "+this.iStatus:"";}},forms:null,delForms:[],curFormIdx:0,attrid:null,absorbAmbiguity:false,init:function p(z){var AA=this,AC=function(){AA.validateCurrentForm();},y=[{scriptClass:"mstrmojo.vi.ui.tabs.TabStrip",alias:"tabstrip",position:"top",slot:"tabstripNode",isAlignRight:false,getTabCfg:function x(AF,AG,AE){return N.copy(j(AA,AF,AG),AE);},addTab:function AD(){var AG=AA.forms,AE=AG.length,AH=r(AG),AF=AG.slice(0);AF.push(H(AH));AA.set("forms",AF);Q(AA,AA.curFormIdx,AE,true);AA.set("dirty",true);},clear:function w(){e.forEach(this.children,function(AE){AE.hideTooltip();});}},{scriptClass:"mstrmojo.Button",alias:"clearBtn",slot:"tabstripNode",text:mstrmojo.desc(2827,"Clear"),cssClass:"mstrmojo-WebHoverButton mstrmojo-AEB-clearAll hoverLink",onclick:function(){AA.inputBox.clearTokens([]);AA.inputBox.raiseChangeEvent({type:"clear"});}},{scriptClass:"mstrmojo.Box",alias:"statusBox",slot:"statusNode",cssClass:"statusBox",children:[{scriptClass:"mstrmojo.Box",alias:"pulldownBox",cssClass:"pulldownBox",cssDisplay:"inline-block",children:[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-AEBox-pulldownLabel AEBox-item",text:mstrmojo.desc(9918,"Data Type")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"pulldown",cssClass:"mstrmojo-AEBox-pulldown AEBox-item",selectedIndex:0,items:t,onitemSelected:function(AH){var AE=AA.curFormIdx,AF=AA.forms,AG=AF&&AF.length>AE&&AF[AE];if(AG){if(AG.bft!==AH.v){AG.bft=AG.bftp=AH.v;AA.set("dirty",true);}}}}]},{scriptClass:"mstrmojo.Box",cssClass:"helpIcon",cssDisplay:"inline-block",richTooltip:{cssClass:"vi-regular vi-tooltip-A A-center AE-tooltip",posType:mstrmojo.tooltip.POS_TOPCENTER,enableHover:true},useRichTooltip:true,tooltipCloseDelay:500,updateTooltipConfig:function AB(){var AF=this.richTooltip,AE=mstrmojo.dom.position(this.domNode);AF.left=AE.x+AE.w-8;AF.top=AE.y+28;AF.content=mstrmojo.desc(16313,"Data Type options for derived attribute forms are only available for data engine version 11.1 and later.");AF.content+="<br /><div class='help-link-label' onclick='mstrmojo.ME.AttributeEditBox.AEHelpFn()'>"+mstrmojo.desc(9849,"Learn More")+"</div>";}},{scriptClass:"mstrmojo.Box",alias:"infoBox",cssClass:"infoBox",cssDisplay:"inline-block",children:[{scriptClass:"mstrmojo.Button",alias:"infoIcon",cssClass:"mstrmojo-AEBox-infoIcon AEBox-item",title:"",tooltipOpenDelay:0,useRichTooltip:true,updateTooltipConfig:function(){var AE=mstrmojo.dom.position(this.domNode);this.richTooltip={cssClass:"vi-regular A-center vi-tooltip-A",top:Math.max(AE.y+26,0),left:Math.max(AE.x+10,0),posType:mstrmojo.tooltip.POS_TOPCENTER,content:this.title};}},{scriptClass:"mstrmojo.Label",alias:"infoLabel",cssClass:"mstrmojo-AEBox-infoLabel AEBox-item"}]}]}];this.validateFunc=AC;AA.children=y.concat(this.children);this._super(z);},item2textCss:function K(w){return this._super(w)||{21:"afm"}[w.t]||"";},onformsChange:function c(){var w=this.forms,x=w[this.curFormIdx].k;e.forEach(w,function(y){f({items:y.ftk});});this.tabstrip.setTabs(w,x);b(w);},selectFormTab:function A(w){Q(this,this.curFormIdx,w);},postBuildRendering:function W(){if(this._super){this._super();}this.clear();var w=this;this.inputBox.ondrop=function(AA){if(!AA.src.data||!AA.src.data.item){return ;}var z=w.inputBox,AC=z.ctxtBuilder.itemWidgets,AD=N.copyProps(["did","n","t","fs"],AA.src.data.item),AF=J(AD),x,AE,y;AA.src.data=AF;mstrmojo.ListBase2.prototype.ondrop.call(this,AA);var AB=function(AG){return AG.t===V.Function&&!(!isNaN(AG.fdid)&&AG.fdid<0);};if(AB(AF.oi)){this.insertParenthesisTokens();}if(w.ontokensModify){w.ontokensModify();}x=this.selectedIndices;if(AD.t===12&&AF.ift&&!AF.exv){for(AE in x){y=AC[AE];if(y){z.startTokenSuggestion(y);}}}z.clearSelect(true);B.removeClass(z.domNode,"unselectable");};},clear:function h(){this.curFormIdx=0;this.delForms=[];this.attrid=null;a();this.set("forms",[H("ID")]);this.inputBox.set("items",[]);this.inputBox.resetTokensCache();this.set("vStatus",n.UNKNOWN);this.set("iStatus","");this.tabstrip.clear();},validateCurrentForm:function C(x){var y=this,z=this.validateBtn,w=function(AA){E(z,false);y.set("vStatus",AA.vs);y.set("iStatus",AA.rjed||"");y.updateInputBoxItems({items:AA.items});y.statusNode.style.display="block";y.handleValidation(AA);if(x){x(AA.items,AA.vs===n.VALID);}};y.set("vStatus",n.VALIDATING);E(z,true);G(this.attrid,{items:this.inputBox.items},y.curFormIdx===0,w);},validateAllForms:function u(y){var z=this,x=z.forms,w=0,AA=function(AD){var AC=(w===0);if(AD){var AB=x[w-1];AB.ftk=AD.items;AB.vs=AD.vs;AB.is=AD.rjed||"";AB.tokenXML=T({items:AD.items});if(AD.vs!==n.VALID){z.selectFormTab(w-1);z.handleValidation(AD);if(y){y(null,false);}return ;}}if(w===x.length){if(y){y(x,true);}return ;}G(z.attrid,{items:x[w++].ftk},AC,AA);};P(z);AA();},continueValidataion:function R(){this.validateCurrentForm();},getStatusDesc:function g(w){return{0:mstrmojo.desc(11655,"Valid Formula.")}[w];},onObjectInsert:function I(z){var AA=this.inputBox,y=J(z),w=AA.insertTokens([y]),x;if(z.t===12&&y.ift&&!y.exv){x=AA.ctxtBuilder.itemWidgets[w];if(x){AA.startTokenSuggestion(x);}}}});mstrmojo.ME.AttributeEditBox.preprocessTokenStream=f;mstrmojo.ME.AttributeEditBox.postprocessTokenStream=Z;mstrmojo.ME.AttributeEditBox.mapErrorCode=d;mstrmojo.ME.AttributeEditBox.getTokenStreamXML=T;mstrmojo.ME.AttributeEditBox.validateSyntax=G;mstrmojo.ME.AttributeEditBox.prepareInsertToken=J;mstrmojo.ME.AttributeEditBox.AEHelpFn=Y;}());(function(){mstrmojo.requiresCls("mstrmojo._HasLayout","mstrmojo.css","mstrmojo.dom","mstrmojo.home.ui.Card");mstrmojo.requiresDescs(629,1388,11477,11478,14354,11253,14509,14508,14507,14506,11252,11251,11250,11249,11247,11248);mstrmojo.home.ui.RecentsCard=mstrmojo.declare(mstrmojo.home.ui.Card,[],{scriptClass:"mstrmojo.home.ui.RecentsCard",title:mstrmojo.desc(14354,"Recents"),model:null,init:function H(I){this._super(I);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-RecentsCard");},preBuildRendering:function C(){var I=this.model;this.addChildren([{scriptClass:"mstrmojo.home.ui.RecentsList",alias:"list",items:I.getRecentObjects()}]);if(this._super()){this._super();}this.list.attachEventListener("ItemExecute",this.id,"handleExecution");},handleExecution:function E(I){if(I.item&&I.item.url){this.parent.controller.executeLink(I.item.url+"&"+mstrApp.name+"="+encodeURIComponent(mstrApp.servletState));}else{if(I.item.html&&I.item.info){}else{mstrApp.showWait({message:"Executing..."});}}}});mstrmojo.home.ui.RecentsList=mstrmojo.declare(mstrmojo.ui.List,[],{scriptClass:"mstrmojo.home.ui.RecentsList",init:function H(I){this._super(I);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-RecentsList");},buildRelativeTime:function B(K){var O="";if(K.timestamp){var J={minute:60,hour:60*60,day:24*60*60,week:7*24*60*60,month:30*24*60*60,year:365*24*60*60};var L=parseInt(K.timestamp,10);var N=Math.floor((new Date().getTime()-L)/1000);var I,M;if(Math.floor(N/J.year)){O=mstrmojo.desc(11253,"More than a year ago");}else{if(Math.floor(N/J.month)){I=Math.floor(N/J.month);if(I===1){O=mstrmojo.desc(14508,"About a month ago");}else{O=mstrmojo.desc(14509,"About # months ago").replace("#",I);}}else{if(Math.floor(N/J.week)){I=Math.floor(N/J.week);if(I===1){O=mstrmojo.desc(14506,"About a week ago");}else{O=mstrmojo.desc(14507,"About # weeks ago").replace("#",I);}}else{if(Math.floor(N/J.day)){I=Math.floor(N/J.day);if(I===1){O=mstrmojo.desc(11251,"About a day ago");}else{O=mstrmojo.desc(11252,"About # days ago").replace("#",I);}}else{if(Math.floor(N/J.hour)){I=Math.floor(N/J.hour);if(I===1){O=mstrmojo.desc(11249,"About an hour ago");}else{O=mstrmojo.desc(11250,"About # hours ago").replace("#",I);}}else{I=Math.floor(N/J.minute);if(I===1){O=mstrmojo.desc(11247,"About a minute ago");}else{O=mstrmojo.desc(11248,"About # minutes ago").replace("#",I);}}}}}}}return O;},getItemProps:function D(J,I){var K=this._super(J,I);K.iconCls=J.iconCls;K.url=J.url;if(mstrConfig.showPreviews){K.src=J.imgData!==undefined?"data:image/png;base64,"+(J.imgData):"../images/1ptrans.gif";}else{K.src="../images/1ptrans.gif";}if(J.html){K.html=J.html;}K.time=this.buildRelativeTime(J);K.previewCssCls=!J.imgData&&!J.t?" sample p"+J.pos:"";if(J.overlayText){K.overlayText=J.overlayText;}return K;},getItemMarkup:function F(K,I){var J=this._super(K,I);if(K.url&&!K.info){return J.replace("{@en@n}",'<a href="{@url}">'+(K.imgData===undefined&&K.html!==undefined?"{@html}":'<img class="preview {@previewCssCls}" src="{@src}"/>')+'<div class="overlayText">{@overlayText}</div><div class="name-time"><span class="{@iconCls}"></span>{@en@n}<div class="time">{@time}</div></div></a>');}else{return J.replace("{@en@n}","<div>{@html}</div>");}},onclick:function A(I){I.preventDefault();I.cancel();this._super(I);if(this.selectedItem){this.raiseEvent({name:"ItemExecute",item:this.selectedItem});}return false;},postBuildRendering:function(){this._super();this.carousel();var I=this;window.setTimeout(function(){I.refresh();},5*60*1000);},carousel:function G(){jQuery&&jQuery(this.itemsContainerNode).slick({slidesToShow:4,slidesToScroll:4,infinite:false,dots:false,lazyLoad:"ondemand",responsive:[{breakpoint:1640,settings:{slidesToShow:4,slidesToScroll:4}},{breakpoint:1224,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:768,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]});}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.home.ui.Card");var B=mstrmojo.css;var D="col-";var F=function(H){return D+H;};var A=1;mstrmojo.home.ui.CustomCard=mstrmojo.declare(mstrmojo.home.ui.Card,null,{scriptClass:"mstrmojo.home.ui.CustomCard",col:null,oncolChange:function(H){B.removeClass(this.domNode,F(H.valueWas));B.addClass(this.domNode,F(this.col));if(this.col!==this.cardDef.col){this.updateCardDef({col:this.col});}},postBuildRendering:function C(){this._super();this.htmlbox.initControlOverlayWithCardDefinition(this.cardDef);this.set("col",this.cardDef.col||A);B.addClass(this.domNode,F(this.col));},switchToEditMode:function G(){this.htmlbox.showControlOverlay();},getHTMLContainerSettingEditorConfig:function E(J,I){var H=this;return new mstrmojo.ui.menus.EditorConfig({cssClass:"mstrmojo-CardMenuEditor-dashboard",data:J||{column:H.col},contents:[new mstrmojo.TextBoxWithLabel({alias:"lblColumns",label:mstrmojo.desc(4073,"Columns:"),value:J.column,onvalueChange:function(){if(this.parent.data){this.parent.data.set("column",this.value);}}})],bindings:{okEnabled:"this.valid",valid:function(){var K=parseInt(this.data.column,10),L=!isNaN(K)&&K>0&&K<5;if(!L&&!mstrmojo.string.isEmpty(this.data.column)){var M=mstrmojo.desc(7883,"Please enter an integer between ## and ###.").replace("###","4").replace("##","1");if(this.contents[0].inputNode){this.contents[0].inputNode.blur();}mstrmojo.alert(M,null,null,1001);}return L;}},fnOk:I});},getEditorConfig:function(H,I){var J=this;I.addMenuItem(mstrmojo.desc(3272,"Edit"),"cls",this.switchToEditMode.bind(this));I.addPopupMenuItem(mstrmojo.desc(2985,"Width"),this.id,function(){return J.getHTMLContainerSettingEditorConfig({column:J.cardDef.col},function K(M,L){J.set("col",M.column);});});I.addPopupMenuItem(mstrmojo.desc(3297,"Title"),this.id,function(){return J.parent.controller.getDashboardSettingTitleConfig({title:J.title},function K(M,L){J.set("title",M.title);});});}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.css","mstrmojo.expr","mstrmojo.ValidationTextBox","mstrmojo.HBox","mstrmojo.ui.menus.EditorConfig","mstrmojo.mstr.EnumFunction","mstrmojo.DropDownList","mstrmojo.ui.Pulldown","mstrmojo.SearchablePulldown","mstrmojo.ButtonList","mstrmojo.Box","mstrmojo.Label","mstrmojo.RadioList","mstrmojo.CheckList","mstrmojo.EditableLabel","mstrmojo.CheckBox","mstrmojo._FormatDefinition","mstrmojo.num","mstrmojo.locales","mstrmojo.vi.models.VIComponentMap","mstrmojo.func","mstrmojo.dom","mstrmojo.ME.AttributeEditBox","mstrmojo.ME.MetricToken","mstrmojo.string","mstrmojo.dom","mstrmojo.models.datasets.DataInterface","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.vi.ui.editors.ObjectPicker","mstrmojo.vi.ui.editors.AttributeLinkEditor","mstrmojo.vi.ui.NumberFormatter","mstrmojo.mstr.EnumDSSXMLBaseFormType","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.mstr.EnumDSSXMLObjectSubTypes","mstrmojo.mstr.EnumDSSConsolidationType");mstrmojo.requiresDescs(1442,1885,1886,2022,2122,2123,2124,2125,2126,2127,2128,2129,2130,2131,2132,3993,4564,11494,11495,11496,11497,14612);var q=mstrmojo.mstr.EnumFunction,Z=mstrmojo.hash,v=mstrmojo.array,D=mstrmojo.css,X=mstrmojo.dom,y=mstrmojo.Button.newWebButton,U=mstrmojo.ME.MetricToken.brackets,AE=mstrmojo.ME.MetricToken.argDelimiter,V=mstrmojo._FormatDefinition,t=mstrmojo.models.datasets.DataInterface,K=mstrmojo.vi.models.VIComponentMap.TYPES,W=mstrmojo.chart.model.enums.EnumDSSObjectType,r=mstrmojo.mstr.EnumDSSXMLBaseFormType,AR=mstrmojo.mstr.EnumDSSXMLObjectTypes,N=mstrmojo.mstr.EnumDSSXMLObjectSubTypes,AC=mstrmojo.mstr.EnumDSSConsolidationType;var a={SUM:mstrmojo.desc(2131,"Sum"),ADD:mstrmojo.desc(6017,"Add"),AVG:mstrmojo.desc(2122,"Average"),MAX:mstrmojo.desc(2125,"Maximum"),GST:mstrmojo.desc(5869,"Greatest"),MIN:mstrmojo.desc(2127,"Minimum"),LST:mstrmojo.desc(5868,"Least"),CNT:mstrmojo.desc(2123,"Count"),MTP:mstrmojo.desc(5418,"Multiply"),STD:mstrmojo.desc(2130,"Standard Deviation"),PTD:mstrmojo.desc(11494,"Population Standard Deviation")},f={SUM:{n:a.SUM,t:q.FunctionSum},ADD:{n:a.ADD,t:q.FunctionPlus},AVG:{n:a.AVG,t:q.FunctionAvg},MAX:{n:a.MAX,t:q.FunctionMax},GST:{n:a.GST,t:q.FunctionGreatest},MIN:{n:a.MIN,t:q.FunctionMin},LST:{n:a.LST,t:q.FunctionLeast},TMS:{n:a.MTP,t:q.FunctionTimes},CNT:{n:a.CNT,t:q.FunctionCount},GEM:{n:mstrmojo.desc(2124,"Geometric Mean"),t:q.FunctionGeomean},MED:{n:mstrmojo.desc(2126,"Median"),t:q.FunctionMedian},MOD:{n:mstrmojo.desc(2128,"Mode"),t:q.FunctionMode},PDT:{n:mstrmojo.desc(2129,"Product"),t:q.FunctionProduct},STD:{n:mstrmojo.desc(2130,"Standard Deviation"),t:q.FunctionStdev},VAR:{n:mstrmojo.desc(2132,"Variance"),t:q.FunctionVar}},b=[{n:a.SUM,t:q.FunctionOLAPSum},{n:a.AVG,t:q.FunctionOLAPAvg},{n:a.MIN,t:q.FunctionOLAPMin},{n:a.MAX,t:q.FunctionOLAPMax},{n:a.CNT,t:q.FunctionOLAPCount}],AP=[{n:a.SUM,t:q.FunctionOLAPSum},{n:a.AVG,t:q.FunctionOLAPAvg},{n:a.MIN,t:q.FunctionOLAPMin},{n:a.MAX,t:q.FunctionOLAPMax},{n:a.CNT,t:q.FunctionOLAPCount}],M=[{n:mstrmojo.desc(1058,"Previous"),t:q.FunctionLag},{n:mstrmojo.desc(1059,"Next"),t:q.FunctionLead},{n:mstrmojo.desc(4046,"First"),t:q.FunctionFirst},{n:mstrmojo.desc(4049,"Last"),t:q.FunctionLast}];var z={YEAR:"Year",QUARTER:"Quarter",CONCAT:"Concat",QUARTERSTARTDATE:"QuarterStartDate",MONTH:"Month",TOSTRING:"ToString",MONTHSTARTDATE:"MonthStartDate",WEEK:"Week",WEEKSTARTDATE:"WeekStartDate",DAYOFMONTH:"DayOfMonth",DAYOFWEEK:"DayOfWeek",DAYOFYEAR:"DayOfYear"};var AI={};AI[z.YEAR]="6F7DF5F8449111D5BEA300B0D01A55EF";AI[z.QUARTER]="6F7DF5F7449111D5BEA300B0D01A55EF";AI[z.CONCAT]="6F7DF5FF449111D5BEA300B0D01A55EF";AI[z.QUARTERSTARTDATE]="59E10CE2ADDD4A6DAC2416A72999A9ED";AI[z.MONTH]="6F7DF5F6449111D5BEA300B0D01A55EF";AI[z.TOSTRING]="D1ED29645DEC4DBF99E8E09ED939074B";AI[z.MONTHSTARTDATE]="7C63D4E70B2741C3A5B54A2EFD40961B";AI[z.WEEK]="6F7DF5F5449111D5BEA300B0D01A55EF";AI[z.WEEKSTARTDATE]="44681336D0DB4E43AC333FFB3CC4400D";AI[z.DAYOFMONTH]="6F7DF5F2449111D5BEA300B0D01A55EF";AI[z.DAYOFWEEK]="6F7DF5F3449111D5BEA300B0D01A55EF";AI[z.DAYOFYEAR]="6F7DF5F4449111D5BEA300B0D01A55EF";var Q="@form";function c(AT){var AV=8,AW=1,AS=v.find(AT.fs,"idf",true);if(AS===-1){return null;}var AU=AT.fs[AS];return((AT.da||AU.obf)&&(AU.bftp===AV||AU.bftp===AW))?AU:null;}var AO={Year:{ID:[z.YEAR,"(",Q,")"]},Quarter:{ID:[z.YEAR,"(",Q,") * 10 + ",z.QUARTER,"(",Q,")"],DESC:[z.CONCAT,'("Q"',AE,z.QUARTER,"(",Q,")",AE,' ", "',AE,z.YEAR,"(",Q,"))"],DATE:[z.QUARTERSTARTDATE,"(",Q,")"]},QuarterOfYear:{ID:[z.QUARTER,"(",Q,")"],DESC:[z.CONCAT,'("Q"',AE,"This@ID)"]},Month:{ID:[z.YEAR,"(",Q,") * 100 + ",z.MONTH,"(",Q,")"],DESC:[z.TOSTRING,'<Pattern="mmm yyyy">(',Q,")"],DATE:[z.MONTHSTARTDATE,"(",Q,")"]},MonthOfYear:{ID:[z.MONTH,"(",Q,")"],DESC:[z.TOSTRING,'<Pattern="mmmm">(',Q,")"]},Week:{ID:[z.YEAR,"(",Q,") * 100 + ",z.WEEK,"(",Q,")"],DESC:[z.CONCAT,'("W"',AE,z.WEEK,"(",Q,")",AE,' ", "',AE,z.YEAR,"(",Q,"))"],DATE:[z.WEEKSTARTDATE,"(",Q,")"]},WeekOfYear:{ID:[z.WEEK,"(",Q,")"]},DayOfMonth:{ID:[z.DAYOFMONTH,"(",Q,")"]},DayOfWeek:{ID:[z.DAYOFWEEK,"(",Q,")"],DESC:[z.TOSTRING,'<Pattern="ddd">(',Q,")"]},DayOfYear:{ID:[z.DAYOFYEAR,"(",Q,")"]}};function j(AU,AW,AV,AS){return{scriptClass:"mstrmojo.ui.Pulldown",isHostedWithin:false,items:AU,selectedIndex:AW,onitemSelected:function AT(AX){var AY=this.parent;while(!AY.data||!AY.data[AV]){AY=AY.parent;}AY.data.set(AV,AS?AS(AX):AX.v);}};}function AA(AU,AT,AS){return{scriptClass:"mstrmojo.Box",cssClass:"breakByBox",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13903,"Break by:"),cssClass:"menu-info-text"},Z.copy(AS,j(AU,AT,"breakBy",function(AV){return{id:AV.did,type:AV.t,dmy:AV.dmy};}))]};}function AM(AV){var AW=AV.metrics,AX=AV.propName,AU=AV.optionValueField||"id",AS=v.find(AW,AU,AV.value),AY=function AY(Aa){var AZ=this.parent;while(!AZ.data||!AZ.data.hasOwnProperty(AX)){AZ=AZ.parent;}AZ.data.set(AX,Aa?{id:Aa[AU],type:4}:{cst:this.text});};return{scriptClass:"mstrmojo.ui.SearchablePulldown",isHostedWithin:false,cssClass:"Calculation-PullDown",items:AW,selectedIndex:AS,useRichTooltip:true,bindings:AV.bindings,valid:true,allowCustomText:true,allowEmptyText:true,allowHTML:false,onvalidChange:function AT(){mstrmojo.css.toggleClass(this.domNode,"invalid",!this.valid);if(this.hasRendered){this.hideTooltip();this.showTooltip();}},updateTooltipConfig:function(){if(this.valid){this.richTooltip=null;return ;}this.richTooltip={posType:mstrmojo.tooltip.POS_BOTTOMLEFT,cssClass:"vi-warning vi-tooltip-C vi-calculation-warning",left:this.domNode.offsetWidth+12,top:this.domNode.offsetHeight+5,refNode:this.domNode,content:mstrmojo.desc(13819,"Invalid input")};},onitemSelected:AY,onTextEditComplete:function(){AY.call(this,this.items[this.selectedIndex]);},onPopupWidgetOpened:function(){this.set("valid",true);},postkeyup:AV.postkeyup};}function T(AV,AU,AT){if(AV&&AV.datap){var AS=v.filterOne(AV.datap,function(AX){return AX.tbid===AU;}),AW=AS&&AS.maps.amps;return v.filterOne(AW,function(AX){return AT===AX.aimp.atid;});}return null;}function m(AS,AW){var AU=v.filterOne(AS&&AS.afmps,function(AX){return AX.fmid===AW;}),AV=AU&&(AU.sqc?AU:AU.col.oi),AT;if(AV&&AV.sqc){AT={did:AV.sqc.id,n:mstrmojo.string.decodeHtmlString(AV.cln),coldtp:AV.sqc.dt.tp,georole:AV.geo,timerole:AV.tim,der:AV.sqc.der};}else{if(AV){AT={did:AV.did,n:mstrmojo.string.decodeHtmlString(AV.def.cln),coldtp:AV.def.dt.tp,georole:AU.geo,timerole:AV.def.dicl.time,der:AV.def.dicl.der};}}return AT;}function C(AU,AT,AW){var AV={success:function(AX){if(AX&&AX.msgid){mstrApp.serverRequest({taskId:"qBuilder.GetReportXDADefinition",msgid:AX.msgid,bindingflag:2,previewflag:261,browsetype:5},AW);}},failure:function(AX){mstrApp.onerror(AX);}};var AS=!!(mstrConfig.resolveOnly||mstrApp.isAppStatePause&&mstrApp.isAppStatePause());mstrApp.serverRequest({taskId:"duplicateReportInstance",datasetID:AT,messageID:AU,skipRebuild:AS},AV);}function I(AX,AY,AV){var AT=AX.srcTableId,Aa=AX.tgtTableId,AS,AW,AU=function(Ae,Ad){var Ag="<mpcs><mpc ",Ac,Af;for(Ac in Ad){Af=Ad[Ac];Ag+='$ACT="$VAL" '.replace("$ACT",Ac).replace("$VAL",Af);}Ag+="/></mpcs>";return{act:"changeEMMAMapping",tbid:Ae,dsid:AX.dsid,mapping:Ag};},AZ=function(){var Ac=[],Af={},Ad,Ae;if(!AS||!AW){return ;}Af[AT]={};Af[Aa]={};v.forEach(AS.afmps,function(Aj){var Ah=v.find(AW.afmps,"fmid",Aj.fmid),Ak,Ai,Ag;if(Ah>=0){Ad=m(AS,Aj.fmid);Ae=m(AW,Aj.fmid);if(Ad.georole!==Ae.georole){Ag=(Ad.georole===0)?AT:Aa;Ak=(Ad.georole===0)?Ad.did:Ae.did;Ai=Ad.georole||Ae.georole;Af[Ag][Ak]=Z.copy({did:Ak,georole:Ai},Af[Ag][Ak]);}if(Ad.timerole!==Ae.timerole){Ag=(Ad.timerole===0)?AT:Aa;Ak=(Ad.timerole===0)?Ad.did:Ae.did;Ai=Ad.timerole||Ae.timerole;Af[Ag][Ak]=Z.copy({did:Ak,timerole:Ai},Af[Ag][Ak]);}if(Ad.der!==Ae.der){Ai=Ad.der|Ae.der;Af[AT][Ad.did]=Z.copy({did:Ad.did,drvflg:Ai},Af[AT][Ad.did]);Af[Aa][Ae.did]=Z.copy({did:Ae.did,drvflg:Ai},Af[Aa][Ae.did]);}}});Z.forEach(Af,function(Ag,Ah){Z.forEach(Ag,function(Ai){Ac.push(AU(Ah,Ai));});});Ad=m(AS,AS.afmps[0].fmid);Ac.push(AU(AT,{did:Ad.did,oid:AW.aimp.atid}));if(AV){AV(Ac);}},Ab=function(Ae){var Af={success:function(){AZ();}},Ad,Ac;AS=T(Ae,AT,AX.srcId);AW=T(Ae,Aa,AX.tgtId);Ad=m(AS,AS.afmps[0].fmid);Ac=[AU(AT,{did:Ad.did,oid:AW.aimp.atid,fg:1})];AY.getDataService().submitUpdates(Ac,Af);};C(AY.mid,AX.dsid,{success:Ab});}function Y(AX,AU,AT,AY){var AS=0,AW=[],AV=function(AZ){var Aa=AT[AS-1];if(AZ&&AZ.tks&&Aa){AW.push({fid:Aa.fid,fnm:Aa.fnm,ftk:AZ.tks.items});}if(AS===AT.length){AY(AW);return ;}Aa=AT[AS++];mstrmojo.ME.MetricDataService.validateMetric({metricId:AU,formID:Aa.fid,objectType:12,tokenStreamXML:"",metricXML:"",msgID:AX},{success:AV});};AV();}function AF(AS,AT){return{v:U(AS.n)+"@"+U(AT.fnm),tp:275,lv:1,exv:AT.fid,extp:8,oi:{did:AS.did,t:AS.t,n:AS.n}};}function H(AT){var AV=(AT.t===AR.Filter||AT.t===AR.Consolidation),AU=(AT.t===AR.Attribute&&AT.de),AS=(AT.t===AR.Consolidation&&AT.st===N.ConsolidationManaged);return !!(AV&&!AS||AU);}mstrmojo.vi.ui.DatasetUnitMenuUtils=mstrmojo.provide("mstrmojo.vi.ui.DatasetUnitMenuUtils",{getAvailableShortcutMetricFunctionsGroup:function AL(AS){return{"12":[[f.AVG,f.CNT,f.MAX,f.MIN,f.STD,f.SUM,f.VAR]],"4":[[f.SUM,f.AVG,f.MIN,f.MAX,f.CNT],[f.GEM,f.MED,f.MOD,f.PDT,f.STD,f.VAR]]}[AS.t];},isAmongFunctions:function B(AT,AS){return AS.some(function(AU){return AU.some(function(AV){return AV.t===AT;});});},getMultiSelectionShortcutMetricFunctions:function J(AS){var AT=true;v.forEach(AS,function(AU){if(4!==AU.t){AT=false;return false;}return true;});return AT?[f.ADD,f.AVG,f.GST,f.LST,f.TMS]:[];},getRelativeReferenceMenu:function e(AW,AU,AZ,AS){var AV=0,AT=M[AV],AY=0,AX=AZ&&AZ[AY];return new mstrmojo.ui.menus.EditorConfig({data:{item:AW,relativeRef:AT,breakBy:AX},cssClass:"RelativeReference-MenuEditor",contents:[{scriptClass:"mstrmojo.Box",cssClass:"funcBox",children:[{scriptClass:"mstrmojo.Label",visible:AU&&AU.length,text:AU,cssClass:"menu-info-text"},Z.copy({cssClass:"RelativeReferencePullDown"},j(M,AV,"relativeRef",function(Aa){return Aa.t;}))]},AA(AZ,AY,{cssClass:"RelativeReferencePullDown"})],fnOk:function(Aa){return AS(Aa.item,Aa.relativeRef,[Aa.breakBy]);}});},getMovingTotalMenu:function A(Ac,AW,AY){var Ad=1,AV=AP[Ad].t,AX=1,AT=mstrmojo.desc(13289,"Starting previous##rows").split("##"),Ab=0,AU=AW&&AW[Ab];return new mstrmojo.ui.menus.EditorConfig({cssClass:"MovingTotal-MenuEditor",data:{item:Ac,funcType:AV,windowSize:AX,breakBy:AU},contents:[Z.copy({cssClass:"MovingTotalPullDown"},j(AP,Ad,"funcType",function(Ae){return Ae.t;})),{alias:"winSzBox",scriptClass:"mstrmojo.HBox",children:[{scriptClass:"mstrmojo.Label",cssClass:"WinSzPrefix menu-info-text",text:AT[0]},{alias:"winSz",scriptClass:"mstrmojo.ValidationTextBox",required:true,dtp:mstrmojo.expr.DTP.INTEGER,constraints:{trigger:mstrmojo.validation.TRIGGER.ALL,min:1},postCreate:function Aa(){this.set("value",AX);},_ontooltipover:function(){var Ae=mstrmojo.all[this.id];Ae._hovered=true;Ae.showTooltip();},_ontooltipout:function(){var Ae=mstrmojo.all[this.id];Ae._hovered=false;Ae.hideTooltip();},useRichTooltip:true,tooltipOpenDelay:0,onInvalid:function(){var Ae=this.validationStatus.msg,Af=!(this.richTooltip&&Ae===this.richTooltip.content);this.richTooltip={posType:mstrmojo.tooltip.POS_BOTTOMLEFT,cssClass:"vi-warning vi-tooltip-V",top:-5,refNode:this.domNode,content:Ae};if(this._hovered&&Af){this.hideTooltip();this.showTooltip();}},onValid:function(){this.richTooltip=null;this.hideTooltip();},postvalueChange:function AZ(){var Ae=this.isValid();this.parent.parent.popupConfig.data.set("windowSize",Ae?parseInt(this.value,10):0);}},{scriptClass:"mstrmojo.Label",cssClass:"WinSzSuffix menu-info-text",text:AT[1]}]},AA(AW,Ab,{cssClass:"MovingTotalPullDown BreakByBox"})],bindings:{okEnabled:function(){return !!this.data.windowSize;}},fnOk:function AS(Ae){if(AY){AY(Ac,Ae.funcType,Ae.windowSize,[Ae.breakBy]);}}});},getRunningTotalMenu:function AK(AV,AY,AT){var AU=0,AS=b[AU].t,AX=0,AW=AY&&AY[AX];return new mstrmojo.ui.menus.EditorConfig({data:{item:AV,func:AS,breakBy:AW},cssClass:"RunningTotal-MenuEditor",contents:[Z.copy({cssClass:"RunningTotalPullDown"},j(b,AU,"func",function(AZ){return AZ.t;})),AA(AY,AX,{cssClass:"RunningTotalPullDown BreakByBox"})],fnOk:function(AZ){return AT(AZ.item,AZ.func,[AZ.breakBy]);}});},getRankMetricEditor:function AB(AW,AZ,AU){var AS=[{n:mstrmojo.desc(1886,"Descending"),v:"0"},{n:mstrmojo.desc(1885,"Ascending"),v:"-1"}],AT=0,AV=AS[AT].v,AY=0,AX=AZ&&AZ[AY];return new mstrmojo.ui.menus.EditorConfig({data:{item:AW,order:AV,breakBy:AX},cssClass:"NewRankMetric-MenuEditor",contents:[{scriptClass:"mstrmojo.Box",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(14612,"Sort:"),cssClass:"menu-info-text"},Z.copy({cssClass:"NewRankMetricPullDown"},j(AS,AT,"order"))]},AA(AZ,AY,{cssClass:"NewRankMetricPullDown"})],fnOk:function(Aa){return AU(Aa.item,Aa.order,[Aa.breakBy]);}});},insertAddUnitToFilterMenu:function G(AX,AT,AS){var AV=this,AU=mstrmojo.desc(2022,"Add to Filter"),AW=v.ensureArray(AS).filter(function(AY){return AV.isValidAddToFP(AT,AY);});if(AW.length>0){AX.addMenuItem(AU,"",function(){AT.addFilterStackSelectors(AW);});}else{AX.addDisabledMenuItem(AU,"");}},isValidAddToFP:function O(AT,AY,Aa){var AU=AT.controller.view.builder,AW=AU.getLayoutVIMap(AT.getCurrentLayoutKey()),AX=AW.getComponent(K.FILTER_STACK),AZ=true;if(!Aa){AZ=(!AX||v.find(AX.getFilterDefinitions(),"srcid",AY.did)===-1);}if(AZ&&AY.lock){var AV=AY.fs||[],AS;AZ=false;for(AS=0;AS<AV.length;AS++){if(AV[AS].iidx){AZ=true;break;}}}return AZ;},renameItem:function u(AX,Aa,AT,AV){var AW=AX.mstrmojoId,AZ=mstrmojo.dom.findWidget(AX);AV=AV||{};if(!AW){var AY=mstrmojo.insert({scriptClass:"mstrmojo.EditableLabel",editOnClick:false,editOnTwoClicks:true,text:Aa.n,title:Aa.dsc||"",allowEmptyText:AV.allowEmptyText,allowTrimming:AV.allowTrimming||false,cssClass:AV.cssClass||"",placeholder:AX,onTextEditComplete:function AS(Ab){if(Ab){return AT(this);}},onmousedown:function AU(Ab){if(this.isEditing){Ab.cancel();}}});if(AZ&&AZ.draggable){AY.parent=AZ;}AY.render();AW=AY.id;}mstrmojo.all[AW].set("isEditing",true);return mstrmojo.all[AW];},getMultipleMetricsCalculationMenus:function l(AZ,AS,Ac){var AY=new mstrmojo.ui.menus.MenuConfig(),Ae=mstrmojo.vi.ui.DatasetUnitMenuUtils.getMultiSelectionShortcutMetricFunctions(AZ),AW=function(Ag,Ah,Af){return{dsid:AS,funcType:Ah,funcType2:Af,items:Ag};};AY.useTooltip=true;Ae.forEach(function(Af){AY.addMenuItem(Af.n,"",function(){Ac(AW(AZ,Af.t));});});if(AZ.length===2){var AX=mstrmojo.mstr.EnumFunction,AV=AX.FunctionDivide,AT=AX.FunctionMinus,Ab=AZ[0],Aa=AZ[1],Ad=function(Aj,Ah,Af,Ai,Ag){AY.addMenuItem(Aj,"",function(){Ac(AW([Ah,Af],Ai,Ag));});},AU=[{n:function(Ag,Af){return Ag.n+"/"+Af.n;},fn:AV},{n:function(Ag,Af){return Ag.n+"-"+Af.n;},fn:AT},{n:function(Ag,Af){return"("+Ag.n+"-"+Af.n+")/"+Af.n;},fn:AT,fn2:AV}];AU.forEach(function(Af){AY.addSeparator();Ad(Af.n(Ab,Aa),Ab,Aa,Af.fn,Af.fn2);Ad(Af.n(Aa,Ab),Aa,Ab,Af.fn,Af.fn2);});}return AY;},getCalculationMetricEditor:function L(Aa,Ab,AZ){var AU=[{n:"",css:"operator-plus",funcType:q.FunctionPlus},{n:"",css:"operator-minus",funcType:q.FunctionMinus},{n:"",css:"operator-multiply",funcType:q.FunctionTimes},{n:"",css:"operator-divide",funcType:q.FunctionDivide},{n:!mstrApp.isWSStyling?"%":"",css:"operator-percent-diff",funcType:q.FunctionMinus,funcType2:q.FunctionDivide}],AV={m1:Ab.did,m2:Aa[0].did,operator:q.FunctionPlus,u1:{id:Ab.did,type:4},u2:null},AT=function(Ac){return{}.hasOwnProperty.call(Ac,"cst");},AY=function(Ac){return typeof Ac==="string"&&!!Ac.length&&!isNaN(Number(Ac));};var AS="this.parent.popupConfig.valid || this.selectedIndex !== -1 || (!!this.selectedNode && this.selectedNode.innerHTML.length === 0)",AX=function AX(){var Ac=this.parent.popupConfig;if(Ac){Ac.set("okEnabled",this[this.editableSlot].innerHTML.length!==0);}};return new mstrmojo.ui.menus.EditorConfig({cssClass:"Calculation-MenuEditor",contents:[AM({metrics:Aa,value:AV.m1,propName:"u1",optionValueField:"did",bindings:{valid:AS},postkeyup:AX}),{scriptClass:"mstrmojo.ButtonListHoriz",items:AU,selectedIndex:0,postselectionChange:function AW(){this.parent.data.set("operator",this.selectedItem.funcType);this.parent.data.set("operator2",this.selectedItem.funcType2);}},AM({metrics:Aa,value:null,propName:"u2",optionValueField:"did",bindings:{valid:AS},postkeyup:AX})],data:AV,okEnabled:false,bindings:{valid:function(){var Ae=this.data.u1,Ad=this.data.u2,Af=this.data.operator;if(!Ae||!Ad||!Af){return false;}var Ac=!(AT(Ae)&&AT(Ad))&&(!AT(Ae)||AY(Ae.cst))&&(!AT(Ad)||AY(Ad.cst));this.set("okEnabled",Ac);return Ac;}},fnOk:function(Ac){return AZ(Ac.u1,Ac.u2,Ac.operator,Ac.operator2);}});},getCfgForAddUnitFromAllObject:function(AS,AT){var AU=null,AV=null,AW=[],AX=function(AY,AZ){if(!AZ){return false;}return v.find((AZ.att||[]).concat(AZ.mx||[]),"did",AY.did)>-1;};Z.forEach(AT,function(AZ,AY){if(AZ.idd){AU=AY;AV=AZ;return false;}return true;});if(!AU){AU="$GUID_141";AW.push({act:"createDataset",mgo:true,prm:true,name:mstrApp.projectName,idd:true,newObjectIds:[AU]});}v.forEach(AS,function(AY){if(!AX(AY,AV)){AW.push({act:"addUnitToDataset",dsid:AU,unitId:AY.did,unitType:AY.t});}});return{actions:AW,dsid:AU};},getAggregateByMenu:function p(AX,AV){var AT=new mstrmojo.ui.menus.MenuConfig(),AU=function(Ab,Aa){var Ad,Ac;if(Aa){var AZ=Ab.mexp.args[0];Ad=AZ.did;Ac=AZ.t;}else{Ad=Ab.did;Ac=Ab.t;}return{did:Ad,t:Ac};},AS=this.getAvailableShortcutMetricFunctionsGroup(AX),AY=AX.mexp?AX.mexp.ft:null,AW=AX.mexp&&this.isAmongFunctions(AY,AS);AS.forEach(function(AZ,Aa){if(Aa!==0){AT.addSeparator();}AZ.forEach(function(Ab){AT.addMenuItem(Ab.n,"",function(){AV(AU(AX,AW),Ab.t);});});});return AT;},showObjectPicker:function o(AT,AS){var AU="object_picker";return function(){var AV=mstrmojo.all[AU];if(!AV){AV=new mstrmojo.vi.ui.editors.ObjectPicker({id:AU});if(AS){AV.supportedTypes=v.hash(AS);AV.ob.browsableTypes="8,"+AS.join(",");}AV.render();}else{if(AS){AV.supportedTypes=v.hash(AS);AV.ob.browsableTypes="8,"+AS.join(",");}AV.browse();}AV.OKFn=AT||mstrmojo.emptyFn;AV.open();};},getObjectPicker:function o(){var AS="object_picker";return mstrmojo.all[AS];},generateNumberFormat:function x(AX){var AS=V.DefaultFormat.FormattingNumber,AT=V.NumberFormatCategory,AV=AX||{},AU=AV.nct,AW=AU===AT.General&&AV.nfs==="General";return{category:(AU===undefined||AW)?AT.Automatic:AU,decimalPlaces:AV.ndp===undefined?2:AV.ndp,thousandSeparator:AV.nth===undefined?parseInt(AS.ThousandSeparator,10):(AV.nth?-1:0),currencySymbol:AV.ncs||AS.CurrencySymbol,currencyPosition:AV.ncp||AS.CurrencyPosition,format:AV.nfs||"",negativeNumbers:AV.nnn||AS.NegativeNumbers};},getNumberFormatEditor:function AD(AV,AU,AT){var AS=this.generateNumberFormat(AU),AW=Z.clone(AS),AY=Z.clone(AS);return new mstrmojo.ui.menus.EditorConfig({data:AW,bindings:{okEnabled:function(){return !(this.data.category===AY.category&&this.data.format===AY.format);}},cssClass:"NumberFormat-MenuEditor",contents:[{scriptClass:"mstrmojo.vi.ui.NumberFormatter",formatValue:AS,myData:AW,oldData:AY,adjustAfterCategoryChange:function(){this.parent.adjustCornersForPopupOverflow();}}],fnOk:function AX(AZ){if(!(AZ.category===AY.category&&AZ.format===AY.format)){return AT(AZ,AY);}}});},getHighlightElementHandler:function(AU,AT,AS){return function(){D.toggleClass(AT,AS||"open",AU);};},getConfDataTypeMenuCfg:function AH(AS,An,Af,A1){var Aw="ToString",Am="ToNumber",Ak="ToDateTime",Ae="keepOriginal",AV="Default",Ax={ToString:r.DssXmlBaseFormText,ToNumber:r.DssXmlBaseFormNumber,ToDateTime:r.DssXmlBaseFormDate},Aa={ToString:"D1ED29645DEC4DBF99E8E09ED939074B",ToNumber:"399C3EC1041643F1ACE8F2A92B1C1F2F",ToDateTime:"0A558C7295DE42DAA8C5594F1724563F"},AY="_pattern",Az="_func",Ai="_bft",A4="_state",A2={UNCHANGED:0,TO_CREATE:1,TO_UPDATE:2},AX={n:"Default",v:"Default"},Au=[{n:"MM-DD-Year",v:"MM-DD-Year"},{n:"MM/DD/Year",v:"MM/DD/Year"},{n:"DD-MM-Year",v:"DD-MM-Year"},{n:"DD/mm/Year",v:"DD/mm/Year"},AX],AU=[{n:mstrmojo.desc(13772,"Keep Original"),v:Ae},{n:mstrmojo.desc(12276,"String"),v:Aw},{n:mstrmojo.desc(2052,"Date"),v:Ak},{n:mstrmojo.desc(3434,"Number"),v:Am}];if(mstrApp&&mstrApp.showMultiDataType){AU=[{n:mstrmojo.desc(13772,"Keep Original"),v:Ae},{isSeparator:true,cls:"separator"},{n:mstrmojo.desc(3434,"Number"),v:Am,bft:r.DssXmlBaseFormNumber},{n:mstrmojo.desc(9920,"Big Decimal"),v:Am,bft:r.DssXmlBaseFormBigDecimal},{isSeparator:true,cls:"separator"},{n:mstrmojo.desc(2052,"Date"),v:Ak,bft:r.DssXmlBaseFormDate},{n:mstrmojo.desc(9919,"DateTime"),v:Ak,bft:r.DssXmlBaseFormDateTime},{n:mstrmojo.desc(2170,"Time"),v:Ak,bft:r.DssXmlBaseFormTime},{isSeparator:true,cls:"separator"},{n:mstrmojo.desc(3544,"Text"),v:Aw,bft:r.DssXmlBaseFormText},{n:mstrmojo.desc(9921,"HTML Tag"),v:Aw,bft:r.DssXmlBaseFormHTMLTag},{n:mstrmojo.desc(8984,"Phone Number"),v:Aw,bft:r.DssXmlBaseFormPhoneNumber},{n:mstrmojo.desc(4530,"Symbol"),v:Aw,bft:r.DssXmlBaseFormSymbol},{n:mstrmojo.desc(9922,"URL"),v:Aw,bft:r.DssXmlBaseFormUrl},{n:mstrmojo.desc(4699,"Email"),v:Aw,bft:r.DssXmlBaseFormEmail}];}var Ad=Z.clone(AU).slice(1),Al=An.fs.filter(function(A6){return An.da||A6.obf;}),A5=Al.length>1,Ah=Al.length>5,AZ=false,Av=false,Ao=[],At=[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13773,"Select Data Type for New Attribute:"),cssClass:"menu-info-text menu-header-text"}],A3={okEnabled:false},Ay=function(){var A6=false;Al.forEach(function(A7){A6=A6||(A3[A7.fnm+Az+A4]!==A2.UNCHANGED)||(A3[A7.fnm+AY+A4]!==A2.UNCHANGED);});return A6;},Ap=function(A8,A7){var A6=0;if(A8.da){v.forEach([Aw,Ak,Am],function(BB,A9){var BA=new RegExp("^\\s*"+BB+"\\s*(<.*>)?\\s*\\((.+)\\)\\s*$","i").exec(A7.f);if(BA&&BA[2]){A6=A9+1;return false;}});}return A6;},As=function(A8,A7){var A6=0;if(A8.da){var A9=A7&&A7.bftp;v.forEach(AU,function(BB,BA){if(BB.bft===A9){A6=BA;return false;}});}return A6;},Ar=function(A8,A7){var A9=AV;if(An.da){var A6=new RegExp("^\\s*"+A7+'\\s*<\\s*Pattern\\s*=\\s*"(.+)"\\s*>.*$',"i").exec(A8.f);if(!mstrmojo.string.isEmpty(A6&&A6[1])){A9=A6[1];}}return A9;},Aq=function(){return Ah?this.parent.parent.parent:(A5?this.parent.parent:this.parent);},Aj=function(A6){if(Ah){A6.formList.updateScrollbars();}},AW=function(BD,BE,BC){var A6=BE.fnm,A9=Ah?BD.formList[BE.fnm+AY]:BD[BE.fnm+AY],BA=A5?A9.children[1]:A9,BB=A3[A6+Az],A8=AZ&&(BB===Ak||BB===Aw),A7=A9.visible!==A8;if(A7){A9.set("visible",A8);if(A8){Aj(BD);}else{BA.hideTooltip();}}if(BC){BA.set("text",Ar(BE,BB));BA.set("items",BB===Ak?Au:[AX]);}},Ag=function(A6){var A7=false;Al.forEach(function(A8){if(A3[A8.fnm+Az]===Ak||A3[A8.fnm+Az]===Aw){A7=true;return false;}});A6.advancedLabel.set("visible",A7);},AT=function(A8,A6,A9){return{scriptClass:"mstrmojo.ui.Pulldown",isHostedWithin:false,items:A8,alias:A9.fnm+Az,selectedIndex:A6,onPopupWidgetOpened:function(){Aj(Aq.call(this));},onitemSelected:function A7(BE,BC){var BD=Aq.call(this),BF=BD.data,BG=A9.fnm,BB=BE.v,BA=function(BH){if(BH){return(A8.length===3?A2.TO_UPDATE:A2.TO_CREATE);}return A2.UNCHANGED;};BF.set(BG+Az,BB);BF.set(BG+AY,Ar(A9,BB));BF.set(BG+Ai,BB===Ae?A9.bftp:(BE.bft?BE.bft:Ax[BB]));BF.set(BG+Az+A4,BA(BC!==A6));BF.set("okEnabled",Ay());AW(BD,A9,true);Ag(BD);}};},Ac=function(A8,A9,A6){return{scriptClass:"mstrmojo.ui.SearchablePulldown",isHostedWithin:false,alias:A8.fnm+AY,useRichTooltip:true,visible:A6,allowCustomText:true,allowEmptyText:true,onPopupWidgetOpened:function(){Aj(Aq.call(this));},customizeSearchResult:function(BA){if(v.find(BA,"v","Default")===-1&&this.items.length>0){BA.push(AX);}},onclick:function(BA){mstrmojo.ui.SearchablePulldown.prototype.onclick.call(this,BA);this.set("isEditing",true);},updateData:function(BC){var BA=Aq.call(this),BB=BA.data,BD=A8.fnm;BB.set(BD+AY,BC);BB.set(BD+AY+A4,A9!==BC?A2.TO_UPDATE:A2.UNCHANGED);BB.set("okEnabled",Ay());},onitemSelected:function A7(BA){if(BA){this.updateData(BA.v);}},onkeyup:function(BA){mstrmojo.ui.SearchablePulldown.prototype.onkeyup.call(this,BA);var BB=this[this.editableSlot],BC=BB.innerText||BB.textContent;this.updateData(BC);},updateTooltipConfig:function(BB){this.tooltipOpenDelay=BB?500:0;var BA=X.position(this.domNode);this.richTooltip={content:mstrmojo.desc(14114,'Pattern determines the formatting for the resulting string of characters. You can use the custom numeric, date, and time formatting symbols. <br/> Example: if pattern is defined as "0,000.00" for "1001", it returns the string "1,001.00"'),posType:mstrmojo.tooltip.POS_TOPLEFT,cssClass:"vi-regular vi-tooltip-C",top:BA.y-2,left:BA.x+BA.w+10};}};},A0=function(BE,BD,A6,A7,BC){var A9=mstrApp&&mstrApp.showMultiDataType?As(BE,BD):Ap(BE,BD),BB=Ar(BD,AU[A9].v),A8=BD.fnm,BA=AU;if(A9>0){BA=Ad;A9--;}A7[A8+AY]="";A7[A8+Az]="";A7[A8+Ai]="";A7[A8+Az+A4]=A7[A8+AY+A4]=A2.UNCHANGED;if(BC){A6.push({scriptClass:"mstrmojo.HBox",cssClass:"func-input",alias:A8+Az,children:[{scriptClass:"mstrmojo.Label",text:A8,useRichTooltip:true,updateTooltipConfig:function(BH){this.tooltipOpenDelay=BH?500:0;var BG=this.domNode;var BF=X.position(BG);if(BG.scrollWidth>BG.offsetWidth){this.richTooltip={content:BG.innerText,posType:mstrmojo.tooltip.POS_TOPLEFT,cssClass:"vi-regular vi-tooltip-V",top:BF.y-BF.h-10,left:BF.x-10};}}},Z.copy({cssClass:"ConfDataTypePullDown MeContentPullDown HBOXPullDown"},AT(BA,A9,BD,true))]});A6.push({scriptClass:"mstrmojo.HBox",cssClass:"pattern-input",alias:A8+AY,children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(12078,"Pattern"),cssClass:"menu-info-text"},Z.copy({cssClass:"ConfDataTypePullDown MeContentPullDown HBOXPullDown"},Ac(BD,BB,true))]});}else{A6.push(Z.copy({cssClass:"ConfDataTypePullDown MeContentPullDown"},AT(BA,A9,BD,false)));A6.push(Z.copy({cssClass:"ConfDataTypePullDown MeContentPullDown"},Ac(BD,BB,false)));}};v.forEach(An.fs,function(A6){if(AS.als&&AS.als.links[An.did+" "+A6.fid]){Av=true;return false;}});if(A5){Al.forEach(function(A6){A0(An,A6,Ah?Ao:At,A3,true);});}else{A0(An,Al[0],At,A3,false);}if(Ah){At.push({scriptClass:"mstrmojo.ui.ScrollableContainer",alias:"formList",cssClass:"formList",children:Ao});}At.push({scriptClass:"mstrmojo.Label",cssClass:"advancedLabel",alias:"advancedLabel",allowHTML:true,text:"<span>"+mstrmojo.desc(702,"Advanced")+"</span>",onclick:function(){var A7=this.parent,A8,A6,A9=true;AZ=!AZ;D.toggleClass(this.domNode,"expanded",AZ);Al.forEach(function(BA){AW(A7,BA,false);A8=Ah?A7.formList[BA.fnm+AY]:A7[BA.fnm+AY];A6=A5?A8.children[1]:A8;if(A8.visible&&A9&&!Ah){A9=false;A6.showTooltip();}});}});return new mstrmojo.ui.menus.EditorConfig({data:A3,cssClass:"ConfDataType-MenuEditor",contents:At,onOpen:function(){Aj(this);},bindings:{okEnabled:"this.data.okEnabled"},fnOk:function Ab(A8){var A6=[],BA=[],A7=false,A9=function(BD,BE,BC){var BG=[],BF=function(BH){var BI=BH.ftk&&BH.ftk.slice(2,-2);if(!BI){return null;}while((BI.shift()).v!=="("){}return BI;},BB=BF(BC)||[AF(An,BC)];BG.push({v:"!",tp:33,lv:4});if(BD!==Ae){BG.push({v:BD,oi:{did:Aa[BD],t:11,st:2816,n:BD}});if(!mstrmojo.string.isEmpty(BE)&&BE!==AV&&(BD===Ak||BD===Aw)){BG.push({v:'<Pattern="'+BE+'">(',tp:"2",lv:1});}else{BG.push({v:"(",tp:"2",lv:1});}BG=BG.concat(BB);BG.push({v:")",tp:"2",lv:1});}else{BG=BG.concat(BB);}BG.push({v:"",tp:-1,lv:4});return mstrmojo.ME.AttributeEditBox.getTokenStreamXML({items:BG});};if(Av){A7=true;}else{Al.forEach(function(BB){if(A8[BB.fnm+Az+A4]===A2.TO_CREATE){A7=true;return false;}else{if(A8[BB.fnm+Az+A4]===A2.TO_UPDATE||(A8[BB.fnm+AY+A4]===A2.TO_UPDATE&&(A8[BB.fnm+Az]===Ak||A8[BB.fnm+Az]===Aw))){BA.push(BB);}}});}if(A7){Al.forEach(function(BB){A6.push({n:BB.fnm,formula:A9(A8[BB.fnm+Az],A8[BB.fnm+AY],BB),bft:A8[BB.fnm+Ai]});});A1(A7,A6);}else{if(An.da){Y(AS.mid,An.did,BA,function(BB){BB.forEach(function(BC){A6.push({did:BC.fid,formula:A9(A8[BC.fnm+Az],A8[BC.fnm+AY],BC),bft:A8[BC.fnm+Ai]});});A1(A7,A6);});}}}});},getCreateTimeDAEditorCfg:function P(AV,AU){var AS=c(AV);if(!AS){return null;}return new mstrmojo.ui.menus.EditorConfig({data:{okEnabled:false},cssClass:"CreateTimeAttribute-MenuEditor",contents:[{scriptClass:"mstrmojo.ui.CheckList",alias:"time_type",items:[{n:mstrmojo.desc(873,"Year"),v:"Year"},{n:mstrmojo.desc(10051,"Quarter of Year"),v:"QuarterOfYear"},{n:mstrmojo.desc(10050,"Quarter"),v:"Quarter"},{n:mstrmojo.desc(10049,"Month of Year"),v:"MonthOfYear"},{n:mstrmojo.desc(871,"Month"),v:"Month"},{n:mstrmojo.desc(10047,"Week of Year"),v:"WeekOfYear"},{n:mstrmojo.desc(10048,"Week"),v:"Week"},{n:mstrmojo.desc(11608,"Day of Year"),v:"DayOfYear"},{n:mstrmojo.desc(10046,"Day of Month"),v:"DayOfMonth"},{n:mstrmojo.desc(10045,"Day of Week"),v:"DayOfWeek"}],onchange:function AT(){var AX=false;Z.forEach(this.selectedIndices,function(AY){if(AY){AX=true;return false;}});this.parent.data.set("okEnabled",AX);}}],bindings:{okEnabled:function(){return this.data.okEnabled;}},fnOk:function AW(Ab,AZ){var Aa=AZ.time_type,Ae=Aa.selectedIndices,AY=Aa.items,Ad=[],AX=[],Ac=function(Af,Ah,Aj){var Ai=[{v:"!",tp:33,lv:4}],Ag;Aj.forEach(function(Ak){if(Ak===Q){Ai.push(AF(Af,Ah));}else{Ag=AI[Ak];if(Ag){Ai.push({v:Ag,oi:{did:Ag,t:11,st:2816,n:Ag}});}else{Ai.push({v:Ak,tp:"2",lv:1});}}});Ai.push({v:"",tp:-1,lv:4});return mstrmojo.ME.AttributeEditBox.getTokenStreamXML({items:Ai});};Z.forEach(Ae,function(Af,Ag){if(Af){AX=[];Z.forEach(AO[AY[Ag].v],function(Ah,Ai){AX.push({n:Ai,formula:Ac(AV,AS,Ah),bft:(Ai==="DATE"?8:0)});});Ad.push({isTokenStream:true,forms:AX,name:AV.n+" ("+AY[Ag].n+")"});}});return AU(Ad);}});},RefreshAndCloseAllObjectBrowserCallback:function(AT,AS){return mstrmojo.func.wrapMethods(AS.getDatasetsUpdateCallback(),{success:function(){if(v.find(AT,"act","createDataset")!==-1){AS.controller.datasetsPanel.set("allObjectBrowserOpened",false);}}});},getUnitFromDataset:function d(AT,AV,AS){var AU=null;Z.forEach(AT,function(AX){var AW=AX.att||[];if(AS===4){AW=AX.mx||[];}v.forEach(AW,function(AY){if(AY.did===AV){AU=AY;return false;}});if(AU){return false;}});return AU;},getDatasetFromId:function R(AS,AT){var AU=null;Z.forEach(AS,function(AV){if(AV.did===AT){AU=AV;return false;}});return AU;},getDatasetFromAttributeId:function R(AS,AT){var AU=null;Z.forEach(AS,function(AV){if(v.find(AV.att,"did",AT)>=0){AU=AV;return false;}});return AU;},getSortedDatasetUnits:function E(AS){var AT=function AT(AU){return AU.t===W.DssTypeMetric?2:1;};AS=AS.concat();AS.sort(function(AX,AV){if(!AX||!AV){return true;}var AY=AT(AX)-AT(AV),AW=AX.n.toUpperCase(),AU=AV.n.toUpperCase();return AY!==0?AY:(AW!==AU?AW.localeCompare(AU):AX.n.localeCompare(AV.n));});return AS;},isGeoAttr:function AJ(AS,AT){return !!(AS.fs&&(AS.fs instanceof Array)&&AS.fs.length&&AS.fs.some(function(AU){return AU.fgr>0&&(!AT||(AT&&AU.obf));}));},isTimeAttr:function g(AS){return !!(AS.fs&&c(AS));},getUnitCssClass:function(AT){var AS=AT.t;if(this.isGeoAttr(AT,AT.useAvailGeoFmsOnly)){AS+="g";}else{if((AT.dm||AT.um)||AT.da){AS+="d";}else{if(AT.de){AS+="de";}else{if(this.isTimeAttr(AT)){AS+="t";}}}}if((AT.t===AR.Consolidation&&AT.st===N.ConsolidationManaged)||(AT.t===AR.Attribute&&AT.st&&AT.st===N.AttributeRecursive)){AS+=(" st"+AT.st);}if(AT.t===AR.Consolidation&&AT.st===N.ConsolidationManaged&&AT.ndetype===AC.DssRecursiveDerivedElement){AS+=" nde4ra";}return"ic"+AS;},hasMultiForms:function n(AT,AS){return t.getFormsByAttrId(AT,AS).length>1;},getDisplayFormsMenu:function F(Ah,Af,AZ,Ae){var Ad=[],Ag=[],AW=[],Ab=[{n:mstrmojo.desc(2411,"Off"),v:0},{n:mstrmojo.desc(2410,"On"),v:1},{n:mstrmojo.desc(8504,"Form Name Only"),v:2},{n:mstrmojo.desc(8505,"Show Attribute Name Once"),v:3},{n:mstrmojo.desc(4531,"Automatic"),v:4}];var Aa=Af.model.data,AS=Aa.gts,Ac;var AV=Ah.t===AR.Consolidation&&Ah.st===N.ConsolidationManaged;v.forEach((AS.row||[]).concat(AS.col||[]),function(Ai){if(Ai.id===Ah.did){Ag=Ag.concat(Ai.fs);}});Ac=t.getFormsByAttrId(Ah.attId||Ah.did,AZ);v.forEach(Ac||[],function(Aj){var Ak=Aj.fid;if(v.find(Ad,"id",Ak)<0){Ad.push({id:Ak,n:Aj.fnm});var Ai=v.find(Ag,"id",Ak);if(Ai>-1){AW[Ad.length-1]=true;}}});var AX=[{alias:"fs",scriptClass:"mstrmojo.ui.CheckList",minimumSelectCnt:1,items:Ad,selectedIndices:AW},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11918,"Display attribute form names:"),cssClass:"menu-info-text"},{alias:"longNames",scriptClass:"mstrmojo.ui.Pulldown",items:Ab,isHostedWithin:false,selectedIndex:v.find(Ab,"v",Aa.lnm||0),onitemSelected:function AT(Ai){this.v=String(Ai.v);}}];if(Af.getChartStyle&&Af.getChartStyle()==="NewGraphMatrixVisualizationStyle"){AX.splice(-2,2);}if(AV){AX.splice(-2,2);}return new mstrmojo.ui.menus.EditorConfig({cssClass:"displayForms",data:{item:Ah,oldSelected:Z.copy(AW,{})},contents:AX,okBtnText:mstrmojo.desc(1442,"Ok"),fnOk:function AU(An,Ar){var Am=Ar.fs,Ak=Am.selectedIndices,Ap=Am.items,Av=[],Ao=[],As=[];if(!Am.getSelectedItems().length){mstrmojo.alert("Please select at least one form!");return ;}var Aj=An.oldSelected,Au=Ak,Al,Aq={},At={};for(Al=0;Al<Ap.length;Al++){if(Aj[Al]&&!Au[Al]){Aq[Al]=true;}else{if(!Aj[Al]&&Au[Al]){At[Al]=true;}}}Z.forEach(Aq,function(Aw,Ax){if(Aw){Ao.push({act:"removeForm",unitId:Ah.did,unitType:Ah.t,attFormId:Ap[Ax].id});}});var Ai=Af.model.data.gts;(Ai.row||[]).concat(Ai.col||[]).forEach(function(Aw){if(Aw.id===Ah.did){(Aw.fs||[]).forEach(function(Ax){if(v.find(Ad,"id",Ax.id)<0){Ao.push({act:"removeForm",unitId:Ah.did,unitType:Ah.t,attFormId:Ax.id});}});}});Z.forEach(At,function(Aw,Ax){if(Aw){Av.push({act:"addForm",unitId:Ah.did,unitType:Ah.t,attFormId:Ap[Ax].id,unitPos:0});}});As.push({act:"putProperties",prs:"Template Formatting",pr:"LongNames",v:Ar.longNames?Ar.longNames.v:0});if(Ae){Ae([{act:"updateTemplate",keyContext:Af.k,partialRetrieval:{nodes:[Af.k]},actions:Ao.concat(Av).concat(As)}]);}},onOpen:function AY(){this.fs.updateScrollbars();}});},getAttributeLinkMenu:function h(Ae,Ah,Ac,Ag,AX){var Ai=-2147483648,AZ=Ag.datasets,Aa=AZ[Ac],Af=Aa.tables||[],AS={},Ab=[],AV=(Ah.fs&&Ah.fs[0])||{},Ad=[],AY=779,AU=Ah.art>1,AT=!AU&&Z.keyarray(AZ).length>1,AW=function(){mstrmojo.vi.ui.editors.AttributeLinkEditor.open({attribute:Ah,docModel:Ag,datasetId:Ac});};if((Aa.st!==AY)||Af.length<=1||Ah.da){if(AT){Ae.addMenuItem(mstrmojo.desc(11941,"Link to Other Dataset..."),"",AW);}return ;}v.forEach(Aa.att,function(Al){var Am=true,Ak=null,Aj=(Al.fs&&Al.fs[0])||{};if(Al.da){return ;}if(AV.der===Ai||Aj.der===Ai||AV.fgr===-1||Aj.fgr===-1||AV.ftr===-1||Aj.ftr===-1){return ;}if(AV.fgr&&Aj.fgr&&AV.fgr!==Aj.fgr){return ;}if(AV.ftr&&Aj.ftr&&AV.ftr!==Aj.ftr){return ;}v.forEach(Af,function(An){var Ao=v.find(An.attRefs,"did",Ah.did),Ap=v.find(An.attRefs,"did",Al.did);if(Ao>=0&&v.indexOf(Ab,An.did)<0){Ab.push(An.did);}if(Ap>=0){Ak=An.did;}if(Ao>=0&&Ap>=0){Am=false;}});if(Am&&!Al.hide){AS[Al.did]=Ak;Ad.push(Al);}});if(Ad.length>0&&Aa.hcs!==true&&!Ag.isSparkDataset(Aa)){Ae.addEditorMenuItem(mstrmojo.desc(13172,"Map Attributes"),"",function(){return new mstrmojo.ui.menus.EditorConfig({data:{},cssClass:"mapAttribute",okVisible:false,cancelVisible:false,contents:[{scriptClass:"mstrmojo.ui.ScrollableContainer",children:[{scriptClass:"mstrmojo.vi.ui.InteractiveUnitList",draggable:false,CLS_HAS_MENU:"",items:Ad,listHooks:{select:function Aj(Ak,Al){Ag.warnForEditStandaloneDS(Aa,function(){v.forEach(Ab,function(Am){I({dsid:Ac,srcId:Ah.did,srcTableId:Am,tgtId:Al.did,tgtTableId:AS[Al.did]},Ag,AX);});});}}}]}]});});}if(AT){Ae.addMenuItem(mstrmojo.desc(11941,"Link to Other Dataset..."),"",AW);}},isDocumentLevelItem:function w(AS){return AS&&(AS.um||AS.da||(AS.t===AR.Consolidation&&AS.st===N.ConsolidationManaged));},isLegalObjectName:function S(AS){var AT=/["\[\]\\]/g;if(AS.match(AT)){return false;}return true;},validateName:function k(AT,AU,AS){if(this.isLegalObjectName(AT)){AU();}else{mstrmojo.alert(mstrmojo.desc(8622,"The # cannot contain the reserved characters ##.").replace("##","'[', ']', '\"' and '\\'").replace("#",mstrmojo.desc(945,"Name")),AS,mstrmojo.desc(1388,"Rename"));}},hasCGorCon:function AQ(AS){return AS.att.some(function(AT){return H(AT);});},isCGorCon:function AG(AS,AU){var AT=v.filterOne(AU&&AU.att,function(AV){return AV.did===AS.did;});return H(AT||AS);},hasOldDEOverDatasets:function(AV,AU){var AT=false,AS;Z.forEach(AU,function(AW){AS=v.find((AW.att||[]),"did",AV);if(AS!==-1&&AW.att[AS].de){AT=true;return false;}});return AT;},getMarkGeoRoleEditorCfg:function AN(AS,A4,Am,Aj,BD,BF){var Ai=268435456,BA=536870912,AX=1073741824,Aw=268435456,A7=805306368,A2=805306368,Aq=1879048192,BE=-2147483648,A5=0,A6=1,AZ=2,Ah=3,Al=4,Af=5,BC=6,Ac=7,Ao=8,An=9,Ay=10,AV=2,Av=3,A3={v:A5,n:mstrmojo.desc(2057,"None")},BG={v:Ah,n:mstrmojo.desc(7674,"Country"),der:Ai},A1={v:AZ,n:mstrmojo.desc(7676,"State"),parents:[BG],der:BA},Ad={v:An,n:mstrmojo.desc(12919,"County"),parents:[BG,A1]},A8={v:A6,n:mstrmojo.desc(7675,"City"),parents:[BG,A1],der:AX},Ar={v:Ao,n:mstrmojo.desc(7677,"Zip Code"),parents:[BG,A1,A8]},Ak={v:Af,n:mstrmojo.desc(7696,"Latitude")},Az={v:BC,n:mstrmojo.desc(7697,"Longitude")},Ag={v:Al,n:mstrmojo.desc(7675,"City")+", "+mstrmojo.desc(7676,"State")},Au={v:Ay,n:mstrmojo.desc(12973,"Area Code")},Ax={v:Ac,n:mstrmojo.desc(2056,"Custom")},Ae={ID:[A3,BG,A1,Ad,A8,Ar,Ak,Az,Ag,Au,Ax],ID_NUMERIC:[A3,Ar,Au,Ak,Az],NON_ID:[A3,BG,A1,Ad,A8,Ar,Ag,Au,Ax],NON_ID_NUMERIC:[A3,Ar,Au]},As=v.filter(A4.fs,function(BH){return(BH.bftp===AV||BH.bftp===Av)&&BH.der!==BE;});var A0=(As.length>1),AU=v.find(As,"idf",true),AW=(AU===-1?0:AU),At=As[AW],Ab,AT,Ap,AY=[],Aa=function(BH){var BI=(BH.idf?"ID":"NON_ID")+(BH.bftp===AV?"_NUMERIC":"");return Ae[BI];},BB=function(BI,BH){return v.find(Aa(BH),"v",BI);};if(As.length===0||v.find(A4.fs,"fgr",-1)!==-1||At.der===BE){return null;}v.forEach(As,function(BJ,BH){var BI=Z.clone(BJ);BI.n=BI.fnm;AY.push(BI);if(BJ.fgr){At=BI;AW=BH;}});Ab=At.fid;Ap=At.fgr||0;AT=BB(Ap,At);return new mstrmojo.ui.menus.EditorConfig({data:{item:A4,geoForm:At,geoRole:Ap},cssClass:"MarkGeoRole-MenuEditor",contents:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13522,"Select Attribute Form:"),visible:A0},{scriptClass:"mstrmojo.ui.Pulldown",isHostedWithin:false,cssClass:"MarkGeoRolePullDown",items:AY,selectedIndex:AW,alias:"formList",visible:A0,onitemSelected:function A9(BJ){var BH=this.parent.data,BI=this.parent.geoRoleList;if(BH.geoForm.fid!==BJ.fid){BH.set("geoForm",BJ);BH.set("geoRole",BJ.fgr);BI.set("items",Aa(BJ));BI.set("selectedIndex",BB(BJ.fgr,BJ));}}},{scriptClass:"mstrmojo.ToolSeparator",visible:A0,markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod}},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13523,"Select Geographic Type:"),cssClass:"menu-info-text"},{scriptClass:"mstrmojo.ui.Pulldown",isHostedWithin:false,cssClass:"MarkGeoRolePullDown",items:Aa(At),selectedIndex:AT,alias:"geoRoleList",onitemSelected:function A9(BN){var BM=this.parent,BH=BM.data,BO=BM.geoDrvList;var BJ=[],BL=[],BI=At.der,BK;BH.set("geoRole",BN.v);v.forEach(BN.parents,function(BP,BQ){BK=BP;BJ.push({n:BK.n,der:BK.der});if((BI&BK.der)!==0){BL[BQ]=true;}});BO.set("items",BJ);BO.set("selectedIndices",BL);v.forEach(["geoDrvSeparator","geoDrvLabel","geoDrvList"],function(BP){BM[BP].set("visible",BJ.length>0);});if(BM.adjustCornersForPopupOverflow){BM.adjustCornersForPopupOverflow();}}},{scriptClass:"mstrmojo.ToolSeparator",markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},alias:"geoDrvSeparator"},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13524,"(Optional) Create Additional Attributes:"),alias:"geoDrvLabel",cssClass:"menu-info-text"},{scriptClass:"mstrmojo.ui.CheckList",alias:"geoDrvList"}],fnOk:function(BM,BL){var BI=function(BT){var BS=function(BX){var BY="<mpcs>";v.forEach(BX,function(BZ){BY+='<mpc did="'+BZ.did+'" n="'+BZ.n+'" georole="'+BZ.georole+'" drvflg="'+BZ.drvflg+'" />';});BY+="</mpcs>";return BY;},BO=function(BX,BZ,Bb,BY){var Ba=function(Bf,Bc,Be){var Bd=T(BT,Bf,Bc),Bg=m(Bd,Be);return Bg&&Bg.did;};BD.forEach(function(Bc,Bd){var Be=Ba(Bc.did,A4.did,BZ.fid);if(Be){BX[Bd]=BX[Bd]||[];BX[Bd].push({did:Be,n:BZ.fnm,georole:Bb,drvflg:BY});}});},BQ=[],BW=[],BU=BL.geoDrvList,BP=0,BR=false,BV={2:Aw,1:A7,9:A2,8:Aq}[BM.geoRole]||0;Z.forEach(BU.selectedIndices,function(BY,BX){if(BY){BP|=BU.items[BX].der;}});BP&=BV;if(At.fgr!==BM.geoRole||At.fid!==BM.geoForm.fid||At.der!==BP){if(A0&&At.fid!==BM.geoForm.fid){if(At.fgr!==A5){BO(BW,At,A5,0);if(At.der>0){BR=true;}}}if(BM.geoForm.fgr!==BM.geoRole||BM.geoForm.der!==BP){BO(BW,BM.geoForm,BM.geoRole,BP);if((BP&BM.geoForm.der)!==BM.geoForm.der){BR=true;}}if(BW.length>0){BW.forEach(function(BY,BX){BQ.push({act:"changeEMMAMapping",dsid:Am,tbid:BD[BX].did,mapping:BS(BY)});});BF(BQ,BR);}}},BJ=function(){C(AS.mid,Am,{success:BI});};var BK=mstrApp.isAppStatePause();if(!Aj||BK){var BN,BH=BK?mstrmojo.desc(212,"Continue"):mstrmojo.desc(219,"Yes");if(Aj){BN=mstrmojo.desc(16237,"The operation requires the dataset to be unloaded from memory. It will be automatically reloaded when you resume data retrieval. Do you want to continue?");}else{BN=BK?mstrmojo.desc(16236,"The operation requires modifying the dataset and unloading it from memory. It will be automatically reloaded when you resume data retrieval, however the change will also affect other reports, documents, and dossiers that share the dataset. Do you want to continue?"):mstrmojo.desc(15493,"Modifications to this dataset will affect other reports, documents, and dossiers that share the dataset. Do you want to continue?");}mstrmojo.warn(BN,{},{buttons:[y(BH,function(){BJ();},true,{cssText:"min-Width: 60px"}),y(mstrmojo.desc(221,"Cancel"),function(){})]});}else{BJ();}}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.expr","mstrmojo.Button","mstrmojo.Editor","mstrmojo.ME.MetricDataService","mstrmojo.ME._MetricEditorHelper");mstrmojo.requiresDescs(12852);var J=mstrmojo.expr,A=mstrmojo.array,G=mstrmojo.hash,M=mstrmojo.ME._MetricEditorHelper,B=mstrmojo.ME.Enum.DYNAMIC_DIMTY,L=mstrmojo.ME.Enum.UI_DATA_TYPE,I=mstrmojo.ME.Enum.UI_OBJECT_TYPE,F=mstrmojo.ME.MetricToken.brackets;var K;function Q(){var E=mstrmojo.all[K];if(E&&E.onmetricModify){E.onmetricModify();}}function C(){var E=mstrmojo.all[K];if(E&&E.updateScrollbars){E.updateScrollbars();}}mstrmojo.ME.SortByInputList=mstrmojo.declare(mstrmojo.WidgetList,null,{makeObservable:true,isNewDef:true,isDME:false,init:function R(E){this._super(E);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ME-sortby");},preBuildRendering:function(){var E=this.items||[];if(this.isNewDef&&this.isDME){E.push(B.getAutomaticDimtyObject());}E.push({n:""});this.items=E;if(this._super){this._super();}},getTokens:function(){var W=this.items,E=W.length-1,V,a=[];if(E>0){a.push({v:"SortBy"});a.push({v:"=",isDelimiter:true});a.push({v:"(",isDelimiter:true});for(V=0;V<E;V++){var Y=W[V],Z=Y.selFrm,U,X=false;if(M.isDimty(Y.n)){U={v:Y.n};X=true;}else{if(/^@/.test(Y.did)){U={v:Y.did};X=true;}else{U={v:F(Y.n),oi:Y};}}if(Z&&(Y.t===J.TP.ATTR||(Y.t===J.TP.CONS&&Y.st===J.STP.NDE))){G.copy({v:F(Y.n)+"@"+F(Z.n),exv:Z.dssid,extp:8},U);}a.push(U);if(!X){if(!!Y.asc){a.push({v:"Desc",tp:259});}}if(V!==(E-1)){a.push({v:",",isDelimiter:true});}}a.push({v:")",isDelimiter:true});}return a;},itemFunction:function(X,E,U){return new mstrmojo.Box({cssClass:"mstrmojo-ME-sortby-item",alias:"sortByItem",parent:U,children:[{scriptClass:"mstrmojo.ME.ObjectInputBox",alias:"sortByInput",cssClass:"mstrmojo-ME-ObjectInputBox-sortby",emptyText:mstrmojo.desc(12179,"Search for #").replace("#",mstrmojo.desc(3377,"Object").toLowerCase()),isDME:U.isDME,dtp:L.Sortby,maxObjectCount:1,folderLinksContextId:16,browsableTypes:[J.TP.ATTR,J.TP.METRIC,J.TP.FOLDER].join(","),getCandidatesThroughTaskCall:function Z(c,b){c.objectType=J.TP.ATTR+","+J.TP.METRIC;c.rootFolderType=39;c.blockCount=c.blockCount||this.blockCount;mstrmojo.ME.MetricDataService.getMetricComponents(c,b);},obCfg:{folderLinksContextId:16,browsableTypes:[J.TP.ATTR,J.TP.METRIC,J.TP.FOLDER].join(",")},bindings:{candidates:"this.parent.parent.candidates"},postCreate:function(b){if(!b){this.set("items",X.did||X.dimty?[X]:null);}},onitemchange:function(){var d=this.getSelectedObjects()[0];if(!d||!d.did&&!d.n){return ;}X.selFrm=null;mstrmojo.hash.copy(d,X);var c=this.parent.formsPulldown;if(c){c.updateForms(d);}var b=this.parent.ascPulldown;if(b){b.set("visible",X.t===4||X.st===J.STP.NDE);}Q();},onadd:function V(){if(this.getSelectedObjects().length===0){return ;}if(this.parent===U.ctxtBuilder.itemWidgets[U.items.length-1]){U.add([{n:""}]);this.parent.del.set("visible",true);}},hidePulldownButton:function(){return !U.isDME;},hideDelButton:function(){return true;},hideItemWidgetBrowseButton:function(){return U.isDME;},getItemsToFilterOut:function(){return U.items;}},{scriptClass:"mstrmojo.Pulldown",alias:"formsPulldown",cssClass:"mstrmojo-ME-sortby-forms mstrmojo-ME-Pulldown",popupCssClass:"mstrmojo-ME-Pulldown-Popup",defaultSelection:-1,bindings:{visible:function(){return this.items&&this.items.length>0;}},popupToBody:true,popupZIndex:100,postCreate:function(){this.retrieveDssForms(X);},retrieveDssForms:function W(d){var c=this,b=function(){var l=function(m){d.dssforms=m;c.set("items",d.dssforms);c.selectedIndex=-1;c.selectedItem=null;c.value=null;c.set("value",d.selFrm);};var j=c.parent.sortByInput.candidates,e=j&&j.items;if(d.did&&e){var h=A.find(e,"did",d.did);if(h>-1){var g=mstrmojo.hash.clone(e[h].fs);if(g){A.forEach(g,function(m){m[c.itemIdField]=m.fid;m[c.itemField]=m.fnm;});l(g);return ;}}}var k=function(m){if(m){var n=m.container;if(n&&n.dssforms){d.dssforms=n.dssforms;l(d.dssforms);}}},f=function(m){mstrmojo.alert(m.getResponseHeader("X-MSTR-TaskFailureMsg"));};mstrmojo.ME.MetricDataService.getAttributeForms({attributeID:d.did,displayedForms:0},{success:k,failure:f});};switch(d.t){case J.TP.ATTR:b();break;case J.TP.CONS:if(d.st===J.STP.NDE){c.set("visible",false);}break;case J.TP.METRIC:c.set("visible",false);break;case I.Dimty:c.set("visible",false);break;}},updateForms:function Y(b){this.retrieveDssForms(b);},onvalueChange:function a(){if(this.selectedItem){X.selFrm=this.selectedItem;}if(this.hasRendered){Q();}}},{scriptClass:"mstrmojo.Pulldown",alias:"ascPulldown",cssClass:"mstrmojo-ME-sortby-asc mstrmojo-ME-Pulldown",popupCssClass:"mstrmojo-ME-Pulldown-Popup",items:[{n:"Ascending",v:0},{n:"Descending",v:1}],itemIdField:"v",popupToBody:true,popupZIndex:100,visible:false,bindings:{value:function(){return this.parent.parent.items[E].asc;},visible:function(){var b=this.parent.sortByInput.getSelectedObjects()[0];return this.parent.formsPulldown.visible&&this.parent.formsPulldown.value||b.t===J.TP.METRIC||b.st===J.STP.NDE;}},onvalueChange:function(b){X.asc=this.value;if(this.hasRendered){Q();}}},{scriptClass:"mstrmojo.Button",alias:"del",cssClass:"mstrmojo-ACLEditor-delete",text:"&nbsp",title:mstrmojo.desc(629,"Delete"),bindings:{visible:function(){var b=U.itemIndex(X);return this.parent.parent.items[b].did;}},onclick:function(){U.remove(U.items[U.itemIndex(X)]);Q();}}]});},onadd:function H(){C();},onremove:function S(){C();}});mstrmojo.ME._HasSortBy=mstrmojo.provide("mstrmojo.ME._HasSortBy",{_mixinName:"mstrmojo.ME._HasSortBy",ios:false,oniosChange:function P(E){this.sortByContainer.set("visible",E.value);},onOpen:function(){if(this._super){this._super();}K=this.id;var U=this.oi.tks,V=!U.met;var E=this.sortByContainer&&this.sortByContainer.sortByWidgetList;if(E){E.set("isNewDef",V);E.set("isDME",this.isDME);E.set("candidates",this.getCandidates4Sortby());E.set("items",this.getSortByDefFromTokens().items||[]);}},getCandidates4Sortby:function T(){var U=this.candidates,E;if(U&&!this.noCache){E=A.filter(U.items,function(V){return V.t===J.TP.ATTR||V.t===J.TP.METRIC||V.st===J.STP.NDE;});if(this.isDME){E=B.getItems("sortby").concat(E);}}return{items:E||[],isComplete:U&&U.isComplete};},getSortByWidget:function D(E){var W=this,V=[{scriptClass:"mstrmojo.ME.SortByInputList",alias:"sortByWidgetList",cssClass:"sortBy mstrmojo-ME-sortby",cssDisplay:"table-cell"}],U={scriptClass:"mstrmojo.Label",alias:"sortByLabel",cssClass:"mstrmojo-ME-SortBy-label",cssDisplay:"table-cell",text:mstrmojo.desc(12852,"Sort By")};if(E){V.unshift(U);}return{scriptClass:"mstrmojo.Box",alias:"sortByContainer",cssClass:"mstrmojo-ME-SortBy-Container",cssDisplay:"table-row",visible:W.ios,postCreate:function(){W.sortByContainer=this;this.editor=W;},getTokens:function(){return this.sortByWidgetList.getTokens();},children:V};},getSortByDefFromTokens:function N(){var a=this.oi.tks.items,W=a.length,b,Y,U,V,X={};for(V=0;V<W;V++){b=a[V];Y=b.tp;U=b.sctt;if(mstrmojo.ME.MetricToken.isDelimiter(b.v)&&(b.v!=="("&&b.v!==")")||b.v==="&gt;"||b.v==="&lt;"){continue;}switch(U){case 131072:if(Y===302){b=a[++V];while(b){if(b.tp!==282){if(b.oi){b.oi.selFrm=b.exv;var Z=a[V+1];if(Z.v==="Desc"&&Z.tp===259){b.oi.asc=1;V++;}X.items=X.items||[];X.items.push(b.oi);}else{if(b.tp===64){X.items=X.items||[];var E=b.v+a[++V].v;b=a[V+1];if(b.tp===43||b.tp===45){E+=a[++V].v;E+=a[++V].v;}X.items.push(B.getDimtyObject(E,this.isDME));}}}if((b=a[++V])["v"]===")"){break;}}}}}return X;},getSortByDefAsTokens:function O(){return this.sortByContainer.getTokens();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Label","mstrmojo.Pulldown","mstrmojo.ObjectInputBox","mstrmojo.ME.MetricDataService","mstrmojo.ME._MetricEditorHelper","mstrmojo.ui.ScrollableSuggestionList");var H=mstrmojo.expr,O=mstrmojo.Enum_OIB_States,J=mstrmojo.ME._MetricEditorHelper,R=mstrmojo.dom;mstrmojo.ME.ObjectInputBox=mstrmojo.declare(mstrmojo.ObjectInputBox,null,{cssClass:"",autoSelect:false,suggestionListClass:"mstrmojo.ui.ScrollableSuggestionList",suggestionPopupCssClss:"mstrmojo-ME-ObjectInputBox-suggest",blockCount:mstrmojo.ME.MetricDataService.blockCount,suggestCount:mstrmojo.ME.MetricDataService.suggestCount,useKeyDelay:true,showDesc:true,showPath:true,showFunctionSyntaxAsPath:true,emptyText:"Search for an object",showEmptyItem:false,noEditButton:true,browseItemVisible:true,click2edit:true,showSuggestionOnEdit:false,tabNavigable:true,obCfg:{},dynamicVerify:true,init:function P(E){this._super(E);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ME-ObjectInputBox");if(this.isDME){this.browseItemVisible=!this.isDME;this.suggestCount=this.isDME?1000:mstrmojo.ME.MetricDataService.suggestCount;this.REQUEST_THRESHOLD=1000;this.dynamicVerify=false;}},item2textCss:function D(W){if(this.isDME){return mstrmojo.ME._MetricEditorHelper.item2textCss(W);}var E=this._super(W)||{1:"f",4:"m",12:"a",13:"fc",43:"tr","-1":"rl","-99":"br"}[W.t]||"";return E?" icn "+E:"";},itemFunction:function B(X,E,W,Y){X[W.itemIdField]=W.nextId();var Z=Y||mstrmojo.ME.ObjectItem,a=new Z({parent:W,itemField:W.itemField,cssClass:W.item2textCss(X),data:X,bindings:{isFull:"this.parent.isFull"},onisFullChange:function(){if(this.hasRendered){this.updateButtonsVisibility();}}});W.attachEventListener4ItemWidget(a,W);return a;},getActiveItem:function M(){var E=this.editingIdx,X,W;if(E>-1){X=this.ctxtBuilder.itemWidgets[E];W=X&&X.data;}return W;},showObjectBrowser:function(E){this.set("suggestTarget",E);this.handleSuggestionItemSelect({t:-99},this.obCfg);},hideItemWidgetBrowseButton:function S(){return false;},hidePulldownButton:function G(){return true;},hideDelButton:function A(){return false;},dtp:0,verifyObject:function C(W,E){if(!this.dynamicVerify){return O.VALID;}var Y=E.data;var X=parseInt(this.dtp,10);switch(X){case -1:case -2:case -4:case -5:case -6:if(Y.t===-1||J.isDimty(W,X===-1)){return O.VALID;}if(this.dynamicVerify){return this._super(W,E);}return Y.did?O.VALID:O.INVALID;case 1:case 2:case 3:case 4:case 5:case 6:case 7:if(Y.t<0){return O.VALID;}if(/^\d{1,}$/.test(mstrmojo.string.trim(W))||Y.did){return O.VALID;}if(this.dynamicVerify){return this._super(W,E);}return O.INVALID;default:return O.VALID;}},getItemsToFilterOut:function N(){return this.items;},updateSuggestion:function Q(E){var X=this.getActiveItem();var W=this.getItemsToFilterOut();E=mstrmojo.array.filter(E,function(a){var Z=a.did,Y=false,c;var b=function(d){mstrmojo.array.forEach(W,function(e){if(e!==X&&e.did===d){Y=true;return false;}});};b(Z);if(!Y){c=a;}return c;});if(this._super){this._super(E);}},nudge:function I(W){W.domNode.style.minWidth=this.suggestTarget.domNode.offsetWidth+(this.isDME&&!(mstrApp&&mstrApp.isWSStyling)?13:0)+"px";var X=R.position(W.domNode),Y=R.position(this.suggestTarget.domNode),E=R.windowDim();if(X.y+X.h>E.h){W.domNode.style.top=(Y.y-X.h-5)+"px";}}});mstrmojo.ME.ObjectItem=mstrmojo.declare(mstrmojo.ObjectItem,[mstrmojo._HasPopup],{markupString:'<div id={@id} class="mstrmojo-ObjectItem" style="{@cssText}"><div class="mstrmojo-ObjectItem-displayNode" tabindex="0" mstrAttach:click,focus><span class="mstrmojo-ObjectItem-text {@cssClass}"></span></div><div class="mstrmojo-ObjectItem-editNode"><input type="text" class="mstrmojo-ObjectItem-input" placeholder="{@placeholderText}" mstrAttach:keyup,keydown,focus/></div><div class="mstrmojo-ObjectItem-icons"><div class="mstrmojo-ObjectItem-down" onclick="mstrmojo.all[\'{@id}\'].showSuggestion(\'\')"></div><img class="mstrmojo-ObjectItem-browse" src="../images/1ptrans.gif" title="'+mstrmojo.desc(1825,"Browse")+'" onclick="mstrmojo.all[\'{@id}\'].browse()"/><div class="mstrmojo-ObjectItem-opts" title="'+mstrmojo.desc(9598,"Level options")+'" onclick="mstrmojo.all[\'{@id}\'].options(arguments[0])" style="display:none;"></div><img class="mstrmojo-ObjectItem-edit" src="../images/1ptrans.gif" title="'+mstrmojo.desc(1088,"Edit")+'" onclick="mstrmojo.all[\'{@id}\'].edit()"/><img class="mstrmojo-ObjectItem-del" src="../images/1ptrans.gif" title="'+mstrmojo.desc(629,"Delete")+'" onclick="mstrmojo.all[\'{@id}\'].del(arguments[0])" style="display:none;"/></div></div>',markupSlots:{displayNode:function(){return this.domNode.firstChild;},editNode:function(){return this.domNode.childNodes[1];},textNode:function(){return this.domNode.firstChild.firstChild;},pulldownButtonNode:function(){return this.domNode.lastChild.childNodes[0];},browseButtonNode:function(){return this.domNode.lastChild.childNodes[1];},optionButtonNode:function(){return this.domNode.lastChild.childNodes[2];},editButtonNode:function(){return this.domNode.lastChild.childNodes[3];},delButtonNode:function(){return this.domNode.lastChild.lastChild;},inputNode:function(){return this.domNode.childNodes[1].firstChild;}},init:function P(E){this._super(E);this.placeholderText=this.parent.emptyText;},initState:function T(){var W=this.parent,X=this.data,E=X.state;if(W.dynamicVerify){return this._super();}if(typeof E==="undefined"){E=W.verifyObject(X[this.itemField],this);X.state=E;}return E;},reduceWidth:function(){},updateButtonsVisibility:function F(){if(this._super){this._super();}if(this.parent.hidePulldownButton()){this.pulldownButtonNode.style.display="none";}if(this.parent.hideItemWidgetBrowseButton()){this.browseButtonNode.style.display="none";}this.optionButtonNode.style.display=this.data.state!==O.ADDING&&this.optionButtonVisible?"":"none";this.delButtonNode.style.display=this.data.state!==O.ADDING&&!this.parent.hideDelButton()&&!this.isFull?"":"none";},browse:function L(){this.set("state",this.data.state===O.ADDING?O.ADDING:O.EDITING);this.parent.showObjectBrowser(this);},click2edit:function K(){if(this.parent.click2edit){this.edit();}},onclick:function V(){this.click2edit();},onfocus:function U(E){if(E.getTarget()===this.inputNode){this._super();}else{this.click2edit();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.array","mstrmojo.Container","mstrmojo.Label","mstrmojo.ui.List","mstrmojo.ui._HasListTooltip","mstrmojo.mstr._ObjectActions","mstrmojo.mstr.search._IconCssClassBuilder");mstrmojo.requiresDescs(60,61,945,1050,3364,3366,9202);var D=mstrmojo.css,C=mstrmojo.array;var J,A=function(K){return mstrmojo.all[J].getBuilder(K,this.dataField);};mstrmojo.mstr.search.SearchGridView=mstrmojo.declare(mstrmojo.DataGrid,[mstrmojo.mstr._ObjectActions],{scritpClass:"mstrmojo.mstr.search.SearchGridView",cssClass:"mstrmojo-Search-GridView",makeObservable:true,banding:false,columns:[{headerText:mstrmojo.desc(945,"Name"),dataField:"n",dataWidgetBuilder:A,colCss:"name"},{headerText:mstrmojo.desc(60,"Owner"),dataField:"owner",dataWidgetBuilder:A,colCss:"owner"},{headerText:mstrmojo.desc(61,"Modified"),dataField:"mdt",dataWidgetBuilder:A,colCss:"mdt"},{headerText:mstrmojo.desc(1050,"Location"),dataField:"anc",dataWidgetBuilder:A,colCss:"anc"}],init:function I(K){this._super(K);J=this.id;},getBuilder:function B(L,N){var K=null;switch(N){case"n":K={scriptClass:"mstrmojo.mstr.search.SearchGridViewItem",items:[L]};break;case"anc":var M=L.anc.items.slice(2);K={scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-Search-Ancester",children:[{scriptClass:"mstrmojo.Label",alias:"toggle",cssClass:"toggle",text:" ",fullPath:false,onclick:function(){this.fullPath=!this.fullPath;D.toggleClass(this.parent.domNode,"full",this.fullPath);},onRender:function(){this.set("bindings",{enabled:function(){return this.parent.path.ellipsized;}});}},{scriptClass:"mstrmojo.ui.List",alias:"path",ellipsized:false,items:C.map(M,function(O){if(O.hid){O.n="[...]";}return O;}),postclick:function(){if(!this.selectedItem.hid){this.parent.dataGrid.execute(this.selectedItem);}},onRender:function(){var P=this,O=P.domNode.firstChild;window.setTimeout(function(){P.set("ellipsized",O.clientWidth<O.scrollWidth);},10);}}]};break;default:K={scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-Search-nonbreakable "+N,cssDisplay:"inline-block",text:L[N]};break;}K.alias="itemWidget";return K;}});mstrmojo.mstr.search.SearchGridViewItem=mstrmojo.declare(mstrmojo.ui.List,[mstrmojo.ui._HasListTooltip,mstrmojo.mstr.search._IconCssClassBuilder],{scritpClass:"mstrmojo.mstr.search.SearchGridViewItem",useRichTooltip:true,getItemMarkup:function G(L,K){return this._super(L,K).replace("{@en@n}",'<i class="{@icnCls}"></i>{@en@n}');},getItemProps:function E(L,K){var M=this._super(L,K);M.addCls("mstrmojo-Search-GridViewItem");M.icnCls="mstrmojo-ListIcon "+this.getIconCssClass(L);M.txtCls="mstrmojo-Search-nonbreakable name";return M;},onclick:function H(K){this._super(K);this.dataGrid.execute(this.selectedItem,{zIndex:mstrmojo.mstr.search.Search.zIndex+2});},showTooltip:function F(N,M){var L=mstrmojo.dom.eventTarget(M,N),K=this.getItemNodeFromTarget(L);if(K.scrollWidth>K.clientWidth){this._super(N,M);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.array","mstrmojo.string","mstrmojo.Container","mstrmojo.WidgetList","mstrmojo.ui._HasListTooltip","mstrmojo.mstr._ObjectActions");mstrmojo.requiresDescs(3364,3366,9202);var B=mstrmojo.desc,E=mstrmojo.css,G=mstrmojo.string.escape4HTMLText;mstrmojo.mstr.search.SearchIconView=mstrmojo.declare(mstrmojo.WidgetList,[mstrmojo.mstr._ObjectActions],{scriptClass:"mstrmojo.mstr.search.SearchIconView",init:function I(L){this._super(L);E.addWidgetCssClass(this,"mstrmojo-SearchIconView");},itemFunction:function C(O,L,M){var N=new mstrmojo.mstr.search.SearchIconItem({parent:M,idx:L,data:O});M.attachListener4ItemWidget(N,M);return N;},attachListener4ItemWidget:function K(O,P){var M=["ItemExecute"],L=M.length,N;for(N=0;N<L;N++){O.attachEventListener(M[N],P.id,"itemEventHandler");}return O;},itemEventHandler:function(L){var N=L.name,M=L.data;switch(N){case"ItemExecute":this.execute(M,{zIndex:mstrmojo.mstr.search.Search.zIndex+2});break;}}});mstrmojo.mstr.search.SearchIconItem=mstrmojo.declare(mstrmojo.Container,[mstrmojo.ui._HasListTooltip],{scritpClass:"mstrmojo.mstr.search.SearchIconItem",markupString:'<div class="mstrmojo-SearchIconItem" mstrAttach:click ><i class="mstrIcon-lg" data-role="icn"></i><div class="ttl" data-role="n"></div><div class="owner" data-role="owner"><label>'+B(3364,"Owner:")+'</label><span></span></div><div class="modified" data-role="mdt"><label>'+B(3366,"Modified:")+'</label><span></span></div><div class="desc" data-role="desc"></div></div>',markupSlots:{iconNode:function(){return this.domNode.firstChild;},titleNode:function(){return this.domNode.childNodes[1];},ownerNode:function(){return this.domNode.childNodes[2].lastChild;},modifiedNode:function(){return this.domNode.childNodes[3].lastChild;},descNode:function(){return this.domNode.lastChild;}},markupMethods:{ondataChange:function(){var L=this.data||{},M=L.desc||"";E.addClass(this.iconNode,this.getIconCls(L));this.titleNode.innerHTML=G(L.n);this.ownerNode.innerHTML=G(L.owner);this.modifiedNode.innerHTML=G(L.mdt);this.descNode.innerHTML=this.allowHTMLOnObjectDesc?M:G(M);}},data:{},useRichTooltip:true,getIconCls:function H(L){L=L||this.data;return L.ccss||("t"+L.t+(L.st?" st"+L.st:"")+(L.isc?" isc":"")+(L.dvm?" dvm"+L.dvm:""));},onclick:function J(L){var N=L.getTarget(),M=(N.dataset&&N.dataset.role)||N.getAttribute("data-role");if(M==="icn"||M==="n"){this.raiseEvent({name:"ItemExecute",data:this.data});}},getRole:function D(L){return L.getAttribute("data-role");},getItemFromTarget:function F(L){var M=this.getRole(L);if(M==="n"||M==="desc"||M==="owner"){return{ttp:this.data[M]};}return{};},getItemNodeFromTarget:function A(L){if(this.getRole(L)){return L;}return null;},showTooltip:function(M){var L=mstrmojo.dom.eventTarget(window,M);if(L.scrollWidth>L.clientWidth||L.scrollHeight>L.clientHeight){this._super(M);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.css","mstrmojo.AjaxCall","mstrmojo.hash","mstrmojo.array","mstrmojo.expr","mstrmojo.Label","mstrmojo.ListBase","mstrmojo.ui.CheckList","mstrmojo.ui.ColumnContainer","mstrmojo.rw.ConditionWalkProviderBase","mstrmojo.elementHelper");var G=mstrmojo.css,W=mstrmojo.hash,r=mstrmojo.array,V=mstrmojo.expr,M=V.ET,Y=V.ET2TGT,X=V.FN,S=V.FN_MRP,m=V.DTP2FN_DTP,E=mstrmojo.meta.TP,z=V.TP,J=V.STP,k=mstrmojo.elementHelper,p=mstrmojo.rw.ConditionWalkProviderBase;var P={};P[M.AQ]={target:1,fm:1,fn:1,c0:1,c1:1};P[M.AL]={target:1,fm:1,fn:1,c0:1};P[M.AE]={target:1,fm:1,es:1};P[M.AC]={target:1,fm:1,fm2:1,fm3:1,fn:1,c0:1,c1:1};P[M.MQ]={target:1,fn:1,c0:1,c1:1,dmy:1};P[M.MC]=P[M.MQ];P["*"]={target:1};var v={};v[M.MQ]={key:"metricFns",def:V.METRIC_FNS};v[M.MC]={key:"metricFns",def:V.METRIC_FNS};v[M.AQ]={key:"formFns",def:V.FORM_FNS};v[M.AL]={key:"formFns",def:V.FORM_FNS};v[M.AC]={key:"formFns",def:V.FORM_FNS};v[M.AE]={key:"elemFns",def:V.ELEM_FNS};var AE=mstrmojo.desc(14084,"Select a filter option or a qualification."),AD=mstrmojo.desc(15007,"Choose to select in list or qualify on an attribute form."),AC=mstrmojo.desc(14085,"Select one or more elements."),N=mstrmojo.desc(15009,"Select element(s)."),AB=mstrmojo.desc(14086,"Select an operator."),AA=mstrmojo.desc(14087,"Enter a value or select an attribute from the list."),C=mstrmojo.desc(15010,"Enter a specific value or select an attribute form as variable."),y=mstrmojo.desc(14088,"Select an attribute form. When done, click ## button.").replace("##",'"√"'),x=mstrmojo.desc(14089,"Select a condition."),AG=mstrmojo.desc(15011,"Select an operator."),w=mstrmojo.desc(14090,"Enter a value or select a metric from the list."),R=mstrmojo.desc(15012,"Enter a specific value or select a metric as variable.");var j=0,q=1;var H=mstrmojo.ui.ColumnContainer.prototype.updateColumnContainer;var d="dummy",I={did:"idErr",v:"idErr",n:mstrmojo.desc(7929,"Error loading data."),t:d,css:"unselectable"},o={did:"idWait",v:"idWait",n:mstrmojo.desc(2901,"Loading..."),t:d,css:"unselectable"},AF={did:"idSelect",v:"idSelect",n:mstrmojo.desc(547,"Select"),t:d,css:"unselectable"},u={did:"idWait",v:"idQualification",n:mstrmojo.desc(5225,"Qualification"),t:d,css:"unselectable"},D={did:"idWait",v:"idQualification",n:mstrmojo.desc(15008,"Qualify on"),t:d,css:"unselectable"};var a=p.onWalkChange,F=p.replaceItem,L=p.getChildJSON,t=p.walkChildPostCreateFn,n=p.updateList,AK=p.fnItem,AJ=p.isComparisonAllowed,g=p.cstJson,e=p.fmJson,c=p.updateListMulti,l=p.updateListMultiData;function h(AL){return AL.targets?r.filter(AL.targets,function(AM){return AM[E]===V.TP.ATTR;}):[];}function K(AL){this.tip.set("text",AL);}var U=[V.STP.PROMPT,V.STP.PROMPT_OBJECTS,V.STP.PROMPT_ELEMENTS,V.STP.PROMPT_EXPRESSION,V.STP.PROMPT_EXPRESSION_DRAFT];var AI=p.allowedTargetTypes;mstrmojo.rw.ConditionWalkProvider=mstrmojo.declare(mstrmojo.rw.ConditionWalkProviderBase,null,{scriptClass:"mstrmojo.rw.ConditionWalkProvider",browseEs:function b(AO,AN,AQ){AO.openPopup("eb",{zIndex:AO.parent.zIndex+10,left:Math.round(AQ.x)+"px",top:Math.round(AQ.y)+"px"});var AM=AO.eb.browser,AL=AO.model,AP=AL&&AL.a&&AL.a.did;if(!AP){return ;}AM.set("attributeID",AP);AM.set("selectedItems",AL.es?W.clone(AL.es):[]);AM.initBrowser();},browseObjs:function AH(AS,AL,AM){AS.openPopup("ob",{zIndex:AS.parent.zIndex+10,left:Math.round(AM.x)+"px",top:Math.round(AM.y)+"px"});var AN=AS.ob.browser;AN.target=AL;var AO;switch(AL.alias){case"dmy":AO=[V.TP.ATTR,V.TP.DIM];break;case"c0":case"c1":var AQ=AS.model,AP=AQ&&AQ.et,AT=AQ&&AQ.fm,AR=AT&&AT.dtp||(AQ.m?V.DTP.DECIMAL:V.DTP.UNKNOWN);AO=(AP===M.MQ||AP===M.MC)?[V.TP.METRIC,V.DTP2PROMPT_STP[AR]]:[V.TP.ATTR,V.DTP2PROMPT_STP[AR]];break;default:AO=AI(AS.ets);AO=AO?W.keyarray(AO,true):[V.TP.ATTR,V.TP.METRIC,V.STP.REPORT_GRID,V.STP.REPORT_GRAPH,V.STP.REPORT_ENGINE,V.STP.REPORT_TEXT,V.STP.REPORT_DATAMART,V.STP.REPORT_BASE,V.STP.REPORT_GRIDGRAPH,V.STP.REPORT_NONINTERACTIVE,V.STP.FILTER].concat(U);}AO[AO.length]=V.TP.FOLDER;AN.browse({rootFolderType:AQ&&(AQ.et===M.MQ||AQ.et===M.MC)?5:26,folderLinksContextId:33,onSelectCB:[AS,"onOBSelect"],browsableTypes:AO.join(",")});},getFm2NodeProps:function T(){return{alias:"fm2",children:[e({alias:"fm2",fmPost:2})],updateColumnContainer:function AL(){var AM=this.parent.parent;if(this.domNode){G.addClass(this.domNode,"lastStage");}this.fm2.update();K.call(AM,y);H.call(this);}};},getC0NodeProps:function Q(){var AL=this;return{alias:"c0",c1Selected:false,children:[{scriptClass:"mstrmojo.Label",cssClass:"baseOn",text:mstrmojo.desc(527,"Value")},g({alias:"c0",cstIndex:0}),{scriptClass:"mstrmojo.Label",alias:"btwn",cssClass:"btwn",text:mstrmojo.desc(308,"and"),visible:false},g({alias:"c1",cstIndex:1,visible:false}),{alias:"browseLink",scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-walkstep-browse",text:mstrmojo.desc(7926,"Browse..."),onclick:function(){this.parent.parent.parent.browse(this.parent.c0);},visible:false}],updateColumnContainer:function AM(){this.c0.update();var AW=this.parent,AS=AW.parent,AR=AW.parent.model,AU=AR&&AR.fn,AO=AU===X.BETWEEN||AU===X.NOT_BETWEEN||AU===S.BETWEEN||AU===S.BETWEEN_DESCENDING,AT=AU===X.EQUAL||AU===X.NOT_EQUAL||AU===X.GREATER||AU===X.GREATER_EQUAL||AU===X.LESS||AU===X.LESS_EQUAL,AV=this.idx,AQ=this.next;this.browseLink.set("visible",AS.objectBrowsingEnabled&&AJ(AR,AS.ets));this.btwn.set("visible",AO);this.c1.set("visible",AO);if(AO){this.c1.update();}else{AR.edit("c1",{v:null,dtp:null,skipET:true},true);}if(AR.a2&&AT){if(!(AQ&&AQ.fm2)){AW.insertAndRemoveTrailing(AV,AL.getFm2NodeProps());}}else{AW.removeTrailingContainer(AV);}var AP=mstrApp.isWSStyling?C:AA,AN=mstrApp.isWSStyling?R:w;K.call(AS,AR.a?AP:AR.m?AN:"");if((!AR.a)&&AR.m&&this.domNode){G.addClass(this.domNode,"lastStage");}H.call(this);}};},getFnNodeProps:function Z(){var AL=this;return{alias:"fn",children:[{scriptClass:"mstrmojo.Label",cssClass:"baseOn",text:mstrApp.isWSStyling?mstrmojo.desc(15006,"Operator"):mstrmojo.desc(9579,"Condition")},e({alias:"fn",allowUnlistedValues:false,update:function(){var AS=this.parent.parent.parent,AO=AS.model||{},AT=AO.et,AR,AU=false,AV,AN;switch(AT){case M.AE:AU=!!AO.a;break;case M.AQ:case M.AC:case M.AL:AU=!!(AO.fm&&AO.fm.did);AR=AU?AO.fm.dtp:null;break;case M.MQ:case M.MC:AU=!!AO.m;AR=AU?V.METRIC_DTP:null;break;}if(AU){var AW=m[AR];if((this.lastEt!==AT)||(this.lastFnDtp!==AW)){this.lastEt=AT;this.lastFnDtp=AW;var AQ=AT?v[AT]:null,AP=AQ&&AQ.key;AV=(AP&&AS[AP])||AQ.def||[];if(typeof (AV)==="object"){AV=AV[AW]||AV["*"];}}AN=AK(AO.fn,AO.fnt||1);}n(this,AU,AV,AN);this.parent.updateScrollbars();}})],updateColumnContainer:function AM(){this.fn.update();var AN=this.parent,AO=AN.parent,AP=AO.model,AR=AP&&AP.fn,AQ=this.next,AT=AR===X.IS_NULL||AR===X.IS_NOT_NULL;if(AR&&AT){AN.removeTrailingContainer(this.idx);}else{if(AR&&!(AQ&&AQ.c0)){AN.insertAndRemoveTrailing(this.idx,AL.getC0NodeProps());}}var AS=mstrApp.isWSStyling?AG:x;K.call(AO,AP.a?AB:AP.m?AS:"");AQ=this.next;if(AQ){AQ.updateColumnContainer();}}};},getEsNodeProps:function B(){var AN=[{scriptClass:"mstrmojo.ui.CheckList",alias:"es",itemIdField:"v",allowUnlistedValues:true,insertUnlistedValuesAt:0,selectionPolicy:"toggle",postCreate:function AM(){t.apply(this,[]);this.ajx=mstrmojo.insert({parent:this,scriptClass:"mstrmojo.AjaxCall",isTask:true,params:{taskId:"browseElements",attributeID:null,styleName:"MojoAttributeStyle",blockBegin:1,blockCount:mstrApp.elementsBlockCount||30},onsuccess:function(){var AY=this.parent,AS=this.response;if((AS&&AS.did)!==AY.lastAttrId){return ;}var AU=(AS&&AS.es)?r.filter(AS.es,function(AZ){return !k.isNullElem(AZ.v);}):[],AX=AY.parent.parent.parent.model&&AY.parent.parent.parent.model.es,AV=function(Af,Aa){var Ae=Af&&Af.length||0,Ad=Aa&&Aa.length||0,AZ=[],Ac,Ab;for(Ac=0;Ac<Ad;Ac++){for(Ab=0;Ab<Ae;Ab++){if(Aa[Ac].n===Af[Ab].n){break;}}if(Ab===Ae){AZ.push(Aa[Ac]);}}return AZ;},AW=function(AZ,Aa,Ad){var Ac=[],Ab;r.forEach(AZ,function(Ae){Ab=r.filterOne(Aa,function(Af){return Ae[Ad]&&Af[Ad]&&Ae[Ad]===Af[Ad];});if(Ab){Ac.push(Ab);}});return Ac.length===AZ.length?Ac:AZ;};AX=AX&&AW(AX,AU,"v");if(AY.allowUnlistedValues){var AT=AV(AU,AX);AU=(AY.insertUnlistedValuesAt===0)?AT.concat(AU):AU.concat(AT);}l(AY,AU,AX,null);AY.parent.updateScrollbars();},onerr:function(){F(this.parent,o,[I]);}});},onselectionChange:function AQ(AS){mstrmojo.ListBase.prototype.onselectionChange.call(this,AS);a.call(this,AS);},update:function AP(){var AV=this.parent.parent.parent,AU=AV.model,AZ=AU&&AU.a,Aa=!!AZ&&!AZ.ilk,Ab,AS,AY,AW,AT,Ac;if(Aa){if(this.lastAttrId!==AZ.did){this.lastAttrId=AZ.did;Ab=AU.es;AW=Ab&&Ab.length;Ab=AW?Ab.concat():[];Ab.push(o);if(AW){AY=[];for(AT=1;AT<=AW;AT++){AY[AT]=AT;}}Ac=this.ajx;AV.updateBrowseElementsParams(Ac.params,AZ);}else{AS=AU.es;}}c(this,Aa,Ab,AS,AY);if(Aa&&Ac){if(AV.getElements){var AX=this;AV.getElements(AZ,{success:function(Ad){l(AX,Ad.es||[],AV.model&&AV.model.es,null);AX.parent.updateScrollbars();},failure:function(){F(AX,o,[I]);}});}else{Ac.send();}}},setupScrollNodes:function AO(){this.scrollNode=null;}}];if(!mstrApp.isSingleTier){AN.splice(0,0,{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-walkstep-browse",text:mstrmojo.desc(7928,"Browse elements..."),onclick:function AL(){this.parent.parent.parent.browse(this.parent.es);}});}return{alias:"es",children:AN,updateList:function(AS){c(this.es,true,AS,this.parent.parent.model.es,null);this.updateScrollbars();},updateColumnContainer:function AR(){var AS=this.parent.parent;if(this.domNode){G.addClass(this.domNode,"lastStage");}this.es.update();K.call(AS,mstrApp.isWSStyling?N:AC);}};},getFmNodeProps:function O(){var AL=this;return{alias:"fm",children:[e({alias:"fm",fmPost:"",filter:false,isFirstFm:true})],updateColumnContainer:function AM(){this.fm.update();var AW=this.parent,AR=AW.parent,AQ=AR.model,AT=AQ&&AQ.fm,AV=this.idx,AU=AQ&&AQ.a,AO=AR.disableElementsBrowsing,AN=AU&&AO&&AO(AU);var AS=(AQ.etWas&&AQ.etWas===M.AE)?q:j,AP=j;if(AQ.et===M.AE&&!AN){AP=q;}if(AS!==AP||AP===j){AW.removeTrailingContainer(AV);if(AP===j&&AT){AW.addNextColumn(AL.getFnNodeProps());}else{if(AP===q){AW.addNextColumn(AL.getEsNodeProps());}}}K.call(AR,mstrApp.isWSStyling?AD:AE);H.call(this);}};},getTargetNodeProps:function f(){var AL=this;return{alias:"target",target:null,browseLink:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"baseOn",text:mstrmojo.desc(11859,"Based On")},L({alias:"target",insertUnlistedValuesAt:0,makeObservable:true,hideIfEmpty:true,postCreate:function(){this._super();this.parent.parent.parent.attachEventListener("updateTargets",this.id,function(){this.update();});},onObjBrowsed:function(AO){if(AO.st===J.FILTER||AO.t===z.REPORT||AO.t===z.PROMPT){this.parent.parent.parent.onOK();}},update:function AN(){var AP=this.parent.parent.parent,AQ=AP.model,AT=AP.targetsLastMod,AU=AQ&&AQ.et;if(this.lastModel!==AQ||this.targetsLastMod!==AT){this.lastModel=AQ;this.targetsLastMod=AT;var AO=AP.targets,AV=AP.ets;if(AV&&AO&&AO.length){var AS=AI(AP.ets);AO=r.filter(AO,function(AW){return AS[AW[E]];});}var AR=AQ&&AQ[Y[AU]];n(this,true,V.getSortedObjectsByTypeGroup(AO),AR);this.parent.updateScrollbars();}}}),{alias:"browseLink",scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-walkstep-browse",text:mstrmojo.desc(7926,"Browse..."),onclick:function(){this.parent.parent.parent.browse(this.parent.target);}}],updateColumnContainer:function AM(){this.target.update();var AP=this.parent,AQ=AP.parent,AR=AQ.model,AT=AR&&AR.et,AO=this.idx,AS=this.next;this.browseLink.set("visible",AQ.objectBrowsingEnabled);if(AT){switch(AT){case M.AQ:case M.AL:case M.AC:case M.AE:if(AR.a&&!(AS&&AS.fm)){this.parent.insertAndRemoveTrailing(AO,AL.getFmNodeProps());}break;case M.MQ:case M.MC:if(AR.m&&!(AS&&AS.fn)){this.parent.insertAndRemoveTrailing(AO,AL.getFnNodeProps());}break;case M.R:case M.F:case M.XML:this.parent.removeTrailingContainer(AO);break;}}AS=this.next;if(AS){AS.updateColumnContainer();}}};}});var A=mstrmojo.rw.ConditionWalkProvider;A.setTip=K;}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.expr","mstrmojo.dom","mstrmojo.form","mstrmojo.boxmodel","mstrmojo.Obj","mstrmojo.Arr","mstrmojo.string","mstrmojo.Box","mstrmojo.TBox","mstrmojo.HBox","mstrmojo.Label","mstrmojo.Button","mstrmojo.HTMLButton","mstrmojo.TextBox","mstrmojo.Popup","mstrmojo.Editor","mstrmojo.Dial","mstrmojo.WidgetList","mstrmojo.FilterExpr","mstrmojo.CGEOptions","mstrmojo.ConditionWalk","mstrmojo.SaveAsEditor","mstrmojo.CGFormatEditor");var V=mstrmojo.expr,E=V.ET,K=V.BRANCH_FNS,R=mstrmojo.hash,Y=mstrmojo.boxmodel,G=mstrmojo.Arr,S=mstrmojo.Obj,L=mstrmojo.string,W=mstrmojo.dom,T=mstrmojo.expr.TP,B=mstrmojo.expr.STP;function F(a){var f={};if(a){var d=a.items;for(var c=0,Z=(d&&d.length)||0;c<Z;c++){var e=d[c],b=e&&e.expr;if(b){V.findTargets(b,"did",f);}}}return R.valarray(f);}function P(b){var a=b.model;b.targets=F(a);b.targetsLastMod=new Date();if(!a){a=new S({});b.model=a;}var d=a.items;if(!d){d=mstrmojo.Arr.makeObservable([]);a.items=d;}else{if(!d.attachEventListener){d=R.make(d,G);}}for(var c=0,Z=d.length;c<Z;c++){var e=d[c];if(!e.attachEventListener){e=R.make(e,S);}}}var M=mstrmojo.desc(4778,"Element"),U=new RegExp(M+"\\s*(\\d+)","i"),C=10000;function N(e){var d=1;for(var b=0,a=(e&&e.length)||0;b<a;b++){var f=e[b].n,Z=f&&f.match(U);if(Z){var c=parseInt(Z[1],10);d=Math.max(c+1,d);}}return M+" "+d;}var H=200;function D(d,c,b){var a=mstrmojo.all.mstrCGE,e=W.delta(c.domNode,a.editorNode);e.y+=(b=="andor"?16:parseInt(c.domNode.offsetHeight,10));var Z={condition:c,zIndex:a.zIndex+10,left:e.x+"px",top:e.y+"px"},f;switch(b){case"andor":f="andOrPopupRef";break;case"condition":f="conditionPopupRef";Z.model=R.clone(d);Z.targets=a.targets;Z.targetsLastMod=a.targetsLastMod;break;}a.openPopup(f,Z);}function X(a){var b=a.parent.data;if(b){var Z=a.items;b.expr=Z&&Z[0];}}function J(c){if(c.constructor!==Array){c=[c];}var g,f={b:0,c:0},h,e,a;for(var d=0,Z=c.length;d<Z;d++){g=c[d];if(!(g&&g.et)){continue;}h=g.nds;if(h){e=J(h);f.b+=e.b;f.c+=e.c;}else{a=(g.et===E.B);f[a?"b":"c"]++;}}return f;}function O(Z){var b=J(Z.value),a=this.tree;a.set("bandingCount",a.bandingCount+b.b);a.set("conditionCount",a.conditionCount+b.c);}function A(Z){var b=J(Z.value),a=this.tree;a.set("bandingCount",a.bandingCount-b.b);a.set("conditionCount",a.conditionCount-b.c);}function I(a){var d=mstrmojo.all.mstrCGE,Z=d.model,e=Z.did,c=Z.cgp,b=d.getXML();return{taskId:"saveCustomGroup",xml:b,objectID:e||"",description:Z.desc||"",name:Z.n||"",saveAs:a,aggregation:c.agg,flatten:c.flat,parentFirst:c.pf,reportFilterInteraction:c.rfi};}mstrmojo.CustomGroupEditor={id:"mstrCGE",title:mstrmojo.desc(7919,"Custom Group Editor"),scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-charcoalboxe",cssText:"width:750px;",zIndex:10,model:null,readOnly:false,help:"custom_group_editor.htm",formatPopupRef:{scriptClass:"mstrmojo.CGFormatEditor",contentNodeCssClass:"mstrmojo-balloon",alias:"formatEditor",title:mstrmojo.desc(2116),left:"100px",top:"100px",useAnimate:false,height:350,slot:"containerNode",help:"formatting_a_custom_group.htm",locksHover:true,model:null,_set_model:function(a,Z){P(mstrmojo.all.mstrCGE);this.model=Z;this.model.selectedIndex=mstrmojo.all.mstrCGEls.selectedIndex;return true;},bindings:{model:function(){return mstrmojo.all.mstrCGE.model;}},onOpen:function(){this.set("model",mstrmojo.all.mstrCGE.model);}},saveasRef:{scriptClass:"mstrmojo.SaveAsEditor",typeDesc:mstrmojo.desc(2105,"Custom Group"),browsableTypes:"8,257",onObjectSaved:function(b){var a=mstrmojo.all.mstrCGE,Z=a&&a.model;if(Z){Z.set("did",b.did);Z.set("n",b.name);Z.set("desc",b.desc);}if(a.noRefresh!==true){a.needRefreshPage=true;}}},optionsRef:{scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-CGEOptions",contentNodeCssClass:"mstrmojo-balloon",left:"100px",top:"230px",slot:"containerNode",help:"Custom_Group_Options_dialog_box.htm",showTitle:true,title:mstrmojo.desc(7969,"Custom Group Options"),onOpen:function(){var Z=mstrmojo.all.mstrCGE,a=this.optionsEditor;a.open(Z.model,{closeCB:[this,"close"]});},children:[{scriptClass:"mstrmojo.CGEOptions",alias:"optionsEditor"}]},postCreate:function(){P(this);},_set_model:function(d,Z){var b=this.model,c=b!==Z,a=mstrmojo.all.mstrCGEls;if(c){this.model=Z;P(this);if(a){a.clearSelect();}}return c;},children:[{scriptClass:"mstrmojo.TBox",alias:"header",cssText:"width: 100%",children:[{scriptClass:"mstrmojo.Label",alias:"name",cssClass:"mstrmojo-charcoalbox subtle mstrmojo-cge-name",emptyText:mstrmojo.desc(7920,"Enter Custom Group name here."),bindings:{text:function(){var Z=mstrmojo.all.mstrCGE.model.n||this.emptyText;return Z;}},onclick:function(){var Z=mstrmojo.all.mstrCGE,a=W.delta(this.domNode,Z.containerNode);Z.openPopup("inlineTextRef",{left:a.x+"px",top:a.y-(W.isIE7?1:0)+"px",txtConfig:{cssClass:"mstrmojo-cge-name-edit",value:Z.model.n||"",onEnter:function(){var b=L.trim(this.value);if(b){Z.model.set("n",b);}this.parent.close({enter:true});},onCancel:function(){this.set("value",Z.model.n);},prevTab:null,nextTab:Z.header.desc}});}},{scriptClass:"mstrmojo.Label",alias:"desc",cssClass:"mstrmojo-charcoalbox subtle mstrmojo-cge-desc",emptyText:mstrmojo.desc(7921,"Enter Custom Group description here."),rows:1,bindings:{text:function(){var Z=mstrmojo.all.mstrCGE.model.desc||this.emptyText;return Z;}},onclick:function(){var Z=mstrmojo.all.mstrCGE,a=W.delta(this.domNode,Z.containerNode);Z.openPopup("inlineTextRef",{left:a.x+"px",top:a.y-(W.isIE7?1:0)+"px",txtConfig:{cssClass:"mstrmojo-cge-desc-edit",value:Z.model.desc||"",onEnter:function(){Z.model.set("desc",L.trim(this.value));this.parent.close({enter:true});},onCancel:function(){this.set("value",Z.model.desc);},prevTab:Z.header.name,nextTab:null}});}}]},{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-CGE-content",alias:"content",children:[{id:"mstrCGEls",scriptClass:"mstrmojo.WidgetList",cssClass:"mstrmojo-CustomGroupEls",bindings:{items:"mstrmojo.all.mstrCGE.model.items"},multiSelect:false,renderOnScroll:false,draggable:true,dropZone:true,allowCopy:false,allowDrop:function(b){var a=b&&b.src,Z=a&&a.widget;return(Z===this);},itemIdField:null,itemDisplayField:"n",onchange:function(d){var a=this.selectedIndex,c=this.ctxtBuilder.itemWidgets,b;for(var e=0,Z=c.length;e<Z;e++){b=c[e];if(b&&e!=a){b.filterExpr.clearTreeSelect();}}},getNextId:function(){return ++C;},itemFunction:function(b,Z,a){return new mstrmojo.CustomGroupEl({cssClass:"mstrmojo-charcoalbox",data:b,parent:a,state:b.isNew?1:0,onRender:b.isNew?function(){this.filterExpr.newCondition();delete this.data.isNew;}:mstrmojo.emptyFn,onclick:function(c){var d=W.eventTarget(c.hWin,c.e);if(d===this.titleNode){var e=mstrmojo.all.mstrCGE,g=W.delta(this.titleNode,e.containerNode),f=this;e.openPopup("inlineTextRef",{left:g.x+(W.isIE?1:0)+"px",top:g.y+(W.isIE7?-1:1)+"px",txtConfig:{cssClass:"mstrmojo-cge-elname-edit",value:this.data.n||"",onEnter:function(){var h=L.trim(this.value);if(h){f.data.n=h;f.paint();}this.parent.close({enter:true});},onCancel:function(){this.set("value",f.data.n);},prevTab:null,nextTab:null}});}},postCreate:function(){this.children=[{scriptClass:"mstrmojo.FilterExpr",slot:"exprNode",alias:"filterExpr",bindings:{items:"var ex = this.parent.data.expr; return ex ? [ex] : []"},draggable:true,dropZone:true,allowCopy:false,makeObservable:true,bandingCount:0,conditionCount:0,getItemConfig:function g(l,h,m){var k=this.constructor.prototype.getItemConfig.call(this,l,h,m);k.getPrefixAndOrToolsMarkup=function j(){return('<img class="mstrmojo-outdent disable" src="../images/1ptrans.gif" title="'+mstrmojo.desc(5896,"Ungroup conditions")+'" /><img class="mstrmojo-outdent" src="../images/1ptrans.gif" title="'+mstrmojo.desc(5896,"Ungroup conditions")+'" onclick="mstrmojo.all[\'{@id}\'].out()" /><img class="mstrmojo-indent disable" src="../images/1ptrans.gif" title="'+mstrmojo.desc(5895,"Group conditions")+'" /><img class="mstrmojo-indent" src="../images/1ptrans.gif" title="'+mstrmojo.desc(5895,"Group conditions")+'" onclick="mstrmojo.all[\'{@id}\'].ind()" />');};return k;},onadd:function(h){X(this);O.apply(this,[h]);},onremove:function(h){X(this);A.apply(this,[h]);},editable:true,onRender:function(){var j=J(this.items),h=this.tree;h.set("bandingCount",j.b);h.set("conditionCount",j.c);},isEditable:function f(j){if(!this.editable){return false;}var h=false;switch(j&&j.et){case E.ANDOR:case E.MQ:case E.AQ:case E.AL:case E.AC:case E.MC:case E.AE:case E.R:case E.F:h=true;break;case E.XML:h=!j.xml;}if(!h){mstrmojo.all.mstrCGE.set("readOnly",true);}return h;},onnodeclick:function e(h){if(!this.editable){return ;}D(this.data,this,h&&h.part);},onnodeadd:O,onnoderemove:A,allowDrop:function c(h){var k=h&&h.src,n=k&&k.data,m=n&&n.et,l=(m===E.B),j=this.tree;return m&&((l&&(j.conditionCount===0))||(!l&&(j.bandingCount===0)));},onNew:function d(h){D(h.data,h.widget.ctxtBuilder.itemWidgets[h.index],"condition");}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-CGE-addCondition",text:mstrmojo.desc(1994,"Add Condition"),slot:"exprToolsNode",onclick:function(){this.parent.filterExpr.newCondition(null,true);},bindings:{enabled:function(){return this.parent.filterExpr.bandingCount===0;}}}];}});}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-CGE-newElement",text:mstrmojo.desc(7922,"New Custom Group Element"),alias:"addBtn",title:mstrmojo.desc(7923,"Add new Custom Group Element"),onclick:function(){var Z=mstrmojo.all.mstrCGEls;var a=Z.add([{n:N(Z.items),did:++C,isNew:true}]);Z.scrollTo(a);}}]},{scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBar",cssText:"width: 100%",slot:"buttonNode",children:[{scriptClass:"mstrmojo.HBox",cssClass:"left",cssText:"border-collapse: separate",cellSpacing:3,children:[{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(4596,"Format..."),onclick:function(){var Z=mstrmojo.all.mstrCGE;Z.openPopup("formatPopupRef",{zIndex:Z.zIndex+10});},bindings:{enabled:function(){return mstrmojo.all.mstrCGE.model.items.length>0;}}},{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(7924,"Options..."),onclick:function(){var Z=mstrmojo.all.mstrCGE;Z.openPopup("optionsRef",{zIndex:Z.zIndex+10});}}]},{scriptClass:"mstrmojo.HBox",cssText:"float:right; border-collapse: separate",cellSpacing:3,children:[{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(5891,"Save"),onclick:function(){var a=mstrmojo.all.mstrCGE,Z=a.model,f=Z.did,d=a.isValid(true),c=mstrmojo.desc(8113,"New Custom Group");if(d){if(!f){a.openPopup("saveasRef",{name:Z.n||c,desc:Z.desc||"",folderLinksContextId:22,rootFolderID:Z.pf,saveParams:I(true),zIndex:a.zIndex+10});return ;}var b=this,e=I(false);this.set("enabled",false);this.set("iconClass","mstrmojo-WaitIcon");mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(){b.set("enabled",true);b.set("iconClass","");},failure:function(g){b.set("enabled",true);b.set("iconClass","");mstrmojo.alert(g.getResponseHeader("X-MSTR-TaskFailureMsg"));}},e);}},bindings:{enabled:function(){return !mstrmojo.all.mstrCGE.readOnly&&mstrmojo.all.mstrCGE.model.items.length>0;}}},{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(628,"Save As"),onclick:function(){var a=mstrmojo.all.mstrCGE,Z=a&&a.model,c=a.isValid(true),b=mstrmojo.desc(8113,"New Custom Group");if(c){a.openPopup("saveasRef",{name:Z.n||b,desc:Z.desc||"",folderLinksContextId:22,rootFolderID:Z.pf,saveParams:I(true),zIndex:a.zIndex+10});}},bindings:{enabled:function(){return !mstrmojo.all.mstrCGE.readOnly&&mstrmojo.all.mstrCGE.model.items.length>0;}}},{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(221,"Cancel"),onclick:function(){mstrmojo.all.mstrCGE.close();}}]}]}],onOpen:function(){if(this.readOnly){mstrmojo.all.mstrCGE.set("title",mstrmojo.desc(8031,"Custom Group Editor (Read Only)"));mstrmojo.alert(mstrmojo.desc(8022));}},onClose:function(){this.readOnly=false;if(this.needRefreshPage){var Z=mstrApp;mstrmojo.form.send({evt:5005,src:Z.name+"."+Z.pageName+".5005"});this.needRefreshPage=false;}},getXML:function Q(){var a=this.model;var g='<exp> <nd et="14" n="OR" fn="20" ce="'+(a.cgp.ce?-1:0)+'" isp="'+(a.cgp.isp?-1:0)+'" ><nds>',b="</nds></nd></exp>",f={a:true,a2:true,a3:true,agg:true,cc:true,ce:true,cgp:true,cs:true,desc:true,did:true,dmt:true,dmy:true,dtp:true,es:true,et:true,expr:true,f:true,flat:true,flt:true,fm:true,fm2:true,fm3:true,fn:true,fnt:true,fres:true,gb:true,isp:true,items:true,m:true,m2:true,m3:true,n:true,nds:true,not:true,pf:true,p:true,r:true,rps:true,st:true,t:true,utgt:true,utp:true,uts:true,v:true,xml:true},Z={getArrItemName:function(o,l,m){return o.substr(0,o.length-1);},isSerializable:function(u,r,q){if(u=="xml"){var m=r[q].xml;return{att:'hasXML = "-1"',child:m};}else{if(mstrmojo.array.indexOf(["header_format","grid_format","child_header_format","child_grid_format"],u)>-1){var v=r[q][u];if(!v){return{};}var o="<"+u+">";for(var t in v){o+="<prs n='"+t+"'>";var n=v[t];for(var l in n){var p=n[l];o+="<pr n='"+l+"' v='"+(p=="pru"?"":p)+"'";o+=p=="pru"?' pru="1"':"";o+="/>";}o+="</prs>";}o+="</"+u+">";return{child:o};}}return(f[u])?true:false;},skipNull:true},e=a.items,k=[];for(var c=0,d=e.length;c<d;c++){var j=e[c],h=j.expr;h.n=j.n;if(h.fnt&&h.fnt==V.FNT.PER&&h.cs&&h.cs[0]){h.cs[0].v+="%";}k[c]=L.json2xml("nd",[{ce:j.ce||false,isp:j.isp||false,header_format:j.header_format,grid_format:j.grid_format,child_header_format:j.child_header_format,child_grid_format:j.child_grid_format},j.expr],Z);}return g+k.join("")+b;},inlineTextRef:{scriptClass:"mstrmojo.Popup",locksHover:true,slot:"containerNode",children:[{scriptClass:"mstrmojo.TextBox",alias:"txt",onTab:function(a){if(this.onEnter){this.onEnter();}var Z=W.shiftKey(a.hWin,a.e)?this.prevTab:this.nextTab;if(Z&&Z.onclick){Z.onclick();}},onblur:function(){if(this.onEnter){this.onEnter();}},onEsc:function(){if(this.onCancel){this.onCancel();}this.parent.close({cancel:true});}}],onOpen:function(){var a=this.txt,b=this.txtConfig;if(b){for(var Z in b){a.set(Z,b[Z]);}}a.focus();},onClose:function(Z){if(!Z||(!Z.cancel&&!Z.enter)){this.txt.onEnter();}}},andOrPopupRef:{scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-CGE-andOrPopup mstrmojo-ConditionWalk",cssText:"width: auto;",contentNodeCssClass:"mstrmojo-balloon",left:"250px",top:"15px",slot:"containerNode",autoClose:true,showTitle:false,draggable:false,openEffect:null,closeEffect:null,onOpen:function(){var Z=this.condition,c=Z&&Z.data&&Z.data.not,d=Z&&Z.parent,a=d&&d.data,b=(a&&a.fn)+(c?21:0);this.list.opening=true;this.list.set("selectedItem",isNaN(b)?null:{did:b});this.list.opening=false;},children:[{scriptClass:"mstrmojo.Dial",cssClass:"mstrmojo-CGE-andOrDial",alias:"list",itemMarkup:'<div class="dial-item {@css}">{@n}</div>',itemIdField:"did",items:[{did:19,n:K[19]},{did:20,n:K[20]},{did:19+21,n:K["19_21"]},{did:20+21,n:K["20_21"]}],onchange:function(){if(this.opening){return ;}var a=this.parent,Z=a.condition,g=this.selectedItem,f=g&&g.did,e=f>21?true:null,c=f-(e?21:0);a.close();var b=Z&&Z.parent;if(b&&b.data&&b.data.et===V.ET.ANDOR){b.edit(Z,c,e);}else{var h=Z&&Z.data;if(h&&(h.not!==e)){h.not=e;Z.paint();}}}}]},conditionPopupRef:{scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-Editor-ConditionWalk",contentNodeCssClass:"mstrmojo-balloon",title:mstrmojo.desc(7953,"Condition Editor"),help:"condition_editor.htm",slot:"containerNode",onOpen:function(){this.walk.set("targets",this.targets);this.walk.set("targetsLastMod",this.targetsLastMod);this.walk.set("model",this.model);var Z=[T.ATTR,T.METRIC,B.REPORT_GRID,B.REPORT_GRAPH,B.REPORT_ENGINE,B.REPORT_TEXT,B.REPORT_DATAMART,B.REPORT_BASE,B.REPORT_GRIDGRAPH,B.REPORT_NONINTERACTIVE,B.FILTER,B.PROMPT,B.PROMPT_ELEMENTS,B.PROMPT_EXPRESSION,B.PROMPT_EXPRESSION_DRAFT];this.walk.set("browsableTypes",Z);},onClose:function(){var Z=this.condition;if(Z.isEmpty()){Z.del();}},children:[{scriptClass:"mstrmojo.ConditionWalk",alias:"walk",cssText:"height:"+H+"px",targets:null,ets:null,onOK:function(){var Z=this.parent,a=Z.condition;R.copy(R.clone(this.model.get()),R.clear(a.data));a.paint();Z.close();}}]},isValid:function(c){var b=mstrmojo.all.mstrCGE.model.items,Z=b.length,a,d="";if(Z>0){for(a=0;a<Z;a++){if(!b[a].expr){d+=b[a].n+",";}}if(d){d=d.replace(/,$/,"");mstrmojo.alert(mstrmojo.desc(7947).replace("#",d));return false;}}else{mstrmojo.alert("Custom Group does not have any element defined. Please fix it before saving.");return false;}return true;}};})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.ui.menus.MenuConfig","mstrmojo.mstr.ui.EnumWebPromptsList","mstrmojo.form","mstrmojo.IVEDatasetPicker","mstrmojo.mstr.MDXCubeBrowser","mstrmojo.NewFolderEditor","mstrmojo.CustomGroupEditor","mstrmojo.mstr._ObjectActions","mstrmojo.mstr.ui.MstrFileUploadHelper");var D=mstrmojo.tstid,H=mstrmojo.dom;var B={BLANK:"05B202B9999F4C1AB960DA6208CADF3D",XDA:"1ADEAA2C4754E2DE5DFEC08022DAFDC6",ICUBE:"DB8D5B064BBE3C24F541DAA81A507FDC"};function C(O,M,P,N){if(window.iframe){window.iframe.showWaitPage(true);}mstrmojo.form.send(O,M,P,N);}function I(M){if(mstrApp.currentFolderId){M.saveFolderId=mstrApp.currentFolderId();}}function E(O,S){function Q(a){function b(d){if(d){C(d.params,null,"post");}}var Y=a.config;if(a.config.did===B.ICUBE){var c="mstr-create-objectExpl",Z=mstrmojo.all[c];if(!Z){Z=new mstrmojo.IVEDatasetPicker({id:c,cssClass:"mstr-create-menu-cubePicker",title:mstrmojo.desc(4354,"Select Intelligent Cube"),help:"Select_Intelligent_Cube_dialog_box.htm",onOk:function(){Y.params={evt:3005,src:U+".3005",srcType:2,srcID:this.item.did,reportDesignMode:1,name:"editReport"};I(Y.params);b(Y);},onCancel:function(){Z.close();},onRender:function(){var f=false,e=this;this.btnImport.set("visible",f);this.newLabel.set("visible",f);this.useExistingLabel.set("visible",f);this.ob.set("scrollableIncFetch",false);this.btnHBox.destroyChildren();var d=mstrmojo.Button.newWebButton(mstrmojo.desc(547,"Select"),function(){if(this.enabled){e.onOk();e.onCancel();}},true);d.bindings={enabled:function(){return this.parent.parent.multiSelect?!!this.parent.parent.selectedItems.length:!!this.parent.parent.item;}};this.btnHBox.addChildren([d,mstrmojo.Button.newWebButton(mstrmojo.desc(221,"Cancel"),function(){e.onCancel();},false)]);}});}if(Y.title){Z.set("title",Y.title);}if(Y.cssClass){Z.set("cssClass",Y.cssClass);}Z.open();}else{if(a.config.did===B.XDA){(new mstrmojo.mstr.MDXCubeBrowser({onClose:function(){this.destroy();},onOK:function(d){var e={evt:3005,src:(mstrApp.servletName||mstrApp.name)+".3005",srcType:1,srcID:d.did,reportDesignMode:1};I(e);C(e);}})).open();}else{if(Y.did){b(Y);}}}if(a.menuOpener.createMenu&&a.menuOpener.createMenu.close){a.menuOpener.createMenu.close();}return true;}function T(b,Y){var a=b.config,Z='<a class="mstrMenuItem subMenuItem '+a.name+' {@cls} {@newGroup}" idx="{@idx}" value="'+a.value+'"title="'+(a.desc||"")+'"><span class=""></span><span class="label">{@n}</span></a>';return Z;}var M=this,P=mstrmojo.hash.clone(S||M.createMenuData.rl)||[{n:mstrmojo.desc(3693,"(None)")}],U=mstrApp.servletName||mstrApp.name;for(var R=0;R<P.length;R++){if(P[R].did===B.BLANK){var N=P[R];P.splice(R,1);P.splice(0,0,N);continue;}if(P[R].did===B.XDA||P[R].did===B.ICUBE){var N=P[R];P.splice(R,1);P.splice(1,0,N);continue;}}for(var R=0;R<P.length;R++){var V=false;var W=P[R].did;if(W===B.ICUBE){if(mstrmojo.resolveFeature("web-define-view-report")){V=true;}}else{V=true;if(!mstrmojo.resolveFeature("template-reports")||(W===B.BLANK&&(!mstrmojo.resolveFeature("design-mode")||!mstrmojo.resolveFeature("modify-report-list")))||(W===B.XDA&&(!mstrmojo.resolveFeature("dhtml")||!mstrmojo.resolveFeature("web-define-view-report")||!mstrmojo.resolveFeature("define-query-report-builder")))){V=false;}}if(!V){continue;}var X;if(P[R].t===8){X=K(P[R],M,O,E);}else{X=O.addCustomMenuItem(P[R].n,"",Q,T);P[R].params={reportID:P[R].did,blank_reportDesignMode:1,reportDesignMode:((mstrmojo.resolveFeature("design-mode")&&(this.reportCreationViewMode!="0"))?4:0),evt:3005,src:U+".3005",reportViewMode:1,promptStyle:"PromptsTransformCreateReport",promptsExecuteStyle:"PromptsTransformClassicSave",promptsCreateStyle:""};I(P[R].params);if(P[R].did===B.BLANK){P[R].params.reportDesignMode=1;}X.config=P[R];X.menuOpener=M;}}}function A(P){function U(X){var Y={DssXmlViewMediaViewStatic:1,DssXmlViewMediaViewInteractive:2,DssXmlViewMediaViewEditable:4};var W=Y.DssXmlViewMediaViewStatic;if(X!==0){if((X&Y.DssXmlViewMediaViewEditable)>0){W=Y.DssXmlViewMediaViewEditable;}else{if((X&Y.DssXmlViewMediaViewInteractive)>0){W=Y.DssXmlViewMediaViewInteractive;}else{if((X&Y.DssXmlViewMediaViewStatic)>0){W=Y.DssXmlViewMediaViewStatic;}}}}return W;}var O=this,R=O.createMenuData.dl,V=O.createMenuData.docList,S=mstrApp.servletName||mstrApp.name;function Q(W){var Y="";if(!W){return Y;}for(var X=0;X<W.length;X++){Y+='<a title="'+W[X].n+" - "+W[X].desc+'" id = vt_'+W[X].did+' class="dashboardStyleTemplate mstrMenuItem subMenuItem" idx="{@idx}" rwviewmode = "'+U(W[X].avm)+'" data-id = "'+W[X].did+'"></a>';}return Y;}function N(W){if(!W){return"";}var Y="";for(var X=0;X<W.length;X++){Y+='<a class="mstrMenuItem subMenuItem {@cls}" title = "'+W[X].desc+'" idx="{@idx}" data-id = '+W[X].did+' rwviewmode = "'+U(W[X].avm)+'" >'+W[X].n+"</a>";}return Y;}function M(){var Y='<div class = "mstr-dashboard-subMenu dashboardTemplates">'+Q(R)+"</div>";var X='<div class = "mstr-dashboard-subMenu docList" >'+N(V)+"</div>";var W="";if(R){W+=Y;}if(V){W+="<hr>"+X;}return W;}function T(X,W){var Y={blank_rwDesignMode:1,rwDesignMode:1,evt:3104,src:S+".3104",createDocument:"*-1.*-1.0.0.0"};Y.rwViewMode=W._evtTarget.getAttribute("rwviewmode");Y.objectID=W._evtTarget.getAttribute("data-id");I(Y);C(Y,null,"post");return true;}P.addCustomMenuItem("DashDoc Templates","",T,M);}function G(T){function S(U){C(U.config.params);return true;}function M(W,U){var V=W.config;return"<a "+D(V.name+"Item")+' class="mstrMenuItem subMenuItem '+V.name+' {@cls} {@newGroup}" idx="{@idx}" value="'+V.value+'"><span class=""></span><span class="label">{@n}</span></a>';}var N=mstrmojo.mstr.ui.EnumWebPromptsList.get();for(var O=0;O<N.length;O++){var R=N[O],Q=mstrmojo.desc(R.descId)||R.n,P=T.addCustomMenuItem(Q,"",S,M);P.config=R;}}function K(O,R,M,N){if(!O.items&&!O.loading){O.loading=true;var Q=new mstrmojo.SimpleXHR({async:false});Q.request("POST",mstrConfig.taskURL,{success:function P(T){var U=T.items||[];if(U.length===0){U.push({n:mstrmojo.desc(3693,"(None)")});}O.items=U;delete O.loading;}},{folderID:O.did,taskId:"folderBrowse",styleName:R.folderBrowsingStyle,includeObjectDesc:true});}return M.addPopupMenuItem(O.n,"",function S(){var T=new mstrmojo.ui.menus.MenuConfig({menuCssClass:"mstr-create-menu",hostProxyCssClass:"mstrmojo-create-menu-host",isHostedWithin:false,includeScroll:false,alignWithAnchor:true});N.call(R,T,O.items);return T;});}function J(N){var O=this,M=N;return function(){var R=document.querySelector("[tstid="+N+"Item]"),Q=H.position(R),P=mstrmojo.insert({scriptClass:"mstrmojo.ui.menus.MenuConfig",menuCssClass:"mstr-create-menu",hostProxyCssClass:"mstrmojo-create-menu-host",noInheritTheme:true,tstid:N+"Sbm",supportsScroll:true,isHostedWithin:false,includeScroll:false,alignWithAnchor:true,maxHeight:Math.max(H.windowDim().h-Q.y-30,100)});switch(M){case"template":E.call(O,P);break;case"templateDoc":P.menuCssClass=P.menuCssClass+" mstr-dashboard-subMenu collapse";A.call(O,P);break;case"prompt":G.call(O,P);break;}return P;};}function F(Y){var N=this,S=N.createMenuData.sl;var Z=mstrmojo.all["mscld-create-menuList"],U=mstrApp.servletName||mstrApp.name;if(!Z){var V=mstrmojo.insert({scriptClass:"mstrmojo.ui.menus.MenuConfig",menuCssClass:N.cssClassName+" collapse",hostProxyCssClass:N.hostCssClassName,anchorElement:Y.domNode,hostId:Y.id,isHostedWithin:false,includeScroll:false,tstid:"createMenu"});if(N.alignMenuToRight){V.setAlignment(mstrmojo.ui.PopupConfig.ENUM_CORNERS.BOTTOM_RIGHT,mstrmojo.ui.PopupConfig.ENUM_CORNERS.TOP_RIGHT);}function T(f,c){var e=f.config;var d="<a "+D(e.name+"Item")+' class="mstrMenuItem '+e.name+' {@cls} {@newGroup}" idx="{@idx}" onclick=" mstrmojo.all[\''+N.id+"'].onclick('"+f.name+'\',event)" href="'+e.href+'" useIframe="'+e.iframe+'"';if(e.accept!==undefined){d+=' accept = "'+e.accept+'"';}d+=' name="'+e.name+'"><span class="micn"></span><span>{@n}</span></a>';return d;}function X(f,c){var e=f.config;var d="<label "+D(e.name+"Item")+' for ="myFile" class="mstrMenuItem '+e.name+' {@cls} {@newGroup}" idx="{@idx}" onclick=" mstrmojo.all[\''+N.id+"'].onclick('"+f.name+'\',event)" href="'+e.href+'" target="'+e.target+'" useIframe='+e.iframe+'"';if(e.accept!==undefined){d+=' accept = "'+e.accept+'"';}d+='name="'+e.name+'"><span class="micn"></span><span>{@n}</span></label>';return d;}function Q(d){if(d.config.name==="folder"){var c=mstrmojo.insert({scriptClass:"mstrmojo.NewFolderEditor",fId:mstrApp.currentFolderId?mstrApp.currentFolderId():"",Index:Z.domNode.style.zIndex+10,navigateAfter:true,okFn:function(){var e=this,f={evt:2001,src:U+"."+mstrApp.pageName+".fbb.fb.2001",folderID:e.fId};C(f,mstrApp.name,"POST");},onClose:function(){this.destroy();}});c.open();}if(Z&&Z.close){window.setTimeout(function(){Z.close();},10);}return true;}var M=false;for(var R=0;R<S.sl.length;R++){var P=S.sl[R];if(P.grp){V.addSeparator();}var b={},O=M===false?"":"collapsable ";if(P.name==="prompt"||P.name==="template"||P.name==="templateDoc"){b=V.addPopupMenuItem(P.n,V.id,J.call(N,P.name));b.cls=b.cls+O+P.name;b.tstid=P.name+"Item";}else{if(P.name==="myFile"){b=V.addCustomMenuItem(P.n,O,Q,X);var a='<form id="import_form" class="mstrmojo-FileUploadBox" target="hidden_import_iframe" enctype="multipart/form-data" method="post" action="'+mstrConfig.taskURL+'"><input id="myFile" name="myFile" type="file" class="mstrmojo-FileUploadBox-file mstr-create-menu-fileUpload" size="30" onchange="mstrApp.uploadMstrFileFn.upload(\'import_form\');" accept=".mstr" title=""><input type="hidden" name="fileFieldName" value="myFile"><input type="hidden" name="taskId" value="importAsyncSaveRWD"><input type="hidden" name="taskEnv" value="jsonp2"><input type="hidden" name="jsonp" value="parent.mstrApp.uploadMstrFileFn.callback(@R@)"><input type="hidden" name="myfile" value=""><input type="hidden" name="folderID" value="" id="import_folderID"></form>';a+='<iframe name="hidden_import_iframe" style="display:none;" src="about:blank"></iframe>';if(!document.getElementById("import_form")){var W=document.createElement("SPAN");W.innerHTML=a;document.body.appendChild(W);}}else{b=V.addCustomMenuItem(P.n,O,Q,T);b.tstid=P.name;}b.config=P;if(P.name==="folder"){b.config.params={evt:17001,src:U+"."+mstrApp.pageName+".OMDCreateFolder.17001",targetName:"fb",iframe:true,target:"frameManager"};}}b.name=P.name;}Z=V.newInstance({id:"mscld-create-menuList"});}Z.set("includeScroll",false);Z.open(Y);N.createMenu=Z;Z.onClose=function(){Y.toggleButtonClass(false);};}function L(O){var S=this,Q=S.createMenuData;function M(U){mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function T(V){U.createMenuData.dl=V.items;U.createMenuData.loadData.dlLoaded=true;P();}},{folderID:"FCA4BAFE4AF0D00088028989D7497A4F",taskId:"folderBrowse",styleName:U.folderBrowsingStyle,includeObjectDesc:true,objectType:"55"});mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function T(V){U.createMenuData.docList=V.items;U.createMenuData.loadData.dlLoaded=true;P();}},{folderID:"6C87013036D94E65B9FD227CF919327E",taskId:"searchMetadata",styleName:U.folderBrowsingStyle,recursive:1,includeAncestorInfo:false,includeObjectDesc:true,objectType:"14081"});}function R(U){mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function T(V){U.createMenuData.rl=V.items;U.createMenuData.loadData.rlLoaded=true;P();}},{taskId:"folderBrowse",systemFolder:"16",styleName:U.folderBrowsingStyle,includeObjectDesc:true,objectType:"55"});}function P(){if(S.createMenuData.sl&&N(S.createMenuData.loadData)){F.call(S,O);}}if(!Q){S.createMenuData={};mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(V){var U;S.createMenuData.sl=V;S.createMenuData.loadData={};for(U=0;U<V.sl.length;U++){var T=V.sl[U]["feature-id"];switch(T){case"create-view-reports":S.createMenuData.loadData.rlLoaded=false;R(S);break;case"template-documents;dhtml;documents-design-mode":S.createMenuData.loadData.dlLoaded=false;M(S);break;}}P();}},{taskId:"getShortcutsList",pageName:"createOptions"});}else{P();}function N(V){if(!V){return true;}var U=true;for(var T in V){U=U&&V[T];}return U;}}mstrmojo.mstr.ui.CreateMenu=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.mstr._ObjectActions],{scriptClass:"mstrmojo.mstr.ui.CreateMenu",hostCssClassName:"mstrmojo-create-menu-host",cssClassName:"mstr-create-menu",opener:null,folderBrowsingStyle:"MobileFolderStyle",onclick:function(M,N){if(M!=="myFile"){mstrmojo.dom.preventDefault(window,N);}switch(M){case"customGroup":this.openCustomGroupEditor({});break;case"metric":this.openMetricEditor({});break;case"queryBuilder":this.openDataImport({});break;case"filter":this.createFilter();break;case"scNewIVE":this.createDashboard();break;case"appSchema":location.href="?evt=3199&src="+mstrApp.name+".3199";break;}},loadCreateMenu:function(){if(!this.opener){return ;}L.call(this,this.opener);}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.expr","mstrmojo.hash","mstrmojo.Container","mstrmojo._HasLayout","mstrmojo._HasPopup","mstrmojo.ui.ColumnWalk","mstrmojo.Button","mstrmojo.mstr.EnumNodeDimty","mstrmojo.ConditionModel","mstrmojo.rw.ConditionWalkProvider");var S=mstrmojo.Widget,J=mstrmojo.array,F=mstrmojo.dom,O=mstrmojo.hash,A=mstrmojo.mstr.EnumNodeDimty,K=mstrmojo.rw.ConditionWalkProvider.setTip,Q=mstrmojo.expr,I=Q.ET;var C=mstrmojo.desc(11899,"Select a dataset object.");var M=J.hash([A.NodeDimtyOutputLevel]);function E(){var W=this.model;if(W){if(!W.attachEventListener){O.make(W,mstrmojo.ConditionModel,{});}W.attachEventListener("edit",this.id,"onmodeledit");}}function N(X,W){if(W&&W.detachEventListener){W.detachEventListener("edit",X.id,"onmodeledit");}}function P(b,W){var Z=W,a=[],Y=[],X=[],c=false;O.forEach(Z,function(d){a=a.concat(d.att.filter(function(e){return e.did===b;}));});c=a[0]&&a[0].da;a.forEach(function(d){Y=Y.concat(d.fs||[]);});Y.forEach(function(d){if((d.obf||c)&&X.filter(function(e){return e.did===d.fid;}).length===0){X.push({did:d.fid,dtp:mstrmojo.expr.mapBaseFormTypeToDataType(d.bftp),n:d.fnm,t:d.t,isbf:d.isbf});}});return X;}function D(b,W){var X,Z=W,a,Y=false;if(typeof microstrategy!=="undefined"){Z=Z||microstrategy.bones.rwb_viewer.datasetInfos;}O.forEach(Z,function(c){X=c.mx;O.forEach(X,function(d){if(d.did===b){a=c;Y=d.um||d.rdm;return false;}});return !a;});return Y&&a&&a.isMDX;}mstrmojo.rw.ConditionWalk=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo._HasPopup],{scriptClass:"mstrmojo.rw.ConditionWalk",markupString:'<div class="mstrmojo-rw-ConditionWalk" mstrAttach:click><div class="condition mstrmojo-ConditionNode"><div class="mstrmojo-cond-contents"></div></div><div class="walk"></div><div class="apply"></div></div>',markupSlots:{conditionNode:function(){return this.domNode.firstChild;},walkNode:function(){return this.domNode.children[1];},applyNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function L(){S.visibleMarkupMethod.call(this);if(this.visible){this.initWalk();}},onheightChange:S.heightMarkupMethod,onwidthChange:S.widthMarkupMethod},layoutConfig:{h:{conditionNode:"auto",walkNode:"100%",applyNode:"auto"},xt:true},editor:undefined,columnWalk:undefined,tip:undefined,walkProvider:null,objectBrowsingEnabled:true,postCreate:function B(){if(this._super){this._super();}if(!this.walkProvider){this.walkProvider=mstrmojo.insert(mstrmojo.rw.ConditionWalkProvider);}},initWalk:function R(){var W=this.columnWalk,X=this.walkProvider;K.call(this,C);W.removeTrailingContainer(-1);W.addNextColumn(X.getTargetNodeProps());W.target.updateColumnContainer();this.updateOkBtn();},updateBrowseElementsParams:function(Z,Y){Z.attributeID=Y.did;Z.otp=Y.t||12;var X=this.editor,W=X&&X.onUpdateBrowseElementsParams;if(W){W.call(X,Z,Y);}},children:[{scriptClass:"mstrmojo.ui.ColumnWalk",alias:"columnWalk",slot:"walkNode",height:"333px",width:"750px"},{alias:"cancelBtn",slot:"applyNode",scriptClass:"mstrmojo.Button",cssClass:"cancelBtn",title:mstrmojo.desc(2399,"Cancel"),ignoreLayout:true,onclick:function(){var W=this.parent;if(W.close){W.close();}}},{alias:"okBtn",slot:"applyNode",scriptClass:"mstrmojo.Button",cssClass:"okBtn",title:mstrmojo.desc(2397,"OK"),onclick:function(){var W=this.parent;if(W.onOK){W.onOK();}}},{scriptClass:"mstrmojo.Label",alias:"tip",slot:"applyNode",cssClass:"tip",text:C,ignoreLayout:true}],eb:{scriptClass:"mstrmojo.Editor",cssClass:F.isIE7?"mstrmojo-ElementsEditorIE7":"mstrmojo-ElementsEditor",title:mstrmojo.desc(6149,"Select Elements"),help:"element_browser_dialog_box.htm",children:[{scriptClass:"mstrmojo.ElementsBrowser",alias:"browser",onUpdateBrowseElementsParams:function(X){var W=this.parent.opener;W.updateBrowseElementsParams(X,W.model.a);}},{scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBox",slot:"buttonNode",children:[{scriptClass:"mstrmojo.Button",alias:"ok",text:mstrmojo.desc(1442,"OK"),cssClass:"mstrmojo-WebButton hot",cssText:"width: 66px;",onclick:function(){var W=this.parent.parent,X=W&&W.opener;if(X){X.onEBSelect();X.closePopup();}}},{scriptClass:"mstrmojo.Button",alias:"ok",text:mstrmojo.desc(221,"Cancel"),cssClass:"mstrmojo-WebButton",cssText:"min-width: 66px; margin-left: 11px;",onclick:function(){var W=this.parent.parent,X=W&&W.opener;if(X){X.closePopup();}}}]}]},ob:{scriptClass:"mstrmojo.Editor",title:mstrmojo.desc(5298,"Select an Object"),help:"Select_Objects_dialog_box_.htm",children:[{scriptClass:"mstrmojo.ObjectBrowser",alias:"browser",fishEyeVisible:false,upButtonVisible:true,scrollableIncFetch:true,showCompletePath:false,closeable:false,closeOnSelect:false,browsableTypes:"3,4,8,10,12,256",includeObjectDesc:true,quickSearch:true,minSearchLength:1}]},_set_model:function U(Z,W){var X=this.model,Y=(W!==X);if(Y){N.call(this,X);W.dimtyTypes=this.dimtyTypes||M;this.model=W;E.call(this,W);if(this.hasRendered&&this.visible){this.columnWalk.target.updateColumnContainer();}}return Y;},onmodeledit:function H(X){var W=X.prop,Z=W==="c0"||W==="c1",Y=this.columnWalk[Z?"c0":W];if(Z){Y.c1Selected=W==="c1";}Y.updateColumnContainer();Y.c1Selected=false;this.updateOkBtn();},browse:function G(Y){var a=this.parent.editorNode,Z=function(c,e){var b=mstrmojo.dom.position(c,true),d=mstrmojo.dom.position(e,true);return{x:b.x+b.w,y:d.y};},W=this.columnWalk,X=this.walkProvider;switch(Y&&Y.alias){case"target":case"dmy":X.browseObjs(this,Y,Z(Y.alias==="target"?W.target.domNode:this.dmyNode,a));break;case"c0":case"c1":X.browseObjs(this,Y,Z(W.c0.domNode,a));break;case"es":X.browseEs(this,Y,Z(W.es.domNode,a));break;}},onOBSelect:function(a){var Y=this.ob.browser,c=Y.target;this.closePopup();var X=this.targets,b=c.itemIdField,Z=X||[],W=J.find(X,b,a[b]);if(W===-1){Z.push(a);this.targets=Z;this.targetsLastMod=new Date();this.raiseEvent({name:"updateTargets",targets:this.targets});}c.setSelectedItems([a],c.multiSelect);if(c.onObjBrowsed){c.onObjBrowsed(a);}},onEBSelect:function(){var X=this.eb.browser,Z=this.columnWalk.es.es;Z.set("selectedIndices",{});var W=Z.items,Y=[];J.forEach(X.selectedItems||[],function(b){if(J.find(Z.items,"v",b.v)<0){Y.push(b);}});var a=Z.insertUnlistedValuesAt||0;if(a<0){a=W.length;}Z.set("items",W.slice(0,a).concat(Y).concat(W.slice(a)));Z.setSelectedItems(X.selectedItems,false);},destroy:function T(X){var W=this.walkProvider;if(W&&W.destroy){this.walkProvider.destroy();}this._super(X);},updateOkBtn:function V(){var Z=true,W=this.model,X,Y=W&&Q.fnCstCount(W.fn,W.fnt);if(!W){return ;}switch(W.et){case I.AQ:case I.AL:case I.MQ:for(X=0;X<Y;X++){Z=Z&&!this["invalid"+X];}break;}Z=Z&&!!W.completed;this.okBtn.set("visible",Z);this.raiseEvent({name:"conditionWalkUpdateOkBtn",valid:Z});}});mstrmojo.rw.ConditionWalk.getAttForms=P;mstrmojo.rw.ConditionWalk.isMdxDM=D;}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.css","mstrmojo.array","mstrmojo.Model","mstrmojo.IncFetch","mstrmojo.Label","mstrmojo.ui.ButtonBar","mstrmojo.ui.List","mstrmojo.mstr.search.SearchIconView","mstrmojo.mstr.search.SearchGridView","mstrmojo.mstr._ObjectActions");mstrmojo.requiresDescs(3364,3366,9202,14557);var D=mstrmojo.desc,H=mstrmojo.css,C=mstrmojo.hash;mstrmojo.mstr.search.SearchResults=mstrmojo.declare(mstrmojo.Container,[],{scriptClass:"mstrmojo.mstr.search.SearchResults",markupString:'<div id="{@id}" class="mstrmojo-SearchResults {@cssClass}"><div class="mstrmojo-SearchResults-list"></div><div class="mstrmojo-SearchResults-toolbar"></div><div class="mstrmojo-SearchResults-if"></idv></div>',markupSlots:{listNode:function(){return this.domNode.firstChild;},toolbarNode:function(){return this.domNode.childNodes[1];},incFetchNode:function(){return this.domNode.lastChild;}},markupMethods:{onresultsChange:function(){if(this.hasRendered){this.listNode.style.height=this.results&&this.results.items&&this.results.items.length>0?"":0;}}},height:"430px",supportIncFetch:true,results:{},iconView:false,init:function I(L){if(this._super){this._super(L);}this.addChildren([this.getViewRef(),{scriptClass:"mstrmojo.Label",alias:"notFoundMsg",cssText:"text-align: center",allowHTML:true,visible:false,ontextChange:function(){this.set("visible",!mstrmojo.string.isEmpty(this.text));},slot:"listNode"},{scriptClass:"mstrmojo.ui.ButtonBar",items:[{n:"Icon View",v:1,css:"iconView"},{n:"Grid View",v:2,css:"gridView"}],showIcon:true,cssClass:"viewModesButtonBar",selectedIndex:1,postselectionChange:function(O){var P=this.items,Q=P[O.added[0]],R=P[O.removed&&O.removed[0]];if(Q.v!==R.v){this.parent.set("iconView",Q.v===1);}},bindings:{visible:function(){return !this.parent.notFoundMsg.visible&&this.parent.list.visible;}},slot:"toolbarNode"}]);if(this.supportIncFetch){var M=this;this.addChildren([{scriptClass:"mstrmojo.IncFetch",alias:"incFetch",slot:"incFetchNode",np:0,cp:0,ds:{f:mstrmojo.desc(4046,"First"),p:mstrmojo.desc(1058,"Previous"),n:mstrmojo.desc(1059,"Next"),l:mstrmojo.desc(4049,"Last"),pgs:mstrmojo.desc(5972,"## of ### pages"),gt:mstrmojo.desc(5878,"Go to:"),v:mstrmojo.desc(6079,"This field should be # between ## and ###.")},onifsChange:function N(O){mstrmojo.hash.copy(O.value,this);if(this.np>1){this.children=null;this.refresh();}H.toggleClass(this.domNode,"show",this.np>1);},onfetch:function K(O){M.onfetch(O);}}]);}},getViewRef:function F(){var K=this.iconView?"mstrmojo.mstr.search.SearchIconView":"mstrmojo.mstr.search.SearchGridView";return{scriptClass:K,alias:"list",slot:"listNode",bindings:{visible:function(){return this.items&&this.items.length>0;}}};},oniconViewChange:function A(){this.removeChildren(this.list);this.addChildren([this.getViewRef()]);this.renderChildren();this.onresultsChange();},onresultsChange:function J(){this.list.set("items",this.results&&this.results.items);this.updateNotFoundMsg();this.updateIncFetch();},updateNotFoundMsg:function G(){var K=this.parent,L=K?K.getNotFoundMsg():"";this.notFoundMsg.set("text",K.hasUserInput()&&C.isEmpty(this.results&&this.results.items)?L:"");},updateIncFetch:function B(){var K=this.results;if(this.supportIncFetch){var L=this.getTotalSize(),N=K.bb,M=K.bc;this.incFetch.set("ifs",{np:Math.floor(L/M)+((L%M>0)?1:0),cp:Math.floor(N/M)+((N%M>0)?1:0)});}},getTotalSize:function E(){return Math.min(this.maxSearchResults,this.results.sz);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ME.ObjectInputBox");var B=mstrmojo.expr;mstrmojo.ME.ConditionInputBox=mstrmojo.declare(mstrmojo.ME.ObjectInputBox,null,{cssClass:"mstrmojo-ME-ObjectInputBox-condition",folderLinksContextId:10,browsableTypes:[B.TP.FOLDER,B.TP.FILTER,B.STP.PROMPT_OBJECTS].join(","),noEditButton:true,maxObjectCount:1,getCandidatesThroughTaskCall:function A(D,C){D.rootFolderType=39;D.blockCount=this.blockCount;mstrmojo.ME.MetricDataService.getFilters(D,C);},hideItemWidgetBrowseButton:function(){return this.isDME;}});})();(function(){mstrmojo.requiresCls("mstrmojo.Label","mstrmojo.Pulldown","mstrmojo.ME.ObjectInputBox","mstrmojo.ME.MetricDataService","mstrmojo.ME.Enum");mstrmojo.requiresDescs(1107,12178);var J=mstrmojo.expr,D=mstrmojo.ME.Enum.DYNAMIC_DIMTY;mstrmojo.ME.LevelInputBox=mstrmojo.declare(mstrmojo.ME.ObjectInputBox,null,{cssClass:"mstrmojo-ME-ObjectInputBox-level",oncandidatesChange:function F(E){this.candidates.items=D.getItems("level").concat(this.candidates.items);},hidePulldownButton:function(){return !this.isDME;},hideItemWidgetBrowseButton:function(){return this.isDME;},folderLinksContextId:16,browsableTypes:[J.TP.FOLDER,J.TP.ATTR,J.TP.DIM].join(","),getCandidatesThroughTaskCall:function K(L,E){L.rootFolderType=39;L.blockCount=this.blockCount;mstrmojo.ME.MetricDataService.getAttributes(L,E);},itemFunction:function B(M,E,L){M.filtering=M.filtering||1;M.grouping=M.grouping||1;var N=this._super(M,E,L,mstrmojo.ME.LevelObjectItem);N.optionButtonVisible=true;return N;},updateSuggestion:function C(E){E=[{n:this.isDME?mstrmojo.desc(12178,"Visualization level"):mstrmojo.desc(1107,"Report Level"),did:-1,t:-1,state:0}].concat(E);if(this._super){this._super(E);}},add:function H(L,E){var N=true,M=this.items;mstrmojo.array.forEach(L,function(O){mstrmojo.array.forEach(M,function(P){if(P.did&&P.did===O.did){N=false;return false;}});});if(N){this._super(L,E);}}});mstrmojo.ME.LevelObjectItem=mstrmojo.declare(mstrmojo.ME.ObjectItem,[mstrmojo._HasPopup],{optsRef:{scriptClass:"mstrmojo.Editor",title:mstrmojo.desc(9598,"Level Options"),cssText:"width: 450px;",onOpen:function A(){var E=this.opener.data;this.filterOption.set("value",E.filtering);this.groupOption.set("value",E.grouping);},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(9599,"Relationship with Report Filter:")},{scriptClass:"mstrmojo.Pulldown",alias:"filterOption",itemField:"n",itemIdField:"did",items:[{n:mstrmojo.desc(9600,"Standard - Metric calculates only for elements found in the filter"),did:1},{n:mstrmojo.desc(9601,"Absolute - Raises the calculation to the selected level, if possible"),did:2},{n:mstrmojo.desc(9602,"Ignore - Omit filtering criteria based on selected level and its related attributes"),did:3},{n:mstrmojo.desc(9603,"None - Unspecified - the selected level and group components define the filter"),did:4}]},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(9604,"Metric Aggregations:")},{scriptClass:"mstrmojo.Pulldown",alias:"groupOption",itemField:"n",itemIdField:"did",items:[{n:mstrmojo.desc(9605,"Standard - Metric calculates at the selected level, if possible"),did:1},{n:mstrmojo.desc(9606,"None - Exclude the selected level and children from the GROUP BY clause in the SQL"),did:2},{n:mstrmojo.desc(9607,"Beginning lookup - Use the first value of the lookup table"),did:3},{n:mstrmojo.desc(9608,"Ending lookup - Use the last value of the lookup table"),did:4},{n:mstrmojo.desc(9609,"Beginning fact - Use the first value of the fact table"),did:5},{n:mstrmojo.desc(9610,"Ending fact - Use the last value of the fact table"),did:6}]},{scriptClass:"mstrmojo.HBox",slot:"buttonNode",cssText:"float:right;margin: 5px 0px;",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Editor-button mstrmojo-WebButton hot",text:mstrmojo.desc(1442,"OK"),onclick:function(){var E=this.parent.parent,L=E.opener;if(L.saveOnClose){L.saveOnClose(E.filterOption.value,E.groupOption.value);}E.close();}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Editor-button mstrmojo-WebButton",text:mstrmojo.desc(221,"Cancel"),onclick:function(){var E=this.parent.parent;E.close();}}]}]},saveOnClose:function G(E,M){var L=this.data;L.filtering=E;L.grouping=M;if(this.parent.onSaveOnClose){this.parent.onSaveOnClose();}},options:function I(){this.openPopup("optsRef",{title:'"'+this.data[this.itemField]+'" '+mstrmojo.desc(9598,"Level Options"),zIndex:40});}});}());(function(){mstrmojo.requiresCls("mstrmojo.ME.ObjectInputBox");var B=mstrmojo.expr;mstrmojo.ME.TransformInputBox=mstrmojo.declare(mstrmojo.ME.ObjectInputBox,null,{cssClass:"mstrmojo-ME-ObjectInputBox-transform",items:[],noEditButton:true,folderLinksContextId:26,browsableTypes:[B.TP.FOLDER,B.TP.ROLE].join(","),getCandidatesThroughTaskCall:function A(E,D){mstrmojo.ME.MetricDataService.getTransformations(E,D);},hideItemWidgetBrowseButton:function C(){return this.isDME;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList","mstrmojo.vi.ui.DatasetUnitMenuUtils");var B=mstrmojo.vi.ui.DatasetUnitMenuUtils;mstrmojo.vi.ui.UnitList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.vi.ui.UnitList",init:function C(D){this._super(D);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-VIUnitList");},getItemProps:function A(F,D){var E=this._super(F,D);E.addCls("unit "+B.getUnitCssClass(F));return E;}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.viz.DropZoneHelper","mstrmojo.string","mstrmojo.vi.ui.DatasetUnitMenuUtils");var G="mstrmojo-VIUnitList",I="icn clsx_sub",D=mstrmojo.vi.viz.DropZoneHelper.isMetricNames,C=mstrmojo.vi.ui.DatasetUnitMenuUtils,J=mstrmojo.string;mstrmojo.vi.ui.VIDragUnit=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.vi.ui.VIDragUnit",getItemDisplayName:function F(K){return K.n;},getUnitAvatar:function A(N,Q){var M=document.createElement("div"),P=N.getCtxtDragData(),K=P.items,L=['<div class="',[G,mstrApp.getThemeClassName()].join(" "),'">'],O=this;K.forEach(function(S){var T=O.getItemDisplayName(S),R="item unit isAvatar "+C.getUnitCssClass(S);if(D(S)){T=mstrmojo.desc(3582,"Metrics");R+=" is-mh";}L.push('<div class="'+R+'"><span class="txt" unselectable="on">'+(Q?J.encodeHtmlString(T):T)+"</span></div>");});L.push("</div>");M.innerHTML=L.join("");return M.removeChild(M.firstChild);},getUnitDragData:function B(M,K){var L=this.setAvatarClass.bind(this);return{items:K,item:K[0],setAvatarClass:function N(P){L(M,P);},setInvalidAvatarClass:function O(){L(M,I);}};},getDragUnitOffsets:function E(){return{x:21,y:16};},setAvatarClass:function H(N,K){var L=N.avatar;if(L){var M=[G,"hasOwnAvatar",mstrApp.getThemeClassName(),K||""];L.className=M.join(" ");}}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.models.EnumDragSources","mstrmojo.vi.ui.DatasetUnitMenuUtils");var A=mstrmojo.vi.ui.DatasetUnitMenuUtils;mstrmojo.vi.ui._CanDropFromSchema=mstrmojo.provide("mstrmojo.vi.ui._CanDropFromSchema",{_mixinName:"mstrmojo.vi.ui._CanDropFromSchema",augmentDropContextForSchema:function B(E,C){var F=E.getCtxtDragData();if(F.src===mstrmojo.vi.models.EnumDragSources.ALL_OBJECT_LIST){var D=A.getCfgForAddUnitFromAllObject(F.items,C.datasets||{});F.dsid=D.dsid;if(D.actions.length){E.actions=D.actions;E.callback=C.getDatasetsUpdateCallback();}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.dom","mstrmojo.expr","mstrmojo.hash","mstrmojo.string","mstrmojo.vi.ui.HierarchyElementsCheckListBrowser","mstrmojo.vi.ui.ElementsBrowser","mstrmojo.ValidationTextBox","mstrmojo.DateTextBox","mstrmojo.Label","mstrmojo._IsList","mstrmojo.rw.ConditionWalkProviderBase","mstrmojo.ui.Pulldown","mstrmojo.ui.SearchablePulldown","mstrmojo.ui.CheckList","mstrmojo.ui.ColumnContainer","mstrmojo.vi.ui.DatasetUnitMenuUtils");var P=mstrmojo.array,V=mstrmojo.css,F=mstrmojo.string,M=mstrmojo.expr,W=mstrmojo.dom,X=mstrmojo.hash,x=M.ET,Z=M.ET2TGT,n=M.DTP2FN_DTP,Y=M.FN,m=M.FNT,S=M.FN_MRP,r=mstrmojo.rw.ConditionWalkProviderBase,c=r.onWalkChange,p=r.updateList,AH=r.fnItem,AG=r.isComparisonAllowed,a=r.clearInvalid,D=r.shouldShowCst,d=r.getConstant,G=r.getConstantDataType,w=r.getConstantValue,AI=r.isDATE,e=r.getCstListCompareTgts,f=r.fmJson,AA=r.allowedTargetTypes,L=r.updatePulldown,T=r.onWalkChangeThroughPulldown,o=mstrmojo.mstr.EnumDSSXMLObjectTypes,AE=mstrmojo.mstr.EnumDSSXMLObjectSubTypes,AK=mstrmojo.vi.ui.DatasetUnitMenuUtils,B=mstrmojo.ui._HasListTooltip;var E=mstrmojo.ui.ColumnContainer.prototype.updateColumnContainer;var Q=mstrmojo.meta.TP,AD=mstrmojo.meta.STP,C="-2";var N={SELECT:0,QUALIFICATION:1};var g={TEMPLATE_LEVEL:0,DATASET_LEVEL:1};var U={VALUE:1,RANK_PERCENTAGE:2,BOTH:3};var l=0,q=1;var H=368,AC=H-5,AJ=5,R=26,K=10;var v={};v[x.MQ]={key:"metricFns",def:M.METRIC_FNS};v[x.MC]={key:"metricFns",def:M.METRIC_FNS};v[x.AQ]={key:"formFns",def:M.FORM_FNS};v[x.AL]={key:"formFns",def:M.FORM_FNS};v[x.AC]={key:"formFns",def:M.FORM_FNS};v[x.AE]={key:"elemFns",def:M.ELEM_FNS};function AF(AL){return'<div class="unit item '+AK.getUnitCssClass(AL)+'">'+F.encodeHtmlString(AL.n)+"</div>";}function z(AL){var AM=this.selectedNode;P.forEach(AM.classList,function(AN){if(AN&&F.startsWith(AN,"ic")){V.removeClass(AM,AN);}});V.addClass(AM,"unit");V.addClass(AM,"item");V.addClass(AM,AK.getUnitCssClass(AL));return F.encodeHtmlString(AL.n);}function k(AM,AU){var AQ=AM.model,AT=AQ.et,AV=AQ&&AQ[Z[AT]]&&AQ[Z[AT]][AM.columnWalk.target.itemIdField||"did"],AP=AQ&&AQ.fm,AY=AP&&AP.dtp,AN=AG(AQ,AM.ets);if(this.targetsLastMod&&this.targetsLastMod===AM.targetsLastMod&&AV&&AV===this._lastTargetId&&this.lastFmDtp===AY&&this.lastFnTp===AN&&this.lastEt===AT){return ;}var AS=this.attMxPd,AX=this.attMxLabel;if(!AN){AS.set("items",[]);AX.set("visible",false);AS.set("visible",false);}else{var AW=AQ.a?mstrmojo.desc(518,"Attribute"):AQ.m?mstrmojo.desc(517,"Metric"):"",AR=e(AM),AL=AQ[Z[AQ.et]+(2+AU)],AO=AL?P.find(AR,"did",AL.did):undefined;AX.set("text",AW);AS.items=AR;AS.selectedIndex=AO>=0?AO:undefined;AS.refresh();AX.set("visible",true);AS.set("visible",true);}this._lastTargetId=AV;this.lastFnTp=AN;this.lastFmDtp=AY;this.lastEt=AT;this.targetsLastMod=AM.targetsLastMod;}function J(AT,AW){AT.updating=true;var AP=AT.parent.parent.parent,AV=D(AP,AW);if(!AV){AT.updating=false;return ;}var AN=AP.model||{},AS=d(AP,AW),AO=G(AP,AS),AX=w(AP,AW),AU=AN.fn,AR=M.fn_List(AU,AN.fnt),AL=AI[AO];var AQ=AL?AT.dateInput:AT.txtInput;var AM=AL?AT.txtInput:AT.dateInput;AM.set("visible",false);AQ.updating=true;AQ.set("dtp",AO);AQ.set("isList",AR);AQ.set("value",AX);AQ.set("visible",true);AQ.set("hint",AR?mstrmojo.desc(8191,"value1## value2## ...## valueN").replace(/##/g,mstrConfig.listSep||";"):"");AQ.updating=false;if(AU===1||AU===2){AQ.constraints.min=0;}if(AQ.clearValidation&&AQ.inputNode){AQ.clearValidation();}k.call(AT,AP,AW);switch(AN.et){case x.AQ:case x.AL:case x.MQ:AT.attMxPd.set("selectedIndex",undefined);break;}AT.updating=false;}function AB(){var AO=this.parent,AM=AO.parent.parent.parent,AN=(this.isValid&&this.isValid())||(!this.isValid&&!F.isEmpty(this.value)),AL=AM.model;AM["invalid"+AO.cstIndex]=!AN;if(!this.updating){this.updating=true;if(AL){AL.edit(AO.alias,{v:this.value,dtp:this.dtp});}this.updating=false;}if(AM.updateOkBtn){AM.updateOkBtn();}}function I(AL){if(AL){var AN=AL.n,AM=AL.dsName;if(AN&&AM){return'<div class="name">'+F.encodeHtmlString(AN,true)+'</div><div class="dsc dataset">'+F.encodeHtmlString(AM,true)+"</div>";}else{return B.getTooltipText.call(this,AL);}}}function j(AL){return X.copy(AL,{scriptClass:"mstrmojo.Box",children:[{scriptClass:"mstrmojo.ValidationTextBox",alias:"txtInput",cssText:"width: 100%",required:true,constraints:{trigger:mstrmojo.validation.TRIGGER.VALUESET},onValid:AB,onInvalid:AB,onClearValidation:a,size:6,visible:true},{scriptClass:"mstrmojo.DateTextBox",alias:"dateInput",cssDisplay:"inline-block",required:true,constraints:{trigger:mstrmojo.validation.TRIGGER.ALL},onValid:AB,onInvalid:AB,onClearValidation:a,calendarToBody:true,autoFormat:false,calConfig:{onmousedown:function(AO){W.stopPropogation(AO.hWin,AO.e);}},visible:true},{scriptClass:"mstrmojo.Label",cssClass:"attMxLabel",text:"Attribute",alias:"attMxLabel"},{scriptClass:"mstrmojo.ui.Pulldown",alias:"attMxPd",itemIdField:"did",cssClass:"conditionWalk-attMxPd",onSelectedItemChange:function AM(AP,AQ){if(this.hasRendered){var AO=this.parent.parent.parent.parent;T.call(this,AO,AP,"c0");}},getPulldownTextInnerHTML:AF,getPopupListConfig:function AN(){var AO=mstrmojo.ui.Pulldown.prototype.getPopupListConfig.call(this);AO.showTooltipForLargeText=false;AO.getItemProps=function AP(AS,AQ){var AR=mstrmojo._IsList.getItemProps.call(this,AS,AQ);AR.title="";AR.style=this.parent.itemCssText||"";AR.addCls("unit "+AK.getUnitCssClass(AS));return AR;};AO.getTooltipText=I;return AO;}}],update:function(){J(this,this.cstIndex);this.parent.updateScrollbars();},postCreate:function(){this._super();this.parent.parent.parent.attachEventListener("updateTargets",this.id,function(){this.update();});}});}function t(AL){return AL[Q]===o.Attribute&&AL[AD]===AE.AttributeRecursive;}function u(AL){var AN=AL[Q]===o.Consolidation&&AL[AD]===AE.ConsolidationManaged,AM=mstrApp&&mstrApp.rootCtrl&&mstrApp.rootCtrl.docCtrl&&mstrApp.rootCtrl.docCtrl.model;if(AN&&AM&&AM.findUnitInDataSet){AL=AM.findUnitInDataSet(AL.did);if(AL&&AL.attId){return t(AM.findUnitInDataSet(AL.attId));}}}mstrmojo.vi.ui.ConditionWalkProvider=mstrmojo.declare(mstrmojo.rw.ConditionWalkProviderBase,null,{scriptClass:"mstrmojo.vi.ui.ConditionWalkProvider",getTargetNodeProps:function h(){var AV=this;return{alias:"target",isAttribute:false,isMetric:false,showChooseMethod:true,showLevel:false,children:[{scriptClass:"mstrmojo.Label",cssClass:"baseOn",text:mstrmojo.desc(15115,"Based on")},{scriptClass:"mstrmojo.ui.SearchablePulldown",alias:"target",itemIdField:"did",cssClass:"conditionWalk-target",allowEmptyText:true,onRender:function(){if(this.hasRendered){this[this.editableSlot].setAttribute("placeholder",mstrmojo.desc(10,"Search"));}},postCreate:function(){this.parent.parent.parent.attachEventListener("updateTargets",this.id,function(){this.update();});},getEditableTextInnerHTML:function AW(){var AY=this.selectedIndex,AX=this.getPopupList(),AZ=AX&&AX.items;if(this.selectedNode&&AZ&&AZ[AY]){return this.getPulldownTextInnerHTML(AZ[AY]);}else{return"";}},update:function AR(){var Aa=this.parent.parent.parent,AZ=Aa.model,AX=Aa.targetsLastMod,Ad=AZ&&AZ.et;if(this.lastModel!==AZ||this.targetsLastMod!==AX){this.lastModel=AZ;this.targetsLastMod=AX;var AY=Aa.targets,Ab=Aa.ets;if(Ab&&AY&&AY.length){var Ac=AA(Aa.ets);AY=P.filter(AY,function(Ai){return Ac[Ai[Q]];});}var Ag=AZ&&AZ[Z[Ad]],Af=Aa.objectBrowsingEnabled,Ah=Af&&(!AY||P.find(AY,"did",C)===-1);if(Ad===x.ANDOR){Ag=AZ.a||AZ.m||null;}this.set("objectBrowsingEnabled",Af);if(Ah){AY=AY||[];var Ae=mstrmojo.desc(15346,"Browse Metadata Objects...");AY.push({did:C,n:Ae,t:-1,title:Ae});}L(this,true,M.getSortedObjectsByTypeGroup(AY),Ag);if((!Af||Ah)&&!Ag){this.set("isEditing",true);this.openPopup(this.getPopupList());}}},onitemSelected:function AM(AZ,AY){if(this.hasRendered){var AX=this.parent.parent.parent;T.call(this,AX,AZ,"target");}},preisEditingChange:function AS(){if(this.hasRendered&&this.isEditing){var AX=this.selectedNode;this._lastText=AX.innerHTML;V.removeClass(AX,"unit");V.removeClass(AX,"item");}return true;},postisEditingChange:function AT(){if(this.hasRendered&&!this.isEditing){var AX=this.selectedNode;if(this._lastText){AX.innerHTML=this._lastText;V.addClass(AX,"unit");V.addClass(AX,"item");}else{AX.innerHTML="";}delete this._lastText;}},onPopupWidgetClosed:function AU(AZ){if(this.objectBrowsingEnabled&&AZ&&AZ.pressingEnter){var AX=this.getPopupList(),Ac=AX._oldItems,Ab=this.text;if(Ac&&Ab){var Aa=P.filterOne(Ac,function(Ad){return Ad.n===Ab;});Aa=Aa||AX.items[0];if(!Aa){delete AX._oldItems;AX.set("items",Ac);return ;}if(Aa.did===C){var AY=this.parent.parent.parent;AY.browse(this);delete AX._oldItems;AX.set("items",Ac);return ;}}}mstrmojo.ui.SearchablePulldown.prototype.onPopupWidgetClosed.call(this,AZ);},getPulldownTextInnerHTML:z,getPopupListConfig:function AL(){var AX=mstrmojo.ui.SearchablePulldown.prototype.getPopupListConfig.call(this);AX.showTooltipForLargeText=false;AX.getItemProps=function AY(Ad,Ab){var Ac=mstrmojo._IsList.getItemProps.call(this,Ad,Ab);Ac.title="";Ac.style=this.parent.itemCssText||"";Ac.addCls("unit "+AK.getUnitCssClass(Ad));Ac.addCls(Ad.isInvalid?"invalid":"");return Ac;};AX.doItemSelect=function AZ(Ae,Ab){if(Ae.did===C){var Ac=this.parent;Ac.parent.parent.parent.browse(Ac);}else{if(Ae.isInvalid){var Ad=this;window.setTimeout(function(){Ad.showTooltip({target:Ad._getItemNode(Ae._renderIdx)},window);},0);}else{mstrmojo._IsList.doItemSelect.call(this,Ae,Ab);}}};AX.showTooltip=function Aa(Ag,Af){if(!this.hasOpenTooltip&&!(this._lastOpened&&this._lastOpened.visible)){var Ae=W.eventTarget(Af,Ag),Ad=this.getItemFromTarget(Ae);if(Ad&&Ad.isInvalid){var Ac=this.getItemNodeFromTarget(Ae),Ab=W.position(Ac);this.richTooltip={content:mstrmojo.desc(15391,"This is an invalid object. Please contact your administrator for more information."),cssClass:"vi-warning triangle-warning vi-tooltip-C A-center",left:Ab.x+168,top:Ab.y};mstrmojo._HasTooltip.showTooltip.call(this,Ag,Af);}else{this.constructor.prototype.showTooltip.call(this,Ag,Af);}}};AX.tooltipOpenDelay=700;AX.getTooltipText=I;return AX;}},{scriptClass:"mstrmojo.Label",cssClass:"baseOn",text:mstrmojo.desc(15116,"Choose elements by"),alias:"attrLabel",bindings:{visible:"this.parent.isAttribute && this.parent.showChooseMethod"}},{scriptClass:"mstrmojo.ui.Pulldown",alias:"chooseMethodPd",items:null,visible:false,bindings:{visible:"this.parent.isAttribute && this.parent.showChooseMethod"},onitemSelected:function AM(Aa){var AZ=this.parent.fm,AY=AZ&&AZ.cssClass,AX=AZ&&AZ.domNode,Ab=AZ&&AZ.selectedItem;if(Aa.v===N.SELECT){V.toggleClass(AX,"forms",false);if((AY||"").indexOf(" forms")>-1){AZ.cssClass=AY.replace(" forms","");}if((!Ab)||Ab.did!=="1,22"&&Ab.did!=="1,57"){AZ.singleSelectByField("1,22","did");}}else{V.toggleClass(AX,"forms",true);if((AY||"").indexOf(" forms")===-1){AZ.cssClass=(AY||"")+" forms";}if(!Ab||Ab.did==="1,22"||Ab.did==="1,57"){AZ.singleSelect(2);}}AZ.updateScrollbars();},update:function AR(){var Ac=this.parent.parent.parent,Aa=Ac&&Ac.model,AY=Ac&&Ac.disableElementsBrowsing,AX=Aa&&Aa.a,AZ=AX&&AY&&AY(AX);if(AZ){this.set("items",[{n:mstrmojo.desc(15117,"Qualification on"),v:N.QUALIFICATION}]);}else{if(AX.ndetype===1){this.children[0].showTooltipForLargeText=false;this.set("items",[{n:mstrmojo.desc(15118,"Selecting in list"),v:N.SELECT,ttpDisabled:true},{n:mstrmojo.desc(15117,"Qualification on"),v:N.QUALIFICATION,cls:"disabled",dsbld:true,ttp:mstrmojo.desc(16184,"This method is not available for this object type.")}]);}else{this.set("items",[{n:mstrmojo.desc(15118,"Selecting in list"),v:N.SELECT},{n:mstrmojo.desc(15117,"Qualification on"),v:N.QUALIFICATION}]);}}var Ab=this.getSelectedItem();switch(Aa.et){case x.AQ:case x.AL:case x.AC:if(!Ab||Ab.v!==N.QUALIFICATION){this.selectItemByField("v",N.QUALIFICATION);}break;default:if(!Ab||Ab.v!==N.SELECT){this.selectItemByField("v",N.SELECT);}break;}}},f({scriptClass:"mstrmojo.ui.CheckList",alias:"fm",fmPost:"",itemIdField:"did",filter:false,isFirstFm:true,multiSelect:false,minimumSelectCnt:0,hasDummyLabel:false,lastAttrId:null,height:AC-R*4-K*2-AJ+"px",onchange:function AP(AX){c.call(this,AX,"fm");},bindings:{visible:"this.parent.isAttribute && this.parent.showChooseMethod"},onvisibleChange:function(){this.lastAttrId=null;}}),{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(15119,"Output Level"),cssClass:"baseOn",alias:"metricLabel",bindings:{visible:"this.parent.isMetric && this.parent.showLevel"}},{scriptClass:"mstrmojo.ui.Pulldown",alias:"outputLevelPd",items:[{n:mstrmojo.desc(12178,"Visualization level"),v:g.TEMPLATE_LEVEL},{n:mstrmojo.desc(13519,"Dataset level"),v:g.DATASET_LEVEL}],selectedIndex:0,bindings:{visible:"this.parent.isMetric && this.parent.showLevel"},onSelectedItemChange:function AN(AY,AZ){var AX=this.parent.parent.parent,Aa=AX.condition;Aa.level=AY.v;}}],updateColumnContainer:function AO(){this.target.update();var Aa=this.parent,Af=Aa.parent,Ai=Af.model,Aq=Ai&&Ai.et,Aj=this.idx,An=this.next,Ao=Ai&&Ai.a,Ag=Ai&&Ai.fm,Ad=Af&&Af.inRelation;if(Aq){switch(Aq){case x.AQ:case x.AL:case x.AC:case x.AE:case x.ANDOR:if(Ao){this.set("isMetric",false);this.set("isAttribute",true);var Am=Af.disableElementsBrowsing,AZ=Ao&&Am&&Am(Ao),Ak=Af.getAttributeInfo(Ao.did),Ae=t(Ak)||u(Ak),Ah=Af.disableHierarchyLevel;if(Ae){Ai.et=x.AE;this.set("showChooseMethod",false);}var Ac=(Ai.etWas&&Ai.etWas===x.AE)?q:l,Al=l;if(Ai.et===x.AE&&!AZ){Al=q;}if(Ac!==Al||Al===l||!Aa.next){Aa.removeTrailingContainer(Aj);if(Al===l&&Ag){Aa.addNextColumn(AV.getFnNodeProps());}else{if(Al===q){Aa.addNextColumn(AV.getEsNodeProps(Ae,Ah));}}}Af.condition.level=g.DATASET_LEVEL;var Ap=this.fm;Ap.updating=true;Ap.update();this.chooseMethodPd.update();Ap.updating=false;}break;case x.MQ:case x.MC:if(Ai.m){this.set("isMetric",true);this.set("isAttribute",false);var AY=Af.isMDXDM(Ai.m.did),AX=Af.condition.level,Ab=Af.editor&&Af.editor.showLimits;if(AX!==g.TEMPLATE_LEVEL&&AX!==g.DATASET_LEVEL){AX=Af.condition.level=Ab?g.TEMPLATE_LEVEL:g.DATASET_LEVEL;}if(!Ad&&!AY&&Ab){this.set("showLevel",true);this.outputLevelPd.set("selectedIndex",AX);}else{this.set("showLevel",false);}if(!(An&&An.fn)){this.parent.insertAndRemoveTrailing(Aj,AV.getFnNodeProps());}}break;case x.R:case x.F:case x.XML:this.set("isMetric",false);this.set("isAttribute",false);Af.condition.level=g.DATASET_LEVEL;this.parent.removeTrailingContainer(Aj);break;}}else{this.set("isMetric",false);this.set("isAttribute",false);}E.call(this);},setupScrollNodes:function AQ(){this.scrollNode=null;}};},getEsNodeProps:function A(AS,AN){var AR=AS?"HierarchyElementsCheckListBrowser":"ElementsBrowser",AM=[{scriptClass:"mstrmojo.vi.ui."+AR,alias:"es",height:AC-5+"px",disableLevel:AN,update:function AQ(){var AW=this.parent.parent.parent,AX=AW.model,AV=AX&&AX.a,AU=!!AV&&!AV.ilk;if(!AU){return ;}this.set("ifDataSource",AW.getIfDataSource());this.onUpdateBrowseElementsParams=function(Aa){AW.onUpdateBrowseElementsParams(Aa);};if(!AX.es){AX.es=[];}if(AS){var AZ=AW.getAttributeInfo(AV.did);X.copyProps(["t","st"],AZ,AV);if(AZ&&AZ.attId){AZ=AW.getAttributeInfo(AZ.attId);}X.copyProps(["fs","lvfs"],AZ,AV);}else{if(!AV.fs){X.copyProps(["fs"],AW.getAttributeInfo(AV.did),AV);}}var AY=X.clone(AS?AX.data:AX.es);this.set("attribute",AV);this.set("selectedItems",AY);},onBrowseElementsFailure:function AL(){var AX=this.attributeId,AU=this.parent.parent,AW=AU.parent,AV=P.filterOne(AW.targets,function(AZ){return AZ.did===AX;});AV.isInvalid=true;AV.cls=(AV.cls||"")+" invalid";AW.set("model",{et:5,isNew:true,defaultETAttr:5});var AY=AU.target.target;AY.openPopup(AY.getPopupWidget());},onItemsSelectionChange:function AT(AU){var AV=this.parent.parent.parent,AW=AV.model;AW.edit(AS?"data":"es",AU);}}];return{alias:"es",children:AM,cssClass:"lastStage",updateColumnContainer:function AO(){this.es.update();},setupScrollNodes:function AP(){this.scrollNode=null;}};},getFnNodeProps:function b(){var AP=this,AM=[{scriptClass:"mstrmojo.Label",cssClass:"baseOn",text:mstrApp.isWSStyling?mstrmojo.desc(15006,"Operator"):mstrmojo.desc(9579,"Condition")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"fnTypePulldown",items:[{n:mstrmojo.desc(15302,"By Value"),v:U.VALUE},{n:mstrmojo.desc(15303,"By Rank"),v:U.RANK_PERCENTAGE}],onSelectedItemChange:function AQ(AS,AU){var AT=this.parent;AT.fn.update();}},f({scriptClass:"mstrmojo.ui.CheckList",alias:"fn",multiSelect:false,allowUnlistedValues:false,hideCheckMark:true,itemIdField:"did",onchange:function AL(AS){c.call(this,AS);},update:function(){var AU=this.parent,AY=AU.parent.parent,AT=AY.model||{},AZ=AT.et,AX,Aa=false,Ab,AS,Ad=U.BOTH;switch(AZ){case x.AE:Aa=!!AT.a;break;case x.AQ:case x.AC:case x.AL:Aa=!!(AT.fm&&AT.fm.did);AX=Aa?AT.fm.dtp:null;break;case x.MQ:case x.MC:Aa=!!AT.m;AX=Aa?M.METRIC_DTP:null;Ad=AU.fnTypePulldown.getSelectedItem().v;break;}if(!Aa){return ;}var Ac=n[AX];if((this.lastEt!==AZ)||(this.lastFnDtp!==Ac)||(this.lastFnTypeToDisplay!==Ad)){this.lastEt=AZ;this.lastFnDtp=Ac;this.lastFnTypeToDisplay=Ad;var AW=AZ?v[AZ]:null,AV=AW&&AW.key;Ab=(AV&&AY[AV])||AW.def||[];if(typeof (Ab)==="object"){Ab=Ab[Ac]||Ab["*"];}if(Ad!=U.BOTH){Ab=P.filter(Ab,function(Ae){var Af=Ae.tp===m.PER||Ae.tp===m.RANK;return Ad===U.RANK_PERCENTAGE?Af:!Af;});}AS=AH(AT.fn,AT.fnt||1);AS=P.filterOne(Ab,function(Ae){return Ae.did===(AS&&AS.did);});p(this,Aa,Ab,AS);if(!AS){this.set("selectedIndex",0);}}this.parent.updateScrollbars();}})];return{alias:"fn",children:AM,updateColumnContainer:function AR(){var Aa=this.parent,AW=Aa.parent,AV=AW.model,AX=AV&&AV.fn,AZ=AV&&AV.fnt,AY=AV&&AV.et,AU=this.next,AT=AX===Y.IS_NULL||AX===Y.IS_NOT_NULL,AS=(AY===x.MC||AY===x.MQ);this.changeFnTypePdVisibility(AS);if(AS){this.fnTypePulldown.getPopupList().singleSelectByField((AZ===m.RANK||AZ===m.PER)?U.RANK_PERCENTAGE:U.VALUE,"v");}else{this.fn.update();}if(AX&&AT){Aa.removeTrailingContainer(this.idx);}else{if(AX&&!(AU&&AU.c0)){Aa.insertAndRemoveTrailing(this.idx,AP.getC0NodeProps());}}AU=this.next;if(AU){AU.updateColumnContainer();}},changeFnTypePdVisibility:function AO(AT){this.fnTypePulldown.set("visible",AT);var AS=AC-AJ-R;if(AT){AS-=(R+K);}this.fn.set("height",AS+"px");},setupScrollNodes:function AN(){this.scrollNode=null;}};},getC0NodeProps:function O(){var AN=this;return{alias:"c0",children:[{scriptClass:"mstrmojo.Label",cssClass:"baseOn",text:mstrmojo.desc(527,"Value")},j({alias:"c0",cstIndex:0}),{scriptClass:"mstrmojo.Label",alias:"btwn",cssClass:"btwn",text:mstrmojo.desc(308,"and"),visible:false},j({alias:"c1",cstIndex:1,visible:false}),{alias:"browseLink",scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-walkstep-browse",text:mstrmojo.desc(7926,"Browse..."),onclick:function(){this.parent.parent.parent.browse(this.parent.c0);},visible:false},f({scriptClass:"mstrmojo.ui.CheckList",alias:"fm2",fmPost:2,itemIdField:"did",filter:false,multiSelect:false,minimumSelectCnt:0,hasDummyLabel:false,height:AC-R*4-K*2-AJ+"px",onchange:function AL(AP){c.call(this,AP,"fm2");}})],updateColumnContainer:function AO(){this.c0.update();var AY=this.parent,AU=AY.parent,AT=AY.parent.model,AW=AT&&AT.fn,AP=AW===Y.BETWEEN||AW===Y.NOT_BETWEEN||AW===S.BETWEEN||AW===S.BETWEEN_DESCENDING,AV=AW===Y.EQUAL||AW===Y.NOT_EQUAL||AW===Y.GREATER||AW===Y.GREATER_EQUAL||AW===Y.LESS||AW===Y.LESS_EQUAL,AX=this.idx,AS=this.next;this.browseLink.set("visible",AU.objectBrowsingEnabled&&AG(AT,AU.ets));this.btwn.set("visible",AP);var AR=this.c1;AR.set("visible",AP);if(AP){AR.update();}else{if(AT.c1){AT.edit("c1",{v:null,dtp:null,skipET:true},true);}}if((!AT.a)&&AT.m&&this.domNode){V.addClass(this.domNode,"lastStage");}var AQ=this.fm2;if(AT.a2&&AV){AQ.update();AQ.set("visible",true);}else{AQ.set("visible",false);}E.call(this);},setupScrollNodes:function AM(){this.scrollNode=null;}};},browseObjs:function y(AQ,AP,AS){var AO=W.position(AQ.parent.containerNode);AS=AS||{};AS.x=AO.x+40;AS.y=AO.y;this._super(AQ,AP,AS);var AM=AQ.ob.browser,AL=AQ.parent.opener.docModel,AN=AP.alias,AR=AQ.model.et;AL.controller.rootCtrl.loadDataProvider(function(AT){if(AN==="target"||AR===x.AQ){AM.rootFolder={did:"6F55FB47F9974EABA18CB0C5FF46785C"};}else{if(AR===x.MQ){AM.rootFolder={did:"E0CCB9CF22104A489CBE78D974AFD19E"};}}AM.model=AL;AM.set("dataProvider",AT);AM.set("opened",true);});}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.array","mstrmojo.vi.ui.theme","mstrmojo._HasOwnAvatar","mstrmojo.vi.ui.VIDragUnit","mstrmojo.hash");var G=mstrmojo.css,E=mstrmojo.dom,B=mstrmojo.vi.ui.theme,F=mstrmojo.array,C=mstrmojo.hash;function D(P,Q,O){var N=false;F.forEach(this.getSelectedItems(),function(R){if(R.itemNode===Q||R===P){N=true;}});if(P&&!N){this.doItemSelect(P,O||{});}}var M={avatarCssClass:"mstrmojo-VIUnitList",encodeUnitAvatar:true,getDragData:function L(N){var O=N.src.node,Q=E.findAncestorByAttr(O,"idx",true,this.domNode);N.src.node=Q?Q.node:O;var P=(N.dragUnitHelper=new mstrmojo.vi.ui.VIDragUnit()).getUnitDragData(N,this.getSelectedItems());if(this.getItemDisplayName){mstrmojo.func.override({getItemDisplayName:this.getItemDisplayName},N.dragUnitHelper);}P.srcId=this.id;return P;},createAvatar:function A(O,N){if(N.dragUnitHelper){return N.dragUnitHelper.getUnitAvatar(N,this.encodeUnitAvatar);}},selectDragNode:function K(N){var O=N.src;D.call(this,this.getItemFromTarget(O.node),this.getItemNodeFromTarget(O.node),O);},onItemContextMenu:function J(O,N){D.call(this,O,this.getItemNodeFromTarget(N.getTarget()),N);if(this._super){return this._super(O,N);}},positionAvatar:function H(O,N){N.dragOffsets=N.dragUnitHelper.getDragUnitOffsets();if(this._super){this._super(O,N);}}},I=C.copy(M);I._mixinName="mstrmojo.vi.ui._HasUnitListAvatar2";I.getDragData=function(N){if(this.isDraggingItem&&!this.isDraggingItem(N)){if(this._super){return this._super(N);}}else{return M.getDragData.call(this,N);}};mstrmojo.vi.ui._HasUnitListAvatar2=mstrmojo.provide("mstrmojo.vi.ui._HasUnitListAvatar2",I);mstrmojo.vi.ui._HasUnitListAvatar=mstrmojo.provide("mstrmojo.vi.ui._HasUnitListAvatar",mstrmojo.mixin(M,mstrmojo.mixin(mstrmojo._HasOwnAvatar)));}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.Model","mstrmojo.Container","mstrmojo._HasSuggestion","mstrmojo._IsWebApp","mstrmojo.mstr.search.SearchSettings","mstrmojo.mstr.search.SearchResults");var J=mstrmojo.desc,C=mstrmojo.css,f=mstrmojo.array,p=mstrmojo.string;var e=[16,1,2,4,8],a=e,G=[1,2,4,8],d=[3,8,14081],V=-1;var I={suggest:function(v){return{success:function(y){if(!mstrmojo.all.search){return ;}if(!v.hasSearchPattern){v.clear();v.hideSuggestion();return ;}v.sItems=y.items||[];var x,w=v.sItems.length;for(x=0;x<w;x++){v.sItems[x].t=V;}if(w){v.selectedSuggestionIndex=null;}else{v.hideSuggestion();}var z=y.items&&y.items[0]&&y.items[0].n.toLowerCase();if(z){v.suggestInputNode.value=z.replace(new RegExp("^"+p.regEscape(v.searchPattern),"i"),v.inputNode.value);v.syncInputWithSuggest();}else{z=v.searchPattern;}v.suggest=z;if(v.last_searchPattern!==z){v.last_searchPattern=z;window.setTimeout(function(){v.requestResults();},0);}},failure:function(w){mstrmojo.alert(w.status+" : "+w.statusText);},complete:function(w){v.showSpinnerIcon(false);v.handleSearchErrorAndModeSwitching(w);}};},search:function(v){return{success:function(x){if(!mstrmojo.all.search){return ;}var w;for(w in v){this[w]=v[w];}if(!v.hasSearchPattern&&!v.allowEmptyInput){v.clear();v.hideSuggestion();return ;}if(!x){mstrmojo.xhr.abort();v.requestResults();return ;}v.rItems=x.items||[{t:0,dssid:"",n:mstrmojo.desc(9135,"No match found")}];if(v.showAsPopup){v.renderResultsPopup(v.rItems);}else{v.renderResults(x||{});}},failure:function(w){mstrmojo.alert(w.status+" : "+w.statusText);},complete:function(w){v.showSpinnerIcon(false);v.handleSearchErrorAndModeSwitching(w);}};}};var N=function(w){var v=mstrApp.adminInfo;return w.replace("#",(v&&v.length>0?" ("+v+")":""));};var u=function(){if(mstrmojo.dom.isDXIE||mstrmojo.dom.isSafari){var v=this.inputNode;window.setTimeout(function(){v.focus();},10);}};mstrmojo.mstr.search.Search=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasSuggestion,mstrmojo._IsWebApp],{scriptClass:"mstrmojo.mstr.search.Search",noCache:true,suggestionPopupCssClss:"mstrmojo-Search-suggestion",resultsOnly:false,allowEmptyInput:false,showAsPopup:true,allowHTMLOnObjectDesc:false,searchDelay:200,doAutoComplete:true,minSearchLength:1,supportIncFetch:true,searchTootipText:mstrmojo.desc(9168,"Type to search"),enableSuggestion:true,hasSearchPattern:false,searchProps:null,quickSearch:false,includeObjectDesc:true,blockBegin:1,blockCount:10,rootFolderType:39,rootFolderID:null,nameWildcards:16,recursive:1,objectType:[3,8,14081],fields:"name",dereferenceshortcut:"1",dateType:1,created:0,dateSubType:1,intervalUnit:1,intervalValue:1,startDate:"",endDate:"",ownerType:1,description:"",maxObjects:100,searchDomain:2,styleName:"MojoFolderStyle",clearVisible:false,spinnerVisible:false,markupString:'<div class="mstrmojo-Search {@cssClass}" style="{@cssText}"><div class="mstrmojo-Search-settings1"></div><div class="mstrmojo-Search-container"><div class="mstrmojo-Search-input" style="position: relative"  mstrAttach:mousedown><div class="mstrmojo-Search-search" style="position: relative"><input class="searchPattern" maxlength="100" autocomplete="off" {@autofocus}                                   placeholder="{@searchTootipText}"mstrAttach:mousedown,keyup,keydown,blur,paste,cut,input /><div class="SearchBox-tip" n="searchTip"></div></div><div class="mstrmojo-Search-suggest" style="background: none transparent;"><input class="suggestPattern" maxlength="100" autocomplete="off" disabled="disabled" data-act="suggest"/></div></div><div class="mstrmojo-Search-btns" mstrAttach:click><div class="mstrmojo-Search-btnClear" data-act="clear"></div><div class="mstrmojo-Search-btnSpinner" data-act="spinner"></div><div class="mstrmojo-Search-btnSearch" data-act="search"></div></div></div><div class="mstrmojo-Search-btnSettings" data-act="settings" mstrAttach:click>'+mstrmojo.desc(14521,"Refineseaaa")+'</div><div class="mstrmojo-Search-infoIcon" data-act="info"></div><div class="mstrmojo-Search-settings"></div><div class="mstrmojo-Search-result"></div></div>',markupSlots:{settings1ContainerNode:function(){return this.domNode.firstChild;},suggestInputNode:function(){return this.domNode.childNodes[1].firstChild.childNodes[1].firstChild;},inputNode:function(){return this.domNode.childNodes[1].firstChild.childNodes[0].firstChild;},searchTipNode:function(){return this.domNode.childNodes[1].firstChild.childNodes[1].childNodes[1];},btnsNode:function(){return this.domNode.childNodes[1].childNodes[1];},clearNode:function(){return this.domNode.childNodes[1].childNodes[1].childNodes[0];},spinnerNode:function(){return this.domNode.childNodes[1].childNodes[1].childNodes[1];},searchNode:function(){return this.domNode.childNodes[1].childNodes[1].childNodes[2];},settingsBtnNode:function(){return this.domNode.childNodes[2].childNodes[2];},infoIconNode:function(){return this.domNode.childNodes[3];},settingsContainerNode:function(){return this.domNode.childNodes[4];},resultsContainerNode:function(){return this.domNode.childNodes[5];}},markupMethods:{onclearVisibleChange:function(){C.toggleClass(this.btnsNode,"clear",this.clearVisible);},onspinnerVisibleChange:function(){C.toggleClass(this.btnsNode,"spinner",this.spinnerVisible);C.toggleClass(this.domNode,"searching",this.spinnerVisible);}},init:function o(w){var x=this;this.autofocus=mstrmojo.dom.isSafari?"":"autofocus";if(this._super){this._super(w);}if(this.resultsOnly){C.addWidgetCssClass(this,"resultsOnly");}this.updateQuickSearchEnabled();mstrmojo.hash.copy(w.searchProps,this);this.objectType=f.filter(this.objectType,function(y){return f.find(x.allowedObjectTypesData,"t",parseInt(y,10))>-1;});this.maxObjects=parseInt(this.maxSearchResults||this.blockCount,10);var v=new Date();this.endDate=mstrmojo.date.formatDateInfo({day:v.getDate(),month:parseInt(v.getMonth(),10)+1,year:v.getFullYear()},mstrmojo.locales.datetime.DATEOUTPUTFORMAT);this.nameWildcards=(this.pqse?16:1);if(this.rootFolderID){this.rootFolderType=0;}else{this.rootFolderType=(parseInt(this.rootFolderType,10)>=0?this.rootFolderType:39);}this.updateQuickSearchEnabled();},preBuildRendering:function A(){var v=this;this.addChildren([mstrmojo.mstr.search.SearchSettings.getLocationPulldown({rootFolderName:this.rootFolderName,rootFolderType:this.rootFolderType,slot:"settings1ContainerNode"}),mstrmojo.mstr.search.SearchSettings.getSearchTypePulldown({className:"searchType",qse:this.qse,slot:"settings1ContainerNode"}),{scriptClass:"mstrmojo.mstr.search.SearchSettings",alias:"settingsWidget",allowedObjectTypesData:this.allowedObjectTypesData,model:new mstrmojo.Model({settings:{rootFolderType:this.rootFolderType,rootFolderID:this.rootFolderID,nameWildcards:this.nameWildcards,objectType:this.objectType,dereferenceshortcut:this.dereferenceshortcut,dateType:this.dateType,created:this.created,dateSubType:this.dateSubType,intervalUnit:this.intervalUnit,intervalValue:this.intervalValue,startDate:this.startDate,endDate:this.endDate,ownerType:this.ownerType,description:this.description}}),onmodelChange:function(){mstrmojo.hash.copy(this.model.settings,v);v.blockBegin=1;v.hasSearchPattern=((v.value&&(v.value.length>0))||(v.description&&(v.description.length>0)));v.delayedRequestResults();},slot:"settingsContainerNode"}]);if(this._super){this._super();}},postBuildRendering:function T(){if(this._super){this._super();}this.showSearchInfoIcon();if(this.showInfoIcon){this.addChildren([{scriptClass:"mstrmojo.Label",cssDisplay:"inline-block",bindings:{visible:function(){return this.showInfoIcon||true;}},useRichTooltip:true,richTooltip:{posType:mstrmojo.tooltip.POS_BOTTOMLEFT,cssClass:"vi-regular vi-tooltip-V",contentNodeCssClass:"mstrmojo-Search-infoIcon-tip",keepArrowXPos:true,refNode:this.infoIconNode,content:N(mstrmojo.desc(9264))},slot:"infoIconNode"}]);this.renderChildren();}u.call(this);if(this.searchPattern){this.inputNode.value=this.searchPattern;}},getSearchPattern:function O(){if(this.inputNode){this.searchPattern=mstrmojo.string.trim(this.inputNode.value);}else{this.searchPattern=null;}return this.searchPattern;},getRootFolderName:function q(){var v={0:this.rootFolderName,7:J(2,"Shared Reports"),20:J(3,"My Reports"),39:mstrConfig.projectName};return v[this.rootFolderType||39];},getNotFoundMsg:function Z(){var v=function(x){return"<b>"+mstrmojo.string.escape4HTMLText(x)+"</b>";};var w=J(9202,"Your search for ## in ### returned no results").replace("###",v(this.getRootFolderName())).replace("##",v(this.getSearchPattern()));return w;},onmousedown:function g(){u.call(this);},onkeyup:function n(x){var AB=this;var AC=x.e;this.value=x.getTarget().value;var y=this.value;var AA=AC.keyCode;if(AA==32&&/^\s/.test(y)){this.value=y.replace(/^\s+/,"");x.cancel();return false;}AB.hasSearchPattern=((this.value&&(this.value.length>0))||(this.description&&(this.description.length>0)));if(!AB.doAutoComplete){if(AB.hasSearchPattern){AB.showClearIcon();}AB.searchPattern=this.value;if(AC.keyCode!==13){return ;}}var w=function(AE,AF){if(AF.indexOf("?")>-1||AF.indexOf("*")>-1){return false;}var AD=false;try{if(typeof AE==="string"){AD=(new RegExp("^"+AF,"")).test(AE);}else{var AG;for(AG in AE){AD=(new RegExp("^"+AF,"i")).test(AE[AG].n);if(!AD){break;}}}}catch(AH){}return AD;};var z=function(){var v=this.suggestInputNode.style.visibility,AE=mstrmojo.dom.position(this.inputNode),AD=(this.inputNode.scrollWidth>(AE&&AE.w))?"hidden":"visible";if(v!==AD){this.suggestInputNode.style.visibility=AD;}};z.apply(AB);if(AA&&f.indexOf([8,13,27,37,38,39,40],AA)===-1&&w(AB.suggestInputNode.value,this.value)&&w(AB.sItems,this.value)){return ;}AB.processInput(x);AB.syncInputWithSuggest();this.set("clearVisible",this.getSearchPattern().length>0);},onkeydown:function Q(v){if(mstrmojo.dom.isIE){var w=v.e;if(w.keyCode===27){w.cancelBubble=true;return false;}}},onpaste:function t(v){var w=this;window.setTimeout(function(){w.onkeyup(v);},0);},onclick:function k(x){var v=x.hWin,y=x.e||v.event,z=y.target||y.srcElement,w=z&&((z.dataset&&z.dataset.act)||z.getAttribute("data-act"));switch(w){case"search":this.forceSearch();break;case"clear":this.clear();break;case"settings":this.settingsWidget.set("visible",!this.settingsWidget.visible);break;}},processInput:function h(v){var y=v.e,x=y.keyCode,w=this.inputNode.value;this.searchPattern=w;this.blockBegin=1;if(!this.doAutoComplete&&x!==13){return ;}if(x===13||w.length<this.minKeyLength){if(!this.hasSearchPattern){this.clear();}this.hideSuggestion();this.forceSearch();return ;}else{switch(x){case 38:case 40:if(this.updateSelectedIndex(x)){this.delayedRequestResults();}else{if(this.tmrRR){window.clearTimeout(this.tmrRR);}}break;case 13:case 27:this.hideSuggestion();this.cancel();break;case 37:break;case 39:if(this.suggestInputNode.value&&this.inputNode.value!==this.suggestInputNode.value){this.inputNode.value=this.suggestInputNode.value;this.suggestInputNode.value="";}break;default:if(!this.enableSuggestion){return ;}this.showSpinnerIcon(true);this.suggestInputNode.value="";this.delayedRequestSuggestion(w);}}},cancel:function E(){mstrmojo.xhr.cancel();},requestSuggestion:function r(){return this.showSuggestion(this.getSearchPattern());},delayedRequestSuggestion:function r(v){if(this.tmrRS){window.clearTimeout(this.tmrRS);}if(this.tmrRR){window.clearTimeout(this.tmrRR);}var w=this;this.tmrRS=window.setTimeout(function(){w.requestSuggestion(v);},this.searchDelay);},requestResults:function K(){if(!this.hasUserInput()){return ;}if(!this.searchPattern){this.searchPattern="";}var w=this;var x=function(AB){if(!w.isMiniSearchBox){return AB.toString();}var AC=[],z=d,AA;for(AA in z){if(f.find(AB,z[AA])>-1){AC.push(z[AA]);}}return AC.toString();};var v=function(){var AA="";if(w.isMiniSearchBox||w.dereferenceshortcut=="1"){return AA;}if(w.objectType.length===0||f.indexOf(w.objectType,18)===-1){return AA;}var AB=[],z;for(z=0;z<w.allowedObjectTypesData.length;z++){AB.push(w.allowedObjectTypesData[z].t);}return AB.toString();};var y={taskId:"searchMetadata",searchId:this.blockBegin>this.blockCount?this.searchId||"":"",quickSearch:this.qse,fields:this.fields,styleName:this.styleName,searchPattern:this.last_searchPattern||this.searchPattern,objectType:x(this.objectType),targetObjectType:v(),rootFolderType:this.rootFolderType,rootFolderID:(this.rootFolderType=="0"?this.rootFolderID:""),dereferenceshortcut:this.dereferenceshortcut,searchDomain:this.searchDomain,servletName:mstrApp&&mstrApp.name,supportOMD:this.supportOMD,maxObjects:this.maxObjects,blockCount:this.blockCount,blockBegin:this.blockBegin,nameWildcards:this.nameWildcards,recursive:this.recursive,sortKey:this.qse?-1:6,dateType:this.dateType,created:this.created,dateSubType:this.dateSubType,intervalUnit:this.intervalUnit,intervalValue:this.intervalValue,startDate:this.startDate,endDate:this.endDate,ownerType:this.ownerType,description:this.description,includeObjectDesc:false,includeAncestorInfo:true,includeHiddenAncestors:true,uses:this.uses||""};this.serverRequest(y,I.search(this));this.showSpinnerIcon(true);},delayedRequestResults:function K(){if(this.tmrRR){window.clearTimeout(this.tmrRR);}var v=this;this.tmrRR=window.setTimeout(function(){v.requestResults();},this.searchDelay);},renderResults:function U(v){var w=this;if(!this.resultsWidget){this.addChildren([{scriptClass:"mstrmojo.mstr.search.SearchResults",alias:"resultsWidget",slot:"resultsContainerNode",maxSearchResults:this.maxSearchResults,allowHTMLOnObjectDesc:this.allowHTMLOnObjectDesc,onfetch:function(x){w.fetchPage(x);}}]);this.renderChildren();}this.resultsWidget.set("results",v);},renderResultsPopup:function U(w){var v=this.suggestionPopup.list.selectedIndex;this.set("suggestionItems",w.concat(this.sItems));this.suggestionPopup.list.set("selectedIndex",v);},hasUserInput:function P(){if(!this.inputNode){return false;}var w=this.hasSearchPattern;w=w||!p.isEmpty(this.description)||this.ownerType==2||(this.dateType!=1)&&((this.dateSubType==1)&&!p.isEmpty(this.intervalValue)||(this.dateSubType==2)&&!p.isEmpty(this.startDate));return w||this.allowEmptyInput;},forceSearch:function b(){if(!this.hasUserInput()){return ;}this.suggestInputNode.value="";this.hideSuggestion();this.last_searchPattern=null;this.currentPage=1;this.blockBegin=1;this.requestResults();},updateQuickSearchEnabled:function c(){this.qse=!!this.isQuickSearchEngineEnabled&&this.enableQuickSearchPref;this.pqse=this.qse;this.qse=this.qse&&(f.indexOf(a,parseInt(this.nameWildcards,10))>-1);this.doAutoComplete=this.qse&&this.enableSearchAutoComplete;this.searchDelay=Math.max(0,this.searchAutoCompleteDelay);},syncInputWithSuggest:function X(){return ;},getSelectedIndex:function(){return this.suggestionPopup.list.selectedIndex;},getSelectedItem:function(){return this.suggestionPopup.list.selectedItem;},updateSelectedIndex:function W(v){try{if(!this.suggestionShown){return ;}if(v==38||v==40||v==13){switch(v){case 40:this.nextHighlight();break;case 38:this.preHighlight();break;case 13:this.hideSuggestion();this.selectedIndex=-1;return ;}var w=this.getSelectedItem()||{};var y=false;if(w.t=="-1"){y=this.applySuggestionItem(w);}else{y=false;this.selectedIndex=this.getSelectedIndex()-((this.sItems&&this.sItems.length)||0);}return y;}}catch(x){}},clear:function j(){this.showClearIcon(false);this.showSpinnerIcon(false);this.searchPattern="";this.last_searchPattern="";this.hasSearchPattern=false;this.inputNode.value="";this.suggestInputNode.value="";if(this.resultsWidget){this.resultsWidget.set("results",{});}this.hideSuggestion();u.call(this);},showSpinnerIcon:function L(v){this.set("spinnerVisible",v);},showClearIcon:function D(v){this.set("clearVisible",v);},getCandidatesThroughTaskCall:function R(x,v){x={taskId:"getSearchSuggestions",keyword:this.searchPattern};var w=I.suggest(this);v=mstrmojo.func.wrapMethods(w,v);this.serverRequest(x,v);},getSuggestionPos:function Y(){var v=mstrmojo.dom.position(this.inputNode,true);return{left:Math.round(v.x)+"px",top:Math.round(v.y+v.h)+"px",zIndex:102};},onSuggestionItemSelect:function m(v){if(this.applySuggestionItem(v)){this.delayedRequestResults();}},applySuggestionItem:function B(v){this.inputNode.value=v.n;this.suggestInputNode.value=this.inputNode.value;var w=false;if(this.last_searchPattern!=this.suggestInputNode.value){this.last_searchPattern=this.suggestInputNode.value;w=true;}this.selectedSuggestionIndex=this.getSelectedIndex();return w;},fetchPage:function F(v){var w=Math.max(v.v-1,0);this.blockBegin=w*this.blockCount+1;this.requestResults();},serverRequest:function H(v,w){mstrmojo.xhr.request("POST",mstrConfig.taskURL,w,v);},handleSearchErrorAndModeSwitching:function M(AB){if(!AB){return ;}var x=this;if(x.qse){var w=AB.getResponseHeader("X-MSTR-TaskErrorCode"),AA=AB.getResponseHeader("X-MSTR-TaskFailureMsg")||"";if(!w||w==-2147209051){return ;}var y=-2147212073;var z=-2147212154;if(w==y||w==z){x.isQuickSearchEngineEnabled=false;x.updateQuickSearchEnabled();x.nameWildcards={16:1,2:2,4:4,8:8}[x.nameWildcards];x.requestResults();this.showInfoIconOnce=true;}else{mstrmojo.alert(x.addAdminInfo(AA));}}else{var v=JSON.parse(AB.responseText).qsr;if(this.enableQuickSearch&&v){this.isQuickSearchEnabled=true;x.updateQuickSearchEnabled();x.nameWildcards={1:16,2:2,4:4,8:8}[x.nameWildcards];x.requestResults();}}},showSearchInfoIcon:function S(v){this.set("showInfoIcon",!this.qse||v);},destroy:function l(v){this._super(v);this.destroyChildren(true);}});mstrmojo.mstr.search.Search.zIndex=10;}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.rw.ConditionWalk","mstrmojo.Label","mstrmojo.ui.Pulldown","mstrmojo.ui.Checkbox","mstrmojo.expr","mstrmojo.css");var F=mstrmojo.expr.ET.MQ,H=mstrmojo.expr.ET.MC,C=mstrmojo.css,B=mstrmojo.desc(14387,"Evaluate this condition independent of other dataset level conditions");var G=function(L,N){var K=L.et,I=L.m&&mstrmojo.rw.ConditionWalk.isMdxDM(L.m.did),M=((K===F||K===H)&&!this.inRelation&&!I)?"block":"none",J=(((N===1)||K!==F)&&!I)?1:0;C.toggleClass(this.toolNode,"unselectable",K===H);this.toolNode.style.display=M;this.level.set("selectedIndex",J);this.includeExist.set("visible",J===1&&(K===H||K===F));this.includeExist.set("checked",L.idcsi===undefined?false:L.idcsi);};mstrmojo.fe.ConditionWalk=mstrmojo.declare(mstrmojo.rw.ConditionWalk,null,{scriptClass:"mstrmojo.fe.ConditionWalk",markupString:'<div class="mstrmojo-rw-ConditionWalk" mstrAttach:click><div class="condition mstrmojo-ConditionNode"><div class="mstrmojo-cond-contents"></div></div><div class="walk"></div><div class="tools"></div><div class="apply"></div></div>',markupSlots:mstrmojo.hash.copy({toolNode:function(){return this.domNode.childNodes[2];}},mstrmojo.hash.copy(mstrmojo.rw.ConditionWalk.prototype.markupSlots)),layoutConfig:{h:{conditionNode:"auto",walkNode:"100%",toolNode:"auto",applyNode:"auto"},xt:true},postCreate:function E(){this.children=mstrmojo.hash.clone(this.children).concat([{scriptClass:"mstrmojo.Label",slot:"toolNode",text:mstrmojo.desc(13517,"Calculate on")},{scriptClass:"mstrmojo.ui.Pulldown",slot:"toolNode",alias:"level",isHostedWithin:false,items:[{n:mstrmojo.desc(13518,"Template level"),v:0},{n:mstrmojo.desc(13519,"Dataset level"),v:1}],onitemSelected:function I(J){var K=this.parent;if(K&&K.condition&&K.visible){K.includeExist.set("visible",J.v===1);K.condition.level=J.v;}}},{scriptClass:"mstrmojo.ui.Checkbox",alias:"includeExist",slot:"toolNode",postBuildRendering:function(){this.domNode.innerHTML=B;},oncheckedChange:function(){var J=this.parent;if(J){J.model.set("idcsi",this.checked);}}}]);if(this._super){this._super();}},onvisibleChange:function A(I){var J=this.condition;if(J&&this.toolNode&&this.visible){G.call(this,J.data,J.tree.level);}if(this._super){this._super(I);}},onmodeledit:function D(I){if(this._super){this._super(I);}if(this.toolNode){G.call(this,this.model.get(),this.model.level);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.expr","mstrmojo.css","mstrmojo.Button","mstrmojo.Label","mstrmojo.rw.ConditionWalk","mstrmojo.ui.Pulldown","mstrmojo.ui.Checkbox","mstrmojo.ui._IsIncFetchList","mstrmojo.ui.ColumnWalk","mstrmojo.mstr.DocElementDataHelper");var F=mstrmojo.expr.ET.MQ,B=mstrmojo.expr.ET.MC,H=mstrmojo.css,G=mstrmojo.desc(14387,"Evaluate this condition independent of other dataset level conditions");var D=function(Q,S){var P=Q.et,N=this.parent&&this.parent.docModel&&this.parent.docModel.datasets,M=Q.m&&mstrmojo.rw.ConditionWalk.isMdxDM(Q.m.did,N),R=((P===F||P===B)&&!this.inRelation&&!M)?"block":"none",O=(((S===1)||P!==F)&&!M)?1:0;H.toggleClass(this.toolNode,"unselectable",P===B);this.toolNode.style.display=R;this.level.set("selectedIndex",O);this.includeExist.set("visible",O===1&&(P===B||P===F));this.includeExist.set("checked",Q.idcsi===undefined?false:Q.idcsi);};mstrmojo.vi.ui.editors.fe.ConditionWalk=mstrmojo.declare(mstrmojo.rw.ConditionWalk,[mstrmojo.ui._IsIncFetchList],{scriptClass:"mstrmojo.vi.ui.editors.fe.ConditionWalk",markupString:'<div class="mstrmojo-rw-ConditionWalk" mstrAttach:click><div class="condition mstrmojo-ConditionNode"><div class="mstrmojo-cond-contents"></div></div><div class="walk"></div><div class="tools"></div><div class="apply"></div></div>',markupSlots:mstrmojo.hash.copy({toolNode:function(){return this.domNode.childNodes[2];}},mstrmojo.hash.copy(mstrmojo.rw.ConditionWalk.prototype.markupSlots)),layoutConfig:{h:{conditionNode:"auto",walkNode:"100%",toolNode:"auto",applyNode:"auto"},xt:true},children:[{scriptClass:"mstrmojo.ui.ColumnWalk",alias:"columnWalk",slot:"walkNode",height:"333px",width:"800px"},{alias:"cancelBtn",slot:"applyNode",scriptClass:"mstrmojo.Button",cssClass:"cancelBtn",title:mstrmojo.desc(2399,"Cancel"),ignoreLayout:true,onclick:function(){var M=this.parent;if(M.close){M.close();}}},{alias:"okBtn",slot:"applyNode",scriptClass:"mstrmojo.Button",cssClass:"okBtn",title:mstrmojo.desc(2397,"OK"),onclick:function(){var M=this.parent;if(M.onOK){M.onOK();}}},{scriptClass:"mstrmojo.Label",alias:"tip",slot:"applyNode",cssClass:"tip",text:"",ignoreLayout:true}],init:function K(M){this._super(M);this.attachEventListener("conditionWalkUpdateOkBtn",this.id,function(N){var P=N.valid,O=this.parent;O.toggleOkButtonStatus(P);});},postCreate:function I(){this.children=mstrmojo.hash.clone(this.children).concat([{scriptClass:"mstrmojo.Label",slot:"toolNode",text:mstrmojo.desc(13517,"Calculate on")},{scriptClass:"mstrmojo.ui.Pulldown",slot:"toolNode",alias:"level",isHostedWithin:false,items:[{n:mstrmojo.desc(13518,"Template level"),v:0},{n:mstrmojo.desc(13519,"Dataset level"),v:1}],onitemSelected:function M(N){var O=this.parent;if(O&&O.condition&&O.visible){O.includeExist.set("visible",N.v===1);O.condition.level=N.v;}}},{scriptClass:"mstrmojo.ui.Checkbox",alias:"includeExist",slot:"toolNode",postBuildRendering:function(){this.domNode.innerHTML=G;},oncheckedChange:function(){var N=this.parent;if(N){N.model.set("idcsi",this.checked);}}}]);if(this._super){this._super();}},onvisibleChange:function J(M){var N=this.condition;if(N&&this.toolNode&&this.visible){D.call(this,N.data,N.tree.level);}if(this._super){this._super(M);}},onmodeledit:function A(M){if(this._super){this._super(M);}if(this.toolNode){D.call(this,this.model.get(),this.model.level);}},getAttributeForms:function L(M){return mstrmojo.rw.ConditionWalk.getAttForms(M,this.editor.docModel.datasets);},getElements:function E(P,R){var Q={},N=R.complete,O=this;this.scrollNode=this.columnWalk.es.scrollNode;var M=this.scrollNode&&this.scrollNode.style;if(M){M.height="100%";}if(!this.ifDataHelper){this.ifDataHelper=new mstrmojo.mstr.DocElementDataHelper({source:this.editor.docModel.getDataService()});}else{this.ifDataHelper.set("items",null);}this.columnWalk.es.es.allowUnlistedValues=false;this.updateBrowseElementsParams(Q,P);this.ifDataHelper.browseConfig=Q;R=mstrmojo.func.wrapMethods(R,{complete:function(S){O.initScroll();}});this.ifDataHelper.getItems(1,R);},postNext:function C(){this.columnWalk.es.updateList(this.ifDataHelper.items);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.mstr.ui.CreateMenu","mstrmojo.ui.menus._HasMenuPopup");var B=mstrmojo.dom;var C="mscld-create-menu";mstrmojo.mstr.ui.CreateButton=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.mstr.ui.CreateButton",markupString:'<div id="mscld-create" class="mstrmojo-CreateButton mscld-create analysis" title="'+mstrmojo.desc(3291,"Create")+'" mstrAttach:click><span class="mstrMenuItemcreate"><span id="mscld-create-menu" class="mscld-create-menu">'+mstrmojo.desc(3291,"Create")+"</span></span></div>",markupSlots:{menuButtonNode:function(){return this.domNode;}},onclick:function(){var D=mstrmojo.all[C];if(!D){D=mstrmojo.insert({scriptClass:"mstrmojo.mstr.ui.CreateMenu",id:"mscld-create-menu",opener:this,alignMenuToRight:this.alignMenuToRight,reportCreationViewMode:this.reportCreationViewMode});}this.toggleButtonClass(true);D.loadCreateMenu();},toggleButtonClass:function(D){if(this.domNode.className.indexOf("open")>0){mstrmojo.css.toggleClass(this.domNode,"open",D);}else{mstrmojo.css.toggleClass(this.domNode,"open",D);}},init:function(E){this._super(E);if(!this._listenerProc){var F=this;var D=this._listenerProc=function(){F.browserResized();};B.attachEvent(window,"resize",D);}},browserResized:function(){if(this.timer){clearTimeout(this.timer);}var D=mstrmojo.all[C];if(D){this.timer=setTimeout(function(){D.createMenu.adjustCornersForPopupOverflow();},100);}},destroy:function A(D){if(this._listenerProc){B.detachEvent(window,"resize",this._listenerProc);}this._super(D);},onButtonClick:mstrmojo.emptyFn,onStatusClick:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.dom","mstrmojo.expr","mstrmojo.hash","mstrmojo.Box","mstrmojo.Button","mstrmojo.Dial","mstrmojo.Editor","mstrmojo.FilterExpr","mstrmojo.HBox","mstrmojo.Label","mstrmojo.Obj","mstrmojo.CheckBox","mstrmojo.mstr.EnumNodeProperties","mstrmojo.warehouse.EnumObjectTypes","mstrmojo.fe.FilterExprTree","mstrmojo.fe.RelationFilterExprTree","mstrmojo.fe.CreateSetEditor","mstrmojo.fe.ConditionWalk","mstrmojo.ui.Pulldown","mstrmojo.ui.StatusButton");var Z=mstrmojo.expr,I=Z.ET,O=Z.BRANCH_FNS,X=mstrmojo.Obj,W=mstrmojo.dom,a=mstrmojo.array,S=mstrmojo.hash,d=mstrmojo.css,F=mstrmojo.mstr.EnumNodeProperties,C=mstrmojo.warehouse.EnumObjectTypes,K={TEMPLATE:0,DATASET:1},E=mstrmojo.mstr.EnumNodeDimty,Q=a.hash([E.NodeDimtyUnspecified,E.NodeDimtyNone]),M=200,H=mstrmojo.ui.PopupConfig.ENUM_CORNERS;function Y(){var g=this.avatar;if(g){g.parentNode.removeChild(g);delete this.avatar;d.removeClass(g,[this.avatarCssClass]);}}mstrmojo.fe.FilterEditorBase=mstrmojo.declare(mstrmojo.Editor,null,{onSave:null,onCancel:null,title:mstrmojo.desc(12032,"View Filter Editor"),help:"view_filter_editor_for_report_services_documents.htm",cssClass:"mstrmojo-charcoalboxe mstrmojo-FE",showLimits:true,objectBrowsingEnabled:false,children:null,showCondWalk:false,isNewCond:false,vizTitle:"",init:function T(g){this.children=[{alias:"feContent",scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-FE-content",postCreate:function(){this.children=[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-FE-exprTool",children:[{scriptClass:"mstrmojo.ui.StatusButton",cssClass:"mstrmojo-FE-addCondition",postCreate:function h(){this.editor=this.parent.parent.parent;this.statusList=this.editor.getAddConditionList();this.status=this.statusList[0];},onButtonClick:function(j){if(j){j.handler.apply(this.editor);}}}]},this.parent.getExpressionContainerCfg()];}},this.getConditionWalkConfig(),{alias:"buttonBar",scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBar",slot:"buttonNode",toggleBtnStatus:function(h){this.children[0].btnSave.set("enabled",h);this.children[0].btnCancel.set("enabled",h);},children:[{scriptClass:"mstrmojo.HBox",cssText:"float:right; border-collapse: separate",cellSpacing:3,children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton hot",text:mstrmojo.desc(118,"Save"),alias:"btnSave",onclick:function(){var h=this.editor;h.save();h.close();},bindings:{enabled:function(){return !this.editor.readOnly;},editor:"this.parent.parent.parent"}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton",alias:"btnCancel",text:mstrmojo.desc(221,"Cancel"),onclick:function(){var h=this.editor;if(h.onCancel){h.onCancel(h.model);}h.close();},bindings:{editor:"this.parent.parent.parent"}}]}]}];this._super(g);this.model=this.model||new X();},save:function V(){var g=this.model;g.expr=e(g.exprForest);g.limitExpr=e(b(g.limitExprForest));this.onSave(g);},getExpressionContainerCfg:function(){var g=this;return{alias:"feExpr",scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-FE-expr-list",postCreate:function(){this.children=g.getExpressionContentsConfig();},onRender:function(){W.attachMarkupEvent(this.id,this.domNode,"mousedown");},onmousedown:function(h){var j=W.eventTarget(h.hWin,h.e);if(this.isBlankArea(j)){this.clearSelect();}},isBlankArea:function(h){return h===this.domNode;},clearSelect:function(){}};},getExpressionContentsConfig:function(){return[];},getConditionWalkConfig:function(){var h=this;return{scriptClass:"mstrmojo.rw.ConditionWalk",width:"750px",objectBrowsingEnabled:false,dimtyTypes:Q,alias:"walk",visible:false,onOK:function g(){var k=this.condition;h.feContent.set("visible",true);this.set("visible",false);h.onConditionEdit(k,this.model.get());h.toggleButtonStatus(true);h.set("showCondWalk",false);},close:function j(){h.feContent.set("visible",true);this.set("visible",false);var k=this.condition;if(k&&k.isEmpty()){k.del();}h.toggleButtonStatus(true);h.set("showCondWalk",false);},targets:null,targetsLastMod:null,ets:null,condition:null,bindings:{disableElementsBrowsing:"this.parent.disableElementsBrowsing"}};},onConditionEdit:function(h,g){h.tree.modifyConditionNode(h,g);},getAddConditionList:function c(){return[{n:mstrmojo.desc(1994,"Add Condition"),handler:function(){this.mainExpr.newCondition(null,true);}}];},toggleButtonStatus:function B(g){this.buttonBar.toggleBtnStatus(g);},andOrPopupRef:{scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-FE-andOrPopup mstrmojo-CGE-andOrPopup mstrmojo-ConditionWalk",contentNodeCssClass:"mstrmojo-balloon",slot:"containerNode",modal:false,autoClose:true,showTitle:false,draggable:false,openEffect:null,closeEffect:null,onOpen:function(){var g=this.condition,k=g&&g.data&&g.data.not,l=g&&g.parent,h=l&&l.data,j=(h&&h.fn)+(k?21:0);this.list.opening=true;this.list.set("selectedItem",isNaN(j)?null:{did:j});this.list.opening=false;},children:[{scriptClass:"mstrmojo.Dial",cssClass:"mstrmojo-CGE-andOrDial",alias:"list",itemMarkup:'<div class="dial-item {@css}">{@n}</div>',itemIdField:"did",renderOnScroll:false,items:[{did:19,n:O[19]},{did:20,n:O[20]},{did:19+21,n:O["19_21"]},{did:20+21,n:O["20_21"]}],onchange:function(){if(this.opening){return ;}var h=this.parent,g=h.condition,n=this.selectedItem,m=n&&n.did,l=m>21?true:null,k=m-(l?21:0);h.close();var j=g&&g.parent;if(j&&j.data&&j.data.et===I.ANDOR){j.edit(g,k,l);}else{var o=g&&g.data;if(o&&(o.not!==l)){o.not=l;g.paint();}}}}]},createSetPopupRef:{scriptClass:"mstrmojo.fe.CreateSetEditor",contentNodeCssClass:"",cssClass:"CreateSet-Editor",title:mstrmojo.desc(12034,"Create a Set"),slot:"containerNode"},_set_busy:function(h,g){if(g){this.set("enabled",false);this.set("iconClass","mstrmojo-WaitIcon");}else{this.set("enabled",true);this.set("iconClass","");}},_set_model:function(l,h){var j=this.model,k=j!==h;if(k){this.model=h;this.modelLastSet=new Date();var g=function(m){return P(J(m));};h.exprForest=g(h.expr);h.limitExprForest=g(h.limitExpr);if(this.feContent&&this.feContent.feExpr.ve){this.feContent.feExpr.ve.nameFactory.clear();}}return k;},onUpdateBrowseElementsParams:mstrmojo.emptyFn,openWalk:function(p,q,v,w){var t=this,h=W.delta(q.domNode,t.containerNode);h.y+=(v==="andor"?16:parseInt(q.domNode.offsetHeight,10));var u={condition:q,zIndex:t.zIndex+10,left:h.x+"px",top:h.y+"px"},g;switch(v){case"andor":if(t.skipAndOrPopup){return ;}g="andOrPopupRef";break;case"createSet":case"createSetOpt":if(w&&w.e&&w.e.target){var l=w&&w.e&&w.e.target,o=W.delta(l,t.containerNode);u.left=o.x+"px";u.top=o.y+parseInt(l.offsetHeight,10)+"px";}var r=t.model.targets;g="createSetPopupRef";u.type=v;u.model={attrs:a.filter(r,function(n){return n.t===C.ATTRIBUTE;}),metrics:a.filter(r,function(n){return n.t===C.METRIC;})};if(v==="createSetOpt"){u.condition=q.parent;u.model.childIdx=q.childIndex();}break;case"condition":var m=t.walk,j=q.textNode.cloneNode(true),k=m.conditionNode.firstChild;d.removeClass(j,"editable");d.addClass(m.conditionNode,"mstrmojo-ConditionNode");if(k.firstChild){k.removeChild(k.firstChild);}k.appendChild(j);m.set("objectBrowsingEnabled",t.objectBrowsingEnabled);m.set("targets",t.model.targets);m.set("targetsLastMod",t.modelLastSet);m.set("ets",q.tree.validExprTypes||t.validExprTypes);m.set("condition",q);m.set("model",S.clone(p));m.set("hasPrompt",t.model.hasPrompt);m.set("disableElementsBrowsing",t.disableElementsBrowsing||m.disableElementsBrowsing);m.set("editor",t);m.set("inRelation",q.inRelation);t.feContent.set("visible",false);m.set("visible",true);m.columnWalk.target.updateScrollbars();t.toggleButtonStatus(false);t.set("showCondWalk",true);t.set("isNewCond",!!p.isNew);return ;}t.openPopup(g,u);}});mstrmojo.fe._isReportFilterEditor=mstrmojo.provide("mstrmojo.fe._isReportFilterEditor",{_mixinName:"mstrmojo.fe._isReportFilterEditor",getExpressionContainerCfg:function(){var g=this._super();return mstrmojo.mixin({clearSelect:function(){this.re.clearTreeSelect();}},g);},getExpressionContentsConfig:function(){return[{alias:"re",scriptClass:"mstrmojo.fe.ReportFilterExprTree",level:K.DATASET,bindings:{items:"this.editor.model.exprForest || []"},postApplyProperties:function(){this.editor=this.parent.parent.parent;this.editor.set("mainExpr",this);}}];}});mstrmojo.fe.ReportFilterEditor=mstrmojo.declare(mstrmojo.fe.FilterEditorBase,[mstrmojo.fe._isReportFilterEditor],{scriptClass:"mstrmojo.fe.ReportFilterEditor"});mstrmojo.fe.ReportFilterExprTree=mstrmojo.declare(mstrmojo.fe.FilterExprTree,null,{scriptClass:"mstrmojo.fe.ReportFilterExprTree",cssClass:"mstrmojo-expr mstrmojo-FE-datasetExpr",onNew:function(g){g.data.isNew=true;this.editor.openWalk(g.data,g.widget.ctxtBuilder.itemWidgets[g.index],"condition");},onnodeclick:function A(g){var h=g.editor||this.tree.editor;h.openWalk(this.data,this,g&&g.part,g);},allowDrop:function G(g){var j=g&&g.src,l=j&&j.data,k=l&&l.et,h=j&&j.widget&&j.widget.tree;return k&&this!==h;}});mstrmojo.fe.FilterEditor=mstrmojo.declare(mstrmojo.fe.FilterEditorBase,null,{getExpressionContainerCfg:function(){var g=this._super();return mstrmojo.mixin({isBlankArea:function(h){if(this._super(h)){return true;}return !a.filterOne([this.ve,this.vle,this.re],function(j){if(j&&W.contains(j.domNode,h,true)){return true;}});},clearSelect:function(){this.ve.clearTreeSelect();this.vle.clearTreeSelect();}},g);},getExpressionContentsConfig:function(){return[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11746,"Dataset Level Conditions"),cssClass:"mstrmojo-FE-expr-header dl",bindings:{visible:"true || this.parent.parent.parent.showLimits"}},{alias:"ve",scriptClass:"mstrmojo.fe.RWViewFilterExprTree",level:K.DATASET,bindings:{items:"this.editor.model.exprForest || []"},onBlankClick:function(g){this.parent.clearSelect(g);},supportRelation:true,postApplyProperties:function(){this.editor=this.parent.parent.parent;this.editor.set("mainExpr",this);}},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11747,"Template Level Conditions"),cssClass:"mstrmojo-FE-expr-header tl",bindings:{visible:"this.parent.parent.parent.showLimits"}},{alias:"vle",scriptClass:"mstrmojo.fe.RWViewLimitExprTree",level:K.TEMPLATE,bindings:{visible:"this.editor.showLimits",items:"this.editor.model.limitExprForest || []"},onBlankClick:function(g){this.parent.clearSelect(g);},postApplyProperties:function(){this.editor=this.parent.parent.parent;this.editor.set("limitExpr",this);}}];},getConditionWalkConfig:function(){var g=this._super();S.copy({scriptClass:"mstrmojo.fe.ConditionWalk"},g);return g;},getAddConditionList:function c(){var g=this._super();g.push({n:mstrmojo.desc(12055,"Add Dynamic Condition"),handler:function(){this.mainExpr.newCondition({et:I.XML,idc:1,ph:{}},true);}});return g;},onConditionEdit:function(j,h){if(j.tree.level===j.level||j.tree.level===undefined){this._super(j,h);}else{j.parent.remove(j.data);var g=K.TEMPLATE===j.level?this.limitExpr:this.mainExpr;g.addSingleCondition(h);}}});mstrmojo.fe.RWViewFilterExprTree=mstrmojo.declare(mstrmojo.fe.RelationFilterExprTree,null,{scriptClass:"mstrmojo.fe.RWViewFilterExprTree",cssClass:"mstrmojo-expr mstrmojo-FE-datasetExpr",levelSwitchValidTypes:[I.MQ],onNew:function(g){g.data.isNew=true;if(!g.data.ph){this.editor.openWalk(g.data,g.widget.ctxtBuilder.itemWidgets[g.index],"condition");}},onnodeclick:function A(h){var g=this.tree,k=h.editor||g.editor;this.level=g.level;var j=typeof (k.disableElementsBrowsing)==="function"&&k.disableElementsBrowsing();if(j&&this.data.et===I.AE){return ;}k.openWalk(this.data,this,h&&h.part,h);},ondragend:function N(j){var h=j&&j.tgt,g=h&&h.widget;if(this.tree&&g&&g.tree&&g.tree!==this.tree){Y.call(this);return ;}this._super(j);},getItemConfig:function(j,g,k){var h=this._super(j,g,k);return S.copy({getConditionTextPostfix:function(){if(this.data.et!==I.MQ){return"";}return'<img class="mstrmojo-moveToViewLimit" src="../images/1ptrans.gif" title="'+mstrmojo.desc(4978,"Move to view limit")+'"onclick="var w = mstrmojo.all[\''+this.id+"']; w.tree.moveMQNodeToViewLimit(w); return false;\" />";}},h);},moveMQNodeToViewLimit:function(j){if(a.indexOf(this.levelSwitchValidTypes,j.data.et)===-1){return ;}var h=S.copy(j.data);j.parent.remove(j.data);var g=this.editor.limitExpr;g.addSingleCondition(h);},allowDrop:function G(g){var j=g&&g.src,m=j&&j.data,l=m&&m.et,k=this.tree,h=j&&j.widget&&j.widget.tree;return l&&(this===k?(h!==k):true);}});mstrmojo.fe.RWViewLimitExprTree=mstrmojo.declare(mstrmojo.fe.FilterExprTree,null,{scriptClass:"mstrmojo.fe.RWViewLimitExprTree",cssClass:"mstrmojo-expr mstrmojo-FE-limitExpr",validExprTypes:a.hash([I.MQ]),levelSwitchValidTypes:[I.MQ],onnodeclick:function A(h){var g=this.tree,j=g.editor;this.level=g.level;j.openWalk(this.data,this,h&&h.part,h);},onConditionEdit:function(h,g){this._super(h,g);h.data.mdxUnitId=h.data.m.did;U(h);},addSingleCondition:function(h){var g=this._super(h);U(g);},allowDrop:function(g){var k=g&&g.src,m=k&&k.data,l=m&&m.et,j=this.tree,h=k&&k.widget&&k.widget.tree;if(j===h){return this!==h&&this.data&&(this===k.parent||this.data.mdxUnitId===(m&&m.mdxUnitId));}return !(a.indexOf(this.levelSwitchValidTypes,l)===-1);},ondrop:function L(h){var l=h&&h.src,g=l&&l.widget;if(g&&g.tree!==this.tree){var k=l&&l.data;if(k&&k.index!==null){var j=g.ctxtBuilder.itemWidgets[k.index];j.tree.moveMQNodeToViewLimit(j);}l.data=null;}this._super(h);},isEditable:function(g){return g.mdxUnitId&&this._super(g);},ondragend:function R(g){var k=g&&g.tgt,h=k&&k.widget;if(h&&h.tree!==this.tree){var j=g.src&&g.src.data;if(j&&(j.indices||(j.index!==null))){this.remove(j.indices||j.index);}Y.call(this);}else{this._super(g);}},moveMQNodeToViewFilter:function(h){var g=this.editor.mainExpr;h.parent.remove(h.data);g.addSingleCondition(h.data);},getItemConfig:function(j,g,k){j.mdxUnitId=D(j);var h=this._super(j,g,k);return S.copy({cssClass:f(j,g,k)?"per-metric-limit":"",forbidRelation:true,getConditionTextPostfix:function(){if(this.data.et!==I.MQ||mstrmojo.rw.ConditionWalk.isMdxDM(this.data.m.did)){return"";}return'<img class="mstrmojo-moveToViewFilter" src="../images/1ptrans.gif" title="'+mstrmojo.desc(9746,"Move to view filter")+'"onclick="var w = mstrmojo.all[\''+this.id+"']; w.tree.moveMQNodeToViewFilter(w); return false;\" />";}},h);}});function P(h){var g=[];a.forEach(h,function(j){if(!j){return ;}if(j.et===I.ANDOR&&!(j.node&F.CONDITION)){j.nds=P(j.nds);if(j.nds.length===0){return ;}else{if(j.nds.length===1){var k=j.nds[0];if(j.not){k.not=!k.not;}g.push(k);return ;}}}g.push(j);});return g;}function J(g){return g?[g]:[];}function e(g){return g&&g.length===1?g[0]:null;}function b(j){var h=P(j),g;if(!h[0]||h[0].mdxUnitId){g={et:I.ANDOR,fn:Z.FN.AND,nds:h};}else{g=h[0];}return[g];}function f(h,g,j){return(j===j.tree||j.parent===j.tree)&&!!h.mdxUnitId;}function D(h){if(!("mdxUnitId" in h)){var g;switch(h.et){case I.MQ:case I.MC:g=h.m.did||null;break;case I.ANDOR:a.forEach(h.nds,function(k){var j=D(k);if(g===undefined){g=j;}else{if(g!==j){g=null;return false;}}return true;});break;default:g=undefined;break;}h.mdxUnitId=g;}return h.mdxUnitId;}function U(m){var o=m.tree,n=o.ctxtBuilder.itemWidgets[0],r=m.parent,p=a.indexOf(r.items,m.data),k=r.items[p],h=k.mdxUnitId;if(r===o){return ;}if(r.data.mdxUnitId===h){return ;}if(n.data.mdxUnitId){var j={et:I.ANDOR,fn:Z.FN.AND,nds:[n.data,k]};o.remove(0);o.add([j]);o.ctxtBuilder.itemWidgets[0].ctxtBuilder.itemWidgets[0].remove(k);}else{var l=n,g;a.forEach(n.data.nds,function(u,t){if(u.mdxUnitId===k.mdxUnitId&&n.items[t]!==k){l=n.ctxtBuilder.itemWidgets[t];g=t;return false;}});if(l===r){return ;}if(l.data.et!==I.ANDOR){var q={et:I.ANDOR,fn:Z.FN.AND,nds:[l.data,k]};n.add([q],g+1);n.remove(l.data);}else{l.add([k]);}r.remove(k);}}}());(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.mstr.search.Search");mstrmojo.mstr.search.SearchButton=mstrmojo.declare(mstrmojo.Button,null,{scriptClass:"mstrmojo.mstr.search.SearchButton",cssClass:"mstrmojo-SearchButton",onclick:function A(B){this.searchEditor=new mstrmojo.Editor({cssClass:"mstrmojo-Search-editor",zIndex:mstrmojo.mstr.search.Search.zIndex,children:[{scriptClass:"mstrmojo.mstr.search.Search",id:"search",searchProps:this.searchProps,showAsPopup:false,isQuickSearchEngineEnabled:mstrConfig.isQuickSearchEngineEnabled,enableQuickSearchPref:mstrConfig.enableQuickSearchPref,enableSearchAutoComplete:mstrConfig.enableSearchAutoComplete,searchAutoCompleteDelay:mstrConfig.searchAutoCompleteDelay}],onOpen:function(){var C=45;this.set("top",mstrmojo.dom.getVerticalScroll()+C+"px");window.setTimeout(function(){mstrmojo.all.search.inputNode.focus();},200);},onClose:function(){this.destroy();}});this.searchEditor.open();}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.array","mstrmojo.hash","mstrmojo.array","mstrmojo.Container","mstrmojo.TreeBrowserNode","mstrmojo.TreeBrowser","mstrmojo.TreeBrowserSelector","mstrmojo.DynamicClassFactory","mstrmojo._HasLayout","mstrmojo.ObjectBrowserDataProvider","mstrmojo.ui._HasScroller","mstrmojo.ui.SearchBox","mstrmojo.ui._HasUITheme","mstrmojo.vi.ui._IsDropTarget","mstrmojo.vi.ui._IsViPanel","mstrmojo.vi.ui.UnitList","mstrmojo.vi.ui._HasUnitListAvatar","mstrmojo.vi.ui.toolbars._HasToolbar","mstrmojo.vi.ui.CollapsibleTitleBar","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.vi.models.EnumDragSources","mstrmojo.vi.ui._CanDropFromSchema","mstrmojo.css","mstrmojo.vi.ui.theme");var G=mstrmojo.DynamicClassFactory,U=mstrmojo.array,I=mstrmojo.hash,H=mstrmojo.dom,A=mstrmojo.css,g=mstrmojo.string,F=mstrmojo.vi.ui.theme,a=mstrmojo.vi.ui.DatasetUnitMenuUtils,f=[4,12,1,47];var J={n:mstrmojo.desc(15348,"No applicable objects"),t:0},R={n:mstrmojo.desc(15559,"No result matches your search."),t:0};function L(o){var n=[],m=[],t=this._shiftStartIndex,r=this.selectedIndices,q=Math.min(t,o),p=Math.max(t,o);U.forEach(this.items,function(u,w){if(q<=w&&w<=p){if(!r[w]){n.push(w);}}else{if(r[w]){m.push(w);}}});this.addSelect(n);this.removeSelect(m);}function P(){return !mstrmojo.resolveFeature("hide-objects-description");}function X(n){var m=mstrmojo.vi.enums.EnumDSSAccessRightFlags;return n.acg&&(n.acg&m.DssAccessRightUseFlag)&&(n.acg&m.DssAccessRightExecuteFlag);}function h(n,q){var p=n.itemsContainerNode,o=H.isMetaKey(q.src.hWin,q.src.e),t=H.eventTarget(q.src.hWin,q.src.e),m=-1;if(p&&t){U.forEach(p.childNodes,function(u,w){if(H.contains(u,t,true,u)){m=w;return false;}});}if(m!==-1){var r=n.items[m];if(!o&&!n.selectedIndices[m]){n.tree.clearTreeSelect();}if(U.indexOf(f,r.t)>=0){n.addSelect(m);}return true;}return false;}function b(o,m){var n=this.listSelector;if(n){n[o](this,this.itemsContainerNode,m);}}function M(n,o){var m=false;if(n.itemsContainerNode){U.forEach(n.ctxtBuilder.itemWidgets,function(p){if(H.contains(p.itemsContainerNode,o,p.domNode)){m=true;}});}return m;}mstrmojo.vi.ui.BrowserNodesAvatarContent=G.newComponent(mstrmojo.vi.ui.UnitList,null,{getItemProps:function(o,m){var n=this._super(o,m);n.addCls("isAvatar");return n;}});mstrmojo.vi.ui.TreeBrowserSelector=I.copy({premousedown:function(n,o,m){n.tree._selectNode=H.eventTarget(m.hWin,m.e);},premouseup:function D(x,m,z){if(H.isPrimaryMouseBtn(z.e)){var q=z.hWin,t=z.e,u=H.eventTarget(q,t),o=H.shiftKey(z.hWin,z.e),y=x._shiftStartIndex,r=M(x,u),v=x.listMapper.findIndex(x,m,u);if(v>-1&&!r&&x.tree._selectNode===u){var n=U.indexOf(f,x.items[v].t)!==-1;if(o&&y>-1&&n){x.rangeSelect(v);}else{x.toggleSelect(v);if(x.selectedIndices[v]&&n){x._shiftStartIndex=v;}}}}}},mstrmojo.TreeBrowserSelector);mstrmojo.vi.ui.TreeBrowser=G.newComponent(mstrmojo.TreeBrowser,[mstrmojo.vi.ui._HasUnitListAvatar],{containerResizable:false,draggable:true,avatarCssClass:"mstrmojo-VIUnitList",rangeSelect:L,_selectNode:null,_shiftStartIndex:-1,blockBegin:1,blockCount:50,getContent:function(n,r){n=n||this;var o=(n===this),m=this,t=function(u){if(o){mstrmojo.css.removeClass(m.domNode,["loading"]);}m.updateTreeContent(n,u);},p=function(u){n.contentRetrieved=true;n.set("items",[m.failItemCreaterFunc()]);mstrmojo.err(u);},q={success:t,failure:p};if(o){mstrmojo.css.addClass(m.domNode,["loading"]);}if(mstrApp.objectsBlockCount){this.blockCount=parseInt(mstrApp.objectsBlockCount,10);}this.getContentThroughTaskCall({isRoot:o,data:n.data,blockBegin:r||n.blockBegin,blockCount:parseInt(mstrApp.objectsBlockCount,10)||m.blockCount},q);},getDragData:function j(n){n.dragUnitHelper=new mstrmojo.vi.ui.VIDragUnit();var q=this,r=function(w){U.forEach(w.ctxtBuilder.itemWidgets,function(x){var y=H.eventTarget(n.src.hWin,n.src.e);if(y&&H.contains(x.itemsContainerNode,y,true,x.itemsContainerNode)){q=x;r(x);return false;}});};r(this);var o=h(q,n);var t=o?this.getSelectedItems().filter(function(w){return U.indexOf(f,w.t)!==-1;}):null;var m=this.id,p=function p(w){var z=mstrmojo.all[m],x=z.avatar;if(x){var y=[z.avatarCssClass,"hasOwnAvatar",w];x.className=y.join(" ");}};return{items:t,item:t&&t[0],src:mstrmojo.vi.models.EnumDragSources.ALL_OBJECT_LIST,setAvatarClass:function u(w){p(w);},setInvalidAvatarClass:function v(){p("icn clsx_sub");}};},getSelectedItems:function(){var m=this.ctxtBuilder,n=[];if(m){U.forEach(m.itemWidgets,function(o){if(o.state===1){n=n.concat(o.getSelectedItems());}});}n=(this._super()||[]).concat(n);return n;},createAvatar:function(o,n){var m=document.createElement("div");this.avatarContent=new mstrmojo.vi.ui.BrowserNodesAvatarContent({items:n.src.data.items});this.avatarContent.render();A.addClass(this.avatarContent.domNode,[F.getThemeClass.call(this)]);m.appendChild(this.avatarContent.domNode);return m;},ondragend:function(m){this._super(m);if(this.avatarContent&&this.avatarContent.destroy){this.avatarContent.destroy();}delete this.avatarContent;},isDragValid:function S(n){var m=n.src.data.items;return(m&&m.length)||this._super(n)||false;},contentRetrieved:false,onvisibleChange:function(){if(!this.contentRetrieved){this.getContent(this);}}});mstrmojo.vi.ui.TreeBrowserNode=G.newComponent(mstrmojo.TreeBrowserNode,[{_mixinName:"newClass"}],{containerResizable:false,draggable:false,_shiftStartIndex:-1,rangeSelect:L,premousedown:function(m){this.tree._selectNode=H.eventTarget(m.hWin,m.e);},premouseup:function(n){if(H.isPrimaryMouseBtn(n.e)){var r=H.isMetaKey(n.hWin,n.e),q=H.shiftKey(n.hWin,n.e),t=H.eventTarget(n.hWin,n.e),u=H.contains(this.itemsContainerNode,t,true,this.domNode),p=u&&M(this,t),o=(this.state===2),m=!o&&(t!==this.stateNode&&t!==this.textNode)&&!u;if(p||this.tree._selectNode!==t){return ;}if((!r&&!q)||this.tree.isSelectedFolder||m){this.tree.clearTreeSelect();}if(m){this.tree.isSelectedFolder=true;}else{if(!u){this.tree.isSelectedFolder=false;}}if(!o&&(t===this.stateNode||t===this.textNode)){this.toggleState();this.tree.updateScroller();H.stopPropogation(n.hWin,n.e);}else{if(u){b.call(this,"premouseup",n);}else{this.handleNodeClicked();}}}},getSelectedItems:function(){var m=this.ctxtBuilder,n=[];if(m){U.forEach(m.itemWidgets,function(o){if(o.state===1){n=n.concat(o.getSelectedItems());}});}n=(this._super()||[]).concat(n);return n;}});function Y(o){var n=this;return I.copy(o,{scriptClass:"mstrmojo.vi.ui.TreeBrowser",alias:"contents",slot:"containerNode",isSelectedFolder:false,browserNodeClass:mstrmojo.vi.ui.TreeBrowserNode,noCheckBox:true,itemIdField:"did",useRichTooltip:true,dataProvider:this.dataProvider,listSelector:mstrmojo.vi.ui.TreeBrowserSelector,showTooltip:function r(u,AA){var z=u.target||H.eventTarget(u.hWin,u.e),y=H.findWidget(z),x=y.data;if(x&&x.n){var v=y.domNode.firstChild;var w='<div class="name">'+g.encodeHtmlString(x.n,true)+"</div>"+(x.desc?'<div  class="dsc">'+g.encodeHtmlString(x.desc,true)+"</div>":"");var t=H.position(v);this.richTooltip={posType:mstrmojo.tooltip.POS_TOPLEFT,cssClass:"vi-regular vi-tooltip-C",content:w,top:t.y-4,left:t.x+t.w+6};this.constructor.prototype.showTooltip.call(this,u,AA);}},updateScroller:function(){n.updateScrollbars();},isBranch:function(t){return t.t===8;},items:null,bindings:{data:"this.parent.rootFolder"},setDimensions:mstrmojo.emptyFn,item2textCss:function m(u){var w={8:"folder",3:"report",12:"attribute",4:"metric",47:"consolidation",1:"custom-group",0:"no-obj"},t=mstrmojo.TreeBrowser.prototype.item2textCss(u)||w[u.t],v=this.parent&&this.parent.highlightItems;if(v&&v.indexOf(u.did)!==-1){t+=" highlight";}return t;},onnodechange:function q(t){this.constructor.prototype.onnodechange.call(this,t);this.parent.onSelectedItemsChange(t);},getTotalSelections:function(){return[];},getContentThroughTaskCall:function p(AA,x){var t=this.parent,w=AA.data||{fty:t.rootFolderType},v=AA.isRoot,u=t.folderList,y=AA.blockBegin,z=AA.blockCount;this.dataProvider.fetchFolderContents({sId:mstrApp.sessionState,browsableTypes:t.getObjectSubTypes().join(","),includeObjectDesc:true,folderLinksContextId:t.folderLinksContextId||29,blockCount:z||50},{fid:w.did,fty:w.fty,blockBegin:y||1},{success:function(AC){var AB=AC.items?AC.items.filter(function(AE){return AE.t===8||X(AE);}):[];x.success({items:AB.length?AB:[J],sz:AC.sz,bb:AC.bb,bc:AC.bc});if(v&&!u.initialized){u.set("items",AC.sc);var AD=U.find(AC.sc,"did",AC.did);if(AD!==-1){u.set("selectedIndex",AD);}}u.initialized=true;n.updateScrollbars();},failure:x.failure});}});}function d(n,o){if(n.state===2){var m=n.data;A.toggleClass(n.textNode,"highlight",m&&(o.indexOf(m.did)!==-1));}else{n.ctxtBuilder.itemWidgets.forEach(function(p){d(p,o);});}}mstrmojo.vi.ui.AllObjectsBrowser=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo.vi.ui._IsDropTarget,mstrmojo.vi.ui._IsViPanel,mstrmojo.ui._HasScroller,mstrmojo.vi.ui.toolbars._HasToolbar,mstrmojo.ui._HasUITheme],{scriptClass:"mstrmojo.vi.ui.AllObjectsBrowser",markupString:'<div id="{@id}" class="mstrmojo-VIPanel mstrmojo-VIAllObjectsBrowser {@cssClass}" style="{@cssText}"><div class="mstrmojo-VIPanel-titlebar"></div><div class="filter"></div><div class="search-box"></div><div class="horizontal-line"></div><div class="mstrmojo-VIPanel-contentContainer"><div style="overflow:hidden;"><div class="mstrmojo-VIPanel-content"></div></div></div></div>',markupSlots:{titlebarNode:function k(){return this.domNode.firstChild;},filterNode:function B(){return this.domNode.childNodes[1];},searchBox:function Q(){return this.domNode.childNodes[2];},contentNode:function l(){return this.domNode.childNodes[4].firstChild;},containerNode:function T(){return this.domNode.childNodes[4].firstChild.firstChild;}},title:mstrmojo.desc(5679,"All Objects"),model:null,rootFolder:null,rootFolderType:null,highlightItems:null,getObjectSubTypes:function(){var m=[2048,3072,1024];if(!mstrApp.isSingleTier){m.push(12032);m.push(257);m.push(2560);}return m;},layoutConfig:{h:{titlebarNode:"30px",filterNode:"30px",searchBox:"33px",containerNode:"100%"},w:{titlebarNode:"100%",searchBox:"100%",containerNode:"100%"},xt:true},opened:false,dataProvider:null,onSelectedItemsChange:mstrmojo.emptyFn,onopenedChange:function(){if(!this.searchList&&this.opened){var m=this.folderList,n=m.getSelectedItem(),o=this.rootFolder;if(n&&o&&n.did!==o.did){m.initialized=false;}this.addChildren([Y.call(this,{ondataChange:function(){if(this.data){this.getContent(this);}},ondblclick:this.dblClickOnNodes.bind(this)}),Y.call(this,{alias:"searchList",visible:false,contentRetrieved:true,ondblclick:this.dblClickOnNodes.bind(this)})]);}},reset:function(){if(this.contents){this.removeChildren(this.contents);}if(this.searchList){this.removeChildren(this.searchList);}},dblClickOnNodes:function N(n){var q=n.getTarget(),p=H.findWidget(q).data,o=this.model,m=o.getSelectedViUnit();if(m&&p&&U.indexOf(f,p.t)!==-1){this.dataProvider.loadObjects([p],{success:function(){var r=a.getCfgForAddUnitFromAllObject([p],o.datasets);if(m){m.getZonesModel().addUnitsFromDataSource([p],r.dsid,r.actions,o.getDatasetsUpdateCallback());}}},true);}},getSelectedItems:function K(){var n=this.contents,m=n.visible?n:this.searchList;return m.getSelectedItems();},getLayoutOffsets:function(){return{w:18,h:0};},children:[{scriptClass:"mstrmojo.vi.ui.CollapsibleTitleBar",cssClass:"vi-allObjects-tb",slot:"titlebarNode",alias:"titleBar",editTitleOnDoubleClick:false,getLayoutOffsets:function(){return{w:0,h:5};},onclick:function V(){this.close();},close:function(){this.parent.close();},bindings:{title:"this.parent.title"}},{scriptClass:"mstrmojo.ui.Pulldown",slot:"filterNode",alias:"folderList",initialized:false,getLayoutOffsets:function(){return{w:0,h:9};},onitemSelected:function(m){if(this.initialized){this.parent.set("rootFolder",m);this.parent.obSearchBox.clearSearch(true);}}},{scriptClass:"mstrmojo.ui.SearchBox",slot:"searchBox",alias:"obSearchBox",getLayoutOffsets:function(){return{w:0,h:13};},searchTriggered:function O(r){this.text=r;if(!r){this.clearSearch(true);return ;}var m=this.parent,p=m.contents.visible?m.contents:m.searchList,u=p.getSelectedItems(),n=m.folderList,o=this.parent.dataProvider,t=n.items[n.selectedIndex].did,q=this;u.forEach(function(v){if(v.t===8){t=v.did;return false;}});A.addClass(p.domNode,["loading"]);o.fetchFolderContents({browsableTypes:m.getObjectSubTypes().join(","),includeObjectDesc:true,folderLinksContextId:m.folderLinksContextId||29,blockCount:50,enableQuickSearch:!!(mstrApp.useQuickSearch&&mstrApp.useQuickSearch())},{fid:t,searchPattern:r,recursive:1},{success:function(v){A.removeClass(p.domNode,["loading"]);if(q.inputNode.value===r){m.contents.set("visible",false);m.searchList.set("visible",true);(m.searchList||this).set("items",v.items||[R]);m.updateScrollbars();}}});},onkeyup:function e(n){var m=n.hWin,o=n.e||m.event;if((mstrApp.useQuickSearch&&mstrApp.useQuickSearch())||((o.keyCode===13||o.keyCode===27||!this.inputNode.value))){this.constructor.prototype.onkeyup.call(this,n);}},postClearSearch:function(){var m=this.parent,o=m.contents,n=m.searchList;if(o){o.set("visible",true);}if(n){n.set("visible",false);}}}],getDropAvatarIcon:function C(m){return" ";},passToolbarCfg:function E(m){this.titleBar.set("toolbarCfg",m);},updateToolbar:function Z(m){m.hasCloseButton=true;m.closeButtonText="";return m;},onhighlightItemsChange:function W(){var m=this.highlightItems;if(m){d(this.contents,m);d(this.searchList,m);}},setupScrollNodes:function c(){this.scrollNode=this.containerNode;},updateScrollbars:function(){this._super();if(this.scrollNode&&this.hasCustomScrollbar){var n=this.scrollNode,m=H.getComputedScrollbarWidth(n);n.style.marginRight=-m+"px";n.style.paddingRight=m+"px";}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo._HasPopup","mstrmojo.Popup","mstrmojo.hash","mstrmojo.expr","mstrmojo.Container","mstrmojo.ConditionModel","mstrmojo.Widget","mstrmojo.Button","mstrmojo.ui.ColumnWalk","mstrmojo.rw.ConditionWalk","mstrmojo.mstr.EnumNodeDimty","mstrmojo.vi.ui.ConditionWalkProvider","mstrmojo.vi.ui.AllObjectsBrowser");var T=mstrmojo.Widget,M=mstrmojo.array,G=mstrmojo.dom,Q=mstrmojo.hash,a=mstrmojo.css,U=mstrmojo.Button.newWebButton,L=mstrmojo.expr,C=L.ET,A=mstrmojo.mstr.EnumNodeDimty,N=M.hash([A.NodeDimtyOutputLevel]);var O=mstrmojo.rw.ConditionWalk.getAttForms,E=mstrmojo.rw.ConditionWalk.isMdxDM;function F(){var c=this.model;if(c){if(!c.attachEventListener){Q.make(c,mstrmojo.ConditionModel,{defaultETAttr:c.defaultETAttr,data:c.data});}c.attachEventListener("edit",this.id,"onmodeledit");}}function P(d,c){if(c&&c.detachEventListener){c.detachEventListener("edit",d.id,"onmodeledit");}}mstrmojo.vi.ui.ConditionWalk=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.vi.ui.ConditionWalk",markupString:'<div id="{@id}" class="mstrmojo-vi-ui-ConditionWalk" mstrAttach:click><div class="walk"></div></div>',markupSlots:{walkNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:T.visibleMarkupMethod,onheightChange:T.heightMarkupMethod,onwidthChange:T.widthMarkupMethod},layoutConfig:{h:{walkNode:"100%"},xt:true},editor:undefined,columnWalk:undefined,walkProvider:null,objectBrowsingEnabled:false,children:[{scriptClass:"mstrmojo.ui.ColumnWalk",alias:"columnWalk",slot:"walkNode",height:"370px",width:"600px"}],postCreate:function B(){if(this._super){this._super();}if(!this.walkProvider){this.walkProvider=this.addDisposable(mstrmojo.insert(mstrmojo.vi.ui.ConditionWalkProvider));}},initWalk:function V(){var c=this.columnWalk,d=this.walkProvider;c.removeTrailingContainer(-1);c.addNextColumn(d.getTargetNodeProps());c.target.updateColumnContainer();this.updateOkBtn();},ob:{scriptClass:"mstrmojo.Popup",cssClass:"mstrmojo-vi-ui-ConditionWalk ObjectBrowserPopup mojo-theme-light",children:[{scriptClass:"mstrmojo.vi.ui.AllObjectsBrowser",alias:"browser",title:mstrmojo.desc(5298,"Select an Object"),layoutConfig:null,onSelectedItemsChange:function K(){var c=this.getSelectedItems(),d=c&&c[0],e=d&&d.t;this.parent.buttons.selectBtn.set("enabled",e&&e!==L.TP.FOLDER);},browse:function R(c){Q.copy(c,this);},getObjectSubTypes:function(){var c=this.browsableTypes;if(c){return c.split(",");}return this.constructor.prototype.browsableTypes();},dblClickOnNodes:function Z(c){var f=this.onSelectCB,e=c.getTarget(),d=G.findWidget(e).data;f[0][f[1]](d);}},{scriptClass:"mstrmojo.Box",alias:"buttons",cssClass:"buttons",children:[U(mstrmojo.desc(221,"Cancel"),function(){this.parent.parent.opener.closePopup();}),U(mstrmojo.desc(547,"Select"),function(){var e=this.parent.parent,f=e.browser,g=f.onSelectCB,d=f.getSelectedItems(),c=this.parent.parent.opener;if(d&&d.length>0){g[0][g[1]](d[0]);}else{c.closePopup();}},true,{alias:"selectBtn",enabled:false})]}],onOpen:function H(){var g=this.shadowNode,c=document.body,d=document.documentElement,f=g.style,e=this.domNode;this.browser.obSearchBox.clearSearch(true);f.width=Math.max(c.clientWidth,d.scrollWidth)+"px";f.height=Math.max(c.clientHeight,d.scrollHeight)+"px";window.setTimeout(function(){a.addClass(e,"open");},1);},onClose:function D(){a.removeClass(this.domNode,"open");var c=this.browser;c.opened=false;c.reset();}},_set_model:function Y(f,c){var d=this.model,e=(c!==d);if(e){P.call(this,d);c.dimtyTypes=this.dimtyTypes||N;this.model=c;F.call(this,c);this.initWalk();}return e;},onmodeledit:function J(d){var c=this.columnWalk[d.prop==="c1"?"c0":d.prop];if(d.prop==="fm"){c=this.columnWalk.target;}if(c){c.updateColumnContainer();}this.updateOkBtn();this.postmodeledit(d);},postmodeledit:mstrmojo.emptyFn,updateOkBtn:function b(){var f=true,c=this.model,d,e=c&&L.fnCstCount(c.fn,c.fnt);if(!c){return ;}switch(c.et){case C.AQ:case C.AL:case C.MQ:for(d=0;d<e;d++){f=f&&!this["invalid"+d];}break;}f=f&&!!c.completed;this.delegateUpdateOkBtn(f);},delegateUpdateOkBtn:mstrmojo.emptyFn,browse:function I(e){var g=this.parent.editorNode,f=function(j,l){var h=G.position(j,true),k=G.position(l,true);return{x:h.x+h.w,y:k.y};},c=this.columnWalk,d=this.walkProvider;switch(e&&e.alias){case"target":case"dmy":d.browseObjs(this,e);break;case"c0":case"c1":d.browseObjs(this,e);break;case"es":d.browseEs(this,e,f(c.es.domNode,g));break;}},onOBSelect:function(h){var k=h.t;if(k===L.TP.FOLDER||k===0||k===undefined){return ;}var e=this.ob.browser,l=e.target;this.closePopup();if(l.alias==="c0"){l=l.attMxPd;}var d=this.targets,j=l.itemIdField,g=d||[],c=M.find(d,j,h[j]);if(c===-1){g.push(h);this.targets=g;this.targetsLastMod=new Date();this.raiseEvent({name:"updateTargets",targets:this.targets});}l.list.set("selectedIndex",M.find(l.items,"did",h.did));if(l.onObjBrowsed){l.onObjBrowsed(h);}},getDatasets:mstrmojo.emptyFn,getAttributeForms:function W(e){var d=this.editor;if(d&&d.getAttributeForms){return d.getAttributeForms(e);}var c=this.getDatasets();return O(e,c);},getAttributeInfo:function X(c){var d,f=this.editor;if(f&&f.model&&f.model.targets){M.forEach(f.model.targets,function(g){if(g.did===c){d=Q.clone(g);return false;}});}else{var e=this.getDatasets();Q.forEach(e,function(g){d=Q.clone(g.att.filter(function(h){return h.did===c;})[0]);if(d){return false;}});}if(d){d.fs=this.getAttributeForms(c);}return d?d:{};},isMDXDM:function S(c){return E(c,this.getDatasets());},getIfDataSource:mstrmojo.emptyFn,onUpdateBrowseElementsParams:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout","mstrmojo.DynamicClassFactory","mstrmojo.ListBase","mstrmojo._IsList","mstrmojo.array","mstrmojo.ui.pathbar.PathStarBurst","mstrmojo.ui.pathbar.PathNavigation","mstrmojo.ui.pathbar.PathAncestors","mstrmojo.ui.pathbar.PathExtraLinks","mstrmojo.ui.pathbar.PathHamburger","mstrmojo.ui.pathbar._PreAppExit","mstrmojo.mstr.search.SearchButton","mstrmojo.mstr.ui.CreateButton"," mstrmojo.ui._HasListTooltip");mstrmojo.ui.pathbar.List=mstrmojo.DynamicClassFactory.newComponent(mstrmojo.ListBase,[mstrmojo._IsList,mstrmojo.ui.pathbar._PreAppExit,mstrmojo.ui._HasListTooltip]);mstrmojo.ui.pathbar.ScrollableList=mstrmojo.DynamicClassFactory.newComponent(mstrmojo.ui.ScrollableList,[mstrmojo.ui._HasListTooltip]);function B(){var G=false,F=mstrApp.getPersistParams().hiddensections;if(F){G=mstrmojo.array.indexOf(F.split(","),"path")>=0;}return G;}function C(G){var F;for(F in G){return false;}return true;}function A(I){var G=I&&I.items,F=G&&G.length,H;for(H=F-1;H>=0;H--){if(C(G[H])){G.splice(H,1);}H--;}}mstrmojo.ui.pathbar.PathBar=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.pathbar.PathBar",markupString:'<div id="{@id}" class="mojoPath {@cssClass}" style="{@cssText}"><div id="mojoPath-starburst" class="mojoPath-starburst"></div><div id="mojoPath-navigation" class="mojoPath-navigation"></div><div id="mojoPath-path" class="mojoPath-path"></div><div id="mojoPath-toolbar" class="mojoPath-toolbar"></div><div id="mojoPath-create" class="mojoPath-create"></div><div id="mojoPath-search" class="mojoPath-search"></div><div id="mojoPath-extraLinks" class="mojoPath-extraLinks"></div></div>',markupSlots:{starburstNode:function(){return this.domNode.firstChild;},navigationNode:function(){return this.domNode.childNodes[1];},pathNode:function(){return this.domNode.childNodes[2];},toolbarNode:function(){return this.domNode.childNodes[3];},createNode:function(){return this.domNode.childNodes[4];},searchNode:function(){return this.domNode.childNodes[5];},extraLinksNode:function(){return this.domNode.lastChild;}},layoutConfig:{h:{starburstNode:"auto",navigationNode:"auto",pathNode:"auto",toolbarNode:"auto",createNode:"auto",searchNode:"auto",extraLinksNode:"auto"},w:{starburstNode:"auto",navigationNode:"auto",pathNode:"100%",toolbarNode:"auto",createNode:"auto",searchNode:"50px",extraLinksNode:"auto"}},getLayoutOffsets:function E(){return{h:2,w:0};},init:function D(I){if(B()){this.visible=false;return ;}var L=[];this._super(I);var G=this.pathInfo,J=G.sb,F=G.nb,K=G.pt,H=G.el,M=G.tbModelData&&G.tbModelData.n;A(M);if(J&&J.length>0){L.push({scriptClass:"mstrmojo.ui.pathbar.PathStarBurst",slot:"starburstNode",items:J});}if(F&&F.length>0){L.push({scriptClass:"mstrmojo.ui.pathbar.PathNavigation",slot:"navigationNode",items:F});mstrApp.prevPageHref=F[1]&&F[1].href;}if(K&&K.length>0){L.push({scriptClass:"mstrmojo.ui.pathbar.PathAncestors",slot:"pathNode",items:K,delimiter:G.dlmt});}if(H&&H.length>0){L.push({scriptClass:"mstrmojo.ui.pathbar.PathExtraLinks",alias:"pathExtraLinks",slot:"extraLinksNode",items:H});}if(mstrmojo.resolveFeature("object-search")){L.push({scriptClass:"mstrmojo.mstr.search.SearchButton",slot:"searchNode",searchProps:mstrConfig.searchProps});}if(M&&M.items&&M.items.length>0){L.push({scriptClass:"mstrmojo.ui.pathbar.PathHamburger",slot:"toolbarNode",items:M.items});}if(this.showCreateButton){if(mstrmojo.resolveFeature("create-objects")||(mstrmojo.resolveFeature("dhtml")&&mstrmojo.resolveFeature("create-analysis"))){L.push({scriptClass:"mstrmojo.mstr.ui.CreateButton",slot:"createNode",useConfigClickHandler:false,alignMenuToRight:true});}}this.addChildren(L);}});}());(function(){mstrmojo.requiresCls("mstrmojo.expr","mstrmojo.hash","mstrmojo.fe.FilterEditor","mstrmojo.fe.AndOrNode","mstrmojo.fe.DynamicNode","mstrmojo.fe.ConditionNode","mstrmojo.ui._HasScroller","mstrmojo.vi.ui.editors.fe.RelationNode");var C=mstrmojo.hash,B=mstrmojo.expr,A=B.ET;mstrmojo.vi.ui.editors.fe.RWViewFilterExprTree=mstrmojo.declare(mstrmojo.fe.RWViewFilterExprTree,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.vi.ui.editors.fe.RWViewFilterExprTree",markupString:'<div id="{@id}"><div class="mstrmojo-ListBase2 {@cssClass}" style="position:relative;{@cssText}" mstrAttach:keyup,keypress,mousedown,mouseup,dblclick><div class="mstrmojo-ListBase2-itemsContainer" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode.firstChild;},itemsContainerNode:function(){return this.domNode.firstChild.firstChild;},dropCueNode:function(){return this.domNode.firstChild.lastChild;}},nodeClassMap:{14:mstrmojo.fe.AndOrNode,15:mstrmojo.vi.ui.editors.fe.RelationNode,ph:mstrmojo.fe.DynamicNode,"*":mstrmojo.fe.ConditionNode},levelSwitchValidTypes:[A.MQ,A.MC],setupScrollNodes:function(){this.scrollNode=this.scrollboxNode;},getItemConfig:function(F,D,G){var E=this._super(F,D,G);return C.copy({getConditionTextPostfix:function(){return"";}},E);}});}());(function(){mstrmojo.requiresCls("mstrmojo.expr","mstrmojo.hash","mstrmojo.fe.FilterEditor","mstrmojo.ui._HasScroller");var C=mstrmojo.hash,B=mstrmojo.expr,A=B.ET;mstrmojo.vi.ui.editors.fe.RWViewLimitExprTree=mstrmojo.declare(mstrmojo.fe.RWViewLimitExprTree,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.vi.ui.editors.fe.RWViewLimitExprTree",markupString:'<div id="{@id}"><div class="mstrmojo-ListBase2 {@cssClass}" style="position:relative;{@cssText}" mstrAttach:keyup,keypress,mousedown,mouseup,dblclick><div class="mstrmojo-ListBase2-itemsContainer" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode.firstChild;},itemsContainerNode:function(){return this.domNode.firstChild.firstChild;},dropCueNode:function(){return this.domNode.firstChild.lastChild;}},levelSwitchValidTypes:[A.MQ,A.MC],getItemConfig:function(F,D,G){var E=this._super(F,D,G);return C.copy({getConditionTextPostfix:function(){return"";}},E);},setupScrollNodes:function(){this.scrollNode=this.scrollboxNode;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.func","mstrmojo.hash","mstrmojo.css","mstrmojo.Container","mstrmojo.Image","mstrmojo.ObjectBrowser","mstrmojo._HasLayout","mstrmojo._FillsBrowser","mstrmojo.ui.List","mstrmojo.ui._HasScroller","mstrmojo.ui.pathbar.PathBar","mstrmojo.home.ui.Card","mstrmojo.home.EnumHomeCards","mstrmojo.home.ui.CustomCard","mstrmojo.home.ui.HtmlBox","mstrmojo.home.ui.RecentsCard","mstrmojo.string");mstrmojo.requiresDescs(2,3,531,3272,3678);var K=mstrmojo.home.EnumHomeCards,D=K.types,F=K.items;function A(P){var O=this;return{scriptClass:"mstrmojo.ObjectBrowser",alias:"ob",fishEyeVisible:false,upButtonVisible:true,searchVisible:false,quickSearch:true,minSearchLength:1,closeable:false,closeOnSelect:false,scrollableIncFetch:true,showCompletePath:false,includeObjectDesc:true,browsableTypes:P.browsableTypes||"",rootFolderID:P.rootFolderID,rootFolderType:P.rootFolderType||7,folderLinksContextId:P.folderLinksContextId,postCreate:function(){if(this.visible&&!this.loaded){this.browse({onSelectCB:[this,"handleObject"]});this.loaded=true;}},handleObject:function(Q){O.controller.execute(Q);}};}function L(Q,P){var O=Q.scrollTop;(new mstrmojo.fx.AnimateProp({target:Q,props:{scrollTop:{isStyle:false,start:O,stop:O+(P.offsetTop-O),ease:mstrmojo.ease.sin}},duration:500})).play();}mstrmojo.home.views.HomeView=mstrmojo.declare(mstrmojo.Container,[mstrmojo._FillsBrowser,mstrmojo._HasLayout,mstrmojo._HasPopup,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.home.views.HomeView",markupString:'<div id="{@id}" class="mstrmojo-HomeView {@cssClass}" style="{@cssText}" mstrAttach:contextmenu,click><div></div><div class="mstrmojo-RootView-pathbar"></div><div class="mstrmojo-HomeView-content"><div class="mstrmojo-HomeView-scrollNode"><div class="cards-container-outer"><div class="cards-container"></div></div></div></div><div></div></div>',markupSlots:{topCtrlNode:function(){return this.domNode.firstChild;},pathbarNode:function(){return this.domNode.childNodes[1];},contentNode:function(){return this.domNode.childNodes[2];},scrollNode:function(){return this.domNode.childNodes[2].firstChild;},containerNode:function(){return this.domNode.childNodes[2].firstChild.firstChild.firstChild;},bottomCtrlNode:function(){return this.domNode.lastChild;}},markupMethods:{onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod},layoutConfig:{h:{topCtrlNode:"auto",pathbarNode:"42px",scrollNode:"100%",bottomCtrlNode:"auto"},w:{topCtrlNode:"100%",pathbarNode:"100%",scrollNode:"100%",bottomCtrlNode:"100%"},xt:true},model:null,init:function M(O){this._super(O);this.addPathBar();if(mstrmojo.dom.isIE7||mstrmojo.dom.isIE8){this.addChildren([{scriptClass:"mstrmojo.Label",cssClass:"no-support",text:mstrmojo.desc(14546,"This page is not supported in your browser.")+"\n\n"+mstrmojo.desc(14547,'Please go to "Preferences > General" to change the "Default start page"')}]);}else{this.addCard({t:D.ADD});this.renderCards();}},postBuildRendering:function(){var O=this._super();var P=this;window.setTimeout(function(){P.updateScrollbars();},300);P.pathbar.pathExtraLinks.attachEventListener("loadDefaultCard",this.id,function(){this.model.loadDefaultCard();});P.pathbar.pathExtraLinks.attachEventListener("saveDefaultCard",this.id,function(){this.model.saveDefaultCard();});return O;},setupScrollNodes:function E(){this.scrollbarHostNode=this.contentNode;},updateScrollbars:function G(){this._super();},renderCards:function N(){mstrmojo.array.forEach(this.model.cards,function(O){this.addCard(O,false);},this);},addCard:function C(W,U){var V=this,R=V.controller;var Q={},P;switch(W.t){case D.ADD:var S=mstrmojo.Button.newWebButton(mstrmojo.desc(531,"Add"),function(){var Y=mstrmojo.hash.copy({hostId:V.id,hostElement:this.domNode,isHostedWithin:true},R.getAddMenuCfg());var X=Y.ENUM_CORNERS;Y.setAlignment(X.TOP_LEFT,X.TOP_LEFT);V.openPopup(Y.newInstance());},false,{cssClass:"mstrmojo-Card-add",ignoreLayout:true,cssDisplay:"inline-block",text:"\u002B",alias:"addBtn",isAddBtn:true});this.addChildren([S]);return ;case D.IMAGE:Q={cssClass:"col-2 imgCard",title:W.title,contentWidget:[{scriptClass:"mstrmojo.Image",alias:"splash",src:W.splashURL,onclick:function(){if(!mstrmojo.string.isEmpty(W.objectURL)){window.open(W.objectURL);}}}],getEditorConfig:function(Z,X){var Y=this;X.addPopupMenuItem(mstrmojo.desc(3272,"Edit"),this.id,function(){return R.getDashboardSettingEditorConfig({objectURL:Z.objectURL,splashURL:Z.splashURL},function(b,a){Y.cardDef.objectURL=b.objectURL;Y.cardDef.splashURL=b.splashURL;Y.splash.set("src",Y.cardDef.splashURL);Y.parent.model.updateCard(Y.cardDef);});});X.addPopupMenuItem(mstrmojo.desc(3297,"Title"),this.id,function(){return R.getDashboardSettingTitleConfig({title:Y.title},function a(c,b){Y.set("title",c.title);});});}};break;case D.MY:Q={cssClass:"my col-1",title:mstrmojo.desc(3,"My Reports"),contentWidget:[A.call(this,{rootFolderType:20,folderLinksContextId:35})],onClickTitleBar:function(){R.executeEvent(3003);}};break;case D.SHARED:Q={cssClass:"shared col-1",title:mstrmojo.desc(2,"Shared Reports"),contentWidget:[A.call(this,{rootFolderType:7,folderLinksContextId:34})],onClickTitleBar:function(){R.executeEvent(3002);}};break;case D.FOLDER:Q={cssClass:"my folder col-1",title:W.n,contentWidget:[A.call(this,{rootFolderID:W.did})],onClickTitleBar:function(){R.executeEvent(2001,{folderID:W.did});}};break;case D.RECENT:P={scriptClass:"mstrmojo.home.ui.RecentsCard",cssClass:"recent col-4",model:V.model,ignoreLayout:true,cardDef:W};break;case D.HTML:Q={cssClass:W.cssClass||"html-container",title:W.title,col:W.col,contentWidget:[{scriptClass:"mstrmojo.home.ui.HtmlBox",alias:"htmlbox",cssText:"height:100%; width:100%"}]};P=mstrmojo.hash.copy(Q,{scriptClass:"mstrmojo.home.ui.CustomCard",title:Q.title,children:Q.contentWidget,ignoreLayout:true,cardDef:W});break;}if(!P){P=mstrmojo.hash.copy(Q,{scriptClass:"mstrmojo.home.ui.Card",title:Q.title,children:Q.contentWidget,ignoreLayout:true,cardDef:W});}var O=this.addChildren([P],this.children.length-1);if(U!==false){this.model.addCard(W);}this.updateAddBtnVisibility();this.updateScrollbars();if(U!==false){var T=O[0];L(this.scrollNode,T.domNode);}},removeCard:function B(O){this.removeAndDestroyChild(O);this.model.removeCard(O.cardDef);this.updateAddBtnVisibility();},updateAddBtnVisibility:function J(){this.addBtn.set("visible",this.model.cards.length===0);},addPathBar:function I(){var P=mstrApp.pathInfo;if(P){var O=new mstrmojo.ui.pathbar.PathBar({alias:"pathbar",slot:"pathbarNode",pathInfo:P,showCreateButton:true});O.addChildren(this.getPathToolbarChildren());this.addChildren([O]);}},getPathToolbarChildren:function H(){return[];}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.Editor","mstrmojo.Label","mstrmojo.Button","mstrmojo.mstr.EnumNodeDimty","mstrmojo.vi.ui.ConditionWalk","mstrmojo.fe.FilterUtils","mstrmojo.expr");mstrmojo.requiresDescs(15540);var I=mstrmojo.array,M=mstrmojo.hash,R=mstrmojo.Button.newWebButton,G=mstrmojo.mstr.EnumNodeDimty,P=I.hash([G.NodeDimtyUnspecified,G.NodeDimtyNone]),B=mstrmojo.fe.FilterUtils,J=mstrmojo.expr,Q=J.ET;mstrmojo.vi.ui.ConditionEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.vi.ui.ConditionEditor",cssClass:"mstrmojo-vi-ui-ConditionEditor",help:"Creating_a_Metric_Qualification.htm",title:mstrmojo.desc(15540,"Edit Qualification"),objectBrowsingEnabled:false,targets:null,targetsLastMod:null,ets:null,condition:null,model:null,hasPrompt:false,disableElementsBrowsing:null,inRelation:null,editor:null,children:[{scriptClass:"mstrmojo.Box",markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" style="{@cssText}"></div>',cssDisplay:"inline-block",cssClass:"conditionBar",model:null,alias:"conditionBar",bindings:{model:"this.parent.model"},update:function(){var E=this.model,T=B.getExprNodeHtmlAndText(E.data?E.data:E,{emptyText:mstrmojo.desc(15413,"Qualification Details"),elemsEmpty:" "});if(this.containerNode){this.containerNode.innerHTML=T.html;this.containerNode.title=T.text;}}},{scriptClass:"mstrmojo.vi.ui.ConditionWalk",alias:"walk",dimtyTypes:P,delegateUpdateOkBtn:function D(U){var E=this.parent,V=E&&E.btnHbox,T=V&&V.okBtn;if(T){T.set("enabled",!!U);}},onOK:function O(){var T=this.condition,E=this.editor;E.onConditionEdit(T,this.model.get());},close:function L(){var E=this.condition;if(E&&E.isEmpty()){E.del();}},postmodeledit:function H(E){this.parent.updateConditionBar();},getIfDataSource:function S(){return this.parent.getIfDataSource();},onUpdateBrowseElementsParams:function N(E){this.parent.onUpdateBrowseElementsParams(E);},getDatasets:function F(){return this.parent.getDatasets();}}],buttons:[R(mstrmojo.desc(1442,"OK"),function(){var E=this.parent.parent;E.walk.onOK();E.close();},true,{enabled:true,alias:"okBtn"}),R(mstrmojo.desc(221,"Cancel"),function(){var E=this.parent.parent;E.close();})],updateConditionBar:function A(){this.conditionBar.update();},open:function K(U,E){this._super(U,E);var T={objectBrowsingEnabled:this.objectBrowsingEnabled,targets:this.targets,targetsLastMod:this.targetsLastMod,ets:this.ets,condition:this.condition,hasPrompt:this.hasPrompt,disableElementsBrowsing:this.disableElementsBrowsing,disableHierarchyLevel:this.disableHierarchyLevel,inRelation:this.inRelation,editor:this.editor};M.copy(T,this.walk);if(!(this.disableElementsBrowsing&&this.disableElementsBrowsing())){this.model.defaultETAttr=Q.AE;}this.walk.set("model",this.model);this.updateConditionBar();},onClose:function C(){this.walk.close();},getDatasets:mstrmojo.emptyFn,getIfDataSource:mstrmojo.emptyFn,onUpdateBrowseElementsParams:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.dom","mstrmojo.hash","mstrmojo.expr","mstrmojo.Box","mstrmojo.Button","mstrmojo.Editor","mstrmojo.Dial","mstrmojo.Label","mstrmojo.fe.CreateSetEditor","mstrmojo.fe.FilterEditor","mstrmojo.vi.ui.editors.fe.RWViewLimitExprTree","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.vi.ui.ConditionWalk","mstrmojo.vi.ui.ConditionEditor","mstrmojo.vi.ui.editors.fe.ConditionWalk","mstrmojo.vi.ui.editors.fe.RWViewFilterExprTree","mstrmojo.warehouse.EnumObjectTypes");mstrmojo.requiresDescs(118,2397,5758,14915,15540,15005,15014,15091);var a=mstrmojo.hash,V=mstrmojo.array,e=mstrmojo.css,L=mstrmojo.dom,Y=mstrmojo.expr,g=mstrmojo.mstr.EnumDSSXMLObjectTypes,S={TEMPLATE:0,DATASET:1},O=Y.ET,X=Y.BRANCH_FNS,B=mstrmojo.warehouse.EnumObjectTypes,K=mstrmojo.mstr.EnumNodeProperties,I="VFEmpty";var G=10,T=46,H=116,P=286,R=369,F=42;DL_LABEL_HEIGHT=26;function f(j){var h={et:j.defaultExpressionType};if(j.disableElementsBrowsing&&j.disableElementsBrowsing()){h={et:O.AQ};}j.mainExpr.newCondition(h,true);}function N(h){var j=G;if(h<G){j=G;}else{if(h<=T){j=T;}else{j=H;}}return j;}function A(n,y){var u=n&&n.domNode,r=y&&y.domNode,j=u&&u.style,t=r&&r.style;var l=n.parent.domNode.offsetHeight;if(!y){j.height=l+"px";if(n.updateScrollbars){n.updateScrollbars();}return ;}if(u&&r){var q=R-P;if(!n.editor.showLimits){q-=F+DL_LABEL_HEIGHT;}var h=l-q;var k=L.position(n.itemsContainerNode),o=L.position(y.itemsContainerNode),w=k.h,x=o.h;var m=N(x),v=h-m;var p=Math.min(G+w,v);j.height=p+"px";t.height=h-p+"px";if(n.updateScrollbars){n.updateScrollbars();}if(y.updateScrollbars){y.updateScrollbars();}}}function D(j){var k=a.clone(j);if(j&&j.et===O.ANDOR&&(j.node&K.CONDITION)){var l=a.valarray(Y.findTargets(j,"did"))[0],h={et:O.ANDOR,data:k};switch(l&&l.t){case g.Attribute:h.a=l;break;case g.Metric:h.m=l;break;}return h;}return k;}mstrmojo.vi.ui.editors.FilterEditor=mstrmojo.declare(mstrmojo.fe.FilterEditor,null,{scriptClass:"mstrmojo.vi.ui.editors.FilterEditor",titleMarkupString:'<div class="mstrmojo-Editor-title-container"><div class="mstrmojo-Editor-title"></div><div class="edt-title-btn mstrmojo-Editor-help" tooltip="'+mstrmojo.desc(1143,"help")+'"></div><div class="edt-title-btn mstrmojo-Editor-close" tooltip="'+mstrmojo.desc(2102,"Close")+'"></div></div><div class="mstrmojo-Editor-subtitle-container"></div><div class="mstrmojo-Editor-titleSpacer"></div>',markupSlots:a.copy({subTitleNode:function W(){return this.showTitle?this.domNode.firstChild.children[1]:null;},containerNode:function c(){return this.domNode.firstChild.childNodes[3];},buttonNode:function J(){return this.domNode.firstChild.childNodes[4];},curtainNode:function E(){return this.domNode.lastChild;}},a.copy(mstrmojo.fe.FilterEditor.prototype.markupSlots)),help:"view_filter_editor_for_dossiers.htm",cssClass:"mstrmojo-charcoalboxe mstrmojo-FE mstrmojo-vi-ui-FE",postCreate:function C(){this.children=mstrmojo.hash.clone(this.children).concat([{scriptClass:"mstrmojo.Box",slot:"subTitleNode",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(14915,"New Qualification"),cssDisplay:"inline-block",cssClass:"mstrmojo-relation-relateby-text",bindings:{text:function(){return this.editor.isNewCond?mstrmojo.desc(14915,"New Qualification"):mstrmojo.desc(15540,"Edit Qualification");},editor:"this.parent.parent",visible:function(){return !!this.editor.showCondWalk;}}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton",alias:"newQualificationBtn",cssText:"float: left",cssDisplay:"inline-block",text:mstrmojo.desc(15005,"Add New Qualification"),onclick:function(){f(this.editor);},bindings:{enabled:function(){return !this.editor.readOnly;},visible:function(){return !this.editor.showCondWalk;},editor:"this.parent.parent"}}]}]);if(this._super){this._super();}},editorTitle:mstrmojo.desc(5758,"Filter Editor"),defaultExpressionType:O.AE,onvizTitleChange:function(){this.set("title",this.editorTitle+" - "+this.vizTitle);},getExpressionContainerCfg:function(){var h=this._super();h.cssDisplay="flex";return h;},onOpen:function M(){var h=this.mainExpr,j=this.limitExpr;if(h){A(h,j);}if(!this.model.expr){f(this);}},getExpressionContentsConfig:function(){return[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(15091,"Metric values are not aggregated."),cssClass:"mstrmojo-FE-expr-header dl",bindings:{visible:"this.parent.parent.parent.showLimits"}},{alias:"ve",scriptClass:"mstrmojo.vi.ui.editors.fe.RWViewFilterExprTree",level:S.DATASET,bindings:{items:"this.editor.model.exprForest || []"},onBlankClick:function(n){this.parent.clearSelect(n);},supportRelation:true,postApplyProperties:function(){this.editor=this.parent.parent.parent;this.editor.set("mainExpr",this);},onNew:function(o){o.data.isNew=true;if(!o.data.ph){this.editor.openWalk(o.data,o.widget.ctxtBuilder.itemWidgets[o.index],"condition");}var n=this.parent.vle;A(this,n);},onadd:function h(){e.toggleClass(this.parent.domNode,I,this.items.length===0);var n=this.parent.vle;A(this,n);},onremove:function k(){e.toggleClass(this.parent.domNode,I,this.items.length===0);var n=this.parent.vle;A(this,n);},onnodeadd:function j(){var n=this.tree.parent.vle;A(this.tree,n);},onnoderemove:function m(){var n=this.tree.parent.vle;A(this.tree,n);},onitemsChange:function l(n){var p=this.items.length===0,o=this.parent;if(this.hasRendered){e.toggleClass(o.domNode,I,p);}else{if(p){e.addWidgetCssClass(o,I);}else{e.removeWidgetCssClass(o,I);}}}},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(15014,"Metric values are aggregated based on the attributes in the visualization."),cssClass:"mstrmojo-FE-expr-header tl",bindings:{visible:"this.parent.parent.parent.showLimits"}},{alias:"vle",scriptClass:"mstrmojo.vi.ui.editors.fe.RWViewLimitExprTree",level:S.TEMPLATE,validExprTypes:V.hash([O.MQ,O.MC]),bindings:{visible:"this.editor.showLimits",items:"this.editor.model.limitExprForest || []"},onBlankClick:function(n){this.parent.clearSelect(n);},postApplyProperties:function(){this.editor=this.parent.parent.parent;this.editor.set("limitExpr",this);},onnodeadd:function j(){var n=this.tree.parent.ve;A(n,this.tree);},onnoderemove:function m(){var n=this.tree.parent.ve;A(n,this.tree);},onadd:function h(){var n=this.parent.ve;A(n,this);},onremove:function k(){var n=this.parent.ve;A(n,this);}}];},getConditionWalkConfig:function b(){return undefined;},toggleOkButtonStatus:function U(h){var j=this.buttonBar.children[0].btnSave;j.set("enabled",!!h);},andOrPopupRef:{scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-FE-andOrPopup mstrmojo-ConditionWalk",contentNodeCssClass:"mstrmojo-balloon",slot:"containerNode",modal:false,autoClose:true,showTitle:false,draggable:false,openEffect:null,closeEffect:null,onOpen:function(){var h=this.condition,l=h&&h.data&&h.data.not,m=h&&h.parent,j=m&&m.data,k=(j&&j.fn)+(l?21:0);this.list.opening=true;this.list.set("selectedItem",isNaN(k)?null:{did:k});this.list.opening=false;},children:[{scriptClass:"mstrmojo.Dial",cssClass:"mstrmojo-CGE-andOrDial",alias:"list",animate:false,itemMarkup:'<div class="dial-item {@css}">{@n}</div>',itemIdField:"did",renderOnScroll:false,items:[{did:19,n:X[19]},{did:20,n:X[20]},{did:19+21,n:X["19_21"]},{did:20+21,n:X["20_21"]}],onchange:function(){if(this.opening){return ;}var j=this.parent,h=j.condition,o=this.selectedItem,n=o&&o.did,m=n>21?true:null,l=n-(m?21:0);j.close();var k=h&&h.parent;if(k&&k.data&&k.data.et===O.ANDOR){k.edit(h,l,m);}else{var p=h&&h.data;if(p&&(p.not!==m)){p.not=m;h.paint();}}}}]},createSetPopupRef:{scriptClass:"mstrmojo.fe.CreateSetEditor",contentNodeCssClass:"",cssClass:"VI-CreateSet-Editor",slot:"containerNode",autoClose:true,showTitle:false,isHostedWithin:false},conditionEditorPopupRef:{scriptClass:"mstrmojo.vi.ui.ConditionEditor",isHostedWithin:false,getIfDataSource:function d(){return this.editor.getIfDataSource();},getDatasets:function Q(){return this.editor.getDatasets();},onUpdateBrowseElementsParams:function Z(h){this.editor.onUpdateBrowseElementsParams(h);}},docModel:null,targetMetrics:null,_set_model:function(l,j){var k=this._super(l,j);if(k){var h=this.model.targets;this.targetMetrics=V.filter(h,function(m){m.title=m.n||"";return m.t===g.Metric;});}return k;},openWalk:function(m,o,t,u){var q=this,j=L.delta(o.domNode,q.containerNode);j.y+=(t==="andor"?16:parseInt(o.domNode.offsetHeight,10));var r={condition:o,zIndex:q.zIndex+10,left:j.x+"px",top:j.y+"px"},h;switch(t){case"andor":if(q.skipAndOrPopup){return ;}h="andOrPopupRef";break;case"createSet":case"createSetOpt":if(mstrApp&&mstrApp.isWSStyling&&u&&u.e&&u.e.target){var k=u&&u.e&&u.e.target,l=L.delta(k,q.containerNode);r.left=l.x+"px";r.top=l.y+parseInt(k.offsetHeight,10)+"px";}var p=q.model.targets;h="createSetPopupRef";r.type=t;r.model={attrs:V.filter(p,function(n){return n.t===B.ATTRIBUTE;}),metrics:V.filter(p,function(n){return n.t===B.METRIC;})};if(t==="createSetOpt"){r.condition=o.parent;r.model.childIdx=o.childIndex();}break;case"condition":var v=L.position(this.titleNode);r=a.copy({editor:q,objectBrowsingEnabled:q.objectBrowsingEnabled,showLimits:q.showLimits,targets:q.model.targets,targetsLastMod:q.modelLastSet,ets:o.tree.validExprTypes||q.validExprTypes,condition:o,hasPrompt:q.model.hasPrompt,disableElementsBrowsing:q.disableElementsBrowsing,inRelation:o.inRelation,model:D(m),left:v.x+50+"px",top:v.y+20+"px",draggable:!q.conditionEditorNotDraggable},r);if(!!m.isNew){r.title=mstrmojo.desc(14915,"New Qualification");}else{r.title=mstrmojo.desc(15540,"Edit Qualification");}h="conditionEditorPopupRef";}q.openPopup(h,r);},getIfDataSource:function d(){if(this.docModel){return this.docModel.getDataService();}return null;},onUpdateBrowseElementsParams:mstrmojo.emptyFn,getDatasets:function Q(){if(this.docModel){return this.docModel.datasets;}return null;},conditionEditorNotDraggable:false});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.mstr.EnumDSSXMLObjectSubTypes","mstrmojo.vi.ui.editors.FilterEditor");mstrmojo.requiresDescs(5758,16037);var C=mstrmojo.array,A=mstrmojo.hash,B=mstrmojo.mstr.EnumDSSXMLObjectTypes,E=mstrmojo.mstr.EnumDSSXMLObjectSubTypes;mstrmojo.ME._HasConditionMetricFilterEditor=mstrmojo.provide("mstrmojo.ME._HasConditionMetricFilterEditor",{openConditionMetricFilterEditor:function D(G){var J="cmfe",K,H={},I=G.filter;function F(){C.forEach(G.att,function(N){if(N.t!==B.Attribute||N.da){return ;}var M=N.did,O=N.path;H[M]={did:M,n:N.n,t:N.t,st:N.st,fs:N.fs,da:N.da||false,datasetId:N.datasetId,ttp:N.n+(O?" - "+O:""),dsName:O};});C.forEach(G.mx,function(N){var M=N.did,O=N.path;H[M]={did:M,n:N.n,t:N.t,st:N.st||E.Metric,um:N.um,datasetId:N.datasetId,ttp:N.n+(O?" - "+O:""),dsName:O};});var L={expr:A.clone(I),targets:A.valarray(H)};K=J&&window.mstrmojo&&mstrmojo.all[J];if(!K){K=mstrmojo.insert({id:J,scriptClass:"mstrmojo.vi.ui.editors.FilterEditor",showLimits:false,docModel:G.docModel,title:mstrmojo.desc(11579,"Metric Editor")+" - "+mstrmojo.desc(16037,"Add Filter")});}if(G.zIndex){K.set("zIndex",G.zIndex);}K.set("model",L);K.targetMap=H;K.onSave=G.fnOk;K.onCancel=G.onCancel;K.onUpdateBrowseElementsParams=G.browseParam;K.open();}F();}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.dom","mstrmojo.hash","mstrmojo.expr","mstrmojo.Table","mstrmojo.CheckBox","mstrmojo.UUID","mstrmojo.ME.LevelInputBox","mstrmojo.ME.ConditionInputBox","mstrmojo.ME.TransformInputBox","mstrmojo.ME.MetricDataService","mstrmojo.Button","mstrmojo.Box","mstrmojo.Editor","mstrmojo.ME._MetricEditorHelper","mstrmojo.mstr.EnumFunction","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.mstr.EnumDSSXMLObjectSubTypes","mstrmojo.vi.ui.editors.FilterEditor","mstrmojo.vi.enums.EnumFeatures","mstrmojo.fe.FilterUtils","mstrmojo.ME._HasConditionMetricFilterEditor","mstrmojo.ME.DerivedMetricOptions");mstrmojo.requiresDescs(1107,1281,2148,2397,2399,2827,3324,3377,4788,6223,9577,9579,9581,9582,9583,9584,11564,11565,12178,12179,12853,15004,15646);var T=mstrmojo.expr,I=mstrmojo.array,W=mstrmojo.css,d=mstrmojo.dom,R=mstrmojo.hash,G=mstrmojo.UUID,h=mstrmojo.mstr.EnumDSSXMLObjectTypes,Z=mstrmojo.mstr.EnumDSSXMLObjectSubTypes,V=mstrmojo.ME._MetricEditorHelper,B=mstrmojo.ME.MetricToken.brackets,P=mstrmojo.vi.enums.EnumFeatures,e=mstrmojo.desc(15004,"Filter Applied"),A=mstrmojo.desc(15347,"Add Filter..."),f=mstrmojo.fe.FilterUtils.getExprXml,J=mstrmojo.ME.DerivedMetricOptions.isNonAFB;var Q,O;var F=function(){var E=this.isDME?mstrmojo.desc(12178,"Visualization level"):mstrmojo.desc(1107,"Report Level");return mstrmojo.hash.copy({n:E,did:-1,t:-1,state:0});};var j={level:-4,condition:-5,transformation:-6,simple:-7},a=function(E){return E===-4||E===-5||E===-6||E===-7;};var g={n:"",did:"-1",desc:""},D={1:"+",2:"*",3:"%",4:""},H={1:"",2:"!",3:"<",4:">",5:"<|",6:">|"};mstrmojo.ME._HasLevel=mstrmojo.provide("mstrmojo.ME._HasLevel",R.copy(mstrmojo.ME._HasConditionMetricFilterEditor,{_mixinName:"mstrmojo.ME._HasLevel",isAggFunction:false,init:function c(E){if(this._super){this._super(E);}Q=this.id;O=this;},onOpen:function N(){if(this._super){this._super();}if(!this.isAggFunction){return ;}O=this;var p=this.getLCTDefFromTokens();this.updateToggleBarStatus(p);var t=this.metricLCT.levelInput;t.set("candidates",this.getCandidates4LCT([T.TP.ATTR,T.STP.NDE]));t.set("items",p.level);var u=this.metricLCT.conditionInput;if(!this.isDME){if(!this.noCache&&!u.candidates){mstrmojo.ME.MetricDataService.getFilters({pattern:"*",blockBegin:1,blockCount:-1},{success:function(v){if(v){u.set("candidates",{items:v.items,isComplete:(v.bc===-1||(v.bb+v.bc>v.sz))});}},failure:function(v){mstrmojo.alert(v.getResponseHeader("X-MSTR-TaskFailureMsg"));}});}else{u.candidates=this.getCandidates4LCT([T.TP.FILTER,T.STP.PROMPT_OBJECTS]);this.metricLCT.lblCondition.set("visible",p.filter.length>0);}u.set("items",p.filter);}var E=this.metricLCT.transformInput;if(!this.noCache&&!E.candidates&&!this.isDME){mstrmojo.ME.MetricDataService.getTransformations({pattern:"*",blockBegin:1,blockCount:-1},{success:function(v){if(v){E.set("candidates",{items:v.items,isComplete:(v.bc===-1||(v.bb+v.bc>v.sz))});}},failure:function(v){mstrmojo.alert(v.getResponseHeader("X-MSTR-TaskFailureMsg"));}});}else{E.candidates=this.getCandidates4LCT(T.TP.ROLE);this.metricLCT.lblTransform.set("visible",p.tranformation.length>0);}E.set("items",p.tranformation);var o=this.metricLCT.addFilterBox,m=o.btnAddFilter,q=o.btnClearFilter,l=this.oi&&this.oi.conditions&&this.oi.conditions[0],n=l&&l.exp,r=p.filter&&p.filter[0],k={did:r&&r.did,n:r&&r.n,exp:n,isEmbedded:!!(n||(!r))};m.set("filter",k);q.set("filter",k);},hasConditionFilter:function U(){var k=this.metricLCT.addFilterBox,E=k.btnAddFilter;return !!(E.filter&&E.filter.did);},clearConditionFilter:function b(){var l=this,m=l.metricLCT.addFilterBox,k=m.btnAddFilter,E=m.btnClearFilter;k.set("filter",{isEmbedded:true});E.set("filter",{isEmbedded:true});l.onmetricModify();},onMpsChange:function M(){var l=this,m=l.metricLCT.addFilterBox,k=m.btnAddFilter,E=m.btnClearFilter;k.refresh();E.refresh();},useEmbeddedFilter:function C(){return this.isDME&&!this.ide.disableConditionMetric;},getLCTDefAsTokens:function S(){if(!this.isAggFunction){return[];}var u=this.metricLCT.levelInput.getSelectedObjects(),n=this.useEmbeddedFilter()?this.metricLCT.addFilterBox.btnAddFilter.getFilterObj():this.metricLCT.conditionInput.getSelectedObjects(),l=this.metricLCT.transformInput.getSelectedObjects(),q=[],k,m,o,E=function(w,v){return w.filtering===1?"("+v+")":v;};q.push({v:"{",isDelimiter:true});var r=null;for(m=0,o=u.length;m<o;m++){r=u[m];q.push({v:H[r.grouping],isDelimiter:true});if(V.isDimty(r.n)){q.push({v:E(r,r.n)});}else{if(/^@/.test(r.did)){q.push({v:E(r,r.did)});}else{if(r.did===-1){q.push({v:"~",isDelimiter:true});}else{q.push({v:B(r.n),oi:r});}}}q.push({v:D[r.filtering],isDelimiter:true});if(m<(o-1)){q.push({v:", ",isDelimiter:true});}}if(!this.levelFilterRest){q.push({v:";",isDelimiter:true});q.push({v:"-",isDelimiter:true});}if(!this.levelCanContinue){q.push({v:";",isDelimiter:true});q.push({v:"/",isDelimiter:true});}q.push({v:"}",isDelimiter:true});if(n.length>0){q.push({v:"<",isDelimiter:true});k={v:B(n[0].n)};if(n[0].did){k.oi=n[0];}q.push(k);q.push({v:";",isDelimiter:true});q.push({v:"@",isDelimiter:true});q.push({v:this.conditionEmbedMethod});q.push({v:";",isDelimiter:true});q.push({v:this.conditionIgnoreFilterElem?"-":"+",isDelimiter:true});q.push({v:">",isDelimiter:true});}var t=I.indexOf(l,g);o=t<0?l.length:t;if(o>0){q.push({v:"|",isDelimiter:true});var p=null;for(m=0;m<o;m++){p=l[m];k={v:B(p.n)};if(p.did){k.oi=p;}q.push(k);if(m<(o-1)){q.push({v:", ",isDelimiter:true});}}q.push({v:"|",isDelimiter:true});}for(m=0,o=q.length;m<o;m++){q[m].isNew=true;}return q;},getLCTDefFromTokens:function X(){var k=[],m=false,r=[],p=[],u=this.oi.tks.items,t=u.length,q;if(this.insertMode||t===0){k.push(F.call(this));}else{for(q=0;q<t;q++){var n=u[q],v=n.tp,l=n.sctt;switch(l){case 262144:m=true;switch(v){case 64:case 126:case 264:case 265:case 310:var o=q,w;if(v===64){var E=n.v+u[++q].v;n=u[q+1];if(n.tp===43||n.tp===45){E+=u[++q].v;E+=u[++q].v;}else{if(n.tp===41){q++;}}w=mstrmojo.ME.Enum.DYNAMIC_DIMTY.getDimtyObject(E,this.isDME);}else{w=v===126?F.call(this):n.oi;}w.grouping=1;w.filtering=4;switch(u[o-1].tp){case 33:w.grouping=2;break;case 60:w.grouping=3;break;case 62:w.grouping=4;break;case 297:w.grouping=5;break;case 298:w.grouping=6;break;}switch(u[q+1].tp){case 37:w.filtering=3;break;case 42:w.filtering=2;break;case 43:w.filtering=1;break;}k.push(w);break;case 45:this.levelFilterRest=false;break;case 47:this.levelCanContinue=false;break;}break;case 327680:switch(v){case 270:case 273:r.push(n.oi);break;case 262:this.conditionEmbedMethod=n.v;break;case 43:this.conditionIgnoreFilterElem=false;break;case 45:this.conditionIgnoreFilterElem=true;break;}break;case 393216:switch(v){case 271:p.push(n.oi);break;}break;}}if(k.length===0&&!m){k.push(F.call(this));}}return{level:k,filter:r,tranformation:p};},levelCanContinue:true,levelFilterRest:true,conditionEmbedMethod:"2",conditionIgnoreFilterElem:true,_set_candidates:function(o,k){this.candidates=k;if(this.hasRendered){var E=this.metricLCT.levelInput,l=this.metricLCT.conditionInput,m=this.metricLCT.transformInput;E.candidates=this.getCandidates4LCT([T.TP.ATTR,T.STP.NDE]);l.candidates=this.getCandidates4LCT([T.TP.FILTER]);m.candidates=this.getCandidates4LCT([T.TP.ROLE]);}return true;},getCandidates4LCT:function L(m,E){var l=this.candidates,k;if(l){m=I.ensureArray(m);k=I.filter(l.items,function(n){return I.indexOf(m,n.t)>-1||I.indexOf(m,n.st)>-1;});if(I.indexOf(m,12)>-1&&E){if(this.replaceAttributeWithForms){k=this.replaceAttributeWithForms(k);}}return{items:k,isComplete:l.isComplete};}return null;},updateToggleBarStatus:function K(E){var k=false;if(E.level){k=E.level.length>1||E.level.length===1&&E.level[0].did!==-1;}if(E.filter){k=k||E.filter.length>0;}if(E.transformation){k=k||E.transformation.length>0;}if(a(this.did)){k=true;}this.metricLCT.toggle.set("selected",k);},levelAdvRef:{scriptClass:"mstrmojo.Editor",title:mstrmojo.desc(9577,"Level Advanced Options"),help:"Level_Advanced_Options_dialog_box.htm",cssClass:"mstrmojo-ME-level-options",onOpen:function(){var E=this.opener;this.contentTable.ccCheckBox.set("checked",E.levelCanContinue);this.contentTable.frCheckBox.set("checked",E.levelFilterRest);},children:[{scriptClass:"mstrmojo.Table",alias:"contentTable",rows:3,cols:1,children:[{scriptClass:"mstrmojo.CheckBox",alias:"ccCheckBox",slot:"0,0",label:mstrmojo.desc(9583,"Allow other users to add extra units to this definition")},{scriptClass:"mstrmojo.CheckBox",alias:"frCheckBox",slot:"1,0",label:mstrmojo.desc(9584,"Include filter attributes which are not in report or level in metric calculation")}]},{scriptClass:"mstrmojo.HBox",slot:"buttonNode",cssText:"float:right;margin: 5px 0px;",children:[{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(1442,"OK"),onclick:function(){var E=this.parent.parent;E.saveLevelOptions(E.contentTable.ccCheckBox.checked,E.contentTable.frCheckBox.checked);E.opener.onmetricModify();E.close();}},{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(221,"Cancel"),onclick:function(){var E=this.parent.parent;E.close();}}]}]},conditionAdvRef:{scriptClass:"mstrmojo.Editor",title:"Condition Advanced Options",help:"Condition_Advanced_Options_dialog_box.htm",cssText:"width: 286px;",onOpen:function(){var E=this.opener;this.contentTable.emPulldown.set("value",E.conditionEmbedMethod);this.contentTable.irfeCheckBox.set("checked",E.conditionIgnoreFilterElem);},children:[{scriptClass:"mstrmojo.Table",cssText:"margin-top:5px;",alias:"contentTable",rows:3,cols:1,children:[{scriptClass:"mstrmojo.Label",slot:"0,0",text:mstrmojo.desc(9585,"Interaction between metric filter and report filter: ")},{scriptClass:"mstrmojo.Pulldown",alias:"emPulldown",itemField:"n",itemIdField:"did",slot:"1,0",value:"2",items:[{n:mstrmojo.desc(9586,"Merge into new"),did:"1"},{n:mstrmojo.desc(9587,"Merge report filter into metric"),did:"2"},{n:mstrmojo.desc(9588,"Merge metric condition into report"),did:"3"}]},{scriptClass:"mstrmojo.CheckBox",alias:"irfeCheckBox",slot:"2,0",label:mstrmojo.desc(9589,"Ignore related report filter elements")}]},{scriptClass:"mstrmojo.HBox",slot:"buttonNode",cssText:"float:right;margin: 5px 0px;",children:[{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(1442,"OK"),onclick:function(){var E=this.parent.parent;E.saveConditionOptions(E.contentTable.emPulldown.value,E.contentTable.irfeCheckBox.checked);E.opener.onmetricModify();E.close();}},{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(221,"Cancel"),onclick:function(){var E=this.parent.parent;E.close();}}]}]},getLCTComponent:function Y(){return{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-ME-LCT",alias:"metricLCT",layout:[{cells:[{cssClass:"mstrmojo-SME-label mstrmojo-ME-LCT-label"},{}]},{cells:[{cssClass:"mstrmojo-SME-label mstrmojo-ME-LCT-label"},{}]},{cells:[{cssClass:"mstrmojo-SME-label mstrmojo-ME-LCT-label"},{}]},{cells:[{cssClass:"mstrmojo-SME-label mstrmojo-ME-LCT-label"},{cssText:"width:252px;padding-right:6px;"}]},{cells:[{cssClass:"mstrmojo-SME-label mstrmojo-ME-LCT-label"},{}]}],bindings:{visible:function(){return this.parent.isAggFunction;}},labelWidth:"auto",children:[{scriptClass:"mstrmojo.Button",cssClass:"toggle",alias:"toggle",text:mstrmojo.desc(6223,"Show All"),selected:false,bindings:{visible:function(){return !this.parent.parent.isDME;}},onclick:function(){var n=!this.selected;this.set("selected",n);},slot:"0,0"},{scriptClass:"mstrmojo.Label",alias:"lblLevel",text:mstrmojo.desc(4788,"Level"),bindings:{visible:function(){return this.parent.parent.isDME||!this.parent.parent.isDME&&this.parent.toggle.selected;},width:"this.parent.labelWidth"},onwidthChange:function(){if(this.hasRendered){this.domNode.style.width=this.width;}},slot:"1,0"},{scriptClass:"mstrmojo.ME.LevelInputBox",emptyText:mstrmojo.desc(12179,"Search for #").replace("#",mstrmojo.desc(2148,"Attribute").toLowerCase()),alias:"levelInput",dtp:-4,xacptSugItemOnly:true,bindings:{noCache:function(){return this.parent.parent.noCache;},isDME:function(){return this.parent.parent.isDME;},visible:function(){return this.parent.lblLevel.visible;}},reportLevelAdded:true,onadd:function(){var n=this.getSelectedObjects();this.set("reportLevelAdded",I.find(n,"did",-1)>-1);},onremove:function(){var n=this.getSelectedObjects();this.set("reportLevelAdded",I.find(n,"did",-1)>-1);},onitemchange:function(){this.parent.parent.onmetricModify();if(O.updateScrollbars){O.updateScrollbars();}},onSaveOnClose:function(){this.parent.parent.onmetricModify();},slot:"1,1"},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-ME-link-text right bold",text:mstrmojo.desc(9577,"Level Advanced Options"),bindings:{visible:function(){return !this.parent.parent.isDME&&this.parent.toggle.selected;}},onclick:function(){var n=this.parent.parent;n.openPopup("levelAdvRef",{saveLevelOptions:function(p,o){n.levelCanContinue=p;n.levelFilterRest=o;},zIndex:n.zIndex+10});},slot:"1,1"},{scriptClass:"mstrmojo.Label",alias:"lblCondition",text:mstrmojo.desc(9579,"Condition"),bindings:{visible:function(){return !this.parent.parent.isDME&&this.parent.toggle.selected;}},slot:"2,0"},{scriptClass:"mstrmojo.ME.ConditionInputBox",cssClass:"mstrmojo-ME-ObjectInputBox-condition singleObject",emptyText:mstrmojo.desc(12179,"Search for #").replace("#",mstrmojo.desc(1281,"Filter").toLowerCase()),alias:"conditionInput",dtp:-4,xacptSugItemOnly:true,bindings:{visible:function(){return this.parent.lblCondition.visible;},isDME:function(){return this.parent.parent.isDME;},noCache:function(){return this.parent.parent.noCache;}},onitemchange:function(){this.parent.parent.onmetricModify();},slot:"2,1"},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-ME-link-text right bold condition",text:mstrmojo.desc(9581,"Condition Advanced Options"),bindings:{visible:function(){return this.parent.lblCondition.visible&&!this.parent.parent.isDME;}},onclick:function(){var n=this.parent.parent;n.openPopup("conditionAdvRef",{saveConditionOptions:function(p,o){n.conditionEmbedMethod=p;n.conditionIgnoreFilterElem=o;},zIndex:n.zIndex+10});},slot:"2,1"},{scriptClass:"mstrmojo.Label",alias:"lblTransform",text:mstrmojo.desc(3324,"Transformation"),bindings:{visible:function(){return !this.parent.parent.isDME&&this.parent.toggle.selected;}},slot:"3,0"},{scriptClass:"mstrmojo.ME.TransformInputBox",cssClass:"mstrmojo-ME-ObjectInputBox-transform",emptyText:mstrmojo.desc(12179,"Search for #").replace("#",mstrmojo.desc(3377,"Object").toLowerCase()),alias:"transformInput",dtp:-4,xacptSugItemOnly:true,bindings:{visible:function(){return this.parent.lblTransform.visible;},isDME:function(){return this.parent.parent.isDME;},noCache:function(){return this.parent.parent.noCache;}},onitemchange:function(){this.parent.parent.onmetricModify();if(O.updateScrollbars){O.updateScrollbars();}},slot:"3,1"},{scriptClass:"mstrmojo.Label",alias:"lblFilter",text:mstrmojo.desc(1281,"Filter"),bindings:{visible:function(){return !!(this.parent.parent.isDME&&!this.parent.parent.ide.disableConditionMetric);}},slot:"4,0"},{scriptClass:"mstrmojo.Box",alias:"addFilterBox",slot:"4,1",cssClass:"addFilterBox",bindings:{visible:function(){return !!(this.parent.parent.isDME&&!this.parent.parent.ide.disableConditionMetric);}},children:[{scriptClass:"mstrmojo.Button",alias:"btnAddFilter",text:A,cssClass:"btnAddFilter",cssDisplay:"inline-block",getFilterObj:function l(){var o=this.filter,n=o&&o.isEmbedded;if(!o||!o.did){return[];}if(n){return[].concat(o.exp?{did:o.did,t:h.Filter,st:Z.Filter,n:o.n,isEmbedded:true,condition:{did:o.did,exp:o.exp}}:[]);}return[{did:o.did,t:h.Filter,st:Z.Filter,n:o.n}];},onfilterChange:function(){this.refresh();},buildRendering:function k(){if(!this.filter){this.filter={isEmbedded:true};}var r=this.filter,t=this.parent.parent,q=t.parent,u=q&&q.ide,o;q=u&&u.editor;o=q&&q.oi&&q.oi.mps;this.text=(r.did)?e:A;var p=this.constructor.prototype.buildRendering.call(this);W.toggleClass(this.domNode,"hasFilter",r.did);this.set("enabled",r.isEmbedded&&(!J(o)));var n=!!(r.did||(mstrApp.isVI&&t.parent.useEmbeddedFilter()));t.lblFilter.set("visible",n);t.addFilterBox.set("visible",n);return p;},useRichTooltip:true,updateTooltipConfig:function m(){var p=d.position(this.domNode),o=this.parent.parent.parent,q=o&&o.ide;o=q&&q.editor;var n=o&&o.oi&&o.oi.mps;this.richTooltip=!J(n)?null:{content:mstrmojo.desc(15646,"This metric is not configured to aggregate from the base dataset. Please go to the Metric Options to change this behavior."),cssClass:"vi-regular vi-tooltip-C A-center",left:p.x+p.w+10,top:p.y-4};},onclick:function E(){var q=this.parent.parent.parent,r=this.parent.btnClearFilter,w=q.dsUnits,u=[],x=[],y=mstrApp.getRootController().docCtrl.model,v=y&&y.getDataService(),n=this.filter,p=n&&n.exp,t=this;I.forEach(w&&w.items,function(z){if(z.t===h.Attribute){u.push(z);}else{if(z.t===h.Metric){x.push(z);}}});var o=function(AA){var z=G.create();t.filter={did:z,n:z,exp:AA.expr,isEmbedded:true};var AC=AA.expr;var AB=function(){t.text=AC?e:A;W.toggleClass(t.domNode,"hasFilter",AC);q.onmetricModify();t.refresh();r.set("filter",t.filter);};if(AC){v.createEmbeddedFilter({expr:f(AC),expJson:AC,filterId:t.filter.did,filterName:t.filter.n},{success:function(){AB();}});}else{t.filter={isEmbedded:true};AB();}};q.openConditionMetricFilterEditor({filter:p,att:u,mx:x,docModel:y,invalidItems:[],fnOk:o,onCancel:mstrmojo.emptyFn,browseParam:function(z){z.messageID=y.mid;z.datasetID=y.findDatasetIdFromUnit(z.attributeID);},zIndex:q.zIndex+1});}},{scriptClass:"mstrmojo.Button",alias:"btnClearFilter",text:mstrmojo.desc(2827,"Clear"),cssClass:"btnClearFilter",cssDisplay:"inline-block",buildRendering:function k(){var o=this.filter;var n=this.constructor.prototype.buildRendering.call(this);this.set("visible",o&&o.did);return n;},onfilterChange:function(){this.refresh();},onclick:function(){var o=this.parent.btnAddFilter,n=this.parent.parent.parent;o.set("filter",{isEmbedded:true});this.set("filter",{isEmbedded:true});n.onmetricModify();}}]}]};}}));mstrmojo.ME._HasLevel.EnumEditorComponents=j;}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.expr","mstrmojo._HasPopup","mstrmojo.Label","mstrmojo.HTMLButton","mstrmojo.ObjectBrowser","mstrmojo.DataGrid","mstrmojo.Editor","mstrmojo.ME._MetricEditorHelper","mstrmojo.ME.ObjectInputBox","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.ME.MetricDataService","mstrmojo.ME._HasLevel","mstrmojo.ME._HasSortBy","mstrmojo.ME.FunctionInfo");mstrmojo.requiresDescs(629,2148,3377,9582,12173,12179,12852);var J=mstrmojo.hash,l=mstrmojo.array,M=mstrmojo.expr,h=mstrmojo.ME._MetricEditorHelper,A=mstrmojo.ME.MetricDataService,c=mstrmojo.mstr.EnumDSSXMLObjectTypes,o=mstrmojo.ME.Enum.DYNAMIC_DIMTY,O=mstrmojo.ME.Enum.UI_OBJECT_TYPE;var U,X;var e=function(E){if(E.onmetricModify){E.onmetricModify();}},b=function(){if(X.updateScrollbars){X.updateScrollbars();}};var Y=mstrmojo.ME.MetricToken.brackets,L=mstrmojo.ME.MetricToken.quotes,Z=mstrmojo.ME.MetricToken.unquotes;var d=function(){var E={"9C374236DD9F11D3B98100C04F2233EA":"Forecast","9C374233DD9F11D3B98100C04F2233EA":"Growth","9C374233DD9F11D3B98100C04F2233EA":"Trend","677E93B2786B11D4B82F00C04F356781":"Case",C41C34F0786B11D4B82F00C04F356781:"CaseV",B2C0FA4420C711D6AD1400C04F0423DE:"IF","8107C324DD9911D3B98100C04F2233EA":"Not"};return E.hasOwnProperty(this.fctOi.did);};var g=function(t){var r=t.split(",")[0],q=r.replace(/\d$/,""),E=r.replace(q,"");return{prefix:q,startAt:parseInt(E,10)};};var G=function(y){var x=function(){if(y.isRepeated){var w=this.parent.dataGrid.ctxtBuilder.itemWidgets[this.parent.idx].labelWidget;if(w){w.set("count",this.getSelectedObjects().length);}}};var q=X.getParamObjectTypes();var E={scriptClass:"mstrmojo.Table",cssClass:"funcParam",layout:[{cells:[{cssText:"width: 338px"},{}]}],children:[{scriptClass:"mstrmojo.ME.ObjectInputBox",alias:"paramInput",slot:"0,0",cssClass:"mstrmojo-ME-param",dtp:y.dtp,isDME:X.isDME,hideEditButton:function(w){return true;},hideDelButton:function(w){return this.isFull;},hidePulldownButton:function(){return this.parent.dataGrid.parent.tbBrowsable;},hideItemWidgetBrowseButton:function(){return !this.parent.dataGrid.parent.tbBrowsable;},browsableTypes:q.concat([M.TP.FOLDER]).join(","),folderLinksContextId:17,emptyText:mstrmojo.desc(12179,"Search for #").replace("#",mstrmojo.desc(3377,"Object").toLowerCase()),getCandidatesThroughTaskCall:function v(z,w){z.objectType=q.join(",");z.rootFolderType=39;z.blockCount=this.blockCount;mstrmojo.ME.MetricDataService.getMetricComponents(z,w);},postCreate:function(AC){var AB=this.parent.dataGrid,AE=AB&&AB.parent;this.noCache=AE.noCache;if(!this.noCache){this.candidates=AE.getCandidates(function(AF){return mstrmojo.array.indexOf(q,AF.t)>-1;});var w=this.candidates.items||[];if(X.isDME){w=X.replaceAttributeWithForms(l.filter(w,function(AF){return l.indexOf(q,AF.t)>-1&&AF.st!==M.STP.NDE;}));}for(var AA=0,z=(y.items||[]).length;AA<z;AA++){var AD=y.items[AA];if(AD&&AD.t===mstrmojo.ME.Enum.UI_OBJECT_TYPE.Sub_Expression){w.push(AD);}}this.candidates.items=w;if(!AC){AB.candidatesListener.push(this.id);}}if(!AC){this.set("items",y.items);}},onitemchange:function(){e(this.parent.dataGrid.parent);},onadd:function r(){x.call(this);},onremove:function u(){x.call(this);},obCfg:{folderLinksContextId:17,browsableTypes:q.concat([M.TP.FOLDER]).join(",")}}],getTokens:function(){var AB=this.paramInput.getSelectedObjects(),AC,w=AB.length,AA,AD=[],z;if(w>0){for(AA=0;AA<w;AA++){AC=AB[AA];if(AC.state===mstrmojo.Enum_OIB_States.VALID&&AC.did){if(AC.t===O.Sub_Expression){AD=AD.concat(AC.tks);}else{z={v:Y(AC.n)};if(AC.t===21){z.oi=AC.oi;z.exv=AC.fmdid||AC.exv;z.extp=8;z.v=AC.fnm?Y(AC.oi.n)+"@"+Y(AC.fnm):z.v;}else{z.oi=AC;}AD.push(z);}}else{z={v:L(y.dtp,AC.n)};AD.push(z);}AD.push({v:mstrmojo.ME.MetricToken.argDelimiter,isDelimiter:true});}AD.pop();}return AD;}};var t=E.children&&E.children[0];if(!y.isRepeated){t.cssClass="mstrmojo-ME-ObjectInputBox-param singleObject noVerify";t.maxObjectCount=1;}else{t.cssClass="mstrmojo-ME-ObjectInputBox-param noVerify";}return E;};var C=function(r){var q=mstrmojo.all[U];var E=null;if(r.isParam){E=q.getParamWidget(r);}else{switch(r&&r.dtp){case 11:E={scriptClass:"mstrmojo.Pulldown",cssClass:"bool mstrmojo-ME-Pulldown",popupCssClass:"mstrmojo-ME-Pulldown-Popup",items:[{n:"False",did:"0"},{n:"True",did:"-1"}],popupToBody:true,itemIdField:"did",postCreate:function(t){var u=this.data;this.value=!!u.v?(u.v==="False"?0:-1):(u.dfv||0);},getTokens:function(){var t=this.data;if(!A.isValEqual(this.value,t.dfv)){return[{v:t.n},{v:"=",isDelimiter:true},{v:A.isValEqual(this.value,"-1")?"True":"False"}];}return[];},onvalueChange:function(){e(this.parent.dataGrid.parent);}};break;case -2:E=q.getBreakByWidget(r);break;case -1:E=q.getSortByWidget(r);break;default:E=q.getTextWidget(r);break;}}E.alias="inputWidget";return E;};var W=function(t,E,q){var r={scriptClass:"mstrmojo.ui.List",alias:"labelWidget",cssClass:"mstrmojo-FunctionWidzard-labels",count:t.items&&t.items.length||0,buildItems:function(){var u=[],w=this.count,y=(t.isParam?"*":"")+":",x=t.np;if(x){for(var v=0;v<=w;v++){u.push({n:x.n+(x.startAt+v)+y,title:t.desc||""});}}else{u.push({n:(t.dn||t.n)+y,title:t.desc||""});}this.set("items",u);},postCreate:function(){this.buildItems();},oncountChange:function(){this.buildItems();}};return r;};var P=function(u){var q=mstrmojo.all[U];return{scriptClass:"mstrmojo.ME.ObjectInputBox",alias:"breakByInput",cssClass:"mstrmojo-ME-breakby",isDME:q.isDME,dtp:u.dtp,emptyText:mstrmojo.desc(12179,"Search for #").replace("#",mstrmojo.desc(2148,"Attribute").toLowerCase()),folderLinksContextId:16,browsableTypes:[M.TP.FOLDER,M.TP.ATTR].join(","),getCandidatesThroughTaskCall:function t(w,v){w.rootFolderType=39;w.blockCount=w.blockCount||this.blockCount;mstrmojo.ME.MetricDataService.getAttributes(w,v);},obCfg:{folderLinksContextId:16,browsableTypes:[M.TP.ATTR,M.TP.FOLDER].join(",")},postCreate:function(x){var v=this.parent.dataGrid,y=v&&v.parent;this.noCache=y.noCache;if(!this.noCache){this.candidates=y.getCandidates(function(AB){return AB.t===c.Attribute||AB.t===c.Consolidation;});if(this.isDME){this.candidates.items=o.getItems("breakby").concat(this.candidates.items);}if(!x){v.candidatesListener.push(this.id);}}if(!x){var w=u.items||[],z=q.oi.tks,AA=!z.met||z.items&&(z.items.length===0);if(AA&&this.isDME){w.push(o.getAutomaticDimtyObject());}this.set("items",w);}},onitemchange:function(){e(this.parent.dataGrid.parent);},onadd:function E(){b();},onremove:function r(){b();},hidePulldownButton:function(){return this.parent.dataGrid.parent.tbBrowsable;},hideItemWidgetBrowseButton:function(){return !this.parent.dataGrid.parent.tbBrowsable;},getTokens:function(){var y=this.getSelectedObjects(),v=y.length,x,AA=[];if(v>0){AA.push({v:"BreakBy"});AA.push({v:"=",isDelimiter:true});AA.push({v:"{",isDelimiter:true});for(x=0;x<v;x++){var z=y[x],w;if(h.isDimty(z.n)){w={v:z.n};}else{if(/^@/.test(z.did)){w={v:z.did};}else{w={v:Y(z.n),oi:z};}}AA.push(w);if(x!==(v-1)){AA.push({v:",",isDelimiter:true});}}AA.push({v:"}",isDelimiter:true});}return AA;}};};var F=function(t,u){var q=t.length,E;for(E=0;E<q;E++){var r=mstrmojo.array.find(t[E].fns,"n",u);if(r>-1){return J.clone(t[E].fns[r]);}}return null;};var S=function(r,t){var q,E=t.length,u=r&&r.length;if(u>0){for(q=0;q<u-1;q++){r[q].items=[t[q]];r[q].dynamicVerify=true;}r[u-1].items=[];for(q=u-1;q<E;q++){r[u-1].items.push(t[q]);r[u-1].dynamicVerify=true;}}return r;};var N=function(q,r,v){var u={items:[]},t={301:"}",302:")"}[v],E=r[++q];while(E){if(E.oi){if(v==302){E.oi.selFrm=E.exv;E.oi.asc=E.asc;}u.items.push(E.oi);}if((E=r[++q]).v===t){break;}}return u;};mstrmojo.ME.FunctionWizard=mstrmojo.declare(mstrmojo.Editor,[mstrmojo.ME._MetricEditorHelper,mstrmojo.ME._HasLevel,mstrmojo.ME._HasSortBy],{scriptClass:"mstrmojo.ME.FunctionWizard",cssClass:"mstrmojo-Editor-me mstrmojo-FunctionWidzard",title:mstrmojo.desc(9582,"Function Editor: "),help:"Function_Arguments_dialog_box.htm",fctOi:null,fctArgs:null,fctArgsDataGridCssClass:"functionArgs",fctSyntax:"",fctDesc:"",hiddenPs:[],bindings:{candidates:"this.opener.candidates"},getParamObjectTypes:function f(){var E=[M.TP.METRIC,M.TP.FACT];if(this.isAgg(this.fctOi)){E.push(M.TP.ATTR);}return E;},getCandidates:function R(r){var q=this.candidates,E;if(q){E=mstrmojo.array.filter(q.items,r);return{items:E,isComplete:q.isComplete};}return{};},_set_candidates:function(w,q){this.candidates=q;if(this.hasRendered&&this.visible){var t=this.argsGrid,u=t.candidatesListener,E=u.length,r;for(r=0;r<E;r++){if(mstrmojo.all[u[r]]){mstrmojo.all[u[r]].postCreate(true);}}}if(this._super){this._super(w,q);}return true;},postProcessParamsFromToken:function(t){if(this.refOi&&this.candidates){var u=this.refOi.did;this.refOi=mstrmojo.array.filterOne(this.candidates.items,function(y){return y.did===u;});}var x=[],v,r,q=t.pars,E=(q&&q.length)||0;for(r=0;r<E;r++){v=J.copy(q[r]);v.isParam=true;if(r===0&&this.refOi){v.items=[this.refOi];this.refOi=null;}x.push(v);}if(t.rpc>0&&!d.call(this)){v.isRepeated=true;var w=g(v.n);v.np={n:w.prefix,startAt:w.startAt||1};}return x;},postProcessProsFromToken:function(t){var u=[],r,E=(t.pros&&t.pros.length)||0,q=function(v){if(l.indexOf(mstrmojo.ME.Enum.NonExposableParams,v.n)>-1){v.itemCss="hidden";}return v;};for(r=0;r<E;r++){u.push(q(J.copy(t.pros[r])));}return u;},buildSyntax:function(r){var q=[],t,E;q.push(r.n);q.push("(");E=(r.pars&&r.pars.length)||0;for(t=0;t<E;t++){q.push(r.pars[t].n);if(t!==(E-1)){q.push(", ");}}q.push(")");return q;},onOpen:function(){U=this.id;this._setupCandidatesCache();var r=this.getArgsFromTokens();var u=this,t=r||this.fctOi;var E=this.buildSyntax(t),v=this.postProcessParamsFromToken(t);v=v.concat(this.postProcessProsFromToken(t));if(t.sqt===5){v.push({n:"BreakBy",dn:mstrmojo.desc(12173,"Break By"),dtp:-2,desc:"Break By is a parameter representing the break by levels for this function.",items:t.bb&&t.bb.items});}if(t.ios){v.push({n:"SortBy",dn:mstrmojo.desc(12852,"Sort By"),dtp:-1,desc:"Sort By is a parameter representing the sort by levels for this function.",items:t.sb&&t.sb.items});}v=v.concat(this.hiddenPs||[]);u.set("fctArgs",v);u.set("fctSyntax",E.join(""));u.set("fctDesc",mstrmojo.ME.FunctionInfo.getDescAndExample(this.fctOi).desc+"  "+mstrmojo.ME.MetricDataService.getFunctionHelpTopic(t.h));u.set("title",this.insertMode?t.n:mstrmojo.desc(9582,"Function Editor: ")+" "+this.oi.n);u.set("fctName",t.n);this.raiseEvent({name:"fctDidChange",did:this.fctOi.did});this.set("isAggFunction",this.isAgg());this.set("ios",t.ios);if(this._super){this._super();}if(this.isAggFunction){var q=this.argsGrid.ctxtBuilder.itemWidgets;if(q&&q.length>0){this.metricLCT.set("labelWidth",q[0].labelWidget&&q[0].labelWidget.domNode.clientWidth+"px");}}},getArgsFromTokens:function Q(){if(!this.oi||this.oi.tks.items.length===0){return null;}var t={},v=this.oi.tks.items,AJ=v.length,AE=[],q=[],AD=0,E=[],AI;for(AI=0;AI<AJ;AI++){var x=v[AI],r=x.tp,AL=x.sctt;if(mstrmojo.ME.MetricToken.isDelimiter(x.v)&&(x.v!=="("&&x.v!==")")||x.v==="&gt;"||x.v==="&lt;"){continue;}switch(AL){case 65536:t.n=x.oi?x.oi.n:x.v;var y=this.fctOi=F(this.functions,t.n);AE=y.pars||[];q=y.pros||[];t.rpc=y.rpc;t.sqt=y.sqt;t.ios=y.ios;break;case 196608:var AH=[],AC=[],AA,AG,AF;x=v[++AI];while(x&&(x.sctt===196608||x.sctt===196609)){if(x.sctt===196608){AC.push(x);}else{AH.push(AC);AC=[];}x=v[++AI];}AH.push(AC);AH[AH.length-1].pop();for(AF=0;AF<AH.length;AF++){AC=AH[AF];var u={n:""};AA=AC.length;if(AA===1){x=AC[0];if(x.extp){u={n:x.v,did:x.oi.did+"@"+x.exv,exv:x.exv,extp:x.extp,oi:x.oi,t:21,tk:x};}else{var AB=Math.min(AE.length-1,E.length),AK=Z(x,x.v,AE[AB].dtp);u=x.oi||{n:AK,v:AK,t:O.Sub_Expression};}}else{for(AG=0;AG<AA;AG++){u.n+=AC[AG].v+" ";}u.v=u.n;u.did=u.n;u.t=O.Sub_Expression;u.tks=AC;}E.push(u);}break;case 131072:if(r==301){var z={};x=v[++AI];while(x){if(x.tp!=282){if(x.oi){z.items=z.items||[];z.items.push(x.oi);}else{if(x.tp===64){z.items=z.items||[];var w=x.v+v[++AI].v;x=v[AI+1];if(x.tp===43||x.tp===45){w+=v[++AI].v;w+=v[++AI].v;}z.items.push(o.getDimtyObject(w,this.isDME));}}}if((x=v[++AI])["v"]==="}"){break;}}t.bb=z;}else{if(r==302){t.sb={};}else{if(r==259){mstrmojo.array.forEach(q,function(AO){if(AO.n===v[AI].v){AI=AI+2;var AN=v[AI],AM=[];do{AM.push(v[AI++].v);if(v[AI].sctt===131072&&v[AI].tp===62||v[AI].sctt===131073){break;}}while(true);AM=AM.join("");AM=Z(AN,AM,AO.dtp);AO.v=AM;return false;}});}}}break;}}t.pars=S(AE,E);t.pros=q;return t;},getTokens:function H(){var t=this.argsGrid.ctxtBuilder.itemWidgets,x=t.length,v,AB,y=[],r=[],AC=[],z,u,q,E,AA=this.fctOi;for(v=0;v<x;v++){AB=t[v].inputWidget;if(AB.data.isParam){r.push(AB.getTokens());}else{y.push(AB.getTokens());}}AC.push({v:AA.n,oi:AA});x=y.length;if(x>0){E=false;AC.push({v:"<",isDelimiter:true});for(v=0;v<x;v++){z=y[v];q=z.length;if(q===0){continue;}E=true;for(u=0;u<q;u++){AC.push(z[u]);}AC.push({v:",",isDelimiter:true});}AC.pop();if(E){AC.push({v:">",isDelimiter:true});}}x=r.length;AC.push({v:"(",isDelimiter:true});E=false;for(v=0;v<x;v++){z=r[v];q=z.length;if(q===0){continue;}E=true;for(u=0;u<q;u++){AC.push(z[u]);}AC.push({v:mstrmojo.ME.MetricToken.argDelimiter,isDelimiter:true});}if(E){AC.pop();}AC.push({v:")",isDelimiter:true});for(v=0,x=AC.length;v<x;v++){AC[v].isNew=true;}return AC;},getMetricDefAsTokens:function p(){var E=this.getTokens();if(this.getLCTDefAsTokens){E=E.concat(this.getLCTDefAsTokens());}return E;},handleValidation:function n(u){if(u&&!u.rjec){return ;}var t=u&&u.rjec==="-2147214846";if(t){var q=u.items,v=mstrmojo.array.find(q,"sta",-1),E=q[v].v;mstrmojo.alert('More than one object with the name "#" found. Browse to select the object or retype to select it from the search autocomplete list.'.replace("#",E));}else{mstrmojo.alert(u&&u.rjed);}},getPROPBuilder:function a(){return W;},getDTPBuilder:function j(){return C;},getParamWidget:function B(E){return G(E);},getBreakByWidget:function T(E){return P(E);},getSortByWidget:function k(E){return this._super();},getTextWidget:function V(E){return{scriptClass:"mstrmojo.TextBox",cssClass:"mstrmojo-functionArgs-textInput",postCreate:function(q){var r=this.data;this.value=r.v||((r.dfv||r.dfv===0)?r.dfv:"");},getTokens:function(){var q=this.data;if(!mstrmojo.string.isEmpty(this.value)&&this.value!==q.dfv){return[{v:q.n},{v:"=",isDelimiter:true},{v:L(q.dtp,this.value)}];}return[];},onvalueChange:function(){e(this.parent.dataGrid.parent);}};},getDataGridRef:function D(){return{scriptClass:"mstrmojo.DataGrid",alias:"argsGrid",cssClass:this.fctArgsDataGridCssClass,makeObservable:true,banding:false,columns:[{headerText:"Property Name",dataWidgetBuilder:this.getPROPBuilder(),colCss:"name"},{headerText:"Property Type",dataWidgetBuilder:this.getDTPBuilder(),colCss:"dtp"}],postCreate:function(){this.candidatesListener=[];},bindings:{items:"this.parent.fctArgs"},onadd:function(){b();}};},init:function m(E){this.children=this.getChildren();this._super(E);U=this.id;X=this;},isAgg:function K(E){return(E||this.fctOi||{}).sqt===1;},getChildren:function I(){return[mstrmojo.ME._MetricEditorHelper.formatAndOptionsBarRef,mstrmojo.ME._MetricEditorHelper.nameEditBoxRef,mstrmojo.ME._MetricEditorHelper.functionNameRef,this.getDataGridRef(),this.getLCTComponent(),{scriptClass:"mstrmojo.Label",slot:"buttonNode",cssClass:"mstrmojo-FE-functionSyntax",bindings:{visible:"this.parent.insertMode",text:function(){return this.parent.fctSyntax;}}},{scriptClass:"mstrmojo.Label",slot:"buttonNode",cssClass:"mstrmojo-FE-functionDesc",allowHTML:true,bindings:{visible:"this.parent.insertMode || this.parent.simplex",text:function(){return this.parent.fctDesc;}}},mstrmojo.ME._MetricEditorHelper.switchRef,mstrmojo.ME._MetricEditorHelper.buttonBarRef];}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.expr","mstrmojo.ui._HasScroller","mstrmojo.SearchableDropDownList","mstrmojo.ME.FunctionWizard","mstrmojo.ME._DerivedMetricEditorHelper");mstrmojo.requiresDescs(3377,11569,12179);var A,C;mstrmojo.ME.DerivedFunctionWizard=mstrmojo.declare(mstrmojo.ME.FunctionWizard,[mstrmojo.ME._DerivedMetricEditorHelper,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ME.DerivedFunctionWizard",init:function F(G){mstrmojo.css.addWidgetCssClass(this,"dme");this._super(G);A=this.id;C=this;},setupScrollNodes:function E(){this.scrollNode=this.containerNode;},onOpen:function B(){this._super();if(this.ide&&this.ide.action.cmd===mstrmojo.ME.ENUM.METRIC_ACTIONS.EDIT_NEW){this.dirty=true;}if(this.updateScrollbars){this.updateScrollbars();}},getParamObjectTypes:function D(){var G=this.opener||{};return G.getValidFuncParamTypes?G.getValidFuncParamTypes(this.fctOi):this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.ME.DerivedFunctionWizard","mstrmojo.ME.MetricDataService","mstrmojo.ME.AttributeEditBox","mstrmojo.expr","mstrmojo.array","mstrmojo.hash");var G;var e=mstrmojo.ME.MetricDataService,U=mstrmojo.hash,N=mstrmojo.array,W=mstrmojo.ME.AttributeEditBox.getTokenStreamXML,a=mstrmojo.expr.DTP,Q={SHOW_BAND_NAMES:-4,BANDON_UNITS:-6},B={START_END:'BandNames<ResidueName="All Others">(this@ID, "#s - #e")',BAND_NUM:'BandNames<ResidueName="All Others">(this@ID, "Band #b")',BAND_NUM_START_END:'BandNames<ResidueName="All Others">(this@ID, "Band #b: #s - #e")',NO:"No"},R=[{n:mstrmojo.desc(14145,"Start - End"),v:B.START_END},{n:mstrmojo.desc(14146,"Band #"),v:B.BAND_NUM},{n:mstrmojo.desc(14147,"Band #: Start - End"),v:B.BAND_NUM_START_END},{n:mstrmojo.desc(218,"No"),v:B.NO}],K={"8107C337DD9911D3B98100C04F2233EA":"BAND_SIZE","8107C338DD9911D3B98100C04F2233EA":"BAND_COUNT","8107C339DD9911D3B98100C04F2233EA":"BAND_POINTS"},D=function(){return[];};function Y(f){return f.replace(/\s/g,"").toLowerCase();}function O(f){var g=[{v:"BandNames",tp:279,lv:1,oi:{did:"ACA96B1F9F99412B867045747DD88575",n:"BandNames",st:2816,t:11}},{v:"<",tp:60,lv:1},{v:"ResidueName",tp:259,lv:1},{v:"=",tp:282,lv:1},{v:'"All Others"',tp:261,lv:1},{v:">",tp:62,lv:1},{v:"(",tp:40,lv:1},{lv:1,tp:275,v:"this@ID"},{v:",",tp:44,lv:1}];switch(f){case B.BAND_NUM:g.push({v:'"Band #b"',tp:261,lv:1});break;case B.BAND_NUM_START_END:g.push({v:'"Band #b: #s - #e"',tp:261,lv:1});break;case B.START_END:g.push({v:'"#s - #e"',tp:261,lv:1});break;}g.push({v:")",tp:41,lv:1});return g;}function d(f){var g="";N.forEach(f.slice(1,-1),function(h){g+=h.v;});return g;}function J(f){if(f.t===4){return"BandOn";}return f.n;}function E(f){if(f.t===4){return Q.BANDON_UNITS;}return f.dtp;}var C=function(f,g){return{did:"",n:"New Attribute",forms:[{n:"ID",tks:{items:[]}}]};};function T(g,f){return g.dtp===8&&g.n==="Delimiter"?'"'+f+'"':f;}function P(j){var h=j.split(",")[0],g=h.replace(/\d$/,""),f=h.replace(g,"");return{prefix:g,startAt:parseInt(f,10)};}function L(f,g){return{scriptClass:"mstrmojo.Pulldown",cssClass:"mstrmojo-ME-Pulldown",popupCssClass:"mstrmojo-ME-Pulldown-Popup",items:f,popupToBody:true,itemIdField:"v",postCreate:function(){var h=this.data;this.value=h.v||h.dfv;},getTokens:g||D,onvalueChange:function(){G.set("dirty",true);}};}function I(g,j){var f=function(k){return k.inputWidget&&k.inputWidget.widgetName===j;},h=mstrmojo.array.filterOne(g.argsGrid.ctxtBuilder.itemWidgets,f);return h&&h.inputWidget;}var H=function(g){var f=null;switch(g&&g.dtp){case Q.SHOW_BAND_NAMES:f=L(R);f.widgetName="bandNames";f.getDescTokens=function(){var h=this.selectedItem&&this.selectedItem.v;return h===B.NO?null:O(h);};break;case Q.BANDON_UNITS:f=G.getParamWidget(g);f.widgetName="bandOn";break;case a.DOUBLE:case a.INTEGER:case a.VARCHAR:f=G.getTextWidget(g);break;default:f=G.getParamWidget(g);f.onitemsChange=mstrmojo.emptyFn;break;}if(f){f.alias="inputWidget";}return f;};var M=function(n,o,k,p){var l=n.did,h=n.n,f=n.dsid,g=n.forms,m={items:o},j=function(q){if(q.vs!==0){mstrmojo.alert(mstrmojo.desc(9826,"The metric definition has an error. Please correct before proceeding."),null,mstrmojo.desc(9571,"Syntax Error!"));return ;}var t,r={n:"ID",formula:q.tokenXML};if(l){r.did=g[0].did;t={act:"updateDA",name:h,dsid:f,attrId:l,isTokenStream:true,update:[r]};if(k){if(k.did&&!k.del){t.update.push(k);}else{if(k.did&&k.del){t.del=[{did:k.did}];}else{t.add=[k];}}}}else{t={act:"addDAToDataset",dsid:f,name:h,evFlags:1,isTokenStream:true,forms:[r].concat(k?[k]:[])};}p(t);};mstrmojo.ME.AttributeEditBox.validateSyntax(l,m,true,j);};var Z=function(l){var k=l.forms,g=k&&k.length,j=g&&k[0],h=g&&k[1],n=N.some(j&&j.ftk,function(o){return o.oi&&K[o.oi.did];});if(!n){return false;}if(g===1){return true;}if(h&&h.ftk&&g===2){var f=false,m=Y(d(h.ftk));U.forEach(B,function(o){if(Y(o)===m){f=true;return false;}});return f;}return false;};mstrmojo.ME.BandingDAEditor=mstrmojo.declare(mstrmojo.ME.DerivedFunctionWizard,null,{scriptClass:"mstrmojo.ME.BandingDAEditor",ide:null,insertMode:false,init:function V(f){this._super(f);G=this;},getDTPBuilder:function X(){return H;},getParamObjectTypes:function S(){return[mstrmojo.expr.TP.METRIC];},getTextWidget:function b(g){var h=P(g.n).prefix;return{scriptClass:"mstrmojo.ValidationTextBox",emptyText:(g.dtp===a.DOUBLE||g.dtp===a.INTEGER)?mstrmojo.desc(14143,"Type a number"):"",postCreate:function(){this.value=(g.items&&g.items[0].v)||g.dfv;},oninput:function j(k){G.set("dirty",true);this.createNextInputParamWidget();},constraints:{trigger:mstrmojo.validation.TRIGGER.ONKEYUP,min:1},dtp:g.dtp,getTokens:function(){var k=this.data;if(!mstrmojo.string.isEmpty(this.value)&&this.value!==k.dfv){return[{v:T(k,this.value)}];}return[];},createNextInputParamWidget:function f(){var o=this.data,n=this.dataGrid,p=G._lastRpIdx;if(!(o.isRepeated&&o.rpIdx===p)){return ;}var l=p+1,m=h+l,k=mstrmojo.hash.copy({desc:m,n:m,items:null,dn:m,rpIdx:l},mstrmojo.hash.copy(o));n.items.add([k],mstrmojo.array.indexOf(n.items,o)+1);G._lastRpIdx=k.rpIdx;if(G.updateScrollbars){G.updateScrollbars();}}};},onOpen:function F(){G=this;this.oi.tks=this.oi.forms[0].tks||{items:this.oi.forms[0].ftk};this._super();if(this.updateScrollbars){this.updateScrollbars();}},insertOnFinish:function(){var k=mstrmojo.all.mstrDAE.attrEditBox,f=k.inputBox,j=I(this,"bandNames"),g=this.getTokens(),h=j.getDescTokens();f.insertTokens(g);if(h){k.tabstrip.addTab();f.insertTokens(h);}},validateAndSave:function A(m,l){var k=this,j=k.ide.action,f=m.forms,g=I(this,"bandNames"),o=g.getDescTokens(),h=U.copy(o?{n:"DESC",formula:W({items:o})}:null,f[1]?{did:f[1].did}:null),n=function(q){l();k.ide.close();var p=m.did?j.onupdate:j.oncreate;if(p){p(q);}};if(o===null&&h){h.del=true;}M.call(k,k.oi,this.getTokens(),h,n);},postProcessParamsFromToken:function(j){var l=[],k,h,g=j.pars,f=(g&&g.length)||0;for(h=0;h<f;h++){k=U.copy(g[h]);k.dtp=E(k);k.n=J(k);k.isParam=true;l.push(k);}k=l[l.length-1];if(j.rpc>0){l=l.concat(this.postProcessRepeatParam(k));}return l;},postProcessRepeatParam:function c(n){var m=P(n.n),l=m.prefix,h=m.startAt||1,f=[],k,g;n.isRepeated=true;n.rpIdx=this._lastRpIdx=h;n.n=l+(h++);var j=n.items||[];if(j.length>0){n.items=[j[0]];for(g=1;g<=j.length;g++){k=U.copy(n);k.rpIdx=h;k.n=l+(h++);k.items=(g===j.length?null:[j[g]]);f.push(k);}this._lastRpIdx=k.rpIdx;}return f;},postProcessProsFromToken:function(f){var h=[],g={dfv:B.START_END,n:"ShowBandNames",desc:mstrmojo.desc(14144,"Show band names"),dtp:Q.SHOW_BAND_NAMES};if(this.oi.forms.length>1){var j=Y(d(this.oi.forms[1].ftk));U.forEach(B,function(k){if(Y(k)===j){g.v=k;return false;}});}else{if(this.oi.did!==""){g.v=B.NO;}}h.push(g);return h;}});mstrmojo.ME.BandingDAEditor.getNewDefinition=C;mstrmojo.ME.BandingDAEditor.showAsBandingEditor=Z;}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.dom","mstrmojo.css","mstrmojo.Editor","mstrmojo.tooltip","mstrmojo.SearchWidget","mstrmojo.ME._MetricEditorHelper","mstrmojo.ME.BandingDAEditor","mstrmojo.ME.Enum","mstrmojo.ME.FunctionInfo");mstrmojo.requiresDescs(13141,9590,4561,9591,3273,9592,9579,9593,3324,9594,11656,11657,4565,9595,9925,1088,13141,9563,9597,221);var R=mstrmojo.hash,W=mstrmojo.dom,M=mstrmojo.css,Y=mstrmojo.ME.Enum.SHORTCUT_FUNCTIONS;var D={n:mstrmojo.desc(9590,"Search Result"),did:-1,fns:[]},E={n:mstrmojo.desc(4561,"All Functions"),did:-2,fns:[]},Q={n:mstrmojo.desc(9591,"Metric Templates"),did:-3,fns:[{n:mstrmojo.desc(3273,"Level"),did:Y.Level,desc:mstrmojo.desc(9592,"Create a level metric."),h:"standard_functions_Level"},{n:mstrmojo.desc(9579,"Condition"),did:Y.Condition,desc:mstrmojo.desc(9593,"Create a conditional metric."),h:"standard_functions_condition"},{n:mstrmojo.desc(3324,"Transformation"),did:Y.Transformation,desc:mstrmojo.desc(9594,"Create a transformation metric."),h:"standard_functions_transformation"},{n:mstrmojo.desc(11656,"Row Count"),desc:mstrmojo.desc(11657,"Row Count calculates the total number of rows in the dataset."),did:Y.Row_Count,tks:{items:[{v:"Count",tp:280,oi:{n:"Count",did:"8107C31CDD9911D3B98100C04F2233EA",t:11,st:2816}},{v:"<",tp:60},{v:"Null",tp:259},{v:"=",tp:282},{v:"True",tp:299},{v:",",tp:44},{v:"UseLookupForAttributes",tp:259},{v:"=",tp:282},{v:"False",tp:300},{v:">",tp:62},{v:"(",tp:40},{v:'"*"',tp:261},{v:")",tp:41},{v:"{",tp:123},{v:"~",tp:126},{v:"}",tp:125}]}}]},G={n:mstrmojo.desc(4565,"Select a category:"),did:-4,fns:[]},F=function(Z,a){var b=Z.functionList;Z.openWizard(b.items[b.selectedIndex],a);},H=function(){return mstrmojo.hash.copy(mstrmojo.ME.ENUM.NEW_METRIC_DEFINITION);};var X=function(a){var Z="mstrmojo-ME-fct-tip",b=this.tooltip&&this.tooltip.domNode;if(b){M.toggleClass(b,Z,a);}};mstrmojo.ME.FunctionSelector=mstrmojo.declare(mstrmojo.Editor,[],{scriptClass:"mstrmojo.ME.FunctionSelector",title:mstrmojo.desc(9595,"Select a function or template"),help:"Select_a_Function_dialog_box.htm",isDME:false,functions:null,includeFakeFuncs:true,functionItems:null,selectedCategory:1,selectedIndex:-1,init:function T(Z){this._super(Z);M.addWidgetCssClass(this,"mstrmojo-FunctionSelector");},getFunctionSyntax:function L(g,b){var d=this.functionItems;if(!d){return"";}var e=d[g].fns[b];if(e.did<0){return e.n;}var Z=e.pars,j=e.pros,h=[],a,c;h.push(e.n);j=mstrmojo.hash.clone(j)||[];if(e.ios){j.push({n:"SortBy"});}if(e.sqt===5){j.push({n:"BreakBy"});}if(this.showFullSyntax){if(j.length>0){h.push("<");for(a=0,c=j.length;a<c;a++){h.push(j[a].n);h.push(", ");}h.pop();h.push(">");}}h.push("(");for(a=0,c=Z.length;a<c;a++){h.push(Z[a].n);if(a!==(c-1)){h.push(", ");}}h.push(")");return h.join("");},getFunctionDesc:function P(c,Z){var b=this.functionItems;if(!b){return"";}var a=b[c].fns[Z];return mstrmojo.ME.FunctionInfo.getDescAndExample(a).desc;},getFunctionHelpTopic:function O(c,Z){var b=this.functionItems;if(!b){return"";}var a=b[c].fns[Z];if(a.did===Y.Row_Count){return"";}return mstrmojo.ME.MetricDataService.getFunctionHelpTopic(a.h);},getMetricDefAsTokens:function S(){return this.getTokens();},getTokens:function K(){var a=this.functionList,Z=a.items[a.selectedIndex],b=[];if(Z){if(Z.did<-1){switch(Z.did){case -7:b=Z.tks.items;break;case -4:case -5:case -6:break;}}else{b.push({v:Z.n,oi:Z,isNew:true});}}return b;},onfunctionsChange:function V(){if(!this.functions){return ;}this.selectedCategory=0;this.set("selectedCategory",1);this.set("selectedIndex",-1);var b=mstrmojo.hash.clone(this.functions),Z=b.length;if(!b.add){b=R.make(b,mstrmojo.Arr);}if(Z>=1&&this.includeFakeFuncs){var a=b[mstrmojo.ME.MetricDataService.getBasicCategoryIndex(b)];a.fns.push(Q.fns[0]);if(!this.isDME){a.fns.push(Q.fns[1]);a.fns.push(Q.fns[2]);}else{a.fns.push(Q.fns[3]);}}this.set("functionItems",b);},onPreClose:function N(){this.cleanup();return true;},cleanup:function I(){this.searchWidget.clearSearch();this.set("selectedIndex",-1);},handleCloseAction:function C(){this.close();},clearSearchResult:function U(a){var b=this.fcHBox.fcPulldown,c=this.functionItems,Z=c.length-1;if(Z>-1&&c[Z]===D){if(this.selectedCategory===Z){if(a!==false){this.set("selectedCategory",1);this.set("selectedIndex",-1);}}c.remove(Z);b.refresh();}},clearSearchPattern:function A(){var Z=this.searchWidget;if(Z&&Z.hasRendered){Z.reset();this.clearSearchResult(false);}},openWizard:function J(c,b){var a=this,Z;if(mstrmojo.ME.MetricDataService.isBasicAggMap(c.did)||c.did<-1){Z={zIndex:a.zIndex+10,did:c.did,oi:H};Z.insertMode=false;Z.id="mstrSME";}else{Z={functions:mstrmojo.ME.MetricDataService.getFunctionCatList(),fctOi:c,zIndex:a.zIndex+10,oi:H};Z.id="mstrFE";}Z.insertMode=this.insertMode;if(Z.insertMode){Z.insertOnFinish=this.insertOnFinish;}a.switch2Editor(Z.id,Z);},handleSelectedFunction:function(Z){F(this);},onshowFullSyntaxChange:function B(){this.functionList.onchange();},children:[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-FunctionSelector-label",text:mstrmojo.desc(9925,"Functions")},{scriptClass:"mstrmojo.SearchWidget",alias:"searchWidget",cssClass:"mstrmojo-FunctionSelector-search",width:"65px",quickSearch:true,placeholderText:"",onsearch:function(g){var Z=this.parent,f=Z.fcHBox.fcPulldown,d=Z.functionItems,h=Z.functionList.itemDisplayField,e=[],a=function(k){var j=mstrmojo.hash.copy(k),m=j.n,l;try{l=new RegExp(g,"ig");}catch(n){l=new RegExp(mstrmojo.string.regEscape(g),"ig");}if(l.test(m)){j[h]=m.replace(l,function(o){return"<em>"+mstrmojo.string.encodeHtmlString(o)+"</em>";});e.push(j);}},b,c;for(b=0,c=d.length;b<c;b++){if(d[b]===D||d[b].did===E.did){continue;}if(g){mstrmojo.array.forEach(d[b].fns,a);}}D.fns=e;if(d[d.length-1]!==D){d.add([D]);}f.refresh();Z.selectedCategory=0;Z.set("selectedCategory",d.length-1);Z.set("selectedIndex",-1);},onclear:function(Z){if(Z){this.parent.clearSearchResult();}}},{scriptClass:"mstrmojo.HBox",alias:"fcHBox",cssClass:"mstrmojo-FunctionSelector-fctBox",children:[{scriptClass:"mstrmojo.Pulldown",cssClass:"mstrmojo-ME-Pulldown",popupCssClass:"mstrmojo-ME-Pulldown-Popup",alias:"fcPulldown",itemIdField:"did",itemField:"n",items:[],bindings:{items:function(){var a=this.parent.parent.functionItems,b=[];if(!a){return a;}b=mstrmojo.ME.MetricDataService.sortFunctions(a);if(a[0].did!==E.did){var Z=E;Z.fns=b;a.unshift(Z);}return a;},selectedIndex:"this.parent.parent.selectedCategory",value:function(){var Z=this.parent.parent.selectedCategory;return this.items[Z][this.itemIdField];}},onvalueChange:function(Z){var a=this.parent.parent;a.set("selectedCategory",this.selectedIndex);a.set("selectedIndex",-1);if(Z.valueWas===D.did&&this.selectedItem.did!==D.did){this.parent.parent.clearSearchPattern();}}}]},{scriptClass:"mstrmojo.ME.FunctionList",alias:"functionList",itemIdField:"dssid",itemField:"n",itemDisplayField:"dn",items:[{n:"",cls:"wait"}],cssClass:"mstrmojo-FE-functionList mstrmojo-suggest-list",renderOnScroll:false,itemMarkupFunction:function(c,Z,b){var a="mstrmojo-Button mstrmojo-Editor-button mstrmojo-WebButton tbFunction";if(!mstrApp.isWSStyling){a+=" hot";}return'<div class="mstrmojo-suggest-text '+(c.cls||"fn")+'" idx="'+Z+'"'+(c.did<0?'did="'+c.did+'"':"")+" onmouseover=\"mstrmojo.all['"+b.id+"'].onmouseover(this, event)\" onmouseout=\"mstrmojo.all['"+b.id+"'].onmouseout(this, event)\">"+((b.itemDisplayField&&c[b.itemDisplayField])||c[b.itemField])+'<div class="'+a+'" t="edt"><div class="mstrmojo-Button-text" t="edt">'+mstrmojo.desc(1088,"Edit")+"</div></div></div>";},bindings:{items:function(){var Z=this.parent.functionItems,a=this.parent.selectedCategory;return(Z&&Z[a].fns)||this.items;},selectedIndex:"this.parent.selectedIndex"},buffer:"",onkeypress:function(l){var j=this,g=l.e,c=g.keyCode||g.charCode,m=mstrmojo.Enum_Keys,Z=function(o){var n=(W.isIE&&!W.isIE9)?o.keyCode:o.charCode;return(n>0)?String.fromCharCode(n):"";},h=this.items,f=h.length,a=this.selectedIndex,b=function(e){j.scrollTo(e);};switch(c){case m.UP_ARROW:this.set("selectedIndex",(a+f-1)%f);break;case m.DOWN_ARROW:this.set("selectedIndex",(a+1)%f);break;default:var d=(this.buffer+=Z(g));if(f>0&&d.length>0){mstrmojo.array.forEach(h,function(o,k,e){var n=new RegExp("^"+d,"i");if(n.test(o[j.itemField])){if(k>-1){this.selectedIndex=-1;this.set("selectedIndex",k);}return false;}},this);}}if(this.selectedIndex>-1){b(this.selectedIndex);}window.clearTimeout(this.tmr);this.tmr=window.setTimeout(function(){j.buffer="";},300);mstrmojo.dom.stopPropogation(l.hWin,g);return false;},onkeyup:function(Z){this.onkeypress(Z);},onchange:function(Z){var b=this.parent;if(this.selectedIndex!==b.selectedIndex){b.set("selectedIndex",this.selectedIndex);}var d=b.selectedCategory,a=b.selectedIndex,c=d>-1&&a>-1;b.set("funcSyntax",c?b.getFunctionSyntax(d,a):"");b.set("funcDesc",c?b.getFunctionDesc(d,a)+"  "+b.getFunctionHelpTopic(d,a):"");if(this.changeByMouse){if(b.selectedCategory>-1&&b.selectedIndex>-1){b.handleSelectedFunction(false);}this.changeByMouse=false;}},onmouseup:function(Z){var b=Z.getTarget(),a=b.getAttribute("t");if(a==="edt"){mstrmojo.dom.stopPropogation(Z.hWin,Z.e);mstrmojo.dom.preventDefault(Z.hWin,Z.e);this.openFunctionEditor();return false;}},openFunctionEditor:function(){var b=this.parent.parent.parent,c=b.getTokenInputBox(),Z={zIndex:b.zIndex+1,insertMode:true,oi:mstrmojo.ME.ENUM.getNewDefinition(),insertOnFinish:function(d){c.insertTokens(d);}},a=this.parent.functionList.selectedItem;if(b.isBanding&&b.isBanding(a.did)){Z={zIndex:b.zIndex+1,insertMode:true,fctOi:a,id:"mstrBDAE_1",oi:mstrmojo.ME.BandingDAEditor.getNewDefinition(),ide:b};}else{if(mstrmojo.ME.MetricDataService.isBasicAggMap(a.did)||a.did<-1){Z.candidates=c.candidates;Z.did=a.did;Z.id="mstrSME_1";Z.useGUIDefault=true;}else{Z.fctOi=a;Z.id="mstrFE_1";Z.paramItemsPath=b.feParamItemsPath;}}Z.modal=true;b.getModalEditor(Z).open(b);},ondblclick:function(Z){var b=this.getItemNodeFromTarget(Z.getTarget());if(b){var a=this.parent;if(a.selectedCategory>-1&&a.selectedIndex>-1){a.handleSelectedFunction(true);}}},useRichTooltip:false,onmouseover:function(b,j){var l=this,a=this.parent,k=a.selectedCategory,d=b.getAttribute("idx"),c=W.eventTarget(window,j),Z=c.getAttribute("t")==="edt";if((!isNaN(d)&&d>-1)||Z){window.clearTimeout(l.hideTmr);var h='<dl class="fct-info"><dt class="fct-syntax">'+a.getFunctionSyntax(k,d)+'</dt><dd class="fct-desc">'+(a.getFunctionDesc(k,d)+"  "+a.getFunctionHelpTopic(k,d))+"</dd></dl>";var m=mstrmojo.dom.position(b,true),n=function(){var p=(l.tooltip&&l.tooltip.domNode.offsetWidth+15)||200,e=m.x,t=m.y-b.offsetHeight/2,r=e<p?"left":"right",q=e<p?mstrmojo.tooltip.POS_TOPLEFT:mstrmojo.tooltip.POS_TOPRIGHT;e=e<p?m.x+m.w+8:e-10;return{arrow_css:r,contentNodeCssClass:"me-tooltip-content "+r,posType:q,left:e,top:t};},g=n(),f="hidden";l.richTooltip=Z?l.getEditBtnTooltip(c,d,g):{cssClass:f,contentNodeCssClass:"me-tooltip-content "+g.arrow_css,posType:g.posType,left:g.left,top:g.top,content:h,areaId:d};l.useRichTooltip=true;l.hasOpenTooltip=false;l.showTooltip();window.clearInterval(l.posTmr);var o=0;if(!l.posTmr){l.posTmr=window.setInterval(function(){if(l.tooltip){var q=l.tooltip.domNode,p=q.childNodes[1].firstChild,e=g.posType;g=n();if(g.posType!==e){q.style.left=g.left+"px";M.addClass(p,[g.arrow_css]);}window.setTimeout(function(){M.removeClass(q,f);},10);window.clearInterval(l.posTmr);delete l.posTmr;}else{if(o++>10){window.clearInterval(l.posTmr);}}},200);}X.call(this,!Z);}},getEditBtnTooltip:function(a,b,Z){if(Z){return{posType:mstrmojo.tooltip.POS_TOPLEFT,content:mstrmojo.desc(13141,"Edit function parameters"),top:Z.top+50,left:Z.left+200,cssClass:"vi-regular vi-tooltip-A"};}return{posType:mstrmojo.tooltip.POS_TOPRIGHT,contentNodeCssClass:"me-tooltip-content regular up tbFunction",top:28,left:67,refNode:a,content:mstrmojo.desc(13141,"Edit function parameters"),areaId:b};},onmouseout:function(){var Z=this;this.hideTmr=window.setTimeout(function(){X.call(Z);Z.hideTooltip();Z.useRichTooltip=false;},500);}},R.copy({slot:"buttonNode",cssText:"text-align: center; float:left;",text:mstrmojo.desc(9563,"Switch to Formula Editor"),title:mstrmojo.desc(9597,"Build a metric formula using metrics, facts, attributes and functions."),closeAfterSwitch:false,getEditor:function(){return this.parent;},postclick:function(){this.getEditor().buttonNode.style.visibility="hidden";},bindings:{visible:function(){return !this.parent.insertMode;}}},R.copy(mstrmojo.ME._MetricEditorHelper.switchRef)),{scriptClass:"mstrmojo.HBox",alias:"buttonBar",slot:"buttonNode",cssClass:"mstrmojo-ME-buttonBox",cellCssClass:"subBox",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Editor-button mstrmojo-WebButton",text:mstrmojo.desc(221,"Cancel"),onclick:function(){this.parent.parent.handleCloseAction();}}]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.List","mstrmojo.ui._HasScroller");var E=mstrmojo.dom;mstrmojo.ME.FunctionList=mstrmojo.declare(mstrmojo.List,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ME.FunctionList",setupScrollNodes:function D(){this.scrollNode=this.itemsContainerNode;this.scrollNode.style.height=this.scrollboxNode.offsetHeight+"px";this.scrollboxNode=this.itemsContainerNode;},getItemNodeFromTarget:function C(H){var G=mstrmojo.dom.findAncestorByAttr(H,"idx",true,this.domNode);return(G&&G.node)||null;},premousedown:function A(H){this.changeByMouse=false;if(E.isPrimaryMouseBtn(H.e)){var I=this.getItemNodeFromTarget(H.getTarget()),G=I&&parseInt(I.getAttribute("idx"),10);if(G!==null&&!isNaN(G)&&G!==this.selectedIndex){this.domNode.tabIndex=0;this.domNode.focus();this.changeByMouse=true;}this._super(H);}},getDragData:function B(G){return{item:this._super(G)};},premouseup:function F(G){if(E.getButton(G.hWin,G.e)===E.MOUSE_BUTTON.LEFT){this._super(G);return true;}mstrmojo.dom.stopPropogation(G.hWin,G.e);mstrmojo.dom.preventDefault(G.hWin,G.e);return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.dom","mstrmojo.Editor","mstrmojo.SaveAsEditor","mstrmojo.UUID","mstrmojo._FormatDefinition","mstrmojo.ME.MetricDataService","mstrmojo.ME.MetricFormatEditor","mstrmojo.ColorPicker","mstrmojo.ME.MetricEditBox","mstrmojo.InlineEditBox","mstrmojo.MenuButton","mstrmojo.ME._MetricEditorHelper","mstrmojo.ME.FunctionSelector","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.mstr.EnumDSSXMLObjectSubTypes","mstrmojo.fe.FilterUtils","mstrmojo.ExpressionToolbar");mstrmojo.requiresDescs(517,1907,2213,2827,9559,9562,11897);var I=mstrmojo.desc,D=mstrmojo.array,R=mstrmojo.dom,J=mstrmojo.hash,C=mstrmojo.UUID,T=mstrmojo.mstr.EnumDSSXMLObjectTypes,H=mstrmojo.mstr.EnumDSSXMLObjectSubTypes,S=mstrmojo.fe.FilterUtils.getExprXml;var P={functionSelector:0,advanced:65536,simple:131072,func:196608},M=mstrmojo.ME.MetricEditBox.VALIDATION_STATUS;function B(U,W){var V=[];U.oi.tks.met=P.functionSelector;U.oi.tks.items=V;W.oi=U.oi;W.clearTokens(V);}mstrmojo.ME.MetricEditor=mstrmojo.declare(mstrmojo.Editor,[mstrmojo.ME._MetricEditorHelper],{scriptClass:"mstrmojo.ME.MetricEditor",cssClass:"mstrmojo-MetricEditor",zIndex:10,title:I(517,"Metric"),help:"Metric_Formula_Editor.htm",init:function Q(U){this._super(U);this.formulaLabel.set("visible",mstrApp&&mstrApp.isWSStyling);},getMetricEditBox:function K(){return this.metricEditBox;},getTokenInputBox:function K(){return this.metricEditBox.inputBox;},isEmpty:function L(){return this.getMetricDefAsTokens().length===0;},onObjectInsert:function N(V){var W=this.metricEditBox.inputBox,U={v:mstrmojo.ME.MetricToken.brackets(V.n),oi:V,isNew:true};W.insertTokens([U]);this.closePopup();},onOpen:function F(){var U=this.oi,V=this.metricEditBox,W=V.inputBox;this._setupCandidatesCache(W);W.noCache=this.noCache;W.useKeyDelay=this.useKeyDelay;this.set("title",I(9559,"Formula Editor:")+" "+U.n);if(U&&U.tks){this.preprocessTokenStram(U.tks);W.oi=U;W.set("items",U.tks.items);this.originTks=J.clone(U.tks.items);this.originAfb=U.mps&&U.mps.afb;this.originSfb=U.mps&&U.mps.sfb;}V.set("iStatus","");V.set("vStatus",U.tks.items.length>0?this.vStatus:mstrmojo.ME.MetricEditBox.VALIDATION_STATUS.UNKNOWN);if(W.items.length===0){this.set("cValid",false);}},getMetricDefAsTokens:function O(){return(this.oi.tks.items);},onClose:function E(){if(this._super){this._super();}this.vStatus=mstrmojo.ME.MetricEditBox.VALIDATION_STATUS.UNKNOWN;this.metricEditBox.inputBox.oi=null;this.metricEditBox.inputBox.editNode.onblur=null;this.metricEditBox.inputBox.resetTokensCache();},handleValidation:function G(U){this.metricEditBox.handleValidation(U);},clientSideValidation:function A(U){this.metricEditBox.clientSideValidation(U);},children:[mstrmojo.ME._MetricEditorHelper.formatAndOptionsBarRef,mstrmojo.ME._MetricEditorHelper.nameEditBoxRef,{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-ME-formula-label",alias:"formulaLabel",text:I(1907,"Formula")},{scriptClass:"mstrmojo.ExpressionToolbar",alias:"metricEditorOperators",onmouseup:function(V){var W=mstrmojo.dom.eventTarget(V.hWin,V.e),U=W.getAttribute("idx")||-1;this.validate(V,U);},validate:function(b,a){this.set("selectedIndex",a);var Z=this.parent,V=Z.metricEditBox,X=V.inputBox,W=this.selectedItem,d=W&&W.v.split(""),Y=[];if(!W){return ;}if(R.getButton(b.hWin,b.e)===R.MOUSE_BUTTON.LEFT){switch(W.t){case 1:D.forEach(d,function U(e){Y.push({v:e,isDelimiter:true,isNew:true});},this);var c=X.insertTokens(Y);if(Y.length===2){X._delaySetTextCaretPos(X.itemsContainerNode.childNodes[c-1],1);}break;case 2:V.set("vStatus",M.VALIDATING);Z.tbValidate=this;Z.validateSyntax(this);break;case 3:B(Z,X);X.raiseChangeEvent({type:"clear"});break;}}}},{scriptClass:"mstrmojo.ME.MetricEditBox",alias:"metricEditBox",bindings:{browseItemVisible:"!this.parent.isDME",candidates:"this.parent.candidates"},ontokensModify:function(V){this.parent.onmetricModify();var U=this.inputBox.items.length;this.parent.set("cValid",U>0);if(U===0){this.parent.btnSwitch.set("enabled",true);}},continueValidataion:function(){var U=this.parent;U.validateSyntax(U.tbValidate);},validateFunc:function(U){this.parent.parent.metricEditorOperators.validate(U,7);},editEmbeddedFilterToken:function(X){var Y=this.parent;if(Y.openConditionMetricFilterEditor){var c=Y.dsUnits,a=[],d=[],e=mstrApp.getRootController().docCtrl.model,b=e&&e.getDataService(),U;D.forEach(c&&c.items,function(f){if(f.t===T.Attribute){a.push(f);}else{if(f.t===T.Metric){d.push(f);}}});var Z=X.data&&X.data.oi;var W=Z&&Z.condition||e.getEmbeddedFilter(Z&&Z.did);U=W&&W.exp;var V=function(g){U=g.expr;var h=C.create(),f=h;var j=function(){var k=X.data;if(U){k.oi={did:h,n:f,t:T.Filter,st:H.Filter,isEmbedded:true,condition:{did:h,exp:U}};k.v=f;}else{k.v=" ";k.oi=null;}X.set("data",k);Y.onmetricModify();};if(U){b.createEmbeddedFilter({expr:S(U),expJson:U,filterId:h,filterName:f},{success:function(){j();}});}else{j();}};Y.openConditionMetricFilterEditor({filter:U,att:a,mx:d,docModel:e,invalidItems:[],fnOk:V,onCancel:mstrmojo.emptyFn,browseParam:function(f){f.messageID=e.mid;f.datasetID=e.findDatasetIdFromUnit(f.attributeID);}});}}},{scriptClass:"mstrmojo.Button",alias:"btnSwitch",cssClass:"mstrmojo-ME-switch mstrmojo-Editor-button mstrmojo-WebButton",text:I(9562,"Switch to Function Editor"),bindings:{enabled:function(){var V=this.parent.metricEditBox.vStatus===M.ERROR&&!this.parent.cValid,U=parseInt(this.parent.oi.tks.met,10),W=!V&&(!U||(U&&U!==P.advanced));return W;}},onclick:function(){var V=this.parent;var U=function(Z){var a=Z.oi,X=a.tks.met||P.functionSelector,W={zIndex:Z.zIndex+1,candidates:Z.candidates,oi:a,did:a.did,insertMode:false},b={0:"functionSelector",131072:"simpleMetricRef",196608:"wizard"}[X],Y={0:"mstrFSE",131072:"mstrSME",196608:"mstrFE"}[X];if(X===P.functionSelector||X===P.func){W.functions=Z.functions;}if(b){if(Z.dirty){W.dirty=Z.dirty;}if(Z.mptf){W.mptf=Z.mptf;}Z.switch2Editor(Y,W);}};if(V.metricEditBox.inputBox.items.length===0){V.close();V.ide.browsersContainer.funcBrowser.handleSelectedFunction();}else{V.cbSwtichEditor=U;V.tbValidate=this;V.validateSyntaxAndSwitch(this,"switch");}},slot:"buttonNode"},mstrmojo.ME._MetricEditorHelper.buttonBarRef]});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.css","mstrmojo.Box","mstrmojo.Pulldown","mstrmojo.Label","mstrmojo.TextBoxWithLabel","mstrmojo.ME.MetricEditor","mstrmojo.ME._MetricEditorHelper","mstrmojo.ME.FunctionInfo","mstrmojo.func","mstrmojo.mstr.EnumDSSXMLObjectSubTypes","mstrmojo.mstr.EnumDSSXMLObjectTypes");mstrmojo.requiresDescs(1952,2213,8950,9560);var R=mstrmojo.hash,O=mstrmojo.array,e=mstrmojo.css,P=mstrmojo.ME._MetricEditorHelper,h=mstrmojo.ME.MetricDataService,Q=mstrmojo.func,M=mstrmojo.mstr.EnumDSSXMLObjectTypes,f=mstrmojo.mstr.EnumDSSXMLObjectSubTypes;var N={SUM:"8107C31BDD9911D3B98100C04F2233EA"};var B=null;mstrmojo.ME.ENUM={METRIC_ACTIONS:{ADD:"add",EDIT:"edit",EDIT_NEW:"editNew"},EDITOR_IDS:{ADVANCED:"mstrME",FORMULA:"mstrME",WIZARD:"mstrFE",SIMPLE:"mstrSME",SELECOTR:"mstrFSE"},EDITOR_TYPES:{ADVANCED:"ADVANCED",FUNCTION:"FUNCTION",SIMPLE:"SIMPLE",SELECTOR:"SELECTOR"},METRIC_EDIT_TYPES:{ADVANCED:65536,SIMPLE:131072,FUNCTION:196608},METRIC_TYPES:{65536:"ADVANCED",131072:"SIMPLE",196608:"FUNCTION"},NEW_METRIC_DEFINITION:{did:"",n:mstrmojo.desc(2213,"New Metric"),tks:{items:[],vs:0,vm:""},mhfts:{},mvfts:{}},getNewDefinition:function(){return{did:"",n:mstrmojo.desc(2213,"New Metric"),tks:{items:[],vs:0,vm:""},mhfts:{},mvfts:{}};}};var F=function(j){j=R.copy(j,{left:0,top:0});this.left=(parseInt(this.left||this.editorNode.style.left,10)||0)+j.left+"px";this.top=(parseInt(this.top||this.editorNode.style.top,10)||0)+j.top+"px";};var Y=function(k){var n=this,j=n.isDME,m=k.id,l=m.replace("_1",""),o=n.getEditorHelpTopic(l);var p={scriptClass:n.getEditorScriptClass(l),id:m,isDME:j,zIndex:n.zIndex++,oi:k.oi,bindings:{functions:n.funcsPath||"mstrmojo.all.mstrMetricIDE.functions",candidates:n.candidatesPath||"mstrmojo.all.mstrMetricIDE.candidates",dsUnits:"this.ide.dsUnits",attrCandidates:"this.ide.attrCandidates"},tbBrowsable:!j,tbFormatable:!j,ide:n};if(o){p.help=o;}R.copy(k,p);return p;};var A=function(j){var l=this.getEditorId(j),k=mstrmojo.all[l];if(!k){k=mstrmojo.insert(Y.call(this,j));k.onvisibleChange=F;k.onPostClose=function(){this.destroy();};}R.copy(j,k);k.candidates=null;k.set("candidates",this.candidates);return k;};var E=function(j){var n=this,m=j.oi;if(n.setExtraMetricTokens){n.setExtraMetricTokens(m);}var l=this.getEditorId(j);var k=mstrmojo.all[l];if(!k){var o=mstrmojo.hash.copy({slot:"editorsContainerNode",left:"0px",top:"0px",modal:false,showTitle:false,postCreate:function(){e.addWidgetCssClass(this,"mstrmojo-MetricIDE-editor inline");},onPostClose:function(){var p=n.curtain;if(p){p.set("visible",false);p.set("refNode",null);}n.editorConfig=null;n.set("editor",null);},onCancel:function(){n.close();},onSaved:function(){n.close();},switch2Editor:function(q,p){if(p){p.id=q;}n.set("editorConfig",{editorId:q,cfg:p});}},Y.call(this,j));if(n.isExpEditor(l)){o.onvisibleChange=function(){var y=B,p=n.browsersContainer.ob,z=this.visible,w=250;if(z){p.set("visible",z);var r=n.browsersContainer.funcBrowser,q=r.functionList,u=q.domNode,t=u.querySelector&&u.querySelector(".mstrmojo-suggest-text.fn[idx]");if(t){var x=t.lastChild;e.addClass(x,"forceDisplay");window.setTimeout(function(){q.richTooltip=q.getEditBtnTooltip(x);mstrmojo.tooltip.open(q);window.setTimeout(function(){e.removeClass(x,"forceDisplay");q.hideTooltip();},1000);},w);}}else{p.set("visible",z);}e.toggleClass(n.editorNode,"exp",z);e.addClass(n.editorNode,"transition-left");mstrmojo.dom.center(y.editorNode);window.setTimeout(function(){e.removeClass(n.editorNode,"transition-left");F.call(n);},w);};}if(n.configInlineEditor){n.configInlineEditor(o);}k=mstrmojo.insert(o);k.attachEventListener("fctDidChange",n.browsersContainer.funcBrowser.id,"onfctDidChange");n.addChildren([k]);}else{k.set("oi",m);k.candidates=null;k.set("candidates",n.candidates);}if(j.useGUIDefault!==true){k.useGUIDefault=false;}n.set("editor",k);n.set("help",k.help);return k;};function L(){var l=this,n=500,k=function(p){var o=(p&&p.items)||[],q=l.candidates||{items:[]};q.items=q.items.concat(o);q.isComplete=q.isComplete&&(p.bc===-1||(p.bb+p.bc>p.sz));if(l.functions){q.items=q.items.concat(h.sortFunctions(l.functions));}l.candidates=null;l.set("candidates",q);},j=function(o){mstrmojo.alert(o.getResponseHeader("X-MSTR-TaskFailureMsg"));},m=function(o){if(o){var p={items:o.items,isComplete:(o.bc===-1||(o.bb+o.bc>o.sz))};l.candidates=p;}h.getMetrics({rootFolderType:h.rootFolderTypes.ALL,pattern:"*",blockBegin:1,blockCount:n},{success:k,failure:j});};if(!this.noCache&&!this.candidates){h.getMetricComponents({rootFolderType:h.rootFolderTypes.ALL,pattern:"*",blockBegin:1,blockCount:n},{success:m,failure:j});}else{k({bc:-1,mcComplete:true});}}var a=function(l,n){var m=null,k=function(w,r){if(!mstrmojo.all[n.id]||mstrmojo.all[n.id]._timeStamp!==r){return ;}if(w&&w.tks){P.preprocessTokenStram(w.tks);P.checkEditorFallback(h.sortFunctions(n.functions),w);}n.set("oi",w);if(!n.action.n){n.set("title",n.titleBase+" - "+w.n);}if(n.action.cmd!==mstrmojo.ME.ENUM.METRIC_ACTIONS.ADD){var u=n.showAsSimpleIDE(w);n.set("showLeftPanel",!u);var v=E.call(n,{id:n.editorId,oi:w,functions:m,simple:u});v.open(n);if(mstrApp&&mstrApp.isVI&&!w.did&&v.id==="mstrME"){var q=n.browsersContainer,t=q&&q.funcBrowser,p=t&&t.functionList;if(p){p.set("selectedIndex",Math.max(O.find(p.items||[],"did",N.SUM),0));v.close();t.handleSelectedFunction();}}}},j=function(p){mstrmojo.alert(p.message||p.getResponseHeader("X-MSTR-TaskFailureMsg"));},o=function(q){try{if(!mstrmojo.all[n.id]){return ;}m=n.filterFunctions(q);n.set("functions",m);L.call(n);n.loadObjectDefn({success:function(r){k(r,n._timeStamp);},failure:j});}catch(p){}};h.getFunctions({success:o,failure:j});};mstrmojo.ME.MetricIDE=mstrmojo.declare(mstrmojo.Editor,[],{scriptClass:"mstrmojo.ME.MetricIDE",cssClass:"mstrmojo-MetricIDE",id:"mstrMetricIDE",_timeStamp:0,titleBase:mstrmojo.desc(11579,"Metric Editor"),title:this.titleBase,help:" ",zIndex:4,noCache:true,editorId:null,editor:null,editorConfig:{editorId:null,cfg:{}},getEditorHelpTopic:function V(j){switch(j){case"mstrME":return"Creating_a_new_derived_metric_from_scratch.htm";}return"create_derived_metric.htm";},getEditorScriptClass:function H(j){return"mstrmojo.ME."+{mstrFE:"FunctionWizard",mstrSME:"SimpleMetricEditor",mstrME:"MetricEditor",mstrRFE:"RankEditor",mstrOFE:"OLAPEditor"}[j];},oneditorConfigChange:function S(){var k=this.editorConfig,j=k.cfg;if(this.editor){this.editor.close();}E.call(this,j).open(this,j);},showLeftPanel:true,onshowLeftPanelChange:function K(){e.toggleClass(this.editorNode,"simple",!this.showLeftPanel);if(this.editor){this.editor.set("simple",!this.showLeftPanel);this.browsersContainer.funcBrowser.set("showFullSyntax",this.isExpEditor(this.editor.id));}var j=this.getBrowsersContainer().domNode.offsetWith/2||120;this.set("left",(parseInt(this.left||this.editorNode.style.left,10)||0)+(this.showLeftPanel?-1:1)*j+"px");if(this.showLeftPanel){this.browsersContainer.funcBrowser.functionList.refresh();}},filterFunctions:function g(j){return j;},isExpEmpty:function d(){var j=mstrmojo.all.mstrME;return j&&j.getMetricDefAsTokens().length===0;},init:function X(l){if(this._super){this._super(l);}var m=mstrApp,j=m&&m.useQuickSearch&&m.useQuickSearch(),k=j?((m&&m.searchAutoCompleteDelay&&m.searchAutoCompleteDelay())||0):0;this.suggestDelay=k||200;this.noCache=this.noCache&&j&&!this.isDME;h.suggestDelay=this.suggestDelay;h.noCache=this.noCache;B=this;this._timeStamp=mstrmojo.now();},onClose:function D(){if(this.editor){this.editor.close();}this.browsersContainer.funcBrowser.cleanup();this.destroy();},onOpen:function I(){F.call(this);this.set("showLeftPanel",true);a(this.metricId||this.did,this);this.set("title",this.titleBase+" - "+(this.action.n||mstrmojo.desc(2213,"New Metric")));B=this;},setExtraMetricTokens:mstrmojo.emptyFn,getTokenInputBox:function C(){return mstrmojo.all.mstrME&&mstrmojo.all.mstrME.metricEditBox.inputBox;},insertTokens:function(j){return this.getTokenInputBox().insertTokens(j);},onObjectInsert:function(j){mstrmojo.all.mstrME.onObjectInsert(j);},setRefOi:mstrmojo.emptyFn,children:[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-MetricIDE-browsers-container",alias:"browsersContainer",children:[{scriptClass:"mstrmojo.ME.FunctionSelector",cssClass:"mstrmojo-MetricIDE-editor inline",alias:"funcBrowser",left:"0px",top:"0px",modal:false,showTitle:false,bindings:{functions:function(){return this.parent.parent.functions;},oi:function(){return this.parent.parent.oi||mstrmojo.ME.ENUM.getNewDefinition();},isDME:function(){return this.parent.parent.isDME;},activeEditor:function(){var j=this.parent.parent.editor;this.buttonNode.style.visibility=this.parent.parent.editor?"hidden":"visible";if(j){this.set("showFullSyntax",B.isExpEditor(j.id));}}},onfctDidChange:function(l){var k=Math.max(0,h.getCategoryIndex(l.did)),j=this.fcHBox.fcPulldown,n=j.selectedItem.did;if(n<0){return ;}j.set("value",h.getFunctionCatList()[k].did);var m=this.functionList;window.setTimeout(function(){k=mstrmojo.array.find(m.items,"did",l.did);m.singleSelect(k,false);},100);},switch2Editor:function(k,j){if(j){j.id=k;}B.set("editorConfig",{editorId:k,cfg:j});},handleCloseAction:function(){if(this.onPreClose()){B.close();}},handleSelectedFunction:function(n){var j=this;var l=B.editor;if(l&&B.isExpEditor(l.id)){if(n){B.insertTokens(j.getTokens());var k=function(o){return !isNaN(o)&&o<0;};if(!k(this.functionList.selectedItem.did)){B.getTokenInputBox().insertParenthesisTokens();}}}else{var m=j.functionList;j.openWizard(m.items[m.selectedIndex]);}},openWizard:function(m,l){B.help=B.getEditorHelpTopic("mstrFE");if(!m||m.did===-7){return ;}var k=B,j={zIndex:k.zIndex+1,candidates:k.candidates,oi:mstrmojo.ME.ENUM.getNewDefinition()};if(h.isBasicAggMap(m.did)||m.did<-1){j.did=m.did;j.id="mstrSME";j.useGUIDefault=true;}else{j.fctOi=m;j.id="mstrFE";j.paramItemsPath=k.feParamItemsPath;}k.setRefOi(j);k.set("editorConfig",{cfg:j,opener:l});}}]},{scriptClass:"mstrmojo.Box",alias:"editorsContainer",cssClass:"mstrmojo-MetricIDE-editors-container",children:[{scriptClass:"mstrmojo.Label",cssText:"line-height:380px; text-align:center;",text:mstrmojo.desc(11567,"Select a function from left"),bindings:{visible:"!this.parent.parent.editor",editor:function(){return !this.parent.parent.editor;}}}]},{scriptClass:"mstrmojo.ME.FunctionInfo",slot:"buttonNode",alias:"funcSyntaxDesc",bindings:{foi:function(){return this.parent.browsersContainer.funcBrowser.functionList.selectedItem;},showFullSyntax:function(){return this.parent.browsersContainer.funcBrowser.showFullSyntax;}}}],getBrowsersContainer:function c(){return this.browsersContainer;},renderObjectsBrowser:function b(){var k=this;var j=this.getBrowsersContainer();if(j){j.addChildren([{scriptClass:"mstrmojo.ObjectBrowser",cssClass:"mstrmojo-MetricIDE-ob",alias:"ob",fishEyeVisible:false,closeable:false,closeOnSelect:false,quickSearch:true,visible:false,bindings:{visible:function(){var l=this.parent.parent.editorRef;return l&&l.id==="mstrME";}},onvisibleChange:function(){if(this.visible&&!this.loaded){this.browse({folderLinksContextId:23,onSelectCB:[k,"onObjectInsert"],useDblSelect:true,browsableTypes:""});this.loaded=true;}},postCreate:function(){this.children=[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(1952,"All objects"),cssClass:"mstrmojo-MetricIDE-obLabel"}].concat(this.children);}}]);}},postBuildRendering:function(){if(this._super){this._super();}this.addSlots({editorsContainerNode:this.editorsContainer.domNode});this.renderObjectsBrowser();this.set("help",this.getBrowsersContainer().funcBrowser.help);},onmousedown:function(k){var j=k.e.target;var l=this.getTokenInputBox();if(l&&!mstrmojo.dom.contains(l.domNode,j,true,this.editorNode)){this.getTokenInputBox().handleblur();}},loadObjectDefn:function Z(n){var k=this.metricId||this.did;if(!this.metric&&this.datasets){var j;R.forEach(this.datasets,function(o){O.forEach(o.mx,function(p){if(p.did===k){j=p;return false;}});if(j){return false;}});this.metric=j;}var m=this.metric&&this.metric.condition;if(k){if(mstrApp&&mstrApp.isVI){n.success=Q.composite([function(p){if(!p.condition){p.condition=m;}var t=p.tks,q=[],u={};O.forEach(t&&t.items,function(v){var w=v&&v.oi;if(w&&w.t===M.Filter&&w.st===f.Filter){q.push(w.did);u[w.did]=v;}});var o=mstrApp&&mstrApp.getRootController().docCtrl.model;var r=[];O.forEach(q,function(w){var v=o.getEmbeddedFilter(w);if(v){r.push(v);u[w].oi.isEmbedded=true;u[w].oi.condition=v;}});p.conditions=r;},n.success]);}h.getMetricDefintion({id:k,msgID:this.isDME?mstrApp.getMsgID():null},n);}else{var l=mstrmojo.ME.ENUM.getNewDefinition();n.success(l);}},isExpEditor:function W(j){return j==="mstrME";},getModalEditor:function U(j){this.setRefOi(j);return A.call(this,j);},getEditorId:function T(k){var m=k.oi,j=m&&m.tks&&m.tks.met;var l=k.id||{65536:"mstrME",131072:"mstrSME",196608:"mstrFE"}[j]||"mstrME";if(l==="mstrSME"||l==="mstrFE"||l==="mstrSME_1"||l==="mstrFE_1"){l=P.getSpecialFunctionEditorId(this.getRootFunction(k),k.modal)||l;}k.id=l;return l;},showAsSimpleIDE:function G(j){var k=false;if(this.isDME&&j.did&&j.tks){k=parseInt(j.tks.met,10)!==mstrmojo.ME.ENUM.METRIC_EDIT_TYPES.ADVANCED&&!mstrmojo.string.isEmpty(P.getSpecialFunctionEditorId(j.tks.items[0].oi));}return k;},getRootFunction:function J(j){var k=j.fctOi;if(!k){k=P.getRootFunction(j.oi);}return k;}});}());(function(){mstrmojo.requiresCls("mstrmojo.form","mstrmojo.hash","mstrmojo.date","mstrmojo.dom","mstrmojo.NumberFormat","mstrmojo.Button","mstrmojo.ME.MetricIDE","mstrmojo.mstr._ObjectActions");function E(H,F,J,G){var I=mstrApp.sessionManager;if(I&&I.sessionTimedout){I.openLoginEditor({success:function(){if(G!=="_blank"){mstrApp.showWait();}mstrmojo.form.send(H,F,J,G);}});}else{if(G!=="_blank"){mstrApp.showWait({message:"Executing..."});}mstrmojo.form.send(H,F,J,G);}}function C(F){E(F,null,"post");}mstrmojo.home.controllers._CardActions=mstrmojo.provide("mstrmojo.home.controllers._CardActions",mstrmojo.hash.copy(mstrmojo.mstr._ObjectActions,{_mixinName:"mstrmojo.home.controllers._CardActions",executeLink:function D(F){mstrApp.showWait({message:"Executing..."});var G=mstrmojo.form.createDynamicForm(mstrApp.name+F);G.submit();G.parentNode.removeChild(G);},executeEvent:function A(H,G){var F=mstrmojo.addCSRFTokenToURL("?evt=#&src=##.#".replace("##",mstrApp.name).replace(/#/g,H));mstrmojo.hash.forEach(G,function(J,I){F+="&"+I+"="+J;});this.executeLink(F+"&"+mstrApp.name+"="+encodeURIComponent(mstrApp.servletState));},save:function B(F){this.model.saveCards(F);}}));}());(function(){mstrmojo.requiresCls("mstrmojo.TextBoxWithLabel","mstrmojo.ui.menus.EditorConfig","mstrmojo.home.EnumHomeCards","mstrmojo.home.HomeModel","mstrmojo.home.ui.Card","mstrmojo.home.ui.FolderPicker","mstrmojo.home.views.HomeView","mstrmojo.home.controllers._CardActions");mstrmojo.requiresDescs();var G=mstrmojo.array;var F=mstrmojo.home.EnumHomeCards,D=F.types,C=F.items;var A={config:{waitBoxCfg:{message:mstrmojo.desc(10492,"Saving...")}}};mstrmojo.home.controllers.HomeController=mstrmojo.declare(mstrmojo.Obj,[mstrmojo.home.controllers._CardActions],{scriptClass:"mstrmojo.home.controllers.HomeController",model:null,view:null,start:function H(I){var K=new mstrmojo.home.HomeModel({modelData:I.modelData});K.controller=this;this.set("model",K);var J=this.view=new mstrmojo.home.views.HomeView({id:"homeView",controller:this,model:K,placeholder:I.placeholder});J.render();this.addDisposable([K,J]);},getDashboardSettingEditorConfig:function(K,J){var I=function(){return !mstrmojo.string.isEmpty(this.splashURL.value)&&!mstrmojo.string.isEmpty(this.objectURL.value);};return new mstrmojo.ui.menus.EditorConfig({cssClass:"mstrmojo-CardMenuEditor-dashboard",data:K||{},contents:[{scriptClass:"mstrmojo.TextBoxWithLabel",alias:"splashURL",label:mstrmojo.desc(4226,"Image Source:"),cssDisplay:"block",value:K.splashURL,onvalueChange:function(){if(this.parent.data){this.parent.data.set("splashURL",mstrmojo.string.encodeHtmlString(this.value));this.parent.data.set("valid",I.call(this.parent));}}},{scriptClass:"mstrmojo.TextBoxWithLabel",alias:"objectURL",label:mstrmojo.desc(8996,"Link to:"),cssDisplay:"block",value:K.objectURL,onvalueChange:function(){if(this.parent.data){this.parent.data.set("objectURL",mstrmojo.string.encodeHtmlString(this.value));this.parent.data.set("valid",I.call(this.parent));}}}],bindings:{okEnabled:"this.valid",valid:function(){return this.data.valid;}},fnOk:J});},getDashboardSettingTitleConfig:function B(K,J){var I=this;return new mstrmojo.ui.menus.EditorConfig({cssClass:"mstrmojo-CardMenuEditor-dashboard",data:K||{title:I.title},contents:[{scriptClass:"mstrmojo.TextBoxWithLabel",alias:"lblTitle",label:mstrmojo.desc(3297,"Title:"),value:K.title,onvalueChange:function(){if(this.parent.data){this.parent.data.set("title",this.value);}}}],fnOk:J});},getAddMenuCfg:function E(){var J=this,I=this.view,K=new mstrmojo.ui.menus.MenuConfig();G.forEach(C,function(L){if(L.t===D.HTML&&!mstrApp.features["create-html-container"]){return ;}switch(L.t){case D.IMAGE:K.addPopupMenuItem(L.n,I.id,function(){return J.getDashboardSettingEditorConfig({},function(N,M){I.addCard({t:L.t,objectURL:N.objectURL,splashURL:N.splashURL});});});break;case D.BROWSE:K.addPopupMenuItem(L.n,I.id,function(){var M=new mstrmojo.ui.menus.MenuConfig();G.forEach(L.items,function(O){switch(O.t){case D.FOLDER:M.addMenuItem(O.n,"",function N(){(new mstrmojo.home.ui.FolderPicker({onOK:function(P){I.addCard({t:O.t,n:P.n,did:P.did});}})).open();});break;default:M.addMenuItem(O.n,"",function(){I.addCard({t:O.t});});}});return M;});break;default:K.addMenuItem(L.n,"",function(){I.addCard({t:L.t});});}});return K;}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.css","mstrmojo.array","mstrmojo.dom","mstrmojo.locales","mstrmojo._IsWebApp","mstrmojo.home.controllers.HomeController");mstrmojo.requiresDescs();var E=mstrmojo.dom;function C(){E.attachEvent(document,"keydown",function(J){var L=J.keyCode===8;J=J||window.event;if(L){var K=J.srcElement||J.target,H=K.tagName.toUpperCase(),I=H==="INPUT"&&K.type.toUpperCase();if(H==="TEXTAREA"||K.isContentEditable||(I==="TEXT"||I==="PASSWORD"||I==="NUMBER"||I==="FILE"||I==="EMAIL"||I==="SEARCH"||I==="DATE")){L=K.readOnly||K.disabled;}if(L){E.preventDefault(window,J);}}});}mstrmojo.home.HomeApp=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._IsWebApp],{scriptClass:"mstrmojo.home.HomeApp",pageName:"",homeCtrl:null,enableWaitBox:true,start:function G(){var H=this.getController();this.addDisposable([H]);H.start({placeholder:this.placeholder,modelData:this.homeModelData});this.startSessionManager();C();},getController:function F(){this.homeCtrl=this.homeCtrl||new mstrmojo.home.controllers.HomeController();return this.homeCtrl;},onerror:function A(H,L){if(!H||H.handledError){return ;}var K=[],J={title:"",message:mstrmojo.desc(6828,"Error:")+" ",sourceURL:"Source URL: ",fileName:"File: ",lineNumber:"Line: ",line:"Line: "};mstrmojo.hash.forEach(J,function(M,N){if(H[N]!==undefined){K.push(M+H[N]);if(N==="title"){K.push("");}}});if(H.getResponseHeader){K.push("XHR: "+H.getResponseHeader("X-MSTR-TaskFailureMsg"));}var I=K.join("\n");if(I.length){mstrmojo.alert(I,L);H.handledError=true;mstrmojo.dbg(H.stack||I);}},getWaitBoxPosition:function D(){var H=this.homeCtrl.view;return{top:E.position(H.pathbarNode).h+2};},executeCommand:function B(H,I){if(typeof this[H]==="function"){this[H](I);}else{this.homeCtrl.executeCommand(H,I);}}});}());