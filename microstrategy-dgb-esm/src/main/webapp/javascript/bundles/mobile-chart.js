(function(){mstrmojo.vi.ui.theme=mstrmojo.provide("mstrmojo.vi.ui.theme",{getThemeClass:function A(){var D=this.parent||this.opener,C="",B;while(D){var E=D.themeClassName;if(E){C=E;break;}B=D.parent||D.opener;if(B===D){break;}D=B;}return C;}});}());mstrmojo.chart.enums.EnumLabelLevelOption={LLO_NORMAL:0,LLO_COMMON:1,LLO_SPECIFIC:2};mstrmojo.chart.enums.EnumGraphMatrixMarkerTypeInChart={_LINE_IN_LINE:0,_DOTS_IN_LINE:1,_ISODOT_IN_LINEAREA:2,_MUTATION_IN_LINE:3,_BAR:4,_SHAPES_IN_BUBBLESCATTER:5,_SHAPES_IN_GRID:6,_TICK_CATEGORY:7,_TICK_VALUE:8,_TICK_GRID:9,_PIE:10};(function(){var A=400,B=1500;mstrmojo._CanHandleTwoClicks=mstrmojo.provide("mstrmojo._CanHandleTwoClicks",{firstClickTimeStamp:undefined,firstClickTarget:undefined,onclick:function(C){var D=new Date();timeStamp=D.getTime();if(D-this.firstClickTimeStamp<B&&D-this.firstClickTimeStamp>A){C.secondTarget=C.getTarget();C.firstTarget=this.firstClickTarget;this.onTwoClicks(C);C.cancel();}else{this.firstClickTarget=C.getTarget();this.firstClickTimeStamp=timeStamp;}if(this._super){this._super(C);}},onTwoClicks:mstrmojo.emptyFn});}());mstrmojo.chart.enums.EnumCollectionType={CT_NO_COLLECTION:0,CT_LINE:1,CT_GENERAL_SHAPE:2,CT_TEXT:3,CT_VERTICAL_AREA:4,CT_VERTICAL_BAR:5,CT_HORIZONTAL_AREA:6,CT_HORIZONTAL_BAR:7,CT_DEPTH_LINE_OR_LINE_MARKER:8,CT_NO_FORMAT:9};mstrmojo.chart.model.enums.EnumDSSGraphProperty={DssGraphTextContent:9999,DssGraphContent:9999,DssGraphPropertyReserved:0,DssGraphAutoFitO1:4,DssGraphAutoFitO2:5,DssGraphAutoFitX:6,DssGraphAutoFitY1:7,DssGraphAutoFitY2:8,DssGraphGroupSpacing:10,DssGraphRiserWidth:11,DssGraphColorBySeries:12,DssGraphCurveColorAsSeries:13,DssGraphSDMOVAFactor:14,DssGraph2DAngle:18,DssGraph2DDepth:20,DssGraphDepthMode:21,DssGraph2ScaleDirectionX:22,DssGraph2ScaleDirectionY1:23,DssGraph2ScaleDirectionY2:24,DssGraph2ExcludeZeroX:25,DssGraph2ExcludeZeroY1:26,DssGraph2ExcludeZeroY2:27,DssGraphFormatDataTextX:28,DssGraphFormatDataTextY1:29,DssGraphFormatDataTextY2:30,DssGraphFormatX:33,DssGraphFormatY1:34,DssGraphFormatY2:35,DssGraphFormatZ:36,DssGraphGridLineO1:37,DssGraphGridLineO2:38,DssGraphGridLineX:39,DssGraphGridLineY1:40,DssGraphGridLineY2:41,DssGraphLabelModeO1:48,DssGraphLabelModeO2:49,DssGraphLegendLocation:52,DssGraphTitleXLocation:54,DssGraphTitleY1Location:55,DssGraphTitleY2Location:56,DssGraph2LogScaleX:57,DssGraph2LogScaleY1:58,DssGraph2LogScaleY2:59,DssGraphMarkerShape:60,DssGraphMarkerSize:61,DssGraph2DPlaceX:65,DssGraph2DPlaceY1:66,DssGraph2DPlaceY2:67,DssGraphConnectLine:68,DssGraphShowStepLine:70,DssGraph2ScaleEndX:74,DssGraph2ScaleEndY1:75,DssGraph2ScaleEndY2:76,DssGraph2DScaleFreqO1:87,DssGraph2DScaleFreqO2:88,DssGraph2DScaleFreqX:89,DssGraph2DScaleFreqY1:90,DssGraph2DScaleFreqY2:91,DssGraphScaleX:92,DssGraphScaleY1:93,DssGraphScaleY2:94,DssGraphShowSDDataLineType:96,DssGraphSDRiserType:97,DssGraphShowSDLine:98,DssGraphShowSDCurve:99,DssGraphShowSDLinrCorr:101,DssGraphShowSDLinrExp:102,DssGraphShowSDLinrFormula:103,DssGraphShowSDLinrLine:104,DssGraphShowSDLinrLog:105,DssGraphShowSDLinrNatLog:106,DssGraphShowSDLinrNPoly:107,DssGraphSDPolyFactor:108,DssGraphShowSDMeanLine:109,DssGraphShowSDMOVALine:110,DssGraphShowSDSTDDLine:111,DssGraphShowDataText:113,DssGraphShowDivBiPolar:114,DssGraphShowErrorBar:115,DssGraphShowLegendText:116,DssGraphShow2DO1Label:117,DssGraphShow2DO1:-117,DssGraphShow2DO2:118,DssGraphOffScaleTypeX:119,DssGraphOffScaleTypeY1:120,DssGraphOffScaleTypeY2:121,DssGraphShowQuadrants:122,DssGraphShowRiserShadows:123,DssGraphShow2DXTitle:124,DssGraphShow2DY1Title:125,DssGraphShow2DY2Title:126,DssGraphShow2DXLabel:127,DssGraphShow2DX:-127,DssGraphShow2DY1Label:128,DssGraphShow2DY1:-128,DssGraphShow2DY2Label:129,DssGraphShow2DY2:-129,DssGraphShowZeroLineX:130,DssGraphShowZeroLineY1:131,DssGraphShowZeroLineY2:132,DssGraph2DSideO1:133,DssGraph2DSideO2:134,DssGraph2DSideX:135,DssGraph2DSideY1:136,DssGraph2DSideY2:137,DssGraph2DSDSplitY:140,DssGraphStaggerO1:142,DssGraphStaggerO2:143,DssGraphStaggerX:144,DssGraphStaggerY1:145,DssGraphStaggerY2:146,DssGraphUniformBorders:148,DssGraphPieDepthValue:192,DssGraphPieHoleSizeValue:198,DssGraphPieInset:200,DssGraphPiesPerRowValue:201,DssGraphPieRotationValue:202,DssGraphShowFeeler:204,DssGraphShowLBLFeelerLabel:205,DssGraphShowLBLFeeler:-205,DssGraphShowLBLPie:206,DssGraphShowLBLRing:207,DssGraphDeleteSlice:208,DssGraphDetachSlice:209,DssGraphPieRestore:210,DssGraphPieTiltValue:211,DssGraphPieTiltOn:212,DssGraphShowPolarCoordinateAxis:215,DssGraphShowPolarConnectLines:218,DssGraphStockDataValueType:222,DssGraphShowBubbleGrid:245,DssGraphSDShowDataText:247,DssGraphShowTitleSeries:248,DssGraphConnectStackBars:249,DssGraphLegendBox:250,DssGraphLinkColors:260,DssGraph3DCustomView:265,DssGraph3DGridFloor:277,DssGraph3DGridLWall:278,DssGraph3DGridRiser:279,DssGraph3DGridRWall:280,DssGraph3DColTitleLocation:285,DssGraph3DLYTitleLocation:287,DssGraph3DRowTitleLocation:288,DssGraph3DRYTitleLocation:289,DssGraph3DScalefreqX:299,DssGraph3DScalefreqY:300,DssGraph3DScalefreqZ:301,DssGraphShow3DScatterLine:308,DssGraphShow3DLineToLWall:309,DssGraphShow3DLineToFloor:310,DssGraphShow3DLineToRWall:311,DssGraphSD3DRiserType:312,DssGraphShow3DShowDataLabelsBox:313,DssGraph3DOffScaleTypeX:314,DssGraph3DOffScaleTypeY:315,DssGraph3DOffScaleTypeZ:316,DssGraphShow3DCHeader:318,DssGraphShow3DColTitle:319,DssGraph3DShowDataText:320,DssGraphShow3DLNumber:321,DssGraphShow3DLYTitle:322,DssGraphShow3DRNumber:323,DssGraphShow3DRYTitle:324,DssGraphShow3DRHeader:325,DssGraphShow3DRowTitle:326,DssGraphShow3DFloor:327,DssGraphShow3DLegend:328,DssGraphShow3DLWall:329,DssGraphShow3DRWall:330,DssGraph3DViewStruct:337,DssGraphACMColorModel:549,DssGraphLegendItems:554,DssGraphSeriesColor:556,DssGraphReverseGroup:558,DssGraphReverseSeries:559,DssGraphSeriesByColumn:560,DssGraphAreaBackColor:561,DssGraphAreaTransparency:563,DssGraphAreaColor:564,DssGraphAreaPattern:566,DssGraphAreaSFX:567,DssGraphFontAlign:570,DssGraphFontTransparency:573,DssGraphFontColor:574,DssGraphFontName:576,DssGraphFontRotation:578,DssGraphVirtualFontSize:583,DssGraphFontStyle:584,DssGraphType:585,DssGraphLineTransparency:587,DssGraphLineColor:588,DssGraphLinePattern:589,DssGraphVirtualLineWidth:591,DssGraphFootnoteLocation:592,DssGraphFrameLocation:593,DssGraphSubTitleLocation:594,DssGraphTitleLocation:595,DssGraphShowfootnote:596,DssGraphShowSubtitle:597,DssGraphShowTitle:598,DssGraphFontBox:601,DssGraphFontSize:603,DssGraphLockFontSize:604,DssGraphLineWidth:605,DssGraphAreaAlpha:608,DssGraphLineAlpha:609,DssGraphFontAlpha:610,DssGraphAreaCustomBevelEffect:612,DssGraphFormatDataTextAdv:616,DssGraphFormatXAdv:618,DssGraphFormatY1Adv:619,DssGraphFormatY2Adv:620,DssGraphFormatZAdv:621,DssGraphMiddleValue:630,DssGraphSplitYPosition:631,DssGraphAxisShowUserLine:632,DssGraphAxisUserLineValue:633,DssGraphAxisUserLineAxis:634,DssGraphMarkerLayout:637,DssGraphPieDataValueLoc:638,DssGraphPieDataLabelLoc:639,DssGraph2DOrdSpaceMode:642,DssGraphLegendLock:644,DssGraphGridStepY1:645,DssGraphGridStepY2:646,DssGraphGridStepX:647,DssGraphDataTextShowConnectLine:652,DssGraphGridLineZ:658,DssGraphScaleZ:659,DssGraphStaggerZ:660,DssGraph2ScaleEndZ:662,DssGraph2ExcludeZeroZ:663,DssGraph2ScaleDirectionZ:664,DssGraphGridStepZ:665,DssGraphGaugeInfo:668,DssGraphGaugeFancyBox:669,DssGraphSDMarkerSize:671,DssGraphSDMarkerShape:683,DssGraphMetric1:690,DssGraphMetric2:691,DssGraphStockStyle:692,DssGraph2ScaleDirectionY3:693,DssGraph2ExcludeZeroY3:694,DssGraphGridLineY3:697,DssGraphFormatY3Adv:699,DssGraphGridStepY3:701,DssGraphOffScaleTypeY3:702,DssGraphShow2DY3:704,DssGraph2DSideY3:706,DssGraphStaggerY3:707,DssGraph2DPlaceY3:709,DssGraph2ScaleEndY3:710,DssGraph2DScaleFreqY3:713,DssGraphScaleY3:714,DssGraph2ScaleDirectionY4:715,DssGraph2ExcludeZeroY4:716,DssGraphGridLineY4:719,DssGraphFormatY4Adv:721,DssGraphGridStepY4:723,DssGraphOffScaleTypeY4:724,DssGraphShow2DY4:726,DssGraph2DSideY4:728,DssGraphStaggerY4:729,DssGraph2DPlaceY4:731,DssGraph2ScaleEndY4:732,DssGraph2DScaleFreqY4:735,DssGraphScaleY4:736,DssGraphSpiderLines:739,DssGraphPolarStartAngle:740,DssGraphMetric3:742,DssGraphRadarCircularDataLines:782,DssGraphRemoteAxis:784,DssGraphConnectFirstLast:790,DssGraphGaugeShowAxisLabelsOutside:791,DssGraphGaugeShowNeedle:792,DssGraphTailShape:793,DssGraphPieForceRound:794,DssGraphGaugeStyleValue:795,DssGraphGaugeBorderStyleValue:796,DssGraphGaugeBorderThicknessValue:797,DssGraphGaugeRangeThicknessValue:798,DssGraphGaugeRangeStartAngleValue:799,DssGraphGaugeRangeStopAngleValue:800,DssGraphGaugeNeedleStyleValue:801,DssGraphCurvedLines:804,DssGraphAreaBevelEffect:879,DssGraphFontAntiAlias:881,DssGraphFormatDataTextY3:695,DssGraphFormatDataTextY4:717,DssGraphColorPalette:10000,DssGraphOriContent:10001,DssGraphFillEffect:10002,DssGraphGradient:10003,DssGraphSDShowToolTip:10004,DssGraphSDToolTip:10005,DssGraphSDRegressionType:10006,DssGraph2LogScale:10007,DssGraphManualMajor:10008,DssGraphManualMinor:10009,DssGraph2ScaleDirection:10010,DssGraphShow2DAxisLine:10011,DssGraph2ExcludeZero:10012,DssGraph2ScaleUseMax:10013,DssGraph2ScaleUseMin:10014,DssGraph2ScaleMax:10015,DssGraph2ScaleMin:10016,DssGraphShow2DAxisLabels:10017,DssGraph2ScaleEndMax:10018,DssGraph2ScaleEndMin:10019,DssGraphShow2DAxisMajor:10020,DssGraphShow2DAxisMinor:10021,DssGraph2DSide:10022,DssGraphStyleMajor:10023,DssGraphStyleMinor:10024,DssGraphCountMajor:10025,DssGraphCountMinor:10026,DssGraphShowTotalValue:10027,DssGraph2DPie:10028,DssGraphShowDataValue:10029,DssGraphShowDVPercent:10030,DssGraphShowDataLabel:10031,DssGraphShowPieLabelOnSide:10032,DssGraphShowMarker:10033,DssGraphShowMetric1:10034,DssGraphShowMetric2:10035,DssGraphShowMetric3:10036,DssGraphMetric1Style:10037,DssGraphMetric2Style:10038,DssGraphMetric3Style:10039,DssGraphShowLine:10040,DssGraphShowToolTip:10041,DssGraphToolTip:10042,DssGraphAxisAutoFit:10043,DssGraphAxisStagger:10044,DssGraphAxisScaleFreq:10045,DssGraphMetric1Value:10046,DssGraphMetric2Value:10047,DssGraphMetric3Value:10048,DssGraph2AxisFormatText:10049,DssGraph2AxisFormatDataText:10050,DssGraphDPI:10051,DssGraphDocSize:10052,DssGraphAutoArrange:10053,DssGraph2DSplitYAutomatic:10054,DssGraphHistogramRangeMin:10055,DssGraphHistogramRangeMax:10056,DssGraphHistogramBuckets:10057,DssGraphGaugeSAngle:10058,DssGraphGaugeEAngle:10059,DssGraphGaugeThickness:10060,DssGraphGauge1Show:10061,DssGraphGauge1Min:10062,DssGraphGauge1Max:10063,DssGraphGauge2Show:10064,DssGraphGauge2Min:10065,DssGraphGauge2Max:10066,DssGraphGauge3Show:10067,DssGraphGauge3Min:10068,DssGraphGauge3Max:10069,DssGraphGauge4Show:10070,DssGraphGauge4Min:10071,DssGraphGauge4Max:10072,DssGraphGauge5Show:10073,DssGraphGauge5Min:10074,DssGraphGauge5Max:10075,DssGraphAxisDataTextPlace:10076,DssGraphAxisNumberFormat:10077,DssGraphAxisDataNumberFormat:10078,DssGraphAxisHasErrorBar:10079,DssGraphAxisHasMiddleValue:10080,DssGraphHeight:10081,DssGraphWidth:10082,DssGraphPicture:10083,DssGraph3DTurnXCounterClockwise:10084,DssGraph3DTurnYCounterClockwise:10085,DssGraph3DTurnZCounterClockwise:10086,DssGraph3DTurnXClockwise:10087,DssGraph3DTurnYClockwise:10088,DssGraph3DTurnZClockwise:10089,DssGraph3DMoveXTowardsOrigin:10090,DssGraph3DMoveYTowardsOrigin:10091,DssGraph3DMoveZTowardsOrigin:10092,DssGraph3DMoveXAwayFromOrigin:10093,DssGraph3DMoveYAwayFromOrigin:10094,DssGraph3DMoveZAwayFromOrigin:10095,DssGraph3DDecreaseCubeX:10096,DssGraph3DDecreaseCubeY:10097,DssGraph3DDecreaseCubeZ:10098,DssGraph3DIncreaseCubeX:10099,DssGraph3DIncreaseCubeY:10100,DssGraph3DIncreaseCubeZ:10101,DssGraph3DDecreaseWallX:10102,DssGraph3DDecreaseWallY:10103,DssGraph3DDecreaseWallZ:10104,DssGraph3DIncreaseWallX:10105,DssGraph3DIncreaseWallY:10106,DssGraph3DIncreaseWallZ:10107,DssGraph3DPanXLeft:10108,DssGraph3DPanYUp:10109,DssGraph3DRelative:10110,DssGraph3DPanXRight:10111,DssGraph3DPanYDown:10112,DssGraph3DAbsolute:10113,DssGraph3DZoomIn:10114,DssGraph3DIncreasePerspectiveDistortion:10115,DssGraph3DStepSize:10116,DssGraph3DZoomOut:10117,DssGraph3DDecreasePerspectiveDistortion:10118,DssGraph3DInitMatrix:10119,DssGraphGaugeQBShow:10120,DssGraphGaugeQBStart:10121,DssGraphGaugeQBStop:10122,DssGraphEnhancedSeriesEffect:10123,DssGraphLocale:10124,DssGraph3DViewStructName:10125,DssGraphLabelsDistance:10126,DssGraphLegendDetails:10127,DssGraphDefaultsInitialized:10128,DssGraphShow3DAxisMajor:10129,DssGraphGradientColorMode:10130,DssGraphLegendDetailsNEW:10131,DssGraphFrameLocationNEW:10132,DssGraph3DColTitleLocationNEW:10133,DssGraph3DRowTitleLocationNEW:10134,DssGraphLabelsDistanceNEW:10135,DssGraphDocSizeNEW:10136,DssGraphUseManualHistogramBuckets:10137,DssGraphFontSize100:10138,DssGraphUseSpecialSeries:10140,DssGraphIsOnlyAdditionalMetrics:10170};mstrmojo.mstr.EnumDSSXMLObjectSubTypes={Unknown:-1,Reserved:0,Filter:256,CustomGroup:257,Template:512,ReportGrid:768,ReportGraph:769,ReportEngine:770,ReportText:771,ReportDatamart:772,ReportBase:773,ReportGridAndGraph:774,ReportNonInteractive:775,ReportCube:776,ReportIncrementalRefresh:777,ReportTransaction:778,ReportEmmaCube:779,ReportEmmaIncrementalRefresh:780,Metric:1024,SubtotalDefinition:1025,SystemSubtotal:1026,MetricDMX:1027,DssSubTypeMetricTraining:1028,Style:1536,AggMetric:1792,Folder:2048,Device:2304,Prompt:2560,PromptBoolean:2561,PromptLong:2562,PromptString:2563,PromptDouble:2564,PromptDate:2565,PromptObjects:2566,PromptElements:2567,PromptExpression:2568,PromptExpressionDraft:2569,PromptDimty:2570,PromptBigDecimal:2571,Function:2816,Attribute:3072,AttributeRole:3073,AttributeTransformation:3074,AttributeAbstract:3075,AttributeRecursive:3076,Fact:3328,DimensionSystem:3584,DimensionUser:3585,DimensionOrdered:3586,DimensionUserHierarchy:3587,Table:3840,TablePartitionMD:3841,TablePartitionWH:3842,DatamartReport:4096,FactGroup:4352,Resolution:4864,AttributeForm:5376,FormSystem:5377,FormNormal:5378,Schema:5632,Format:5888,Catalog:6144,CatalogDefn:6400,Column:6656,PropertyGroup:6912,PropertySet:7168,DBRole:7424,DBRoleDataImport:7425,DBRoleOAuth:7427,DBRoleGenericDataConnector:7430,DBLogin:7680,DBConnection:7936,Project:8192,ServerDef:8448,User:8704,UserGroup:8705,Transmitter:8705,Configuration:9216,Request:9472,Search:9984,SearchFolder:10240,Datamart:10496,FunctionPackageDefinition:10752,Role:11008,RoleTransformation:11009,SecurityRole:11264,InBox:11520,InBoxMsg:11776,Consolidation:12032,ConsolidationManaged:12033,ConsolidationElement:12288,ScheduleEvent:12544,ScheduleObject:12800,ScheduleTrigger:13056,Link:13312,DBTable:13568,DBTablePMT:13569,TableSource:13824,DocumentDefinition:14080,ReportWritingDocument:14081,DocumentTheme:14082,DrillMap:14336,DBMS:14592,MDSecurityFilter:14848,MonitorPerformance:15104,MonitorJobs:15105,MonitorUserConnections:15106,MonitorDBConnections:15107,PromptAnswer:15232,PromptAnswers:15360,PromptAnswerBoolean:15233,PromptAnswerLong:15234,PromptAnswerString:15235,PromptAnswerDouble:15236,PromptAnswerDate:15237,PromptAnswerObjects:15238,PromptAnswerElements:15239,PromptAnswerExpression:15240,PromptAnswerExpressionDraft:15241,PromptAnswerDimty:15242,PromptAnswerBigDecimal:15243,PromptAnswerInt64:15244,GraphStyle:15616,ChangeJournalSearch:15872,BlobUnknown:16128,BlobOther:16129,BlobImage:16130,BlobProjectPackage:16131,BlobExcel:16132,BlobHTMLTemplate:16133,DashboardTemplate:16384,Flag:16640,ChangeJournal:16896,ExternalShortcutUnknown:17152,ExternalShortcutURL:17153,ExternalShortcutSnapshot:17154,ExternalShortcutTarget:17408,Reconciliation:17664,DerivedAttribute:3077,PaletteSystem:17920,PaletteCustom:17921,Thresholds:18432,SubscriptionAddress:65281,SubscriptionContact:65282,SubscriptionInstance:65283};mstrmojo.chart.enums.EnumBoundingRectType={BRT_TOP:0,BRT_BOTTOM:1,BRT_CYLINDER:2,BRT_RING_CYLINDER:3,BRT_START_RECT:4,BRT_END_RECT:5};mstrmojo.chart.enums.EnumImageUsage={GENERAL:0,FIRST_IMAGE_OF_SCROLL_VIEW:1,SECOND_IMAGE_OF_SCROLL_VIEW:2,IMAGE_OF_SCROLL_VIEW:4,EMPTY_IMAGE:8,OBJECT_CLIP_COMPUTATION:16,BANNER:32};mstrmojo.chart.enums.EnumGraphObjectType={GOT_AXIS_TITLE:0,GOT_AXIS_LABEL:1,GOT_AXIS_LINE:2,GOT_MAJOR_GRID:3,GOT_MINOR_GRID:4,GOT_INTERLACED_GRID:5};mstrmojo.chart.model.enums.EnumDSSGraphAxisLabelLocation={DssGraphAxisLabelLowSide:0,DssGraphAxisLabelHighSide:1,DssGraphAxisLabelBothSides:2,DssGraphAxisLabelNeitherSide:3};mstrmojo.mstr.EnumFunction={FunctionCustom:-1,FunctionReserved:0,FunctionPlus:1,FunctionMinus:2,FunctionTimes:3,FunctionDivide:4,FunctionUnaryMinus:5,FunctionEquals:6,FunctionNotEqual:7,FunctionGreater:8,FunctionLess:9,FunctionGreaterEqual:10,FunctionLessEqual:11,FunctionSum:12,FunctionCount:13,FunctionAvg:14,FunctionMin:15,FunctionMax:16,FunctionBetween:17,FunctionLike:18,FunctionAnd:19,FunctionOr:20,FunctionNot:21,FunctionIn:22,FunctionRank:23,FunctionAbs:24,FunctionRunningSum:25,FunctionRunningAvg:26,FunctionMovingSum:28,FunctionMovingAvg:27,FunctionProduct:29,FunctionMedian:30,FunctionMode:31,FunctionStdev:32,FunctionVar:33,FunctionGeomean:34,FunctionEqualEnhanced:35,FunctionNotEqualEnhanced:36,FunctionGreaterEqualEnhanced:37,FunctionLessEqualEnhanced:38,FunctionBetweenEnhanced:39,FunctionBanding:40,FunctionBandingC:41,FunctionBandingP:42,FunctionNotLike:43,FunctionNotBetween:44,FunctionIntersect:45,FunctionIntersectIn:46,FunctionNullToZero:47,FunctionZeroToNull:48,FunctionApplySimple:49,FunctionApplyAggregation:50,FunctionApplyLogic:51,FunctionApplyComparison:52,FunctionApplyRelative:53,FunctionIsNull:54,FunctionIsNotNull:55,FunctionUcase:56,FunctionNotIn:57,FunctionNTile:58,FunctionPercentile:59,FunctionMovingMax:60,FunctionMovingMin:61,FunctionMovingDifference:62,FunctionMovingStdev:63,FunctionExpWghMovingAvg:64,FunctionMovingCount:65,FunctionRunningMax:66,FunctionRunningMin:67,FunctionRunningStdev:68,FunctionRunningCount:69,FunctionExpWghRunningAvg:70,FunctionNotBetweenEnhanced:71,FunctionConcat:72,FunctionFirstInRange:73,FunctionLastInRange:74,FunctionValueSegment:75,FunctionContains:76,FunctionBeginsWith:77,FunctionEndsWith:78,FunctionNotContains:79,FunctionNotBeginsWith:80,FunctionNotEndsWith:81,FunctionCase:82,FunctionCaseV:83,FunctionStdevP:84,FunctionRunningStdevP:85,FunctionMovingStdevP:86,FunctionNTileS:87,FunctionNTileVS:88,FunctionVarP:89,FunctionCurrentDate:90,FunctionDayOfMonth:91,FunctionDayOfWeek:92,FunctionDayOfYear:93,FunctionWeek:94,FunctionMonth:95,FunctionQuarter:96,FunctionYear:97,FunctionCurrentDateTime:98,FunctionCurrentTime:99,FunctionHour:100,FunctionMinute:101,FunctionSecond:102,FunctionMilliSecond:103,FunctionConcatNoBlank:104,FunctionLength:105,FunctionLower:106,FunctionLTrim:107,FunctionPosition:108,FunctionRTrim:109,FunctionSubStr:110,FunctionInitCap:111,FunctionTrim:112,FunctionRightStr:113,FunctionLeftStr:114,FunctionGreatest:115,FunctionLeast:116,FunctionFirst:117,FunctionLast:118,FunctionAdd:134,FunctionAverage:135,FunctionMultiply:136,FunctionBandingM:137,FunctionOLAPSum:138,FunctionOLAPAvg:139,FunctionOLAPCount:140,FunctionOLAPMax:141,FunctionOLAPMin:142,FunctionLag:143,FunctionLead:144,FunctionPercentRank:166,FunctionConcatAgg:177,FunctionTuple:1000};mstrmojo.chart.enums.EnumDssGraphGridChartUniformColorMode={BYX:0,BYY:1,BYBOTH:2};mstrmojo.chart.enums.EnumFontRotation={FR_NORMAL:0,FR_45:5,FR_90:2,FR_180:3,FR_270:4,FR_315:6,FR_CUSTOME:7,FR_HOTEL:1,FR_AUTOMATIC:-1};mstrmojo.chart.model.enums.EnumDSSGraphMarkerShape={DssGraphMarkerShapeNone:0,DssGraphMarkerShapeRectangle:1,DssGraphMarkerShapeStar45:2,DssGraphMarkerShapePlus:3,DssGraphMarkerShapeCircle:4,DssGraphMarkerShapeDiamond:5,DssGraphMarkerShapeSpikedX:6,DssGraphMarkerShapePlainX:7,DssGraphMarkerShapeTriangle1:8,DssGraphMarkerShapeFatPlus:10,DssGraphMarkerShapeSquare:24,DssGraphMarkerShapeHouse:27,DssGraphMarkerShapeStar5:37,DssGraphMarkerShapeGMTick:200,DssGraphMarkerShape2DPie:201,DssGraphMarkerShape2DRingPie:202,DssGraphMarkerShapeCombined:203,DssGraphMarkerShapeGMPolyLine:204,DssGraphMarkerShapeGMBar:205,DssGraphMarkerShapeGMArea:206,DssGraphMarkerBullet:207};mstrmojo.chart.enums.EnumBoxStyle={BS_NOFRAME:0,BS_SINGLE_LINE_FRAME:1,BS_DOUBLE_LINE_FRAME:2,BS_EXTRUDE:3,BS_BEVELED_FRAME:4,BS_REVERSE_BEVELED_FRAME:5};mstrmojo.chart.enums.EnumValueAxis={VA_Y1:0,VA_Y2:1,VA_BOTH:2,VA_Y3:3,VA_Y4:4};mstrmojo.chart.enums.EnumGraphMatrixDataLabelPosition={_BOTTOM:0,_TOP:1,_LEFT:2,_RIGHT:3,_CENTER:4};mstrmojo.chart.enums.EnumMarkerShape={MS_Rectangle:0,MS_XShape:1,MS_PlusSymbolthin:2,MS_PlusSymbolthick:3,MS_Circle:4,MS_Diamond:5,MS_Triangle:6,MS_Square:7,MS_Star:8,MS_Area:9,MS_Star45:10};mstrmojo.chart.model.enums.EnumDSSGraphGradientType={DssGraphGradientReserved:0,DssGraphGradientCircular:9,DssGraphGradientRectangular:10,DssGraphGradientLinear:14};mstrmojo.chart.model.enums.EnumDSSGraphLegendPosition={DssGraphLegendPositionFreeFloat:0,DssGraphLegendPositionRight:1,DssGraphLegendPositionLeft:2,DssGraphLegendPositionBottom:3};mstrmojo.chart.enums.EnumGraphMatrixElementSizeMode={_AUTOMATIC:0,_PROPORTIONAL:1,_MANUAL:2};mstrmojo.chart.enums.EnumObjectShape={OS_ELLIPSE:2,OS_LINE:5,OS_POLYGON:6,OS_RECTANGLE:7,OS_WEDGE:12,OS_WEDGECRUST:13,OS_POLYLINE:18,OS_PATH:24,OS_CIRCLE:100,OS_RINGSECTOR:101,OS_NORMALSECTOR:102};mstrmojo.chart.model.enums.EnumVariantBool={VARIANT_TRUE:65535,VARIANT_FALSE:0};mstrmojo.chart.enums.EnumGraphMajorType={GMT_INVALID:0,GMT_CATEGORY:1,GMT_PIE:2,GMT_SCATTER:3,GMT_POLAR:4,GMT_RADAR:5,GMT_BUBBLE:6,GMT_STOCK:7,GMT_HISTOGRAM:8,GMT_GAUGE:9,GMT_FUNNEL:10,GMT_BOX:11,GMT_GANTT:12,GMT_SPECTRAL:13,GMT_TABLE:14,GMT_3D_CATEGORY:15,GMT_3D_SCATTER:16,GMT_GRID:17};(function(){mstrmojo.vi._MonitorsAppState=mstrmojo.provide("mstrmojo.vi._MonitorsAppState",{onAppStateChange:function(B){if(this._super){this._super(B);}},init:function A(B){this._super(B);if(mstrApp.attachEventListener){mstrApp.attachEventListener("appStateChange",this.id,"onAppStateChange");}}});}());mstrmojo.chart.model.enums.EnumDSSGraphType={DssGraphTypeReserved:0,DssGraphTypeVertical_Area_Absolute:1,DssGraphTypeVertical_Area_Stacked:2,DssGraphTypeVertical_Area_BiPolar_Absolute:3,DssGraphTypeVertical_Area_BiPolar_Stacked:4,DssGraphTypeVertical_Area_DualAxis_Absolute:5,DssGraphTypeVertical_Area_DualAxis_Stacked:6,DssGraphTypeVertical_Area_Percent:7,DssGraphTypeHorizontal_Area_Absolute:8,DssGraphTypeHorizontal_Area_Stacked:9,DssGraphTypeHorizontal_Area_BiPolar_Absolute:10,DssGraphTypeHorizontal_Area_BiPolar_Stacked:11,DssGraphTypeHorizontal_Area_DualAxis_Absolute:12,DssGraphTypeHorizontal_Area_DualAxis_Stacked:13,DssGraphTypeHorizontal_Area_Percent:14,DssGraphTypeVertical_Bar_Side_by_Side:15,DssGraphTypeVertical_Bar_Stacked:16,DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:17,DssGraphTypeVertical_Bar_DualAxis_Stacked:18,DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:19,DssGraphTypeVertical_Bar_BiPolar_Stacked:20,DssGraphTypeVertical_Bar_Percent:21,DssGraphTypeHorizontal_Bar_Side_by_Side:22,DssGraphTypeHorizontal_Bar_Stacked:23,DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:24,DssGraphTypeHorizontal_Bar_DualAxis_Stacked:25,DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:26,DssGraphTypeHorizontal_Bar_BiPolar_Stacked:27,DssGraphTypeHorizontal_Bar_Percent:28,DssGraphTypeVertical_Line_Absolute:29,DssGraphTypeVertical_Line_Stacked:30,DssGraphTypeVertical_Line_BiPolar_Absolute:31,DssGraphTypeVertical_Line_BiPolar_Stacked:32,DssGraphTypeVertical_Line_DualAxis_Absolute:33,DssGraphTypeVertical_Line_DualAxis_Stacked:34,DssGraphTypeVertical_Line_Percent:35,DssGraphTypeHorizontal_Line_Absolute:36,DssGraphTypeHorizontal_Line_Stacked:37,DssGraphTypeHorizontal_Line_BiPolar_Absolute:38,DssGraphTypeHorizontal_Line_BiPolar_Stacked:39,DssGraphTypeHorizontal_Line_DualAxis_Absolute:40,DssGraphTypeHorizontal_Line_DualAxis_Stacked:41,DssGraphTypeHorizontal_Line_Percent:42,DssGraphTypePies:43,DssGraphTypeRing_Pie:44,DssGraphTypeMultiple_Pies:45,DssGraphTypeMultiple_Ring_Pies:46,DssGraphTypeMultiple_Proportional:47,DssGraphTypeMultiple_Proportional_Ring_Pies:48,DssGraphTypePie_Bar:49,DssGraphTypeRing_Pie_Bar:50,DssGraphTypeX_Y_Scatter:51,DssGraphTypeDualAxis_X_Y_Scatter:52,DssGraphTypeX_Y_Scatter_with_Labels:53,DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:54,DssGraphTypePolar_Coordinate_Chart:55,DssGraphTypeDualAxis_Polar_Coordinate_Chart:56,DssGraphTypeRadar_Line:57,DssGraphTypeRadar_Stacked_Area:58,DssGraphTypeDualAxis_Radar_Line:59,DssGraphTypeDualAxis_Radar_Stacked_Area:60,DssGraphTypeBubble:61,DssGraphTypeBubble_DualAxis:62,DssGraphTypeGantt_Chart:63,DssGraphTypeHiLo_Stock_Chart:64,DssGraphTypeHiLo_DualAxis_Stock_Chart:65,DssGraphTypeHiLoOpen_Stock_Chart:66,DssGraphTypeHiLoOpen_DualAxis_Stock_Chart:67,DssGraphTypeHiLoOpenClose_Stock_Chart:68,DssGraphTypeHiLoOpenClose_DualAxis_Stock_Chart:69,DssGraphTypeSpectral_Chart:70,DssGraphTypeVertical_Histogram:71,DssGraphTypeHorizontal_Histogram:72,DssGraphTypeTable_Chart:73,DssGraphTypeD3_Riser_Bars:74,DssGraphTypeD3_Riser_Pyramids:75,DssGraphTypeD3_Riser_Octogans:76,DssGraphTypeD3_Riser_Cut_Corner_Bars:77,DssGraphTypeD3_Floating_Cubes:78,DssGraphTypeD3_Floating_Spheres:79,DssGraphTypeD3_Connect_Group_Areas:80,DssGraphTypeD3_Connect_Group_Ribbons:81,DssGraphTypeD3_Connect_Group_Steps:82,DssGraphTypeD3_Connect_Series_Areas:83,DssGraphTypeD3_Connect_Series_Ribbons:84,DssGraphTypeD3_Connect_Series_Steps:85,DssGraphTypeD3_Surface:86,DssGraphTypeD3_Surface_with_Sides:87,DssGraphTypeD3_Honeycomb_Surface:88,DssGraphTypeD3_X_Y_Z_Scatter_Chart:89,DssGraphTypeD3_X_Y_Z_Scatter_with_Labels_Chart:90,DssGraphTypeVertical_Bar_Absolute:91,DssGraphTypeHorizontal_Bar_Absolute:92,DssGraphTypeBubble_With_Labels:93,DssGraphTypeBubble_DualAxis_With_Labels:94,DssGraphTypeGauge:95,DssGraphTypeFunnel:96,DssGraphTypePareto:97,DssGraphTypePareto_Percent:98,DssGraphTypeBoxPlot:99,DssGraphTypeRadar_Area_Stacked:100,DssGraphTypeRadar_Absolute_Area:101,DssGraphTypeVertical_Bar_BiPolar_Absolute:102,DssGraphTypeVertical_Bar_DualAxis_Absolute:103,DssGraphTypeHorizontal_Bar_BiPolar_Absolute:104,DssGraphTypeHorizontal_Bar_DualAxis_Absolute:105,DssGraphRadar_Line_Stacked:106,DssGraphRadar_DualAxis_Radar_Stacked_Line:107,DssGraphRadar_DualAxis_Radar_Area:108,DssGraphTypeMaxDeskTopGraphTypes:109,DssGraphTypeBarArea:201,DssGraphTypeBarLine:202,DssGraphTypeAreaLine:203,DssGraphTypeDualAxisBarArea:204,DssGraphTypeDualAxisBarLine:205,DssGraphTypeDualAxisAreaLine:206,DssGraphTypeGridChart:20000,DssGraphTypeVertical_Bar_DualAxis_Percent:20001,DssGraphTypeVertical_Line_DualAxis_Percent:20002,DssGraphTypeVertical_Area_DualAxis_Percent:20003,DssGraphTypeHorizontal_Bar_DualAxis_Percent:20004,DssGraphTypeHorizontal_Line_DualAxis_Percent:20005,DssGraphTypeHorizontal_Area_DualAxis_Percent:20006,DssGraphTypeHorizontal_CategoryPies_Absolute:21077,DssGraphTypeHorizontal_CategoryPies_Stacked:21078,DssGraphTypeHorizontal_CategoryPies_Percent:21079,DssGraphTypeVertical_CategoryPies_Absolute:21080,DssGraphTypeVertical_CategoryPies_Stacked:21081,DssGraphTypeVertical_CategoryPies_Percent:21082,DssGraphTypeScatter_Pies:21111,DssGraphTypeBubble_Pies:21121,DssGraphTypeGrid_Pies:21211,DssGraphTypeVertical_Bullet:21212,DssGraphTypeHorizontal_Bullet:21213};mstrmojo.chart.enums.EnumNumberCategory={Default:-2,Fixed:0,Currency:1,Date:2,Time:3,Percentage:4,Fraction:5,Scientific:6,Custom:7,Special:8,General:9,FromGrid:10};mstrmojo.chart.enums.EnumRadientGradientUsage={RG_PIESLICE:0,RG_RING:1,RG_BORDERRING:2};mstrmojo.chart.enums.EnumAxisDirection={AD_X:0,AD_Y:1,AD_Z:2};mstrmojo.chart.enums.EnumGraphSubType={GST_NULL:0,GST_BIPOLAR:1,GST_DUALAXIS:2};mstrmojo.chart.enums.EnumGraphMatrixPiePlotType={GMPPT_CATEGORY:0,GMPPT_VALUE:1,GMPPT_GRID:2};mstrmojo.chart.enums.EnumGenericDirection={NONE:0,TOP:1,BOTTOM:2,LEFT:3,RIGHT:4};mstrmojo.chart.enums.EnumDSSGraphOffScaleType={DssGraphOffScaleHide:0,DssGraphOffScaleClip:1,DssGraphOffScaleShow:2};mstrmojo.chart.enums.EnumLineStyle={LS_SOLID:0,LS_DASH:1,LS_DOT:2,LS_DOT_DASH:3,LS_DASH_DOT_DOT:4,LS_MEDIUM_DASH:5,LS_SHORT_DASH:6,LS_LONGEST_DASH:7,LS_LONG_DOT:8,LS_DOT_DOT_DOT:9,LS_DASH_DASH_DOT:10,LS_DASH_DASH_DOT_DOT:11,LS_LONG_DASH_DOT:12,LS_LONG_DASH_DOT_DOT:13,LS_LONG_DASH_DASH:14,LS_LONG_DASH_DASH_DASH:15,LS_GRADIENT:16,LS_NONE:99};mstrmojo.chart.enums.EnumCategoryAxisOidItem={OID_LABEL:0,OID_MAJOR_TICKS:1,OID_MINOR_TICKS:2};mstrmojo.chart.enums.EnumFillType={FT_SIMPLE:0,FT_TEXTURE:4,FT_PICTURE:6,FT_GRADIENT:14,FT_PATTERN:101};mstrmojo.chart.model.enums.EnumDSSGraphMarkerLayout={DssGraphMarkerLeft:0,DssGraphMarkerRight:1,DssGraphMarkerCentered:2,DssGraphMarkerAbove:3,DssGraphMarkerBelow:4,DssGraphMarkerAuto:5};mstrmojo.VisEnum={ControlType:{BUTTON:"button",LASSO_SELECTOR:"lasso-selector",LASSO_RESIZER:"lasso-resizer",SPLITTER:"splitter",GM_ROW_HEADER:"rh",GM_ROW_HEADER_TEXT:"rhtext",GM_ROW_HEADER_EXTRA:"rhext",GM_COL_HEADER:"ch",GM_COL_HEADER_TEXT:"chtext",GM_COL_HEADER_EXTRA:"chext",GM_YAXIS:"y",GM_XAXIS:"x",GM_YLABEL:"y-label",GM_XLABEL:"x-label",GM_ROW_HEADER_TITLE:"rht",GM_ROW_HEADER_TITLE_TEXT:"rhttext",GM_COL_HEADER_TITLE:"cht",GM_COL_HEADER_TITLE_TEXT:"chttext",GM_MINI_CHART:"chart",GM_TEXT_BODY:"text-body",GM_SHAPE:"shape",GM_MARKER:"marker",GM_SET_SHAPE:"set-shape",GM_YAXIS2:"y2",GM_XAXIS2:"x2",GM_TREND_LINE:"trendLine",GM_TREND_LINE_HOVER:"trendLineHover",GM_TREND_LINE_SELECT:"trendLineSelect",GM_REF_LINE:"referenceLine",GM_REF_LINE_HOVER:"referenceLineHover",GM_REL_LINE_SELECT:"referenceLineSelect",GM_HIGHLIGHT_BOX:"highlight-box",GM_AXIS_TEXT:"axis-text",GM_AXIS_WORD:"axis-word",GM_SVG_X_NUMERIC:"svg-x-numeric",GM_SVG_X_CATEGORY:"svg-x-category",GM_SVG_Y_NUMERIC:"svg-y-numeric",GM_SVG_Y_CATEGORY:"svg-y-category",GM_X_NUMERIC:"x-numeric",GM_X_CATEGORY:"x-category",GM_Y_NUMERIC:"y-numeric",GM_Y_CATEGORY:"y-category",GM_SVG_CHART:"svg-chart",GM_DATA_LABEL:"data-label",GM_YAXIS_LINE:"y-line",GM_XAXIS_LINE:"x-line",GM_YAXIS2_LINE:"y2-line",GM_XAXIS2_LINE:"x2-line",LGD_TITLE:"lgd-title",LGD_TEXT:"lgd-text",LGD_COLORBOX:"lgd-colorbox",LGD_COLORBOX_CTN:"lgd-colorbox-ctn",LGD_CANVAS:"lgd-canvas",LINE_CONTAINER:"line-ctn",GM_V_MATRIX_LINE:"v-line",GM_H_MATRIX_LINE:"h-line",GM_V_CHART_LINE:"v-ctline",GM_H_CHART_LINE:"h-ctline",GM_CHART_ROW:"ct-row",GM_CHART_COL:"ct-col",GM_H_GRID_LINE:"h-gline",GM_V_GRID_LINE:"v-gline",GM_H_MINOR_GRID_LINE:"h-gline-minor",GM_V_MINOR_GRID_LINE:"v-gline-minor",GM_ORIGIN_LINE:"originLine",GM_ORIGIN_LABEL:"origin-label",GM_ORIGIN_LINE_H:"origin-line-h",GM_ORIGIN_LINE_V:"origin-line-v",GM_ORIGIN_LABEL_H:"origin-label-h",GM_ORIGIN_LABEL_V:"origin-label-v",GM_DUMMY_A:"dummy-a",GM_V_EXTRA_LINE:"v-extra-line",GM_REF_LABEL:"ref-label",GM_RIGHT_BORDER:"border-r",GM_BOTTOM_BORDER:"border-b",KPI_V_SCROLLBAR:"kpi-vertical-scrollbar",KPI_H_SCROLLBAR:"kpi-horizontal-scrollbar"},GMDropZoneID:{ROWS:1,COLUMNS:2,XAXIS:3,YAXIS:4,BREAKBY:5,SLICEBY:6,COLORBY:7,SIZEBY:8,TOOLTIP:9,ANGLEBY:10},NETWORK_LOCAL_PROPS:{ZOOM_FACTOR:"zf",NODE_POSITION:"np"},NETWORK_PROPERTIES:{showLegend:"showLegend",showEdgeDirection:"showedgearrow",showTransition:"animatelayout",nodeSizeAggregation:"nodesizeaggfunc",minNodeSize:"minns",maxNodeSize:"maxns",themeType:"th",circleLabelFont:"BubFnt",modifiedNodes:"mn",layoutMode:"layout",legendPosition:"legendposition",dragMode:"mode",bubbleStyle:"bbs",propsCategory:"pc",lgdBgFillClr:"lgdBgFillClr",lgdBgFillTrans:"lgdBgFillTrans",lgdFntClr:"lgdFntClr",lgdFntSz:"lgdFntSz",lgdFntFml:"lgdFntFml",lgdFntStyle:"lgdFntStyle"},NETWORK_LAYOUT:{CIRCULAR:"circular",LINEAR:"linear",FORCE_DIRECTED:"forceDirected"},NETWORK_DRAG_MODE:{pan:0,select:1},NETWORK_AGGREGATION_METHOD:{"Count of":0,"Sum of":1,"Average of":2,"Min of":3,"Max of":4},NETWORK_MIN_NODE_SIZE_TYPE:{PROPORTIONAL:1,FULL_RANGE:2,ADJUSTED_RANGE:3},NETWORK_MAX_NODE_SIZE_TYPE:{AUTOMATIC:1,MANUAL:2},NETWORK_FORCE_DIRECTED_LAYOUT_EDGE_CURVATURE:[0,0.2],HEATMAP_PROPERTIES:{showLegend:"showLegend",deleteButton:"ed",showMetricValues:"mv",labelSize:"lb",layout:"la",themeType:"th",headerType:"he",deletedList:"dl",refreshType:"rt",metricList:"ml",colorByType:"cbt",absoluteFixed:"abs",blendColor:"blc",background:"bg",legendBackground:"lbg",headerColors:"hcl",fonts:"fts",propsCategory:"pc",attrColorByOpacity:"acbo",metricColorByOpacity:"mcbo"},HEATMAP_LABEL_SIZE:{On:0,Off:1,Proportional:2},MAPS_PROPERTIES:{SHOW_LEGEND:"showLegend"},VIS_CARDLIMIT:{GRID:250,NON_GRID:8000,AREA_MAP:1000},GMLegendDataType:{COLOR_BY:1,SIZE_BY:2},GMLegendFormatingPropertyTag:{LEGEND_BG_COLOR:"lgdBgFillClr",LEGEND_BG_FILL_STYLE:"lgdBgFillStyle",LEGEND_BG_FILL_EFFECT:"lgdBgFillEff",LEGEND_BG_FILL_TRANSPARENCY:"lgdBgFillTrans",LEGEND_FONT_SIZE:"lgdFntSz",LEGEND_FONT_FAMILY:"lgdFntFml",LEGEND_FONT_STYLE:"lgdFntStyle",LEGEND_FONT_COLOR:"lgdFntClr",LEGEND_BORDER_SHOW:"lgdBdrShw",LEGEND_BORDER_COLOR:"lgdBdrClr",LEGEND_BORDER_THICKNESS:"lgdBdrThk",LEGEND_BORDER_LINE_STYLE:"lgdBdrStyle",LEGEND_BORDER_LINE_COMBINED_STYLE:"lgdBdrCmbStyle",COLOR_SQUARE_COLOR:"clrSqrClr"},LegendPropertyTag:{LEGEND_MODE:"lm",LEGEND_POSITION:"LegendPosition",SCALE_LEGEND_WIDTH:"lwr"},EnumLegendMode:{RESTORED:1,MINIMIZED:2},EnumSingleLegendMode:{RESTORE:1,COLLAPSE:2},EnumColorRankMode:{INVALID:-1,VALUE:0,TOP:1,BOTTOM:2,TOP_PERCENT:3,BOTTOM_PERCENT:4},FormNameDisplayType:{OFF:0,ON:1,FORM_NAME_ONLY:2,SHOW_ATT_NAME_ONCE:3,AUTO:4},SERVER_JSON_ERROR_TYPE:{EMPTY_DATA:0,NO_DATASET:1,AE_ERROR:2,NO_TEMPLATE_UNIT:3},NETWORK_CIRCLE_BORDER_WIDTH:8,IMAGELAYOUT_PROPERTIES:{DISPLAY_MODE:"mt",MAX_SIZE_TYPE:"ty",MAX_SIZE_VALUE:"val",MIN_SIZE_TYPE:"mst",MIN_SIZE_VALUE:"msv",MAP_FILE_PATH:"mf",SHAPE_FILL_OPC_PER:"shapeFillTrans",SHAPE_FILL_COLOR:"shapeClr",SHAPE_BORDER_STYLE:"shapeBorderCmbStyle",SHAPE_BORDER_COLOR:"shapeBorderClr",DATA_LABEL_SWITCH:"dls",DATA_LABEL_FONT_SIZE:"dlFntSz",DATA_LABEL_FONT_FAMILY:"dlFntFml",DATA_LABEL_FONT_COLOR:"dlFntClr",DATA_LABEL_FONT_STYLE:"dlFntStyle",BLANK_MAP_BORDER_STYLE:"blankMapBorderStyle",BLANK_MAP_BORDER_COLOR:"blankMapBorderClr",BLANK_MAP_COLOR:"blankMapClr",DEFAULT_MAP_COLOR:"dftMapClr",DEFAULT_BUBBLE_COLOR:"dftBubbleClr",DEFAULT_MAP_BORDER_COLOR:"dftMapBorderClr",DEFAULT_BUBBLE_BORDER_COLOR:"dftBubbleBorderClr",LEGEND_FONT_SIZE:"lgFntSz",LEGEND_FONT_FAMILY:"lgFntFml",LEGEND_FONT_COLOR:"lgFntClr",LEGEND_FONT_STYLE:"lgFntStyle",LEGEND_BACKGROUND_COLOR:"lgBgClr",LEGEND_OPC_PER:"lgBgFillTrans",LEGEND_POSITION:"lgPos",LEGEND_SHOW:"lgShow",LEGEND_MODE:"lgMode",LEGEND_SCALE:"lgScale",H_MATRIX_LINE_COLOR:"hMatrixLnClr",V_MATRIX_LINE_COLOR:"vMatrixLnClr",ALL_MATRIX_LINE_COLOR:"allMatrixLnClr",H_MATRIX_LINE_STYLE:"hMatrixLnCmbStyle",V_MATRIX_LINE_STYLE:"vMatrixLnCmbStyle",ALL_MATRIX_LINE_STYLE:"allMatrixLnCmbStyle"}};mstrmojo.chart.enums.EnumOrientation={OR_HORIZONTAL:0,OR_VERTICAL:1};mstrmojo.chart.model.enums.EnumDSSGraphFillEffect={DssGraphFillSimple:0,DssGraphFillGenericGradient:1,DssGraphFillWash:3,DssGraphFillPicture:4,DssGraphFillUserPicture:6,DssGraphFillBrush:13,DssGraphFillAdvancedWash:14,DssGraphFillPattern:101};mstrmojo.chart.enums.EnumLegendLayout={LL_LegendFreeFloat:0,LL_LegendOnRightSide:1,LL_LegendOnLeftSide:2,LL_LegendBelowChart:3};mstrmojo.chart.model.enums.EnumVariantType={VT_EMPTY:0,VT_NULL:1,VT_I2:2,VT_I4:3,VT_R4:4,VT_R8:5,VT_CY:6,VT_DATE:7,VT_BSTR:8,VT_DISPATCH:9,VT_ERROR:10,VT_BOOL:11,VT_VARIANT:12,VT_UNKNOWN:13,VT_DECIMAL:14,VT_I1:16,VT_UI1:17,VT_UI2:18,VT_UI4:19,VT_I8:20,VT_UI8:21,VT_INT:22,VT_UINT:23,VT_VOID:24,VT_HRESULT:25,VT_PTR:26,VT_SAFEARRAY:27,VT_CARRAY:28,VT_USERDEFINED:29,VT_LPSTR:30,VT_LPWSTR:31,VT_RECORD:36,VT_FILETIME:64,VT_BLOB:65,VT_STREAM:66,VT_STORAGE:67,VT_STREAMED_OBJECT:68,VT_STORED_OBJECT:69,VT_BLOB_OBJECT:70,VT_CF:71,VT_CLSID:72,VT_BSTR_BLOB:4095,VT_VECTOR:4096,VT_ARRAY:8192,VT_BYREF:16384,VT_RESERVED:32768,VT_ILLEGAL:65535,VT_ILLEGALMASKED:4095,VT_TYPEMASK:4095};mstrmojo.chart.enums.EnumMajorGraphType={MGT_AREA:0,MGT_BAR:1,MGT_LINE:2,MGT_PARETO:3};mstrmojo.chart.model.enums.EnumDSSExtraGraphProperty={DssGraphOffScaleType:10139,DssGraphTypeRingPie:20015,DssGraphPieRadius:20016,DssGraphPieSliceQuadrant:20017,DssGraphUseInterlacedGrid:20018,DssGraphUseSmartBreak:20019,DssGraphSmartBreakStyle:20020,DssGraphSmartBreakStart:20021,DssGraphSmartBreakEnd:20022,DssGraphSmartBreakUsePercent:20023,DssGraphUseQualityBand:20024,DssGraphQualityBandUsePercent:20025,DssGraphQualityBandPosition:20026,DssGraphQualityBandShowTitle:20027,DssGraphUseChartArea:20028,DssGraphChartAreaNumber:20029,DssGraphChartAreaOrientation:20030,DssGraphChartAreaSpacePercentage:20031,DssGraphChartAreaDestination:20032,DssGraphChartAreaShowTitle:20033,DssGraphGaugeBorderClipped:20034,DssGraphCumulativePercentLabel:20035,DssGraphNewUseSmartLabels:20053,DssGraphIsIPhoneCharting:21000,DssGraphUseGlobalAutoScale:21001,DssGraphLegendItemText:21023,DssGraphAxisShowSecondUserLine:21024,DssGraphAxisSecondUserLineValue:21025,DssGraphCategoryLabelAreaHeight:21026,DssGraphGradientEndAlpha:21027,DssTimeSeriesYAxisLabelMinSpan:21076,DssTimeSeriesYAxisExtendHeight:21077,DssGraphMatrixUsePerfectPadding:21120,DssGraphMatrixIsValueAxisForPercentChart:21136,DssGraphMatrixDataLabelEnabled:21153,DSSGraphMatrixDataLabelRotated:21154,DssGraphMatrixInitedDataLabelRotation:21155,DSSGraphMatrixAxisAdjusted:21156,DSSGraphMatrixUseCustomMinMax:21157,DssGraphInfoReserved:30000,DssGraphInfoMajorType:30007,DssGraphInfoMinorType:30008,DssGraphInfoAutosizeHorizontal:30011,DssGraphInfoAutosizeVertical:30012,DssGraphInfoSeriesByColumn:30013,DssGraphInfoIncludeSubtotal:30014,DssGraphInfoSuppressLastLevel:30016,DssGraphInfoRecalculateChartFrame:30026,DssGraphInfoRecalculateLegend:30027,DssGraphInfoNestedLabel:30038,DssGraphInfoNestedLabelBracket:30039,DssGraphInfoUseMaxCategoriesAsMin:30048,DssGraphInfoUseZerosForGraphNulls:30049};mstrmojo.chart.enums.EnumDSSExtraGraphObject={DssGraphO1Interlaced:20000,DssGraphO2Interlaced:20001,DssGraphX1Interlaced:20002,DssGraphY1Interlaced:20003,DssGraphY2Interlaced:20004,DssGraphY3Interlaced:20005,DssGraphY4Interlaced:20006,DssGraphZInterlaced:20007,DssGraphQualityBand:20008,DssGraphQualityBandTitle:20009,DssGraphY1SecondUserLine:21000,DssGraphWarningMessage:21001,DssGraphO1BracketLine:21002,DssGraphBaseLayer:21004,DssGraphMiddleWallLayer:21005,DssGraphPlotLayer:21006,DssGraphRendererLayer:21007,DssGraphBanner:22005};mstrmojo.chart.enums.EnumFontStyle={FS_NORMAL:0,FS_BOLD:1,FS_ITALIC:2,FS_BOTH:3,FS_UNDERLINE:4,FS_STRIKETHROUGH:8};mstrmojo.mstr.EnumDSSConsolidationType={DssNormal:0,DssDerivedElement:1,DssRecursiveDerivedElement:2};mstrmojo.vi.viz.EnumVizStyles={GRAPH_MATRIX:"GraphMatrixVisualizationStyle",NETWORK:"NetworkVisualizationStyle",HEAT_MAP:"VIHeatMapVisualizationStyle",GOOGLE_MAP:"GoogleMapVisualizationStyle",ESRI_MAP:"ESRIMapVisualizationStyle",IMAGE_LAYOUT:"ImageLayoutVisualizationStyle",NEW_GRAPH_MATRIX:"NewGraphMatrixVisualizationStyle",MAPBOX:"MapboxVisualizationStyle",KPICARD:"KPICardVisualizationStyle"};(function(){mstrmojo.vi._MonitorsLayoutMode=mstrmojo.provide("mstrmojo.vi._MonitorsLayoutMode",{onLayoutModeChange:function(B){if(this._super){this._super(B);}},init:function A(B){this._super(B);if(mstrApp.attachEventListener){mstrApp.attachEventListener("layoutModeChange",this.id,"onLayoutModeChange");}}});}());mstrmojo.chart.enums.EnumInstructionName={JSONInsUndefined:0,JSONInsSaveState:1,JSONInsRestoreState:2,JSONInsClip:11,JSONInsScale:12,JSONInsRotate:13,JSONInsNewPath:101,JSONInsClosePath:102,JSONInsMoveTo:111,JSONInsLineTo:112,JSONInsBezierCurveTo:113,JSONInsAddRect:121,JSONInsAddArc:122,JSONInsAddNeedle:131,JSONInsAddGaugeMarker:132,JSONInsAddString:201,JSONInsSetLineDash:301,JSONInsSetLineWidth:302,JSONInsSetLineJoin:303,JSONInsSetFontSize:311,JSONInsSetRGBAFillColor:321,JSONInsSetRGBAStrokeColor:322,JSONInsFillPath:401,JSONInsStrokePath:402,JSONInsFillSimple:501,JSONInsFillPattern:502,JSONInsFillGradient:503,JSONInsFillEdgeType:511,JSONInsFillDonutOrSphere:512,JSONInsFillRadientGradient:513,JSONInsFillDonut2Rect:514,JSONInsFillBorderMetallic:515,JSONInsMakeDarker:521,JSONInsRestoreColor:522,JSONInsApplyLineFormat:601,JSONInsAddFormatedText:701,JSONInsApplyBeveledFrameToRectangle:801};mstrmojo.chart.enums.EnumChartStyle={_general:0,_cluster:1,_absolute:2,_stacked:3,_percent:4,_ring:5,_bullet:6,_udf:100};mstrmojo.chart.model.enums.EnumDSSBaseFormType={DssBaseFormReserved:0,DssBaseFormDateTime:1,DssBaseFormNumber:2,DssBaseFormText:3,DssBaseFormPicture:4,DssBaseFormUrl:5,DssBaseFormEmail:6,DssBaseFormHTMLTag:7,DssBaseFormDate:8,DssBaseFormTime:9,DssBaseFormSymbol:10,DssBaseFormBigDecimal:11};mstrmojo.chart.Angle=mstrmojo.provide("mstrmojo.chart.Angle",{});mstrmojo.gm.GMEnums={};mstrmojo.gm.DualAxisSubAxisBit={PRIMARY:0,SECONDARY:1};mstrmojo.gm.StackExetrmeId={PRIMARY_Y_AXIS:-2,SECONDARY_Y_AXIS:-18,PRIMARY_X_AXIS:-1,SECONDARY_X_AXIS:-17};mstrmojo.gm.FormNameType={OFF:0,ON:1,FORM_NAME_ONLY:2,SHOW_ATT_NAME_ONCE:3,AUTO:4};mstrmojo.gm.EnumSelectionOptionLevel={GLOBAL:1,ITSELF:2,ATTS_METRIC_COMBINATION:3,METRIC_AXIS:4,METRIC:5,AXIS:6,COLOR_BY:7,ALL_SHAPE:8,ITSELF_RESOLVED:9};mstrmojo.gm.EnumLabelRotation={VERTICAL:2,HORIZONTAL:0,AUTOMATIC:-1};mstrmojo.gm.EnumIdentityType={LEGEND:Math.pow(2,0),GRAPH_SHAPE:Math.pow(2,1),X_AXIS:Math.pow(2,2),Y_AXIS:Math.pow(2,3),X2_AXIS:Math.pow(2,4),Y2_AXIS:Math.pow(2,5),GRID_LINE:Math.pow(2,6),TREND_LINE:Math.pow(2,7),REF_LINE:Math.pow(2,8),DATA_LABEL:Math.pow(2,9),COLOR_SQUARE:Math.pow(2,10),ROW_TITLE:Math.pow(2,11),COL_TITLE:Math.pow(2,12),ROW_HEADER:Math.pow(2,13),COL_HEADER:Math.pow(2,14),LOG_SCALE:Math.pow(2,15),H_MATRIX_LINE:Math.pow(2,16),V_MATRIX_LINE:Math.pow(2,17),LEGEND_TEXT:Math.pow(2,18),SHAPE_COLLECTION:Math.pow(2,19),MINOR_GRID_LINE:Math.pow(2,20),AXIS_SCALE:Math.pow(2,22),AXIS_ORIGIN:Math.pow(2,23),ROWS_BACKGROUND:Math.pow(2,24),COLS_BACKGROUND:Math.pow(2,25),X_NUMERIC:Math.pow(2,26),X_CATEGORY:Math.pow(2,27),Y_NUMERIC:Math.pow(2,28),Y_CATEGORY:Math.pow(2,29),X_METRIC_AXIS_TITLE:Math.pow(2,30),Y_METRIC_AXIS_TITLE:Math.pow(2,31),VIZ_BOX_TITLE:Math.pow(2,32),REF_LINE_LABEL:Math.pow(2,33),LINE_MARKER:Math.pow(2,34),X_AXIS_ORIGIN_LABEL:Math.pow(2,35),Y_AXIS_ORIGIN_LABEL:Math.pow(2,36),X_AXIS_ORIGIN_LINE:Math.pow(2,37),Y_AXIS_ORIGIN_LINE:Math.pow(2,38),Y_ATTRIBUTE_AXIS_TITLE:Math.pow(2,39),ROW_HEADER_TEXT:Math.pow(2,40),ROW_TITLE_TEXT:Math.pow(2,41),COL_HEADER_TEXT:Math.pow(2,42),COL_TITLE_TEXT:Math.pow(2,43),VIZ_BOX_CONTAINER:Math.pow(2,44),X_ATTRIBUTE_AXIS_TITLE:Math.pow(2,45),AXIS_ORIGIN_DEFINE:Math.pow(2,46)};mstrmojo.gm.EnumGMZoneIds={ROWS:1,COLUMNS:2,XAXIS:3,YAXIS:4,BREAKBY:5,SLICEBY:6,COLORBY:7,SIZEBY:8,TOOLTIP:9,ANGLEBY:10};mstrmojo.gm.EnumClickType={NONE:-1,LEFT_CLICK:1,RIGHT_CLICK:2,DOUBLE_CLICK:3};mstrmojo.gm.EnumLegendSlot={RIGHT_TOP:1,RIGHT_MIDDLE:2,RIGHT_BOTTOM:3,LEFT_TOP:4,LEFT_MIDDLE:5,LEFT_BOTTOM:6,LEFT:7,RIGHT:8};mstrmojo.gm.EnumAxisType={ATTRIBUTE:0,METRIC:1};mstrmojo.gm.EnumGraphType={UNDEFINED:-1,AREA:1,BAR:2,LINE:3,SCATTER:4,BUBBLE:5,PIE:6,GRID:7,HISTOGRAM:8,BOXPLOT:9,WATERFALL:10};mstrmojo.gm.EnumContextMenu={SEPARATOR:0,KEEP_ONLY:1,EXCLUDE:2,SORT_ASCENDING:3,SORT_DESCENDING:4,CLEAR_SORT:5,SHOW_DATA:6,SWITCH_THEME:7,KEEP_ONLY_AND_SHOW:8,CLOSE_LEGEND:9,OPEN_LEGEND:10,AXIS_SCALE:11,DRILL_TO:100,CHART_TYPE:200,AREA_ABS:201,AREA_STACKED:202,AREA_PERCENT:203,BAR_SBS:204,BAR_ABS:205,BAR_STACKED:206,BAR_PERCENT:207,LINE_ABS:208,LINE_STACKED:209,LINE_PERCENT:210,BUBBLE:211,SCATTER:212,H_AREA_ABS:213,H_AREA_STACKED:214,H_AREA_PERCENT:215,H_BAR_SBS:216,H_BAR_ABS:217,H_BAR_STACKED:218,H_BAR_PERCENT:219,H_LINE_ABS:220,H_LINE_STACKED:221,H_LINE_PERCENT:222,GRID:223,CIRCLE:224,SQUARE:225,PIE:226,TICKER:227,RING:228,CANVAS:229,SVG:230,LARGE_ABL:231,OUTPUT_EXTREMES:232,COMBINATION:233,ENABLE_PARTIAL_RENDERING:234,DISABLE_PARTIAL_RENDERING:235,OUTPUT_DATA_COUNT:236,ENABLE_TIMER:239,DISABLE_TIMER:240,ENABLE_CE_TIMER:241,DISABLE_CE_TIMER:242};mstrmojo.gm.EnumColorRankMode={RANK_MODE_VALUE:0,RANK_MODE_TOP:1,RANK_MODE_BOTTOM:2,RANK_MODE_TOP_PERCENT:3,RANK_MODE_BOTTOM_PERCENT:4};mstrmojo.gm.EnumColorByType={NULL:0,ATT:1,METRICS_ITEM:2,METRICS:3,ATT_METRICS:4};mstrmojo.gm.EnumDockPosition={TOP:1,RIGHT:2,BOTTOM:3,LEFT:4};mstrmojo.gm.EnumXAxisLabelStatus={NORMAL:1,STAGGER:2,ROTATE:3,HORI_DROP:4};mstrmojo.gm.EnumABLDirection={UNDEFINED:-1,NONE:0,HORIZONTAL:1,VERTICAL:2};mstrmojo.gm.EnumMetricsPosition={MetricsByRow:0,MetricsByColumn:1,MetricsByAxis:2,MetricsByBreakBy:3,MetricsBySlice:4,MetricsByXAxis:5,MetricsByYAxis:6};mstrmojo.gm.EnumDrawingAPI={GET_CHART_WIDTH:0,GET_CHART_HEIGHT:1,GET_ROW_HEADER:2,GET_COLUMN_HEADER:3,CREATE_UNIT_Y_AXIS:4,CREATE_UNIT_X_AXIS:5,GET_FULL_FLEDGED_CHART:6,GET_ROW_SPAN:7,GET_COLUMN_SPAN:8,GET_METRICS_ON_X:9,GET_METRICS_ON_Y:10,GET_METRICS_ON_SIZE_BY:11,UPDATE_MINI_CHART:12,UPDATE_X_AXIS:13,UPDATE_Y_AXIS:14,MAX_RADIUS_CALC:15,GET_EXTRA_COLUMN_HEADER:16,UPDATE_COLUMN_HEADER:17,UPDATE_ROW_HEADER:18,LAYOUT_ALL_X_AXIS_LABELS:19,LAYOUT_ONE_X_AXIS_LABELS:20};mstrmojo.gm.WidgetPropertyTag={FIT_TO:"FitTo",AXIS_SCALE:"MinMax",SHAPE:"Shape",SUB_TYPE:"Subtype",VIS_TYPE:"visType",DATA_LABEL:"DataLabel",DATA_LABELS_PLACEMENT:"DataLabelPalcement",METRIC_LEVEL_DATA_LABEL:"mtcLvlDataLabel",DATA_LABEL_FONT_SIZE_CONSTRAINT:"DataLabelFontSizeConstraint",DATA_LABEL_TEXT_ANGLE:"DataLabelTextAngle",BANDING:"Banding",LEGEND_VISIBLE:"LegendVisibleness",COL_ALIGNMENT:"Columnalignment",ROW_ALIGNMENT:"Rowalignment",MAX_SIZE_TYPE:"SizeType",MAX_SIZE_VALUE:"SizeValue",MIN_SIZE_TYPE:"minSizeType",MIN_SIZE_VALUE:"minSizeValue",OUTSIDE_BORDER:"OutSideBorder",AXES:"AxisLine",MATRIX_LINES:"MatrixLine",GRID_LINES:"GridLine",SELECTION_TYPE:"SelectionType",SELECTIONS:"Selections",LEGEND_MODE:"lm",LEGEND_POSITION:"LegendPosition",SCALE_LEGEND_WIDTH:"lwr",SCALE_CHART_HEIGHT:"rr",SCALE_CHART_WIDTH:"cr",SCALE_ROW_HEADERS:"rvr",SCALE_COL_HEADERS:"chr",SCALE_Y:"yr",SCALE_X:"xr",SCALE_Y2:"y2r",SCALE_X2:"x2r",SCALE_ALL:"scales",SCALE_V_EXTRA_LINE:"vExtraLine",SORT_ORDER:"so",SORT_INDEX:"si",AXIS_SCALE_DATA:"AxisScale",AXIS_SCALE_REAL_MIN:"rMin",AXIS_SCALE_REAL_MAX:"rMax",AXIS_SCALE_MANUAL_MIN:"mMin",AXIS_SCALE_MANUAL_MAX:"mMax",AXIS_SCALE_AUTO_MIN:"autoMin",AXIS_SCALE_AUTO_MAX:"autoMax",SINGLE_AXIS_SCALE_TYPE:"scaleType",LOG_SCALE:"logScale",GROUP_INFO:"groupInfo",METRIC_SHAPES:"metricShapes",AXIS_ORIGIN:"axisOrigin",AXIS_ORIGIN_AUTO:"axOriAuto",AXIS_ORIGIN_VALUE:"axOriValue",TREND_LINE_DEF:"trdDef",REF_LINE_DEF:"refDef",TREND_TYPE:"trdTp",TREND_LEVEL:"trdLvl",TREND_ENABLED:"trdEnabled",TREND_INCLUDE_BREAK_BY:"trdIncBB",TREND_POLY_DEGREE:"trdDgr",TREND_FORECAST_ENABLED:"trdFstEnabled",TREND_BWD_FORECAST:"trdBwdFst",TREND_FWD_FORECAST:"trdFwdFst",TREND_SEASONALITY:"trdSeason",TREND_BUBBLE_FORE_DEF:"trdBbForeDef",TREND_BUBBLE_FORE_FWD:"trdBbForeFwd",TREND_BUBBLE_FORE_BWD:"trdBbForeBwd",TREND_BUBBLE_FORE_ENABLED:"trdBbForeEnabled",TREND_BUBBLE_MAX:"trdBbMax",TREND_BUBBLE_MIN:"trdBbMin",REF_TYPE:"refTp",REF_LEVEL:"refLvl",REF_ENABLED:"refEnabled",REF_SHOW_LABEL:"refLbShw",REF_LABEL_TYPE:"refLbTp",REF_CONST_VALUE:"refCstVl",REF_LINE_NAME:"refLnName",TREND_REF_LINE_THICKNESS:"trdRefLnThk",TREND_REF_LINE_COLOR:"trdRefLnClr",TREND_REF_LINE_STYLE:"trdRefLnStyle",TREND_REF_LINE_COMBINED_STYLE:"trdRefLnCmbStyle",FORMATS_ON_COMBINATION:"fmtOnComb",PARTIAL_RENDER:"prtRdn",SHOW_BOTH_TOTALS:"totalShw:intSumShw"};mstrmojo.gm.FormatingPropertyTag={IS_DEFAULT_VALUE:"_default",MODIFIED_DEF_FILL_COLOR:"modDefFillClr",ALL_SHAPE_FORMAT:"allShpFmt",SHAPE_LINE_THICKNESS:"shpLnThk",SHAPE_LINE_COLOR:"shpLnClr",SHAPE_LINE_STYLE:"shpLnStyle",SHAPE_LINE_COMBINED_STYLE:"shpLnCmbStyle",SHAPE_FILL_COLOR:"shpFillClr",SHAPE_FILL_COLOR_DEFAULT:"shpFillClr_default",SHAPE_FILL_STYLE:"shpFillStyle",SHAPE_FILL_TRANSPARENCY:"shpFillTrans",SHAPE_FILL_EFFECT:"shpFillEff",SHAPE_BORDER_COLOR:"shpBdrClr",SHAPE_BORDER_STYLE:"shpBdrStyle",SHAPE_BORDER_COMBINED_STYLE:"shpBdrCmbStyle",SHAPE_BORDER_THICKNESS:"shpBdrThk",LINE_MARKER_SHOW:"lnMkShw",LINE_MARKER_SHAPE:"lnMkShp",LINE_MARKER_SIZE:"lnMkSz",LINE_MARKER_COLOR:"lnMkClr",LINE_MARKER_COLOR_EQUAL:"lnMkClrEq",LINE_MARKER_BORDER_COLOR:"lnMkBdrClr",PIE_EXPLODE:"pieExpl",DATA_LABELS_SHOW:"dlShw",DATA_LABELS_FONT_FAMILY:"dlFntFml",DATA_LABELS_FONT_SIZE:"dlFntSz",DATA_LABELS_FONT_STYLE:"dlFntStyle",DATA_LABELS_FONT_COLOR:"dlFntClr",REF_LABELS_FONT_FAMILY:"rfLnFntFml",REF_LABELS_FONT_SIZE:"rfLnFntSz",REF_LABELS_FONT_STYLE:"rfLnFntStyle",REF_LABELS_FONT_COLOR:"rfLnFntClr",LEGEND_BG_COLOR:"lgdBgFillClr",LEGEND_BG_FILL_STYLE:"lgdBgFillStyle",LEGEND_BG_FILL_EFFECT:"lgdBgFillEff",LEGEND_BG_FILL_TRANSPARENCY:"lgdBgFillTrans",LEGEND_FONT_SIZE:"lgdFntSz",LEGEND_FONT_FAMILY:"lgdFntFml",LEGEND_FONT_STYLE:"lgdFntStyle",LEGEND_FONT_COLOR:"lgdFntClr",LEGEND_BORDER_SHOW:"lgdBdrShw",LEGEND_BORDER_COLOR:"lgdBdrClr",LEGEND_BORDER_THICKNESS:"lgdBdrThk",LEGEND_BORDER_LINE_STYLE:"lgdBdrStyle",LEGEND_BORDER_LINE_COMBINED_STYLE:"lgdBdrCmbStyle",ALL_LINE_SHOW:"allLnShw",ALL_LINE_COLOR:"allLnClr",ALL_LINE_STYLE:"allLnStyle",ALL_LINE_COMBINED_STYLE:"allLnCmbStyle",ALL_LINE_THICKNESS:"allLnThk",ALL_AXIS_ORIGIN_LINE_SHOW:"axOriLnShw",ALL_AXIS_ORIGIN_LINE_COLOR:"axOriLnClr",ALL_AXIS_ORIGIN_LINE_COMBINED_STYLE:"axOriLnCmbStyle",X_AXIS_ORIGIN_LINE_SHOW:"xAxOriLnShw",X_AXIS_ORIGIN_LINE_COLOR:"xAxOriLnClr",X_AXIS_ORIGIN_LINE_STYLE:"xAxOriLnStyle",X_AXIS_ORIGIN_LINE_COMBINED_STYLE:"xAxOriLnCmbStyle",X_AXIS_ORIGIN_LINE_THICKNESS:"xAxOriLnThk",Y_AXIS_ORIGIN_LINE_SHOW:"yAxOriLnShw",Y_AXIS_ORIGIN_LINE_COLOR:"yAxOriLnClr",Y_AXIS_ORIGIN_LINE_STYLE:"yAxOriLnStyle",Y_AXIS_ORIGIN_LINE_COMBINED_STYLE:"yAxOriLnCmbStyle",Y_AXIS_ORIGIN_LINE_THICKNESS:"yAxOriLnThk",ALL_AXIS_LINE_SHOW:"allAxLnShw",ALL_AXIS_LINE_COLOR:"allAxLnClr",ALL_AXIS_LINE_STYLE:"allAxLnStyle",ALL_AXIS_LINE_COMBINED_STYLE:"allAxLnCmbStyle",ALL_AXIS_LINE_THICKNESS:"allAxLnThk",ALL_AXIS_TITLE_SHOW:"allAxTtShw",ALL_AXIS_TITLE_CONTENT:"allAxTtCtt",ALL_AXIS_TITLE_FONT_COLOR:"allAxTtFntClr",ALL_AXIS_TITLE_FONT_FAMILY:"allAxTtFntFml",ALL_AXIS_TITLE_FONT_STYLE:"allAxTtFntStyle",ALL_AXIS_TITLE_FONT_SIZE:"allAxTtFntSz",ALL_AXIS_LABELS_FONT_SIZE:"allAxLbFntSz",ALL_AXIS_LABELS_FONT_FAMILY:"allAxLbFntFml",ALL_AXIS_LABELS_FONT_STYLE:"allAxLbFntStyle",ALL_AXIS_LABELS_FONT_COLOR:"allAxLbFntClr",ALL_AXIS_LABELS_ROTATION:"allAxLbRtt",ALL_AXIS_LABELS_SHOW:"allAxLbShw",X_AXIS_LINE_SHOW:"xAxLnShw",X_AXIS_LINE_COLOR:"xAxLnClr",X_AXIS_LINE_STYLE:"xAxLnStyle",X_AXIS_LINE_COMBINED_STYLE:"xAxLnCmbStyle",X_AXIS_LINE_THICKNESS:"xAxLnThk",X_AXIS_TITLE_SHOW:"xAxTtShw",X_AXIS_TITLE_CONTENT:"xAxTtCtt",X_AXIS_TITLE_FONT_COLOR:"xAxTtFntClr",X_AXIS_TITLE_FONT_FAMILY:"xAxTtFntFml",X_AXIS_TITLE_FONT_STYLE:"xAxTtFntStyle",X_AXIS_TITLE_FONT_SIZE:"xAxTtFntSz",X_AXIS_LABELS_FONT_SIZE:"xAxLbFntSz",X_AXIS_LABELS_FONT_FAMILY:"xAxLbFntFml",X_AXIS_LABELS_FONT_STYLE:"xAxLbFntStyle",X_AXIS_LABELS_FONT_COLOR:"xAxLbFntClr",X_AXIS_LABELS_ROTATION:"xAxLbRtt",X_AXIS_LABELS_SHOW:"xAxLbShw",Y_AXIS_LINE_SHOW:"yAxLnShw",Y_AXIS_LINE_COLOR:"yAxLnClr",Y_AXIS_LINE_STYLE:"yAxLnStyle",Y_AXIS_LINE_COMBINED_STYLE:"yAxLnCmbStyle",Y_AXIS_LINE_THICKNESS:"yAxLnThk",Y_AXIS_TITLE_SHOW:"yAxTtShw",Y_AXIS_TITLE_CONTENT:"yAxTtCtt",Y_AXIS_TITLE_FONT_COLOR:"yAxTtFntClr",Y_AXIS_TITLE_FONT_FAMILY:"yAxTtFntFml",Y_AXIS_TITLE_FONT_STYLE:"yAxTtFntStyle",Y_AXIS_TITLE_FONT_SIZE:"yAxTtFntSz",Y_AXIS_LABELS_FONT_SIZE:"yAxLbFntSz",Y_AXIS_LABELS_FONT_FAMILY:"yAxLbFntFml",Y_AXIS_LABELS_FONT_STYLE:"yAxLbFntStyle",Y_AXIS_LABELS_FONT_COLOR:"yAxLbFntClr",Y_AXIS_LABELS_ROTATION:"yAxLbRtt",Y_AXIS_LABELS_SHOW:"yAxLbShw",ALL_FILL_COLOR:"allFillClr",ALL_FILL_TRANSPARENCY:"allFillTrans",BG_COLOR:"bgFillClr",BG_FILL_EFFECT:"bgFillEff",BG_FILL_STYLE:"bgFillStyle",BG_FILL_TRANSPARENCY:"bgFillTrans",ROW_HEADER_FILL_COLOR:"rwHdrFillClr",ROW_HEADER_FILL_EFFECT:"rwHdrFillEff",ROW_HEADER_FILL_STYLE:"rwHdrFillStyle",ROW_HEADER_FILL_TRANSPARENCY:"rwHdrFillTrans",COLUMN_HEADER_FILL_COLOR:"colHdrFillClr",COLUMN_HEADER_FILL_EFFECT:"colHdrFillEff",COLUMN_HEADER_FILL_STYLE:"colHdrFillStyle",COLUMN_HEADER_FILL_TRANSPARENCY:"colHdrFillTrans",ALL_MATRIX_LINES_SHOW:"allMatrixLnShw",ALL_MATRIX_LINES_COLOR:"allMatrixLnClr",ALL_MATRIX_LINES_THICKNESS:"allMatrixLnThk",ALL_MATRIX_LINES_STYLE:"allMatrixLnStyle",ALL_MATRIX_LINES_COMBINED_STYLE:"allMatrixLnCmbStyle",V_MATRIX_LINES_SHOW:"vMatrixLnShw",V_MATRIX_LINES_COLOR:"vMatrixLnClr",V_MATRIX_LINES_THICKNESS:"vMatrixLnThk",V_MATRIX_LINES_STYLE:"vMatrixLnStyle",V_MATRIX_LINES_COMBINED_STYLE:"vMatrixLnCmbStyle",H_MATRIX_LINES_SHOW:"hMatrixLnShw",H_MATRIX_LINES_COLOR:"hMatrixLnClr",H_MATRIX_LINES_THICKNESS:"hMatrixLnThk",H_MATRIX_LINES_STYLE:"hMatrixLnStyle",H_MATRIX_LINES_COMBINED_STYLE:"hMatrixLnCmbStyle",OUTSIDE_BORDER_SHOW:"outBdrShw",OUTSIDE_BORDER_COLOR:"outBdrClr",OUTSIDE_BORDER_STYLE:"outBdrStyle",OUTSIDE_BORDER_THICKNESS:"outBdrThk",OUTSIDE_BORDER_COMBINED_STYLE:"outBdrCmbStyle",GRID_LINE_AUTO:"gridLineAuto",ALL_GRID_LINES_SHOW:"allGridLnShw",ALL_GRID_LINES_COLOR:"allGridLnClr",ALL_GRID_LINES_THICKNESS:"allGridLnThk",ALL_GRID_LINES_STYLE:"allGridLnStyle",ALL_GRID_LINES_COMBINED_STYLE:"allGridLnCmbStyle",AUTO_GRID_LINES_COLOR:"autoGridLnClr",AUTO_GRID_LINES_COMBINED_STYLE:"autoGridLnCmbStyle",MAJOR_GRID_LINES_SHOW:"majorGridLnShw",MAJOR_GRID_LINES_COLOR:"majorGridLnClr",MAJOR_GRID_LINES_THICKNESS:"majorGridLnThk",MAJOR_GRID_LINES_STYLE:"majorGridLnStyle",MAJOR_GRID_LINES_COMBINED_STYLE:"majorGridLnCmbStyle",MINOR_GRID_LINES_SHOW:"minerGridLnShw",MINER_GRID_LINES_COLOR:"minerGridLnClr",MINER_GRID_LINES_THICKNESS:"minerGridLnThk",MINER_GRID_LINES_STYLE:"minerGridLnStyle",MINER_GRID_LINES_COMBINED_STYLE:"minerGridLnCmbStyle",ALL_NGM_GRID_LINES_SHOW:"allNGMGridLnShw",X_GRID_LINES_SHOW:"xGridLnShw",Y_GRID_LINES_SHOW:"yGridLnShw",ALL_ROW_COLUMN_SHOW:"allRwColShw",COLUMN_TEXT_SHOW:"colTxtShw",ROW_TEXT_SHOW:"rwTxtShw",COLUMN_HEADER_SHOW:"colHdrShw",ROW_HEADER_SHOW:"rwHdrShw",COLUMN_VALUES_SHOW:"colVlShw",ROW_VALUES_SHOW:"rwVlShw",ALL_TEXT_FONT_COLOR:"allTxtFntClr",ALL_TEXT_FONT_SIZE:"allTxtFntSz",ALL_TEXT_FONT_FAMILY:"allTxtFntFml",ALL_TEXT_FONT_STYLE:"allTxtFntStyle",ALL_ROW_COLUMN_TEXT_FONT_COLOR:"allRwColTxtFntClr",ALL_ROW_COLUMN_TEXT_FONT_SIZE:"allRwColTxtFntSz",ALL_ROW_COLUMN_TEXT_FONT_FAMILY:"allRwColTxtFntFml",ALL_ROW_COLUMN_TEXT_FONT_STYLE:"allRwColTxtFntStyle",ALL_ROW_COLUMN_TEXT_ALIGNMENT_HORIZONTAL:"allRwColTxtAlignH",ALL_ROW_COLUMN_TEXT_ALIGNMENT_VERTICAL:"allRwColTxtAlignV",ROW_TEXT_TEXT_FONT_COLOR:"rwTxtTxtFntClr",ROW_TEXT_TEXT_FONT_SIZE:"rwTxtTxtFntSz",ROW_TEXT_TEXT_FONT_FAMILY:"rwTxtTxtFntFml",ROW_TEXT_TEXT_FONT_STYLE:"rwTxtTxtFntStyle",ROW_TEXT_TEXT_ALIGNMENT_HORIZONTAL:"rwTxtTxtAlignH",ROW_TEXT_TEXT_ALIGNMENT_VERTICAL:"rwTxtTxtAlignV",COLUMN_TEXT_TEXT_FONT_COLOR:"colTxtTxtFntClr",COLUMN_TEXT_TEXT_FONT_SIZE:"colTxtTxtFntSz",COLUMN_TEXT_TEXT_FONT_FAMILY:"colTxtTxtFntFml",COLUMN_TEXT_TEXT_FONT_STYLE:"colTxtTxtFntStyle",COLUMN_TEXT_TEXT_ALIGNMENT_HORIZONTAL:"colTxtTxtAlignH",COLUMN_TEXT_TEXT_ALIGNMENT_VERTICAL:"colTxtTxtAlignV",ROW_HEADER_TEXT_FONT_COLOR:"rwHdrTxtFntClr",ROW_HEADER_TEXT_FONT_SIZE:"rwHdrTxtFntSz",ROW_HEADER_TEXT_FONT_FAMILY:"rwHdrTxtFntFml",ROW_HEADER_TEXT_FONT_STYLE:"rwHdrTxtFntStyle",ROW_HEADER_TEXT_ALIGNMENT_HORIZONTAL:"rwHdrTxtAlignH",ROW_HEADER_TEXT_ALIGNMENT_VERTICAL:"rwHdrTxtAlignV",COLUMN_HEADER_TEXT_FONT_COLOR:"colHdrTxtFntClr",COLUMN_HEADER_TEXT_FONT_SIZE:"colHdrTxtFntSz",COLUMN_HEADER_TEXT_FONT_FAMILY:"colHdrTxtFntFml",COLUMN_HEADER_TEXT_FONT_STYLE:"colHdrTxtFntStyle",COLUMN_HEADER_TEXT_ALIGNMENT_HORIZONTAL:"colHdrTxtAlignH",COLUMN_HEADER_TEXT_ALIGNMENT_VERTICAL:"colHdrTxtAlignV",ROW_VAVLUE_TEXT_FONT_COLOR:"rwVlTxtFntClr",ROW_VAVLUE_TEXT_FONT_SIZE:"rwVlTxtFntSz",ROW_VAVLUE_TEXT_FONT_FAMILY:"rwVlTxtFntFml",ROW_VAVLUE_TEXT_FONT_STYLE:"rwVlTxtFntStyle",ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL:"rwVlTxtAlignH",ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL:"rwVlTxtAlignV",COLUMN_VAVLUE_TEXT_FONT_COLOR:"colVlTxtFntClr",COLUMN_VAVLUE_TEXT_FONT_SIZE:"colVlTxtFntSz",COLUMN_VAVLUE_TEXT_FONT_FAMILY:"colVlTxtFntFml",COLUMN_VAVLUE_TEXT_FONT_STYLE:"colVlTxtFntStyle",COLUMN_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL:"colVlTxtAlignH",COLUMN_VAVLUE_TEXT_ALIGNMENT_VERTICAL:"colVlTxtAlignV",TITLE_FONT_COLOR:"ttlFntClr",TITLE_FONT_SIZE:"ttlFntSz",TITLE_FONT_FAMILY:"ttlFntFml",TITLE_FONT_STYLE:"ttlFntStyle",COLOR_SQUARE_COLOR:"clrSqrClr",SELECTION_LIMIT:"slctnLmt",CONTAINER_FIT_MODE:"cntrFitMode",SHOW_MODEBAR:"showModeBar",MEAN_SD:"meanSD",POINT_SIZE:"ptSize",PTSZ_TYPE:"ptSzType",JITTER:"jitter",JTR_TYPE:"jtrType",POINT_POS:"ptPos",PTPOS_TYPE:"ptPosType",SHOW_OUTLIERS:"shwOutliers",CUSTOM_BINS_MODE:"custMode",MANUAL_BINS_MODE:"manualBinsMode",RANGE_TYPE:"rangeType",NUM_BINS:"numBins",XBINS_START:"xBinsStart",XBINS_END:"xBinsEnd",XBINS_SIZE:"xBinsSize",HAS_UNCHECKED_AUTO:"hasUncheckedAuto",HAS_UNCHECKED_DATASET_RANGE:"hasUncheckedDstRng",TOTAL_SHOW:"totalShw",TOTAL_LABEL:"totalLabel",INT_SUM_SHOW:"intSumShw",POSITIVE_COLOR:"posClr",NEGATIVE_COLOR:"negClr",TOTAL_COLOR:"totalClr",INT_SUM_COLOR:"intSumClr",INT_SUM_FULL:"intSumFull"};mstrmojo.gm.EnumAxis={DssAxisReserved:0,DssAxisRows:1,DssAxisColumns:2,DssAxisPages:3,DssAxisChapters:4,DssAxisAll:5};mstrmojo.gm.EnumCombinedLineStyle={NONE:99,THIN:1,THICK:2,DASHED:3,DOTTED:4};mstrmojo.gm.EnumSizeByType={SQUARE:1,CIRCLE:4};mstrmojo.gm.EnumTheme={DARK:0,LIGHT:1};mstrmojo.gm.EnumFitTo={NONE:1,AUTOMATIC:2,COMPACT:3,MANUAL:4};mstrmojo.gm.EnumAxisScale={GLOBAL:0,PERROWCOL:1,PERCELL:2,CUSTOM:3,DIFFERENT:4};mstrmojo.gm.EnumShape={GENERIC:-1,AREA:0,BAR:1,LINE:2,STEPLINE:3,CIRCLE:4,RECTANGLE:5,SQUARE:6,TICK:7,PIESLICE:8,POLYGON:9,PIE:10,RING:11,DEFAULT:12,BULLET:13};mstrmojo.gm.EnumSubtype={AUTO:1,ABSOLUTE:2,STACKED:3,CLUSTERED:4,PERCENT:5};mstrmojo.gm.EnumDataLabels={HIDE:1,SHOW_VALUE_ONLY:2,SHOW_TEXT_ONLY:3};mstrmojo.gm.EnumDataLabelPlacements={AUTOMATIC:1,GENERIC:2,RESERVED:3};mstrmojo.gm.EnumLegend={SHOW:0,HIDE:1,MINIMIZED:2};mstrmojo.gm.EnumLegendMode={RESTORED:1,MINIMIZED:2};mstrmojo.gm.EnumTextAlignH={LEFT:0,MIDDLE:1,RIGHT:2};mstrmojo.gm.EnumTextAlignV={TOP:0,MIDDLE:1,BOTTOM:2};mstrmojo.gm.EnumMaxSizeType={AUTO:1,MANUAL:2,AUTO_FIT:3};mstrmojo.gm.EnumMinSizeType={AUTO:1,MANUAL:2,PROPORTIONAL:3};mstrmojo.gm.EnumAxes={SHOW_BOTH:1,SHOW_NONE:2,SHOW_X:3,SHOW_Y:4};mstrmojo.gm.EnumMatrixLines={SHOW_ALL:1,SHOW_NONE:2,SHOW_HORIZONTAL:3,SHOW_VERTICAL:4};mstrmojo.gm.EnumGridLines={AUTO:1,SHOW:2,HIDE:3,SHOW_MAJOR_ONLY:4};mstrmojo.gm.EnumNGMGridLines={SHOW_Y:1,SHOW_X:2,SHOW:3,HIDE:4,AUTO:5};mstrmojo.gm.LineMarkerShape={Circle:4,Square:1};mstrmojo.gm.ShapeFillType={Solid:0,Gradient:14,Pattern:3};mstrmojo.gm.ShapeFillEffect={None:1,Bevel:2};mstrmojo.gm.Enum3DGMapping={SizeType:"9999_1002",SizeValue:"9999_1003",lgdBgFillClr:"6_564",lgdBgFillStyle:"6_10002",lgdBgFillEff:"6_608",lgdFntSz:"9_603",lgdFntFml:"9_576",lgdFntStyle:"9_584",lgdFntClr:"9_574",LegendVisibleness:"9999_116",xAxShw:"9999_124",xAxTtCtt:"293_9999",xAxTtFntClr:"293_574",xAxTtFntFml:"293_576",xAxTtFntStyle:"293_584",xAxLbFntSz:"272_603",xAxLbFntFml:"272_576",xAxLbFntStyle:"272_584",yAxShw:"9999_125",yAxTtCtt:"299_9999",yAxTtFntClr:"299_574",yAxTtFntFml:"299_576",yAxTtFntStyle:"299_584",yAxLbFntSz:"296_603",yAxLbFntFml:"296_576",yAxLbFntStyle:"296_584",bgFillClr:"1_564",bgFillEff:"1_879",bgFillTrans:"1_608",outBdrClr:"1_588"};mstrmojo.gm.EnumRefLineModelType={MAX:1,MIN:2,AVG:3,MED:4,FIRST:5,LAST:6,CONST:7};mstrmojo.gm.EnumTrendLineModelType={BEST_FIT:256,LINEAR:257,LOG:258,EXP:259,POW:260,POLY:261};mstrmojo.gm.EnumTrendRefLevel={DssModelLevelReserved:0,DssModelLevelPerCell:1,DssModelLevelPerRow:2,DssModelLevelPerColumn:3,DssModelLevelPerPanel:4,DssModelLevelLastOne:5};mstrmojo.gm.EnumTimeRole={None:0,YearOfDecade:3083,QuarterOfYear:2826,MonthOfYear:2825,MonthOfQuarter:2569,WeekOfYear:2824,WeekOfQuarter:2568,WeekOfMonth:2312,DayOfYear:2823,DayOfQuarter:2567,DayOfMonth:2311,DayOfWeek:2055,HourOfDay:1798,MinuteOfDay:1797,MinuteOfHour:1541,SecondOfDay:1796,SecondOfHour:1540,SecondOfMinute:1284};mstrmojo.gm.EnumTrendRefModelLabels={DssModelLabelsReserved:-1,DssModelLabelsNone:0,DssModelLabelsType:1,DssModelLabelsMetric:2,DssModelLabelsValue:4};mstrmojo.gm.EnumTRFManipulations={AddTRLine:"141",RemoveTRLine:"142",UpdateTRLine:"143",UpdateForecastInfo:"144"};mstrmojo.gm.EnumShapeFormatStatus={NORMAL:0,PER_COLORBY:1,PER_SHAPE:2};mstrmojo.gm.EnumNGMSubtype={CLUSTERED:0,STACKED:1,PERCENT:2};mstrmojo.gm.EnumBoxPlotMean={NO_MEAN:0,ONLY_MEAN:1,MEAN_STDEV:2};mstrmojo.gm.EnumBoxPlotOutliers={OUTLIERS:0,ALL_POINTS:1,JITTER:0,JTR_MAN:0.5,POINT_POS:0,POS_MAN:-1.8,POINT_SIZE:6,SIZE_MAN:10,MANUAL:1};mstrmojo.gm.EnumHistogram={AUTOMATIC:1,MANUAL:0,CUST_INPUT:2,DATASET:3,BY_BIN_SIZE:4,BY_BIN_NUMBER:5};mstrmojo.gm.EnumContainerFitModes={AUTOMATIC:0,FIT_TO_CONTAINER:1,FIT_TO_CONTENT:2};mstrmojo.chart.enums.EnumAxisLabelsLocation={ALL_LEFT:0,ALL_RIGHT:1,ALL_LEFT_RIGHT:2,ALL_BOTTOM:3,ALL_TOP:4,ALL_BOTTOM_TOP:5};mstrmojo.chart.enums.EnumTrendLineIndex={TLI_Y1:0,TLI_Y2:1,TLI_BOTH:2};mstrmojo.chart.model.enums.EnumDSSGraphFillBevelEffect={DssGraphFillBevelNone:0,DssGraphFillBevelSmoothEdge:1,DssGraphFillBevelChiselEdge:2,DssGraphFillBevelDonut:3,DssGraphFillBevelSphere:4};mstrmojo.chart.enums.EnumLineJoinType={LJT_MITER:0,LJT_BEVEL:1,LJT_ROUND:2};mstrmojo.chart.enums.EnumGraphMatrixThemeType={UNDEFINED:-1,_black:0,_white:1};(function(){function B(L,Q,N){var M,O;M=0;if(N){M=Math.max(L,L-Q);M=Math.max(M,-Q);}else{M=L-Q;}if(M===0){this.mIsShown=false;return 1;}var P=M;O=1;while(M<1){M*=10;O/=10;}while(M>=10){M/=10;O*=10;}if(M<1.8){O*=2;O/=10;}else{if(M<3.1){O*=4;O/=10;}else{if(M<4.6){O*=5;O/=10;}else{if(M>=8.1){O*=2;}}}}return O;}function K(P){var L,N;this.mStep=B.call(this,this.mMaximum,this.mMinimum,P.mAlwaysIncludeZero);this.mMaxTick=Math.ceil(this.mMaximum/this.mStep)*this.mStep;this.mMinTick=Math.floor(this.mMinimum/this.mStep)*this.mStep;this.mMinTick=(this.mMinTick*this.mMinimum<0)?0:this.mMinTick;if(P.mAlwaysIncludeZero){this.mMaxTick=(this.mMaximum<0)?0:this.mMaxTick;this.mMinTick=(this.mMinimum>0)?0:this.mMinTick;}var M=this.mMaxTick-this.mMinTick;if(this.mStep>=M){return ;}L=Math.floor((this.mMaxTick-this.mMinTick+this.mStep/100)/this.mStep)+1;for(N=1;N<L-1;++N){var O=this.mMinTick+N*this.mStep;this.mTicks.push(O);}}function C(M){var L;this.mMaxTick=1;this.mStep=this.mMinimum<0?0.2:0.1;if(M.mUseCustomMinMax){this.mMaxTick=M.mAxisMaxValue;this.mMinTick=M.mAxisMinValue;this.mMaxTick=Math.min(1,this.mMaxTick);this.mMinTick=Math.max(-1,this.mMinTick);this.mStep=0.1;}else{if(this.mMaximum>=0.5){this.mMaxTick=1;this.mMinTick=Math.floor(this.mMinimum/this.mStep)*this.mStep;this.mMinTick=(this.mMinTick*this.mMinimum<0)?0:(this.mMinTick>0?0:this.mMinTick);if(this.mMinimum<-0.5){this.mMinTick=-1;}}else{if(this.mMaximum>0){this.mMaxTick=Math.ceil(this.mMaximum/this.mStep)*this.mStep;this.mMinTick=-1;}else{this.mStep=0.1;this.mMaxTick=0;this.mMinTick=-1;}}}for(L=this.mMinTick+this.mStep;L+0.01<this.mMaxTick;L+=this.mStep){this.mTicks.push(Math.round(L*100)/100);}}function I(L){return Math.log(L)/Math.log(10);}function H(O){var N,L,M;this.mStep=1;if(this.mMaximum<=0){this.mMinTick=1;this.mMaxTick=10;return ;}if(this.mMinimum<=0){L=this.mMaximum>1?0:-1;this.mMinTick=Math.pow(10,L);if(O.mUseCustomMinMax){this.mMaxTick=this.mMaximum;N=Math.floor(I.call(this,this.mMaximum));if(I.call(this,this.mMaximum)===N){N--;}}else{N=Math.ceil(I.call(this,this.mMaximum));this.mMaxTick=Math.pow(10,N);}for(M=L+1;M<N;++M){this.mTicks.push(Math.pow(10,Math.floor(M)));}return ;}if(O.mUseCustomMinMax){N=I.call(this,this.mMaximum);L=I.call(this,this.mMinimum);this.mMaxTick=this.mMaximum;this.mMinTick=this.mMinimum;}else{N=Math.ceil(I.call(this,this.mMaximum));L=Math.floor(I.call(this,this.mMinimum));this.mMaxTick=Math.pow(10,N);this.mMinTick=Math.pow(10,L);}for(M=L+1;M<N;++M){this.mTicks.push(Math.pow(10,Math.floor(M)));}}function J(L){this.mTicks.splice(0,this.mTicks.length);if(this.mIsPercent){return C.call(this,L);}if(L.mUseLogarithmicScale){return H.call(this,L);}K.call(this,L);}function G(Q){if(Q.mUseCustomMinMax||Q.mUseLogarithmicScale){return ;}var M=0.1,O=false,L=false,P=[];this.GetTicks(P);if(P.length>=2){var N=P.length;L=((Math.abs(this.mMaximum-P[N-2])<M*this.mStep));O=((Math.abs(this.mMinimum-P[1])<M*this.mStep));if(this.mIsPercent){L=false;}}if(L&&O){this.mMinTick=this.mMinimum;this.mMaxTick=this.mMaximum;Q.mUseMinValue=Q.mShowMinLabel=true;Q.mUseMaxValue=Q.mShowMaxLabel=true;}else{if(L){this.mMaxTick=this.mMaximum;Q.mUseMaxValue=Q.mShowMaxLabel=true;}else{if(O){this.mMinTick=this.mMinimum;Q.mUseMinValue=Q.mShowMinLabel=true;}else{}}}if(Q.mAlwaysIncludeZero){this.mMaxTick=(this.mMaximum<0)?0:this.mMaxTick;this.mMinTick=(this.mMinimum>0)?0:this.mMinTick;}}mstrmojo.chart.common.ScalePlate=mstrmojo.provide("mstrmojo.chart.common.ScalePlate",{mOptions:{mShowMinLabel:true,mShowMaxLabel:true},isStackedChart:false,mStep:0,mIsPercent:false,mMinimum:0,mMaximum:0,mMaxTick:0,mMinTick:0,mTicks:[],clear:function F(){this.isStackedChart=this.mIsPercent=false;this.mMinimum=this.mMaximum=0;this.mMinTick=this.mMaxTick=0;this.mStep=0;this.mTicks=[];},GetTicks:function A(M){if(this.mOptions.mShowMinLabel){M.push(this.mMinTick);}var L;for(L=0;L<this.mTicks.length;++L){M.push(this.mTicks[L]);}if(this.mOptions.mShowMaxLabel){M.push(this.mMaxTick);}},getMaxMinTickValue:function D(O,N,L,M){this.computeTicks(O,N,L,M);return{Max:this.mMaxTick,Min:this.mMinTick};},computeTicks:function E(Q,P,L,N){this.mMinimum=N;this.mMaximum=L;this.mIsPercent=!!(P&1);this.isStackedChart=!!(P&2);var O=1e-14;if(!Q.mUseLogarithmicScale&&this.isStackedChart){this.mMinimum=Math.min(this.mMinimum,0);this.mMaximum=Math.max(this.mMaximum,0);}if(Q.mDrawCustomLine){this.mMinimum=Math.min(this.mMinimum,Q.mAxisCustomValue);this.mMaximum=Math.max(this.mMaximum,Q.mAxisCustomValue);}if(this.mIsPercent&&this.mMinimum===this.mMaximum&&1===this.mMaximum){if(this.mMinimum===1){this.mMinimum=0;}}if(Math.abs(this.mMinimum-this.mMaximum)<O){if(this.mMinimum<-O||this.mMinimum>O){var M=Math.abs(this.mMinimum)*0.5;this.mMaximum=this.mMaximum+M;this.mMinimum=this.mMinimum-M;}else{this.mMinimum=-6;this.mMaximum=6;}}J.call(this,Q);if(Q.mUseLogarithmicScale&&this.isStackedChart){this.mMaximum=Q.mDrawCustomLine?Math.max(this.mMaximum+this.mMinTick,Q.mAxisCustomValue):this.mMaximum+this.mMinTick;this.mMinimum=Math.min(this.mMinimum,0);this.mTicks.splice(0,this.mTicks.length);H.call(this,Q);}G.call(this,Q);}});}());mstrmojo.vi.enums.EnumFeatures={SUPPORT_RESPONSIVE:"support-responsive",SUPPORT_RESPONSIVE_RESIZING:"support-responsive-resizing",SUPPORT_GHOST_IMG:"support-ghost-img",SUPPORT_NLP:"use-natural-language",SUPPORT_CONDITION_METRIC:"support_condition_metric",USE_WORKSTATION_NAMING_STYLE:"use-workstation-naming-style",SUPPORT_TOC_UPDATEPOISITION:"support-toc-updatePosition",SUPPORT_LIVEMODE:"support-livemode",NUMBER_FORMATTING:"number-formatting",SAVE_ANALYSIS:"save-analysis",INSERT_NEW_METRIC:"insert-new-metric",DATA_ENGINE_VERSION:"data-engine-version",WEB_DRILL_AND_LINK:"web-drill-and-link",WEB_IMPORT_DATABASE:"web-import-database"};mstrmojo.chart.enums.EnumDSSGraphObjectManager={DssChartManager:20000,DssPlotManager:20001,DssPlot:20002,DssLegend:20003,DssAreaSeriesRenderer:20004,DssBarSeriesRenderer:20005,DssLineSeriesRenderer:20006,DssStepLineSeriesRenderer:20007};mstrmojo.chart.enums.EnumLayout={LO_ABSOLUTE:0,LO_CLUSTER:1,LO_STACKED:2,LO_PERCENT:3};mstrmojo.chart.enums.EnumShowFace={SF_FRONT:1,SF_SIDE:2,SF_HIDDEN_SIDE:4};(function(){function Q(U,R,S){if(U.nodeType===3&&R){return U;}else{var T=(R&&U.nodeType===1&&U.lastChild)?U.lastChild:F(U,S);return T?D(T,S):null;}}function F(S,R){return(S===R)?null:(S.previousSibling||F(S.parentNode,R));}function D(S,R){if(S===R){return null;}if(S.nodeType===3&&I(S)){return S;}else{if(S.nodeType===1&&S.lastChild){return D(S.lastChild);}else{return D(F(S,R));}}}function I(R){return R.textContent||R.nodeValue||R.innerText;}function M(U,R,S){if(U.nodeType===3&&R){return U;}else{var T=(R&&U.nodeType===1&&U.firstChild)?U.firstChild:B(U,S);return T?E(T,S):null;}}function B(S,R){return(S===R)?null:(S.nextSibling||B(S.parentNode,R));}function E(S,R){if(S===R){return null;}if(S.nodeType===3&&I(S)){return S;}else{if(S.nodeType===1&&S.firstChild){return E(S.firstChild);}else{return E(B(S,R));}}}mstrmojo.range=mstrmojo.provide("mstrmojo.range",{EDGE:{EDGE_BEGIN:1,EDGE_END:2,EDGE_MIDDLE:-1},getEdgeInfo:function P(T,U){var R=0,S;if(T.nodeType===1){if(window.getSelection){S=document.createRange();S.selectNode(T);R=S.toString().length;}else{S=document.body.createTextRange();S.moveToElementText(T);R=S.text.length;}}else{R=I(T).length;}return U===R?this.EDGE.EDGE_END:(U===0?this.EDGE.EDGE_BEGIN:this.EDGE.EDGE_MIDDLE);},collapseOnNode:function K(U,S){if(!U.offsetParent){return ;}var T=this.getSelection(),R=this.getRange();if(window.getSelection){R.selectNodeContents(U);R.collapse(S);T.removeAllRanges();T.addRange(R);}else{R.moveToElementText(U);R.collapse(S);R.select();}},collapseOnTextNode:function L(U,V){var T=this.getSelection(),S=this.getRange();if(window.getSelection){var R=M(U,true);S.setStart(R,V);S.collapse(true);T.removeAllRanges();T.addRange(S);}else{S.moveToElementText(U);S.collapse(true);S.move("character",V);S.select();}},collapseOnTextNodeIE:function C(S,T){var U=M(S,true),R;while(U!==null){R=I(U).length;if(R>=T){this.collapseOnTextNode(U,T);break;}else{T-=R;U=M(U,false);}}},getRangeInfo:function J(X,e){var Z=null,j,c=this.getRange(),b;if(X&&X===c.startContainer){var g=c.startContainer.firstChild,U=g&&g.firstChild,d=U&&U.firstChild;if(d){c.setStart(d,c.startOffset);c.setEnd(d,c.endOffset);}}if(window.getSelection){var W=function(l,n,m){var k=l.cloneRange();k.collapse(m);k.setStartBefore(n);return k.toString().length;},S=c.startContainer,f=c.startOffset;if(S.nodeType===1){f=W(c,S,true);}Z={collapsed:c.collapsed,startContainer:S,startOffset:e?e.startOffset:f};if(!c.collapsed){var V=c.endContainer,R=c.endOffset;if(V.nodeType===1){R=W(c,V,false);}Z.endContainer=V;Z.endOffset=R;}Z.range=c;}else{var i,a,Y=function(n,o){var m=n.duplicate(),k=document.body.createTextRange(),l;m.collapse(o);l=m.parentElement();k.moveToElementText(l);k.setEndPoint("EndToStart",m);return{container:l,offset:k.text.length};},h=Y(c,true),T;Z={collapsed:(c.compareEndPoints("StartToEnd",c)===0),startContainer:h.container,startOffset:h.offset};if(!Z.collapsed){T=Y(c,false);Z.endContainer=T.container;Z.endOffset=T.offset;}}return Z;},collapse:function O(S){if(window.getSelection){var T=this.getSelection();if(S){T.collapseToStart();}else{T.collapseToEnd();}}else{var R=this.getRange();R.collapse(S);R.select();}},selectSingleNode:function H(T){var S=this.getSelection(),R=this.getRange();if(window.getSelection){R.selectNodeContents(T);S.removeAllRanges();S.addRange(R);}else{R.moveToElementText(T);R.select();}},selectMultipleNodes:function N(W,S,X,U){var V=this.getSelection(),T=this.getRange();if(window.getSelection){T.setStart(W,S);T.setEnd(X,U);V.removeAllRanges();V.addRange(T);}else{W=(W.nodeType===3)?W.parentNode:W;T.moveToElementText(W);T.move("character",S);X=(X.nodeType===3)?X.parentNode:X;var R=document.body.createTextRange();R.moveToElementText(X);R.move("character",U);T.setEndPoint("EndToStart",R);T.select();}},getSelection:function G(){if(window.getSelection){return window.getSelection();}else{return document.selection;}},getRange:function A(){if(window.getSelection){selection=window.getSelection();if(selection.rangeCount>0){return selection.getRangeAt(0);}else{return document.createRange();}}else{return document.selection.createRange();}}});}());mstrmojo.chart.model.enums.EnumDSSGraphDataTextShowType={DssGraphDataTextNone:0,DssGraphDataTextValue:1,DssGraphDataTextLabel:2,DssGraphDataTextBoth:3,DssGraphDataTextAbs:4,DssGraphDataTextAbsValue:5,DssGraphDataTextAbsBoth:7,DssGraphDataTextTotal:8,DssGraphDataTextZValue:16,DssGraphDataTextPercent:32,DssGraphDataTextYValue:64,DssGraphDataTextInternal:128,DssGraphDataTextSeriesDependent:256,DssGraphDataTextQualityObjectMode:512};(function(){mstrmojo.requiresDescs(9380,9381,9382,9383,9384,9385,9379,15106,15107,10639,10159,9705,9704);mstrmojo.DI.DIConstants=mstrmojo.provide("mstrmojo.DI.DIConstants",{invalidObjectNameChars:'\\"[]',invalidObjectNameCharsRegex:/[\\"\[\]]/,sourceItemLinkType:{dbList:0,oauthPara:1},setDefaultOAuthParamCMD:"MSTR_DEFAULT_OAUTH_PARAMS",actions:{none:0,importSource:1,editImport:2,transform:3,changeSheet:4,publish:5,changeMappings:6,refine:7,quickPreview:8,savePublish:9,getFlatPreview:10,refreshData:11,mergeCube:12},localStorageKey:{HGOSFileTypeTooltipPop:"HGOSFileTypeTooltipPop"},requestFlag:{mapping:1,preview:2,sourceInfo:4,refineSourceInfo:8,sheets:16,crb:32,transformations:64,transformedPreview:128,relationship:256,stateInfo:512,anyState:268435456,fullData:1024,refineInnerData:2048},formMappingFlag:{formMappingFlagReserved:0,formMappingFlagRemoveGeoRole:1,formMappingFlagRemoveTimeRole:2,formMappingFlagRemoveDeriveFlags:4},browseFlag:{reportBindingTable:1,dataPreview:4,publish:16,cubeConfig:68,reportLevelProperty:256},importBehaviorFlag:{reserved:0,newColumnsSilent:1,dataTypeSilent:2},saveAsFlags:{saveAsOverWrite:32,saveAsManaged:524288,saveAsDDA:33554432,saveAsInMemory:67108864,saveAsWithPrompts:4096,saveAsWithAnswers:4},connectLiveSupport:{connectLiveSupportUnknown:0,connectLiveSupportDDAOrInMemory:1,connectLiveSupportInMemoryOnly:2,connectLiveSupportDDAOnly:3},xdaType:{excel:272,text:288,refine:384,salesforce:337,querybuilder:352,ffsql:304,mdx:2,customFreeFormSQL:3,googleAnalytics:390,googleBigQuery:341,googleBigQueryFFSQL:342,googleBigQuerySingleTable:345,qbSingleTable:368,twitter:343,facebook:344,dataImport:256,projectsImport:400,sparkDataset:416,dataImportFileExcel:16|256,dataImportFileText:32|256,dataImportCustomSQL:48|256,dataImportTable:64|256,dataImportOAuth:80|256,dataImportBISource:144|256,dataImportOAuthSalesforce:1|336,dataImportOAuthGDocs:2|336,dataImportOAuthGDrive:2|336,dataImportOAuthDropbox:3|336,dataImportOAuthGAnalytics:4|336,dataImportOAuthGBigQuery:5|336,dataImportOAuthGBigQueryFFSQL:6|336,dataImportOAuthGBigQuerySingleTable:9|336,spark:160|256},fileTypes:[{n:"CSV/TXT",v:"CSV"},{n:"PARQUET",v:"PARQUET"},{n:"AVRO",v:"AVRO"},{n:"ORC",v:"ORC"},{n:"JSON",v:"JSON"},{n:"PARQ",v:"PARQUET",visible:false}],sourceInfoDesc:{json:"DB_FILE_TYPE_JSON"},sourceType:{file:1,salesforce:2,dropbox:3,googleDrive:4,googleAnalytics:5,googleBigQuery:6,querybuilder:7,mstrFile:8,mdx:9,hadoop:10,twitter:11,facebook:12,bisource:13,remoteProject:14,importfromcube:15,dataFromPushApi:16,newConnector:17,cloudElement:18},sourceSubtype:{localFile:1,url:2,salesforce:3,dropbox:4,googleDrive:5,googleAnalytics:6,googleBigQuery:7,querybuilder:8,samplefile:9,clipboard:10,googleBigQueryFFSQL:11,searchOnSource:12,mdx:13,hadoop:14,twitter:15,facebook:16,bisource:17,remoteProject:18,googleBigQuerySingleTable:19,hanaSingleTable:20,publicData:21,importfromcube:22,dataFromPushApi:23,cloudElement:24,},backendSourceSubtype:{localFile:65537,url:65539,samplefile:65540,clipboard:65538,newConnector:65544,cloudElement:65552,hadoopFileBrowser:65541,customSQL:131073,customSQLWizard:131074,singleTable:131075,bISources:131076,searchAsASource:131078,salesforce:196609,dropbox:196610,facebook:196611,twitter:196612,googleDrive:196613,googleAnalytics:196614,googleBigQuery:196615,googleBigQueryFFSQLModel:196616,googleBigQuerySingleTable:196617,OLAPSources:327681,publicData:65542,dataFromPushApi:65543,dataFromPushApiV2:65545,cloudElement:65552,},sourceItemType:{file:0,url:1,database:2,hadoop:3,olap:4,publicData:5,salesforce:6,googleAnalytics:7,googleBigQuery:8,googleDrive:9,dropbox:10,searchAsASource:11,clipboard:12,bISources:13,facebook:14,twitter:15,samplefile:16,importFromCube:17,addNewConnector:18,newConnector:19,cloudElement:20,unknow:-1},columnState:{reserved:0,unchanged:1,newColumn:2,missing:4,changed:8},operationMode:{create:0,edit:1,refresh:2,subscribe:3,enterCredentials:4,oauth:5,pickTable:6,hadoopPickTable:7,ffsql:8,hadoopFFsql:9},statusCode:{obtainSource:-2147071874,xformsError:-2147071872,mappingError:-2147071871,edit:1,republish:2,schedule:3,enterCredentials:4,pickTable:5,hadoopPickTable:6,ffsql:7,hadoopFFsql:8},pageType:{intro:0,file:1,database:2,emmaPreview:3,redirect:4,analytics:5,dataSelection:6,suggestNewSource:7,sourceIntro:8,sourceObjects:10,sampleFiles:11,dataset:12,externalPage:13,preview:14,clipboard:15,refine:16,parse:17,mstrFile:18,allProjectSource:19,hadoop:20,twitter:21,facebook:22,sourceObjectsDnD:23,schedule:24,publicData:25,republish:26,sourceAdmin:27,importFromCube:28,addNewConnector:29,newConnector:30,addConnectorList:31,cloudElement:32},backendError:{overwriteObject:-2147212339,noPermission:-2147214579,invalidObjectName:-2147213715,unexpectedDataType:-2147212539,noExternalSession:-2147071844,noPrivilege:-2147212082,salesforceUnsavedReport:-2147212081,salesforceObsoleteReport:-2147212080,maxSizeExceeded:-2147212076,maxSizeExceededURL:-2147212121,salesforceUnresolvedFilter:-2147212074,incrementalRefresh:-2147212287,invalidUrl:-2147212062,fileVersionError:-2147212064,emptySheet:-2147212144,refreshTokenUnavailable:-2147202875,cubeQuotaExceeded:-2147071825,notEnoughSpace:-2147071811,importedURLInvalid:-2147212122,unsupportedFileFormat:-2147212063,objectNameTooLong:-2147217407,noExternalSourceInfo:-2147215346,memoryConsumptionExceeded:-2147215346,cubeQuotaReached:-2147071870,switchingFileType:-2147212140,memoryGovernSizeExceeded:-2147181051,stringTooLong:-2147213718,missingColumn:-2147071871,dataDiscoveryError:-2147211998,refineApplyError:-2147202299,serverOutOfMemory:-2147212055,columnCountMatchError:-2147467259,incompatibleDataTypeError:-2147211983,reportTimeout:-2147212335,requestTimeout:-2147206497,databaseCredentialsNotAvailable:-2147212037,ddasupportIncompatible:-2147215326,mergeInvalidXdatype:-2147215325,notFullyControl:-2147214579,shouldBeIgnored:-2147212123,CECredentialNotAvailable:-2147215317,AuthenticationError:-2147215346,queryEngineGeneralError:-2147212544},transformation:{xtab:1,delimiter:2},application:{platform:"Platform",cloudPersonal:"Personal",cloudProfessional:"Professional"},refreshOptions:{replace:1,append:2,update:4},cubeRefreshType:{dummy:-1,reserved:0,add:1,remove:2,update:3,upsert:4,addNewTable:5,deleteTable:6,replaceTable:7,preserve:8},tableStatsExecutionAction:{reserved:0,forceExecution:1,ignore:4,requireFreshData:268435456},sourcesInfoFlags:{none:0,getReports:1,getUserName:2,getTokensInfo:4,revokeSession:8,getGAnalyticsAccount:64},queryBuilderType:{individualTable:1,multipleTables:2,queryScript:3},relationshipEditType:{create:1,changeERType:2,remove:3,flip:8001},ERType:{reserved:0,ERType11:1,ERType1M:2,ERTypeM1:3,ERTypeMM:4,ERTypeParallel:5,ERTypePerpendicular:6},RSType:{reserved:0,auto:1,geo:2,defined:3},tableStates:{newly:1,old:2},behaviorChangeFlag:{multiSheet:4,remapping:8,refreshData:16},menuItems:{SEPARATOR:-1,NONE:0,TABLE_RENAME:1,DO_NOT_IMPORT:2,FLIP_ORDER:3,DELETE:4,RELATIONSHIP_TYPE:5,ONE_TO_ONE:6,ONE_TO_MANY:7,MANY_TO_ONE:8,MANY_TO_MANY:9,REMOVE:10,REFRESH_DATA:11,REFINE:12,CANCEL_REFINE:13,UNLINK:14,CHANGE_DATA_TYPE:15,MARK_GEO_ROLES:16,CREATE_TIME_ATTRIBUTES:17,TO_METRIC:18,TO_ATTRIBUTE:19,MAP_TO_PROJECT_ATTRIBUTE:20,UNMAP:21,MODIFY_ATTRIBUTE_GROUP:22,CREATE_ATTRIBUTE_GROUP:23,HIDE_ALL_ATTRIBUTE_FORMS:24,DEFINE_RELATIONSHIPS:25,LINK:26,ITEM_RENAME:27,CREATE_MULTIFORM_ATTRIBUTE:28,EDIT_MULTIFORM_ATTRIBUTE:29,ADDTO_MULTIFORM_ATTRIBUTE:30,SHOW_ALL_ATTRIBUTE_FORMS:31,SHOW_ALL_COLUMNS:32,PARTITION:33,REFINE_RENAME:34,REFINE_DELETE:35,REFINE_DELETE_ALL:36,REFINE_RESET:37,REFINE_RESET_ALL:38,PARSE:39,IMPORT:40,UNLINK_ALL:41,CREATE_HIERARCHY_ATTRIBUTE:42,EDIT_HIERARCHY_ATTRIBUTE:43,RESET_HIERARCHY_ATTRIBUTE:44},dataTypeMenuItems:{DATE_TIME:"1",NUMBER:"2",TEXT:"3",URL:"5",EMAIL:"6",HTML_TAG:"7",DATE:"8",TIME:"9",SYMBOL:"10",BIG_DECIMAL:"11",PHONE_NUMBER:"12"},columnDataTypes:{reserved:0,integer:1,unsigned:2,numeric:3,decimal:4,real:5,dtdouble:6,dtfloat:7,dtchar:8,varChar:9,longVarChar:10,binary:11,varBin:12,longVarBin:13,date:14,dttime:15,timeStamp:16,nChar:17,nVarChar:18,nlong:22,bigDecimal:30,cellFormatData:31,utf8Char:33,int64:34},formsOptions:{CREATE_MULTIFORM_ATTRIBUTE:1,EDIT_MULTIFORM_ATTRIBUTE:2,ADDTO_MULTIFORM_ATTRIBUTE:3},hierarchyOptions:{CREATE_HIERARCHY_ATTRIBUTE:1,EDIT_HIERARCHY_ATTRIBUTE:2,RESET_HIERARCHY_ATTRIBUTE:3},rdcsFlag:{ID:1,JOIN_ID:2,FILTER_ID:3,DISTANCE:4},timeRoles:{NONE:0,DATE:1,DATE_TIME:2,TIME:3,SECOND:4,MINUTE:5,HOUR:6,DAY:7,WEEK:8,MONTH:9,QUARTER:10,YEAR:11},contextMenuType:{ITEM_MENU:0,TABLE_MENU:1,PREVIEW_ITEM_MENU:2,LINK_MENU:3},dialogType:{fixRefreshErrorDialog:1,allObjectsViewDialog:2,missingColumnsDialog:3,diPageDialog:4,refreshHistoryDialog:5,alternateSourceValidateDialog:6,ddaConfirmDialog:7,publishStatusDialog:8,saveAsDialog:9,cubesList:10,refinePage:11,multiFormEditor:12,sheetsSelectionDialog:13,partitionGroupDialog:14,parseDataDialog:15,errorDialog:16,warningDialog:17,relationDefineDialog:18,qbImportOptionDialog:19,previewRenameDialog:20,mapProjectsAttributeDialog:21,setOAuthParaDialog:22,objectPicker:23,refineClusteringPage:24,refineExtractDialog:25,refineImportDialog:26,twitterAdvOptDialog:27,credentialsDialog:28,mapProjectsAttributeDialog2:29,setWhiteListDialog:30,binaryUploadDialog:31,authenticationDialog:32,sharingDialog:33,hadoopGatewayManagerDialog:34,hadoopGatewayDialog:35,addConnectorDialog:36,hierarchyAttributeDialog:37,hierarchyAttributeResetDialog:38},dataEvents:{DATA_PREVIEW_EVENT:"dataReturned",NO_DATA_RETURNED_EVENT:"noDataReturned"},cubeSchedStatus:{unexecuted:1,successful:2,unscheduled:3,failed:4},privilegeType:{accessDatabase:1,accessFile:2,accessCloud:3},dbType:{MS_ACCESS:100,ORACLE:200,SQL_SERVER:300,INFORMIX:400,SYBASE:500,REDBRICK:600,DB2:700,TANDEM:800,TERADATA:900,UNKNOWN:1000,GENERIC:1100,SAP:1200,NETEZZA:1300,EXCEL:1400,MSFT_AS:1500,ESSBASE:1600,MYSQL:1700,POSTGRESQL:1800,HPNEOVIEW:1900,METAMATRIX:2000,DATALLEGRO:2100,COMPOSITE:2200,ASTER:2300,VERTICA:2400,OPENACCESS:2500,SYBASE_SQL_ANY:2600,SYBASE_IQ:2700,PARACCEL:2800,TM1:2900,XQUERY:3000,HIVE:3100,SAND:3200,SALESFORCE:3300,HIVETHRIFT:3400,VECTORWISE:3500,ENTERPRISEDB:3600,KOGNITIOWX2:3700,EXASOLUTION:3800,INFORMATICA:3900,SAPHANA:4000,IMPALA:4100,AMAZON_REDSHIFT:4200,DENODO:4300,GOOGLE_DRIVE:4400,DROPBOX:4500,GOOGLE_ANALYTICS:4600,GOOGLE_BIGQUERY:4700,CONNECTION_CLOUD:4800,GOOGLE_BIG_QUERY_FFSQL_MODEL:4900,PARSTREAM:5100,MONGODB:5200,MARKLOGIC:5300,BIG_DATA_ENGINE:5400,SEARCH_ENGINE_SOLR:5500,SPLUNK:5600,TWITTER:5700,FACEBOOK:5800,PIG:6400,URL:7700,newConnector:7900,LOACLFILE:8200},getCubeQuotaAndInfosOptions:{GetCubeQuotaAndInfosReserved:0,GetCubeQuotaAndInfosDefault:1,GetCubeQuotaAndInfosQuotaOnly:2,GetCubeQuotaAndInfosAll:3,GetCubeQuotaAndInfosVI:4},homepageViewMode:{GRID_VIEW:0,LIST_VIEW:1},datasetServeMode:{inMemory:1,dda:2,unknow:3},cubePollStatus:{msgID:0,result:1,prompt:2,error:3,xmlResult:21},ibmDb2Versions:[17,18,21,22,23,24,25,37,45,46,47,48,63,66,74,89,92,101,103,105,123,134,157,172,202,232],hadoopDbTypes:[3100,1100,700,4100,7300,6800,6400,8100],formCategory:{longitude:"2345134F4F5E261C3BB902A874467080",latitude:"B191051C48221A6AE44CA2B65B1B65E3"},urlAuthDBRoles:{anonymous:"CB1CB472A07E41D5AE038232839F2064",windows:"95A5ACC02FE94CBABCB65E4F2D2415B2",kerberos:"317D6F016D784836A724AD4D739E1E9C",integrated:"E966E1A0A4C949108287B2E5086B68EB"},urlAuthDBMSId:"497F2406FA154B86810C71EA3D401D6D",newConnectorDBMSId:"565D5DC3A1124726B85FE53EF992472A",hadoopGateWay:{HGoS_CONFIG_HAS_EXIT:1510,CONNOT_AUTHENTICATE:1511,SPACE_OVER:1512,FAIL_COPY_TO_HOST:1513,INSUFFICIENT:1514,DIRECTORY_NO_EXIST:1515,HGOS_DEPLOYED:1518,HGOS_DEPLOYING:1519,CONNOT_AUTHENTICATE2:1520,HGOS_RUNNING:1521,HGOS_STOPPED:1522,HGOS_NOT_DEPLOYING:1523,HGOST_TAR_NOT_EXIST:1524,HGOS_CONF_NOT_EXIST:1530},workstation:{filerBreakLine:new RegExp("[\r\n]","g"),utils:{shouldShowTitleBar:function(){var A=mstrApp.getRootController().rootView.inPageDialog;return !!mstrApp.isWorkstation&&(!!mstrApp.isPopup||!!A);},setNativeWindow:function(C,F){var B=1110,E=590,D=parseInt(C,10),A=parseInt(F,10);if(!window.FormWrapper||!window.FormWrapper.setWindowFrame){return ;}if(C.match(/%$/)&&F.match(/%$/)){window.FormWrapper.setWindowContentSize(1200,680);}else{D=D<B?B:D;A=A<E?E:A;window.FormWrapper.setWindowContentSize(D,A);}},lockResize:function(){if(!window.FormWrapper||!window.FormWrapper.lockResize){return ;}window.FormWrapper.lockResize();},unlockResize:function(){if(!window.FormWrapper||!window.FormWrapper.unlockResize){return ;}window.FormWrapper.unlockResize();}}},authMode:{ANONYMOUS:0,USERNAME:1,OAUTH:2},authModePrefix:{ANONYMOUS:"AuthMode=Anonymous;URL=",USERNAME:"AuthMode=Basic;URL=",OAUTH:"AuthMode=OAuth;URL="},sdkUrl:{MARKPLACE_URL:"https://community.microstrategy.com/s/gallery?tabset-89baf=202df",QUICK_START_URL:"https://lw.microstrategy.com/msdz/MSDL/GARelease_Current/docs/projects/DataConnectorSDK/Content/topics/Quick_Start_Guide.htm"},originalConnector:{elastic:"DE4A8E15405A36D80BF1E1A2BA6F9B66",tapClicks:"1E8ADD3975DA4609B8D00E6211ACAB6A"},googleAnalyticsUrl:{queryExplorer:"https://ga-dev-tools.appspot.com/query-explorer/"},weekDay:[{n:mstrmojo.desc(9380,"Monday"),v:0},{n:mstrmojo.desc(9381,"Tuesday"),v:1},{n:mstrmojo.desc(9382,"Wednesday"),v:2},{n:mstrmojo.desc(9383,"Thursday"),v:3},{n:mstrmojo.desc(9384,"Friday"),v:4},{n:mstrmojo.desc(9385,"Saturday"),v:5},{n:mstrmojo.desc(9379,"Sunday"),v:6}],dateMon:[{n:mstrmojo.desc(15106,"1st day"),v:"1"},{n:mstrmojo.desc(15107,"15th day"),v:"15"}],timeOfDay:[{n:"12:00AM",v:"12:00AM"},{n:"1:00AM",v:"1:00AM"},{n:"2:00AM",v:"2:00AM"},{n:"3:00AM",v:"3:00AM"},{n:"4:00AM",v:"4:00AM"},{n:"5:00AM",v:"5:00AM"},{n:"6:00AM",v:"6:00AM"},{n:"7:00AM",v:"7:00AM"},{n:"8:00AM",v:"8:00AM"},{n:"9:00AM",v:"9:00AM"},{n:"10:00AM",v:"10:00AM"},{n:"11:00AM",v:"11:00AM"},{n:"12:00PM",v:"12:00PM"},{n:"1:00PM",v:"1:00PM"},{n:"2:00PM",v:"2:00PM"},{n:"3:00PM",v:"3:00PM"},{n:"4:00PM",v:"4:00PM"},{n:"5:00PM",v:"5:00PM"},{n:"6:00PM",v:"6:00PM"},{n:"7:00PM",v:"7:00PM"},{n:"8:00PM",v:"8:00PM"},{n:"9:00PM",v:"9:00PM"},{n:"10:00PM",v:"10:00PM"},{n:"11:00PM",v:"11:00PM"}],schedule:{DAILY:"Daily",WEEKDAY:"Weekday",WEEKLY:"Weekly",MONTHLY:"Monthly"},mainPage:{GRID_MODE:0,LIST_MODE:1},sourceIconClsName:{0:"ds-Generic",1:"ds-DB2",2:"ds-DB2",3:"ds-DB2",4:"ds-InformixWire",5:"ds-InformixXPS",6:"ds-PostgreSQL",7:"ds-SAP",8:"ds-SAP",9:"ds-Oracle",10:"ds-MicroSoft",11:"ds-Teradata",12:"ds-MySQL",13:"ds-GreenPlum",14:"ds-Netezza",15:"ds-WebServices",17:"ds-Infobright",18:"ds-Salesforce",19:"ds-MicroSoft",20:"ds-Actian-n",21:"ds-Amazon-Redshift",22:"ds-Impala",23:"ds-Aster",25:"ds-Actian-n",26:"ds-EnterpriseDB",27:"ds-Vertica",28:"ds-Denodo",29:"ds-CiscoDataVirtualization",31:"ds-MicroSoft",32:"ds-GoogleBigQuery",33:"ds-SAP",35:"ds-IBMBigInsights",39:"ds-TM1",41:"ds-WebServices",43:"ds-Amazon-EMR",44:"ds-Apache-Hive",45:"ds-ClouderaHive",46:"ds-HortonworksHive",47:"ds-MapRHive",48:"ds-apache",49:"ds-SharkSpark",50:"ds-MongoDB",52:"ds-MariaDB",51:"ds-MarkLogic",54:"ds-Splunk",55:"ds-DataDirectCloud",56:"ds-ParStream",58:"ds-Phoenix",59:"ds-MicroSoft",60:"ds-DB2",61:"ds-Oracle",62:"ds-Teradata",63:"ds-SAP",65:"ds-PostgreSQL",66:"ds-MySQL",67:"ds-MariaDB",68:"ds-Amazon-EMR",69:"ds-Apache-Hive",70:"ds-ClouderaHive",71:"ds-HortonworksHive",72:"ds-MapRHive",73:"ds-SharkSpark",75:"ds-Amazon-Redshift",76:"ds-PIVOTALHAWQ",77:"ds-MemSQL",78:"ds-Arcadia-Platform",79:"ds-Altibase",80:"ds-MongoDB",81:"ds-Presto",82:"ds-DB2",83:"ds-DB2",84:"ds-InformixWire",85:"ds-SAP",86:"ds-MicroSoft",87:"ds-MicroSoft",88:"ds-MemSQL",90:"ds-GreenPlum",91:"ds-PIVOTALHAWQ",92:"ds-Netezza",93:"ds-Infobright",94:"ds-Actian-n",95:"ds-Impala",96:"ds-IBMBigInsights",97:"ds-Aster",99:"ds-Actian-n",100:"ds-EnterpriseDB",101:"ds-Vertica",102:"ds-Denodo",103:"ds-CiscoDataVirtualization",105:"ds-DataDirectCloud",106:"ds-ParStream",107:"ds-Arcadia-Platform",109:"ds-Presto",110:"ds-Phoenix",111:"ds-Kognitio",112:"ds-Kognitio",113:"ds-Informatica",114:"ds-Informatica",115:"ds-Apache-Cassandra-JDBC",116:"ds-SAP",117:"ds-Actian",118:"ds-Actian",119:"ds-InformixXPS",120:"ds-Apache-Cassandra-JDBC",121:"ds-MapRDrill",122:"ds-Cirro",123:"ds-EXASolution",124:"ds-EXASolution",125:"ds-Oracle",126:"ds-Oracle",127:"ds-Snowflake",128:"ds-Snowflake",129:"ds-Amazon-Aurora",130:"ds-Amazon-Aurora",131:"ds-Amazon-Athena",132:"ds-Amazon-Athena",133:"ds-MapRDrill",134:"ds-Druid",135:"ds-Druid",139:"ds-MongoBI",157:"ds-GoogleBigQuery",161:"ds-MapD",168:"ds-HortonworksSpark",169:"ds-HortonworksSpark",170:"ds-Yellowbrick",},dispTag:{1:"Database",2:"OLAP",4:"BigData",8:"Database",16:"BigData",32:"BigData"},searchTags:{100:["Database","ODBC"],200:["Database","ODBC"],300:["Database","ODBC"],400:["Database","ODBC"],500:["Database","ODBC"],600:["Database","ODBC"],700:["Database","ODBC"],900:["Database","ODBC"],1100:["Database","ODBC"],1200:["OLAP","Cube"],1300:["Database","ODBC"],1400:["Database"],1500:["OLAP","Cube"],1600:["OLAP","Cube"],1700:["Database","ODBC"],1800:["Database","ODBC"],2200:["Database","ODBC"],2300:["Database","ODBC"],2400:["Database","ODBC"],2800:["Database","ODBC"],2900:["OLAP","Cube"],3000:["Database"],3100:["Database","BigData","Hadoop"],3300:["Cloud"],3500:["Database","ODBC"],3600:["Database","ODBC","BigData"],3800:["Database"],3900:["Database"],4000:["Database","ODBC"],4100:["Database","BigData","Hadoop"],4200:["Database","ODBC"],4300:["Database","ODBC"],4700:["Database","Cloud","BigData"],4800:["Cloud"],5200:["Database","NoSQL"],5300:["Database","NoSQL"],5400:["Hadoop"],6400:["Database","BigData","Hadoop"],6600:["Database"],6700:["Database"],6800:["BigData"],6900:["BigData"],7100:["NoSQL"],7200:["Database"],7300:["BigData","Hadoop"],7500:["Database"],7600:["Database"],8000:["Database"],8100:["BigData"],},srcItemTypes:{ALL_SOURCES:"ALL_SOURCES",STATIC_SOURCE:"STATIC_SOURCE",DBTYPE_SOURCE:"DBTYPE_SOURCE",CUSTOM_CONNECTOR:"CUSTOM_CONNECTOR",CLOUDELEMENT_CONNECTOR:"CLOUDELEMENT_CONNECTOR"},combination:{BigData:["BigData","NoSQL","Search","Hadoop"],Apps:["Apps","oAuth","Cloud","Social","BI","PublicData","CE"]},GenericDBStr:"Generic",dataSourceType:{MONGODB:"mongodb",FILE_URL:"fileUrl",FILE_LOCAL:"fileLocal",ES:"elasticsearch",DROPBOX:"dropbox",GOOGLE_DRIVE:"googleDrive",GOOGLE_ANALYTICS:"googleAnalytics",GOOGLE_BIGQUERY:"googleBigQuery",SALESFORCE:"salesforce",FILE:"file",GENERIC_JDBC:"genericJdbc"},ERDF:{ENUM_LOAD_REPORT_BROWSE_TYPE_BINDINGTABLE:1,ENUM_LOAD_REPORT_BROWSE_TYPE_DATAPREVIEW:4,ENUM_LOAD_REPORT_BINDING_FLAG_ALL:15,ENUM_LOAD_REPORT_PREVIEW_FLAG_MappingInfo:1,ENUM_LOAD_REPORT_PREVIEW_FLAG_DataInfo:2,ENUM_LOAD_REPORT_PREVIEW_FLAG_SourceInfo:4,ENUM_LOAD_REPORT_PREVIEW_FLAG_InnerDataInfo:2048,},DSSSubType:{DSSSUBTYPEATTRIBUTE:3072,DSSSUBTYPEATTRIBUTEROLE:3073,DSSSUBTYPEATTRIBUTETRANSFORMATION:3074,DSSSUBTYPEATTRIBUTEABSTRACT:3075,DSSSUBTYPEATTRIBUTERECURSIVE:3076},DSSExType:{DSSEXDISPARK:416},URLMode:{NormalUrl:0,NewConnector:1,NewConnectorEdit:2,CloudElement:3},disableFeatures:{DISABLE_CUSTOM_CONNECTOR:"disableCustomerConnector",DISABLE_DDA:"disableDDA",DISABLE_QUOTA:"disableQuota",DISABLE_HADOOP:"disableHadoop",DISABLE_BI_TOOLS:"disableBITools",DISABLE_CLIP_BOARD:"disableClipboard",DISABLE_FACE_BOOK:"disableFacebook",DISABLE_TWITTER:"disableTwitter",DISABLE_SAMPLE_FILES:"disableSampleFiles",DISABLE_PUBLIC_DATA:"disablePublicData",DISABLE_MERGE_CUBE:"disableMergeCube",DISABLE_CE_SOURCE:"disableCESource",DISABLE_FLATTERN_DB_SOURCE:"disabledSources"},DssXmlPrivileges:{DssXmlPrivilegesUseDatabaseInstanceManager:57},Enum_SourceCategoryType:{File:1,BigData:2,Database:3,OLAP:4,Customized:5,Apps:6,}});}());mstrmojo.mstr.EnumDSSXMLObjectTypes={Generic:-2,Unknown:-1,Reserved:0,Filter:1,Template:2,ReportDefinition:3,Metric:4,Style:6,AggMetric:7,Folder:8,SubscriptionDevice:9,Prompt:10,Function:11,Attribute:12,Fact:13,Dimension:14,Table:15,DatamartReport:16,FactGroup:17,Shortcut:18,Resolution:19,Monitor:20,AttributeForm:21,Schema:22,Format:23,Catalog:24,CatalogDefn:25,Column:26,PropertySet:28,DBRole:29,DBLogin:30,DBConnection:31,Project:32,ServerDef:33,User:34,Configuration:36,Request:37,Script:38,Search:39,SearchFolder:40,Datamart:41,FunctionPackageDefinition:42,Role:43,SecurityRole:44,Locale:45,Consolidation:47,ConsolidationElement:48,ScheduleEvent:49,ScheduleObject:50,ScheduleTrigger:51,Link:52,DbTable:53,TableSource:54,DocumentDefinition:55,DrillMap:56,DBMS:57,MDSecurityFilter:58,PromptAnswer:59,PromptAnswers:60,ObjectTag:65,ReservedLastOne:66};mstrmojo.chart.enums.EnumFormatType={FMT_UNDEFINED:0,FMT_LINE:1,FMT_FILL:2,FMT_FONT:3};mstrmojo.vi.models.EnumDragSources={DATASETS:1,VIZ_EDITOR:2,FILTERS:3,ALL_OBJECT_LIST:4,VIZ:5,TOC_CHAPTER:6,TOC_PAGES_LIST:7,VIZ_LAYER:8};mstrmojo.chart.model.enums.EnumShapeType={_COMBINED:-2,_GENERIC:-1,_AREA:0,_BAR:1,_LINE:2,_STEPLINE:3,_CIRCLE:4,_RECTANGLE:5,_SQUARE:6,_TICKER:7,_PIESLICE:8,_POLYGON:9,_PIE:10,_BULLET:11,_CURVE:12,_DEFAULT:100};mstrmojo.chart.ChartConstants={kPI:3.141592653589793,kHalfSqrt2:0.70710678,kVirtualCoordinateWidth:700,kVirtualCoordinateHeight:400,kGroupLabelsRatio:0.1,kGridLineMarginFactor:10,kAngleMargin:0.1,kLabelMarginFactor:20,kVirtualMarkerSize:2,kBetweenLabels:0,kBetweenLabelLines:1,kLabelToChart:2,kNumericLabelToTick:3,kChartToChart:4,kExtra:5,kEndTickToChart:6,kEndLabelToChart:7,kBetweenLabelCenters:8,kCategoricalLabelToTick:9,kBandSide:10,kDataLabel:11,kRefLabel:12,kAxisOriginLabel:13};mstrmojo.chart.model.enums.EnumDSSGraphStockLayout={DssGraphStockLayoutDefault:0,DssGraphStockLayoutVerticalLine:1,DssGraphStockLayoutCandleStick:2,DssGraphStockLayoutLine:3,DssGraphStockLayoutArea:4,DssGraphStockLayoutLineCircle:5,DssGraphStockLayoutDot:6,DssGraphStockLayoutArea2:7};mstrmojo.chart.enums.EnumFontAlignment={FA_LEFT:0,FA_CENTER:1,FA_RIGHT:2};mstrmojo.chart.model.enums.EnumDSSObjectType={DssTypeUnknown:-1,DssTypeReserved:0,DssTypeGeneric:5,DssTypeFormatBAD:46,DssTypeFilter:1,DssTypeTemplate:2,DssTypeReportDefinition:3,DssTypeMetric:4,DssTypeStyle:6,DssTypeAggMetric:7,DssTypeFolder:8,DssTypeDevice:9,DssTypePrompt:10,DssTypeFunction:11,DssTypeAttribute:12,DssTypeFact:13,DssTypeDimension:14,DssTypeTable:15,DssTypeDatamartReport:16,DssTypeFactGroup:17,DssTypeShortcut:18,DssTypeResolution:19,DssTypeMonitor:20,DssTypeAttributeForm:21,DssTypeSchema:22,DssTypeFormat:23,DssTypeCatalog:24,DssTypeCatalogDefn:25,DssTypeColumn:26,DssTypePropertyGroup:27,DssTypePropertySet:28,DssTypeDBRole:29,DssTypeDBLogin:30,DssTypeDBConnection:31,DssTypeProject:32,DssTypeServerDef:33,DssTypeUser:34,DssTypeTransmitter:35,DssTypeConfiguration:36,DssTypeRequest:37,DssTypeScript:38,DssTypeSearch:39,DssTypeSearchFolder:40,DssTypeDatamart:41,DssTypeFunctionPackageDefinition:42,DssTypeRole:43,DssTypeSecurityRole:44,DssTypeLocale:45,DssTypeConsolidation:47,DssTypeConsolidationElement:48,DssTypeScheduleEvent:49,DssTypeScheduleObject:50,DssTypeScheduleTrigger:51,DssTypeLink:52,DssTypeDbTable:53,DssTypeTableSource:54,DssTypeDocumentDefinition:55,DssTypeDrillMap:56,DssTypeDBMS:57,DssTypeMDSecurityFilter:58,DssTypePromptAnswer:59,DssTypePromptAnswers:60,DssTypeGraphStyle:61,DssTypeChangeJournalSearch:62,DssTypeNCSObjects:255,DssTypeReservedLastOne:63};(function(){var A;mstrmojo.chart.Polygon2D=A=mstrmojo.provide("mstrmojo.chart.Polygon2D",{});A.clone=function(D){var B=D.length,C,E=[];for(C=0;C<B;++C){E.push(D[C].clone());}return E;};}());mstrmojo.chart.model.enums.EnumDSSGraphDataTextPosition={DssGraphDTPositionCenter:0,DssGraphDTPositionOutMin:1,DssGraphDTPositionInMin:2,DssGraphDTPositionInMax:3,DssGraphDTPositionOutMax:4,DssGraphDTPositionOnSide:5,DssGraphDTPositionPieSmart:6,DssGraphDTPositionPieSmartRadial:7,DssGraphDTPositionPieSmartStacked:8};mstrmojo.chart.model.enums.EnumDSSGraphObject={DssGraphNull:-3,DssGraphBackground:1,DssGraphFrame:2,DssGraphFootnote:3,DssGraphSubtitle:4,DssGraphTitle:5,DssGraphLegendArea:6,DssGraphLegendLine:7,DssGraphLegendMarker:8,DssGraphLegendText:9,DssGraphCurve:257,DssGraphDataLine:258,DssGraphDataMarker:259,DssGraphDataText:260,DssGraphDivBiPolar:261,DssGraphErrorBar:262,DssGraphLinrExp:263,DssGraphLinrLine:264,DssGraphLinrLog:265,DssGraphLinrNatLog:266,DssGraphLinrNPoly:267,DssGraphLinrText:268,DssGraphMeanLine:269,DssGraphMovAvgLine:270,DssGraphO1Body:271,DssGraph2DO1Label:272,DssGraphO1Major:273,DssGraphO1Minor:274,DssGraphO1Super:275,DssGraphO1Title:276,DssGraphO2Body:277,DssGraph2DO2Label:278,DssGraphO2Major:279,DssGraphO2Minor:280,DssGraphO2Title:281,DssGraphConnectDataLine:282,DssGraphRiser:286,DssGraphRiserShadow:287,DssGraphStdDevLine:288,DssGraphX1Body:289,DssGraphX1Label:290,DssGraphX1Major:291,DssGraphX1Minor:292,DssGraphXTitle:293,DssGraphY1Body:295,DssGraphY1Label:296,DssGraphY1Major:297,DssGraphY1Minor:298,DssGraphY1Title:299,DssGraphY2Body:301,DssGraphY2Label:302,DssGraphY2Major:303,DssGraphY2Minor:304,DssGraphY2Title:305,DssGraph3DShowColumnHeaders:318,DssGraph3DShowLeftHeaders:321,DssGraph3DShowRightHeaders:323,DssGraph3DShowRowHeaders:325,DssGraphOBPBox:329,DssGraphOBPMedian:330,DssGraphOBPStem:331,DssGraphOBPTail:332,DssGraphPieFeelerLine:337,DssGraphPieFeelerLabel:338,DssGraphPieGroupLabel:339,DssGraphPieRingLabel:340,DssGraphPieSlice:341,DssGraphSeriesTitle:398,DssGraphConnectStackLine:399,DssGraphDataTextStackTotal:401,DssGraphOPILBLValue:418,DssGraphUserLine1:414,DssGraphUserLine2:415,DssGraphUserLine3:416,DssGraphUserLine4:417,DssGraphDataTextConnectLine:431,DssGraphGauge:444,DssGraphGaugeTitle:450,DssGraphGaugeRange:451,DssGraphY3Body:477,DssGraphY3Label:478,DssGraphY3Major:479,DssGraphY3Minor:480,DssGraphY4Body:483,DssGraphY4Label:484,DssGraphY4Major:485,DssGraphY4Minor:486,DssGraph3DColHeader:512,DssGraph3DColTitle:515,DssGraph3DDataText:518,DssGraph3DRowHeader:552,DssGraph3DRowTitle:555,DssGraph3DRYHeader:558,DssGraph3DRYTitle:561,DssGraphGaugeBorder:1319,DssGraphGaugeNeedleBase:1320,DssGraphGaugeNeedleBaseLine:1330,DssGraphZBody:10003,DssGraphTrendLine:10004,DssGraphY1RightBody:10005,DssGraphY1RightTitle:10006,DssGraphReferenceLine:10007,DssGraphStraightLine:10008,DssGraphTargetLine:10009,DssGraphRefLineText:10010,DssGraphTrendLineText:10011,DssGraphUserLabel1:100100,DssGraphUserLabel2:100101,DssGraphUserLabel3:100102,DssGraphUserLabel4:100103,DssGraphX2Body:100200,DssGraphX2Label:100201,DssGraphX2Major:100202,DssGraphX2Minor:100203,DssGraphX2Title:100204};mstrmojo.mstr.EnumDSSXMLTokenTypes={EndOfInput:-1,Reserved:0,Error:1,Unknown:2,Empty:3,ExclamationPoint:33,NumberSign:35,Dollar:36,Percent:37,Ampersand:38,LeftParen:40,RightParen:41,Asterisk:42,PlusSign:43,Comma:44,MinusSign:45,Dot:46,FwdSlash:47,Colon:58,Semicolon:59,LeftAngleBracket:60,EqualSign:61,RightAngleBracket:62,QuestionMark:63,AtSign:64,LeftSquareBracket:91,RightSquareBracket:93,Caret:94,Underscore:95,LeftAccolade:123,VerticalBar:124,RightAccolade:125,Tilda:126,Literal:258,Identifier:259,Reserved1:260,DoubleQString:261,Integer:262,Float:263,AttrRef:264,DimRef:265,MetricRef:266,AggMetricRef:267,FactRef:268,ReportRef:269,FilterRef:270,RoleRef:271,TableRef:272,PromptRef:273,ColumnRef:274,AttrFormRef:275,DimFormRef:276,SimpInfixFun1:277,SimpInfixFun2:278,SimpPrefixFun:279,AggFun:280,RelativeFun:281,CompareFun:282,AndFun:283,OrFun:284,NotFun:285,BoolPrefixFun:286,IntersectFun:287,Reserved2:288,InSetFun:289,BetweenFun:290,LikeFun:291,EnhCompareFun:292,EnhBetweenFun:293,ArrowUp:294,ArrowDown:295,ArrowUpDown:296,AggFirstInFact:297,AggLastInFact:298,KwdTrue:299,KwdFalse:300,KwdBreakBy:301,KwdSortBy:302,KwdFactID:303,DateTime:304,CaseFun:305,FreeVariable:306,LongNumber:307,RWMetricRef:308,CSQLRef:309,ConsolidationRef:310,DssTokenTypeKwdCSIUpdate:312,DssTokenTypeKwdCSISet:313,DssTokenTypeKwdCSIInsert:314,DssTokenTypeKwdCSIDelete:315,DssTokenTypeKwdCSIWhere:316,DssTokenTypeKwdCSIInto:317,DssTokenTypeKwdCSIValues:318,DssTokenTypeKwdCSIFrom:319,DssTokenTypeCSIFieldUnit:321,Elements:323,ConsolidationElementRef:324,EndOfTypes:340};mstrmojo.chart.enums.EnumAnchorPoint={TOP_LEFT:0,TOP_MIDDLE:1,TOP_RIGHT:2,LEFT_MIDDLE:3,CENTER:4,RIGHT_MIDDLE:5,BOTTOM_LEFT:6,BOTTOM_MIDDLE:7,BOTTOM_RIGHT:8};mstrmojo.chart.enums.EnumGraphMatrixMajorGraphType={_UNDEFINED:0,_AREA:1,_BAR:2,_LINE:3,_SCATTER:4,_BUBBLE:5,_PIE:6,_GRID:7};mstrmojo.chart.model.enums.EnumDSSGraphPictureFormat={DssGraphPictureJPEG:0,DssGraphPictureGIF:1,DssGraphPicturePNG:2,DssGraphPictureWMF:3,DssGraphPictureBMP:4};mstrmojo.chart.enums.EnumPictureFormatType={JPEG:0,PNG:1,BMP:7,GIF:100,PDF:102,SVG:103,WIN32:104,INSTRUCTIONS:105};(function(){var C="xviPopopNode";function A(G){var H={};H[C]=G;return H;}mstrmojo.ui.menus._IsMenuPopup=mstrmojo.provide("mstrmojo.ui.menus._IsMenuPopup",{init:function E(G){this._super(G);var J=this.popupConfig;if(!J){throw new Error("Cannot instantiate popup without supplying the popupConfig property.");}this.addDisposable(J);var H=mstrmojo.all[J.hostId],I=J.hostElement;if(J.isHostedWithin&&H&&I){H.addSlots(A(I));this.slot=C;}},closeAllMenus:function F(){var G=this.opener;if(G&&G.closePopup){G.closePopup();}if(G&&G.closeAllMenus){G.closeAllMenus();}},open:function B(H,G){if(this._super){this._super(H,G);}},close:function D(G){if(this.slot===C){this.opener.removeSlots(A(null));}if(this._super){this._super(G);}var H=mstrmojo.all[this.popupConfig.hostId];if(H){H.closePopup();}this.destroy();}});}());mstrmojo.chart.model.enums.EnumDSSGraphNumberFormatType={DssGraphNumberFormatDefault:-2,DssGraphNumberFormatFixed:0,DssGraphNumberFormatCurrency:1,DssGraphNumberFormatDate:2,DssGraphNumberFormatTime:3,DssGraphNumberFormatPercentage:4,DssGraphNumberFormatFraction:5,DssGraphNumberFormatScientific:6,DssGraphNumberFormatCustom:7,DssGraphNumberFormatSpecial:8,DssGraphNumberFormatGeneral:9,DssGraphNumberFormatFromGrid:10};mstrmojo.chart.enums.EnumLegendMarkersStyle={LMS_LeftOfText:0,LMS_RightOfText:1,LMS_CenterOnMarkers:2,LMS_AboveText:3,LMS_BelowText:4};mstrmojo.chart.enums.EnumCategoryLabelStyle={CLS_AUTOMATIC:0,CLS_NORMAL:1,CLS_STAGGER:2,CLS_MANUAL:3};mstrmojo.chart.model.enums.EnumDSSGraphGridLineType={DssGraphGridNone:0,DssGraphGridRegular:1,DssGraphGridBoth:2,DssGraphGridInnerTicks:3,DssGraphGridOuterTicks:4,DssGraphGridSpanningTicks:5};mstrmojo.chart.model.enums.EnumDSSGraphFontRotation={Automatic:-1,Normal:0,RotateHotel:1,Rotate90:2,Rotate180:3,Rotate270:4,Rotate45:5,Rotate315:6,Custom:7};mstrmojo.chart.enums.EnumRectExpandDirection={REC_EXP_INVALID:0,REC_EXP_HORIZONTAL:1,REC_EXP_VERTICAL:2,REC_EXP_BOTH:3};mstrmojo.chart.enums.EnumRectCompare={NONE:-1,ExpandX:0,ExpandY:1,ShrinkX:2,ShrinkY:3,KeepX:4,KeepY:5,KeepBoth:6};mstrmojo.mstr.EnumDSSXMLBaseFormType={DssXmlBaseFormReserved:0,DssXmlBaseFormHidden:-1,DssXmlBaseFormDateTime:1,DssXmlBaseFormNumber:2,DssXmlBaseFormText:3,DssXmlBaseFormPicture:4,DssXmlBaseFormUrl:5,DssXmlBaseFormEmail:6,DssXmlBaseFormHTMLTag:7,DssXmlBaseFormDate:8,DssXmlBaseFormTime:9,DssXmlBaseFormSymbol:10,DssXmlBaseFormBigDecimal:11,DssXmlBaseFormPhoneNumber:12};mstrmojo.mstr.EnumDSSXMLBaseFormType.convertDataType2BaseFormType=function(B){var A={0:2,1:2,2:2,3:2,4:2,5:2,6:2,7:2,8:3,9:3,10:3,11:2,12:2,13:2,14:8,15:9,16:1,17:3,18:3,21:2,22:2,23:3,30:11,31:2,33:3,34:2};return A[B]||0;};mstrmojo.chart.enums.EnumAttachedPointsStyle={NORMAL:0,TOOLTIP_UPPER:1,TOOLTIP_LOWER:2,TOOLTIP_MIDDLE:3,TOOLTIP_U2L:4,TOOLTIP_TRAPEZOID:5};mstrmojo.chart.model.enums.EnumDSSGraphPictureScaleType={DssGraphPictureScaleNone:0,DssGraphPictureScale2Fit:1,DssGraphPictureScale2Frame:2,DssGraphPictureScale2Background:3,DssGraphPictureTiled:4,DssGraphPictureTiled2Frame:5,DssGraphPictureTiled2Background:6,DssGraphPictureBrickHorizontal:7,DssGraphPictureBrickVertical:8,DssGraphPictureStack:9,DssGraphPictureScaleProportional:10};(function(){mstrmojo.requiresCls("mstrmojo.chart.model.enums.EnumDSSGraphObject");var A=mstrmojo.chart.model,C=A.enums,B=C.EnumDSSGraphObject;mstrmojo.chart.model.enums.EnumDSSGraphTitleName={DssGraphTitleReserved:0,DssGraphTitleTitle:B.DssGraphTitle,DssGraphTitleSubtitle:B.DssGraphSubtitle,DssGraphTitleFootnote:B.DssGraphFootnote,DssGraphTitleCategory:B.DssGraphXTitle,DssGraphTitleSeries:B.DssGraphSeriesTitle,DssGraphTitleY1:B.DssGraphY1Title,DssGraphTitleY2:B.DssGraphY2Title,DssGraphTitleY1Right:B.DssGraphY1RightTitle};})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.hash");var I=mstrmojo.array,B=mstrmojo.hash,D="u;",C="-1";ELEM_HIDDEN_PROP="hid";mstrmojo.elementHelper=mstrmojo.provide("mstrmojo.elementHelper",{buildElemsTerseID:function F(R,Q,U){var P,O;for(O in R){P=R[O];if(P.v){var S=P.v.replace(/\\\\/g,"\u001e").replace(/\\\;/g,"\u001f");var T=S.split(";");if(T&&T.length>1){T[1]=Q;if(U&&T.length>2){T.pop();}P.v=T.join(";").replace(/\u001e/g,"\\\\").replace(/\u001f/g,"\\;");}}}return R;},buildElemsCountStr:function K(T,Q,P){T=(!T||!T.length)?[]:T;Q=(!Q||!Q.length)?[]:Q;function S(U){return U.filter(function(V){return !V[ELEM_HIDDEN_PROP];});}var R=S(T).length,O=S(Q).length;if(I.find(Q,"v",D)>-1){O-=1;}if(I.find(Q,"v",C)>-1){O-=1;}if(P){R=(R<O)?O-R:0;}if(I.find(T,"v",D)>-1||I.indexOf(T,D)>-1){R=O;}return this.buildElemsCountStrByNum(R,O);},buildElemsCountStrByNum:function K(P,O){if(P===O){if(O===0){return"";}return O.toString();}else{if(O===0){return P+" "+mstrmojo.desc(514);}else{if(P>O){return"("+O+")";}}}return mstrmojo.desc(4891,"").replace("##",String(P)).replace("###",String(O));},browseElements:function G(Q,R,P){var O={doNotHold:!(P&&mstrApp.serverProxy),silent:true};mstrApp.serverRequest(mstrmojo.hash.copy(P,R),Q,O);},getIdPresentation:function J(R){if(!!R){var Q=R.charAt(0),O,P,S;if((Q>="g"&&Q<="w")||(Q>="V"&&Q<="Z")){P=false;for(S=1;S<R.length;++S){if(P){P=false;}else{switch(R.charAt(S)){case";":return"terseLong";case"\\":P=true;break;}}}return"terse";}if(Q>="B"&&Q<="Q"){if(R.length>2){O=R.charAt(1);if(O>="A"&&O<="Q"){if(R.charAt(2)===":"){return"oldLong";}}}}if(R.length>=33&&R.charAt(32)===":"){return"old";}}return null;},terseLong2OldShort:function N(P){if(this.getIdPresentation(P)!=="terseLong"){return P;}var O=P.replace(/\\\\/g,"\u001e").replace(/\\\;/g,"\u001f"),Q=O.substring(1,O.length).split(";");return(Q[1]+":"+Q[0]).replace(/\u001e/g,"\\\\").replace(/\u001f/g,"\\;");},oldShort2terseLong:function L(P,S){if(this.getIdPresentation(P)!=="old"){return P;}var O=P.replace(/\\\\/g,"\u001e").replace(/\\\:/g,"\u001f"),R=O.split(":"),Q=R.shift();return(S||"h")+(R.join(":")+";"+Q).replace(/\u001e/g,"\\\\").replace(/\u001f/g,"\\:");},isNullElem:function H(O){if(!O){return true;}var R=this.getIdPresentation(O),P=false,Q;switch(R){case"terse":case"terseLong":Q=O.substring(1,O.length).split(";");P=Q[0].indexOf(this.TERSE_NULL)>-1;break;case"old":case"oldLong":P=O.indexOf(this.OLD_NULL)>-1;break;}return P;},isNonGroupNull:function(Q){var O=Q.eid||(Q._e&&Q._e.id),P=O&&O.split(":")[0];return P&&P===this.NON_GROUP_NULL;},getAttributeId:function M(Q){var P,O;if(Q){O=Q.split(";");P=O[1];}return P;},getElementValue:function A(P){var Q,O;if(P){O=P.split(";");if(O.length>2){Q=O[0]+" "+O[2];}else{Q=O[0];}}return Q;},isAttributeIdsLinked:function E(P,O,Q){var S=false,R=B.keyarray(Q);I.forEach(R,function(T){if(T===P){I.forEach(Q[T],function(U){if(U===O){S=true;return false;}});}if(S){return false;}});return S;},ELEM_ALL_ID:"u;",ELEM_DUMMY_ID:"-1",ELEM_SEPARATOR:"\u001E",OLD_NULL:"~!@@~~!@@~",TERSE_NULL:"\\N",NON_GROUP_NULL:"n00000000000000000000000000000000",ELEM_ALL:{t:mstrmojo.chart.model.enums.EnumDSSObjectType.DssTypeDimension,v:"u;",n:"(All)"}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.models.EnumDragSources");function D(H){this.cleanUpAfterTarget(H);var G=H.tgtData;if(G){delete H.tgtData;}var I=this.getContextDragData(H);if(I&&I.setAvatarClass){I.setAvatarClass("");}}mstrmojo.vi.ui._IsDropTarget=mstrmojo.provide("mstrmojo.vi.ui._IsDropTarget",{_mixinName:"mstrmojo.vi.ui._IsDropTarget",dropZone:true,getDropAvatarIcon:function B(G){return"add";},getContextDragData:function F(G){return G.getCtxtDragData();},cleanUpAfterTarget:mstrmojo.emptyFn,ondragenter:function A(G){var H=this.getContextDragData(G);if(H&&H.setAvatarClass){H.setAvatarClass(this.getDropAvatarIcon(G));}if(this._super){this._super(G);}},ondragleave:function E(G){D.call(this,G);if(this._super){this._super(G);}},ondrop:function C(G){D.call(this,G);if(this._super){this._super(G);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var E=mstrmojo.dom;mstrmojo.ui._IsIncFetchList=mstrmojo.provide("mstrmojo.ui._IsIncFetchList",{_mixinName:"mstrmojo.ui._IsIncFetchList",ifDataHelper:null,supportsIncFetch:false,isFetching:false,initScroll:function A(){var I=this.ifDataHelper,H=this,G=this.scrollNode||this.domNode;this.supportsIncFetch=I&&I.hasNext();if(I&&this.supportsIncFetch){this._scroll=function F(){var J=this.scrollNode||this.domNode||G;if(Math.ceil(J.offsetHeight+J.scrollTop)>=J.scrollHeight){H.raiseEvent({name:"incFetch",id:H.id});}};E.attachEvent(G,"scroll",this._scroll);this.attachEventListener("incFetch",this.id,function(J){if(!this.supportsIncFetch||this.isFetching){return ;}if(this.preNext){this.preNext();}this.set("isFetching",true);I.next({complete:function(K){if(H.postNext){H.postNext();}H.set("isFetching",false);},success:function(K){H.addItems(K.items||null);},failure:function(K){H.supportsIncFetch=false;mstrmojo.alert("Error in fetching next: "+K);}});});}},unrender:function D(F){var G=this.scrollNode||this.domNode;E.detachEvent(G,"scroll",this._scroll);this._super(F);},render:function C(){this._super();if(this.supportsIncFetch){var F=this.scrollNode||this.domNode;E.attachEvent(F,"scroll",this._scroll);}},addItems:function B(F){if(this._super){this._super(F);}if(!this.ifDataHelper.hasNext()){this.supportsIncFetch=false;var G=this.scrollNode||this.domNode;E.detachEvent(G,"scroll",this._scroll);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");var D=mstrmojo.dom,L=mstrmojo.hash;var O=100;var F=D.supportsTouches?0.5:1;var G=1;var R=100;var P={onvscrollVisibleChange:function(){var U=this.vscrollNode,V=U&&U.style;if(!V){return ;}if(this.vscrollVisible){var T=this.maxPos,W=this.clientSize;V.height=Math.round(W.y*W.y/T.y)+"px";V.left=(W.x-5)+"px";V.display="block";V.opacity=0.5;}else{V.opacity=0;}},onhscrollVisibleChange:function(){var V=this.hscrollNode,U=V&&V.style;if(!U){return ;}if(this.hscrollVisible){var T=this.maxPos,W=this.clientSize;U.width=Math.round(W.x*W.x/T.x)+"px";U.top=(W.y-5)+"px";U.display="block";U.opacity=0.5;}else{U.opacity=0;}}};var M=L.copy({onposChange:function(){var V=this.clientSize,U=this.maxPos,T=0,W=0;if(this.scrollsVert){W=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style[D.CSS3_TRANSFORM]="translateY("+Math.round((V.y-(V.y*V.y/U.y))*this.pos.y/U.y)+"px)";}}if(this.scrollsHoriz){T=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style[D.CSS3_TRANSFORM]="translateX("+Math.round((V.x-(V.y*V.x/U.x))*this.pos.x/U.x)+"px)";}}this.scrollChild.style[D.CSS3_TRANSFORM]="translate3d(-"+parseInt(T,10)+"px, -"+parseInt(W,10)+"px, 0px)";},ondeceleratingChange:function(){this.scrollChild.style[D.CSS3_TRANSITION]=this.decelerating?(D.CSS3_PREFIX+"transform 0.2s linear"):"";}},L.copy(P));var H=L.copy({onposChange:function(){var V=this.clientSize,U=this.maxPos,T=0,X=0,W=this.scrollboxNode;if(this.scrollsVert){X=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style.top=Math.round((V.y-(V.y*V.y/U.y))*this.pos.y/U.y)+"px";}W.scrollTop=parseInt(X,10);}if(this.scrollsHoriz){T=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style.left=Math.round((V.x-(V.y*V.x/U.x))*this.pos.x/U.x)+"px";}W.scrollLeft=parseInt(T,10);}}},L.copy(P));mstrmojo._TouchScrolling=mstrmojo.provide("mstrmojo._TouchScrolling",{FRICTION:0.65,BOUNCEFRICTION:0.5,usesTouches:false,bounces:true,scrollsHoriz:true,scrollsVert:true,pos:null,preBuildRendering:function N(){this.usesTouches=(mstrmojo.dom.supportsTouches&&this.usesTouches&&(this.scrollsHoriz||this.scrollsVert));if(this.usesTouches){this.pos={x:0,y:0};}if(this._super){this._super();}},postBuildRendering:function C(){if(this._super){this._super();}if(this.usesTouches){var W=this.scrollboxNode,V=this.itemsContainerNode||W.firstChild;if(W&&W!==V){this.scrollChild=V;var T=W.style;T.position="relative";T.overflow="hidden";var U=V.style;U.position="absolute";U.left=0;U.top=0;this.markupMethods=L.copy(D.isSafari?M:H,L.copy(this.markupMethods));this.attachTouchEvents();}}},unrender:function(T){if(this.usesTouches){this.detachTouchEvents();}this._super(T);},attachTouchEvents:function(){var U=this.touchNode||this.scrollboxNode;if(U){if(!this._tsCallback){var T=this;this._tsCallback=function(V){T.touchesBegin(self,V);};this._tmCallback=function(V){T.touchesMoved(self,V);};this._teCallback=function(V){T.touchesEnd(self,V);};}D.attachEvent(U,D.TOUCHSTART,this._tsCallback);this._tsNode=U;}},detachTouchEvents:function(){var T=this._tsNode;if(T){D.detachEvent(T,D.TOUCHSTART,this._tsCallback);delete this._tsNode;}},touchesBegin:function J(T,V){var U=V.target&&V.target.tagName;if(U&&(U==="SELECT"||U==="INPUT")){return ;}D.preventDefault(T,V);this.stopDeceleration();this.startTime=new Date();this.startTimePos={x:this.pos.x,y:this.pos.y};this.startTouchPos=D.getMousePosition(D.firstTouch(T,V),T);this.dragging=false;D.attachEvent(window,D.TOUCHMOVE,this._tmCallback);D.attachEvent(window,D.TOUCHEND,this._teCallback);},touchesMoved:function E(b,d){var Z=D.getMousePosition(D.firstTouch(b,d),b);D.preventDefault(b,d);if(!this.dragging){var T=5,h=Math.abs;if((this.scrollsHoriz&&h(Z.x-this.pos.x)>T)||(this.scrollsVert&&h(Z.y-this.pos.y)>T)){this.dragging=true;this.dragStartTime=new Date();this.startTouchPos=Z;var V=this.scrollboxNode,Y={x:V.clientWidth,y:V.clientHeight},f={x:V.scrollWidth,y:V.scrollHeight};this.clientSize=Y;this.scrollSize=f;this.maxPos={x:Math.max(f.x-Y.x,0),y:Math.max(f.y-Y.y,0)};this.showScroll();}}if(this.dragging){D.stopPropogation(b,d);var c=this.startTimePos,X=this.startTouchPos,a=this.maxPos;var W={x:this.scrollsHoriz?Math.max(Math.min(c.x-(Z.x-X.x),a.x),0):0,y:this.scrollsVert?Math.max(Math.min(c.y-(Z.y-X.y),a.y),0):0};this.set("pos",W);this.nextLastDragPos=this.lastDragPos;this.lastDragPos=Z;var U=new Date(),g=this.lastDragTime;this.nextLastDragTime=g;this.lastDragTime=U;if((U-g)>R){this.startTime=this.lastDragTime;this.dragStartTime=this.startTime;this.startTimePos={x:W.x,y:W.y};this.startTouchPos=Z;}}},touchesEnd:function I(T,U){D.preventDefault(T,U);D.detachEvent(window,D.TOUCHMOVE,this._tmCallback);D.detachEvent(window,D.TOUCHEND,this._teCallback);if(this.dragging){this.dragging=false;D.stopPropogation(T,U);if((new Date())-this.lastDragTime<=R){this.startDeceleration(T,U);}else{this.hideScroll();}}},startDeceleration:function B(Y,Z){var W=D.getMousePosition(D.firstChangedTouch(Y,Z),Y),c=((mstrmojo.dom.supportsTouches===null)?this.lastDragPos:this.nextLastDragPos)||W,b={x:W.x-c.x,y:W.y-c.y},T=((mstrmojo.dom.supportsTouches===null)?this.lastDragTime:this.nextLastDragTime),d=T?(new Date())-T:0,V={x:d?Number(b.x*O*F/d).toFixed(2):0,y:d?Number(b.y*O*F/d).toFixed(2):0};var a=this,U=function(e){return(a.scrollsHoriz&&Math.abs(e.x)>=G)||(a.scrollsVert&&Math.abs(e.y)>=G);};if(U(V)){this.velocity=V;this.friction={x:this.FRICTION,y:this.FRICTION};this.set("decelerating",true);var X=function(){a.decelerate();if(!U(a.velocity)){a.stopDeceleration();a=null;}};X();if(this.decelerating){this.decelerationTimer=window.setInterval(X,O);}}else{this.hideScroll();}},stopDeceleration:function A(){this.set("decelerating",false);delete this.velocity;if(this.decelerationTimer){window.clearTimeout(this.decelerationTimer);delete this.decelerationTimer;}this.hideScroll();},decelerate:function S(){var W=this.pos,V=this.velocity,U=this.friction,Z=this.maxPos,X={x:W.x-V.x,y:W.y-V.y},b=this.bounces,T=this.BOUNCEFRICTION;var a=X.x;if(a<0||a>Z.x){X.x=(a<0)?0:Z.x;V.x*=b?-T:0;U.x=T;}var Y=X.y;if(Y<0||Y>Z.y){X.y=(Y<0)?0:Z.y;V.y*=b?-T:0;U.y=T;}this.set("pos",X);this.velocity={x:U.x*V.x,y:U.y*V.y};},hideScroll:function K(){this.set("vscrollVisible",false);this.set("hscrollVisible",false);},showScroll:function Q(){var T=this.maxPos;if(this.scrollsVert&&T.y&&this.vscrollNode){this.set("vscrollVisible",true);}if(this.scrollsHoriz&&T.x&&this.hscrollNode){this.set("hscrollVisible",true);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");var E=mstrmojo.dom,M=mstrmojo.hash,B,I=mstrmojo.global.document,K="mousedown",O="mousemove",Q="mouseup";function G(X){if(E.isPrimaryMouseBtn(X)){B.startDragCheck(self,X);}}var U,P,A="mstrmojo-dnd-avatar",T;function F(Y,X){if(X!==undefined&&X!==null){P.innerHTML=X;}T.left=Y.x+"px";T.top=Y.y+"px";}function L(Y,X){if(!U){U=I.createElement("div");T=U.style;U.className=A;U.innerHTML='<div class="'+A+'-inner"></div>';P=U.firstChild;I.body.appendChild(U);}F(Y,X);T.display="block";}function R(){if(T){T.display="none";}}function H(X){var Y=++B.ctxt.moveCount;if(Y>=B.minMoves){B.stopDragCheck();if((X.buttons===1||X.buttons===undefined||E.isIE9)&&(X.which===1||X.button===0||E.isIE8)){B.startDrag(self,X);}}}function N(X){if(E.isPrimaryMouseBtn(X)){B.stopDragCheck();delete B.ctxt;}}function D(X){B.onDragMove(self,X);}function C(X){if(E.isPrimaryMouseBtn(X)){B.stopDrag(window,X);}}function J(Y){var X=E.findWidget(Y);while(X){if(X.draggable){return X;}X=X.parent;}return null;}function S(X){var Z=X.src,Y=J(Z.node);if(!Y){return null;}if(Y.getDragAction){X.action=Y.getDragAction(X);}Z.widget=Y;Z.data=Y.getDragData&&Y.getDragData(X);if(Y.isDragValid){if(!Y.isDragValid(X)){if(!mstrApp.isInVFInteractMode&&(!Y.shouldDragBubble||Y.shouldDragBubble(X)===true)){X.src.node=Y.domNode.parentNode;return S(X);}return null;}}if(Y.ondragstart){Y.ondragstart(X);}return Y;}function W(Z,Y){var X=E.findWidget(Z),a=Y.tgt&&Y.tgt.widget;while(X){if(X.dropZone){if(X===a){return X;}if(X.allowDrop&&X.allowDrop(Y)){return X;}}X=X.parent;}return null;}function V(){if(this.set){this.set("allowingDrop",false);}}mstrmojo.dnd=mstrmojo.dnd||mstrmojo.provide("mstrmojo.dnd",{minMoves:3,enable:function(){if(!mstrmojo.dndEnabled){E.attachEvent(I,K,G);mstrmojo.dndEnabled=true;}},disable:function(){mstrmojo.dndEnabled=false;E.detachEvent(I,K,G);},startDragCheck:function(X,Y){delete this.ctxt;var Z=E.captureEventInfo({hWin:X,e:Y});this.ctxt={src:Z,moveCount:0,last:M.copy(Z.pos),getDirection:function(a){return !!this.dir[a];},getCtxtDragData:function(){var a=this.src;return(a&&a.data)||{};},getCtxtDropData:function(){var a=this.tgt;return(a&&a.data)||{};}};if(this.minMoves){E.attachEvent(I,O,H);E.attachEvent(I,Q,N);}else{this.startDrag(X,Y);}},stopDragCheck:function(){E.detachEvent(I,O,H);E.detachEvent(I,Q,N);},startDrag:function(X,a){var Y=this.ctxt;Y.id=mstrmojo.now();var Z=S(Y);if(!Z){return ;}E.clearBrowserHighlights(X);E.preventDefault(self,a);E.attachEvent(I,O,D);E.attachEvent(I,Q,C);var c=window.mstrApp;if(c&&c.setInteractive){this._changeAppStatus=c.setInteractive(false);}if(!Z.ownAvatar){var b=Y.src;L(b.pos,b.data&&b.data.html);}},stopDrag:function(X,d){E.detachEvent(I,O,D);E.detachEvent(I,Q,C);var a=this.ctxt,Z=a.tgt||{},Y=E.captureEventInfo({hWin:X,e:d,data:Z.data}),c=W(Y.node,a);Y.widget=c;a.tgt=Y;if(c){if(c.ondrop){c.ondrop(a);}else{V.call(c);}}var b=a.src.widget;if(b&&b.ondragend){b.ondragend(a);}if(b&&!b.ownAvatar){R();}if(this._changeAppStatus){window.mstrApp.setInteractive(true);delete this._changeAppStatus;}},onDragMove:function(b,d){if(E.isSafari){E.clearBrowserHighlights();}var X=this.ctxt,a=X.tgt||{},Y=a.widget,c=E.captureEventInfo({hWin:b,e:d,data:a.data}),h=c.widget=W(c.node,X),g=X.last,Z=c.pos;X.dir={x:Z.x>g.x,y:Z.y>g.y};X.last=M.copy(c.pos);X.tgt=c;if(Y!==h){if(Y){if(Y.ondragleave){Y.ondragleave(X);}else{V.call(Y);}}if(h){X.tgt.data=(h.getDropData&&h.getDropData(X))||{};if(h.ondragenter){h.ondragenter(X);}else{if(h.set){h.set("allowingDrop",true);}}}}if(h){if(h.ondragover){h.ondragover(X);}}var f=X.src.widget;if(f&&f.ondragmove){f.ondragmove(X);}if(f&&!f.ownAvatar){F(c.pos);}}});B=mstrmojo.dnd;B.enable();}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var C=mstrmojo.dom;function D(J,I){var G=[];if(J){var F;for(F in J){var H=Number(F);if(H>=I){G.push(H);}}}G.sort(mstrmojo.array.numSorter);return G;}mstrmojo.ListSelector=mstrmojo.provide("mstrmojo.ListSelector",{premousedown:function E(L,F,N){if(C.isPrimaryMouseBtn(N.e)){var I=N.hWin,J=N.e,G=C.eventTarget(I,J),M=L.listMapper.findIndex(L,F,G);if(M>-1){var H=L.multiSelect,K=C.ctrlKey(I,J),O=C.shiftKey(I,J);if(K||O){C.clearBrowserHighlights(I);}if(H&&(K||(L.selectionPolicy==="toggle"))){L.toggleSelect(M);}else{if(H&&O){L.rangeSelect(M);}else{L.singleSelect(M);}}}}},premouseup:function B(H,K,G){var F=G.hWin,J=G.e,L=C.ctrlKey(F,J),I=C.shiftKey(F,J);if(L||I){C.clearBrowserHighlights(F);}},onadd:function A(I,H){var M=H&&H.value&&H.value.length;if(M){var G=H.index,K=I.selectedIndices,L=D(K,G),J;for(J=L.length-1;J>-1;J--){var F=L[J];K[F+M]=true;delete K[F];}if(I.selectedIndex>=G){I.selectedIndex+=M;}}},onremove:function A(Q,S){var O=S&&S.value&&S.value.length;if(O){var R=S.index,I=R+O-1,M=Q.selectedIndices,L=Q.selectedIndex,G=[],T=[],P=false;if(M){var H;for(H in M){var K=Number(H);if(K>I){G.push(K);}else{if(K>=R){T.push(K);P=true;}}}}G.sort(mstrmojo.array.numSorter);var J,N;for(J=0,N=G.length;J<N;J++){var F=G[J];M[F-O]=true;delete M[F];}if(L>I){Q.selectedIndex-=O;}if(P){Q.removeSelect(T);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var A=mstrmojo.hash;mstrmojo.requiresDescs(2213,3326,3327,3329,4531,13283,13284,13285,13286);mstrmojo.ME.Enum={METRIC_ACTIONS:{ADD:"add",EDIT:"edit",EDIT_NEW:"editNew"},EDITOR_IDS:{ADVANCED:"mstrME",FORMULA:"mstrME",WIZARD:"mstrFE",SIMPLE:"mstrSME",SELECOTR:"mstrFSE"},EDITOR_TYPES:{ADVANCED:"ADVANCED",FUNCTION:"FUNCTION",SIMPLE:"SIMPLE",SELECTOR:"SELECTOR"},METRIC_EDIT_TYPES:{ADVANCED:65536,SIMPLE:131072,FUNCTION:196608},METRIC_TYPES:{65536:"ADVANCED",131072:"SIMPLE",196608:"FUNCTION"},NEW_METRIC_DEFINITION:{did:"",n:mstrmojo.desc(2213,"New Metric"),tks:{items:[],vs:0,vm:""},mhfts:{},mvfts:{}},getNewDefinition:function(){return{did:"",n:mstrmojo.desc(2213,"New Metric"),tks:{items:[],vs:0,vm:""},mhfts:{},mvfts:{}};},FBFlag:{Automatic:0,Manual:3},AFB:{Automatic:-1,False:0,True:1},SFB:{Automatic:-1,False:1,True:2},UI_OBJECT_TYPE:{Dimty:-1,Sub_Expression:-2,Level:-4,Condition:-5,Transformation:-6,Row_Count:-7},UI_DATA_TYPE:{Sortby:-1,Breakby:-2,Level:-4,Condition:-5,Transformation:-6},SHORTCUT_FUNCTIONS:{Level:-4,Condition:-5,Transformation:-6,Row_Count:-7},DYNAMIC_DIMTY:{CODES:{auto:{n:mstrmojo.desc(4531,"Automatic"),did:"@auto",t:-1},page:{n:mstrmojo.desc(3329,"Grand Total"),did:"@p",t:-1},byCol:{n:mstrmojo.desc(3326,"By Columns"),did:"@cols",t:-1},byRow:{n:mstrmojo.desc(3327,"By Rows"),did:"@rows",t:-1},byCell:{n:mstrmojo.desc(13283,"By Cell"),did:"@cell",t:-1},byShape:{n:mstrmojo.desc(13284,"By Shape"),did:"@shape",t:-1},downCross:{n:mstrmojo.desc(13285,"Down, Then Across"),did:"@cr",t:-1},crossDown:{n:mstrmojo.desc(13286,"Across, Then Down"),did:"@rc",t:-1}},getItems:function D(G){var F=this.CODES,E=[];switch(G){case"breakby":E=[F.auto,A.copy({n:mstrmojo.desc(2057,"None")},A.copy(F.page)),A.copy({n:mstrmojo.desc(122,"Columns")},A.copy(F.byCol)),A.copy({n:mstrmojo.desc(2968,"Rows")},A.copy(F.byRow)),A.copy({n:mstrmojo.desc(13399,"Cell")},A.copy(F.byCell)),A.copy({n:mstrmojo.desc(2923,"Shape")},A.copy(F.byShape))];break;case"level":E=[F.auto,F.page,F.byCol,F.byRow,F.byCell,F.byShape];break;case"sortby":E=[F.auto,F.downCross,F.crossDown];}return E;},getAutomaticDimtyObject:function C(){return A.copy(this.CODES.auto);},getDimtyObject:function B(E,H){var F=null;var G=false;if(H){A.forEach(mstrmojo.ME.Enum.DYNAMIC_DIMTY.CODES,function(I){if(I.did===E){F=A.copy(I);G=true;return false;}});}if(!G){F={n:E,t:-1,dimty:true};}return F;}},NonExposableParams:["IsNewOLAP","OLAPPattern","OLAPHasWindow"]};mstrmojo.ME.Enum.DEFAULT_MPS={mps:{afb:mstrmojo.ME.Enum.AFB.False,sfb:mstrmojo.ME.Enum.SFB.False,fbf:mstrmojo.ME.Enum.FBFlag.Automatic}};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var C=mstrmojo.array,B=mstrmojo.hash;mstrmojo.models.datasets.DataInterface=mstrmojo.provide("mstrmojo.models.datasets.DataInterface",{getFormsByAttrId:function A(F,E){var D=[];E=E||[];B.forEach(E,function(G){C.forEach(G.att||[],function(H){if(H.did===F){D=D.concat(H.fs||[]);return false;}});});D=C.filter(D,function(G){return !!G.obf;});return C.distinct(D,"fid");}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var K=mstrmojo.array,D=mstrmojo.hash;function E(V,T){var W=[],Q=V.selectedIndices,P=V.allIdx;var R,S,U=V.items;if(V.multiSelect&&(P>-1)&&(K.indexOf(T,V.allIdx)>-1)){for(R=0,S=U.length;R<S;R++){if(!Q[R]){W.push(R);Q[R]=true;V.selectedIndex=R;V.selectedItem=U[R];}}}else{for(R=0,S=T.length;R<S;R++){var X=T[R];if(!Q[X]){Q[X]=true;W.push(X);V.selectedIndex=X;V.selectedItem=U[X];}}}return W;}function J(R){var Q=[],S=R.selectedIndices,P;for(P in S){delete S[P];Q.push(parseInt(P,10));}R.selectedIndex=-1;R.selectedItem=null;return Q;}function H(V,U){var S=[],Q=V.selectedIndices,X=K.indexOf,P=V.allIdx;if(V.multiSelect&&(P>-1)&&(X(U,P)>-1)){return J(V);}if(U.length>0&&Q[P]){if(X(U,P)<0){U.push(P);}}var T=U.length,R;for(R=0;R<T;R++){var W=U[R];if(Q[W]){delete Q[W];S.push(W);if(V.selectedIndex===W){V.selectedIndex=-1;V.selectedItem=null;}}}return S;}function A(S,R){var P=S.selectedIndices;if(!P){P={};S.selectedIndices=P;}if(!R){R={};}var U=S.selectedIndex,T=[],V,Q;for(Q in P){if(!R[Q]){V=parseInt(Q,10);delete P[Q];T.push(V);if(U===V){S.selectedIndex=-1;S.selectedItem=null;}}}var X=[],W=S.items;for(Q in R){if(!P[Q]){V=parseInt(Q,10);P[Q]=true;X.push(V);S.selectedIndex=V;S.selectedItem=W&&W[V];}}return{add:X,rmv:T};}function G(Q,P,R){if(Q.raiseEvent&&((P&&P.length)||(R&&R.length))){Q.raiseEvent({name:"change",added:P,removed:R});}}mstrmojo._ListBase2Selections=mstrmojo.provide("mstrmojo._ListBase2Selections",{multiSelect:false,selectedIndices:null,selectedIndex:-1,selectedItem:null,selectedIndices_bindEvents:"change",selectedIndex_bindEvents:"change",selectedItem_bindEvents:"change",allowUnlistedValues:true,insertUnlistedValuesAt:-1,allIdx:-1,singleSelect:function F(P,Q){if(!this.selectedIndices[P]||(this.selectionPolicy==="reselect")||(P!==this.allIdx&&this.selectedIndices[this.allIdx])){var R=J(this),S=E(this,[P]);if(Q!==true){G(this,S,R);}}},toggleSelect:function O(P,Q){var S,R;if(this.selectedIndices[P]){R=H(this,[P]);}else{S=E(this,[P]);}if(Q!==true){G(this,S,R);}},rangeSelect:function N(P,Q){this.singleSelect(P,Q);},clearSelect:function I(P){var Q=J(this);if(P!==true){G(this,null,Q);}},select:function L(R,P){var Q=A(this,K.hash(R));if((P!==true)&&(Q.add.length||Q.rmv.length)){G(this,Q.add,Q.rmv);}},addSelect:function B(R,P){if(R===null||R===undefined){return null;}if(R.constructor!==Array){R=[R];}var Q=E(this,R);if(P!==true){G(this,Q,null);}return Q;},removeSelect:function M(R,P){if(R===null||R===undefined){return null;}if(R.constructor!==Array){R=[R];}var Q=H(this,R);if(P!==true){G(this,null,Q);}return Q;},_set_selectedIndices:function(S,Q,P){if(this.selectedIndices===Q){return false;}var R=A(this,Q);if(R.add.length||R.rmv.length){if(P!==true){G(this,R.add,R.rmv);}}return false;},_set_selectedIndex:function(S,Q,P){var R={};if(Q>-1){R[Q]=true;}return this._set_selectedIndices(null,R,P);},_set_selectedItem:function(W,T,S){var R=T&&(typeof T==="object"),V=this.itemIdField,Q=-1,U=this.items;if(R&&V!=null){Q=K.find(U,V,T[V]);}else{if(T!=null){Q=K.indexOf(U,T);}}if((Q===-1)&&(T!=null)&&this.allowUnlistedValues){var P=this.insertUnlistedValuesAt;if(P==null||P<0){P=(U&&U.length)||0;}Q=P;this.add([T],Q);}return this._set_selectedIndex(null,Q,S);},initSelections:function C(T,Q,P,S,R){if(!this.selectedIndices){this.selectedIndices={};this.selectedIndex=-1;}if(T){this._set_selectedIndices(null,T,R);}else{if(Q){this.select(Q,R);}else{if(S){this._set_selectedItem(null,S,R);}else{if(P!==null&&P!==undefined){this._set_selectedIndex(null,P,R);}}}}},sortSelectedIndices:function(){return D.keyarray(this.selectedIndices,true).sort(K.numSorter);},removeSelectedItems:function(){var R=this.sortSelectedIndices(),P=R.length,S=R[P-1],Q=this.remove(R);S=Math.min(S+1-P,this.items.length-1);if(S>=0){this.singleSelect(S);}return Q;},getSelectedItems:function(){return K.get(this.items,this.sortSelectedIndices())||[];},setSelectedItems:function(Q,d){if(!Q||!Q.length){return ;}var S=this.items||[],s=this.itemIdField!=null?K.findMulti(S,this.itemIdField,Q):K.indexOfMulti(S,Q),V=Q.length,T=V-s.count,q=this.allowUnlistedValues,b=this.insertUnlistedValuesAt,X=(q&&(b>-1))?T:0;if(b<0){b=S.length;}var R=[],U=[],f=s.map;if(T&&q){var p=0,e;for(e=0;e<V;e++){if(f[e]==null){R.push(Q[e]);U.push(b+p++);}}this.add(R,b);}var W=[],h;for(h in f){var o=f[h];if(o>=b){o+=X;}W.push(o);}var r=W.concat(U),Y=this.addSelect(r,!d);if(!d){var Z=K.hash(Y),g=this.selectedIndices,a=[],l;for(l in g){if(!Z[l]){a.push(parseInt(l,10));}}var P=this.removeSelect(a,true);G(this,Y,P);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var B=mstrmojo.hash;mstrmojo.Base=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.Base",init:function A(C){B.copy(C,this);if(this.postApplyProperties){this.postApplyProperties();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var I=mstrmojo.array,Q=mstrmojo.desc(2412,"Default"),P=mstrmojo.desc(3433,"Font"),K=mstrmojo.desc(3434,"Number"),D=mstrmojo.desc(3435,"Alignment"),N=mstrmojo.desc(2886,"Borders"),E=mstrmojo.desc(3905,"Background"),R="-1,234.12",C="1,234.12",M="(1,234.12)",H="-$1,234.12",B="$1,234.12",J="($1,234.12)";var O=[{n:Q,v:"pru"}];I.forEach(["Arial","Arial Black","Arial Narrow","Arial Unicode MS","Batang","Book Antiqua","Bookman Old Style","Bookshelf Symbol 1","Bookshelf Symbol 2","Bookshelf Symbol 3","Comic Sans MS","Courier New","Garamond","Haettenschweiler","Helvetica","Impact","Lucida Console","Lucida Sans Unicode","Map Symbols","Marlett","Monotype Corsiva","Monotype Sorts","MS Gothic","MS Outlook","Microsoft Sans Serif","MT Extra","Open Sans SemiBold","Open Sans","Symbol","Tahoma","Times New Roman","Trebuchet MS","Verdana","Webdings","Wingdings","Wingdings 2","Wingdings 3"],function(S){O.push({n:S,v:S,symbolic:true});});function G(T,S,U){return(S&&S>=T)?G(T,S-U,U).concat(S):[];}var A=G(2,12,1);A=A.concat(G(14,24,2));A=A.concat(G(36,48,12));A=A.concat(G(72,72,1));var F=[{n:Q,v:"pru"}];I.forEach(A,function(S){F.push({n:String(S),v:String(S)});});mstrmojo._FormatDefinition={Formats:[{n:P},{n:K},{n:D},{n:mstrmojo.desc(3436,"Color and Lines")}],FormatTarget:[{n:mstrmojo.desc(7942,"Element Header"),v:1,p:"header_format"},{n:mstrmojo.desc(7943,"Element Value"),v:2,p:"grid_format"},{n:mstrmojo.desc(7944,"Individual Items Header"),v:3,p:"child_header_format"},{n:mstrmojo.desc(7945,"Individual Items Value"),v:4,p:"child_grid_format"}],MetricFormatTarget:[{n:mstrmojo.desc(9710,"Metric Headers"),v:1,p:"header_format"},{n:mstrmojo.desc(9711,"Metric Values"),v:2,p:"grid_format"}],MetricValueFormats:[{n:K},{n:D},{n:P},{n:N},{n:E}],MetricHeaderFormats:[{n:K},{n:D},{n:P},{n:N},{n:E},{n:mstrmojo.desc(12139,"Chart")}],NumberFormatCategory:{Automatic:-3,Default:-2,General:9,Fixed:0,Currency:1,Date:2,Time:3,Percentage:4,Fraction:5,Scientific:6,Custom:7},DefaultFormat:{FormattingAlignment:{Horizontal:"1",Vertical:"1",TextWrap:"0",TextDirection:"0"},FormattingBorder:{HInsideStyle:"1",VInsideStyle:"1",TopStyle:"1",LeftStyle:"1",BottomStyle:"1",RightStyle:"1",HInsideColor:"0",VInsideColor:"0",TopColor:"0",LeftColor:"0",BottomColor:"0",RightColor:"0",Border3DStyle:"0",Border3DWeight:"0",Border3DBottomColor:"0",Border3DLeftColor:"0",Border3DRightColor:"0",Border3DTopColor:"0"},FormattingFont:{Name:"Arial",Bold:"0",Italic:"0",Size:"10",Strikeout:"0",Underline:"0",Color:"0",Script:"0"},FormattingNumber:{Category:"9",DecimalPlaces:"0",ThousandSeparator:"-1",CurrencySymbol:"$",CurrencyPosition:"0",Format:"General",NegativeNumbers:"3"},FormattingPadding:{LeftPadding:"1",RightPadding:"1",TopPadding:"1",BottomPadding:"1",LineSpacing:"0"},FormattingPatterns:{FillColor:"16777215",PatternColor:"8650752",PatternStyle:"1",FillStyle:"0",ApplyToGraphThreshold:"0",GradientColor:"16777215",GradientAngle:"0",GradientXOffset:"0",GradientYOffset:"0",SelectorSelectionColor:"16167264",SelectorSelectionFillStyle:"0",SeriesFillColor:"pru",SeriesPatternColor:"8650752",SeriesPatternStyle:"1",SeriesFillStyle:"0",SeriesApplyToGraphThreshold:"0",SeriesGradientColor:"16777215",SeriesGradientAngle:"0",SeriesGradientXOffset:"0",SeriesGradientYOffset:"0",SeriesSelectorSelectionColor:"16167264",SeriesSelectorSelectionFillStyle:"0"}},Families:O,Sizes:F,SizesInVI:F.slice(7,19),Styles:[{n:Q,v:"pru"},{n:mstrmojo.desc(3440,"Regular"),v:"0,0"},{n:mstrmojo.desc(2718,"Bold"),v:"-1,0",v2:"-1,"},{n:mstrmojo.desc(2719,"Italic"),v:"0,-1",v2:",-1"},{n:mstrmojo.desc(3441,"Bold Italic"),v:"-1,-1"}],Effects:[{n:"Underline",v:0},{n:"Strike",v:1}],Category:[{n:Q,v:-2},{n:mstrmojo.desc(2378,"General"),v:9},{n:mstrmojo.desc(2050,"Fixed"),v:0},{n:mstrmojo.desc(2051,"Currency"),v:1},{n:mstrmojo.desc(2052,"Date"),v:2},{n:mstrmojo.desc(2170,"Time"),v:3},{n:mstrmojo.desc(2053,"Percentage"),v:4},{n:mstrmojo.desc(2054,"Fraction"),v:5},{n:mstrmojo.desc(2055,"Scientific"),v:6},{n:mstrmojo.desc(2056,"Custom"),v:7}],MaxNegativeDidigts:30,FixedNegative:[{n:R,v:1,f:"#,##0.00"},{n:R,r:true,v:5,f:"#,##0.00;[RED]-#,##0.00"},{n:C,r:true,v:2,f:"#,##0.00;[RED]#,##0.00"},{n:M,v:3,f:"#,##0.00;(#,##0.00)"},{n:M,r:true,v:4,f:"#,##0.00;[RED](#,##0.00)"}],CurrencyNegative:[{n:H,v:1,f:'"$"#,##0.00'},{n:H,r:true,v:5,f:'"$"#,##0.00;[RED]-"$"#,##0.00'},{n:B,r:true,v:2,f:'"$"#,##0.00;[RED]"$"#,##0.00'},{n:J,v:3,f:'"$"#,##0.00;("$"#,##0.00)'},{n:J,r:true,v:4,f:'"$"#,##0.00;[RED]("$"#,##0.00)'}],CurrencyPosition:[{n:mstrmojo.desc(2194,"Left"),v:0},{n:mstrmojo.desc(2195,"Right"),v:1},{n:mstrmojo.desc(2183,"Left with space"),v:2},{n:mstrmojo.desc(2182,"Right with space"),v:3}],Date:[{n:mstrmojo.desc(2231,"4/7"),v:"m/d"},{n:mstrmojo.desc(2232,"04/07"),v:"mm/dd"},{n:mstrmojo.desc(2233,"4/7/98"),v:"m/d/yy"},{n:mstrmojo.desc(2234,"04/07/98"),v:"mm/dd/yy"},{n:mstrmojo.desc(2235,"04/07/1998"),v:"mm/dd/yyyy"},{n:mstrmojo.desc(2236,"7-Apr"),v:"d-mmm"},{n:mstrmojo.desc(2237,"7-Apr-98"),v:"d-mmm-yy"},{n:mstrmojo.desc(2238,"Apr-98"),v:"mmm-yy"},{n:mstrmojo.desc(2239,"Apr '98"),v:"mmm 'yy"},{n:mstrmojo.desc(2240,"April 1998"),v:"mmmm yyyy"},{n:mstrmojo.desc(2241,"4/7/98 15:41"),v:"m/d/yy h:mm"},{n:mstrmojo.desc(2242,"4/7/98 3:41 PM"),v:"m/d/yy h:mm AM/PM"},{n:mstrmojo.desc(2243,"April 7, 1998"),v:"mmmm d, yyyy"}],Time:[{n:mstrmojo.desc(2244,"15:41"),v:"h:mm"},{n:mstrmojo.desc(2245,"3:41 PM"),v:"h:mm AM/PM"},{n:mstrmojo.desc(2246,"15:41:46"),v:"h:mm:ss"},{n:mstrmojo.desc(2247,"3:41:46 PM"),v:"h:mm:ss AM/PM"},{n:mstrmojo.desc(2241,"4/7/98 15:41"),v:"m/d/yy h:mm"},{n:mstrmojo.desc(2242,"4/7/98 3:41 PM"),v:"m/d/yy h:mm AM/PM"},{n:mstrmojo.desc(2250,"04/07/98 15:41"),v:"mm/dd/yy h:mm"},{n:mstrmojo.desc(2248,"04/07/98 3:41 PM"),v:"mm/dd/yy h:mm AM/PM"}],PercentNegative:[{n:"-12.12%",v:1,f:"0.00%"},{n:"-12.12%",r:true,v:5,f:"0.00%;[RED]-0.00%"},{n:"12.12%",r:true,v:2,f:"0.00%;[RED]0.00%"},{n:"(12.12%)",v:3,f:"0.00%;(0.00%)"},{n:"(12.12%)",r:true,v:4,f:"0.00%;[RED](0.00%)"}],Fraction:[{n:"12 1/3",v:"# ?/?"},{n:"37/3",v:"?/?"},{n:"12 26/81",v:"# ??/??"},{n:"998/81",v:"??/??"}],TextDirection:[{n:Q,v:"pru"},{n:mstrmojo.desc(4601,"Horizontal"),v:0},{n:mstrmojo.desc(5156,"-90 Degree"),v:-90}],Horizontal:[{n:mstrmojo.desc(2296,"Use Default"),v:"pru"},{n:mstrmojo.desc(2378,"General"),v:1},{n:mstrmojo.desc(2194,"Left"),v:2},{n:mstrmojo.desc(2193,"Center"),v:3},{n:mstrmojo.desc(2195,"Right"),v:4},{n:mstrmojo.desc(2068,"Justify"),v:6}],Vertical:[{n:mstrmojo.desc(2296,"Use Default"),v:"pru"},{n:mstrmojo.desc(2256,"Top"),v:1},{n:mstrmojo.desc(2067,"Center"),v:2},{n:mstrmojo.desc(2257,"Bottom"),v:3}],TextWrap:[{v:0},{v:-1}],BorderStyles:[{n:Q,v:"pru"},{n:mstrmojo.desc(2258,"None"),v:0},{n:mstrmojo.desc(2259,"Dashed"),v:3},{n:mstrmojo.desc(2260,"Dotted"),v:4},{n:mstrmojo.desc(2261,"Hair"),v:7},{n:mstrmojo.desc(2262,"Thin"),v:1},{n:mstrmojo.desc(2264,"Thick"),v:5},{n:mstrmojo.desc(15361,"Double"),v:6}],extractModel:function(U,W,T){var Y=T||this.DefaultFormat,X;for(X in U){var S=U[X];if(!S.attachEventListener){if(!mstrmojo.hash.isEmpty(S)){W[X]=S;}}else{var V;for(V in S){if(Y[X]&&Y[X][V]){if(!W[X]){W[X]={};}W[X][V]=S[V];}}}}},getAvailableFonts:function L(){var S={success:function(U){if(U.name==="fontPicker"){var T=[{n:Q,v:"pru"}];I.forEach(U.shortcuts,function(W){var X=W.attributes,Y=I.filterOne(X,function(Z){return Z.value;}),V=I.filterOne(X,function(Z){return Z.symbolic;});T.push({n:Y&&Y.value,v:Y&&Y.value,symbolic:(V&&V.symbolic||"false").toUpperCase()==="TRUE"});});mstrmojo._FormatDefinition.Families=T;}}};mstrmojo.xhr.request("POST",mstrConfig.taskURL,S,{taskId:"getSystemPickerJson",name:"fontPicker"},false,null,true);},getStandardFormat:function(T,S){var V=mstrmojo.hash.clone(S||this.DefaultFormat),U;T=T||{};for(U in V){T[U]=T[U]||{};}for(U in T){if(!T[U].attachEventListener){T[U]=mstrmojo.hash.make(T[U],mstrmojo.Obj);}}return T;},saveFormatModel:function(W,c,T,d){var b=d||this.DefaultFormat,Y,S;for(Y=0;Y<T.length;Y++){var X=T[Y],V=c[X]||null,a=W[X];if(a===undefined){delete c[X];continue;}for(S in b){var Z=b[S],U;if((!V&&!a)||(V&&!V[S]&&!a[S])){continue;}for(U in Z){if(a[S]===undefined||a[S]===""||a[S][U]==="pru"||a[S][U]===undefined){if(V&&V[S]&&(V[S][U]!==undefined&&V[S][U]!==null&&V[S][U]!=="pru")){V[S][U]="pru";}}else{V=V||{};V[S]=V[S]||{};V[S][U]=a[S][U];}}}if(V){c[X]=V;}}}};}());(function(){mstrmojo.requiresCls("mstrmojo.chart.model.enums.EnumDSSGraphProperty");var B=mstrmojo.chart.model,C=B.enums,A=C.EnumDSSGraphProperty;mstrmojo.chart.model.enums.EnumDSSGraphRegressionType={DssGraphRegressionNone:0,DssGraphRegressionLinear:A.DssGraphShowSDLinrLine,DssGraphRegressionLog:A.DssGraphShowSDLinrLog,DssGraphRegressionPoly:A.DssGraphShowSDLinrNPoly,DssGraphRegressionExp:A.DssGraphShowSDLinrExp,DssGraphRegressionMA:A.DssGraphShowSDMOVALine,DssGraphRegressionNatLog:A.DssGraphShowSDLinrNatLog,DssGraphRegressionSTDD:A.DssGraphShowSDSTDDLine,DssGraphRegressionMean:A.DssGraphShowSDMeanLine,DssGraphRegressionPow:200};})();(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.model.enums.EnumDSSGraphRegressionType");var B=mstrmojo.chart.model,D=B.enums,A=D.EnumDSSGraphRegressionType;mstrmojo.chart.GraphTrendLineOptions=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GraphTrendLineOptions",mRegressionType:A.DssGraphRegressionNone,mOrder:3,mPeriod:2,mShowEquation:false,mShowCoefficients:false,mUserSeriesGraphColor:true,mSeansonal:false,init:function C(E){if(E){if(E.RegressionType){this.mRegressionType=E.RegressionType;}if(E.Order){this.mOrder=E.Order;}if(E.Period){this.mPeriod=E.Period;}if(E.ShowEquation){this.mShowEquation=E.ShowEquation;}if(E.ShowCoefficients){this.mShowCoefficients=E.ShowCoefficients;}if(E.UserSeriesGraphColor){this.mUserSeriesGraphColor=E.UserSeriesGraphColor;}if(E.Seasonal){this.mSeasonal=E.Seasonal;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.enums.EnumFormatType");var C=mstrmojo.chart,B=C.enums,A=B.EnumFormatType;mstrmojo.chart.JSONFormat=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.JSONFormat",mpOriginalAddress:0,mFormatType:A.FMT_UNDEFINED,init:function D(E){if(E.Font){this.mpOriginalAddress=E.Font.id;}else{if(E.Line){this.mpOriginalAddress=E.Line.id;}else{this.mpOriginalAddress=E.id;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.common.MapStructure=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.common.MapStructure",map:null,init:function H(K){this._super(K);this.map={};},replace:function B(L,O){var N=(L&&L.length)||0,P,M,K;for(K=0,P=this.map;K<N-1;K++){M=P[L[K]];if(M===undefined){M=P[L[K]]={};}P=M;}P[L[N-1]]=O;},replaceByTripleId:function B(K,L){this.replace([K.mGroupId,K.mSeriesId,K.mObjectId],L);},replaceByGraphPropertyKey:function B(K,L){this.replace([K.mGroupId,K.mSeriesId,K.mObjectId,K.mPropertyId],L);},push:function G(K,L){this.replace(K,L);},find:function F(L){var N=(L&&L.length)||0,O,M,K;for(K=0,O=this.map;K<N-1;K++){M=O[L[K]];if(M===undefined){return ;}O=M;}return O[L[N-1]];},findByTripleId:function J(K){return this.find([K.mGroupId,K.mSeriesId,K.mObjectId]);},findByGraphPropertyKey:function I(K){return this.find([K.mGroupId,K.mSeriesId,K.mObjectId,K.mPropertyId]);},deleteElement:function A(L){var N=(L&&L.length)||0,O,M,K;for(K=0,O=this.map;K<N-1;K++){M=O[L[K]];if(M===undefined){return ;}O=M;}delete O[L[N-1]];},deleteByTripleId:function E(K){return this.deleteElement([K.mGroupId,K.mSeriesId,K.mObjectId]);},deleteByGraphPropertyKey:function C(K){return this.deleteElement([K.mGroupId,K.mSeriesId,K.mObjectId,K.mPropertyId]);},clear:function D(){this.map={};}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var R=mstrmojo.chart;mstrmojo.chart.Point2D=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.Point2D",x:0,y:0,init:function P(V){if(V){if(V.Point2D){this.x=V.Point2D.x;this.y=V.Point2D.y;}else{this._super(V);}}},Reset:function A(V,W){this.x=V;this.y=W;},ResetPoint:function N(V){this.x=V.x;this.y=V.y;},DistanceSquared:function D(V){return(this.x-V.x)*(this.x-V.x)+(this.y-V.y)*(this.y-V.y);},Distance:function C(V){return Math.sqrt(this.DistanceSquared(V));},isEqual:function O(V){return(this.x===V.x&&this.y===V.y);},IsInPolygon:function I(Y){var Z=Y.length,V=false,X,W;if(Z<3){return false;}for(X=0,W=Z-1;X<Z;W=X++){if(((Y[X].y<=this.y&&this.y<Y[W].y)||(Y[W].y<=this.y&&this.y<Y[X].y))&&this.x<=(Y[W].x-Y[X].x)*(this.y-Y[X].y)/(Y[W].y-Y[X].y)+Y[X].x){V=!V;}}return V;},IsStrictlyInPolygon:function K(Z){var Y=new R.Point2D({x:this.x+0.1,y:this.y}),W=new R.Point2D({x:this.x-0.1,y:this.y}),V=new R.Point2D({x:this.x,y:this.y+0.1}),X=new R.Point2D({x:this.x,y:this.y-0.1});if(Y.IsInPolygon(Z)){return false;}if(W.IsInPolygon(Z)){return false;}if(V.IsInPolygon(Z)){return false;}return !X.IsInPolygon(Z);},Rotate:function M(W,Y){var V=this.x-W.x,X=this.y-W.y;this.x=W.x+Math.cos(Y)*V-Math.sin(Y)*X;this.y=W.y+Math.sin(Y)*V+Math.cos(Y)*X;},MiddleTo:function F(V){return new R.Point2D({x:(this.x+V.x)/2,y:(this.y+V.y)/2});},Shifted:function Q(V){return new R.Point2D({x:this.x+V.x,y:this.y+V.y});},NegativeShifted:function T(V){return new R.Point2D({x:this.x-V.x,y:this.y-V.y});},swap:function L(){var V=this.x;this.x=this.y;this.y=V;},swapPoints:function B(W){var V;V=this.x;this.x=W.x;W.x=V;V=this.y;this.y=W.y;W.y=V;},IsOnSegment:function H(Y,W,X){var V=X?0.01:-0.01;if(Math.abs(Y.x-W.x)<0.01){if((this.y-Y.y)>V&&(W.y-this.y)>V){return true;}if((this.y-W.y)>V&&(Y.y-this.y)>V){return true;}}else{if((this.x-Y.x)>V&&(W.x-this.x)>V){return true;}if((this.x-W.x)>V&&(Y.x-this.x)>V){return true;}}return false;},IsOnVerOrHorSegment:function G(W,V){if(this.y===W.y&&this.y===V.y){return(((this.x-W.x)>=0&&(V.x-this.x)>=0)||((this.x-W.x)<=0&&(V.x-this.x)<=0));}if(this.x===W.x&&this.x===V.x){return(((this.y-W.y)>=0&&(V.y-this.y)>=0)||((this.y-W.y)<=0&&(V.y-this.y)<=0));}return false;},DistanceToLine:function J(d,Z){var a=this.DistanceSquared(d),W=this.DistanceSquared(Z),Y=d.DistanceSquared(Z),c=0.01,V,b,X;if(a<c||W<c){return 0;}if(Y<c){return Math.sqrt(a);}if(a>=W+Y){return Math.sqrt(W);}if(W>=a+Y){return Math.sqrt(a);}V=new R.Point2D({x:this.x-d.x,y:this.y-d.y});b=new R.Point2D({x:Z.x-d.x,y:Z.y-d.y});X=V.x*b.y-V.y*b.x;return(X<0?-X:X)/Math.sqrt(Y);},DistanceToPolygon:function S(X){var Z=X.length,V=this.DistanceToLine(X[0],X[Z-1]),Y,W;if(this.IsInPolygon(X)){return 0;}for(W=0;W+1<Z;++W){Y=this.DistanceToLine(X[W],X[W+1]);if(V>Y){V=Y;}}return V;},rotateAndClone:function E(V,W){this.Rotate(V,W);return this;},clone:function U(){return new R.Point2D({Point2D:this});}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var B=mstrmojo.chart;mstrmojo.chart.JSONParameter=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.JSONParameter",mIsFirstFrameSet:false,mIsLastFrameSet:false,mParameterName:"",mParameterValue:null,mParameterStartValue:null,init:function E(H){this._super(H);this.mIsFirstFrameSet=!H.mIsLastFrameSet;if(this.mIsFirstFrameSet){this.mParameterStartValue=H.mParameterValue;}},SetName:function D(H){this.mParameterName=H;},GetName:function C(){return this.mParameterName;},SetValue:function G(H,I){if(I){this.mParameterValue=H;this.mIsLastFrameSet=true;}else{this.mParameterStartValue=H;this.mIsFirstFrameSet=true;}},GetValue:function A(H){return H?this.mParameterValue:this.mParameterStartValue;},AppendToJSONObject:function F(J){var H,I=function I(K,L){if(K instanceof B.Point2D){J[L]={X:K.x,Y:K.y};}else{if(K instanceof B.Rect2D){J[L]={X:K.x,Y:K.y,Width:K.width,Height:K.height};}else{if(K instanceof B.RGBColor){J[L]={R:K.mR,G:K.mG,B:K.mB};}else{J[L]=K;}}}};if(this.mIsLastFrameSet&&this.mIsFirstFrameSet){J[this.mParameterName]=[this.mParameterStartValue,this.mParameterValue];}else{if(this.mIsLastFrameSet){I(this.mParameterValue,this.mParameterName);}else{if(this.mIsFirstFrameSet){I(this.mParameterStartValue,this.mParameterName);}}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var S=mstrmojo.chart,M=295,B=301,H=289,C=271,T=277,E=10003,V=100200,G=20000,U=20001,O=20002,Q=20003,N=20004,P=20005,L=20006,J=20007,I=21007,A=S.gNullObjectId=-3,F=S.gNullSeriesId=-3,D=S.gNullGroupId=-3;mstrmojo.chart.TripleId=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.TripleId",mObjectId:A,mSeriesId:F,mGroupId:D,init:function R(W){if(!W){this.mObjectId=A;this.mSeriesId=F;this.mGroupId=D;}else{if((W instanceof Array)&&W.length>=3){this.mObjectId=W[0];this.mSeriesId=W[1];this.mGroupId=W[2];}else{if(W.TripleId){var X=W.TripleId;this.mObjectId=X.mObjectId;this.mSeriesId=X.mSeriesId;this.mGroupId=X.mGroupId;}else{this.mObjectId=(W.ObjectId!==undefined)?W.ObjectId:A;this.mSeriesId=(W.SeriesId!==undefined)?W.SeriesId:F;this.mGroupId=(W.GroupId!==undefined)?W.GroupId:D;}}}}});S.gNullTripleId=new mstrmojo.chart.TripleId({ObjectId:A,SeriesId:F,GroupId:D});var K=S.gAxisTripleIds={};K.Y1=new mstrmojo.chart.TripleId({ObjectId:M,SeriesId:0,GroupId:D});K.Y2=new mstrmojo.chart.TripleId({ObjectId:B,SeriesId:0,GroupId:D});K.X1=new mstrmojo.chart.TripleId({ObjectId:H,SeriesId:0,GroupId:D});K.X2=new mstrmojo.chart.TripleId({ObjectId:V,SeriesId:0,GroupId:D});K.Z=new mstrmojo.chart.TripleId({ObjectId:E,SeriesId:0,GroupId:D});K.O1=new mstrmojo.chart.TripleId({ObjectId:C,SeriesId:0,GroupId:D});K.O2=new mstrmojo.chart.TripleId({ObjectId:T,SeriesId:0,GroupId:D});mstrmojo.chart.ManagerId=new mstrmojo.chart.TripleId({ObjectId:G,SeriesId:-3,GroupId:D});mstrmojo.chart.PlotManagerId=new mstrmojo.chart.TripleId({ObjectId:U,SeriesId:F,GroupId:D});mstrmojo.chart.PlotId0=new mstrmojo.chart.TripleId({ObjectId:O,SeriesId:0,GroupId:D});mstrmojo.chart.BarRenderer0=new mstrmojo.chart.TripleId({ObjectId:P,SeriesId:0,GroupId:D});mstrmojo.chart.LineRenderer0=new mstrmojo.chart.TripleId({ObjectId:L,SeriesId:0,GroupId:D});mstrmojo.chart.AreaRenderer0=new mstrmojo.chart.TripleId({ObjectId:N,SeriesId:0,GroupId:D});mstrmojo.chart.RenderLayer2=new mstrmojo.chart.TripleId({ObjectId:N,SeriesId:2,GroupId:D});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.JSONUtil=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.JSONUtil",AppendCompoundPointerVectorToJSONObject:function A(E,C,G){var F,B,D;D=G[E]=[];B=C.length;if(B>0){for(F=0;F<B;++F){C[F].AppendToJSONObject(D);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.Vector2D=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.Vector2D",x:0,y:0,init:function H(I){if(I){if(I.x!==undefined&&I.y!==undefined){this.x=I.x;this.y=I.y;}else{if(I.Point){this.x=I.Point.x;this.y=I.Point.y;}else{if(I.StartPoint&&I.EndPoint){this.x=I.EndPoint.x-I.StartPoint.x;this.y=I.EndPoint.y-I.StartPoint.y;}}}}},Reset:function B(I,J){this.x=I;this.y=J;},LengthSquared:function G(){return this.x*this.x+this.y*this.y;},InnerProduct:function A(I){return(this.x*I.x+this.y*I.y);},CrossProduct:function D(I){return(this.x*I.y-this.y*I.x);},IncludedAngle:function F(J){var I;I=this.InnerProduct(J)/(Math.sqrt(this.LengthSquared()*J.LengthSquared()));I=I>1?1:I;I=I<-1?-1:I;return Math.acos(I);},Length:function E(){return Math.sqrt(this.LengthSquared());},Normalize:function C(){var I=this.Length();this.x/=I;this.y/=I;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphFillEffect","EnumDSSGraphMarkerShape","EnumDSSGraphType","EnumShapeType","EnumDSSExtraGraphProperty");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumFillType","EnumGraphMajorType","EnumGraphMatrixMarkerTypeInChart","EnumGraphMatrixElementSizeMode");mstrmojo.requiresCls("mstrmojo.Base");var W=mstrmojo.chart,T=W.ChartConstants,C=W.common,Q=W.model,k=Q.enums,h=k.EnumDSSGraphMarkerShape,e=k.EnumDSSGraphType,i=k.EnumShapeType,a=W.enums,X=a.EnumGraphMajorType,O=a.EnumGraphMatrixMarkerTypeInChart,d=a.EnumGraphMatrixElementSizeMode;function p(u){var t=0.9;switch(u){case O._MUTATION_IN_LINE:case O._ISODOT_IN_LINEAREA:t=this.mHasSizeBy?0.9:0.5;break;case O._PIE:if(this.getPieShapeLayout()===X.GMT_GRID){var s=this.parentContext&&this.parentContext.mDatasetPtr&&this.parentContext.mDatasetPtr.showPieDatalabels();t=s?0.5:0.9;}break;case O._SHAPES_IN_BUBBLESCATTER:t=this.mHasSizeBy?0.9:0.5;break;case O._TICK_CATEGORY:case O._TICK_VALUE:case O._TICK_GRID:t=0.8;break;}return t;}function V(x,AA,AD,u,v,AB){u=u||false;if(v!==0){v=v||this.mMarkerShape;}if(AB===undefined||AB===null){AB=0;}var y=0,t=(v===h.DssGraphMarkerShapeNone);if(u){t=u;}var z=AD-AB;if(this.mHasSizeBy||!t||AD===1||z===1){var AC=t?O._LINE_IN_LINE:O._MUTATION_IN_LINE;if(t){if(AD===1){AC=O._DOTS_IN_LINE;if(!this.mHasSizeBy){return F(this.mElementsInfo.Max.Size,this.mEstGraphHeight,this.mEstGraphWidth);}}else{if(u){AC=O._DOTS_IN_LINE;}}}else{if(AD===1){AC=O._ISODOT_IN_LINEAREA;}if(!this.mHasSizeBy){y=(this.mEstGraphWidth/(AD+1)/2);y=Math.min(y,12);return y;}}y=this.GetMaxMarkerSize(AC,AA,AD,this.mHasSizeBy);}else{if(x){if(u){return F(this.mElementsInfo.Max.Size,this.mEstGraphHeight,this.mEstGraphWidth);}return 0;}else{if(u){return F(this.mElementsInfo.Max.Size,this.mEstGraphHeight,this.mEstGraphWidth);}var s=this.parentContext;if(s&&s.mDatasetPtr){var w=s.mDatasetPtr.getGenericLineFormat(0,0);y=w&&w.mLineThickness;if(y<=2){y=3;}}}y=Math.max(y,this.mConstants.MinimalSize.Line);}return y;}function F(u,t,s){return u*3.25+(Math.min(s,t)*0.00375);}mstrmojo.chart.GraphMatrixContext=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GraphMatrixContext",mHasSizeBy:false,mMaxSizeVal:100000,mMinSizeVal:0,mCustomScaleForSizeBy:false,mHasColorBy:false,mEstGraphWidth:600,mEstGraphHeight:400,mMarkerShape:0,mGraphType:0,mClippedPaddings:null,mHasChartWithOnlyDataMarkers:false,mIsNeedRotateDataLabel:false,mIsNeedAdjustAxis:false,mShownValueTickSet:null,mIsolatedDots:null,mConstants:null,mInputs:null,mElementsInfo:null,parentContext:null,init:function n(s){this.mShownValueTickSet=[{},{}];this.mClippedPaddings={X1:{LowOffset:0,HighOffset:0},X2:{LowOffset:0,HighOffset:0},Y1:{LowOffset:0,HighOffset:0},Y2:{LowOffset:0,HighOffset:0}};if(s&&s.GraphType){this.mGraphType=s.GraphType;}this.mElementsInfo={Max:{Size:0.9,Mode:0},Min:{Size:0,Mode:0}};this.mConstants={FixedTickerSize:2,FixedDataMarkerSize:3,MinimalSize:{Bar:5,Pie:10,Band:10,Line:1,ProportionalMin:1,General:2},MaximalSize:{Bar:44,Band:100},CondenseLimit:{Percentage:10,Default:-1}};},GetAdjustThicknessValue:function Y(s){switch(s){case 1:case 2:case 3:case 4:s++;break;default:break;}return s;},AddToIsolatedDotList:function r(s){if(this.mIsolatedDots===null){this.mIsolatedDots=new C.MapStructure();}this.mIsolatedDots.replaceByTripleId(s,true);},IsIsolatedDot:function j(t,s){if(this.mIsolatedDots===null){return false;}s=(s!==undefined)?s:false;if(s){if(this.mMarkerShape!==h.DssGraphMarkerShapeNone){return false;}}return(this.mIsolatedDots.findByTripleId(t)!==undefined);},IsIsolatedDotInLine:function D(s){return this.IsIsolatedDot(s,true);},GetMaxElementSizeInAreaChart:function N(u,v,s,t){return V.call(this,true,u,v,s,null,t);},GetMaxElementSizeInLineChart:function P(u,v,t,s){return V.call(this,false,u,v,t,s);},GetValueAxisPadding:function Z(t,v,u){if(u===undefined){u=true;}var s=t?(u?"X1":"X2"):(u?"Y1":"Y2");return v?this.mClippedPaddings[s].HighOffset:this.mClippedPaddings[s].LowOffset;},UpdateValueAxisPadding:function R(u){var t,w,v,x,s;for(t=0;t<2;++t){for(s=0;s<2;++s){w=t===0;x=s===0;v=w?(x?"X1":"X2"):(x?"Y1":"Y2");if(u[v]!==undefined){this.mClippedPaddings[v].LowOffset=u[v].LowOffset;this.mClippedPaddings[v].HighOffset=u[v].HighOffset;}}}},GetMaxMarkerSize:function c(AK,AA,AI,s){s=s===undefined?false:s;var AO=this.mElementsInfo,w=10000,AF=24,AH=12,y=AA?this.mEstGraphWidth:this.mEstGraphHeight,AB=y/(AI*2)+0.5,u=AO.Max.Size,AC=AO.Max.Size;if(AK===O._MUTATION_IN_LINE||AK===O._ISODOT_IN_LINEAREA){u=AC;}if(AO.Max.Mode===d._AUTOMATIC){if(AK!==O._LINE_IN_LINE){w=this.mHasSizeBy?24:12;}if(AK!==O._LINE_IN_LINE&&AK!==O._DOTS_IN_LINE){w=s?AF:AH;}u=p.call(this,AK);}switch(AK){case O._LINE_IN_LINE:case O._DOTS_IN_LINE:var AM=AA?this.mEstGraphHeight:this.mEstGraphWidth,AJ=AM*0.15;AJ=Math.min(AJ,w*2);if(AK===O._DOTS_IN_LINE){if(AI!==1){AB=AB*2;}AJ=Math.min(AJ,AB);var t=AO.Min.Size;if(AO.Min.Mode===d._MANUAL){t=0;}AJ=Math.max(AJ/2,t);}return AJ;case O._MUTATION_IN_LINE:case O._ISODOT_IN_LINEAREA:case O._SHAPES_IN_BUBBLESCATTER:var x=1;x=Math.min(this.mEstGraphHeight,this.mEstGraphWidth)*0.15;x=Math.min(x*u,w);if(AK===O._MUTATION_IN_LINE||AK===O._ISODOT_IN_LINEAREA){x=Math.min(x,AB);x=Math.ceil(x);}return x;case O._PIE:var AD=true,AG=0.2,v=this.getPieShapeLayout(),z=Math.min(this.mEstGraphWidth,this.mEstGraphHeight);if(v===X.GMT_CATEGORY){var AE=AA?this.mEstGraphHeight:this.mEstGraphWidth;if(z/AE<0.15){AD=false;}}x=u*z/2;if(v===X.GMT_GRID||(v===X.GMT_CATEGORY&&!AD)){if(AO.Max.Mode===d._AUTOMATIC){x=Math.min(x,250);}}else{x*=AG;x=Math.min(x,z);if(AO.Max.Mode===d._AUTOMATIC){x=Math.min(x,50);}}if(v===X.GMT_CATEGORY){x=Math.min(x,AB);}x=Math.floor(Math.max(x,10));return x;case O._TICK_CATEGORY:case O._TICK_VALUE:case O._TICK_GRID:w=24;var AL=24;if(AK===O._TICK_CATEGORY){AL=y/AI;}var AN=AL*u;if(AK===O._TICK_CATEGORY){AN=Math.min(AN,w);}return AN+0.5;default:return 0;}},GetScaledSize:function o(u,w,t){if(!this.mHasSizeBy){return w;}var s=this.mElementsInfo.Min.Mode,v=this.ToRatioEx(u,(s===d._PROPORTIONAL));if(s===d._PROPORTIONAL&&t!==null&&t!==undefined){if(t===i._CIRCLE||t===i._PIE||t===i._PIESLICE||t===i._SQUARE){v=Math.sqrt(v);}}return this.GetScaledSizeWithRatio(v,w);},GetScaledSizeWithRatio:function J(x,z,t){var s=false,u=this.mElementsInfo,v=u.Min.Mode,y;if(!(isNaN(t)||t===null)){y=t;s=true;}else{y=u.Min.Size;}if(v===d._MANUAL){y=u.Min.Size*z;if(y<0){y=0;}if(y>z){y=z;}}else{if(v===d._PROPORTIONAL){return Math.max(this.mConstants.MinimalSize.ProportionalMin,x*z);}else{if(!s){y=this.mConstants.MinimalSize.General;}}}var w=Math.max((z-y),0);var AA=x*w+y;return Math.min(AA,z);},ToRatio:function B(u,s,t,v){v=v||false;if(v){if(t>0){t=0;}if(s<0){s=0;}}if(t===s){return 1;}if(u>s){u=s;}if(u<t){u=t;}return Math.min((u-t)/(s-t),1);},ToRatioEx:function S(v,u){u=u||false;var s=this.mMaxSizeVal,t=this.mMinSizeVal;if(u){v=Math.abs(v);s=Math.max(Math.abs(s),Math.abs(t));t=0;}else{v=Math.min(s,v);v=Math.max(t,v);}if(this.mCustomScaleForSizeBy){return this.ToRatio(v,s,t,false);}return this.ToRatio(v,s,t,u);},getCondensedTextLimit:function f(s){switch(s){case 4:return this.mConstants.CondenseLimit.Percentage;}return this.mConstants.CondenseLimit.Default;},GetRealTripleId:function A(u,s,t){var v=800,w=new W.TripleId({TripleId:t});if(t.mSeriesId>=0){w.mSeriesId+=s*v;}if(t.mGroupId>=0){w.mGroupId+=u*v;}return w;},GetLogicalTripleId:function q(t){var u=new W.TripleId({TripleId:t}),s=341;if(t.mObjectId===s){u.mSeriesId=this.hGetLogicalId(u.mSeriesId);u.mGroupId=this.hGetLogicalId(u.mGroupId);}return u;},hGetLogicalId:function G(s){var t=800;if(s<0){return s;}s%=t;return s;},GetValueAxisZoomScale:function g(s){return 1;},checkPaddingBetweenLabels:function E(z,y,v,AA){if(v===undefined){return z.HasIntersection(y);}var t=0,w=1,s=5,u,x;if(AA){u=Math.abs(z.x+z.width/2-y.x-y.width/2);}else{u=Math.abs(z.y+z.height/2-y.y-y.height/2);}switch(v){case t:x=this.getPadding(T.kBetweenLabelCenters);break;case s:u-=0.5*(AA?z.width+y.width:z.height+y.height);x=this.getPadding(T.kExtra);break;case w:if(AA){u-=0.5*(z.width+y.width);}else{u-=0.5*(z.height+y.height);}x=this.getPadding(T.kBetweenLabels);break;default:return z.HasIntersection(y);}return u<x;},checkLabelPaddingToBorder:function m(w,t,y,x){var u,s,v=this.getPadding(T.kLabelToChart);if(x){u=w.x;s=w.x+w.width;}else{u=w.y;s=w.y+w.height;}return(u>=t+v)&&(s+v<=y);},getPadding:function M(s){switch(s){case T.kBetweenLabels:return 10;case T.kBetweenLabelLines:return 5;case T.kLabelToChart:return 5;case T.kNumericLabelToTick:return 4;case T.kExtra:return 2;case T.kChartToChart:return 10;case T.kEndTickToChart:return 10;case T.kEndLabelToChart:return 5;case T.kBetweenLabelCenters:return 20;case T.kBandSide:var t=this.mElementsInfo.Max.Mode;if(t===d._AUTOMATIC){return 5;}return 0;case T.kCategoricalLabelToTick:return 5;case T.kDataLabel:return 5;case T.kRefLabel:return 5;case T.kAxisOriginLabel:return 5;default:return 0;}},getClippedOffset:function b(u,z,t,v,y,x,s){var w=y?v.x:v.y;return{LowOffset:Math.max(x,t-Math.abs(w-u)),HighOffset:Math.max(s,t-Math.abs(z-w))};},getSizeByPieRadius:function I(u,AB,v,y,t,x){if(u===undefined||u===null){return -1;}var AA=u.GetSizeByData(AB,v);if(AA===undefined){return -1;}var AC,s=this.mElementsInfo.Min.Mode;var z=this.ToRatioEx(AA,s===d._PROPORTIONAL);if(s===d._PROPORTIONAL){var w=Math.max(0,x-this.mConstants.MinimalSize.Pie);AC=Math.round(w*z+this.mConstants.MinimalSize.Pie);}else{AC=this.GetScaledSizeWithRatio(z,x,this.mConstants.MinimalSize.Pie);}return AC;},updateGMGraphTypeWithMarkerShape:function L(s){if(s){this.mMarkerShape=s;}if(this.mMarkerShape!==202&&this.mMarkerShape!==201){return ;}switch(this.mGraphType){case e.DssGraphTypeGridChart:this.mGraphType=e.DssGraphTypeGrid_Pies;return ;case e.DssGraphTypeX_Y_Scatter:case e.DssGraphTypeDualAxis_X_Y_Scatter:case e.DssGraphTypeX_Y_Scatter_with_Labels:case e.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:this.mGraphType=e.DssGraphTypeScatter_Pies;return ;case e.DssGraphTypeBubble:case e.DssGraphTypeBubble_DualAxis:case e.DssGraphTypeBubble_With_Labels:case e.DssGraphTypeBubble_DualAxis_With_Labels:this.mGraphType=e.DssGraphTypeBubble_Pies;return ;case e.DssGraphTypeVertical_Area_Absolute:case e.DssGraphTypeVertical_Area_DualAxis_Absolute:case e.DssGraphTypeVertical_Area_BiPolar_Absolute:case e.DssGraphTypeVertical_Line_Absolute:case e.DssGraphTypeVertical_Line_BiPolar_Absolute:case e.DssGraphTypeVertical_Line_DualAxis_Absolute:case e.DssGraphTypeVertical_Bar_BiPolar_Absolute:case e.DssGraphTypeVertical_Bar_DualAxis_Absolute:case e.DssGraphTypeVertical_Bar_Absolute:case e.DssGraphTypeVertical_Bar_Side_by_Side:case e.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case e.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:this.mGraphType=e.DssGraphTypeVertical_CategoryPies_Absolute;return ;case e.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:case e.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:case e.DssGraphTypeHorizontal_Bar_Absolute:case e.DssGraphTypeHorizontal_Area_Absolute:case e.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case e.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case e.DssGraphTypeHorizontal_Line_Absolute:case e.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case e.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case e.DssGraphTypeHorizontal_Bar_Side_by_Side:case e.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case e.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:this.mGraphType=e.DssGraphTypeHorizontal_CategoryPies_Absolute;return ;case e.DssGraphTypeVertical_Bar_DualAxis_Stacked:case e.DssGraphTypeVertical_Bar_Stacked:case e.DssGraphTypeVertical_Bar_BiPolar_Stacked:case e.DssGraphTypeVertical_Area_BiPolar_Stacked:case e.DssGraphTypeVertical_Area_DualAxis_Stacked:case e.DssGraphTypeVertical_Area_Stacked:case e.DssGraphTypeVertical_Line_Stacked:case e.DssGraphTypeVertical_Line_BiPolar_Stacked:case e.DssGraphTypeVertical_Line_DualAxis_Stacked:this.mGraphType=e.DssGraphTypeVertical_CategoryPies_Stacked;return ;case e.DssGraphTypeHorizontal_Bar_Stacked:case e.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case e.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case e.DssGraphTypeHorizontal_Area_Stacked:case e.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case e.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case e.DssGraphTypeHorizontal_Line_Stacked:case e.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case e.DssGraphTypeHorizontal_Line_DualAxis_Stacked:this.mGraphType=e.DssGraphTypeHorizontal_CategoryPies_Stacked;return ;case e.DssGraphTypeVertical_Bar_Percent:case e.DssGraphTypeVertical_Line_Percent:case e.DssGraphTypeVertical_Area_Percent:this.mGraphType=e.DssGraphTypeHorizontal_CategoryPies_Stacked;return ;case e.DssGraphTypeHorizontal_Bar_Percent:case e.DssGraphTypeHorizontal_Line_Percent:case e.DssGraphTypeHorizontal_Area_Percent:this.mGraphType=e.DssGraphTypeVertical_CategoryPies_Percent;return ;}},isCombinationChart:function K(){return this.mMarkerShape===h.DssGraphMarkerShapeCombined;},isPieOrRingShape:function U(){return this.mMarkerShape===h.DssGraphMarkerShape2DPie||this.mMarkerShape===h.DssGraphMarkerShape2DRingPie;},getPieShapeLayout:function l(){switch(this.mGraphType){case e.DssGraphTypeHorizontal_CategoryPies_Absolute:case e.DssGraphTypeHorizontal_CategoryPies_Stacked:case e.DssGraphTypeHorizontal_CategoryPies_Percent:case e.DssGraphTypeVertical_CategoryPies_Absolute:case e.DssGraphTypeVertical_CategoryPies_Stacked:case e.DssGraphTypeVertical_CategoryPies_Percent:return X.GMT_CATEGORY;case e.DssGraphTypeScatter_Pies:return X.GMT_SCATTER;case e.DssGraphTypeBubble_Pies:return X.GMT_BUBBLE;case e.DssGraphTypeGrid_Pies:return X.GMT_GRID;default:return X.GMT_SPECTRAL;}},markerToShape:function H(s){switch(s){case h.DssGraphMarkerShapeCircle:return i._CIRCLE;case h.DssGraphMarkerShapeRectangle:case h.DssGraphMarkerShapeSquare:return i._SQUARE;case h.DssGraphMarkerShape2DPie:case h.DssGraphMarkerShape2DRingPie:return i._PIE;case h.DssGraphMarkerShapeGMTick:return i._TICKER;default:return i._GENERIC;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.HSLColor=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.HSLColor",h:0,s:0,l:0});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var E=0;mstrmojo.chart.common.FractionNumber=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.common.FractionNumber",mDenominator:0,mNumerator:0,init:function D(F){},Copy:function B(F){this.mDenominator=F.mDenominator;this.mNumerator=F.mNumerator;},ToDouble:function A(){if(this.mDenominator===0){if(this.mNumerator>=0){return Number.POSITIVE_INFINITY;}return Number.NEGATIVE_INFINITY;}return(this.mNumerator)/this.mDenominator;},ToString:function C(L,G,K){if(this.mDenominator===0){L=false;}var J="",I=this.mNumerator,F=false;if(L){var H=parseInt(this.mNumerator/this.mDenominator);I=this.mNumerator%this.mDenominator;K=K||(I!==0);if(H>0){F=true;J=H.toString();if(K){J+=" ";}}}if(!K&&!F&&I===0){J="0";}else{if(!K&&F&&I===0){E++;}else{J+=I.toString();J+="/";J+=this.mDenominator.toString();}}if(!G){J="-"+J;}return J;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.GraphAxisGeneral=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GraphAxisGeneral",mAxisLabelsLocation:-1,mAxisDrawInReverse:false,mShowAxisLine:true,mShowAxisLabels:true,mShowAxisTitle:false,mAxisDirection:-1,mUseInterlacedGrids:false,init:function A(B){if(B.AxisLabelsLocation!==undefined){this.mAxisLabelsLocation=B.AxisLabelsLocation;}if(B.AxisDrawInReverse!==undefined){this.mAxisDrawInReverse=B.AxisDrawInReverse;}if(B.ShowAxisLine!==undefined){this.mShowAxisLine=B.ShowAxisLine;}if(B.ShowAxisLabels!==undefined){this.mShowAxisLabels=B.ShowAxisLabels;}if(B.ShowAxisTitle!==undefined){this.mShowAxisTitle=B.ShowAxisTitle;}if(B.AxisDirection!==undefined){this.mAxisDirection=B.AxisDirection;}if(B.UseInterlacedGrids!==undefined){this.mUseInterlacedGrids=B.UseInterlacedGrids;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.model.enums.EnumDSSGraphDataTextPosition","mstrmojo.chart.enums.EnumFontRotation");var D=mstrmojo.chart,G=D.enums,H=G.EnumFontRotation,A=mstrmojo.chart.model,B=A.enums,F=B.EnumDSSGraphDataTextPosition;mstrmojo.chart.LabelInfo=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.LabelInfo",IsPut:false,IsClockWise:false,IsValid:false,SeriesId:0,GroupId:0,HostMarker:null,SuggestedStart:F.DssGraphDTPositionOutMin,LabelRotation:H.FR_NORMAL,Label:null,init:function I(J){this.Label=null;this.HostMarker=null;this._super(J);},IsMoved:function C(J){return(this.SuggestedStart!==J);},ToRectangle:function E(){return this.Label.GetBoundingRect();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.common.DSSTimeUtil=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.common.DSSTimeUtil",DaysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],DaysBeforeMonth:[0,31,59,90,120,151,181,212,243,273,304,334],DateAbove1970:[1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981]});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.ChartCanvas=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.ChartCanvas",chartContext:null});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.enums.EnumNumberCategory");var B=mstrmojo.chart,A=B.enums,F=A.EnumNumberCategory;mstrmojo.chart.ChartAdvFormat=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.ChartAdvFormat",mFormatType:F.General,mDigits:0,mGrouping:3,mCurrency:"$",mPosCurr:0,mNegFormat:3,mCustomFormat:"General",init:function E(I){var H=mstrmojo.hash;if(I&&I.ChartAdvFormat){var G=I.ChartAdvFormat;H.copy(G,this);this.mCurrency=this.mCurrency||"$";this.mCustomFormat=this.mCustomFormat||"General";}},reset:function D(H){var G=mstrmojo.hash;G.copy(H,this);},restore:function C(){this.mFormatType=F.General;this.mDigits=0;this.mGrouping=3;this.mCurrency="$";this.mPosCurr=0;this.mNegFormat=3;this.mCustomFormat="General";}});mstrmojo.chart.dNF=new B.ChartAdvFormat();mstrmojo.chart.dNF.isDefault=true;}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.enums.EnumGraphMatrixDataLabelPosition");var A=mstrmojo.chart.enums.EnumGraphMatrixDataLabelPosition;mstrmojo.chart.GMDataLabelInfo=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GMDataLabelInfo",display:false,isValid:false,SeriesId:0,GroupId:0,HostMarkerBound:null,Label:null,DataLabelLocation:A._BOTTOM,dataLabelLCenterPoints:[],CenterXOffset:0,CenterYOffset:0,dataLabelPosition:[],XIndex:0,YIndex:0,SeriesInfo:0,HostMarkerPoint:null,init:function B(C){this.dataLabelLCenterPoints=[];this.dataLabelPosition=[];this._super(C);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.ImageMap=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.ImageMap",mShape:-1,mObjectID:-1,mSeriesID:-1,mGroupID:-1,mCoordinates:null,mToolTip:"",GetShape:function E(){return this.mShape;},GetObjectID:function D(){return this.mObjectID;},GetSeriesID:function C(){return this.mSeriesID;},GetGroupID:function A(){return this.mGroupID;},GetCoordinates:function B(){return this.mCoordinates;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");var B=0;mstrmojo.chart.FormatBase=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.FormatBase",init:function A(C){}});}());(function(){mstrmojo.requiresCls("mstrmojo.registry");mstrmojo._PagingList=mstrmojo.provide("mstrmojo._PagingList",{usePaging:false,page:0,totalPages:1,_set_page:function(B,A){if(this.page!==A&&this.usePaging){if(A>=0&&A<this.totalPages){this.page=A;}return true;}return false;},_inScroll:false,_inPaging:false,onscroll:function(){if(this.usePaging&&!this._inPaging){this._inScroll=true;this.set("page",this.listMapper.whichPage(this));this._inScroll=false;}if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.string");var D=mstrmojo.string,F=1;mstrmojo.ListBuilder=mstrmojo.provide("mstrmojo.ListBuilder",{newContext:function E(G){var I=G.itemMarkupFunction;if(!I){var H=G.itemMarkup||(G.itemField&&'<div class="mstrmojo-text">{@'+G.itemField+"}</div>");I=H?function(K,J,L){return D.apply(H,K);}:null;}return{itemStatus:[],itemFunc:I};},build:function A(I,H,J,G){H.itemStatus[G]=F;return H.itemFunc(J,G,I);},onadd:function B(I,G,H){if(G){mstrmojo.array.insert(G.itemStatus,H.index,new Array(H.value.length));}},onremove:function C(I,G,H){if(G){G.itemStatus.splice(H.index,H.value.length);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.dom","mstrmojo.ListSelector");var C=mstrmojo.dom,B=C.isIE;mstrmojo.TreeNodeSelector=mstrmojo.provide("mstrmojo.TreeNodeSelector",mstrmojo.mixin({premousedown:function A(E,I,D){var G=(E&&E.tree)||E,H=D&&D.e;if(!H){return false;}var F=G.lastMouseDown;if(F){if((F.e===H)||(B&&((new Date())-F.dt<50))){return false;}}this._super(E,I,D);if(G){if(G.onnodemousedown){G.onnodemousedown(D);}G.lastMouseDown={e:H,dt:new Date()};}return true;}},mstrmojo.hash.copy(mstrmojo.ListSelector)));}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.dnd");var E=mstrmojo.dom;function B(I){return E.contains(this.getMovingHandle(),I.src.node,true,document.body);}mstrmojo._IsMovable=mstrmojo.provide("mstrmojo._IsMovable",{draggable:true,ownAvatar:true,getMovingHandle:function G(){return this.domNode;},getMovingTarget:function H(){return this.domNode;},isDragValid:function A(I){return B.call(this,I)||(this._super&&this._super(I))||false;},ondragstart:function C(J){if(B.call(this,J)){var K=this.getMovingHandle(),I=this.getMovingTarget().style;this._leftPos=parseInt(I.left,10);this._topPos=parseInt(I.top,10);this._hWidth=K.clientWidth;this._hHeight=K.clientHeight;}if(this._super){this._super();}},ondragmove:function F(L){if(B.call(this,L)){var M=L.tgt.pos,J=L.src.pos,K=this.getMovingTarget().style,I=E.windowDim();K.left=this.left=Math.min(Math.max(this._leftPos+M.x-J.x,-this._hWidth+40),I.w-40)+"px";K.top=this.top=Math.min(Math.max(this._topPos+M.y-J.y,-this._hHeight+20),I.h-20)+"px";}if(this._super){this._super();}},ondragend:function D(I){if(B.call(this,I)){delete this._leftPos;delete this._topPos;delete this._hWidth;delete this._hHeight;}if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.registry","mstrmojo.ListBuilder");var H=mstrmojo.hash,E=mstrmojo.registry,G=1;mstrmojo.WidgetListBuilder=mstrmojo.provide("mstrmojo.WidgetListBuilder",mstrmojo.mixin({newContext:function F(J){var K=J.itemFunction;if(!K){var I=J.itemConfig;K=I?function(M,L,N){var O=H.clone(I);O.data=M;O.parent=N;return E.ref(O);}:null;}return{itemStatus:[],itemWidgets:[],itemFunc:K};},build:function A(K,J,N,I){var L=J.itemFunc(N,I,K);if(L){J.itemStatus[I]=G;J.itemWidgets[I]=L;if(L.set){var M=K.selectedIndices;if(M&&M[I]){L.set("selected",true);}}}return L;},onadd:function C(K,I,J){if(I){mstrmojo.array.insert(I.itemWidgets,J.index,new Array(J.value.length));}this._super(K,I,J);},onremove:function D(L,J,K){if(J){var O=J.itemWidgets.splice(K.index,K.value.length),N,I;for(N=0,I=O.length;N<I;N++){var M=O[N];if(M&&M.destroy){delete M.parent;M.destroy();}}}this._super(L,J,K);},onchange:function B(S,J,P,T){if(T){var N=P.itemWidgets,L,O,I,R;for(O=0,I=T.removed,R=I&&I.length;O<R;O++){L=N[I[O]];if(L&&L.set){L.set("selected",false);}}var M,Q,K;for(M=0,Q=T.added,K=Q&&Q.length;M<K;M++){L=N[Q[M]];if(L&&L.set){L.set("selected",true);}}}}},H.copy(mstrmojo.ListBuilder)));}());(function(){var D={};var B="XHRServerTransport";mstrmojo.XHRServerTransport={serverRequest:function A(I,G,F){var E=mstrmojo.all[I],H=D[G]=new mstrmojo.SimpleXHR();$MAPF(true,B,"transportRequest");if(F.params&&!F.params.sessionState&&mstrConfig&&mstrConfig.isAddSessionState&&mstrApp&&mstrApp.sessionState){F.params.sessionState=mstrApp.sessionState;}H.request(F.config.method||"POST",F.taskURL||mstrConfig.taskURL,{success:function(J){if(typeof J==="string"&&J[0]==="{"){try{J=JSON.parse(J);}catch(K){}}if(J.mstrerr){J.code=J.mstrerr.code;J.message=J.mstrerr.message;}E&&E.response(G,true,J);},failure:function(L){var M=L.status,K=L.getResponseHeader("X-MSTR-TaskErrorCode"),J;if(M===0){M=K||M;J=mstrmojo.desc(15666,"The connection to the MicroStrategy Web Server failed. Please wait a few minutes and then attempt to reload the page. If the condition persists, please contact your administrator.");}else{M=K||M||"-999";J=L.getResponseHeader("X-MSTR-TaskFailureMsg")||L.responseText||"Unexpected error, please contact your administrator";}E&&E.response(G,false,{code:M,message:J});},complete:function(){delete D[G];},textResponse:F.callback.textResponse},F.params);},cancelRequest:function C(F){var G=D[F],E=false;if(G){E=G.cancel();delete D[F];}$MAPF(false,B,"transportRequest");return E;}};}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.fx");var d=mstrmojo.css,J=mstrmojo.dom,R=mstrmojo.array,N={v:{styleDim:"height",styleDir:"top",dimension:"h",position:"y",scroll:"scrollTop",scrollDimension:"scrollHeight",cls:"vertical",hostCls:"hasVertical",scrollNodeCls:"hasVertical"},h:{styleDim:"width",styleDir:"left",dimension:"w",position:"x",scroll:"scrollLeft",scrollDimension:"scrollWidth",cls:"horizontal",hostCls:"hasHorizontal",scrollNodeCls:"hasHorizontal"}},b="scrollingMode",U="scrolling",g=3;var O=J.getOSInfo().name.toLowerCase().indexOf("mac")>=0;function M(){return(this.scrollbarHostNode||(this.scrollNode&&this.scrollNode.parentNode));}function V(l,i){var k=this.scrollNode,h=M.call(this),j={v:l,h:i};R.forEach(["v","h"],function(n){var m=N[n];d.toggleClass(h,m.hostCls,j[n]);d.toggleClass(k,m.scrollNodeCls,j[n]);});}function S(i,h){var n=J.eventTarget(h,i),l=this.scrollNode,k=J.position(l),m=this.scrollTrackNodes,j=this.scrollBarNodes,o=function o(w){var u=n===m[w];if(u){var x=N[w],p=j[w],y=J.position(p),r=J.getMousePosition(i,h)[x.position],s=r-y[x.position],q=s>0?1:-1,v=l[x.scrollDimension],z=Math.abs(s-(y.h/2))*(v/k[x.dimension]),t={};t[x.scroll]={isStyle:false,start:l[x.scroll],stop:l[x.scroll]+(q*Math.min(v/3,500,z)),ease:mstrmojo.ease.linear};(new mstrmojo.fx.AnimateProp({props:t,duration:200,interval:10,target:l})).play();}};o.call(this,"h");o.call(this,"v");}function C(i,h){var l=this.scrollNode,k=i.type==="mousewheel",j=k?-1:1;mstrmojo.array.forEach(["h","v"],function(s){var q=N[s],n=k?"wheelDelta":"delta",p=i[n+{h:"X",v:"Y"}[s]]*j,o=Math.abs(p),m=p/o,r=o===3&&J.isFF&&!O;l[q.scroll]+=r?m*40:p;});J.stopPropogation(h,i);J.preventDefault(h,i);}function f(m){var l=N[m],k=this.scrollNode,j=J.position(k),i=j[l.dimension],n=k[l.scrollDimension],h=Math.ceil(i)/n;return A(h,i,n);}function A(i,h,j){return(!isNaN(i)&&i<1)&&(Math.abs(h-j)>g);}function D(AF){var y="px",r=N[AF],l=this.scrollNode,s=M.call(this),AH=J.position(l),t=AH[r.dimension],AA=l[r.scrollDimension],k=Math.ceil(t)/AA,AE=this.scrollBarNodes,p=AE[AF],w=this.scrollTrackNodes,x=w[AF],AC=A(k,t,AA),m=r.cls;if(!p){x=w[AF]=document.createElement("div");var n=this,v=function(AJ){S.call(n,AJ);},q=function(AJ){C.call(n,AJ);},AB=function(AL,AJ,AK){J.attachEvent(AL,AJ,AK);n.installedEventListeners.push({e:AL,evt:AJ,fn:AK});};AB(x,"click",v);x.className="mstrmojo-scrolltrack "+m;p=AE[AF]=document.createElement("div");p.className="mstrmojo-scrollbar "+m;x.appendChild(p);s.appendChild(x);var AD=mstrApp.isSingleTier?"mousewheel":"wheel";AB(x,AD,q);AB(p,AD,q);}var AI=p.style,o=(l[r.scroll]/l[r.scrollDimension]),i=J.delta(l,M.call(this))[r.position],z=x.style;if(AC){z[r.styleDir]=i+y;var j=k*t,u=35,AG=t*o,h=t-35;AI[r.styleDim]=(j<u?u:j)+y;AI[r.styleDir]=(AG>h?h:AG)+y;}return AC;}function I(){return !(mstrApp.isSingleTier&&O);}mstrmojo.ui._HasScroller=mstrmojo.provide("mstrmojo.ui._HasScroller",{_mixinName:"mstrmojo.ui._HasScroller",hasCustomScrollbar:null,draggable:true,ownAvatar:true,scrollNode:undefined,scrollbarHostNode:undefined,scrollBarNodes:undefined,setupScrollNodes:mstrmojo.emptyFn,installedEventListeners:null,init:function X(h){this._super(h);if(this.hasCustomScrollbar===null){this.hasCustomScrollbar=I();}this.installedEventListeners=[];},onRender:function L(){if(this._super){this._super();}this.updateScrollbars();this.addScrollNodeProperties();},addScrollNodeProperties:function G(){var i=this.scrollNode,j=J.isFF&&!O;if(i){var h=J.attachMarkupEvent(this.id,i,"scroll");this.installedEventListeners.push({e:i,evt:"scroll",fn:h});}if(j){d.addClass(i,"firefox-on-windows");}else{if(J.isEdge){d.addClass(i,"ms-edge");}}if(!this.hasCustomScrollbar){d.addClass(M.call(this),"mstrmojo-sb-host-show-default");d.addClass(i,"mstrmojo-sb-show-default");return ;}if(i){d.addClass(M.call(this),"mstrmojo-scrollbar-host");d.addClass(i,"mstrmojo-scrollNode");}},updateScrollbars:function e(){if(!this.hasRendered){return ;}this.setupScrollNodes();var h,j=false;if(!this.hasCustomScrollbar){if(this.scrollNode){h=this.scrollNode.style;h.overflowY=f.call(this,"v")?"scroll":"hidden";h.overflowX=f.call(this,"h")?"scroll":"hidden";}return ;}if(this.scrollNode){this.scrollBarNodes=this.scrollBarNodes||{};this.scrollTrackNodes=this.scrollTrackNodes||{};V.call(this,j,j);h=this.scrollNode.style;var k=D.call(this,"v"),i=D.call(this,"h");h.overflowY=k?"scroll":"hidden";h.overflowX=i?"scroll":"hidden";V.call(this,k,i);}},onscroll:function a(){var o=this.scrollNode;if(o&&this.hasCustomScrollbar){var l=function l(p){var q=parseInt(p);return q===null||isNaN(q)?0:q;},m=J.position(o),n=m.h-l(d.getStyleValue(o,"padding-bottom")),i=m.w-l(d.getStyleValue(o,"padding-right")),k=this.scrollBarNodes,j=k.v,h=k.h;if(o.scrollHeight-n>0){j.style.top=((n-J.position(j).h)*(o.scrollTop/(o.scrollHeight-n)))+"px";}if(o.scrollWidth-i>0){h.style.left=((i-J.position(h).w)*(o.scrollLeft/(o.scrollWidth-i)))+"px";}}if(this._super){this._super();}if(this.onScrollEnd){this.onScrollEnd();}},getDragData:function F(i){var l=this.scrollNode,k=J.position(l),j=i.src.node,h=this.scrollBarNodes;if(this.isDraggingScrollBar(i)){return{isScrollBar:true,direction:j===h.v?"v":"h",scrollTop:l.scrollTop,scrollLeft:l.scrollLeft,conversionRatio:{y:l.scrollHeight/k.h,x:l.scrollWidth/k.w}};}return(this._super&&this._super(i));},isDragValid:function E(h){return this.isDraggingScrollBar(h)||(this._super&&this._super(h))||false;},isDraggingScrollBar:function W(i){var j=i.src.node,h=this.scrollBarNodes;return !!h&&(j===h.v||j===h.h);},ondragstart:function c(h){if(this.isDraggingScrollBar(h)){d.addClass(h.src.node,U);d.addClass(M.call(this),b);}if(this._super){this._super(h);}},shouldDragBubble:function T(h){var i=h.src.node,j=this.scrollTrackNodes;return !(!!j&&(i===j.v||i===j.h));},ondragmove:function Q(i){if(this.isDraggingScrollBar(i)){var q=i.tgt,h=i.src,r=q.pos,j=h.pos,n=h.node,m=this.scrollNode,p=this.scrollBarNodes,o=h.data,l={y:(r.y-j.y),x:(r.x-j.x)},k=o.conversionRatio;if(n===p.v){m.scrollTop=o.scrollTop+(l.y*k.y);}else{m.scrollLeft=o.scrollLeft+(l.x*k.x);}}if(this._super){this._super(i);}},ondragend:function K(h){if(this.isDraggingScrollBar&&this.isDraggingScrollBar(h)){d.toggleClass(h.src.node,U,false);d.toggleClass(M.call(this),b,false);}if(this._super){this._super(h);}},widgetResized:function P(){if(this._super){this._super();}this.updateScrollbars();},unrender:function Y(h){R.forEach(this.installedEventListeners,function(i){J.detachEvent(i.e,i.evt,i.fn);});this.installedEventListeners=[];delete this.scrollNode;delete this.scrollbarHostNode;delete this.scrollBarNodes;delete this.scrollTrackNodes;this._super(h);},getDefaultScrollBarProps:function Z(h){return N[h];},disableScroll:function B(h,k){var j=this.scrollNode,i=M.call(this);R.forEach(["v","h"],function(m){var l=N[m];d.toggleClass(i,l.hostCls,false);d.toggleClass(j,l.scrollNodeCls,false);});if(j){if(k||k===undefined){j.style.overflowY="hidden";}else{if(j.style.overflowY==="hidden"){j.style.overflowY="auto";}}if(h||h===undefined){j.style.overflowX="hidden";}}},enableScroll:function H(){this.updateScrollbars();if(!this.hasCustomScrollbar&&this.scrollNode){this.scrollNode.style.overflowY=f.call(this,"v")?"scroll":"hidden";}},scrollIntoViewIfNeeded:function(k){var p=this.scrollNode,m=k.clientHeight,l=p.clientHeight,i=J.position(k).y,n=J.position(p).y,j=i-n,h=j<0,o=j+m>l;if(h||o){p.scrollTop+=j+m/2-l/2;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.css","mstrmojo.array");var E=mstrmojo.dom,Q=mstrmojo.css,B=mstrmojo.string,I="selected",L="hidden";function P(V,W,X,U,Z){var Y=Z.listHooks[V];if(Y&&Y.call(Z,W,X,U)){return ;}Q.toggleClass(W,I,V==="select");}function G(X,W,V){var Y=this[X],U=Y?Y.split(W):[];this[X]=mstrmojo.array.distinct(U.concat(V.split(W))).join(W);}mstrmojo._IsList=mstrmojo.provide("mstrmojo._IsList",{_mixinName:"mstrmojo._IsList",listHooks:{},useListModKeys:false,init:function N(U){this._super(U);this._shiftStartIndex=-1;},getItemMarkup:function D(V,U){return'<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}" title="{@title}">{@en@n}</{@tag}>';},getItemDisplayName:function M(U){return U.n||"";},getItemProps:function R(Y,U){var V=!!this.selectedIndices[U],Z={tag:"div",sel:V,cls:"",n:this.getItemDisplayName(Y),style:"",idx:U,addCls:function W(b){G.call(this,"cls"," ",b);},addStyle:function X(b){G.call(this,"style",";",b);},title:Y.title||""};if(Z.n&&B.isEmpty(Z.n)){Z.n=B.decodeHtmlString("<br/>");}if(V){Z.addCls(I);}var a=Y.cls;if(a){Z.addCls(a);}if(Y.hid){Z.addCls(L);}return Z;},itemRenderer:{render:function S(V,U,W){V._renderIdx=U;return mstrmojo.string.apply(W.getItemMarkup(V,U),W.getItemProps(V,U));},select:function K(V,W,U,X){P("select",V,W,U,X);},unselect:function H(V,W,U,X){P("unselect",V,W,U,X);}},onclick:function T(U){try{var W=this.getItemFromTarget(U.getTarget());if(W){U.cancel();this.doItemSelect(W,U||{});}}catch(V){mstrApp.onerror(V);}},doItemSelect:function C(j,i){var b=i.hWin,c=i.e,g=j._renderIdx,d=j._positionIdx,V=E.isMetaKey(b,c),a=E.shiftKey(b,c),W=this.multiSelect,Z=this.useListModKeys,h=this._shiftStartIndex,X=this.selectedIndices;if(W&&Z&&a&&h>-1){var U=[],Y=[];this.processContinuousSelection(U,Y,g);this.addSelect(U);this.removeSelect(Y);}else{if(W&&(!Z||V)){var f=(X[g])?"remove":"add";this[f+"Select"](g,false,d);}else{this.singleSelect(g,false,d);}this._shiftStartIndex=g;}},processContinuousSelection:function J(W,V,U){var b=this._shiftStartIndex,a=this.selectedIndices,Z=Math.min(b,U),Y=Math.max(b,U),X;for(X=0;X<this.items.length;X++){if(Z<=X&&X<=Y){if(!a[X]){W.push(X);}}else{if(a[X]){V.push(X);}}}},onclearSelection:function A(){this._shiftStartIndex=-1;},getItemNodeFromTarget:function F(V){var U=E.findAncestorByAttr(V,"idx",true,this.domNode);return(U&&U.node)||null;},getItemFromTarget:function O(W){var V=this.getItemNodeFromTarget(W),U=V&&parseInt(V.getAttribute("idx"),10);if(U!==null&&!isNaN(U)&&this.items){return this.items[U];}return undefined;}});mstrmojo._IsList.SELECTED_CLS=I;mstrmojo._IsList.HIDDEN_CLS=L;}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.string","mstrmojo.css");var K=mstrmojo.css,N=mstrmojo.string,H=mstrmojo.dom,L=13,C=27;function I(T){if(this._editComplete){return ;}var X,R=false,W=this.text,U=false;if(T===C){X=W;U=true;R=true;}if((!T&&T!==0)||(!this.allowNewLine&&T===L)){var S=this[this.editableSlot],V=S.innerText||S.textContent||"";if(!this.allowNewLine){X=V.replace(/\n/g,"");}else{X=V;}R=true;if(!this.allowEmptyText&&X.length===0){X=W;U=true;}}if(R){this._editComplete=true;X=X.replace(/\u00A0/g,"\u0020");this.text=X;this.set("isEditing",false);this.onTextEditComplete(X!==W,W);delete this._editComplete;}if(U){this.refresh();}}function E(R){var S={dblclick:"editOnDoubleClick",click:"editOnClick"};if(this[S[R.name]]||(R.name==="click"&&this.editOnTwoClicks)&&R.getTarget()===this[this.editableSlot]){this.set("isEditing",true);}}function F(T,S,R){if(typeof S["on"+R]!=="function"){H.attachMarkupEvent(T,S,R);}}mstrmojo._HasEditableText=mstrmojo.provide("mstrmojo._HasEditableText",{_mixinName:"mstrmojo._HasEditableText",editableSlot:"domNode",editButtonSlot:null,isEditing:false,editOnClick:true,editOnTwoClicks:false,firstClickTime:undefined,allowEmptyText:false,allowTrimming:true,allowNewLine:false,editOnDoubleClick:false,onTextEditBegin:mstrmojo.emptyFn,onTextEditComplete:mstrmojo.emptyFn,postBuildRendering:function A(){this._super();var T=this.editableSlot,R=this[T],U=this[this.editButtonSlot||T];K.addClass(R,"hasEditableText");this.text=this.text||R.innerText||R.textContent||"";R.innerHTML=this.getEditableTextInnerHTML();var S=this.id;if(this.editOnClick||this.editOnTwoClicks){F(S,U,"click");}F(S,U,"dblclick");F(S,R,"blur");F(S,R,"keyup");F(S,R,"keydown");},getEditableTextInnerHTML:function Q(){return N.encodeHtmlString(this.text,true).replace(/ (?= )/g,"&nbsp;");},onclick:function P(R){if(this.editOnClick){E.call(this,R);}if(this._super){this._super(R);}},onTwoClicks:function(R){if(this.editOnTwoClicks){E.call(this,R);}if(this._super){this._super(R);}},ondblclick:function G(R){E.call(this,R);},onblur:function M(){I.call(this);},onkeyup:function B(S){var R=window.event||S.e;I.call(this,R.keyCode);},onkeydown:function J(S){var R=window.event||S.e;if(R.keyCode===L){I.call(this,R.keyCode);S.cancel();}},_set_text:function D(T,R){var S=this.text;this.text=R;if(this.hasRendered){this[this.editableSlot].innerHTML=N.encodeHtmlString(R||"",true);}return(S!==R);},onisEditingChange:function O(){if(this.hasRendered){var R=this[this.editableSlot],S=!!this.isEditing;R.contentEditable=S;R.spellcheck=false;K.toggleClass(R,"editable",S);if(S){R.focus();H.setElementSelection(R);this.onTextEditBegin();}else{R.blur();R.scrollLeft=0;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo._HasPopup","mstrmojo.hash","mstrmojo.css");var F=mstrmojo.hash,C=mstrmojo.css;var D="open";function E(G){return G?G.popupConfig.hostElement:null;}mstrmojo.ui.menus._HasMenuPopup=mstrmojo.provide("mstrmojo.ui.menus._HasMenuPopup",F.copy(mstrmojo._HasPopup));mstrmojo.ui.menus._HasMenuPopup.openPopup=function A(I,G){var H=this._lastOpened;if(H){this.closePopup();}mstrmojo._HasPopup.openPopup.call(this,I,G);C.addClass(E(I),D);};mstrmojo.ui.menus._HasMenuPopup.closePopup=function B(){C.removeClass(E(this._lastOpened),D);mstrmojo._HasPopup.closePopup.call(this);};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.css");var A=1,K="mstrmojo-itemwrap",J="&nbsp;",I=mstrmojo.array;function B(V){if(!V.pageSize||V.pageSize<=0){var W=V.scrollboxNode;V.pageSize=W&&W.clientHeight||0;}return V.pageSize;}function T(V,W){if(V.usePaging){V.totalPages=1;var Y=V.itemsContainerNode,X=B(V);if(V.usePaging&&Y&&X){V.totalPages=Math.ceil((Y.clientHeight-parseInt(Y.style&&Y.style.paddingBottom||0,10))/X);}if(Y){V.itemsContainerNode.style.paddingBottom=X+"px";}}}mstrmojo.ListMapper=mstrmojo.provide("mstrmojo.ListMapper",{markupPrefix:"",markupSuffix:"",itemWrapperPrefix:function(V){return'<div class="'+this.getWrapperCss(V)+'">';},itemWrapperSuffix:"</div>",itemWrapperPrefill:"&nbsp",wrapperNodes:function C(V){return V.childNodes;},wrapperParentNode:function D(V){return V;},createWrapperNode:function G(V){var W=V.ownerDocument,X=W.createElement("div");return X;},findScrollRange:function N(k,Z,j,n,W,c,o,m){if(!Z){return{start:0,end:0};}var e=this.wrapperNodes(k),g=parseInt(Z/2,10),Y=parseInt(Math.log(Z)/Math.log(2),10),X=0,V=Z-1,f=j+n,d=e[0].offsetTop,b;for(var l=1;l<=Y;l++){b=e[g].offsetTop-d+m;if(b<j){X=g;}else{if(b>f){V=g;}}var a=Math.round(Z/Math.pow(2,l+1));g+=(b>j)?-a:a;g=Math.min(Math.max(0,g),Z-1);}return{start:X,end:V};},findWrapper:function L(X,V){var W=this.wrapperNodes(X);return W&&W[V];},findIndex:function F(V,Y,X){var W=this._nd2iw(V,Y,X);return W?this._iw2idx(V,Y,W):-1;},itemOffsetTop:function U(W,a,V,Y){if(!Y){var X=this.wrapperNodes(a);Y=X&&X[V];if(!Y){return 0;}}var Z=a.firstChild;if(!Z||(Z===Y)){return 0;}else{return Y.offsetTop-Z.offsetTop;}},whereDrop:function S(c,V,X,b,W){var Y=this._nd2iw(c,V,X),d,a,e;if(Y){a=this._iw2idx(c,V,Y);d=a;e=this.itemOffsetTop(c,V,null,Y);var Z=Y.offsetHeight;if(b.y>W.top+e+Z/2){d++;e+=Z;}}else{return c.dropCuePos;}return{left:0,top:e,idx:d,idxActual:a};},getWrapperCss:function(V){return K;},postBuildRendering:function(Z,Y,X,W,V){T(W,this);},buildItemWrappers:function P(e,b,h,d,a,i){var l=this.itemWrapperPrefix(h),g=this.itemWrapperSuffix,Z=l+this.itemWrapperPrefill+g,Y=[this.markupPrefix],W=1,V=h.selectedIndices||{},n=function m(k,j){for(var o=k;o<j;o++){Y[W++]=l;var p=b.build(h,d,e[o],o);if(V[o]){p=p.replace(/class\=\"([^\"]*)\"/,'class="$1 selected"');}Y[W++]=p;Y[W++]=g;}};var c=(e&&e.length)||0;a=a&&b?Math.min(a,c):0;if(a){n(0,a);}i=i&&b?Math.min(i,c-a):0;var f=c-i;for(var X=a;X<f;X++){Y[W++]=Z;}if(i){n(f,c);}Y.push(this.markupSuffix);return Y;},fillItemWrappers:function H(X,g,d,m,f,W,b,l){var e=(g&&g.length)||0,j=this.wrapperNodes(X),n=f.itemStatus,V=mstrmojo.css,Z=m.selectedIndices||{};for(var c=W,h=Math.min(b+1,e),a=0;c<h;c++){if(n[c]!==A){j[c].innerHTML=d.build(m,f,g[c],c);if(Z[c]){var Y=j[c].firstChild;if(Y){V.addClass(Y,["selected"]);}}a++;if(a===l){break;}}}return a;},onadd:function O(e,V,Z,f){if(V&&f){var a=f.value.length,b=this.wrapperNodes(V),d=b[f.index],Y=this.getWrapperCss(e);for(var X=0;X<a;X++){var W=this.createWrapperNode(V);W.className=Y;W.innerHTML=J;if(d){this.wrapperParentNode(V).insertBefore(W,d);}else{this.wrapperParentNode(V).appendChild(W);}}T(e,this);}},onremove:function Q(Y,b,V,X){if(b&&X){var a=this.wrapperNodes(b);if(a){var d=X.value.length;for(var Z=X.index+d-1,W=X.index;Z>=W;Z--){this.wrapperParentNode(b).removeChild(a[Z]);}}T(Y,this);}},onchange:function R(g,X,c,k){if(X&&k){var d=this.wrapperNodes(X);if(d){var W=mstrmojo.css,l=c.itemStatus,h;for(var b=0,V=k.removed,f=V&&V.length;b<f;b++){h=V[b];if(l[h]){W.removeClass(d[h].firstChild,["selected"]);}}for(var Z=0,e=k.added,Y=e&&e.length;Z<Y;Z++){h=e[Z];if(l[h]){W.addClass(d[h].firstChild,["selected"]);}}}}},_nd2iw:function E(W,Z,Y){Z=this.wrapperParentNode(Z);if(Z&&Y&&Z!==Y){var V=W.domNode,X=Y.parentNode;while(X){if(X===Z){return Y;}if(X===V){break;}Y=X;X=Y.parentNode;}}return null;},_iw2idx:function M(X,b,a){var W=X.items&&X.items.length,Y=this.wrapperNodes(b),V=I.findBin(Y,a,"offsetTop",W);for(var Z=V;Z<W;Z++){if(Y[Z].offsetHeight){return Z;}}return -1;},toPage:function(V,X){var W=V.scrollboxNode;if(V.usePaging&&W){W.scrollTop=X*B(V);}else{mstrmojo.alert("paging is not setup, can not perform paging.");}},whichPage:function(V){var W=V.scrollboxNode,X=B(V);return Math.round((W&&X&&W.scrollTop/X)||0);},toItem:function(Z,a){var X=Z&&Z.itemsContainerNode,e=Z.scrollboxNode,V=this.itemOffsetTop(Z,X,a),b=this.wrapperNodes(X)[a].clientHeight,W=e.clientHeight,d=e.scrollTop,Y=d;if(V<d){Y=V;}else{if(d+W-b<V){Y=Math.min(V,V-W+b);}}e.scrollTop=Y;}});})();(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.num","mstrmojo.color","mstrmojo.hash","mstrmojo.array");var AH=mstrmojo.color,Z=mstrmojo.hash,BT=mstrmojo.array,BO=mstrmojo.css,k=mstrmojo.num;var BR=1,At=2,Av=3,BA=4,Ab=5,Ac=6;var Bb="FormattingFont",L="FormattingAppearance",b="FormattingAlignment",Ai="FormattingSize",U="FormattingPatterns",I="FormattingBorder",A9="FormattingOrder",H="FormattingView",S="FormattingSelector",Ax="Template Formatting",P="FormattingPadding",Ar="AnalyticalEngineProperties",A1="RWDocumentProperties",BJ="FormattingPage",R="Mobile",X="VLDB Select",AB="FormattingNumber",AW="RWDExecution";var Aq=1;var n="n",Q="h",BU="w",AF="wm",BG="pw",a="ml",BH="mr",x="upwalw",u="ff",Al="fsz",BM="fw",AG="fit",BN="fun",s="fst",w="fc",Y="alh",v="alv",Af="atw",AN="atd",g="textOverflow",Ap="bc",E="bgs",K="btc",Ao="brc",AY="bbc",t="blc",p="bts",BW="brs",BB="bbs",Ae="bls",AT="borderColor",A7="borderStyle",i="zIndex",AV="showTitleBar",o="title",A5="ctrlStyle",z="ctrlOrientation",A4="ctrlOrientationBehavior",m="ctrlMultiselect",j="ctrlAutoSearchEnabled",C="ciwm",BI="cmcy",A6="sec",r="easow",AM="layoutXml",M="lockAspectRatio",An="ism",l="shw",A8="mg",BV="lhv",d="gridVPadding",Ak="gridHPadding",Aj="ln",AL="sar",B="hnv",Ah="iw",Ad="ih",AP="tsp",AZ="visible",V="rf",Ba="jad",As="jdc",AI="ode",BC="fs",BF="ssc",h="sstyle",AE="hgl",Au="nct",A3="ncp",e="ncs",BK="ndp",G="nfs",D="nnn",BQ="nth",BZ="gi",Az="stfurh",c="stfuch",BX="stfuva",N="olm",BL="gdc",BY="gda",AU="layoutstyle";function T(Bc){return Bc;}function AR(Bc){return parseInt(Bc,10);}var AD={name:"encode",_def:T};AD[Av]=function(Bc){return Bc?1:0;};AD[At]=function(Bc){if(Bc==="transparent"){return -1;}if(Bc.length===4){Bc=Bc.replace(/([0-9a-f])/ig,"$1$1");}Bc=AH.rgbStr2hex(Bc);return parseInt(Bc.substring(5)+Bc.substring(3,5)+Bc.substring(1,3),16);};AD[BA]=AR;AD[BR]=function(Bc){if(typeof Bc==="number"){return k.toLocaleString(Bc);}return T(Bc);};AD[Ac]=function(Be){if(Be==="none"){return 0;}var Bd=Be.match(/([0-9]+[,\.]?[0-9]*pt)/)[0],Bc=Be.match(/pt ([\w\W]*)/)[1];if(Bd==="2pt"){return 5;}switch(Bc){case"solid":return 1;case"dashed":return 3;case"dotted":return 4;default:throw new Error("Invalid border style value in FormatModel::encodeValue.");}};var BS={name:"decode",_def:T};BS[Av]=function(Bc){return parseInt(Bc,10)===1;};BS[At]=function(Bc){if(Bc===-1){return"transparent";}if(typeof Bc==="number"){return AH.decodeColor(Bc);}if(Bc.length===4){return Bc.replace(/([0-9a-f])/ig,"$1$1");}return AH.rgbStr2hex(Bc);};BS[BA]=AR;BS[Ac]=function(Be){if(Be===undefined||Be===0){return"none";}var Bd="1pt",Bc="solid";if(Be===5){Bd="2pt";}if(Be===3){Bc="dashed";}else{if(Be===4){Bc="dotted";}}return Bd+" "+Bc;};function BD(){return this.pn.toLowerCase();}function AO(Bc,Be,Bf){var Bd=document.createElement("div");Bd.style[Bf||Be]=Bc[Be];return Bd;}function J(Bc){return function(){return AH.rgbStr2hex(Bc.apply(this,arguments));};}function Am(){var Bc=BD.call(this);return Bc==="underline"?Bc:"line-through";}var A0={name:"extract"},W=A0._def=function(Bc,Be,Bf){var Bd=AO(Bc,Be||this.getFormatBlockName(),Bf);return Bd.style[this.getCssName()];};A0[At]=J(W);function y(Bc){return W.call(this,Bc,this.getFormatBlockName())===BD.call(this);}function A(Bc){var Bd=W.call(this,Bc,this.getFormatBlockName(),this.getCssName());return Bd.indexOf(Am.call(this))>-1;}function Ay(Bc){var Bd=this.getFormatBlockName();return AH.rgbStr2hex(W.call(this,Bc,Bd,Bd+this.pn));}var BP={name:"resolve"},f=BP._def=function(Bc,Bf,Be,Bg){Be=Be||this.getFormatBlockName();var Bd=AO(Bc,Be);Bd.style[Bg||this.getCssName()]=Bf;return Bd.style[BO.convertCssToCamelCase(Be)];};BP[At]=function(Bc,Be,Bd,Bf){if(Be.or!==undefined){return Be;}return AH.rgbStr2hex(f.call(this,Bc,Be,Bd,Bf));};function AX(Bc,Bd){return f.call(this,Bc,Bd?BD.call(this):"normal");}function AS(Bd,Bf){var Be=(Bd[this.getFormatBlockName()]||"").split(" "),Bc=Am.call(this);if(Bf){if(Be.indexOf(Bc)===-1){Be.push(Bc);}}else{Be=Be.filter(function(Bg){return Bg!==Bc;});}return f.call(this,Bd,Be.join(" "));}var Ag={name:"update"},BE=Ag._def=function(Bc,Bd){Bc[this.getFormatBlockName()]=this.resolve(Bc,Bd);return Bc;};var AQ={};AQ[n]={ps:L,pn:"Name",pt:BR};AQ[Q]={ps:Ai,pn:"Height",pt:BR};AQ[BU]={ps:Ai,pn:"Width",pt:BR};AQ[AF]={ps:Ai,pn:"WidthMode",pt:BA};AQ[BG]={ps:BJ,pn:"PageWidth",pt:BR};AQ[a]={ps:BJ,pn:"MarginLeft",pt:BR,fn:"margin-left"};AQ[BH]={ps:BJ,pn:"MarginRight",pt:BR,fn:"margin-right"};AQ[x]={ps:BJ,pn:"UsePageWidthAsLayoutWidth",pt:Av};AQ[u]={ps:Bb,pn:"Name",pt:BR,fn:"font",cn:"fontFamily",extract:function(){return W.apply(this,arguments).replace(/['"]/g,"");},resolve:function(Bc,Be){var Bd=AO(Bc,"font");Bd.style.fontFamily="'"+Be+"'";return Bd.style.font;}};AQ[Al]={ps:Bb,pn:"Size",pt:BA,fn:"font",cn:"fontSize"};AQ[BM]={ps:Bb,pn:"Bold",pt:Av,fn:"font",cn:"fontWeight",extract:y,resolve:AX};AQ[AG]={ps:Bb,pn:"Italic",pt:Av,fn:"font",cn:"fontStyle",extract:y,resolve:AX};AQ[BN]={ps:Bb,pn:"Underline",pt:Av,fn:"text-decoration",extract:A,resolve:AS};AQ[s]={ps:Bb,pn:"Strikeout",pt:Av,fn:"text-decoration",extract:A,resolve:AS};AQ[w]={ps:Bb,pn:"Color",pt:At};AQ[Y]={ps:b,pn:"Horizontal",pt:BA,fn:"text-align"};AQ[Af]={ps:b,pn:"TextWrap",pt:Av,fn:"white-space"};AQ[AN]={ps:b,pn:"TextDirection",pt:BA};AQ[v]={ps:b,pn:"Vertical",pt:BA};AQ[g]={ps:Ai,pn:"TextOverflow",pt:Av};AQ[Ap]={ps:U,pn:"FillColor",pt:At,x:Aq,fn:"background-color",update:function(Bc,Be){var Bd=Bc.fx;if(Be.or!==undefined){if(!Bd){Bd=Bc.fx={};}var Bf=Bd.gd=Bd.gd||{};Bf.ec=Be.c2;Bf.sc=Be.c1;Bf.t=Be.or;delete Bc[this.getFormatBlockName()];Bc.fx=Bd;}else{if(Bd){delete Bd.gd;}BE.call(this,Bc,Be);}return Bc;}};AQ[E]={ps:U,pn:"FillStyle",pt:BA};AQ[BF]={ps:U,pn:"SelectorSelectionColor",pt:At};AQ[h]={ps:U,pn:"SelectorSelectionFillStyle",pt:BA};AQ[K]={ps:I,pn:"TopColor",pt:At,fn:"border",extract:Ay};AQ[Ao]={ps:I,pn:"RightColor",pt:At,fn:"border",extract:Ay};AQ[AY]={ps:I,pn:"BottomColor",pt:At,fn:"border",extract:Ay};AQ[t]={ps:I,pn:"LeftColor",pt:At,fn:"border",extract:Ay};AQ[AT]={ps:I,pn:["TopColor","RightColor","BottomColor","LeftColor"],pt:At,fn:"border",extract:Ay,resolve:J(function(Bc,Be){var Bf=this.getFormatBlockName(),Bd=f.call(this,Bc,Be,Bf,Bf+"Color"),Bg=Bd.indexOf("rgb");if(Bg>-1){Bd=Bd.slice(0,Bg)+AH.rgbStr2hex(Bd.slice(Bg));}return Bd;})};AQ[A7]={ps:I,pn:["TopStyle","RightStyle","BottomStyle","LeftStyle"],pt:Ac,fn:"border",extract:Ay,resolve:function(Bc,Bf){var Bd=Bf.split(" "),Bg=this.getFormatBlockName();if(!Bc[Bg]){Bc[Bg]="transparent";}Bc[Bg]=f.call(this,Bc,Bd[0],Bg,Bg+"Width");var Be=f.call(this,Bc,Bd[1]||"none",Bg,Bg+"Style"),Bh=Be.indexOf("rgb");if(Bh>-1){Be=Be.slice(0,Bh)+AH.rgbStr2hex(Be.slice(Bh));}return Be;}};AQ[p]={ps:I,pn:"TopStyle",pt:Ac,fn:"border",extract:Ay};AQ[BW]={ps:I,pn:"RightStyle",pt:Ac,fn:"border"};AQ[BB]={ps:I,pn:"BottomStyle",pt:Ac,fn:"border",extract:Ay};AQ[Ae]={ps:I,pn:"LeftStyle",pt:Ac,fn:"border",extract:Ay};AQ[i]={ps:A9,pn:"ZIndex",pt:BA,fn:"z-index"};AQ[AV]={ps:H,pn:"ShowTitleBar",pt:Av};AQ[o]={ps:H,pn:"Title",pt:BR};AQ[A5]={ps:S,pn:"Style",pt:BA};AQ[z]={ps:S,pn:"Orientation",pt:BA};AQ[A4]={ps:S,pn:"OrientationBehavior",pt:BA};AQ[m]={ps:S,pn:"Multiselect",pt:Av};AQ[j]={ps:S,pn:"AutoSearchEnabled",pt:Av};AQ[C]={ps:S,pn:"ItemWidthMode",pt:BA};AQ[BI]={ps:S,pn:"MetricConditionType",pt:BA};AQ[A6]={ps:S,pn:"ShowElementCount",pt:BA};AQ[r]={ps:S,pn:"ExportAsShownOnWeb",pt:BA};AQ[AM]={ps:Ai,pn:"LayoutXML",pt:Ab};AQ[M]={ps:Ai,pn:"LockAspectRatio",pt:Av};AQ[An]={ps:Ai,pn:"ImageSizeMode",pt:BA};AQ[Ad]={ps:Ai,pn:"ImageHeight",pt:BR};AQ[Ah]={ps:Ai,pn:"ImageWidth",pt:BR};AQ[AP]={ps:A1,pn:"layoutBarPosition",pt:BR};AQ[BC]={ps:A1,pn:"ExecutionFullScreenMode",pt:Av};AQ[AU]={ps:A1,pn:"LayoutStyle",pt:BA};AQ[AZ]={ps:L,pn:"Visible",pt:Av};AQ[Aj]={ps:Ax,pn:"LongNames",pt:BR};AQ[N]={ps:Ax,pn:"Indented",pt:BA};AQ[AL]={ps:Ar,pn:"ShowAllRows",pt:BR};AQ[B]={ps:Ar,pn:"HideNullZeroValues",pt:BR};AQ[Ak]={ps:P,pn:["LeftPadding","RightPadding"],pt:BR};AQ[d]={ps:P,pn:["TopPadding","BottomPadding"],pt:BR};AQ.rowsshw={ps:Ax,pn:"ShowRowHeaders",pt:BR};AQ.rowsmg={ps:Ax,pn:"MergeCells",pt:BR};AQ.rowslhv={ps:Ax,pn:"LockRowHeaders",pt:BR};AQ.colsshw={ps:Ax,pn:"ShowColumnHeaders",pt:BR};AQ.colsmg={ps:Ax,pn:"MergeColumnCells",pt:BR};AQ.colslhv={ps:Ax,pn:"LockColumnHeaders",pt:BR};AQ[Az]={ps:Ax,pn:"SubtotalFormatUseRowHeaders",pt:BR};AQ[c]={ps:Ax,pn:"SubtotalFormatUseColumnHeaders",pt:BR};AQ[BX]={ps:Ax,pn:"SubtotalFormatUseValues",pt:BR};AQ[V]={ps:R,pn:"RefreshFrequency",pt:BA};AQ[Ba]={ps:X,pn:"Join Across Datasets",pt:BA};AQ[As]={ps:X,pn:"MCE Join To Get Data Combination",pt:BA};AQ[AI]={ps:AW,pn:"OnDemandEvaluation",pt:BA};AQ[AE]={ps:L,pn:"Highlight",pt:BA};AQ[Au]={ps:AB,pn:"Category",pt:BA};AQ[G]={ps:AB,pn:"Format",pt:BR};AQ[e]={ps:AB,pn:"CurrencySymbol",pt:BR};AQ[BK]={ps:AB,pn:"DecimalPlaces",pt:BA};AQ[A3]={ps:AB,pn:"CurrencyPosition",pt:BA};AQ[D]={ps:AB,pn:"NegativeNumbers",pt:BA};AQ[BQ]={ps:AB,pn:"ThousandSeparator",pt:BA};AQ[BZ]={ps:L,pn:"GroupInfo",pt:BR};AQ[BL]={ps:U,pn:"GradientColor",pt:At};AQ[BY]={ps:U,pn:"GradientAngle",pt:BA};BT.forEach(Z.keyarray(AQ),function(Bc){var Bd=AQ[Bc];Bd.getFormatBlockName=function(){var Bf=this.fn;if(!Bf){var Be=this.pn;Bf=Be.charAt(0).toLowerCase()+Be.substr(1);}return Bf;};Bd.getCssName=function(){var Be=this.getFormatBlockName.call(this),Bf=this.cn;if(!Bf){Bf=BO.convertCssToCamelCase(Be);}return Bf;};BT.forEach([AD,BS,A0,BP,Ag],function(Be){var Bf=Be.name;Bd[Bf]=Bd[Bf]||Be[Bd.pt]||Be._def;});});function A2(Bf,Be,Bc){var Bd=Bc[Bf.ps]=Bc[Bf.ps]||{};Be=Bf.encode(Be);BT.forEach([].concat(Bf.pn),function(Bg){Bd[Bg]=Be;});return Bc;}function AK(Bi,Bh,Bc){var Bg=Bi.x;if(Bg){if((Bg&Aq)>0){var Bf=!!Bh.c1,Be=0;if(Bf){A2(Bi,Bh.c1,Bc);var Bd=Bc[U];Bd.GradientColor=Bi.encode(Bh.c2);Bd.GradientAngle=Bh.or?0:90;Bd.GradientXOffset=0;Bd.GradientYOffset=0;Be=2;}else{if(Bi.encode(Bh)===-1){Be=1;}else{A2(Bi,Bh,Bc);}}return A2(AQ[E],Be,Bc);}}return null;}mstrmojo.models.FormatModel={getFormatUpdate:function Aa(Bd,Bg,Bc){var Bf=AQ[Bd];if(!Bf){throw new Error("Invalid property "+Bd+" in FormatModel::getFormatUpdate.");}Bc=Bc||{};var Be=AK.call(this,Bf,Bg,Bc);if(Be){return Be;}return A2(Bf,Bg,Bc);},getFormatPropertyInfo:function q(Bc){return AQ[Bc];},getValueFromUpdate:function O(Bd,Be){var Bg=AQ[Bd],Bc=null;try{Bc=Be[Bg.ps][Bg.pn];}catch(Bf){}return Bc;},getGradientValues:function AJ(Bd){var Bc=Bd.fx&&Bd.fx.gd;if(Bc){var Bf={c1:Bc.sc,c2:Bc.ec,or:Bc.t};return Bf;}if(Bd[E]===2){if(!!Bd.bc.c1){return Bd.bc;}var Be={c1:Bd.bc,c2:Bd.gdc,or:Bd.gda===90?0:1};return Be;}return null;},decodeGradientValue:function F(Bc){if(Bc&&Bc.c1){Bc.c1=this.decodeValue(BL,Bc.c1);Bc.c2=this.decodeValue(BL,Bc.c2);return Bc;}return null;},decodeValue:function AC(Bc,Bd){return AQ[Bc].decode(Bd);},updateFormatBlock:function Aw(Bc,Bd,Be){return AQ[Bd].update(Bc,Be);},getFormatBlockValue:function AA(Bc,Bd){return AQ[Bd].extract(Bc);},GradientType:null,FormatObjectType:null,PROPERTY_INFO_TYPE:null,ENUM_PROPERTY_NAMES:{NAME:n,HEIGHT:Q,WIDTH:BU,WIDTH_MODE:AF,PAGE_WIDTH:BG,MARGIN_LEFT:a,MARGIN_RIGHT:BH,USE_PAGE_WIDTH_AS_LAYOUT_WIDTH:x,FONT_FAMILY:u,FONT_SIZE:Al,FONT_WEIGHT:BM,FONT_STYLE:AG,UNDERLINE:BN,LINE_THROUGH:s,COLOR:w,TEXT_ALIGN:Y,VERTICAL_ALIGN:v,TEXT_WRAP:Af,TEXT_DIRECTION:AN,TEXT_OVERFLOW:g,BACKGROUND_COLOR:Ap,FILL_STYLE:E,GRADIENT_COLOR:BL,GRADIENT_ANGLE:BY,BORDER_TOP_COLOR:K,BORDER_RIGHT_COLOR:Ao,BORDER_BOTTOM_COLOR:AY,BORDER_LEFT_COLOR:t,BORDER_TOP_STYLE:p,BORDER_RIGHT_STYLE:BW,BORDER_BOTTOM_STYLE:BB,BORDER_LEFT_STYLE:Ae,BORDER_COLOR:AT,BORDER_STYLE:A7,Z_INDEX:i,SHOW_TITLE_BAR:AV,TITLE:o,CONTROL_STYLE:A5,CONTROL_ORIENTATION:z,CONTROL_ORIENTATION_BEHAVIOR:A4,CONTROL_MULTISELECT:m,CONTROL_AUTOSEARCH:j,CONTROL_ITEM_WIDTH_MODE:C,CONTROL_METRIC_CONDITION_TYPE:BI,CONTROL_SHOW_ELEMENT_COUNT:A6,CONTROL_EXPORT_AS_SHOWN_ON_WEB:r,LAYOUT_XML:AM,LOCK_ASPECT_RATIO:M,IMAGE_SIZE_MODE:An,SHOW_HEADER:l,MERGE_HEADER:A8,LOCK_HEADER:BV,LONG_NAME:Aj,SHOW_ALL_ROWS:AL,HIDE_NULL:B,IMAGE_WIDTH:Ah,IMAGE_HEIGHT:Ad,VISIBLE:AZ,LAYOUT_TAB_POSITION:AP,GRID_VERTICAL_PADDING:d,GRID_HORIZONTAL_PADDING:Ak,REFRESH:V,JOIN_ACROSS_DATASET:Ba,MCE_JOIN_TO_GET_DATA_COMBINATION:As,ON_DEMAND_EVALUATION:AI,FULL_SCREEN_MODE:BC,SELECTOR_SELECTION_COLOR:BF,SELECTOR_SELECTION_FILL_STYLE:h,VIZ_HIGHLIGHTING:AE,GROUP_INFO:BZ,SUBTOTAL_FORMAT_USE_ROWHEADERS:Az,SUBTOTAL_FORMAT_USE_COLUMNHEADERS:c,SUBTOTAL_FORMAT_USE_VALUES:BX,OUTLINE:N,LAYOUT_STYLE:AU},ENUM_PROPERTY_SETS:{FORMATTING_NUMBER:AB},ENUM_NUMBER_FORMAT_KEYS_OBJ:{CATEGORY:Au,CURRENCY_POSITION:A3,CURRENCY_SYMBOL:e,DECIMAL_PLACES:BK,FORMAT:G,NEGATIVE_NUMBERS:D,THOUSAND_SEPARATOR:BQ}};}());(function(){mstrmojo.requiresCls("mstrmojo.css");var F=mstrmojo.css,E="px",J="hasOwnAvatar",I={x:0,y:0};function B(L){var K=this.createAvatar(L.src.node,L);if(K){F.addClass(K,[this.avatarCssClass,J]);this.avatar=L.avatar=document.body.appendChild(K);}}function C(){var K=this.avatar;if(K){K.parentNode.removeChild(K);delete this.avatar;F.removeClass(K,[this.avatarCssClass,J]);}}mstrmojo._HasOwnAvatar=mstrmojo.provide("mstrmojo._HasOwnAvatar",{_mixinName:"mstrmojo._HasOwnAvatar",draggable:true,ownAvatar:true,avatarCssClass:"",restrictedToAxis:undefined,isDragValid:function H(K){if(this._super){return this._super(K);}return false;},ondragstart:function D(K){B.call(this,K);this.positionAvatar(K.src.pos,K);if(this._super){this._super(K);}},ondragmove:function A(K){this.positionAvatar(K.tgt.pos,K);if(this._super){this._super(K);}},ondragend:function A(K){C.call(this);if(this._super){this._super(K);}},createAvatar:mstrmojo.emptyFn,positionAvatar:function G(O,L){if(this.avatar){var N=this.avatar.style,M=this.restrictedToAxis,K=(L&&L.dragOffsets)||I;if(M!=="y"){N.left=O.x+K.x+E;}if(M!=="x"){N.top=O.y+K.y+E;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.css");var A=mstrmojo.css;mstrmojo.ui._HasUITheme=mstrmojo.provide("mstrmojo.ui._HasUITheme",{_mixinName:"mstrmojo.ui._HasUITheme",themeClassName:"",postBuildRendering:function B(){var D=this.themeClassName;if(D){this.onthemeClassNameChange({value:D});}return this._super();},onthemeClassNameChange:function C(D){var F=this.domNode;if(F){var G=D.value,E=D.valueWas;if(G){A.addClass(F,D.value);}if(E){A.removeClass(F,D.valueWas);}}}});mstrmojo.ui._HasUITheme.EnumThemeNames={LIGHT_THEME:"mojo-theme-light",DARK_THEME:"mojo-theme-dark"};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.num","mstrmojo.locales");var D=mstrmojo.array,A=mstrmojo.num,B=mstrmojo.locales;mstrmojo.vi.util.NumberFormatUtility=mstrmojo.provide("mstrmojo.vi.util.NumberFormatUtility",{applyFormatToNumber:function C(P,Q,G){var H="\u00A4",L=/"[^"]*"/g,F=P.match(L),K=P.replace(L,H),O=["m","y","d","h","s"],N=G||false,E=new Date(),M=E.getFullYear(),J=E.getMonth(),I=E.getDay(),S=B.datetime,R;D.forEach(O,function(T){N=N||K.indexOf(T,0)!==-1;});if(N){K=K.replace(/y{3,}/g,M).replace(/y{1,2}/g,M.toString().slice(2,4));K=K.replace(/m{4,}/g,S.MONTHNAME_FULL[J-1]).replace(/m{3}/g,S.MONTHNAME_SHORT[J-1]).replace(/mm/g,"07").replace(/m/g,"7").replace(/7ber/g,"mber");K=K.replace(/d{4,}/g,S.dayNames[I-1]).replace(/d{3}/g,"Mon").replace(/dd/g,"10").replace(/d/g,"1").replace(/1ay/g,"day");K=K.replace(/hh/g,"08").replace(/h/g,"8");K=K.replace(/ss/g,"04").replace(/s/g,"4");K=K.split(H);R=K[0];D.forEach(F,function(U,T){R+=U+K[T+1];});return R;}if(A.isNumeric(Q)){return A.formatByMask(P,A.parseNumeric(Q));}return Q;}});}());(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.expr","mstrmojo.date","mstrmojo.num","mstrmojo.string");mstrmojo.validation={STATUSCODE:{UNKNOWN:-1,VALID:0,INVALID:1,INVALID_EMPTY:2,INVALID_CHAR:3,INVALID_OUTOFRANGE:4,INVALID_REGEX:5,INVALID_VALIDATOR:6,INVALID_BAD_NUMERICFORMAT:7,INVALID_BAD_DATESTRING:8},TRIGGER:{NONE:0,ONBLUR:1,ONKEYUP:2,VALUESET:4,ALL:7},REGEXP:{US_ZIP:/^\d{5}([\- ]?\d{4})?$/,EMAIL_ADDRESS:/^([a-zA-Z0-9_\.\-])+@(([a-zA-Z0-9\-])+[\.])+([a-zA-Z0-9]{2,4})+$/,SOCIAL_SECURITY_NUMBER:/^((?!000)(?!666)\d{3})(\s|\-)?((?!00)\d{2})\2((?!0000)\d{4})$/,PHONE_NUMBER:/^(?!-)[ \d\-\(\)\.\+]+$/,FILE_NAME:new RegExp('^[^:*?"<>|/\\\\()]+$'),FOLDER_PATH_WIN:new RegExp('^([a-zA-Z]:|\\\\\\\\[^:*?"<>|/\\\\]+|[^:*?"<>|/\\\\]*)(\\\\[^:*?"<>|/\\\\]+)*(\\\\){0,1}$'),FOLDER_PATH_UNIX:new RegExp('^(/){0,1}([^:*?"<>|/\\\\]+/)*([^:*?"<>|/\\\\]+){0,1}$'),PRINTER_PATH_SINGLE:new RegExp('^[^$%:*?"<>|/\\\\]*$'),PRINTER_PATH_MULTIPLE:new RegExp('^((/|\\\\\\\\)[^$%:*?"<>|/\\\\]+)((/|\\\\)[^$%:*?"<>|/\\\\]+)*(/|\\\\){0,1}$')}};var H=mstrmojo.validation,B=H.TRIGGER,b=H.STATUSCODE,A={"-1":-1,1:1,2:1,3:2,4:2,5:2,6:2,7:2,8:3,9:3,10:3,11:4,12:4,13:4,14:6,15:6,16:6,17:3,18:3,21:2,22:2,23:3,24:4,25:3,30:5,34:5};H.VALIDATOR={DEMO:function N(e){var d=parseInt(e,10),f=mstrmojo.validation.STATUSCODE;if(d===0||d===1||d>10){return{code:f.VALID};}return{code:f.INVALID,msg:"This field must be either 0, 1 or greater than 10"};},VALIDATE_PHONENO:function I(d){var e=String(d).replace(/[^\d]/g,"");if(e.length<10){return{code:b.INVALID,msg:mstrmojo.desc(9203,"A telephone number must contain at least 10 digits.")};}if(!H.REGEXP.PHONE_NUMBER.test(d)){return{code:b.INVALID,msg:mstrmojo.desc(9204,"The telephone number contains invalid characters.")};}return{code:b.VALID};},VALIDATE_ZIPCODE:function G(d){var f="",e=this.dtp;if(!H.REGEXP.US_ZIP.test(d)){if(H.isNumeric(e)||H.isInt(e)){f=mstrmojo.desc(9208,"A zip code must be 5 digits or 5+4 digits.");}else{if(H.isString(e)){f=mstrmojo.desc(9206,"The zip code is invalid");}}return{code:b.INVALID,msg:f};}return{code:b.VALID};},VALIDATE_EMAIL:function T(d){var e=d.indexOf("@");if(e===-1){return{code:b.INVALID,msg:mstrmojo.desc(9197,"The email address is missing an at sign (@).")};}if(d.substring(e).indexOf(".")===-1){return{code:b.INVALID,msg:mstrmojo.desc(9198,"The email address is missing a period on the domain.")};}return H.REGEXP.EMAIL_ADDRESS.test(d)?{code:b.VALID}:{code:b.INVALID,msg:mstrmojo.desc(9207,"The email address is invalid.")};},VALIDATE_SSN:function Q(d){var f=this.dtp,e;if(H.isNumeric(f)||H.isInt(f)){e=String(d).replace(/[^\d]/g,"");if(e.length!==9){return{code:b.INVALID,msg:mstrmojo.desc(9209,"A Social Security Number must be 9 digits.")};}}if(!H.REGEXP.SOCIAL_SECURITY_NUMBER.test(d)){return{code:b.INVALID,msg:mstrmojo.desc(9210,"The Social Security Number is invalid.")};}return{code:b.VALID};}};H.isInt=function D(d){return A[d]===1;};H.isNumeric=function Y(d){return A[d]===2||A[d]===5;};H.isString=function J(d){return A[d]===3;};var C=window.mstrConfig,L=C.listSep,S=mstrmojo.expr,M=S.DTP,Z=mstrmojo.num,U=mstrmojo.string,F=mstrmojo.date;function P(k,l){var h=k.dtp,j=k.constraints,n=j.allowedFormatChars||"",g=(A[h]===1),d=H.isNumeric(h),e=(A[h]===6),m=mstrmojo.locales.number.THOUSANDSEPARATOR,f=mstrmojo.locales.number.DECIMALSEPARATOR,i;if(g){if(!k._intRegExp){n+="0-9-"+(k.isList?L:"")+m;k._intRegExp=new RegExp("[^"+n+"]");}i=k._intRegExp;}if(d){if(!k._numericRegExp){n+="0-9-#"+(k.isList?L:"")+f+m;k._numericRegExp=new RegExp("[^"+n+"]");}i=k._numericRegExp;}return !!i&&i.test(l);}function c(k,m){var h=k.dtp,j=k.constraints,g=(A[h]===1),d=H.isNumeric(h),e=(A[h]===6),f=j.min,l=j.max,i;if(f===undefined&&l===undefined){return false;}if(g||d){if(Z.isBigDecimal(m)){return Z.inNumericRange(Z.parseBigDecimal(m),f,l)!==0;}return Z.inNumericRange(m,f,l)!==0;}if(e){return F.inDateTimeRange(m,f,l)!==0;}return false;}function K(e,d){return !Z.isNumeric(d)&&!Z.isBigDecimal(d);}function R(g,e){var f=(g.dtp===M.DATE),d=(g.dtp===M.TIME);return(f?!F.isDate(e):(d?!F.isTime(e):!F.isDateAndOrTime(e)));}mstrmojo._CanValidate=mstrmojo.provide("mstrmojo._CanValidate",{constraints:null,required:false,dtp:M.INTEGER,isList:false,autoFormat:false,validationStatus:null,init:function W(d){this._super(d);if(!this.constraints){this.constraints={};}var e=this.constraints;if(!e.hasOwnProperty("trigger")){e.trigger=B.NONE;}},_set_value:function(i,f){var g=this.value,e=(g!==f);if(e){this.value=f;var h=this.constraints.trigger,d=(h&B.VALUESET)>0;if(d){this.validate(f);}}return e;},validate:function O(){var f=(this.value!==null&&this.value!==undefined)?this.value:"",j=this.isList?f.split(L):[f],h,e,k,d=j.length,g;for(g=0;g<d;g++){h=this.doValidation(j[g]);e=(h.code>b.VALID);if(e){if(d>1){h.msg=mstrmojo.locales.validation.invalidValueInListError.replace("#",j[g]||" ");}break;}}k=e?"onInvalid":"onValid";if(!e&&this.autoFormat){this.format();}this.set("validationStatus",h);if(this[k]){this[k](h);}},format:function X(){var j=this.dtp,f=(A[j]===6);if(!f){return ;}var l=mstrConfig.listSep,o=this.value||"",e=this.isList?o.split(l):[o],n=j===14,m=[],d,g=mstrmojo.locales.datetime,k=e.length,h;for(h=0;h<k;h++){o=e[h];d=F.parseDateAndOrTime(o);if(d){if(n&&d.date){m.push(F.formatDateInfo(d.date,g.DATEOUTPUTFORMAT));}else{m.push((d.date?F.formatDateInfo(d.date,g.DATEOUTPUTFORMAT):"")+" "+(d.time?F.formatTimeInfo(d.time,g.TIMEOUTPUTFORMAT):""));}}}this.set("value",m.join(l));},isValid:function V(){var d=this.validationStatus;if(!d){this.validate();}return this.validationStatus.code===b.VALID;},clearValidation:function a(){this.set("validationStatus",{code:b.VALID});if(this.onClearValidation){this.onClearValidation();}},doValidation:function E(p){var m=this.constraints,n=m.regExp,f=m.validator,d={id:this.id,code:b.VALID,msg:""},l=this.dtp,k=(A[l]===1),e=H.isNumeric(l),g=(A[l]===3),h=(A[l]===6),j=U.isEmpty(p),o=String(p).length,i="",s=mstrmojo.locales.validation;if(this.required&&j){d.code=b.INVALID_EMPTY;d.msg=s.requiredFieldError;return d;}p=U.trim(p);if(!j&&P(this,p)){if(k){i=s.integerDataType;}if(e){i=s.numericDataType;}if(h){i=s.dateDataType;}d.code=b.INVALID_CHAR;d.msg=s.invalidCharError.replace("#",i);return d;}if(!j&&h&&R(this,p)){d.code=b.INVALID_BAD_DATESTRING;d.msg=s.invalidDateStringError;return d;}if(!j&&(e||k)&&K(this,p)){d.code=b.INVALID_BAD_NUMERICFORMAT;d.msg=s.invalidNumericFormatError;return d;}if(!j&&(k||e||h)&&c(this,p)){d.code=b.INVALID_OUTOFRANGE;if(m.min!==null&&m.max!==null){i=s.outofRangeError.replace("# ","").replace("##",Z.toLocaleString(m.min)).replace("###",Z.toLocaleString(m.max));}else{if(m.min!==null){i=s.noLessMinError.replace("##",Z.toLocaleString(m.min)).replace("# ","");}else{if(m.max!==null){i=s.noGreaterMaxError.replace("###",Z.toLocaleString(m.max)).replace("# ","");}}}d.msg=i;return d;}if(g&&m.minLen!==null&&m.maxLen!==null){if(o<m.minLen||o>m.maxLen){d.code=b.INVALID;d.msg=mstrmojo.desc(9211).replace(/#/,m.minLen).replace(/##/,m.maxLen);return d;}}if(n&&!n.test(p)){d.code=b.INVALID_REGEX;d.msg=mstrmojo.desc(9205);return d;}var q=f&&f.apply(this,[p]);if(q){d.code=q.code;d.msg=q.msg;return d;}return d;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.common.DSSTimeUtil");var H=24*60*60*1000;var A=60*60*1000;var L=60*1000;var C=1000;var K=24;var D=24*60;var J=24*60*60;var B=new mstrmojo.chart.common.DSSTimeUtil();mstrmojo.chart.common.DSSDateTime=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.common.DSSDateTime",mnYear:1899,mnMonth:12,mnDay:30,mnHour:0,mnMinute:0,mnSecond:0,mnMillisecond:0,mnWeek:-1,mnDayOfWeek:-1,init:function P(T){if(!T||!T.ifTime){this.mnYear=1899;this.mnMonth=12;this.mnDay=30;this.mnHour=0;this.mnMinute=0;this.mnSecond=0;this.mnMillisecond=0;this.mnWeek=-1;this.mnDayOfWeek=-1;return ;}var S=0;var V=23242571;var R=-693593;if(T.ifTime>V){this.mnYear=65535;this.mnMonth=12;this.mnDay=30;S=T.ifTime-Math.floor(T.ifTime);}else{if(T.ifTime<R){this.mnYear=1;this.mnMonth=1;this.mnDay=1;S=Math.abs(T.ifTime)+Math.ceil(T.ifTime);}else{if(T.ifTime>0){var W=this.DAYSToYMD(Math.floor(T.ifTime));this.mnYear=W.year;this.mnMonth=W.month;this.mnDay=W.day;S=T.ifTime-Math.floor(T.ifTime);}else{if(T.ifTime<0){var W=this.DAYSToYMD(Math.ceil(T.ifTime));this.mnYear=W.year;this.mnMonth=W.month;this.mnDay=W.day;S=Math.abs(T.ifTime)+Math.ceil(T.ifTime);}}}}S*=H;var U=S+0.5;if(U==H){U--;}if(U>0){this.mnHour=Math.floor(U/A);U-=this.mnHour*A;this.mnMinute=Math.floor(U/L);U-=this.mnMinute*L;this.mnSecond=Math.floor(U/C);U-=this.mnSecond*C;this.mnMillisecond=Math.floor(U);}else{this.mnHour=0;this.mnMinute=0;this.mnSecond=0;this.mnMillisecond=0;}this.mnWeek=-1;this.mnDayOfWeek=-1;this.Sanitize();},Sanitize:function O(){var R=false;if(this.mnHour==24&&this.mnMinute==0&&this.mnSecond==0){R=true;this.mnHour=0;}if(this.mnMonth<1){this.mnMonth=1;}else{if(this.mnMonth>12){this.mnMonth=12;}}if(this.mnDay<1){this.mnDay=1;}else{if(this.mnDay>B.DaysInMonth[this.mnMonth-1]){this.mnDay=B.DaysInMonth[this.mnMonth-1];if(this.mnMonth==2&&this.IsLeapYear(this.mnYear)){this.mnDay++;}}}if(this.mnHour<0){this.mnHour=0;}else{if(this.mnHour>23){this.mnHour=23;}}if(this.mnMinute<0){this.mnMinute=0;}else{if(this.mnMinute>59){this.mnMinute=59;}}if(this.mnSecond<0){this.mnSecond=0;}else{if(this.mnSecond>59){this.mnSecond=59;}}if(this.mnMillisecond<0){this.mnMillisecond=0;}else{if(this.mnMillisecond>999){this.mnMillisecond=999;}}if(R){var S=this.ToMilliseconds();S=S+H;this.init({ifTime:this.MillisecondsToDATE(S)});}},IsLeapYear:function Q(R){return((R&3)==0)&&((R%100)!=0||(R%400)==0);},ToMilliseconds:function I(){var R=this.YMDToDAYS(this.mnYear,this.mnMonth,this.mnDay);var S=R*H;S+=this.mnHour*A+this.mnMinute*L+this.mnSecond*C+this.mnMillisecond;return S;},MillisecondsToDATE:function E(S){var R=Math.floor(S/H);var T=(S-R*H)/H;if(T<0){R--;T+=1;}return R>=0?R+T:R-T;},DAYSToYMD:function N(T){var W=0;var Y=0;var S=0;T+=693959;var V=Math.floor(T/365);var U=T-V*365;var X=Math.floor(V/4)-Math.floor(V/100)+Math.floor(V/400);U=U-X;if(U<0){V--;U+=365;while(U<=0){V--;U+=365;}}var R=T-(V*365+Math.floor(V/4)+(V%4?1:0)-Math.floor((V-1)/100)+Math.floor((V-1)/400));if(R==365&&!this.IsLeapYear(V)){W=V+1;Y=1;S=1;return{year:W,month:Y,day:S};}if(R==-1){W=V-1;Y=12;S=31;return{year:W,month:Y,day:S};}W=V;Y=12;while(R<B.DaysBeforeMonth[Y-1]){Y--;}S=R-B.DaysBeforeMonth[Y-1]+1;if(Y>2&&this.IsLeapYear(W)){S--;if(S==0){Y--;S=B.DaysInMonth[Y-1];if(Y==2){S++;}}}return{year:W,month:Y,day:S};},YMDToDAYS:function G(U,T,S){if(T<1||T>12){return 0;}var R=U*365+Math.floor(U/4)+(U%4?1:0)-Math.floor((U-1)/100)+Math.floor((U-1)/400);R+=B.DaysBeforeMonth[T-1];if(T>2&&this.IsLeapYear(U)){R++;}R+=S-1;R-=693959;return R;},ToDATE:function F(){var S=this.YMDToDAYS(this.mnYear,this.mnMonth,this.mnDay);var R=this.mnHour/K+this.mnMinute/D+this.mnSecond/J+this.mnMillisecond/H;if(S>=0){return S+R;}else{return S-R;}},DateTimeOrder:function M(R){if(this.mnYear>R.mnYear){return 1;}else{if(this.mnYear<R.mnYear){return -1;}}if(this.mnMonth>R.mnMonth){return 1;}else{if(this.mnMonth<R.mnMonth){return -1;}}if(this.mnDay>R.mnDay){return 1;}else{if(this.mnDay<R.mnDay){return -1;}}if(this.mnHour>R.mnHour){return 1;}else{if(this.mnHour<R.mnHour){return -1;}}if(this.mnMinute>R.mnMinute){return 1;}else{if(this.mnMinute<R.mnMinute){return -1;}}if(this.mnSecond>R.mnSecond){return 1;}else{if(this.mnSecond<R.mnSecond){return -1;}}if(this.mnMillisecond>R.mnMillisecond){return 1;}else{if(this.mnMillisecond<R.mnMillisecond){return -1;}}return 0;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.HSLColor");var F=mstrmojo.chart,H=0.01;function I(N){if(N<0){N+=1;}if((N-1)>0){N-=1;}return N;}function B(P,O,N){if((N-1/6)<0){return P+(O-P)*6*N;}if((N-0.5)<0){return O;}if((N-2/3)<0){return P+(O-P)*6*(2/3-N);}return P;}mstrmojo.chart.RGBColor=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.RGBColor",mR:0,mG:0,mB:0,init:function M(V,Z){this._super(V);Z=Z||false;if(V!==null){if(V.Color){this.mR=V.Color.mR;this.mG=V.Color.mG;this.mB=V.Color.mB;}else{if(V.R!==undefined&&V.G!==undefined&&V.B!==undefined){this.mR=V.R;this.mG=V.G;this.mB=V.B;}else{if(V.H!==undefined&&V.S!==undefined&&V.L!==undefined){var S=V.H,Y=V.S,O=V.L;var R,T,W,N,U,X;if(Y<H){this.mR=this.mG=this.mB=(O*255);}else{R=0;if((0.5-O)>0){R=O*(1+Y);}else{R=O+Y-(O*Y);}T=2*O-R;W=S/360;N=W+1/3;U=W;X=W-1/3;N=I(N);U=I(U);X=I(X);this.mR=B(T,R,N)*255;this.mG=B(T,R,U)*255;this.mB=B(T,R,X)*255;}}else{if(typeof V==="number"){if(Z){this.mR=V&255;this.mG=(V&65280)>>8;this.mB=(V&16711680)>>16;}else{this.mB=V&255;this.mG=(V&65280)>>8;this.mR=(V&16711680)>>16;}}}}}}},ToInteger:function G(N){N=N||false;if(N){return this.mB+(this.mG<<8)+(this.mR<<16);}return this.mR+(this.mG<<8)+(this.mB<<16);},MakeDarker:function J(N){this.mR*=N;this.mG*=N;this.mB*=N;},Reset:function D(P,O,N){this.mR=P;this.mG=O;this.mB=N;},ResetFromColorValue:function L(O,N){N=N||false;if(N){this.mR=O&255;this.mG=(O&65280)>>8;this.mB=(O&16711680)>>16;}else{this.mB=O&255;this.mG=(O&65280)>>8;this.mR=(O&16711680)>>16;}},ResetFromHSLValue:function K(R){var T=R.H,Y=R.S,O=R.L;var S,U,W,N,V,X;if(Y<H){this.mR=this.mG=this.mB=(O*255);}else{S=0;if((0.5-O)>0){S=O*(1+Y);}else{S=O+Y-(O*Y);}U=2*O-S;W=T/360;N=W+1/3;V=W;X=W-1/3;N=I(N);V=I(V);X=I(X);this.mR=B(U,S,N)*255;this.mG=B(U,S,V)*255;this.mB=B(U,S,X)*255;}},Copy:function E(N){this.mR=N.mR;this.mG=N.mG;this.mB=N.mB;},ToHSL:function A(){var O,R,N,Q,P;O=Math.max(this.mR,this.mG,this.mB);R=Math.min(this.mR,this.mG,this.mB);if(O===R){P=0;}else{if(O===this.mR){if(this.mG>=this.mB){P=60*(this.mG-this.mB)/(O-R);}else{P=60*(this.mG-this.mB)/(O-R)+360;}}else{if(O===this.mG){P=60*(this.mB-this.mR)/(O-R)+120;}else{P=60*(this.mR-this.mG)/(O-R)+240;}}}N=0.5*(O+R)/255;if(O===R){Q=0;}else{if((0.5-N)>0){Q=(O-R)/(O+R);}else{Q=(O-R)/(510-(O+R));}}return new F.HSLColor({h:P,s:Q,l:P});}});var C=mstrmojo.chart.RGBColor;F.gWhite=new C({R:255,G:255,B:255});F.gBlack=new C({R:0,G:0,B:0});F.gLeaderLineColor=new C({R:37,G:108,B:83});F.gStrokeColorForDarkBackground=new C({R:254,G:254,B:254});F.gStrokeColorForLightBackground=new C({R:230,G:230,B:230});F.gColorPalette=[new C({R:62,G:117,B:167}),new C({R:92,G:151,B:70}),new C({R:248,G:215,B:83}),new C({R:23,G:185,B:51}),new C({R:255,G:138,B:14}),new C({R:156,G:57,B:164}),new C({R:144,G:173,B:207}),new C({R:31,G:171,B:242}),new C({R:255,G:255,B:204}),new C({R:255,G:204,B:153}),new C({R:0,G:51,B:0}),new C({R:128,G:0,B:0}),new C({R:49,G:255,B:49}),new C({R:0,G:0,B:255}),new C({R:255,G:128,B:64}),new C({R:99,G:101,B:255}),new C({R:255,G:0,B:0}),new C({R:255,G:255,B:0}),new C({R:0,G:255,B:0}),new C({R:255,G:0,B:255})];F.gLightColorPalette=[new C({R:31,G:119,B:180}),new C({R:214,G:39,B:40}),new C({R:44,G:160,B:44}),new C({R:255,G:127,B:14}),new C({R:148,G:103,B:189}),new C({R:188,G:189,B:34}),new C({R:23,G:190,B:207}),new C({R:127,G:127,B:127}),new C({R:174,G:199,B:232}),new C({R:255,G:152,B:150}),new C({R:152,G:223,B:138}),new C({R:255,G:187,B:120}),new C({R:197,G:189,B:5}),new C({R:219,G:219,B:141}),new C({R:158,G:218,B:229}),new C({R:199,G:199,B:199})];F.gDarkColorPalette=[new C({R:22,G:176,B:255}),new C({R:255,G:55,B:41}),new C({R:4,G:186,B:34}),new C({R:255,G:150,B:14}),new C({R:174,G:121,B:222}),new C({R:204,G:205,B:37}),new C({R:25,G:206,B:224}),new C({R:169,G:169,B:169}),new C({R:179,G:205,B:239}),new C({R:255,G:167,B:150}),new C({R:152,G:223,B:138}),new C({R:255,G:223,B:128}),new C({R:218,G:195,B:236}),new C({R:225,G:224,B:144}),new C({R:161,G:223,B:234}),new C({R:214,G:214,B:214})];}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.JSONUtil","mstrmojo.chart.enums.EnumInstructionName");var D=mstrmojo.chart,H=mstrmojo.chart.enums,K=H.EnumInstructionName,F=D.JSONUtil.prototype;mstrmojo.chart.JSONUnit=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.JSONUnit",mIsAnimated:false,mIsLastFrame:true,mIsFirstPass:true,mIsFirstFrameSet:false,mIsLastFrameSet:false,mInstructionList:[],mCurrentIndex:-1,init:function L(N){this.mInstructionList=[];if(N){this.mIsAnimated=N.mIsAnimated||false;this.mIsLastFrame=N.mIsLastFrame||false;}},AppendToJSONObject:function I(N){N.IsAnimated=this.mIsAnimated?1:0;if(this.mInstructionList.length>0){F.AppendCompoundPointerVectorToJSONObject("InstructionList",this.mInstructionList,N);}},AddInstruction:function J(O,N){if(O===undefined){O=K.JSONInsUndefined;}if(N===undefined){N=null;}++this.mCurrentIndex;if(this.mIsFirstPass){this.mInstructionList.push(new D.JSONInstruction({mInstructionName:O,mpOriginalAddress:N}));}else{this.mInstructionList[this.mCurrentIndex].SetSecondPass();}this.mInstructionList[this.mCurrentIndex].SetLastFrame(this.mIsLastFrame);return this.mInstructionList[this.mCurrentIndex];},SetAnimated:function A(N){this.mIsAnimated=N;},IsAnimated:function M(){return this.mIsAnimated;},IsValid:function E(){if(this.mInstructionList.length===0){return false;}if(this.mIsAnimated){return(this.mIsFirstFrameSet&&this.mIsLastFrameSet);}return true;},SetToFirstFrame:function G(){this.mIsFirstFrameSet=true;this.mIsLastFrame=false;this.mCurrentIndex=-1;if(this.mIsLastFrameSet){this.mIsFirstPass=false;}},SetToLastFrame:function C(){this.mIsLastFrameSet=true;this.mIsLastFrame=true;this.mCurrentIndex=-1;if(this.mIsFirstFrameSet){this.mIsFirstPass=false;}},CalculateFormatIndex:function B(O){var N,P;N=this.mInstructionList.length;for(P=0;P<N;++P){this.mInstructionList[P].CalculateFormatIndex(O);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.TripleId","mstrmojo.chart.model.enums.EnumDSSGraphObject");var F=mstrmojo.chart,A=mstrmojo.chart.model,B=A.enums,G=B.EnumDSSGraphObject,C=F.gNullObjectId;function H(J){return new F.TripleId({ObjectId:J});}mstrmojo.chart.AxisObject=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.AxisObject",mLabelId:-1,mMajorId:-1,mMinorId:-1,mTitleId:-1,mCustomLineId:-1,mCustomLabelId:-1,init:function I(J){this.mLabelId=J.LabelId;this.mMajorId=J.MajorId;this.mMinorId=J.MinorId;this.mTitleId=J.TitleId;this.mCustomLineId=J.CustomLineId;this.mCustomLabelId=J.CustomLabelId;}});var E=mstrmojo.chart.AxisObject;var D=F.gAxisObjects=[];D.push(new E({LabelId:H.call(this,G.DssGraph2DO1Label),MajorId:H.call(this,G.DssGraphO1Major),MinorId:H.call(this,G.DssGraphO1Minor),TitleId:H.call(this,G.DssGraphXTitle),CustomLineId:H.call(this,C),CustomLabelId:H.call(this,C)}));D.push(new E({LabelId:H.call(this,G.DssGraph2DO2Label),MajorId:H.call(this,G.DssGraphO2Major),MinorId:H.call(this,G.DssGraphO2Minor),TitleId:H.call(this,G.DssGraphSeriesTitle),CustomLineId:H.call(this,C),CustomLabelId:H.call(this,C)}));D.push(new E({LabelId:H.call(this,G.DssGraphX1Label),MajorId:H.call(this,G.DssGraphX1Major),MinorId:H.call(this,G.DssGraphX1Minor),TitleId:H.call(this,G.DssGraphXTitle),CustomLineId:H.call(this,G.DssGraphUserLine3),CustomLabelId:H.call(this,G.DssGraphUserLabel3)}));D.push(new E({LabelId:H.call(this,G.DssGraphY1Label),MajorId:H.call(this,G.DssGraphY1Major),MinorId:H.call(this,G.DssGraphY1Minor),TitleId:H.call(this,G.DssGraphY1Title),CustomLineId:H.call(this,G.DssGraphUserLine1),CustomLabelId:H.call(this,G.DssGraphUserLabel1)}));D.push(new E({LabelId:H.call(this,G.DssGraphY2Label),MajorId:H.call(this,G.DssGraphY2Major),MinorId:H.call(this,G.DssGraphY2Minor),TitleId:H.call(this,G.DssGraphY2Title),CustomLineId:H.call(this,G.DssGraphUserLine2),CustomLabelId:H.call(this,G.DssGraphUserLabel2)}));D.push(new E({LabelId:H.call(this,G.DssGraphY3Label),MajorId:H.call(this,G.DssGraphY3Major),MinorId:H.call(this,G.DssGraphY3Minor),TitleId:H.call(this,C),CustomLineId:H.call(this,G.DssGraphUserLine3),CustomLabelId:H.call(this,C)}));D.push(new E({LabelId:H.call(this,G.DssGraphY4Label),MajorId:H.call(this,G.DssGraphY4Major),MinorId:H.call(this,G.DssGraphY4Minor),TitleId:H.call(this,C),CustomLineId:H.call(this,G.DssGraphUserLine4),CustomLabelId:H.call(this,C)}));D.push(new E({LabelId:H.call(this,G.DssGraphY1Label),MajorId:H.call(this,G.DssGraphY1Major),MinorId:H.call(this,G.DssGraphY1Minor),TitleId:H.call(this,G.DssGraphSeriesTitle),CustomLineId:H.call(this,G.DssGraphUserLine1),CustomLabelId:H.call(this,G.DssGraphUserLabel1)}));D.push(new E({LabelId:H.call(this,G.DssGraphX2Label),MajorId:H.call(this,G.DssGraphX2Major),MinorId:H.call(this,G.DssGraphX2Minor),TitleId:H.call(this,G.DssGraphX2Title),CustomLineId:H.call(this,G.DssGraphUserLine4),CustomLabelId:H.call(this,G.DssGraphUserLabel4)}));}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.TripleId","mstrmojo.chart.common.MapStructure");var I=mstrmojo.chart,E=I.gNullTripleId;var G=0;mstrmojo.chart.GraphObjectManager=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GraphObjectManager",mGraphObjectList:null,mGraphObjectManagerList:null,mTripleId:null,mpManager:null,mChartContextPtr:null,mGraphObjectMap:null,init:function N(O){this._super(O);this.mGraphObjectList=[];this.mGraphObjectManagerList=[];this.mTripleId=this.mTripleId||O.TripleId||E;this.mpManager=O.GraphObjectManager||null;if(this.mpManager!==null){this.mChartContextPtr=this.mpManager.mChartContextPtr;}if(G===-1){}else{if(G===1||(!!this.mpManager)===false){this.mGraphObjectMap=new mstrmojo.chart.common.MapStructure();}else{this.mGraphObjectMap=this.mpManager.mGraphObjectMap||new mstrmojo.chart.common.MapStructure();}}},getMapGenesis:function A(){return G;},AddToMapAndList:function L(O){this.AddToMap(O);this.mGraphObjectList.push(O);},AddObjectsToMapAndList:function M(Q){var P,O;O=Q.length;for(P=0;P<O;++P){this.AddToMapAndList(Q[P]);}},AddToManagerList:function H(O){this.mGraphObjectManagerList.push(O);},AddToMap:function C(O){if(O){this.mGraphObjectMap.replaceByTripleId(O.mTripleId,O);}},getGraphObjectFromList:function J(V,R){var S,T,O,U=this.mGraphObjectManagerList,Q=this.mGraphObjectList,P=this.mChartContextPtr.getUtiliy();for(S=Q.length-1;S>=0;--S){T=Q[S].mTripleId;if(P.tripleId.equal(T,V)){O={object:Q[S],find:true};return O;}}if(R){for(S=U.length-1;S>=0;--S){O=U[S].getGraphObjectFromList(V);if(O.find){return O;}}}return{object:null,find:false};},GetGraphObject:function F(U,P){var S,R,Q=this.mGraphObjectMap,T=this.mGraphObjectManagerList,O;P=(P===undefined)?true:P;if(Q){S=Q.findByTripleId(U);if(S!==undefined){return S;}if(P){O=T.length;for(R=O-1;R>=0;--R){S=T[R].GetGraphObject(U,true);if(S!==undefined){return S;}}}return null;}S=this.getGraphObjectFromList(U,P);return S;},GetGraphObjectManager:function K(U,P){if(P===undefined){P=true;}var Q,T=this.mGraphObjectManagerList,O=this.mChartContextPtr.getUtiliy();for(Q=T.length-1;Q>=0;--Q){var S=T[Q].mTripleId;if(O.tripleId.equal(S,U)){return T[Q];}if(P){var R=T[Q].GetGraphObjectManager(U,true);if(R){return R;}}}return null;},Draw:function B(){var O,P;O=this.mGraphObjectList.length;for(P=0;P<O;++P){this.mGraphObjectList[P].Draw();}},GenerateInterpolationFrame:function D(O){var Q=this.mGraphObjectManagerList.length,P,R;this.mProgress=O;for(P=0;P<Q;++P){this.mGraphObjectManagerList[P].GenerateInterpolationFrame(O);}R=this.mGraphObjectList.length;for(P=0;P<R;++P){this.mGraphObjectList[P].SetProgress(O);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.common.MapStructure","mstrmojo.chart.JSONParameter","mstrmojo.chart.enums.EnumInstructionName");var J=mstrmojo.chart,K=J.enums,N=K.EnumInstructionName;function I(P,Q){++this.mCurrentIndex;if(this.mIsFirstPass){this.mParameterList.push(new J.JSONParameter({mParameterName:P,mParameterValue:Q,mIsLastFrameSet:this.mIsLastFrame}));}}mstrmojo.chart.JSONInstruction=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.JSONInstruction",mInstructionName:N.JSONInsUndefined,mpOriginalAddress:0,mFormatIdx:-1,mParameterList:[],mCurrentIndex:-1,mIsLastFrame:true,mIsFirstPass:true,init:function O(P){this._super(P);this.mParameterList=[];},SetInstructionName:function F(P){this.mInstructionName=P;},GetInstructionName:function H(){return this.mInstructionName;},SetSecondPass:function D(){this.mIsFirstPass=false;this.mCurrentIndex=-1;},SetLastFrame:function A(P){this.mIsLastFrame=P;},AppendToParameterList:function E(P,Q){I.call(this,P,Q);},AppendArrayToParameterList:function B(P,Q,R){if(R>0){I.call(this,P,Q);}},AppendSimpleVectorToParameterList:function M(P,Q){if(Q.length>0){I.call(this,P,Q);}},SetFormatAddress:function C(P){this.mpOriginalAddress=P;},CalculateFormatIndex:function G(S){var R=this.mpOriginalAddress,Q,T,P;if(R!==null&&R!==undefined){Q=0;P=S.length-1;while(Q<=P){T=Math.floor((Q+P)/2);if(S[T].mpOriginalAddress<R){Q=T+1;}else{if(S[T].mpOriginalAddress>R){P=T-1;}else{this.mFormatIdx=T;return ;}}}Q=0;P=S.length-1;while(Q<=P){T=Math.floor((Q+P)/2);if(S[T].id<R){Q=T+1;}else{if(S[T].id>R){P=T-1;}else{this.mFormatIdx=T;return ;}}}}},AppendToJSONObject:function L(U){var R=this.mParameterList,Q=this.mFormatIdx,T,P,S={Ins:this.mInstructionName};if(Q>=0){S.Format=Q;}P=R.length;for(T=0;T<P;T++){R[T].AppendToJSONObject(S);}U.push(S);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Base","mstrmojo.chart.Point2D","mstrmojo.chart.enums.EnumRectExpandDirection");var M=mstrmojo.hash,T=mstrmojo.chart,V=T.enums,P=V.EnumRectExpandDirection;mstrmojo.chart.Rect2D=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.Rect2D",x:0,y:0,width:0,height:0,init:function O(Y){if(Y){if(Y.Rect2D){var Z=Y.Rect2D;mstrmojo.hash.copy(Z,this);}else{this._super(Y);}}},Explode:function F(Z,Y){this.x-=Z;this.y-=Y;this.width+=(Z*2);this.height+=(Y*2);},Implode:function A(Z,Y){this.Explode(-Z,-Y);},GetTopLeft:function H(Y){return new T.Point2D({x:this.x,y:this.y});},GetBottomLeft:function G(Y){return new T.Point2D({x:this.x,y:this.y+this.height});},GetTopRight:function E(Y){return new T.Point2D({x:this.x+this.width,y:this.y});},GetBottomRight:function X(Y){return new T.Point2D({x:this.x+this.width,y:this.y+this.height});},GetCenter:function W(Y){return new T.Point2D({x:this.x+this.width/2,y:this.y+this.height/2});},GetLeftMiddle:function C(Y){return new T.Point2D({x:this.x,y:this.y+this.height/2});},GetTopMiddle:function I(Y){return new T.Point2D({x:this.x+this.width/2,y:this.y});},GetRightMiddle:function R(Y){return new T.Point2D({x:this.x+this.width,y:this.y+this.height/2});},GetBottomMiddle:function Q(Y){return new T.Point2D({x:this.x+this.width/2,y:this.y+this.height});},HasIntersection:function J(Y){return(this.x<(Y.x+Y.width)&&Y.x<(this.x+this.width)&&this.y<(Y.y+Y.height)&&Y.y<(this.y+this.height));},PointInRectangle:function S(Y){return((Y.x>=this.x)&&(Y.x<=this.x+this.width)&&(Y.y>=this.y)&&(Y.y<=this.y+this.height));},Reset:function B(Y,b,Z,a){this.x=Y;this.y=b;this.width=Z;this.height=a;},copy:function N(Y){return M.copyProps(["x","y","width","height"],Y,this);},ResetRect:function D(Y){this.copy(Y);},Expand:function L(Z,Y){if((Y&P.REC_EXP_HORIZONTAL)>0){this.x-=Z;this.width+=2*Z;}if((Y&P.REC_EXP_VERTICAL)>0){this.y-=Z;this.height+=2*Z;}},clone:function U(){return new T.Rect2D({Rect2D:this});},ToPoints:function K(Y){if(Y){return{Center:this.GetCenter(),Origin:this.GetTopLeft(),Width:this.width,Height:this.height};}return{TopLeft:this.GetTopLeft(),TopRight:this.GetTopRight(),BottomLeft:this.GetBottomLeft(),BottomRight:this.GetBottomRight()};}});T.gDefaultTitlePosition=new T.Rect2D({x:15,y:15,width:670,height:21});T.gDefaultSubtitlePosition=new T.Rect2D({x:15,y:51,width:670,height:17});T.gDefaultFootnotePosition=new T.Rect2D({x:15,y:370,width:670,height:15});T.gEmptyRect=new T.Rect2D({x:0,y:0,width:0,height:0});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.chart.JSONFormat","mstrmojo.chart.enums.EnumFormatType");var E=mstrmojo.hash,C=mstrmojo.chart,B=C.enums,A=B.EnumFormatType;mstrmojo.chart.JSONFormatLine=mstrmojo.declare(mstrmojo.chart.JSONFormat,null,{scriptClass:"mstrmojo.chart.JSONFormatLine",mLineStyle:0,mAlpha:0,mLineThickness:0,mLineThicknessPt:0,mLineColor:null,mGradient:null,init:function D(H){H.mFormatType=A.FMT_LINE;this._super(H);E.copyProps(["mLineStyle","mAlpha","mLineThickness","mLineThicknessPt","mLineColor","id"],H,this);this.mGradient={};var G=this.mGradient,J=H.mGradient;G.range={start:{x:0,y:0},end:{x:0,y:0}};if(J){G.valid=H.mGradient.valid||false;G.angle=H.mGradient.angle||0;G.endAlpha=H.mGradient.endAlpha||255;G.style=H.mGradient.style||1;G.colors=H.mGradient.colors.slice(0)||[];var I=J.range;if(H&&I!==undefined){if(I.start!==undefined){G.range.start.x=I.start.x;G.range.start.y=I.start.y;}if(I.end!==undefined){G.range.end.x=I.end.x;G.range.end.y=I.end.y;}}}else{G.valid=false;G.angle=0;G.endAlpha=255;G.style=1;G.colors=[];G.range={start:{x:0,y:0},end:{x:0,y:0}};}},AppendToJSONObject:function F(G){var I=this.mLineColor,H=this.mGradient;G.push({FormatType:this.mFormatType,Style:this.mLineStyle,Alpha:this.mAlpha,Thickness:this.mLineThickness,ThicknessPt:this.mLineThicknessPt,Color:{R:I.mR,G:I.mG,B:I.mB},Gradient:{Valid:H.valid,Angle:H.angle,EndAlpha:H.endAlpha,Style:H.style,Colors:H.colors.slice(0),Start:H.range.start,End:H.range.end}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.chart.JSONFormat","mstrmojo.chart.enums.EnumFormatType");var E=mstrmojo.hash,C=mstrmojo.chart,B=C.enums,A=B.EnumFormatType;mstrmojo.chart.JSONFormatFont=mstrmojo.declare(mstrmojo.chart.JSONFormat,null,{scriptClass:"mstrmojo.chart.JSONFormatFont",mFontAlignment:0,mFontStyle:0,mFontRotation:0,mFontBox:0,mFontColor:null,mFontAlpha:0,mFontName:0,mFontSize:0,init:function D(G){G.mFormatType=A.FMT_FONT;this._super(G);E.copyProps(["mFontAlignment","mFontStyle","mFontRotation","mFontBox","mFontColor","mFontAlpha","mFontName","mFontSize","id"],G,this);},AppendToJSONObject:function F(H){var G=this.mFontColor;H.push({FormatType:this.mFormatType,Alignment:this.mFontAlignment,Style:this.mFontStyle,Rotation:this.mFontRotation,Box:this.mFontBox,Alpha:this.mFontAlpha,Name:this.mFontName,Size:this.mFontSize,Color:{R:G.mR,G:G.mG,B:G.mB}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","Rect2D");var B=mstrmojo.chart,C=new B.Rect2D();mstrmojo.chart.GridDataLabelInfo=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GridDataLabelInfo",mIsDisPlayed:false,mIsValid:false,mSeriesId:-3,mGroupId:-3,mXIndex:-1,mYIndex:-1,mHostMarkerBound:null,mLabelPtr:null,init:function D(E){this._super(E);this.mHostMarkerBound=C;},ToRectangle:function A(){return this.mLabelPtr.GetBoundingRect();}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","RGBColor","FormatBase");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumFillType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphFillBevelEffect","EnumDSSGraphGradientType","EnumDSSGraphPictureScaleType","EnumDSSGraphPictureFormat");var Q=mstrmojo.chart,I=Q.enums,W=I.EnumFillType,N=mstrmojo.chart.model,J=N.enums,Y=J.EnumDSSGraphGradientType,d=J.EnumDSSGraphPictureScaleType,l=J.EnumDSSGraphPictureFormat,S=J.EnumDSSGraphFillBevelEffect;var A=0,L=1,P=2,h=3,B=4,X=5;var D=Q.gWhite.ToInteger(),a=Q.gBlack.ToInteger();var M=["mFillType","mAlpha","mSimpleColor","mDarkerFactor"],c=[W.FT_SIMPLE,255,1],j=["startGraphColor","endGraphColor","angle","horizontalOffset","verticalOffset","gradientType","endAlpha","intermediateColors","style"],F=[null,null,0,50,50,Y.DssGraphGradientCircular,0,null,0],e=["fillFlip","scaleType","pictureFormat","nameLength","pictureFilePtr","tripleId"],f=[A,d.DssGraphPictureScaleNone,l.DssGraphPicturePNG,0,null,null],i=["type","depth","lightAngle","intensity"],U=[S.DssGraphFillBevelNone,0,270,10];var K=false;mstrmojo.chart.FormatFill=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.FormatFill",mFillType:W.FT_SIMPLE,mAlpha:255,mSimpleColor:null,mFillGradient:null,mFillPattern:null,mFillPicture:null,mFillBevel:null,mDarkerFactor:1,init:function g(o){var n,m=M.length;this._super(o);if(o&&o.Bare){for(n=0;n<m;++n){this[M[n]]=null;}}else{if(o&&o.SimpleColor!==undefined){this.mSimpleColor=o.SimpleColor;}else{this.mSimpleColor=D;}if(o&&o.Alpha!==undefined){this.mAlpha=o.Alpha;}else{this.mAlpha=255;}}if(K){this.mFillPattern={foregroundColor:D,backgroundColor:a,patternId:28};this.mFillPicture={fillFlip:A,scaleType:d.DssGraphPictureScaleNone,pictureFormat:l.DssGraphPicturePNG,nameLength:0,pictureFilePtr:null,tripleId:null};this.mFillBevel={type:S.DssGraphFillBevelNone,depth:0,lightAngle:270,intensity:10};}},transformToGradient:function E(m){var n=new Q.FormatFill({SimpleColor:this.SimpleColor,Alpha:this.mAlpha});n.mFillType=W.FT_GRADIENT;var o=n.getGradient();o.startGraphColor=m.StartGraphColor;o.endGraphColor=m.EndGraphColor;o.angle=m.Angle;o.gradientType=Y.DssGraphGradientLinear;o.endAlpha=m.EndAlpha;o.style=m.Style;o.intermediateColors=m.Colors.slice(0);return n;},getGradient:function H(){if(this.mFillGradient===null){this.mFillGradient={startGraphColor:a,endGraphColor:D,angle:0,horizontalOffset:50,verticalOffset:50,gradientType:Y.DssGraphGradientCircular,endAlpha:0,intermediateColors:[],style:0};}return this.mFillGradient;},FillSimple:function R(m){m.FillSimple(this,this.mDarkerFactor,this.mSimpleColor,false);},FillGradient:function b(n,m){return n.FillGradient(this,m,this.mDarkerFactor);},EnhancedSeriesEffect:function T(r,p,m,n,q){this.mAlpha=r;if(K){var o=this.mFillBevel;o.type=p;o.depth=m;o.lightAngle=n;o.intensity=q;}},FillEdgeType:function C(n,m){n.FillEdgeType(this,m);},FillDonutOrSphere:function O(o,m,n){o.FillDonutOrSphere(this,m,n);},MakeDarker:function V(m){this.mDarkerFactor=m;},RestoreColor:function k(){this.mDarkerFactor=1;},supportAdvancedFill:function G(m){return K;},restoreDefaults:function Z(s){var n,o,q,r,p,m;if(s){m=M.length;for(n=0;n<m;++n){this[M[n]]=c[n];}this.mSimpleColor=D;r=this.mFillGradient={};m=r.length;for(n=0;n<m;++n){r[j[n]]=F[n];}r.startGraphColor=a;r.endGraphColor=D;if(K){this.mFillPattern={foregroundColor:D,backgroundColor:a,patternId:28};o=this.mFillBevel={};m=i.length;for(n=0;n<m;++n){o[i[n]]=U[n];}q=this.mFillPicture={};m=e.length;for(n=0;n<m;++n){q[e[n]]=f[n];}}}else{m=M.length;for(n=0;n<m;++n){if(this[M[n]]===null){this[M[n]]=c[n];}}if(this.mSimpleColor===null){this.mSimpleColor=D;}if(this.mFillType===0){return ;}if(this.mFillGradient===null){this.mFillGradient={};}r=this.mFillGradient;m=j.length;for(n=0;n<m;++n){if(r[j[n]]===null||r[j[n]]===undefined){r[j[n]]=F[n];}}if(r.startGraphColor===null||r.startGraphColor===undefined){r.startGraphColor=a;}if(r.endGraphColor===null||r.endGraphColor===undefined){r.endGraphColor=D;}if(K){if(this.mFillPattern===null){this.mFillPattern={};}p=this.mFillPattern;if(p.foregroundColor===undefined||p.foregroundColor===null){p.foregroundColor=D;}if(p.backgroundColor===undefined||p.backgroundColor===null){p.backgroundColor=a;}if(p.patternId===undefined||p.patternId===null){p.patternId=28;}if(this.mFillBevel===null){this.mFillBevel={};}o=this.mFillBevel;m=i.length;for(n=0;n<m;++n){if(o[i[n]]===null){o[i[n]]=U[n];}}if(this.mFillPicture===null){this.mFillPicture={};}q=this.mFillPicture;m=e.length;for(n=0;n<m;++n){q[e[n]]=f[n];}}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresCls("mstrmojo.chart.common.MapStructure");mstrmojo.requiresClsP("mstrmojo.chart","Vector2D","Point2D","RGBColor","ChartConstants");var J=mstrmojo.chart,F=J.ChartConstants,B=mstrmojo.chart.model,C=B.enums;mstrmojo.chart.CEModuleMain=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.CEModuleMain",mTolerance:0.01,mDefaultGraphWidth:700,mDefaultGraphHeight:400,mRiserCountLimit:32767,mpController:null,mGlowWidth:10,mColorParser:null,mGraphObjectMap:null,DegreeToRadian:function G(O){return O*F.kPI/180;},GetColorParser:function I(){if(this.mColorParser===null){this.mColorParser=new J.RGBColor();}return this.mColorParser;},GetGraphObjectMap:function A(){if(this.mGraphObjectMap===null){this.mGraphObjectMap=new J.common.MapStructure();}return this.mGraphObjectMap;},ResetGraphObjectMap:function K(){if(this.mGraphObjectMap){this.mGraphObjectMap.clear();}},RadianToDegree:function E(O){return(O*180/F.kPI+(O>=0?0.5:-0.5));},setController:function D(O){this.mpController=O;},GetLocalizedValue:function N(){},ShiftPolygonBy:function M(Q,R){if(R<=0){return Q;}var S,O,P=Q.length;R%=P;if(P<=1){return Q;}S=Q.slice(R,Q.length);O=Q.slice(0,R);return S.concat(O);},GetAngularBisectorIntersectionPoint:function L(O,Z,Y,S,T){var X=new J.Vector2D({x:O.x-Z.x,y:O.y-Z.y}),W=new J.Vector2D({x:Y.x-Z.x,y:Y.y-Z.y}),V=X.Length(),U=W.Length(),R=new J.Vector2D({x:X.x/V,y:X.y/V}),Q=new J.Vector2D({x:W.x/U,y:W.y/U}),P=0;if(Math.abs(R.x-Q.y)<this.mTolerance){P=S*(Q.x+R.x)/(R.y-Q.y);}else{P=S*(Q.y+R.y)/(Q.x-R.x);}T.x=Z.x+P*Q.x+S*(-Q.y);T.y=Z.y+P*Q.y+S*Q.x;},MakePolygonClockwise:function H(T){var Q=T.length,V=0,S,P,U,R,O;if(Q<3){return ;}for(S=1;S<Q;++S){if(T[S].x<T[V].x||(T[S].x<=T[V].x&&T[S].y<T[V].y)){V=S;}}P=(V+Q-1)%Q;U=new J.Vector2D({x:(T[P].x-T[V].x),y:(T[P].y-T[V].y)});P=(V+1)%Q;R=new J.Vector2D({x:(T[P].x-T[V].x),y:(T[P].y-T[V].y)});if(R.CrossProduct(U)<-this.mTolerance){for(S=0;S<Q/2;++S){O=T[S];T[S]=T[Q-S-1];T[Q-S-1]=O;}}}});J.gModuleMain=new J.CEModuleMain();}());(function(){mstrmojo.requiresCls("mstrmojo.chart.FormatBase","mstrmojo.chart.RGBColor","mstrmojo.chart.enums.EnumLineStyle");var E=mstrmojo.chart,J=E.enums,L=J.EnumLineStyle;E.gLinePatterns=[[1,0],[18,6],[3,3],[9,6,3,6],[9,3,3,3,3,3],[9,2],[3,8],[30,10],[10,10],[3,8,3,8,3,17],[12,8,12,8,3,8],[12,5,12,5,3,5,3,5],[25,10,10,10],[25,5,8,5,8,5],[35,10,25,10,10,10],[37,5,37,5,8,5,8,5]];var G=["mLineStyle","mAlpha","mLineThickness","mLineThicknessPt","mLineColor","mGradient"],I=[L.LS_SOLID,255,1,75,null,null];function M(){if(this.mGradient===null){this.mGradient={valid:false,angle:0,endAlpha:0,style:1,colors:[],range:{start:{x:0,y:0},end:{x:0,y:0}}};}}mstrmojo.chart.FormatLine=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.FormatLine",mLineStyle:L.LS_SOLID,mAlpha:255,mLineThickness:1,mLineThicknessPt:75,mLineColor:0,mGradient:null,init:function K(Q){var O,N=G.length;this._super(Q);if(Q){if(Q.Line){var P=Q.Line;this.mLineStyle=P.LineStyle;this.mAlpha=P.Alpha;this.mLineThickness=P.LineThickness;this.mLineColor=P.LineColor;}else{if(Q.Bare){for(O=0;O<N;++O){this[G[O]]=null;}}else{this.mLineStyle=Q.LineStyle||L.LS_SOLID;this.mAlpha=Q.Alpha||255;this.mLineThickness=Q.LineThickness||1;this.mLineColor=Q.LineColor||0;}}}},getGradient:function C(){M.call(this);return this.mGradient;},transformToGradient:function B(N){var P=new E.FormatLine({Line:{LineStyle:L.LS_GRADIENT,Alpha:this.mAlpha,LineThickness:this.mLineThickness,LineColor:this.mLineColor}});var O=P.getGradient();O.valid=N.Valid;O.angle=N.Angle;O.endAlpha=N.EndAlpha;O.style=N.Style;O.colors=N.Colors.slice(0);O.range={start:{x:N.Start.x,y:N.Start.y},end:{x:N.End.x,y:N.End.y}};O.strokePatten=this.mLineStyle;return P;},transformToGradientFromFill:function D(N,O,Q){var R=new E.FormatLine({Line:{LineStyle:L.LS_GRADIENT,Alpha:this.mAlpha,LineThickness:this.mLineThickness,LineColor:this.mLineColor}});var P=R.getGradient();P.valid=true;P.angle=N.angle;P.endAlpha=N.endAlpha;P.style=N.style;P.colors=[];P.colors=N.intermediateColors.slice(0);P.colors.push({Color:N.endGraphColor,Step:1});P.colors.splice(0,0,{Color:N.startGraphColor,Step:0});P.range={start:{x:O.x,y:O.y},end:{x:Q.x,y:Q.y}};return R;},ApplyLineFormat:function A(N){N.ApplyLineFormat(this);},getLinePattern:function H(N){return E.gLinePatterns[N];},restoreDefaults:function F(O){var N;if(O){for(N=0;N<G.length;++N){this[G[N]]=I[N];}}else{for(N=0;N<G.length;++N){if(this[G[N]]===null){this[G[N]]=I[N];}}}if(this.mLineColor===null){this.mLineColor=E.gBlack.ToInteger();}}});mstrmojo.chart.FormatLine.getLinePattern=function H(N){return E.gLinePatterns[N];};E.gOutlineWhite=new E.FormatLine({LineStyle:L.LS_SOLID,Alpha:255,LineThickness:1,LineColor:E.gWhite.ToInteger()});E.gOutlineBlack=new E.FormatLine({LineStyle:L.LS_DASH,Alpha:255,LineThickness:2,LineColor:E.gBlack.ToInteger()});E.gLeaderLine=new E.FormatLine({LineStyle:L.LS_SOLID,Alpha:255,LineThickness:2,LineColor:E.gLeaderLineColor.ToInteger()});E.gStrokeForDarkBackground=new E.FormatLine({LineStyle:L.LS_SOLID,Alpha:191,LineThickness:1,LineColor:E.gStrokeColorForDarkBackground.ToInteger()});E.gStrokeForLightBackground=new E.FormatLine({LineStyle:L.LS_SOLID,Alpha:191,LineThickness:1,LineColor:E.gStrokeColorForLightBackground.ToInteger()});}());(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var D=1,B="mstrmojo-itemwrap";mstrmojo.ListMapperHoriz=mstrmojo.provide("mstrmojo.ListMapperHoriz",mstrmojo.hash.copy({markupPrefix:'<table class="mstrmojo-itemwrap-table" cellspacing="0" cellpadding="0"><tbody><tr>',markupSuffix:"</tr></tbody></table>",itemWrapperPrefix:function(H){return'<td class="'+this.getWrapperCss(H)+'">';},getWrapperCss:function(H){return"mstrmojo-itemwrap-td";},itemWrapperPrefill:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",itemWrapperSuffix:"</td>",wrapperNodes:function G(H){return this.wrapperParentNode(H).cells;},wrapperParentNode:function F(H){return H.firstChild.rows[0];},createWrapperNode:function E(H){var I=H.ownerDocument,J=I.createElement("td");return J;},findScrollRange:function C(U,L,S,X,I,P,Y,W){var Q=this.wrapperNodes(U),R=parseInt(L/2,10),K=parseInt(Math.log(L)/Math.log(2),10),J=0,H=L-1,T=I+P,M=Q[0].offsetLeft,O;for(var V=1;V<=K;V++){O=Q[R].offsetLeft-M+Y;if(O<=I){J=R;}else{if(O>=T){H=R;}}var N=Math.round(L/Math.pow(2,V+1));R+=(O>I)?-N:N;R=Math.min(Math.max(0,R),L-1);}return{start:J,end:H};},findIndex:function A(I,M,K){if(M&&K){var H=I.domNode,L=this.wrapperParentNode(M),J=K.parentNode;while(J){if(J===L){return mstrmojo.array.findBin(this.wrapperNodes(M),K,"offsetLeft",I.items&&I.items.length);}else{if(J===H){break;}}K=J;J=K.parentNode;}}return -1;}},mstrmojo.hash.copy(mstrmojo.ListMapper)));})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.WidgetListBuilder");mstrmojo.WidgetTreeBuilder=mstrmojo.provide("mstrmojo.WidgetTreeBuilder",mstrmojo.mixin({newContext:function A(B){var D=this._super(B);if(!B.itemFunction&&D.itemFunc){var C=D.itemFunc;D.itemFunc=function(G,F,H){var E=C(G,F,H);if(E){E.tree=H.tree||H;}return E;};}return D;}},mstrmojo.hash.copy(mstrmojo.WidgetListBuilder)));})();(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.array");var C=mstrmojo.array;mstrmojo.ObjectBrowserDataProvider=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ObjectBrowserDataProvider",path:mstrConfig.taskURL,serverRequest:function(D,E){if(mstrApp&&mstrApp.serverRequest){mstrApp.serverRequest(D,E,{silent:true});}else{mstrmojo.xhr.request("POST",this.path,E,D,undefined,this.XServer,this.baseParams);}},fetchFolderContents:function(D,E,H){var F=D.blockCount,G={taskId:"searchMetadata",styleName:"MojoFolderStyle",blockCount:F,includeAncestorInfo:"true",includeObjectDesc:D.includeObjectDesc,encodeObjectInfo:false};if(D.folderLinksContextId){G.folderLinksContextId=D.folderLinksContextId;}if(D.sId){G.sessionState=D.sId;}if(E.fid){G.rootFolderID=E.fid;}else{if(E.fty){G.rootFolderType=E.fty;}}if(D.browsableTypes){G.objectType=D.browsableTypes;}if(E.blockBegin){G.blockBegin=E.blockBegin;}if(E.searchPattern){if(D.enableQuickSearch){G.quickSearch=D.enableQuickSearch;}G.searchPattern=E.searchPattern;if(E.recursive){G.recursive=E.recursive;}}this.serverRequest(G,H);},newFolder:function(G,H,F,D){var E={taskId:"createFolder",taskContentType:"json",folderID:G,name:H,description:F};this.serverRequest(E,D);},loadObjects:function B(H,I,D,G){var E=[],F=[];C.forEach(H,function(J){E.push(J.did);F.push(J.t);});if(H.length>0&&G){this.serverRequest({taskId:"getObjectInfo",objectIDs:E.join(","),objectTypes:F.join(","),includeDetails:true},I,D);}else{I.success();}},loadRecentSaveAsFolders:function A(E){var D={taskId:"getRecentSaveAsFolders"};this.serverRequest(D,E);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");function B(J,I){this.raiseEvent({name:"viCompBuilt",type:J,widget:I});}mstrmojo.vi.models.VIComponentMap=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.vi.models.VIComponentMap",init:function G(I){this._super(I);this.relativePanels={};this.comps={};},addRelativePanel:function H(I){this.relativePanels[I]=true;},isRelativePanel:function F(I){return !!this.relativePanels[I];},isComponent:function C(J,I){return this.getComponentKey(J)===I;},getComponent:function A(I){return this.comps[I];},getComponentKey:function D(J){var I=this.getComponent(J);return(I&&I.k)||"";},createComponent:function E(L,K,J){B.call(this,L);var I=new K(J);this.comps[L]=I;B.call(this,L,I);return I;}});mstrmojo.vi.models.VIComponentMap.TYPES={FILTER_STACK:1,FILTER_PANEL:2,PAGEBY_STACK:3,PAGEBY_PANEL:4,VIZ_CONTENT:5,MAIN_CONTENT:6};}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");var M=mstrmojo.DI.DIConstants,H=mstrmojo.array,D=M.dbType,F=M.xdaType,I=M.sourceType,K=M.backendSourceSubtype;mstrmojo.DI.DIDatabaseHelper=mstrmojo.declare(mstrmojo.Obj,null,null);mstrmojo.DI.DIDatabaseHelper.getImportOptionByDBType=function A(N){switch(N){case D.SAP:case D.MSFT_AS:case D.ESSBASE:case D.TM1:case D.PIG:return false;default:return true;}};mstrmojo.DI.DIDatabaseHelper.getSourceTypeByDBType=function E(N){switch(N){case D.SAP:case D.MSFT_AS:case D.ESSBASE:case D.TM1:return F.mdx;case D.PIG:return F.ffsql;default:return -1;}};mstrmojo.DI.DIDatabaseHelper.getDescriptionIdByDBType=function(N){switch(N){case D.MS_ACCESS:return 9149;case D.ORACLE:return 8545;case D.SQL_SERVER:return 8552;case D.INFORMIX:return 12995;case D.SYBASE:return 12998;case D.REDBRICK:return 10059;case D.DB2:return 8516;case D.TERADATA:return 8553;case D.SAP:return 13107;case D.NETEZZA:return 8558;case D.EXCEL:return 3958;case D.MSFT_AS:return 13225;case D.ESSBASE:return 13224;case D.MYSQL:return 8556;case D.POSTGRESQL:return 8541;case D.COMPOSITE:return 12991;case D.ASTER:return 10058;case D.VERTICA:return 10062;case D.PARACCEL:return 10056;case D.TM1:return 13223;case D.XQUERY:return 8560;case D.HIVE:return 8561;case D.SALESFORCE:return 9213;case D.SAPHANA:return 12997;case D.GOOGLE_BIGQUERY:return 12450;default:return 4444;}};mstrmojo.DI.DIDatabaseHelper.getOASTFromBEST=function L(N){switch(N){case K.googleBigQuery:case K.googleBigQueryFFSQLModel:case K.googleBigQuerySingleTable:return I.googleBigQuery;case K.dropbox:return I.dropbox;case K.googleAnalytics:return I.googleAnalytics;case K.googleDrive:return I.googleDrive;case K.facebook:return I.facebook;case K.twitter:return I.twitter;case K.salesforce:return I.salesforce;default:return -1;}};mstrmojo.DI.DIDatabaseHelper.isOAuthSourceType=function C(N){var O=[I.googleBigQuery,I.dropbox,I.googleAnalytics,I.googleDrive,I.facebook,I.twitter,I.salesforce];return H.indexOf(O,N)!==-1;};mstrmojo.DI.DIDatabaseHelper.filterDBById=function B(P,N,O){return H.filter(P,function(S){var R=H.indexOf(N,S.id),Q;if(R>-1){Q=O;}else{Q=!O;}return Q;});};mstrmojo.DI.DIDatabaseHelper.filterDBByDispOption=function B(P,N,O){return H.filter(P,function(R){var Q=false;if((R.disp&N)===N){H.forEach(O,function(S){if(R.id===S){Q=true;return false;}});return !Q;}});};mstrmojo.DI.DIDatabaseHelper.getDBIds=function J(O){var N=[];H.forEach(O,function(P){N=N.concat(P.id);});return N;};mstrmojo.DI.DIDatabaseHelper.getUniqueDBTypes=function G(P){var O=[],N;H.forEach(P,function(Q){N=H.indexOf(O,Q.dbType);if(N<0){O.push(Q.dbType);}});return O;};mstrmojo.DI.DIDatabaseHelper.filterDBByAdminConfig=function(O,N){return H.filter(O,function(R){var P=H.indexOf(N,R.id),Q=true;if(P>=0){Q=false;}return Q;});};}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");var D={TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4};var C={LEFT_TO_RIGHT:0,RIGHT_TO_LEFT:1};mstrmojo.ui.PopupConfig=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ui.PopupConfig",ENUM_CORNERS:D,isHostedWithin:true,position:null,hostProxyCssClass:"",hostId:"",hostElement:null,anchorElement:null,popupHandlers:null,alignment:null,alignWithAnchor:false,useTooltip:false,useDarkTheme:false,init:function H(I){this.clear();this._super(I);},setAlignment:function E(I,J){this.alignment={host:I,popup:J};},addPopupHandlers:function F(I,K,J){this.popupHandlers[I]={open:K,close:J};},clear:function B(){this.popupHandlers={};var I=this.ENUM_CORNERS;this.alignment={host:I.BOTTOM_LEFT,popup:I.TOP_LEFT};},destroy:function(I){this.anchorElement=null;this.hostElement=null;if(this._super){this._super(I);}}});mstrmojo.ui.PopupConfig.ENUM_CORNERS=D;mstrmojo.ui.PopupConfig.directionCfg={menuDirection:C.LEFT_TO_RIGHT,isRightToLeft:function G(){return this.menuDirection===C.RIGHT_TO_LEFT;},setDirection:function A(I){this.menuDirection=I?C.RIGHT_TO_LEFT:C.LEFT_TO_RIGHT;}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.func","mstrmojo.Obj");var K=mstrmojo.hash;var P=0;var F=[];var J={};var L=false;function I(T){var U=T.callback;if(U.submission){U.submission(T.id,this.userInteractionRequired(T),T);}this.submitRequest(T);}function G(){if(F.length&&!L){I.call(this,F.shift());}}mstrmojo.ServerProxy=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ServerProxy",transport:null,cnt:0,request:function E(d,a,U,V){if(U){this.cancelRequests();}var X=this.id,Y=this.transport,T=mstrmojo.now()+a.taskId+P++,W=d.canceled||mstrmojo.emptyFn;d.canceled=function(e){W();d.complete(true);return Y.cancelRequest(e);};d=mstrmojo.func.wrapMethods(d,{complete:function(e){mstrmojo.all[X]&&mstrmojo.all[X].deleteRequest(e);}});var Z=!K.isEmpty(this._requests),b=this.createRequest(T,d,a,V),c=(L||Z)&&!V.doNotHold;if(c){F.push(b);}else{I.call(this,b);}return T;},hasRequests:function O(){return !K.isEmpty(this._requests)||L;},createRequest:function Q(V,X,W,T){var U=this._requests;if(!U){U=this._requests={};}U[V]={id:V,callback:X,params:W,config:T};return U[V];},submitRequest:function M(T){this.transport.serverRequest(this.id,T.id,T);},cancelRequests:function S(){var T=false;K.forEach(this._requests,function(U){if(U.gotResponse===undefined){T|=U.callback.canceled(U.id);}});this._requests={};F=[];return T;},cancelRequest:function B(X){var U=false,W=this._requests[X],V,T=F.length;for(V=0;V<T;V++){if(F[V]===W){break;}}if(V<T){F.splice(V,1);delete this._requests[X];U|=W.callback.canceled(W.id);}return U;},response:function A(X,T,V){$MAPF(false,"AndroidServerTransport","transportRequest");var W=this.getRequest(X);if(W){W.gotResponse=true;var Y=W.callback,U=(T&&!V.mstrerr)?"success":"failure";try{if(Y[U]){Y[U](V,W);}}finally{Y.complete(X);}}G.call(this);},deleteRequest:function N(U){var T=this._requests;delete T[U];},getRequest:function H(U){var T=this._requests;return T&&T[U];},userInteractionRequired:function C(T){return false;},addLoadingGraph:function D(T){J[T]=true;L=true;},removeLoadingGraph:function R(T){delete J[T];if(K.isEmpty(J)){L=false;G.call(this);}},_serverRequestParallel:function(U,W,X,T){var V=T||new mstrmojo.SimpleXHR();V.request("POST",U,{success:function(Y){if(X.success){X.success(Y);}},failure:function(Y){if(X.failure){X.failure({code:Y.getResponseHeader("X-MSTR-TaskErrorCode"),message:Y.getResponseHeader("X-MSTR-TaskFailureMsg")});}},complete:function(){if(X.complete){X.complete();}}},W);},serverRequestParallel:function(U,V,T){this._serverRequestParallel(mstrConfig.taskURL,U,V,T);},upload:function(Z,Y,X,U,W,V,T){mstrmojo.xhr.upload("POST",mstrConfig.taskURL,Z,Y,X,U,W,V,T);}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.hash","mstrmojo.array","mstrmojo.ServerProxy","mstrmojo.XHRServerTransport","mstrmojo.mstr.EnumFunction");var k=mstrmojo.array,f=mstrmojo.mstr.EnumFunction;var N={"8107C31BDD9911D3B98100C04F2233EA":"Sum","548C68A0F60811D3ACC300C04F0423DE":"StdevP","8107C31FDD9911D3B98100C04F2233EA":"Max","8107C331DD9911D3B98100C04F2233EA":"GeoMean",B2C0FA4220C711D6AD1400C04F0423DE:"First","8107C32CDD9911D3B98100C04F2233EA":"Product",B2C0FA4020C711D6AD1400C04F0423DE:"Greatest","8107C330DD9911D3B98100C04F2233EA":"Var","8107C32FDD9911D3B98100C04F2233EA":"Stdev","8107C32DDD9911D3B98100C04F2233EA":"Median",B2C0FA4320C711D6AD1400C04F0423DE:"Last","8107C31CDD9911D3B98100C04F2233EA":"Count","8107C31DDD9911D3B98100C04F2233EA":"Avg","8107C31EDD9911D3B98100C04F2233EA":"Min","8107C32EDD9911D3B98100C04F2233EA":"Mode",D64F1B10F6C011D3ACC300C04F0423DE:"VarP",B2C0FA4120C711D6AD1400C04F0423DE:"Least"},Q={"8107C326DD9911D3B98100C04F2233EA":"Rank"},u={D221F90EB35540E3A1204ED6CC9A8267:"Avg",D221F90FB35540E3A1204ED6CC9A8267:"Count",D221F910B35540E3A1204ED6CC9A8267:"Max",D221F911B35540E3A1204ED6CC9A8267:"Min",D221F90DB35540E3A1204ED6CC9A8267:"Sum"},v={"8107C32ADD9911D3B98100C04F2233EA":"Avg","8107C350DD9911D3B98100C04F2233EA":"Count","8107C34BDD9911D3B98100C04F2233EA":"Max","8107C34CDD9911D3B98100C04F2233EA":"Min","8107C32BDD9911D3B98100C04F2233EA":"Sum"},o={"8107C329DD9911D3B98100C04F2233EA":"Avg","8107C354DD9911D3B98100C04F2233EA":"Count","8107C351DD9911D3B98100C04F2233EA":"Max","8107C352DD9911D3B98100C04F2233EA":"Min","8107C328DD9911D3B98100C04F2233EA":"Sum"},W={"8107C337DD9911D3B98100C04F2233EA":"Banding","8107C338DD9911D3B98100C04F2233EA":"BandingC","8107C339DD9911D3B98100C04F2233EA":"BandingP"},H={"8107C31DDD9911D3B98100C04F2233EA":"Avg","8107C31CDD9911D3B98100C04F2233EA":"Count",B2C0FA4220C711D6AD1400C04F0423DE:"First","8107C331DD9911D3B98100C04F2233EA":"GeoMean",B2C0FA4320C711D6AD1400C04F0423DE:"Last","8107C31FDD9911D3B98100C04F2233EA":"Max","8107C32DDD9911D3B98100C04F2233EA":"Median","8107C31EDD9911D3B98100C04F2233EA":"Min","8107C32EDD9911D3B98100C04F2233EA":"Mode","8107C32CDD9911D3B98100C04F2233EA":"Product","8107C32FDD9911D3B98100C04F2233EA":"Stdev","548C68A0F60811D3ACC300C04F0423DE":"StdevP","8107C31BDD9911D3B98100C04F2233EA":"Sum","8107C330DD9911D3B98100C04F2233EA":"Var",D64F1B10F6C011D3ACC300C04F0423DE:"VarP",A202C23DDD9D11D3B98100C04F2233EA:"Fvschedule",A202C23CDD9D11D3B98100C04F2233EA:"IRR",A202C240DD9D11D3B98100C04F2233EA:"MIRR",A202C23EDD9D11D3B98100C04F2233EA:"NPV","8107C34ADD9911D3B98100C04F2233EA":"Percentile","9C374203DD9F11D3B98100C04F2233EA":"AvgDev","9C374228DD9F11D3B98100C04F2233EA":"ChiSquareTest","9C374225DD9F11D3B98100C04F2233EA":"Correlation","9C374224DD9F11D3B98100C04F2233EA":"Covariance","9C374237DD9F11D3B98100C04F2233EA":"ForecastV","9C37422FDD9F11D3B98100C04F2233EA":"FTest","9C374234DD9F11D3B98100C04F2233EA":"GrowthV","9C37422EDD9F11D3B98100C04F2233EA":"HeteroscedasticTTest","9C37422DDD9F11D3B98100C04F2233EA":"HomoscedasticTTest","9C37422ADD9F11D3B98100C04F2233EA":"Intercept","9C374204DD9F11D3B98100C04F2233EA":"Kurtosis","9C374222DD9F11D3B98100C04F2233EA":"MeanTTest","9C37422CDD9F11D3B98100C04F2233EA":"PairedTTest","9C374226DD9F11D3B98100C04F2233EA":"Pearson","9C374227DD9F11D3B98100C04F2233EA":"RSquare","9C374205DD9F11D3B98100C04F2233EA":"Skew","9C374229DD9F11D3B98100C04F2233EA":"Slope","9C37422BDD9F11D3B98100C04F2233EA":"SteYX","9C374231DD9F11D3B98100C04F2233EA":"TrendV","9C374223DD9F11D3B98100C04F2233EA":"VarTest","4A99DC7BC5254A319F6B8098E7D652C1":"ConcatAgg"},Y={AND283:"And",OR284:"Or",NOT285:"Not",IF305:"If"},m={BEGINSWITH279:"Begins with",ENDSWITH279:"Ends with",IN289:"In",BETWEEN290:"Between",CONTAINS291:"Contains",LIKE291:"Like"};function P(AA){var y=function(AC,AB){return mstrmojo.array.stringSorter(AC.n,AB.n);},z,x;AA=AA.sort(y);for(z=0,x=AA.length;z<x;z++){AA[z].fns=AA[z].fns.sort(y);}return AA;}function X(AA,AB){var x=AA.length,z;for(z=0;z<x;z++){var y=AA[z].fns;if(mstrmojo.array.find(y,"did",AB)>-1){return z;}}return -1;}function M(y){var x=mstrApp&&mstrApp.useQuickSearch&&mstrApp.useQuickSearch();y=mstrmojo.hash.copy(y,{taskId:"searchMetadata",recursive:true,styleName:"MojoFolderStyle",includeObjectDesc:true,includeAncestorInfo:false});if(x){y.quickSearch=x;y.nameWildcards=16;y.sortKey=-1;}return y;}function I(y,x){if(mstrApp.serverRequest){mstrApp.serverRequest(x,y);}else{window.$MAPF=function(){return false;};this.getServerProxy().request(y,x,false,{});}}mstrmojo.ME.MetricDataService=mstrmojo.provide("mstrmojo.ME.MetricDataService",{rootFolderTypes:{ALL:39,FILTERS:4,METRICS:5,FACTS:29,SCHEMA:24,ATTRIBUTES:26,TRANSFORMATIONS:38},blockCount:10,suggestCount:10,suggestDelay:200,noCache:true,functions:null,metricComponents:null,functionsDetails:null,getServerProxy:function F(){if(!this.serverProxy){this.serverProxy=new mstrmojo.ServerProxy({transport:mstrmojo.XHRServerTransport});}return this.serverProxy;},getMetricDefintion:function S(z,x){var y={taskId:"getMetricDefinition",metricId:z.id,outputFlags:65599};if(z.msgID){y.msgID=z.msgID;}I.call(this,x,y);},validateMetric:function d(z,x){var y={taskId:"validateMetric",metricId:z.metricId,tokenStreamXML:z.tokenStreamXML,metricXML:z.metricXML,outputFlags:327695};if(mstrmojo.string.isEmpty(z.metricId)){y.isNew=true;}if(z.msgID){y.msgID=z.msgID;}if(z.formID){y.frmid=z.formID;}if(z.isIDForm){y.isIDForm=z.isIDForm;}if(z.objectType){y.objectType=z.objectType;}I.call(this,x,y);},getMetricComponents:function B(AB,y){var x=this,z=this.metricComponents;if(!this.noCache&&z&&z.items.length==z.sz){y.success(z);return ;}y.success=mstrmojo.func.composite([y.success,function(AC){if(x.metricComponents&&x.metricComponents.items){x.metricComponents.items.push(AC.items);}else{x.metricComponents=AC;}}]);var AA=M({blockBegin:AB.blockBegin,blockCount:AB.blockCount,searchPattern:AB.pattern,rootFolderType:AB.rootFolderType||24,objectType:AB.objectType||"12,13,43"});I.call(this,y,AA);},getAttributes:function R(z,x){var y=M({blockBegin:z.blockBegin,blockCount:z.blockCount,searchPattern:z.pattern,rootFolderType:z.rootFolderType||26,objectType:12});I.call(this,x,y);},getFacts:function L(z,x){var y=M({blockBegin:z.blockBegin,blockCount:z.blockCount,searchPattern:z.pattern,rootFolderType:z.rootFolderType||29,objectType:13});I.call(this,x,y);},getMetrics:function G(z,x){var y=M({blockBegin:z.blockBegin,blockCount:z.blockCount,searchPattern:z.pattern,rootFolderType:z.rootFolderType||5,objectType:4});if(z.isVerify){y.nameWildcards=2;}I.call(this,x,y);},getFunctions:function T(AC){var AE=this,AF=window.sessionStorage,AB=this.functions||(AF&&AF.getItem("functions")),AD=AF&&AF.getItem("mstrLocaleId"),z=mstrApp&&mstrApp.localeId;if(AB&&AD==z){AB=P(JSON.parse(AB).fncs);AC.success(AB);}else{var y={failure:AC.failure,textResponse:true},AA={taskId:"getSystemFunctions",includeFunctionDetails:true,functionFlags:2|2147483648,includeFunctionHelpTopic:true};var x=function(AG){k.forEach(AG,function(AI){var AH=AI&&AI.fns;k.forEach(AH,function(AK){var AJ=AK.pros;var AL=k.filterOne(AJ,function(AM){return AM.n==="UseLookupForAttributes";});if(AL){AL.dfv="0";}});});};y.success=function(AG){if(typeof AG==="string"||!mstrApp.isSingleTier){AG=AG.replace(/\\'/g,"'");var AI=JSON.parse(AG),AH=AI.fncs;x(AH);AG=JSON.stringify(AI);if(AF){AF.setItem("functions",AG);AF.setItem("mstrLocaleId",z);}AE.functions=AG;AB=P(JSON.parse(AG).fncs);}else{x(AG.fncs);AB=P(AG.fncs);AE.functions=JSON.stringify(AG);}AC.success(AB);};I.call(this,y,AA);}},getAggFunctions:function C(){if(this._aggFunctions){return this._aggFunctions;}var x=this.parseFuncStr();x=mstrmojo.array.filter(x[this.getBasicCategoryIndex(x)].fns,function(z){var y=z.did,AA;if(y!=="B2C0FA4020C711D6AD1400C04F0423DE"&&y!=="B2C0FA4120C711D6AD1400C04F0423DE"){AA=N[y];}return AA;});return x;},getOLAPAggFunctions:function E(x){var y=this.parseFuncStr();y=mstrmojo.array.filter(y[this.getOLAPCategoryIndex(y)].fns,function(z){switch(x){case"moving":return v[z.did];case"running":return o[z.did];case"olap":default:return u[z.did];}return false;});return y;},getFunctionCatList:function q(){if(this._functionCatList){return this._functionCatList;}var x=this.parseFuncStr();x=mstrmojo.hash.make(x,mstrmojo.Arr);this._functionCatList=x;return x;},getCategoryIndex:function p(y,x){return X(x||this.getFunctionCatList(),y);},getBasicCategoryIndex:function J(y){var x="B2C0FA4020C711D6AD1400C04F0423DE";return X(y||this.getFunctionCatList(),x);},getDataMiningCatIndex:function i(x){var y="F17CD4F3FF134D91B80DDAB9CA73C919";return X(x||this.getFunctionCatList(),y);},getDateTimeCategoryIndex:function t(y){var x="C50F2A4F75AE49D6B20E00224967B500";return X(y||this.getFunctionCatList(),x);},getStringCategoryIndex:function g(y){var x="6F7DF5FF449111D5BEA300B0D01A55EF";return X(y||this.getFunctionCatList(),x);},getOLAPCategoryIndex:function J(y){var x="D221F90EB35540E3A1204ED6CC9A8267";return X(y||this.getFunctionCatList(),x);},getInternalCategoryIndex:function U(y){var x="8107C337DD9911D3B98100C04F2233EA";return X(y||this.getFunctionCatList(),x);},getFunctionDetails:function r(z,x){var y={taskId:"getSystemFunctions",functionId:z.did,includeFunctionDetails:true,includeFunctionHelpTopic:true};I.call(this,x,y);},getTransformations:function O(z,x){var y=M({blockBegin:z.blockBegin,blockCount:z.blockCount,searchPattern:z.pattern,rootFolderType:z.rootFolderType||38,objectType:43});I.call(this,x,y);},getFilters:function j(z,x){var y=M({blockBegin:z.blockBegin,blockCount:z.blockCount,searchPattern:z.pattern,rootFolderType:z.rootFolderType||4,objectType:1});I.call(this,x,y);},getAttributeForms:function e(z,x){var y={taskId:"getAttributeForms",attributeID:z.attributeID,displayedForms:z.displayedForms,styleName:"WidgetElementListStyle"};I.call(this,x,y);},getSubtotalFunctions:function V(z,x){var y=M({objectType:"1025,1026",searchPattern:""});I.call(this,x,y);},isBasicAggMap:function l(x){var y=!!N[x];if(x==="B2C0FA4020C711D6AD1400C04F0423DE"||x==="B2C0FA4120C711D6AD1400C04F0423DE"){y=false;}return y;},isOLAPAgg:function w(x){return !!u[x];},isMovingAgg:function Z(x){return !!v[x];},isRunningAgg:function c(x){return !!o[x];},isBanding:function h(x){return !!W[x];},isOLAP:function K(y){var z=this.getFunctionCatList(),x=z[this.getOLAPCategoryIndex(z)].fns;return mstrmojo.array.find(x,"did",y)>-1;},isRank:function D(x){return !!Q[x];},isScalar:function b(x){return(x||{}).sqt===3;},hasLookupForAttributesProps:function(x){return !!H[x];},getFunctionHelpTopic:function n(x){var y="<div class='func-details' onclick='mstrmojo.ME.MetricDataService.showFunctionHelpTopic(\"##HELPTOPIC##\")'>"+mstrmojo.desc(5811,"Details...")+"</div>";y=y.replace("##HELPTOPIC##",x);return y;},showFunctionHelpTopic:function s(y){var z=mstrApp.isSingleTier,x=((mstrApp.helpUrl||"../help/")+"FunctionsRef/");if(z){x=x+"index.htm#cshid="+(y||"");window.FormWrapper.openPage(x);}else{if(y){x=x+"Content/"+y+".htm";}else{x=x+"index.htm";}window.open(x);}return false;},sortFunctions:function A(y){var z={},x=function(AB,AA){return mstrmojo.array.stringSorter(AB.n,AA.n);};mstrmojo.array.forEach(y,function(AA){mstrmojo.array.forEach(AA&&AA.fns,function(AB){if(AB&&AB.did){z[AB.did]=AB;}});});return mstrmojo.hash.valarray(z).sort(x);},parseFuncStr:function a(){var x=window.sessionStorage,y=this.functions||x&&x.getItem("functions");if(y){return P(JSON.parse(y).fncs);}},isValEqual:function(AA,z){if(AA===z){return true;}var x=[-1,"-1","True",true],y=[0,"0","False",false];if(x.indexOf(AA)>-1&&x.indexOf(z)>-1){return true;}else{if(y.indexOf(AA)>-1&&y.indexOf(z)>-1){return true;}}return false;},isFuncHasUseLookupForAttributeProp:function(y){var x=[f.FunctionSum,f.FunctionCount,f.FunctionAvg,f.FunctionMin,f.FunctionMax,f.FunctionProduct,f.FunctionMedian,f.FunctionMode,f.FunctionStdev,f.FunctionVar,f.FunctionGeomean,f.FunctionPercentile,f.FunctionStdevP,f.FunctionVarP,f.FunctionFirst,f.FunctionLast,f.ConcatAgg];return x.indexOf(y)>-1;},isLogicOrCompFunc:function(y){var x=y.v.toUpperCase()+y.tp;return !!Y[x]||!!m[x];}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.locales","mstrmojo.date","mstrmojo.DI.DIConstants","mstrmojo.DI.DIDatabaseHelper");mstrmojo.requiresDescs(2052,2170,2265,3434,3544,4530,4699,8002,8984,9614,9919,9920,9921,9922,12491,12492,12493,12494,12495,12509,12771,13031,13131,13132,13980,13981,8536);var T=mstrmojo.DI.DIConstants,O=T.dataTypeMenuItems,L=T.rdcsFlag,D=mstrmojo.dom,J=mstrmojo.array;mstrmojo.DI.DIHelpers=mstrmojo.declare(mstrmojo.Obj,null,null);mstrmojo.DI.DIHelpers.isIE7=function N(){return mstrmojo.dom.isIE7;};mstrmojo.DI.DIHelpers.isIE=function(){return D.isIE||!!D.userAgent.match(/Trident\/7\.0/);};mstrmojo.DI.DIHelpers.isIEOrEdge=function(){return mstrmojo.dom.isEdge||this.isIE();};mstrmojo.DI.DIHelpers.getURLCaption=function(){var U="";if(mstrApp.diParams&&mstrApp.diParams.EnableURLImport){if(mstrApp.diParams.EnableFileImport){if(mstrApp.isSingleTier){if(window.FormWrapper!==window.client){U+="File://";}}else{U+="File://";}}if(mstrApp.diParams.EnableHttpImport){if(U!==""){U+=", ";}U+="Http://, Https://";}if(mstrApp.diParams.EnableFTPImport){if(U!==""){U+=", ";}U+="Ftp://";}}return U;};mstrmojo.DI.DIHelpers.getUrlTooltip=function C(){var U="";if(!mstrApp.diParams){return U;}if(!mstrApp.diParams.EnableURLImport){U=mstrmojo.desc(12491,"URL file uploads are currently disabled. Please contact your administrator.");}else{U=mstrmojo.desc(12492,"Use one of the following URL formats to upload your file:")+" ";U+=mstrmojo.DI.DIHelpers.getURLCaption();if(mstrApp.enableFileImport){U+="\r\r";U+=mstrmojo.desc(12493,"'File://' format allows you to upload files in your local machine. For example: File://ComputerName/path/FileName.");}if(mstrApp.enableHttpImport||mstrApp.enableHttpsImport){U+="\r\r";if(mstrApp.enableFileImport){U+=mstrmojo.desc(12494,"Some other examples are:");}else{U+=mstrmojo.desc(12495,"Some examples are:");}}if(mstrApp.enableHttpImport){U+="\r";U+="http://host/path/FileName";U+="\r";U+="https://user:password@host/path/FileName";}if(mstrApp.enableFtpImport){U+="\r";U+="ftp://user:password@host/path/FileName";U+="\r";U+="ftp://user:password@host:port/path/FileName";}}return U;};mstrmojo.DI.DIHelpers.createMSTRObjects=function(W,Y){var U,X,V;if(W.constructor===Array){U=W;for(V=0;V<U.length;V++){U[V]=mstrmojo.DI.DIHelpers.createMSTRObjects(W[V],Y);}}else{if(typeof W==="object"){U=new mstrmojo.Obj(W);for(X in W){if(!Y||Y.indexOf(X)===-1){if(W.hasOwnProperty(X)){U.set(X,mstrmojo.DI.DIHelpers.createMSTRObjects(W[X],Y));}}}}else{U=W;}}return U;};mstrmojo.DI.DIHelpers.getURLParameters=function(U){var V;var Y;var X=[];if(U){if(U.indexOf("?")>0){U=U.substr(U.indexOf("?")+1);}Y=U.split("&");for(V=0;V<Y.length;V++){var W=Y[V].split("=");if(W.length===2){X[W[0]]=W[1];}}}return X;};mstrmojo.DI.DIHelpers.getBackendSourceType=function(U){var V=T.backendSourceSubtype.localFile;switch(U){case T.sourceSubtype.dropbox:V=T.backendSourceSubtype.dropbox;break;case T.sourceSubtype.bisource:V=T.backendSourceSubtype.bISources;break;case T.sourceSubtype.clipboard:V=T.backendSourceSubtype.clipboard;break;case T.sourceSubtype.facebook:V=T.backendSourceSubtype.facebook;break;case T.sourceSubtype.googleAnalytics:V=T.backendSourceSubtype.googleAnalytics;break;case T.sourceSubtype.googleBigQuery:V=T.backendSourceSubtype.googleBigQuery;break;case T.sourceSubtype.googleBigQueryFFSQL:V=T.backendSourceSubtype.googleBigQueryFFSQLModel;break;case T.sourceSubtype.googleBigQuerySingleTable:V=T.backendSourceSubtype.googleBigQuerySingleTable;break;case T.sourceSubtype.googleDrive:V=T.backendSourceSubtype.googleDrive;break;case T.sourceSubtype.hadoop:V=T.backendSourceSubtype.hadoopFileBrowser;break;case T.sourceSubtype.localFile:V=T.backendSourceSubtype.localFile;break;case T.sourceSubtype.mdx:V=T.backendSourceSubtype.OLAPSources;break;case T.sourceSubtype.salesforce:V=T.backendSourceSubtype.salesforce;break;case T.sourceSubtype.samplefile:V=T.backendSourceSubtype.samplefile;break;case T.sourceSubtype.searchOnSource:V=T.backendSourceSubtype.searchAsASource;break;case T.sourceSubtype.twitter:V=T.backendSourceSubtype.twitter;break;case T.sourceSubtype.url:V=T.backendSourceSubtype.url;break;case T.sourceSubtype.publicData:V=T.backendSourceSubtype.publicData;break;case T.sourceSubtype.cloudElement:V=T.backendSourceSubtype.cloudElement;break;}return V;};mstrmojo.DI.DIHelpers.getStateParameters=function(V){var U;var Y;var W=[];if(V.indexOf(":")>=0){Y=V.split(":");}else{Y=V.split("%3A");}for(U=0;U<Y.length;U++){var X=Y[U];if(X.substr(2,1)==="_"){W[X.substr(0,2)]=X.substr(3);}}return W;};mstrmojo.DI.DIHelpers.getExtensionType=function(W){var V=W.toLowerCase(),U;if(V===".xls"||V===".xlsx"||V===".xlsm"){U=T.xdaType.excel;}else{if(V===".txt"||V===".csv"||V===".tsv"||V===".prn"){U=T.xdaType.text;}else{U=0;}}return U;};mstrmojo.DI.DIHelpers.setTablesrc=function(U,W,V){if(W){if(!U.tablesSrc[W]){U.tablesSrc[W]=[];}U.tablesSrc[W].push(V);}};function S(U){var W={0:2,1:2,2:2,3:2,4:2,5:2,6:2,7:2,8:3,9:3,10:3,11:2,12:2,13:2,14:8,15:9,16:1,17:3,18:3,21:2,22:2,23:3,30:11,31:2,33:3,34:2},Z={1:T.columnDataTypes.integer,2:T.columnDataTypes.integer,6:T.columnDataTypes.dtdouble,7:T.columnDataTypes.dtfloat,21:T.columnDataTypes.integer,22:T.columnDataTypes.nlong,30:T.columnDataTypes.bigDecimal,34:T.columnDataTypes.int64},V=W[U],Y=Z[U],X="";switch(V.toString()){case T.dataTypeMenuItems.NUMBER:switch(Y){case T.columnDataTypes.integer:X=mstrmojo.desc(9614,"Integer");break;case T.columnDataTypes.nlong:X=mstrmojo.desc(13131,"Long");break;case T.columnDataTypes.int64:X=mstrmojo.desc(13132,"Big Integer");break;case T.columnDataTypes.dtfloat:X=mstrmojo.desc(8002,"Float");break;case T.columnDataTypes.dtdouble:X=mstrmojo.desc(2265,"Double");break;case T.columnDataTypes.bigDecimal:X=mstrmojo.desc(9920,"Big Decimal");break;default:X=mstrmojo.desc(3434,"Number");break;}break;case T.dataTypeMenuItems.DATE:X=mstrmojo.desc(2052,"Date");break;case T.dataTypeMenuItems.DATE_TIME:X=mstrmojo.desc(9919,"DateTime");break;case T.dataTypeMenuItems.TIME:X=mstrmojo.desc(2170,"Time");break;case T.dataTypeMenuItems.TEXT:X=mstrmojo.desc(3544,"Text");break;case T.dataTypeMenuItems.HTML_TAG:X=mstrmojo.desc(9921,"HTML Tag");break;case T.dataTypeMenuItems.PHONE_NUMBER:X=mstrmojo.desc(8984,"Phone Number");break;case T.dataTypeMenuItems.SYMBOL:X=mstrmojo.desc(4530,"Symbol");break;case T.dataTypeMenuItems.URL:X=mstrmojo.desc(9922,"URL");break;case T.dataTypeMenuItems.EMAIL:X=mstrmojo.desc(4699,"Email");break;}return X;}mstrmojo.DI.DIHelpers.getDataTypeString=S;mstrmojo.DI.DIHelpers.parseAlternateSourceValidationResults=function M(c){var a=[],Y,Z,b,d,U,W,X,V;J.forEach(c,function(e){Y=Z=b=d="";W=(e.vt===3)?1:0;switch(e.vt){case 0:case 1:case 2:case 3:Y=e.n;Z=S(e.ddt);U=e.src;b=U.n;d=S(U.ddt);break;case 4:Y=e.n;Z=S(e.ddt);break;case 8:U=e.src;b=U.n;d=S(U.ddt);break;}X=Z?Y+"("+Z+")":Y;V=d?b+"("+d+")":b;a.push([X,W,V]);});return a;};mstrmojo.DI.DIHelpers.getURLFileName=function(V){var U=V.lastIndexOf("/");return U>=0&&U+1!==V.length?V.substr(U+1):V;};mstrmojo.DI.DIHelpers.isOperationMode=function(U){return U!==undefined&&U!==null;};mstrmojo.DI.DIHelpers.isCtrlKey=function(U,W){var V=W||(U||window).event;return V.ctrlKey||V.metaKey;};mstrmojo.DI.DIHelpers.isRefreshable=function(V){var U,W=0;for(U in V.importSources){var X=V.importSources[U];if(X.type===T.sourceType.file&&(X.subtype===T.sourceSubtype.url||X.subtype===T.sourceSubtype.publicData)){if(!X.sourceInfo||X.sourceInfo.url.indexOf("http://mirror.microstrategy.com/datahub/samples")!==0){W++;}}}if(V.getAllTableID().length===W&&!mstrApp.diParams.EnableHttpImport&&!mstrApp.diParams.EnableFTPImport&&!mstrApp.diParams.EnableFileImport&&!mstrApp.diParams.EnableURLImport){return false;}return true;};mstrmojo.DI.DIHelpers.strStartsWith=function(V,U){return V.indexOf(U)===0;};mstrmojo.DI.DIHelpers.adjustDataIdx=function(X,W){var U=[],V;if(!X||X.length===0){return ;}J.forEach(X,function(Y){V=Y.subColumns;if(V&&V.length>1){U=U.concat(V);}else{U.push(Y);}});U.sort(function(Z,Y){return Z[W]-Y[W];});};mstrmojo.DI.DIHelpers.setDataIdx=function(W,V,U){if(!V||V.length===0){return ;}if(V[0].hasOwnProperty("clix")){J.forEach(W,function(Y){var X=Y.ix;Y[U]=J.find(V,"clix",X);if(Y.isMultiForm){J.forEach(Y.subColumns,function(Z){Z[U]=J.find(V,"clix",Z.ix);});}});}if(V[0].hasOwnProperty("did")){J.forEach(W,function(Z){var Y=Z.did;var X=J.find(V,"did",Y);if(X!==-1){Z[U]=X;}if(Z.isMultiForm){J.forEach(Z.subColumns,function(a){X=J.find(V,"did",a.did);if(X!==-1){a[U]=X;}});}});}};mstrmojo.DI.DIHelpers.encodeData=function(U){var V="";if(U!==undefined){if(typeof U==="number"){V=U;}else{V=mstrmojo.string.encodeHtmlString(U,false,true);}}return V;};var E={0:"Bytes",1:"KB",2:"MB",3:"GB",4:"TB",5:"PB"};function P(U){return E[U]||"unknown";}mstrmojo.DI.DIHelpers.getRoundSize=function I(V){var U;for(U=0;(V/1024)>1;U++){V=V/1024;}V=V.toPrecision(3);return V+P(U);};mstrmojo.DI.DIHelpers.findNewElements=function(W,X){var V=[],U;if(W&&W.length){J.forEach(X,function(Y){U=J.indexOf(W,Y);if(U===-1){V.push(Y);}});}else{if(X&&X.length){V=[].concat(X);}}return V;};mstrmojo.DI.DIHelpers.generateCubeName=function(V){var U,W,X=50;U=V.join(" ");if(U.length>X){U=U.slice(0,X)+"...";}W=V.length;if(W>1){U+=" ("+W+" tables)";}return U;};mstrmojo.DI.DIHelpers.parseValidateSourceResults=function(V){var U={isValidate:true,hasError:false,tbids:[],tableValidate:[],missingColumnTbids:[],mismatchedDatatypeTbids:[],missingTableTbids:[],errorTableTbids:[],missingColumns:{},mismatchedDatatypeColumns:{},missingTablesColumns:{},errorTableErrCode:{},errorTableErrMsg:{}},W=V&&V.vts;J.forEach(W,function(e){var X=e.tbid,f=e.vt,Z=e.emsg,c=e.cols||[],Y=true,d=false,b,g=[],a=[];if(f===1){Y=true;}else{switch(f){case T.backendError.switchingFileType:case T.backendError.noExternalSession:case T.backendError.databaseCredentialsNotAvailable:case T.backendError.CECredentialNotAvailable:case T.backendError.AuthenticationError:case T.backendError.shouldBeIgnored:d=true;break;}J.forEach(c,function(h){var i=h.vt;switch(i){case 1:a.push(h);break;case 4:g.push(h);break;}});}if(d){U.errorTableTbids.push(X);U.errorTableErrCode[X]=f;U.errorTableErrMsg[X]=Z;U.isValidate=false;U.hasError=true;}b=g.length>0&&g.length===c.length;if(g.length>0||a.length>0){Y=false;}else{Y=true;}if(Y===false){U.isValidate=false;}U.tbids.push(X);U.tableValidate.push(Y);if(g.length>0){if(b){U.missingTableTbids.push(X);U.missingTablesColumns[X]=g;}else{U.missingColumnTbids.push(X);U.missingColumns[X]=g;}}if(a.length>0){U.mismatchedDatatypeTbids.push(X);U.mismatchedDatatypeColumns[X]=a;}});return U;};mstrmojo.DI.DIHelpers.truncate=function(W,Y,U){if(W&&W.length>Y){var a=3,V=Y-a,Z=Math.ceil(V/2),X=Math.floor(V/2);if(U){return W.substr(0,V)+"...";}else{return W.substr(0,Z)+"..."+W.substr(W.length-X);}}else{return W;}};mstrmojo.DI.DIHelpers.getAbsoluteFileName=function(U){var V,W=U.lastIndexOf("\\");if(W===-1){W=U.lastIndexOf("/");}V=U.substring(W+1,U.length);return V;};mstrmojo.DI.DIHelpers.reevaluatePopupPosition=function(U){if(U){var V=U.style,Y=V.display,X=V.left,W=V.top;V.display="block";if(parseInt(X.substring(0,X.length-2))<0){V.left="0px";}if(parseInt(W.substring(0,W.length-2))<0){V.top="0px";}V.display=Y;}};mstrmojo.DI.DIHelpers.expandNode=function(V){var U=V.visible;V.set("visible",!U);return !U;};mstrmojo.DI.DIHelpers.normalizeTimestamp=function(W){var V=W.replace(/-/g,"/");var U=V.indexOf(".");if(U>0){V=V.substring(0,U);}return V;};mstrmojo.DI.DIHelpers.getBackendErrorStr=function(V,U){var W="";switch(V){case T.backendError.switchingFileType:W=mstrmojo.desc(12509,"Switching the file type is not allowed during republishing or editing the cube.");break;case T.backendError.noExternalSession:case T.backendError.databaseCredentialsNotAvailable:case T.backendError.CECredentialNotAvailable:case T.backendError.AuthenticationError:W=mstrmojo.desc(14392,"We do not have the credentials needed to get the data for this table. Please provide the credentials to proceed publishing this table.");break;}return W;};mstrmojo.DI.DIHelpers.getCommonElements=function(X,Z,Y){var V=[],W,U;for(W=0;X&&W<X.length;W++){for(U=0;Z&&U<Z.length;U++){if(Y(X[W],Z[U])){V.push(X[W]);break;}}}return V;};mstrmojo.DI.DIHelpers.formatDateAndTime=function(c,X){var b=mstrmojo.date;var V=mstrmojo.locales;var W,d,a,Z,U,Y;W=b.parseDateAndOrTime(c);d=W.date;a=W.time;if(X){Y=new Date(Date.UTC(d.year,d.month-1,d.day,a.hour,a.min,a.sec));W=b.getDateJson(Y);d=W;a=W;}Z=b.formatDateInfo(d,V.datetime.DATEDISPLAYFORMAT);U=b.formatTimeInfo(a,V.datetime.TIMEDISPLAYFORMAT);return Z+" "+U;};mstrmojo.DI.DIHelpers.isServerBasedWS=function(){return !!mstrApp.isWorkstation&&!mstrApp.isSingleTier;};mstrmojo.DI.DIHelpers.isLocalWS=function(){return !!mstrApp.isWorkstation&&!!mstrApp.isSingleTier;};mstrmojo.DI.DIHelpers.isDIinVI=function(){return !!mstrApp.isWorkstation&&!!mstrApp.isSingleTier&&!!mstrApp.isPopup;};mstrmojo.DI.DIHelpers.extractFileNameFromHadoopURL=function(V){if(!V){return"";}var U,W;U=V.lastIndexOf("/")+1;W=V.substring(U);return W;};mstrmojo.DI.DIHelpers.extractFileExtensionFromHadoopURL=function(V){if(!V){return"";}var U,W;U=V.lastIndexOf("/")+1;W=V.substring(U);return W.substring(W.lastIndexOf(".")+1);};mstrmojo.DI.DIHelpers.isWS=function(){return !!mstrApp.isWorkstation;};mstrmojo.DI.DIHelpers.getEnvObj=function(){var X=(navigator.platform.indexOf("Win")!==-1?"Win":"Mac"),U=!!mstrApp.isWorkstation?"WS":"Web",V=[];V.push(U,X);return{ENV:V.join("-"),isWSClient:function(){if(!window.FormWrapper||!window.FormWrapper.isDesktop){return false;}return !window.FormWrapper.isDesktop();},isDesktopClient:function(){if(!window.FormWrapper||!window.FormWrapper.isDesktop){return false;}return window.FormWrapper.isDesktop();},isWeb:function(){return U==="Web";},isWS:function(){return U==="WS";},isWin:function(){return X==="Win";},isMac:function(){return X==="Mac";},isDataSet:function(){return mstrApp.placeholder==="DIApp"||mstrApp.placeholder==="mainDIApp"||mstrApp.placeholder==="QBApp";},isDIinVI:function(){return !!mstrApp.isFromVI;},isInDI:function(){return mstrApp.placeholder==="DIApp"||mstrApp.placeholder==="mainDIApp";},isInQB:function(){return mstrApp.placeholder==="QBApp";},isAppSchema:function(){return !!window.mstrAppSchema;},isWebWin:function(){return this.isWeb()&&this.isWin();},isWebMac:function(){return this.isWeb()&&this.isMac();},isWebDataSet:function(){return this.isWeb()&&this.isDataSet();},isWebDossier:function(){return this.isWeb()&&this.isDIinVI();},isWSWin:function(){return this.isWS()&&this.isWin();},isWSMac:function(){return this.isWS()&&this.isMac();},isWSDataSet:function(){return this.isWS()&&this.isDataSet();},isServerBasedWS:mstrmojo.DI.DIHelpers.isServerBasedWS,isWSDossier:function(){return this.isWS()&&this.isDIinVI();},isWSLiveMode:function W(){return this.isWS()&&parseInt(window.FormWrapper.isWSLiveMode(),10)===1;},isWSDossierLocalMode:function(){return this.isWSDossier()&&!this.isWSLiveMode();},isWebWinDataSet:function(){return this.isWeb()&&this.isWin()&&this.isDataSet();},isWebMacDataSet:function(){return this.isWeb()&&this.isMac()&&this.isDataSet();},isWebWinDossier:function(){return this.isWeb()&&this.isWin()&&this.isDIinVI();},isWebMacDossier:function(){return this.isWeb()&&this.isMac()&&this.isDIinVI();},isWSWinDataSet:function(){return this.isWS()&&this.isWin()&&this.isDataSet();},isWSMacDataSet:function(){return this.isWS()&&this.isMac()&&this.isDataSet();},isWSWinDossier:function(){return this.isWS()&&this.isWin()&&this.isDIinVI();},isWSMacDossier:function(){return this.isWS()&&this.isMac()&&this.isDIinVI();},isStandaloneDataSet:function(){return !this.isDIinVI()&&this.isDataSet();}};};mstrmojo.DI.DIHelpers.isOnetier=function(){return !!mstrApp.isSingleTier;};mstrmojo.DI.DIHelpers.getHierarchyMappingXML=function(Z,a){var W="";var V=0,X=1,Y=12;if(a&&a[L.ID]){W+="<mpcs>";W+="<mpc ";W+='did="'+a[L.ID].did+'" drvflg="'+V+(a[L.ID].n?('" n="'+a[L.ID].n+'" ot="'):"")+Y+'" recurisve="'+X+'" ';if(!!Z&&Z!==""){W+='oid="'+Z+'" ';}W+=">";if(a[L.JOIN_ID]){W+="<rdcs>";}for(var U=L.JOIN_ID;U<=L.DISTANCE;U++){if(a[U]!==undefined){W+='<rdc did="'+a[U].did+'" fg="'+U+'"/>';}}if(a[L.JOIN_ID]){W+="</rdcs>";}W+="</mpc>";W+="</mpcs>";}return W;};mstrmojo.DI.DIHelpers.getOperationMode=function(){return mstrApp.getRootController().getModel().operationMode;};mstrmojo.DI.DIHelpers.standardizeDBRolesFormat=function Q(c){var W=["att","dbRole","tableMap"],d,f,Z,U,X,V,a,Y,e,g,b=(function(){var h="list",j="number",i="text";function k(l,q,p,o,n,m){if(l&&p){if(m){l.push({field:q,fieldV:p,IDS:o,options:m,tp:n});}else{l.push({field:q,fieldV:p,IDS:o,tp:n});}}}return{authenticationmethod:function(l,m){k(l,"auth",m,7776,h,[{IDS:13980,n:mstrmojo.desc(13980),v:"1"},{IDS:13981,n:mstrmojo.desc(13981),v:"4"}]);},databasename:function(l,m){k(l,"db",m,8519,i);},hostname:function(l,m){k(l,"host",m,8533,i);},port:function(l,m){k(l,"port",m,8534,j);},server:function(l,m){k(l,"svr",m,8536,i);}};}());c=Object.keys(c).map(function(h){return mstrmojo.DI.DIHelpers.createMSTRObjects(c[h],W);});J.forEach(c,function(h){J.forEach(h.tables,function(i){i.dbRole=(i.dbRole&&i.dbRole.oi)||i.dbRole;i.dbmsObj=i.dbmsObj&&i.dbmsObj.oi;f=i.dbRole;if(f){f.dbmsObj=i.dbmsObj;Z=f.dbmsObj;if(!f.dbms){f.dbms=f.def&&f.def.dbms&&f.def.dbms.did;}}if(!Z||Z.DBInfo){return ;}Z.DBInfo={};d=Z.DBInfo;U=f.efd;if(!U){return ;}U.forEach(function(j){X=j.oi&&j.oi.def;if(!X){return ;}g=X.dbtp;if(g){f.db_type=g;d.dbTypes={dbt:{v:g,n:mstrmojo.desc(mstrmojo.DI.DIDatabaseHelper.getDescriptionIdByDBType(g))}};}V=X.cnsr;if(!V){return ;}e=[];Y=null;f.connstr=V;V.split(";").forEach(function(k){a=k.split("=");a[0]=a[0].toLowerCase().trim();if(a[0]==="driver"){d.driverInstalled=true;}else{if(a[0]==="authenticationmethod"){Y=a;}else{if(b[a[0]]){b[a[0]](e,a[1]);}}}});if(Y){b[Y[0]](e,Y[1]);}});});});return c;};mstrmojo.DI.DIHelpers.filterDisableSources=function A(U){return J.indexOf(mstrApp.diParams.disabledSources,U)<0;};mstrmojo.DI.DIHelpers.getPopupWindowOptions=function R(){var Y={};var W=window.screenX||window.screenLeft||0,V=window.screenY||window.screenTop||0,X=800,U=600,Z;if(document.body&&document.body.offsetWidth){X=document.body.offsetWidth;U=document.body.offsetHeight;}if(document.compatMode==="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth){X=document.documentElement.offsetWidth;U=document.documentElement.offsetHeight;}if(window.innerWidth&&window.innerHeight){X=window.innerWidth;U=window.innerHeight;}if(window.outerWidth){X=window.outerWidth;}if(window.outerHeight){U=window.outerHeight;}Y.height=U*0.5;Y.width=X*0.8;if(Y.height<600||isNaN(Y.height)){Y.height=600;}if(Y.width<800||isNaN(Y.width)){Y.width=800;}Y.left=W+(X-Y.width)/2;Y.top=V+(U-Y.height)/8;if(this.getEnvObj().isWSWin()&&this.getEnvObj().isDIinVI()){Y.left=(window.screen.width-Y.width)/2;Y.top=(window.screen.height-Y.height)/2;}Z="width="+Y.width+",height="+Y.height;Z+=",toolbar=0,scrollbars=1,status=1,resizable=1,location=1,menuBar=0";Z+=",left="+Y.left+",top="+Y.top;return Z;};mstrmojo.DI.DIHelpers.createPopupWindow=function G(V,U){var W,X;X=this.getPopupWindowOptions();if(!V){V="";}W=window.open(V,U,X);return{wnd:W};};mstrmojo.DI.DIHelpers.openPopupWindow=function H(X,V,U){var W;if(X&&!X.closed){X.location=U;X.focus();}else{W=this.createPopupWindow(U);X=W.wnd;if(X){X.focus();}}return X;};mstrmojo.DI.DIHelpers.sendResponse2Window=function B(V,U,Y){var X;if(Y){X=Y;}else{X=window.opener;}if(X){if(U===undefined){U=window.location.origin;if(!U){U=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");}}try{if(this.isIE()&&X.postMessagePassthrough){X.postMessagePassthrough(V,U);try{window.open("","_self","");window.close();}catch(Z){window.close();}}else{X.postMessage(V,U);}}catch(W){console.log("postMessage error: "+W);}}};mstrmojo.DI.DIHelpers.convertDataSourceType2SourceType=function F(U){switch(U){case T.dataSourceType.DROPBOX:return T.sourceType.dropbox;case T.dataSourceType.GOOGLE_DRIVE:return T.sourceType.googleDrive;case T.dataSourceType.GOOGLE_ANALYTICS:return T.sourceType.googleAnalytics;case T.dataSourceType.SALESFORCE:return T.sourceType.salesforce;case T.dataSourceType.GOOGLE_BIGQUERY:return T.sourceType.googleBigQuery;default:return -1;}};mstrmojo.DI.DIHelpers.highlightKeyWords=function K(c,d,U){var W="\\*.?+$^[](){}|/",e=c,a,X;if(c===""){return d;}for(X in W){if(W.hasOwnProperty(X)){a=W[X];e=e.replace(new RegExp("\\"+a,"g"),"\\"+a);}}var b=new RegExp("("+e+")","ig");var V="\u001E",Z=mstrmojo.string.encodeHtmlString,Y;if(b.test(d)){d=d.replace(b,function(f){return V+f+V;});Y=J.map((d||"").split(V),function(g,f){return(f%2===0)?Z(g):('<span class="'+U+'">'+Z(g)+"</span>");});return Y.join("");}};mstrmojo.DI.DIHelpers.detectCustomImg=function(X,W){if(!X||!(W.nodeType&&W.nodeType===window.Node.ELEMENT_NODE)){return ;}var U=X.replace?X.replace(/\s+/g,""):"";var Y=document.getElementsByTagName("head")[0];var V=document.createElement("img");V.src="../javascript/mojo/css/images/DI/connectors/"+U+".png";V.onload=function(){W.style.background="url(../javascript/mojo/css/images/DI/connectors/"+U+".png) no-repeat";Y.removeChild(V);};V.onerror=function(){W.style.background="url(../javascript/mojo/css/images/DI/connectors/default.png) no-repeat";Y.removeChild(V);};Y.appendChild(V);};mstrmojo.DI.DIHelpers.spliceUrlBySeparator=function(V){var U=V.split("#");return U.slice(U.length/2+1).join("#");};mstrmojo.DI.DIHelpers.isOriginalConnector=function(V){var U=T.originalConnector;if(U.elastic===V||U.tapClicks===V){return true;}return false;};mstrmojo.DI.DIHelpers.acceptEventFromAncestor=function(U){if(!U){return true;}if(!this.domNode||typeof U.contains!=="function"||!this.hasRendered){return false;}return U.contains(this.domNode);};mstrmojo.DI.DIHelpers.isdbRoleWritable=function(U){if(mstrmojo.DI.DIHelpers.isOnetier()){return true;}else{return U.writable==="1"&&mstrApp.rootController.hasPrivilege(T.DssXmlPrivileges.DssXmlPrivilegesUseDatabaseInstanceManager);}};mstrmojo.DI.DIHelpers.isdbRoleUsable=function(U){return mstrmojo.DI.DIHelpers.isOnetier()?true:U.usable==="1";};mstrmojo.DI.DIHelpers.applyDriverSuffix=function(W){if(!W||!W.Preferences){return ;}var U=JSON.stringify(W),V=W.Preferences.driverNameSuffix,Y=this.getEnvObj();var X="Platform";if(Y.isDesktopClient()){X=Y.isMac()?"DesktopMac":"DesktopWin";}else{if(Y.isWSClient()){X=Y.isMac()?"WorkstationMac":"WorkstationWin";}}var Z=V[J.find(V,"n",X)];return JSON.parse(U.replace(/!#DRIVERSUFFIX#!/g,Z?Z.value:""));};mstrmojo.DI.DIHelpers.isGeo=function(U){return U.georole&&U.georole>0;};mstrmojo.DI.DIHelpers.isTime=function(U){return U.dtp===parseInt(O.DATE,10)||U.dtp===parseInt(O.DATE_TIME,10)||U.dtp===parseInt(O.TIME,10);};}());(function(){mstrmojo.requiresCls("mstrmojo.Widget");var C=mstrmojo.css,G=mstrmojo.array;function F(H,J){var I={searchMetadata:{taskId:"searchMetadata",styleName:this.searchStyleName,rootFolderID:this.rootID,searchPattern:this.searchPattern+"*",nameWildcards:(this.qse?16:1),quickSearch:this.qse,sortKey:(this.qse?-1:6),blockBegin:this.blockBegin||1,blockCount:this.blockCount,recursive:1,folderBrowserStyle:0,includeAncestorInfo:"true",includeObjectDesc:this.includeObjectDesc,searchXML:this.searchXML||"",dataSourcesXML:this.dataSources||"",objectType:this.objectTypes},browseFolder:{taskId:"searchMetadata",rootFolderID:this.rootID,blockBegin:this.blockBegin,blockCount:this.blockCount,recursive:this.hierarchical?0:(this.searchXML?"":1),folderBrowserStyle:this.hierarchical?1:0,includeAncestorInfo:String(!!this.hierarchical),searchXML:this.searchXML||"",dataSourcesXML:this.dataSources||"",objectType:this.objectTypes},browseElements:{taskId:"browseElements",styleName:"MojoAttributeStyle",attributeID:this.rootID,blockBegin:this.blockBegin,blockCount:this.blockCount,filterXML:this.filterXML||"",searchPattern:this.searchPattern||"",matchCase:!!this.matchCase,dataSourcesXML:this.dataSourcesXML||"",includeFormNames:!!this.collectForms,includeFormValues:!!this.bIncludeFormValues,displayedForms:this.displayedForms||1,dimensionID:this.dimensionId||""}}[H]||{};if(typeof J==="object"){mstrmojo.hash.copy(J,I);}return I;}var B="##searchPattern";mstrmojo.SearchBox2=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.SearchBox2",taskId:"searchMetadata",rootID:null,searchStyleName:"MojoFolderStyle",objectTypes:"3,14,256,257,1024,1027,2048,3072,10",token:{searchMetadata:/\//,browseElements:/(^-)|(,)|( OR )|( AND)|([<>]=?)|(&)|( )|(["\[\]\/])/},blockCount:50,blockBegin:1,minSearchLength:2,matchCase:false,enableMatchCase:true,supportIncFetch:true,quickSearch:false,searchAfterSearchPatternRestored:false,includeObjectDesc:true,forceResetCache:false,onUpdateSearchParams:mstrmojo.emptyFn,markupString:'<table id={@id} cellspacing=0 cellpadding=0 class="mstrmojo-SearchBox-Wrapper {@cssClass}" style="{@cssText};"><tr><td><div class="mstrmojo-SearchBox" mstrAttach:click ><input class="mstrmojo-SearchBox-input" type="text" mstrAttach:keyup,blur /></div></td><td><div class="mstrmojo-SearchBox-bg"><div class="mstrmojo-SearchBox-search" id="{@id}sbSearch" mstrAttach:click ></div></div></td><td><div class="mstrmojo-SearchBox-options" style="{@cssTextShowMC}"><input id="{@id}sbMatchCase" type="checkbox" mstrAttach:click /><label for="{@id}sbMatchCase">'+mstrmojo.desc(4326,"Case Sensitive")+"</label></div></td></tr></table>",markupSlots:{inputNode:function(){return this.domNode.rows[0].cells[0].firstChild.firstChild;},searchNode:function(){return this.domNode.rows[0].cells[1].firstChild.firstChild;},optionNode:function(){return this.domNode.rows[0].cells[2].firstChild.firstChild;}},preBuildRendering:function(){this.cssTextShowMC=this.enableMatchCase?"":"display: none";},postBuildRendering:function(){if(this._super){this._super();}this.matchCase=this.optionNode.checked;},onkeyup:function E(H){var J=this;var I=J.searchTimer;if(I){window.clearTimeout(I);}J.searchTimer=window.setTimeout(function(){J.onkeyupDelayed(H);delete J._searchTimer;},parseInt(H.e.keyCode||H.e.charCode,10)===13?0:J.searchDelay);},onkeyupDelayed:function A(I){var H=I.hWin,K=I.e||H.event;var J=mstrmojo.string.trim(this.inputNode.value);if(this.searchNode){C.toggleClass(this.searchNode,["clear"],J.length>0);}this.showTaskError=false;this.click2Search=false;if(J.length==0||this.autoSubmit||this.onEnter&&K.keyCode===13){this._onsearch();}},onEnter:function(){this._onsearch();},onclick:function(I){var H=I.hWin,K=I.e||H.event,M=K.target||K.srcElement,L=M&&M.id;switch(L.replace(this.id,"")){case"sbDown":if(this.enableMatchCase){var J=this.optionNode.parentNode.style;J.display=J.display=="block"?"none":"block";}break;case"sbSearch":if(this.inputNode.value.length>0){this.clearSearch();}break;case"sbMatchCase":this.set("matchCase",this.optionNode.checked);break;case"sbSpinner":break;}},clearSearch:function(){this.inputNode.value="";C.removeClass(this.searchNode,["clear"]);var I=this.searchCache,H=this.rootID;if(I&&I[H]){I[H][B]="";}this._onsearch(true);},onmatchCaseChange:function(){this.matchCaseChanged=true;this._onsearch();},onrootIDChange:function(){this.rootChanged=true;this._setupCache(this.forceResetCache);var I=this.searchCache[this.rootID];if(I){var H=I[B]||"";this.inputNode.value=H;if(H.length>0){if(H.length>=this.minSearchLength&&this.searchAfterSearchPatternRestored){this._onsearch();}}}},getRootID:function(){},contentWidget:null,_notifyContentWidget:function(I){var H=this.contentWidget||this;H.set("items",I[0]);if(this.supportIncFetch){var J=I[1],L=I[2],K=this.blockCount;H.set("ifs",{np:Math.floor(J/K)+((J%K>0)?1:0),cp:Math.floor(L/K)+((L%K>0)?1:0)});}},_onsearch:function(H){this.getRootID();this._setupCache();var K=mstrmojo.string.trim(this.inputNode.value);if(K.length===0){H=true;}var L=this.token[this.taskId];if(L.test(K)){}if(this.searchPattern==K&&!this.rootChanged&&!this.matchCaseChanged&&!this.click2Search){return ;}var M=this.rootID,J=this.searchCache[M];if((K.length<this.minSearchLength&&!this.click2Search)&&!H){if(this.searchPattern&&this.searchPattern.length>=this.minSearchLength){this._notifyContentWidget(J[M]);this.searchPattern=K;}}else{this.searchPattern=K;J[B]=this.searchPattern;var I=this.filterCache(K,J,H);if((this.click2Search||I===null)&&!H){this.blockBegin=1;this.fetch();return ;}else{this._notifyContentWidget(I);}}J[B]=K;},_setupCache:function(J){var K=this.searchCache,I=this.rootID;if(K&&(J||!K[I])){K[I]=K[I]||{};var H=this.contentWidget&&this.contentWidget.items||this.rootCacheItems||[];K[I][I]=[H,this.totalSize||0,this.blockBegin||1].concat();}},taskCallId:0,path:mstrConfig.taskURL,method:"POST",serverRequest:function D(H,I){if(mstrApp&&mstrApp.serverRequest){mstrApp.serverRequest(H,I);}else{mstrmojo.xhr.request("POST",this.path,I,H,undefined,this.XServer,this.baseParams);}},fetch:function(){this.rootChanged=false;this.matchCaseChanged=false;if(this.spinnerNode){this.spinnerNode.style.display="block";}if(this.preFetch){this.preFetch();}var H=this,I=F.apply(this,[this.taskId]);I.searchPattern=this.searchPattern;this.onUpdateSearchParams(I);var J={success:function(K){var L=K.items||K.es||[];L=[L,K.totalSize||K.sz||0,K.blockBegin||K.bb];mstrmojo.all[H.id].searchCache[H.rootID][(I.searchPattern.length==0?H.rootID:H.buildIndex(I.searchPattern))]=L;H._notifyContentWidget(L);},failure:function(K){if(H.showTaskError){mstrmojo.alert(mstrmojo.desc(8117,"Data request failed:")+" \n"+K.getResponseHeader("X-MSTR-TaskFailureMsg"));}},complete:function(){if(H.spinnerNode){H.spinnerNode.style.display="none";}if(H.postFetch){H.postFetch();}}};this.serverRequest(I,J);},fetchPage:function(H){this.blockBegin=H*this.blockCount+1;this.fetch();},filterCache:function(J,M,I){var H=M&&M[I?this.rootID:this.buildIndex(J)];if(H){return H;}var K=this.token[this.taskId];if(K.test(J)||this.totalSize>this.blockCount){return null;}var O=J.replace(/.$/,"");H=M&&M[this.buildIndex(O)];while(H===undefined&&(O=O.replace(/.$/,"")).length>0){H=M&&M[this.buildIndex(O)];}if(H!==undefined){if(H[1]>this.blockCount){return null;}var L=H[0],N=[];G.forEach(L,function(P){if(P.n.search(new RegExp(J,this.matchCase?"":"i"))>-1){N.push(P);}});this.totalSize=N.length;return(M[this.buildIndex(J)]=[N,N.length,this.blockBegin].concat());}return null;},buildIndex:function(H){if(H.replace(/^\s|\s$/g,"").length===0){return"";}return !this.matchCase?H.toUpperCase():H+"::0";},init:function(H){if(this._super){this._super(H);}this.qse=mstrApp.useQuickSearch&&mstrApp.useQuickSearch()||0;this.autoSubmit=this.quickSearch&&(mstrApp.searchAutoComplete&&mstrApp.searchAutoComplete()||false);this.searchDelay=mstrApp.searchAutoCompleteDelay&&mstrApp.searchAutoCompleteDelay()||0;this.xhr=new mstrmojo.SimpleXHR();this.searchCache=this.searchCache||{};},clear:function(){this.inputNode.value="";C.removeClass(this.searchNode,["clear"]);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.hash");function A(H,E,G,F){var D=mstrmojo.hash.copy(F,{props:{left:{isStyle:true,start:H,stop:E,suffix:"px",ease:mstrmojo.ease.linear}},duration:G});(new mstrmojo.fx.AnimateProp(D)).play();}function B(K,N,G,L){var I=K.domNode,M=I.offsetWidth,D=K.scrollableIncFetch;var E=K.hasAnimation&&(!(/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent))||Number(RegExp.$1)>3.5),J=L?1:-1,F=parseInt(M,10)*J,H=E?500:0;A(0,-F,H,{target:G,duration:H,preStart:function(){this.target.style.overflowY="hidden";},onEnd:function(){this.target.style.display="none";}});A(F,0,H,{target:N,preStart:function(){this.target.style.display="block";this.target.style.overflowY=(D?"visible":"auto");}});if(K.waiting){A(0,-F,H,{widget:K,slot:"loaderNode",onEnd:function(){this.widget.waiting=false;}});}}var C=function(D){var E=D.currentPage;if(E===D.p1Node){E=D.p2Node;}else{E=D.p1Node;}D.currentPage=E;};mstrmojo.Booklet=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Booklet",pageClass:"mstrmojo-BookletPage",markupString:'<div id="{@id}" class="mstrmojo-Booklet {@cssClass}" style="{@cssText}"><div id="{@id}_p1" class="mstrmojo-BookletPage" ></div><div id="{@id}_p2" class="mstrmojo-BookletPage" style="left:-100%;"></div><div id="{@id}_ldr" class="mstrmojo-BookletLoader" ></div></div>',markupSlots:{containerNode:function(){return this.domNode;},p1Node:function(){return this.domNode.firstChild;},p2Node:function(){return this.domNode.childNodes[1];},loaderNode:function(){return this.domNode.childNodes[2];}},markupMethods:{onnextChange:function(){var G=this.next;if(!G){return ;}var D=this.currentPage,F=this.p1Node,E=this.currentPage=(D==F)?this.p2Node:F;if(!(G instanceof mstrmojo.Obj)){G=this.next=mstrmojo.insert(G);}if(!G.hasRendered){G.placeholder=E.appendChild(document.createElement("span"));G.render();}else{if(E.firstChild){E.replaceChild(G.domNode,E.firstChild);}else{E.appendChild(G.domNode);}}this.set("waiting",false);if(E&&D){B(this,E,D,this.turnDirFwd);}else{if(this.scrollableIncFetch){E.style.overflowY="visible";}}},onwaitingChange:function(D){this.loaderNode.style.left=(this.waiting)?0:"-100%";},onheightChange:function(D){if(this.height){this.domNode.style.height=this.height;}},onwidthChange:function(D){if(this.width){this.domNode.style.width=this.width;}}},enabled:true,waiting:false,next:null,currentPage:null,turnDirFwd:true,hasAnimation:true,scrollableIncFetch:false,FORWARD:true,REVERSE:false,turnFwd:function(D){this.turn(D,this.FORWARD);},turnBack:function(D){this.turn(D,this.REVERSE);},turn:function(D,E){this.set("turnDirFwd",E);this.set("next",D);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.css","mstrmojo.string");function C(H,D,E){var K=[];var G=H.optionRenderer,I=G&&G.render;if(I&&typeof I==="function"){var L=H.options,J=Math.min(E,((L&&L.length)||0)),F;for(F=D;F<J;F++){K.push(I(L[F],F,H));}}return K.join("");}mstrmojo.DropDownList=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.DropDownList",title:"",selectCssClass:"",tooltip:"",cssDisplay:"inline",value:"",unset:false,options:null,optionValueField:"v",optionNameField:"n",idx:-1,renderedOptions:"",markupString:'<span id="{@id}"  class="mstrmojo-DropDownList {@cssClass}">{@en@title}<select id="{@id}_select" class="mstrmojo-DropDownList-select {@selectCssClass}"  style="{@cssText}" title="{@tooltip}"onchange="mstrmojo.all[\'{@id}\'].set(\'selected\', this.options[this.selectedIndex].value);">{@renderedOptions}</select><div class = "strikeoutContainer"></div></span>',markupSlots:{selectNode:function(){return this.domNode.getElementsByTagName("select")[0];}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onidxChange:function(){var D=this.domNode.getElementsByTagName("select");if(D&&D.length){D[0].selectedIndex=this.idx;}},onvalueChange:function(){var I=this.selectNode,G=I.options,F=this.value,E,H;for(H=0;H<G.length;H++){var D=G[H].value.toString()===F;if(D){E=H;if(F!==""){mstrmojo.css.toggleClass(G[H],"selected",D);}break;}}if(I.length>0&&E>0&&this.unset){if(this.options[0].v==="-1"){I.remove(0);E--;}this.unset=false;}this.set("idx",E);},onwidthChange:function(){var D=this.width;if(D>=0){this.selectNode.style.width=D+"px";}}},_set_selected:function(G,D){var E=this.selectNode,F=this[G]!==D;this[G]=D;if(E){this.set("value",D);}return F;},preBuildRendering:function A(){var F=this;if(F.unset){F.idx=0;}var E=F.options,D=(E&&E.length)||0;if(D){F.renderedOptions=C(F,0,D);}return this._super();},optionRenderer:{render:function(E,D,F){return mstrmojo.string.apply(F.getOptionMarkup(E),F.getOptionProps(E,D));}},getOptionMarkup:function(D){return'<option value="{@en@v}" class="{@cls}" style="{@style}" {@sel}>{@en@n}</option>';},getOptionProps:function B(F,D){var G=this,H=F[G.optionValueField],E=D===parseInt(G.idx,10);G.selected=G.value=E?H.toString():G.value;return{cls:E?"selected":"",v:H===undefined?"":H,n:F[G.optionNameField]||"",style:"",sel:E?"selected":""};}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget");var E=mstrmojo.Widget;mstrmojo.ui._IsPulldown=mstrmojo.provide("mstrmojo.ui._IsPulldown",{scriptClass:"mstrmojo.ui._IsPulldown",markupString:'<div id="{@id}" style="{@cssText}" class="mstrmojo-ui-Pulldown {@cssClass}" mstrAttach:mousedown,click><div class="mstrmojo-ui-Pulldown-text {@cssTextClass}" title="{@title}" style="{@labelCssText}">{@value}</div><div class="container"></div></div>',markupSlots:{selectedNode:function D(){return this.domNode.firstChild;},containerNode:function A(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:E.visibleMarkupMethod,onheightChange:E.heightMarkupMethod,onwidthChange:E.widthMarkupMethod,onvalueChange:function F(){this.selectedNode.innerHTML=this.value||"";},onenabledChange:mstrmojo.Widget.enabledMarkupMethod},getPopupList:mstrmojo.emptyFn,anchorSlot:"selectedNode",postBuildRendering:function B(){this._super();this.getPopupList().set("items",this.items);var G=this.selectedIndex,H=this.selectedIndices;if(G!==undefined){this.set("selectedIndex",G);}if(H!==undefined){this.set("selectedIndices",mstrmojo.hash.copy(H||{}));}},onitemsChange:function C(){var G=this.getPopupList();if(G){G.set("items",this.items);}},onPopupWidgetOpened:function(){var G=this.getPopupList();if(G&&(!G.items||G.items.length===0)){G.close();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.boxmodel","mstrmojo.array","mstrmojo.hash","mstrmojo.dom","mstrmojo.css","mstrmojo.Widget","mstrmojo.Arr","mstrmojo._HasLayout","mstrmojo._ListBase2Selections","mstrmojo.ListSelector","mstrmojo._TouchScrolling","mstrmojo._PagingList");var a=mstrmojo.hash,f=mstrmojo.array,e=mstrmojo.boxmodel,c=mstrmojo.dom;function A(i,k,h){var j=i.listSelector;if(j){j[k](i,i.itemsContainerNode,h);}}function L(i,h){var j=i.lastPagePos;if(!j||j.dragId!==h){j=e.offset(i.itemsContainerNode);j.dragId=h;i.lastPagePos=j;var k=i.scrollboxNode;i.lastScrollPos={left:k.scrollLeft,top:k.scrollTop,width:k.clientWidth,height:k.clientHeight};}}function O(k,n,i){var j=n&&n.node;if(j===k.dropCueNode||j===k.dropCueNode.firstChild){return k.dropCuePos;}var l=k.listMapper;var h=l&&l.whereDrop(k,k.itemsContainerNode,j,n.pos,{left:k.lastPagePos.left-k.lastScrollPos.left,top:k.lastPagePos.top-k.lastScrollPos.top,width:k.lastScrollPos.width,height:k.lastScrollPos.height});var m=k.dropCuePos;return((i!==false)&&m&&h&&(m.idx===h.idx)&&(m.left===h.left)&&(m.top===h.top))?m:h;}var g="attachEventListener";function D(i,h){if(i.makeObservable){h=h||[];if(!h[g]){mstrmojo.hash.make(h,i.itemsScriptClass||mstrmojo.Arr);}}return h;}function H(i,h){if(h&&h[g]){i._sub_its=h;i._sub_add=h[g]("add",i.id,"preadd");i._sub_rmv=h[g]("remove",i.id,"preremove");}}function G(h){if(h._sub_its){var i=mstrmojo.publisher;i.unsubscribe(h._sub_add);i.unsubscribe(h._sub_rmv);delete h._sub_add;delete h._sub_rmv;delete h._sub_its;}}mstrmojo.ListBase2=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._ListBase2Selections,mstrmojo._TouchScrolling,mstrmojo._PagingList,mstrmojo._HasLayout],{scriptClass:"mstrmojo.ListBase2",items:null,markupString:'<div id="{@id}" class="mstrmojo-ListBase2 {@cssClass}" style="position:relative;{@cssText}" mstrAttach:keyup,keypress,mousedown,mouseup,dblclick><div class="mstrmojo-ListBase2-itemsContainer" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode;},itemsContainerNode:function(){return this.domNode.firstChild;},dropCueNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},ondropCuePosChange:function(){var i=this.dropCueNode,h=i&&i.style;if(!h){return ;}var k=this.dropCuePos,j=!!k;if(j){h.left=k.left+"px";h.top=k.top+"px";}h.display=j?"block":"none";},onpageChange:function(){if(this.usePaging&&!this._inScroll){this._inPaging=true;this.listMapper.toPage(this,this.page);this._inPaging=false;}},onwidthChange:function(){if(!isNaN(parseInt(this.width))){this.domNode.style.width=this.width;}},onheightChange:function(){if(!isNaN(parseInt(this.height))){this.domNode.style.height=this.height;}}},autoHide:false,renderOnScroll:false,firstRenderBlockSize:50,renderBlockSize:50,listMapper:null,listBuilder:null,listSelector:mstrmojo.ListSelector,animate:false,itemsEffect:null,containerResizable:true,init:function Z(m){this._super(m);this.items=this.initItems(this.items);var l=this.selectedIndices,j=this.selectedIndicesList,k=this.selectedIndex,n=this.selectedItem;this.selectedIndices={};this.selectedIndex=-1;delete this.selectedIndicesList;delete this.selectedItem;if(l||j||(k>-1)||n){this.initSelections(l,j,k,n);}if(this.postInitItems){this.postInitItems();}},initItems:function I(h){return D(this,h);},preBuildRendering:function W(){var l=this.listBuilder,o=l.newContext(this);this.ctxtBuilder=o;var i=this.markupSlots,k=!!(this.renderOnScroll&&this.renderBlockSize&&i&&i.scrollboxNode),j=this.items,h=(j&&j.length)||0,m=k?this.firstRenderBlockSize:h,n=k?this.firstRenderBlockSize:0;this._eros=k;this.paused=false;this.itemsHtml=this.listMapper.buildItemWrappers(j,l,this,o,m,n).join("");this.itemsContainerCssText="visibility: hidden";if(this._super){this._super();}},postBuildRendering:function E(){delete this.itemsHtml;var m=this.listMapper;if(m&&m.postBuildRendering){m.postBuildRendering(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder);}H(this,this.items);if(this._eros||this.usePaging){if(!this._cb_scroll){var p=this.id;this._cb_scroll=function(){var i=mstrmojo.all[p];i.onscroll();};}mstrmojo.dom.attachEvent(this.scrollboxNode,"scroll",this._cb_scroll);this.onscroll();}if(this.animate){for(var k=0,j=["itemsEffect","scrollEffect"],h=j.length;k<h;k++){var o=j[k],l=this[o];if(l&&l.constructor===Object){l=mstrmojo.insert(mstrmojo.hash.clone(l));l.widget=this;this[o]=l;}}if(this.itemsEffect){this.itemsEffect.play();}}this.itemsContainerNode.style.visibility="inherit";if(this.containerResizable&&this.itemsContainerNode.scrollWidth<this.domNode.scrollWidth){this.itemsContainerNode.style.width=this.domNode.scrollWidth+"px";}if(this._super){this._super();}},unrender:function X(l){G(this);if(this._eros){mstrmojo.dom.detachEvent(this.scrollboxNode,"scroll",this._cb_scroll);delete this._cb_scroll;}for(var j=0,k=["itemsEffect","scrollEffect"],h=k.length;j<h;j++){var m=this[k[j]];if(m&&m.isPlaying){m.cancel();}}this._super(l);},pauseScrollRendering:function P(j,h,i){if(j!==false){j=true;}if(this.paused===!!j){return ;}this.paused=!!j;if(j){if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}}else{this.fill(h,i);}},onscroll:function K(){if(this.paused){return ;}if(this._eros){if(!this._fillTmr){var h=this;this._fillTmr=self.setTimeout(function(){h.fill();h=null;},50);}}if(this._super){this._super();}},fill:function b(h,l){if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}var m=(this.items&&this.items.length)||0;if(!m){if(l){l();}}else{var j=this.scrollboxNode,n=this.itemsContainerNode,k=mstrmojo.boxmodel.offset(n,j),p=this.listMapper,o=p.findScrollRange(n,m,(this.usesTouches&&this.pos&&parseInt(this.pos.y,10))||j.scrollTop,j.clientHeight,(this.usesTouches&&this.pos&&parseInt(this.pos.x,10))||j.scrollLeft,j.clientWidth,k.left,k.top);if(this.fillAt(o.start,o.end)){if(h){h();}var i=this.id;this._fillTmr=window.setTimeout(function(){mstrmojo.all[i].fill(h,l);},100);}else{if(l){l();}}}},fillAt:function M(j,i){var h=this.listMapper;if(h){return h.fillItemWrappers(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder,j,i,this.renderBlockSize);}else{return false;}},add:function R(i,h){if(!i||!i.length){return -1;}var j=this.items;if(h==null){h=a.min(this.selectedIndices,false,true);if(h!==null&&h!==undefined){h++;}}if(h==null||h===-1){h=(j&&j.length)||0;}if(j&&j.add){j.add(i,h);}else{this.set("items",j?f.insert(j.concat(),h,i):i);}return h;},preadd:function B(k){if(this.hasRendered){var n=this.listMapper;if(n){n.onadd(this,this.itemsContainerNode,this.ctxtBuilder,k);}var m=this.listBuilder;if(m){m.onadd(this,this.ctxtBuilder,k);}var j=this.listSelector;if(j){j.onadd(this,k);}if(this._eros){this.onscroll();}else{var l=k.index,h=k.value.length;this.fillAt(l,l+h-1);}}if(this.onadd){this.onadd(k);}if(this._super){this._super(k);}},remove:function U(h){if(h==null){return -1;}if(h.constructor!==Array){return this._remove(h);}var k=this.items;if(k){var j;if(k.remove){for(j=h.length-1;j>-1;j--){k.remove(h[j],1);}}else{k=k.concat();for(j=h.length-1;j>-1;j--){k.splice(h[j],1);}this.set("items",k);}return h[0];}return -1;},_remove:function U(j){var i=this.items;if(!i||(j==null)){return -1;}var h;if(!isNaN(j)){h=j;}else{h=this.itemIndex(j);}if(h>-1){if(i.remove){i.remove(h,1);}else{i=i.concat();i.splice(h,1);this.set("items",i);}}return h;},duplicate:function Y(m,i,j){var k=this.items,h=-1;if(!k||(m==null)){return -1;}if(!isNaN(m)){if(i===null||i===undefined){i=m+1;}m=k[m];}else{if(i===null||i===undefined){i=this.itemIndex(m)+1;}}if(m){var l;l=a.copy(j,a.clone(m));h=this.add([l],i);}return h;},preremove:function N(i){if(this.hasRendered){var k=this.listMapper;if(k){k.onremove(this,this.itemsContainerNode,this.ctxtBuilder,i);}var j=this.listBuilder;if(j){j.onremove(this,this.ctxtBuilder,i);}var h=this.listSelector;if(h){h.onremove(this,i);}if(this._eros){this.onscroll();}}if(this.onremove){this.onremove(i);}if(this._super){this._super(i);}},move:function S(l,q){function o(r,i){return q>=r&&q<=r+i;}var p=(this.items&&this.items.length)||0;if(q===-1||q==null||isNaN(q)){q=p;}else{q=Math.min(q,p);}var k,h,n,m;if(l.constructor===Array){h=l;n=l;m=(h&&h.length)||0;if(o(l[0],l.length)){return false;}k=f.get(this.items,l);}else{if(typeof (l)==="object"){k=[l];m=1;h=this.itemIndex(k[0]);n=[h];if(o(h,1)){return false;}}else{h=l;n=[l];m=1;if(o(h,1)){return false;}k=[this.items[h]];}}for(var j=0;j<m;j++){if(n[j]<=q){q--;}}if(k[0]!=null){this.remove(h);this.add(k,q);}return true;},itemIndex:function F(h){if(h==null){return -1;}var i=this.itemIdField;return i?f.find(this.items,i,h[i]):f.indexOf(this.items,h);},prechange:function T(k){if(this.hasRendered){var j=[this.listBuilder,this.listMapper];for(var l=0,h=j.length;l<h;l++){var m=j[l];if(m&&m.onchange){m.onchange(this,this.itemsContainerNode,this.ctxtBuilder,k);}}}},makeObservable:false,_set_items:function J(m,h){var l=this.items;h=this.initItems(h);this.items=h;if(l!==h){var k=this,j=function(){if(k.autoHide){k.set("visible",!!(h&&h.length));}k=null;},i=this.hasRendered;if(i){this.refresh(j);}else{j();}}return l!==h;},premousedown:function d(h){A(this,"premousedown",h);},premouseup:function Q(h){A(this,"premouseup",h);},scrollTo:function V(i){var h,j=this.listMapper;if(j&&j.toItem){if(!isNaN(i)){h=i;}else{h=this.itemIndex(i);}if(h>=0){j.toItem(this,h);}}},draggable:false,getDragData:function(l){L(this,l.id);var j=O(this,l.src),i=j&&j.idxActual;if((i>-1)&&this.selectedIndices[i]){var k=this.sortSelectedIndices(),h=f.get(this.items,k)||[];switch(h.length){case 1:return a.copy({html:h[0][this.itemDisplayField],index:k[0]},a.copy(h[0]));case 0:return null;default:return a.copy({html:h.length+" selections",indices:k},h);}}},dropZone:false,ondragenter:function(h){L(this,h.id);this.set("dropCuePos",O(this,h.tgt));},ondragover:function(h){this.set("dropCuePos",O(this,h.tgt));},ondragleave:function(h){this.set("dropCuePos",null);},isDragValid:function C(h){return h&&h.src&&h.src.data;},ondragstart:function(h){if(!(h&&h.src&&h.src.data)){return false;}},allowCopy:false,ondragend:function(k){var i=k&&k.tgt,h=i&&i.widget;if(h===this){}else{if(this.tree&&h&&h.tree===this.tree){if(!this.allowCopy||!c.ctrlKey(i.hWin,i.e)){var j=k.src&&k.src.data;if(j&&(j.indices||(j.index!==null))){this.remove(j.indices||j.index);}}}}},ondrop:function(q){var u=q&&q.src,p=u&&u.data;if(p){var k=O(this,q.tgt,false),r=k&&k.idx,l=(p&&p.constructor===Array),j=this.sortSelectedIndices();var n=this.items;r=Math.min(r,n&&n.length)||0;var t=true;if(u.widget===this){t=this.move(j,r);f.forEach(j,function(i){if(i<=r){r--;}});}else{this.add(l?p:[p],r);}if(t){var o=l?p.length:1,h={};for(var m=0;m<o;m++){h[r+m]=true;}this.set("selectedIndices",h);}}this.set("dropCuePos",null);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget");mstrmojo.WaitIcon=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.WaitIcon",cssFloat:"left",visible:false,markupString:'<div id="{@id}" class="mstrmojo-WaitIcon {@cssClass}" style="float:{@cssFloat};{@cssText};"></div>',markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},markupSlots:{}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var C=1;mstrmojo._hasWidgetListMapper={buildItemWrappers:function A(H,G,F,E,J,I){E.first=J;E.last=I;return this._super(H,G,F,E,0,0);},postBuildRendering:function B(K,I,H,G,F){var J=F.first;if(J){this.fillItemWrappers(K,I,H,G,F,0,J);}if(F.last){var E=I&&I.length||0,L=Math.max(Math.max(0,E-F.last),J);this.fillItemWrappers(K,I,H,G,F,L,E);}if(this._super){this._super(K,I,H,G,F);}},fillItemWrappers:function D(F,N,K,R,M,E,I,Q){var L=(N&&N.length)||0,P=this.wrapperNodes(F),S=M.itemStatus;for(var J=E,O=Math.min(I+1,L),H=0;J<O;J++){if(S[J]!==C){var G=K.build(R,M,N[J],J);if(G){G.placeholder=P[J].firstChild;G.render();}H++;if(H===Q){break;}}}return H;},onchange:null};mstrmojo.WidgetListMapper=mstrmojo.provide("mstrmojo.WidgetListMapper",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapper)));mstrmojo.WidgetListMapper.RENDERED=C;mstrmojo.requiresCls("mstrmojo.ListMapperHoriz");mstrmojo.WidgetListMapperHoriz=mstrmojo.provide("mstrmojo.WidgetListMapperHoriz",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapperHoriz)));})();(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.requiresClsP("mstrmojo.chart","JSONFormat","FormatFill");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumFillType","EnumFormatType");var F=mstrmojo.hash,D=mstrmojo.chart,B=D.enums,A=B.EnumFormatType,C=B.EnumFillType;mstrmojo.chart.JSONFormatFill=mstrmojo.declare(mstrmojo.chart.JSONFormat,null,{scriptClass:"mstrmojo.chart.JSONFormatFill",mFillType:0,mAlpha:0,mSimpleColor:null,mFillGradient:null,mFillPattern:null,mFillBevel:null,init:function E(H){H.mFormatType=A.FMT_FILL;this._super(H);F.copyProps(["mFillType","mAlpha","mSimpleColor","mFillGradient","mFillPattern","mFillBevel","id"],H,this);},AppendToJSONObject:function G(N){var I=this.mFillBevel,H=this.mFillGradient,O=this.mFillType,K={FormatType:this.mFormatType,FillType:O,Alpha:this.mAlpha,Bevel:{FillBevelType:I.type,Depth:I.depth,LightAngle:I.lightAngle,Intensity:I.intensity}};switch(O){case C.FT_SIMPLE:var L=this.mSimpleColor;K.SimpleColor={R:L.mR,G:L.mG,B:L.mB};break;case C.FT_TEXTURE:break;case C.FT_PICTURE:break;case C.FT_GRADIENT:var M=H.startGraphColor,J=H.endGraphColor;K.Gradient={StartGraphColor:{R:M.mR,G:M.mG,B:M.mB},EndGraphColor:{R:J.mR,G:J.mG,B:J.mB},Angle:H.angle,HorizontalOffset:H.horizontalOffset,VerticalOffset:H.verticalOffset,GradientType:H.gradientType,EndAlpha:H.endAlpha,Style:H.style,IntermediateColors:H.intermediateColors.slice(0)};break;case C.FT_PATTERN:break;default:break;}N.push(K);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList");mstrmojo.ui.List=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.ui.List",postselectionChange:function C(D){var G=D.added||[],F=G.length,I=D.removed||[],E=I.length;if(E){this.selectionRemoved({added:G,removed:I,isReselect:false});}if(F){var H=function(J){return[].concat(J).sort().join(",");};this.selectionAdded({added:G,removed:I,isReselect:H(G)===H(I)});}},selectionAdded:function A(D){},selectionRemoved:function B(D){}});mstrmojo.ui.List.SelectionChangeEvtType=null;}());(function(){mstrmojo.requiresClsP("mstrmojo","ListBase","_IsList");mstrmojo.VisMenuList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.VisMenuList",prevSelection:{},itemField:"v",selectionPolicy:"toggle",multiSelect:false,init:function C(D){this._super(D);},getItemProps:function A(F,D){var E=this._super(F,D);E.tag="a";E.addCls("mstrmojo-ui-Menu-item");return E;},onselectionChange:function B(D){this._super(D);this.parent.data.set("valid",true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList");var D=mstrmojo.dom,E=mstrmojo.hash;var A;mstrmojo.SuggestionList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.SuggestionList",itemField:"n",getItemMarkup:function(G,F){if(!A){var H=this.itemField;A=this._super(G).replace('@title}">{@en@n}<',"@en@"+H+'}">{@en@'+H+"}<");}return A;},getItemProps:function C(H,F){var G=this._super(H,F),I=this.itemField;if(!mstrmojo.string.isEmpty(H[I])){G[I]=H[I];}return G;},onclick:function B(F){if(this.disableClick){return false;}var K=this,H=this.parent,J=H.opener,G=D.isMetaKey(F.hWin,F.e);if(G&&!this.multiSelect){this.multiSelect=J.parent.defn.multi;if(this.multiSelect){D.attachOneTimeEvent(document.documentElement,"keyup",function(){var M=K.selectedIndices;if(J){J.suggestionShown=false;if(M&&!E.isEmpty(M)){var L=[];E.forEach(K.selectedIndices,function(O,N){L.push(K.items[N]);});J.handleSuggestionItemSelect(L);}H.close();}K.multiSelect=false;});}}this._super(F);if(!this.multiSelect){J.suggestionShown=false;var I=this.selectedItem;if(I){J.handleSuggestionItemSelect(I);}H.close();}},bindings:{itemField:"this.parent.opener.itemField",items:"this.parent.opener.suggestionItems",disableClick:"this.parent.opener.disableClick"}});}());(function(){mstrmojo.requiresCls("mstrmojo.Label","mstrmojo._HasEditableText","mstrmojo.css","mstrmojo._CanHandleTwoClicks","mstrmojo.Label","mstrmojo.Widget");var C=mstrmojo.css,A=mstrmojo.Label.prototype.markupMethods;mstrmojo.EditableLabel=mstrmojo.declare(mstrmojo.Label,[mstrmojo._CanHandleTwoClicks,mstrmojo._HasEditableText],{scriptClass:"mstrmojo.EditableLabel",autoApplyDelay:-1,markupString:'<div id="{@id}" class="mstrmojo-EditableLabel {@cssClass}" title="{@title}" contenteditable="{@isEditing}" style="{@cssText}" mstrAttach:click,mousedown,blur,keydown,keyup></div>',markupMethods:mstrmojo.hash.copy({onwidthChange:function(){mstrmojo.Widget.widthMarkupMethod.call(this);},ontextChange:function(){if(A.ontextChange){A.ontextChange.call(this);}this.widgetResized();},onvisibleChange:function(){if(A.onvisibleChange){A.onvisibleChange.call(this);}if(this.visible){this.widgetResized();}}},mstrmojo.hash.copy(A)),onkeyup:function E(F){this._super(F);if(this._autoApplyTimer){window.clearTimeout(this._autoApplyTimer);}if(this.autoApplyDelay!==-1){var G=this;this._autoApplyTimer=window.setTimeout(function(){G.set("isEditing",false);},this.autoApplyDelay);}},postBuildRendering:function D(){if(this._super){this._super();}this.widgetResized();},selectable:true});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.EditableLabel,{onselectableChange:function B(){var G=this[this.editableSlot],F=!!this.selectable;G.selectable=F;G.setAttribute("unselectable",!F?"on":"off");C.toggleClass(G,"unselectable",!F);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.dom","mstrmojo._IsPopup","mstrmojo._CanAutoClose");var C=mstrmojo.dom;mstrmojo.ui.PopupWidget=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.ui.PopupWidget",markupString:'<div id="{@id}" class="mstrmojo-ui-PopupWidget {@cssClass}" style="{@cssText}" mstrAttach:mouseover,mouseout,click><div class="pw-content"></div></div>',markupSlots:{containerNode:function A(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},autoCloses:true,locksHover:true,closeOnClick:true,visible:true,onclick:function B(D){C.stopPropogation(null,D.e);}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.Container","mstrmojo._HasPopup");var E=function(){var G=this.opener;if(G.direction.toLowerCase()==="up"){this.domNode.style.top=-G.domNode.offsetHeight+"px";}};mstrmojo.DropDownButton=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.DropDownButton",height:"",text:"",direction:"down",enabled:true,title:"",allowHTML:true,markupString:'<div id="{@id}" class="mstrmojo-DropDownButton {@cssClass} {@direction}" style="{@cssText}"><div class="mstrmojo-DropDownButton-boxNode {@cssClass}-boxNode" title="{@title}" mstrAttach:mousedown><div class="mstrmojo-DropDownButton-iconNode {@cssClass}-iconNode">{@text}</div></div><div class="mstrmojo-DropDownButton-popupNode {@cssClass}-popupNode"></div></div>',markupSlots:{boxNode:function(){return this.domNode.firstChild;},iconNode:function(){return this.domNode.firstChild.firstChild;},popupNode:function(){return this.domNode.lastChild;}},markupMethods:{onheightChange:function(){this.boxNode.style.height=this.height||"";},ontextChange:function(){this.iconNode.innerHTML=this.getTextInnerHTML();},ontitleChange:function(){this.boxNode.title=this.title;},onenabledChange:function(){mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);},onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},preBuildRendering:function C(){if(this._super){this._super();}var G=this.popupRef;if(G){if(G.nudge){G.nudge=mstrmojo.func.composite([G.nudge,E]);}else{if(this.direction.toLowerCase()!=="down"){G.nudge=E;}}}},popupRef:null,popupOpenConfig:null,destroy:function D(G){var H=this.popupRef;if(H&&H.hasRendered){H.destroy(false);}if(this._super){this._super(G);}},togglePopup:function F(){var G=this._lastOpened;if(G&&G.visible){this.closePopup();}else{this.openPopup("popupRef",this.popupOpenConfig);}},premousedown:function A(G){this.togglePopup();},getTextInnerHTML:function B(){return this.allowHTML?this.text:mstrmojo.string.encodeHtmlString(this.text);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container");function B(K,J,H){var I=J,G;for(;I>0;I--){G=Array(I+1).join("#");K=K.replace(G,H[I-1]);}return K;}var C='<div class="freezing-vis-txt-metric">',A='<div class="freezing-vis-txt-attr">',E="</div>",F="("+mstrmojo.desc(16294,"data retrieval paused")+")";var D=function(J,I){if(J<1&&I<1){return null;}var H=[],G="# ## ### ####";if(J>0){H.push(B(G,4,[A,J,J>1?mstrmojo.desc(3581,"Attributes"):mstrmojo.desc(518,"Attribute"),E]));}if(I>0){H.push(B(G,4,[C,I,I>1?mstrmojo.desc(3582,"Metrics"):mstrmojo.desc(517,"Metric"),E]));}return H.join(",");};mstrmojo.vi.ui.rw.FreezingImageContainer=mstrmojo.declare(mstrmojo.Container,[],{scriptClass:"mstrmojo.vi.ui.rw.FreezingImageContainer",markupString:'<div id="{@id}" class="mstrmojo-vi-ui-rw-freezingImageContainer mstrmojo-vi-ui-rw-GhostImageContainer {@cssClass}"><div class="mstmojo-freezingImgTableCell"><div class="mstrmojo-freezingImgDiv"><div class="freezing-vis-img ghost-vis-img"></div><div class="freezing-vis-desc"><label class="visName">{@visName}</label><div class="freezing-details">{@freezingDetails}</div></div><div class="vis-dropzone">{@visDropzoneMsg} </div></div></div></div>',markupSlots:{containerNode:function(){return this.domNode;}},visName:"",freezingDetails:F,visDropzoneMsg:""});mstrmojo.vi.ui.rw.FreezingImageContainer.getVisDropzoneMsg=D;}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.Container","mstrmojo._HasPopup");var B=mstrmojo.func,D=mstrmojo.dom,C=mstrmojo.ui._HasUITheme.EnumThemeNames,G="mstrmojo-popup-widget-hosted";mstrmojo.ui.PopupButton=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.ui.PopupButton",onPopupWidgetClosed:mstrmojo.emptyFn,onPopupWidgetOpened:mstrmojo.emptyFn,anchorSlot:"domNode",isHostedWithin:true,hostedCSSClass:"",destroy:function J(N){if(this._listenerProc){D.detachEvent(window,"resize",this._listenerProc);}this._super(N);},getPopupWidget:mstrmojo.emptyFn,postCreateChildren:function E(){var N=this.getPopupWidget();if(!N||N._pbCfg){return ;}var O=function O(Q,P){return function(){Q.apply(P,arguments);};};N.onOpen=B.composite([O(this.onPopupWidgetOpened,this),N.onOpen||mstrmojo.emptyFn]);N.onClose=B.composite([O(this.onPopupWidgetClosed,this),N.onClose||mstrmojo.emptyFn]);N._pbCfg=true;},onclick:function L(N){if(this.isClickingAnchorSlot(N)){var O=this.getPopupWidget();if(!O.visible){this.openPopup(O);}else{this.closePopup();}}},isClickingAnchorSlot:function M(N){var O=N.getTarget();return O===this[this.anchorSlot]||O.parentNode===this[this.anchorSlot];},onPopupAutoClosed:function I(O,N){if(D.contains(this[this.anchorSlot],D.eventTarget(N,O),true)){return false;}},getPopupHostNode:function K(){return this.containerNode;},getPopupConfig:function H(){var O=[G],N=this.hostedCSSClass;if(N){O.push(N);}var P=new mstrmojo.ui.PopupConfig({hostId:this.id,hostElement:this.getPopupHostNode(),anchorElement:this[this.anchorSlot],isHostedWithin:this.isHostedWithin,hostProxyCssClass:O.join(" ")});return this.disposables?this.addDisposable(P):P;},unrender:function F(N){if(this._listenerProc){D.detachEvent(window,"resize",this._listenerProc);delete this._listenerProc;}this._super(N);},postBuildRendering:function A(){var R=this.getPopupWidget();if(R){var T=this.getPopupConfig();if(!T.isHostedWithin){var P=this.parent||this.opener,O=T.hostProxyCssClass.split(" ");O.push(this.domNode.className);while(P){var S=P.themeClassName;if(S){O.push(S);break;}P=P.parent||P.opener;}if(T.useDarkTheme){O.splice(O.indexOf(C.LIGHT_THEME),1);O.push(C.DARK_THEME);}T.hostProxyCssClass=O.join(" ");}mstrmojo.Obj.free(R.popupConfig);R.popupConfig=R.addDisposable(T);}if(!(this.editableSlot&&D.isMobile)){var N=R.id,Q=this._listenerProc=function(){var U=mstrmojo.all[N];if(U&&U.visible&&U.adjustCornersForPopupOverflow){U.adjustCornersForPopupOverflow();}};if(this.isHostedWithin===false){D.attachEvent(window,"resize",Q);}}return this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container");mstrmojo.requiresDescs(11668,15187,15188,15189,15190);function B(L,K,I){var J=K,H;for(;J>0;J--){H=Array(J+1).join("#");L=L.replace(H,I[J-1]);}return L;}var C='<div class="ghost-vis-txt-metric">',A='<div class="ghost-vis-txt-attr">',E='<div class="ghost-vis-txt-attr-time">',G="</div>";var D={grid:B(mstrmojo.desc(15187,"Add # or more ##attributes### and/or #### or more #####metrics######"),6,[1,A,G,1,C,G]),heatmap:B(mstrmojo.desc(15187,"Add # or more ##attributes### and/or #### or more #####metrics######"),6,[1,A,G,1,C,G]),barchart:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,A,G,1,C,G]),linechart:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,A,G,1,C,G]),areachart:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,A,G,1,C,G]),bubblechart:B(mstrmojo.desc(15190,"Add # or more ##metrics### and #### or more #####attributes######"),6,[2,C,G,1,A,G]),piechart:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,A,G,1,C,G]),combochart:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,A,G,2,C,G]),network:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[2,A,G,1,C,G]),histogram:B(mstrmojo.desc(15667,"Add # or more ##attributes### and ####  #####metric######"),6,[1,A,G,1,C,G]),boxplot:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,A,G,1,C,G]),waterfall:B(mstrmojo.desc(15188,"Add # or more ##attributes### and #### or more #####metrics######"),6,[1,A,G,1,C,G]),kpicard:B(mstrmojo.desc(15878,"Add # or more ##attributes### and #### #####metric######"),6,[1,A,G,1,C,G])};function F(H){return D[H]?D[H]:mstrmojo.desc(11668,"Drag objects here.");}mstrmojo.vi.ui.rw.GhostImageContainer=mstrmojo.declare(mstrmojo.Container,[],{scriptClass:"mstrmojo.vi.ui.rw.GhostImageContainer",markupString:'<div id="{@id}" class="mstrmojo-vi-ui-rw-GhostImageContainer {@cssClass}"><div class="mstmojo-ghostImgTableCell"><div class="mstrmojo-ghostImgDiv"><div class="ghost-vis-img"></div><div class="ghost-vis-name">{@visName}</div><div class="ghost-vis-desc">{@visDesc}</div></div></div></div>',markupSlots:{containerNode:function(){return this.domNode;}},visName:"",visDesc:""});mstrmojo.vi.ui.rw.GhostImageContainer.getVisDesc=F;}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase2");function B(E){var I=E.ctxtBuilder;if(I){var H=I.itemWidgets,G;for(G=H.length-1;G>-1;G--){var F=H[G];if(F){F.destroy(true);}}}}mstrmojo.WidgetListBase=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.WidgetListBase",unrender:function C(G){var I=this.ctxtBuilder;if(I){var H=I.itemWidgets,F;for(F=H.length-1;F>-1;F--){var E=H[F];if(E&&E.hasRendered){E.unrender(true);}}}this._super(G);},refresh:function A(E){B(this);if(this._super){this._super(E);}},destroy:function D(E){B(this);this._super(E);}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2","mstrmojo.ListMapper","mstrmojo.ListBuilder","mstrmojo.ListSelector");mstrmojo.List=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.List",renderOnScroll:true,listMapper:mstrmojo.ListMapper,listBuilder:mstrmojo.ListBuilder,listSelector:mstrmojo.ListSelector,itemIdField:"dssid",itemField:"n",itemMarkup:null,itemMarkupFunction:null});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2","mstrmojo.ListMapperHoriz","mstrmojo.ListBuilder");mstrmojo.ListHoriz=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.ListHoriz",renderOnScroll:true,listMapper:mstrmojo.ListMapperHoriz,listBuilder:mstrmojo.ListBuilder,itemField:"n",itemMarkup:null,itemMarkupFunction:null});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.ui._HasScroller","mstrmojo.css","mstrmojo.DI.DIHelpers");var F=mstrmojo.css,H=mstrmojo.string,A=mstrmojo.desc(14058,"Show Details"),E=mstrmojo.desc(14059,"Hide Details"),B=mstrmojo.DI.DIHelpers,D=mstrmojo.desc(14060,"We are sorry for the inconvenience. Please {contact} your administrator for help.").replace("{",'<span class="dyn-link">').replace("}","</span>");mstrmojo.ui.editors.ErrorDialogContent=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.editors.ErrorDialogContent",markupString:'<div class="mstrmojo-error-content {@cssClass}" mstrAttach:click><div class="scroll-container"><div>{@shortDesc}</div><div class="contact">'+D+'</div><div class="toggle-details-link" >'+A+'</div><div class="error-details">{@longDesc}</div></div></div>',markupSlots:{scrollNode:function(){return this.domNode.firstChild;},contactNode:function(){return this.domNode.firstChild.children[1].getElementsByClassName("dyn-link")[0];},toggleDetailsNode:function(){return this.domNode.firstChild.children[2];},errorDetailsNode:function(){return this.domNode.firstChild.children[3];}},markupMethods:{onshowDetailsChange:function(){var K=this.showDetails;this.toggleDetailsNode.innerHTML=K?E:A;F.toggleClass(this.domNode,"show-details",K);this.updateScrollbars();}},cssClass:undefined,shortDesc:undefined,longDesc:undefined,showDetails:false,showToggle:true,enableContactStr:true,allowHTML:false,init:function I(K){this._super(K);this.shortDesc=this.shortDesc||mstrmojo.desc(14061,"An error has occurred");},onclick:function J(K){var M=K.getTarget(),L,N=this.longDesc;if(M===this.contactNode){L="mailto:?subject="+encodeURI("Issue: "+this.shortDesc)+(N?("&body="+encodeURI("Detail:\r\n"+N)):"");mstrApp.openPage(L,"_self");}else{if(M===this.toggleDetailsNode){this.set("showDetails",!this.showDetails);this.parent.raiseEvent({name:"EditorResized"});this.parent.positionDialog();}}},setupScrollNodes:function C(){this.scrollNode=this.scrollNode;},preBuildRendering:function G(){this._super&&this._super();if(!this.allowHTML){this.longDesc=H.encodeHtmlString(H.decodeHtmlString(this.longDesc,true),true);}},postBuildRendering:function(){var K=this.domNode.firstChild.children[1];this._super&&this._super();!this.showToggle&&F.addClass(this.toggleDetailsNode,"hide");!this.enableContactStr&&F.addClass(K,"invisible");}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListHoriz","mstrmojo.fx");mstrmojo.FishEye=mstrmojo.declare(mstrmojo.ListHoriz,null,{scriptClass:"mstrmojo.FishEye",width:16,size:10,step:16,speed:2,cssClass:"mstrmojo-FishEye",cssClassItem:"mstrmojo-dot",itemMarkupFunction:function(B,A,C){return'<div class="mstrmojo-fisheye-item '+C.cssClassItem+'" title="'+B.n+'" idx="'+A+'" did="'+B.did+'">&nbsp;</div>';},onchange:function(){this.scroll2();this.parent.set("selectedIndex",this.selectedIndex);},as:new mstrmojo.fx.AnimateProp(),onitemsChange:function(){if(this._super){this._super();}this.last=this.items.length-1;this.first=Math.max(0,this.last-this.size);if(this.items.length>this.size){this.scroll("left",this.width);}},scroll2:function(){var A=this.selectedIndex-this.last;if(this.selectedIndex==this.first&&this.first>0){this.scroll("right",this.width);}else{if(this.selectedIndex==this.last&&this.last<this.items.length-1){this.scroll("left",this.width);}else{if(this.selectedIndex>this.last){A=this.selectedIndex-this.last;this.scroll("left",this.width*A,A);this.last=Math.min(this.items.length-1,this.last+A);}else{if(this.selectedIndex<this.first){A=this.first-this.selectedIndex;this.scroll("right",this.width*A,A);this.first=Math.max(0,this.first-A);}}}}},scroll:function(C,F,E){var B=this.itemsContainerNode,I=B&&B.style;var D=this.as,H=parseInt(mstrmojo.css.getStyleValue(B,{left:"right",right:"left"}[C]),10),H=isNaN(H)?0:H,A=parseInt(I.left,10)||0,G=A+(C=="left"?-1:1)*(F||(Math.min(this.step,(-1)*H)));D.target=B;D.props={left:{start:A,stop:G,duration:100,interval:10,suffix:"px"}};D.play();E=E===undefined?1:E;this.first+=(C=="left"?1:-1)*E;this.last=this.first+this.size-1;this.parent.set("scrollable",this.last<this.items.length-1);this.parent.set("rightScrollable",this.first>0);return G;},srcId:null,postBuildRendering:function(){if(this._super){this._super();}this.hasRendered=!!this.domNode;var E=this.itemsContainerNode,A=E&&E.firstChild,B=A&&A.rows&&A.rows[0],D=B&&B.cells&&B.cells[0];this.first=0;this.last=this.size-1;var C=this.srcId;if(C&&mstrmojo.all[C]&&mstrmojo.all[C].attachEventListener){mstrmojo.all[C].attachEventListener("change",this.id,function(F){if(this.items[this.items.length-1]!=F.src.selectedItem){this.items.add([mstrmojo.hash.copy(F.src.selectedItem)]);this.set("selectedIndex",this.items.length-1);}if(this.items.length>this.size){this.set("rightScrollable",this.items.length>this.size);this.scroll("left",this.width*(this.selectedIndex-this.last),(this.selectedIndex-this.last));}});}this.itemsContainerNode.style.left=Math.min(0,(this.size-this.items.length+1))*this.width+"px";}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListSelector","mstrmojo.List","mstrmojo.string");mstrmojo.OBList=mstrmojo.declare(mstrmojo.List,null,{scriptClass:"mstrmojo.OBList",cssClass:"mstrmojo-OBList",itemClass:"mstrmojo-OBListItem",iconClass:"mstrmojo-OBListItemIcon",textClass:"mstrmojo-OBListItemText",iconCssPrefx:"mstrmojo-OBIcon_",itemMarkupFunction:function(C,A,B){return'<div class="'+B.itemClass+(C[B.itemType]?" t_"+C[B.itemType]:"")+(C[B.itemSubType]?" st_"+C[B.itemSubType]:"")+(C[this.itemISC]?" isc":"")+(C[B.itemViewMedia]?" vm_"+C[B.itemViewMedia]:"")+'"><table cellspacing="0" cellpadding="0"><tbody><tr><td>'+B.getIcon(C)+'</td><td><div class="'+B.textClass+'" title="'+B.getTooltip(C)+'">'+mstrmojo.string.htmlAngles(C.n)+"</div></td></tr></tbody></table></div>";},getIcon:function(F){var E=F[this.itemType],D=F[this.itemSubType],B=" t"+E,C=(parseInt(E,10)===1||parseInt(E,10)===3||parseInt(D,10)===14082)?" st"+D:"",G=F[this.itemISC]?'class="mstrmojo-ListIcon isc"':"",A=(F[this.itemViewMedia]===2048||F[this.itemViewMedia]===8192)?" hvi":"";return'<span class="mstrmojo-ListIcon '+B+C+A+'"><span '+G+"></span></span>";},getTooltip:function(C){var D="",F=C.anc&&C.anc.items,A=F&&F.length,B;if(A>0){for(B=0;B<A-1;B++){D+=F[B].n+" > ";}D+=F[A-1].n;}var E=C.desc,G=128;if(E){D+="\r\n\r\n"+mstrmojo.string.encodeHtmlString(E.substring(0,G))+(E.length>G?"...":"");}return D;},listSelector:mstrmojo.ListSelector,selectionPolicy:"reselect",itemType:"t",itemSubType:"st",itemISC:"isc",itemViewMedia:"dvm",useDblSelect:false});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.string","mstrmojo.dom","mstrmojo.Popup","mstrmojo.List","mstrmojo.DropDownButton");var B=mstrmojo.dom;mstrmojo.Pulldown=mstrmojo.declare(mstrmojo.DropDownButton,null,{scriptClass:"mstrmojo.Pulldown",cssClass:"mstrmojo-Pulldown",items:null,itemIdField:"dssid",itemField:"n",itemCSS:"css",itemTitleField:null,defaultSelection:0,defaultText:null,title:"",value:null,popupToBody:false,popupCssClass:"",popupZIndex:null,fixWidth:false,fixHeight:false,allowHTML:false,_set_items:function(H,F){var G=this.items;this.items=F||[];return G!==this.items;},markupMethods:mstrmojo.hash.copy({onvalueChange:function(){var G=this.value,F=this.selectedIndex,I=this.items||[],J,H;if(F===undefined||(G!==null&&(F===-1||(F!==-1&&I[F]&&I[F][this.itemIdField]!==G)))){F=mstrmojo.array.find(I,this.itemIdField,G);F=(F>-1)?F:this.defaultSelection;this.selectedIndex=F;}else{if(G===null){this.selectedIndex=this.defaultSelection;}}this.selectedItem=J=I[this.selectedIndex];if(J){H=J[this.itemField];}else{H=this.defaultText||"";}this.set("text",H);}},mstrmojo.hash.copy(mstrmojo.DropDownButton.prototype.markupMethods)),prevalueChange:function D(){var G=this.value,F=-1;if(G!==null){F=mstrmojo.array.find(this.items,this.itemIdField,G);}if(F>-1){this.selectedItem=this.items[F];this.selectedIndex=F;}},togglePopup:function E(){if(this.popupToBody){var I=B.position(this.popupNode,true),H=this.popupRef,F={left:Math.round(I.x)+"px",top:Math.round(I.y)+"px"};if(!H.hasRendered){delete H.slot;F.placeholder=document.body.appendChild(document.createElement("div"));}this.popupOpenConfig=this.popupOpenConfig||{};mstrmojo.hash.copy(F,this.popupOpenConfig);}else{this.popupRef.slot="popupNode";}if(this._super){this._super();}var G=this.popupRef.domNode;if(G){if(this.fixWidth){G.style.width=(this.domNode.offsetWidth-2)+"px";}else{G.style.minWidth=(this.domNode.offsetWidth-2)+"px";}}},premousedown:function A(F){if(B.getButton(F.hWin,F.e)===B.MOUSE_BUTTON.LEFT){this.togglePopup();}},unrender:function C(F){var G=this.popupRef;if(this.popupToBody&&G.hasRendered){G.unrender(false);}if(this._super){this._super(F);}},itemName:function(H,F,G){return this.allowHTML?H[G.itemField]:mstrmojo.string.encodeHtmlString(H[G.itemField]);},popupRef:{scriptClass:"mstrmojo.Popup",slot:"popupNode",cssClass:"mstrmojo-Pulldown-Popup",autoCloses:false,modal:false,autoClose:true,locksHover:true,adjustSize:function(){var G=this.opener,F=this.domNode;if(G&&G.fixWidth){mstrmojo.css.addClass(F,["fix-width"]);}if(G&&G.fixHeight){mstrmojo.css.addClass(F,["fix-height"]);}},onOpen:function(){var H=this.opener,G=H&&H.popupZIndex,I=(H&&H.popupCssClass)||"",F=this.domNode;if(G){F.style.zIndex=G;}if(I){mstrmojo.css.addClass(F,[I]);}this.adjustSize();},children:[{scriptClass:"mstrmojo.List",alias:"list",itemMarkupFunction:function(I,F,G){var H=I[G.itemCSS]||G.parent.opener.item2textCss&&G.parent.opener.item2textCss(I)||"",J=G.parent.opener.itemName;return'<div class="mstrmojo-Pulldown-listItem"><div class="mstrmojo-text '+H+'" title="'+I[G.itemTitleField||G.itemField]+'">'+(J(I,F,G)||"&nbsp;")+"</div></div>";},renderOnScroll:false,bindings:{itemIdField:"this.parent.opener.itemIdField",itemField:"this.parent.opener.itemField",itemCSS:"this.parent.opener.itemCSS",itemTitleField:"this.parent.opener.itemTitleField",items:"this.parent.opener.items",selectionPolicy:"this.parent.opener.selectionPolicy",selectedIndex:"this.parent.opener.selectedIndex"},onmousedown:function(){this.parent.close();},onchange:function(){var H=this.parent,I=H.visible,F=H.opener,G=this.selectedItem;if(!F||!G||!I){return ;}F.set("value",G[this.itemIdField]);}}]}});}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetListBase","mstrmojo.WidgetListMapper","mstrmojo.WidgetListBuilder");mstrmojo.WidgetList=mstrmojo.declare(mstrmojo.WidgetListBase,null,{scriptClass:"mstrmojo.WidgetList",renderOnScroll:true,listMapper:mstrmojo.WidgetListMapper,listBuilder:mstrmojo.WidgetListBuilder,itemConfig:null,itemFunction:null,initBindings:function(){this._super();var E=this.ctxtBuilder,D=E&&E.itemWidgets;if(D){for(var C=0,A=D.length;C<A;C++){var B=D[C];if(B&&B.initBindings){B.initBindings();}}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupButton","mstrmojo._HasLayout");mstrmojo.ui.editors.controls.PreviewButton=mstrmojo.declare(mstrmojo.ui.PopupButton,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.editors.controls.PreviewButton",markupString:'<div id="{@id}" class="mstrmojo-ui-PreviewButton {@cssClass}" style="{@cssText}"><div class="cf" mstrAttach:click><div class="preview"></div><div class="btn">&nbsp;</div></div><div class="host"></div></div>',markupSlots:{previewNode:function(){return this.domNode.firstChild.firstChild;},btnNode:function(){return this.domNode.firstChild.lastChild;},widgetHostNode:function(){return this.domNode.lastChild;},clickableNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},layoutConfig:{h:{previewNode:"100%",btnNode:"100%",widgetHostNode:"0px"},w:{previewNode:"100%",btnNode:"20px",widgetHostNode:"all"},xt:true},isHostedWithin:false,getLayoutOffsets:function B(){return{h:2,w:2};},anchorSlot:"clickableNode",updatePreview:function C(){throw new Error(this.scriptClass+" must implement updatePreview.");},getPopupHostNode:function A(){return this.widgetHostNode;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.Button","mstrmojo.DropDownButton","mstrmojo.Label","mstrmojo.WaitIcon");mstrmojo.IncFetch=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.IncFetch",markupString:'<div id="{@id}" class="mstrmojo-IncFetch {@cssClass}" style="{@cssText}"><div class="mstrmojo-IncFetch-content"></div><div class="mstrmojo-clearMe"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},preBuildRendering:function A(){var J=[],F=this.ds,M=this.cp,P=this.np,C=this.ps,E=this.id,G=2;var L=function(){mstrmojo.all[E].set("cp",this.text);};var H={f:1,p:Math.max(M-1,1),n:Math.min(M+1,P),l:P};for(var O in H){J.push(new mstrmojo.Button({iconClass:"arrow "+O,title:F[O],enabled:(H[O]!==M),text:H[O],onclick:L}));}var D=Math.max(Math.min(M-2,P-4),1),I=Math.min(D+4,P);for(var K=D;K<=I;K++){var N;if(K===M){if(I-D===4&&P!==5){N=new mstrmojo.DropDownButton({height:"13px",title:F.a?F.a:"",text:K,direction:"up",popupRef:{scriptClass:"mstrmojo.Popup",slot:"popupNode",contentNodeCssClass:"goto",autoCloses:false,locksHover:true,children:[{scriptClass:"mstrmojo.VBox",children:[{scriptClass:"mstrmojo.Label",cssText:"float:left;",text:F.gt},{scriptClass:"mstrmojo.TextBox",cssText:"float:left;",size:3,maxLength:String(P).length,onEnter:function(){var R=this.inputNode.value,T=this.parent.parent;if(R===""){T.close();return ;}var Q=parseInt(R,10),S=!(isNaN(Q)||Q<1||Q>P);if(S){mstrmojo.all[E].set("cp",Q);T.close();}else{this.setInvalidState(F.v.replace("###",P).replace("##",1).replace(" #",""));}}},{scriptClass:"mstrmojo.Button",cssText:"float:left",iconClass:"apply",title:F.ap?F.ap:"",onclick:function(){this.parent.children[1].onEnter();}}]}],onOpen:function(){mstrmojo.css.addClass(this.parent.domNode,["open"]);var Q=this.children[0].children[1].inputNode;window.setTimeout(function(){Q.focus();},0);},onClose:function(){mstrmojo.css.removeClass(this.parent.domNode,["open"]);this.children[0].children[1].cleanUp();}}});}else{N=new mstrmojo.Button({iconClass:"pg on",text:K});}}else{N=new mstrmojo.Button({iconClass:"pg",text:K,onclick:L});}J.splice(G++,0,N);}J.splice(G++,0,new mstrmojo.Label({text:F.pgs.replace("###",P).replace("##",""),cssText:"float:left;margin:1px 1px 1px 3px;"}));this._iWait=new mstrmojo.WaitIcon({cssText:"margin-top:-2px;"});J.push(this._iWait);this.addChildren(J);return this._super?this._super():true;},_set_cp:function B(D,C){if(parseInt(C,10)!==this.cp){this.raiseEvent({name:"fetch",v:C,iWait:this._iWait});}}});})();(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupWidget","mstrmojo.ui.menus._IsMenuPopup","mstrmojo.css");mstrmojo.ui.menus.MenuPopup=mstrmojo.declare(mstrmojo.ui.PopupWidget,[mstrmojo.ui.menus._IsMenuPopup],{scriptClass:"mstrmojo.ui.menus.MenuPopup",popupConfig:null,init:function B(E){this._super(E);var C=this.popupConfig;if(!C.contents){throw new Error("Cannot open popup without contents.");}var D=["mstrmojo-ui-MenuPopup"],F=C.cssClass;if(F){D.push(F);}if(C.hasToggleItem){D.push("hasToggleItem");}mstrmojo.css.addWidgetCssClass(this,D);this.addChildren(C.contents);},shouldPropagateLockHover:function A(){return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.tooltip","mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.hash","mstrmojo.string");mstrmojo.requiresDescs(11038,11935,11936,11937,11856,11938,13138,13230,13260,14633,14636);var C=mstrmojo.hash.copy,P=mstrmojo.css,J=mstrmojo.dom,N=mstrmojo.array,E=mstrmojo.string,Q=function Q(V,T){if(!V){return ;}var S=T&&T.length||0,U;for(U=S;U>0;U--){V=V.replace(new Array(U+2).join("#"),T[U-1]);}return V;},L=function L(T){if(!T){return ;}var Z=this,V=J.position(T.refNode||Z.refNode),Y=J.position(Z.domNode),X=T.position||R.RIGHT,U=0,a=0,S=9+(T.margin!==undefined?T.margin:0),W=" ";switch(X){case R.TOP:a=-Y.h-S;W+="t";break;case R.BOTTOM:a=V.h+S;W+="b";break;case R.LEFT:U=-Y.w-S;W+="l";break;case R.RIGHT:U=V.w+S;W+="r";break;}mstrmojo.hash.forEach(C(T,{left:U,top:a,contentNodeCssClass:W,visible:false}),function(b,c){this[c]=b;},this);this.set("visible",T.invalid);},A=function A(S){var W=this,U,V=S.errorCode,X=S.errorMsg,T=S.args,Y=mstrmojo.vi.ui.rw.selectors.EnumWarningMessages;if(S.invalid){U={content:V!==null?(W.generateContentHTML(Q(Y[V],T))||Y["*"]):X};}return U;};mstrmojo.vi.ui.rw.selectors.EnumWarningMessages=C(mstrmojo.locales.validation,{"*":mstrmojo.desc(11038,"Invalid"),invalidValueVIWarning:mstrmojo.desc(11935,"Invalid characters"),emptyValueVIWarning:mstrmojo.desc(11936,"Please enter a number"),notIntegerVIWarning:mstrmojo.desc(11937,"Please enter an integer"),outOfRangeVIWarning:mstrmojo.desc(11856,"Please enter value between ## and ###."),noMultiSelectionVIWaring:mstrmojo.desc(11938,"This selector does not support multiple selections."),continuousSelectionVIWaring:mstrmojo.desc(13138,"This selector does not support non-continuous selections."),bigDecimalMetricSliderVIWaring:mstrmojo.desc(13230,"Cannot qualify on big decimal value. Please change qualification type to Rank"),unableDisplaySelectionVIWarning:mstrmojo.desc(13260,"Filter cannot display actual selections."),imageSizeExceedLimitVIWarning:mstrmojo.desc(14633,"Cannot embed an image larger than ##MB. Your image is still ###MB after compression. Enter a URL to the image instead."),imageFileTypeNotSupportedVIWarning:mstrmojo.desc(14636,"Invalid image format. Please use .png, .jpg, .jpeg, .gif or .bmp."),imageOverSizeNoCompessionVIWarning:mstrmojo.desc(14665,"Cannot embed an image larger than ##MB. Enter a URL to the image instead.")});mstrmojo.vi.ui.rw.selectors.EnumWarningPosition={TOP:1,BOTTOM:2,LEFT:3,RIGHT:4};var R=mstrmojo.vi.ui.rw.selectors.EnumWarningPosition;mstrmojo.vi.ui.rw.selectors._HasWarningMessage=mstrmojo.provide("mstrmojo.vi.ui.rw.selectors._HasWarningMessage",{_mixinName:"mstrmojo.vi.ui.rw.selectors._HasWarningMessage",warningSlotName:"warning",showWarning:function G(U){var Y=this,a=Y.warningSlotName,c=Y[a],S=U&&U.lasting||6000,X=U.refNode||this.domNode,T=U.highlight!==false,b=U.closeOnClick===false?false:true,Z;if(!c){c=new mstrmojo.Tooltip({refNode:X,highlight:T,closeOnClick:b,updatePopupConfig:null,cssClass:"vi-warning vi-tooltip-V"});Y.addDisposable(c);Y[a]=c;Z=Y.closeOnClick=Y.getCloseOnClickListener();J.attachEvent(document.body,"click",Z);}var W=U.position||R.TOP,V="vi-warning vi-tooltip-";switch(W){case R.TOP:c.cssClass=V+"V";break;case R.BOTTOM:c.cssClass=V+"A";break;case R.LEFT:c.cssClass=V+"D";break;case R.RIGHT:c.cssClass=V+"C";break;}c.open(Y,A.call(Y,U));this.adjustPosition(U);if(T){P.toggleClass(c.refNode,"mstrmojo-Warning",true);}window.clearTimeout(Y._warningTimeOut);Y._warningTimeOut=window.setTimeout(function(){Y.hideWarning();},S);},hideWarning:function H(){var T=this,S=T[T.warningSlotName];if(S&&S.visible&&S.close){if(S.highlight){P.toggleClass(S.refNode,"mstrmojo-Warning",false);}S.close();window.clearTimeout(T._warningTimeOut);delete T._warningTimeOut;}},getCloseOnClickListener:function I(){var S=this;return function(){var T=S[S.warningSlotName];if(T.closeOnClick){S.hideWarning();}};},adjustPosition:function M(S){var T=this;L.call(T[T.warningSlotName],S);},generateContentHTML:function D(S){return E.encodeHtmlString(S,true);},bindWarningHandler:function F(){N.forEach(arguments,function S(U){if(!U||!U.attachEventListener){return ;}var V=U._validationEventListener,T;if(V){U.detachEventListener(V);delete U._validationEventListener;}T=this.getValidationEvtListener();if(T){U._validationEventListener=U.attachEventListener("validationChange",this.id,T);}},this);},getValidationEvtListener:function B(){var T=this;return function S(U){var V=U.value;T[(V&&V.invalid?"show":"hide")+"Warning"](V);};},unrender:function K(S){var T=this[this.warningSlotName];if(T){T.unrender();}this._super(S);},destroy:function O(S){J.detachEvent(document.body,"click",this.closeOnClick);return this._super(S);}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.tooltip");var E=mstrmojo.dom,D=mstrmojo.string,F=mstrmojo.hash,H=mstrmojo.array,C=mstrmojo.tooltip;mstrmojo.ui._HasListTooltip=mstrmojo.provide("mstrmojo.ui._HasListTooltip",{_mixinName:"mstrmojo.ui._HasListTooltip",tooltipOrientation:"horizontal",tooltipOffset:8,tooltipMarkup:'<div class="content" style="{@style}">{@c}</div>',tooltipCss:{},tooltipContrast:false,getTooltipText:function A(I){return I&&(D.encodeHtmlString(I.ttp,true)||D.encodeHtmlString(I.n,true));},showTooltip:function G(Z,N){var Q=this;if(!Q.hasOpenTooltip&&!(Q._lastOpened&&Q._lastOpened.visible)){var f=E.eventTarget(N,Z),a=Q.getItemFromTarget(f),U=Q.getItemNodeFromTarget(f),h=Q.getTooltipText(a),P=Q.tooltipCss;if(!h||a.ttpDisabled){return ;}if(Q.showTooltipForLargeText){if(U.offsetWidth>=U.scrollWidth){return ;}}var g=E.position(U),Y,R,L,W="",X=Q.tooltipOffset,O=(a&&a.ctxt)||{};if(this.tooltipOrientation==="vertical"){Y=g.x+g.w/2;L=O.posType||C.POS_TOPCENTER;R=g.y+g.h+X;var M="mojo-theme-light vi-regular vi-tooltip-A";if(!O.posType){M+=" A-center";}Q.tooltipCss=F.copy({cssClass:M},P);}else{var K=E.windowDim(),V=40,b=g.x+g.w+X,J=g.x-X,d=J-V,I=K.w-(b+V),c="vi-regular vi-tooltip-",T;R=g.y;if(I>=d){Y=b;T=I;L=O.posType||C.POS_TOPLEFT;P.cssClass=c+"C "+P.rightCssClass;}else{Y=J;T=d;L=O.posType||C.POS_TOPRIGHT;P.cssClass=c+"D "+P.leftCssClass;}W="max-width: "+T+"px;";}if(Q.tooltipContrast){P.cssClass=P.cssClass+" contrast";}if(P&&P.getItemCssClass){P.cssClass=H.filter([P.cssClass,P.getItemCssClass(a)],function(e){return !!e;}).join(" ");}var S=Q.richTooltip=F.copy(Q.tooltipCss,{content:D.apply(Q.tooltipMarkup,{c:h,style:W}),top:R,left:Y,posType:L});if(Q.itemDisabled){S.cssClass+=" vi-warning";}if(O.hoverable){S.enableHover=true;}if(O.posType==="TL"){S.left=g.x;}S.keepArrowXPos=!!Q.keepArrowXPos;S.keepArrowYPos=!!Q.keepArrowYPos;this._super(Z,N);}},onclick:function B(I){var J=this;window.setTimeout(function(){if(J.hasOpenTooltip){J.hideTooltip();}window.clearTimeout(J._tooltipTimeOut);},0);this._super(I);}});}());(function(){mstrmojo.requiresCls("mstrmojo.SuggestionList","mstrmojo.mstr.EnumDSSXMLObjectTypes");var C=function(S,U,T){var R=S.parent.opener,J=R&&R.showDesc,Q=R&&R.showPath,I=U[S.itemField];var P=mstrmojo.string.escape4HTMLText,V="";if(Q){var M=U.anc&&U.anc.items,O=M&&M.length;if(O>0){for(var L=0;L<O-1;L++){V+=M[L].n+" > ";}V+=P(M[O-1].n);}else{if(U.path){V+=P(U.path);}}}if(!T){V+=(V.length===0?"":" > ")+P(I);}if(J){var N=U[S.itemDescField],K=120;if(N){V+="\r\n\r\n<br>"+P(N.substring(0,K)+(N.length>K?"...":""));}}return V;};var A=function(I,J,K){I.path=null;if(!J||!K||K.path){if(K&&K.path){I.set("path",K.path);}return ;}window.clearTimeout(this.pathTmr);this.pathTmr=window.setTimeout(function(){var L=J.path||J.getAttribute("path");if(L){I.set("path",K.path);return ;}mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(M){var N=H(M.toString())||"";K.path=N;I.set("path",N);}},{taskId:"getObjectDetails",objectID:K.did,objectType:K.t},undefined);},200);};var H=function(K){var N;if(window.DOMParser){N=(new DOMParser()).parseFromString(K,"text/xml");}else{N=new ActiveXObject("Microsoft.XMLDOM");N.async="false";N.loadXML(K);}var P=N.getElementsByTagName("path")[0],L=P.childNodes,O="";if(L){for(var J=0,I=L.length;J<I;J++){var M=L[J].childNodes&&L[J].childNodes[0];if(M){O+=mstrmojo.string.escape4HTMLText(M.nodeValue)+(J<I-1?"> ":"");}}}return O;};mstrmojo.LegacySuggestionList=mstrmojo.declare(mstrmojo.SuggestionList,null,{scriptClass:"mstrmojo.LegacySuggestionList",useRichTooltip:false,itemDescField:"desc",getItemMarkup:function(K,I){var J=this.parent.opener,L=this.useRichTooltip?"":this.buildTooltip(K);return'<div class="mstrmojo-suggest-text '+((J&&J.item2textCss(K))||"")+'" idx="'+I+'" title="'+L+'">'+J.getHighlightedText(J.getSearchPattern(),mstrmojo.string.escape4HTMLText(K[this.itemField]))+"</div>";},getItemProps:function E(){return{};},onmouseover:function(J){var M=this.parent.opener;if(M&&M.showPath){var K=mstrmojo.dom.eventTarget(J.hWin,J.e),I=K.getAttribute("idx"),L=I!=null?this.items[I]:null;if(L&&L.t>-1){this.targetEl=K;this.targetItem=L;this.requestPath(K,L);}}},requestPath:function D(I,K){var J=this.parent.opener;if(K.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Function&&J.showFunctionSyntaxAsPath){this.buildFunctionSyntax(K);}else{A(this,I,K);}},buildFunctionSyntax:function G(J){var K=J.path;if(!K&&J.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Function){var I=function I(P){if(P.did<0){return P.n;}var O=P.pars,M=[],N,L;M.push(P.n);if(O){M.push("(");for(N=0,L=O.length;N<L;N++){M.push(O[N].n);if(N!==(L-1)){M.push(", ");}}M.push(")");}return M.join("");};J.path=I(J);}this.set("path",{path:J.path,excludeSelf:true});},buildTooltip:function B(I,J){return C(this,I,J);},onpathChange:function F(){var I=this.targetEl;I.path=1;var J=this.buildTooltip(this.targetItem,this.path.excludeSelf);if(this.useRichTooltip){this.useRichTooltip=true;this.hasOpenTooltip=false;if(!I.ttp){I.ttp=J;this.showTooltip();}}else{I.title=J;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.List","mstrmojo.ui._HasScroller");mstrmojo.ui.ScrollableList=mstrmojo.declare(mstrmojo.ui.List,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.ScrollableList",markupString:'<div id="{@id}" class="mstrmojo-ListBase {@cssClass}" style="{@cssText}" mstrAttach:click,dblclick,mousedown,mouseover,mouseout,contextmenu><div class="list-content"><div class="items-container {@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{itemsContainerNode:function C(){return this.domNode.firstChild.firstChild;},scrollboxNode:function D(){return this.domNode.firstChild;},scrollNode:function E(){return this.domNode.firstChild;}},postBuildRendering:function B(){if(this.renderOnScroll){if(!this.onScrollEnd){var G=this.id;this.onScrollEnd=function F(){var H=mstrmojo.all[G];H.doScroll();H.updateScrollbars();};}}if(this._super){this._super();}},renderBlockSize:150,renderIndex:0,onScrollEnd:undefined,doScroll:function A(){if(this.renderOnScroll){var G,H=this.scrollNode,F=(this.renderIndex+1)*this.renderBlockSize;if(F>=this.items.length){return ;}if(mstrmojo.dom.position(H).h===H.scrollHeight){G=this.domNode;}else{G=H;}if((mstrmojo.dom.position(G).h+G.scrollTop)>=G.scrollHeight){this.renderIndex++;var I=this._buildItemsMarkup(this.renderIndex*this.renderBlockSize,((this.renderIndex+1)*this.renderBlockSize)-1,this._markupPrefix&&this._markupPrefix(),this._markupSuffix&&this._markupSuffix(),this._itemPrefix&&this._itemPrefix(),this._itemSuffix&&this._itemSuffix()).join("");G.innerHTML+=I;this.itemsContainerNode.innerHTML+=I;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBox","mstrmojo.ListBoxBase");mstrmojo.ButtonItemRenderer=mstrmojo.hash.copy(mstrmojo.DivItemRenderer);mstrmojo.ButtonItemRenderer.render=function(D,A,E){var B=D.v!=="u;"?" nAll":"",C=(E.enabled===false);return'<input mstridx="'+A+'" class="'+E.itemCssClass+(E.selectedIndices[A]?" "+E.itemSelectedCssClass:"")+" "+(D.css||"")+B+'" style="'+E.itemCssText+'" type="button"  value="'+D[E.itemDisplayField]+'" '+(C?"disabled ":"")+"/>";};mstrmojo._RendersItemButtons=mstrmojo.hash.copy(mstrmojo._RendersItemDivs);mstrmojo._RendersItemButtons.itemRenderer=mstrmojo.ButtonItemRenderer;mstrmojo.ButtonList=mstrmojo.declare(mstrmojo.ListBox,[mstrmojo._RendersItemButtons],{scriptClass:"mstrmojo.ButtonList",cssClass:"mstrmojo-ButtonList",itemCssClass:"mstrmojo-ButtonItem",selectionPolicy:"toggle"});mstrmojo.requiresCls("mstrmojo.ListBoxHoriz");mstrmojo.ButtonListHoriz=mstrmojo.declare(mstrmojo.ListBoxHoriz,[mstrmojo._RendersItemButtons],{scriptClass:"mstrmojo.ButtonListHoriz",cssClass:"mstrmojo-ButtonListHoriz",itemCssClass:"mstrmojo-ButtonItem",selectionPolicy:"toggle"});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.ScrollableList","mstrmojo._IsPopup","mstrmojo._CanAutoClose","mstrmojo.ui._HasListTooltip");mstrmojo.ui.PopupList=mstrmojo.declare(mstrmojo.ui.ScrollableList,[mstrmojo._IsPopup,mstrmojo._CanAutoClose,mstrmojo.ui._HasListTooltip],{scriptClass:"mstrmojo.ui.PopupList",autoCloses:true,locksHover:true,closeOnClick:true,scrollNodeMaxHeight:undefined,parentDomNode:undefined,keydownString:null,lastKeydownTime:null,keydownInterval:500,closeAfterSelection:true,markupString:'<div id="{@id}" class="mstrmojo-PopupList {@cssClass}" style="{@cssText}" tabIndex="-1" mstrAttach:click,dblclick,mouseover,mouseout,contextmenu,keydown><div class="mstrmojo-popupList-scrollBar"><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{itemsContainerNode:function I(){return this.domNode.firstChild.firstChild;},scrollboxNode:function A(){return this.domNode.firstChild;}},setupScrollNodes:function F(){this.scrollNode=this.scrollboxNode;},onOpen:function E(){this._super();this.updateScrollbars();var M=this;setTimeout(function(){M.scrollToSelectedItem();},10);},onclick:function K(M){this.closeAfterSelection=true;this._super(M);},postBuildRendering:function B(){var N=this._super();if(!this.parent){var M=this.parentDomNode=this.parentDomNode||document.body;M.appendChild(this.domNode);}return N;},closePopup:function J(){this.set("visible",false);},onkeydown:function H(O){if(!this.opener||!this.opener.focusOnPopup){return ;}var M=O.hWin,R=O.e||M.event,T=this.keydownString;this.locksHover=false;this.closeAfterSelection=false;if(R.keyCode===mstrmojo.Enum_Keys.DOWN_ARROW){if(this.selectedIndex<this.items.length-1){this.set("selectedIndex",this.selectedIndex+1);this.scrollToSelectedItem();}}else{if(R.keyCode===mstrmojo.Enum_Keys.UP_ARROW){if(this.selectedIndex>0){this.set("selectedIndex",this.selectedIndex-1);this.scrollToSelectedItem();}}else{if(R.keyCode===mstrmojo.Enum_Keys.ENTER||R.keyCode===mstrmojo.Enum_Keys.ESCAPE){this.closeAfterSelection=true;this.singleSelect(this.selectedIndex);}else{var S=new Date(),P=S.getTime(),N=String.fromCharCode(R.keyCode).toLowerCase(),Q=this;if(this.lastKeydownTime===null){this.keydownString=N;}else{if(P-this.lastKeydownTime<this.keydownInterval){this.keydownString=this.keydownString+N;}else{this.keydownString=N;}}T=this.keydownString;if(this._holdTimer){clearTimeout(this._holdTimer);}this._holdTimer=setTimeout(function(){Q.changeSelectedItem(O);Q.adjustPosition();},Q.keydownInterval);this.lastKeydownTime=P;}}}},changeSelectedItem:function D(M){var P=this.selectedIndex,O=this.items&&this.items.length;if(O>0){var N;for(N=this.selectedIndex+1;N<this.items.length;N++){if(this.items[N].n.toLowerCase().indexOf(this.keydownString)==0){P=N;break;}}if(P===this.selectedIndex){for(N=0;N<this.selectedIndex;N++){if(this.items[N].n.toLowerCase().indexOf(this.keydownString)==0){P=N;break;}}}if(P!==this.selectedIndex){this.set("selectedIndex",P);}}},focus:function L(){this.domNode.focus();},scrollToSelectedItem:function G(){var P=this.itemsContainerNode.childNodes[this.selectedIndex];if(P){var M=this.scrollNode,O=M.clientHeight,N=P.offsetTop;if(N-M.scrollTop+P.offsetHeight>O){M.scrollTop=P.offsetTop+P.offsetHeight-O;}else{if(N<M.scrollTop){M.scrollTop-=P.offsetHeight;}}}},adjustPosition:function C(){this.adjustCornersForPopupOverflow();this.scrollToSelectedItem();this.focus();}});}());(function(){mstrmojo.requiresCls("mstrmojo.LegacySuggestionList","mstrmojo.ui._HasScroller");var E=mstrmojo.dom;mstrmojo.ui.ScrollableSuggestionList=mstrmojo.declare(mstrmojo.LegacySuggestionList,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.ScrollableSuggestionList",markupString:'<div id="{@id}" class="mstrmojo-ListBase mstrmojo-scrollable-suggestlist {@cssClass}" style="{@cssText}" mstrAttach:click,dblclick,mouseover,mouseout,contextmenu><div class="list-content"><div class="items-container {@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{itemsContainerNode:function B(){return this.domNode.firstChild.firstChild;},scrollboxNode:function D(){return this.domNode.firstChild;},scrollNode:function H(){return this.domNode.firstChild;}},onclick:function A(I){var J=this.getItemFromTarget(I.getTarget());if(J){this._super(I);}},onitemsChange:function C(){var I=this;window.setTimeout(function(){I.hideTooltip();I.updateScrollbars();},0);},updateScrollbars:function F(){this._super();var K=this,M=K.scrollNode,I=M.clientWidth,L=K.itemsContainerNode,J=L.clientWidth;L.style.width="auto";window.setTimeout(function(){if(I>J){L.style.width=J+(I-J)+"px";}},10);},useRichTooltip:true,getItemTooltip:function(L,M){var J=E.position(M),K=M.ttp;var I={areaId:L._renderIdx+"text",cssClass:"vi-regular vi-tooltip-C",contentNodeCssClass:"regular-unitlist-tooltips",posType:"",content:K,top:J.y,left:J.x+J.w+6,enableHover:false};return I;},showTooltip:function G(I,L){var K=this.targetEl,J=this.targetItem;if(K&&K.ttp){this.richTooltip=this.getItemTooltip(J,K);if(this.richTooltip){this._super(I,L);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList","mstrmojo._CanAutoClose","mstrmojo._IsPopup","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.ui.menus._IsMenuPopup","mstrmojo.ui.PopupConfig","mstrmojo.ui._HasScroller","mstrmojo.ui._HasUITheme","mstrmojo.dom","mstrmojo.css","mstrmojo.ui._HasListTooltip");var E=mstrmojo.dom,H=mstrmojo.css,F=mstrmojo.ui.PopupConfig.directionCfg;var C={};var B=false;function O(V,W){if(V.pop){if(W&&V.ax){window.clearTimeout(this._popupAxTimeout);V.actionFn();this.closeAllMenus();}else{var T=V.fn.call(mstrmojo.all[V.scope],V.ctxt);var U=T.ENUM_CORNERS,S=T.maxHeight,R=E.getMaxScrollHeight();T.setAlignment(U.TOP_RIGHT,U.TOP_LEFT);T.hostId=this.id;T.hostElement=this._getItemNode(V._renderIdx);T.includeScroll=this.includeScroll;T.supportsScroll=true;T.alignWithAnchor=true;T.isHostedWithin=false;T.maxHeight=S?Math.min(R,S):R;this.openPopup(T.newInstance());}}else{if(V.dsbld!==true){if(V.fn(V,this)!==false){this.closeAllMenus();}}}}mstrmojo.ui.menus.Menu=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList,mstrmojo.ui.menus._HasMenuPopup,mstrmojo._IsPopup,mstrmojo.ui.menus._IsMenuPopup,mstrmojo._CanAutoClose,mstrmojo.ui._HasListTooltip,mstrmojo.ui._HasScroller,mstrmojo.ui._HasUITheme],{scriptClass:"mstrmojo.ui.menus.Menu",selectionPolicy:"reselect",locksHover:true,closeOnClick:true,themeClassName:"mojo-theme-dark",icnCss:"mstrmojo-ui-Menu-item-container",popupConfig:null,tooltipCss:{leftCssClass:"menuTooltip",rightCssClass:"menuTooltip"},setupScrollNodes:function(){if(this.popupConfig&&this.popupConfig.supportsScroll){this.scrollNode=this.itemsContainerNode;this.scrollbarHostNode=this.domNode;}},updateScrollbars:function(){this._super();if(this.popupConfig&&this.popupConfig.supportsScroll&&this.hasCustomScrollbar){var S=this.scrollNode;if(!S){return ;}var R=E.getComputedScrollbarWidth(S);S.style.marginRight=-R+"px";S.style.paddingRight=0;}},onscroll:function(){this.closePopup();this._super();},init:function P(T){this._super(T);if(!!mstrApp.isWSStyling){this.themeClassName="mojo-theme-light";}if(T.themeClassName){this.themeClassName=T.themeClassName;}var R=this.popupConfig;this.items=R.getMenuItems();var S=["mstrmojo-ui-Menu","unselectable"],U=R.menuCssClass;if(U){S.push(U);}if(R.hasToggleItem){S.push("hasToggleItem");}H.addWidgetCssClass(this,S);if(R&&R.supportsScroll&&R.maxHeight>0){this.icnCssText=(this.icnCssText||"")+";max-height:"+R.maxHeight+"px";}this.useRichTooltip=!!R.useTooltip;this.tstid=R.tstid;},markupMethods:{onvisibleChange:function M(){var R=this.visible;if(!B||R){H.toggleClass(this.domNode,"visible",R);}}},getItemMarkup:function L(W,S){if(W.getItemMarkup){return W.getItemMarkup.apply(this,[W,S]);}var U=!!W.pop,V=U?"submenu":"item",T=C[V],R='<div class="micn"></div>';if(!T){R+=!!mstrApp.isWSStyling?'<div class="mtxt">{@en@n}</div>':"{@en@n}";if(U){R+='<div class="arw"></div>';}T=this._super(W,S).replace("{@en@n}",R);C[V]=T;}if(W.tstid){T=T.replace("{@tag}","{@tag} "+mstrmojo.tstid(W)+" ");}return T;},getItemProps:function J(T,R){var S=this._super(T,R);S.tag="a";S.addCls("mstrmojo-ui-Menu-item");S.addCls(T.cls);return S;},onmouseover:function Q(X){var V=X.config&&X.config.targetHostElement?X.config.targetHostElement:X.getTarget(),Z=this.getItemFromTarget(V),W=this,S=W._lastOpened,R=S&&this.getItemFromTarget(S.popupConfig.hostElement)._renderIdx,T=this.getItemNodeFromTarget(V),U=(R!==undefined&&E.contains(this._getItemNode(R),V,true,this.domNode));if(Z){this._lastHoverIx=Z._renderIdx;window.clearTimeout(this._popupTimeOut);window.clearTimeout(this._popupAxTimeout);if(this._lastHoverIx!==R&&!U){this._popupTimeOut=window.setTimeout(function(){if(W._lastOpened&&W._lastOpened.visible){W.closePopup();}if(W.visible&&Z.pop){if(Z.ax){W._popupAxTimeout=window.setTimeout(function(){H.removeClass(T,"hlt-ax");O.call(W,Z);},0);}else{O.call(W,Z);}}},400);if(Z.pop&&Z.ax){H.addClass(T,"hlt-ax");}}}var Y=this.popupConfig;if(Y&&!Y.isHostedWithin&&this.opener){this.opener.raiseEvent(mstrmojo._HasMarkup.newDomEvent(X.name,X.hWin,X.e,{targetHostElement:Y.hostElement}));}},onclick:function N(R){this._evtTarget=R.getTarget();this._super(R);R.cancel();},postselectionChange:function D(R){var S=R.added;if(S){var T=this.items[S[0]];O.call(this,T,!(T.ax&&this._evtTarget.className==="arw"));delete this._evtTarget;}},oncontextmenu:function G(R){E.preventDefault(window,R.e);return false;},postBuildRendering:function A(R){this._super(R);if(this.popupConfig.supportsScroll){var S=this;window.setTimeout(function(){S.updateScrollbars();},10);}},showTooltip:function K(V,U){var T=E.eventTarget(U,V),S=this.getItemNodeFromTarget(T),R=this.getItemFromTarget(T);this.itemDisabled=R&&R.dsbld;if(S&&((R&&R.ttp)||(S.scrollWidth>S.clientWidth)||(T.scrollWidth>T.clientWidth))){this._super(V,U);}},onCloseMenuCallBack:null,onClose:function I(R){if(this._super){this._super(R);}this.closePopup();if(this.onCloseMenuCallBack){this.onCloseMenuCallBack();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.TextBox","mstrmojo._CanValidate","mstrmojo.css","mstrmojo.validation","mstrmojo.vi.ui.rw.selectors._HasWarningMessage");var H=mstrmojo.css,E=mstrmojo.validation,G=E.TRIGGER,J=E.STATUSCODE;function F(L){if((this.constraints.trigger&L)>0){this.validate();}}mstrmojo.ValidationTextBox=mstrmojo.declare(mstrmojo.TextBox,[mstrmojo._CanValidate,mstrmojo.vi.ui.rw.selectors._HasWarningMessage],{scriptClass:"mstrmojo.ValidationTextBox",validationDelay:500,getInvalidMsg:function K(L){return(L&&L.msg?L.msg:"");},postBuildRendering:function A(){this._super();this._original_tooltip=this.inputNode.title;},prekeyup:function I(L){this._super(L);var P=(this.constraints.trigger&G.ONKEYUP)>0;if(P){var M=this.validationDelay;if(M){this.clearValDelayTimer();var O=this._validateHandler;if(!O){var N=this;this._validateHandler=O=function(){N.validate();if(N._valDelayTimer){window.clearTimeout(N._valDelayTimer);delete N._valDelayTimer;}};}this._valDelayTimer=window.setTimeout(O,M);}else{this.validate();}}},preinput:function D(L){this._super(L);F.call(this,G.ONKEYUP);},preblur:function B(L){this._super(L);F.call(this,G.ONBLUR);},clearValidation:function C(){this._super();var L=this.inputNode;H.removeClass(L,this.constraints.invalidCssClass||"mstrmojo-TextBox-ErrValidation");L.title=this._original_tooltip;},clearValDelayTimer:function(){var L=this._valDelayTimer;if(L){window.clearTimeout(L);}}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.ValidationTextBox,{onvalidationStatusChange:function(){var P=this.validationStatus;if(!P){return ;}var N=this.inputNode,L=(P.code>J.VALID),M=this.constraints.invalidCssClass;H.toggleClass(N,M||"mstrmojo-TextBox-ErrValidation",L);var O=L?this.getInvalidMsg(P):this._original_tooltip;if(!this.useRichTooltip&&O!==undefined&&O!==null){N.setAttribute("title",O);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.ui.menus.MenuPopup");mstrmojo.ui.menus.PopupConfig=mstrmojo.declare(mstrmojo.ui.PopupConfig,null,{scriptClass:"mstrmojo.ui.menus.PopupConfig",cssClass:"",hasToggleItem:false,contents:null,clear:function A(){this._super();this.contents=null;},close:function C(){([].concat(this.contents)[0]).parent.closeAllMenus();},newInstance:function B(){return new mstrmojo.ui.menus.MenuPopup({popupConfig:this});}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.menus.MenuPopup","mstrmojo.Button","mstrmojo.dom","mstrmojo.ui._HasScroller");mstrmojo.requiresDescs(1442,2140);var D=mstrmojo.dom,E=mstrmojo.array;function G(L,N){var K=2140,P="Cancel",O="this.parent.popupConfig."+(L?"ok":"cancel"),M=N&&N[(L?"ok":"cancel")+"BtnText"];if(L){K=1442;P="Ok";}return mstrmojo.Button.newWebButton(M||mstrmojo.desc(K,P),function(R){var S=this.parent,Q=S.popupConfig;S.closeAllMenus();Q["fn"+P](Q.data,S);D.stopPropogation(R.hWin,R.e);},L,{slot:"btnNode",bindings:{enabled:O+"Enabled",visible:O+"Visible"},cssDisplay:"inline-block"});}mstrmojo.ui.menus.MenuEditor=mstrmojo.declare(mstrmojo.ui.menus.MenuPopup,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.menus.MenuEditor",markupString:'<div id="{@id}" class="mstrmojo-ui-MenuEditor {@cssClass}" style="{@cssText}" mstrAttach:mouseover,mouseout,click><div class="scroll-container" style="{@scCssText}"><div class="me-content"></div><div class="me-buttons"></div><div class="me-bottom"></div></div></div>',markupSlots:{containerNode:function C(){return this.domNode.firstChild.firstChild;},btnNode:function H(){return this.domNode.firstChild.children[1];},bottomNode:function H(){return this.domNode.firstChild.children[2];},scrollNode:function(){return this.domNode.firstChild;},scrollbarHostNode:function(){return this.domNode;}},popupConfig:null,postBuildRendering:function A(K){this._super(K);if(this.popupConfig&&this.popupConfig.supportsScroll){var L=this;window.setTimeout(function(){L.updateScrollbars();},10);}},onmouseover:function J(L){var K=this.popupConfig;if(K&&!K.isHostedWithin&&this.opener){this.opener.raiseEvent(mstrmojo._HasMarkup.newDomEvent(L.name,L.hWin,L.e,{targetHostElement:K.hostElement}));}},updateScrollbars:function(){this._super();if(this.popupConfig&&this.popupConfig.supportsScroll){var L=this.scrollNode;if(!L){return ;}var K=D.getComputedScrollbarWidth(L);L.style.marginRight=-K+"px";L.style.paddingRight=0;}},monitorWindow:function F(){var L=document.activeElement,K=null;if(L!==null&&L.id!==""){K=this.domNode.querySelector("#"+L.id)?L:null;}this._super();if(K){K.focus();}},init:function I(M){this._super(M);var L=this.popupConfig,K=L.bottomNode;if(L&&L.supportsScroll&&L.maxHeight>0){if(L.cssClass.indexOf("RoleMenu")>-1){L.maxHeight=360;}this.cssText=(this.cssText||"")+";max-height:"+L.maxHeight+"px";this.scCssText=(this.scCssText||"")+";max-height:"+L.maxHeight+"px";}if(!!mstrApp.isWSStyling){this.themeClassName="mojo-theme-light";}this.data=L.data||{};if(L.onOpen){this.onOpen=L.onOpen;}this.addChildren([G(true,L),G(false)]);if(K){K.slot="bottomNode";this.addChildren(K);}},onOpen:function B(){E.forEach(this.children,function(K){if(K.scriptClass==="mstrmojo.ui.ScrollableContainer"&&K.onOpen){K.onOpen();}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.fx","mstrmojo.Dialog","mstrmojo.Label","mstrmojo._IsPopup","mstrmojo._HasPopup","mstrmojo._IsMovable","mstrmojo.ui._HasUITheme","mstrmojo.Button","mstrmojo.dom","mstrmojo.hash","mstrmojo.array","mstrmojo.tooltip","mstrmojo.ui.editors.ErrorDialogContent");var i=mstrmojo.func.composite,M=mstrmojo.dom,Z=mstrmojo.Button.newWebButton,C=mstrmojo.css,Y=mstrmojo.all,N=mstrmojo.hash,b=mstrmojo.DI.DIHelpers,W=mstrmojo.array;function V(p){if(!this.modal){return ;}var q=window.mstrApp;if(q&&q.modalEditorChange){q.modalEditorChange(this.id,p);}}mstrmojo.Editor=mstrmojo.declare(mstrmojo.Dialog,[mstrmojo._IsPopup,mstrmojo._HasPopup,mstrmojo._IsMovable,mstrmojo.ui._HasUITheme],{scriptClass:"mstrmojo.Editor",title:"",allowHTMLTitle:false,help:"",autoClose:false,showTitle:true,openEffect:null,themeClassName:"mojo-theme-light",useRichTooltip:true,closeEffect:null,onEditorResized:null,markupString:'<div id="{@id}" class="mstrmojo-Editor-wrapper"><div class="mstrmojo-Editor {@cssClass}" style="z-index:{@zIndex};{@cssText}" mstrAttach:mouseup,mousedown,click,contextmenu>{@titlebarHTML}<div class="mstrmojo-Editor-content"></div><div class="mstrmojo-Editor-buttons"></div></div><div class="mstrmojo-Editor-curtain"></div></div>',titleMarkupString:'<div class="mstrmojo-Editor-title-container"><div class="mstrmojo-Editor-title"></div><div class="edt-title-btn mstrmojo-Editor-help" tooltip="'+mstrmojo.desc(1143,"help")+'"></div><div class="edt-title-btn mstrmojo-Editor-close" tooltip="'+mstrmojo.desc(2102,"Close")+'"></div></div><div class="mstrmojo-Editor-titleSpacer"></div>',markupSlots:{editorNode:function X(){return this.domNode.firstChild;},titleContainerNode:function j(){return this.domNode.firstChild.firstChild;},titlebarNode:function l(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild:null;},titleNode:function R(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild:null;},helpNode:function m(){return this.showTitle?this.domNode.firstChild.firstChild.children[1]:null;},closeNode:function E(){return this.showTitle?this.domNode.firstChild.firstChild.lastChild:null;},containerNode:function S(){return this.domNode.firstChild.childNodes[2];},buttonNode:function I(){return this.domNode.firstChild.childNodes[3];},curtainNode:function n(){return this.domNode.lastChild;}},markupMethods:{ontitleChange:function(){if(this.showTitle){this.titleNode.innerHTML=this.allowHTMLTitle?this.title:mstrmojo.string.encodeHtmlString(this.title);}},onzIndexChange:function(){var p=this.zIndex;this.editorNode.style.zIndex=p;this.curtainNode.style.zIndex=p-1;},onvisibleChange:function(s){if(s){return ;}var r=this.visible,q="closeEffect",p="none";if(r){q="openEffect";p="block";}if(this[q]){this.playEffect(q);}else{this.editorNode.style.display=p;if(this.modal){this.curtainNode.style.display=p;}}},onhelpChange:function e(){if(this.showTitle){var q=this.help,p=this.helpNode;if(!q){p.style.display="none";}else{p.style.display="block";}}},onleftChange:function F(){this.editorNode.style.left=this.left||"";},ontopChange:function H(){this.editorNode.style.top=this.top||"";}},open:function Q(q,p){this._super(q,p);V.call(this,true);},close:function g(p){this._super(p);V.call(this,false);},unrender:function B(p){this._super(p);V.call(this,false);},destroy:function h(p){this._super(p);V.call(this,false);},preBuildRendering:function A(){if(!this.slot&&!this.placeholder){this.placeholder=document.body.appendChild(document.createElement("div"));this._curtain_to_body=true;V.call(this,true);}this.titlebarHTML=(this.showTitle)?this.titleMarkupString:"<div></div><div></div>";return this._super();},getMovingHandle:function k(){return this.titlebarNode;},getMovingTarget:function U(){return this.editorNode;},onPreClose:function G(){this.hideTooltip();return true;},premousedown:function P(p){var q=p.getTarget();if(q===this.closeNode||q===this.helpNode){C.toggleClass(q,"active",true);}},premouseup:function O(p){var q=p.getTarget();if(q===this.closeNode||q===this.helpNode){C.toggleClass(q,"active",false);}if(p.getTarget()===this.closeNode&&this.onPreClose()){this.close();}},onclick:function d(p){if(p.getTarget()===this.helpNode){if(mstrApp.showHelpTopic){mstrApp.showHelpTopic(this.help);}else{window.open(mstrmojo.helpPath()+(this.help||""),"_blank");return false;}}},_set_visible:function c(u,r){var q=(this[u]!==r);if(q){this[u]=r;var t=this._close_handler;if(r){if(this._curtain_to_body){this.resizeDialog();this.positionDialog();}if(this.autoClose){var s=this;t=this._close_handler=t||function(v){var w=M.eventTarget(self,v);if(w&&w.parentNode&&!M.contains(s.editorNode,w,true,document.body)){s.close();}};M.attachEvent(document.body,"mousedown",t);}}else{var p=this._curtain_handler;if(p){M.detachEvent(window,"resize",p);}if(t){M.detachEvent(document.body,"mousedown",t);}}}return q;},showTooltip:function o(v,u){var s=this,q=M.findAncestorByAttr(M.eventTarget(u,v),"tooltip",true,this.domNode),r=q&&q.value;if(!s.hasOpenTooltip&&r){var p=M.position(q.node);s.richTooltip={cssClass:"vi-regular A-center vi-tooltip-A",content:r,top:Math.max(p.y+40,0),left:Math.max(p.x+4,0),posType:mstrmojo.tooltip.POS_TOPCENTER};this._super(v,u);}}});mstrmojo.Editor.openEffect_fadeIn={scriptClass:"mstrmojo.fx.AnimateProp",slot:"curtainNode",props:{backgroundColor:{start:255,stop:0,fn:function(p){p=Math.round(p);return["rgb(",p,",",p,",",p,")"].join("");}}},preStart:function(){var q=this.target,p=this.widget;p.editorNode.style.display="block";if(!p.modal){return false;}q.style.display="block";C.setOpacity(q,60);return true;}};mstrmojo.Editor.closeEffect_fadeOut={scriptClass:"mstrmojo.fx.FadeOut",slot:"curtainNode",start:0.6,stop:0,preStart:function(){var p=this.widget;p.editorNode.style.display="none";return !!p.modal;}};function D(p){return function(){Y[p].destroy();};}function J(q,x,y,z){var p=x.id||"mojoAlertx9",u,w=x.buttons;W.forEach(w,function(AB){var AA=AB.onclick;AB.onclick=function(AC){var AD=Y[p];if(AA&&AA.call(AB,AC)===false){return ;}AD.destroy();AD=null;};});try{!!Y[p]&&Y[p].destroy();}catch(v){}var r=x.cssClass,s=[];if(r){s.push(r);delete x.cssClass;}if(z){s.push(z);}s.push("mstrmojo-alert");u={scriptClass:"mstrmojo.Editor",id:p,width:"475px",zIndex:1000,title:y||mstrmojo.desc(11812,"Notification"),cssClass:s.join(" "),children:[{scriptClass:"mstrmojo.Box",cssClass:"alert-content",children:[{scriptClass:"mstrmojo.Label",text:q,allowHTML:x.allowHTML}]}],visible:true};var t=new mstrmojo.Editor(N.copy(x,u));t.render();return t;}if(window.mstrConfig&&!window.mstrConfig.simpleDialog){mstrmojo.notify=function L(q,w,r){r=r||{};var x=r.forceClose,v=r.callback||mstrmojo.emptyFn,u=N.copy(w||{},{buttons:x?[mstrmojo.Button.newActionButton((r.buttonText||mstrmojo.desc(8607,"Dismiss")),v)]:null,showTitle:false,modal:false,top:"42px"}),s=r.duration||6000;var t=J(q,u,"",x?"ed-notify":"ed-toast"),p=t.id;if(!x){window.setTimeout(i([v,D(p)]),s);}else{window.setTimeout(function(){if(Y[p]){Y[p].editorNode.style.opacity=0.75;}},6000);}return t;};mstrmojo.confirm=function f(p,v,x){v=v||{};var r=v.confirmBtn||{},u=v.cancelBtn||{},w=r.hot!==false,q=!!u.hot,t=x&&x.title,s=[Z(r.t||mstrmojo.desc(219,"Yes"),r.fn,w,r.cfg),Z(u.t||mstrmojo.desc(218,"No"),u.fn,q,u.cfg)];return J(p,N.copy(x||{},{buttons:s,onPreClose:function(){if(u&&u.fn){u.fn();}return true;}}),t,b.getEnvObj().isStandaloneDataSet()?["error-dialogue-in-dataset"]:[]);};mstrmojo.warn=function K(r,p,q){q=q||{};q.cssClass=(q.cssClass||"")+" mstrmojo-warning";return mstrmojo.confirm(r,p,q);};mstrmojo.alert=function a(u,r,t,v,p,s){var q={title:t||mstrmojo.desc(12405,"Alert"),zIndex:v,cssClass:p,buttons:[Z(mstrmojo.desc(1442,"OK"),r,true)],onPreClose:function(){if(r){r();}return true;}};N.forEach(q,function(x,w){if(!x){delete q[w];}});return J(u,N.copy(s,q),t,b.getEnvObj().isStandaloneDataSet()?["error-dialogue-in-dataset"]:[]);};mstrmojo.error=function T(u,q,t){var r=u||{};var s=mstrmojo.desc(96,"Error");var p=!(b.getEnvObj().isInDI()||b.getEnvObj().isInQB());if(t){s=(t.title)?t.title:mstrmojo.desc(96,"Error");t.title=s;if(t.enableContactStr===false){p=false;}}J("",N.copy(t||{},{buttons:[Z(mstrmojo.desc(1442,"OK"),q,true)],children:[{scriptClass:"mstrmojo.ui.editors.ErrorDialogContent",shortDesc:r.shortDesc,longDesc:r.longDesc,showToggle:!!(r.longDesc),enableContactStr:p,allowHTML:!!(t&&t.allowHTML===true)}]}),s,b.getEnvObj().isStandaloneDataSet()?["error-dialogue-in-dataset"]:[]);};}mstrmojo.Editor.ButtonConfigType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo.dom","mstrmojo.TreeNodeSelector");var B=mstrmojo.dom,A={0:"closed",1:"opened",2:"leaf"};mstrmojo.TreeNode=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.TreeNode",markupString:'<li id="{@id}" class="mstrmojo-TreeNode {@cssClass}" style="{@cssText}" mstrAttach:mousedown,mouseover><div class="mstrmojo-TreeNode-div"><img class="mstrmojo-TreeNode-state" src="../images/1ptrans.gif" /><span class="mstrmojo-TreeNode-text {@textCssClass}"></span></div><ul class="mstrmojo-TreeNode-itemsContainer">{@itemsHtml}</ul></li>',markupSlots:{stateNode:function(){return this.domNode.firstChild.firstChild;},textNode:function(){return this.domNode.firstChild.lastChild;},itemsContainerNode:function(){return this.domNode.lastChild;}},markupMethods:{ontextChange:function(){this.textNode.innerHTML=mstrmojo.string.encodeHtmlString(this.text);},onstateChange:function(){this.stateNode.className="mstrmojo-TreeNode-state "+(A[this.state]||"closed");this.itemsContainerNode.style.display=(this.state===1)?"block":"none";},onselectedChange:function(){var D=this.selected?"addClass":"removeClass";mstrmojo.css[D](this.domNode.firstChild,["selected"]);},ondropCuePosChange:mstrmojo.WidgetList.prototype.markupMethods.ondropCuePosChange},renderOnScroll:false,listSelector:mstrmojo.TreeNodeSelector,premousedown:function C(D){var E=this._super(D),F=B.eventTarget(D.hWin,D.e);if(F===this.stateNode){if(this.state!==2){this.set("state",this.state===1?0:1);}}return E;},preclick:function(D){mstrmojo.dom.stopPropogation(D.hWin,D.e);},prechange:function(D){var E=this._super(D);if(E!==false){var F=this.tree;if(F&&F.onnodechange){F.onnodechange(D);}}return E;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Pulldown");var C={ENTER:13,LEFT:37,UP:38,TAB:9,RIGHT:39,DOWN:40,ESC:27};function D(L,M){var G,J,F,H=[],I,N;try{I=new RegExp(L,"i");}catch(K){I=new RegExp(mstrmojo.string.regEscape(L));}for(G=0,J=M.length;G<J;G++){if(I.test(M[G][this.itemField])){H.push(M[G]);}}return H;}function B(F){return !(F<0||F===undefined||F===null);}mstrmojo.SearchablePulldown=mstrmojo.declare(mstrmojo.Pulldown,null,{scriptClass:"mstrmojo.SearchablePulldown",popupCssClass:"mstrmojo-SearchablePulldown-Popup",searchEnabled:false,allowCustomInput:false,useItemCssOnInput:false,lastSearchPattern:"",isEditing:false,allItems:null,markupString:'<div id="{@id}" class="mstrmojo-SearchablePulldown mstrmojo-DropDownButton {@cssClass} {@direction}" style="{@cssText}"><div class="mstrmojo-SearchablePulldown-boxNode mstrmojo-DropDownButton-boxNode {@cssClass}-boxNode" title="{@title}" mstrAttach:mousedown><input class="mstrmojo-SearchablePulldown-inputNode" value="{@text}" mstrAttach:keyup,blur/><div class="mstrmojo-SearchablePulldown-iconNode mstrmojo-DropDownButton-iconNode {@cssClass}-iconNode" mstrAttach:mouseover,mouseout></div></div><div class="mstrmojo-DropDownButton-popupNode {@cssClass}-popupNode"></div></div>',markupSlots:{boxNode:function(){return this.domNode.firstChild;},inputNode:function(){return this.domNode.firstChild.firstChild;},iconNode:function(){return this.domNode.firstChild.children[1];},popupNode:function(){return this.domNode.lastChild;}},markupMethods:mstrmojo.hash.copy({ontextChange:function(){if(this.inputNode.value!==this.text){this.inputNode.value=this.text;}},onheightChange:function(){this.domNode.style.height=this.height||"";this.boxNode.style.height=this.height||"";},onsearchEnabledChange:function(){this.inputNode.readOnly=this.searchEnabled?false:true;this.items=this.allItems||this.items;},onallowCustomInputChange:function(){if(this.allowCustomInput){this.set("searchEnabled",true);}},onvalueChange:function E(){if(this.useItemCssOnInput&&this.selectedItem){this.inputNode.className="mstrmojo-SearchablePulldown-inputNode "+(this.selectedItem[this.itemCSS]||"");}}},mstrmojo.hash.copy(mstrmojo.Pulldown.prototype.markupMethods)),prevalueChange:function(){this.synchronize();},synchronize:function(){var G=this.value,H=this.items||[],I=H[this.selectedIndex],F=-1;if(I&&G===I[this.itemIdField]){this.selectedItem=I;this.set("text",I[this.itemField]);return ;}F=mstrmojo.array.find(this.items,this.itemIdField,G);if(!B(F)&&this.allowCustomInput){this.selectedItem=undefined;this.selectedIndex=undefined;return ;}this.selectedIndex=B(F)?F:this.defaultSelection;this.selectedItem=I=this.items[this.selectedIndex];this.value=I?I[this.itemIdField]:undefined;this.set("text",I?I[this.itemField]:(this.defaultText||""));},preBuildRendering:function A(){if(this._super){this._super();}this.allItems=this.allItems||this.items;this.synchronize();},premousedown:function(F){if(this.searchEnabled&&F.getTarget()===this.iconNode){this.set("items",this.allItems);}this._super(F);},onkeyup:function(M){var J=mstrmojo.string.trim(this.inputNode.value),I=M.e,N=I.keyCode||I.which,L=B(this.selectedIndex)?this.selectedIndex:-1,F=this.allowCustomInput,H=this.items.length;this.isEditing=true;switch(N){case C.ENTER:if(H>0&&!F){this.set("selectedIndex",L===-1?0:L);this.synchronize();}this.closePopup();break;case C.ESC:this.closePopup();this.synchronize();break;case C.UP:if(this.popupRef.visible&&H>0){this.set("selectedIndex",(L+H-1)%H);this.synchronize();}break;case C.DOWN:if(!this.popupRef.visible&&H>0){this.togglePopup();}this.set("selectedIndex",(L+1)%H);this.synchronize();break;default:if(J===this.lastSearchPattern){return ;}var K=[];if(J&&J.length>0&&J.indexOf(this.lastSearchPattern)>-1){K=D.apply(this,[J,this.items]);}else{K=D.apply(this,[J,this.allItems]);}this.set("items",K);if(K.length===0){this.closePopup();}else{if(!this.popupRef.visible){this.togglePopup();}}this.set("selectedIndex",undefined);if(J&&J.length){var G=mstrmojo.array.find(K,this.itemField,J);if(G!==-1){this.set("selectedIndex",G);}}}if(F&&!B(this.selectedIndex)){this.set("value",this.inputNode.value);}this.lastSearchPattern=J;},onblur:function(F){this.isEditing=false;if(!this.searchEnabled){return ;}if(!this.allowCustomInput){this.items=this.allItems;this.synchronize();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.OBList","mstrmojo.ui._IsIncFetchList","mstrmojo.ui._HasScroller");var F=mstrmojo.array,A=mstrmojo.chart.model.enums.EnumDSSObjectType;function D(G){return{browseConfig:null,parent:G,next:function(J){var I=this.browseConfig;if(!I){return ;}I.blockBegin+=I.blockCount;var H={taskId:"searchMetadata",styleName:"MojoFolderStyle",blockBegin:I.blockBegin,blockCount:I.blockCount,includeAncestorInfo:true};if(I.folderLinksContextId){H.folderLinksContextId=I.folderLinksContextId;}if(I.includeObjectDesc){H.includeObjectDesc=I.includeObjectDesc;}if(I.rootFolderID){H.rootFolderID=I.rootFolderID;}else{if(I.rootFolderType){H.rootFolderType=I.rootFolderType;}}if(I.browsableTypes){H.objectType=I.browsableTypes;}if(I.searchPattern){H.searchPattern=I.searchPattern;if(I.recursive){H.recursive=I.recursive;}}this.parent.set("waiting",true);if(I.dataProvider){I.dataProvider.serverRequest(H,J);}else{mstrmojo.xhr.request("POST",mstrConfig.taskURL,J,H);}},hasNext:function(){var H=this.browseConfig;return(H.blockBegin+H.blockCount-1)<H.totalSize;}};}mstrmojo.mstr.ui.IncFetchOBList=mstrmojo.declare(mstrmojo.OBList,[mstrmojo.ui._IsIncFetchList,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.mstr.ui.IncFetchOBList",cssClass:"mstrmojo-OBList mstrmojo-IF-OBList",makeObservable:true,renderOnScroll:false,waiting:false,markupString:'<div id="{@id}" class="mstrmojo-ListBase2 {@cssClass}" style="position:relative;{@cssText}" mstrAttach:keypress,mousedown,mouseup,dblclick><div class="scroll-box" style="{@scrollBoxCssText}"><div class="mstrmojo-ListBase2-itemsContainer" style="{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode.firstChild;},itemsContainerNode:function(){return this.domNode.firstChild.firstChild;},dropCueNode:function(){return this.domNode.firstChild.lastChild;}},markupMethods:{onwaitingChange:function(){this.onwaitingChange();}},init:function E(G){if(this._super){this._super(G);}this.ifDataHelper=D(this);if(G.browseConfig){this.ifDataHelper.browseConfig=G.browseConfig;}},onwaitingChange:mstrmojo.emptyFn,addItems:function B(G){var H=this.browseConfig.browsableViewMedias;if(G&&H){var I={};F.forEach(H.split(","),function(J){I[parseInt(J,10)]=true;});G=F.filter(G,function(J){return(J.t!==A.DssTypeDocumentDefinition)||I[J.dvm];});}this.add(G,-1);this.set("waiting",false);if(this._super){this._super(G);}if(this.scrollNode){this.updateScrollbars();}},setupScrollNodes:function C(){this.scrollNode=this.scrollboxNode;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Arr","mstrmojo.Button","mstrmojo.HBox","mstrmojo.FishEye");var A=function(B){return mstrmojo.hash.copy(B,{scriptClass:"mstrmojo.Button",text:"",enabled:false,dir:"left",cssClass:"mstrmojo-icon left",onclick:function(){var D=this.parent.fishEyeList,C=D&&D.scroll(this.dir,D.step);}});};mstrmojo.FishEyeContainer=mstrmojo.declare(mstrmojo.HBox,null,{scriptClass:"mstrmojo.FishEyeContainer",cssClass:"mstrmojo-FishEyeContainer",selectedIndex:-1,setItems:function(B){this.fishEyeList.set("items",B);},setSelectedIndex:function(B){this.fishEyeList.set("selectedIndex",B);},scrollable:false,rightScrollbale:false,children:[A({bindings:{enabled:"!!this.parent.scrollable"}}),({scriptClass:"mstrmojo.FishEye",alias:"fishEyeList",items:mstrmojo.Arr.makeObservable([]),srcId:"obList"}),A({alias:"feScrollRight",cssClass:"mstrmojo-icon right",dir:"right",bindings:{enabled:"!!this.parent.rightScrollable"}})]});mstrmojo.css=mstrmojo.hash.copy({getStyleValue:function(D,E){var B=null;if(D.currentStyle){E=(E==="float"?"styleFloat":E);B=D.currentStyle[E];}if(document.defaultView&&document.defaultView.getComputedStyle){E=(E==="float"?"cssFloat":E);var C=document.defaultView.getComputedStyle(D,null);B=C?C[E]:null;}return B;},setStyleValue:function(D,F,E){var B=function(G){return !!(G&&(typeof G==="object")&&(typeof G.length==="number"));};if(B(F)&&B(E)){var C;for(C in F){D.style[F[C]]=E[C];}}else{D.style[F]=E;}}},mstrmojo.css);}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo.WidgetTreeBuilder","mstrmojo.TreeNodeSelector");var E=false;mstrmojo.WidgetTree=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.WidgetTree",listBuilder:mstrmojo.WidgetTreeBuilder,listSelector:mstrmojo.TreeNodeSelector,renderOnScroll:true,itemIdField:"dssid",itemDisplayField:"n",itemIconField:"tp",itemChildrenField:"items",itemFunction:function D(L,I,J){if(!E){mstrmojo.requiresCls("mstrmojo.TreeNode");E=true;}var H=J.tree||J,K=new mstrmojo.TreeNode({data:L,state:0,parent:J,tree:H,multiSelect:J.multiSelect,text:L[J.itemDisplayField],textCssClass:H.item2textCss(L),items:L[J.itemChildrenField],itemIdField:J.itemIdField,itemDisplayField:J.itemDisplayField,itemIconField:J.itemIconField,itemChildrenField:J.itemChildrenField,itemFunction:J.itemFunction,listSelector:J.listSelector});return K;},item2textCss:function B(H){return H[this.itemIconField];},selectionParentNode:null,init:function F(H){this._super(H);this.selectionParentNode=this;this.tree=this;},clearTreeSelect:function A(){(this.selectionParentNode||this).clearSelect();},prechange:function G(H){var I=this._super(H);this.onnodechange(H);return I;},onnodechange:function C(I){if(!I){return ;}var J=mstrmojo.hash,M=this.selectionParentNode,L=I.src;if(L===M){if(J.isEmpty(L.selectedIndices)){L=this;this.selectionParentNode=this;}this.raiseEvent({name:"selectionChange",parentNode:L,parentNodeWas:M,added:I.added,removed:I.removed});}else{if(I.added&&I.added.length){var K=[];if(!J.isEmpty(M.selectedIndices)){K=mstrmojo.hash.keyarray(M.selectedIndices,true);M.clearSelect();}this.selectionParentNode=L;this.raiseEvent({name:"selectionChange",parentNode:L,parentNodeWas:M,added:I.added,removed:K});}else{}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.css","mstrmojo.string","mstrmojo._HasPopup","mstrmojo.ListBase","mstrmojo.Popup","mstrmojo.Editor","mstrmojo.SuggestionList");function D(a,X){var Z=this.list,V=Z.selectedIndex,U=Z.items.length,W=a?U-1:0;if(V===W){Z.clearSelect();return ;}if(V===null||V<0){V=a?0:U-1;}else{V+=a?1:-1;}if(X){var Y=Z.items[V];while(Y&&Y.type==="dummy"){if(V===W){Z.clearSelect();return ;}V+=a?1:-1;Y=Z.items[V];}}Z.singleSelect(V);}mstrmojo._HasSuggestion=mstrmojo.provide("mstrmojo._HasSuggestion",mstrmojo.hash.copy(mstrmojo._HasPopup,{blockBegin:1,blockCount:-1,suggestCount:15,autoSelect:true,itemField:"n",candidates:null,suggestionShown:false,suggestionItems:null,_last_hit:null,_request_pattern:null,browseItemVisible:false,folderLinksContextId:25,browsableTypes:"1,8",REQUEST_THRESHOLD:20,noCache:false,disableClick:false,getCandidatesThroughTaskCall:mstrmojo.emptyFn,onSuggestionItemSelect:function J(U){this.hideSuggestion();},getSearchPattern:function T(){return"";},getSuggestionPos:function N(){return{left:"100px",top:"100px"};},getSuggestionTarget:function G(){return this;},showSuggestion:function B(V){var U=this.getSuggestion(V);if(!this.noCache&&U!==-1){this.updateSuggestion(U);}},hideSuggestion:function C(){this.suggestionShown=false;if(this.suggestionPopup.visible){this.suggestionPopup.close();}},getSelected:function M(){return(this.suggestionShown)?this._lastOpened.getSelected():null;},nextHighlight:function E(U){if(this.suggestionShown){this._lastOpened.nextHighlight(U);}},preHighlight:function H(U){if(this.suggestionShown){this._lastOpened.preHighlight(U);}},getSuggestion:function S(h){var d=this.candidates,a=d&&d.items,X=d&&d.isComplete,g=this._last_hit;if(!this.noCache&&(d||g)){var f=this.filterCandidates(a,h,this.REQUEST_THRESHOLD),b=f.length,e=this.suggestCount,U=false;if(!X&&b<e){var V=g&&g.pattern;if(g&&V&&(h.indexOf(V)>-1)){U=true;var k=this.filterCandidates(g.items,h,this.REQUEST_THRESHOLD),Y=k&&k.length,W=mstrmojo.array,j=this.itemField,Z;for(Z=0;Z<Y;Z++){if(W.find(f,j,k[Z][j])===-1){f.push(k[Z]);}}b=f.length;}}if(!X&&((h.length>2&&b<this.REQUEST_THRESHOLD)||(b<e))){this.requestCandidates(h);return -1;}return(b<e)?f:f.slice(0,e);}this.requestCandidates(h);return -1;},requestCandidates:function A(U){this._request_pattern=U;var X=this,V=this.getSuggestionTarget(),W={success:function(e){if(!e){return ;}var d=X.getSuggestionTarget();if(!d||(V!==d)){return ;}var j=d.getSearchPattern(),a=e.items;X._last_hit={items:a,pattern:U};X.sz=e.sz;if(!X.noCache&&a){var f=(X.candidates&&X.candidates.items)||[],g=[].concat(a),b=a.length,Z;for(Z=0;Z<b;Z++){var Y=g[Z];if(mstrmojo.array.indexOf(f,Y)>-1){mstrmojo.array.removeItem(a,Y);}}if(X.candidates){X.candidates.items=f.concat(a);}}if((j||j==="")&&j.indexOf(U)>-1){var h=X.filterCandidates(a,j);X.updateSuggestion(h);}},failure:function(Y){if(Y.getResponseHeader){mstrmojo.alert(Y.getResponseHeader("X-MSTR-TaskFailureMsg"));}}};this.getCandidatesThroughTaskCall({pattern:U,blockBegin:this.blockBegin,blockCount:this.blockCount,isSuggest:true},W);},filterCandidates:function Q(X,W,U){U=U||this.suggestCount;W=mstrmojo.string.regEscape(W);var Y=this.itemField,V=mstrmojo.array.filter(X,function(Z){return(new RegExp("\\s"+W+"|^"+W,"i")).test(Z[Y]);},{max:U});return V;},getHighlightedText:function P(W,Z){if(!this.highlightPattern||mstrmojo.string.isEmpty(W)){return Z;}try{if(!this.nameWildcards||mstr.$A.find([2,32],parseInt(this.nameWildcards,10))>-1){Z=Z.replace(new RegExp("(^|\\s)("+W+")","gi"),"$1<b>$2</b>");}else{var Y=W.split(" "),V,U;for(V=0,U=Y.length;V<U;V++){if(Y[V]!==""){Z=Z.replace(new RegExp("("+Y[V]+")","gi"),"<b>$1</b>");}}}}catch(X){}return Z;},updateSuggestion:function O(X){var V=X&&X.length,U=this.browseItemVisible;if(V||U){if(U){X=X||[];X.push({n:"Browse...",t:-99,cssClass:(V?"br":"bro")});}this.set("suggestionItems",X);if(this.suggestionShown){var W=this._lastOpened;if(W&&W.nudge){W.nudge();}if(this.autoSelect&&W){W.list.singleSelect(0);}}else{this.openPopup("suggestionPopup",this.getSuggestionPos());this.suggestionShown=true;}}else{this.hideSuggestion();}},ob:{scriptClass:"mstrmojo.Editor",title:mstrmojo.desc(5298,"Select an Object"),help:"Select_Objects_dialog_box_.htm",onClose:function(){var U=this.opener;if(U&&U.onBrowserClose){U.onBrowserClose();}},onOpen:function(){var U=this.opener;if(U&&U.onBrowserOpen){U.onBrowserOpen();}},children:[{scriptClass:"mstrmojo.ObjectBrowser",alias:"browser",fishEyeVisible:false,closeable:false,closeOnSelect:false}]},onBrowserClose:function L(){this.browserShown=false;},handleSuggestionItemSelect:function K(U,V){if(this.browseItemVisible&&U.t===-99){this.hideSuggestion();mstrmojo.requiresCls("mstrmojo.ObjectBrowser");var W=this.zIndex;this.openPopup("ob",{zIndex:(W&&(W+10))||110});this.ob.browser.browse(mstrmojo.hash.copy(V,{folderLinksContextId:this.folderLinksContextId,onSelectCB:[this,"onSuggestionItemSelect"],browsableTypes:this.browsableTypes}));this.browserShown=true;}else{this.onSuggestionItemSelect(U);}},highlightPattern:true,suggestionPopupCssClss:"",suggestionPopup:{scriptClass:"mstrmojo.Popup",cssClass:"mstrmojo-ObjectInputBox-suggest",autoClose:true,locksHover:true,nextHighlight:function(U){D.call(this,true,U);},preHighlight:function(U){D.call(this,false,U);},getSelected:function M(){var U=this.list;return U.items[U.selectedIndex];},onOpen:function I(){var U=this.opener;if(U){mstrmojo.css.addClass(this.domNode,U.suggestionPopupCssClss||"");if(U.autoSelect){this.list.singleSelect(0);}if(U.nudge){U.nudge(this);}}},onClose:function F(){this.list.clearSelect();var U=this.opener;if(U){U.suggestionShown=false;mstrmojo.css.removeClass(this.domNode,U.suggestionPopupCssClss||"");}}},suggestionListClass:"mstrmojo.SuggestionList",postApplyProperties:function R(){this.suggestionPopup.children=[{scriptClass:this.suggestionListClass,alias:"list",cssClass:"mstrmojo-suggest-list"}];}}));}());(function(){mstrmojo.requiresCls("mstrmojo.ui.menus.PopupConfig","mstrmojo.ui.menus.MenuEditor");mstrmojo.ui.menus.EditorConfig=mstrmojo.declare(mstrmojo.ui.menus.PopupConfig,[mstrmojo._HasBindings],{scriptClass:"mstrmojo.ui.menus.EditorConfig",data:null,fnOk:null,fnCancel:null,okEnabled:true,cancelEnabled:true,okVisible:true,cancelVisible:true,init:function D(E){this._super(E);if(this.data&&!mstrmojo.all[this.data.id]){mstrmojo.hash.make(this.data,mstrmojo.Obj);}this.initBindings();},clear:function A(){this._super();this.data=null;this.fnOk=this.fnCancel=mstrmojo.emptyFn;},newInstance:function C(){return new mstrmojo.ui.menus.MenuEditor({popupConfig:this});},destroy:function B(){if(this.data){this.data.destroy();}this.destroyBindings();this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.ValidationTextBox","mstrmojo.hash");var A=mstrmojo.hash;mstrmojo.ui.editors.controls.ValidationTextBox=mstrmojo.declare(mstrmojo.ValidationTextBox,null,{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",errRevert:true,dtp:null,validationDelay:3000,orignText:null,trigger:mstrmojo.validation.TRIGGER.ONKEYUP,init:function(B){B=B||{};B.constraints=B.constraints||{};B.constraints.trigger=this.trigger;this._super(B);},prekeyup:function(B){if(B.e.keyCode===13){this.blur();return ;}this._super(B);},onfocus:function(){this.orignText=this.value;},onblur:function(){if(this.value!=this.orignText){this.validate();}},validate:function(){this._super();this.orignText=this.value;this.clearValDelayTimer();},preinput:mstrmojo.emptyFn,postinput:function(){var B=this.doValidation(this.value);if(B.code<=mstrmojo.validation.STATUSCODE.VALID){this.clearValidation();if(!this.errRevert){this.hideTooltip();}}},updateTooltipConfig:function(){this.richTooltip={posType:mstrmojo.tooltip.POS_BOTTOMLEFT,cssClass:"vi-warning vi-tooltip-C vi-calculation-warning",left:this.domNode.offsetWidth+12,top:this.domNode.offsetHeight+5,refNode:this.domNode,content:mstrmojo.desc(13819,"Invalid input")};},onInvalid:function(){if(!this.errRevert){this.hideTooltip();this.showTooltip();}else{this.clearValidation();this.set("value",this.orignText);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.ui.menus.Menu","mstrmojo.hash","mstrmojo.array");mstrmojo.ui.menus.MenuItemType=null;var B=mstrmojo.array,W="separator";mstrmojo.ui.menus.MenuConfig=mstrmojo.declare(mstrmojo.ui.PopupConfig,null,{scriptClass:"mstrmojo.ui.menus.MenuConfig",menus:null,menuCssClass:"",supportsScroll:false,maxHeight:0,hasToggleItem:false,hasMenuItems:function S(){var X=B.filter(this.menus||[],function(Y){return Y.cls!==W;});return !!X.length;},getMenuItems:function F(X){var Z=B.filter(this.menus.slice().reverse(),function(d,c,b){var a=b[c+1];return X||d.cls!==W||(c&&a&&a.cls!==W);}).reverse();var Y=(Z&&Z.length)||0;if(!X&&Y>0&&Z[Y-1].cls===W){Z.pop();}return Z;},getMenuItem:function D(a){var Z=this.menus,X;if(Z!==null){for(X=0;X<Z.length;X++){var Y=Z[X];if(Y.cls===a){return Y;}}}return null;},absorbMenuItems:function U(X){this.menus=this.menus.concat(X.menus);if(!this.hasToggleItem&&X.hasToggleItem){this.hasToggleItem=true;}},addMenuItem:function K(e,a,c,Y,b){var d,Z,X;if(!e||typeof e==="string"){d=e;}else{d=e.n;Z=e.ttp;}X={n:d,ttp:Z,cls:a,fn:c,ctxt:Y};if(isNaN(b)||b>=this.menus.length){this.menus.push(X);}else{this.menus.splice(b,0,X);}if(a.indexOf(/\bon\b/)>-1){this.hasToggleItem=true;}return X;},addCustomMenuItem:function V(c,Z,b,Y,X){var a=this.addMenuItem(c,Z,b,X);a.getItemMarkup=Y;return a;},addDisabledMenuItem:function Q(Y,X){this.addNonInteractiveMenuItem(Y,X,true);},addNonInteractiveMenuItem:function O(b,Y,X){var Z=["non-int"];if(Y){Z.push(Y);}if(X){Z.push("disabled");}if(b&&typeof b!=="string"&&b.ttp){this.useTooltip=true;}var a=this.addMenuItem(b,Z.join(" "),mstrmojo.emptyFn);a.dsbld=true;},addSeparator:function E(){this.addMenuItem("",W,function(){return false;});},addPopupMenuItem:function T(e,Z,d,a,Y,b){var c=["pop "];if(a){c.push(a);}var X=this.addMenuItem(e,c.join(" "),d,Y,b);X.pop=true;X.scope=Z;return X;},addActionPopupMenuItem:function N(e,Y,c,d,Z,X,b){var a=this.addPopupMenuItem(e,Y,d,(Z||"")+" ax",X,b);a.actionFn=c;a.ax=true;},addSubMenuItem:function M(b,Z,Y,a,X){this.addPopupMenuItem(b,Y,a,Z,X);},addEditorMenuItem:function R(b,Y,a,X,Z){this.addPopupMenuItem(b,Y,a,"",X,Z);},getToggleItemStates:function G(f,h,X,d,Z,c){var a,b,Y,e;if(typeof f==="string"){a=b=f;Y=e="";}else{a=f.on||"";b=f.off||"";Y=f.ttpOn||"";e=f.ttpOff||"";}var g=[{n:a,ttp:Y,cls:h+" on",fn:d,ctxt:c},{n:b,ttp:e,cls:h,fn:X,ctxt:c}];if(!Z){g.reverse();}return g;},addToggleMenuItem:function L(e,a,c,Z,Y,d,X){var b=this.getToggleItemStates(e,a,c,Z,d,X);this.hasToggleItem=true;return this.addDualStateItem(Y,b[0],b[1]);},addDualStateItem:function I(Y,X,Z){return this.addMenuItem({n:X.n,ttp:X.ttp},X.cls,this.getDualStateHandler(Y,X,Z),X.ctxt);},getDualStateHandler:function J(Y,X,Z){return function(b,c){var a=[X,Z];if(b.cls===X.cls){a.reverse();}a[1].fn.call(mstrmojo.all[Y],b,c);b.n=a[0].n;b.ttp=a[0].ttp;b.cls=a[0].cls;};},addRadioMenuGroup:function C(Z,e,a,Y,X,d,c){var b=[];this.hasToggleItem=true;a.forEach(function(i,f){if(i.separator){this.addSeparator();return ;}var k=i.text,j=(Y||"")+" "+(i.cls||"")+(d?"":" radio")+(i.value===Z?" on":""),h=function(){if(e.call(this.ctxt,i.value,Z,i)===false){return false;}Z=i.value;b.forEach(function(l){l.cls=l.cls.replace(/ on$/,"")+(l.radioValue===Z?" on":"");});return true;},g=c?this.addCustomMenuItem(k,j,h,c(i,f),X):this.addMenuItem(k,j,h,X);g.radioValue=i.value;b.push(g);},this);},clear:function P(){this._super();this.menus=[];},newInstance:function A(X){return new mstrmojo.ui.menus.Menu(mstrmojo.hash.copy({popupConfig:this},X));},addMenuTitle:function H(X){this.addMenuItem(X||"","menu-item-title",mstrmojo.emptyFn);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.PreviewButton","mstrmojo.ui.PopupList","mstrmojo.array","mstrmojo.css");var F=mstrmojo.css,E=mstrmojo.array;mstrmojo.ui.editors.controls.ListPreviewButton=mstrmojo.declare(mstrmojo.ui.editors.controls.PreviewButton,null,{scriptClass:"mstrmojo.ui.editors.controls.ListPreviewButton",init:function G(L){this._super(L);var M=this.getListCfg(),K=this.itemValueField;M.alias="list";M.locksHover=true;M.slot="widgetHostNode";M.listHooks={select:function J(N,O){this.parent.set("selectedValue",O[K]);this.close();}};M.setDimensions=mstrmojo.emptyFn;this.addChildren([M]);F.addWidgetCssClass(this.list,"ctrl-popup-list");},getPopupWidget:function D(){return this.list;},items:null,onitemsChange:function H(){var J=this.items;if(J){this.list.set("items",J);}},selectedValue:"",itemValueField:"n",onselectedValueChange:function C(){var K=this.selectedValue,J=this.itemValueField,L=this.list;L.selectItems(E.filter(L.items||[],function(M){return M[J]===K;}),true);this.updatePreview();},updatePreview:function B(){throw new Error(this.scriptClass+" must implement updatePreview.");},getListCfg:function I(){return{scriptClass:"mstrmojo.ui.PopupList",selectionPolicy:"reselect"};},postBuildRendering:function A(){this.onitemsChange();this.onselectedValueChange();return this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupButton","mstrmojo._HasTooltip","mstrmojo.ui._IsPulldown","mstrmojo.ui.PopupList","mstrmojo.hash","mstrmojo.dom","mstrmojo.string","mstrmojo.css","mstrmojo.array","mstrmojo._CanAutoClose");var T=mstrmojo.css,L=mstrmojo.array,F=mstrmojo.dom,B=mstrmojo.string;function H(V){this.set("richTooltip",{cssClass:"vi-regular vi-tooltip-C",content:B.encodeHtmlString(V)});}mstrmojo.ui.Pulldown=mstrmojo.declare(mstrmojo.ui.PopupButton,[mstrmojo.ui._IsPulldown,mstrmojo._HasTooltip],{scriptClass:"mstrmojo.ui.Pulldown",onitemSelected:mstrmojo.emptyFn,onSelectedItemChange:mstrmojo.emptyFn,useRichTooltip:true,allowHTML:false,useDarkTheme:false,init:function P(V){this._super(V);T.addWidgetCssClass(this.getPopupList(),"ctrl-popup-list");},initChildren:function C(){this.children=this.getPopupListConfig();this._super();},postBuildRendering:function Q(){if(this._super){this._super();}var V=this.getSelectedItem();if(V){H.call(this,V.n);}},showTooltip:function D(Z,Y){var W=this.selectedNode,X=this.richTooltip;if(W.offsetWidth>=W.scrollWidth){return ;}if(!X.top){var V=F.position(this.selectedNode);X.top=V.y-3;X.left=V.x+V.w+6;}if(this._super){this._super(Z,Y);}},getSelectedItem:function M(){var V=this.items;return V&&V[this.selectedIndex];},selectItemByField:function A(W,V){this.set("selectedIndex",L.find(this.items||[],W,V));},getPopupWidget:function E(){return this.list;},getPopupList:function J(){return this.list;},_set_items:function I(Y,V){var X=this.items;this.items=V;delete this.selectedIndex;if(X!==V){var W=this.hasRendered;if(W){this.refresh();}return true;}return false;},onclick:function U(V){this._super(V);var X=this,W=X.getPopupWidget();X.mw=X.mw||function(Y){if(!F.contains(W.domNode,F.eventTarget(self,Y),true,document.body)){W.close();F.detachEvent(document,F.isFF?"DOMMouseScroll":"mousewheel",X.mw);}};F.attachEvent(document,F.isFF?"DOMMouseScroll":"mousewheel",X.mw);if(X.focusOnPopup){W.domNode.focus();}},_set_selectedIndex:function N(c,Z,X){if((Z!==0&&!Z)||Z<0){return false;}var W=this.selectedIndex=Z,V=this.getPopupList(),Y=V&&V.items,b=Y&&Y[W],a=this.selectedNode;if(b&&b.dsbld){return false;}if(V){mstrmojo._ListSelections._set_selectedIndex.call(V,"selectedIndex",W,X);}if(a&&Y&&Y[W]){a.innerHTML=this.getPulldownTextInnerHTML(Y[W]);a.title=Y[W].title||"";}if(Y&&Y[W]){if(this.focusOnPopup&&V&&!V.closeAfterSelection){V.itemsContainerNode.children[W].style.color="";}else{this.onitemSelected(Y[W],W);}}return true;},getPulldownTextInnerHTML:function G(V){return this.allowHTML?V.n:B.encodeHtmlString(V.n,true);},postselectedIndexChange:function O(V){var Z=V.value,X=V.valueWas;if(Z!==X){var W=this.items,Y=W[Z];if(Y){H.call(this,Y.n);}this.onSelectedItemChange(Y,W[X]);}},getPopupConfig:function K(){var V=this._super();V.useDarkTheme=this.useDarkTheme;return V;},getPopupListConfig:function S(){return{scriptClass:"mstrmojo.ui.PopupList",alias:"list",selectionPolicy:"reselect",locksHover:true,useRichTooltip:true,showTooltipForLargeText:true,scrollNodeMaxHeight:this.scrollNodeMaxHeight,listHooks:{select:function V(Z,a,Y){this.parent.set("selectedIndex",Y);if(this.visible&&this.closeAfterSelection&&!this.selectedItem.dsbld){this.close();}}},getItemProps:function W(a,Y){var Z=mstrmojo._IsList.getItemProps.call(this,a,Y);Z.style=this.parent.itemCssText||"";return Z;},suppressClose:function X(Y){return mstrmojo._CanAutoClose.suppressClose.call(this,Y)||F.contains(this.parent.domNode,Y,true,document.body);}};},children:[]});mstrmojo.ui.Pulldown.newPulldown=function R(W,a,V,Z,Y){Z=Z||{};Z.items=W;var X;if(Y===true){X=mstrmojo.hash.copy({scriptClass:"mstrmojo.ui.Pulldown",selectedIndex:V||0},Z);}else{X=new mstrmojo.ui.Pulldown(Z);if(V!==undefined){X.set("selectedIndex",V);}}X.onSelectedItemChange=a||mstrmojo.emptyFn;return X;};}());(function(){mstrmojo.requiresCls("mstrmojo._InputList","mstrmojo._InputListHoriz");mstrmojo.RadioList=mstrmojo.declare(mstrmojo._InputList,null,{scriptClass:"mstrmojo.RadioList",inputType:"radio",cssClass:"mstrmojo-RadioList",itemCssClass:"mstrmojo-RadioList-item",onenabledChange:function A(B){for(var C=0;C<this.items.length;C++){this._getItemNode(C).firstChild.disabled=!B.value;}}});mstrmojo.RadioListHoriz=mstrmojo.declare(mstrmojo._InputListHoriz,null,{scriptClass:"mstrmojo.RadioListHoriz",inputType:"radio",cssClass:"mstrmojo-RadioListHoriz",itemCssClass:"mstrmojo-RadioListHoriz-item"});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.dom","mstrmojo.hash","mstrmojo._HasEditableText","mstrmojo.ui.Pulldown");var K=mstrmojo.array,H=mstrmojo.dom,D=mstrmojo.hash,A=mstrmojo.Enum_Keys,C=19,M=A.ENTER,E=A.ESCAPE,N=A.DOWN_ARROW,F=A.UP_ARROW;mstrmojo.ui.SearchablePulldown=mstrmojo.declare(mstrmojo.ui.Pulldown,[mstrmojo._HasEditableText],{scriptClass:"mstrmojo.ui.SearchablePulldown",editableSlot:"selectedNode",allowCustomText:false,isSearching:false,editOnClick:false,init:function P(U){this._super(U);var Q=this.getPopupList();Q.renderOnScroll=this.renderOnScroll||Q.renderOnScroll;Q.renderBlockSize=this.renderBlockSize||Q.renderBlockSize;var T=[];if((mstrApp.isWorkstation&&H.isMac())||H.isSafari){T=["clip-safari"];}mstrmojo.css.addWidgetCssClass(this,["mstrmojo-ui-SearchablePulldown"].concat(T));var S=Q.constructor.prototype,R=Q.getItemProps||S.getItemProps,V=Q.getItemMarkup||S.getItemMarkup;Q.getItemProps=function(a,X){var Y=this._spft||"",c=a.n,Z=c?c.toUpperCase().indexOf(Y):-1,W=function(e){var d=[],f;K.forEach(e.split(";"),function(g){f=g.split(":");if(f.length===2&&f[0].toLowerCase()!=="color"){d.push(g);}});return d.join(";");};if(Z===-1){Y="";}var b=R.call(this,a,X);if(this.selectedIndices[X]){b.style=W(b.style);}if(c){b.before=c.slice(0,Z);b.input=c.substring(Z,Z+Y.length);b.after=c.slice(Z+Y.length,c.length);}return b;};Q.getItemMarkup=function(Y,W){var X=V.call(this,Y,W);if(Y.n&&Y.v!=="u;"){return X.replace("{@en@n}","{@en@before}<span class='sp-highlight'>{@en@input}</span>{@en@after}");}return X;};this._originalFocusOnPopup=this.focusOnPopup;this.focusOnPopup=false;},onclick:function O(Q){if(this._originalFocusOnPopup!==undefined){this.focusOnPopup=false;}if(this.isClickingAnchorSlot(Q)){var S=Q.e.offsetX>=(this.selectedNode.offsetWidth-C),R=this.getPopupWidget().visible;if(!R||(R&&S)){this.set("isEditing",!R);this._super(Q);}else{if(!this.isEditing){this.set("isEditing",true);}}}},setDefaultListAndIndex:function(U,V){var T=this.getPopupList(),R=this.text,Q=K.find(U,"n",R);if(Q===-1&&!this.allowCustomText){var S=T.items[0]||U[0];Q=K.find(U,"n",S.n);}T.set("items",U);if(V){this.set("selectedIndex",Q);}},onPopupWidgetClosed:function I(Q){this.set("isEditing",false);var R=this.getPopupList(),S=R._oldItems;delete R._oldItems;if(S){this.setDefaultListAndIndex(S,Q&&Q.pressingEnter);}},_set_selectedIndex:function G(S,Q){if(this.allowCustomText&&Q===-1){this.selectedIndex=-1;this.onitemSelected(null,Q);}else{this.isSearching=false;this._super(S,Q,true);if(this.hasRendered){var R=this.selectedNode;this.text=R.innerText||R.textContent;}}return true;},onkeydown:function J(S){this._super(S);var R=window.event||S.e,T=R.keyCode,Q=this.getPopupWidget();if(T===M){Q.close({pressingEnter:true});}else{if(this._originalFocusOnPopup&&(T===N||T===F)){this.focusOnPopup=true;if(Q.focus){Q.focus();}Q.raiseEvent(S);}}},onkeyup:function B(S){var Q=window.event||S.e,T=Q.keyCode,R=this.getPopupWidget();this._super(S);if(T===E||T===M){R.close();}else{if(T!==N&&T!==F){this.processSearch();}}},processSearch:function L(){this.isSearching=true;this.hideTooltip();var Q=[],S=this.getPopupList(),U=this.selectedNode.innerHTML,V=S._oldItems||S.items,R=U.toUpperCase(),T;R=R.replace(/<BR>/,"");if(R.length>0){K.forEach(V,function(W){T=W.n;if(T&&T.toUpperCase().indexOf(R)>-1){Q.push(D.clone(W));}},this);}else{Q=V;}S._spft=R;if(this.customizeSearchResult){this.customizeSearchResult(Q);}S.set("items",Q);if(S.adjustCornersForPopupOverflow){S.adjustCornersForPopupOverflow();}delete S._spft;S._oldItems=V;S.set("visible",S.items.length!==0);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ListPreviewButton","mstrmojo.ui.editors.controls.ValidationTextBox","mstrmojo.EditableLabel");var A=mstrmojo.css,E=mstrmojo.validation.STATUSCODE;mstrmojo.ui.editors.controls.ComboBox=mstrmojo.declare(mstrmojo.ui.editors.controls.ListPreviewButton,null,{scriptClass:"mstrmojo.ui.editors.controls.ComboBox",markupMethods:{onenabledChange:function D(){this.txtLabel.set("enabled",this.enabled);this.txtLabel.set("editOnClick",this.enabled);A.toggleClass(this.domNode,"disabled",!this.enabled);}},init:function B(F){this._super(F);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-ComboBox");},updatePreview:function C(){this.txtLabel.set("value",this.selectedValue||"");},updateSelection:function(){this.set("selectedValue",this.txtLabel.value);},validateTextInput:function(F){return true;},txtLabel:null,children:[{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",alias:"txtLabel",slot:"previewNode",constraints:{validator:function(){if(!this.parent.validateTextInput(this.value)){return{id:this.id,code:E.INVALID,msg:""};}}},onValid:function(){this.parent.updateSelection();}}]});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.vi._MonitorsAppState","mstrmojo.vi._MonitorsLayoutMode","mstrmojo._HasOwnAvatar","mstrmojo.vi.ui._IsDropTarget","mstrmojo.EditableLabel","mstrmojo.ui.menus.MenuConfig","mstrmojo.css");var A=mstrmojo.css,N=mstrmojo.dom,M="draggedTab",J="stopDragging",k=1,L=2,o=4,G=8,j=16;function l(p){return function(){A.toggleClass(this.tabStripMenuNode,"active",p);};}function g(z){var u=new mstrmojo.ui.menus.MenuConfig({supportsScroll:true,maxHeight:N.getMaxScrollHeight()}),p=this.getMenuActions(),x=this.index,r=this.id,s=this.total,v=this.parent,q=function(){var AA=v&&v.getTabs();return AA&&AA.length>x?AA[x]:mstrmojo.all[r];};if((p&j)>0){this.addNewTabMenuItem(u);}if((p&o)>0){var w=mstrmojo.desc(3397,"Duplicate"),y=this.parent.scriptClass;if(y.indexOf("LayoutTabStrip")>=0){w=mstrmojo.desc(15022,"Duplicate Chapter");}else{if(y.indexOf("PanelTabStrip")>=0){w=mstrmojo.desc(14923,"Duplicate Page");}}u.addMenuItem(w,"dup",function(){q().tabDuplicated();});}if((p&L)>0){if(x){u.addMenuItem(mstrmojo.desc(5362,"Move Left"),"lft",function(){q().tabMoved(true);});}if(x<s-1){u.addMenuItem(mstrmojo.desc(5363,"Move Right"),"rgt",function(){q().tabMoved(false);});}}u.addSeparator();if((p&k)>0){u.addMenuItem(mstrmojo.desc(1388,"Rename"),"rnm",function(){q().lbl.set("isEditing",true);});}if((p&G)>0){if(s>1){u.addMenuItem(mstrmojo.desc(629,"Delete"),"cls",function(){q().tabDeleted();});}}var t=this.getCustomMenu();if(t&&t.hasMenuItems()){u.addSeparator();u.absorbMenuItems(t);}u.addPopupHandlers(this.id,l(true),l(false));this.showTabMenu(this.updateMenuCfg(u),z);}mstrmojo.vi.ui.tabs.Tab=mstrmojo.declare(mstrmojo.Container,[mstrmojo.ui.menus._HasMenuPopup,mstrmojo._HasOwnAvatar,mstrmojo.vi.ui._IsDropTarget,mstrmojo.vi._MonitorsAppState,mstrmojo.vi._MonitorsLayoutMode],{scriptClass:"mstrmojo.vi.ui.tabs.Tab",markupString:'<div id="{@id}" class="mstrmojo-VITab unselectable {@cssClass}" style="{@cssText}" unselectable="on" mstrAttach:contextmenu,click><div><div class="mstrmojo-VITab-tab"></div><div class="mstrmojo-VITab-menu"></div></div></div>',markupSlots:{containerNode:function S(){return this.domNode.firstChild.firstChild;},menuBtnNode:function n(){return this.domNode.firstChild.lastChild;}},markupMethods:{ontitleChange:function I(){this.lbl.set("text",this.title);},onisSelectedChange:function h(){mstrmojo.css.toggleClass(this.domNode,"selected",this.isSelected);},onzIndexChange:function i(){this.domNode.style.zIndex=this.zIndex;}},zIndex:1,menuBtnNode:null,lbl:null,title:"",index:-1,total:-1,isSelected:false,isCutoff:false,isHidden:false,isLeftMost:false,isRightMost:false,leftEdgeHiddenWidth:0,rightEdgeHiddenWidth:0,children:[{scriptClass:"mstrmojo.EditableLabel",alias:"lbl",editOnClick:false,onTextEditComplete:function V(q,p){if(q){this.parent.titleEdited(this.text,p);}}}],postBuildRendering:function Q(){var p=this.isValidMode();if(!p||(mstrApp.isLayoutModePreview&&mstrApp.isLayoutModePreview())){this.draggable=false;}this.lbl.set("editOnDoubleClick",p);this._super();},oncontextmenu:function a(p){this.onclick(p);p.preventDefault();},onclick:function d(p){var r=this.domNode;if(A.hasClass(r,J)){A.removeClass(r,J);return ;}var q=function(){if(this.isValidMode()){this.postTabClicked(this,p);}};if(!this.isSelected){this.tabSelected({success:q.bind(this)});}else{q.call(this);}},postTabClicked:function m(s,q){s=this.findSelectedTab(this)||s;var p=s.menuBtnNode,t=q.getTarget().className===p.className,r;if(t){r=N.position(p);}if(q.name==="contextmenu"||(t&&!(r.x||r.y))){r={x:q.e.clientX,y:q.e.clientY};}if(r){g.call(s,r);}},getMenuActions:function c(){return 0;},getCustomMenu:function X(){return null;},isDragValid:function R(){return this.parent.children.length>1&&!this.lbl.isEditing&&this.isValidMode();},createAvatar:function T(){var p=document.createElement("div");p.appendChild(this.domNode.cloneNode(true));p.style.margin="-5px 0 0 10px";return p;},addTabDnDStyle:function W(){var p=this.lbl.domNode;if(p&&!this.isSelected){A.addClass(p,M);}},clearTabDnDStyle:function F(){var p=this.lbl.domNode;if(p&&!this.isSelected){A.removeClass(p,M);}},allowDrop:function D(p){var q=p.src.widget;return q&&q.parent===this.parent;},dropTab:function K(p){var s=p.src,r=s.data,q=s.widget;q.clearTabDnDStyle();this.parent.moveTab(r.idx,this.index,r.fromIdx);},ondragenter:function H(q){this._super(q);var s=q.src.data,r=q.src.widget,p=this.index;this.parent.moveTab(s.idx,p);s.idx=p;},ondragover:function Z(r){var p=r.tgt.node,q=r.tgtData,s=q&&q.node,t=r.src.widget;if(!q||s!==p){r.tgtData={node:p};}if(t&&!t.isSelected){t.addTabDnDStyle();}},ondragleave:function P(p){this._super(p);var q=p.src.widget;if(q&&!q.isSelected){q.addTabDnDStyle();}},ondragend:function C(p){this._super(p);A.addClass(this.domNode,J);this.dropTab(p);},getDragData:function b(){var r=this.id,p=this.index;return{setAvatarClass:function q(s){var v=mstrmojo.all[r],t=v.avatar;if(t){var u=[v.avatarCssClass,"hasOwnAvatar",s];t.className=u.join(" ");}},fromIdx:p,idx:p};},getDropAvatarIcon:function B(){return"pivot";},isValidMode:function E(){return !((mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation())||(mstrApp.isAppStateSelection&&mstrApp.isAppStateSelection())||(mstrApp.allowWebDashboardDesign&&!mstrApp.allowWebDashboardDesign()));},cleanUpAfterTarget:function e(p){this.clearTabDnDStyle();this._super(p);},onAppStateChange:function f(q){var s=this.lbl,r=this.isValidMode(),p=mstrApp.isLayoutPreview(q.value);s.set("isEditing",false);s.set("editOnDoubleClick",r);this.draggable=r&&!p;},onLayoutModeChange:function O(q){var r=this.isValidMode(),p=mstrApp.isLayoutPreview(q.value);this.draggable=r&&!p;},addNewTabMenuItem:function U(p){this.throwAbstractMethodError("addNewTabMenuItem");},findSelectedTab:mstrmojo.emptyFn,tabSelected:mstrmojo.emptyFn,titleEdited:mstrmojo.emptyFn,tabMoved:mstrmojo.emptyFn,tabDeleted:mstrmojo.emptyFn,tabDuplicated:mstrmojo.emptyFn,showTabMenu:mstrmojo.emptyFn,updateMenuCfg:function Y(p){return p;}});mstrmojo.vi.ui.tabs.Tab.ACTIONS={NEW_TAB:j,RENAME:k,MOVE:L,DUPLICATE:o,DELETE:G};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.string","mstrmojo.Widget","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.mstr.EnumDSSXMLObjectSubTypes","mstrmojo.ME.MetricDataService");mstrmojo.requiresDescs(3224);var Y=["(",")","{","}","-","+","*","/","<",">","|","~",","],I={" ":true,"@":true},X=null,W=mstrmojo.dom,K=mstrmojo.css,H=mstrmojo.mstr.EnumDSSXMLObjectTypes,D=mstrmojo.mstr.EnumDSSXMLObjectSubTypes,Z=mstrmojo.ME.MetricDataService;function O(e){if(!X){X={};var d,b;for(d=0,b=Y.length;d<b;d++){X[Y[d]]=true;}}return X.hasOwnProperty(e);}function a(e){if(!e){return false;}var b=e.length,d,f;for(d=0;d<b;d++){f=e.charAt(d);if(f==="["){return false;}if(O(f)||I[f]){return true;}}return false;}function A(b){return a(b)?"["+b+"]":b;}function M(f){if(!f){return null;}var b=f.length,e=f.split("["),d=e.length,h,g;if(d===1){return f.split("@");}else{if(d===3){h=e[1];h="["+h.substring(0,h.length-1);g="["+e[2];}else{if(e[0].length===0){var i=e[1],c=i.indexOf("]");h="["+i.substring(0,c+1);if(c===i.length-1){return[h];}else{g=i.substring(c+2);}}else{var i=e[0];h=i.substring(0,i.length-1);g="["+e[1];}}}return[h,g];}var R={8:true,9:true,10:true};var C=function(c,b){return R[c]&&!/^\".*\"$/.test(b)?'"'+b+'"':b;};var F=function(c,b,d){var e=typeof d==="undefined"?true:R[d];if(b.length===2&&b==='""'){return b;}return c.tp===261&&b.length>=2&&e?(/^\s+$/.test(b.substr(1,b.length-2))?b:b.substr(1,b.length-2)):b;};mstrmojo.ME.MetricToken=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui.menus._HasMenuPopup],{data:null,markupString:'<span id={@id} class="mstrmojo-token {@cssClass}" mstrAttach:contextmenu></span>',active:false,markupMethods:{ondataChange:function(){var c=this.data,e=this.isEmbeddedFilter(),b=e?"&nbsp;":mstrmojo.string.encodeHtmlString(String(c.v));if(c.v===","){this.domNode.innerHTML=b+"&nbsp;";}else{if(c.tp===259&&c.v==="Desc"){this.domNode.innerHTML="&nbsp;"+b;}else{if(Z.isLogicOrCompFunc(c)){this.domNode.innerHTML="&nbsp;"+b+"&nbsp;";}else{this.domNode.innerHTML=b;}}}K.toggleClass(this.domNode,["mstr"],this.isMstrO());K.toggleClass(this.domNode,["nfn"],!this.isFunction());K.toggleClass(this.domNode,["invalid"],c.sta===-1);K.toggleClass(this.domNode,["embeddedFilter"],e);},onactiveChange:function(){mstrmojo.css.toggleClass(this.domNode,["active"],this.active);}},oncontextmenu:function U(b){this.closePopup();if(this.isEmbeddedFilter()){var d=new mstrmojo.ui.menus.MenuConfig({position:W.getMousePosition(b.e,b.hWin),isHostedWithin:false,alignWithAnchor:true});var c=this;d.addMenuItem(mstrmojo.desc(3224,"Edit..."),"",function(){var e=c.parent;if(e&&e.editEmbeddedFilterToken){e.editEmbeddedFilterToken(c);}});this.openPopup(d.newInstance());}},isMstrO:function V(){return !!this.data.oi||!!this.data.rfd;},isFunction:function B(){return this.isMstrO()&&(this.data.oi&&this.data.oi.t===H.Function);},isEmbeddedFilter:function J(){var d=this.data.oi,c=d&&d.t,b=d&&d.st;return this.isMstrO()&&c===H.Filter&&b===D.Filter&&d.isEmbedded;},brackets:A,length:function E(){return this.isEmbeddedFilter()?1:this.data.v.toString().length;},isDelimiter:function T(){return this.data.isDelimiter||(this.length()===1&&O(this.data.v));},split2Tokens:function L(f){var e=this.data,c=e&&e.v.toString(),g=c.substring(0,f),b=c.substring(f);return[{v:g,isNew:true},{v:b,isNew:true}];},mergeTo:function N(c){var f=this.data,e=f&&f.v.toString(),b=c.data.v.toString();return{v:e+b,isNew:true};},brackets:A,setItemInfo:function S(b){var c=this.data;c.v=this.brackets(b.n);c.oi=b;c.sta=1;c.isNew=true;this.set("data",c);this.paint();},spliceContent:function P(i,g,c){var h=this.data,f=h&&h.v.toString(),j=f.substring(0,i);g=(g===null||g===undefined)?(f.length-i):g;var b=f.substring(i+g),e=j+(c||"")+b;h.v=e;h.isNew=true;h.sta=1;h.ift=(this.isAttributeToken()||h.at)&&(h.v.indexOf("@")>=0);if(h.ift){h.at=h.oi||h.at;}else{delete h.at;}delete h.oi;delete h.exv;delete h.extp;delete h.tp;this.set("data",h);this.paint();},isAttributeToken:function G(){return this.data&&this.data.oi&&this.data.oi.t===H.Attribute;},setFormInfo:function Q(c){var e=this.data,b=e.oi||e.at;e.v=this.brackets(b.n)+"@"+this.brackets(c.n);e.exv=c.did;e.extp=8;e.sta=1;e.isNew=true;e.oi=e.at;delete e.at;this.set("data",e);this.paint();}});mstrmojo.ME.MetricToken.isDelimiter=O;mstrmojo.ME.MetricToken.brackets=A;mstrmojo.ME.MetricToken.splitAttrAndAttrForm=M;mstrmojo.ME.MetricToken.quotes=C;mstrmojo.ME.MetricToken.unquotes=F;mstrmojo.ME.MetricToken.QUOTABLE_DATATYPES=R;mstrmojo.ME.MetricToken.argDelimiter={".":",",",":";"}[mstrConfig&&mstrConfig.decimalSep]||",";})();(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.hash","mstrmojo.func","mstrmojo.css","mstrmojo.string","mstrmojo.HBox","mstrmojo.Box","mstrmojo.DropDownButton","mstrmojo.Popup","mstrmojo.WidgetTree","mstrmojo.ObjectBrowserDataProvider","mstrmojo.OBList","mstrmojo.FishEyeContainer","mstrmojo.SearchBox2","mstrmojo.Booklet","mstrmojo.IncFetch","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.mstr.ui.IncFetchOBList","mstrmojo.DI.DIConstants");var Q=mstrmojo.hash,Y=mstrmojo.func,A=mstrmojo.string,M=mstrmojo.meta.TP,G="5CECE58CC1D549F890EB61C4DB2156A3",V="E0CCB9CF22104A489CBE78D974AFD19E",S=mstrmojo.chart.model.enums.EnumDSSObjectType,L=mstrmojo.array,E=mstrmojo.dom,P=mstrmojo.DI.DIConstants,a=function(i,j,d){var g=i.scrollableIncFetch,f=g?"mstrmojo.mstr.ui.IncFetchOBList":"mstrmojo.OBList",h={scriptClass:f,items:j.items,multiSelect:d};if(g){h.browseConfig={blockBegin:j.bb,blockCount:j.bc,totalSize:j.sz,folderLinksContextId:i.folderLinksContextId,rootFolderID:j.did,browsableTypes:i.browsableTypes,browsableViewMedias:i.browsableViewMedias,dataProvider:i.dataProvider};h.onwaitingChange=function(){if(i.booklet){i.booklet.set("waiting",this.waiting);}};}var e=mstrmojo.insert(h);e.render();return e;},B=function(f,g,d){var e=mstrmojo.ObjectBrowser.widgetHandler||a;return e(f,g,d);},O={success:function(f){var g=this.ob,e=f.items,h=g.pageCache[g.currentPage],d=h._w;h.items=e;d.set("items",e);this.ob=null;this.item=null;window.clearTimeout(g._btm);g.booklet.set("waiting",false);if(g.scrollableIncFetch&&d.scrollNode){d.initScroll();d.updateScrollbars();}},failure:function(d){window.alert(d.getResponseHeader("X-MSTR-TaskFailureMsg"));this.ob.booklet.set("waiting",false);}},U=function(i,h,f){var g=f?-1:1,e=i.pageCache.length,j;for(j=i.currentPage+g;j<e&&j>=0;j+=g){var d=i.pageCache[j];if(d._k===h.k){return{steps:j-i.currentPage,cache:d};}}return null;},D=function(h,g,f,i){var j=h.currentPage+1,e=h.pageCache.length,d;for(d=j;d<e;d++){h.pageCache[d]._w.destroy();delete h.pageCache[d].items;}h.pageCache=h.pageCache.slice(0,j);i._w=f;i._k=g.k;h.pageCache[j]=i;h.cacheChange();},I=function(e){var d=mstrmojo.hash.walk("anc.items.0.items",e);this.set("canGoUp",!(!e.pf||!d));},J=function(h,g,i,f,e){delete h._btm;var d;if(!f){d=B(h,i,h.multiSelect);d.attachEventListener("change",h.id,"navigate");if(h.useDblSelect||h.useBothSglDblSelect){d.attachEventListener("dblclick",h.id,"dblselect");}}else{d=i._w;}h.obList=d;h.booklet.turn(d,e>0);window.setTimeout(function(){h.onBrowsing=false;},300);if(!f){D(h,g,d,i);}h.set("currentFolder",i);h.set("currentPage",h.currentPage+e);h.updateUpButton(i);if(h.scrollableIncFetch&&d.scrollNode){d.initScroll();d.updateScrollbars();}},R=function(f,e,d){var g=U(f,e,false);g=g||U(f,e,true);if(!g){window.clearTimeout(f._btm);f._btm=window.setTimeout(function(){f.booklet.set("waiting",true);},300);d.ob=f;d.item=e;f.getDataProvider().fetchFolderContents(f,e,d);}else{J(f,e,g.cache,true,g.steps);}},C=function(e,f,g,d){R(e,{fid:e.pageCache[e.currentPage].did,blockBegin:f,searchPattern:g,recursive:d},O);},K={success:function(e){var f=this.ob;if(f){window.clearTimeout(f._btm);if(!e.items){e.items=[{did:"empty",n:"("+mstrmojo.desc(2210)+")",t:"e"}];}var d=function h(j){var m=j.length,k;for(k=0;k<m;k++){var l=j[k];if(l.did===G||l.did===V){l.n=(l.did===G)?mstrmojo.desc(8112):mstrmojo.desc(9277);}if(l.items){d(l.items);}}};if(e.did===G||e.did===V){e.n=(e.did===G)?mstrmojo.desc(8112):mstrmojo.desc(9277);if(e.anc&&e.anc.items){d(e.anc.items);}}if(e&&e.items&&f.browsableViewMedias){var g={};L.forEach(f.browsableViewMedias.split(","),function(i){g[parseInt(i,10)]=true;});e.items=L.filter(e.items,function(i){return(i.t!==S.DssTypeDocumentDefinition)||g[i.dvm];});}if(e&&e.items&&mstrApp&&mstrApp.isSingleTier){e.items=L.filter(e.items,function(i){return(i.st!==772);});}if(f.isImportFromCube){e.items=L.filter(e.items,function(i){return(i.et!==P.DSSExType.DSSEXDISPARK);});}if(e.did&&this.item.k!==e.did){this.item.k=e.did;}J(f,this.item,e,false,1);this.ob=null;this.item=null;}},failure:function(d){this.ob.booklet.set("waiting",false);if(this.ob.onError){this.ob.onError(d);}else{if(d.getResponseHeader){mstrmojo.alert(d.getResponseHeader("X-MSTR-TaskFailureMsg"));}else{mstrmojo.alert(d.message);}}},complete:function(){if(this.ob){this.ob.onBrowsing=false;}}},c=function(f){var e=f.pageCache.length,d;for(d=0;d<e;d++){f.pageCache[d]._w.destroy();}f.pageCache=[];f.currentPage=-1;f.cacheChange();},N=function(g,f,h){var d=g.onBrowseFolder;if(d){d[0][d[1]](f);}if(f&&parseInt(f.acg,10)===33){return ;}var e={};if(f){e.k=f.did;e.fid=f.did;}else{if(g.rootFolderID){e.k=g.rootFolderID;e.fid=g.rootFolderID;}else{if(g.rootFolderType){e.k=g.rootFolderType;e.fty=g.rootFolderType;}else{if(g.folderLinksContextId){e.k=g.folderLinksContextId;}}}}R(g,e,Y.wrapMethods(h,Q.copy(K)));},X=function(i,d,f){if(!f){return d;}var g=i.showCompletePath,k=d[0],h,e;while(k){var j;for(j=f.length-1;j>=0;j--){if(k.did===f[j].did){f.splice(j,1);k._isSc=true;}}e=k;k._open=true;k=k.items;k=k&&k[0];if(!k){e.lastLeaf=true;}}if(!g){k=d[0];while(k){if(k._isSc){d[0]=k;break;}k=k.items;k=k&&k[0];}}return d.concat(f);},W=function(e,d,f){e._naviInfo=X(e,d,f);};mstrmojo.ObjectBrowser=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.ObjectBrowser",rootFolderType:null,rootFolderID:null,sId:null,closeOnSelect:true,browsableTypes:null,browsableViewMedias:null,includeObjectDesc:false,closeable:true,fishEyeVisible:false,searchVisible:true,upButtonVisible:false,currentFolder:null,pageCache:[],currentPage:-1,blockCount:50,canGoUp:true,folderLinksContextId:null,minSearchLength:2,showCompletePath:true,multiSelect:false,onCloseCB:null,onSelectCB:null,onBrowseFolder:null,scrollableIncFetch:false,useBothSglDblSelect:false,displaySaveLabel:false,useOldSearch:false,getDataProvider:function(){if(!this.dataProvider){this.dataProvider=mstrmojo.insert({scriptClass:"mstrmojo.ObjectBrowserDataProvider"});}return this.dataProvider;},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},children:[{scriptClass:"mstrmojo.HBox",alias:"titleBar",cssClass:"mstrmojo-OB-titleTable",children:[{alias:"saveLabel",scriptClass:"mstrmojo.Label",cssClass:"msrmojo-save-label",text:mstrmojo.desc(3178,"Save in:"),bindings:{visible:"this.parent.parent.displaySaveLabel"}},{alias:"title",scriptClass:"mstrmojo.DropDownButton",cssClass:"mstrmojo-FormatEditor-DropDownButton",cssText:"margin:0px;",popupRef:{scriptClass:"mstrmojo.Popup",alias:"popup",contentNodeCssClass:"mstrmojo-OBNavigatorPopup",cssText:"position:relative;",slot:"popupNode",locksHover:true,onOpen:function(){var d=this.opener.parent.parent,g=this.tree,f=d._naviInfo,e=this.parent.parent.parent.extraDDItems;if(g.items!==f){g._pup=this;this.ob=d;if(e){L.forEach(e,function(h){h.isExtra=true;});f=f.concat(e);}g.set("items",f);}if(d.getRecents&&!mstrApp.isSingleTier){d.getRecents(this);}},children:[{alias:"tree",scriptClass:"mstrmojo.WidgetTree",itemIdField:"did",itemFunction:function(h,d,e){var g=mstrmojo.WidgetTree.prototype.itemFunction(h,d,e);if(h.isExtra){if(h.cssClass){g.cssClass=h.cssClass;}g.onmousedown=h.onmousedown||mstrmojo.emptyFn;return g;}if(h._open){g.state=1;}g._ll=!!h.lastLeaf;g._pup=e._pup;g.onmousedown=function(i){var j=mstrmojo.dom.eventTarget(i.hWin,i.e),k=this._pup;if(j===this.domNode||j===this.textNode){if(!this._ll){N(k.ob,this.data);}k.close();}};g.markupMethods=Q.copy(g.markupMethods);g.markupMethods.onstateChange=function(){var i=this.data.items?this.state:0;this.stateNode.className="mstrmojo-TreeNode-state "+({0:"closed",1:"opened",2:"leaf"}[i]||"closed");this.itemsContainerNode.style.display=(i===1)?"block":"none";};g.useRichTooltip=true;var f=g.postBuildRendering;g.postBuildRendering=function(){if(f){f.call(g);}if(g.textNode.parentNode.clientWidth){g.textNode.style.width=(g.textNode.parentNode.clientWidth-20)+"px";}};g.premouseover=function(k){if(this.useRichTooltip){var j=this.textNode;if(j.clientWidth<j.scrollWidth){var i=E.position(j);this.richTooltip={areaId:this.id,cssClass:"vi-regular vi-tooltip-C",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_TOPLEFT,content:A.encodeHtmlString(this.data[this.itemDisplayField]),top:i.y-2,left:i.x+i.w+6};}else{this.richTooltip=null;}mstrmojo.dom.stopPropogation(k.hWin,k.e);}return true;};return g;}}]}},{alias:"upButton",scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-OBListItemIcon up",title:mstrmojo.desc(1152,"Up One Level"),onclick:function(){this.parent.parent.goUp();},bindings:{enabled:"this.parent.parent.canGoUp",visible:"this.parent.parent.upButtonVisible"}},{alias:"closebtn",scriptClass:"mstrmojo.Button",iconClass:"mstrmojo-OBCloseButton",title:mstrmojo.desc(2102,"Close"),bindings:{visible:"this.parent.parent.closeable"},onclick:function(){this.parent.parent.close();}}]},{alias:"fishEye",scriptClass:"mstrmojo.FishEyeContainer",cssText:"width:100%",bindings:{visible:"this.parent.fishEyeVisible"}},{alias:"searchUpBar",scriptClass:"mstrmojo.HBox",cssClass:"searchBox",children:[{alias:"obSearchBox",scriptClass:"mstrmojo.SearchBox2",cssClass:"mstrmojo-charcoalbox mstrmojo-dxsprite",cssText:"margin: 3px 0; ",contentWidget:mstrmojo.all.obList,taskId:"searchMetadata",searchIncFetch:true,enableMatchCase:false,forceResetCache:true,bindings:{minSearchLength:"this.parent.parent.minSearchLength",quickSearch:"this.parent.parent.quickSearch"},serverRequest:function(d,e){this.parent.parent.getDataProvider().serverRequest(d,e);},preFetch:function(){this.objectTypes=this.parent.parent.browsableTypes||this.objectTypes;this.parent.parent.booklet.set("waiting",true);},postFetch:function(){this.parent.parent.booklet.set("waiting",false);},postBuildRendering:function Z(){if(this._super){this._super();}this.inputNode.setAttribute("placeholder"," "+mstrmojo.desc(12666,"Search..."));},onUpdateSearchParams:function H(f){var e=this.parent.parent,d=e.sId;if(d){f.sessionState=d;}if(e.useOldSearch){f.quickSearch=0;f.nameWildcards=1;f.sortKey=6;}}}],bindings:{visible:"this.parent.searchVisible"}},{scriptClass:"mstrmojo.Booklet",cssClass:"mstrmojo-OB-booklet",alias:"booklet",hasAnimation:false,bindings:{scrollableIncFetch:"this.parent.scrollableIncFetch"}},{alias:"obIncFetch",scriptClass:"mstrmojo.IncFetch",height:"17px",cssText:"height:0px;overflow:hidden;",visible:false,np:0,cp:0,ds:{f:mstrmojo.desc(4046,"First"),p:mstrmojo.desc(1058,"Previous"),n:mstrmojo.desc(1059,"Next"),l:mstrmojo.desc(4049,"Last"),pgs:mstrmojo.desc(5972,"## of ### pages"),gt:mstrmojo.desc(5878,"Go to:"),v:mstrmojo.desc(6079,"This field should be # between ## and ###.")},onvisibleChange:function(e){var g=parseInt(this.height,10),d=this.np>1,f={target:this.domNode,props:{height:{start:(d?0:g),stop:(d?g:0),suffix:"px"}},onEnd:function(){if(d){this.target.style.overflow="visible";}}},i=new mstrmojo.fx.AnimateProp(f);this.domNode.style.overflow="hidden";mstrmojo.css.toggleClass(this.parent.domNode,"show-inc-fetch",this.visible);i.play();},onifsChange:function(d){var e=this.np;mstrmojo.hash.copy(d.value,this);if(this.np>1){this.children=null;this.refresh();}if((e<=1&&this.np>1)||(e>1&&this.np<=1)||(e===0&&this.np>0)){this.set("visible",this.np>1);}this.cssText="";}}],destroy:function b(){c(this);if(this._super){this._super();}},postBuildRendering:function(){if(this._super){this._super();}if(this.fishEye&&this.fishEyeVisible){this.fishEye.attachEventListener("selectedIndexChange",this.id,"onFishEyeChange");}var f=this.searchUpBar;if(f&&f.obSearchBox&&this.searchVisible){this.obSearchBox=this.searchUpBar.obSearchBox;this.obSearchBox.attachEventListener("itemsChange",this.id,"onSearchItemsChange");var d=this.obSearchBox.contentWidget||this.obSearchBox;if(!this.scrollableIncFetch){d.attachEventListener("ifsChange",this.id,function(g){if(!this.scrollableIncFetch){this.obIncFetch.set("ifs",g.value);}});}}if(!this.scrollableIncFetch&&this.obIncFetch){var e=this.obIncFetch;e.attachEventListener("fetch",this.id,function(g){e.cp=g.v;e.children=null;e.refresh();C(this,(g.v-1)*this.blockCount+1,this.searchVisible?this.obSearchBox.inputNode.value:"",1);});}mstrmojo.css.addClass(this.domNode,"mstrmojo-ObjectBrowser");},onSearchItemsChange:function(e){var f=e.value,d=this.pageCache[this.currentPage]._w;if(!f||f.length===0){f=[{did:"empty",n:"("+mstrmojo.desc(2210,"")+")",t:"e"}];}else{if(this.browsableViewMedias){var g={};L.forEach(this.browsableViewMedias.split(","),function(h){g[parseInt(h,10)]=true;});f=L.filter(f,function(h){return(h.t!==S.DssTypeDocumentDefinition)||g[h.dvm];});}}d.set("items",f);},navigate:function(k){var d=k.src,l=d.selectedItem,f=this.multiSelect,i=f&&d.getSelectedItems(),j=this,e=k.added&&k.added.length,h=k.removed&&k.removed.length,g=f?i.length===1&&(!h||e):!!l;if(g&&l.did==="empty"){return ;}if(g&&parseInt(l[M],10)===8){if(!this.onBrowsing){this.onBrowsing=true;N(this,l);}}else{if((l&&(!this.useDblSelect||this.useBothSglDblSelect))||i){this.select(f?i:l);}}},browseFolder:function(d,e){N(this,{did:d,n:e});},onFishEyeChange:function(d){this.goToPage(d.value);},goToPage:function(d){if(d<this.pageCache.length&&d!==this.currentPage){var f=d>this.currentPage,e=this.pageCache[d];this.set("currentPage",d);this.booklet.turn(e._w,f);this.set("currentFolder",e);I.call(this,e);}},oncurrentPageChange:function(d){if(this.fishEye){this.fishEye.setSelectedIndex(d.value);}var e=this.pageCache[this.currentPage];this.titleBar.title.set("text",mstrmojo.string.encodeHtmlString(e.n));if(this.searchVisible&&this.obSearchBox){this.obSearchBox.set("rootCacheItems",e.items||[]);this.obSearchBox.set("totalSize",e.sz);this.obSearchBox.set("rootID",e.did);this.obSearchBox.clearSearch();}if(!this.scrollableIncFetch&&this.obIncFetch){this.obIncFetch.set("ifs",{np:Math.floor(e.sz/e.bc)+((e.sz%e.bc>0)?1:0),cp:Math.floor(e.bb/e.bc)+((e.bb%e.bc>0)?1:0)});}},cacheChange:function(){if(this.fishEye&&this.fishEyeVisible){this.fishEye.setItems(this.pageCache);}},browse:function(e,d){Q.copy(e,this);if(this.searchVisible&&this.obSearchBox){this.obSearchBox.clear();}c(this);N(this,undefined,d);},close:function(){var e=this.ctx||this,d=e.onCloseCB;if(d){d[0][d[1]]();}e.set("visible",false);},select:function(e){var d=this.onSelectCB;if(d){d[0][d[1]](e);}if(this.closeOnSelect){this.close();}},dblselect:function T(e){var f=e&&e.src.selectedItem;if(!f||(f&&f.did==="empty")||f[M]===8){return ;}if(this.useBothSglDblSelect){var d=this.onDblSelectCB;if(d){d[0][d[1]](f);}if(this.closeOnSelect){this.close();}}else{this.select(f);}},goUp:function(){if(this.canGoUp){N(this,{did:this.currentFolder.pf});}},updateUpButton:function F(d){I.call(this,d);},oncurrentFolderChange:function(d){var e=d.value;W(this,e.anc.items,e.sc);},refreshContent:function(d){C(this,d);},onError:null,onheightChange:function(){var d=["titleBar","fishEye","searchUpBar","obIncFetch"],f=0,e;for(e in d){f+=parseInt(this[d[e]].domNode.offsetHeight,10);}this.booklet.set("height",parseInt(this.height,10)-f+"px");}});}());(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.ObjectBrowser");var H=mstrmojo.array;var E=[257,1024,3072,12032];mstrmojo.vi.ui.editors.ObjectPicker=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.vi.ui.editors.ObjectPicker",cssClass:"mstrmojo-vi-ObjectPicker",zIndex:9,title:mstrmojo.desc(11496,"Select Object"),help:null,rootFolderID:null,rootFolderType:null,folderLinksContextId:4,supportedTypes:H.hash(E),item:null,OKFn:null,children:[{scriptClass:"mstrmojo.ObjectBrowser",alias:"ob",closeable:false,browsableTypes:"8,"+E.join(","),closeOnSelect:false,showCompletePath:false,searchVisible:false,scrollableIncFetch:true,bindings:{rootFolderID:"this.parent.rootFolderID",rootFolderType:"this.parent.rootFolderType",folderLinksContextId:"this.parent.folderLinksContextId",isImportFromCube:"this.parent.isImportFromCube",}},{scriptClass:"mstrmojo.HBox",slot:"buttonNode",alias:"btnHBox",cssClass:"mstrmojo-Editor-buttonBar",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton hot",text:mstrmojo.desc(1442,"OK"),onclick:function C(){var J=this.parent.parent;this.parent.parent.close({item:J.item});var I=J.OKFn;if(I){I(J.item);}J.set("item",null);},bindings:{enabled:function B(){return !!this.parent.parent.item;}}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton",text:mstrmojo.desc(2399,"Cancle"),onclick:function C(){var I=this.parent.parent;this.parent.parent.close();I.set("item",null);}}]}],preBuildRendering:function A(){if(this._super){this._super();}this.ob.onSelectCB=[this,"onOBSelect"];},postBuildRendering:function D(){if(this._super){this._super();}this.browse();},onOBSelect:function F(I){this.set("item",((this.supportedTypes[I.t]||this.supportedTypes[I.st])?I:null));},browse:function G(){this.ob.browse();}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.dom","mstrmojo.expr","mstrmojo.range","mstrmojo.Widget","mstrmojo.WidgetList","mstrmojo.WidgetListMapper","mstrmojo._HasSuggestion","mstrmojo.ME.MetricToken","mstrmojo.ME.MetricDataService","mstrmojo.ui.ScrollableSuggestionList","mstrmojo.mstr.EnumDSSXMLObjectTypes");var R=mstrmojo.dom,T=mstrmojo.css,AF=mstrmojo.Enum_Keys,H=mstrmojo.range,j=H.EDGE,x=mstrmojo.ME.MetricToken.isDelimiter,Q=mstrmojo.expr,q=mstrmojo.array,K=mstrmojo.hash;var M=R.isIE||R.isIEW3C;function AN(E){return E.ctrlKey||R.isMetaKey(window,E)||(E.charCode||E.keyCode)===AF.CTRL;}mstrmojo.ME.SpanListMapper=mstrmojo.provide("mstrmojo.ME.SpanListMapper",mstrmojo.mixin({itemWrapperPrefix:function(E){return'<span class="'+this.getWrapperCss(E)+'">';},itemWrapperPrefill:"&nbsp;",itemWrapperSuffix:"</span>",createWrapperNode:function S(E){var AO=E.ownerDocument,AP=AO.createElement("span");return AP;},_iw2idx:function U(AO,AR,AQ){var AP=this.wrapperNodes(AR),E=mstrmojo.array.indexOf(AP,AQ);return E===-1?AP.length:E;},itemOffsetLeft:function h(AO,AS,E,AQ){if(!AQ){var AP=this.wrapperNodes(AS);AQ=AP&&AP[E];if(!AQ){return 0;}}var AR=AS.firstChild;if(!AR||(AR===AQ)){return 0;}return AQ.offsetLeft-AR.offsetLeft;},whereDrop:function AM(AW,E,AQ,AV,AO){var AS=this._nd2iw(AW,E,AQ),AX,AU,AR,AT,AP;if(AS){AU=this._iw2idx(AW,E,AS);AX=AU;AR=this.itemOffsetLeft(AW,E,null,AS);AT=AS.offsetTop;AP=AS.offsetWidth;if(AV.x>AO.left+AR+AP/2){AX++;AR+=AP;}}else{return AW.dropCuePos;}return{left:AR,top:AT,idx:AX,idxActual:AU};}},mstrmojo.hash.copy(mstrmojo.WidgetListMapper)));mstrmojo.ME.TokenInputBox=mstrmojo.declare(mstrmojo.WidgetList,[mstrmojo._HasSuggestion],{scriptClass:"mstrmojo.ME.TokenInputBox",containerResizable:false,dropZone:true,suggestionPopupCssClss:"mstrmojo-ME-TokenInputBox-suggest",allowDrop:function G(E){var AO=E.src.data;return !!AO;},createToken:function A(E){return{v:mstrmojo.ME.MetricToken.brackets(E.n),oi:K.copyProps(["did","n","t"],E),isNew:true};},ondrop:function(AO){AO.src.data=this.createToken(AO.src.data.item);if(this.prepareDropItem){this.prepareDropItem(AO);}var E=this.insertTokens([AO.src.data]);this.set("dropCuePos",null);mstrmojo.css.removeClass(this.domNode,"unselectable");return E;},ondragenter:function I(E){this.dragdata=E.src.data;this._super(E);this.set("dropCuePos",{left:0,top:0});mstrmojo.css.addClass(this.domNode,"unselectable");},ondragleave:function V(){this.set("dropCuePos",null);mstrmojo.css.removeClass(this.domNode,"unselectable");},ondropCuePosChange:function X(AO){var AP=AO.value,E=this.dragdata;if(E&&E.setAvatarClass){if(AP){E.setAvatarClass("add");}else{E.setInvalidAvatarClass();}}},makeObservable:true,showDesc:true,showPath:true,showFunctionSyntaxAsPath:true,blockCount:mstrmojo.ME.MetricDataService.blockCount,suggestCount:mstrmojo.ME.MetricDataService.suggestCount,markupString:'<div id={@id} class="mstrmojo-TokenInputBox {@cssClass}" style="{@cssText}"><div class="mstrmojo-TokenInputBox-edit" contenteditable="true" tabindex="1" spellcheck="false"ondragstart = "return false;" oncontextmenu = "return false;" onkeydown = "return mstrmojo.all.{@id}.handlekeydown(event);" onkeypress = "return mstrmojo.all.{@id}.handlekeypress(event);" onkeyup = "return mstrmojo.all.{@id}.handlekeyup(event);" onmouseup = "return mstrmojo.all.{@id}.handlemouseup(event);" onpaste = "return mstrmojo.all.{@id}.handlepasteDirect(event);" onblur = "return mstrmojo.all.{@id}.handleblur(event);" >{@itemsHtml}</div><textarea class = "mstrmojo-TokenInputBox-clipboard" onkeyup = "return mstrmojo.all.{@id}.handlepaste(event);"></textarea><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div>',markupSlots:{editNode:function(){return this.domNode.firstChild;},itemsContainerNode:function(){return this.domNode.firstChild;},clipboardNode:function(){return this.domNode.childNodes[1];},scrollboxNode:function(){return this.domNode.firstChild;},dropCueNode:function(){return this.domNode.lastChild;}},suggestionListClass:"mstrmojo.ui.ScrollableSuggestionList",items:null,itemFunction:function J(AP,E,AO){return new mstrmojo.ME.MetricToken({data:AP,parent:AO});},listMapper:mstrmojo.ME.SpanListMapper,_set_items:function W(AO,E){if(this._super){this._super(AO,E);}if(this.oi){this.oi.tks.items=this.items;}if(!this.tokensCacheInitilized){this.pretokensModify();this.tokensCacheInitilized=true;}},tokensCache:[],tokensCachePointer:0,isDelimiter:x,postBuildRendering:function d(){if(this._super){this._super();}this._eros=false;if(R.isFF){document.body.spellCheck=false;}mstrmojo.dom.attachEvent(this.editNode,"compositionstart",function(){this.saveStateForIME();this.composing=true;this.toggleIMEStatusBar(true);}.bind(this));mstrmojo.dom.attachEvent(this.editNode,"compositionupdate",function AO(AP){if(R.isIEW3C){this.lastImeChar=AP.data||(M&&this.lastImeChar);}else{this.lastImeChar=AP.data||this.lastImeChar;}}.bind(this));mstrmojo.dom.attachEvent(this.editNode,"compositionend",function E(AR){this.composing=false;if(R.isIE9||R.isIE10){var AQ=H.getRangeInfo();this.imeBuffer=AQ.startContainer.data.slice(this.prev_rInfo.startOffset,AQ.startOffset).split("");}else{if(R.isIEW3C){var AQ=H.getRangeInfo();this.imeBuffer=AQ.startContainer.data.slice((this.prev_rInfo.startOffset-1)<0?0:this.prev_rInfo.startOffset,AQ.startOffset).split("");}else{if(R.isEdge){var AP=AR.data||"";this.imeBuffer=(this.imeBuffer||[]).concat(AP.split(""));}else{var AP=AR.data||this.lastImeChar||"";this.imeBuffer=(this.imeBuffer||[]).concat(AP.split(""));}}}}.bind(this));},fnContextMenu:function N(E){if(E){E.cancelBubble=true;E.returnValue=false;}return false;},saveStateForIME:function g(){if(!this.doubleByte){this.doubleByte=true;this.prev_rInfo=H.getRangeInfo();this.prev_items=this.items;}},handleblur:function L(){if(this.doubleByte){this.doubleByte=false;this.widgetHandleImeInput(this.prev_rInfo);this.prev_items=this.items;}},processDeleteKeyDown:function D(AO){if(!this.doubleByte){try{this.widgetHandleDelete(AO);this.startTokenSuggestion();this.raiseChangeEvent({type:"delete"});}catch(E){}return true;}},processBackspaceKeyDown:function AL(AO){if(!this.doubleByte){try{this.widgetHandleBackspace(AO);this.raiseChangeEvent({type:"backspace"});this.startTokenSuggestion();this.editNode.focus();}catch(E){}return true;}},handlekeydown:function a(AQ){AQ=AQ||window.event;var E=AQ.keyCode||AQ.charCode,AO=false,AP=H.getRangeInfo();if((E===AF.LEFT_ARROW||E===AF.RIGHT_ARROW||E===AF.BACKSPACE)&&this.doubleByte){if(this.composing){return ;}this.doubleByte=false;if(E===AF.BACKSPACE){this.imeBuffer.pop();}this.widgetHandleImeInput(this.prev_rInfo);mstrmojo.dom.stopPropogation(window,AQ);mstrmojo.dom.preventDefault(window,AQ);return false;}switch(E){case AF.DELETE:AO=this.processDeleteKeyDown(AP);break;case AF.BACKSPACE:AO=this.processBackspaceKeyDown(AP);break;case AF.ENTER:if(this.breakOnEnterKeyDown&&this.breakOnEnterKeyDown()){break;}case AF.TAB:this._startDebug=true;if(this.suggestionShown){this.handleSuggestionItemSelect(this.getSelected());}else{this.startTokenSuggestion();}AO=true;break;case AF.ESCAPE:this.endTokenSuggestion();AO=true;break;case 86:if(AN(AQ)){this.handlePasteTriggeredDeletion();AO=false;}break;case 89:if(AN(AQ)){this.widgetHandleUndoRedo("redo");AO=true;}break;case 90:if(AN(AQ)){this.widgetHandleUndoRedo("undo");AO=true;}break;case 229:this.saveStateForIME();break;default:}if(AO){R.stopPropogation(window,AQ);R.preventDefault(window,AQ);return false;}return true;},handlePasteTriggeredDeletion:function F(){this.set("_saveRangeInfo",H.getRangeInfo());if(!this._saveRangeInfo.collapsed){this.widgetHandleDelete(this._saveRangeInfo);this.set("_saveRangeInfo",H.getRangeInfo());}this.clipboardNode.focus();},getCharacter:function AH(AO){var E=(R.isIE&&!R.isIE9)?AO.keyCode:AO.charCode;return(E>0)?String.fromCharCode(E):null;},handleCharacter:function y(AQ){var AR=this.getCharacter(AQ),AO=false;if(AR&&!((AR==="c"||AR==="a")&&AN(AQ))){try{this.widgetHandleInput(H.getRangeInfo(),AR);this.raiseChangeEvent({type:"input",character:AR});if(!this.isDelimiter(AR)){if(this.useKeyDelay){var AP=this;window.clearTimeout(this.tmr);this.tmr=window.setTimeout(function(){AP.startTokenSuggestion();},mstrmojo.ME.MetricDataService.suggestDelay);}else{this.startTokenSuggestion();}}else{this.endTokenSuggestion(true);}}catch(E){}AO=true;}return AO;},handlekeypress:function B(E){E=E||window.event;if(this.doubleByte){this.toggleIMEStatusBar(false);this.doubleByte=false;this.widgetHandleImeInput(this.prev_rInfo);window.setTimeout(function(){this.handleCharacter(E);}.bind(this),10);return false;}if(this.handleCharacter(E)){R.stopPropogation(window,E);R.preventDefault(window,E);return false;}return true;},handlekeyup:function f(AP){var E=AP.keyCode||AP.charCode,AO;if(E===AF.LEFT_ARROW||E===AF.RIGHT_ARROW){AO=this.findObjectToken();if(AO&&AO===this._saveActiveToken){this.startTokenSuggestion(AO);}else{this.endTokenSuggestion();}}else{if(E===AF.UP_ARROW){this.preHighlight();}else{if(E===AF.DOWN_ARROW){this.nextHighlight();}else{if(E===AF.BACKSPACE&&this.doubleByte){if(E===AF.BACKSPACE&&!this.composing&&!R.isIE9){this.doubleByte=false;this.imeBuffer.pop();this.widgetHandleImeInput(this.prev_rInfo);this.prev_items=this.items;}}}}}this.set("_saveRangeInfo",H.getRangeInfo());},handlemouseup:function o(AQ){if(this.dropCuePos){return false;}var AO=this.findObjectToken();if(AO&&AO===this._saveActiveToken){this.startTokenSuggestion(AO);}else{this.endTokenSuggestion();}var AP=H.getRangeInfo();if(this.doubleByte){this.doubleByte=false;var E=this.widgetHandleImeInput(this.prev_rInfo);this.prev_items=this.items;AO=R.findWidget(AP.startContainer);if(AO){this._delaySetTextCaretPos(AO.domNode,AP.startOffset);}else{this._delaySetTextCaretPos(E.domNode,AP.startOffset-1);}this.prev_rInfo=AP;}this.set("_saveRangeInfo",AP);},handlepasteDirect:function AC(E){this.clipboardNode.value=E.clipboardData.getData("Text");this.handlepaste(E);R.stopPropogation(window,E);R.preventDefault(window,E);this.handlePasteTriggeredDeletion();return false;},handlepaste:function m(AS){var AO=this.clipboardNode.value;this.clipboardNode.value="";var AR=[],E=AO&&AO.length,AQ,AP="",AT;if(E>0){for(AQ=0;AQ<E;AQ++){AT=AO.charAt(AQ);if(this.isDelimiter(AT)){if(!mstrmojo.string.isEmpty(AP)){AR.push({v:AP,isNew:true});AP="";}AR.push({v:AT,isDelimiter:true,isNew:true});}else{AP=AP+AT;}}if(!mstrmojo.string.isEmpty(AP)){AR.push({v:AP,isNew:true});AP="";}this.insertTokens(AR);}},raiseChangeEvent:function(E){E.name="tokensModify";this.raiseEvent(E);},getTokensAsString:function AK(){var AO=[],AQ=this.items,AP,E;for(AP=0,E=AQ.length;AP<E;AP++){AO[AP]=AQ[AP].v;}return AO.join("| ");},replaceErrorToken:function p(AQ){var AP=this.items||[],AR=mstrmojo.array.find(AP,"sta",-1),AO,AS=function(AY,AW,AZ){var AV=(AY&&AY.items)||[],AU=q.find(AV,"did",AW),AT,AX;if(AU>-1){AT=AV[AU].fs;AX=q.filterOne(AT,function(Aa){return Aa.fnm&&Aa.fnm.toUpperCase()===AZ.toUpperCase();});}return AX;},E=function(AY,AW,AX){var AT={v:AW.n,oi:AW,isNew:true},AV=AY.v&&AY.v.split("@"),AU;if(AV&&AV.length>1){AU=AS(AX,AW.did,AV[1]);if(AU){AT.exv=AU.fmdid||AU.fid;AT.extp=8;AT.v=mstrmojo.ME.MetricToken.brackets(AW.n)+"@"+AU.fnm;}}return AT;};if(AR>-1){AO=E(AP[AR],AQ,this.candidates);this.remove(AR);this.add([AO],AR);}},widgetHandleDelete:function e(AR){if(AR.collapsed){var AQ,AP,E,AS=AR.startOffset,AO=this.ctxtBuilder.itemWidgets;if(!R.contains(this.editNode,AR.startContainer,false,document.body)){H.collapseOnNode(this.editNode,false);return ;}AQ=H.getEdgeInfo(AR.startContainer,AR.startOffset);AP=R.findWidget(AR.startContainer);E=this.itemIndex(AP.data);if(AQ===j.EDGE_END){E++;AP=AO[E];AS=0;}if(!AP){H.collapseOnNode(this.editNode,false);return ;}if(AP.length()===1){this.remove(E);AP=AO[E];if(AP){H.collapseOnNode(AP.domNode,true);}else{H.collapseOnNode(this.editNode,false);}this.checkMergeTwoTokens(E-1,E);}else{AP.spliceContent(AS,1);H.collapseOnTextNode(AP.domNode,AS);}}else{this.widgetDeleteTokens(AR);}},widgetHandleBackspace:function w(AR){if(AR.collapsed){var AQ,AP,E,AS=AR.startOffset,AO=this.ctxtBuilder.itemWidgets;if(!R.contains(this.editNode,AR.startContainer,false,document.body)){if(AR.startOffset>0&&R.isFF){AP=AO[this.items.length-1];H.collapseOnNode(AP.domNode,false);AR=H.getRangeInfo();AQ=H.getEdgeInfo(AR.startContainer,AR.startOffset);}else{H.collapseOnNode(this.editNode,true);return ;}}AQ=H.getEdgeInfo(AR.startContainer,AR.startOffset);AP=R.findWidget(AR.startContainer);E=this.itemIndex(AP.data);if(AQ===j.EDGE_BEGIN){E--;AP=AO[E];AS=AP.length();}if(!AP){H.collapseOnNode(this.editNode,true);return ;}if(AP.length()===1){this.remove(E);AP=AO[E-1];if(AP){H.collapseOnNode(AP.domNode,false);this.checkMergeTwoTokens(E-1,E);AP=AO[E-1];}else{H.collapseOnNode(this.editNode,true);}}else{AP.spliceContent(AS-1,1);H.collapseOnTextNode(AP.domNode,AS-1);}}else{this.widgetDeleteTokens(AR);}},widgetHandleInput:function z(AS,AT){if(!AS.collapsed){this.widgetDeleteTokens(AS);AS=H.getRangeInfo();}var AP,AU,AV,AW,E,AO,AQ=this.ctxtBuilder.itemWidgets;if(!R.contains(this.editNode,AS.startContainer,false,document.body)){this.add([{v:AT,isDelimiter:this.isDelimiter(AT),isNew:true}],0);AU=AQ[0];H.collapseOnTextNode(AU.domNode,1);return ;}AP=H.getEdgeInfo(AS.startContainer,AS.startOffset);AU=R.findWidget(AS.startContainer);AV=this.itemIndex(AU.data);if(this.isDelimiter(AT)){AW={v:AT,isDelimiter:true,isNew:true};if(AP===j.EDGE_MIDDLE){var AR=AU.split2Tokens(AS.startOffset);this.remove(AV);this.add([AR[0],AW,AR[1]],AV);AV=AV+1;}else{AV=(AP===j.EDGE_BEGIN)?AV:AV+1;this.add([AW],AV);}AU=AQ[AV];H.collapseOnTextNode(AU.domNode,(AU.domNode.innerText||AU.domNode.textContent).length);}else{AO=AS.startOffset;if(AU.isDelimiter()){E=AQ[(AP===j.EDGE_BEGIN)?AV-1:AV+1];if(E&&!E.isDelimiter()){AU=E;AO=(AP===j.EDGE_BEGIN)?AU.length():0;}}if(!AU.isDelimiter()){AU.spliceContent(AO,0,AT);H.collapseOnTextNode(AU.domNode,AO+1);}else{this.add([{v:AT,isNew:true}],(AP===j.EDGE_BEGIN)?AV:AV+1);AU=AQ[(AP===j.EDGE_BEGIN)?AV:AV+1];H.collapseOnNode(AU.domNode,false);}}},widgetHandleImeInput:function z(AR,AS){AS=AS||this.imeBuffer.join("");this.imeBuffer=[];this.lastImeChar=null;if(!AS){return ;}if(!AR.collapsed){this.widgetDeleteTokens(AR);AR=H.getRangeInfo();}var AP,AT,AU,AV,E,AO,AQ=this.ctxtBuilder.itemWidgets;if(!R.contains(this.editNode,AR.startContainer,false,document.body)||this.items.length==0){this.clearTokens();this.add([{v:AS,isDelimiter:this.isDelimiter(AS),isNew:true}],0);AQ=this.ctxtBuilder.itemWidgets;AT=AQ[0];H.collapseOnTextNode(AT.domNode,1);this._delaySetCaretPos(AT.domNode,false);return ;}AP=H.getEdgeInfo(AR.startContainer,AR.startOffset);AT=R.findWidget(AR.startContainer);AU=this.itemIndex(AT.data);AO=AR.startOffset;if(AT.isDelimiter()){this.clearTokens();this.add(this.prev_items);AQ=this.ctxtBuilder.itemWidgets;E=AQ[(AP===j.EDGE_BEGIN)?AU-1:AU+1];if(E&&!E.isDelimiter()){AT=E;AO=(AP===j.EDGE_BEGIN)?AT.length():0;}}if(!AT.isDelimiter()){AT.spliceContent(AO,0,AS);this._delaySetTextCaretPos(AT.domNode,AO+AS.length);}else{this.add([{v:AS,isNew:true}],(AP===j.EDGE_BEGIN)?AU:AU+1);AT=AQ[(AP===j.EDGE_BEGIN)?AU:AU+1];this._delaySetCaretPos(AT.domNode,false);}this.startTokenSuggestion();return AT;},findObjectToken:function C(){var AR=H.getRangeInfo(),AP=R.findWidget(AR.startContainer);if(!R.contains(this.editNode,AR.startContainer,false,document.body)){return null;}if(!AP||AP===this||!AP.isDelimiter){return null;}if(AP&&!AP.isDelimiter()){return AP;}var AQ=H.getEdgeInfo(AR.startContainer,AR.startOffset),AO=this.ctxtBuilder.itemWidgets,E=this.itemIndex(AP.data);AP=AO[(AQ===j.EDGE_BEGIN)?E-1:E+1];if(AP&&!AP.isDelimiter()){return AP;}return null;},checkMergeTwoTokens:function u(AR,AP){var AQ=this.ctxtBuilder.itemWidgets,AO=AQ[AR],E=AQ[AP];if((AO&&!AO.isDelimiter())&&(E&&!E.isDelimiter())){this.remove([AR,AP]);this.add([AO.mergeTo(E)],AR);H.collapseOnTextNode(AQ[AR].domNode,AO.length());}},insertTokens:function AB(AS){var AV=0,AU=this.editNode;var AP=this._saveRangeInfo||H.getRangeInfo();if(!AP||!R.contains(AU,AP.startContainer,false,document.body)){this.add(AS);AV=this.items.length-1;if(AV===0){this._delaySetTextCaretPos(AU,(AU.innerText||AU.textContent).length);}else{var E=this.ctxtBuilder.itemWidgets[AV].domNode;this._delaySetTextCaretPos(E,(E.innerText||E.textContent).length);}}else{var AO=H.getEdgeInfo(AP.startContainer,AP.startOffset),AT=R.findWidget(AP.startContainer);AV=this.itemIndex(AT.data);if(AO===j.EDGE_MIDDLE){var AQ=AT.split2Tokens(AP.startOffset);this.remove(AV);AS.unshift(AQ[0]);AS.push(AQ[1]);this.add(AS,AV);}else{AV=(AO===j.EDGE_BEGIN?AV:AV+1);this.add(AS,AV);}AV=AV+AS.length-1;AT=this.ctxtBuilder.itemWidgets[AV];this._delaySetCaretPos(AT.domNode,false);}this.raiseChangeEvent({type:"insert"});var AR=this;window.setTimeout(function(){AR.set("_saveRangeInfo",H.getRangeInfo());},50);return AV;},insertParenthesisTokens:function AE(AO){var E=this;window.setTimeout(function(){var AP=E.insertTokens([{v:"(",isDelimiter:true,isNew:true},{v:")",isDelimiter:true,isNew:true}]);E._delaySetTextCaretPos(E.itemsContainerNode.childNodes[AP-1],1);},AO||50);},clearTokens:function t(E){this.set("items",E||[]);this.set("_saveRangeInfo",null);this._delaySetCaretPos(this.editNode,false);},focus:function AA(){var AO=this.ctxtBuilder.itemWidgets,E=AO.length;this._delaySetCaretPos(E>0?AO[E-1].domNode:this.editNode,false);},startTokenSuggestion:function AG(E){this.endTokenSuggestion();if(!E){E=this.findObjectToken();}if(E&&!E.isDelimiter()){E.set("active",true);this._saveActiveToken=E;this.showSuggestion(this.getSearchPattern());}if(!E||this.getSearchPattern().length===0){this.hideSuggestion();}},browseItemVisible:true,folderLinksContextId:25,browsableTypes:[Q.TP.FOLDER,Q.TP.FACT,Q.TP.ATTR,Q.TP.FUNCTION,Q.TP.FILTER,Q.STP.PROMPT_OBJECTS,Q.TP.ATTR,Q.TP.DIM,Q.TP.METRIC,Q.TP.ROLE].join(","),getSearchPattern:function Z(){var AO=this._saveActiveToken,AQ=AO&&AO.data.v,E=AQ&&AQ.length;if(E>2){if(AQ.charAt(0)==="["){AQ=AQ.substring(1);}if(AQ.charAt(AQ.length-1)==="]"){AQ=AQ.substring(0,AQ.length-1);}}if(AO&&AO.data.ift){var AP=AO.data.v,AR=AP&&AP.indexOf("@");if(AR>=0){AQ=AP.substring(AR);}}return AQ||"";},getSuggestionPos:function i(){var E=this._saveActiveToken,AO=null,AQ,AP;if(E){AQ=E.data&&E.data.ift;AP=mstrmojo.dom.position(E.domNode,true);AO={left:Math.round(AP.x+(AQ?AP.w:0))+"px",top:Math.round(AP.y+AP.h)+"px",zIndex:100};}return AO;},item2textCss:function O(AO){var E=(this._super&&this._super(AO))||{4:"m",11:"fx",12:"a",13:"fc",43:"tr",21:"afm","-99":"br"}[AO.t]||"";E+=AO.da?" da":"";E+=(AO.dm||AO.um)?" dm":"";E+=AO.de?" de":"";E+=AO.fs&&AO.fs.length&&AO.fs.some(function(AP){return AP.fgr>0;})?" g":"";return E;},onBrowserOpen:function v(){this.editNode.blur();},onSuggestionItemSelect:function AD(AO){var E=this._saveActiveToken;this.endTokenSuggestion();if(E){if(E.data.ift&&AO.t===21){E.setFormInfo(AO);}else{E.setItemInfo(AO);if(AO.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Function){this.insertParenthesisTokens();}}this._delaySetCaretPos(E.domNode,false);}this.closePopup();},_delaySetCaretPos:function AI(E,AP){var AO=this.editNode,AQ=this,AR=function(){AO.focus();AO.focus();H.collapseOnNode(E,AP);AQ.set("_saveRangeInfo",H.getRangeInfo());};window.setTimeout(AR,0);},_delaySetTextCaretPos:function AI(E,AR){var AO=this.editNode,AP=this,AQ=function(){AO.focus();AO.focus();H.collapseOnTextNode(E,AR);AP.set("_saveRangeInfo",H.getRangeInfo());};window.setTimeout(AQ,0);},getCandidatesThroughTaskCall:function c(AO,E){AO.objectType="11,12,13,43,4";AO.rootFolderType=39;AO.blockCount=this.blockCount;mstrmojo.ME.MetricDataService.getMetricComponents(AO,E);},filterCandidates:function s(AR,AQ,E){var AO=this._saveActiveToken,AS=AO&&(AO.data.oi||AO.data.at),AP;if(AS&&AO.data.ift){E=E||this.suggestCount;AQ=mstrmojo.string.regEscape(AQ);AP=q.filter(AR,function(AT){return AT.t===21&&AT.attid===AS.did&&(new RegExp("^"+AQ,"i")).test("@"+AT.n);},{max:E});}else{AP=q.filter(AR,function(AT){return AT.t!==21;});AP=this._super(AP,AQ,E);}return AP;},endTokenSuggestion:function AJ(AO){var E=this._saveActiveToken;if(E){if(AO){this.hideSuggestion();}E.set("active",false);this._saveActiveToken=null;}},widgetDeleteTokens:function n(AW){var AO=AW.startOffset,E=AW.endOffset,AZ=R.findWidget(AW.startContainer),AX=R.findWidget(AW.endContainer),AS=this.itemIndex(AZ.data),AQ=this.itemIndex(AX.data),AT=[],AU=H.getEdgeInfo(AW.startContainer,AO),AY=H.getEdgeInfo(AW.endContainer,E),AV=(AU===j.EDGE_BEGIN?AS:AS+1),AP=(AY===j.EDGE_END?AQ:AQ-1),AR;if(AZ===AX){if((AU===j.EDGE_BEGIN)&&(AY===j.EDGE_END)){this.remove(AS);AX=this.ctxtBuilder.itemWidgets[AS===0?AS:AS-1];if(AX){H.collapseOnNode(AX.domNode,AS===0);}else{H.collapseOnNode(this.editNode,true);}}else{AZ.spliceContent(AO,E-AO);H.collapseOnTextNode(AX.domNode,AO);}}else{for(AR=AV;AR<=AP;AR++){AT.push(AR);}this.remove(AT);if(AU===j.EDGE_MIDDLE){AZ.spliceContent(AO);}if(AY===j.EDGE_MIDDLE){AX.spliceContent(0,E);}if(AU===j.EDGE_BEGIN){AZ=this.ctxtBuilder.itemWidgets[AS===0?AS:AS-1];}if(AZ){H.collapseOnNode(AZ.domNode,AS===0);}else{H.collapseOnNode(this.editNode,false);}AS=(AU===j.EDGE_BEGIN)?AS-1:AS;this.checkMergeTwoTokens(AS,AS+1);}this.editNode.focus();},oncandidatesChange:function r(){var AO=this.candidates,E=(AO&&AO.items)||[];if(!this.noCache&&AO&&AO.isComplete){this.suggestCount=this.REQUEST_THRESHOLD=E.length;}else{this.suggestCount=mstrmojo.ME.MetricDataService.suggestCount;this.REQUEST_THRESHOLD=20;}},nudge:function(E){var AO=this.getSuggestionPos();if(AO){E.set("left",AO.left);E.set("top",AO.top);}},pretokensModify:function P(){this.tokensCache=this.tokensCache.slice(0,this.tokensCachePointer);var E=this.findObjectToken();this.tokensCache.push({items:K.clone(this.items),rInfo:H.getRangeInfo(),idx:E!==null?this.itemIndex(E.data):-1});this.tokensCachePointer=this.tokensCache.length;},widgetHandleUndoRedo:function l(AP){var AQ,E,AO=function(AS){if(!AS){return ;}AS=AS||{};this.set("items",K.clone(AS.items));var AV=this.ctxtBuilder.itemWidgets,AR=AV[AS.idx],AU=AR&&AR.domNode||this.editNode,AT=AS.rInfo;this._delaySetTextCaretPos(AU,AT&&AT.startOffset||0);};switch(AP){case"undo":AQ=--this.tokensCachePointer;if(AQ>-1){E=this.tokensCache[AQ-1];AO.call(this,E);}else{this.tokensCachePointer=1;}break;case"redo":AQ=this.tokensCachePointer++;if(AQ>-1&&AQ<this.tokensCache.length){E=this.tokensCache[AQ];AO.call(this,E);}else{this.tokensCachePointer=Math.min(Math.max(this.tokensCachePointer,1),this.tokensCache.length);}break;}},resetTokensCache:function Y(){this.tokensCache=[];this.tokensCachePointer=-1;this.tokensCacheInitilized=false;},toggleIMEStatusBar:function b(E){if((R.isIE9||R.isIE10||R.isIEW3C||R.isEdge)&&this.detectKoreanLocale()){if(E){if(!this.elStatus||!this.elStatus.offsetParent){var AO=this.elStatus=document.createElement("div");AO.innerText=mstrmojo.desc(15003,"Please enter space key to finish IME typing");AO.className="mstrmojo-TokenInputBox-status";this.domNode.appendChild(AO);}}else{this.domNode.removeChild(this.elStatus);delete this.elStatus;}}},detectKoreanLocale:function k(){var E=window.navigator;if(window.mstrConfig&&(window.mstrConfig.browserLang||[]).indexOf("ko")>=0){return true;}else{if(E.userLanguage=="ko"||E.userLanguage=="ko-KR"||E.browserLanguage=="ko"||E.browserLanguage=="ko-KR"){return true;}}return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.vi._MonitorsAppState","mstrmojo.vi.ui.tabs.Tab","mstrmojo.dom","mstrmojo.css");var N=mstrmojo.dom,a=mstrmojo.array,B=mstrmojo.css,g="animate",h="90px",m="70px",F="52px",t=200,Q=700,A=750;function D(){var AB=window.Modernizr,AA="transition";if(AB&&AB.testProp(AA)){return N.transEndEvtNames[AB.prefixed(AA)];}return null;}function v(AA){return function(){this.menuNode.style.display=AA?"block":"none";};}function P(AA){return Math.min(AA.offsetWidth-AA.firstChild.offsetWidth,0);}function u(AA){return AA.isAlignRight?"right":"left";}function y(AA,AB){return parseInt(AA.style[u(AB)],10)||0;}function L(){var AE=this.tabContainerNode,AD=false,AC=false,AF=false,AG=this.leftBtnNode,AA=this.rightBtnNode,AB=this.isValidMode();window.setTimeout(function(){if(P(AE)<0){var AI=N.position(AE),AH=N.position(AE.firstChild);AD=(AH.x<AI.x);AC=(AH.x+AH.w>AI.x+AI.w+1);}AF=AD||AC;B.toggleClass(this.btnBarNode,"highlightBar",AF);AG.style.display=AA.style.display=AF?"block":"none";AG.disabled=!AD;AA.disabled=!AC;B.toggleClass(AG,"disable",!AD);B.toggleClass(AA,"disable",!AC);if(this.domNode){this.addBtnNode.style.display=this.tabStripMenuNode.style.display=AB?"block":"none";this.bufferNode.style.display=AB?"none":"block";this.floaterNode.style.display=this.hasFloater&&AD?"block":"none";}this.widgetResized();}.bind(this),t);}function T(AA,AB){AA=(AA||[]);if(!AA.filter){return a.filter(AA,AB);}return AA.filter(AB);}function W(AA,AB){AA=(AA||[]);if(!AA.map){return a.map(AA,AB);}return AA.map(AB);}function q(AQ,AC,AD){var AO=this.tabContainerNode,AH=this.domNode;if(this.isStatic||!AO||!AH||AH.style.display==="none"){return ;}var AJ=AO.firstChild,AP=P(AO),AG=y(AJ,this),AA=Math.max(AG,AP),AN=T(this.children,function(AR){return AR.isSelected;})[0],AL=AD&&AD.domNode||AN&&AN.domNode;if(AQ&&AL){if(AP<0){var AI=N.position(AL),AE=N.position(AO),AK=Math.floor(AI.x-AE.x),AM=Math.floor(AI.x+AI.w-(AE.x+AE.w));if(AD){var AB=Math.ceil(AL.offsetWidth);AK=AK===0?Math.max(AP,-AB):AK;AM=AM===0?Math.min(-AP,AB):AM;}var AF=AK<0?AK:(AM>0?AM:0);AA=this.isAlignRight?AA+AF:AA-AF;}}if(AA!==AG){if(AC){this.setAnimation(AJ);}AJ.style[u(this)]=Math.max(AP,Math.min(AA,0))+"px";}L.call(this);}function C(AA){return AA.hasOwnProperty("index");}function J(){var AB=this.tabContainerNode,AC=N.position(AB),AA=this.isAlignRight;a.forEach(this.children||[],function(AE){var AK=AE.domNode,AL=N.position(AK),AH=Math.floor(AL.x-AC.x),AI=Math.floor(AL.x+AL.w-(AC.x+AC.w)),AD=AE.isSelected,AJ=Math.ceil(AK.offsetWidth),AF=0;AE.isCutoff=AE.isHidden=AE.isLeftMost=AE.isRightMost=false;AE.leftEdgeHiddenWidth=AE.rightEdgeHiddenWidth=0;if(AH<0){var AG=Math.abs(AH);AF=AJ-AG;AE.isLeftMost=AF>=0;AE.isCutoff=AE.isLeftMost&&AG>0&&AF>0;AE.isHidden=AF<=0;AE.leftEdgeHiddenWidth=AG;}else{if(AI>0){AF=AJ-AI;AE.isRightMost=AF>=0;AE.isCutoff=AE.isRightMost&&AI>0&&AF>0;AE.isHidden=AF<=0;AE.rightEdgeHiddenWidth=AI;}}});}function Y(){var AA=this.children,AB=0;(AA||[]).every(function(AD,AC){if(!C(AD)){return false;}AB++;AD.index=AC;return true;});(AA||[]).every(function(AC){if(!C(AC)){return false;}AC.total=AB;return true;});}function f(AG,AC){var AF=AG.ENUM_CORNERS,AH=[AF.TOP_LEFT,AF.BOTTOM_LEFT],AB=this.parent;if(AB.position!=="bottom"){AH.reverse();}AG.setAlignment(AH[0],AH[1]);var AA=N.position(AB.domNode),AE=AB.menuNode;var AD=AE.style;AD.top=(AC.y-AA.y)+"px";AD.left=(AC.x-AA.x)+"px";AG.addPopupHandlers(AB.id,v(true),v(false));AG.hostId=AB.id;AG.hostElement=AE;AG.isHostedWithin=false;AB.openPopup(AG.newInstance());}function i(AA){AA.raiseEvent({name:"TabsChange"});}mstrmojo.vi.ui.tabs.TabStrip=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo.ui.menus._HasMenuPopup,mstrmojo.vi._MonitorsAppState],{scriptClass:"mstrmojo.vi.ui.tabs.TabStrip",markupString:'<div id="{@id}" class="mstrmojo-VITabStrip {@cssClass}" style="{@cssText}" ><div class="mstrmojo-VITabStrip-menu" mstrAttach:click><div id="tabCommonIcon" class="mstrmojo-VITabStrip-menuIcon"></div><div id="tabCommonButton" class="mstrmojo-VITabStrip-menuButton"></div><div id="tabCommonMenuHost" class="mstrmojo-VITabStrip-menuButtonHost"></div></div><div class="mstrmojo-VITabStrip-tabs"><div style="display:table"><div style="display:table-row"></div></div></div><div class="mstrmojo-VITabStrip-buffer"></div><div class="mstrmojo-VITabStrip-btnBar"><div class="mstrmojo-VITabStrip-addBtn" mstrAttach:click><div class="mstrmojo-VITabStrip-addBtn-Img"></div><div class="mstrmojo-VITabStrip-addBtn-Text"></div></div><div class="mstrmojo-VITabStrip-navBtns"><div id="tabRightButton" class="mstrmojo-VITabStrip-rightBtn" mstrAttach:click,mousedown,mouseup,mouseover,mouseout><div class="navBtnIcon"></div></div><div id="tabLeftButton" class="mstrmojo-VITabStrip-leftBtn" mstrAttach:click,mousedown,mouseup,mouseover,mouseout><div class="navBtnIcon"></div></div></div></div><div class="mstrmojo-VITabStrip-floater"></div><div class="mstrmojo-VITabStrip-menuHost"></div><div class="mstrmojo-VIDND-mask"></div></div>',markupSlots:{tabStripMenuNode:function(){return this.domNode.firstChild;},menuImgNode:function(){return this.domNode.firstChild.firstChild;},menuBtnNode:function(){return this.domNode.firstChild.childNodes[1];},menuBtnHostNode:function(){return this.domNode.firstChild.lastChild;},tabContainerNode:function(){return this.domNode.childNodes[1];},containerNode:function(){return this.domNode.childNodes[1].firstChild.firstChild;},bufferNode:function(){return this.domNode.childNodes[2];},btnBarNode:function(){return this.domNode.childNodes[3];},addBtnNode:function(){return this.domNode.childNodes[3].firstChild;},addBtnImgNode:function(){return this.domNode.childNodes[3].firstChild.firstChild;},addBtnTxtNode:function(){return this.domNode.childNodes[3].firstChild.lastChild;},navBtnsNode:function(){return this.domNode.childNodes[3].lastChild;},rightBtnNode:function(){return this.domNode.childNodes[3].lastChild.firstChild;},leftBtnNode:function(){return this.domNode.childNodes[3].lastChild.lastChild;},floaterNode:function(){return this.domNode.childNodes[4];},menuNode:function(){return this.domNode.childNodes[5];},maskNode:function(){return this.domNode.lastChild;}},isStatic:false,isAlignRight:true,tabStripMenuNode:null,menuImgNode:null,menuBtnNode:null,menuBtnHostNode:null,tabContainerNode:null,addBtnNode:null,bufferNode:null,navBtnsNode:null,leftBtnNode:null,rightBtnNode:null,menuNode:null,position:"bottom",selectMovedTab:false,hasFloater:false,tabObjects:null,layoutConfig:{w:{tabContainerNode:"100%",bufferNode:"6px",addBtnNode:h,navBtnsNode:F,tabStripMenuNode:m},xt:true},onAppStateChange:function o(AH){var AF=mstrmojo.vi.VisualInsightApp.APP_STATES,AG=AF.PRESENTATION,AA=AF.SELECTOR_TARGETING,AB=AH.value,AI=AH.valueWas,AE=this.isValidMode();if(AB&AG||AI&AG||AB&AA||AI&AA){var AC=this.addBtnNode,AD=this.tabStripMenuNode;if(AC&&AD){AC.style.display=AD.style.display=AE?"block":"none";this.bufferNode.style.display=AE?"none":"block";this.doLayout();}}},setStatic:function R(AA,AB){this.isStatic=AA;if(!AA){q.call(this,true,AB);}},setTabs:function n(AC,AA){this.removeChildren();this.tabObjects=AC;var AD=this,AB=(AC&&AC.length)||0;this.addChildren(W(AC,function(AG,AE){var AF=AG.k;return AD.getTabCfg(AC,AG,{scriptClass:"mstrmojo.vi.ui.tabs.Tab",index:AE,total:AB,draggable:!!AB,dropZone:!!AB,k:AF,isSelected:AF===AA,showTabMenu:f,tabMoved:function(AI){var AH=this.index;AD.moveTab(AH,AH+(AI?-1:1),AH);}});}));q.call(this,true);i(this);},getTabs:function j(){return T(this.children,C);},getTabCfg:function z(AB,AC,AA){return AA;},deleteTab:function I(AA){var AG=this.id,AF=this.children[AA],AE=D(),AD=function(){var AH=mstrmojo.all[AG];AH.removeChildren(AF);AF.destroy();Y.call(AH);L.call(AH);i(AH);};if(AE){var AC=AF.domNode.firstChild,AB=AC.style;AB.width=AC.offsetWidth+"px";window.setTimeout(function(){B.addClass(AC,g);N.attachOneTimeEvent(AC,AE,AD);AB.width=0;},0);}else{AD();}},buildRendering:function b(){this._super();B.toggleClass(this.domNode,"alignLeft",!this.isAlignRight);},postBuildRendering:function U(){var AA=this._super();q.call(this,true);return AA;},doLayout:function K(){this._super();q.call(this,true);},isValidMode:function E(){return !((mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation())||(mstrApp.isAppStateSelection&&mstrApp.isAppStateSelection())||(mstrApp.allowWebDashboardDesign&&!mstrApp.allowWebDashboardDesign()));},setSelectedTab:function S(AA){a.forEach(this.children||[],function(AB){AB.set("isSelected",AB.k===AA);});i(this);},getSelectedTab:function e(){var AC=null,AB=this.children||[],AA;for(AA=0;AA<AB.length;AA++){if(AB[AA].isSelected){AC=AB[AA];break;}}return AC;},onclick:function l(AA){if(!this.isValidMode()){return ;}if(AA.getTarget()===this.addBtnImgNode||AA.getTarget()===this.addBtnTxtNode){this.addTab();}},addTab:mstrmojo.emptyFn,clearBtnTooltips:function O(AC){var AA=(AC===this.leftBtnNode),AB=(AC===this.rightBtnNode);if(AA||AB){this.clearTooltips();return true;}return false;},showBtnTooltips:function G(AA){var AC=AA.getTarget().parentNode,AB=this.clearBtnTooltips(AC);if(AB){this.toggleTooltip(AC);}},onmouseout:function r(AA){var AB=AA.getTarget().parentNode;this.clearBtnTooltips(AB);},onmouseover:function H(AA){this.showBtnTooltips(AA);},onmouseup:function Z(AA){window.setTimeout(function(){this.showBtnTooltips(AA);}.bind(this),t);},onmousedown:function d(AJ){var AF=AJ.getTarget().parentNode,AK=(AF===this.leftBtnNode),AD=(AF===this.rightBtnNode);if(AK||AD){var AI=this.tabContainerNode,AE=AI.firstChild,AA=this.id,AG=this,AC;if(mstrApp.setInteractive){mstrApp.setInteractive(false);}B.addClass(AF,"active");var AH=function(){window.clearInterval(AC);B.removeClass(AF,"active");L.call(mstrmojo.all[AA]);if(mstrApp.setInteractive){mstrApp.setInteractive(true);}};N.attachOneTimeEvent(document.body,"mouseup",AH);var AB=function(){var AN=P(AI),AQ=y(AE,AG),AR=AQ-AN,AP=0-AQ;J.call(AG);AG.setAnimation(AE);var AL=AG.getCornerTabs()||[],AO=T(AL,function(AS){if(AK&&AS.isLeftMost||AD&&AS.isRightMost){return AS;}})[0],AM=0;if(AO){AM=AO.isCutoff?(AK?AO.leftEdgeHiddenWidth:AO.rightEdgeHiddenWidth):Math.ceil(AO.domNode.offsetWidth);AM=Math.min(AM,AK?AP:AR);AM=AG.isAlignRight?(AK?-AM:AM):(AK?AM:-AM);}AE.style[u(AG)]=parseInt(AE.style[u(AG)]||0)+AM+"px";};AB();AC=window.setInterval(function(){AB();},A);}},getCornerTabs:function c(){return T(this.children,function(AA){return AA.isLeftMost||AA.isRightMost;});},setAnimation:function X(AA){var AB=D();if(AB){B.addClass(AA,g);N.attachOneTimeEvent(AA,AB,function(){B.removeClass(AA,g);});}},createTooltip:function w(AB){var AD=document.createElement("div");AD.className="navBtnTooltip";AD.appendChild(document.createTextNode(AB.getAttribute("tooltip")||""));var AG=document.body.firstChild;AG.parentNode.insertBefore(AD,AG);var AE=5,AH=AD.offsetWidth-25,AC=AB.getBoundingClientRect(),AF=AD.getBoundingClientRect(),AA=AC.top-(AF.height+AE);AD.style.top=AA+"px";AD.style.left=(AC.left-AH)+"px";return AD;},clearTooltips:function k(){window.clearTimeout(this._tooltipTimeOut);var AA=document.querySelectorAll(".navBtnTooltip");a.forEach(AA||[],function(AB){AB.parentNode.removeChild(AB);});},toggleTooltip:function x(AA){window.clearTimeout(this._tooltipTimeOut);if(AA.disabled){this._tooltipTimeOut=window.setTimeout(function(){this.createTooltip(AA);}.bind(this),Q);}},moveTab:function M(AA,AI,AG,AF){var AB=this.children,AJ=AB.splice(AA,1)[0];AB.splice(AI,0,AJ);Y.call(this);this.setAnimation(this.tabContainerNode.firstChild);var AC=this.containerNode,AD=AC.childNodes,AH=AC.removeChild(AD[AA]),AE=AD[AI];if(AE){AC.insertBefore(AH,AE);}else{AC.appendChild(AH);}if(this.selectMovedTab||AJ.isSelected){q.call(this,true,true,AJ);}if(!AF&&AG!==undefined&&AG!==AI){this.commitTabMove(AG,AI);i(this);}},commitTabMove:function s(AA,AB){throw new Error(this.scriptClass+" must implement commitTabMove.");},updateTabTable:function p(){if(!this.isStatic){q.call(this,true);}},setLinkIcon:function V(AA,AD){var AC,AB;if(AA){if(AD){AB="src";a.some(this.getTabs(),function(AE){if(AE.k===AD){AC=AE;}return AC;});if(!AC){return ;}}else{AB="tgt";AC=this.getSelectedTab();}B.addClass(AC.domNode,AB);}else{AB=AD?["src","tgt"]:"tgt";a.forEach(this.children,function(AE){B.removeClass(AE.domNode,AB);});}}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.array","mstrmojo.num","mstrmojo.dom","mstrmojo.date","mstrmojo.Container","mstrmojo.VBox","mstrmojo.Button","mstrmojo.locales","mstrmojo._FormatDefinition","mstrmojo.mstr.EnumFunction","mstrmojo.ui.editors.controls.ComboBox","mstrmojo.vi.util.NumberFormatUtility");var M=mstrmojo.hash,b=mstrmojo.array,G=mstrmojo.num,J=mstrmojo._FormatDefinition,B=mstrmojo.css,Z=mstrmojo.mstr.EnumFunction,L=mstrmojo.locales,H=mstrmojo.Button.newIconButton,O=mstrmojo.date,I=mstrmojo.vi.util.NumberFormatUtility,q="1234.12",E=J.NumberFormatCategory,o=J.FixedNegative,F=J.CurrencyNegative,e=J.PercentNegative,K=J.DefaultFormat.FormattingNumber,m="nf-MiddleRow ",W="nf-MiddleRow nf-HasWidget ",Y,T,d=function d(s,r){return{cls:this.value===s.v?"selected":"",v:s.v||"",n:s.n||"",style:s.r?"color:red;":"color:#fff;",sel:parseInt(this.idx,10)===r?"selected":""};},n={RIGHT:1,LEFT_WITH_SPACE:2,RIGHT_WITH_SPACE:3};var S=[{n:mstrmojo.desc(4531,"Automatic"),v:-3}].concat(J.Category.slice(2)),c=[{n:"$"},{n:"£"},{n:"€"},{n:"¥"},{n:"fr."}];function D(t,s){var r=b.find(t,"v",s);return r===-1?"":t[r].f;}function N(r){var t=this.parent.parent.parent.myData,s=r.v;t.set("format",D(this.items,s));t.set("negativeNumbers",s);B.toggleClass(this.selectedNode,"red",r.r);}function X(t,u,r){return{scriptClass:"mstrmojo.ui.Pulldown",isHostedWithin:false,items:t,onitemSelected:function s(v){var w=this.parent;while(w&&(!w.data||typeof w.data[u]==="undefined")){w=w.parent;}if(w){w.data.set(u,v.v);if(r){w.children[0].preview.preview_label.set("text",v.n);}}}};}function h(AB,w,v,AE,AA){var AD=M.clone(AB),s=w>0?L.number.DECIMALSEPARATOR:"",t=w>0?".":"",u=J.DefaultFormat.FormattingNumber,AC=new RegExp("\\"+L.number.THOUSANDSEPARATOR,"g"),r=new RegExp("\\"+L.number.DECIMALSEPARATOR+"\\d{2}","g"),y;for(y=0;y<w;y++){s+=y%9;t+="0";}for(y=0;y<AD.length;y++){var z=AD[y];z.n=z.n.replace(/,/g,"@");z.n=z.n.replace(/\./g,L.number.DECIMALSEPARATOR);z.n=z.n.replace(/@/g,L.number.THOUSANDSEPARATOR);if(v){z.n=z.n.replace(AC,"");z.f=z.f.replace(/,/g,"");}if(AE&&AE!==u.CurrencyPosition){switch(AE){case n.RIGHT:z.n=z.n.replace(/\$/g,"").replace(r,L.number.DECIMALSEPARATOR+"12$");z.f=z.f.replace(/"\$"/g,"").replace(/\.\d{2}/g,'.00"$"');break;case n.LEFT_WITH_SPACE:z.n=z.n.replace(/\$/g,"$ ");z.f=z.f.replace(/\$/g,"$ ");break;case n.RIGHT_WITH_SPACE:z.n=z.n.replace(/\$/g,"").replace(r,L.number.DECIMALSEPARATOR+"12 $");z.f=z.f.replace(/"\$"/g,"").replace(/\.\d{2}/g,'.00" $"');break;default:}}z.n=z.n.replace(r,s);z.f=z.f.replace(/\.\d{2}/g,t);if(AA&&AA!==u.CurrencySymbol){var x=AA.replace(/\$/g,"$$$$");z.n=z.n.replace(/\$/g,x);z.f=z.f.replace(/\$/g,x);}z.cls=z.r?"red":null;}return AD;}function U(t){var r="1"+(t>0?".":"").toString(),u="0"+(t>0?".":"").toString(),s;for(s=0;s<t;s++){r+=s%10;u+="0";}return[r+"E+03",u+"E+0#"];}function R(AE,AG){var y="\u00A4",AC=/"[^"]*"/g,t=AE.match(AC),AH="\u0091",AD=/\[[^\]]*\]/g,r=AE.match(AD),AB,AF;AB=AE.replace(AC,y);AB=AB.replace(AD,AH);var v=AE.indexOf("."),AA=G.getDecimalLength(AE),x=Math.max(0,AA+AG),u=AE.match(/\d(?!((\d)|(,\d)))/g),s=v!==-1?AE.charAt(v-1):u&&u[0],z=(s||"0")+(x>0?".":"").toString();for(var w=0;w<x;w++){z+="0";}AB=AB.replace(AA===0?/\d(?!((\d)|(,\d)))/g:/\d\.\d+/g,z);AB=AB.split(y);AF=AB[0];b.forEach(t,function(AJ,AI){AF+=AJ+AB[AI+1];});AB=AF.split(AH);AF=AB[0];b.forEach(r,function(AJ,AI){AF+=AJ+AB[AI+1];});return AF;}function P(y,r,x,w,t,s){var v=y.parent.parent.parent,u=h(r,x.decimalPlaces,w,t,s);x.set("format",D(u,x.negativeNumbers.toString()));y.set("items",u);y.set("selectedIndex",b.find(u,"v",x.negativeNumbers.toString()));v.preview.preview_label.set("text",I.applyFormatToNumber(v.myData.format,q.replace(/\./g,L.number.DECIMALSEPARATOR)));}function k(){var z=this.parent.parent,AD=z.myData,u=z.formatterContainer,s=S[z.categoryPicker.selectedIndex].v,AG=this.funcType===Z.FunctionLeftStr?1:-1,w=null,y=null,v=false,AF=0,AA=null,t=false,AC;switch(s){case E.Fixed:w=u.fixed_hBox.negativeDDL;y=o;v=!AD.thousandSeparator;break;case E.Currency:w=u.currency_hBox2.negativeDDL;y=F;AF=AD.currencyPosition;AA=AD.currencySymbol;break;case E.Percentage:w=u.percentage_hBox.negativeDDL;y=e;break;case E.Scientific:t=true;break;case E.Custom:AC=true;break;default:return ;}if(AC){var AE=R(AD.format,AG);z.preview.preview_label.set("text",I.applyFormatToNumber(AE,q.replace(".",L.number.DECIMALSEPARATOR)));z.formatterContainer.custom_text.set("value",AE);return ;}var x=AD.decimalPlaces,r=x+AG;r=Math.max(0,r);r=Math.min(J.MaxNegativeDidigts,r);AD.set("decimalPlaces",r);if(t){var AB=U(r);AD.set("format",AB[1]);z.preview.preview_label.set("text",AB[0]);}else{P(w,y,AD,v,AF,AA);}}function p(r,s){return Math.max(b.find(r,"v",s),0);}function C(t){var s=this.parent.parent.categoryPicker,r=S.map(function(u){return u.v;}).indexOf(t);s.set("selectedIndex",r);}function l(r,s,u,t){return H(undefined,r,s,undefined,M.copy(t,{useRichTooltip:true,updateTooltipConfig:function(){this.richTooltip={cssClass:"vi-regular vi-tooltip-A A-center",content:u,refNode:this.domNode,posType:mstrmojo.tooltip.POS_TOPCENTER,left:15,top:33};}}));}function a(){if(mstrApp.isSingleTier&&!mstrmojo.dom.isMac()){var w=this.formatterContainer,v=L.datetime,r={day:7,month:4,year:1998},t={hour:9,min:41,sec:46},u=v&&v.DATEINPUTFORMATS,s=v&&v.TIMEINPUTFORMATS;Y=[];T=[];u.forEach(function(x){Y.push({v:x,n:O.formatDateInfo(r,x)});});s.forEach(function(x){T.push({v:x,n:O.formatTimeInfo(t,x)});});w.date_ddl.set("items",Y);w.time_ddl.set("items",T);}else{Y=J.Date;T=J.Time;}}mstrmojo.vi.ui.NumberFormatter=mstrmojo.declare(mstrmojo.VBox,null,{scriptClass:"mstrmojo.vi.ui.NumberFormatter",cssClass:"NumberFormatter-content",formatValue:null,myData:null,oldData:null,categoryPicker:null,formatterContainer:null,preview:null,shortcutRow:null,adjustAfterCategoryChange:mstrmojo.emptyFn,preBuildRendering:function(){if(this._super){this._super();}a.call(this);var r=this.formatterContainer;if(this.formatValue){r.currency_hBox1.currency_symbol.selectedValue=this.formatValue.currencySymbol;r.fixed_btn.checked=!!this.formatValue.thousandSeparator;B.addWidgetCssClass(r.fraction_ddl,e[b.find(e,"v",this.formatValue.negativeNumbers)].r?" red":"");}},postBuildRendering:function Q(){if(this._super){this._super();}if(this.formatValue){this.categoryPicker.set("selectedIndex",p(this.categoryPicker.items,this.formatValue.category.toString()));}},children:[M.copy({alias:"categoryPicker",cssClass:"nf-category",onitemSelected:function j(AE){if(!this.hasRendered){return ;}var z=this,AC=z.parent,u=AC.formatterContainer,r=AC.shortcutRow,AD=AC.preview.preview_label,AB=AE.v,w=AB===E.Automatic,t=AB===E.Scientific,s=[],y=AC.myData;b.forEach(u.children,function(AF){AF.set("visible",false);});AC.border.set("visible",!w);AC.preview.set("visible",!w);AC.borderBottom.set("visible",!(!mstrApp.isWSStyling||w||t));["border","moveLeftBtn","moveRightBtn"].forEach(function(AF){r[AF].set("visible",!w);});y.set("category",AB);y.set("thousandSeparator",AB?K.ThousandSeparator:AC.formatValue.thousandSeparator);switch(AB){case E.Currency:P(u.currency_hBox2.negativeDDL,F,y,false,y.currencyPosition,y.currencySymbol);u.currency_hBox1.currency_position.set("selectedIndex",p(J.CurrencyPosition,y.currencyPosition.toString()));s=["currency_hBox1","currency_hBox2"];break;case E.Date:u.date_ddl.set("selectedIndex",p(Y,y.format));s=["date_ddl"];break;case E.Time:u.time_ddl.set("selectedIndex",p(T,y.format));s=["time_ddl"];break;case E.Percentage:P(u.percentage_hBox.negativeDDL,e,y,false,0,null);s=["percentage_hBox"];break;case E.Fraction:u.fraction_ddl.set("selectedIndex",p(J.Fraction,y.format));s=["fraction_ddl"];break;case E.Scientific:var x=U(y.decimalPlaces||0);y.set("format",x[1]);AD.set("text",x[0]);break;case E.Custom:var v=y.customText||y.format,AA=u.custom_text;y.set("format",v);AA.value=v;AA.refresh();AD.set("text",I.applyFormatToNumber(v,q.replace(".",L.number.DECIMALSEPARATOR)));s=["custom_condense","custom_text"];break;case E.Fixed:P(u.fixed_hBox.negativeDDL,o,y,!y.thousandSeparator,0,null);s=["fixed_hBox","fixed_btn"];break;}b.forEach(s,function(AF){u[AF].set("visible",true);});AC.adjustAfterCategoryChange();}},X(S,"category")),{scriptClass:"mstrmojo.Box",cssClass:m+"nf-shortcut",alias:"shortcutRow",border:null,moveLeftBtn:null,moveRightBtn:null,children:[l("nf-shortcut-currency",function g(){C.call(this,E.Currency);},mstrmojo.desc(2051,"Currency"),undefined),l("nf-shortcut-percentage",function g(){C.call(this,E.Percentage);},mstrmojo.desc(2053,"Percentage"),undefined),l("nf-shortcut-fixed",function g(){C.call(this,E.Fixed);this.parent.parent.formatterContainer.fixed_btn.set("checked",true);},mstrmojo.desc(2050,"Fixed"),undefined),{scriptClass:"mstrmojo.Label",cssClass:"shortcut-border",alias:"border"},l("nf-MoveDecimalPoint left",function g(){k.call(this);},mstrmojo.desc(2189,"Increase Decimal"),{funcType:Z.FunctionLeftStr,alias:"moveLeftBtn"}),l("nf-MoveDecimalPoint right",function g(){k.call(this);},mstrmojo.desc(2188,"Decrease Decimal"),{funcType:Z.FunctionRightStr,alias:"moveRightBtn"})]},{scriptClass:"mstrmojo.Label",alias:"border",cssClass:"nf-border"},{scriptClass:"mstrmojo.Container",alias:"formatterContainer",cssClass:"nf-buttons",markupString:'<div id="{@id}" class="{@cssClass}" style="{@cssText}"></div>',fixed_hBox:null,fixed_btn:null,currency_hBox1:null,currency_hBox2:null,date_ddl:null,time_ddl:null,percentage_hBox:null,fraction_ddl:null,custom_condense:null,custom_text:null,markupSlots:{containerNode:function V(){return this.domNode;}},children:[{scriptClass:"mstrmojo.HBox",alias:"fixed_hBox",cssClass:W,negativeDDL:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"negative-label",text:mstrmojo.desc(13891,"Negative:")},M.copy({alias:"negativeDDL",cssClass:"nf-NegativePullDown",getOptionProps:d,onitemSelected:function j(r){N.call(this,r);}},X([],"format"))]},{scriptClass:"mstrmojo.CheckBox",alias:"fixed_btn",cssClass:m,label:"",onclick:function g(){var r=this.parent.parent;r.myData.set("thousandSeparator",this.checked?-1:0);P(this.parent.fixed_hBox.negativeDDL,o,r.myData,!this.checked,0,null);},preBuildRendering:function A(){this.set("label",mstrmojo.desc(13898,"Use 1000 Separator(#)").replace("#",L.number.THOUSANDSEPARATOR));}},{scriptClass:"mstrmojo.HBox",alias:"currency_hBox1",cssClass:W,visible:true,currency_symbol:null,currency_position:null,children:[{scriptClass:"mstrmojo.ui.editors.controls.ComboBox",alias:"currency_symbol",cssClass:"nf-CurrencySymbol",selectedValue:"$",items:c,postselectedValueChange:function i(r){var v=this,u=v.parent.parent.parent,t=r.value,s=u.myData;s.set("currencySymbol",t);P(this.parent.parent.currency_hBox2.negativeDDL,F,s,false,parseInt(s.currencyPosition,10),t);}},M.copy({cssClass:"nf-CurrencyPosition align-right",alias:"currency_position",onitemSelected:function j(r){var u=this,t=u.parent.parent.parent,s=r.v;t.myData.set("currencyPosition",parseInt(s,10));P(this.parent.parent.currency_hBox2.negativeDDL,F,t.myData,false,parseInt(s,10),t.myData.currencySymbol);}},X(J.CurrencyPosition,"currencyPosition"))]},{scriptClass:"mstrmojo.HBox",alias:"currency_hBox2",cssClass:W,negativeDDL:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"negative-label",text:mstrmojo.desc(13891,"Negative:")},M.copy({alias:"negativeDDL",cssClass:"nf-NegativePullDown",getOptionProps:d,onitemSelected:function j(r){N.call(this,r);}},X([],"format"))]},M.copy({alias:"date_ddl",cssClass:W},X(J.Date,"format",true)),M.copy({alias:"time_ddl",cssClass:W},X(J.Time,"format",true)),{scriptClass:"mstrmojo.HBox",alias:"percentage_hBox",cssClass:W,negativeDDL:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"negative-label",text:mstrmojo.desc(13891,"Negative:")},M.copy({alias:"negativeDDL",cssClass:"nf-NegativePullDown",getOptionProps:d,onitemSelected:function j(r){N.call(this,r);}},X([],"format"))]},M.copy({alias:"fraction_ddl",cssClass:W},X(J.Fraction,"format",true)),mstrmojo.Button.newWebButton(mstrmojo.desc(13893,"Condense (e.g.10M)"),function(){this.parent.custom_text.set("value",'[>=1000000]#,##0,,"M";[>=1000]#,##0,"K";0;[<=-1000000]#,##0,,"M";[<=-1000]#,##0,"K"');},false,{cssClass:"nf-condense",alias:"custom_condense"}),{scriptClass:"mstrmojo.TextBox",alias:"custom_text",cssClass:"nf-custom",onvalueChange:function f(){var t=this,s=t.parent.parent,r=t.value;s.myData.set("format",r);s.myData.set("customText",r);t.parent.parent.preview.preview_label.set("text",I.applyFormatToNumber(r,q.replace(".",L.number.DECIMALSEPARATOR)).replace(/\s/g,"&nbsp;"));}}]},{scriptClass:"mstrmojo.Label",alias:"borderBottom",cssClass:"nf-border"},{scriptClass:"mstrmojo.HBox",alias:"preview",cssClass:m+"nf-PreviewRow",preview_label:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"preview_lable",text:mstrmojo.desc(13892,"Preview:")},{scriptClass:"mstrmojo.Label",cssClass:"align-right preview-info-label",alias:"preview_label"}]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.array","mstrmojo.Button","mstrmojo.css","mstrmojo.hash","mstrmojo.Label","mstrmojo.Box","mstrmojo.ui.Pulldown","mstrmojo.ui.SearchablePulldown","mstrmojo.func");mstrmojo.requiresDescs(221,1442,2751,2891,11949,11950,11951,11942,13397,13398,14640,14648);var R=mstrmojo.array,U=mstrmojo.css,N=mstrmojo.hash,O=mstrmojo.func,M=mstrmojo.Button.newWebButton,P=mstrmojo.dom,T="mstrmojo-link-validation",Q="mstrmojo-link-vt",F=function F(V){if(V.old){this.removedLinks.push(V);}this.links.removeChildren(V);},S=function S(){var s=this.dsMap,p=this.docModel,Y=p.datasets,u=function u(i,k,a){var j={n:a||"",did:k||null,parent:i||null,lv:(i?i.lv+1:-1),children:[]};if(i){i.children.push(j);}return j;},e=u(),X,W,V,g,Z,q,l,t,r,o,n,m,c,b,d,h,f;N.forEach(Y,function(a){if(p.isMDXDataset(a)){Z=a.tables;for(o=0,b=Z.length;o<b;o++){q=Z[o];X=u(e,q.did,q.n);X.isMDX=true;for(n=0,d=q.dimensions.length;n<d;n++){l=q.dimensions[n];W=u(X,l.did,l.n);for(m=0,h=l.hierarchies.length;m<h;m++){t=l.hierarchies[m];V=u(W,t.did,t.n);for(c=0,f=t.att.length;c<f;c++){r=t.att[c];g=u(V,r.did,r.n);g.att=r;s[q.did+":"+r.did]=g;}}}}}else{X=u(e,a.did,a.name);X.isMDX=false;R.forEach(a.att,function(i){g=u(X,i.did,i.n);g.att=i;s[a.did+":"+i.did]=g;});}});return e;},B=function B(b,c){b=R.ensureArray(b);var a=this,Z=this.attribute.did,d=this.docModel,X=this.datasetId,W="\u001F",V={success:function(f){var h=f.als,e=(d.als&&d.als.links)||{},g=a.dsTree;R.forEach(b,function(q,l){var r={},j={},k=[],m={},p=Z+" "+q,n=R.filter(h[l].ats,function(i){return !d.isInDataset(X,i.at,["att"]);}),o=function o(i,s){if(!m[i]){m[i]={};}if(!m[i][s]){m[i][s]=true;}};R.forEach(n,function(t){var i=t.at,s=t.fms;r[i]=true;if(s){R.forEach(s,function(u){o(i,u.fm);});}});N.keyarray(e).forEach(function(i){if(i===p){R.forEach(e[i],function(s){s=s.split(" ");r[s[0]]=true;o(s[0],s[1]);});}});if(N.keyarray(r).length>0){R.forEach(g.children,function(s){var i=function(t){var u;if(!t.att){return ;}t=t.att;if(r[t.did]){if(!j[t.n]){j[t.n]={};}if(!j[t.n][t.did]){j[t.n][t.did]=[];}j[t.n][t.did].push(s.n);u=N.copy(t,u);u.dsId=s.did;k.push(u);}};if(s.isMDX){R.forEach(s.children,function(t){R.forEach(t.children,function(u){R.forEach(u.children,i);});});}else{R.forEach(s.children,i);}});}a.tgtAttrs[q]=k;a.tgtForms[q]=m;a.namesHash[q]=j;});}},Y={taskId:"validateDocumentLinks",msgID:d.mid,action:1,attributeList:Z,attributeFormList:b.join(W)};mstrApp.serverRequest(Y,O.wrapMethods(V,c));},E=function(Y,a,W,Z){Y.richTooltip=null;if(!Y.isSearching){var X=a&&a.scrollWidth>a.clientWidth;W=X?mstrmojo.desc(14648,"## from ###").replace("##",W):"";if(Z){if(!X){W=mstrmojo.desc(14640,"From ###");}W=W.replace("###",Z);}var V=mstrmojo.dom.position(a);Y.richTooltip={cssClass:"vi-regular vi-tooltip-V",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_BOTTOMLEFT,content:W,top:V.y-6,left:V.x};}},D=function D(c){var d=this,f=function(m){var k=m.fs,n=m.de,l=[];(k||[]).forEach(function(o){if(o.obf&&(!n||o.idf)){l.push({n:o.fnm,v:o.fid,idf:o.idf});}});return l;},g=f(this.attribute),Z=function(n,l){var k=f(n);var o=(d.tgtForms[l]&&d.tgtForms[l][n.did])||{};var m=[];R.forEach(k,function(p){if(o[p.v]){m.push(p);}});return m;},b=function b(l){var k=[];R.forEach(d.tgtAttrs[l],function(m){if(Z(m,l||d.idFormId).length>0){var o=d.namesHash[l],n=m.n;if(o[m.n]&&N.keyarray(o[m.n]).length>1){n=n+" ("+o[m.n][m.did].join(",")+")";}k.push({n:m.n,v:m,tt:n});}});if(k.length===0){k.push({n:mstrmojo.desc(13398,"No valid object"),v:{did:null},cls:"nvo",t:1});}return k;},h=b((c&&c.srcFormId)||this.idFormId),i=function(k,l){return R.find(k.fs,l?"fid":"idf",l||true);},j=function(l){var k=-1;h.forEach(function(n,m){if(n.v.did===l){k=m;}});return k;},W=function(l){var k=h[l];if(!k){return mstrmojo.desc(13397,"Select an attribute");}else{return k.n;}},X=function(l){var m=l.items,k=l.selectedIndex;if(k>=0){if(m[k].idf){return ;}}m.forEach(function(o,n){if(o.idf){l.set("selectedIndex",n);}});};this.links.addChildren({scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-linkRow",slot:"containerNode",old:!!c,oldMeta:c,getMeta:function(){var k=this.linkFromForm,m=this.linkToAtt,l=this.linkToForm;return{srcAttrId:d.attribute.did,srcFormId:k.items[k.selectedIndex].v,tgtAttrId:m.items[m.selectedIndex]&&m.items[m.selectedIndex].v.did,tgtFormId:l.items[l.selectedIndex]&&l.items[l.selectedIndex].v};},children:[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-attName",text:d.attribute.n,useRichTooltip:true,updateTooltipConfig:function(o){var n=o.target,k=this.text,l=d.datasetId,m=l?d.docModel.datasets[l].name:"";E(this,n,k,m);}},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-linkFormFromPD",alias:"linkFromForm",value:"ID",isHostedWithin:true,items:g,selectedIndex:i(d.attribute,c&&c.srcFormId),onitemSelected:function(l){var k=this,m=function(){var o=k.parent.linkToAtt;h=b(l.v);o.set("items",h);o.set("selectedIndex",-1);o.set("text",mstrmojo.desc(13397,"Select an attribute"));U.addClass(o.selectedNode,"nvo");},n={success:m};if(this.hasRendered){if(this.parent.old){this.parent.oldUpdated=true;}if(!l.idf){X(this.parent.linkToForm);if(!d.tgtForms[l.v]){B.call(d,l.v,n);return ;}}m();}}},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-linksToLabel",text:mstrmojo.desc(11949,"links to")},{scriptClass:"mstrmojo.ui.SearchablePulldown",cssClass:"mstrmojo-linkToAtt",alias:"linkToAtt",useRichTooltip:true,isHostedWithin:false,items:h,text:W(j(c&&c.tgtAttrId)),selectedIndex:j(c&&c.tgtAttrId),allowCustomText:true,allowEmptyText:true,updateTooltipConfig:function(p){var o=p.target,k=o.getAttribute("tt"),m=this.getSelectedItem(),l=m?m.v.dsId:null,n=l?d.docModel.datasets[l].name:"";if(this.selectedNode===o&&m){k=m.tt;}E(this,o,k,n);},onitemSelected:function(o){if(!o||o.v.did===null){return ;}var n=this.parent.linkToForm,m=this.parent.linkFromForm,l=Z(o.v,m.items[m.selectedIndex].v),p=function p(q,s){var r=R.find(q,s?"v":"idf",s||true);if(r===-1&&q.length>0){r=0;}return r;},k;R.forEach(l,function(q){if(q.idf){k=false;return false;}});if(k){K.call(d,true);}n.set("items",l);n.set("selectedIndex",p(l,!this.hasRendered&&c&&c.tgtFormId));if(this.hasRendered&&this.parent.old){this.parent.oldUpdated=true;}J.call(d);},onPopupWidgetOpened:function a(){if(this.selectedIndex===-1){this.set("text","");}U.removeClass(this.selectedNode,"nvo");},onPopupWidgetClosed:function e(){mstrmojo.ui.SearchablePulldown.prototype.onPopupWidgetClosed.call(this);if(this.selectedIndex===-1&&this.text===""){this.set("text",mstrmojo.desc(13397,"Select an attribute"));U.addClass(this.selectedNode,"nvo");}else{U.removeClass(this.selectedNode,"nvo");}this.hideTooltip();R.forEach(d.collapseTargets,function(k){k.className="arrow-b";U.removeClass(k.parentNode.parentNode,"collapse");});R.forEach(d.collapseTreeNodes,function(k){delete k.collapse;});R.forEach(this.list.itemsContainerNode.childNodes,function(k){k.style.display="";});},postBuildRendering:function V(){mstrmojo.ui.SearchablePulldown.prototype.postBuildRendering.call(this);if(this.selectedIndex===-1){U.addClass(this.selectedNode,"nvo");}this.list.popupConfig.clear();},getPopupListConfig:function Y(){return{scriptClass:"mstrmojo.ui.PopupList",alias:"list",width:"170px",tooltipOrientation:"vertical",selectionPolicy:"reselect",useRichTooltip:true,locksHover:true,listHooks:{select:function k(q,r,p){this.parent.set("selectedIndex",p);this.close();}},onclick:function l(x){try{var q=x.getTarget(),y=this.getItemFromTarget(q),u=P.findAncestorByAttr(q,"idx",true,this.domNode),t=this.items;if(t){this.parent.set("items",t);}if(y){x.cancel();if(q.className==="arrow-b"||q.className==="arrow-r"){var p=this.itemsContainerNode.childNodes,s=function s(AA){var z;while(AA){z=AA.className||"";if(z.indexOf("lv")===0){return window.parseInt(z.substring(2),10);}AA=AA.firstChild;}return null;},w=function w(z,AC){var AB=d.dsMap,AA=AB[z.dsId+":"+z.did];while(AA){if(AA.lv===AC){return AA;}AA=AA.parent;}return null;},v=function v(){var AI=(q.className==="arrow-b"),AC=q.parentNode.parentNode,z=s(AC),AD=y._renderIdx,AA=w(y.v,z),AG=t.length,AF,AB,AE,AH,AK,AJ;q.className=AI?"arrow-r":"arrow-b";if(!d.collapseTargets){d.collapseTargets=[];}d.collapseTargets.push(q);U.toggleClass(AC,"collapse",AI);AA.collapse=AI;if(!d.collapseTreeNodes){d.collapseTreeNodes=[];}d.collapseTreeNodes.push(AA);for(AF=AD+1;AF<AG;AF++){AB=p[AF];AE=s(AB);if(AE<=z){break;}AH=w(t[AF].v,AE);AK=AH.parent;AJ=true;while(AK){if(AK.collapse){AJ=false;break;}AK=AK.parent;}AB.style.display=(AJ?"":"none");}};v();}else{if(u&&u.node.className.indexOf("item")!==-1){this.doItemSelect(y,x||{});}}}}catch(r){mstrApp.onerror(r);}},getItemProps:function m(r,p){var q=mstrmojo._IsList.getItemProps.call(this,r,p);var s=r.cls;if(s){q.addCls(s);}return q;},getItemMarkup:function o(z,y){if(z.v.did===null){return'<{@tag} class="item {@cls}" did="'+z.v.did+'" idx="{@idx}" style="{@style}">{@n}</{@tag}>';}var AA=[],w=z.v.did,r=z.v.dsId,s=r?d.docModel.datasets[r]:null,q=s?s.name:"",x=y>0&&this.items[y-1].v,u=d.dsMap,t=u[z.v.dsId+":"+w],p=u[(x&&(x.dsId+":"+x.did))];AA.push("</div>");while(t){if(t.lv===-1){break;}if(t.att){var v=t.att.da?"derived-attr":"attr";AA.push('<div class="lv'+t.lv+' dim item {@cls}" tt="'+z.tt+'" did="'+w+'" dsName="'+q+'" idx="{@idx}" style="{@style}"><div><div class="'+v+'"></div></div>{@n}</div>');}else{if(t!==p){AA.push('<div class="lv'+t.lv+' dim" dtt="'+t.n+'" idx="{@idx}"><div><div class="arrow-b"></div></div>'+t.n+"</div>");}else{break;}}t=t.parent;p=(p&&p.parent)||null;}AA.push("<div>");return AA.reverse().join("");},updateTooltipConfig:function n(u){var t=u.target,r=t.getAttribute("tt"),q=t.getAttribute("dtt"),s=t.getAttribute("dsName"),p=r||q;if(p){E(this,t,p,s);}}};}},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-linkFormToPD",alias:"linkToForm",value:"ID",isHostedWithin:true,items:[],onitemSelected:function(k){if(this.hasRendered){if(this.parent.old){this.parent.oldUpdated=true;}if(!k.idf){X(this.parent.linkFromForm);}}}},M("",function(){F.call(d,this.parent);},false,{cssClass:"mstrmojo-removeLink"})]});this.links.renderChildren();},K=function(V){U.toggleClass(this.editorNode,"mstrmojo-advanced",V);},L=function(Y){var W=this,Z=T,V;try{mstrmojo.all[Z].destroy();}catch(X){}V={scriptClass:"mstrmojo.Editor",id:Z,title:mstrmojo.desc(2751,"Message"),cssClass:"mstrmojo-alert",buttons:[M(mstrmojo.desc(1442,"Ok"),function(){mstrmojo.all[Z].destroy();H.call(W);},true)],children:[{scriptClass:"mstrmojo.Label",text:Y}],visible:true,zIndex:1000};mstrmojo.insert(V).render();},H=function(){var X=this,W=this.illLinks,V=this.links.children,Y=Q;R.forEach(W,function(Z){Z=Z.al;R.forEach(V||[],function(b){var d=b.getMeta(),e=b.linkToAtt,a,c;if(d.srcAttrId===Z.alaid1&&d.tgtAttrId===Z.alaid2){if(!mstrmojo.all[Y]){c=new mstrmojo.Tooltip({id:Y,cssClass:X.themeClassName+" vi-warning vi-tooltip-V",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_BOTTOMLEFT,updatePopupConfig:null});P.attachEvent(X.editorNode,"click",function(){c.close();U.toggleClass(e.selectedNode,"mstrmojo-Warning",false);});}else{c=mstrmojo.all[Y];}c.close();a=mstrmojo.dom.position(e.selectedNode);c.set("top",a.y-6);c.set("left",a.x);c.set("content",Z.alstmsg);U.toggleClass(e.selectedNode,"mstrmojo-Warning",true);c.open();return false;}});});},A=function(){var V=mstrmojo.all[Q];if(V){V.close();}},J=function J(){this.buttons[0].enabled=true;if(this.btnHbox){this.btnHbox.children[0].set("enabled",true);}},G=function G(){var V=this,W=[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-toolBox",alias:"tools",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebHoverButton mstrmojo-addLink",text:mstrmojo.desc(11950,"Add A Link"),title:mstrmojo.desc(11950,"Add A Link"),onclick:function(){D.call(V);A.call(V);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebHoverButton mstrmojo-showForms",text:mstrmojo.desc(2891,"Show Attribute Forms"),title:mstrmojo.desc(2891,"Show Attribute Forms"),onclick:function(){K.call(V,true);A.call(V);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebHoverButton mstrmojo-hideForms",text:mstrmojo.desc(11951,"Hide Attribute Forms"),title:mstrmojo.desc(11951,"Hide Attribute Forms"),onclick:function(){K.call(V,false);A.call(V);}}],slot:"containerNode"},{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-linksBox mstrmojo-advanced",alias:"links",slot:"containerNode"}];this.addChildren(W);};mstrmojo.vi.ui.editors.AttributeLinkEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.vi.ui.editors.AttributeLinkEditor",title:mstrmojo.desc(11942,"Link Attributes"),cssClass:"mstrmojo-att-link",btnAlignment:"right",buttons:null,modal:true,visible:false,help:"link_attributes_editor.htm",attribute:null,tgtAttrs:null,tgtForms:null,docModel:null,datasetId:null,namesHash:null,removedLinks:null,preBuildRendering:function C(){var Y=this,W=this.docModel,X=function(){var Z=(W.als&&W.als.links)||{},a=[];N.keyarray(Z).forEach(function(b){if(b.indexOf(Y.attribute.did+" ")===0){Z[b].forEach(function(c){a.push({srcAttrId:b.split(" ")[0],srcFormId:b.split(" ")[1],tgtAttrId:c.split(" ")[0],tgtFormId:c.split(" ")[1]});});}});return a;},V;this.set("buttons",[M(mstrmojo.desc(1442,"OK"),function(){var g=[],a=Y.links.children,Z=function(){var h=W.controller,i=W.controller.getRefreshCallback();if(g.length>0){h.cmdMgr.execute({execute:function(){this.submit(g,i,{style:{params:{treesToRender:3}}});},urInfo:{callback:i}});}Y.close();},f=false,c,d;Y.removedLinks.forEach(function(h){c=N.copy(h.oldMeta,{act:"applyAttributeLinking",unlink:true});g.push(c);});(a||[]).forEach(function(h){if(h.old&&h.oldUpdated){c=N.copy(h.oldMeta,{act:"applyAttributeLinking",unlink:true});g.push(c);}if(!h.old||(h.old&&h.oldUpdated)){d=h.getMeta();if(!d.tgtAttrId){return ;}c=N.copy(d,{act:"applyAttributeLinking",unlink:false});g.push(c);}});R.forEach(g,function(h){if(!h.unlink){f=true;return false;}});if(!f){Z();return ;}var e={taskId:"validateDocumentLinks",msgID:W.mid,action:2,manipulationList:'{"ml":'+JSON.stringify(g)+"}"},b={success:function(h){if(h.als&&h.als.length>0){var i="";R.forEach(h.als,function(j){i+=j.al.alstmsg+"\n";});Y.illLinks=h.als;L.call(Y,i);return ;}Z();}};mstrApp.serverRequest(e,b);},true,{enabled:false}),M(mstrmojo.desc(221,"Cancel"),function(){Y.close();})]);G.call(this);V=X(this.attribute.did);if(V.length>0){V.forEach(function(Z){D.call(Y,Z);});J.call(this);}else{D.call(this);}this._super();},close:function I(){A.call(this);this.destroy();}});mstrmojo.vi.ui.editors.AttributeLinkEditor.open=function(b){var W=mstrmojo.insert(N.copy(b,{scriptClass:"mstrmojo.vi.ui.editors.AttributeLinkEditor",tgtAttrs:{},tgtForms:{},namesHash:{},removedLinks:[]})),Z=W.attribute,c=Z.did,V=W.docModel,Y=(V.als&&V.als.links)||{},X=[],a={success:function(){W.set("visible",true);W.render();}};R.forEach(Z.fs,function(d){if(d.idf){W.idFormId=d.fid;return false;}});N.keyarray(Y).forEach(function(e){var d=e.split(" ");if(d[0]===c){X.push(d[1]);}});if(R.indexOf(X,W.idFormId)===-1){X.push(W.idFormId);}W.dsMap={};W.dsTree=S.call(W);B.call(W,X,a);};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.Container","mstrmojo.desc","mstrmojo.ME.TokenInputBox","mstrmojo.mstr.EnumDSSXMLTokenTypes","mstrmojo.ME.Enum","mstrmojo._HasTooltip","mstrmojo.dom","mstrmojo.string");mstrmojo.requiresDescs(221,547,9106,9565,9566,9567,9568,11897,13542,13543,15665);var M=mstrmojo.array,S=mstrmojo.hash,I=mstrmojo.desc,O=mstrmojo.mstr.EnumDSSXMLTokenTypes,N=mstrmojo.ME.Enum.METRIC_EDIT_TYPES,L=mstrmojo.string.escape4HTMLText,E=mstrmojo.dom;var Q={VALID:0,UNKNOWN:1,VALIDATING:2,ERROR:3,AMBIGUITY:4},G={0:"valid",1:"unknown",2:"validating",3:"error",4:"ambiguity"},R={0:I(9565,"Valid Metric Formula."),1:I(9106,"Require Validation?"),2:I(9566,"Validation in Progress..."),3:I(9567,"Validation Failed with Syntax Error!"),4:I(9568,"Validation Failed with Object Ambiguity!")},T={ERROR:"-2147214845",AMBIGUITY:"-2147214846"},B={};B[T.ERROR]=Q.ERROR;B[T.AMBIGUITY]=Q.AMBIGUITY;function P(Z){if(!Z){return Q.VALID;}return B[Z]||Q.ERROR;}mstrmojo.ME.MetricEditBox=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup,mstrmojo._HasTooltip],{scriptClass:"mstrmojo.MetricEditBox",vStatus:Q.VALID,iStatus:"",showStatus:true,browseItemVisible:true,absorbAmbiguity:true,validateFunc:null,isObjectVisible:function(Z){return true;},markupString:'<div id="{@id}" class="mstrmojo-MEBox {@cssClass}" style="{@cssText}"><div class="mstrmojo-MEBox-edit"></div><div class="mstrmojo-MEBox-status {@statusCssClass}"><div class="mstrmojo-MEBox-vStatus"></div><div class="mstrmojo-MEBox-iStatus"></div></div></div>',markupSlots:{editNode:function(){return this.domNode.firstChild;},iStatusNode:function(){return this.domNode.lastChild.lastChild;},vStatusNode:function(){return this.domNode.lastChild.firstChild;},statusNode:function(){return this.domNode.lastChild;}},markupMethods:{onvStatusChange:function(){var a=this.vStatus,Z=this.vStatusNode;Z.className="mstrmojo-MEBox-vStatus "+G[a];Z.innerHTML=(this.getStatusDesc&&this.getStatusDesc(a))||R[a]||"";if(this.vStatus===Q.VALID){this.set("cValid",true);}},oniStatusChange:function(){this.iStatusNode.innerHTML=this.iStatus;}},children:[{scriptClass:"mstrmojo.ME.TokenInputBox",alias:"inputBox",slot:"editNode",renderOnScroll:false,renderBlockSize:0,bindings:{browseItemVisible:"this.parent.browseItemVisible",candidates:"this.parent.candidates"},editEmbeddedFilterToken:function(Z){var a=this.parent;if(a.editEmbeddedFilterToken){a.editEmbeddedFilterToken(Z);}}}],init:function U(Z){var a=this,b=Z.validateFunc||this.validateFunc;if(b){a.children=[{scriptClass:"mstrmojo.Button",alias:"validateBtn",slot:"statusNode",text:I(11897,"Validate"),cssClass:"mstrmojo-WebHoverButton right hoverLink",cssDisplay:"inline-block",onclick:b}].concat(this.children);}if(this._super){this._super(Z);}this.statusCssClass=this.showStatus?"":"hidden";},getSearchPattern:function Y(){return this.inputBox.getSearchPattern();},getHighlightedText:function V(a,Z){return this.inputBox.getHighlightedText(a,Z);},item2textCss:function K(Z){return{4:"m",7:"am",11:"fx",12:"a",13:"fc",43:"tr",47:"cs"}[Z.t]||"";},handleSuggestionItemSelect:function J(Z){var a=this.ambiguityDialog;if(Z){a.onItemSelect(Z);}a.close();},showDesc:true,showPath:true,ambiguityDialog:{scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-ME-ambiguityDialog",onOpen:function(){this.set("title",I(13542,"Object Ambiguity - ##").replace("##",this.ambiguousName));this.list.clearSelect();this.list.set("items",this.items);this.list.singleSelect(0);this.label.set("text",I(13543,"More than one object with the name '##' were found.").replace("##",this.ambiguousName));},children:[{scriptClass:"mstrmojo.Label",alias:"label",text:""},{scriptClass:"mstrmojo.ui.ScrollableSuggestionList",alias:"list",cssClass:"mstrmojo-ME-ambiguityList",bindings:{items:"this.parent.opener.suggestionItems"},onclick:function(Z){mstrmojo._IsList.onclick.call(this,Z);},getItemMarkup:function(c,Z){var b=this.parent.opener,a=mstrmojo.string.escape4HTMLText;var e=(b&&b.item2textCss(c))||"";var d="";if(c.path){d='<div class="mstrmojo-object-additional-info" idx="'+Z+'">'+mstrmojo.desc(16154,"From Dataset:")+" "+L(c.path)+"</div>";}else{c.standalone=true;}return'<div class="mstrmojo-object-item" idx="'+Z+'"><div class="mstrmojo-object-name '+e+'" idx="'+Z+'">'+L(c.n)+"</div>"+d+"</div>";},buildTooltip:function(Z,a){if(Z.standalone){return L(Z.path)+"> "+L(Z.n);}else{return L(Z.n)+'<div class="mstrmojo-object-additional-info">'+mstrmojo.desc(16154,"From Dataset:")+" "+L(Z.path)+"</div>";}}}],buttons:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Button mstrmojo-WebButton hot",text:I(547,"Select"),onclick:function(){var Z=this.parent.parent;Z.opener.handleSuggestionItemSelect(Z.list.selectedItem);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Button mstrmojo-WebButton",text:I(221,"Cancel"),onclick:function(){this.parent.parent.close();}}]},defaultOnTokensModify:function(){this.set("vStatus",Q.UNKNOWN);this.set("iStatus","");},postBuildRendering:function X(){this._super();this.inputBox.attachEventListener("tokensModify",this.id,"defaultOnTokensModify");this.inputBox.attachEventListener("tokensModify",this.id,"ontokensModify");},updateInputBoxItems:function H(Z){this.inputBox.set("items",Z.items);},replaceErrorToken:function C(Z){this.inputBox.replaceErrorToken(Z);},clientSideValidation:function A(f){if(!f){return ;}var b=false,d=false,a=f.items;try{b=mstrApp.rootCtrl.docCtrl.model.isMDXDataset(S.any(this.parent.parent.datasets));d=f.met==N.ADVANCED&&a[0].tp==O.SimpPrefixFun&&a[0].v==="ApplySimple";}catch(g){}if(b&&d){var Z=M.filterOne(a,function(e){return e.tp===O.DoubleQString;});var c=/(\'|\/\/|\-\-|\/\*|\*\/)/;if(Z&&c.test(Z.v)){f.vs=Q.ERROR;f.rjec=T.ERROR;f.rjed=I(15665,"MDX pass-through expression should not contain ', //, --, /*, */.");}}},handleValidation:function F(Z){if(!Z){this.set("vStatus",Q.ERROR);return ;}Z.vs=P(Z.rjec);this.set("vStatus",Z.vs);this.set("iStatus",mstrmojo.string.encodeHtmlString(Z.rjed)||"");this.updateInputBoxItems(Z);this.inputBox.focus();if(Z.vs===Q.AMBIGUITY){var j=this,g=Z.items,e=M.find(g,"sta",-1),a=g[e].v,h=function(c){j.replaceErrorToken(c);j.set("iStatus","");j.set("vStatus",Q.UNKNOWN);if(j.continueValidataion){j.continueValidataion();}else{j.set("vStatus",Q.VALID);}};var b=M.filter(Z.srfd.items,this.isObjectVisible);var i=this.parent.candidates,d=i&&i.items;if(d){M.forEach(b,function(f){var c=M.find(d,"did",f.did);if(c===-1){if(this.absorbAmbiguity){d.push(f);}}else{f.path=d[c].path;}});}if(b.length===1){h(b[0]);return ;}this.openPopup("ambiguityDialog",{zIndex:100,items:b,ambiguousName:a,onItemSelect:h});}else{if(this.postHandleValidation){this.postHandleValidation();}}},tooltip:"",useRichTooltip:true,updateTooltipConfig:function W(a){var b=a.target||E.eventTarget(a.hWin,a.e),Z=E.position(b);this.richTooltip={posType:mstrmojo.tooltip.POS_TOPLEFT,content:this.getTooltipContent(a),top:Z.y+Z.h,left:Z.x+10,cssClass:"vi-regular vi-tooltip-A"};},getTooltipContent:function(Z){return this.iStatus;},showTooltip:function D(Z,a){if(Z.target===this.iStatusNode){this._super(Z,a);}}});mstrmojo.ME.MetricEditBox.VALIDATION_STATUS=Q;mstrmojo.ME.MetricEditBox.VALIDATION_STATUS_CSS=G;mstrmojo.ME.MetricEditBox.VALIDATION_STATUS_DESC=R;}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.tabs.TabStrip","mstrmojo.vi.ui.tabs.Tab","mstrmojo.Label","mstrmojo.Button","mstrmojo.Pulldown","mstrmojo.Box","mstrmojo.dom","mstrmojo.css","mstrmojo.tooltip","mstrmojo.ME.MetricEditBox","mstrmojo.array","mstrmojo.hash","mstrmojo.mstr.EnumDSSXMLBaseFormType");var e=mstrmojo.array,N=mstrmojo.hash,M=mstrmojo.ME.MetricToken.brackets,B=mstrmojo.css,S=mstrmojo.vi.ui.tabs.Tab.ACTIONS,l=S.DELETE+S.RENAME,m=mstrmojo.ME.MetricEditBox.VALIDATION_STATUS,n=mstrmojo.ME.MetricEditBox.VALIDATION_STATUS_CSS,O=mstrmojo.ME.MetricEditBox.VALIDATION_STATUS_DESC,V=mstrmojo.mstr.EnumDSSXMLObjectTypes,D=mstrmojo.string,p="This@ID",X="45C11FA478E745FEA08D781CEA190FE5",U=mstrmojo.mstr.EnumDSSXMLBaseFormType,r=[{n:mstrmojo.desc(959,"Default"),v:U.DssXmlBaseFormReserved},{n:mstrmojo.desc(12276,"String"),v:U.DssXmlBaseFormText},{n:mstrmojo.desc(2052,"Date"),v:U.DssXmlBaseFormDate},{n:mstrmojo.desc(3434,"Number"),v:U.DssXmlBaseFormNumber}],Y=function(){var v="analytical_engine_version.htm",u=mstrApp.showHelpTopic;if(u){u(v,"upgrade");}else{window.open(mstrmojo.upgradeHelpPath()+v,"_blank");}};function H(u){return{n:u,k:u,ftk:[],vs:1,is:"",bft:U.DssXmlBaseFormReserved,bftp:U.DssXmlBaseFormReserved};}function Q(AA,AB,u,y){var w=AA.forms[AB]||{},z=AA.forms[u],v=AA.inputBox,x=AA.statusBox.pulldownBox.pulldown;if(AB!==u){w.vs=AA.vStatus;w.is=AA.iStatus;w.bft=AA.formType||x.getSelectedItem().v;w.bftp=AA.formType||x.getSelectedItem().v;w.ftk=v.items;AA.set("vStatus",m.UNKNOWN);}AA.set("vStatus",z.vs);AA.set("iStatus",z.is);AA.updateInputBoxItems({items:z.ftk});if(AA.curFormIdx!==u){AA.curFormIdx=u;AA.tabstrip.setSelectedTab(z.k);}x.set("selectedIndex",e.find(x.items,"v",z.bft));AA.raiseEvent({name:"tabSwitch",tks:z.ftk,vs:z.vs,is:z.is,bft:z.bft,bftp:z.bftp,oidx:AB,nidx:u,toNewTab:y});}function P(v){var u=v.forms[v.curFormIdx];if(u){u.ftk=v.inputBox.items;u.vs=v.vStatus;u.is=v.iStatus;}}var k=0;function b(u){k=Math.max(u.length-1,k);}function a(){k=0;}function q(u){var v="DESC"+(k?" "+k:"");k++;if(e.find(u,"n",v)>=0){return q(u);}return v;}function J(x){var w={v:M(x.n),oi:x,isNew:true},v,u;if(x.t===12){v=e.filter(x.fs,function(y){return y.obf||x.da;}).length;if(v===1){u=x.fs[0];w=N.copy({v:M(x.n)+"@"+M(u.fnm),ift:true,exv:u.fid,extp:8},w);}else{w=N.copy({v:M(x.n)+"@",ift:true},w);}}return w;}function E(w,u){w.set("enabled",!u);var x="mstrmojo-InlineWaitIcon";if(w.iconClass){w.set("iconClass",w.iconClass.replace(new RegExp(x),"")+" "+(u?x:""));}else{mstrmojo.css.toggleClass(w.domNode,x,u);}}function L(u){return u.tp===33||u.tp===37;}function F(u){return u.tp===-1;}var Z=function(AA){var y=AA.items,v=y.length,x,z,w=[],u="";w.push({v:"!",tp:33,lv:4,sta:2});for(x=0;x<v;x++){z=y[x];if((x===0&&L(z))||F(z)){continue;}if(z.isNew&&!z.oi){u+=z.v;}else{if(!D.isEmpty(u)){w.push({v:u,tp:2,lv:1});u="";}if(z.v&&z.v.indexOf(p)>=0){z.v=z.v.replace("["+p+"]",p);z.exv=X;z.extp=8;delete z.oi;}w.push(z);}}if(!D.isEmpty(u)){w.push({v:u,tp:2,lv:1});u="";}w.push({v:"",tp:-1,lv:4,sta:2});return{items:w};},f=function(w){var u=w.items||[],v=u[u.length-1];if(v&&v.tp===-1){u.pop();}if(u[0]&&L(u[0])){u.splice(0,1);}e.forEach(u,function(x){if(x.v&&x.v.indexOf(p)>=0){N.copy({extp:8,exv:X,oi:{n:"This",did:"This",t:12}},x);}});},d=function(u){if(!u){return m.VALID;}return{"-2147214845":m.ERROR,"-2147214846":m.AMBIGUITY}[u]||m.ERROR;},T=function(w){w=Z(w);var v={items:true,v:true,tp:true,lv:true,oi:true,n:true,did:true,t:true,st:true,exv:true,extp:true,asc:true,vtp:true},u={getArrItemName:function(){return"tkn";},isSerializable:function(x){return(v[x])?true:false;}};return D.json2xml("tknstrm",w,u);},G=function(w,z,y,v){var x=T(z),AA=function(AB){if(AB&&AB.tks){var AC=AB.tks;f(AC);AC.vs=d(AC.rjec);AC.tokenXML=x;if(v){v(AC);}}},u=function(AB){mstrmojo.alert(AB.message||AB.getResponseHeader&&AB.getResponseHeader("X-MSTR-TaskFailureMsg"));};mstrmojo.ME.MetricDataService.validateMetric({tokenStreamXML:x,localSymbolFolderXML:"",metricXML:"",metricId:w||"",isNew:true,objectType:12,isIDForm:y,msgID:mstrApp.getMsgID()},{success:AA,failure:u});};mstrmojo.ME.DerivedAttributeFormTab=mstrmojo.declare(mstrmojo.vi.ui.tabs.Tab,null,{scriptClass:"mstrmojo.ME.DerivedAttributeFormTab",valid:true,editable:true,postBuildRendering:function W(){if(this._super){this._super();}var u=this,v=u.lbl;v.editOnDoubleClick=this.editable;v.onTextEditComplete=function(x,w){if(u.validate(v.text)){u.titleEdited(v.text,w);}};},onclick:function j(u){var v=mstrmojo.dom.eventTarget(u.hWin,u.e);if(v===this.menuBtnNode){this.tabDeleted();}else{if(!this.isSelected){this.tabSelected();}}},validate:function(u){var w=!/[\[\]\"\\]/g.test(u);if(!w){this.lbl.set("isEditing",true);}this.set("valid",w);return w;},showErrTooltip:function t(y,w){var u=mstrmojo.dom.position(this.domNode),v=this,x=v.errTooltip;if(!x){v.errTooltip=x=new mstrmojo.Tooltip({contentNodeCssClass:"me-tooltip-content up me-err",updatePopupConfig:null});this.addDisposable(x);}x.set("top",u.y+u.h+2);x.set("left",u.x+u.w/2-w);x.set("content",'<div class="content"><span>'+y+"</span></div>");x.open();window.setTimeout(function(){x.close();},2500);},onvalidChange:function(){if(this.valid){this.hideTooltip();}else{this.showErrTooltip(mstrmojo.desc(11569,"Input contains invalid character"),95);}}});function i(x,y,z){var w=e.find(y,"k",z.k);return{scriptClass:"mstrmojo.ME.DerivedAttributeFormTab",title:z.n,draggable:false,editable:w!==0,cssClass:"mstrmojo-AEB-Tab "+(w===0?"mstrmojo-AEB-IDTab":""),getMenuActions:function(){return l;},tabSelected:function(){Q(x,x.curFormIdx,w);},titleEdited:function v(AB,AA){if(AB!==AA){if(e.find(x.forms,"n",AB)>=0){this.showErrTooltip(mstrmojo.desc(7209,"Name already exists"),69);}else{var AC=x.forms[w];AC.n=AB;x.set("dirty",true);}}},tabDeleted:function u(){var AA=x.forms.length,AD=(x.curFormIdx===AA-1)?0:x.curFormIdx,AB=x.forms.slice(0),AC=AB[w];if(AC&&AC.did){x.delForms.push({n:AC.n,did:AC.did});}AB.splice(w,1);x.curFormIdx=AD;x.set("forms",AB);Q(x,-1,AD);x.set("dirty",true);}};}mstrmojo.ME.AttributeEditBox=mstrmojo.declare(mstrmojo.ME.MetricEditBox,null,{scriptClass:"mstrmojo.ME.AttributeEditBox",markupString:'<div id="{@id}" class="mstrmojo-MEBox {@cssClass}" style="{@cssText}"><div class="mstrmojo-AEB-TabStrip"></div><div class="mstrmojo-MEBox-edit mstrmojo-AEB-edit"></div><div class="mstrmojo-AEBox-status {@statusCssClass}"></div></div>',markupSlots:{tabstripNode:function(){return this.domNode.firstChild;},editNode:function(){return this.domNode.childNodes[1];},statusNode:function(){return this.domNode.lastChild;}},markupMethods:{onvStatusChange:function(){var v=this.vStatus,z=(v===m.VALID),x=(v===m.UNKNOWN||v===m.VALIDATING),w=this.statusBox.infoBox;this.validateBtn.set("visible",x);w.set("visible",!x);if(!x){w.infoLabel.set("text",z?mstrmojo.desc(11655,"Valid formula."):mstrmojo.desc(15953,"Validation failed."));var y=n[v],u=w.infoIcon.domNode;if(!B.hasClass(y)){B.removeClass(u,[n[m.VALID],n[m.ERROR],n[m.AMBIGUITY]]);B.addClass(u,y);}}},oniStatusChange:function(){var w=this.vStatus,u=(w===m.ERROR||w===m.AMBIGUITY),v=this.statusBox.infoBox.infoIcon;v.title=u?(this.getStatusDesc&&this.getStatusDesc(w))||O[w]+" "+this.iStatus:"";}},forms:null,delForms:[],curFormIdx:0,attrid:null,absorbAmbiguity:false,init:function o(x){var y=this,AA=function(){y.validateCurrentForm();},w=[{scriptClass:"mstrmojo.vi.ui.tabs.TabStrip",alias:"tabstrip",position:"top",slot:"tabstripNode",isAlignRight:false,getTabCfg:function v(AD,AE,AC){return N.copy(i(y,AD,AE),AC);},addTab:function AB(){var AE=y.forms,AC=AE.length,AF=q(AE),AD=AE.slice(0);AD.push(H(AF));y.set("forms",AD);Q(y,y.curFormIdx,AC,true);y.set("dirty",true);},clear:function u(){e.forEach(this.children,function(AC){AC.hideTooltip();});}},{scriptClass:"mstrmojo.Button",alias:"clearBtn",slot:"tabstripNode",text:mstrmojo.desc(2827,"Clear"),cssClass:"mstrmojo-WebHoverButton mstrmojo-AEB-clearAll hoverLink",onclick:function(){y.inputBox.clearTokens([]);y.inputBox.raiseChangeEvent({type:"clear"});}},{scriptClass:"mstrmojo.Box",alias:"statusBox",slot:"statusNode",cssClass:"statusBox",children:[{scriptClass:"mstrmojo.Box",alias:"pulldownBox",cssClass:"pulldownBox",cssDisplay:"inline-block",children:[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-AEBox-pulldownLabel AEBox-item",text:mstrmojo.desc(9918,"Data Type")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"pulldown",cssClass:"mstrmojo-AEBox-pulldown AEBox-item",selectedIndex:0,items:r,onitemSelected:function(AF){var AC=y.curFormIdx,AD=y.forms,AE=AD&&AD.length>AC&&AD[AC];if(AE){if(AE.bft!==AF.v){AE.bft=AE.bftp=AF.v;y.set("dirty",true);}}}}]},{scriptClass:"mstrmojo.Box",cssClass:"helpIcon",cssDisplay:"inline-block",richTooltip:{cssClass:"vi-regular vi-tooltip-A A-center AE-tooltip",posType:mstrmojo.tooltip.POS_TOPCENTER,enableHover:true},useRichTooltip:true,tooltipCloseDelay:500,updateTooltipConfig:function z(){var AD=this.richTooltip,AC=mstrmojo.dom.position(this.domNode);AD.left=AC.x+AC.w-8;AD.top=AC.y+28;AD.content=mstrmojo.desc(16313,"Data Type options for derived attribute forms are only available for data engine version 11.1 and later.");AD.content+="<br /><div class='help-link-label' onclick='mstrmojo.ME.AttributeEditBox.AEHelpFn()'>"+mstrmojo.desc(9849,"Learn More")+"</div>";}},{scriptClass:"mstrmojo.Box",alias:"infoBox",cssClass:"infoBox",cssDisplay:"inline-block",children:[{scriptClass:"mstrmojo.Button",alias:"infoIcon",cssClass:"mstrmojo-AEBox-infoIcon AEBox-item",title:"",tooltipOpenDelay:0,useRichTooltip:true,updateTooltipConfig:function(){var AC=mstrmojo.dom.position(this.domNode);this.richTooltip={cssClass:"vi-regular A-center vi-tooltip-A",top:Math.max(AC.y+26,0),left:Math.max(AC.x+10,0),posType:mstrmojo.tooltip.POS_TOPCENTER,content:this.title};}},{scriptClass:"mstrmojo.Label",alias:"infoLabel",cssClass:"mstrmojo-AEBox-infoLabel AEBox-item"}]}]}];this.validateFunc=AA;y.children=w.concat(this.children);this._super(x);},item2textCss:function K(u){return this._super(u)||{21:"afm"}[u.t]||"";},onformsChange:function c(){var u=this.forms,v=u[this.curFormIdx].k;e.forEach(u,function(w){f({items:w.ftk});});this.tabstrip.setTabs(u,v);b(u);},selectFormTab:function A(u){Q(this,this.curFormIdx,u);},postBuildRendering:function W(){if(this._super){this._super();}this.clear();var u=this;this.inputBox.ondrop=function(y){if(!y.src.data||!y.src.data.item){return ;}var x=u.inputBox,AA=x.ctxtBuilder.itemWidgets,AB=N.copyProps(["did","n","t","fs"],y.src.data.item),AD=J(AB),v,AC,w;y.src.data=AD;mstrmojo.ListBase2.prototype.ondrop.call(this,y);var z=function(AE){return AE.t===V.Function&&!(!isNaN(AE.fdid)&&AE.fdid<0);};if(z(AD.oi)){this.insertParenthesisTokens();}if(u.ontokensModify){u.ontokensModify();}v=this.selectedIndices;if(AB.t===12&&AD.ift&&!AD.exv){for(AC in v){w=AA[AC];if(w){x.startTokenSuggestion(w);}}}x.clearSelect(true);B.removeClass(x.domNode,"unselectable");};},clear:function h(){this.curFormIdx=0;this.delForms=[];this.attrid=null;a();this.set("forms",[H("ID")]);this.inputBox.set("items",[]);this.inputBox.resetTokensCache();this.set("vStatus",m.UNKNOWN);this.set("iStatus","");this.tabstrip.clear();},validateCurrentForm:function C(v){var w=this,x=this.validateBtn,u=function(y){E(x,false);w.set("vStatus",y.vs);w.set("iStatus",y.rjed||"");w.updateInputBoxItems({items:y.items});w.statusNode.style.display="block";w.handleValidation(y);if(v){v(y.items,y.vs===m.VALID);}};w.set("vStatus",m.VALIDATING);E(x,true);G(this.attrid,{items:this.inputBox.items},w.curFormIdx===0,u);},validateAllForms:function s(w){var x=this,v=x.forms,u=0,y=function(AB){var AA=(u===0);if(AB){var z=v[u-1];z.ftk=AB.items;z.vs=AB.vs;z.is=AB.rjed||"";z.tokenXML=T({items:AB.items});if(AB.vs!==m.VALID){x.selectFormTab(u-1);x.handleValidation(AB);if(w){w(null,false);}return ;}}if(u===v.length){if(w){w(v,true);}return ;}G(x.attrid,{items:v[u++].ftk},AA,y);};P(x);y();},continueValidataion:function R(){this.validateCurrentForm();},getStatusDesc:function g(u){return{0:mstrmojo.desc(11655,"Valid Formula.")}[u];},onObjectInsert:function I(x){var y=this.inputBox,w=J(x),u=y.insertTokens([w]),v;if(x.t===12&&w.ift&&!w.exv){v=y.ctxtBuilder.itemWidgets[u];if(v){y.startTokenSuggestion(v);}}}});mstrmojo.ME.AttributeEditBox.preprocessTokenStream=f;mstrmojo.ME.AttributeEditBox.postprocessTokenStream=Z;mstrmojo.ME.AttributeEditBox.mapErrorCode=d;mstrmojo.ME.AttributeEditBox.getTokenStreamXML=T;mstrmojo.ME.AttributeEditBox.validateSyntax=G;mstrmojo.ME.AttributeEditBox.prepareInsertToken=J;mstrmojo.ME.AttributeEditBox.AEHelpFn=Y;}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.css","mstrmojo.expr","mstrmojo.ValidationTextBox","mstrmojo.HBox","mstrmojo.ui.menus.EditorConfig","mstrmojo.mstr.EnumFunction","mstrmojo.DropDownList","mstrmojo.ui.Pulldown","mstrmojo.SearchablePulldown","mstrmojo.ButtonList","mstrmojo.Box","mstrmojo.Label","mstrmojo.RadioList","mstrmojo.CheckList","mstrmojo.EditableLabel","mstrmojo.CheckBox","mstrmojo._FormatDefinition","mstrmojo.num","mstrmojo.locales","mstrmojo.vi.models.VIComponentMap","mstrmojo.func","mstrmojo.dom","mstrmojo.ME.AttributeEditBox","mstrmojo.ME.MetricToken","mstrmojo.string","mstrmojo.dom","mstrmojo.models.datasets.DataInterface","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.vi.ui.editors.ObjectPicker","mstrmojo.vi.ui.editors.AttributeLinkEditor","mstrmojo.vi.ui.NumberFormatter","mstrmojo.mstr.EnumDSSXMLBaseFormType","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.mstr.EnumDSSXMLObjectSubTypes","mstrmojo.mstr.EnumDSSConsolidationType");mstrmojo.requiresDescs(1442,1885,1886,2022,2122,2123,2124,2125,2126,2127,2128,2129,2130,2131,2132,3993,4564,11494,11495,11496,11497,14612);var p=mstrmojo.mstr.EnumFunction,Z=mstrmojo.hash,t=mstrmojo.array,D=mstrmojo.css,X=mstrmojo.dom,w=mstrmojo.Button.newWebButton,U=mstrmojo.ME.MetricToken.brackets,AC=mstrmojo.ME.MetricToken.argDelimiter,V=mstrmojo._FormatDefinition,r=mstrmojo.models.datasets.DataInterface,K=mstrmojo.vi.models.VIComponentMap.TYPES,W=mstrmojo.chart.model.enums.EnumDSSObjectType,q=mstrmojo.mstr.EnumDSSXMLBaseFormType,AP=mstrmojo.mstr.EnumDSSXMLObjectTypes,N=mstrmojo.mstr.EnumDSSXMLObjectSubTypes,AA=mstrmojo.mstr.EnumDSSConsolidationType;var a={SUM:mstrmojo.desc(2131,"Sum"),ADD:mstrmojo.desc(6017,"Add"),AVG:mstrmojo.desc(2122,"Average"),MAX:mstrmojo.desc(2125,"Maximum"),GST:mstrmojo.desc(5869,"Greatest"),MIN:mstrmojo.desc(2127,"Minimum"),LST:mstrmojo.desc(5868,"Least"),CNT:mstrmojo.desc(2123,"Count"),MTP:mstrmojo.desc(5418,"Multiply"),STD:mstrmojo.desc(2130,"Standard Deviation"),PTD:mstrmojo.desc(11494,"Population Standard Deviation")},f={SUM:{n:a.SUM,t:p.FunctionSum},ADD:{n:a.ADD,t:p.FunctionPlus},AVG:{n:a.AVG,t:p.FunctionAvg},MAX:{n:a.MAX,t:p.FunctionMax},GST:{n:a.GST,t:p.FunctionGreatest},MIN:{n:a.MIN,t:p.FunctionMin},LST:{n:a.LST,t:p.FunctionLeast},TMS:{n:a.MTP,t:p.FunctionTimes},CNT:{n:a.CNT,t:p.FunctionCount},GEM:{n:mstrmojo.desc(2124,"Geometric Mean"),t:p.FunctionGeomean},MED:{n:mstrmojo.desc(2126,"Median"),t:p.FunctionMedian},MOD:{n:mstrmojo.desc(2128,"Mode"),t:p.FunctionMode},PDT:{n:mstrmojo.desc(2129,"Product"),t:p.FunctionProduct},STD:{n:mstrmojo.desc(2130,"Standard Deviation"),t:p.FunctionStdev},VAR:{n:mstrmojo.desc(2132,"Variance"),t:p.FunctionVar}},b=[{n:a.SUM,t:p.FunctionOLAPSum},{n:a.AVG,t:p.FunctionOLAPAvg},{n:a.MIN,t:p.FunctionOLAPMin},{n:a.MAX,t:p.FunctionOLAPMax},{n:a.CNT,t:p.FunctionOLAPCount}],AN=[{n:a.SUM,t:p.FunctionOLAPSum},{n:a.AVG,t:p.FunctionOLAPAvg},{n:a.MIN,t:p.FunctionOLAPMin},{n:a.MAX,t:p.FunctionOLAPMax},{n:a.CNT,t:p.FunctionOLAPCount}],M=[{n:mstrmojo.desc(1058,"Previous"),t:p.FunctionLag},{n:mstrmojo.desc(1059,"Next"),t:p.FunctionLead},{n:mstrmojo.desc(4046,"First"),t:p.FunctionFirst},{n:mstrmojo.desc(4049,"Last"),t:p.FunctionLast}];var x={YEAR:"Year",QUARTER:"Quarter",CONCAT:"Concat",QUARTERSTARTDATE:"QuarterStartDate",MONTH:"Month",TOSTRING:"ToString",MONTHSTARTDATE:"MonthStartDate",WEEK:"Week",WEEKSTARTDATE:"WeekStartDate",DAYOFMONTH:"DayOfMonth",DAYOFWEEK:"DayOfWeek",DAYOFYEAR:"DayOfYear"};var AG={};AG[x.YEAR]="6F7DF5F8449111D5BEA300B0D01A55EF";AG[x.QUARTER]="6F7DF5F7449111D5BEA300B0D01A55EF";AG[x.CONCAT]="6F7DF5FF449111D5BEA300B0D01A55EF";AG[x.QUARTERSTARTDATE]="59E10CE2ADDD4A6DAC2416A72999A9ED";AG[x.MONTH]="6F7DF5F6449111D5BEA300B0D01A55EF";AG[x.TOSTRING]="D1ED29645DEC4DBF99E8E09ED939074B";AG[x.MONTHSTARTDATE]="7C63D4E70B2741C3A5B54A2EFD40961B";AG[x.WEEK]="6F7DF5F5449111D5BEA300B0D01A55EF";AG[x.WEEKSTARTDATE]="44681336D0DB4E43AC333FFB3CC4400D";AG[x.DAYOFMONTH]="6F7DF5F2449111D5BEA300B0D01A55EF";AG[x.DAYOFWEEK]="6F7DF5F3449111D5BEA300B0D01A55EF";AG[x.DAYOFYEAR]="6F7DF5F4449111D5BEA300B0D01A55EF";var Q="@form";function c(AR){var AT=8,AU=1,AQ=t.find(AR.fs,"idf",true);if(AQ===-1){return null;}var AS=AR.fs[AQ];return((AR.da||AS.obf)&&(AS.bftp===AT||AS.bftp===AU))?AS:null;}var AM={Year:{ID:[x.YEAR,"(",Q,")"]},Quarter:{ID:[x.YEAR,"(",Q,") * 10 + ",x.QUARTER,"(",Q,")"],DESC:[x.CONCAT,'("Q"',AC,x.QUARTER,"(",Q,")",AC,' ", "',AC,x.YEAR,"(",Q,"))"],DATE:[x.QUARTERSTARTDATE,"(",Q,")"]},QuarterOfYear:{ID:[x.QUARTER,"(",Q,")"],DESC:[x.CONCAT,'("Q"',AC,"This@ID)"]},Month:{ID:[x.YEAR,"(",Q,") * 100 + ",x.MONTH,"(",Q,")"],DESC:[x.TOSTRING,'<Pattern="mmm yyyy">(',Q,")"],DATE:[x.MONTHSTARTDATE,"(",Q,")"]},MonthOfYear:{ID:[x.MONTH,"(",Q,")"],DESC:[x.TOSTRING,'<Pattern="mmmm">(',Q,")"]},Week:{ID:[x.YEAR,"(",Q,") * 100 + ",x.WEEK,"(",Q,")"],DESC:[x.CONCAT,'("W"',AC,x.WEEK,"(",Q,")",AC,' ", "',AC,x.YEAR,"(",Q,"))"],DATE:[x.WEEKSTARTDATE,"(",Q,")"]},WeekOfYear:{ID:[x.WEEK,"(",Q,")"]},DayOfMonth:{ID:[x.DAYOFMONTH,"(",Q,")"]},DayOfWeek:{ID:[x.DAYOFWEEK,"(",Q,")"],DESC:[x.TOSTRING,'<Pattern="ddd">(',Q,")"]},DayOfYear:{ID:[x.DAYOFYEAR,"(",Q,")"]}};function i(AS,AU,AT,AQ){return{scriptClass:"mstrmojo.ui.Pulldown",isHostedWithin:false,items:AS,selectedIndex:AU,onitemSelected:function AR(AV){var AW=this.parent;while(!AW.data||!AW.data[AT]){AW=AW.parent;}AW.data.set(AT,AQ?AQ(AV):AV.v);}};}function y(AS,AR,AQ){return{scriptClass:"mstrmojo.Box",cssClass:"breakByBox",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13903,"Break by:"),cssClass:"menu-info-text"},Z.copy(AQ,i(AS,AR,"breakBy",function(AT){return{id:AT.did,type:AT.t,dmy:AT.dmy};}))]};}function AK(AT){var AU=AT.metrics,AV=AT.propName,AS=AT.optionValueField||"id",AQ=t.find(AU,AS,AT.value),AW=function AW(AY){var AX=this.parent;while(!AX.data||!AX.data.hasOwnProperty(AV)){AX=AX.parent;}AX.data.set(AV,AY?{id:AY[AS],type:4}:{cst:this.text});};return{scriptClass:"mstrmojo.ui.SearchablePulldown",isHostedWithin:false,cssClass:"Calculation-PullDown",items:AU,selectedIndex:AQ,useRichTooltip:true,bindings:AT.bindings,valid:true,allowCustomText:true,allowEmptyText:true,allowHTML:false,onvalidChange:function AR(){mstrmojo.css.toggleClass(this.domNode,"invalid",!this.valid);if(this.hasRendered){this.hideTooltip();this.showTooltip();}},updateTooltipConfig:function(){if(this.valid){this.richTooltip=null;return ;}this.richTooltip={posType:mstrmojo.tooltip.POS_BOTTOMLEFT,cssClass:"vi-warning vi-tooltip-C vi-calculation-warning",left:this.domNode.offsetWidth+12,top:this.domNode.offsetHeight+5,refNode:this.domNode,content:mstrmojo.desc(13819,"Invalid input")};},onitemSelected:AW,onTextEditComplete:function(){AW.call(this,this.items[this.selectedIndex]);},onPopupWidgetOpened:function(){this.set("valid",true);},postkeyup:AT.postkeyup};}function T(AT,AS,AR){if(AT&&AT.datap){var AQ=t.filterOne(AT.datap,function(AV){return AV.tbid===AS;}),AU=AQ&&AQ.maps.amps;return t.filterOne(AU,function(AV){return AR===AV.aimp.atid;});}return null;}function l(AQ,AU){var AS=t.filterOne(AQ&&AQ.afmps,function(AV){return AV.fmid===AU;}),AT=AS&&(AS.sqc?AS:AS.col.oi),AR;if(AT&&AT.sqc){AR={did:AT.sqc.id,n:mstrmojo.string.decodeHtmlString(AT.cln),coldtp:AT.sqc.dt.tp,georole:AT.geo,timerole:AT.tim,der:AT.sqc.der};}else{if(AT){AR={did:AT.did,n:mstrmojo.string.decodeHtmlString(AT.def.cln),coldtp:AT.def.dt.tp,georole:AS.geo,timerole:AT.def.dicl.time,der:AT.def.dicl.der};}}return AR;}function C(AS,AR,AU){var AT={success:function(AV){if(AV&&AV.msgid){mstrApp.serverRequest({taskId:"qBuilder.GetReportXDADefinition",msgid:AV.msgid,bindingflag:2,previewflag:261,browsetype:5},AU);}},failure:function(AV){mstrApp.onerror(AV);}};var AQ=!!(mstrConfig.resolveOnly||mstrApp.isAppStatePause&&mstrApp.isAppStatePause());mstrApp.serverRequest({taskId:"duplicateReportInstance",datasetID:AR,messageID:AS,skipRebuild:AQ},AT);}function I(AV,AW,AT){var AR=AV.srcTableId,AY=AV.tgtTableId,AQ,AU,AS=function(Ac,Ab){var Ae="<mpcs><mpc ",Aa,Ad;for(Aa in Ab){Ad=Ab[Aa];Ae+='$ACT="$VAL" '.replace("$ACT",Aa).replace("$VAL",Ad);}Ae+="/></mpcs>";return{act:"changeEMMAMapping",tbid:Ac,dsid:AV.dsid,mapping:Ae};},AX=function(){var Aa=[],Ad={},Ab,Ac;if(!AQ||!AU){return ;}Ad[AR]={};Ad[AY]={};t.forEach(AQ.afmps,function(Ah){var Af=t.find(AU.afmps,"fmid",Ah.fmid),Ai,Ag,Ae;if(Af>=0){Ab=l(AQ,Ah.fmid);Ac=l(AU,Ah.fmid);if(Ab.georole!==Ac.georole){Ae=(Ab.georole===0)?AR:AY;Ai=(Ab.georole===0)?Ab.did:Ac.did;Ag=Ab.georole||Ac.georole;Ad[Ae][Ai]=Z.copy({did:Ai,georole:Ag},Ad[Ae][Ai]);}if(Ab.timerole!==Ac.timerole){Ae=(Ab.timerole===0)?AR:AY;Ai=(Ab.timerole===0)?Ab.did:Ac.did;Ag=Ab.timerole||Ac.timerole;Ad[Ae][Ai]=Z.copy({did:Ai,timerole:Ag},Ad[Ae][Ai]);}if(Ab.der!==Ac.der){Ag=Ab.der|Ac.der;Ad[AR][Ab.did]=Z.copy({did:Ab.did,drvflg:Ag},Ad[AR][Ab.did]);Ad[AY][Ac.did]=Z.copy({did:Ac.did,drvflg:Ag},Ad[AY][Ac.did]);}}});Z.forEach(Ad,function(Ae,Af){Z.forEach(Ae,function(Ag){Aa.push(AS(Af,Ag));});});Ab=l(AQ,AQ.afmps[0].fmid);Aa.push(AS(AR,{did:Ab.did,oid:AU.aimp.atid}));if(AT){AT(Aa);}},AZ=function(Ac){var Ad={success:function(){AX();}},Ab,Aa;AQ=T(Ac,AR,AV.srcId);AU=T(Ac,AY,AV.tgtId);Ab=l(AQ,AQ.afmps[0].fmid);Aa=[AS(AR,{did:Ab.did,oid:AU.aimp.atid,fg:1})];AW.getDataService().submitUpdates(Aa,Ad);};C(AW.mid,AV.dsid,{success:AZ});}function Y(AV,AS,AR,AW){var AQ=0,AU=[],AT=function(AX){var AY=AR[AQ-1];if(AX&&AX.tks&&AY){AU.push({fid:AY.fid,fnm:AY.fnm,ftk:AX.tks.items});}if(AQ===AR.length){AW(AU);return ;}AY=AR[AQ++];mstrmojo.ME.MetricDataService.validateMetric({metricId:AS,formID:AY.fid,objectType:12,tokenStreamXML:"",metricXML:"",msgID:AV},{success:AT});};AT();}function AD(AQ,AR){return{v:U(AQ.n)+"@"+U(AR.fnm),tp:275,lv:1,exv:AR.fid,extp:8,oi:{did:AQ.did,t:AQ.t,n:AQ.n}};}function H(AR){var AT=(AR.t===AP.Filter||AR.t===AP.Consolidation),AS=(AR.t===AP.Attribute&&AR.de),AQ=(AR.t===AP.Consolidation&&AR.st===N.ConsolidationManaged);return !!(AT&&!AQ||AS);}mstrmojo.vi.ui.DatasetUnitMenuUtils=mstrmojo.provide("mstrmojo.vi.ui.DatasetUnitMenuUtils",{getAvailableShortcutMetricFunctionsGroup:function AJ(AQ){return{"12":[[f.AVG,f.CNT,f.MAX,f.MIN,f.STD,f.SUM,f.VAR]],"4":[[f.SUM,f.AVG,f.MIN,f.MAX,f.CNT],[f.GEM,f.MED,f.MOD,f.PDT,f.STD,f.VAR]]}[AQ.t];},isAmongFunctions:function B(AR,AQ){return AQ.some(function(AS){return AS.some(function(AT){return AT.t===AR;});});},getMultiSelectionShortcutMetricFunctions:function J(AQ){var AR=true;t.forEach(AQ,function(AS){if(4!==AS.t){AR=false;return false;}return true;});return AR?[f.ADD,f.AVG,f.GST,f.LST,f.TMS]:[];},getRelativeReferenceMenu:function e(AU,AS,AX,AQ){var AT=0,AR=M[AT],AW=0,AV=AX&&AX[AW];return new mstrmojo.ui.menus.EditorConfig({data:{item:AU,relativeRef:AR,breakBy:AV},cssClass:"RelativeReference-MenuEditor",contents:[{scriptClass:"mstrmojo.Box",cssClass:"funcBox",children:[{scriptClass:"mstrmojo.Label",visible:AS&&AS.length,text:AS,cssClass:"menu-info-text"},Z.copy({cssClass:"RelativeReferencePullDown"},i(M,AT,"relativeRef",function(AY){return AY.t;}))]},y(AX,AW,{cssClass:"RelativeReferencePullDown"})],fnOk:function(AY){return AQ(AY.item,AY.relativeRef,[AY.breakBy]);}});},getMovingTotalMenu:function A(Aa,AU,AW){var Ab=1,AT=AN[Ab].t,AV=1,AR=mstrmojo.desc(13289,"Starting previous##rows").split("##"),AZ=0,AS=AU&&AU[AZ];return new mstrmojo.ui.menus.EditorConfig({cssClass:"MovingTotal-MenuEditor",data:{item:Aa,funcType:AT,windowSize:AV,breakBy:AS},contents:[Z.copy({cssClass:"MovingTotalPullDown"},i(AN,Ab,"funcType",function(Ac){return Ac.t;})),{alias:"winSzBox",scriptClass:"mstrmojo.HBox",children:[{scriptClass:"mstrmojo.Label",cssClass:"WinSzPrefix menu-info-text",text:AR[0]},{alias:"winSz",scriptClass:"mstrmojo.ValidationTextBox",required:true,dtp:mstrmojo.expr.DTP.INTEGER,constraints:{trigger:mstrmojo.validation.TRIGGER.ALL,min:1},postCreate:function AY(){this.set("value",AV);},_ontooltipover:function(){var Ac=mstrmojo.all[this.id];Ac._hovered=true;Ac.showTooltip();},_ontooltipout:function(){var Ac=mstrmojo.all[this.id];Ac._hovered=false;Ac.hideTooltip();},useRichTooltip:true,tooltipOpenDelay:0,onInvalid:function(){var Ac=this.validationStatus.msg,Ad=!(this.richTooltip&&Ac===this.richTooltip.content);this.richTooltip={posType:mstrmojo.tooltip.POS_BOTTOMLEFT,cssClass:"vi-warning vi-tooltip-V",top:-5,refNode:this.domNode,content:Ac};if(this._hovered&&Ad){this.hideTooltip();this.showTooltip();}},onValid:function(){this.richTooltip=null;this.hideTooltip();},postvalueChange:function AX(){var Ac=this.isValid();this.parent.parent.popupConfig.data.set("windowSize",Ac?parseInt(this.value,10):0);}},{scriptClass:"mstrmojo.Label",cssClass:"WinSzSuffix menu-info-text",text:AR[1]}]},y(AU,AZ,{cssClass:"MovingTotalPullDown BreakByBox"})],bindings:{okEnabled:function(){return !!this.data.windowSize;}},fnOk:function AQ(Ac){if(AW){AW(Aa,Ac.funcType,Ac.windowSize,[Ac.breakBy]);}}});},getRunningTotalMenu:function AI(AT,AW,AR){var AS=0,AQ=b[AS].t,AV=0,AU=AW&&AW[AV];return new mstrmojo.ui.menus.EditorConfig({data:{item:AT,func:AQ,breakBy:AU},cssClass:"RunningTotal-MenuEditor",contents:[Z.copy({cssClass:"RunningTotalPullDown"},i(b,AS,"func",function(AX){return AX.t;})),y(AW,AV,{cssClass:"RunningTotalPullDown BreakByBox"})],fnOk:function(AX){return AR(AX.item,AX.func,[AX.breakBy]);}});},getRankMetricEditor:function z(AU,AX,AS){var AQ=[{n:mstrmojo.desc(1886,"Descending"),v:"0"},{n:mstrmojo.desc(1885,"Ascending"),v:"-1"}],AR=0,AT=AQ[AR].v,AW=0,AV=AX&&AX[AW];return new mstrmojo.ui.menus.EditorConfig({data:{item:AU,order:AT,breakBy:AV},cssClass:"NewRankMetric-MenuEditor",contents:[{scriptClass:"mstrmojo.Box",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(14612,"Sort:"),cssClass:"menu-info-text"},Z.copy({cssClass:"NewRankMetricPullDown"},i(AQ,AR,"order"))]},y(AX,AW,{cssClass:"NewRankMetricPullDown"})],fnOk:function(AY){return AS(AY.item,AY.order,[AY.breakBy]);}});},insertAddUnitToFilterMenu:function G(AV,AR,AQ){var AT=this,AS=mstrmojo.desc(2022,"Add to Filter"),AU=t.ensureArray(AQ).filter(function(AW){return AT.isValidAddToFP(AR,AW);});if(AU.length>0){AV.addMenuItem(AS,"",function(){AR.addFilterStackSelectors(AU);});}else{AV.addDisabledMenuItem(AS,"");}},isValidAddToFP:function O(AR,AW,AY){var AS=AR.controller.view.builder,AU=AS.getLayoutVIMap(AR.getCurrentLayoutKey()),AV=AU.getComponent(K.FILTER_STACK),AX=true;if(!AY){AX=(!AV||t.find(AV.getFilterDefinitions(),"srcid",AW.did)===-1);}if(AX&&AW.lock){var AT=AW.fs||[],AQ;AX=false;for(AQ=0;AQ<AT.length;AQ++){if(AT[AQ].iidx){AX=true;break;}}}return AX;},renameItem:function s(AV,AY,AR,AT){var AU=AV.mstrmojoId,AX=mstrmojo.dom.findWidget(AV);AT=AT||{};if(!AU){var AW=mstrmojo.insert({scriptClass:"mstrmojo.EditableLabel",editOnClick:false,editOnTwoClicks:true,text:AY.n,title:AY.dsc||"",allowEmptyText:AT.allowEmptyText,allowTrimming:AT.allowTrimming||false,cssClass:AT.cssClass||"",placeholder:AV,onTextEditComplete:function AQ(AZ){if(AZ){return AR(this);}},onmousedown:function AS(AZ){if(this.isEditing){AZ.cancel();}}});if(AX&&AX.draggable){AW.parent=AX;}AW.render();AU=AW.id;}mstrmojo.all[AU].set("isEditing",true);return mstrmojo.all[AU];},getMultipleMetricsCalculationMenus:function k(AX,AQ,Aa){var AW=new mstrmojo.ui.menus.MenuConfig(),Ac=mstrmojo.vi.ui.DatasetUnitMenuUtils.getMultiSelectionShortcutMetricFunctions(AX),AU=function(Ae,Af,Ad){return{dsid:AQ,funcType:Af,funcType2:Ad,items:Ae};};AW.useTooltip=true;Ac.forEach(function(Ad){AW.addMenuItem(Ad.n,"",function(){Aa(AU(AX,Ad.t));});});if(AX.length===2){var AV=mstrmojo.mstr.EnumFunction,AT=AV.FunctionDivide,AR=AV.FunctionMinus,AZ=AX[0],AY=AX[1],Ab=function(Ah,Af,Ad,Ag,Ae){AW.addMenuItem(Ah,"",function(){Aa(AU([Af,Ad],Ag,Ae));});},AS=[{n:function(Ae,Ad){return Ae.n+"/"+Ad.n;},fn:AT},{n:function(Ae,Ad){return Ae.n+"-"+Ad.n;},fn:AR},{n:function(Ae,Ad){return"("+Ae.n+"-"+Ad.n+")/"+Ad.n;},fn:AR,fn2:AT}];AS.forEach(function(Ad){AW.addSeparator();Ab(Ad.n(AZ,AY),AZ,AY,Ad.fn,Ad.fn2);Ab(Ad.n(AY,AZ),AY,AZ,Ad.fn,Ad.fn2);});}return AW;},getCalculationMetricEditor:function L(AY,AZ,AX){var AS=[{n:"",css:"operator-plus",funcType:p.FunctionPlus},{n:"",css:"operator-minus",funcType:p.FunctionMinus},{n:"",css:"operator-multiply",funcType:p.FunctionTimes},{n:"",css:"operator-divide",funcType:p.FunctionDivide},{n:!mstrApp.isWSStyling?"%":"",css:"operator-percent-diff",funcType:p.FunctionMinus,funcType2:p.FunctionDivide}],AT={m1:AZ.did,m2:AY[0].did,operator:p.FunctionPlus,u1:{id:AZ.did,type:4},u2:null},AR=function(Aa){return{}.hasOwnProperty.call(Aa,"cst");},AW=function(Aa){return typeof Aa==="string"&&!!Aa.length&&!isNaN(Number(Aa));};var AQ="this.parent.popupConfig.valid || this.selectedIndex !== -1 || (!!this.selectedNode && this.selectedNode.innerHTML.length === 0)",AV=function AV(){var Aa=this.parent.popupConfig;if(Aa){Aa.set("okEnabled",this[this.editableSlot].innerHTML.length!==0);}};return new mstrmojo.ui.menus.EditorConfig({cssClass:"Calculation-MenuEditor",contents:[AK({metrics:AY,value:AT.m1,propName:"u1",optionValueField:"did",bindings:{valid:AQ},postkeyup:AV}),{scriptClass:"mstrmojo.ButtonListHoriz",items:AS,selectedIndex:0,postselectionChange:function AU(){this.parent.data.set("operator",this.selectedItem.funcType);this.parent.data.set("operator2",this.selectedItem.funcType2);}},AK({metrics:AY,value:null,propName:"u2",optionValueField:"did",bindings:{valid:AQ},postkeyup:AV})],data:AT,okEnabled:false,bindings:{valid:function(){var Ac=this.data.u1,Ab=this.data.u2,Ad=this.data.operator;if(!Ac||!Ab||!Ad){return false;}var Aa=!(AR(Ac)&&AR(Ab))&&(!AR(Ac)||AW(Ac.cst))&&(!AR(Ab)||AW(Ab.cst));this.set("okEnabled",Aa);return Aa;}},fnOk:function(Aa){return AX(Aa.u1,Aa.u2,Aa.operator,Aa.operator2);}});},getCfgForAddUnitFromAllObject:function(AQ,AR){var AS=null,AT=null,AU=[],AV=function(AW,AX){if(!AX){return false;}return t.find((AX.att||[]).concat(AX.mx||[]),"did",AW.did)>-1;};Z.forEach(AR,function(AX,AW){if(AX.idd){AS=AW;AT=AX;return false;}return true;});if(!AS){AS="$GUID_141";AU.push({act:"createDataset",mgo:true,prm:true,name:mstrApp.projectName,idd:true,newObjectIds:[AS]});}t.forEach(AQ,function(AW){if(!AV(AW,AT)){AU.push({act:"addUnitToDataset",dsid:AS,unitId:AW.did,unitType:AW.t});}});return{actions:AU,dsid:AS};},getAggregateByMenu:function o(AV,AT){var AR=new mstrmojo.ui.menus.MenuConfig(),AS=function(AZ,AY){var Ab,Aa;if(AY){var AX=AZ.mexp.args[0];Ab=AX.did;Aa=AX.t;}else{Ab=AZ.did;Aa=AZ.t;}return{did:Ab,t:Aa};},AQ=this.getAvailableShortcutMetricFunctionsGroup(AV),AW=AV.mexp?AV.mexp.ft:null,AU=AV.mexp&&this.isAmongFunctions(AW,AQ);AQ.forEach(function(AX,AY){if(AY!==0){AR.addSeparator();}AX.forEach(function(AZ){AR.addMenuItem(AZ.n,"",function(){AT(AS(AV,AU),AZ.t);});});});return AR;},showObjectPicker:function n(AR,AQ){var AS="object_picker";return function(){var AT=mstrmojo.all[AS];if(!AT){AT=new mstrmojo.vi.ui.editors.ObjectPicker({id:AS});if(AQ){AT.supportedTypes=t.hash(AQ);AT.ob.browsableTypes="8,"+AQ.join(",");}AT.render();}else{if(AQ){AT.supportedTypes=t.hash(AQ);AT.ob.browsableTypes="8,"+AQ.join(",");}AT.browse();}AT.OKFn=AR||mstrmojo.emptyFn;AT.open();};},getObjectPicker:function n(){var AQ="object_picker";return mstrmojo.all[AQ];},generateNumberFormat:function v(AV){var AQ=V.DefaultFormat.FormattingNumber,AR=V.NumberFormatCategory,AT=AV||{},AS=AT.nct,AU=AS===AR.General&&AT.nfs==="General";return{category:(AS===undefined||AU)?AR.Automatic:AS,decimalPlaces:AT.ndp===undefined?2:AT.ndp,thousandSeparator:AT.nth===undefined?parseInt(AQ.ThousandSeparator,10):(AT.nth?-1:0),currencySymbol:AT.ncs||AQ.CurrencySymbol,currencyPosition:AT.ncp||AQ.CurrencyPosition,format:AT.nfs||"",negativeNumbers:AT.nnn||AQ.NegativeNumbers};},getNumberFormatEditor:function AB(AT,AS,AR){var AQ=this.generateNumberFormat(AS),AU=Z.clone(AQ),AW=Z.clone(AQ);return new mstrmojo.ui.menus.EditorConfig({data:AU,bindings:{okEnabled:function(){return !(this.data.category===AW.category&&this.data.format===AW.format);}},cssClass:"NumberFormat-MenuEditor",contents:[{scriptClass:"mstrmojo.vi.ui.NumberFormatter",formatValue:AQ,myData:AU,oldData:AW,adjustAfterCategoryChange:function(){this.parent.adjustCornersForPopupOverflow();}}],fnOk:function AV(AX){if(!(AX.category===AW.category&&AX.format===AW.format)){return AR(AX,AW);}}});},getHighlightElementHandler:function(AS,AR,AQ){return function(){D.toggleClass(AR,AQ||"open",AS);};},getConfDataTypeMenuCfg:function AF(AQ,Al,Ad,Az){var Au="ToString",Ak="ToNumber",Ai="ToDateTime",Ac="keepOriginal",AT="Default",Av={ToString:q.DssXmlBaseFormText,ToNumber:q.DssXmlBaseFormNumber,ToDateTime:q.DssXmlBaseFormDate},AY={ToString:"D1ED29645DEC4DBF99E8E09ED939074B",ToNumber:"399C3EC1041643F1ACE8F2A92B1C1F2F",ToDateTime:"0A558C7295DE42DAA8C5594F1724563F"},AW="_pattern",Ax="_func",Ag="_bft",A2="_state",A0={UNCHANGED:0,TO_CREATE:1,TO_UPDATE:2},AV={n:"Default",v:"Default"},As=[{n:"MM-DD-Year",v:"MM-DD-Year"},{n:"MM/DD/Year",v:"MM/DD/Year"},{n:"DD-MM-Year",v:"DD-MM-Year"},{n:"DD/mm/Year",v:"DD/mm/Year"},AV],AS=[{n:mstrmojo.desc(13772,"Keep Original"),v:Ac},{n:mstrmojo.desc(12276,"String"),v:Au},{n:mstrmojo.desc(2052,"Date"),v:Ai},{n:mstrmojo.desc(3434,"Number"),v:Ak}];if(mstrApp&&mstrApp.showMultiDataType){AS=[{n:mstrmojo.desc(13772,"Keep Original"),v:Ac},{isSeparator:true,cls:"separator"},{n:mstrmojo.desc(3434,"Number"),v:Ak,bft:q.DssXmlBaseFormNumber},{n:mstrmojo.desc(9920,"Big Decimal"),v:Ak,bft:q.DssXmlBaseFormBigDecimal},{isSeparator:true,cls:"separator"},{n:mstrmojo.desc(2052,"Date"),v:Ai,bft:q.DssXmlBaseFormDate},{n:mstrmojo.desc(9919,"DateTime"),v:Ai,bft:q.DssXmlBaseFormDateTime},{n:mstrmojo.desc(2170,"Time"),v:Ai,bft:q.DssXmlBaseFormTime},{isSeparator:true,cls:"separator"},{n:mstrmojo.desc(3544,"Text"),v:Au,bft:q.DssXmlBaseFormText},{n:mstrmojo.desc(9921,"HTML Tag"),v:Au,bft:q.DssXmlBaseFormHTMLTag},{n:mstrmojo.desc(8984,"Phone Number"),v:Au,bft:q.DssXmlBaseFormPhoneNumber},{n:mstrmojo.desc(4530,"Symbol"),v:Au,bft:q.DssXmlBaseFormSymbol},{n:mstrmojo.desc(9922,"URL"),v:Au,bft:q.DssXmlBaseFormUrl},{n:mstrmojo.desc(4699,"Email"),v:Au,bft:q.DssXmlBaseFormEmail}];}var Ab=Z.clone(AS).slice(1),Aj=Al.fs.filter(function(A4){return Al.da||A4.obf;}),A3=Aj.length>1,Af=Aj.length>5,AX=false,At=false,Am=[],Ar=[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13773,"Select Data Type for New Attribute:"),cssClass:"menu-info-text menu-header-text"}],A1={okEnabled:false},Aw=function(){var A4=false;Aj.forEach(function(A5){A4=A4||(A1[A5.fnm+Ax+A2]!==A0.UNCHANGED)||(A1[A5.fnm+AW+A2]!==A0.UNCHANGED);});return A4;},An=function(A6,A5){var A4=0;if(A6.da){t.forEach([Au,Ai,Ak],function(A9,A7){var A8=new RegExp("^\\s*"+A9+"\\s*(<.*>)?\\s*\\((.+)\\)\\s*$","i").exec(A5.f);if(A8&&A8[2]){A4=A7+1;return false;}});}return A4;},Aq=function(A6,A5){var A4=0;if(A6.da){var A7=A5&&A5.bftp;t.forEach(AS,function(A9,A8){if(A9.bft===A7){A4=A8;return false;}});}return A4;},Ap=function(A6,A5){var A7=AT;if(Al.da){var A4=new RegExp("^\\s*"+A5+'\\s*<\\s*Pattern\\s*=\\s*"(.+)"\\s*>.*$',"i").exec(A6.f);if(!mstrmojo.string.isEmpty(A4&&A4[1])){A7=A4[1];}}return A7;},Ao=function(){return Af?this.parent.parent.parent:(A3?this.parent.parent:this.parent);},Ah=function(A4){if(Af){A4.formList.updateScrollbars();}},AU=function(BB,BC,BA){var A4=BC.fnm,A7=Af?BB.formList[BC.fnm+AW]:BB[BC.fnm+AW],A8=A3?A7.children[1]:A7,A9=A1[A4+Ax],A6=AX&&(A9===Ai||A9===Au),A5=A7.visible!==A6;if(A5){A7.set("visible",A6);if(A6){Ah(BB);}else{A8.hideTooltip();}}if(BA){A8.set("text",Ap(BC,A9));A8.set("items",A9===Ai?As:[AV]);}},Ae=function(A4){var A5=false;Aj.forEach(function(A6){if(A1[A6.fnm+Ax]===Ai||A1[A6.fnm+Ax]===Au){A5=true;return false;}});A4.advancedLabel.set("visible",A5);},AR=function(A6,A4,A7){return{scriptClass:"mstrmojo.ui.Pulldown",isHostedWithin:false,items:A6,alias:A7.fnm+Ax,selectedIndex:A4,onPopupWidgetOpened:function(){Ah(Ao.call(this));},onitemSelected:function A5(BC,BA){var BB=Ao.call(this),BD=BB.data,BE=A7.fnm,A9=BC.v,A8=function(BF){if(BF){return(A6.length===3?A0.TO_UPDATE:A0.TO_CREATE);}return A0.UNCHANGED;};BD.set(BE+Ax,A9);BD.set(BE+AW,Ap(A7,A9));BD.set(BE+Ag,A9===Ac?A7.bftp:(BC.bft?BC.bft:Av[A9]));BD.set(BE+Ax+A2,A8(BA!==A4));BD.set("okEnabled",Aw());AU(BB,A7,true);Ae(BB);}};},Aa=function(A6,A7,A4){return{scriptClass:"mstrmojo.ui.SearchablePulldown",isHostedWithin:false,alias:A6.fnm+AW,useRichTooltip:true,visible:A4,allowCustomText:true,allowEmptyText:true,onPopupWidgetOpened:function(){Ah(Ao.call(this));},customizeSearchResult:function(A8){if(t.find(A8,"v","Default")===-1&&this.items.length>0){A8.push(AV);}},onclick:function(A8){mstrmojo.ui.SearchablePulldown.prototype.onclick.call(this,A8);this.set("isEditing",true);},updateData:function(BA){var A8=Ao.call(this),A9=A8.data,BB=A6.fnm;A9.set(BB+AW,BA);A9.set(BB+AW+A2,A7!==BA?A0.TO_UPDATE:A0.UNCHANGED);A9.set("okEnabled",Aw());},onitemSelected:function A5(A8){if(A8){this.updateData(A8.v);}},onkeyup:function(A8){mstrmojo.ui.SearchablePulldown.prototype.onkeyup.call(this,A8);var A9=this[this.editableSlot],BA=A9.innerText||A9.textContent;this.updateData(BA);},updateTooltipConfig:function(A9){this.tooltipOpenDelay=A9?500:0;var A8=X.position(this.domNode);this.richTooltip={content:mstrmojo.desc(14114,'Pattern determines the formatting for the resulting string of characters. You can use the custom numeric, date, and time formatting symbols. <br/> Example: if pattern is defined as "0,000.00" for "1001", it returns the string "1,001.00"'),posType:mstrmojo.tooltip.POS_TOPLEFT,cssClass:"vi-regular vi-tooltip-C",top:A8.y-2,left:A8.x+A8.w+10};}};},Ay=function(BC,BB,A4,A5,BA){var A7=mstrApp&&mstrApp.showMultiDataType?Aq(BC,BB):An(BC,BB),A9=Ap(BB,AS[A7].v),A6=BB.fnm,A8=AS;if(A7>0){A8=Ab;A7--;}A5[A6+AW]="";A5[A6+Ax]="";A5[A6+Ag]="";A5[A6+Ax+A2]=A5[A6+AW+A2]=A0.UNCHANGED;if(BA){A4.push({scriptClass:"mstrmojo.HBox",cssClass:"func-input",alias:A6+Ax,children:[{scriptClass:"mstrmojo.Label",text:A6,useRichTooltip:true,updateTooltipConfig:function(BF){this.tooltipOpenDelay=BF?500:0;var BE=this.domNode;var BD=X.position(BE);if(BE.scrollWidth>BE.offsetWidth){this.richTooltip={content:BE.innerText,posType:mstrmojo.tooltip.POS_TOPLEFT,cssClass:"vi-regular vi-tooltip-V",top:BD.y-BD.h-10,left:BD.x-10};}}},Z.copy({cssClass:"ConfDataTypePullDown MeContentPullDown HBOXPullDown"},AR(A8,A7,BB,true))]});A4.push({scriptClass:"mstrmojo.HBox",cssClass:"pattern-input",alias:A6+AW,children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(12078,"Pattern"),cssClass:"menu-info-text"},Z.copy({cssClass:"ConfDataTypePullDown MeContentPullDown HBOXPullDown"},Aa(BB,A9,true))]});}else{A4.push(Z.copy({cssClass:"ConfDataTypePullDown MeContentPullDown"},AR(A8,A7,BB,false)));A4.push(Z.copy({cssClass:"ConfDataTypePullDown MeContentPullDown"},Aa(BB,A9,false)));}};t.forEach(Al.fs,function(A4){if(AQ.als&&AQ.als.links[Al.did+" "+A4.fid]){At=true;return false;}});if(A3){Aj.forEach(function(A4){Ay(Al,A4,Af?Am:Ar,A1,true);});}else{Ay(Al,Aj[0],Ar,A1,false);}if(Af){Ar.push({scriptClass:"mstrmojo.ui.ScrollableContainer",alias:"formList",cssClass:"formList",children:Am});}Ar.push({scriptClass:"mstrmojo.Label",cssClass:"advancedLabel",alias:"advancedLabel",allowHTML:true,text:"<span>"+mstrmojo.desc(702,"Advanced")+"</span>",onclick:function(){var A5=this.parent,A6,A4,A7=true;AX=!AX;D.toggleClass(this.domNode,"expanded",AX);Aj.forEach(function(A8){AU(A5,A8,false);A6=Af?A5.formList[A8.fnm+AW]:A5[A8.fnm+AW];A4=A3?A6.children[1]:A6;if(A6.visible&&A7&&!Af){A7=false;A4.showTooltip();}});}});return new mstrmojo.ui.menus.EditorConfig({data:A1,cssClass:"ConfDataType-MenuEditor",contents:Ar,onOpen:function(){Ah(this);},bindings:{okEnabled:"this.data.okEnabled"},fnOk:function AZ(A6){var A4=[],A8=[],A5=false,A7=function(BB,BC,BA){var BE=[],BD=function(BF){var BG=BF.ftk&&BF.ftk.slice(2,-2);if(!BG){return null;}while((BG.shift()).v!=="("){}return BG;},A9=BD(BA)||[AD(Al,BA)];BE.push({v:"!",tp:33,lv:4});if(BB!==Ac){BE.push({v:BB,oi:{did:AY[BB],t:11,st:2816,n:BB}});if(!mstrmojo.string.isEmpty(BC)&&BC!==AT&&(BB===Ai||BB===Au)){BE.push({v:'<Pattern="'+BC+'">(',tp:"2",lv:1});}else{BE.push({v:"(",tp:"2",lv:1});}BE=BE.concat(A9);BE.push({v:")",tp:"2",lv:1});}else{BE=BE.concat(A9);}BE.push({v:"",tp:-1,lv:4});return mstrmojo.ME.AttributeEditBox.getTokenStreamXML({items:BE});};if(At){A5=true;}else{Aj.forEach(function(A9){if(A6[A9.fnm+Ax+A2]===A0.TO_CREATE){A5=true;return false;}else{if(A6[A9.fnm+Ax+A2]===A0.TO_UPDATE||(A6[A9.fnm+AW+A2]===A0.TO_UPDATE&&(A6[A9.fnm+Ax]===Ai||A6[A9.fnm+Ax]===Au))){A8.push(A9);}}});}if(A5){Aj.forEach(function(A9){A4.push({n:A9.fnm,formula:A7(A6[A9.fnm+Ax],A6[A9.fnm+AW],A9),bft:A6[A9.fnm+Ag]});});Az(A5,A4);}else{if(Al.da){Y(AQ.mid,Al.did,A8,function(A9){A9.forEach(function(BA){A4.push({did:BA.fid,formula:A7(A6[BA.fnm+Ax],A6[BA.fnm+AW],BA),bft:A6[BA.fnm+Ag]});});Az(A5,A4);});}}}});},getCreateTimeDAEditorCfg:function P(AT,AS){var AQ=c(AT);if(!AQ){return null;}return new mstrmojo.ui.menus.EditorConfig({data:{okEnabled:false},cssClass:"CreateTimeAttribute-MenuEditor",contents:[{scriptClass:"mstrmojo.ui.CheckList",alias:"time_type",items:[{n:mstrmojo.desc(873,"Year"),v:"Year"},{n:mstrmojo.desc(10051,"Quarter of Year"),v:"QuarterOfYear"},{n:mstrmojo.desc(10050,"Quarter"),v:"Quarter"},{n:mstrmojo.desc(10049,"Month of Year"),v:"MonthOfYear"},{n:mstrmojo.desc(871,"Month"),v:"Month"},{n:mstrmojo.desc(10047,"Week of Year"),v:"WeekOfYear"},{n:mstrmojo.desc(10048,"Week"),v:"Week"},{n:mstrmojo.desc(11608,"Day of Year"),v:"DayOfYear"},{n:mstrmojo.desc(10046,"Day of Month"),v:"DayOfMonth"},{n:mstrmojo.desc(10045,"Day of Week"),v:"DayOfWeek"}],onchange:function AR(){var AV=false;Z.forEach(this.selectedIndices,function(AW){if(AW){AV=true;return false;}});this.parent.data.set("okEnabled",AV);}}],bindings:{okEnabled:function(){return this.data.okEnabled;}},fnOk:function AU(AZ,AX){var AY=AX.time_type,Ac=AY.selectedIndices,AW=AY.items,Ab=[],AV=[],Aa=function(Ad,Af,Ah){var Ag=[{v:"!",tp:33,lv:4}],Ae;Ah.forEach(function(Ai){if(Ai===Q){Ag.push(AD(Ad,Af));}else{Ae=AG[Ai];if(Ae){Ag.push({v:Ae,oi:{did:Ae,t:11,st:2816,n:Ae}});}else{Ag.push({v:Ai,tp:"2",lv:1});}}});Ag.push({v:"",tp:-1,lv:4});return mstrmojo.ME.AttributeEditBox.getTokenStreamXML({items:Ag});};Z.forEach(Ac,function(Ad,Ae){if(Ad){AV=[];Z.forEach(AM[AW[Ae].v],function(Af,Ag){AV.push({n:Ag,formula:Aa(AT,AQ,Af),bft:(Ag==="DATE"?8:0)});});Ab.push({isTokenStream:true,forms:AV,name:AT.n+" ("+AW[Ae].n+")"});}});return AS(Ab);}});},RefreshAndCloseAllObjectBrowserCallback:function(AR,AQ){return mstrmojo.func.wrapMethods(AQ.getDatasetsUpdateCallback(),{success:function(){if(t.find(AR,"act","createDataset")!==-1){AQ.controller.datasetsPanel.set("allObjectBrowserOpened",false);}}});},getUnitFromDataset:function d(AR,AT,AQ){var AS=null;Z.forEach(AR,function(AV){var AU=AV.att||[];if(AQ===4){AU=AV.mx||[];}t.forEach(AU,function(AW){if(AW.did===AT){AS=AW;return false;}});if(AS){return false;}});return AS;},getDatasetFromId:function R(AQ,AR){var AS=null;Z.forEach(AQ,function(AT){if(AT.did===AR){AS=AT;return false;}});return AS;},getDatasetFromAttributeId:function R(AQ,AR){var AS=null;Z.forEach(AQ,function(AT){if(t.find(AT.att,"did",AR)>=0){AS=AT;return false;}});return AS;},getSortedDatasetUnits:function E(AQ){var AR=function AR(AS){return AS.t===W.DssTypeMetric?2:1;};AQ=AQ.concat();AQ.sort(function(AV,AT){if(!AV||!AT){return true;}var AW=AR(AV)-AR(AT),AU=AV.n.toUpperCase(),AS=AT.n.toUpperCase();return AW!==0?AW:(AU!==AS?AU.localeCompare(AS):AV.n.localeCompare(AT.n));});return AQ;},isGeoAttr:function AH(AQ,AR){return !!(AQ.fs&&(AQ.fs instanceof Array)&&AQ.fs.length&&AQ.fs.some(function(AS){return AS.fgr>0&&(!AR||(AR&&AS.obf));}));},isTimeAttr:function g(AQ){return !!(AQ.fs&&c(AQ));},getUnitCssClass:function(AR){var AQ=AR.t;if(this.isGeoAttr(AR,AR.useAvailGeoFmsOnly)){AQ+="g";}else{if((AR.dm||AR.um)||AR.da){AQ+="d";}else{if(AR.de){AQ+="de";}else{if(this.isTimeAttr(AR)){AQ+="t";}}}}if((AR.t===AP.Consolidation&&AR.st===N.ConsolidationManaged)||(AR.t===AP.Attribute&&AR.st&&AR.st===N.AttributeRecursive)){AQ+=(" st"+AR.st);}if(AR.t===AP.Consolidation&&AR.st===N.ConsolidationManaged&&AR.ndetype===AA.DssRecursiveDerivedElement){AQ+=" nde4ra";}return"ic"+AQ;},hasMultiForms:function m(AR,AQ){return r.getFormsByAttrId(AR,AQ).length>1;},getDisplayFormsMenu:function F(Af,Ad,AX,Ac){var Ab=[],Ae=[],AU=[],AZ=[{n:mstrmojo.desc(2411,"Off"),v:0},{n:mstrmojo.desc(2410,"On"),v:1},{n:mstrmojo.desc(8504,"Form Name Only"),v:2},{n:mstrmojo.desc(8505,"Show Attribute Name Once"),v:3},{n:mstrmojo.desc(4531,"Automatic"),v:4}];var AY=Ad.model.data,AQ=AY.gts,Aa;var AT=Af.t===AP.Consolidation&&Af.st===N.ConsolidationManaged;t.forEach((AQ.row||[]).concat(AQ.col||[]),function(Ag){if(Ag.id===Af.did){Ae=Ae.concat(Ag.fs);}});Aa=r.getFormsByAttrId(Af.attId||Af.did,AX);t.forEach(Aa||[],function(Ah){var Ai=Ah.fid;if(t.find(Ab,"id",Ai)<0){Ab.push({id:Ai,n:Ah.fnm});var Ag=t.find(Ae,"id",Ai);if(Ag>-1){AU[Ab.length-1]=true;}}});var AV=[{alias:"fs",scriptClass:"mstrmojo.ui.CheckList",minimumSelectCnt:1,items:Ab,selectedIndices:AU},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11918,"Display attribute form names:"),cssClass:"menu-info-text"},{alias:"longNames",scriptClass:"mstrmojo.ui.Pulldown",items:AZ,isHostedWithin:false,selectedIndex:t.find(AZ,"v",AY.lnm||0),onitemSelected:function AR(Ag){this.v=String(Ag.v);}}];if(Ad.getChartStyle&&Ad.getChartStyle()==="NewGraphMatrixVisualizationStyle"){AV.splice(-2,2);}if(AT){AV.splice(-2,2);}return new mstrmojo.ui.menus.EditorConfig({cssClass:"displayForms",data:{item:Af,oldSelected:Z.copy(AU,{})},contents:AV,okBtnText:mstrmojo.desc(1442,"Ok"),fnOk:function AS(Al,Ap){var Ak=Ap.fs,Ai=Ak.selectedIndices,An=Ak.items,At=[],Am=[],Aq=[];if(!Ak.getSelectedItems().length){mstrmojo.alert("Please select at least one form!");return ;}var Ah=Al.oldSelected,As=Ai,Aj,Ao={},Ar={};for(Aj=0;Aj<An.length;Aj++){if(Ah[Aj]&&!As[Aj]){Ao[Aj]=true;}else{if(!Ah[Aj]&&As[Aj]){Ar[Aj]=true;}}}Z.forEach(Ao,function(Au,Av){if(Au){Am.push({act:"removeForm",unitId:Af.did,unitType:Af.t,attFormId:An[Av].id});}});var Ag=Ad.model.data.gts;(Ag.row||[]).concat(Ag.col||[]).forEach(function(Au){if(Au.id===Af.did){(Au.fs||[]).forEach(function(Av){if(t.find(Ab,"id",Av.id)<0){Am.push({act:"removeForm",unitId:Af.did,unitType:Af.t,attFormId:Av.id});}});}});Z.forEach(Ar,function(Au,Av){if(Au){At.push({act:"addForm",unitId:Af.did,unitType:Af.t,attFormId:An[Av].id,unitPos:0});}});Aq.push({act:"putProperties",prs:"Template Formatting",pr:"LongNames",v:Ap.longNames?Ap.longNames.v:0});if(Ac){Ac([{act:"updateTemplate",keyContext:Ad.k,partialRetrieval:{nodes:[Ad.k]},actions:Am.concat(At).concat(Aq)}]);}},onOpen:function AW(){this.fs.updateScrollbars();}});},getAttributeLinkMenu:function h(Ac,Af,Aa,Ae,AV){var Ag=-2147483648,AX=Ae.datasets,AY=AX[Aa],Ad=AY.tables||[],AQ={},AZ=[],AT=(Af.fs&&Af.fs[0])||{},Ab=[],AW=779,AS=Af.art>1,AR=!AS&&Z.keyarray(AX).length>1,AU=function(){mstrmojo.vi.ui.editors.AttributeLinkEditor.open({attribute:Af,docModel:Ae,datasetId:Aa});};if((AY.st!==AW)||Ad.length<=1||Af.da){if(AR){Ac.addMenuItem(mstrmojo.desc(11941,"Link to Other Dataset..."),"",AU);}return ;}t.forEach(AY.att,function(Aj){var Ak=true,Ai=null,Ah=(Aj.fs&&Aj.fs[0])||{};if(Aj.da){return ;}if(AT.der===Ag||Ah.der===Ag||AT.fgr===-1||Ah.fgr===-1||AT.ftr===-1||Ah.ftr===-1){return ;}if(AT.fgr&&Ah.fgr&&AT.fgr!==Ah.fgr){return ;}if(AT.ftr&&Ah.ftr&&AT.ftr!==Ah.ftr){return ;}t.forEach(Ad,function(Al){var Am=t.find(Al.attRefs,"did",Af.did),An=t.find(Al.attRefs,"did",Aj.did);if(Am>=0&&t.indexOf(AZ,Al.did)<0){AZ.push(Al.did);}if(An>=0){Ai=Al.did;}if(Am>=0&&An>=0){Ak=false;}});if(Ak&&!Aj.hide){AQ[Aj.did]=Ai;Ab.push(Aj);}});if(Ab.length>0&&AY.hcs!==true&&!Ae.isSparkDataset(AY)){Ac.addEditorMenuItem(mstrmojo.desc(13172,"Map Attributes"),"",function(){return new mstrmojo.ui.menus.EditorConfig({data:{},cssClass:"mapAttribute",okVisible:false,cancelVisible:false,contents:[{scriptClass:"mstrmojo.ui.ScrollableContainer",children:[{scriptClass:"mstrmojo.vi.ui.InteractiveUnitList",draggable:false,CLS_HAS_MENU:"",items:Ab,listHooks:{select:function Ah(Ai,Aj){Ae.warnForEditStandaloneDS(AY,function(){t.forEach(AZ,function(Ak){I({dsid:Aa,srcId:Af.did,srcTableId:Ak,tgtId:Aj.did,tgtTableId:AQ[Aj.did]},Ae,AV);});});}}}]}]});});}if(AR){Ac.addMenuItem(mstrmojo.desc(11941,"Link to Other Dataset..."),"",AU);}},isDocumentLevelItem:function u(AQ){return AQ&&(AQ.um||AQ.da||(AQ.t===AP.Consolidation&&AQ.st===N.ConsolidationManaged));},isLegalObjectName:function S(AQ){var AR=/["\[\]\\]/g;if(AQ.match(AR)){return false;}return true;},validateName:function j(AR,AS,AQ){if(this.isLegalObjectName(AR)){AS();}else{mstrmojo.alert(mstrmojo.desc(8622,"The # cannot contain the reserved characters ##.").replace("##","'[', ']', '\"' and '\\'").replace("#",mstrmojo.desc(945,"Name")),AQ,mstrmojo.desc(1388,"Rename"));}},hasCGorCon:function AO(AQ){return AQ.att.some(function(AR){return H(AR);});},isCGorCon:function AE(AQ,AS){var AR=t.filterOne(AS&&AS.att,function(AT){return AT.did===AQ.did;});return H(AR||AQ);},hasOldDEOverDatasets:function(AT,AS){var AR=false,AQ;Z.forEach(AS,function(AU){AQ=t.find((AU.att||[]),"did",AT);if(AQ!==-1&&AU.att[AQ].de){AR=true;return false;}});return AR;},getMarkGeoRoleEditorCfg:function AL(AQ,A2,Ak,Ah,BB,BD){var Ag=268435456,A8=536870912,AV=1073741824,Au=268435456,A5=805306368,A0=805306368,Ao=1879048192,BC=-2147483648,A3=0,A4=1,AX=2,Af=3,Aj=4,Ad=5,BA=6,Aa=7,Am=8,Al=9,Aw=10,AT=2,At=3,A1={v:A3,n:mstrmojo.desc(2057,"None")},BE={v:Af,n:mstrmojo.desc(7674,"Country"),der:Ag},Az={v:AX,n:mstrmojo.desc(7676,"State"),parents:[BE],der:A8},Ab={v:Al,n:mstrmojo.desc(12919,"County"),parents:[BE,Az]},A6={v:A4,n:mstrmojo.desc(7675,"City"),parents:[BE,Az],der:AV},Ap={v:Am,n:mstrmojo.desc(7677,"Zip Code"),parents:[BE,Az,A6]},Ai={v:Ad,n:mstrmojo.desc(7696,"Latitude")},Ax={v:BA,n:mstrmojo.desc(7697,"Longitude")},Ae={v:Aj,n:mstrmojo.desc(7675,"City")+", "+mstrmojo.desc(7676,"State")},As={v:Aw,n:mstrmojo.desc(12973,"Area Code")},Av={v:Aa,n:mstrmojo.desc(2056,"Custom")},Ac={ID:[A1,BE,Az,Ab,A6,Ap,Ai,Ax,Ae,As,Av],ID_NUMERIC:[A1,Ap,As,Ai,Ax],NON_ID:[A1,BE,Az,Ab,A6,Ap,Ae,As,Av],NON_ID_NUMERIC:[A1,Ap,As]},Aq=t.filter(A2.fs,function(BF){return(BF.bftp===AT||BF.bftp===At)&&BF.der!==BC;});var Ay=(Aq.length>1),AS=t.find(Aq,"idf",true),AU=(AS===-1?0:AS),Ar=Aq[AU],AZ,AR,An,AW=[],AY=function(BF){var BG=(BF.idf?"ID":"NON_ID")+(BF.bftp===AT?"_NUMERIC":"");return Ac[BG];},A9=function(BG,BF){return t.find(AY(BF),"v",BG);};if(Aq.length===0||t.find(A2.fs,"fgr",-1)!==-1||Ar.der===BC){return null;}t.forEach(Aq,function(BH,BF){var BG=Z.clone(BH);BG.n=BG.fnm;AW.push(BG);if(BH.fgr){Ar=BG;AU=BF;}});AZ=Ar.fid;An=Ar.fgr||0;AR=A9(An,Ar);return new mstrmojo.ui.menus.EditorConfig({data:{item:A2,geoForm:Ar,geoRole:An},cssClass:"MarkGeoRole-MenuEditor",contents:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13522,"Select Attribute Form:"),visible:Ay},{scriptClass:"mstrmojo.ui.Pulldown",isHostedWithin:false,cssClass:"MarkGeoRolePullDown",items:AW,selectedIndex:AU,alias:"formList",visible:Ay,onitemSelected:function A7(BH){var BF=this.parent.data,BG=this.parent.geoRoleList;if(BF.geoForm.fid!==BH.fid){BF.set("geoForm",BH);BF.set("geoRole",BH.fgr);BG.set("items",AY(BH));BG.set("selectedIndex",A9(BH.fgr,BH));}}},{scriptClass:"mstrmojo.ToolSeparator",visible:Ay,markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod}},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13523,"Select Geographic Type:"),cssClass:"menu-info-text"},{scriptClass:"mstrmojo.ui.Pulldown",isHostedWithin:false,cssClass:"MarkGeoRolePullDown",items:AY(Ar),selectedIndex:AR,alias:"geoRoleList",onitemSelected:function A7(BL){var BK=this.parent,BF=BK.data,BM=BK.geoDrvList;var BH=[],BJ=[],BG=Ar.der,BI;BF.set("geoRole",BL.v);t.forEach(BL.parents,function(BN,BO){BI=BN;BH.push({n:BI.n,der:BI.der});if((BG&BI.der)!==0){BJ[BO]=true;}});BM.set("items",BH);BM.set("selectedIndices",BJ);t.forEach(["geoDrvSeparator","geoDrvLabel","geoDrvList"],function(BN){BK[BN].set("visible",BH.length>0);});if(BK.adjustCornersForPopupOverflow){BK.adjustCornersForPopupOverflow();}}},{scriptClass:"mstrmojo.ToolSeparator",markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},alias:"geoDrvSeparator"},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13524,"(Optional) Create Additional Attributes:"),alias:"geoDrvLabel",cssClass:"menu-info-text"},{scriptClass:"mstrmojo.ui.CheckList",alias:"geoDrvList"}],fnOk:function(BK,BJ){var BG=function(BR){var BQ=function(BV){var BW="<mpcs>";t.forEach(BV,function(BX){BW+='<mpc did="'+BX.did+'" n="'+BX.n+'" georole="'+BX.georole+'" drvflg="'+BX.drvflg+'" />';});BW+="</mpcs>";return BW;},BM=function(BV,BX,BZ,BW){var BY=function(Bd,Ba,Bc){var Bb=T(BR,Bd,Ba),Be=l(Bb,Bc);return Be&&Be.did;};BB.forEach(function(Ba,Bb){var Bc=BY(Ba.did,A2.did,BX.fid);if(Bc){BV[Bb]=BV[Bb]||[];BV[Bb].push({did:Bc,n:BX.fnm,georole:BZ,drvflg:BW});}});},BO=[],BU=[],BS=BJ.geoDrvList,BN=0,BP=false,BT={2:Au,1:A5,9:A0,8:Ao}[BK.geoRole]||0;Z.forEach(BS.selectedIndices,function(BW,BV){if(BW){BN|=BS.items[BV].der;}});BN&=BT;if(Ar.fgr!==BK.geoRole||Ar.fid!==BK.geoForm.fid||Ar.der!==BN){if(Ay&&Ar.fid!==BK.geoForm.fid){if(Ar.fgr!==A3){BM(BU,Ar,A3,0);if(Ar.der>0){BP=true;}}}if(BK.geoForm.fgr!==BK.geoRole||BK.geoForm.der!==BN){BM(BU,BK.geoForm,BK.geoRole,BN);if((BN&BK.geoForm.der)!==BK.geoForm.der){BP=true;}}if(BU.length>0){BU.forEach(function(BW,BV){BO.push({act:"changeEMMAMapping",dsid:Ak,tbid:BB[BV].did,mapping:BQ(BW)});});BD(BO,BP);}}},BH=function(){C(AQ.mid,Ak,{success:BG});};var BI=mstrApp.isAppStatePause();if(!Ah||BI){var BL,BF=BI?mstrmojo.desc(212,"Continue"):mstrmojo.desc(219,"Yes");if(Ah){BL=mstrmojo.desc(16237,"The operation requires the dataset to be unloaded from memory. It will be automatically reloaded when you resume data retrieval. Do you want to continue?");}else{BL=BI?mstrmojo.desc(16236,"The operation requires modifying the dataset and unloading it from memory. It will be automatically reloaded when you resume data retrieval, however the change will also affect other reports, documents, and dossiers that share the dataset. Do you want to continue?"):mstrmojo.desc(15493,"Modifications to this dataset will affect other reports, documents, and dossiers that share the dataset. Do you want to continue?");}mstrmojo.warn(BL,{},{buttons:[w(BF,function(){BH();},true,{cssText:"min-Width: 60px"}),w(mstrmojo.desc(221,"Cancel"),function(){})]});}else{BH();}}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.dom","mstrmojo.elementHelper","mstrmojo.func","mstrmojo.VisEnum","mstrmojo.num","mstrmojo.array","mstrmojo.VisMenuList","mstrmojo.mstr.EnumFunction","mstrmojo._HasMarkup","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.models.FormatModel","mstrmojo._FormatDefinition","mstrmojo.css","mstrmojo.chart.enums.EnumFontStyle","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.chart.model.enums.EnumDSSBaseFormType","mstrmojo.string","mstrmojo.vi.viz.EnumVizStyles","mstrmojo.vi.enums.EnumFeatures","mstrmojo.vi.ui.rw.GhostImageContainer","mstrmojo.vi.ui.rw.FreezingImageContainer");mstrmojo.requiresClsP("mstrmojo.ui.menus","MenuConfig","EditorConfig");var N=document.getElementById("vis-measure-canvas"),E=document.getElementById("vis-measure-span"),e={},M={},o={},z=mstrmojo.dom,c=mstrmojo.elementHelper,AQ=mstrmojo.vi.ui.DatasetUnitMenuUtils,U=mstrmojo.VisEnum.EnumColorRankMode,n=mstrmojo.chart.model.enums.EnumDSSObjectType,AI=mstrmojo.chart.model.enums.EnumDSSBaseFormType,AO=mstrmojo.models.FormatModel.ENUM_PROPERTY_NAMES,AS=mstrmojo.chart.enums.EnumFontStyle,W=mstrmojo.hash,b=mstrmojo.string,AZ=mstrmojo.func.wrapMethods,Y=mstrmojo.VisEnum,Q=mstrmojo._FormatDefinition,Ac=Y.SERVER_JSON_ERROR_TYPE,t=mstrmojo.vi.viz.EnumVizStyles,AJ=mstrmojo.vi.enums.EnumFeatures,D=mstrmojo.vi.ui.rw.FreezingImageContainer,AX=mstrmojo.vi.ui.rw.GhostImageContainer;var r=64,AB=128,C=4,v=5,a=6,F=7,d=mstrmojo,S=d.array,Aa=mstrmojo.array,A=d.desc,h=d.mstr.EnumFunction,T=mstrmojo.vi.enums.EnumDerivedElementType,AV=d._HasMarkup,AY=d.css;var P;mstrmojo.requiresDescs(221,358,1422,2122,6017,5868,5869,11819,11827);function Ab(Ah,Ag){var Af=mstrmojo.VisUtility;var Ai=Af.pluck(Ag,"tid"),Aj=Af.pluck(Ag,"eid"),Ae=(Ah.getDocModel&&Ah.getDocModel())||Af.getPropertyByPath(Ah,"model.docModel");if(Af.getPropertyByPath(Ae,"getColorBy") instanceof Function){return Ae.getColorBy(Ai,Aj);}}function AW(Ae,Ag,Ai){var Ah=Ag.id,Af=Ag.getHost();if(Af&&Af.observableModel){Ae.forEach(function(Ak){var Aj=Af.observableModel[Ak];if(Aj){Aj.attachEventListener("valueChanged",Ah,Ai);}});}}function Ad(Af){var Ae={SINGLE:[{text:A(358,"Absolute"),value:h.FunctionAbs,n:A(358,"Absolute"),v:h.FunctionAbs}],PAIR:[{text:A(6017,"Add"),value:h.FunctionAdd,n:A(6017,"Add"),v:h.FunctionAdd},{text:A(2122,"Average"),value:h.FunctionAverage,n:A(2122,"Average"),v:h.FunctionAverage},{text:A(5868,"Least"),value:h.FunctionLeast,n:A(5868,"Least"),v:h.FunctionLeast},{text:A(5869,"Greatest"),value:h.FunctionGreatest,n:A(5869,"Greatest"),v:h.FunctionGreatest},{text:"A-B",value:h.FunctionMinus+";0",n:"A-B",v:h.FunctionMinus+";0"},{text:"B-A",value:h.FunctionMinus+";1",n:"B-A",v:h.FunctionMinus+";1"},{text:"A/B",value:h.FunctionDivide+";0",n:"A/B",v:h.FunctionDivide+";0"},{text:"B/A",value:h.FunctionDivide+";1",n:"B/A",v:h.FunctionDivide+";1"}],MORE:[{text:A(6017,"Add"),value:h.FunctionAdd,n:A(6017,"Add"),v:h.FunctionAdd},{text:A(2122,"Average"),value:h.FunctionAverage,n:A(2122,"Average"),v:h.FunctionAverage},{text:A(5868,"Least"),value:h.FunctionLeast,n:A(5868,"Least"),v:h.FunctionLeast},{text:A(5869,"Greatest"),value:h.FunctionGreatest,n:A(5869,"Greatest"),v:h.FunctionGreatest}]};return Ae[Af];}function AN(Af,Ae){return !!(((Af&&Af.at)||0)&Ae);}function X(Ae){return !Ae.cmSelCells.some(function(Af){var Ag=Ae.getCellForNode(Af);return c.isNonGroupNull(Ag)||!AN(Ag,r)||Ag.dei!==undefined||Ae.model.isRecursiveAttribute(Ag.tid);});}function j(Af){var Ae;return !Af.cmSelCells.some(function(Ag){Ae=Af.getCellForNode(Ag);return(c.isNonGroupNull(Ae)||!AN(Ae,AB))||Af.model.isRecursiveAttribute(Ae.tid);});}function V(Ah,Ag,Aj,Ai,Af){var Ae=Aj&&Aj.func;if((Ae===Ai)||(typeof Ai==="string"&&Ai.indexOf(Ae)===0&&Ai.indexOf(";0")>0)){return ;}if(Af){Ah.editDECalculation(Ag,Ai);}else{Ah.derivedElementCalculation(Ag,Ai);}}function k(Aq,Ao,Am){var Ap=Ao&&Ao.es,Ae=(Ap&&Ap.length)||Aq.cmSelCells.length,Ah=(Ae===1)?"SINGLE":((Ae===2)?"PAIR":"MORE"),An=Ad(Ah),Ag=(Ao&&Ao.func),Ai,Ar=Aq.cmSelCells,Af,Al,Ak,Aj;if(Ah==="PAIR"){if(Ao){Aj=Ap[0].v>Ap[1].v;if(Aj){Ak=Ap[0].n;Al=Ap[1].n;An[4]={value:h.FunctionMinus+";1",v:h.FunctionMinus+";1"};An[5]={value:h.FunctionMinus+";0",v:h.FunctionMinus+";0"};An[6]={value:h.FunctionDivide+";1",v:h.FunctionDivide+";1"};An[7]={value:h.FunctionDivide+";0",v:h.FunctionDivide+";0"};}else{Al=Ap[0].n;Ak=Ap[1].n;}}else{Al=Am(Ar[0]);Ak=Am(Ar[1]);}An[C].text=Al+" - "+Ak;An[v].text=Ak+" - "+Al;An[a].text=Al+" / "+Ak;An[F].text=Ak+" / "+Al;An[C].n=Al+" - "+Ak;An[v].n=Ak+" - "+Al;An[a].n=Al+" / "+Ak;An[F].n=Ak+" / "+Al;}for(Ai in An){if(typeof An[Ai].value==="string"&&An[Ai].value.indexOf(Ag)===0&&An[Ai].value.indexOf(";0")>0){Af=An[Ai];break;}if(An[Ai].value===Ag){Af=An[Ai];break;}}return{items:An,selectedItem:Af};}function s(Ae,Ah){if(!Ae){return Ae;}if(Ah.length===1){return Ae[Ah[0]];}var Ag=(Ah&&Ah.length)||0,Af;for(Af=0;Af<Ag;Af++){Ae=Ae[Ah[Af]];if(!Ae){break;}}return Ae;}function AP(Ag,Af,Ae){return Ag.every(function(Ah){return Ah.ttp===Af||Ah.ttp===Ae;});}function G(Af,Ai,Aj){var Ah=(Ai&&Ai.length)||0,Ag,Ae,Ak=Af;for(Ag=0;Ag<Ah-1;Ag++){Ae=Ai[Ag];if(!Ak[Ae]){Ak[Ae]={};}Ak=Ak[Ae];}Ak[Ai[Ah-1]]=Aj;}function y(Am){var An,Al,Ah,Aj,Ae,Ak=this.model.docModel.datasets,Af=false,Ai=false,Ag={isDM:false};for(An in Ak){if(Ak.hasOwnProperty(An)){Al=Ak[An].mx;S.forEach((Al||[]),function(Ao){if(Ao.did===Am){if(Ao.um||Ao.rdm){Ai=true;}Af=true;return false;}});if(Af){break;}}}if(Ai){Ae=this.model.data.gts.col;Ah=(Ae&&Ae[Ae.length-1]);if(Ah&&Ah.otp===-1){Aj=Ah.es;}S.forEach((Aj||[]),function(Ao){if(Ao.oid===Am){Ag={isDM:true,id:Ao.id};return false;}});}return Ag;}function L(Ae,Ah){var Ak=[],Ag={act:"updateElementsPropertiesMap",epm:Ak},Ai=[],Af={},Am=[Af],Al=this;Ak.push({epmk:Ai,epmv:Am});Ae.forEach(function(Ao){var Ap=Ao.tid,Ar=Ao.tp,An=Ap===-1,Aq={ob:{did:An?"":Ap,tp:Ar}};Ai.push(Aq);});if(Ah&&Ah.indexOf("default")<0){Af.v={vv:Ah};}var Aj=[];Af.k={chn:Aj};Ae.forEach(function(Ap){var Aq=Ap.tid,An=Aq===-1,Ao;if(An){Ao=y.call(Al,Ap.eid);if(Ao.isDM){Aj.push({emt:2,ei:Ao.id});}else{Aj.push({emt:2,mt:{did:Ap.eid,tp:4,ql:0}});}}else{Aj.push({emt:1,ei:Ap.eid,at:{did:Aq,tp:Ap.tp,ql:0}});}});return Ag;}function AK(Ai,Ag){var Ah="00000000000000000000000000000000",Af=Ai&&Ai.dropZones,Ae=S.find(Af,"id",Ag);return Ae===-1?[]:S.filter(Af[Ae].items,function(Aj){return Aj.t===4&&Aj.id!==Ah;});}function AE(Aj,Ag,Ai,Af,Ae){var Ak=Af?Aj:Aj&&Aj.parentNode;while(Ak&&(Ak!==Ae)){var Ah=Ak.getAttribute&&Ak.getAttribute(Ag);if(Ah!==null&&Ah.indexOf(Ai)>=0){return true;}Ak=Ak.parentNode;}return false;}function x(Af,Ag){var Ae=W.walk("rootCtrl.docCtrl",mstrApp);if(Ae&&(typeof Ae.selectViPanel==="function")){Ae.selectViPanel(Ag);}Af.getDocModel().selectVIUnit(Af.parent.id,true);}var H={sessions:{},instances:[],init:function AF(){this.supportedEventTypes=[];if(window.TouchEvent){this.supportedEventTypes.push("TouchEvent");}else{if(window.PointerEvent){this.supportedEventTypes.push("PointerEvent");}}if(window.MouseEvent){this.supportedEventTypes.push("MouseEvent");}return this;},startNewSessions:function AC(Ae){var Ai=this;var Ag=this;var Af=document;var Ah=function(As){var An=Ae.callbacks.start.bind(Ae.callbackThis),Ao=Ae.callbacks.change.bind(Ae.callbackThis),Ap=Ae.callbacks.end.bind(Ae.callbackThis),Ar=Ae.callbacks.context;var Ak={};Ak.identifier=As.identifier;Ak.context=W.clone(Ar);Ak.clientX=As.clientX;Ak.clientY=As.clientY;var Am=function Am(At){var Au=this.context;return An({api:Ag,event:At,session:this,context:Au});};var Aq=function Aq(Au,At){var Av=this.context,Ax=0,Aw=0;Ax=At.clientX-this.clientX;Aw=At.clientY-this.clientY;this.clientX=At.clientX;this.clientY=At.clientY;var Ay={api:Ag,event:Au,deltaX:Ax,deltaY:Aw,session:this,context:Av};return Ao(Ay);};var Al=function Al(At){var Au=this.context;return Ap({api:Ag,event:At,session:this,context:Au});};Ak.onStart=Am;Ak.onChange=Aq;Ak.onEnd=Al;return Ak;};var Aj=function(Al,Ak){Al.listeners={};Al.listeners.change=function(Am){var An=Ai.getChangedSessions(Am);for(var Ao=0;Ao<An.length;Ao++){if(Al.identifier===An[Ao].identifier){return Ai.sessions[Al.identifier].onChange(Am,An[Ao]);}}};Al.listeners.end=function(An){var Ao=Ai.getChangedSessions(An);for(var Ap=0;Ap<Ao.length;Ap++){if(Al.identifier===Ao[Ap].identifier){if(window.TouchEvent&&window.TouchEvent.prototype.isPrototypeOf(Ak)){Af.removeEventListener("touchmove",Al.listeners.change);Af.removeEventListener("touchend",Al.listeners.end);Af.removeEventListener("touchcancel",Al.listeners.end);}else{if(window.PointerEvent&&window.PointerEvent.prototype.isPrototypeOf(Ak)&&(Ak.pointerType&&Ak.pointerType!=="mouse")){Af.removeEventListener("pointermove",Al.listeners.change);Af.removeEventListener("pointerleave",Al.listeners.end);Af.removeEventListener("pointerup",Al.listeners.end);}else{if(window.MouseEvent&&window.MouseEvent.prototype.isPrototypeOf(Ak)&&!Ak.pointerType){Af.removeEventListener("mousemove",Al.listeners.change);Af.removeEventListener("mouseup",Al.listeners.end);}}}var Am=Ai.sessions[Al.identifier].onEnd(An);delete Ai.sessions[Al.identifier];return Am;}}};if(window.TouchEvent&&window.TouchEvent.prototype.isPrototypeOf(Ak)){Af.addEventListener("touchmove",Al.listeners.change);Af.addEventListener("touchend",Al.listeners.end);Af.addEventListener("touchcancel",Al.listeners.end);}else{if(window.PointerEvent&&window.PointerEvent.prototype.isPrototypeOf(Ak)&&(Ak.pointerType&&Ak.pointerType!=="mouse")){Af.addEventListener("pointermove",Al.listeners.change);Af.addEventListener("pointerleave",Al.listeners.end);Af.addEventListener("pointerup",Al.listeners.end);}else{if(window.MouseEvent&&window.MouseEvent.prototype.isPrototypeOf(Ak)&&!Ak.pointerType){Af.addEventListener("mousemove",Al.listeners.change);Af.addEventListener("mouseup",Al.listeners.end);}}}};return function(Am){var An=Ai.getChangedSessions(Am),Al=Ai.sessions,Ao=An.filter(function(Ap){if(Al[Ap.identifier]){return false;}else{return true;}});Ao.forEach(function(Ap){Ai.sessions[Ap.identifier]=Ah(Ap);Aj(Ai.sessions[Ap.identifier],Am);});var Ak=[];Ao.forEach(function(Ap){Ak.push(Ai.sessions[Ap.identifier].onStart(Am));});return Ak;};},newInstance:function AH(Ah,Ak,Aj){var Ag,Af,Ae=this.getInstanceIndex(Ah);if(Ae!==-1){for(Ag=0;Ag<this.supportedEventTypes.length;Ag++){Af=this.supportedEventTypes[Ag];if(Af==="TouchEvent"){Ah.removeEventListener("touchstart",this.instances[Ae].starter);}else{if(Af==="PointerEvent"){Ah.removeEventListener("pointerdown",this.instances[Ae].starter);}else{if(Af==="MouseEvent"){Ah.removeEventListener("mousedown",this.instances[Ae].starter);}}}}delete this.instances[Ae];}var Ai={domNode:Ah,callbacks:Ak,callbackThis:Aj};Ai.starter=this.startNewSessions(Ai);if(Ae!==-1){this.instances[Ae]=Ai;}else{this.instances.push(Ai);}for(Ag=0;Ag<this.supportedEventTypes.length;Ag++){Af=this.supportedEventTypes[Ag];if(Af==="TouchEvent"){Ah.addEventListener("touchstart",Ai.starter);}else{if(Af==="PointerEvent"){Ah.addEventListener("pointerdown",Ai.starter);}else{if(Af==="MouseEvent"){Ah.addEventListener("mousedown",Ai.starter);}}}}return this;},getInstanceIndex:function J(Ae){return S.find(this.instances,"domNode",Ae);},getInstance:function m(Af){var Ae=this.getInstanceIndex(Af);return this.instances[Ae];},getChangedSessions:function AA(Ae){var Af=[];if(window.TouchEvent&&window.TouchEvent.prototype.isPrototypeOf(Ae)){var Ai=Ae.changedTouches;for(var Ag=0;Ag<Ai.length;Ag++){var Ah={};Ah.identifier=Ai[Ag].identifier;Ah.clientX=Ai[Ag].clientX;Ah.clientY=Ai[Ag].clientY;Af.push(Ah);}}else{if(window.PointerEvent&&window.PointerEvent.prototype.isPrototypeOf(Ae)&&(Ae.pointerType&&Ae.pointerType!=="mouse")){Af.push({identifier:Ae.pointerId,clientX:Ae.clientX,clientY:Ae.clientY,});}else{if(window.MouseEvent&&window.MouseEvent.prototype.isPrototypeOf(Ae)&&!Ae.pointerType){Af.push({identifier:"mouse",clientX:Ae.clientX,clientY:Ae.clientY,});}}}return Af;}};var q=H.init();mstrmojo.VisUtility=mstrmojo.provide("mstrmojo.VisUtility",{getCache:function(){return JSON.stringify(o);},getUpdateColorMapAction:function(Af,Ae){return L.call(this,Af,Ae);},measureTextSize:function(Af,Ae,Ag){return{width:this.measureTextWidth(Af,Ae,Ag),height:this.measureTextHeight(Af,Ae,Ag)};},measureTextWidth:function(Ah,Ag,Ai,Af,Ae){if(z.isIE||z.isIEW3C){return this.measureTextWidthWithSpan(Ah,Ag,Ai,Af,Ae);}return this.measureTextWidthWithCanvas(Ah,Ag,Ai);},measureTextWidthWithCanvas:function(Ah,Ai,Al,Aj){Aj=Aj||false;if(Ah===""){return 0;}if(Ah===" "){Ah="\u00A0";}var Ak=Ai.fontFamily,An=Ai.fontSize,Ag=Ai.fontStyle,Am=Ai.fontWeight;if(typeof An==="number"){An+="pt";}Ag=Ag||"normal";Am=Am||"normal";Al=Al||0;var Af=Aj?undefined:s(e,[Ak,An,Ag,Am,Ah]);if(!Af){if(!N){N=document.createElement("canvas");N.width=0;N.height=0;N.id="vis-measure-canvas";N.style.position="absolute";N.style.top="0";N.style.fontSize="medium";document.body.appendChild(N);}var Ae=N.getContext("2d");Ae.font=Ag+" "+Am+" "+An+" "+this.surroundWithQuotes(Ak);Af=Math.ceil(Ae.measureText(Ah).width);G(e,[Ak,An,Ag,Am,Ah],Af);}return Af+Al;},measureTextWidthQuick:function(Ah,Ai,Al,Aj){Aj=Aj||false;if(Ah===""){return 0;}if(Ah===" "){Ah="\u00A0";}var Ak=Ai.fontFamily,An=Ai.fontSize,Ag=Ai.fontStyle,Am=Ai.fontWeight;if(typeof An==="number"){An+="pt";}Ag=Ag||"normal";Am=Am||"normal";Al=Al||0;var Af=Aj?undefined:s(e,[Ak,An,Ag,Am,Ah]);if(!Af){if(!N){N=document.createElement("canvas");N.width=0;N.height=0;N.id="vis-measure-canvas";N.style.position="absolute";N.style.top="0";N.style.fontSize="medium";document.body.appendChild(N);}var Ae=N.getContext("2d");Ae.font=Ag+" "+Am+" "+An+" "+this.surroundWithQuotes(Ak);Af=Math.ceil(Ae.measureText(Ah).width);G(e,[Ak,An,Ag,Am,Ah],Af);}return Af+Al;},measureTextWidthWithSpan:function(Ah,Ai,Am,Ao,Aj,Ae){if(Ah===""){return 0;}if(Ah===" "){Ah="\u00A0";}var Ak=Ai.fontFamily,Ap=Ai.fontSize,Ag=Ai.fontStyle,Al=Ai.fontWeight;if(typeof Ap==="number"){Ap+="px";}Ag=Ag||"normal";Al=Al||"normal";Ao=Ao||"auto";Am=Am||0;Aj=!!Aj;if(typeof Ao==="number"){Ao+="px";}var Af=s(M,[Ak,Ap,Ag,Al,Ao,Ah]);if(!Af||Ae){var An;if(!E){E=document.createElement("span");An=E.style;E.id="vis-measure-span";An.position="absolute";An.top="0";An.visibility="hidden";An.width="auto";An.height="auto";if(Aj){An.whiteSpace="nowrap";}else{An.whiteSpace="normal";}document.body.appendChild(E);}An=E.style;if(Aj){An.whiteSpace="nowrap";}else{An.whiteSpace="normal";}An.width="auto";An.height=Ao;An.fontFamily=this.surroundWithQuotes(Ak);An.fontSize=Ap;An.fontStyle=Ag;An.fontWeight=Al;E.innerHTML=b.encodeHtmlString(Ah);Af=Math.ceil(E.clientWidth);G(M,[Ak,Ap,Ag,Al,Ao,Ah],Af);}return Af+Am;},measureTextHeight:function(Ag,Ah,Am,Ap,Ae,Aj,Ai){if(Ag===""){return 0;}if(Ag===" "){Ag="\u00A0";}var Ak=Ah.fontFamily,Ar=Ah.fontSize,Af=Ah.fontStyle,Al=Ah.fontWeight,Ao=Ah.lineHeight||"inherit";Ae=Ae||"normal";Ai=!!Ai;if(typeof Ar==="number"){Ar+="px";}Af=Af||"normal";Al=Al||"normal";Ap=Ap||"auto";Am=Am||0;if(typeof Ap==="number"){Ap+="px";}var Aq=Aj?undefined:s(o,[Ak,Ar,Af,Al,Ap,Ag]);if(!Aq){var An;if(!E){E=document.createElement("span");An=E.style;E.id="vis-measure-span";An.position="absolute";An.top="0";An.visibility="hidden";An.width="auto";An.height="auto";if(Ai){An.whiteSpace="nowrap";}else{An.whiteSpace="normal";}document.body.appendChild(E);}An=E.style;if(Ai){An.whiteSpace="nowrap";}else{An.whiteSpace="normal";}An.heigth="auto";An.width=Ap;An.lineHeight=Ao;An.fontFamily=this.surroundWithQuotes(Ak);An.fontSize=Ar;An.fontStyle=Af;An.fontWeight=Al;An.wordBreak=Ae;E.innerHTML=b.encodeHtmlString(Ag);Aq=E.clientHeight;if(!Aj){G(o,[Ak,Ar,Af,Al,Ap,Ag],Aq);}}return Aq+Am;},getVisEmptyMsg:function(Ae,Af){var Ag="";switch(Ae){case"AE_ERROR":Ag='<div class="gm-vis-msg-container"><div class="gm-vis-msg-vcenter"><div class="gm-vis-msg-hcenter"><div style="padding:25px"><div class="gm-warning-icon" style="padding-bottom:18px"></div><div style="padding-bottom:8px">'+(Af||this.errorMsg||"")+"</div><div></div></div></div></div></div>";break;case"NODATA_OTHERERROR":Ag='<div class="error-msg"><div class="error-content"><div class="text" style="visibility: visible;padding-top:0px;"><div>'+(this.errorMsg||mstrmojo.desc(2388,"No data returned for this view. This might be because the applied filter excludes all data."))+"</div></div></div></div>";break;default:Ag='<div class="mstrmojo-Label dropMsg" style="display: block;" >'+mstrmojo.desc(11668,"Drag objects here.")+"</div>";}return Ag;},getVisEmptyMsgControls:function B(){var Ag=this.error,Al,Aj=this.errorType,Af;var Ah=mstrmojo.VisUtility;if(this.excludeData){Al=Ah.getVisStyle.call(this);var Ai=Ah.getAttMetricCount.call(this);return[{scriptClass:"mstrmojo.vi.ui.rw.FreezingImageContainer",cssClass:Al,visName:mstrConfig.pluginsVisList[Al]&&mstrConfig.pluginsVisList[Al].d,visDropzoneMsg:D.getVisDropzoneMsg(Ai.attCount,Ai.metricCount)}];}if(!this.hasError()){return ;}switch(Aj){case Ac.NO_DATASET:case Ac.NO_TEMPLATE_UNIT:if(mstrApp&&mstrApp.supportFeature&&mstrApp.supportFeature(AJ.SUPPORT_GHOST_IMG)){Al=Ah.getVisStyle.call(this);var Am="",Ak="",Ae="";if(Al===t.HEAT_MAP){Am="heatmap";Ak=mstrmojo.desc(11819,"Heat Map");Ae=AX.getVisDesc("heatmap");}else{if(Al===t.NETWORK){Am="network";Ak=mstrmojo.desc(11827,"Network");Ae=AX.getVisDesc("network");}else{if(Al===t.KPICARD){Am="kpicard";Ak=mstrmojo.desc(15800,"KPI");Ae=AX.getVisDesc("kpicard");}}}Af=[{scriptClass:"mstrmojo.vi.ui.rw.GhostImageContainer",cssClass:Am,visName:Ak,visDesc:Ae}];}else{Af=[{scriptClass:"mstrmojo.Label",cssClass:"dropMsg",text:Ag}];}break;case Ac.AE_ERROR:Af=[{scriptClass:"mstrmojo.Container",cssClass:"error-msg",markupString:Ah.getVisEmptyMsg("AE_ERROR",Ag),markupSlots:{containerNode:function(){return this.domNode;}}}];break;default:Af=[{scriptClass:"mstrmojo.Container",cssClass:"error-msg",markupString:'<div class="{@cssClass}"><div class="error-content" style="visibility: visible">'+Ag+"</div></div>",markupSlots:{containerNode:function(){return this.domNode;}}}];break;}return Af;},applyStyles2DomNode:function(Aj,Am){var Ae,Ak=Aj.style;if(Object.prototype.hasOwnProperty.call(Am,"backgroundColor")&&Am.backgroundColor!==""&&Am.backgroundColor!=="transparent"){var Ai=1;if(Object.prototype.hasOwnProperty.call(Am,"opacity")&&Am.opacity!==""){Ai=Am.opacity;}var Af=Am.backgroundColor,Al=function Al(An){if(isNaN(An)){An=0;}An%=16777216;return{b:An%256,g:(An>>8)%256,r:(An>>16)%256};},Ah="";if(Af){var Ag=function Ag(Ao,Ap){if(Ao==="transparent"){return"rgba(0,0,0,0)";}Ao=this.parseCSSColor(Ao,false);var An=Al(Ao);return"rgba("+An.r+" ,"+An.g+" ,"+An.b+" ,"+Ap+" )";}.bind(this);if(Af.c1!==undefined&&Af.c2!==undefined&&Af.or!==undefined){Ah=(AY.buildGradient(Af.or,Ag(Af.c1,Ai),Ag(Af.c2,Ai))).v;}else{Ah=Ag(Af,Ai);}Ak.background=Ah;}}else{Ak.backgroundColor="rgba(0,0,0,0)";}for(Ae in Am){if(Ae!=="backgroundColor"&&Ae!=="opacity"&&Object.prototype.hasOwnProperty.call(Am,Ae)&&Am[Ae]&&Am[Ae]!==""){Ak[Ae]=Am[Ae];if(Ae==="fontFamily"){Ak[Ae]="'"+Am[Ae]+"'";}}}},parseCSSColor:function(Ai,Af){var Ae,Ag;if(Ai.length===7){if(Af===true){Ae=Ai[5]+Ai[6]+Ai[3]+Ai[4]+Ai[1]+Ai[2];}else{Ae=Ai.slice(1);}}else{Ae=[];var Ah=Ai.slice(1);if(Af===true){for(Ag=2;Ag>=0;Ag--){Ae.push(Ah[Ag]);Ae.push(Ah[Ag]);}}else{for(Ag=0;Ag<3;Ag++){Ae.push(Ah[Ag]);Ae.push(Ah[Ag]);}}Ae=Ae.join("");}return parseInt(Ae,16);},positionDomNode:function(Ag,Ai){var Af,Al,Aj,Ah=["width","height","top","left","right","bottom"],Ak=Ah.length,Ae=Ag.style;for(Af=0;Af<Ak;Af++){Al=Ah[Af];Aj=Ai[Al];if(Aj!==undefined){if((typeof Aj)==="number"){Aj+="px";}Ae[Al]=Aj;}}},getComputedFontStyle:function K(Ag){var Ae=mstrmojo.css.getComputedStyle(Ag);var Ah={};Ah.fontFamily=Ae.fontFamily;Ah.fontSize=Ae.fontSize;Ah.fontStyle=Ae.fontStyle;Ah.fontWeight=Ae.fontWeight;Ah.fontVariant=Ae.fontVariant;var Af=parseInt(Ae.paddingLeft)||0,Ai=parseInt(Ae.paddingLeft)||0;Ah.bonus=Af+Ai;return Ah;},splitWordIfTooLong:function(Ao,Am,Ah){var Ak=[];var Al=Ao.length;var Ai;for(Ai=0;Ai<Al;Ai++){var Af=Ao[Ai];while(true){var Ap=this.measureTextWidth(Af,Ah);if(Ap>Am){var An=(Am/Ap)*Af.length;var Ae=Math.max(Math.round(An),1);while(Ae>0){var Aj=Af.substr(0,Ae);var Ag=Math.round(this.measureTextWidth(Aj,Ah));if(Ag<=Am||Ae===1){Ak.push(Aj);break;}else{Ae--;}}Af=Af.substr(Ae,Af.length-Ae);}else{Ak.push(Af);break;}}}return Ak;},truncateTextToLineWithWordWrap:function i(A4,Ax,Av,Ak,Aw,Ao){var As=A4.split(" "),Ay=As.length;if(!Ao){As=this.splitWordIfTooLong(As,Av,Ax);}var BB,Aq=[],A6=[],Ae=0,Ai=As.length,BD=this.measureTextWidth(" ",Ax),Ah=0,An=false,Au=(Ay===As.length);A6.push(0);for(BB=0;BB<Ai;BB++){var A2=this.measureTextWidth(As[BB],Ax);if(!Ao&&A2>Av){var Af=As[BB];var A9=(Av/A2)*Af.length;As[BB]=Af.substr(0,parseInt(A9,10));A2=Av;}Aq.push(A2);Ae+=A2;A6.push(Ae);if(BB!==Ai-1){Ae+=BD;}}var A8,BA,A0=Ak;for(A8=0,BA=0;BA<A6.length;){var Am=A6[BA]-A6[A8];if(A8>0&&BA!==A8){Am-=BD;}var Al=A6[BA+1]-A6[A8];if(A8>0&&BA+1!==A8){Al-=BD;}if(Am<=Av&&((BA+1===A6.length)||(Al>Av))){Ah=Math.max(Ah,Am);A0--;if(A0===0||BA===Ai){break;}else{A8=BA;BA++;}}else{BA++;}}if(BA>Ai){BA=Ai;}var Ap=A6[BA]-A6[A8];if(A8>0&&BA!==A8){Ap-=BD;}var A3;if(BA>=Ai&&Ap<Av){A3=As.join(" ");}else{An=true;Ah=Av;A3=As.slice(0,BA).join(" ");var Ar=this.measureTextWidth("...",Ax);if(Ap+Ar<=Av){if(Ap+BD+Ar>Av){A3+="...";}else{var BC=As[BA],At;for(var Az=1;Az<BC.length;Az++){At=this.measureTextWidth(BC.substr(0,Az),Ax);if(Ap+BD+At+Ar>Av){break;}}A3+=" "+BC.substr(0,Az-1)+"...";}}else{if(A3.charAt(A3.length-1)===" "){A3=A3.substr(0,A3.length-1);}var A1=A3.lastIndexOf(" ");var Ag=A3.length-1-A1;if(Ag===3){A3=A3.substr(0,A3.length-3)+" ...";}else{var A5=0,Aj="",A7=0;while(A5<Ar&&A3.length>A7){A7++;Aj=A3.substr(A3.length-A7,A3.length);A5=this.measureTextWidth(Aj,Ax);}A3=A3.substr(0,A3.length-A7)+"...";}}}if(Aw){return{text:A3,truncated:An,maxLineLen:Ah,canWordWrap:Au};}return A3;},measureSuperTextWidth:function u(Af,Ag,Ae,Ah){return Af?this.measureTextWidth("<sup>"+Ag+"</sup>",Ae,Ah):this.measureTextWidth(Ag,Ae,Ah);},splitTokenIfTooLong:function g(Ap,An,Ah){var Al=[];var Am=Ap.length;var Ai,Af,Aq,Ak,Ar;for(Ai=0;Ai<Am;Ai++){Af=Ap[Ai];Ak=Af.isSuper;while(true){Aq=Af.v;if(Af.textWidth!==undefined){Ar=Af.textWidth;}else{Ar=Af.textWidth=this.measureSuperTextWidth(Ak,Aq,Ah);}if(Ar>An){var Ao=(An/Ar)*Aq.length;var Ae=Math.max(Math.round(Ao),1);while(Ae>0){var Aj=Aq.substr(0,Ae);var Ag=Math.round(this.measureSuperTextWidth(Ak,Aj,Ah));if(Ag<=An||Ae===1){Al.push({v:Aj,isSuper:Ak,textWidth:Ag});break;}else{Ae--;}}Af={v:Aq.substr(Ae,Aq.length-Ae),isSuper:Ak};}else{Al.push(Af);break;}}}return Al;},truncateTextToLineWithWordWrapForTokens:function AT(Ao,Ai,A7,Az,A8,Au){var A2=Ao.length;Ao=this.splitTokenIfTooLong(Ao,A7,Ai);var A6,At=[],Ae=0,Ax=Ao.length,Af=0,Ay=false,Ak=(A2===Ao.length),Am,Ar,A0,Ag,A4,An,As;if(Au&&!Ak){return{canWordWrap:Ak};}At.push(0);for(A6=0;A6<Ax;A6++){Am=Ao[A6];A0=Am.v;Ar=Am.isSuper;if(Am.textWidth!==undefined){Ag=Am.textWidth;}else{Ag=Am.textWidth=this.measureSuperTextWidth(Ar,A0,Ai);}if(Ag>A7){var A5=(A7/Ag)*A0.length;Am.v=A0.substr(0,parseInt(A5,10));Ag=Am.textWidth=A7;}Ae+=Ag;At.push(Ae);}var Aq,A1,Ap=Az;for(Aq=0,A1=0;A1<At.length;){var Al=At[A1]-At[Aq];var Aj=At[A1+1]-At[Aq];if(Al<=A7&&((A1+1===At.length)||(Aj>A7))){Af=Math.max(Af,Al);Ap--;if(Ap===0||A1===Ax){break;}else{Aq=A1;A1++;}}else{A1++;}}if(A1>Ax){A1=Ax;}var Aw=At[A1]-At[Aq];var A9;if(A1>=Ax&&Aw<A7){A9=Ao;}else{Ay=true;Af=A7;A9=Ao.slice(0,A1);var Ah=this.measureTextWidth("...",Ai);if(Aw+Ah<=A7){An=Ao[A1];A0=An.v;Ar=An.isSuper;for(A4=1;A4<A0.length;A4++){As=this.measureSuperTextWidth(Ar,A0.substr(0,A4),Ai);if(Aw+Ah+As>A7){break;}}if(A4>1){Am={v:A0.substr(0,A4-1),isSuper:Ar};Am.textWidth=this.measureSuperTextWidth(Ar,Am.v,Ai);A9.push(Am);A9.push({v:"...",textWidth:Ah});}}else{var Av=0,A3;for(A6=A9.length-1;A6>=0;A6--){Am=A9[A6];A0=Am.v;Ar=Am.isSuper;A3=0;for(A4=A0.length-1;A4>=0;A4--){A3=this.measureSuperTextWidth(Ar,A0.substr(A4),Ai);if(Av+A3>=Ah){break;}}if(A4>=0){break;}else{Av+=A3;}}if(A6>=0){if(A4>0){Am.v=A0.substr(0,A4);Am.textWidth=this.measureSuperTextWidth(Ar,Am.v,Ai);A9=A9.slice(0,A6+1);}else{if(A4===0){A9=A9.slice(0,A6);}}A9.push({v:"...",textWidth:Ah});}else{A9=[{v:"...",textWidth:Ah}];}}}if(A8){return{text:A9,truncated:Ay,maxLineLen:Af,canWordWrap:Ak};}return A9;},getRankMode:function O(Ak){var Am=1,Al=2,Aj=3,Af=4,Ah=5,Ae=6,Ai=7,Ag=U.INVALID;if(Ak){if(AP(Ak,Aj,Al)){Ag=U.TOP_PERCENT;}else{if(AP(Ak,Aj,Am)){Ag=U.BOTTOM_PERCENT;}else{if(AP(Ak,Ae,Af)){Ag=U.BOTTOM;}else{if(AP(Ak,Ae,Ah)){Ag=U.TOP;}else{if(AP(Ak,Ai)){Ag=U.VALUE;}}}}}}return Ag;},getColorByTitle:function Z(Af,Ae){if(Ae===U.BOTTOM_PERCENT||Ae===U.TOP_PERCENT){Af=mstrmojo.desc(2787,"Percentage of ##").replace("'##'",Af);}else{if(Ae===U.BOTTOM||Ae===U.TOP){Af=mstrmojo.desc(2788,"Rank of ##").replace("'##'",Af);}}return Af;},getColorByFormatStr:function f(Af,Ae){if(Ae===U.BOTTOM_PERCENT||Ae===U.TOP_PERCENT){Af="0%;(0%)";}else{if(Ae===U.BOTTOM||Ae===U.TOP){Af="";}}return Af;},getColorByItems:function AU(Ae,Ao,Av,Ar,Am,Ak,As){var Aq=[],Aw,Ag,Al=mstrmojo.num,Aj,An;if(Ae===undefined||Ae.length===0){return Aq;}var Ay=true;if(Ae.length>1){if(Ae[0].ceil===Ae[1].flr){Ay=false;}else{Ay=true;}}for(Aw=0;Aw<Ae.length;Aw++){var Ax=Ae[Aw],Ai={},Af=Ax.ceil,Au=Ax.flr;if((Aw===0&&Ay)||(Aw===Ae.length-1&&!Ay)){if(Ao===U.BOTTOM_PERCENT||Ao===U.TOP_PERCENT){Ai.flr=Au/100;Ai.ceil=1;}else{if(Ao===U.TOP||Ao===U.BOTTOM){Au+=1;Ai.flr=Math.floor(Au);Ai.ceil=Am;}else{Ai.flr=Au;Ai.ceil=Av;}}An=Ai.ceil;}else{if((Aw===0&&!Ay)||(Aw===Ae.length-1&&Ay)){if(Ao===U.BOTTOM_PERCENT||Ao===U.TOP_PERCENT){Ai.flr=0;Ai.ceil=Af/100;}else{if(Ao===U.TOP||Ao===U.BOTTOM){Ai.flr=0;Ai.ceil=Math.floor(Af);}else{Ai.flr=Ar;Ai.ceil=Af;}}Aj=Ai.flr;}else{if(Ao===U.BOTTOM_PERCENT||Ao===U.TOP_PERCENT){Au=Au/100;Af=Af/100;}else{if(Ao===U.TOP||Ao===U.BOTTOM){Au+=1;Au=Math.floor(Au);Af=Math.floor(Af);}}Ai.flr=Au;Ai.ceil=Af;}}if(Ao===U.TOP||Ao===U.BOTTOM){Ai.ceil=Ai.ceil>Am?Am:Ai.ceil;}if(Ak){Ai.label=Al.formatByMask(Ak,Ai.flr);if(Ai.flr!==Ai.ceil){Ai.label+=" - "+Al.formatByMask(Ak,Ai.ceil);}}else{Ai.label=Ai.flr;if(Ai.flr!==Ai.ceil){Ai.label+=" - "+Ai.ceil;}}if(Ax.fmt&&Ax.fmt.bc){Ai.color=Ax.fmt.bc;}else{Ai.color=As;}Aq.push(Ai);}Aq=Aq.filter(function(Az){return Az.flr<=Az.ceil&&!(Az.flr>An||Az.ceil<Aj);});if(Ao!==U.VALUE){if(Aq[0]&&(Aq[0].label===0)){Aq.shift();}}if(Ao===U.TOP||Ao===U.BOTTOM){Ag=Am;}else{if(Aq.length>0){if(Ay){Ag=Aq[0].ceil-Aq[(Aq.length-1)].flr;}else{Ag=Aq[(Aq.length-1)].ceil-Aq[0].flr;}}}var At=0,Ap,Ah;for(Aw=0;Aw<Aq.length;Aw++){if(Aw===Aq.length-1){Aq[Aw].scopePercent=1-At;}else{if(Ao===U.TOP||Ao===U.BOTTOM){Ah=Aq[Aw].ceil-Aq[Aw].flr+1;}else{Ah=Aq[Aw].ceil-Aq[Aw].flr;}Ap=Ah/Ag;Aq[Aw].scopePercent=Ap;At+=Ap;}}return Aq;},getDefaultColorByItems:function(Ah,Af,Ag){var Ae={};Ae.label=Ag+" - "+Af;Ae.flr=Ag;Ae.ceil=Af;Ae.color=Ah;Ae.scopePercent=1;return[Ae];},getNumberFormat:function(Ah,Af){var Ai=Ah.nf,Ag=Ah.gvs;function Ae(){var Al=(Ag&&Ag.items&&Ag.items[0]&&Ag.items[0].items)||[],Ak=Al[Af]||{},Aj=Ak.nfs;return typeof Aj==="string"?Aj:"";}if(Ai[Af]&&typeof Ai[Af].nfs!=="string"){Ai[Af].nfs=Ae();}return Ai[Af]&&Ai[Af].nfs;},hasOnlyMetricsOnColumn:function(Af){var Ae=(Af&&Af.gts&&Af.gts.col)||[];return Ae.every(function(Ag){return Ag.otp===n.DssTypeUnknown&&(Ag.es||[]).every(function(Ah){return Ah.otp===n.DssTypeMetric;});});},hasNoMetricOnRow:function(Af){var Ag=(Af&&Af.gts&&Af.gts.row)||[],Ae=function(Ah){return Ah.otp!==n.DssTypeMetric;};return Ag.every(Ae);},getAttMetricCount:function(){var Ah=this.getEditingGridData&&this.getEditingGridData()||this.model&&this.model.data,Al=Ah&&Ah.gsi,Ak=Al&&Al.rows||[],Ag=Al&&Al.cols||[],Af=[].concat(Ak).concat(Ag),Aj=Al&&Al.mx||[],Ae=0,Ai=Aj.length;Aa.forEach(Af,function(Am){if(Am.t!==n.DssTypeMetric){Ae++;}});return{attCount:Ae,metricCount:Ai};},isOnExpressMode:function(){return mstrApp.isExpress;},modifyScExp:function(Am,Ae,Aq,Ak){if(!Am||!Ae){return ;}var Ah=Am.nds,Al,Af,An,Ap,Ao,Aj,Ai,Ag;Aa.forEach(Ah||[],function(Ar){Al=Ar.nds;Aa.forEach(Al||[],function(As){Af=As.es;Aa.forEach(Af||[],function(At){Ap=At.v;Aj=Ak[Ap];if(!Aj){Aj=Aq.getNormalizedFormElementId(Ap);Ak[Ap]=Aj;}Aa.forEach(Ae||[],function(Au){An=Au.es;Aa.forEach(An||[],function(Av){Ag=false;Ao=Av.id;if(Ao===Ap){Ag=true;}else{Ai=Ak[Ao];if(!Ai){Ai=Aq.getNormalizedFormElementId(Ao);Ak[Ao]=Ai;}if(Aj===Ai){Ag=true;}}if(Ag){At.v=Av.id;At.n=Av.n;return false;}});if(Ag){return false;}});});});});},modifyScExpDeprecated:function(Ak,Al,Ai,Ag){if(!Ak||!Al){return ;}var Ah=Ak.nds,Af,Ae,Aj;Aa.forEach(Ah||[],function(Am){Af=Am.nds;Aa.forEach(Af||[],function(An){Ae=An.es;Aa.forEach(Ae||[],function(Ao){Aa.forEach(Al||[],function(Ap){Aa.forEach(Ap||[],function(Aq){Aj=Aq.es;Aa.forEach(Aj||[],function(Ar){if(Ai.call(Ag,Ar.id,Ao.v)){Ao.v=Ar.id;Ao.n=Ar.n;}});});});});});});},getMouseOffset:function(Af){var Ae=(Af.offsetX!==undefined)?Af.offsetX:(Af.layerX),Ag=(Af.offsetY!==undefined)?Af.offsetY:(Af.layerY);return{x:Ae,y:Ag};},translateLineStyle:function(Ae){var Ag=["none","solid","solid","dashed","dotted"],Af=["1px","1px","2px","1px","1px"];return{width:Af[Ae]||"0px",style:Ag[Ae]||"none"};},getVisStyle:function(){var Ae=mstrmojo.VisUtility;return Ae.getPropertyByPath(this,"model.data.visName")||Ae.getPropertyByPath(this,"model.data.vis.vn");},getGroupAndCalculationContextMenuForDataPoints:function(Ap,A3){var Ar,At=[],Ag=[],A0=[],Al=A3.fnCellName,Av=A3.fnUnique,Ak=A3.fnMakeNode,Ay=Ap.getCellForNode.bind(Ap),A5=A3.selection;var Aj=new d.ui.menus.MenuConfig(),Af=new d.ui.menus.MenuConfig(),Ax=new d.ui.menus.MenuConfig(),A2=new d.ui.menus.MenuConfig();function A4(A6){Ap.cmSelCells=At[A6].cmSelCells;Ap.derivedElementGroup(Ay(Ap.cmSelCells[0]));}function Am(A8){Ap.cmSelCells=Ag[A8].cmSelCells;var A7=Ay(Ag[A8].cmSelCells[0]),A6=Ap.getDEInfo(A7);Ap.derivedElementsEdit(Ay(Ap.cmSelCells[0]),A6);}function Au(A7){Ap.cmSelCells=Ag[A7].cmSelCells;var A6=Ay(Ag[A7].cmSelCells[0]);Ap.removeQuickDE(A6);}function As(A7){Ap.cmSelCells=Ag[A7].cmSelCells;var A6=Ay(Ag[A7].cmSelCells[0]);Ap.renameDEList(A6);}function Aw(A6){V(Ap,Ay(Ap.cmSelCells[0]),null,A6,false);}function Ae(A6){V(Ap,Ay(Ap.cmSelCells[0]),null,A6,true);}function Ai(A7){var A6=Ay(Ag[A7].cmSelCells[0]);Ap.removeQuickDE(A6);}function A1(A7){var A6=Ay(Ag[A7].cmSelCells[0]);Ap.editDECalculation(A6);}function An(A7,A6){return function(){var A8=new d.ui.menus.MenuConfig();A8.addNonInteractiveMenuItem(mstrmojo.desc(11859,"Based on"),"xt",true);A8.addRadioMenuGroup(null,A7,A6,"checkMark",undefined,true);return A8;};}function Aq(A6){A6=A6||[];function A7(BB){var A8=BB.extra||{},BC=BB.setup||mstrmojo.emptyFn,A9=BB.action||mstrmojo.emptyFn,BA=[];BC(BA,A8);A9(BA,A8);}A6.forEach(A7);}var Ah=[{name:"group",setup:function(A6){At.forEach(function(A7){Ap.cmSelCells=At[A7.v].cmSelCells;if(!Object.prototype.hasOwnProperty.call(Ag,A7.v)&&X(Ap)){A6.push(A7);}});},action:function(A7){var A6;if(A7.length===1){A6=A7[0].v;Aj.addMenuItem(mstrmojo.desc(1911,"Group"),"xt",function(){Ap.cmSelCells=At[A6].cmSelCells;Ap.derivedElementGroup(Ay(Ap.cmSelCells[0]));});}if(A7.length>1){Aj.addPopupMenuItem(mstrmojo.desc(1911,"Group"),Ap.id,An(A4,A7),"xt");}}},{name:"edit-group",setup:function(A6){Ag.forEach(function(BA){var A9=Ay(Ag[BA.v].cmSelCells[0]),A8=Ap.getDEInfo(A9),A7=A8&&A8.de;if(A7&&A7.t===T.LIST){A6.push(BA);}});},action:function(A7){var A6,A9,A8;if(A7.length===1){A6=Ag[A7[0].v].cmSelCells;A9=Ay(A6[0]);A8=Ap.getDEInfo(A9);Af.addMenuItem(mstrmojo.desc(13395,"Edit Group..."),"xt",function(){Ap.cmSelCells=A6;Ap.derivedElementsEdit(Ay(Ap.cmSelCells[0]),A8);});Af.addMenuItem(mstrmojo.desc(12195,"Ungroup"),"xt",function(){Ap.cmSelCells=A6;Ap.removeQuickDE(A9);});A2.addMenuItem(mstrmojo.desc(13968,"Rename Group..."),"xt",function(){Ap.cmSelCells=A6;Ap.renameDEList(A9);});}if(A7.length>1){Af.addPopupMenuItem(mstrmojo.desc(13395,"Edit Group..."),Ap.id,An(Am,A7),"xt");Af.addPopupMenuItem(mstrmojo.desc(12195,"Ungroup"),Ap.id,An(Au,A7),"xt");A2.addPopupMenuItem(mstrmojo.desc(13968,"Rename Group..."),Ap.id,An(As,A7),"xt");}}},{name:"calculation",setup:function(A6){A0.forEach(function(A9,A8,A7){Ap.cmSelCells=A7[A9.v].cmSelCells;var BB=Ay(Ap.cmSelCells[0]),BA=Ap.getDEInfo(BB),BC=BA&&BA.de;if(!(BC&&BC.t===T.RESIDUE)&&j(Ap)){A6.push(A9);}});},action:function(A6){if(A6.length===1){Aj.addPopupMenuItem(mstrmojo.desc(5188,"Calculation"),Ap.id,function(){var A7=A6[0].v,A8=new d.ui.menus.MenuConfig();Ap.cmSelCells=A0[A7].cmSelCells;A8.addRadioMenuGroup(null,Aw,k(Ap,null,Al).items,"checkMark",undefined,true);return A8;},"xt");}if(A6.length>1){Aj.addPopupMenuItem(mstrmojo.desc(5188,"Calculation"),Ap.id,function(){return new mstrmojo.ui.menus.EditorConfig({cssClass:"base-on-calculation-editor",data:{},hasToggleItem:true,contents:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11859,"Based on")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"attrList",items:A6,selectedIndex:0,onitemSelected:function(A7){var A8=A7.v;Ap.cmSelCells=A0[A8].cmSelCells;this.parent.checkList.set("items",[]);this.parent.checkList.set("items",k(Ap,null,Al).items);this.parent.data.set("valid",false);}},{scriptClass:"mstrmojo.VisMenuList",alias:"checkList"}],bindings:{okEnabled:"this.valid",valid:function(){return this.data.valid;}},fnOk:function(A8,A7){V(Ap,Ay(Ap.cmSelCells[0]),null,A7.checkList.selectedItem.v,false);}});});}}},{name:"edit-calculation",setup:function(A6){Ag.forEach(function(BA){var A9=Ay(Ag[BA.v].cmSelCells[0]),A8=Ap.getDEInfo(A9),A7=A8&&A8.de;if(A7&&A7.t===T.CALCULATION&&j(Ap)){A6.push(BA);}});},action:function(A6){function A7(){var A8=A6[0].v;Ap.cmSelCells=Ag[A8].cmSelCells;var BC=Ay(Ap.cmSelCells[0]),BB=Ap.getDEInfo(BC),BD=BB&&BB.de,BA=k(Ap,BD,Al),A9=new d.ui.menus.MenuConfig();A9.addRadioMenuGroup(BA.selectedItem.value,Ae,BA.items,"checkMark",undefined,true);return A9;}if(A6.length===1){Ax.addPopupMenuItem(mstrmojo.desc(12196,"Edit Calculation"),Ap.id,A7,"xt");Ax.addMenuItem(mstrmojo.desc(12197,"Delete Calculation"),"xt",function(){var A8=A6[0].v;Ap.cmSelCells=Ag[A8].cmSelCells;var A9=Ay(Ap.cmSelCells[0]);Ap.removeQuickDE(A9);});A2.addMenuItem(mstrmojo.desc(13967,"Rename Calculation..."),"xt",function(){var A8=A6[0].v;Ap.cmSelCells=Ag[A8].cmSelCells;var A9=Ay(Ap.cmSelCells[0]);Ap.editDECalculation(A9);});}if(A6.length>1){Ax.addPopupMenuItem(mstrmojo.desc(12196,"Edit Calculation"),Ap.id,function(){return new mstrmojo.ui.menus.EditorConfig({data:{},hasToggleItem:true,contents:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11859,"Based on")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"attrList",items:A6,selectedIndex:0,onitemSelected:function(BB){var BC=BB.v;Ap.cmSelCells=Ag[BC].cmSelCells;var BA=Ay(Ap.cmSelCells[0]),A9=Ap.getDEInfo(BA),BD=A9&&A9.de;var A8=k(Ap,BD,Al);this.parent.checkList.set("items",[]);this.parent.checkList.set("items",A8.items);this.parent.checkList.set("selectedItem",A8.selectedItem);this.parent.data.set("valid",false);}},{scriptClass:"mstrmojo.VisMenuList",alias:"checkList"}],bindings:{okEnabled:"this.valid",valid:function(){return this.data.valid;}},fnOk:function(A9,A8){V(Ap,Ay(Ap.cmSelCells[0]),null,A8.checkList.selectedItem.v,true);}});});Ax.addPopupMenuItem(mstrmojo.desc(12197,"Delete Calculation"),Ap.id,An(Ai,A6),"xt");A2.addPopupMenuItem(mstrmojo.desc(13967,"Rename Calculation..."),Ap.id,An(A1,A6),"xt");}}}];Ar=Av(A5);Ar.forEach(function(A7){var A9=Ak(A7),A6=Ay(A9),A8,BA,BB;if(!Ap.model.supportsViewFilterActions(A6.tid)){return ;}A8=A6.dei===undefined?At:Ag;BA=A6.tid;BB=Ap.model.getObjectInfo(BA).n;if(A8[BA]===undefined){A8[BA]={};A8[BA].cmSelCells=[];A8.push({n:BB,v:BA,text:BB,value:BA});}A8[BA].cmSelCells.push(A9);if(A0[BA]===undefined){A0[BA]={};A0[BA].cmSelCells=[];A0.push({n:BB,v:BA,text:BB,value:BA});}A0[BA].cmSelCells.push(A9);});var Ao=mstrmojo.VisUtility;var Az=Ao.getVisStyle.call(Ap);if(Az===t.HEAT_MAP){Ah.splice(2,2);}Aq(Ah);return{createDe:Aj,editGroup:Af,editCalculation:Ax,renameDe:A2};},getGroupAndCalculationContextMenu:function(Am,A0,Ax){var Az=Am,At=Ax.skipSingleAttrCheck||Az.isSingleAttrSelection(),Ah=false,Aj=Az.isSingleContextMenuSelection(),An=Az.getDEInfo(A0),Ai=An&&An.deObject,Aw=An&&An.de,Ar=Ai&&Az.getOthersDEInfo(Ai),Ap=Az.getContextMenuSelections(),Av=true,Al=Ax.fnCellName,Ay=this.getPropertyByPath(Az,"model.data.visName")||this.getPropertyByPath(Az,"model.data.vis.vn");var Ak=new d.ui.menus.MenuConfig(),Af=new d.ui.menus.MenuConfig(),Aq=new d.ui.menus.MenuConfig(),Au=new d.ui.menus.MenuConfig();Az.cmSelCells=Ax.selection;if(Am.model.supportsViewFilterActions(A0.tid)){if((Ah||At)&&AN(A0,r)&&X(Az)){Ak.addMenuItem(mstrmojo.desc(1911,"Group"),"xt",function(){Am.derivedElementGroup(A0);});}if(Aj&&Aw&&Aw.t===T.LIST){Af.addMenuItem(mstrmojo.desc(13395,"Edit Group..."),"xt",function(){Am.derivedElementsEdit(A0,An);});Af.addMenuItem(mstrmojo.desc(12195,"Ungroup"),"xt",function(){Am.removeQuickDE(A0);});Au.addMenuItem(mstrmojo.desc(13968,"Rename Group..."),"xt",function(){Am.renameDEList(A0);});}var Ao=function(A1){V(Az,A0,Aw,A1,false);},As=function(A1){V(Az,A0,Aw,A1,true);};if(Ar&&!Aj&&At){S.forEach(Ap,function(A1){if(A1[0]&&A1[0].eid.indexOf(Ar.id)>-1){Av=false;return false;}});}if(Ay!=="VIHeatMapVisualizationStyle"&&!(Aj&&Aw&&Aw.t===T.RESIDUE)&&(Ah||At)&&AN(A0,AB)&&j(Az)){var Ae=function(){var A1=new d.ui.menus.MenuConfig(),A2=k(Az,null,Al);A1.addRadioMenuGroup(null,Ao,A2.items,"checkMark",undefined,true);return A1;};Ak.addPopupMenuItem(mstrmojo.desc(5188,"Calculation"),this.id,Ae,"xt");}if(Aj&&Aw&&Aw.t===T.CALCULATION&&j(Az)){var Ag=function(){var A1=new d.ui.menus.MenuConfig(),A2=k(Az,Aw,Al);A1.addRadioMenuGroup(A2.selectedItem.value,As,A2.items,"checkMark",undefined,true);return A1;};Aq.addPopupMenuItem(mstrmojo.desc(12196,"Edit Calculation"),this.id,Ag,"xt");Aq.addMenuItem(mstrmojo.desc(12197,"Delete Calculation"),"xt",function(){Am.removeQuickDE(A0);});Au.addMenuItem(mstrmojo.desc(13967,"Rename Calculation..."),"xt",function(){Am.editDECalculation(A0);});}}return{createDe:Ak,editGroup:Af,editCalculation:Aq,renameDe:Au};},isHostedPopupNode:function(Ah,Ag,Af,Ae){return AE(Ah,Ag,"mstrmojo-popup-widget-hosted",Af,Ae);},isMojoEditorNode:function(Ah,Ag,Af,Ae){return AE(Ah,Ag,"mstrmojo-Editor",Af,Ae);},applyStyle2Legend:function(Ah,Ag,Af){var Ae,Aj={},Ai={};for(Ae in Ah){if(Ae.indexOf("font")>=0||Ae.indexOf("color")>=0||Ae.indexOf("textDecoration")>=0){Aj[Ae]=Ah[Ae];}else{Ai[Ae]=Ah[Ae];}}if(Ag){Ag.style.background="";this.applyStyles2DomNode(Ag,Ai);}if(Af){this.applyStyles2DomNode(Af,Aj);}},mergeMenuConfigs:function AD(Af,Ae){function Ag(Ai,Aj,Ah){if(!Aj){return ;}if(!Ah&&Ai.hasMenuItems()&&Aj.hasMenuItems()){Ai.addSeparator();}if(Aj.hasMenuItems()){Ai.absorbMenuItems(Aj);}}return Ae.reduce(function(Ah,Ai){Ag(Ah,Af[Ai.name],Ai.noSeparator);return Ah;},new mstrmojo.ui.menus.MenuConfig());},absorbMenuItems:function(Af,Ae,Ag){Af.addDisposable(Ae);Af.absorbMenuItems(Ae);if(Ag&&Ae.menus.length>0){Af.addSeparator();}},addWheelListener:(function(){var Ah=mstrmojo.dom,Ag=Ah.attachEvent,Af=Ah.preventDefault,Ai;function Ae(Am,Al,An,Ak){var Aj=(Ai==="wheel")?An:function(Ao){if(!Ao){Ao=window.event;}var Aq={originalEvent:Ao,target:Ao.target||Ao.srcElement,type:"wheel",deltaMode:(Ao.deltaMode!==undefined?Ao.deltaMode:1),deltaX:0,deltaZ:0,preventDefault:function(){Af(window,Ao);}},Ap=this;if(Ai==="mousewheel"){Aq.deltaY=-Ao.wheelDelta;if(Ao.wheelDeltaX!==undefined){Aq.deltaX=-Ao.wheelDeltaX;}}else{Aq.deltaY=Ao.detail;}return An.call(Ap,Aq);};return Ag(Am,Al,Aj,Ak);}if(Object.prototype.hasOwnProperty.call(document.createElement("div"),"onwheel")){Ai="wheel";}else{Ai=document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll";}return function(Ak,Al,Aj){return Ae(Ak,Ai,Al,Aj);};}()),addTouchSupportHelper:function AG(Ae,Ag,Af,Aj,Ai){Ae.style["touch-action"]="none";var Ah={MINDRAG:function(Ak){return(((Ak.event.type.indexOf("touch")===0)||(Ak.event.type.indexOf("pointer")===0))?5:1);},TAPHOLDDELAY:250,DBLCLICKDELAY:300};q.newInstance(Ae,{context:Ah,start:Af,change:Aj,end:Ai},Ag);},addBasicTouchSupport:function w(Aj,Al,Ao,Ai,An){function Ap(At){var As={left:0,top:0};function Aq(Au){if(Au===window||Au===document||Au===document.body){return As;}else{return Au.getBoundingClientRect();}}function Ar(Ax,Ay,Av){Ay=Ay||Ax.currentTarget||Ax.srcElement;if(!Array.isArray(Av)){Av=[0,0];}var Au=Ax.clientX||0;var Az=Ax.clientY||0;var Aw=Aq(Ay);Av[0]=Au-Aw.left;Av[1]=Az-Aw.top;return Av;}return Ar(At.changedTouches?At.changedTouches[0]:At,document.body);}function Ah(Aq,As){if(Aq.touches.length>1||(Aq.type==="touchend"&&Aq.touches.length>0)){return undefined;}var Ar=null,Au=null;switch(Aq.type){case"touchstart":Ar="mousedown";Au=Aq.changedTouches[0];break;case"touchmove":Ar="mousemove";Au=Aq.changedTouches[0];break;case"touchend":Ar="click";Au=Aq.changedTouches[0];break;}if(As){Ar=As;}var At={bubbles:Aq.bubbles,cancelable:Aq.cancelable,view:Aq.view,screenX:Au.screenX,screenY:Au.screenY,clientX:Au.clientX,clientY:Au.clientY};if(As==="contextmenu"){At.button=2;At.buttons=2;}return new MouseEvent(As,At);}function Ak(As,Aq){var Ar;if(As.type.indexOf("touch")===0){Ar=Ah(As,Aq);}else{var At=Ap(As),Au={bubbles:As.bubbles,cancelable:As.cancelable,view:As.view,detail:As.detail,screenX:As.screenX,screenY:As.screenY,clientX:At[0],clientY:At[1]};if(Aq==="contextmenu"){Au.button=2;Au.buttons=2;}Ar=new MouseEvent(Aq,Au);}Ar.originEvent=As;return Ar;}function Ag(Aq){if(Aq.stopPropagation){Aq.stopPropagation();}if(Aq.preventDefault){Aq.preventDefault();}Aq.cancelBubble=true;return false;}function Ae(Ar){var Au=Ar.event,Aq=Ar.context;Aq.startOffset=Ap(Au);Aq._dragged=false;Aq._dragging=true;Aq._taphold=false;Aq.initialTarget=Au.target;var At=(new Date()).getTime();if(At-Aq._mouseDownTime<Aq.DBLCLICKDELAY){Aq.numClicks+=1;}else{Aq.numClicks=1;Aq._mouseDownTime=At;}Aq.tapholdTimeoutId=setTimeout(function(){if((new Date()).getTime()-Aq._mouseDownTime>Aq.TAPHOLDDELAY&&!Aq._dragged){Aq._taphold=true;}if(!Aq._dragged&&Aq._taphold){Ar.session.listeners.end(Au);}},Aq.TAPHOLDDELAY+10);var As;if(Ao){As=Ao(Ar);}if(As===undefined||(As&&As.pause)){Ag(Ar.event);}}function Am(Au){var Aq=Au.event,At=Au.context,Aw=Ap(Aq),As=Aw[0]-At.startOffset[0],Ar=Aw[1]-At.startOffset[1];if(Math.abs(As)<At.MINDRAG(Au)){As=0;}if(Math.abs(Ar)<At.MINDRAG(Au)){Ar=0;}if(As||Ar){At._dragged=true;}if((new Date()).getTime()-At._mouseDownTime>At.TAPHOLDDELAY&&!At._dragged){At._taphold=true;}var Av;if(Ai){Av=Ai(Au);}if(Av===undefined||(Av&&Av.pause)){Ag(Au.event);}}function Af(Ar){var Aq=Ar.context,At=Ar.event;if(Aq.tapholdTimeoutId){clearTimeout(Aq.tapholdTimeoutId);}if(!Aq._dragging){Aq._dragged=false;return ;}Aq._dragging=false;if((new Date()).getTime()-Aq._mouseDownTime>Aq.DBLCLICKDELAY){Aq.numClicks=Math.max(Aq.numClicks-1,1);}if((new Date()).getTime()-Aq._mouseDownTime>Aq.TAPHOLDDELAY&&!Aq._dragged){Aq._taphold=true;}var As;if(An){As=An(Ar);}if(At.type.indexOf("mouse")===0){Aq._dragged=false;Aq._taphold=false;return ;}else{if(!Aq._dragged){if(Aq._taphold){Aq.initialTarget.dispatchEvent(Ak(At,"contextmenu"));}else{Aq.initialTarget.dispatchEvent(Ak(At,"click"));}}Aq._dragged=false;Aq._taphold=false;if(As===undefined||(As&&As.pause)){Ag(Ar.event);}}}this.addTouchSupportHelper(Aj,Al,Ae,Am,Af);},isNearZero:function(Af,Ae){Ae=Ae||5;var Ag=1/Math.pow(10,Ae);return(Math.abs(Af)<Ag);},hasMergedRowCells:function(Ae){return false;},getMockUpThresholds:function(Ag,Ah){var Ae=[{tid:1,n:"threshold 0",scope:1,rtp:2,rtxt:"",fmt:{bc:"#cc2525",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"10%",dtp:5}],fn:2,fnt:3}],fn:19},ttp:1,flr:0,ceil:10},{tid:2,n:"threshold 1",scope:1,rtp:2,rtxt:"",fmt:{bc:"#e34b4b",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"10%",dtp:5},{v:"30%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:10,ceil:30},{tid:3,n:"threshold 2",scope:1,rtp:2,rtxt:"",fmt:{bc:"#e97d7d",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"30%",dtp:5},{v:"50%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:30,ceil:50},{tid:4,n:"threshold 3",scope:1,rtp:2,rtxt:"",fmt:{bc:"#79d479",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"50%",dtp:5},{v:"70%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:50,ceil:70},{tid:5,n:"threshold 4",scope:1,rtp:2,rtxt:"",fmt:{bc:"#57ba57",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"70%",dtp:5},{v:"90%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:70,ceil:90},{tid:6,n:"threshold 5",scope:1,rtp:2,rtxt:"",fmt:{bc:"#2ca02c",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"90%",dtp:5}],fn:5,fnt:3}],fn:19},ttp:1,flr:90,ceil:100}];S.forEach(Ae,function(Aj){var Ai=Aj.expr.nds[0].m;Ai.did=Ag;Ai.n=Ah;});var Af={};Af[Ag]=Ae;return Af;},generateThresholdsInfo:function(Ag,Al,Ae,Ai){var Ak=Ae.length,Af=[],Ao,Ah,Ap=0,An=0;for(var Aj=0;Aj<Ak;Aj++){Ah=Math.round(Ai[Aj]*100);An=Ap;Ap=Ah||100;Ao={tid:Aj+1,n:"threshold "+Aj,scope:1,rtp:2,rtxt:"",fmt:{bc:Ae[Aj],bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:Ag,n:Al},cs:[{v:Ah+"%",dtp:5}],fn:2,fnt:3}],fn:19},ttp:1,ceil:Ap,flr:An};Af.push(Ao);}var Am={};Am[Ag]=Af;return Am;},psPt2CssPt:function(Ag,Af){var Ae=parseInt(Ag,10)*0.75;if(Af instanceof Function){Ae=Af(Ae);}return Ae+"pt";},captureEventOnce:function(Aj,Ai,Ae,Ah,Ag){function Af(Ak){Ai.call(Ae,AV.newDomEvent(Aj,window,Ak||window.event),Ag);z.detachEvent(Ah,Aj,Af);}Ag=Ag||{};Ah=Ah||document;z.attachEvent(Ah,Aj,Af);},getPropertyByPath:function(Ai,Ah,Ae){var Af,Ag;if(typeof Ah!=="string"){return Ae;}Af=Ah.split(".");Ag=Af.every(function(Ak){var Aj=Ai[Ak];if(Aj!==undefined){Ai=Aj;return true;}return false;});return Ag?Ai:Ae;},mergeHashes:function(){return Array.prototype.slice.apply(arguments).reduce(function(Ae,Af){if(Af){Object.keys(Af).forEach(function(Ag){Ae[Ag]=Af[Ag];});}return Ae;},{});},toggleControlEnabled:function(Ae,Af){[].concat(Ae).forEach(function(Ag){Ag.set("enabled",!!Af);});},findInArray:function(Ah,Ag,Af){var Aj=-1,Ai,Ae;if(!Array.isArray(Ah)){return Aj;}for(Ai=Af===undefined?0:Af,Ae=Ah.length;Ai<Ae;Ai+=1){if(Ag(Ah[Ai])){return Ai;}}return Aj;},arrayUnique:function(Ae,Ag){if(!Array.isArray(Ae)){return Ae;}var Af=mstrmojo.VisUtility;return Ae.filter(function(Ah,Ai){return Af.findInArray(Ae,function(Aj){return Ag(Ah,Aj);},Ai+1)===-1;});},range:function(Ae,Ai,Ah){Ah=Ah||1;var Ag,Af=[];for(Ag=Ae;Ag!==Ai;Ag+=Ah){Af.push(Ag);}return Af;},drawDashLine:function I(Am,Ag,Ak,Af,Ai,Ae,Al){var Aj=(Ag===Af),Ah;Am.beginPath();Am.moveTo(Ag,Ak);if(Aj){Ah=0;Ak+=Ae;while(Ak<=Ai){if(Ah%2===0){Am.lineTo(Ag,Ak);Ak+=Al;}else{Am.moveTo(Ag,Ak);Ak+=Ae;}Ah++;}if(Ah%2===0){Am.lineTo(Af,Ai);}}else{Ah=0;Ag+=Ae;while(Ag<=Af){if(Ah%2===0){Am.lineTo(Ag,Ak);Ag+=Al;}else{Am.moveTo(Ag,Ak);Ag+=Ae;}Ah++;}if(Ah%2===0){Am.lineTo(Af,Ai);}}Am.stroke();},repeat:function(Ag,Ah){var Ae=[],Af;Ah=Math.max(0,Ah);for(Af=0;Af<Ah;Af+=1){Ae[Af]=Ag;}return Ae;},isHierarchyObject:function(Ae){return(Ae&&Ae.t)===n.DssTypeDimension;},selectDropZonePanel:function(Ae){x(Ae,"editPanel");},selectPropertyPanel:function(Af,Ag){x(Af,"propertiesPanel");var Ae=Af.edtModel;if(Ae){Ae.selectTargetByValue(Ag);}},pluck:function(Af,Ae){if(!S.isArray(Af)){return Af;}return Af.map(function(Ag){return Ag&&Ag[Ae];});},pick:function(Af,Ae){return Ae.reduce(function(Ah,Ag){Ah[Ag]=Af[Ag];return Ah;},{});},isColorManuallySet:function(Ag,Af){var Ae=Ab(Ag,Af);if(Ae){return Ae.isManual;}},getCombColor:function(Ag,Af){var Ae=Ab(Ag,Af);if(Ae){return Ae.color;}},setColorPickerShowAutomatic:function(Af,Ae){Af.children[0].fillColor.colorPicker.showAutomatic=Ae;},getCharGroupValueChangeCb:function(Ae){var Af=(function(){var Ag={};Ag[AO.FONT_WEIGHT]=AS.FS_BOLD;Ag[AO.FONT_STYLE]=AS.FS_ITALIC;Ag[AO.UNDERLINE]=AS.FS_UNDERLINE;Ag[AO.LINE_THROUGH]=AS.FS_STRIKETHROUGH;return function(Ah,Ai){return Ah^Ag[Ai];};}());return function(Ah,Ag){if(Ae instanceof Function){Ae=Ae();}if(!Ae){return ;}switch(Ah){case AO.COLOR:Ae.fontColor.fill.value.setValue(Ag);break;case AO.FONT_SIZE:Ae.fontSize.setValue(Ag);break;case AO.FONT_FAMILY:Ae.fontFamily.setValue(Ag);break;case AO.FONT_WEIGHT:case AO.FONT_STYLE:case AO.UNDERLINE:case AO.LINE_THROUGH:Ae.fontStyle.setValue(Af(Ae.fontStyle.getValue(),Ah));break;}};},getMetricsInDropZone:AK,addLegendFontChangeListeners:function(Af,Ag){var Ae=["lgdFntClr","lgdFntSz","lgdFntFml","lgdFntStyle"];AW(Ae,Af,Ag);},addLegendBackgroundChangeListeners:function(Af,Ag){var Ae=["lgdBgFillClr","lgdBgFillTrans"];AW(Ae,Af,Ag);},isValidDropZone:function(Ae){if(Ae===undefined){return false;}var Ag=Object.keys(Ae).filter(function(Ah){return Ah!=="visProp";});var Af=W.copyProps(Ag,Ae);return Ae&&!W.equals(Af,{});},unitExistInTemplate:function(Ah,Ae){var Ag,Aj,Ai=Ae.row,Af=Ae.col;for(Ag=0,Aj=Ai.length;Ag<Aj;Ag++){if(Ai[Ag].id===Ah){return true;}}for(Ag=0,Aj=Af.length;Ag<Aj;Ag++){if(Af[Ag].id===Ah){return true;}}return false;},findDisabledUnits:function(An,Ao){var Aj,Af,Ah=Ao.docModel.datasets,Ae=An.gts,Al=An.datasetId,Ai=Ah[Al]||{},Ak=Ai.att||[],Am=[];var Ag=mstrmojo.VisUtility;if(Ak){for(Aj=0,Af=Ak.length;Aj<Af;Aj++){if(!Ag.unitExistInTemplate(Ak[Aj].did,Ae)){Am.push(Ak[Aj]);}}}return Am;},getDrillCandidates:function(Aj,Ak){var Am=Aj.modelData,Ao=Aj.model,Ai=Ao.docModel.datasets,Ae=Am.gts,Ag=mstrmojo.VisUtility,Ap=Ag.findDisabledUnits(Am,Ao),Af=[],Ah=(function(){var Aq;if(Ak){S.forEach(Ae.row.concat(Ae.col),function(Ar){if(Ar.id&&Ar.id===Ak){Aq=Ar.dp;}});}return Aq;}()),Al=function(Aq,At){var Ar=S.find(Aq,"did",At.id),As=Aq[Ar];if(As&&!As.hide){At.n=As.n;return true;}return false;},An=S.filter(Ah,function(As){var Aq;for(Aq in Ai){var Ar=Ai[Aq];if(Al(Ar.att,As)){return true;}}return false;});if(An){Af=S.filter(Ap,function(Ar){for(var Aq in An){if(An[Aq].n===Ar.n){return true;}}return false;});}return Af;},getDrillSubMenu:function(Ae){if(!Ae||!Ae.items||!Ae.drillAction){return{};}var Ai=new mstrmojo.ui.menus.MenuConfig({supportsScroll:true,isHostedWithin:false,alignWithAnchor:true,maxHeight:350}),Af=Ae.items,Ah=Ae.drillAction,Ag=[];if(mstrmojo.resolveFeature("sort-drill-paths")){Af.sort(function(Ak,Aj){if(Ak.n>Aj.n){return 1;}if(Ak.n<Aj.n){return -1;}return 0;});}Af.forEach(function(Al,Aj){if(Ag.indexOf(Al.did)===-1){Ag.push(Al.did);if(Al.att){var Ak=mstrmojo.VisUtility;var Am={};W.copy(Ae,Am);Am.items=Af[Aj].att;Ai.addPopupMenuItem(Al.n,this.id,Ak.getDrillSubMenu,"xt",Am);}else{Ai.addMenuItem(Al.n,"xt",Ah,W.copy(Ae,{drillUnit:Al}));}}});return Ai;},getDrillMenu:function(Ak,Al,Aq,Ae){var Am=Ak.model,Ah=mstrmojo.VisUtility,An=Ah.getDrillCandidates(Ak,Al),Ao=An.length,Aj=Am.docModel,Ag=Aj.datasets[Ak.modelData.datasetId],Au,Ap=[],As=-1,Ar,At,Ai,Af;if(Ag&&Aj.isMDXDataset(Ag)){Ah.sortMdxDrillCandidates(An);Au=Ag.tables[0];Au.dimensions.forEach(function(Av){Ai=true;Ar=-1;Av.hierarchies.forEach(function(Aw){Af=true;Aw.att.forEach(function(Ax){At=Aa.findBin(An,Ax,"did",Ao);if(At!==-1){if(Ai){Ap.push({id:Av.did,did:Av.did,n:Av.n,att:[]});As++;Ai=false;}if(Af){Ap[As].att.push({id:Aw.did,did:Aw.did,n:Aw.n,att:[]});Ar++;Af=false;}Ap[As].att[Ar].att.push(An[At]);}});});});}else{Ap=An;}return Ah.getDrillSubMenu(W.copy(Ae,{items:Ap,drillAction:Aq}));},sortMdxDrillCandidates:function(Ae){Ae.sort(function(Ag,Af){if(Ag.did<Af.did){return -1;}if(Ag.did>Af.did){return 1;}return 0;});return Ae;},getDrillMenuItemsCallback:function(Ag,Ah,Ae,Af){return function(){var Aj=mstrmojo.VisUtility;var Ak=Aj.getDrillCandidates(Ag,Af),Ai=new mstrmojo.ui.menus.MenuConfig({supportsScroll:true,maxHeight:350});Ak.forEach(function(Al){Ai.addMenuItem(Al.n,"xt",Ah,W.copy(Ae,{drillUnit:Al}));});return Ai;};},doDrill:function(Ag,Au,Ap,Av){var Aw=Ag;function Am(Ay){return Ay.model.controller.cmdMgr;}function As(){return{success:function Ay(){var Az=mstrmojo.VisUtility;Az.visPrint("reaise");this.raiseEvent({name:"regenerateToolbar"});}.bind(this)};}var Af=Aw.model,At=(Aw.getDocModel&&Aw.getDocModel())||Aw.model.docModel,Ar=At.getDataService(),Aj=Ar.newUpdate();var Al=true;if(At.prefs&&At.prefs.rtprnt){Al=parseInt(At.prefs.rtprnt,10)===1;}else{if(Af.xtab.defn.tkp!==undefined){Al=parseInt(Af.xtab.defn.tkp,10)===-1;}}Av=Av||{};Av.keepParent=Al;var Ak=Ap.call(Ag,Au,Av);var An=Aw.zonesModel,Ax=An.getUpdateCallback(),Ao=Aw.model.controller||At.controller,Ah=Ao._getXtabCallback(Aw);Aj.add(Ak,AZ(Ax,Ah));var Ae=Af.getSelectorDataFromTemplateLimit(Aw.model.data.tpl).concat({keepOnly:true,data:Aw.getContextMenuSelections()}),Aq=At.getKeepOnlyOrExcludeAction(Aw.k,Ae);Aj.add(Aq,As.call(Aw));Am(Aw).execute({execute:function Ai(){this.submitUpdate(Aj);},urInfo:{callback:Aj.callback}});},strStartsWith:function(Ag,Af,Ae){Ae=Ae||0;return Ag.lastIndexOf(Af,Ae)===Ae;},changeWidgetBackground:function(Ag,Ah,Af){var Ae=Ag.parent;if(Ae&&Ah!==Af){Ae.changeUnitFormats(false,1,Ag.getFormats(),AO.BACKGROUND_COLOR,Ah,Af);Ae.raiseEvent({name:"BEMFormatChange",propertyName:AO.BACKGROUND_COLOR,value:Ah,isTitle:false});}},translateGridError:function(Af,Ae){if(Ae===undefined){Ae=Ac.AE_ERROR;}if(Ae===Ac.EMPTY_DATA){Af=mstrmojo.desc(2388,"No data returned for this view. This might be because the applied filter excludes all data.");}if(Ae===Ac.NO_DATASET||Ae===Ac.NO_TEMPLATE_UNIT){Af=mstrmojo.desc(11668,"Drag objects here.");}if(!Af){Af=mstrmojo.desc(13687,"Unknown error");}return{msg:Af,type:Ae};},hasValidValueInMetric:function(Ah,Af){var Ae=mstrmojo.VisUtility;var Ag=Ae.getPropertyByPath(Ah,"model.data.gsi.mx");if(Ag===undefined||Ag.length<=Af||Af<0){return false;}var Ai=Ag[Af];return["min","max"].every(function(Aj){var Ak=Ai[Aj];return Ak!==undefined&&Ak!==null&&Ak!=="";});},renderWidgetErrorRSD:function(Ah,Aj,Af){var Al=document.createElement("div");var Ak='<div style="display: table; height: 100%; width: 100%; background-color:#F5F5F2; border: solid 1px #A7A7A7; box-sizing: border-box;"><div style="display: table-cell; vertical-align: middle; text-align: center; color: #000000; font-size: 14pt;">'+Aj+"</div></div>";Al.innerHTML=Ak;Al=Al.firstChild;var Ae=Ah.width,Ag=Ah.height;if(Ae!==undefined){Al.style.width=Ae+"px";}if(Ag!==undefined){Al.style.height=Ag+"px";}var Ai=Ah.domNode;if(Ai){Af.forEach(function(Am){Ai["on"+Am]=undefined;});while(Ai.firstChild){Ai.removeChild(Ai.firstChild);}Ai.appendChild(Al);}else{Ah.parent.domNode.appendChild(Al);}},visPrint:function(){var Ae=mstrmojo.VisUtility.enableInVis;if(Ae&&window.mstr_profile&&mstr_profile.enabled&&console){Function.prototype.apply.call(console.log,console,arguments);}},hasCGorCon:function(Ah,Ae){var Ag=Ae&&Ae.did,Af=Ah.model.data.datasetId||"",Ai=null;if(Ag){Ai=AQ.getDatasetFromAttributeId(Ah.model.docModel.datasets,Ag);}else{if(Af){Ai=AQ.getDatasetFromId(Ah.model.docModel.datasets,Af);}}return Ai&&AQ.hasCGorCon(Ai);},isCGorCon:function l(Ah,Ae){var Ag=Ae&&Ae.did,Af=Ah.model.data.datasetId||"",Ai=null;if(Ag){Ai=AQ.getDatasetFromAttributeId(Ah.model.docModel.datasets,Ag);}else{if(Af){Ai=AQ.getDatasetFromId(Ah.model.docModel.datasets,Af);}}return Ai&&AQ.isCGorCon(Ae,Ai);},findElementsByAttribute:function R(Ag,Ai,Ah,Ae){Ae=!!Ae;var Aj=[];if(Ah.constructor!==Array){Ah=[Ah];}var Ak=function(Al){if(Ae){return Al.identity&&Al.identity.tlOpt&&Al.identity.tlOpt[Ai];}else{return Al.getAttribute(Ai);}};function Af(An){var Al=Ak(An),Am;if(An.hasChildNodes()){Am=An.firstChild;while(Am){if(Am.nodeType===1){Al=Ak(Am);if(Ah.indexOf(Al)!==-1){Aj.push(Am);}else{Af(Am);}}Am=Am.nextSibling;}}}Af(Ag);return Aj;},restoreEsForUnit:function AM(Ai){if(!Ai){return ;}var Aj=Ai.es,Af=Ai.fs,Ah=Ai.otp,Ae=Af&&Af.length||0;function Ag(Ak){var Al=document.createElement("div");Al.innerHTML=Ak;return Al.innerText;}if(Aj){S.forEach(Aj,function(Al,Ak){Al.n=b.decodeHtmlString(Al.n);if(Ah===n.DssTypeAttribute&&Ae){switch(Af[Ak%Ae].bftp){case AI.DssBaseFormHTMLTag:Al.n=Ag(Al.n);break;default:}}});}},isTrue:function AR(Ae){return Ae==="true"||Ae===true;},getFontFamilyItems:function p(){if(P){return P;}else{P=[];S.forEach(Q.Families.slice(1),function(Ae){P.push({n:Ae.n,id:Ae.n,did:Ae.n,preview:!Ae.symbolic});});return P;}},surroundWithQuotes:function AL(Ae){if(!Ae){return"";}return"'"+Ae.replace(/^['|"]+/,"").replace(/['|"]+$/,"")+"'";}});mstrmojo.VisUtility.enableInVis=true;}());(function(){mstrmojo.requiresCls("mstrmojo.locales");mstrmojo.requiresCls("mstrmojo.chart.enums.EnumFontStyle");mstrmojo.requiresCls("mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart.common","DSSDateTime","ScalePlate");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphDataTextShowType","EnumDSSGraphObject");var g=mstrmojo.chart,c=g.model,o=mstrmojo.VisUtility,Q=g.enums,E=Q.EnumFontStyle,S=c.enums,x=S.EnumDSSGraphProperty,X=S.EnumDSSGraphDataTextShowType,y=S.EnumDSSGraphObject;var F=mstrmojo.gm.EnumDataLabels;var V=[["xAxLbFntClr","yAxLbFntClr","dlFntClr","lgdFntClr"],["xAxLbFntFml","yAxLbFntFml","dlFntFml","lgdFntFml"],["xAxLbFntSz","yAxLbFntSz","dlFntSz","lgdFntSz"],["xAxLbFntStyle","yAxLbFntStyle","dlFntStyle","lgdFntFml"]];var p=[["majorGridLnThk","minerGridLnThk","majorGridLnThk","minerGridLnThk"],["majorGridLnClr","minerGridLnClr","majorGridLnClr","minerGridLnClr"],["majorGridLnStyle","minerGridLnStyle","majorGridLnStyle","minerGridLnStyle"]];var Y=[["bgFillClr"],["bgFillStyle"],["bgFillTrans"]];function U(AH){switch(AH){case x.DssGraphFontColor:return 0;case x.DssGraphFontName:return 1;case x.DssGraphFontSize:return 2;case x.DssGraphFontStyle:return 3;case x.DssGraphFontSize100:return 4;default:return -1;}}function t(AH){switch(AH){case x.DssGraphAreaColor:return 0;case x.DssGraphFillEffect:return 1;case x.DssGraphAreaAlpha:return 2;}return -1;}function v(AH){var AI;switch(AH){case y.DssGraphX1Body:case y.DssGraphX1Label:case y.DssGraphX1Major:case y.DssGraphX1Minor:case y.DssGraphUserLabel3:case y.DssGraphUserLine3:AI="X1";break;case y.DssGraphX2Body:case y.DssGraphX2Label:case y.DssGraphX2Major:case y.DssGraphX2Minor:case y.DssGraphUserLabel4:case y.DssGraphUserLine4:AI="X2";break;case y.DssGraphY1Body:case y.DssGraphY1Label:case y.DssGraphY1Major:case y.DssGraphY1Minor:case y.DssGraphUserLabel1:case y.DssGraphUserLine1:AI="Y1";break;case y.DssGraphY2Body:case y.DssGraphY2Label:case y.DssGraphY2Major:case y.DssGraphY2Minor:case y.DssGraphUserLabel2:case y.DssGraphUserLine2:AI="Y2";break;case y.DssGraphZBody:AI="Z";break;case y.DssGraphO1Body:case y.DssGraph2DO1Label:case y.DssGraphO1Major:case y.DssGraphO1Minor:AI="O1";break;case y.DssGraphO2Body:case y.DssGraph2DO2Label:case y.DssGraphO2Major:case y.DssGraphO2Minor:AI="O2";break;default:AI="No_Axis";break;}return AI;}function d(AH,AI){if(!!AH===false){return undefined;}return undefined;}function W(AM,AH){if(!!AM===false){return undefined;}var AR,AP,AO=AH.isVertical!==undefined?AH.isVertical:true,AJ=AH.isGridChart||false,AS=AH.isPieShape||false,AN={Name:0,Value:0},AK=AM.gaid,AL=AM.goid,AI=AM.gsid,AQ=AM.v;if(!!AK===false){return undefined;}switch(AK){case x.DssGraphShowLBLFeeler:if(AS){AN.Name="DataLabel";if((AQ&X.DssGraphDataTextValue)!==0){AN.Value=F.SHOW_VALUE_ONLY;}else{if((AQ&X.DssGraphDataTextLabel)!==0){AN.Value=F.SHOW_TEXT_ONLY;}else{AN.Value=F.HIDE;}}}break;case x.DssGraphAreaColor:case x.DssGraphFillEffect:case x.DssGraphAreaAlpha:AP=t.call(this,AK);if(AP<0){return undefined;}if(AL===y.DssGraphBackground){AN.Name=Y[AP][0];if(AN.Name.search("Trans")!==-1){AN.Value=AQ/255*100;}else{AN.Value=AQ;}}break;case x.DssGraphShowLegendText:AN.Name="LegendVisibleness";AN.Value=AQ===0?false:true;break;case x.DssGraphSDShowDataText:AN.Name="ShowSeriesDataLabel";AN.Value=AQ!==0;break;case x.DssGraphShowDataText:if(AS===false){AN.Name="DataLabel";AN.Value=F.HIDE;if(AQ&X.DssGraphDataTextValue){AN.Value=F.SHOW_VALUE_ONLY;}else{if(AQ&X.DssGraphDataTextLabel){AN.Value=F.SHOW_TEXT_ONLY;}}}break;case x.DssGraphFontColor:case x.DssGraphFontName:case x.DssGraphFontSize100:case x.DssGraphFontSize:case x.DssGraphFontStyle:AN.Value=AQ;AR=v.call(this,AL);AP=U.call(this,AK);if(AP<0){return undefined;}if(AP===4){AP=3;AN.Value/=100;}if(AR==="No_Axis"){if(AL===y.DssGraphDataText){if(AS){return undefined;}AN.Name=V[AP][2];}else{if(AL===y.DssGraphPieFeelerLabel||AL===y.DssGraphPieFeelerLabel){if(AS===false){return undefined;}AN.Name=V[AP][2];}else{if(AL===y.DssGraphLegendText){AN.Name=V[AP][3];}else{return undefined;}}}}else{if(AR[0]==="X"){AN.Name=V[AP][0];}else{if(AR[0]==="Y"){AN.Name=V[AP][1];}else{if(AR[0]==="O"){AN.Name=AO?V[AP][0]:V[AP][1];}else{return undefined;}}}}break;}return AN;}var T,i=String.fromCharCode,AB=mstrmojo.locales.datetime,AG=0,L=document.getElementById("measureText"),B={},h={};var m=0.03,K=0,R=0,H=0.2;function n(AI){var AH,AJ=[],AK;for(AH=0;AH<=AI;AH++){AK=AH.toString(16);if(AK.length===1){AK="0"+AK;}AJ[AH]=AK;}T=AJ;return AJ;}function AE(AH){var AI=parseFloat(AH);if(isNaN(AI)===false&&AI!==undefined&&AI!==null){return AI;}return 0;}function D(AH){AH=AH.replace(/ddd/g,"EEE");AH=AH.replace(/AM\/PM/g,"a");AH=AH.replace(/tt/g,"a");AH=AH.replace(/:'/g,":");AH=AH.replace(/'\/'/g,"/");AH=AH.replace(/\\/g,"");var AI,AK=true,AJ=AH.length;for(AI=0;AI<AJ;AI++){if(AH[AI]==="h"||AH[AI]==="H"||AH[AI]===":"){AK=true;}else{if(AH[AI]===" "&&AK){AK=true;}}if(AH[AI]==="m"&&AK){AH=AH.substring(0,AI)+"M"+AH.substring(AI+1);}}return AH;}mstrmojo.chart.common.Utility=mstrmojo.provide("mstrmojo.chart.common.Utility",{point2D:{},rect2D:{},tripleId:{create:function M(AI,AM,AK,AJ,AL){if(AI===null||AI===undefined){AI=-3;}if(AM===null||AM===undefined){AM=-3;}if(AK===null||AK===undefined){AK=-3;}var AH={mObjectId:AI,mSeriesId:AM,mGroupId:AK};if(AJ!==undefined&&AJ!==null){AH.angleByIndex=AJ;}if(AL!==undefined&&AL!==null){AH.sliceById=AL;}return AH;},walks:function k(AL,AJ){if(!!AL===false||!!AJ===false){return null;}if(AL.length===1){return AJ[AL[0]];}var AK=(AL&&AL.length)||0,AI,AH=AL[AI];for(AI=0;AI<AK;AI++){if(AJ[AH]===undefined){AJ[AH]={};}AJ=AJ[AH];}return AJ;},equal:function a(AH,AI){return(AH.mObjectId===AI.mObjectId&&AH.mSeriesId===AI.mSeriesId&&AH.mGroupId===AI.mGroupId);},reset:function q(AJ,AL,AK,AI,AH,AM){AJ.mObjectId=AL!==undefined?AL:-3;AJ.mSeriesId=AK!==undefined?AK:-3;AJ.mGroupId=AI!==undefined?AI:-3;if(AH!==undefined&&AH!==null){AJ.angleByIndex=AH;}if(AM!==undefined&&AM!==null){AJ.sliceById=AM;}return AJ;}},transformProperty:function A(AH,AJ,AI){if(AJ===0){return W.call(this,AH,AI);}return d.call(this,AH,AI);},abbreviateNumber:function b(AR,AH){var AS,AI,AT="",AK=(AR<0),AU=(this.isIntegar(AR)===false);if(AU){AH++;}if(AR<0){AH++;}var AN=AK?-AR:AR;var AO=0;if(AN>=1e+27){AN=999;AT="Y";}else{if(AN>=1e+24){AN/=1e+24;AT="Y";}else{if(AN>=1e+21){AN/=1e+21;AT="Z";}else{if(AN>=1000000000000000000){AN/=1000000000000000000;AT="E";}else{if(AN>=1000000000000000){AN/=1000000000000000;AT="P";}else{if(AN>=1000000000000){AN/=1000000000000;AT="T";}else{if(AN>=1000000000){AN/=1000000000;AT="B";}else{if(AN>=1000000){AN/=1000000;AT="M";}else{if(AN>=1000){AN/=1000;AT="K";}else{if(AN>=1){AO++;}else{if(AN>=0.001){AO++;}else{if(AN>=0.000001){AO++;}else{if(AN>=1e-9){AO++;}else{if(AN>=1e-12){AO++;}else{AK=false;}}}}}}}}}}}}}}if(this.isIntegar(AN)===false){AS=AN.toString();var AJ=5,AM=2,AV;AI=AS.indexOf(".");AV=AS.length-AI-1;if(AV>AJ||(AV>AM&&AV>AI)){if(AV>AJ&&AH-AV<0){AM=Math.max(AM,Math.min(AM,AH-AV));}else{AM=Math.max(1,Math.min(AM,AH-AV));}AN=AN.toFixed(AM);}}AS=AN.toString();if(this.isIntegar(AN)===false){var AQ=AS.length-1;AI=AS.indexOf(".");if(AI!==-1){if(AI>=AQ){AS=AS.substring(0,AI);}else{var AP,AL=true;for(AP=AQ;AP>AI&&AL;--AP){if(AS[AP]!=="0"){AL=false;}}if(AL){AS=AS.substring(0,AI);}}}}if(AK){AS="-"+AS;}AS+=AT;return AS;},getScalePlate:function AD(AH){AH=AH||false;this.mScalePlate=mstrmojo.chart.common.ScalePlate;if(AH){this.mScalePlate.clear();}return this.mScalePlate;},prepareScalePlateOptions:function AA(AJ,AI,AK){var AH={mUseLogarithmicScale:AJ,mAlwaysIncludeZero:!AJ&&(AI||!!(AK&1)||!!(AK&2)),mShowMinLabel:true,mShowMaxLabel:true,mDrawCustomLine:false,mAxisMinValue:0,mAxisMaxValue:0,mAxisCustomValue:0,mUseCustomMinMax:false};return AH;},evaluateTextMargin:function P(AH){this.mTextMargins=this.mTextMargins||{};var AI=this.mTextMargins;if(AI[AH]){return AI[AH];}var AJ=[];AJ[0]=Math.floor(AH*m+0.5);AJ[1]=Math.floor(AH*K+0.5);AJ[2]=Math.max(Math.floor(AH*R+0.5),1);AI[AH]=AJ;return AJ;},AlmostZero:function w(AH){return(Math.abs(AH)<0.000001);},isValidNumber:function J(AH){if(typeof AH==="number"){if(AH===0){return true;}return !!AH;}return false;},isIntegar:function j(AH){return AH===+AH&&AH===(AH|0);},HasArrayIntersection:function O(AI,AH){var AJ;for(AJ=0;AJ<AI.length;AJ++){if(AH.indexOf(AI[AJ])!==-1){return true;}}return false;},EscapeString:function C(AH){var AJ='"',AI='\\"',AK=new RegExp(AJ,"g");return String(AH).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"\\\\").replace(AK,AI).replace(/\r\n/g,"<br/>").replace(/\r/g,"<br/>").replace(/\n/g,"<br/>");},EscapeStringForJSON:function N(AH){var AJ='"',AI='\\"',AK=new RegExp(AJ,"g");return String(AH).replace(/\\/g,"\\\\").replace(AK,AI).replace(/\r/g,"\\r").replace(/\n/g,"\\n");},TrimLastComma:function AC(AI){var AH;if(!AI.buf||AI.len===-1){return ;}AH=AI.len;var AJ=String(AI.buf[AH]);if(AJ&&AJ[AJ.length-1]===","){AI.buf[AH]=AJ.slice(0,-1);}},decodeUTF8:function f(AH){var AI="",AK=0,AM=0,AL=0,AJ=0;while(AK<AH.length){AM=AH.charCodeAt(AK);if(AM<128){AI+=i(AM);AK++;}else{if((AM>191)&&(AM<224)){AL=AH.charCodeAt(AK+1);AI+=i(((AM&31)<<6)|(AL&63));AK+=2;}else{AL=AH.charCodeAt(AK+1);AJ=AH.charCodeAt(AK+2);AI+=i(((AM&15)<<12)|((AL&63)<<6)|(AJ&63));AK+=3;}}}return AI;},formatDateTimeValue:function e(AI,AN){var AL=new mstrmojo.chart.common.DSSDateTime({ifTime:AN});var AH="";var AK="";var AO=0;while(AO<AI.length){var AJ=1;switch(AI.charAt(AO)){case"[":AO++;while(AO<AI.length&&AI.charAt(AO)!=="]"){AK+=AI.charAt(AO);AO++;}if(AK.length>0&&(AK[0]===">"||AK[0]==="<"||AK[0]==="=")){AK="";}AO++;break;case"y":AO++;while(AO<AI.length&&AI.charAt(AO)==="y"){AJ++;AO++;if(AJ===4){break;}}if(AJ===1||AJ===2){AH+=this.fillZeroToWidth(AL.mnYear%100,2);}else{if(AJ===3){AH+=this.fillZeroToWidth(AL.mnYear%100,2);AO--;}else{if(AJ===4){AH+=AL.mnYear;}}}break;case"M":AO++;while(AO<AI.length&&AI.charAt(AO)==="M"){AJ++;AO++;}if(AJ<3){AH+=this.fillZeroToWidth(AL.mnMonth,AJ);}else{if(AJ===3){AH+=AB.MONTHNAME_SHORT[AL.mnMonth];}else{AH+=AB.MONTHNAME_FULL[AL.mnMonth];}}break;case"d":AO++;while(AO<AI.length&&AI.charAt(AO)==="d"){AJ++;AO++;}if(AJ<3){AH+=this.fillZeroToWidth(AL.mnDay,AJ);}else{if(AJ===3){AH+=AB.dayShortNames[AL.mnDay];}else{AH+=AB.dayNames[AL.mnDay];}}break;case"h":AO++;while(AO<AI.length&&AI.charAt(AO)==="h"){AJ++;AO++;}var AM=AL.mnHour;if(AM===0){AM=12;}if(AM>12){AM-=12;}AH+=this.fillZeroToWidth(AM,AJ);break;case"H":AO++;while(AO<AI.length&&AI.charAt(AO)==="H"){AJ++;AO++;}AH+=this.fillZeroToWidth(AL.mnHour,AJ);break;case"m":AO++;while(AO<AI.length&&AI.charAt(AO)==="m"){AJ++;AO++;}AH+=this.fillZeroToWidth(AL.mnMinute,AJ);break;case"s":AO++;while(AO<AI.length&&AI.charAt(AO)==="s"){AJ++;AO++;}AH+=this.fillZeroToWidth(AL.mnSecond,AJ);break;case"S":AO++;while(AO<AI.length&&AI.charAt(AO)==="S"){AJ++;AO++;}AH+=this.fillZeroToWidth(AL.mnMillisecond,AJ);break;case"a":AM=AL.mnHour;if(AM<12){AH+=AB.AM_NAME;}else{AH+=AB.PM_NAME;}AO++;break;default:AH+=AI.charAt(AO++);break;}}if(AK.length!==0){AH='<SPAN STYLE="COLOR: '+AK+'" >'+AH+"</SPAN>";}return AH;},fillZeroToWidth:function l(AL,AJ){var AI="",AK=AI+AL;var AH=AK.length;while(AH<AJ){AK="0"+AK;AH++;}return AK;},updateCache:function AF(AI,AL,AM){var AK=(AL&&AL.length)||0,AJ,AH,AN=AI;for(AJ=0;AJ<AK-1;AJ++){AH=AL[AJ];if(!AN[AH]){AN[AH]={};}AN=AN[AH];}AN[AL[AK-1]]=AM;},measureTextHeight:function(AM,AJ,AQ,AN,AH){var AP,AL=AM;if(AL===" "){AL="\u00A0";}AH=AH||"pt";if(typeof AQ==="number"){AQ=AQ+AH;}var AI="none",AO="normal";if(AN&E.FS_ITALIC){AI="italic";}if(AN&E.FS_BOLD){AO="bold";}var AK={fontFamily:AJ,fontSize:AQ,fontStyle:AI,fontWeight:AO};if(h&&h.H&&h.H[AJ]&&h.H[AJ][AQ]&&h.H[AJ][AQ][AN]){AP=h.H[AJ][AQ][AN];}else{AP=o.measureTextHeight("H",AK,1);this.updateCache(h,["H",AJ,AQ,AN],AP);}return AP;},measureText:function u(AO,AL,AU,AP,AJ){var AI=true,AH,AS=AU+1;var AN=AO;if(AN===" "){AN="\u00A0";}AJ=AJ||"pt";if(typeof AU==="number"){AU=AU+AJ;}if(B&&B[AN]&&B[AN][AL]&&B[AN][AL][AU]&&B[AN][AL][AU][AP]){return B[AN][AL][AU][AP];}if(AI){var AK="normal",AQ="normal";if(AP&E.FS_ITALIC){AK="italic";}if(AP&E.FS_BOLD){AQ="bold";}var AM={fontFamily:AL,fontSize:AU,fontStyle:AK,fontWeight:AQ};if(h&&h.H&&h.H[AL]&&h.H[AL][AU]&&h.H[AL][AU][AP]){AS=h.H[AL][AU][AP];}else{AS=o.measureTextHeight("H",AM,true);this.updateCache(h,["H",AL,AU,AP],AS);}AH=o.measureTextWidth(AO,AM,0);}else{if(!L){var AR=document.createElement("div");AR.id="measureText";AR.style.position="absolute";AR.style.top="0";AR.style.visibility="hidden";AR.style.height="auto";AR.style.width="auto";document.body.appendChild(AR);L=AR;}L.innerHTML="";L.appendChild(document.createTextNode(AN));L.style.fontFamily=AL;L.style.fontSize=AU;L.style.fontWeight="normal";L.style.fontStyle="none";if(AP&E.FS_ITALIC){L.style.fontStyle="italic";}if(AP&E.FS_BOLD){L.style.fontWeight="bold";}AH=L.scrollWidth+1;AS=L.scrollHeight+1;}var AT={Width:AH,Height:AS};this.updateCache(B,[AN,AL,AU,AP],AT);return AT;},ReplaceDecimalPoint:function z(AI,AH){return AI.replace(".",AH);},ReplaceMinusSign:function s(AH,AI){return AH.replace("-",AI);},insert:function G(AI,AH,AJ){if(typeof AI==="string"&&typeof AH==="string"&&AJ<=AI.length){return AI.substr(0,AJ)+AH+AI.substr(AJ);}return AI;},InsertThousandSeparator:function r(AJ,AK,AO){var AH=AO.mstrDecimalPoint;var AI=AJ.indexOf(AH);if(AI===-1){AI=AJ.length;}var AL=0;while(AL<AI&&!this.chk_val(AJ.charAt(AL))){AL++;}var AN=AJ;var AM;for(AM=AI-3;AM>AL;AM-=3){AN=this.insert(AN,AK,AM);}return AN;},chk_val:function I(AH){return/^\d+$/.test(AH);},hFormatValue:function Z(AU,AL,Af,A4){var AS=0;var An=0;var Ab=AU.length;var BC=false;if(!A4){A4={};var Al=window.navigator.userLanguage||window.navigator.language;var BN=Al.split("-");this.mstrLanguageCode=BN[0];this.mstrCountryCode=BN[1]||BN[0];A4.mstrThousandSeparator=mstrmojo.locales.number.THOUSANDSEPARATOR||",";A4.mstrCurrencySymbol="$";A4.mstrDecimalPoint=mstrmojo.locales.number.DECIMALSEPARATOR||".";A4.mstrPercentSign="%";A4.mstrMinusSign="-";}while(AS<Ab){if(AU.charAt(AS)==='"'){AS++;while(AS<Ab&&AU.charAt(AS)!=='"'){AS++;}AS++;}else{if(AU.charAt(AS)==="["){AS++;var Am="";while(AS<Ab&&AU.charAt(AS)!=="]"){Am+=AU.charAt(AS);AS++;}if(Am.length>1&&(Am.charAt(0)===">"||Am.charAt(0)==="<"||Am.charAt(0)==="=")){var AI=-1;var A6=0;switch(Am.charAt(0)){case">":if(Am.charAt(1)>="0"&&Am.charAt(1)<="9"){AI=1;A6=1;}else{if(Am.charAt(1)==="="&&Am.length>2&&Am.charAt(2)>="0"&&Am.charAt(2)<="9"){AI=2;A6=2;}}break;case"=":if(Am.charAt(1)>="0"&&Am.charAt(1)<="9"){AI=3;A6=1;}else{if(Am.charAt(1)==="="&&Am.length>2&&Am.charAt(2)>="0"&&Am.charAt(2)<="9"){AI=3;A6=2;}}break;case"<":if(Am.charAt(1)>="0"&&Am.charAt(1)<="9"){AI=5;A6=1;}else{if(Am.charAt(1)==="="&&Am.length>2&&Am.charAt(2)>="0"&&Am.charAt(2)<="9"){AI=4;A6=2;}}break;}if(AI>0){var AW=Am.substr(A6);var BF=parseFloat(AW);if((AI===1&&AL>BF)||(AI===2&&AL>=BF)||(AI===3&&AL===BF)||(AI===4&&AL<=BF)||(AI===5&&AL<BF)){BC=true;}return mstrmojo.num.formatByMask(AU,AL);}}}else{if(AU.charAt(AS)===";"){if(BC){Ab=AS;break;}else{An=AS+1;AS++;}}else{AS++;}}}}if(!BC){An=0;}AS=An;var As=false;while(AS<Ab){if(AU.charAt(AS)==='"'){AS++;while(AS<Ab&&AU.charAt(AS)!=='"'){AS++;}}else{if(AU.charAt(AS)==="["){AS++;while(AS<Ab&&AU.charAt(AS)!=="]"){AS++;}}else{if(AU.charAt(AS)==="y"||AU.charAt(AS)==="M"||AU.charAt(AS)==="d"||AU.charAt(AS)==="h"||AU.charAt(AS)==="H"||AU.charAt(AS)==="m"||AU.charAt(AS)==="s"||AU.charAt(AS)==="S"){As=true;break;}else{AS++;}}}}if(As){var BA="";if(BC){BA=AU.substr(An,Ab-An);}else{BA=AU;}return mstrmojo.num.formatByMask(BA,AL);}var BE;var Aj;var Ap=false;var AO=false;var A9=false;var Aa=false;var BK=[];var Ae="";var AX=0;var A5=false;var AV=0;var BL="";var AP="";var Ai="";var A3="";var AT=0;var BH=0;var BG=false;var A7=A4.mstrCurrencySymbol;var Ay=A4.mstrThousandSeparator;var Au=A4.mstrDecimalPoint;var A8=A4.mstrPercentSign;var A2=A4.mstrMinusSign;AS=An;var Ah="";if(AL<0&&!BC){while(AS<Ab&&AU.charAt(AS)!==";"){if(AU.charAt(AS)==='"'){AS++;while(AS<Ab&&AU.charAt(AS)!=='"'){AS++;}}AS++;}AS++;if(AS>=Ab){if(AL<0){BL+="-";}AS=An;}}var BM=false;while(AS<Ab){var Ao=false;switch(AU.charAt(AS)){case"[":AS++;while(AS<Ab&&AU.charAt(AS)!=="]"){Ai+=AU.charAt(AS);AS++;}if(Ai.length>0&&(Ai.charAt(0)===">"||Ai.charAt(0)==="<"||Ai.charAt(0)==="=")){Ai="";}AS++;break;case'"':AS++;while(AS<Ab&&AU.charAt(AS)!=='"'){if(BM){AP+=AU.charAt(AS);}else{BL+=AU.charAt(AS);}AS++;}AS++;break;case"#":case"0":var AZ=AU.charAt(AS);BM=true;var Ad=1;AS++;while(AS<Ab&&AU.charAt(AS)===AZ){Ad++;AS++;}if(AS+1<Ab&&AU.charAt(AS)==="-"&&AU.charAt(AS+1)===AZ){Aa=true;BK.push(Ad);AS++;while(true){Ad=0;while(AS<Ab&&AU.charAt(AS)===AZ){Ad++;AS++;}BK.push(Ad);if(AS>=Ab||AU.charAt(AS)!=="-"){break;}AS++;}}while(AS<Ab){if(AU.charAt(AS)===","){if(AS+1<Ab&&AU.charAt(AS+1)===AZ){Ap=true;}else{break;}}else{if(AU.charAt(AS)!==AZ){break;}}AS++;}break;case".":BM=true;AS++;AX=0;while(AS<Ab&&AU.charAt(AS)==="0"){AX++;AS++;}if(AX===0){while(AS<Ab&&AU.charAt(AS)==="#"){AX++;AS++;}}break;case"E":BH=6;while(AS<Ab&&AU.charAt(AS)!=="0"){if(AU.charAt(AS)==="+"&&AS<Ab&&AU.charAt(AS+1)==="0"){AO=true;}else{A3+=AU.charAt(AS);}AS++;}AT=0;while(AS<Ab&&AU.charAt(AS)==="0"){AT++;AS++;}break;case"%":BH=4;AS++;break;case"(":AS++;BL+="(";break;case")":AS++;AP+=")";break;case"-":AS++;if(AL<0){BL+=A2;}break;case"?":AS++;break;case"/":if(AS>An&&AU.charAt(AS-1)==="?"&&AS+1<Ab&&AU.charAt(AS+1)==="?"){BH=5;A5=false;Aj=AS-1;while(Aj>An&&AU.charAt(Aj)==="?"){Aj--;}while(Aj>An&&AU.charAt(Aj)===" "){Aj--;}if(Aj>=An&&(AU.charAt(Aj)==="#"||AU.charAt(Aj)==="0")){A5=true;}AV=0;AS++;while(AS<Ab&&AU.charAt(AS)==="?"){AV++;AS++;}}else{AS++;}break;case",":if(AS>An&&(AU.charAt(AS-1)==="0"||AU.charAt(AS-1)==="#")){A9=true;AS++;}Aj=AS+1;while(Aj<Ab){if(AU.charAt(Aj)===","){Aj++;continue;}else{break;}}if(Aj===Ab||AU.charAt(Aj)==="."){BG=true;}if(BG||(!BG&&AS+1<Ab&&AU.charAt(AS+1)===",")){while(AS<Ab&&AU.charAt(AS)===","){AL/=1000;AS++;}AS--;}AS++;break;case";":Ao=true;break;case"$":if(BM){AP+=A7;}else{BL+=A7;}AS++;break;case"_":if(BM){AP+=" ";}else{BL+=" ";}AS++;AS++;break;default:if(BM){AP+=AU.charAt(AS);}else{BL+=AU.charAt(AS);}AS++;}if(Ao){break;}}if(AL<0){AL=-AL;if(BL.length===0){BL=A2;}}var Aw="";if(Aa){var Ar=0;for(BE=0;BE<BK.length;BE++){Ar+=BK[BE];}Aw=Ah=this.fillZeroToWidth(Ar,AL.toFixed());for(BE=0;BE<BK.length-1;BE++){Ar-=BK[BE];var Aq=Aw.length-Ar;Aw=Aw.slice(0,Aq)+"-"+Aw.slice(Aq);}}else{switch(BH){case 0:if(A9){AL/=1000;}var A0=AL;if(A0<0){A0=-A0;}var AH=0;while(A0>=10){A0/=10;AH++;}if(AH>=15){Aw=Ah=this.fillZeroToWidth((AL<0?-AL:AL),10);var Ak=Aw.indexOf(".");if(Ak!==-1){Aw=Aw.slice(0,Ak)+Aw.slice(Ak+1);}Aw=Aw.substr(0,16);if(Aw.charAt(15)>="5"){var AR=14;while(AR>=0&&Aw.charAt(AR)==="9"){Aw=Aw.slice(0,AR)+"0"+Aw.slice(AR+1);AR--;}var AM=Aw.charAt(AR);AM++;if(AR>=0){Aw=Aw.slice(0,AR)+AM+Aw.slice(AR+1);}else{Aw="1"+Aw;}}Aw=Aw.substr(0,15);var BD;for(BD=AH-14;BD>0;BD--){Aw+="0";}if(AL<0){Aw=A2+Aw;}}else{Ah+=(AL+Math.pow(0.1,AX+6)).toFixed(AX);Aw=Ah;Aw=this.ReplaceDecimalPoint(Aw,Au);if(AL<0){Aw=this.ReplaceMinusSign(Aw,A2);}}if(Ap){Aw=this.InsertThousandSeparator(Aw,Ay,A4);}if(A9){Aw+=Ae;}break;case 5:if(A9){AL/=1000;}var Ag=10;for(BE=1;BE<AV;BE++){Ag*=10;}var AJ={numerator:0,denominator:1};var AQ={numerator:1,denominator:1};var AN={numerator:1,denominator:2};var Av={numerator:0,denominator:1};var Ac=AL>=0;var A1=Math.abs(AL);var Az=parseInt(A1,10);A1-=Az;while(AN.denominator<Ag){if(Math.abs(AE.call(AN)-A1)<1e-15){Av=AN;break;}if(AE.call(AN)>A1){AQ=AN;}else{AJ=AN;}AN.denominator=AJ.denominator+AQ.denominator;AN.numerator=AJ.numerator+AQ.numerator;}if(AN.denominator>=Ag){if(A1-AE.call(AJ)<AE.call(AQ)-A1){Av=AJ;}else{Av=AQ;}}if(Az>0){Av.numerator+=Az*Av.denominator;}if(Av.denominator===0){A5=false;}var BB=false;var Ax=false;var BJ=Av.numerator;if(A5){Az=Math.floor(Av.numerator/Av.denominator);BJ=Av.numerator%Av.denominator;Ax=Ax||(BJ!==0);if(Az>0){BB=true;Ah+=Az;if(Ax){Ah+=" ";}}}if(!Ax&&!BB&&BJ===0){Ah+="0";}else{if(!Ax&&BB&&BJ===0){AG++;}else{Ah+=BJ;Ah+="/";Ah+=Av.denominator;}}Aw=Ah;if(!Ac){Aw=A2+Aw;}if(Ap){Aw=this.InsertThousandSeparator(Aw,Ay,A4);}if(A9){Aw+=Ae;}break;case 4:AL*=100;Ah+=(AL+Math.pow(0.1,AX+6)).toFixed(AX);Aw=Ah;Aw=this.ReplaceDecimalPoint(Aw,Au);if(AL<0){Aw=this.ReplaceMinusSign(Aw,A2);}if(Ap){Aw=this.InsertThousandSeparator(Aw,Ay,A4);}Aw+=A8;break;case 6:var At=AL;var BI=0;if(At>1){while(At>=10){At/=10;BI++;}}else{if(At!==0){while(At<1){At*=10;BI--;}}}Ah+=(At+Math.pow(0.1,AX+6)).toFixed(AX);Ah+=A3;if(AO&&BI>=0){Ah<<"+";}if(BI<0){Ah<<"-";BI=-BI;}Ah+=this.fillZeroToWidth(BI,AT);Aw=Ah;Aw=this.ReplaceDecimalPoint(Aw,Au);if(AL<0){Aw=this.ReplaceMinusSign(Aw,A2);}break;}}var AK=BL+Aw+AP;var AY=false;if(Ai.length!==0&&AY){AK='<SPAN STYLE="COLOR: '+Ai+'" >'+AK+"</SPAN>";}return AK;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.num","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo.gm.GMEnums","mstrmojo.color","mstrmojo.chart","mstrmojo.chart.common.Utility");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject");var n=mstrmojo,B=n.css,o=mstrmojo.array,Q=mstrmojo.hash,I=mstrmojo.num,H=mstrmojo.VisUtility,b=mstrmojo.chart,L=b.enums,c=L.EnumGraphMajorType,K=b.common.Utility,U=b.model,N=U.enums,v=N.EnumDSSGraphObject,z=mstrmojo.VisEnum.ControlType,w=n.gm,V=mstrmojo.gm.EnumTextAlignH,q=mstrmojo.gm.EnumTextAlignV,u=";",j=",",A="_tmsp",M=" ",Z=-20,k=mstrmojo.gm.EnumSelectionOptionLevel,AB=mstrmojo.gm.EnumShape,g=mstrmojo.color,J=mstrmojo.gm.EnumIdentityType,S=0.00001,E,a=Math.pow(2,30),d=Math.pow(2,60);var f=["Reserved",mstrmojo.desc(2125,"Maximum"),mstrmojo.desc(2127,"Minimum"),mstrmojo.desc(2122,"Average"),mstrmojo.desc(2126,"Median"),mstrmojo.desc(4046,"First"),mstrmojo.desc(4049,"Last"),mstrmojo.desc(7194,"Constant")];function l(AH,AG){var AI,AF=AH.length;if(AF!==AG.length){return false;}for(AI=0;AI<AF;AI++){if(AH[AI]!==AG[AI]){return false;}}return true;}function AA(AI,AG,AJ){var AH=false,AK=AJ+A,AF=AI[AK],AL=AG[AK];if(AG[AJ]===undefined){AH=true;}else{if((AL===undefined&&AF!==undefined)||(AL!==undefined&&AF!==undefined&&AL<AF)){AH=true;}}if(AH){AG[AJ]=AI[AJ];if(AL!==undefined){AG[AK]=AF;}}}function AE(AG,AF){var AH;for(AH in AG){if(AG.hasOwnProperty(AH)){AA(AG,AF,AH);}}return AF;}function X(AJ){var AI={},AH,AG=[],AF;o.forEach(AJ,function(AK){if(AK!==undefined){AG.push(AK);}});AF=AG.length;if(AF===1){return AG[0];}for(AH=0;AH<AF;AH++){AE(AG[AH],AI);}return AI;}function y(AF){return{n:AF,s:AF.toString(),on:AF};}function Y(AH,AF,AJ){if(AF===AH){return 0;}var AG=AF-AH,AI=1;while(AG<1){AG*=10;AI/=10;}while(AG>=10){AG/=10;AI*=10;}if(AG<1.8){AI*=0.2;}else{if(AG<3.1){AI*=0.4;}else{if(AG<4.6){AI*=0.5;}else{if(AG>=8.1){AI*=2;}}}}if(AJ){AI=Math.round(AI);if(AI<1){AI=1;}}return AI;}function C(AI,AM,AO,AG){var AK=[];if(AI===AM){if(AI<0){AK.push(mstrmojo.gm.GMUtility.formatNumber(AI,"nearest"));}AK.push({n:0,s:"0",on:0});if(AI>0){AK.push(mstrmojo.gm.GMUtility.formatNumber(AI,"nearest"));}return AK;}var AF=AG>0?AG:Y(AI,AM,AO);var AH=Math.ceil(AM/AF)*AF;if(AH-AM>=AF*0.9){AH=Math.floor(AM/AF)*AF;}var AL=Math.floor(AI/AF)*AF;if(AI-AL>=AF*0.9){AL=Math.ceil(AI/AF)*AF;}var AN=Math.floor((AH-AL+AF/100)/AF)+1,AJ;for(AJ=0;AJ<AN;++AJ){AK.push(mstrmojo.gm.GMUtility.formatNumber(AL+AJ*AF,"nearest"));}return AK;}function T(AF,AI){var AH;AF.mMaxTick=1;if(this.mChartContextPtr.mIsGraphMatrix){AF.mStep=this.mMinimum<0?0.2:0.1;if(AI.mUseCustomMinMax){var AG=AI;AF.mMaxTick=AG.mAxisMaxValue;AF.mMinTick=AG.mAxisMinValue;AF.mMaxTick=Math.min(1,AF.mMaxTick);AF.mMinTick=Math.max(-1,AF.mMinTick);AF.mStep=0.1;}else{if(this.mMaximum>=0.5){AF.mMaxTick=1;AF.mMinTick=Math.floor(this.mMinimum/AF.mStep)*AF.mStep;AF.mMinTick=(AF.mMinTick*this.mMinimum<0)?0:(AF.mMinTick>0?0:AF.mMinTick);if(this.mMinimum<-0.5){AF.mMinTick=-1;}}else{if(this.mMaximum>0){AF.mMaxTick=Math.ceil(this.mMaximum/AF.mStep)*AF.mStep;AF.mMinTick=-1;}else{AF.mStep=0.1;AF.mMaxTick=0;AF.mMinTick=-1;}}}}else{AF.mMinTick=(this.mMinimum<0)?-1:0;if(t.call(this,AF)){return ;}AF.mStep=this.mMajorGrid.mUseManualGrid?this.mMajorGrid.mGridInterval:(AF.mMaxTick-AF.mMinTick)/10;}for(AH=AF.mMinTick+AF.mStep;AH+b.gModuleMain.mTolerance<AF.mMaxTick;AH+=AF.mStep){AF.mTicks.push(Math.round(AH*100)/100);}}function P(AF,AK){var AJ,AG,AM=AK,AL=AM.mDrawCustomLine,AH=AM.mAxisCustomValue,AI;AF.mStep=1;if(this.mMaximum<=0){AF.mMinTick=1;AF.mMaxTick=10;if(AL&&AH<=1){AM.mAxisCustomValue=AF.mMinTick;}return ;}if(this.mMinimum<=0){AG=this.mMaximum>1?0:-1;AF.mMinTick=Math.pow(10,AG);if(AM.mUseCustomMinMax){AF.mMaxTick=this.mMaximum;AJ=Math.floor(h.call(this,this.mMaximum));if(h.call(this,this.mMaximum)===AJ){AJ--;}}else{AJ=Math.ceil(h.call(this,this.mMaximum));AF.mMaxTick=Math.pow(10,AJ);}for(AI=AG+1;AI<AJ;++AI){AF.mTicks.push(Math.pow(10,Math.floor(AI)));}if(AL&&AH<=0){AM.mAxisCustomValue=Math.max(AF.mMinTick,AM.mAxisCustomValue);}return ;}if(AM.mUseCustomMinMax){AJ=h.call(this,this.mMaximum);AG=h.call(this,this.mMinimum);AF.mMaxTick=this.mMaximum;AF.mMinTick=this.mMinimum;}else{AJ=Math.ceil(h.call(this,this.mMaximum));AG=Math.floor(h.call(this,this.mMinimum));AF.mMaxTick=Math.pow(10,AJ);AF.mMinTick=Math.pow(10,AG);}for(AI=AG+1;AI<AJ;++AI){AF.mTicks.push(Math.pow(10,Math.floor(AI)));}if(AL&&AH<=0){AM.mAxisCustomValue=AF.mMinTick;}}function r(AP,AK){var AH=AK,AF,AI;AP.mStep=e.call(this,this.mMaximum,this.mMinimum,AH.mAlwaysIncludeZero);AP.mMaxTick=Math.ceil(this.mMaximum/AP.mStep)*AP.mStep;AP.mMinTick=Math.floor(this.mMinimum/AP.mStep)*AP.mStep;AP.mMaxTick=AP.mMaxTick<this.mMaxmum?this.mMaxmum:AP.mMaxTick;AP.mMinTick=AP.mMinTick>this.mMinimum?this.mMinimum:AP.mMinTick;AP.mMinTick=(AP.mMinTick*this.mMinimum<0)?0:AP.mMinTick;if(AH.mAlwaysIncludeZero){AP.mMaxTick=(this.mMaximum<0)?0:AP.mMaxTick;AP.mMinTick=(this.mMinimum>0)?0:AP.mMinTick;}var AJ=AP.mMaxTick-AP.mMinTick;if(AP.mStep>=AJ){return ;}if(t.call(this,AP)){return ;}AF=Math.floor((AP.mMaxTick-AP.mMinTick+AP.mStep/100)/AP.mStep)+1;var AL=this.mNumberFormat;for(AI=1;AI<AF-1;++AI){var AN=AP.mMinTick+AI*AP.mStep,AO,AG,AM;if(AP.mStep<1&&AL.mFormatType===4&&AL.mCustomFormat.indexOf("%")!==-1){AO=AN*100;if(!K.isIntegar(AO)){AG=Math.round(AO);AM=Math.abs(AO-AG);if(AM<S){AN=AG/100;}}}AP.mTicks.push(AN);}}function D(AP,AJ){var AO=AJ,AI,AF,AM,AH,AL,AK,AG,AN;AP.mMaxTick=AO.mAxisMaxValue;AP.mMinTick=AO.mAxisMinValue;if(t.call(this,AP)){return ;}if(!W.call(this)||this.mMajorGrid.mUseManualGrid){AP.mStep=e.call(this,AP.mMaxTick,AP.mMinTick,false);AI=AP.mMaxTick-AP.mMinTick;if(AP.mStep>=AI){return ;}AF=Math.floor(AI/AP.mStep);if(!(this.mChartContextPtr.mIsTimeSeriesChart)&&AI===AF*AP.mStep){for(AH=1;AH<AF;++AH){AP.mTicks.push(AP.mMinTick+AH*AP.mStep);}}else{AI=AP.mMaxTick-AP.mMinTick;AM=10;AL=false;for(AH=3;AH<AF;++AH){AK=AI/AH;while(AK<1){AK*=10;}while(AK>=10){AK/=10;}if(AK===Math.floor(AK)){AM=AH;AL=true;break;}}if(AL){AP.mStep=AI/AM;for(AH=1;AH<AM;++AH){AP.mTicks.push(AP.mMinTick+AH*AP.mStep);}}else{AG=Math.ceil((AP.mMinTick+AP.mStep/100)/AP.mStep)*AP.mStep;AN=Math.floor((AP.mMaxTick-AP.mStep/100-AG)/AP.mStep)+3;for(AH=0;AH<AN-2;++AH){AP.mTicks.push(AG+AH*AP.mStep);}}}}else{AI=AP.mMaxTick-AP.mMinTick;AM=10;for(AH=6;AH<=9;++AH){AK=AI/AH;while(AK<10){AK*=10;}while(AK>=100){AK/=10;}if(AK===Math.floor(AK)){AM=AH;break;}}AP.mStep=AI/AM;for(AH=1;AH<AM;++AH){AP.mTicks.push(AP.mMinTick+AH*AP.mStep);}}}function F(AF,AJ){var AI,AG,AH;AF.mMaxTick=AJ.mAxisMaxValue;if(AF.mMaxTick<=this.mMinimum){this.mMinimum=AF.mMaxTick-1;}AF.mStep=e.call(this,AF.mMaxTick,this.mMinimum,AJ.mAlwaysIncludeZero&&(AF.mMaxTick>0));AI=(AJ.mAlwaysIncludeZero&&(this.mMinimum>0))?0:this.mMinimum;if(W.call(this)){AF.mMinTick=AF.mMaxTick-Math.ceil((AF.mMaxTick-AI)/AF.mStep)*AF.mStep;}else{AF.mMinTick=Math.floor(AI/AF.mStep)*AF.mStep;}if(t.call(this,AF)){return ;}AG=Math.floor((AF.mMaxTick-AF.mStep/100-AF.mMinTick)/AF.mStep)+2;for(AH=1;AH<AG-1;++AH){AF.mTicks.push(AF.mMinTick+AH*AF.mStep);}}function i(AF,AK){var AG,AJ,AH,AI;AF.mMinTick=AK.mAxisMinValue;if(AF.mMinTick>=this.mMaximum){this.mMaximum=AF.mMinTick+1;}AF.mStep=e.call(this,this.mMaximum,AF.mMinTick,AK.mAlwaysIncludeZero&&(AF.mMinTick<0));AG=(AK.mAlwaysIncludeZero&&(this.mMaximum<0))?0:this.mMaximum;if(W.call(this)){AF.mMaxTick=AF.mMinTick+Math.ceil((AG-AF.mMinTick)/AF.mStep)*AF.mStep;}else{AF.mMaxTick=Math.ceil(AG/AF.mStep)*AF.mStep;}if(t.call(this,AF)){return ;}AJ=Math.ceil((AF.mMinTick+AF.mStep/100)/AF.mStep)*AF.mStep;AH=Math.floor((AF.mMaxTick-AJ+AF.mStep/100)/AF.mStep)+2;for(AI=0;AI<AH-2;++AI){AF.mTicks.push(AJ+AI*AF.mStep);}}function e(AV,AP,AH){var AO,AJ;if(this.mMajorGrid.mUseManualGrid){return this.mMajorGrid.mGridInterval;}AO=0;if(AH){AO=Math.max(AV,AV-AP);AO=Math.max(AO,-AP);}else{AO=AV-AP;}if(AO===0){this.mIsShown=false;return 1;}if(AO>=1&&AO<=4&&parseInt(AO)===AO){var AW=this.PrimaryMetricIndex,AK=AW.length;for(var AR=0;AR<AK;AR++){var AN=this.mChartContextPtr.mDatasetPtr,AQ=AN.dataProvider,AI=AQ.getSeriesCount(),AM=AQ.getGroupCount(),AG=AW[AR],AL,AT;for(var AU=0;AU<AI;AU++){AL=AQ.getMetricIndexForSeries(AU);if(AL===AG){AT=true;for(var AS=0;AS<AM;AS++){var AX=AN.GetData(AU,AS);if(parseInt(AX)!==AX){AT=false;break;}}}if(AT){return 1;}}}}var AF=AO;AJ=1;while(AO<1){AO*=10;AJ/=10;}while(AO>=10){AO/=10;AJ*=10;}if(AO<1.8){AJ*=2;AJ/=10;}else{if(AO<3.1){AJ*=4;AJ/=10;}else{if(AO<4.6){AJ*=5;AJ/=10;}else{if(AO>=8.1){AJ*=2;}}}}AJ=this.postProcessStep(AJ,AF);return AJ;}function t(AF){if(this.mChartContextPtr.mIsGraphMatrix){return false;}var AG=this.mMajorGrid;return AG.mUseManualGrid&&(AG.mGridInterval<(AF.mMaxTick-AF.mMinTick)/30);}function h(AF){return Math.log(AF)/Math.log(10);}function W(){return(this.mGraphMajorType===c.GMT_HISTOGRAM||this.mGraphMajorType===c.GMT_POLAR)&&this.mTripleId.mObjectId===v.DssGraphX1Body;}function x(AI){var AJ=this,AF=AJ.id,AH=AI.metricId,AG=new n.ui.menus.MenuConfig();(AI.options).forEach(function(AK){if(AK!==w.EnumRefLineModelType.CONST){AG.addMenuItem(f[AK],"xt",function(){AJ.toggleRefLineEnabled(AH,AK,true);});}else{AG.addEditorMenuItem(f[w.EnumRefLineModelType.CONST],AF,function(){return new mstrmojo.ui.menus.EditorConfig({data:{},contents:[{scriptClass:"mstrmojo.ValidationTextBox",alias:"constVal",dtp:mstrmojo.expr.DTP.FLOAT,constraints:{trigger:mstrmojo.validation.TRIGGER.ONBLUR},onEnter:function(){this.validate();}}],fnOk:function(AM,AL){var AN=AL.constVal;if(AN.isValid()){AJ.toggleRefLineEnabled(AH,AK,true,AN.value);}}});});}});return AG;}function s(AH){var AI=this,AG=AH.metricId,AF=new n.ui.menus.MenuConfig();(AH.options).forEach(function(AL){var AJ=AL.refType,AK=f[AJ]+((AJ===w.EnumRefLineModelType.CONST)?("-["+I.toLocaleString(AL.c)+"]"):"");AF.addMenuItem(AK,"xt",function(){AI.toggleRefLineEnabled(AG,AJ,false,0,AL.modix);});});return AF;}function AC(AJ,AF){var AI=AJ.GMController,AG=AI.getForbiddenShapeForMetric(AF),AH=[];[{text:mstrmojo.desc(12097,"Bar"),value:AB.BAR},{text:mstrmojo.desc(2059,"Line"),value:AB.LINE},{text:mstrmojo.desc(9738,"Area"),value:AB.AREA},{text:mstrmojo.desc(12100,"Circle"),value:AB.CIRCLE},{text:mstrmojo.desc(12101,"Square"),value:AB.SQUARE},{text:mstrmojo.desc(12102,"Tick"),value:AB.TICK}].forEach(function(AK){if(AG.indexOf(AK.value)<0){AH.push(AK);}});if(AI.chartType===mstrmojo.gm.EnumGraphType.BAR||AI.chartType===mstrmojo.gm.EnumGraphType.LINE){AH=AH.filter(function(AK){return AK.value!==AB.AREA;});}return AH;}function p(AG,AF){return function(AI,AH){if(AI!==AH){AF({ctxt:{sp:AI,mid:AG}});}};}function AD(AI){var AG=AI.options,AF=this.getMenuHandler("changeShape"),AH=new mstrmojo.ui.menus.MenuConfig();AH.addRadioMenuGroup(AI.currValue,p(AI.metricId,AF),AG,"checkMark",undefined,true);return AH;}mstrmojo.gm.GMUtility=mstrmojo.provide("mstrmojo.gm.GMUtility",{mTimers:[],mUseTimer:true,timerId:0,timerHistory:[],timerHistoryMax:50,startTimer:function R(AG){if(this.mUseTimer){var AF=this.timerId++;this.mTimers.push({timeStamp:new Date(),timerId:AF,desc:AG.functionName+": "+AG.purpose});return AF;}},endTimer:function G(AJ,AL){if(this.mUseTimer){var AG,AH=this.mTimers,AM=0;if(AJ===undefined){AG=AH.pop();}else{var AK,AN;for(AK=0;AK<AH.length;AK++){AN=AH[AK];if(AN.timerId===AJ){AG=AN;AH.splice(AK,1);AK--;}}}if(AG){var AF=new Date();var AI=(AF-AG.timeStamp);if(AL){this.timerHistory[this.timerId%this.timerHistoryMax]={desc:AG.desc,duration:AI,start:AG.timeStamp.getTime(),end:AF.getTime()};}H.visPrint("%c"+AG.desc+": "+AI+"ms","color: blue");AM=new Date()-AG.timeStamp;}return AM;}},computeTicksForPercentchart:function(AG,AF,AH){return C(AG,AF,false,AH);},computeTicksForFlexMinMax:function(AG,AF,AH,AI){return C(AG,AF,AH,AI);},formatNumber:function(AH,AG,AF){return y(AH,AG,AF===undefined?3:AF);},sizeCalculator:{sum:function(AF,AJ,AK){var AH,AG=0,AI=0;if(AK===undefined){AK=AF.length;}AJ=AJ||1;for(AH=0;AH<AK;AH++){if(AF[AH]>0){AI+=AF[AH];AG+=1;}}if(AG>1){AI+=(AG-1)*AJ;}return AI;},add:function(AH,AF,AG){AG=AG||1;if(AF>0){AH+=(AF+AG);}return AH;},minus:function(AH,AF,AG){if(AF>0){AH-=(AF+AG);}return AH;}},replaceSpecialChars:function(AF){return AF.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");},restoreSpecialChars:function(AF){return AF.replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'").replace(/&amp;/g,"&");},removeExtraSpace:function(AF){return AF.replace(/ {2,}/g," ");},stringToJSON:function(AF){if(AF===undefined){return undefined;}if(typeof AF==="string"){AF=AF.replace(/'/g,'"');try{return JSON.parse(AF);}catch(AG){return AF;}}return AF;},everythingToString:function(AG){if(AG===undefined){return undefined;}var AF;if(typeof AG==="object"){AF=JSON.stringify(AG.jsonObj||AG);}else{AF=AG.toString();}AF=AF.replace(/"/g,"'");return AF;},compareElementObj:function(AJ,AG){var AI=AJ.tid.toString(),AF=AG.tid.toString(),AK=AJ.eid,AH=AG.eid;if(AI!==AF){return AI>AF?1:-1;}if(AK===AH){return 0;}return AK>AH?1:-1;},isEqualComb:function(AG,AF){var AK=true,AJ,AI=AG.length,AH=AF.length;if(AI!==AH){return false;}if(AG.length>1){AG.sort(this.compareElementObj);}if(AF.length>1){AF.sort(this.compareElementObj);}for(AJ=0;AJ<AI;AJ++){if(this.compareElementObj(AG[AJ],AF[AJ])!==0){AK=false;break;}}return AK;},serializeCombination:function(AG){var AF="";if(AG.length>1){AG.sort(this.compareElementObj);}o.forEach(AG,function(AH){if(AF!==""){AF+=u;}AF+=(AH.tid+j+AH.eid);});return AF;},deserializeCombination:function(AG){var AH=AG.split(u),AF=[];o.forEach(AH,function(AL){var AI=AL.split(j);var AK=AI[0];var AJ=AI[1];AF.push({tid:AK,eid:AJ});});return AF;},getElementCombinationForMetric:function(AF){var AG=[];AG.push({tid:-1,eid:AF});return AG;},getResolvedFormatsObject:function(AF){return X(AF);},isDigitalArrayEqual:function(AG,AF){return l.call(this,AG,AF);},indexOf:function(AG,AI){var AH,AF=AG.length;for(AH=0;AH<AF;AH++){if(l(AG[AH],AI)){return AH;}}return -1;},parseAxisScaleData:function(AJ){var AH,AK,AG,AF=AJ.split(","),AI=[];for(AH=0,AK=AF.length;AH<AK;AH++){AG=AF[AH].split(":");AI.push(AG);}return AI;},parseCSSColor:function(AJ,AG){var AI=AJ.slice(1),AF=[],AH;if(AI.length===6){if(AG===true){AF[0]=AI[4];AF[1]=AI[5];AF[2]=AI[2];AF[3]=AI[3];AF[4]=AI[0];AF[5]=AI[1];}else{for(AH=0;AH<6;AH++){AF[AH]=AI[AH];}}}else{if(AG===true){for(AH=2;AH>=0;AH--){AF.push(AI[AH]);AF.push(AI[AH]);}}else{for(AH=0;AH<3;AH++){AF.push(AI[AH]);AF.push(AI[AH]);}}}return parseInt("0x"+AF.join(""),16);},RGB_BRG_Switch:function(AG){var AI=(AG>>16)&255,AH=(AG>>8)&255,AF=(AG>>0)&255;return(AF<<16)|(AH<<8)|(AI<<0);},encodeColor:function(AG){if(AG===undefined||AG===null||AG==="transparent"||AG==="default"){return AG;}var AH=false,AF={};if(AH){if(typeof AG==="object"){AF.c1=this.RGB_BRG_Switch(g.encodeColor(AG.c1));AF.c2=this.RGB_BRG_Switch(g.encodeColor(AG.c2));AF.or=AG.or;return AF;}return this.RGB_BRG_Switch(g.encodeColor(AG));}if(typeof AG==="object"){AF.c1=g.encodeColor(AG.c1);AF.c2=g.encodeColor(AG.c2);AF.or=AG.or;return AF;}return g.encodeColor(AG);},checkEquality:function(AG,AF){if(typeof AG==="object"&&AG.c1!==undefined){if(AG.c1!==AF.c1){return false;}if(AG.c2!==AF.c2){return false;}if(AG.or!==AF.or){return false;}return true;}return AG===AF;},decodeColor:function(AG){if(AG===undefined||AG===null||AG==="transparent"||AG==="default"){return AG;}var AH=false,AF={};if(AH){if(typeof AG==="object"){AF.c1=g.decodeColor(this.RGB_BRG_Switch(AG.c1));AF.c2=g.decodeColor(this.RGB_BRG_Switch(AG.c2));AF.or=AG.or;return AF;}return g.decodeColor(this.RGB_BRG_Switch(AG));}if(typeof AG==="object"){AF.c1=g.decodeColor(AG.c1);AF.c2=g.decodeColor(AG.c2);AF.or=AG.or;return AF;}return g.decodeColor(AG);},getTrendLineToggleHandler:function(AF,AH,AG){return function(){AF.switchOnOffTrendLineForMetric(AH,AG);};},getTrendLineToggleState:function(AF,AG){return AF.queryTrendLineStatusForMetric(AG);},getEditTrendLineHandler:function(AF,AG){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AF.raiseEventCMSelection(J.TREND_LINE,AG);};},getEditRefLineHandler:function(AF,AG){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AF.raiseEventCMSelection(J.REF_LINE,AG);};},getEditAxisScaleHandler:function(AF,AG){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AF.raiseEventCMSelection(J.AXIS_SCALE,AG);};},getEditAxisOriginHandler:function(AF,AG){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AF.raiseEventCMSelection(J.AXIS_ORIGIN_DEFINE,AG);};},getEditLogScaleHandler:function(AF,AG){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AF.raiseEventCMSelection(J.LOG_SCALE,AG);};},getOptionObjArr:function(AF,AH,AJ){if(!E){E=mstrmojo.gm.GMUtility;}var AG={},AI;if(AH!==undefined){AH=AH.toLowerCase();if(AH==="x1"){AH="x";}else{if(AH==="y1"){AH="y";}}}if(AF.length>1||(AJ&&AF.length===1)){if(AH==="x"){AG.opt=mstrmojo.desc(11712,"Bottom Axis");AG.key="XAxis";}else{if(AH==="x2"){AG.opt=mstrmojo.desc(11710,"Top Axis");AG.key="X2Axis";}else{if(AH==="y"){AG.opt=mstrmojo.desc(11715,"Left Axis");AG.key="YAxis";}else{if(AH==="y2"){AG.opt=mstrmojo.desc(11713,"Right Axis");AG.key="Y2Axis";}else{if(AH==="z"){AG.opt=mstrmojo.desc(12090,"SizeBy");AG.key="SizeBy";}}}}}AG.optLvl=k.AXIS;AG.mos=this.getMetricFormatFromIndexArray(AF);}else{if(AF.length===1){AI=this.getMetricFormat(AF[0]);AG.opt=AI.n;AG.mos=[AI];AG.key=AI.mId;AG.comb=E.getElementCombinationForMetric(AI.mId);AG.optLvl=k.METRIC;if(AH==="z"){AG.sizeBy=true;}}}return AG;},filterInValidMetricIndex:function(AG){var AF=[];o.forEach(AG,function(AH){if(AH!==Z){AF.push(AH);}});return AF;},fillBackgroundDiv:function(AG){var AF=document.createElement("div");AF.setAttribute("class","gm-bk-div");AF.style.backgroundColor="rgba(0,0,0,0)";AG.appendChild(AF);},getSubMenu:function(AK,AL,AJ,AI){var AH=AC(AK,AI),AF=AK.getMenuHandler("changeShape"),AG=AK.GMController.getOnTheFlyShapeForMetric(AI);if(AH.length>1){AL.addSubMenuItem(mstrmojo.desc(11972,"Change Shape"),"",AK.id,AD,{currValue:AG,options:AH,metricId:AJ});}else{AL.addRadioMenuGroup(AG,p(AJ,AF),AH,"checkMark",undefined,true);}},getReferenceLineSubMenu:function(AG,AK,AL,AF){var AM=mstrmojo.gm.EnumSubtype,AJ=AG.GMController.chartSubType;if(AL&&AJ===AM.PERCENT){return ;}var AN=AG.id,AH=AG.getAvailableRefLineTypes(AF)||[];if(AH.length>0){AK.addSubMenuItem(mstrmojo.desc(13021,"Add Reference Line"),"xt",AN,x,{metricId:AF,options:AH});}var AI=AG.getExistingRefLineOptions(AF)||[];if(AI.length>0){AK.addMenuItem(mstrmojo.desc(13659,"Edit Reference Line"),"xt",E.getEditRefLineHandler(AG,AF));AK.addSubMenuItem(mstrmojo.desc(13022,"Remove Reference Line"),"xt",AN,s,{metricId:AF,options:AI});}},reverseMapping:function m(AG){var AI={},AH,AF=AG.length;for(AH=0;AH<AF;AH++){AI[AG[AH]]=AH;}return AI;},longIntAnd:function(AG,AF){var AH;if(AG===AF){return AG;}if(AG>d||AF>d){throw new Error("Operand exceeds valid data range.");}if(AG<a&&AF<a){return AG&AF;}if(AG>=a||AF>=a){if(AG<AF){AH=AG;AG=AF;AF=AH;}}var AJ=Math.floor(AG/a),AI=Math.floor(AF/a),AL=AG-AJ*a,AK=AF-AI*a;return(AL&AK)+(AJ&AI)*a;},longIntOr:function(AG,AF){var AH;if(AG===AF){return AG;}if(AG<a&&AF<a){return AG|AF;}if(AG<AF){AH=AG;AG=AF;AF=AH;}AH=this.longIntAnd(AG,AF);return AF-AH+AG;},parseNumeric:function(AF){return +AF||parseFloat(AF);},fillImageInDiv:function(AI,AH,AG,AF){AF=AF||"gm-img";AI.innerType=AH;if(AH===4){AI.innerHTML="<img class="+AF+' src="'+AG+'"/>';}else{if(AH===7){AI.innerHTML=AG;B.addClass(AI.firstChild,AF);}}},fillTextInDiv:function(AF,AO,AQ,AG,AR,AH,AT,AJ,AM){if(AG===undefined){AG=AF.offsetWidth;}if(AR===undefined){AR=AF.offsetHeight;}if(AJ===undefined){AJ=V.MIDDLE;}if(AM===undefined){AM=q.MIDDLE;}if(AH===undefined){AH=false;}AQ=this.replaceSpecialChars(AQ);var AN,AP,AL,AS=AH?"gm-text-body":"gm-text-body-nowrap",AI=false,AK;AN=H.measureTextWidth(AQ,AT,6);AK=H.measureTextWidth("...",AT,6);if(AN>AG&&AK>AG){return ;}AL=document.createElement("div");AL.setAttribute("class",AS);AL.setAttribute("type",z.GM_TEXT_BODY);AL.identity=AO;H.applyStyles2DomNode(AL,AT);AL.innerHTML=AQ;AF.appendChild(AL);if(AH){if(AN>AG){AP=AL.offsetHeight;}else{AP=H.measureTextHeight(AQ,AT,4);}}else{AP=H.measureTextHeight(AQ,AT,4);AI=AN>AG;}AN=Math.min(AN,AG);AL.style.width=AN+"px";if(AH){AI=AL.scrollWidth>AN||AL.scrollHeight>AP;}if(AI){AL.setAttribute("title",AQ);}else{AL.setAttribute("title","");}switch(AJ){case V.LEFT:AL.style.left="0px";AL.style.textAlign="left";break;case V.MIDDLE:AL.style.left=((AG-AN)>>1)+"px";break;case V.RIGHT:AL.style.right="0px";AL.style.textAlign="right";break;}switch(AM){case q.TOP:AL.style.top="0px";break;case q.MIDDLE:AL.style.top=((AR-AP)>>1)+"px";break;case q.BOTTOM:AL.style.bottom="0px";break;}},updateTextColorAndAlignment:function(AF,AH,AI){var AJ=AF.firstChild,AK=AJ.style,AG=AF.clientWidth,AL=AJ.clientWidth,AN=AF.clientHeight,AM=AJ.clientHeight;AK.left="auto";AK.right="auto";switch(AH){case V.LEFT:AK.left="0px";break;case V.MIDDLE:AK.left=((AG-AL)>>1)+"px";break;case V.RIGHT:AK.right="0px";break;}AK.top="auto";AK.bottom="auto";switch(AI){case q.TOP:AK.top="0px";break;case q.MIDDLE:AK.top=((AN-AM)>>1)+"px";break;case q.BOTTOM:AK.bottom="0px";break;}},toggleDisplay:function(AG,AF){if(!AG){return ;}if(AF){AG.style.display="block";}else{AG.style.display="none";}},isTrendLineAvailableForMetric:function(AJ,AK,AN){var AU=AJ&&AJ.excludeData,AR=mstrmojo.gm.EnumSubtype,AM=n.gm.EnumShape,AS=AJ.GMController,AO=AS.chartSubType,AT=AJ.model.data.dz,AH=AT.XAxis,AF=AT.YAxis,AI=AT.BreakBy,AL=AT.SliceBy,AP=AN,AG=AS.getChartInfo(),AQ=AS.getBreakByAttrsID().length>0||(AG.isABL&&((AH.MetricNames!==undefined)||(AF.MetricNames!==undefined)||(AI.MetricNames!==undefined)||(AL.MetricNames!==undefined)));if(AP===undefined){AP=AS.getOnTheFlyShapeForMetric(AK);}if(AG.isABL&&AO===AR.PERCENT){AU=true;}if(AQ&&!AG.isBubbleOrScatter&&(AP===AM.BAR||AO===AR.STACKED||(AO===AR.AUTO&&AP===AM.AREA))){AU=true;}if(AG.isABL){if(AH.TemplateUnit&&AH.TemplateUnit.length>1){AU=true;}if(AF.TemplateUnit&&AF.TemplateUnit.length>1){AU=true;}if(AH.TemplateUnit===undefined&&AF.TemplateUnit===undefined){AU=true;}}AU=AU||this.isIgnoredMetric(AJ,AK);return !AU;},isTrendLineAvailableForAnyMetric:function(AH){var AG=AH.model.data.gsi.mx,AF;for(AF in AG){if(this.isTrendLineAvailableForMetric(AH,AF)){return true;}}return false;},isIgnoredMetric:function(AI,AG){var AH=AI.GMController,AJ,AF;if(AH.bubbleSeriesNum!==undefined){AJ=AH.getMetricsOnYAxis();AF=AJ.indexOf(AG);if(AF>=AH.bubbleSeriesNum){return true;}AJ=AH.getMetricsOnXAxis();AF=AJ.indexOf(AG);if(AF>=AH.bubbleSeriesNum){return true;}}return false;},getAxisMetricsInfo:function(AK){var AF=AK.model.data.dz,AL=AK.model.data.gsi.mx,AG,AH,AJ=[];if(!AF||!AF.ColorBy||!AL){return AL;}var AI=function(AM){return(AM&&AM.TemplateMetric)||[];};AG=AI(AF.YAxis).concat(AI(AF.XAxis));o.forEach(AL,function(AM){AH=false;o.forEach(AG,function(AN){if(AM.did===AN.id){AH=true;return false;}});if(AH){AJ.push(AM);}});return AJ;},isInvalidTemplate:function O(AI){if(AI.eg){return false;}var AG=AI.gts;var AF=AG.row.length===0&&AG.col.length===0;o.forEach(AG.row,function(AL){if(AL.otp===-1){AF=true;}});var AK=AG.col;if(AK.length>0){var AH,AJ=AK.length-1;for(AH=0;AH<AJ;AH++){if(AK[AH].otp===-1){AF=true;}}}return AF;},isNoData:function(AF){return AF.eg!==undefined;},getInvalidTemplateErrMsg:function(AF){return AF||mstrmojo.desc(12094,"The Graph Matrix requires:")+"\n"+mstrmojo.desc(12095,"- at least one attribute to be placed on the row or column axis")+"\n"+mstrmojo.desc(12096,"- all metrics to be placed on the column axis, below any attributes");},initColorPickerBtnWithGradientDir:function(AG,AH){mstrmojo.func.override({showPickerForCurrentMode:function AF(){this._super();if(this.pickerMode===2&&typeof this.color!=="object"){var AI=this.gradientOrientation,AJ=AH.getChartInfo().dirc===mstrmojo.gm.EnumABLDirection.VERTICAL;AI.set("selectedIndex",o.find(AI.items,"id",AJ?0:1));}}},AG.colorPicker);},generateToolTipContent:function(AO,AJ,AF,AK,AM,AL,AR){var AI,AG,AH,AN,AP,AQ;for(AI=AO;AI<AJ;AI++){AG=AK[AI];AN=AM[AI];if(AI>AO){AH=AK[AI-1];AP=AM[AI-1];if(AG.id===AH.id){if(AN===""){continue;}if(AG.fid===AH.fid&&AN.idx===AP.idx){continue;}if(AG.n===""){AL[AL.length-1].v+=M+AN.n;continue;}}}if(AR){AL.push({n:AG.n,tid:AG.id,v:AN.n});}else{AQ=AF===undefined?AG.isRowAttribute:AF;AL.push({n:AG.n,tid:AG.id,v:AN.n,eid:AN.id,tp:AG.otp,axis:AQ?1:2,tui:AG.tui,ui:AG.tui,dpt:AG.tui+1,at:AN.at,isRowAttribute:AQ,dei:AN.dei,o:AN.o});}}},getAttributeFormCnt:function(AF){var AG;if((AF.fcnt===undefined||AF.fcnt===null)&&AF.fs){AF.fcnt=AF.fs.length||1;}if(AF.fcnt!==undefined&&AF.fcnt!==null){AG=AF.fcnt;}else{if(AF.t===47){AG=1;}else{AG=AF.cs!==undefined?AF.cs:AF.rs;}}return AG;},isTrueForBoolValue:function(AF){return AF===true||AF==="true";},computeTicksForAxis:function(AI,AG){var AH=AI.mOptions,AJ,AF={mTicks:[]};if(AG){AJ=Q.copy(AH);Q.copy(AG,AJ);}else{AJ=AH;}if(AI.mIsPercent){T.call(AI,AF,AJ);return AF;}if(AJ.mUseLogarithmicScale){P.call(AI,AF,AJ);return AF;}if(AI.mGraphMajorType===c.GMT_BUBBLE&&AI.mTripleId.mObjectId===v.DssGraphZBody){AF.mMinTick=AJ.mUseMinValue?AJ.mAxisMinValue:AI.mMinimum;AF.mMaxTick=AJ.mUseMaxValue?AJ.mAxisMaxValue:AI.mMaximum;if(AI.mMinTick>=AI.mMaxTick){AF.mMaxTick=AF.mMinTick+1;}return AF;}if(!AJ.mUseMaxValue&&!AJ.mUseMinValue){r.call(AI,AF,AJ);}else{if(AJ.mUseMaxValue&&AJ.mUseMinValue){D.call(AI,AF,AJ);}else{if(AJ.mUseMaxValue){F.call(AI,AF,AJ);}else{i.call(AI,AF,AJ);}}}return AF;},computeTicksForLogScale:function(AH){var AG=AH.mOptions,AF={mTicks:[]};P.call(AH,AF,AG);return AF;},destroyDisposable:function(AF,AG){if(AG){o.removeItem(AF.disposables,AG);AG.destroy();}},handleDestroy:function(AJ,AI,AG){if(!AJ){return ;}var AK,AH=0,AF=AJ.disposables,AL=(AF&&AF.length)||0;while(AH<AL){AK=AF[AH];if((!AK.scriptClass||AI.indexOf(AK.scriptClass)<0)&&o.indexOf(AG,AK.id)===-1){this.destroyDisposable(AJ,AK);}if(AF.length<AL){AL=AF.length;}else{AH++;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.chart.common.Utility");mstrmojo.requiresClsP("mstrmojo.chart","FormatBase");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumBoxStyle","EnumFontAlignment","EnumFontStyle","EnumFontRotation");var M=mstrmojo.chart,J=M.enums,H=J.EnumBoxStyle,D=J.EnumFontAlignment,R=J.EnumFontStyle,T=J.EnumFontRotation,I=M.common.Utility,N=1,S=3;var B=["mFontAlignment","mFontStyle","mFontRotation","mFontBox","mFontColor","mFontAlpha","mFontName","mFontSize"],F=[D.FA_CENTER,R.FS_NORMAL,T.FR_NORMAL,H.BS_NOFRAME,null,255,"Verdana",15];mstrmojo.chart.FormatFont=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.FormatFont",mFontAlignment:D.FA_CENTER,mFontStyle:R.FS_NORMAL,mFontRotation:T.FR_NORMAL,mFontBox:H.BS_NOFRAME,mFontColor:null,mFontAlpha:255,mFontName:null,mFontSize:15,init:function L(X){var W,V=B.length;this._super(X);if(X&&X.Font){var U=X.Font;mstrmojo.hash.copyProps(["mFontAlignment","mFontStyle","mFontRotation","mFontBox","mFontAlpha","mFontName","mFontSize"],U,this);this.mFontColor=U.mFontColor;}else{if(X&&X.Bare){for(W=0;W<V;++W){this[B[W]]=null;}}}if(!this.mFontColor&&!(X&&X.Bare)){this.mFontColor=M.gBlack.ToInteger();}this.mFontName=this.mFontName||"Verdana";},ApplyFontFormat:function K(V,U){if(this.mFontSize<S){this.mFontSize=S;}if(!U){V.applyFontFormat(this);}},GetFontExtent:function A(){return Math.floor(this.mFontSize<S?S:this.mFontSize*N);},GetStringExtent:function O(V){var W,U,X;this.ApplyFontFormat(null,true);X=I.measureText(V,this.mFontName,this.mFontSize,this.mFontStyle);W=X.Width;U=X.Height;return{Width:W,Height:U};},GetStringHeight:function P(U){this.ApplyFontFormat(null,true);return I.measureTextHeight(U,this.mFontName,this.mFontSize,this.mFontStyle);},isVertical:function E(){var U=this.mFontRotation;return U===T.FR_90||U===T.FR_270;},isHorizontal:function C(){var U=this.mFontRotation;return U===T.FR_NORMAL||U===T.FR_180;},evalMargins:function Q(){return I.evaluateTextMargin(this.mFontSize);},restoreDefaults:function G(V){var U;if(V){for(U=0;U<B.length;++U){this[B[U]]=F[U];}}else{for(U=0;U<B.length;++U){if(this[B[U]]===null){this[B[U]]=F[U];}}}if(this.mFontColor===null){this.mFontColor=M.gBlack.ToInteger();}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","ChartCanvas","FormatLine","FormatFont","FormatFill");mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.VisUtility","mstrmojo.chart.common.Utility","mstrmojo.chart.enums.EnumInstructionName");var Ae=mstrmojo.chart.model,AQ=Ae.enums,AN=mstrmojo.VisUtility,Aq=AQ.EnumDSSGraphGradientType,i=3.141592653589793,o={area:["gm-shape-scircle","",""],line:["gm-shape-scircle","",""],"line-sizeby":["gm-shape-sbar","",""],bar:["gm-shape-bar","","gm-shape-grid-bar"],circle:["gm-shape-circle","gm-shape-circle","gm-shape-grid-circle"],square:["gm-shape-square","gm-shape-square","gm-shape-grid-square"],ticker:["gm-shape-ticker","gm-shape-ticker","gm-shape-grid-ticker"],pie:["gm-shape-pie","gm-shape-pie","gm-shape-pie"],ring:["gm-shape-ring","gm-shape-ring","gm-shape-ring"],markerRect:["gm-shape-bar","gm-shape-bar","gm-shape-bar"],markerCircle:["gm-shape-circle","gm-shape-circle","gm-shape-circle"]},t={area:["scircle","",""],line:["scircle","",""],"line-sizeby":["sbar","",""],bar:["bar","","gbar"],circle:["circle","circle","circle"],square:["square","square","square"],ticker:["ticker","ticker","ticker"],pie:["pie","pie","pie"],ring:["ring","ring","ring"],markerRect:["gmMarker","gmMarker","gmMarker"],markerCircle:["gmMarker","gmMarker","gmMarker"]};var G=mstrmojo.chart.common.Utility;var M={mR:0,mG:0,mB:0},q={"stroke-width":0};function m(A3,A0){var Az=1,A2=2,A1=this.mStyle;if(A3===Az){A1["stroke-dasharray"]=Ah.call(this,true,A0);}else{if(A3===A2){A1["stroke-dasharray"]=Ah.call(this,false,A0);}}}function J(Az){var A1,A0=document.createElementNS(this.mXMLNS,"polygon"),A3=Az.length,A2="";for(A1=0;A1<A3;++A1){A2+=(Az[A1].x+","+Az[A1].y+" ");}A0.setAttribute("points",A2);return A0;}function x(A2,Az){var A0,A1,A3=this.getDrawOrder(A2);this.mStyle["stroke-width"]="0";this.mAttributes["class"]="gm-set-line-polygon";this.mAttributes.type="set-shape";this.mAttributes.seriesID=A2;A0=this.hCreateSVGPolygon(Az);this.hExtendGroups(A3);A1=this.mSvg.childNodes[A3+1];A1.appendChild(A0);return{Polygon:A0,Group:A1};}function Ah(A1,Az){var A0=Az||1;return[A1?A0*3:A0,A0].join(" ");}function AC(){var Az=[].slice.call(arguments);return Az.some(function(A0){return typeof A0==="undefined";});}function p(A0,A9,Az,A5,A8,A7,A2,A1){var A3="stroke-width:3;stroke-opacity:1;fill:none;",A6="",A4=document.createElementNS(this.mXMLNS,"path");if(AC(A0,A9)){A6+=(" "+this.hMoveTo(A2,A1));A6+=(" "+this.hRelMoveTo(-A5,0));A6+=(" "+this.hRelArcTo(A5,Az,true,A5*2,0));A6+=(" "+this.hRelArcTo(A5,Az,true,-A5*2,0));}else{A6=this.hMoveTo(A0.x,A0.y),A6+=" "+this.hArcTo(A5,Az,true,A9.x,A9.y);}if(A7){A3+="stroke:rgb(255,255,255)";}else{A3+="stroke:rgb(0,0,0)";}A4.sX=A2;A4.sY=A1;A4.sR=A5;A4.sD=A6;A4.setAttribute("d",A6);A4.setAttribute("style",A3);this.mSvg.childNodes[A8+1].appendChild(A4);}mstrmojo.chart.SVGCanvas=mstrmojo.declare(mstrmojo.chart.ChartCanvas,null,{scriptClass:"mstrmojo.chart.SVGCanvas",mSvg:null,mG:null,mDefs:null,mXMLNS:"http://www.w3.org/2000/svg",mStyle:null,mAttributes:null,mMarkerAttributes:null,mGradientCount:0,mElements:null,seriesDrawOrder:null,init:function AT(A1){var Az;this._super(A1);Az=document.createElementNS(this.mXMLNS,"svg");Az.style.height="100%";Az.style.width="100%";Az.style.padding=0;this.mG=document.createElementNS(this.mXMLNS,"g");this.mDefs=document.createElementNS(this.mXMLNS,"defs");this.mG.appendChild(this.mDefs);Az.appendChild(this.mG);this.mStyle={};this.mSvg=Az;this.mAttributes={};this.mMarkerAttributes={};this.mElements=[];if(A1.seriesDrawOrder&&A1.seriesDrawOrder.length){this.seriesDrawOrder=A1.seriesDrawOrder.concat();var A3=this.seriesDrawOrder,A0=A1.seriesDrawOrder,A4,A2;for(A2=0;A2<A3.length;A2++){A4=A0[A2];A3[A4]=A2;}}},reset:function AM(){this.mStyle={};this.mAttributes={};this.mMarkerAttributes={};this.mElements=[];this.seriesDrawOrder=null;var Az=this.mG;while(Az.firstChild){Az.removeChild(Az.firstChild);}Az=this.mSvg;while(Az.firstChild){Az.removeChild(Az.firstChild);}Az.appendChild(this.mG);this.mG.appendChild(this.mDefs);},setDrawOrder:function F(Az){if(Az){this.seriesDrawOrder=Az;}},getDrawOrder:function N(A0){if(A0===-3){A0=0;}var Az=this.seriesDrawOrder;if(Az&&Az.length){if(A0>=Az.length){AN.visPrint("Drawing order,Max index exceeded");}return Az[A0];}return A0;},SaveToObject:function D(Az){Az.svg=this.mSvg;return true;},saveState:function Aj(){},RestoreState:function Au(){},Clip:function Ab(){},Scale:function An(Az,A0){},Rotate:function AD(A0,Az){this.SetAttribute("transform","rotate("+Az*180/i+" "+A0.x+" "+A0.y+")");},NewPath:function O(){},ClosePath:function AO(){},MoveTo:function Af(Az,A2,A0,A1){},LineTo:function AG(Az,A2,A0,A1){},BezierCurveTo:function W(A1,A0,A4,A2,Az,A3){},SetRGBAFillColor:function Z(A0,A1,Az,A2){},BoundedValue:function AU(A1,A0,Az){if(A1<A0){return A0;}if(A1>Az){return Az;}return A1;},SetRGBAStrokeColor:function P(A0,A1,Az,A2){},FillPath:function S(){},StrokePath:function A(){},SetLineDash:function Ap(Az,A0){},SetLineWidth:function AY(Az){this.mStyle["stroke-width"]=Az;},SetLineJoin:function c(Az){},SetFontSize:function l(Az){},AddRect:function y(Az,A2,A0,A1){},SetAttribute:function AJ(Az,A0){this.mAttributes[Az]=A0;},SetMarkerAttribute:function Q(Az,A0){this.mMarkerAttributes[Az]=A0;},CreateSVGCircle:function E(A5,A3,A8,A7,A9,A4){var A1=A7.isPie?A7.sPieDP.graphCell.sID:A7.gc.sID,A6=this.getDrawOrder(A1),Az=document.createElementNS(this.mXMLNS,"circle"),A2=this.hToCSSStyleStr();if(A8<=10){Az.setAttribute("size","small");}Az.sX=A5;Az.sY=A3;Az.sR=A8;Az.identity=A7;Az.setAttribute("cx",A5);Az.setAttribute("cy",A3);Az.setAttribute("r",A8);Az.setAttribute("style",A2);this.hExtendGroups(A6);this.hCopyAttribute(this.mAttributes,Az);var A0=A7.getChartInfo();if(A7.objType===17179869184){A0.currentMarkerShape=-1;}this.hSetExtraAttributes(Az,A0,"circle");this.mSvg.childNodes[A6+1].appendChild(Az);if(A9){p.call(this,undefined,undefined,true,A8,A6,A4,A5,A3);}this.hResetStyleAndAttribute();},CreateSVGTextBoundingBox:function Ad(A1,A0,A3,A2){var Az=this.hCreateSimpleSVGPolygon(A1,A0,true,A3);if(A3){if(this.mSvg.childNodes.length<=(A2+2)){this.hExtendGroups(A2+1);}this.mSvg.childNodes[A2+2].appendChild(Az);}else{this.mElements.push({Type:"BBox",Node:Az});}},hCreateSimpleSVGPolygon:function X(A8,A2,Az,A1){var A5=document.createElementNS(this.mXMLNS,"polygon"),A4=A8.length,A6="",A3,A7=this.hToCSSColorStr(A2),A0;if(A1){A0="stroke-width:2;stroke:rgb(0,0,0);stroke-opacity:1";}else{A0="stroke-width:1;stroke:rgb(0,0,0);stroke-opacity:1";}A0+=";stroke:"+A7;Az=Az||false;if(Az){A0+=";fill-opacity:0";}for(A3=0;A3<A4;++A3){A6+=(A8[A3].x+","+A8[A3].y+" ");}A5.setAttribute("points",A6);A5.setAttribute("style",A0);this.hCopyAttribute(this.mAttributes,A5);return A5;},CreateSVGRect:function U(A4,A3,A5,A2,A8){var A0=A8.isPie?A8.sPieDP.graphCell.sID:A8.gc.sID,A6=this.getDrawOrder(A0),A7=document.createElementNS(this.mXMLNS,"rect"),A1=this.hToCSSStyleStr();if(A5<=5||A2<=5){A7.setAttribute("size","small");}A7.identity=A8;A7.setAttribute("x",A4);A7.setAttribute("y",A3);A7.setAttribute("width",A5);A7.setAttribute("height",A2);A7.setAttribute("style",A1);this.hExtendGroups(A6);this.hCopyAttribute(this.mAttributes,A7);var Az=A8.getChartInfo();if(A8.objType===17179869184){Az.currentMarkerShape=-2;}this.hSetExtraAttributes(A7,Az);this.mSvg.childNodes[A6+1].appendChild(A7);this.hResetStyleAndAttribute();},CreateSVGSector:function Am(BC,BB,BF,A2,A0,BG,A7,Az){var BE=BG.gc||BG.sPieDP.graphCell,BA=BE.sID,A5=this.getDrawOrder(BA),A8=document.createElementNS(this.mXMLNS,"path"),A9=this.hMoveTo(BC,BB),A6=this.hCalPoint(BC,BB,BF,A2),A3=this.hCalPoint(BC,BB,BF,A0),BD=A0-A2>Math.PI,A4=this.hToCSSStyleStr(),A1=this.hCalPoint(BC,BB,BF/2,(A2+A0)/2);A9+=(" "+this.hLineTo(A6.x,A6.y));A9+=(" "+this.hArcTo(BF,BD,true,A3.x,A3.y));A9+=(" "+this.hClosePath());A8.sX=BC;A8.sY=BB;A8.sR=BF;A8.sRadStart=A2;A8.sRadEnd=A0;A8.sD=A9;A8.sGeoCenterX=A1.x;A8.sGeoCenterY=A1.y;if(BF<=10){A8.setAttribute("size","small");}A8.setAttribute("d",A9);A8.setAttribute("style",A4);A8.identity=BG;this.hExtendGroups(A5);this.hCopyAttribute(this.mAttributes,A8);this.hSetExtraAttributes(A8,BG.getChartInfo());this.mSvg.childNodes[A5+1].appendChild(A8);if(A7){p.call(this,A6,A3,BD,BF,A5,Az,BC,BB);}this.hResetStyleAndAttribute();},CreateSVGRingSector:function k(BE,BD,Az,A9,A3,A0,BG){var BC=BG.isPie?BG.sPieDP.graphCell.sID:BG.gc.sID,A8=this.getDrawOrder(BC),BA=document.createElementNS(this.mXMLNS,"path"),A2=this.hCalPoint(BE,BD,Az,A3),A6=this.hCalPoint(BE,BD,Az,A0),A5=this.hCalPoint(BE,BD,A9,A3),A4=this.hCalPoint(BE,BD,A9,A0),BF=A0-A3>Math.PI,BB=this.hMoveTo(A5.x,A5.y),A7=this.hToCSSStyleStr(),A1=this.hCalPoint(BE,BD,(Az+A9)>>1,(A3+A0)/2);BB+=(" "+this.hArcTo(A9,BF,true,A4.x,A4.y));BB+=(" "+this.hLineTo(A6.x,A6.y));BB+=(" "+this.hArcTo(Az,BF,false,A2.x,A2.y));BB+=(" "+this.hClosePath());BA.sX=BE;BA.sY=BD;BA.sOutR=Az;BA.sInR=A9;BA.sRadStart=A3;BA.sRadEnd=A0;BA.sD=BB;BA.sGeoCenterX=A1.x;BA.sGeoCenterY=A1.y;if(Az<=10){BA.setAttribute("size","small");}BA.setAttribute("d",BB);BA.setAttribute("style",A7);BA.identity=BG;this.hExtendGroups(A8);this.hCopyAttribute(this.mAttributes,BA);this.hSetExtraAttributes(BA,BG.getChartInfo());this.mSvg.childNodes[A8+1].appendChild(BA);this.hResetStyleAndAttribute();BA.setAttribute("class","gm-shape-ring");BA.setAttribute("subtype","ring");},CreateSVGRing:function n(A8,A6,BA,A7,BC){var A0=BC.isPie?BC.sPieDP.graphCell.sID:BC.gc.sID,A9=this.getDrawOrder(A0),A4=document.createElementNS(this.mXMLNS,"path"),A3=this.hCalPoint(A8,A6,BA,Math.PI),BB=this.hCalPoint(A8,A6,BA,0),Az=this.hCalPoint(A8,A6,A7,Math.PI),A2=this.hCalPoint(A8,A6,A7,0),A5=this.hMoveTo(A3.x,A3.y),A1=this.hToCSSStyleStr();A5+=(" "+this.hArcTo(BA,true,true,BB.x,BB.y));A5+=(" "+this.hMoveTo(A2.x,A2.y));A5+=(" "+this.hArcTo(A7,true,false,Az.x,Az.y));A5+=(" "+this.hArcTo(A7,true,false,A2.x,A2.y));A5+=(" "+this.hMoveTo(BB.x,BB.y));A5+=(" "+this.hArcTo(BA,true,true,A3.x,A3.y));A4.sX=A8;A4.sY=A6;A4.sGeoCenterX=A8;A4.sGeoCenterY=A6;A4.sOutR=BA;A4.sInR=A7;A4.setAttribute("d",A5);A4.setAttribute("style",A1);A4.identity=BC;this.hExtendGroups(A9);this.hCopyAttribute(this.mAttributes,A4);this.hSetExtraAttributes(A4,BC.getChartInfo());this.mSvg.childNodes[A9+1].appendChild(A4);this.hResetStyleAndAttribute();},CreateSVGCurves:function h(A8,BA,A4,BJ,BH,A1,BG,A0){var BB,A9,A5=A8.length,A6=document.createElementNS(this.mXMLNS,"path"),A3,BI="",BE=Math.floor(A5/4),A2="",A7,BF,Az,BD,BC=(BH&&(this.mStyle["stroke-width"]<3));this.mStyle.fill="none";if(BC){Az=this.mStyle["stroke-opacity"];BF=this.mStyle["stroke-width"];if(this.mStyle["stroke-dasharray"]!==undefined){BD=this.mStyle["stroke-dasharray"];delete this.mStyle["stroke-dasharray"];}this.mStyle["stroke-width"]=3;this.mStyle["stroke-opacity"]=0;A7=this.hToCSSStyleStr();this.mStyle["stroke-opacity"]=Az;this.mStyle["stroke-width"]=BF;if(BD){this.mStyle["stroke-dasharray"]=BD;}A3=document.createElementNS(this.mXMLNS,"path");}BB=this.hToCSSStyleStr();this.hCopyAttribute(this.mAttributes,A6);for(A9=0;A9<BE;++A9){if(A9===0){BI="M "+A8[A9].x+","+A8[A9].y+" ";}BI+=("C "+A8[A9*4+1].x+","+A8[A9*4+1].y+" ");BI+=(A8[A9*4+2].x+","+A8[A9*4+2].y+" ");BI+=(A8[A9*4+3].x+","+A8[A9*4+3].y+" ");}A6.identity=BJ;A6.setAttribute("style",BB);A6.setAttribute("d",BI);if(BC){this.hCopyAttribute(this.mAttributes,A3);A3.identity=BJ;A3.setAttribute("style",A7);A3.setAttribute("d",BI);}if(BH){A6.setAttribute("type","trendLine");A6.setAttribute("class","gm-set-trendline");A2="startpoint:"+A1.x+","+A1.y+";";A2+="midpoint:"+BG.x+","+BG.y+";";A2+="endpoint:"+A0.x+","+A0.y;A6.setAttribute("highlightPoints",A2);A6.setAttribute("hover-catcher","0");if(this.mSvg.childNodes.length<=(BA+2)){this.hExtendGroups(BA+1);}this.mSvg.childNodes[BA+2].appendChild(A6);if(BC){A3.setAttribute("type","trendLine");A3.setAttribute("class","gm-set-trendline");A3.setAttribute("highlightPoints",A2);A3.setAttribute("hover-catcher","1");this.mSvg.childNodes[BA+2].appendChild(A3);}}else{if(A4!==-1){if(this.mSvg.childNodes.length<=(A4+1)){this.hExtendGroups(A4);}this.mSvg.childNodes[A4+1].appendChild(A6);this.hSetExtraAttributes(A6,BJ.getChartInfo());}}this.hReset();},CreateSVGPolyLineForTRLine:function z(BA,BC,BH,BG,A2,BE,A0){var BB,A4=document.createElementNS(this.mXMLNS,"polyline"),A1,A5=BA.length,A8="",A6,A9,BF,Az,BD,A7=(this.mStyle["stroke-width"]<3),A3;this.mStyle.fill="none";if(A7){Az=this.mStyle["stroke-opacity"];BF=this.mStyle["stroke-width"];if(this.mStyle["stroke-dasharray"]!==undefined){BD=this.mStyle["stroke-dasharray"];delete this.mStyle["stroke-dasharray"];}this.mStyle["stroke-width"]=3;this.mStyle["stroke-opacity"]=0;A9=this.hToCSSStyleStr();this.mStyle["stroke-opacity"]=Az;this.mStyle["stroke-width"]=BF;if(BD){this.mStyle["stroke-dasharray"]=BD;}A1=document.createElementNS(this.mXMLNS,"polyline");}A6=this.hToCSSStyleStr();for(BB=0;BB<A5;++BB){A8+=(BA[BB].x+","+BA[BB].y+" ");}A4.identity=BH;A4.setAttribute("points",A8);A4.setAttribute("style",A6);if(BG){A4.setAttribute("type","trendLine");A4.setAttribute("class","gm-set-trendline");}else{A4.setAttribute("type","referenceLine");A4.setAttribute("class","gm-set-referenceline");}A3="startpoint:"+A2.x+","+A2.y+";";A3+="midpoint:"+BE.x+","+BE.y+";";A3+="endpoint:"+A0.x+","+A0.y;A4.setAttribute("highlightPoints",A3);A4.setAttribute("hover-catcher","0");this.hCopyAttribute(this.mAttributes,A4);if(this.mSvg.childNodes.length<=(BC+2)){this.hExtendGroups(BC+1);}this.mSvg.childNodes[BC+2].appendChild(A4);if(A7){A1.identity=BH;A1.setAttribute("points",A8);A1.setAttribute("style",A9);if(BG){A1.setAttribute("type","trendLine");A1.setAttribute("class","gm-set-trendline");}else{A1.setAttribute("type","referenceLine");A1.setAttribute("class","gm-set-referenceline");}A1.setAttribute("hover-catcher","1");this.hCopyAttribute(this.mAttributes,A1);this.mSvg.childNodes[BC+2].appendChild(A1);}this.hReset();},hCalPoint:function AP(Az,A4,A2,A3){var A1=Az+A2*Math.cos(A3),A0=A4+A2*Math.sin(A3);return{x:A1,y:A0};},hMoveTo:function Y(Az,A0){return"M "+Az+" "+A0;},hLineTo:function Aw(Az,A0){return"L "+Az+" "+A0;},hArcTo:function AS(A1,A0,A3,Az,A2){return"A "+A1+","+A1+" 0 "+(A0?"1":"0")+","+(A3?"1 ":"0 ")+Az+","+A2;},hClosePath:function AK(){return"Z";},hRelMoveTo:function I(Az,A2,A0,A1){return"m "+Az+" "+A2;},hRelArcTo:function AS(A1,A0,A3,Az,A2){return"a "+A1+","+A1+" 0 "+(A0?"1":"0")+","+(A3?"1 ":"0 ")+Az+","+A2;},hExtendGroups:function(A2){var A1,A0=this.mSvg,Az=A0.childNodes,A3=Az.length-1;while(A3<=A2){A1=document.createElementNS(this.mXMLNS,"g");A0.appendChild(A1);A3++;}},CreateSVGPolyLine:function AH(A0,BD,A1,A5){var A4,A6=this.getDrawOrder(A0);var A9=0,A3=1,BC=2,A8=3,A2=4,Az=5;A5=A5||A9;this.mAttributes["class"]="gm-set-polyline";this.mAttributes.type="set-shape";this.mAttributes.seriesID=A0;switch(A5){case A9:break;case A3:break;case BC:break;case A8:break;case A2:this.mAttributes["class"]="gm-set-originline";this.mAttributes.type="originLine";if(BD[0].x===BD[1].x){this.mAttributes.subtype="v";}else{this.mAttributes.subtype="h";}break;case Az:this.mAttributes.subtype="ticker";this.mAttributes.type="shape";this.mAttributes["class"]="gm-shape-ticker";break;default:break;}this.hExtendGroups(A6);A4=this.mSvg.childNodes[A6+1];var BB=this.hCreateSVGPolyline(BD,A4);if(A5===Az||A5===A2){if(A1.length){BB.identity=A1[0];}if(A5===Az){if(BD.length>=2){var BA=BD[0],A7=BD[1];BB.tickerCenter={x:Math.round(0.5*(BA.x+A7.x)),y:Math.round(0.5*(BA.y+A7.y))};}}}this.hResetStyleAndAttribute();},CreateSVGPolylineWithCircles:function AB(A5,A0,A4){var A1,A3,Az,A2,A6=this.getDrawOrder(A5);this.mAttributes["class"]="gm-set-polyline";this.mAttributes.type="set-shape";this.mAttributes.seriesID=A5;this.hExtendGroups(A6);A2=this.mSvg.childNodes[A6+1];this.hCreateSVGPolyline(A0,A2);for(A1=0;A1<A0.length;++A1){A3=document.createElementNS(this.mXMLNS,"circle");Az=A4[A1];A3.identity=Az;A3.setAttribute("cx",A0[A1].x);A3.setAttribute("cy",A0[A1].y);A3.setAttribute("r","5.5");A3.style.fill=this.mStyle.stroke;this.hCopyAttribute(this.mMarkerAttributes,A3);A3.setAttribute("class","gm-shape-scircle");A3.setAttribute("type","shape");A3.setAttribute("subtype","scircle");A2.appendChild(A3);}this.hResetStyleAndAttribute();},hCreateSVGPolyline:function f(A1,A3){this.mStyle.fill="none";var A2,A0=document.createElementNS(this.mXMLNS,"polyline"),Az=A1.length,A4="",A5=this.hToCSSStyleStr();A0.pointList=A1;for(A2=0;A2<Az;++A2){A4+=(A1[A2].x+","+A1[A2].y+" ");}A0.setAttribute("points",A4);A0.setAttribute("style",A5);this.hCopyAttribute(this.mAttributes,A0);A3.appendChild(A0);return A0;},CreateSVGPolygonWithCircles:function AV(A0,A8,A1){var A2,A6,Az,A5,A4,A7;A7=x.call(this,A0,A8);A6=A7.Polygon;A4=A7.Group;var A3=A8.length;if((A3&1)!==0){return ;}for(A2=0;A2<A3/2;++A2){Az=document.createElementNS(this.mXMLNS,"circle");A5=A1[A2];Az.identity=A5;Az.setAttribute("cx",A8[A2].x);Az.setAttribute("cy",A8[A2].y);Az.setAttribute("r","5.5");Az.style.fill=this.mStyle.fill;this.hCopyAttribute(this.mMarkerAttributes,Az);Az.setAttribute("class","gm-shape-scircle");Az.setAttribute("type","shape");Az.setAttribute("subtype","scircle");A4.appendChild(Az);}A6.chartInfo=A5.getChartInfo();this.hResetStyleAndAttribute();},CreateSVGPolygonWithTrapezoid:function r(BE,A6,A3){var BD,A8,A9,Az,BK,BA,A7,BC,A5;A7=x.call(this,BE,A6);A8=A7.Polygon;BA=A7.Group;var BF=A6.length;if((BF&1)!==0||BF<4){return ;}BC=BF/2;var BH,BG,BJ,A2,BI,A1,A4,BB,A0;for(BD=0;BD<BC;++BD){BJ=A2=BI=A1=null;A5=[];BH=A6[BD];BG=A6[BF-1-BD];if(BD!==0){BJ=A6[BD-1];A2=A6[BF-BD];}if(BD!==BC-1){BI=A6[BD+1];A1=A6[BF-2-BD];}if(BJ){BJ={x:0.5*(BJ.x+BH.x),y:0.5*(BJ.y+BH.y)};}if(A2){A2={x:0.5*(A2.x+BG.x),y:0.5*(A2.y+BG.y)};}if(BI){BI={x:0.5*(BI.x+BH.x),y:0.5*(BI.y+BH.y)};}if(A1){A1={x:0.5*(A1.x+BG.x),y:0.5*(A1.y+BG.y)};}A4=[BJ,BH,BI,A1,BG,A2];for(BB=0;BB<A4.length;BB++){if(A4[BB]){A5.push(A4[BB]);}}A0=J.call(this,A5);if(A0&&A3[BD]){A0.identity=A3[BD];}A0.setAttribute("class","gm-shape-sbar");A0.setAttribute("type","shape");A0.setAttribute("subtype","sbar");this.hCopyAttribute(q,A0);BA.appendChild(A0);}A8.chartInfo=A9;this.hResetStyleAndAttribute();},CreateSVGPolygonWithRects:function L(A0,A9,A1){var A2,A7,Az,A6,A5,A4,A8;A8=x.call(this,A0,A9);A7=A8.Polygon;A4=A8.Group;var A3=A9.length;if((A3&1)!==0){return ;}for(A2=0;A2<A3/2;++A2){A6=document.createElementNS(this.mXMLNS,"rect");A5=A1[A2];Az=A5.getChartInfo();A6.identity=A5;if(Az.dirc===1){A6.setAttribute("x",(A9[A2].x).toString());A6.setAttribute("y",String(A9[A2].y-3));A6.setAttribute("width",(A9[A3-A2-1].x-A9[A2].x).toString());A6.setAttribute("height","6");}else{A6.setAttribute("x",(A9[A2].x-3).toString());A6.setAttribute("y",A9[A2].y);A6.setAttribute("width","6");A6.setAttribute("height",(A9[A3-A2-1].y-A9[A2].y).toString());}this.hCopyAttribute(this.mMarkerAttributes,A6);A6.setAttribute("class","gm-shape-sbar");A6.setAttribute("type","shape");A6.setAttribute("subtype","sbar");A4.appendChild(A6);}A7.chartInfo=Az;this.hResetStyleAndAttribute();},hManipulateTextElements:function u(A1){if(A1.Tooltip){var A0=0,Az,A3=this.mElements,A2=A3.length;while(A0<A2){Az=A3[A0];if(Az.Tag&&Az.Tag==="tspan"){Az.Tooltip=A1.Tooltip;}A0++;}}},CreateSVGAxisText:function V(A2,A0,Az){var A1=this.hToCSSStyleStr(),A3=document.createElementNS(this.mXMLNS,"text");this.hCopyAttribute(this.mAttributes,A3);A3.setAttribute("style",A1);A3.setAttribute("type","axis-text");if(Az){A3.identity=Az;}this.hManipulateTextElements({Tooltip:A0});this.hCopyTextElements(A3,"axis-word");var A4=this.getDrawOrder(A2);this.hExtendGroups(A4);this.mSvg.childNodes[A4+1].appendChild(A3);this.hReset();},CreateSVGBannerText:function Ak(A1,Az){var A0=this.hToCSSStyleStr(),A2=document.createElementNS(this.mXMLNS,"text");this.hCopyAttribute(this.mAttributes,A2);A2.setAttribute("style",A0);A2.setAttribute("type","banner-text");if(Az){A2.identity=Az;}this.hCopyTextElements(A2,"banner-text");var A3=this.getDrawOrder(A1);this.hExtendGroups(A3);this.mSvg.childNodes[A3+1].appendChild(A2);this.hReset();},CreateSVGGenericText:function Ag(A2,Az,A1){var A0=this.hToCSSStyleStr(),A3=document.createElementNS(this.mXMLNS,"text");A1=A1||"data-label";if(!!Az){A3.identity=Az;}this.hCopyAttribute(this.mAttributes,A3);A3.setAttribute("style",A0);this.hCopyTextElements(A3,A1);if(A2){if(this.mSvg.childNodes.length<=(A2+2)){this.hExtendGroups(A2+1);}this.mSvg.childNodes[A2+2].appendChild(A3);}else{this.mG.appendChild(A3);}this.hReset();},hCopyTextElements:function d(A7,A4){A4=A4||"axis-word";var A3,Az,A0=0;for(A3=0;A3<this.mElements.length;A3++){var A1=this.mElements[A3];if(A1){if(A1.Type==="text"){var A5=document.createElementNS(this.mXMLNS,A1.Tag),A2=A1.Attributes;for(Az in A2){A5.setAttribute(Az,A2[Az]);}A5.setAttribute("type",A4);if(A4==="axis-word"){A5.setAttribute("Index",A0);A0++;}A5.setAttribute("class","gm-tspan");A5.textContent=A1.Content;if(A1.Tooltip){var A6=document.createElementNS(this.mXMLNS,"title");A6.textContent=A1.Tooltip;A5.appendChild(A6);}if(A1.Style){A5.setAttribute("style",A1.Style);}A7.appendChild(A5);}else{if(A1.Type==="BBox"){if(A1.Node){this.mG.appendChild(A1.Node);}}}}}},CreateSVGPolygon:function s(Az,A0,A3){var A2,A4=this.getDrawOrder(Az);var A1=this.hCreateSVGPolygon(A0,A3);this.hExtendGroups(A4);A2=this.mSvg.childNodes[A4+1];A2.appendChild(A1);this.mG.appendChild(A1);this.hResetStyleAndAttribute();},hCreateSVGPolygon:function B(Az,A3){var A1,A2=this.hToCSSStyleStr(),A4=Az.length,A0=J.call(this,Az);A0.points=Az;if(A3!==undefined){A0.identity=A3;}A0.setAttribute("style",A2);this.hCopyAttribute(this.mAttributes,A0);return A0;},AddArc:function As(Az,A4,A3,A0,A2,A1){},AddNeedle:function At(A1,A2,Az,A0){},AddString:function Aa(A0,Az){},FillSimple:function Al(A0,A2,A1,Az){this.mStyle.fill=this.hToCSSColorStr(A1);this.mStyle["fill-opacity"]=A0.mAlpha/255;},FillPattern:function C(Az){},FillGradient:function T(A6,A1,A0){var A4,A8,A2,A5,A3=A6.getGradient();switch(A3.gradientType){case Aq.DssGraphGradientLinear:if(A1.width===0||A1.height===0){return ;}A8=document.createElementNS(this.mXMLNS,"linearGradient");A8.setAttribute("id",String(this.gradPrefix+(this.mGradientCount)));A8.setAttribute("x1","0%");A8.setAttribute("y1","0%");if(A3.angle===0){A8.setAttribute("x2","100%");A8.setAttribute("y2","0%");}else{A8.setAttribute("x2","0%");A8.setAttribute("y2","100%");}A5=this.hCreateLinearGradientStop(0,A3.startGraphColor,A6.mAlpha/255);A8.appendChild(A5);for(A4=0;A4<A3.intermediateColors.length;++A4){var A7=A3.intermediateColors[A4];A5=this.hCreateLinearGradientStop(A7.Step,A7.Color,A6.mAlpha/255);A8.appendChild(A5);}A5=this.hCreateLinearGradientStop(1,A3.endGraphColor,A6.mAlpha/255);A8.appendChild(A5);this.mDefs.appendChild(A8);this.mStyle.fill="url(#"+this.gradPrefix+(this.mGradientCount++)+")";break;case Aq.DssGraphGradientCircular:A2=document.createElementNS(this.mXMLNS,"radialGradient");A2.setAttribute("id",String(this.gradPrefix+(this.mGradientCount)));A2.setAttribute("cx",String(A1.cx));A2.setAttribute("cy",String(A1.cy));A2.setAttribute("r",String(A1.r));A2.setAttribute("gradientUnits","userSpaceOnUse");A2.setAttribute("fx",String(A1.fx));A2.setAttribute("fy",String(A1.fy));var Az=A1.startStop||0;A5=this.hCreateLinearGradientStop(Az,A3.startGraphColor,A6.mAlpha/255);A2.appendChild(A5);A5=this.hCreateLinearGradientStop(1,A3.endGraphColor,A6.mAlpha/255);A2.appendChild(A5);this.mDefs.appendChild(A2);this.mStyle.fill="url(#"+this.gradPrefix+(this.mGradientCount++)+")";break;case Aq.DssGraphGradientRectangular:break;}},hCreateLinearGradientStop:function AR(A3,A1,A2){var A0=document.createElementNS(this.mXMLNS,"stop"),Az="stop-color:"+this.hToCSSColorStr(A1)+";stop-opacity:"+A2;A0.setAttribute("offset",A3*100+"%");A0.setAttribute("style",Az);return A0;},FillEdgeType:function Ax(Az,A0){},FillRadientGradient:function Ao(A5,A6,A3,A2,A7,Az,A0,A4,A1){},FillBorderMetallic:function Av(A1,Az,A3,A2,A4,A0){},FillDonutOrSphere:function Ar(Az,A0,A1){},MakeDarker:function R(A0,Az){},RestoreColor:function a(Az){},ApplyLineFormat:function j(A0){var A1=A0.getGradient();if(A1&&A1.valid&&A1.style===1){this.StrokeGradient(A1);m.call(this,A1.strokePatten,A0.mLineThickness);}else{var Az=this.mStyle;Az.stroke=this.hToCSSColorStr(A0.mLineColor);m.call(this,A0.mLineStyle,A0.mLineThickness);}this.mStyle["stroke-opacity"]=A0.mAlpha/255;},StrokeGradient:function AI(A5){var A1=document.createElementNS(this.mXMLNS,"linearGradient");A1.setAttribute("id",String(this.gradPrefix+(this.mGradientCount)));A1.setAttribute("x1","0%");A1.setAttribute("y1","0%");if(A5.angle===0){A1.setAttribute("x2","100%");A1.setAttribute("y2","0%");}else{A1.setAttribute("x2","0%");A1.setAttribute("y2","100%");}var A2,Az=A5.colors[0].Color,A4=A5.colors[A5.colors.length-1].Color,A0=this.hCreateLinearGradientStop(0,Az,A5.endAlpha/255);A1.appendChild(A0);for(A2=1;A2<A5.colors.length-1;++A2){var A3=A5.colors[A2];A0=this.hCreateLinearGradientStop(A3.Step,A3.Color,A5.endAlpha/255);A1.appendChild(A0);}A0=this.hCreateLinearGradientStop(1,A4,A5.endAlpha/255);A1.appendChild(A0);this.mDefs.appendChild(A1);this.mStyle.stroke="url(#"+this.gradPrefix+(this.mGradientCount++)+")";},AddFormatedText:function e(A3,Az,A1,A2){var A0={Type:"text",Tag:"tspan",Attributes:{x:Az.x,y:Az.y},Content:A1};if(A2&&A2.BaselineOffset){A0.Attributes.y-=A2.BaselineOffset-0.5;A0.Attributes.dy="0.5ex";}this.mElements.push(A0);},ApplyBeveledFrameToRectangle:function K(A0,A4,Az,A1,A3,A2,A5){},DrawGaugeMarker:function AX(A2,A0,A3,Az,A1){},ApplyDonutToRect:function AW(Az,A1,A0){},BeginFirstFrame:function AF(){},BeginLastFrame:function v(){},EndFrame:function Ac(){},EndUnit:function H(){},hToCSSColorStr:function AE(A0){var Az=true;if(typeof A0==="number"){if(Az){M.mR=A0&255;M.mG=(A0&65280)>>8;M.mB=(A0&16711680)>>16;}else{M.mB=A0&255;M.mG=(A0&65280)>>8;M.mR=(A0&16711680)>>16;}}else{return"rgb("+A0.mR+","+A0.mG+","+A0.mB+")";}return"rgb("+M.mR+","+M.mG+","+M.mB+")";},hToCSSStyleStr:function g(){var A1,A0=this.mStyle,Az="";for(A1 in A0){if(A0.hasOwnProperty(A1)){Az=Az+A1+":"+A0[A1]+";";}}return Az.substr(0,Az.length-1);},hCopyAttribute:function AA(A1,Az){var A0;for(A0 in A1){if(A1.hasOwnProperty(A0)){Az.setAttribute(A0,A1[A0]);}}},hResetStyle:function Ay(){this.mStyle={};},hResetElements:function AZ(){this.mElements=[];},hResetAttribute:function AL(){this.mAttributes={};this.mMarkerAttributes={};},hResetStyleAndAttribute:function w(){this.hResetStyle();this.hResetAttribute();},hReset:function Ai(){this.hResetStyle();this.hResetAttribute();this.hResetElements();},hTranslateMarkerShape:function(Az,A0){var A1="";Az=Az||0;switch(Az){case -2:A1="markerRect";break;case -1:A1="markerCircle";break;case 0:if(A0===1){A1="area";}else{if(A0===2){A1="bar";}else{if(A0===3){A1="line";}}}break;case 4:A1="circle";break;case 24:A1="square";break;case 200:A1="ticker";break;case 201:A1="pie";break;case 202:A1="ring";break;case 204:A1="line";break;case 205:A1="bar";break;case 206:A1="area";break;default:break;}return A1;},hSetExtraAttributes:function(A5,A1,A8){var A6="",A3="shape",A0="",A7=A1.tp,A4=0,A2=A1.currentMarkerShape,A9=A8||(this.hTranslateMarkerShape(A2,A7)||"bar"),Az=A1.hasSizeBy;if(A9==="line"&&Az){A9+="-sizeby";}if(A7===4||A7===5){A4=1;}else{if(A7===7){A4=2;}}if(o.hasOwnProperty(A9)){A6=o[A9][A4];}if(t.hasOwnProperty(A9)){A0=t[A9][A4];}A5.setAttribute("class",A6);A5.setAttribute("type",A3);A5.setAttribute("subtype",A0);},ApplyFontFormat:function b(BA){var Az=this.mStyle,A5=BA.mFontStyle;if(A5!==undefined){var A4=0,A8=1,A1=2,A9=3,A7=4,A2=8;Az["text-decoration"]="none";Az["font-weight"]="normal";if(!!(A5&A8)){Az["font-weight"]="bold";}if(!!(A5&A1)){Az["font-style"]="italic";}if(!!(A5&A7)&&!!(A5&A2)){Az["text-decoration"]="underline line-through";}else{if(!!(A5&A7)){Az["text-decoration"]="underline";}if(!!(A5&A2)){Az["text-decoration"]="line-through";}}}if(BA.mFontAlignment){var A6=0,A0=1,A3=2;switch(BA.mFontAlignment){case A6:Az["text-anchor"]="start";break;case A0:Az["text-anchor"]="middle";break;case A3:Az["text-anchor"]="right";break;}}Az["text-anchor"]="start";if(BA.mFontColor){Az.fill=this.hToCSSColorStr(BA.mFontColor);}if(G.isValidNumber(BA.mStrokeColor)){Az.stroke=this.hToCSSColorStr(BA.mStrokeColor);}if(BA.mStrokeWidth){Az["stroke-width"]=BA.mStrokeWidth;}if(BA.mFontAlpha){Az["fill-opacity"]=BA.mFontAlpha;}if(BA.mFontName){Az["font-family"]=BA.mFontName;}if(BA.mFontSize){Az["font-size"]=BA.mFontSize+"pt";}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","ChartCanvas","FormatLine","FormatFont","FormatFill","JSONInstruction","JSONUtil","JSONUnit","JSONFormatFill","JSONFormatFont","JSONFormatLine");mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.chart.enums.EnumInstructionName");var d=mstrmojo.chart,L=mstrmojo.chart.enums,v=L.EnumInstructionName,r=d.JSONUtil.prototype,N=mstrmojo.hash;function F(AC,AB){return AC.mpOriginalAddress-AB.mpOriginalAddress;}function X(AC,AB){if(AC===undefined){AC=v.JSONInsUndefined;}if(AB===undefined){AB=null;}else{AB=AB.id;}if(this.mpCurrentUnit===null){this.mpCurrentUnit=new d.JSONUnit();this.mUnitList.push(this.mpCurrentUnit);}return this.mpCurrentUnit.AddInstruction(AC,AB);}function U(AD){var AB=this.mFormatMap,AC=AD.id;if(AD instanceof d.FormatFill){if(AB[AC]===undefined){AB[AC]=new d.JSONFormatFill(AD);}}else{if(AD instanceof d.FormatFont){if(AB[AC]===undefined){AB[AC]=new d.JSONFormatFont(AD);}}else{if(AD instanceof d.FormatLine){if(AB[AC]===undefined){AB[AC]=new d.JSONFormatLine(AD);}}}}}mstrmojo.chart.JSONCanvas=mstrmojo.declare(mstrmojo.chart.ChartCanvas,null,{scriptClass:"mstrmojo.chart.JSONCanvas",mIsJSONObjectConstructed:false,mpCurrentUnit:null,mUnitList:null,mFormatMap:null,mFormatList:null,mJSONObject:null,init:function t(AB){this._super(AB);this.mUnitList=[];this.mFormatMap={};this.mFormatList=[];this.mJSONObject={};},reset:function o(){this.mUnitList=[];this.mFormatMap={};this.mFormatList=[];this.mJSONObject={};this.mIsJSONObjectConstructed=false;this.mpCurrentUnit=null;},SaveToObject:function m(AC){var AB;if(!this.mIsJSONObjectConstructed){this.hConstructJSONObject();}for(AB in this.mJSONObject){AC[AB]=this.mJSONObject[AB];}return true;},saveState:function p(){X.call(this,v.JSONInsSaveState);},RestoreState:function W(){X.call(this,v.JSONInsRestoreState);},Clip:function h(){X.call(this,v.JSONInsClip);},Scale:function Q(AB,AD){var AC=X.call(this,v.JSONInsScale);AC.AppendToParameterList("X",AB);AC.AppendToParameterList("Y",AD);},Rotate:function T(AB,AD){var AC=X.call(this,v.JSONInsRotate);AC.AppendToParameterList("Anchor",AB);AC.AppendToParameterList("Radian",AD);},NewPath:function S(){X.call(this,v.JSONInsNewPath);},ClosePath:function k(){X.call(this,v.JSONInsClosePath);},MoveTo:function c(AB,AF,AD,AE){var AC=X.call(this,v.JSONInsMoveTo);AC.AppendToParameterList("X",AB);AC.AppendToParameterList("Y",AF);if(AD){AC.AppendToParameterList("CA",1);AC.AppendToParameterList("BPX",AE.x);AC.AppendToParameterList("BPY",AE.y);}else{AC.AppendToParameterList("CA",0);}},LineTo:function P(AB,AF,AD,AE){var AC;AC=X.call(this,v.JSONInsLineTo);AC.AppendToParameterList("X",AB);AC.AppendToParameterList("Y",AF);if(AD){AC.AppendToParameterList("CA",1);AC.AppendToParameterList("BPX",AE.x);AC.AppendToParameterList("BPY",AE.y);}else{AC.AppendToParameterList("CA",0);}},BezierCurveTo:function K(AE,AD,AH,AF,AB,AG){var AC;AC=X.call(this,v.JSONInsBezierCurveTo);AC.AppendToParameterList("CP1X",AE);AC.AppendToParameterList("CP1Y",AD);AC.AppendToParameterList("CP2X",AH);AC.AppendToParameterList("CP2Y",AF);AC.AppendToParameterList("X",AB);AC.AppendToParameterList("Y",AG);},SetRGBAFillColor:function f(AF,AD,AB,AE){var AC;AC=X.call(this,v.JSONInsSetRGBAFillColor);AC.AppendToParameterList("R",this.BoundedValue(AF*256,0,255));AC.AppendToParameterList("G",this.BoundedValue(AD*256,0,255));AC.AppendToParameterList("B",this.BoundedValue(AB*256,0,255));AC.AppendToParameterList("A",this.BoundedValue(AE,0,1));},BoundedValue:function V(AD,AC,AB){if(AD<AC){return AC;}if(AD>AB){return AB;}return AD;},SetRGBAStrokeColor:function w(AF,AD,AB,AE){var AC;AC=X.call(this,v.JSONInsSetRGBAStrokeColor);AC.AppendToParameterList("R",this.BoundedValue(AF*256,0,255));AC.AppendToParameterList("G",this.BoundedValue(AD*256,0,255));AC.AppendToParameterList("B",this.BoundedValue(AB*256,0,255));AC.AppendToParameterList("A",this.BoundedValue(AE,0,1));},FillPath:function i(){X.call(this,v.JSONInsFillPath);},StrokePath:function H(){X.call(this,v.JSONInsStrokePath);},SetLineDash:function E(AD,AC){var AB=X.call(this,v.JSONInsSetLineDash);AB.AppendArrayToParameterList("LinePattern",AD,AC);},SetLineWidth:function l(AB){var AC=X.call(this,v.JSONInsSetLineWidth);AC.AppendToParameterList("LineWidth",AB);},SetLineJoin:function I(AC){var AB=X.call(this,v.JSONInsSetLineJoin);AB.AppendToParameterList("Type",AC);},SetFontSize:function Z(AC){var AB=X.call(this,v.JSONInsSetFontSize);AB.AppendToParameterList("FontSize",AC);},AddRect:function s(AC,AF,AE,AB){var AD=X.call(this,v.JSONInsAddRect);AD.AppendToParameterList("X",AC);AD.AppendToParameterList("Y",AF);AD.AppendToParameterList("W",AE);AD.AppendToParameterList("H",AB);},AddArc:function Y(AC,AH,AB,AF,AD,AG){var AE=X.call(this,v.JSONInsAddArc);AE.AppendToParameterList("X",AC);AE.AppendToParameterList("Y",AH);AE.AppendToParameterList("Radius",AB);AE.AppendToParameterList("StartAngle",AF);AE.AppendToParameterList("EndAngle",AD);AE.AppendToParameterList("AntiClockwise",AG);},AddNeedle:function x(AE,AD,AF,AC){var AB=X.call(this,v.JSONInsAddNeedle);AB.AppendToParameterList("NeedleStyle",AE);AB.AppendToParameterList("BasePoint",AD);AB.AppendToParameterList("Angle",AF);AB.AppendToParameterList("Size",AC);},AddString:function b(AB,AD){var AC=X.call(this,v.JSONInsAddString);AC.AppendToParameterList("Point",AB);AC.AppendToParameterList("Text",AD);},FillSimple:function g(AF,AD,AB,AE){var AC=X.call(this,v.JSONInsFillSimple,AF);AC.AppendToParameterList("DarkerFactor",AD);if(AE){AC.AppendToParameterList("HEP",1);AC.AppendToParameterList("FC",AB);}else{AC.AppendToParameterList("HEP",0);}U.call(this,AF);},FillPattern:function u(AB){X.call(this,v.JSONInsFillPattern,AB);U.call(this,AB);},FillGradient:function q(AE,AB,AD){var AC=X.call(this,v.JSONInsFillGradient,AE);AC.AppendToParameterList("BoundingRect",AB);AC.AppendToParameterList("DarkerFactor",AD);U.call(this,AE);},FillEdgeType:function C(AD,AC){var AB=X.call(this,v.JSONInsFillEdgeType,AD);AB.AppendSimpleVectorToParameterList("Polygon",AC);U.call(this,AD);},FillRadientGradient:function G(AJ,AI,AH,AG,AF,AE,AB,AD,AK){var AC=X.call(this,v.JSONInsFillRadientGradient,AJ);AC.AppendToParameterList("RGUsage",AI);AC.AppendToParameterList("CX",AH);AC.AppendToParameterList("CY",AG);AC.AppendToParameterList("InnerRadius",AF);AC.AppendToParameterList("OuterRadius",AE);if(AB){AC.AppendToParameterList("HEP",1);AC.AppendToParameterList("ExtraDepth",AD);AC.AppendToParameterList("ExtraIntensity",AK);}else{AC.AppendToParameterList("HEP",0);}U.call(this,AJ);},FillBorderMetallic:function y(AH,AC,AG,AF,AB,AE){var AD=X.call(this,v.JSONInsFillBorderMetallic,AH);AD.AppendToParameterList("BorderUse",AC);AD.AppendToParameterList("CX",AG);AD.AppendToParameterList("CY",AF);AD.AppendToParameterList("Radius",AB);AD.AppendToParameterList("Thickness",AE);U.call(this,AH);},FillDonutOrSphere:function a(AE,AB,AD){var AC=X.call(this,v.JSONInsFillDonutOrSphere,AE);AC.AppendToParameterList("BoundingRect",AB);AC.AppendToParameterList("IsCircularShape",AD);U.call(this,AE);},MakeDarker:function n(AD,AC){var AB=X.call(this,v.JSONInsMakeDarker,AD);AB.AppendToParameterList("Factor",AC);U.call(this,AD);},RestoreColor:function AA(AB){X.call(this,v.JSONInsRestoreColor,AB);U.call(this,AB);},ApplyLineFormat:function R(AB){X.call(this,v.JSONInsApplyLineFormat,AB);U.call(this,AB);},AddFormatedText:function J(AB,AE,AF,AD){var AC=X.call(this,v.JSONInsAddFormatedText,AB);AC.AppendToParameterList("StartPoint",AE);AC.AppendToParameterList("Text",AF);U.call(this,AB);},ApplyBeveledFrameToRectangle:function e(AG,AI,AF,AH,AC,AE,AB){var AD=X.call(this,v.JSONInsApplyBeveledFrameToRectangle);AD.AppendToParameterList("Rect",AG);AD.AppendToParameterList("RotationAngle",AI);AD.AppendToParameterList("BevelDepth",AF);AD.AppendToParameterList("LTColor",AH);AD.AppendToParameterList("LTAlpha",AC);AD.AppendToParameterList("RBColor",AE);AD.AppendToParameterList("RBAlpha",AB);},DrawGaugeMarker:function j(AD,AG,AB,AF,AE){var AC=X.call(this,v.JSONInsAddGaugeMarker);AC.AppendToParameterList("MarkSize",AG);AC.AppendToParameterList("MarkShape",AB);AC.AppendToParameterList("Angle",AF);AC.AppendToParameterList("NeedleSize",AE);AC.AppendToParameterList("BPX",AD.x);AC.AppendToParameterList("BPY",AD.y);},ApplyDonutToRect:function A(AD,AC,AE){var AB=X.call(this,v.JSONInsFillDonut2Rect,AE);AB.AppendToParameterList("StartPoint",AD);AB.AppendToParameterList("EndPoint",AC);},BeginFirstFrame:function z(){if(this.mpCurrentUnit===null||this.mpCurrentUnit.IsValid()){this.mpCurrentUnit=new d.JSONUnit({mIsAnimated:true,mIsLastFrame:false});this.mUnitList.push(this.mpCurrentUnit);}this.mpCurrentUnit.SetToFirstFrame();},BeginLastFrame:function B(){if(this.mpCurrentUnit===null||this.mpCurrentUnit.IsValid()){this.mpCurrentUnit=new d.JSONUnit({mIsAnimated:true,mIsLastFrame:true});this.mUnitList.push(this.mpCurrentUnit);}this.mpCurrentUnit.SetToLastFrame();},EndFrame:function D(){if(this.mpCurrentUnit!==null&&this.mpCurrentUnit.IsValid()){this.mpCurrentUnit=null;}},EndUnit:function M(){this.mpCurrentUnit=null;},hConstructJSONObject:function O(){var AC=this.mFormatList,AG=this.mUnitList,AD,AB,AE,AF,AH;AD=this.mJSONObject={};N.forEach(this.mFormatMap,function(AJ,AI,AK){AC.push(AJ);});AC.sort(F);AB=AG.length;for(AE=0;AE<AB;++AE){AG[AE].CalculateFormatIndex(AC);}AD.UnitList=[];if(AB>0){if(AB===1){AF={};AG[0].AppendToJSONObject(AF);AD.UnitList.push(AF);}else{AH=0;AF={};AG[0].AppendToJSONObject(AF);AD.UnitList.push(AF);for(AE=1;AE<AB;++AE){AF={};AG[AE].AppendToJSONObject(AF);if(AG[AE-1].IsAnimated()!==AG[AE].IsAnimated()){AD.UnitList.push(AF);AH++;}else{AD.UnitList[AH].InstructionList=AD.UnitList[AH].InstructionList.concat(AF.InstructionList);}}}}r.AppendCompoundPointerVectorToJSONObject("FormatList",AC,AD);this.mIsJSONObjectConstructed=true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","FormatFont");var O=mstrmojo.chart;mstrmojo.chart.SubTextHolder=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.SubTextHolder",mVecStr:null,mInitVecPartition:null,mVecPartition:null,mVecSize:null,mSpaceWidth:0,mMaxWordWidth:0,init:function M(S){this._super(S);this.mVecStr=[];this.mInitVecPartition=[];this.mVecPartition=[];this.mVecSize=[];},Clear:function P(){this.mVecStr.splice(0,this.mVecStr.length);},ParseText:function K(W,c,a){var Y=this.mInitVecPartition,S,Z,V,U,T,b=[],X;S=W.split("\n");Y.splice(0,this.mInitVecPartition.length);Y.push(0);V=0;Z=S.length;for(U=0;U<Z;++U){b=S[U].split(c);V+=b.length;Y.push(V);X=b.length;for(T=0;T<X;++T){this.mVecStr.push(this.TruncateWord(b[T],a));}}this.mVecPartition=Y.concat();},TruncateWord:function E(U,S){if(S<4||S>U.length){return U;}var T=U.substr(0,S-3);T+="...";return T;},UpdateText:function B(W,T){var V,U,S,Z,X,Y;this.mVecSize.splice(0,this.mVecSize.length);V=T;U=0;S=this.mVecStr.length;for(Z=0;Z<S;Z++){X={width:0,mX_bearing:0,mX_advance:0};if(this.mVecStr[Z]===""){this.mVecSize.push(X);}else{Y=V.GetStringExtent(this.mVecStr[Z]);X.width=X.mX_advance=Y.Width;this.mVecSize.push(X);if(Y.Width>U){U=Y.Width;}}}this.mMaxWordWidth=U;Y=V.GetStringExtent(" ");this.mSpaceWidth=Y.Width;},GetMaxWidth:function Q(){var V,S,T,U;V=0;S=this.mVecPartition.length;for(T=0;T+1<S;++T){U=this.GetOneLineWidth(T);if(U>V){V=U;}}return Math.floor(V+0.5);},GetOneLineWidth:function D(W){var S=this.mVecPartition,V=this.mVecSize,U,T;U=0;for(T=S[W];T<S[W+1];T++){if(T===S[W]&&T===S[W+1]-1){U+=V[T].width;}else{if(T===S[W]&&T!==S[W+1]-1){U+=V[T].mX_advance-V[T].mX_bearing;}else{if(T!==S[W]&&T===S[W+1]-1){U+=V[T].width+V[T].mX_bearing;}else{U+=V[T].mX_advance;}}}if(T!==S[W]){U+=this.mSpaceWidth;}}return U;},GetOneWordWidth:function F(S){return this.mVecSize[S].width;},GetStringWidth:function L(U,T){var S=T.GetStringExtent(U);return S.Width;},GetSpaceWidth:function N(){return this.mSpaceWidth;},GetSpaceWidthEx:function C(S){var T=S.GetStringExtent(" ");return T.Width;},GetLineCount:function G(){return this.mVecPartition.length>0?this.mVecPartition.length-1:0;},SetLineCount:function J(T,S){if(T<1){return ;}if(S!==0){S=S||-1;}var U=this.mVecPartition;if(T===1){U.splice(0,U.length);U.push(0);U.push(this.mVecSize.length);}else{if(this.GetLineCount()<=T){if(S===-1){return ;}if(this.GetMaxWidth()<=S){return ;}this.PartitionBy(S,true);if(this.GetLineCount()>T){U.length=T+1;U[U.length-1]=this.mVecSize.length;}}else{U.length=T+1;U[U.length-1]=this.mVecSize.length;}}},PartitionBy:function H(V,a){var U=this.mVecPartition,Y=this.mInitVecPartition,Z,X,W,T,S;a=(a!==undefined)?a:true;if(!a&&V<this.mMaxWordWidth){V=Math.floor(this.mMaxWordWidth+0.5);}U.splice(0,U.length);Z=Y.length;for(X=0;X+1<Z;++X){U.push(Y[X]);T=0;S=Y[X];for(W=Y[X];W<Y[X+1];W++){T+=this.mVecSize[W].mX_advance;if(W!==Y[X+1]-1){T+=this.mSpaceWidth;}if(T>V&&W!==S){T=0;S=W;U.push(W--);}}}if(Z>0){U.push(Y[Z-1]);}},GetOneLineString:function R(U){var S=this.mVecPartition,V="",T;for(T=S[U];T<S[U+1];T++){V=V.concat(this.mVecStr[T]);if(T!==S[U+1]-1){V=V.concat(" ");}}return V;},GetOneLineWords:function A(V){var T=this.mVecPartition,U,S=[];for(U=T[V];U<T[V+1];U++){S.push(U);}return S;},GetOneLineXBearing:function I(S){return this.mVecSize[this.mVecPartition[S]].mX_bearing;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.hash");mstrmojo.requiresCls("mstrmojo.VisEnum");mstrmojo.requiresClsP("mstrmojo.chart.common","MapStructure","Utility");mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","Vector2D","Point2D","CEModuleMain","TripleId","FormatLine","JSONCanvas","SVGCanvas","GraphMatrixContext");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumPictureFormatType","EnumGraphMajorType","EnumLineJoinType","EnumLineStyle","EnumImageUsage","EnumDSSExtraGraphObject","EnumChartStyle","EnumGraphMatrixMajorGraphType","EnumGraphMatrixThemeType","EnumDssGraphGridChartUniformColorMode","EnumAttachedPointsStyle");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSGraphFillBevelEffect","EnumVariantBool","EnumDSSGraphFillEffect");var CE=mstrmojo.chart,Bq=CE.enums,d=Bq.EnumPictureFormatType,g=Bq.EnumGraphMajorType,A1=Bq.EnumLineJoinType,AU=Bq.EnumImageUsage,Ak=CE.common.Utility,j=CE.gModuleMain,CA=CE.gNullTripleId,AX=CE.gNullSeriesId,M=CE.gNullGroupId,BY=Bq.EnumLineStyle,Bi=Bq.EnumDSSExtraGraphObject,H=Bq.EnumChartStyle,a=Bq.EnumGraphMatrixMajorGraphType,BA=Bq.EnumGraphMatrixThemeType,C=Bq.EnumAttachedPointsStyle,Ah=mstrmojo.VisEnum.ControlType,Ae=mstrmojo.hash;var Ax=700,BX=400,Ab=-16383,J=16383,BS=-16383,y=16383,AC=500,Ap=0.1667,BO=96,T=72;var B8=mstrmojo.chart.model,At=B8.enums,Be=At.EnumDSSGraphType,Bg=At.EnumDSSGraphProperty,Bh=At.EnumDSSGraphObject,Z=At.EnumDSSGraphFillBevelEffect,Bz=At.EnumDSSGraphFillEffect;var t=[],AO=new CE.TripleId();var BV=mstrmojo.chart.ChartContext=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.ChartContext",mBaseLayerObject:null,mPropertyMap:null,mGraphWidth:j.mDefaultGraphWidth,mGraphHeight:j.mDefaultGraphHeight,mGraphType:Be.DssGraphTypeReserved,mDataset:null,mFormatManager:null,mCanvas:null,mCanvasInfo:null,caKeyMap:null,mLineJoinType:A1.LJT_MITER,mIsLineWidthOdd:false,mAbsoluteFontLineSize:true,mIsFontAntiAlias:true,mFontScaleRatio:1,mAxisAutoNumberFormat:null,mSelectedAxisAutoNumberFormat:null,mThresholdColorCache:{},globalFormats:null,mManualLayoutMode:false,mRecalculateFrame:true,mIsValueAxisShown:true,mUseAnimation:false,mIsTimeSeriesChart:false,mIsUniformAxisMode:false,mIsEntireChart:true,mIsGraphMatrix:false,mThemeType:BA._black,mUniformAxisContext:null,mpGraphMatrixContext:null,mPartialRendering:false,mRenderingWindow:null,mImageUsage:AU.GENERAL,mImageFormat:d.SVG,mDebugUseNewProperties:true,mTimers:[],mUseTimer:false,init:function CL(CT){this._super(CT);this.caKeyMap={c1:"x1",c2:"x1"};this.mUseTimer=CT.UseTimer||false;this.mGraphWidth=j.mDefaultGraphWidth;this.mGraphHeight=j.mDefaultGraphHeight;this.mDataset=CT.DataSet||CT.mDatasetPtr||null;this.mThemeType=BA._black;this.mSelectedAxisAutoNumberFormat={Array:[],Format:null};},getUtiliy:function Aj(){return mstrmojo.chart.common.Utility;},populateCanvas:function AV(CU){CU=CU||false;if(CU){this.mCanvas=null;}if(!!this.mCanvas){return ;}var CT="SVG";if(this.mCanvasInfo){CT=this.mCanvasInfo.type||"SVG";delete this.mCanvasInfo.type;}else{this.mCanvasInfo={type:"SVG",gradPrefix:"gmGrad",mGradientCount:0,seriesDrawOrder:this.mDataset.GetSeriesIndexByPriority()};}switch(CT){case"JSON":this.mCanvas=new CE.JSONCanvas({});break;default:this.mCanvas=new CE.SVGCanvas(this.mCanvasInfo);break;}this.mCanvasInfo=null;},startTimer:function Bs(CU){if(this.mUseTimer){var CT=CU.functionName+": "+CU.purpose;console.time(CT);this.mTimers.push(CT);}},endTimer:function Bu(){if(this.mUseTimer){var CT=this.mTimers.pop();if(CT){console.timeEnd(CT);}}},vdWidth:function Bl(CT){return Math.floor(CT*this.mGraphWidth/Ax+0.5);},vdHeight:function B9(CU){var CT=this.mGraphHeight;if(this.mIsUniformAxisMode&&!this.mIsEntireChart){CT=this.mUniformAxisContext.mGraphHeight;}return Math.floor(CU*CT/BX+0.5);},NeedAdjustedLinePath:function Bj(){var CT=this.mImageFormat;return this.mIsLineWidthOdd&&(CT!==d.PDF);},SetGraphSize:function AW(CU,CT){if(CU>0&&CT>0){this.mGraphWidth=CU;this.mGraphHeight=CT;if(this.mpGraphMatrixContext){this.mpGraphMatrixContext.mEstGraphHeight=this.mGraphHeight;this.mpGraphMatrixContext.mEstGraphWidth=this.mGraphWidth;}}},GetGraphType:function A3(){return this.mGraphType;},dialogSizeToPixelSize:function v(CT){return CT*Math.min(this.mGraphWidth,this.mGraphHeight)/2000;},DrawPolygon:function Bv(CV,CY,CW,CX,CU){if(this.mImageFormat===d.SVG){return ;}if((CY===undefined)||(CY===null)){CY=true;}CW=CW||false;CX=CX||null;CU=CU||BY.LS_SOLID;if(CV.length<3){return ;}this.NewPath();if(CY&&this.NeedAdjustedLinePath()){var CT=this.hAdjustLinePath(CV);this.DrawPolyLine(CT,false,CW,CX,CU);}else{this.DrawPolyLine(CV,false,CW,CX,CU);}this.ClosePath();},DrawStraightLine:function AZ(CV,CT){if(this.mImageFormat===d.SVG){return ;}this.NewPath();if(this.NeedAdjustedLinePath()){var CU=0,CW=0;if(CV.x===CT.x){CU=0.5;}if(CV.y===CT.y){CW=0.5;}this.hMoveTo(CV.x+CU,CV.y+CW,true);this.hLineTo(CT.x+CU,CT.y+CW,true);}else{this.hMoveTo(CV.x,CV.y,true);this.hLineTo(CT.x,CT.y,true);}},DrawPolyLine:function AP(Ca,CZ,CW,CT,CY){if(this.mImageFormat===d.SVG){return ;}if((CZ===undefined)||(CZ===null)){CZ=true;}CW=CW||false;CT=CT||null;CY=CY||BY.LS_SOLID;if(CY===BY.LS_GRADIENT){CY=BY.LS_SOLID;}var Cb=Ca.length,CX,CU,Cc;if(Cb<=0){return ;}var CV;if(this.NeedAdjustedLinePath()){CV=this.hAdjustLinePath(Ca);}Cb=CV.length;this.NewPath();this.hMoveTo(CV[0].x,CV[0].y,CZ,CW,CT);CU=0;for(CX=1;CX<Cb;++CX){if(CY===BY.LS_SOLID){this.hLineTo(CV[CX].x,CV[CX].y,CZ,CW,CT);}else{Cc=CE.gLinePatterns[CY];this.DrawDashedLine(CV[CU],CV[CX],Cc);}CU=CX;}},DrawDashedLine:function CG(CV,Cc,Ca){if(this.mImageFormat===d.SVG){return ;}var CW,Cd,Cb,CX,Ce,CT=0,CY=0,CZ,CU;CW=Math.sqrt((CV.x-Cc.x)*(CV.x-Cc.x)+(CV.y-Cc.y)*(CV.y-Cc.y));Cd=(Cc.x-CV.x)/CW;Cb=(Cc.y-CV.y)/CW;CZ=Ca.length;CX=CV.x;Ce=CV.y;while(CT<CW){CU=Math.min(Ca[CY%CZ],CW-CT);++CY;CT+=CU;if(CY%2===1){this.MoveTo(CX,Ce);}CX+=CU*Cd;Ce+=CU*Cb;if(CY%2===1){this.LineTo(CX,Ce);}}},isParetoChart:function BJ(){return this.mGraphType===Be.DssGraphTypePareto||this.mGraphType===Be.DssGraphTypePareto_Percent;},isCombinationChart:function S(){var CT=this.GetGraphMatrixContext();return this.mIsGraphMatrix&&CT.isCombinationChart();},hasBarAreaInComb:function Az(){if(this.isCombinationChart()===false){return false;}var CT=this.mDatasetPtr.GetSeriesByShape();return CT.Bar.length>0||CT.Area.length>0;},getFontScale:function Ad(){if(this.mAbsoluteFontLineSize){return this.mFontScaleRatio;}return 1;},vdRect:function r(CT){return(new CE.Rect2D({x:this.vdWidth(CT.x),y:this.vdHeight(CT.y),width:this.vdWidth(CT.width),height:this.vdHeight(CT.height)}));},vdPoint:function CF(CT){return(new CE.Point2D({x:this.vdWidth(CT.x),y:this.vdHeight(CT.y)}));},vdFontSize:function B2(CT){var CV=CT;if(this.mIsGraphMatrix){return CV;}if(!this.mAbsoluteFontLineSize){CV=this.vdHeight(CV);}if(!this.mIsTimeSeriesChart){CV=this.PtSizeToPixelSize(CV);CV*=this.getFontScale();if(this.mIsGraphMatrix){var CU=this.mDataset.GetZoomScale();CV=CV*CU+0.5;}if(CV===0){CV=1;}}return CV;},vdLineWidth:function A6(CU){var CT=CU;if(!this.mAbsoluteFontLineSize){CT=this.vdHeight(CT);}CT=this.PtSizeToPixelSize(CT);CT=Math.floor(CT/100+0.5);return CT;},TDGToMSTRPoint:function BK(CV,CU){var CT,CW;CT=Math.floor((CV-Ab)*this.mGraphWidth/(J-Ab)+0.5);CW=Math.floor((y-CU)*this.mGraphHeight/(y-BS)+0.5);return(new CE.Point2D({x:CT,y:CW}));},setCanvas:function AT(CT){this.mCanvas=CT;},saveState:function Ba(){this.mCanvas.saveState();},Rotate:function CC(CT,CU){this.mCanvas.Rotate(CT,CU);},Scale:function BU(CT,CU){this.mCanvas.Scale(CT,CU);},RestoreState:function W(){this.mCanvas.RestoreState();},Clip:function Bm(){this.mCanvas.Clip();},DrawRectangle:function N(CT,CU){if(this.mImageFormat===d.SVG){return ;}this.NewPath();if(CU&&this.NeedAdjustedLinePath()){this.mCanvas.AddRect(CT.x+0.5,CT.y+0.5,CT.width,CT.height);}else{this.mCanvas.AddRect(CT.x,CT.y,CT.width,CT.height);}},FinishTextBoundingBox:function L(CU,CT,CW){var CV=this.mDataset.GetSeriesCount();if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){this.mCanvas.CreateSVGTextBoundingBox(CU,CT,CW,CV);}},FinishDrawCircle:function A4(CU,CV){if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){var CT=this.hGetIdentity(CV.mSeriesId,CV.mGroupId);this.mCanvas.CreateSVGCircle(CU.x,CU.y,CU.r,CT);}},FinishDrawRect:function Ao(CU,CV){if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){var CT;if(CV.mObjectId===Bh.DssGraphDataMarker){CT=this.hGetIdentityEx(CV.mSeriesId,CV.mGroupId,"marker");}else{CT=this.hGetIdentity(CV.mSeriesId,CV.mGroupId);}if(this.NeedAdjustedLinePath()){CU.x=parseInt(CU.x)===CU.x?CU.x+0.5:CU.x;CU.y=parseInt(CU.y)===CU.y?CU.y+0.5:CU.y;}this.mCanvas.CreateSVGRect(CU.x,CU.y,CU.width,CU.height,CT);}},FinishDrawPieSlice:function B4(CU,CY,CT,CX,Ca,CZ,CW){var CV;if(CZ===undefined){CZ=false;}if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){if(Ca.angleByIndex!==undefined){CV=this.hGetPieIdentity(Ca.mSeriesId,Ca.mGroupId,Ca.angleByIndex,Ca.sliceById);}else{CV=this.hGetIdentity(Ca.mSeriesId,Ca.mGroupId);}if(CZ){this.mCanvas.CreateSVGCircle(CU.x,CU.y,CY,CV,CW,this.mThemeType===BA._white);}else{this.mCanvas.CreateSVGSector(CU.x,CU.y,CY,CT,CX,CV,CW,this.mThemeType===BA._white);}}},FinishDrawRingPieSlice:function q(CU,CY,CX,CT,CW,CZ){var CV;if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){if(CZ.angleByIndex!==undefined){CV=this.hGetPieIdentity(CZ.mSeriesId,CZ.mGroupId,CZ.angleByIndex,CZ.sliceById);}else{CV=this.hGetIdentity(CZ.mSeriesId,CZ.mGroupId);}this.mCanvas.CreateSVGRingSector(CU.x,CU.y,CY,CX,CT,CW,CV);}},FinishDrawRing:function BE(CY,CX,CT,CU,CV){CV=CV||false;var CW;if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){if(CV){CW=this.hGetPieIdentity(CU.mSeriesId,CU.mGroupId,CU.angleByIndex,CU.sliceById);}else{CW=this.hGetIdentity(CU.mSeriesId,CU.mGroupId);}this.mCanvas.CreateSVGRing(CY.x,CY.y,CX,CT,CW);}},FinishDrawPolyline:function CP(Ch,CU,Cd,Cb,CV,Ce,CX){var CZ=this.mDataset.GetSeriesCount();if(this.mCanvas instanceof mstrmojo.chart.SVGCanvas){Cd=Cd||false;var Cg=0,Ca=1,Cj=2,Cf=3,CY=4,Ci,Cc=CU.mObjectId,CW=this.mCanvas;var CT=Ch;if(this.NeedAdjustedLinePath()){CT=this.hAdjustLinePath(Ch);}switch(Cc){case Bh.DssGraphUserLine1:case Bh.DssGraphUserLine2:case Bh.DssGraphUserLine3:case Bh.DssGraphUserLine4:Cb=this.hGetIdentityEx(Cc-Bh.DssGraphUserLine1,0,"originLine");if(Cb){Ci=[Cb];}else{Ci=[];}CW.CreateSVGPolyLine(CU.mSeriesId,CT,Ci,CY);break;case Bh.DssGraphO1Major:case Bh.DssGraphO2Major:case Bh.DssGraphY1Major:case Bh.DssGraphY2Major:case Bh.DssGraphX1Major:case Bh.DssGraphX2Major:case Bh.DssGraphO1Minor:case Bh.DssGraphO2Minor:case Bh.DssGraphY1Minor:case Bh.DssGraphY2Minor:case Bh.DssGraphX1Minor:case Bh.DssGraphX2Minor:Ci=[];CW.CreateSVGPolyLine(CU.mSeriesId,CT,Ci,Cj);break;case Bh.DssGraphO1Body:case Bh.DssGraphO2Body:case Bh.DssGraphX1Body:case Bh.DssGraphX2Body:case Bh.DssGraphY1Body:case Bh.DssGraphY2Body:Ci=[];CW.CreateSVGPolyLine(CU.mSeriesId,CT,Ci,Cf);break;case Bh.DssGraphTrendLine:CW.CreateSVGPolyLineForTRLine(Ch,CZ,Cb,true,CV,Ce,CX);break;default:if(Cd){Ci=[];CW.CreateSVGPolyLine(CU.mSeriesId,CT,Ci,Cg);}else{Ci=this.hGetIdentities(CU.mSeriesId,CU.mGroupId,Ch.length);CW.CreateSVGPolylineWithCircles(CU.mSeriesId,CT,Ci);}break;}}},FinishDrawTickerShape:function Bw(CX,CV,CY){var CW=[CX,CV],CT=this.mCanvas;if(CT instanceof mstrmojo.chart.SVGCanvas){var CU=this.hGetIdentities(CY.mSeriesId,CY.mGroupId,1);CT.CreateSVGPolyLine(CY.mSeriesId,CW,CU,5);}},FinishDrawStraightLine:function X(CU,CZ,CT,CX,CY){var CW=this.mDataset.GetSeriesCount(),Ca=[CU],CV=this.mCanvas;Ca.push(CZ);if(this.NeedAdjustedLinePath()){Ca=this.hAdjustLinePath(Ca);}if(CV instanceof mstrmojo.chart.SVGCanvas){if(CX){if(CT.mObjectId===Bh.DssGraphTrendLine){CV.CreateSVGPolyLineForTRLine(Ca,CW,CX,true,CU,CY,CZ);}else{if(CT.mObjectId===Bh.DssGraphReferenceLine){CV.CreateSVGPolyLineForTRLine(Ca,CW,CX,false,CU,CY,CZ);}}}else{switch(CT.mObjectId){case Bh.DssGraphO1Body:case Bh.DssGraphO2Body:case Bh.DssGraphX1Body:case Bh.DssGraphX2Body:case Bh.DssGraphY1Body:case Bh.DssGraphY2Body:var Cb=[];CV.CreateSVGPolyLine(CT.mSeriesId,Ca,Cb);return ;}Cb=this.hGetIdentities(CT.mSeriesId,CT.mGroupId,1);Cb.push(Cb[0]);CV.CreateSVGPolylineWithCircles(CT.mSeriesId,Ca,Cb);}}},FinishDrawPolygon:function Am(CY,CZ,CX){var CU,CV=this.mCanvas,CW=CY.length;if(CW<3){return ;}if(CV instanceof mstrmojo.chart.SVGCanvas){var CT=CY;if(this.NeedAdjustedLinePath()){CT=this.hAdjustLinePath(CY);}switch(CZ){case C.NORMAL:CU=this.hGetIdentity(CX.mSeriesId,CX.mGroupId);CV.CreateSVGPolygon(CX.mSeriesId,CT,CU);break;case C.TOOLTIP_UPPER:if((CW&1)!==0){return ;}CU=this.hGetIdentities(CX.mSeriesId,CX.mGroupId,CW/2);CV.CreateSVGPolygonWithCircles(CX.mSeriesId,CT,CU);break;case C.TOOLTIP_U2L:if((CW&1)!==0){return ;}CU=this.hGetIdentities(CX.mSeriesId,CX.mGroupId,CW/2);CV.CreateSVGPolygonWithRects(CX.mSeriesId,CT,CU);break;case C.TOOLTIP_TRAPEZOID:if((CW&1)!==0){return ;}CU=this.hGetIdentities(CX.mSeriesId,CX.mGroupId,CW/2);CV.CreateSVGPolygonWithTrapezoid(CX.mSeriesId,CT,CU);break;default:CV.CreateSVGPolygon(CX.mSeriesId,CT);break;}}},allowOverlapBetweenDatalabels:function(){var CT=this.mDataset;return CT&&CT.allowDatalabelOverlap();},hGetLabelIdentity:function A5(CW){var CT={identity:null,type:"data-label"};switch(CW.mObjectId){case Bh.DssGraph2DO1Label:case Bh.DssGraph2DO2Label:case Bh.DssGraphY1Label:case Bh.DssGraphY2Label:case Bh.DssGraphX2Label:case Bh.DssGraphX1Label:CT.type="axis-text";break;case Bh.DssGraphUserLabel1:case Bh.DssGraphUserLabel2:case Bh.DssGraphUserLabel3:case Bh.DssGraphUserLabel4:var CV=CW.mObjectId-Bh.DssGraphUserLabel1;CT.identity=this.hGetIdentityEx(CV,0,"origin-label");CT.type=CV<=1?Ah.GM_ORIGIN_LABEL_H:Ah.GM_ORIGIN_LABEL_V;break;case Bh.DssGraphRefLineText:CT.type="ref-label";break;case Bh.DssGraphTrendLineText:CT.type="trend-label";break;default:var CU=null;if(CW.mSeriesId>=0&&CW.mGroupId>=0){if(CW.angleByIndex!==undefined){CU=this.hGetPieIdentityEx(CW.mSeriesId,CW.mGroupId,CW.angleByIndex,CW.sliceById,"data-label");}else{CU=this.hGetIdentityEx(CW.mSeriesId,CW.mGroupId,"data-label");}}CT.identity=CU;break;}return CT;},FinishDrawText:function k(CX,CW){var CU=this.mCanvas;if(CU instanceof mstrmojo.chart.SVGCanvas){switch(CX.mObjectId){case Bh.DssGraph2DO1Label:case Bh.DssGraph2DO2Label:case Bh.DssGraphY1Label:case Bh.DssGraphY2Label:case Bh.DssGraphX2Label:case Bh.DssGraphX1Label:CU.CreateSVGAxisText(CX.mSeriesId,CW.Tooltip,CW.Identities);break;case Bi.DssGraphBanner:if(!CW.Identities){CW.Identities=this.hGetIdentities(CX.mSeriesId,CX.mGroupId,1);}CU.CreateSVGBannerText(CX.mSeriesId,CW.Identities);break;default:var CT=this.hGetLabelIdentity(CX);var CV=this.mDataset.GetSeriesCount();if(CT.type==="ref-label"){CT.identity=CW.Identity;}CU.CreateSVGGenericText(CV,CT.identity,CT.type);break;}}},FinishDrawCurves:function G(Cc,CZ,CY,CT,Ca,CV){var CW=this.mDataset.GetSeriesCount(),Cb=CZ.mSeriesId,CU=this.mCanvas,CX;if(CU instanceof mstrmojo.chart.SVGCanvas){CU.CreateSVGCurves(Cc,CW,Cb,CY,CZ.mObjectId===Bh.DssGraphTrendLine,CT,Ca,CV);}},hGetIdentities:function BR(CW,CX,CY){var CV=[],CU;for(CU=0;CU<CY;++CU){var CT=this.hGetIdentity(CW,CX+CU);CV.push(CT);}return CV;},hGetPieIdentity:function Av(CW,CU,CT,CV){if(CW<0){CW=0;}if(CU<0){CU=0;}if(CT===undefined||CT<0){CT=0;}if(CV===undefined||CV<0){CV=0;}return this.mDataset.dataProvider.getGraphCell(CW,CU).getSliceIdentity(CT,CV);},hGetIdentity:function AH(CT,CU){if(CT<0){CT=0;}if(CU<0){CU=0;}return this.mDataset.dataProvider.getGraphCell(CT,CU).getIdentity();},hGetIdentityEx:function P(CW,CY,CV){CV=CV||"generic";if(CW<0){CW=0;}if(CY<0){CY=0;}var CU=this.mDataset.dataProvider;switch(CV){case"data-label":return CU.getGraphCell(CW,CY).getDataLabelIdentity();case"marker":return CU.getGraphCell(CW,CY).getMarkerIdentity();case"originLine":case"origin-label":var CX=["y1","y2","x1","x2"],CT=CX[CW]||"y1";if(CV==="originLine"){return CU.getAxisOriginLineIdentity(CT);}return CU.getAxisOriginLabelIdentity(CT);default:return this.hGetIdentity(CW,CY);}},hGetPieIdentityEx:function CB(Ca,CU,CT,CX,CV){if(Ca<0){Ca=0;}if(CU<0){CU=0;}if(CT===undefined||CT<0){CT=0;}if(CX===undefined||CX<0){CX=0;}var CY=this.mDataset;switch(CV){case"data-label":var CW=CY.dataProvider.getGraphCell(Ca,CU);if(!!CW){if(CW.isFaked){CW=CY.dataProvider.innerGetGraphCell(Ca,CU);}var CZ=CW.getSinglePieDPs();if(!!CZ){return CZ[CT].getDataLabelIdentity(CX,true);}}break;default:return this.hGetPieIdentity(Ca,CU,CT,CX);}},getIdentity:function Ar(CV,CY,Cc){Cc=Cc||"shape";var Ca=[],Cb;if(CY==="pie"){var CX=this.mDataset,CT=0,CU=0,CZ,CW;if(CX){CT=CX.GetPieCountAtOneDataPoint(CV.mSeriesId,CV.mGroupId);CU=CX.GetPieSliceCount(CV.mSeriesId,CV.mGroupId);}for(CZ=0;CZ<CT;CZ++){for(CW=0;CW<CU;CW++){Cb=this.hGetPieIdentityEx(CV.mSeriesId,CV.mGroupId,CZ,CW,Cc);Ca.push(Cb);}}}else{Cb=this.hGetIdentityEx(CV.mSeriesId,CV.mGroupId,Cc);Ca.push(Cb);}return Ca;},hAdjustLinePath:function AR(CV){var CX=CV.length,CY,CU,CW;var CT=Ae.cloneArray(CV);CY=CX-1;for(CW=0;CW<CX;++CW){CU=(CW+1===CX)?0:CW+1;if(CV[CW].x===CV[CY].x||CV[CW].x===CV[CU].x){CT[CW].x+=0.5;}if(CV[CW].y===CV[CY].y||CV[CW].y===CV[CU].y){CT[CW].y+=0.5;}CY=CW;}return CT;},NewPath:function D(){this.mCanvas.NewPath();},ClosePath:function z(){this.mCanvas.ClosePath();},SetFontAntiAlias:function CD(CT){this.mIsFontAntiAlias=CT;},SaveSurfaceToObject:function Au(CT){return this.mCanvas.SaveToObject(CT);},CalculateDepthOffset:function Aa(CW,CU,Cb){var CX=0,CV=Math.cos(j.DegreeToRadian(CU)),Cc=Math.sin(j.DegreeToRadian(CU)),Ca,CZ,CY,CT;if(Cb===undefined){Cb=false;}if(Cb){CX=1/Math.sqrt(Math.pow(this.mGraphWidth*CV,2)+Math.pow(this.mGraphHeight*Cc,2));}else{CX=Ap/AC;}CY=this.mGraphWidth*CX*CW;CT=this.mGraphHeight*CX*CW;Ca=Math.floor(CY*CV+0.5);CZ=-Math.floor(CT*Cc+0.5);return{OffsetX:Ca,OffsetY:CZ};},hApplyEnhancedSeriesEffect:function O(CU,CV){if(this.mIsGraphMatrix){return ;}var CT=CU.EnhancedSeriesEffect,CW,CY;switch(this.mGraphType){case Be.DssGraphTypePies:case Be.DssGraphTypeMultiple_Pies:case Be.DssGraphTypeMultiple_Proportional:case Be.DssGraphTypeX_Y_Scatter:case Be.DssGraphTypeDualAxis_X_Y_Scatter:case Be.DssGraphTypeX_Y_Scatter_with_Labels:case Be.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:case Be.DssGraphTypeBubble:case Be.DssGraphTypeBubble_DualAxis:case Be.DssGraphTypeBubble_With_Labels:case Be.DssGraphTypeBubble_DualAxis_With_Labels:CT.call(CU,204,Z.DssGraphFillBevelSphere,0,270,10);break;case Be.DssGraphTypeRing_Pie:case Be.DssGraphTypeMultiple_Ring_Pies:case Be.DssGraphTypeMultiple_Proportional_Ring_Pies:CT.call(CU,204,Z.DssGraphFillBevelDonut,50,0,30);break;default:var CX=Bq.EnumCollectionType;switch(CV){case CX.CT_VERTICAL_AREA:CT.call(CU,204,Z.DssGraphFillBevelSphere,0,270,20);break;case CX.CT_VERTICAL_BAR:CY=204;CW=this.GetProperty(Bg.DssGraphDepthMode,CA);if(this.isVerticalBar()&&CW){CY=255;}CT.call(CU,CY,Z.DssGraphFillBevelDonut,50,0,30);break;case CX.CT_HORIZONTAL_AREA:CT.call(CU,204,Z.DssGraphFillBevelSphere,0,180,20);break;case CX.CT_HORIZONTAL_BAR:CT.call(CU,204,Z.DssGraphFillBevelSphere,0,270,30);break;case CX.CT_DEPTH_LINE_OR_LINE_MARKER:CT.call(CU,204,Z.DssGraphFillBevelSphere,0,270,10);break;default:break;}break;}},GetLocation:function s(CU){var CW,CV,CT;CW=this.GetProperty(CU,CA);if(CW===null||CW===undefined){return ;}CV=this.TDGToMSTRPoint(CW.Left,CW.Top);CT=this.TDGToMSTRPoint(CW.Right,CW.Bottom);return new CE.Rect2D({x:CV.x,y:CV.y,width:CT.x-CV.x,height:CT.y-CV.y});},GetLocationRect:function CH(CV){var CU,CT;CU=this.GetLocation(CV);if(CU){CT=new CE.Rect2D({x:CU.Left,y:CU.Top,width:CU.Right-CU.Left,height:CU.Bottom-CU.Top});}return CT;},PutLocation:function Aw(CT,CU){},GetProperty:function CK(CT,CU){if(this.mPropertyMap===null){return null;}return this.mPropertyMap.find([CT,this.MapObject(CU.mObjectId),CU.mSeriesId]);},GetLocalProperty:function BD(CT,CU){if(this.mPropertyMap===null){return null;}return this.mPropertyMap.find([CT,this.MapObject(CU.mObjectId),CU.mSeriesId]);},PutProperty:function l(CT,CU,CV){if(this.mPropertyMap===null){this.mPropertyMap=new CE.common.MapStructure();}this.mPropertyMap.push([CT,this.MapObject(CU.mObjectId),CU.mSeriesId],CV);if(CT===Bg.DssGraphType){this.mGraphType=CV;}},normalDirection:function BH(CW,CV){var CY=this.CalculateDepthOffset(1000,CV),CU=CY.OffsetX,CZ=CY.OffsetY,CT=new CE.Vector2D({x:CU,y:CZ}),CX=CT.CrossProduct(CW);if(CX===0){return 0;}return CX>0?1:-1;},IsVertical:function e(){switch(this.mGraphType){case Be.DssGraphTypeVertical_Area_Absolute:case Be.DssGraphTypeVertical_Area_Stacked:case Be.DssGraphTypeVertical_Area_BiPolar_Absolute:case Be.DssGraphTypeVertical_Area_BiPolar_Stacked:case Be.DssGraphTypeVertical_Area_DualAxis_Absolute:case Be.DssGraphTypeVertical_Area_DualAxis_Stacked:case Be.DssGraphTypeVertical_Area_Percent:case Be.DssGraphTypeVertical_Bar_Side_by_Side:case Be.DssGraphTypeVertical_Bar_Stacked:case Be.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case Be.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Be.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case Be.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Be.DssGraphTypeVertical_Bar_Percent:case Be.DssGraphTypeVertical_Line_Absolute:case Be.DssGraphTypeVertical_Line_Stacked:case Be.DssGraphTypeVertical_Line_BiPolar_Absolute:case Be.DssGraphTypeVertical_Line_BiPolar_Stacked:case Be.DssGraphTypeVertical_Line_DualAxis_Absolute:case Be.DssGraphTypeVertical_Line_DualAxis_Stacked:case Be.DssGraphTypeVertical_Line_Percent:case Be.DssGraphTypeVertical_Bar_Absolute:case Be.DssGraphTypeVertical_Bar_BiPolar_Absolute:case Be.DssGraphTypeVertical_Bar_DualAxis_Absolute:case Be.DssGraphTypeVertical_Bar_DualAxis_Percent:case Be.DssGraphTypeVertical_Line_DualAxis_Percent:case Be.DssGraphTypeVertical_Area_DualAxis_Percent:case Be.DssGraphTypeVertical_Bullet:case Be.DssGraphTypeVertical_CategoryPies_Absolute:case Be.DssGraphTypeVertical_CategoryPies_Percent:case Be.DssGraphTypeVertical_CategoryPies_Stacked:case Be.DssGraphTypeGrid_Pies:case Be.DssGraphTypeScatter_Pies:case Be.DssGraphTypeBubble_Pies:return true;}switch(this.GetGraphMajorType()){case g.GMT_BUBBLE:case g.GMT_SCATTER:case g.GMT_STOCK:return true;}return false;},IsDualAxis:function w(){switch(this.mGraphType){case Be.DssGraphTypeVertical_Area_DualAxis_Absolute:case Be.DssGraphTypeVertical_Area_DualAxis_Stacked:case Be.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case Be.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case Be.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case Be.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Be.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case Be.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case Be.DssGraphTypeVertical_Line_DualAxis_Absolute:case Be.DssGraphTypeVertical_Line_DualAxis_Stacked:case Be.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case Be.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case Be.DssGraphTypeDualAxis_X_Y_Scatter:case Be.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:case Be.DssGraphTypeDualAxis_Polar_Coordinate_Chart:case Be.DssGraphTypeDualAxis_Radar_Line:case Be.DssGraphTypeDualAxis_Radar_Stacked_Area:case Be.DssGraphTypeBubble_DualAxis:case Be.DssGraphTypeHiLo_DualAxis_Stock_Chart:case Be.DssGraphTypeHiLoOpen_DualAxis_Stock_Chart:case Be.DssGraphTypeHiLoOpenClose_DualAxis_Stock_Chart:case Be.DssGraphTypeBubble_DualAxis_With_Labels:case Be.DssGraphTypeVertical_Bar_DualAxis_Absolute:case Be.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:case Bg.DssGraphRadar_DualAxis_Radar_Stacked_Line:case Bg.DssGraphRadar_DualAxis_Radar_Area:case Be.DssGraphTypeVertical_Area_BiPolar_Absolute:case Be.DssGraphTypeVertical_Area_BiPolar_Stacked:case Be.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case Be.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case Be.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case Be.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Be.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:case Be.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case Be.DssGraphTypeVertical_Line_BiPolar_Absolute:case Be.DssGraphTypeVertical_Line_BiPolar_Stacked:case Be.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case Be.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case Be.DssGraphTypeVertical_Bar_BiPolar_Absolute:case Be.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:case Be.DssGraphTypeVertical_Bar_DualAxis_Percent:case Be.DssGraphTypeVertical_Line_DualAxis_Percent:case Be.DssGraphTypeVertical_Area_DualAxis_Percent:case Be.DssGraphTypeHorizontal_Bar_DualAxis_Percent:case Be.DssGraphTypeHorizontal_Line_DualAxis_Percent:case Be.DssGraphTypeHorizontal_Area_DualAxis_Percent:return true;default:return false;}},IsStackedChart:function BL(){switch(this.mGraphType){case Be.DssGraphTypeVertical_Area_Stacked:case Be.DssGraphTypeVertical_Area_BiPolar_Stacked:case Be.DssGraphTypeVertical_Area_DualAxis_Stacked:case Be.DssGraphTypeHorizontal_Area_Stacked:case Be.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case Be.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case Be.DssGraphTypeVertical_Bar_Stacked:case Be.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Be.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Be.DssGraphTypeHorizontal_Bar_Stacked:case Be.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case Be.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case Be.DssGraphTypeVertical_Line_Stacked:case Be.DssGraphTypeVertical_Line_BiPolar_Stacked:case Be.DssGraphTypeVertical_Line_DualAxis_Stacked:case Be.DssGraphTypeHorizontal_Line_Stacked:case Be.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case Be.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case Be.DssGraphTypeRadar_Stacked_Area:case Be.DssGraphTypeDualAxis_Radar_Stacked_Area:case Be.DssGraphTypeRadar_Area_Stacked:case Bg.DssGraphRadar_Line_Stacked:case Bg.DssGraphRadar_DualAxis_Radar_Stacked_Line:return true;default:return false;}},IsPieChart:function Y(){if(this.mIsGraphMatrix){switch(this.GetGraphMatrixContext().mGraphType){case Be.DssGraphTypeVertical_CategoryPies_Absolute:case Be.DssGraphTypeVertical_CategoryPies_Percent:case Be.DssGraphTypeVertical_CategoryPies_Stacked:case Be.DssGraphTypeHorizontal_CategoryPies_Absolute:case Be.DssGraphTypeHorizontal_CategoryPies_Percent:case Be.DssGraphTypeHorizontal_CategoryPies_Stacked:case Be.DssGraphTypeGrid_Pies:case Be.DssGraphTypeScatter_Pies:case Be.DssGraphTypeBubble_Pies:return true;default:return false;}}else{return this.GetGraphMajorType()===g.GMT_PIE;}},MapObject:function Bd(CT){if(CT===Bg.DssGraphPieSlice){return Bg.DssGraphRiser;}return CT;},SplitRect:function BP(CX,CT,CV,CZ,CY){var CW,CU;if(CT){CW=CX.height*CV/100;CZ.Reset(CX.x,CX.y,CX.width,CX.height-CW);CY.Reset(CX.x,CX.y+CZ.height,CX.width,CW);}else{CU=CX.width*CV/100;CZ.Reset(CX.x+CU,CX.y,CX.width-CU,CX.height);CY.Reset(CX.x,CX.y,CU,CX.height);}},getAxisAutoNumberFormat:function AJ(Ca,CX,CZ){CZ=CZ||false;var CU=this.mDataset,CW;if(CX&&CX.length){var CT=this.mSelectedAxisAutoNumberFormat;if(CT.Format!==null){var CY=true,CV=CT.Array;if(CV&&CV.length===CX.length){for(CW=0;CW<CV.length;CV++){if(CV[CW]!==CX[CW]){CY=false;break;}}}if(CY){Ca.reset(CT.Format);return ;}}CU.getValueAxisNumberFormat(Ca,CX,CZ);CT.Array=CX.slice(0);CT.Format=new CE.ChartAdvFormat({ChartAdvFormat:Ca});}else{var Cb=this.mAxisAutoNumberFormat;if(Cb!==null){Ca.reset(Cb);}else{CU.getValueAxisNumberFormat(Ca);this.mAxisAutoNumberFormat=new CE.ChartAdvFormat({ChartAdvFormat:Ca});}}},GetGraphMajorType:function V(){switch(this.mGraphType){case Be.DssGraphTypeVertical_Area_Absolute:case Be.DssGraphTypeVertical_Area_Stacked:case Be.DssGraphTypeVertical_Area_BiPolar_Absolute:case Be.DssGraphTypeVertical_Area_BiPolar_Stacked:case Be.DssGraphTypeVertical_Area_DualAxis_Absolute:case Be.DssGraphTypeVertical_Area_DualAxis_Stacked:case Be.DssGraphTypeVertical_Area_Percent:case Be.DssGraphTypeHorizontal_Area_Absolute:case Be.DssGraphTypeHorizontal_Area_Stacked:case Be.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case Be.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case Be.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case Be.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case Be.DssGraphTypeHorizontal_Area_Percent:case Be.DssGraphTypeVertical_Bar_Side_by_Side:case Be.DssGraphTypeVertical_Bar_Stacked:case Be.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case Be.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Be.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case Be.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Be.DssGraphTypeVertical_Bar_Percent:case Be.DssGraphTypeHorizontal_Bar_Side_by_Side:case Be.DssGraphTypeHorizontal_Bar_Stacked:case Be.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case Be.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case Be.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:case Be.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case Be.DssGraphTypeHorizontal_Bar_Percent:case Be.DssGraphTypeVertical_Line_Absolute:case Be.DssGraphTypeVertical_Line_Stacked:case Be.DssGraphTypeVertical_Line_BiPolar_Absolute:case Be.DssGraphTypeVertical_Line_BiPolar_Stacked:case Be.DssGraphTypeVertical_Line_DualAxis_Absolute:case Be.DssGraphTypeVertical_Line_DualAxis_Stacked:case Be.DssGraphTypeVertical_Line_Percent:case Be.DssGraphTypeHorizontal_Line_Absolute:case Be.DssGraphTypeHorizontal_Line_Stacked:case Be.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case Be.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case Be.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case Be.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case Be.DssGraphTypeHorizontal_Line_Percent:case Be.DssGraphTypeVertical_Bar_BiPolar_Absolute:case Be.DssGraphTypeVertical_Bar_DualAxis_Absolute:case Be.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:case Be.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:case Be.DssGraphTypeVertical_Bullet:case Be.DssGraphTypeHorizontal_Bullet:case Be.DssGraphTypeVertical_Bar_DualAxis_Percent:case Be.DssGraphTypeVertical_Line_DualAxis_Percent:case Be.DssGraphTypeVertical_Area_DualAxis_Percent:case Be.DssGraphTypeHorizontal_Bar_DualAxis_Percent:case Be.DssGraphTypeHorizontal_Line_DualAxis_Percent:case Be.DssGraphTypeHorizontal_Area_DualAxis_Percent:case Be.DssGraphTypeHorizontal_CategoryPies_Absolute:case Be.DssGraphTypeHorizontal_CategoryPies_Stacked:case Be.DssGraphTypeHorizontal_CategoryPies_Percent:case Be.DssGraphTypeVertical_CategoryPies_Absolute:case Be.DssGraphTypeVertical_CategoryPies_Stacked:case Be.DssGraphTypeVertical_CategoryPies_Percent:return g.GMT_CATEGORY;case Be.DssGraphTypePies:case Be.DssGraphTypeRing_Pie:case Be.DssGraphTypeMultiple_Pies:case Be.DssGraphTypeMultiple_Ring_Pies:case Be.DssGraphTypeMultiple_Proportional:case Be.DssGraphTypeMultiple_Proportional_Ring_Pies:case Be.DssGraphTypePie_Bar:case Be.DssGraphTypeRing_Pie_Bar:return g.GMT_PIE;case Be.DssGraphTypeScatter_Pies:case Be.DssGraphTypeX_Y_Scatter:case Be.DssGraphTypeDualAxis_X_Y_Scatter:case Be.DssGraphTypeX_Y_Scatter_with_Labels:case Be.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:return g.GMT_SCATTER;case Be.DssGraphTypeBubble_Pies:case Be.DssGraphTypeBubble:case Be.DssGraphTypeBubble_DualAxis:case Be.DssGraphTypeBubble_With_Labels:case Be.DssGraphTypeBubble_DualAxis_With_Labels:return g.GMT_BUBBLE;case Be.DssGraphTypeVertical_Bar_Absolute:case Be.DssGraphTypeHorizontal_Bar_Absolute:return g.GMT_CATEGORY;case Be.DssGraphTypeGrid_Pies:case Be.DssGraphTypeGridChart:return g.GMT_GRID;case Be.DssGraphTypeMaxDeskTopGraphTypes:return g.GMT_INVALID;default:return g.GMT_INVALID;}},isLegendByGroup:function CR(){return false;},isVerticalBar:function Bk(){switch(this.mGraphType){case Be.DssGraphTypeVertical_Bar_Side_by_Side:case Be.DssGraphTypeVertical_Bar_Stacked:case Be.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case Be.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Be.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case Be.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Be.DssGraphTypeVertical_Bar_Percent:case Be.DssGraphTypeVertical_Bar_DualAxis_Percent:case Be.DssGraphTypeVertical_Bullet:return true;default:return false;}},MoveTo:function A8(CT,CW,CU,CV){this.mCanvas.MoveTo(CT,CW,CU,CV);},BezierCurveTo:function Bn(CV,CU,CY,CW,CT,CX){this.mCanvas.BezierCurveTo(CV,CU,CY,CW,CT,CX);},LineTo:function AA(CT,CW,CU,CV){this.mCanvas.LineTo(CT,CW,CU,CV);},hMoveTo:function m(CT,CY,CU,CV,CX){var CW;CW=(CU&&this.NeedAdjustedLinePath())?0.5:0;this.MoveTo(CT+CW,CY+CW,CV,CX);},hLineTo:function CI(CT,CY,CU,CV,CX){var CW;CW=(CU&&this.NeedAdjustedLinePath())?0.5:0;this.LineTo(CT+CW,CY+CW,CV,CX);},SetRGBAFill:function Bb(CU,CV,CT,CW){this.mCanvas.SetRGBAFillColor(CU,CV,CT,CW);},SetRGBAStroke:function CM(CU,CV,CT,CW){this.mCanvas.SetRGBAStrokeColor(CU,CV,CT,CW);},FillPath:function AQ(){this.mCanvas.FillPath();},StrokePath:function i(){this.mCanvas.StrokePath();},SetLineDash:function AM(CT,CU){this.mCanvas.SetLineDash(CT,CU);},SetLineWidth:function B3(CT){this.mCanvas.SetLineWidth(CT);},SetFormatManager:function f(CU){var CT;this.mFormatManager=CU;CT=this.mFormatManager.GetFormat(Bg.DssGraphType);this.mGraphType=CT+1;this.mFormatManager.SetGraphType(this.mGraphType);this.mIsFontAntiAlias=true;},SetFontSize:function B1(CT){this.mCanvas.SetFontSize(CT);},PtSizeToPixelSize:function p(CT){return Math.floor(CT*BO/T+0.5);},IsReverseSeriesOrder:function A0(CW,CU,CT){var CV;if(CW===null){return false;}CV=CW.IsReverseOrder();if((CU&&CT>=180&&CT<360)||(!CU&&CT>=90&&CT<270)){CV=!CV;}return CV;},IsReverseGroupOrder:function BC(CU,CT){return((CU&&CT>=90&&CT<270)||(!CU&&CT>=0&&CT<180));},GetPointByAngleRadiusCenter:function Bf(CT,CV,CU){return new CE.Point2D({x:Math.floor(CU.x+CV*Math.cos(CT)+0.5),y:Math.floor(CU.y-CV*Math.sin(CT)+0.5)});},RectangleIntersection:function E(CZ,CY,CX){var CW,CU,CT,CV;if((CZ.x>(CY.x+CY.width))||(CY.x>(CZ.x+CZ.width))||(CZ.y>(CY.y+CY.height))||(CY.y>(CZ.y+CZ.height))){return false;}CW=Math.max(CZ.x,CY.x);CU=Math.max(CZ.y,CY.y);CT=Math.min(CZ.x+CZ.width,CY.x+CY.width)-CW;CV=Math.min(CZ.y+CZ.height,CY.y+CY.height)-CU;CX.Reset(CW,CU,CT,CV);return true;},RectangleUnion:function An(CZ,CY,CX){var CW,CU,CT,CV;CW=Math.min(CZ.x,CY.x);CU=Math.min(CZ.y,CY.y);CT=Math.max(CZ.x+CZ.width,CY.x+CY.width)-CW;CV=Math.max(CZ.y+CZ.height,CY.y+CY.height)-CU;CX.Reset(CW,CU,CT,CV);},getUniformAxisLabelRotateMode:function(CV){var CU=CV,CT=this.getUniformAxisContext();switch(CV){case"x":case"X":CU="X1";break;case"y":case"Y":CU="Y1";break;default:break;}return CT.mLabelRotation[CU];},getUniformAxisContext:function n(){if(this.mUniformAxisContext===null){this.mUniformAxisContext={mDataAreaLeftMargin:0,mDataAreaRightMargin:0,mDataAreaTopMargin:0,mDataAreaBottomMargin:0,mGraphHeight:400,mIsAxisTitleAndLabelRequired:true,mLabelRotation:{X1:-1,Y1:-1,X2:-1,Y2:-1},xDataLabelPadding:0,yDataLabelPadding:0,ValueAxis:{X1:{Valid:true,Min:0,Max:0,Metrics:[],Trims:[0,0],PerCell:false,CustomScale:false,AutoMin:false,AutoMax:false},X2:{Valid:true,Min:0,Max:0,Metrics:[],Trims:[0,0],PerCell:false,CustomScale:false,AutoMin:false,AutoMax:false},Y1:{Valid:true,Min:0,Max:0,Metrics:[],Trims:[0,0],PerCell:false,CustomScale:false,AutoMin:false,AutoMax:false},Y2:{Valid:true,Min:0,Max:0,Metrics:[],Trims:[0,0],PerCell:false,CustomScale:false,AutoMin:false,AutoMax:false},Z:{Valid:true,Min:0,Max:0,Metrics:[],Trims:[0,0],PerCell:false,CustomScale:false,AutoMin:false,AutoMax:false}},CategoryAxis:{X:{EnforceFringe:false,EnforceCluster:false,Trims:[0,0]},Y:{EnforceFringe:false,EnforceCluster:false,Trims:[0,0]}}};}return this.mUniformAxisContext;},isUADataAreaOutput:function Br(){if(this.mIsUniformAxisMode){var CT=this.getUniformAxisContext();if(!CT.mIsAxisTitleAndLabelRequired){return true;}}return false;},IsBackgroundBright:function AI(){var Cg,Cd,Ch,Ce,CU,CY,Cb,CT,CW,Cf,CV,CZ,CX,Cc,Ca;CX=new CE.TripleId({ObjectId:Bg.DssGraphFrame,SeriesId:AX,GroupId:M});Cc=this.hGetColorById(CX);Cg=Cc.Alpha;Ce=Cc.R;CU=Cc.G;CY=Cc.B;CX.reset(Bg.DssGraphBackground,AX,M);Cc=this.hGetColorById(CX);Cd=Cc.Alpha;Cb=Cc.R;CT=Cc.G;CW=Cc.B;Ch=1-(1-Cg)*(1-Cd);if(Ch>0.5){Cf=Cb*Cd*(1-Cg)+Ce*Cg;CV=CT*Cd*(1-Cg)+CU*Cg;CZ=CW*Cd*(1-Cg)+CY*Cg;}Ca=(Cf*299+CV*587+CZ*114)/1000;return Ca>150;},hGetColorById:function CJ(CX){var Cb,Ca,CU=1,CT=255,CV=255,CY=255,CZ;CZ=this.GetProperty(Bg.DssGraphAreaAlpha,CX);if(CZ){CU=CZ/255;}CZ=this.GetProperty(Bg.DssGraphFillEffect,CX);if(CZ){switch(CZ){case Bz.DssGraphFillSimple:CZ=this.GetProperty(Bg.DssGraphAreaColor,CX);if(CZ){var CW=j.GetColorParser();CW.ResetFromColorValue(CZ,true);CT=CW.mR;CV=CW.mG;CY=CW.mB;}break;case Bz.DssGraphFillAdvancedWash:CZ=this.GetProperty(Bg.DssGraphGradient,CX);if(CZ){Cb=CZ.StartColor;Ca=CZ.EndColor;CT=(Cb.mR+Ca.mR)/2;CV=(Cb.mG+Ca.mG)/2;CY=(Cb.mB+Ca.mB)/2;}break;default:break;}}return{R:CT,G:CV,B:CY,Alpha:CU};},FillSimple:function BG(CV,CW,CU,CT){this.mCanvas.FillSimple(CV,CW,CU,CT);},FillPattern:function o(CT){this.mCanvas.FillPattern(CT);},FillGradient:function Ay(CU,CT,CV){this.mCanvas.FillGradient(CU,CT,CV);},FillEdgeType:function BM(CU,CT){this.mCanvas.FillEdgeType(CU,CT);},FillDonutOrSphere:function AN(CV,CT,CU){this.mCanvas.FillDonutOrSphere(CV,CT,CU);},FillBorderMetallic:function b(CV,CT,CX,CW,CY,CU){this.mCanvas.FillBorderMetallic(CV,CT,CX,CW,CY,CU);},FillRadientGradient:function Al(CU,Ca,CY,CX,Cb,CT,CV,CZ,CW){this.mCanvas.FillRadientGradient(CU,Ca,CY,CX,Cb,CT,CV,CZ,CW);},MakeDarker:function U(CU,CT){this.mCanvas.MakeDarker(CU,CT);},RestoreColor:function AK(CT){this.mCanvas.RestoreColor(CT);},ApplyLineFormat:function Bp(CT){this.mCanvas.ApplyLineFormat(CT);},AddFormatedText:function BZ(CU,CW,CT,CV){this.mCanvas.AddFormatedText(CU,CW,CT,CV);},BeginFirstFrame:function AY(){this.mCanvas.BeginFirstFrame();},BeginLastFrame:function Bt(){this.mCanvas.BeginLastFrame();},EndFrame:function A7(){this.mCanvas.EndFrame();},EndUnit:function c(){this.mCanvas.EndUnit();},SetLineJoin:function AG(CT){this.mLineJoinType=CT;this.mCanvas.SetLineJoin(this.mLineJoinType);},GetLineJoin:function AS(){return this.mLineJoinType;},UpdateFormatLine:function Ai(CX,CV,CU){CU=CU||false;if(this.mIsGraphMatrix){return ;}var CW;Ak.tripleId.reset(AO,CX.mObjectId,CX.mSeriesId,CX.mGroupId);if(this.mIsGraphMatrix&&AO.mObjectId===Bg.DssGraphX1Major){AO.mObjectId=Bg.DssGraphY1Major;}if(CV.mLineColor===null||!CU){CW=this.GetProperty(Bg.DssGraphLineColor,AO);if(CW){var CT=j.GetColorParser();CT.ResetFromColorValue(CW,true);CV.mLineColor=CT.ToInteger();}}if(CV.mLineStyle===null||!CU){CW=this.GetProperty(Bg.DssGraphLinePattern,AO);if(CW){CV.mLineStyle=CW;}}if(CV.mAlpha===null||!CU){CW=this.GetProperty(Bg.DssGraphLineAlpha,AO);if(CW){CV.mAlpha=CW;}}if(CV.mLineThicknessPt===null||!CU){CW=this.GetProperty(Bg.DssGraphLineWidth,AO);if(CW){CV.mLineThicknessPt=CW;}}},UpdateFormatFill:function AF(Ca,CV,CY,CX){CX=CX||false;if(this.mIsGraphMatrix){return ;}var CZ;Ak.tripleId.reset(AO,Ca.mObjectId,Ca.mSeriesId,Ca.mGroupId);AO.mObjectId=this.MapObject(Ca.mObjectId);if(CV.mAlpha===null||!CX){CZ=this.GetProperty(Bg.DssGraphAreaAlpha,AO);if(CZ!==null&&CZ!==undefined){CV.mAlpha=CZ;}}var CU;if(CV.mFillType===null||!CX){CZ=this.GetProperty(Bg.DssGraphFillEffect,AO);if(CZ!==null&&CZ!==undefined){CV.mFillType=CZ;}var CW=CV.mFillType;switch(CW){case Bz.DssGraphFillSimple:CZ=this.GetProperty(Bg.DssGraphAreaColor,AO);if(CZ!==null&&CZ!==undefined){if(CV.mSimpleColor===null||!CX){CU=j.GetColorParser();CU.ResetFromColorValue(CZ,true);CV.mSimpleColor=CU.ToInteger();}}break;case Bz.DssGraphFillAdvancedWash:var CT=CV.mFillGradient;CZ=this.GetProperty(Bg.DssGraphGradient,AO);if(CZ!==null&&CZ!==undefined){if(CT===null||!CX){if(CT===null){CV.mFillGradient={};}CT=CV.mFillGradient;Ae.copyProps(["gradientType","angle","horizontalOffset","verticalOffset"],CZ,CT);CU=j.GetColorParser();CU.ResetFromColorValue(CZ.StartColor,true);CT.startGraphColor=CU.ToInteger();CU.ResetFromColorValue(CZ.EndColor,true);CT.endGraphColor=CU.ToInteger();}}CZ=this.GetProperty(Bg.DssGraphGradientEndAlpha,AO);if(CZ!==null&&CZ!==undefined){if(CT.endAlpha===null||!CX){CT.endAlpha=CZ;}}else{CT.endAlpha=CV.mAlpha;}break;case Bz.DssGraphFillPattern:break;default:break;}}},UpdateFormatFont:function K(CW,CU){var CV;if(this.mIsGraphMatrix){return ;}CV=this.GetProperty(Bg.DssGraphFontColor,CW);if(CV){var CT=j.GetColorParser();CT.ResetFromColorValue(CV,true);CU.mFontColor=CT.ToInteger();}CV=this.GetProperty(Bg.DssGraphFontName,CW);if(CV){CU.mFontName=CV;}CV=this.GetProperty(Bg.DssGraphFontSize100,CW);if(CV){CU.mFontSize=Math.floor(CV/100+0.5);}CV=this.GetProperty(Bg.DssGraphFontStyle,CW);if(CV){CU.mFontStyle=CV;}CV=this.GetProperty(Bg.DssGraphFontAlpha,CW);if(CV){CU.mFontAlpha=CV;}CV=this.GetProperty(Bg.DssGraphFontAlign,CW);if(CV){CU.mFontAlignment=CV;}CV=this.GetProperty(Bg.DssGraphFontRotation,CW);if(CV){CU.mFontRotation=CV;}CV=this.GetProperty(Bg.DssGraphFontBox,CW);if(CV){CU.mFontBox=CV;}},ParseValueToFormat:function u(CZ,CV){var CT=[],CW,CY,CU,CX=10;CY=0;for(CW=0;CW<6;++CW){CU=CZ.indexOf(",",CY);CT[CW]=CZ.substring(CY,CU);CY=CU+1;}CT[CW]=CZ.substring(CY);if(CT[0].length){CV.mFormatType=parseInt(CT[0],CX);}if(CT[1].length){CV.mDigits=parseInt(CT[1],CX);}if(CT[2].length){CV.mGrouping=parseInt(CT[2],CX);}if(CT[3].length){CV.mPosCurr=parseInt(CT[3],CX);}if(CT[4].length){CV.mNegFormat=parseInt(CT[4],CX);}if(CT[5].length){CV.mCurrency=CT[5];}if(CT[6].length){CV.mCustomFormat=CT[6];}},DrawSector:function Ac(CT,CW,CU,CV){this.NewPath();this.mCanvas.AddArc(CT.x,CT.y,CW,CU,CV,false);this.LineTo(CT.x,CT.y);this.ClosePath();},DrawRingSector:function Bx(CV,CU,CT,CW,CX){this.NewPath();this.mCanvas.AddArc(CV.x,CV.y,CU,CW,CX,false);this.LineTo(CV.x+CT*Math.cos(CX),CV.y+CT*Math.sin(CX));this.mCanvas.AddArc(CV.x,CV.y,CT,CX,CW,true);this.ClosePath();},DrawCylinder:function AD(CU,CX,CV,CW,CT){console.alert("to be impl");},ApplyBeveledFrameToRectangle:function F(CU,CY,CT,CV,CX,CW,CZ){this.mCanvas.ApplyBeveledFrameToRectangle(CU,CY,CT,CV,CX,CW,CZ);},drawArc:function B(CT,CX,CV,CW,CU){if(CU===undefined){CU=true;}if(CU){this.NewPath();}this.mCanvas.AddArc(CT.x,CT.y,CX,CV,CW,false);},GetGraphMatrixContext:function BW(){if(this.mpGraphMatrixContext===null){this.mpGraphMatrixContext=new CE.GraphMatrixContext({GraphType:this.mGraphType});if(this.mpGraphMatrixContext){this.mpGraphMatrixContext.mEstGraphHeight=this.mGraphHeight;this.mpGraphMatrixContext.mEstGraphWidth=this.mGraphWidth;}this.mpGraphMatrixContext.parentContext=this;}return this.mpGraphMatrixContext;},HideAxisElements:function BN(CT){this.mShouldHideAxisElements=CT;},IsHidingAxisElements:function B6(){return this.mShouldHideAxisElements;},IsPercentChart:function I(){switch(this.mGraphType){case Be.DssGraphTypeVertical_Bar_Percent:case Be.DssGraphTypeHorizontal_Bar_Percent:case Be.DssGraphTypeVertical_Area_Percent:case Be.DssGraphTypeHorizontal_Area_Percent:case Be.DssGraphTypeVertical_Line_Percent:case Be.DssGraphTypeHorizontal_Line_Percent:case Be.DssGraphTypeVertical_Bar_DualAxis_Percent:case Be.DssGraphTypeVertical_Line_DualAxis_Percent:case Be.DssGraphTypeVertical_Area_DualAxis_Percent:case Be.DssGraphTypeHorizontal_Bar_DualAxis_Percent:case Be.DssGraphTypeHorizontal_Line_DualAxis_Percent:case Be.DssGraphTypeHorizontal_Area_DualAxis_Percent:return true;}return false;},IsGridChart:function BT(){return this.mGraphType===Be.DssGraphTypeGridChart;},IsScatterChart:function Q(){switch(this.mGraphType){case Be.DssGraphTypeX_Y_Scatter:case Be.DssGraphTypeDualAxis_X_Y_Scatter:case Be.DssGraphTypeX_Y_Scatter_with_Labels:case Be.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:return true;}return false;},IsBubbleChart:function x(){switch(this.mGraphType){case Be.DssGraphTypeBubble:case Be.DssGraphTypeBubble_DualAxis:case Be.DssGraphTypeBubble_With_Labels:case Be.DssGraphTypeBubble_DualAxis_With_Labels:return true;}return false;},IsBulletChart:function A2(){switch(this.mGraphType){case Be.DssGraphTypeVertical_Bullet:case Be.DssGraphTypeHorizontal_Bullet:return true;}return false;},IsBarChart:function Aq(CT){CT=(CT===undefined)?H._general:CT;CT=(CT>=H._ring)?H._general:CT;switch(this.mGraphType){case Be.DssGraphTypeVertical_Bar_Side_by_Side:case Be.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case Be.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case Be.DssGraphTypeHorizontal_Bar_Side_by_Side:case Be.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case Be.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:return(CT===H._general||CT===H._cluster);case Be.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Be.DssGraphTypeVertical_Bar_Stacked:case Be.DssGraphTypeVertical_Bar_BiPolar_Stacked:case Be.DssGraphTypeHorizontal_Bar_Stacked:case Be.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case Be.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:return(CT===H._general||CT===H._stacked);case Be.DssGraphTypeVertical_Bar_Percent:case Be.DssGraphTypeHorizontal_Bar_Percent:case Be.DssGraphTypeVertical_Bar_DualAxis_Percent:case Be.DssGraphTypeHorizontal_Bar_DualAxis_Percent:return(CT===H._general||CT===H._percent);case Be.DssGraphTypeVertical_Bar_BiPolar_Absolute:case Be.DssGraphTypeVertical_Bar_DualAxis_Absolute:case Be.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:case Be.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:case Be.DssGraphTypeVertical_Bar_Absolute:case Be.DssGraphTypeHorizontal_Bar_Absolute:case Be.DssGraphTypeVertical_Bullet:case Be.DssGraphTypeHorizontal_Bullet:return(CT===H._general||CT===H._absolute);}return false;},IsAdvancedBarChart:function BB(CT){CT=(CT===undefined)?H._general:CT;switch(this.mGraphType){case Be.DssGraphTypeVertical_Bullet:case Be.DssGraphTypeHorizontal_Bullet:return CT===H._general||CT===H._bullet;default:return false;}},IsLineChart:function Bc(CT){CT=(CT===undefined)?H._general:CT;CT=(CT>=H._ring)?H._general:CT;if(CT===H._cluster){return false;}switch(this.mGraphType){case Be.DssGraphTypeVertical_Line_DualAxis_Stacked:case Be.DssGraphTypeVertical_Line_Stacked:case Be.DssGraphTypeVertical_Line_BiPolar_Stacked:case Be.DssGraphTypeHorizontal_Line_Stacked:case Be.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case Be.DssGraphTypeHorizontal_Line_BiPolar_Stacked:return(CT===H._general||CT===H._stacked);case Be.DssGraphTypeVertical_Line_Percent:case Be.DssGraphTypeHorizontal_Line_Percent:case Be.DssGraphTypeVertical_Line_DualAxis_Percent:case Be.DssGraphTypeHorizontal_Line_DualAxis_Percent:return(CT===H._general||CT===H._percent);case Be.DssGraphTypeVertical_Line_BiPolar_Absolute:case Be.DssGraphTypeVertical_Line_DualAxis_Absolute:case Be.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case Be.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case Be.DssGraphTypeVertical_Line_Absolute:case Be.DssGraphTypeHorizontal_Line_Absolute:return(CT===H._general||CT===H._absolute);}return false;},IsAreaChart:function CN(CT){CT=(CT===undefined)?H._general:CT;CT=(CT>=H._ring)?H._general:CT;if(CT===H._cluster){return false;}switch(this.mGraphType){case Be.DssGraphTypeVertical_Area_DualAxis_Stacked:case Be.DssGraphTypeVertical_Area_Stacked:case Be.DssGraphTypeVertical_Area_BiPolar_Stacked:case Be.DssGraphTypeHorizontal_Area_Stacked:case Be.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case Be.DssGraphTypeHorizontal_Area_BiPolar_Stacked:return(CT===H._general||CT===H._stacked);case Be.DssGraphTypeVertical_Area_Percent:case Be.DssGraphTypeHorizontal_Area_Percent:case Be.DssGraphTypeVertical_Area_DualAxis_Percent:case Be.DssGraphTypeHorizontal_Area_DualAxis_Percent:return(CT===H._general||CT===H._percent);case Be.DssGraphTypeVertical_Area_BiPolar_Absolute:case Be.DssGraphTypeVertical_Area_DualAxis_Absolute:case Be.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case Be.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case Be.DssGraphTypeVertical_Area_Absolute:case Be.DssGraphTypeHorizontal_Area_Absolute:return(CT===H._general||CT===H._absolute);}return false;},GetGraphMatrixGraphMajorType:function CQ(){var CT=this.mpGraphMatrixContext.mMarkerShape,CU=201,CW=202;if(CT===CU||CT===CW){return a._PIE;}if(this.IsBarChart()){return a._BAR;}if(this.IsLineChart()){return a._LINE;}if(this.IsAreaChart()){return a._AREA;}var CV=this.GetGraphType();switch(CV){case Be.DssGraphTypeGridChart:return a._GRID;case Be.DssGraphTypeX_Y_Scatter:case Be.DssGraphTypeDualAxis_X_Y_Scatter:case Be.DssGraphTypeX_Y_Scatter_with_Labels:case Be.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:return a._SCATTER;case Be.DssGraphTypeBubble:case Be.DssGraphTypeBubble_DualAxis:case Be.DssGraphTypeBubble_With_Labels:case Be.DssGraphTypeBubble_DualAxis_With_Labels:return a._BUBBLE;case Be.DssGraphTypeVertical_Area_Absolute:case Be.DssGraphTypeVertical_Area_Stacked:case Be.DssGraphTypeVertical_Area_BiPolar_Absolute:case Be.DssGraphTypeVertical_Area_BiPolar_Stacked:case Be.DssGraphTypeVertical_Area_DualAxis_Absolute:case Be.DssGraphTypeVertical_Area_DualAxis_Stacked:case Be.DssGraphTypeVertical_Area_Percent:case Be.DssGraphTypeHorizontal_Area_Absolute:case Be.DssGraphTypeHorizontal_Area_Stacked:case Be.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case Be.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case Be.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case Be.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case Be.DssGraphTypeHorizontal_Area_Percent:return a._AREA;case Be.DssGraphTypeVertical_Line_Absolute:case Be.DssGraphTypeVertical_Line_Stacked:case Be.DssGraphTypeVertical_Line_BiPolar_Absolute:case Be.DssGraphTypeVertical_Line_BiPolar_Stacked:case Be.DssGraphTypeVertical_Line_DualAxis_Absolute:case Be.DssGraphTypeVertical_Line_DualAxis_Stacked:case Be.DssGraphTypeVertical_Line_Percent:case Be.DssGraphTypeHorizontal_Line_Absolute:case Be.DssGraphTypeHorizontal_Line_Stacked:case Be.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case Be.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case Be.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case Be.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case Be.DssGraphTypeHorizontal_Line_Percent:return a._LINE;}return a._UNDEFINED;},GetThresholdFillColor:function h(CV,CW){var CT=true;if(CT){if(CV===this.mThresholdColorCache.mSeriesId&&CW===this.mThresholdColorCache.mGroupId){if(this.mThresholdColorCache.mUseThreshold){return this.mThresholdColorCache.mThresholdColor;}}else{var CU=this.mDatasetPtr.GetThresholdFillColor(CV,CW,0);this.mThresholdColorCache.mSeriesId=CV;this.mThresholdColorCache.mGroupId=CW;this.mThresholdColorCache.mUseThreshold=CU!==null;if(this.mThresholdColorCache.mUseThreshold){this.mThresholdColorCache.mThresholdColor=CU;return CU;}}}return null;},GetColorFromPalette:function B0(CT){var CU,CV;if(this.mIsGraphMatrix){if(this.mThemeType===BA._white){CU=CE.gLightColorPalette;}else{CU=CE.gDarkColorPalette;}}else{CU=CE.gColorPalette;}CT%=CU.length;CV=CU[CT];return CV.ToInteger();},getInt:function By(CT){if(CT>=0){return Math.floor(CT);}return Math.ceil(CT);},transformRectToTicker:function B5(CU,CV){var CT=[],CX,CW;if(CV){CX={x:Math.round(CU.x),y:Math.round(CU.y+0.5*CU.height)};CW={x:Math.round(CU.x+CU.width),y:Math.round(CU.y+0.5*CU.height)};}else{CX={x:Math.round(CU.x+0.5*CU.width),y:Math.round(CU.y)};CW={x:Math.round(CU.x+0.5*CU.width),y:Math.round(CU.y+CU.height)};}CT.push(CX);CT.push(CW);return CT;},transformToRect:function BQ(CT,Cg,CU,CV){var CY=100,Ce=4,Cf=[4,-100,-100,100,-100,100,100,-100,100],CW,Cb,Ca;t=[];if(CU){for(CW=0;CW<Ce;++CW){Cb=Cf[2*CW+1]*Cg/CY+CT.x;Ca=Cf[2*CW+2]*Cg/CY+CT.y;t.push({x:Cb,y:Ca});}}else{for(CW=0;CW<Ce;++CW){Cb=Cf[2*CW+1]*Cg/CY+CT.x;Ca=Cf[2*CW+2]*Cg/CY+CT.y;var Cd={x:Cb,y:Ca};Cd=this.vdPoint(Cd);t.push(Cd);}}var Cc=Math.abs(t[3].x-t[2].x),CX=Math.abs(t[3].y-t[0].y);if(CV){CV.Reset(t[0].x,t[0].y,Cc,CX);return CV;}else{var CZ=new CE.Rect2D();CZ.x=t[0].x;CZ.y=t[0].y;CZ.width=Math.abs(t[3].x-t[2].x);CZ.height=Math.abs(t[3].y-t[0].y);return CZ;}},resetCanvas:function BF(){this.mCanvas.reset();},applyFontFormat:function Af(CT){if(this.mImageFormat===d.SVG){this.mCanvas.ApplyFontFormat(CT);}},setDrawingOrderToCanvas:function Bo(CT){if(this.mImageFormat===d.SVG){this.mCanvas.setDrawOrder(CT);}},getDefaultThemeColor:function CS(){switch(this.mThemeType){case BA._black:return 0;case BA._white:return 16777215;default:return 16777215;}},getDefaultContrastColor:function B7(CT){CT=CT||-1;var CV=0,CU=1;switch(CT){case CV:return(this.mThemeType===BA._black?5855577:10066329);case CU:return(this.mThemeType===BA._black?16777215:3355443);default:return(this.mThemeType===BA._black?16777215:0);}},mapGraphTypeToDualAxis:function As(CU){var CT=mstrmojo.chart.model.enums.EnumDSSGraphType;switch(CU){case CT.DssGraphTypeVertical_Bar_Side_by_Side:return CT.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side;case CT.DssGraphTypeHorizontal_Bar_Side_by_Side:return CT.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side;case CT.DssGraphTypeVertical_Bar_Stacked:return CT.DssGraphTypeVertical_Bar_DualAxis_Stacked;case CT.DssGraphTypeHorizontal_Bar_Stacked:return CT.DssGraphTypeHorizontal_Bar_DualAxis_Stacked;case CT.DssGraphTypeVertical_Bar_Percent:return CT.DssGraphTypeVertical_Bar_DualAxis_Percent;case CT.DssGraphTypeHorizontal_Bar_Percent:return CT.DssGraphTypeHorizontal_Bar_DualAxis_Percent;case CT.DssGraphTypeVertical_Bar_Absolute:return CT.DssGraphTypeVertical_Bar_DualAxis_Absolute;case CT.DssGraphTypeHorizontal_Bar_Absolute:return CT.DssGraphTypeHorizontal_Bar_DualAxis_Absolute;case CT.DssGraphTypeVertical_Line_Stacked:return CT.DssGraphTypeVertical_Line_DualAxis_Stacked;case CT.DssGraphTypeHorizontal_Line_Stacked:return CT.DssGraphTypeHorizontal_Line_DualAxis_Stacked;case CT.DssGraphTypeVertical_Line_Percent:return CT.DssGraphTypeVertical_Line_DualAxis_Percent;case CT.DssGraphTypeHorizontal_Line_Percent:return CT.DssGraphTypeHorizontal_Line_DualAxis_Percent;case CT.DssGraphTypeVertical_Line_Absolute:return CT.DssGraphTypeVertical_Line_DualAxis_Absolute;case CT.DssGraphTypeHorizontal_Line_Absolute:return CT.DssGraphTypeHorizontal_Line_DualAxis_Absolute;case CT.DssGraphTypeVertical_Area_Stacked:return CT.DssGraphTypeVertical_Area_DualAxis_Stacked;case CT.DssGraphTypeHorizontal_Area_Stacked:return CT.DssGraphTypeHorizontal_Area_DualAxis_Stacked;case CT.DssGraphTypeVertical_Area_Percent:return CT.DssGraphTypeVertical_Area_DualAxis_Percent;case CT.DssGraphTypeHorizontal_Area_Percent:return CT.DssGraphTypeHorizontal_Area_DualAxis_Percent;case CT.DssGraphTypeVertical_Area_Absolute:return CT.DssGraphTypeVertical_Area_DualAxis_Absolute;case CT.DssGraphTypeHorizontal_Area_Absolute:return CT.DssGraphTypeHorizontal_Area_DualAxis_Absolute;default:return CU;}},getAxisTripleId:function AL(CT){return CE.gAxisTripleIds[CT];},RenderClusterShapes:function A9(){var CW=this,CU=CW.mUniformAxisContext.CategoryAxis,CV=CU.X,CT=CU.Y;if(CW.isCombinationChart()||CW.IsDualAxis()){return(CV.EnforceCluster&&CV.EnforceFringe)||(CT.EnforceCluster&&CT.EnforceFringe);}return false;},checkColorByAndSizeByValue:function BI(CY,CU,CX,CT){CU=CU||this.mDataset;CX=CX||false;CT=CT||false;if(!this.mIsGraphMatrix){return true;}var CW=CY.angleByIndex!==undefined,CV;if(CX){if(CW===false){CV=CU.GetColorByData(CY.mSeriesId,CY.mGroupId);}else{CV=CU.GetPieSliceColorByData(CY.mSeriesId,CY.mGroupId,CY.angleByIndex,CY.sliceById);}if(Ak.isValidNumber(CV)===false){return false;}}if(CT){CV=CU.GetSizeByData(CY.mSeriesId,CY.mGroupId);if(Ak.isValidNumber(CV)===false){return false;}}return true;},getValueAxisKeyFromLayout:function AB(CT,CU){if(CU){return CT?"X1":"Y1";}else{return CT?"X2":"Y2";}},getAxisKeyFromObjectId:function AE(CT,CW,CU){CU=CU||false;CW=CW||false;var CV;switch(CT){case Bh.DssGraphX1Body:case Bh.DssGraphX1Label:case Bh.DssGraphX1Major:case Bh.DssGraphX1Minor:case Bh.DssGraphXTitle:case Bh.DssGraphUserLabel3:case Bh.DssGraphUserLine3:CV="X1";break;case Bh.DssGraphX2Body:case Bh.DssGraphX2Label:case Bh.DssGraphX2Major:case Bh.DssGraphX2Minor:case Bh.DssGraphX2Title:case Bh.DssGraphUserLabel4:case Bh.DssGraphUserLine4:CV="X2";break;case Bh.DssGraphY1Body:case Bh.DssGraphY1Label:case Bh.DssGraphY1Major:case Bh.DssGraphY1Minor:case Bh.DssGraphY1Title:case Bh.DssGraphUserLabel1:case Bh.DssGraphUserLine1:CV="Y1";break;case Bh.DssGraphY2Body:case Bh.DssGraphY2Label:case Bh.DssGraphY2Major:case Bh.DssGraphY2Minor:case Bh.DssGraphY2Title:case Bh.DssGraphUserLabel2:case Bh.DssGraphUserLine2:CV="Y2";break;case Bh.DssGraphZBody:CV="Z";break;case Bh.DssGraphO1Body:case Bh.DssGraph2DO1Label:case Bh.DssGraphO1Major:case Bh.DssGraphO1Minor:case Bh.DssGraphO1Title:if(CW){CV=this.caKeyMap.c1||this.IsVertical()?"X1":"Y1";}else{CV="O1";}break;case Bh.DssGraphO2Body:case Bh.DssGraph2DO2Label:case Bh.DssGraphO2Major:case Bh.DssGraphO2Minor:case Bh.DssGraphO2Title:if(CW){CV=this.caKeyMap.c1||this.IsVertical()?"X2":"Y2";}else{CV="O2";}break;default:CV="";break;}if(CU){CV=CV.toLowerCase();}return CV;},getUniformAxisInformationFromKey:function CO(CW,CV){CV=CV||false;var CU=this.getUniformAxisContext(),CT=CU.ValueAxis;switch(CW){case"X1":case"X2":case"Y1":case"Y2":case"Z":return CT[CW];case"O1":case"O2":CT=CU.CategoryAxis;return CV?CT.Y:CT.X;default:return CT.Y1;}},getUniformAxisInformation:function R(CW,CV){var CU=this.getUniformAxisContext(),CY=CU.ValueAxis,CT=CU.CategoryAxis,CX;switch(CW){case Bh.DssGraphO1Body:case Bh.DssGraphO2Body:CV=CV||false;return CV?CT.Y:CT.X;case Bh.DssGraphX1Body:CX=CY.X1;break;case Bh.DssGraphY1Body:CX=CY.Y1;break;case Bh.DssGraphX2Body:CX=CY.X2;break;case Bh.DssGraphY2Body:CX=CY.Y2;break;case Bh.DssGraphZBody:CX=CY.Z;break;}return CX;},mirrorPrimaryInBubbleScatter:function A(CZ){var Ca=this,CV=Ca.GetGraphMatrixContext(),CT=CV.AxisLayout;if(Ca.mIsGraphMatrix===false){return false;}if(CT===null||CT===undefined){return false;}var CW=1,CY=2,CX=4,CU=8;if(CZ){return !!(CT&CU);}return !!(CT&CX);},isCompactMode:function Ag(){return this.mDataset.dataProvider.isCompactMode();}});BV.sDefaultMargin=10;BV.sDefaultMarginForTimeSeries=3;BV.sDefaultUniformAxisMargin=0;}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","TripleId","ChartContext","ImageMap");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumObjectShape","EnumCollectionType");var W=mstrmojo.chart,O=mstrmojo.chart.model,U=W.enums,d=O.enums,b=U.EnumCollectionType,Q=U.EnumObjectShape,F=Q.OS_RECTANGLE,f=d.EnumDSSGraphObject,S=W.gNullTripleId,c=W.gNullObjectId,M=2147483647;mstrmojo.chart.GraphObject=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GraphObject",mpParentObject:null,mFormatLinePtr:null,mTripleId:S,mChartContextPtr:null,mpManager:null,mIsDetectable:true,mIsAnimationEnabled:false,mIsVirtual:false,mShapeType:0,init:function V(h){this._super(h);this.mpParentObject=h.GraphCollectionObject||null;this.mTripleId=h.TripleId||S;this.mpManager=h.GraphObjectManager||null;this.mChartContextPtr=this.mpManager?this.mpManager.mChartContextPtr:null;this.mIsDetectable=true;if(h.Shape){this.mShapeType=h.Shape;}if(h.hasLine&&this.mTripleId.mObjectId!==c){this.mFormatLinePtr=(this.mpParentObject===null||this.mpParentObject===undefined)?this.mChartContextPtr.GetFormatLine(this.mTripleId,b.CT_NO_COLLECTION,this.mShapeType):this.mpParentObject.mFormatLinePtr;}this.mIsAnimationEnabled=false;},SetAnimationEnable:function H(h){this.mIsAnimationEnabled=h;this.SetProgress(0.1);},IsLayerObject:function J(){return false;},SetFormatLine:function X(h){this.mFormatLinePtr=h;},SetLineWidth:function e(){var h;h=this.mFormatLinePtr.mLineThickness;h=(h<1)?1:h;this.hSetLineWidth(h);},ApplyLineFormat:function E(){this.mFormatLinePtr.ApplyLineFormat(this.mChartContextPtr);},SetOutlineWidth:function R(){this.hSetLineWidth(W.gOutlineWhite.mLineThickness);},SetOutlineWidthEx:function P(h){if(h>0){this.hSetLineWidth(h);}},ApplyOutlineFormat:function g(){var h=this.mChartContextPtr;if(h.IsBackgroundBright()){W.gStrokeForLightBackground.ApplyLineFormat(h);}else{W.gStrokeForDarkBackground.ApplyLineFormat(h);}},MakePolygonClockwise:function I(n){var k=n.length,p=0,m,j,o,l,h;if(k<3){return ;}for(m=1;m<k;++m){if(n[m].x<n[p].x||(n[m].x<=n[p].x&&n[m].y<n[p].y)){p=m;}}j=(p+k-1)%k;o=new W.Vector2D({x:n[j].x-n[p].x,y:n[j].y-n[p].y});j=(p+1)%k;l=new W.Vector2D({x:n[j].x-n[p].x,y:n[j].y-n[p].y});if(l.CrossProduct(o)<-W.gModuleMain.mTolerance){for(m=0;m<Math.floor(k/2);++m){h=n[m];n[m]=n[k-m-1];n[k-m-1]=h;}}},DrawOutLine:function T(){this.SetOutlineWidth();this.mChartContextPtr.DrawPolygon(this.GetClockwisePolygon());this.ApplyOutlineFormat();},PointInObject:function A(h){if(!this.mIsDetectable){return false;}return h.IsInPolygon(this.GetClockwisePolygon());},hSetLineWidth:function G(h){this.mChartContextPtr.SetLineWidth(h);this.mChartContextPtr.mIsLineWidthOdd=((h&1)===1);},GetChartAreaId:function Y(){var h=this.mpManager.mTripleId;switch(h.mObjectId){case f.DssGraphY1Body:case f.DssGraphY2Body:case f.DssGraphX2Body:case f.DssGraphO1Body:return this.mTripleId.mSeriesId;default:return this.mpManager.GetChartAreaId();}},GetBoundingRect:function L(){var h=new W.Rect2D();return h;},SetProgress:function C(h){},DistanceToPoint:function Z(h){if(!this.mIsDetectable){return M;}var i=this.GetClockwisePolygon();if(i.length<3){return M;}return h.DistanceToPolygon(i);},GetAngularBisectorIntersectionPoint:function D(t,r,q,k,l){var m={x:t.x-r.x,y:t.y-r.y};var j={x:q.x-r.x,y:q.y-r.y};var i=Math.sqrt(m.x*m.x+m.y*m.y);var h=Math.sqrt(j.x*j.x+j.y*j.y);var p={x:m.x/i,y:m.y/i};var o={x:j.x/h,y:j.y/h};var s=0;if(Math.abs(p.x-o.x)<0.01){s=k*(o.x+p.x)/(p.y-o.y);}else{s=k*(o.y+p.y)/(o.x-p.x);}var n={x:0,y:0};n.x=r.x+s*o.x;n.y=r.y+s*o.y;l.x=n.x+k*(-o.y);l.y=n.y+k*o.x;},getFormatFromParent:function a(){this.mFormatLinePtr=this.mpParentObject.mFormatLinePtr;},getBoundingPoints:function K(){var h=this.GetBoundingRect(),i=h.ToPoints(false);return{Shape:0,Points:[i.TopLeft,i.TopRight,i.BottomRight,i.BottomLeft]};},getShapeSize:function N(){return 0;},fallOut:function B(o){var j=0,n=this.mChartContextPtr,m=this.getBoundingPoints(),l=m.Points,k,h;for(k=0;k<l.length;++k){h=l[k];if(h.x<0||h.y<0||h.x>n.mGraphWidth||h.y>n.mGraphHeight){j++;}if(j>0&&!o){return true;}}return(j===l.length);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumGraphMajorType","EnumDSSExtraGraphObject","EnumFontAlignment","EnumLineStyle");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSExtraGraphProperty","EnumDSSGraphFontRotation","EnumDSSGraphGridLineType","EnumDSSGraphFillEffect","EnumDSSGraphMarkerShape","EnumVariantBool","EnumShapeType");mstrmojo.requiresClsP("mstrmojo.chart","ChartConstants","ChartContext","FormatFont","Rect2D","FormatLine","FormatFill");var Y=mstrmojo.chart,X=mstrmojo.VisUtility,O=mstrmojo.hash,U=Y.ChartConstants,J=Y.enums,D=J.EnumCollectionType,r=D.CT_LINE,Z=J.EnumGraphMajorType,f=J.EnumDSSExtraGraphObject,N=J.EnumFontAlignment,I=J.EnumLineStyle,E=J.EnumFillType,p=Y.gNullTripleId,a=J.EnumGraphMatrixMajorGraphType,T=Y.model,M=T.enums,j=M.EnumDSSGraphMarkerShape,e=M.EnumDSSGraphType,h=M.EnumDSSGraphProperty,i=M.EnumDSSGraphObject,d=M.EnumDSSExtraGraphProperty,F=M.EnumDSSGraphFontRotation,m=M.EnumDSSGraphGridLineType,L=M.EnumDSSGraphFillEffect,C=M.EnumVariantBool,k=M.EnumShapeType,S=0,B=1,o=7;var g=0,q=1,W=2;function Q(x,AG,w){var AL,AC=this.mDataset,AI,AJ=false,AD={valid:false,object:x},v=AG.mObjectId;if(v===i.DssGraphTrendLine||v===i.DssGraphReferenceLine){var AH=v===i.DssGraphTrendLine,AO,AM;if(AH){AO=AC.GetTrendLineOfSeries(AG.mSeriesId);AM=AO;}else{AO=AC.GetReferenceLinesOfSeries(AG.mSeriesId);if(AG.mGroupId>=0){AM=AO[AG.mGroupId];}}if(AM){x.mLineThickness=AM.getLineThickness();x.mLineThicknessPt=75*x.mLineThickness;x.mAlpha=255;x.mLineStyle=AM.getLineRenderType();x.mLineColor=AM.getLineColor();AD.valid=true;}}if(AD.valid){return AD;}AD.valid=true;var AB;switch(AG.mObjectId){case i.DssGraphUserLine1:AB="y1";break;case i.DssGraphUserLine2:AB="x1";break;case i.DssGraphUserLine3:AB="y2";break;case i.DssGraphUserLine4:AB="x2";break;default:AD.valid=false;break;}if(AD.valid){var AK=AC.getAxisOriginFormat(AB);delete AK.show;O.copy(AK,x);return AD;}var AA="all",y=0,AN=0,z=AG.mGroupId;AD.valid=true;if(v===i.DssGraphRiser){if(w===k._PIE||w===k._PIESLICE){v=i.DssGraphPieSlice;}}switch(v){case i.DssGraphDataMarker:AA="lineMarker";break;case i.DssGraphRiser:if(w===k._TICKER){AA="lineShape";}else{AA="shapeBorder";}break;case i.DssGraphDataLine:AA="lineShape";z=0;break;case i.DssGraphTargetLine:break;case i.DssGraphPieSlice:y=AG.angleByIndex||0;AN=AG.sliceById||0;AA="pieSliceBorder";break;default:AD.valid=false;break;}if(AD.valid){AI=AC.getGenericLineFormat(AG.mSeriesId,z,y,AN,AA);x=O.copy(AI,x);AD.object=x;return AD;}var AE,u=this.IsVertical();switch(v){case i.DssGraphY1Major:AL="majorTick";AE="y1";break;case i.DssGraphY1Minor:AL="minorTick";AE="y1";break;case i.DssGraphY2Major:AL="majorTick";AE=u?"y2":"x2";break;case i.DssGraphY2Minor:AL="minorTick";AE=u?"y2":"x2";break;case i.DssGraphX1Major:AL="majorTick";AE="x1";break;case i.DssGraphX1Minor:AL="minorTick";AE="x1";break;case i.DssGraphX2Major:AL="majorTick";AE="x2";break;case i.DssGraphX2Minor:AL="minorTick";AE="x2";break;case i.DssGraphO1Major:AL="majorTick";AE=this.caKeyMap.c1||"x1";break;case i.DssGraphO1Minor:AL="minorTick";AE=this.caKeyMap.c1||"x1";break;case i.DssGraphO2Major:AL="majorTick";AE=this.caKeyMap.c2||"x2";break;case i.DssGraphO2Minor:AL="minorTick";AE=this.caKeyMap.c2||"x2";break;case i.DssGraphY1Body:AL="axisBody";AE="y1";break;case i.DssGraphX2Body:AL="axisBody";AE="x2";break;case i.DssGraphY2Body:AL="axisBody";AE=u?"y2":"x2";break;case i.DssGraphX1Body:AL="axisBody";AE="x1";break;case i.DssGraphO1Body:AL="axisBody";AE=this.caKeyMap.c1||"x1";break;case i.DssGraphO2Body:AL="axisBody";AE=this.caKeyMap.c2||"x2";break;}var AF;if(AJ){switch(AL){case"axisBody":AF=this.globalFormats.AxisBodies;break;case"majorTick":AF=this.globalFormats.AxisMajorTicks;break;case"minorTick":AF=this.globalFormats.AxisMinorTicks;break;default:AD.valid=false;break;}AD.valid=!!AF;if(AD.valid&&AF[AE]){AD.object=AF[AE];return AD;}}AD.valid=true;switch(AL){case"axisBody":AI=AC.getAxisLineFormat(AE);break;case"majorTick":case"minorTick":AI=AC.getAxisTickFormat(AE,AL);break;default:AD.valid=false;X.visPrint("failed to get a match for this line format");break;}if(AJ){switch(AL){case"axisBody":this.globalFormats.AxisBodies=this.globalFormats.AxisBodies||{};AF=this.globalFormats.AxisBodies;break;case"majorTick":this.globalFormats.AxisMajorTicks=this.globalFormats.AxisMajorTicks||{};AF=this.globalFormats.AxisMajorTicks;break;case"minorTick":this.globalFormats.AxisMinorTicks=this.globalFormats.AxisMinorTicks||{};AF=this.globalFormats.AxisMinorTicks;break;default:AD.valid=false;break;}if(AD.valid){if(AF[AE]===undefined){AF[AE]=O.copy(AI,AF[AE]);x=AF[AE];if(AL==="minorTick"&&x.mAlpha!==undefined&&x.mAlpha!==null){x.mAlpha*=0.6;}}AD.object=AF[AE];return AD;}}else{if(AD.valid){O.copy(AI,x);if(AL==="minorTick"&&x.mAlpha!==undefined&&x.mAlpha!==null){x.mAlpha*=0.6;}AD.object=x;}}return AD;}function t(u,y,z){var AC,x=this.mDataset,AB=0,v=0,w,AD={valid:false,object:u},AA=y.mObjectId;if(AA===i.DssGraphRiser){if(z===k._PIE||z===k._PIESLICE){AA=i.DssGraphPieSlice;}}AD.valid=true;switch(AA){case i.DssGraphRiser:w="shape";break;case i.DssGraphDataMarker:w="lineMarker";break;case i.DssGraphPieSlice:w="pieSlice";AB=y.angleByIndex!==undefined?y.angleByIndex:0;v=y.sliceById!==undefined?y.sliceById:0;break;default:X.visPrint("fail to find a match for this fill format");AD.valid=false;break;}if(AD.valid){if(y.mSeriesId>=0&&y.mGroupId>=0){AC=x.getGenericFillFormat(y.mSeriesId,y.mGroupId,AB,v,w);AD.object=O.copy(AC,u);}}return AD;}function P(u){switch(u.mObjectId){case i.DssGraphUserLabel1:return i.DssGraphY1Label;case i.DssGraphUserLabel2:return i.DssGraphY2Label;case i.DssGraphUserLabel3:return i.DssGraphX1Label;case i.DssGraphUserLabel4:return i.DssGraphX2Label;default:return u.mObjectId;}}function H(v,z,AC){var AH,AK=false,y=this.mDataset,AE=P.call(this,z);if(AE===i.DssGraphDataText||AE===i.DssGraphRefLineText||AE===i.DssGraphTrendLineText){var x=0,AB=1,AI=2;AK=true;if(AC<0){switch(AE){case i.DssGraphRefLineText:AC=AB;break;case i.DssGraphTrendLineText:AC=AI;break;default:AC=x;break;}}switch(AC){case x:if(AK){var AA=this.globalFormats;if(AA.DatatextFormat===null||AA.DatatextFormat===undefined){AA.DatatextFormat=new Y.FormatFont({Bare:true});if(y===null||y===undefined){console.alert("No dataset! Cannot resolve text format.");return{valid:false,object:v};}AH=y.getDataLabelFontFormat();O.copy(AH,AA.DatatextFormat);var u=AA.DatatextFormat;if(u&&u.mFontSize&&typeof u.mFontSize!=="number"){u.mFontSize=parseFloat(u.mFontSize);}}v=AA.DatatextFormat;}else{if(y===null||y===undefined){console.alert("No dataset! Cannot resolve text format.");return{valid:false,object:v};}AH=y.getDataLabelFontFormat();O.copy(AH,v);}return{valid:true,object:v};case AB:var w,AD=y.GetReferenceLinesOfSeries(z.mSeriesId);if(z.mGroupId>=0){w=AD[z.mGroupId];}if(w){var AJ=w.getReferenceLineLabelFont();if(AJ){v.mFontColor=AJ.rfLnFntClr;v.mFontSize=parseInt(AJ.rfLnFntSz,10);v.mFontStyle=AJ.rfLnFntStyle;v.mFontName=AJ.rfLnFntFml;}}break;case AI:break;default:return{valid:false,object:v};}return{valid:false,object:v};}var AG;switch(AE){case i.DssGraphY1Label:AG="y1";break;case i.DssGraphX2Label:AG="x2";break;case i.DssGraphY2Label:AG=this.IsVertical()?"y2":"x2";break;case i.DssGraphX1Label:AG="x1";break;case i.DssGraph2DO1Label:AG=this.caKeyMap.c1||"x1";break;case i.DssGraph2DO2Label:AG=this.caKeyMap.c2||"x2";break;default:return{valid:false,object:v};}AK=false;if(AK){var AF=this.globalFormats.AxisLabelFormats;if(AF===null||AF===undefined){this.globalFormats.AxisLabelFormats={};}AF=this.globalFormats.AxisLabelFormats;if(!!AF[AG]){return AF[AG];}AF[AG]={};O.copy(AH,AF[AG]);return AF[AG];}else{AH=y.getAxisLabelFontFormat(AG);O.copy(AH,v);}return{valid:true,object:v};}function A(x,z,u){z=z||0;u=u||false;var y=this.GetGraphMatrixContext(),AD,w=this.mDataset;u=u&&y.mHasColorBy;if(w&&u){var v;if(x.mObjectId===i.DssGraphPieSlice){var AC=x.angleByIndex||0,AB=x.sliceById||0;v=w.GetPieSliceColorByData(x.mSeriesId,x.mGroupId,AC,AB);}else{v=w.GetColorByData(x.mSeriesId,x.mGroupId,z);}if(v!==null&&v!==undefined){AD=v;}}if(AD===undefined){if(this.mIsGraphMatrix&&!y.mHasColorBy){AD=this.GetColorFromPalette(0);}else{if(x.mSeriesId<0&&x.mGroupId<0){AD=0;}else{var AA=x.mSeriesId;if(AA<0){AA=x.mGroupId;}AA=Math.max(0,AA);AD=this.GetColorFromPalette(AA);}}}return AD;}mstrmojo.chart.GenericContext=mstrmojo.declare(mstrmojo.chart.ChartContext,null,{scriptClass:"mstrmojo.chart.GenericContext",init:function n(u){this._super(u);this.mGraphType=e.DssGraphTypeVertical_Bar_Side_by_Side;this.mFormatManager=this.mFormatManager||u.FormatManager||null;this.mIsFontAntiAlias=true;},GetColorValue:function G(w,u,v){return A.call(this,w,u,v);},GetProperty:function c(w,y){var u,v,x;if(w===h.DssGraphType){return this.mGraphType;}if(!this.mIsTimeSeriesChart){v=this.mFormatManager.GetGraphProperty(w,y.mObjectId,y.mSeriesId,y.mGroupId);if(v!==undefined&&v!==null){return v;}}if(!this.mIsGraphMatrix){v=this._super(w,y);if(!v){v=this._super(w,new Y.TripleId({ObjectId:y.mObjectId}));if(!v){v=this._super(w,new Y.TripleId({SeriesId:y.mSeriesId}));if(!v){v=this._super(w,p);}}}if(v){return v;}}switch(w){case h.DssGraphAxisNumberFormat:case -h.DssGraphFormatDataTextAdv:u="-2,0,0,0,0,$,#";return u;case h.DssGraphTextContent:switch(y.mObjectId){case i.DssGraphY1Title:u="Y1";return u;}return u;case h.DssGraphStyleMajor:if(this.mIsGraphMatrix){switch(y.mObjectId){case i.DssGraphY1Body:case i.DssGraphY2Body:case i.DssGraphX1Body:case i.DssGraphX2Body:u=m.DssGraphGridOuterTicks;break;default:u=m.DssGraphGridNone;break;}}else{u=m.DssGraphGridRegular;}return u;case h.DssGraphShow2DAxisMinor:case h.DssGraphShow2DAxisLine:u=!this.mIsGraphMatrix;return u;case h.DssGraph2DSide:switch(y.mObjectId){case i.DssGraphY1Body:u=m.DssGraphAxisLabelLowSide;return u;case i.DssGraphO1Body:u=m.DssGraphAxisLabelLowSide;return u;}break;case d.DssGraphChartAreaNumber:u=3;return u;case h.DssGraphDepthMode:u=false;return u;case h.DssGraphEnhancedSeriesEffect:u=false;return u;case h.DssGraphCurveColorAsSeries:case h.DssGraphShowLegendText:case h.DssGraphShowTitle:u=true;return u;case d.DssGraphUseChartArea:case h.DssGraphShowDataValue:case h.DssGraphShowTotalValue:case d.DssGraphChartAreaOrientation:case h.DssGraphLockFontSize:u=false;return u;case h.DssGraphSDShowDataText:u=false;return u;case h.DssGraphShow2DAxisMajor:x=this.GetGraphMajorType();if(x===Z.GMT_3D_CATEGORY||x===Z.GMT_3D_SCATTER){if(y.mObjectId===i.DssGraphY1Body){u=true;return u;}}if(this.mIsGraphMatrix){return true;}u=(this.mIsTimeSeriesChart?true:false);return u;case d.DssGraphCumulativePercentLabel:u="Cumulative Percent";return u;case d.DssGraphInfoNestedLabel:case d.DssGraphInfoNestedLabelBracket:u=false;return u;case h.DssGraphShowDataLabel:u=false;return u;case h.DssGraphLineColor:if(this.mIsTimeSeriesChart){if(y.mSeriesId>=0){u=parseInt(this.GetColorFromPalette(y.mSeriesId),10);return u;}switch(y.mObjectId){case i.DssGraphO1Major:u=5460819;return u;case i.DssGraphY1Major:u=5658198;return u;case i.DssGraphO1Body:case i.DssGraphY1Body:u=13421772;return u;default:return undefined;}}if(this.mIsGraphMatrix){switch(y.mObjectId){case i.DssGraphY1Major:case i.DssGraphX1Major:case i.DssGraphX2Major:case i.DssGraphY2Major:u=this.getDefaultContrastColor(S);break;default:return undefined;}}else{return undefined;}break;case h.DssGraphFillEffect:u=L.DssGraphFillSimple;return u;case h.DssGraphLineAlpha:if(y.mObjectId===i.DssGraphRiser){u=0;return u;}return undefined;case h.DssGraphMarkerSize:u=33;return u;case h.DssGraph2DDepth:u=1000;return u;case h.DssGraphAxisAutoFit:x=this.GetGraphMajorType();u=x===Z.GMT_CATEGORY;return u;case h.DssGraphFontColor:if(this.mIsGraphMatrix){u=this.getDefaultContrastColor();return u;}break;default:return undefined;}return undefined;},PutGraphProperty:function V(u,v,w){this.mFormatManager.PutGraphProperty(u,v.mObjectId,v.mSeriesId,v.mGroupId,w);},GetFormatFont:function s(x){var u,v=this.mDebugUseNewProperties;u=this.GetFormatObject(x,-1,2,v);switch(x.mObjectId){case i.DssGraphPieGroupLabel:case i.DssGraphPieRingLabel:if(u.mFontAlignment===null||!v){u.mFontAlignment=N.FA_CENTER;}if(u.mFontSize===null||!v){u.mFontSize=Math.floor(u.mFontSize*3/4+1);}break;case i.DssGraphOPILBLValue:case i.DssGraphPieFeelerLabel:if(u.mFontAlignment===null||!v){u.mFontAlignment=N.FA_CENTER;}if(u.mFontSize===null||!v){u.mFontSize=o;}break;case i.DssGraphY1Label:case i.DssGraph2DO1Label:case i.DssGraph2DO2Label:case i.DssGraphX1Label:case i.DssGraphX2Label:case i.DssGraphY2Label:if(this.mIsTimeSeriesChart){u.mFontSize=14;u.mFontColor=13158600;}else{if(u.mFontColor===null||!v){u.mFontColor=this.getDefaultContrastColor();}if(u.mFontSize===null||!v){u.mFontSize=8;}}break;case i.DssGraphDataText:if(u.mFontSize===null||!v){u.mFontSize=Math.floor(U.kVirtualCoordinateHeight/45);}if(this.isVerticalBar()&&!this.IsBulletChart()){if(u.mFontRotation===null||!v){u.mFontRotation=F.Rotate90;}}break;case f.DssGraphWarningMessage:u.mFontColor=255;break;case f.DssGraphBanner:var w=this.getDefaultContrastColor(B);u.mFontColor=w;u.mFontSize=11;break;default:break;}this.UpdateFormatFont(x,u);u.mFontSize=this.vdFontSize(u.mFontSize);if(v){u.restoreDefaults(false);}return u;},GetFormatObject:function l(AA,w,v,z){var y,u,x;z=z&&(!!this.mDataset)&&this.mDebugUseNewProperties;if(z){y={Bare:true};}else{y=undefined;}switch(v){case g:u=new Y.FormatLine(y);break;case q:u=new Y.FormatFill(y);break;case W:u=new Y.FormatFont(y);break;default:break;}if(z){x=this.ResolveFormat(u,AA,v,w);return x.object;}return u;},GetFormatLine:function K(w,AC,x){if(x===undefined){x=k._GENERIC;}var AB=w.mGroupId,z=w.mObjectId,v;switch(z){case i.DssGraphTrendLine:case i.DssGraphReferenceLine:case i.DssGraphY1Major:case i.DssGraphY2Major:case i.DssGraphY3Major:case i.DssGraphY4Major:case i.DssGraphX1Major:case i.DssGraphX2Major:case i.DssGraphO1Major:case i.DssGraphY1Minor:case i.DssGraphY2Minor:case i.DssGraphY3Minor:case i.DssGraphY4Minor:case i.DssGraphX1Minor:case i.DssGraphX2Minor:case i.DssGraphO1Minor:case i.DssGraphO1Body:case i.DssGraphX1Body:case i.DssGraphY1Body:case i.DssGraphY2Body:case i.DssGraphX2Body:case i.DssGraphY3Body:case i.DssGraphY4Body:case i.DssGraphUserLine1:case i.DssGraphUserLine2:case i.DssGraphUserLine3:case i.DssGraphUserLine4:case i.DssGraphDataLine:v=true;break;default:if(AB===-3){var u=w.mSeriesId;u=Math.max(u,0);w.mGroupId=this.mDataset.findCell(false,u,0);}v=w.mSeriesId>=0&&w.mGroupId>=0;break;}var AA=true,y;y=this.GetFormatObject(w,x,g,v);switch(z){case i.DssGraphBackground:case i.DssGraphLegendArea:y.mAlpha=0;break;case i.DssGraphRiser:case i.DssGraphDataLine:if(AC===r&&w.mSeriesId>=0){if(y.mLineColor===null||!v){y.mLineColor=A.call(this,w,0);}}if(z===i.DssGraphRiser&&this.mIsGraphMatrix){if(y.mLineColor===null||!v){y.mLineColor=A.call(this,w,0,(w.mGroupId>=0&&w.mSeriesId>=0));}switch(x){case k._TICKER:if(this.IsGridChart()||this.IsBubbleChart()||this.IsScatterChart()){if(y.mLineThickness===null||!v){y.mLineThicknessPt=200;y.mLineThickness=2;}AA=false;}break;case k._CIRCLE:case k._RECTANGLE:case k._SQUARE:if(x===k._CIRCLE||x===k._RECTANGLE||x===k._SQUARE){if(this.IsGridChart()||this.IsBubbleChart()||this.IsScatterChart()||this.IsBarChart()||this.IsLineChart()||this.IsAreaChart()){if(y.mLineThickness===null||!v){y.mLineThicknessPt=200;y.mLineThickness=2;}AA=false;}}break;default:break;}}break;case i.DssGraphY1Major:case i.DssGraphY2Major:case i.DssGraphX1Major:case i.DssGraphX2Major:if(this.mIsTimeSeriesChart){y.mLineStyle=I.LS_DOT;}else{if(this.mIsGraphMatrix){if(y.mLineColor===null||!v){y.mLineColor=this.getDefaultContrastColor(S);}}}break;default:break;}this.UpdateFormatLine(w,y,v);if(AA||!v){y.mLineThickness=y.mLineThicknessPt;if(!this.mAbsoluteFontLineSize){y.mLineThicknessPt=this.vdHeight(y.mLineThicknessPt);}y.mLineThickness=this.vdLineWidth(y.mLineThickness);}if(v){y.restoreDefaults(false);}w.mGroupId=AB;return y;},GetFormatFill:function R(w,AC,y){if(y===undefined){y=k._GENERIC;}var AB=w.mGroupId;if(AB===-3){var u=w.mSeriesId;u=Math.max(u,0);w.mGroupId=this.mDataset.findCell(false,u,0);}var v=(w.mSeriesId>=0&&w.mGroupId>=0)&&this.mDebugUseNewProperties,AA,z=this.mpGraphMatrixContext;AA=this.GetFormatObject(w,y,q,v);switch(w.mObjectId){case i.DssGraphPieSlice:case i.DssGraphRiser:case i.DssGraphDataLine:if(this.mIsGraphMatrix){if(AA.mFillType===null||!v){AA.mFillType=E.FT_SIMPLE;}var x=this.GetGraphMatrixGraphMajorType();switch(x){case a._BAR:case a._SCATTER:case a._BUBBLE:case a._AREA:if(AA.mAlpha===null||!v){AA.mAlpha=178.5;}break;case a._LINE:if(z.mMarkerShape!==j.DssGraphMarkerShapeNone||w.mObjectId===i.DssGraphRiser){if(AA.mAlpha===null||!v){AA.mAlpha=178.5;}}break;default:break;}if(z.mMarkerShape===j.DssGraphMarkerShapeGMTick){if(AA.mAlpha===null||!v){AA.mAlpha=255;}}if(AA.mSimpleColor===null||!v){AA.mSimpleColor=A.call(this,w,0,(w.mSeriesId>=0&&w.mGroupId>=0));}}else{if((w.mSeriesId>=0&&w.mGroupId===-3)){AA.mSimpleColor=Y.gColorPalette[w.mSeriesId];}else{if((w.mGroupId>=0&&w.mSeriesId===-3)){AA.mSimpleColor=Y.gColorPalette[w.mGroupId];}}}break;default:break;}this.UpdateFormatFill(w,AA,AC,v);if(v){AA.restoreDefaults(false);}w.mGroupId=AB;return AA;},ResolveFormat:function b(v,x,u,w){if(v){switch(u){case g:return Q.call(this,v,x,w);case q:return t.call(this,v,x,w);case W:return H.call(this,v,x,w);default:return{valid:false,object:v};}}return{valid:false,object:v};}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumLineJoinType");mstrmojo.requiresClsP("mstrmojo.chart","GraphObject","FormatLine");var E=mstrmojo.chart,J=mstrmojo.chart.enums,I=J.EnumLineJoinType,H=10;function M(Q,P,O){return Q?P.x===O.x:P.y===O.y;}function F(){var S=this.mChartContextPtr,O=this.mFormatLinePtr,Q=O.getGradient(),P=O&&Q&&Q.valid;if(!S.mIsGraphMatrix||!P){this.ApplyLineFormat();}else{if(Q.style===0){this.ApplyLineFormat();}else{var R=Q.angle===1;this.Vibrate(0.01,R);this.ApplyLineFormat();}}}function L(S,R){var Q,O=S.length;for(Q=1;Q<=O*2;Q++){R.push({});}var P=Math.max(this.mFormatLinePtr.mLineThickness/2,E.gOutlineBlack.mLineThickness/1.3);var U={x:2*S[0].x-S[1].x,y:2*S[0].y-S[1].y};var T={x:2*S[O-1].x-S[O-2].x,y:2*S[O-1].y-S[O-2].y};this.GetAngularBisectorIntersectionPoint(S[1],S[0],U,P,R[0]);this.GetAngularBisectorIntersectionPoint(T,S[O-1],S[O-2],P,R[O-1]);this.GetAngularBisectorIntersectionPoint(S[O-2],S[O-1],T,P,R[O]);this.GetAngularBisectorIntersectionPoint(U,S[0],S[1],P,R[2*O-1]);for(Q=1;Q<O-1;++Q){this.GetAngularBisectorIntersectionPoint(S[Q+1],S[Q],S[Q-1],P,R[Q]);this.GetAngularBisectorIntersectionPoint(S[Q-1],S[Q],S[Q+1],P,R[2*O-1-Q]);}}mstrmojo.chart.PolyLineObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.PolyLineObject",mLinePoints:null,isClosePath:false,identity:null,init:function N(Q){Q.hasLine=Q.hasLine||true;Q.isClosePath=Q.isClosePath||false;this._super(Q);var P,S=this.mLinePoints=[],R=Q.PolyLine,O=R.length;for(P=0;P<O;P++){S.push(R[P]);}if(Q.Identity!==undefined&&Q.Identity!==null){this.identity=Q.Identity;}},Draw:function C(){if(this.mLinePoints.length<2){return ;}var P=this.mChartContextPtr,O=P.GetLineJoin();P.SetLineJoin(I.LJT_ROUND);this.SetLineWidth();this.SetPath();F.call(this);P.SetLineJoin(O);P.FinishDrawPolyline(this.mLinePoints,this.mTripleId,!this.mIsDetectable,this.identity,this.startPoint,this.midPoint,this.endPoint);},GetPolygons:function G(T){var R,Q,X=this.mLinePoints,U=X.length;if(U<2){return ;}var P=2/(H*H);var O=[];O.push(0);for(R=1;R+1<U;++R){var Y={x:X[R-1].x-X[R].x,y:X[R-1].y-X[R].y};var V={x:X[R+1].x-X[R].x,y:X[R+1].y-X[R].y};Y.x=Y.x/Math.sqrt(Y.x*Y.x+Y.y*Y.y);Y.y=Y.y/Math.sqrt(Y.x*Y.x+Y.y*Y.y);V.x=V.x/Math.sqrt(V.x*V.x+V.y*V.y);V.y=V.y/Math.sqrt(V.x*V.x+V.y*V.y);if(1-(Y.x*V.x+Y.y*V.y)<P){O.push(R);}}O.push(U-1);U=O.length;for(R=1;R<U;++R){var S=[];for(Q=O[R-1];Q<=O[R];++Q){S.push(X[Q]);}var W=[];L.call(this,S,W);T.push(W);}},SetPath:function D(){var R=this.mChartContextPtr,O=this.mFormatLinePtr,Q=this.mLinePoints,P=[];if(this.isClosePath){P=P.concat(Q);P.pop();R.DrawPolygon(P,true,false,0,O.mLineStyle);}else{R.DrawPolyLine(Q,true,false,0,O.mLineStyle);}},getBoundingPoints:function B(){return{Shape:1,Points:this.mLinePoints};},movePointsAgainstBorder:function A(){var V=this.mChartContextPtr,T=this.mLinePoints,O=T.length,U=V.IsVertical();if(V.mIsGraphMatrix===false){return ;}var S=this.mFormatLinePtr.mLineThickness;if(S>2){return ;}var R,P=U?V.mGraphHeight:0,Q=U?0:V.mGraphWidth;for(R=0;R<O;R++){if(U){if(T[R].y>=P){T[R].y--;}if(T[R].y<=Q){T[R].y++;}}else{if(T[R].x<=P){T[R].x++;}if(T[R].x>=P){T[R].x--;}}}},Vibrate:function K(O,R){var P,Q=this.mLinePoints;for(P=0;P+1<Q.length;P+=2){if(M.call(this,R,Q[P],Q[P+1])){if(R){Q[P+1].x+=O;}else{Q[P+1].y+=O;}}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.chart.enums.EnumLineStyle");mstrmojo.requiresCls("mstrmojo.chart.model.enums.EnumShapeType");mstrmojo.requiresClsP("mstrmojo.chart","GraphObject","FormatLine","Point2D");var F=mstrmojo.chart,H=F.enums,J=H.EnumLineStyle,C=F.model.enums,A=C.EnumShapeType;mstrmojo.chart.StraightLineObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.StraightLineObject",mDeviceStartPoint:null,mDeviceEndPoint:null,midPoint:null,identity:null,init:function I(K){if(K.hasLine===undefined){K.hasLine=true;}this._super(K);this.mDeviceStartPoint=new F.Point2D({Point2D:K.StartPoint});this.mDeviceEndPoint=new F.Point2D({Point2D:K.EndPoint});if(K.MidPoint!==undefined&&K.MidPoint!==null){this.midPoint=K.MidPoint;}if(K.Identity!==undefined&&K.Identity!==null){this.identity=K.Identity;}},Draw:function B(){var O=this.mChartContextPtr,K=this.mFormatLinePtr,M=this.mDeviceStartPoint,L=this.mDeviceEndPoint,N;this.SetLineWidth();if(K.mLineStyle===J.LS_SOLID){O.DrawStraightLine(M,L);}else{O.NewPath();N=K.getLinePattern(K.mLineStyle);O.DrawDashedLine(M,L,N);}this.ApplyLineFormat();if(this.Shape===A._TICKER){O.FinishDrawTickerShape(this.mDeviceStartPoint,this.mDeviceEndPoint,this.mTripleId);}else{O.FinishDrawStraightLine(this.mDeviceStartPoint,this.mDeviceEndPoint,this.mTripleId,this.identity,this.midPoint);}},getShapeSize:function D(){if(this.Shape===A._TICKER){var K=this.mChartContextPtr.GetGraphMatrixContext();return Math.round(0.5*K.mConstants.FixedTickerSize);}return 0;},GetBoundingRect:function E(){if(this.Shape===A._TICKER){this.mBBox=this.mBBox||new F.Rect2D();if(this.mBBox.width!==0){return this.mBBox;}var N=this.mDeviceStartPoint,M=this.mDeviceEndPoint,K=this.mBBox,L=Math.max(1,0.5*this.mFormatLinePtr.mLineThickness);if(N.x===M.x){K.x=Math.max(N.x-L,0);K.y=Math.min(N.y,M.y);K.width=2*L;K.height=Math.abs(N.y-M.y);}else{K.y=Math.max(N.y-L,0);K.x=Math.min(N.x,M.x);K.height=2*L;K.width=Math.abs(N.x-M.x);}return K;}else{return this._super();}},GetClockwisePolygon:function G(){var K=[new F.Point2D(),new F.Point2D(),new F.Point2D(),new F.Point2D()];var P=this.mDeviceStartPoint,M=this.mDeviceEndPoint;if(!P.isEqual(M)){var O=Math.max(this.mFormatLinePtr.mLineThickness/2,F.gOutlineBlack.mLineThickness/2);O=Math.max(O,2);var N=new F.Point2D({x:2*P.x-M.x,y:2*P.y-M.y});var L=new F.Point2D({x:2*M.x-P.x,y:2*M.y-P.y});this.GetAngularBisectorIntersectionPoint(M,P,N,O,K[0]);this.GetAngularBisectorIntersectionPoint(L,M,P,O,K[1]);this.GetAngularBisectorIntersectionPoint(P,M,L,O,K[2]);this.GetAngularBisectorIntersectionPoint(N,P,M,O,K[3]);}else{K[0].Reset(P.x-1,P.y-1);K[1].Reset(P.x+1,P.y-1);K[2].Reset(P.x+1,P.y+1);K[3].Reset(P.x-1,P.y+1);}return K;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","ChartContext","GraphObject","FormatFont");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumBoxStyle");var F=mstrmojo.chart,H=F.enums,K=H.EnumCollectionType,C=H.EnumBoxStyle;mstrmojo.chart.GraphCollectionObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.GraphCollectionObject",mGraphObjectCollection:[],mFormatFillPtr:null,mFormatFontPtr:null,mCollectionType:K.CT_NO_COLLECTION,init:function N(P){P.hasLine=false;this._super(P);var S=this.mChartContextPtr,R=this.mTripleId,Q=this.mCollectionType=P.CollectionType,O=P.Shape;this.mGraphObjectCollection=[];switch(this.mCollectionType){case K.CT_LINE:this.mFormatLinePtr=S.GetFormatLine(R,Q,O);break;case K.CT_GENERAL_SHAPE:case K.CT_VERTICAL_AREA:case K.CT_VERTICAL_BAR:case K.CT_HORIZONTAL_AREA:case K.CT_HORIZONTAL_BAR:case K.CT_DEPTH_LINE_OR_LINE_MARKER:this.mFormatLinePtr=S.GetFormatLine(R,Q,O);this.mFormatFillPtr=S.GetFormatFill(R,Q,O);break;case K.CT_TEXT:this.mFormatFontPtr=S.GetFormatFont(R);if(this.mFormatFontPtr.mFontBox!==C.BS_NOFRAME&&!S.mIsGraphMatrix){this.mFormatFillPtr=S.GetFormatFill(R,Q);this.mFormatLinePtr=S.GetFormatLine(R,Q,O);}break;case K.CT_NO_FORMAT:break;default:break;}},AddGraphObject:function G(P,O){if(O===undefined){O=true;}this.mGraphObjectCollection.push(P);P.mpParentObject=this;if(O){P.getFormatFromParent();}},ClearCollection:function J(){this.mGraphObjectCollection=[];},GetCollectionSize:function M(){return this.mGraphObjectCollection.length;},GetObjectByIndex:function D(O){return this.mGraphObjectCollection[O];},SetFormatFill:function A(O){this.mFormatFillPtr=O;},SetFormatFont:function E(O){this.mFormatFontPtr=O;},GetFormatFill:function L(){return this.mFormatFillPtr;},GetFormatFont:function B(){return this.mFormatFontPtr;},Replace:function I(O,P,Q){if(O>=0&&O<this.mGraphObjectCollection.length){if(Q===undefined){Q=true;}this.mGraphObjectCollection[O]=P;P.mpParentObject=this;if(Q){P.getFormatFromParent();}}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject","EnumDSSGraphFillBevelEffect","EnumDSSGraphFillEffect");mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","Point2D","GraphObject","FormatFill","ChartContext");var L=mstrmojo.chart,I=L.enums,P=I.EnumCollectionType,H=mstrmojo.chart.model,Q=H.enums,F=Q.EnumDSSGraphObject,N=Q.EnumDSSGraphFillBevelEffect,D=Q.EnumDSSGraphFillEffect;mstrmojo.chart.ShapeObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.ShapeObject",init:function J(S){if(S.hasFill===undefined){S.hasFill=true;}if(S.hasLine===undefined){S.hasLine=true;}this._super(S);if(S.hasFill&&this.mTripleId.mObjectId!==F.DssGraphErrorBar){this.mFormatFillPtr=(this.mpParentObject===null)?this.mChartContextPtr.GetFormatFill(this.mTripleId,P.CT_NO_COLLECTION):this.mpParentObject.GetFormatFill();}},getRadialInfo:function K(){return null;},ApplyFillFormat:function E(Z){var Y,T=false,V,S=this.mFormatFillPtr;if(S===null){return ;}if(Z===undefined){Z=false;}if(S.mAlpha===0){if(S.supportAdvancedFill((0))){var X=S.mFillBevel.type;if(X===N.DssGraphFillBevelSmoothEdge||X===N.DssGraphFillBevelChiselEdge){if(!Z){this.FillBevel();}}}}Y=S.mSimpleColor;if(T){V=new L.FormatFill();V.mSimpleColor=Y;V.mFillType=D.DssGraphFillSimple;V.mAlpha=S.mAlpha;V.mDarkerFactor=S.mDarkerFactor;V.mFillBevel=S.mFillBevel;V.mFillGradient=S.getGradient();V.mFillPattern=S.mFillPattern;S=this.mFormatFillPtr=V;}switch(S.mFillType){case D.DssGraphFillSimple:S.FillSimple(this.mChartContextPtr);break;case D.DssGraphFillAdvancedWash:case D.DssGraphFillGenericGradient:if(S.mFillGradient.gradientType===9){var W=this.getRadialInfo();if(W){S.FillGradient(this.mChartContextPtr,W);return ;}}var U=this.GetBoundingRect();S.FillGradient(this.mChartContextPtr,U);break;case D.DssGraphFillPattern:break;case D.DssGraphFillPicture:case D.DssGraphFillUserPicture:break;default:break;}if(!Z){this.FillBevel();}},FillBevel:function G(){var S,T=this.mFormatFillPtr;if(T.supportAdvancedFill(0)===false){return ;}switch(T.mFillBevel.type){case N.DssGraphFillBevelNone:break;case N.DssGraphFillBevelSmoothEdge:case N.DssGraphFillBevelChiselEdge:if(this.SupportBevelEffect()){T.FillEdgeType(this.mChartContextPtr,this.GetClockwisePolygon());}break;case N.DssGraphFillBevelDonut:case N.DssGraphFillBevelSphere:S=this.GetBoundingRect();T.FillDonutOrSphere(this.mChartContextPtr,S,this.IsCircularShape());break;}},SupportBevelEffect:function M(){return true;},IsCircularShape:function A(){return false;},SetFormatFill:function B(S){this.mFormatFillPtr=S;},GetFormatFill:function R(){return this.mFormatFillPtr;},getFormatFromParent:function O(){var S=this.mpParentObject;this.mFormatLinePtr=S.mFormatLinePtr;this.mFormatFillPtr=S.GetFormatFill();},GetBoundingRectFromPolygon:function C(V){var T=new L.Rect2D(),X,U;T.x=V[0].x;T.y=V[0].y;var S=V[0].x,W=V[0].y;X=V.length;for(U=1;U<X;++U){T.x=Math.min(T.x,Math.floor(V[U].x));T.y=Math.min(T.y,Math.floor(V[U].y));S=Math.max(S,V[U].x);W=Math.max(W,V[U].y);}T.width=S-T.x;T.height=W-T.y;return T;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","GraphObject","GraphObjectManager");mstrmojo.chart.GraphObjectAggregation=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.GraphObjectAggregation",mGraphObjectList:null,mStartFrameGraphObjectList:null,init:function I(J){this._super(J);this.mGraphObjectList=[];this.mStartFrameGraphObjectList=[];},AddGraphObject:function F(K,J){if(J){this.mStartFrameGraphObjectList.push(K);}else{this.mGraphObjectList.push(K);}},Clear:function B(K,J){if(K){this.mStartFrameGraphObjectList=[];}if(J){this.mGraphObjectList=[];}},ObjectInRectangle:function D(J){return false;},GetClockwisePolygon:function G(){return[];},SetProgress:function H(K){var J=this.mGraphObjectList,M=J.length,L;this._super(K);for(L=0;L<M;++L){J[L].SetProgress(this.mProgress);}},OnPointDetectionEx:function C(N,L,O,J,K,M){return mstrmojo.chart.GraphObjectManager.prototype.OnPointDetectionByList.apply(this,[this.mGraphObjectList,N,L,O,J,K,M]);},Draw:function A(){var M=this.mChartContextPtr,J=this.mGraphObjectList,L=J.length,K;if(this.mIsAnimationEnabled){M.BeginFirstFrame();for(K=0;K<L;++K){this.mStartFrameGraphObjectList[K].Draw();}M.EndFrame();M.BeginLastFrame();}for(K=0;K<L;++K){J[K].Draw();}M.EndFrame();},IsLayerObject:function E(){return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","GraphObject","FormatLine","Vector2D","Point2D");var U=mstrmojo.chart,L=1e-14,I=0.1,m=0.001,S=1.732050807568877;function i(t){return(t-this.mP0.x)/(this.mP3.x-this.mP0.x);}function j(){return(this.mP0.y===this.mP1.y)&&(this.mP1.y===this.mP2.y)&&(this.mP2.y===this.mP3.y);}function Q(v){var u=1/(v+1);return(((this.mP0.y*v+3*this.mP1.y)*v+3*this.mP2.y)*v+this.mP3.y)*u*u*u;}function D(v){var u=1/(v+1);return(((this.mP1.y-this.mP0.y)*v+2*(this.mP2.y-this.mP1.y))*v+this.mP3.y-this.mP2.y)*u*u/(this.mP1.x-this.mP0.x);}function p(AA){var z=(1-AA)*this.mP0.y+AA*this.mP1.y,u=(1-AA)*this.mP1.y+AA*this.mP2.y,AB=(1-AA)*this.mP2.y+AA*this.mP3.y,y=(1-AA)*z+AA*u,t=(1-AA)*u+AA*AB,x=(1-AA)*y+AA*t,w=new U.Point2D({x:((1-AA)*this.mP0.x+AA*this.mP3.x),y:x}),v=new U.BezierCurve({P0:w,P1:t,P2:AB,P3:this.mP3,IsVertical:this.mIsVertical,IsXAlwaysIndependent:true});this.mP3=w;this.mP1.Reset((2*this.mP0.x+this.mP3.x)/3,z);this.mP2.Reset((this.mP0.x+2*this.mP3.x)/3,y);return v;}function V(z,x,u,AB){var w;if(-L<z&&z<L){if(-L<x&&x<L){return ;}w=-u/(2*x);if(w<L){return ;}AB.push(w);return ;}var y=x*x-z*u;if(y<-L){return ;}if(-L<y&&y<L){w=-x/z;if(w<L){return ;}AB.push(w);return ;}var t=Math.sqrt(y),AA=(-x+t)/z,v=(-x-t)/z;if(AA>L){AB.push(AA);}if(v>L){AB.push(v);}}function s(u){var t=(u<0)?-1:1;return t*Math.pow(t*u,1/3);}function k(AK,AJ,AG,AF,AH){if(-L<=AK&&AK<=L){V.call(this,3*AJ,3*AG/2,AF,AH);return ;}var u=AJ/AK,AC=AG/AK,AL=AF/AK,AA=AC-u*u,z=(3*u*AC-AL)/2-u*u*u,AI=AA*AA*AA+z*z;if(AI>L){var AE=Math.sqrt(AI),AD=s.call(this,z+AE)+s.call(this,z-AE)-u;AH.push(AD);}else{if(AI>-L){var v=s.call(this,z);AH.push(2*v-u);AH.push((z<0?0.5:-1)*v-u);}else{var y=z*z-AI,w=Math.acos(z/Math.sqrt(y))/3,t=Math.pow(y,1/6),AB=t*Math.cos(w);AH.push(2*AB-u);var x=S*t*Math.sin(w);AH.push(-AB-u+x);AH.push(-AB-u-x);}}AH.sort();AH.reverse();while(AH.length!==0&&AH[AH.length-1]<=L){AH.pop();}}function d(t,u){var y=this.mP1.y-this.mP0.y,x=this.mP2.y-this.mP1.y,w=this.mP3.y-this.mP2.y,v=t*(this.mP3.x-this.mP0.x)/3;V.call(this,y-v,x-v,w-v,u);}function J(u,v){u.sort();u.reverse();var y=1;while(u.length!==0){var w=1/(u[u.length-1]+1);w*=y;u.pop();var t=this.mP0.x+(this.mP3.x-this.mP0.x)*w;if(Math.abs(t-this.mP0.x)>m&&Math.abs(this.mP3.x-t)>m){y=w;v.push(p.call(this,w));}}v.reverse();}function b(){if(this.mP0.x<this.mP3.x){return ;}this.mP0.swapPoints(this.mP3);var t=this.mP1;this.mP1=this.mP2;this.mP2=t;}function e(w,t){var v=this.Clone();b.call(v);if(w-v.mP0.x<L){return t?v:null;}if(v.mP3.x-w<L){return t?null:v;}var u=p.call(v,i.call(v,w));return t?u:v;}function R(t){this.mP0.y-=t.mP0.y;this.mP1.y-=t.mP1.y;this.mP2.y-=t.mP2.y;this.mP3.y-=t.mP3.y;}function Y(x){var t=[],v;k.call(this,this.mP0.y,this.mP1.y,this.mP2.y,this.mP3.y,t);if(t.length===0){return ;}var u=t.length;for(v=0;v<u;++v){var w=(t[v]*this.mP0.x+this.mP3.x)/(t[v]+1);x.push(w);}}function F(t,w){var AB=this.getMinX(),AA=this.getMaxX(),v=Math.min(t.x,w.x),x=Math.max(t.x,w.x);if(x-AB<I||AA-v<I){return false;}if(x-v<I){var y=this.evaluate(t.x);return(y-t.y)*(w.y-y)>-I;}v=Math.max(AB,v);x=Math.min(AA,x);var AC=(w.y-t.y)/(w.x-t.x),z=t.y+AC*(v-t.x),u=t.y+AC*(x-t.x);return(this.evaluate(v)-z)*(this.evaluate(x)-u)<-I;}function r(u,AA){var z=this.getMinX(),w=this.getMaxX(),t=u.getMinX(),y=u.getMaxX();if(w-I<t||y-I<z){return ;}if(z>t){r.call(u,this,AA);return ;}var v=null,x=null;if(w<y){v=e.call(this,t,true);x=e.call(u,w,false);}else{v=e.call(this,t,true);v=e.call(v,y,false);x=u.Clone();b.call(x);}R.call(v,x);Y.call(v,AA);}mstrmojo.chart.BezierCurve=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.BezierCurve",mP0:null,mP1:null,mP2:null,mP3:null,mIsVertical:false,init:function l(t){if(t.P0!==undefined&&t.P1!==undefined&&t.P2!==undefined&&t.P3!==undefined){this.mP0=new U.Point2D({Point2D:t.P0});this.mP1=new U.Point2D({Point2D:t.P1});this.mP2=new U.Point2D({Point2D:t.P2});this.mP3=new U.Point2D({Point2D:t.P3});this.mIsVertical=true;}if(t.P0!==undefined&&t.F1!==undefined&&t.F2!==undefined&&t.P3!==undefined){t.IsXAlwaysIndependent=t.IsXAlwaysIndependent||false;this.mP0=new U.Point2D({Point2D:t.P0});this.mP3=new U.Point2D({Point2D:t.P3});this.mIsVertical=t.IsVertical;if(!this.mIsVertical&&!t.IsXAlwaysIndependent){this.mP0.swap();this.mP3.swap();}if(this.mP3.x-this.mP0.x<L&&this.mP0.x-this.mP3.x<L){this.mP3.x=this.mP0.x+0.01;}this.mP1=new U.Point2D({x:(2*this.mP0.x+this.mP3.x)/3,y:t.F1});this.mP2=new U.Point2D({x:(this.mP0.x+2*this.mP3.x)/3,y:t.F2});}},getStartPoint:function E(){return this.mIsVertical?this.mP0:new U.Point2D({x:this.mP0.y,y:this.mP0.x});},getEndPoint:function C(){return this.mIsVertical?this.mP3:new U.Point2D({x:this.mP3.y,y:this.mP3.x});},getMinX:function M(){return this.mP0.x<this.mP3.x?this.mP0.x:this.mP3.x;},getMaxX:function o(){return this.mP0.x<this.mP3.x?this.mP3.x:this.mP0.x;},getStartIndependent:function g(){return this.mP0.x;},getEndIndependent:function O(){return this.mP3.x;},GetApproximatePolygon:function n(AA,AE){var AF=[],z;this.GetApproximatePolyline(AF);var AB=[],v=AF.length-1,x=this.mP1.x-this.mP0.x;AB.push((this.mP1.y-this.mP0.y)/x);for(z=1;z<v;++z){var AD=v/z-1;AB.push(D.call(this,AD));}AB.push((this.mP3.y-this.mP2.y)/x);var y=(AA+3)/2,u=AF.length,AG=2*u;if(AE===undefined){AE=[];}for(z=0;z<AG;++z){AE.push(null);}for(z=0;z<u;++z){var t=new U.Vector2D({x:-AB[z],y:1}),AC=y/t.Length(),w=new U.Point2D({x:t.x*AC+0.5,y:(t.y*AC+0.5)});AE[z]=AF[z].Shifted(w);AE[AG-1-z]=AF[z].NegativeShifted(w);}if(!this.mIsVertical){for(z=0;z<AG;++z){AE[z].swap();}}},GetApproximatePolyline:function N(w){var v=10,t=3,x=Math.floor(this.getMaxX()-this.getMinX()+0.5)/v,y;x=Math.max(t,x);w.push(new U.Point2D({x:this.mP0.x+0.5,y:this.mP0.y+0.5}));for(y=1;y<x;++y){var z=y/x;var u=1/z-1;w.push(new U.Point2D({x:((1-z)*this.mP0.x+z*this.mP3.x+0.5),6:(Q.call(this,u)+0.5)}));}w.push(new U.Point2D({x:this.mP3.x+0.5,y:(this.mP3.y+0.5)}));},isBefore:function Z(x,u){if(!this.mIsVertical){x.swap();}if(F.call(u,this.mP0,this.mP0.Shifted(x))||F.call(u,this.mP3,this.mP3.Shifted(x))){return true;}x.Reset(-x.x,-x.y);if(F.call(this,u.mP0,u.mP0.Shifted(x))||F.call(this,u.mP3,u.mP3.Shifted(x))){return true;}var t=Math.max(this.getMinX(),u.getMinX()),w=Math.min(this.getMaxX(),u.getMaxX());if(t-w>-0.1*I){return false;}var y=(t+w)/2,v=new U.Point2D({x:y,y:u.evaluate(y)});return F.call(this,v,v.Shifted(x));},SplitAtTangentPoints:function A(AA,u){if(AA.x===0){return ;}var z=[];d.call(this,AA.y/AA.x,z);var y=z.length,w=[],v;for(v=0;v<y;++v){var t=(z[v]*this.mP0.x+this.mP3.x)/(z[v]+1);if(Math.abs(this.evaluate2ndDerivative(t))>0.01*I){w.push(z[v]);}}J.call(this,w,u);},SplitAtIntersections:function a(t,v){var y=[];r.call(this,t,y);if(y.length===0){return ;}var x=[],w;var z=y.length;for(w=0;w<z;++w){var u=(y[w]-this.mP0.x);if(Math.abs(u)>m){x.push((this.mP3.x-this.mP0.x)/u-1);}}if(x.length===0){return ;}J.call(this,x,v);},GetControlPoints:function K(t){t.push(this.mP0);t.push(this.mP1);t.push(this.mP2);t.push(this.mP3);},Reverse:function c(){this.mP0.swapPoints(this.mP3);this.mP1.swapPoints(this.mP2);},MoveToStart:function X(t,w){var u=w?0.5:0,v=w&&j.call(this)?0.5:0;if(this.mIsVertical){t.MoveTo(this.mP0.x+u,this.mP0.y+v);}else{t.MoveTo(this.mP0.y+v,this.mP0.x+u);}},CurveToEnd:function f(u,x){var v=x?0.5:0,w=x&&j.call(this)?0.5:0,t=(Math.abs(this.mP0.x-this.mP1.x)<0.5)?0.5:0;if(this.mIsVertical){u.BezierCurveTo(this.mP1.x+t,this.mP1.y+w,this.mP2.x+t,this.mP2.y+w,this.mP3.x+v,this.mP3.y+w);}else{u.BezierCurveTo(this.mP1.y+w,this.mP1.x+t,this.mP2.y+w,this.mP2.x+t,this.mP3.y+w,this.mP3.x+v);}},LineToStart:function T(t,w){var u=w?0.5:0,v=w&&j.call(this)?0.5:0;if(this.mIsVertical){t.LineTo(this.mP0.x+u,this.mP0.y+v);}else{t.LineTo(this.mP0.y+v,this.mP0.x+u);}},GetMinMax:function h(){var u={MinY:Math.min(this.mP0.y,this.mP3.y)+0.5,MaxY:Math.max(this.mP0.y,this.mP3.y)+0.5};if((this.mP1.y>=u.MinY&&this.mP2.y>=u.MinY)&&(this.mP1.y<=u.MaxY&&this.mP2.y<=u.MaxY)){return u;}var t=[];d.call(this,0,t);while(t.length!==0){var v=(Q.call(this,t[t.length-1])+0.5);t.pop();u.MinY=Math.min(u.MinY,v);u.MaxY=Math.max(u.MaxY,v);}return u;},Clone:function G(){return new U.BezierCurve({P0:this.mP0,P1:this.mP1.y,P2:this.mP2.y,P3:this.mP3,IsVertical:this.mIsVertical,IsXAlwaysIndependent:true});},evaluate:function W(v){var u=(v-this.mP0.x)/(this.mP3.x-this.mP0.x);return(((this.mP3.y-3*this.mP2.y+3*this.mP1.y-this.mP0.y)*u+(this.mP2.y-2*this.mP1.y+this.mP0.y)*3)*u+(this.mP1.y-this.mP0.y)*3)*u+this.mP0.y;},evaluateDerivative:function B(v){var u=(v-this.mP0.x)/(this.mP3.x-this.mP0.x);return(((this.mP3.y-3*this.mP2.y+3*this.mP1.y-this.mP0.y)*u+(this.mP2.y-2*this.mP1.y+this.mP0.y)*2)*u+(this.mP1.y-this.mP0.y))*3/(this.mP3.x-this.mP0.x);},evaluate2ndDerivative:function P(v){var y=this.mP1.y-this.mP0.y,x=this.mP2.y-this.mP1.y,w=this.mP3.y-this.mP2.y,t=this.mP3.x-this.mP0.x,u=(v-this.mP0.x)/(this.mP3.x-this.mP0.x);return 6*(x-y+(w-2*x+y)*u)/(t*t);},evaluate3rdDerivative:function H(){var t=this.mP3.x-this.mP0.x;return 6*(this.mP3.y-3*this.mP2.y+3*this.mP1.y-this.mP0.y)/(t*t*t);},CloneReverseShift:function q(t){if(!this.mIsVertical){t.swap();}return new U.BezierCurve({P0:this.mP3.Shifted(t),P1:this.mP2.y+t.y,P2:this.mP1.y+t.y,P3:this.mP0.Shifted(t),IsVertical:this.mIsVertical,IsXAlwaysIndependent:true});}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","GraphObject","FormatLine","BezierCurve");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumLineJoinType","EnumLineStyle");var Q=mstrmojo.chart,L=Q.enums,k=L.EnumLineJoinType,F=L.EnumLineStyle,R=103,a=0.087,c=0.01;function U(n){var o=n.x;n.x=n.y;n.y=o;}function C(n,p){var o=this.mBezierCurves,r=new Q.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this.mpManager,GraphCollectionObject:this.mpParentObject,BezierCurvePtr:null}),q;if(n){r.AddBezierCurveLine(n);}var s=o.length;for(q=p;q<s;++q){r.AddBezierCurveLine(o[q]);}o.splice(p,o.length-p);return r;}function f(r,z){var w=this.mBezierCurves,x=(r.y)/r.x,AB=w.length,u,t,s;for(t=0;t<AB;++t){var q=[];w[t].SplitAtTangentPoints(r,q);if(q.length!==0){var o=q.length;for(s=0;(s+1)<o;++s){z.push(new Q.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this.mpManager,GraphCollectionObject:this.mpParentObject,BezierCurvePtr:q[s]}));}u=C.call(this,q[q.length-1],t+1);f.call(u,r,z);z.push(u);return ;}if((t+1)<w.length){var v=w[t].getEndIndependent(),p=w[t].evaluateDerivative(v);if(Math.abs(p-x)<Math.abs(1+p*x)*a){var y=w[t].evaluate2ndDerivative(v),n=w[t].evaluate3rdDerivative(),AA=w[t].evaluate3rdDerivative();if((Math.abs(y)>=0.1*c)||(n*AA<-c)){u=C.call(this,null,t+1);f.call(u,r,z);z.push(u);return ;}}}}}function m(s,v){var t=this.mBezierCurves,x=this.mBezierCurves.length,n=s.mBezierCurves.length,r,q,p;for(r=0;r<x;++r){for(q=0;q<n;++q){var u=[];t[r].SplitAtIntersections(s.mBezierCurves[q],u);if(u.length!==0){var o=u.length;for(p=0;(p+1)<o;++p){v.push(new Q.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this.mpManager,GraphCollectionObject:this.mpParentObject,BezierCurvePtr:u[p]}));}var w=C.call(this,u[u.length-1],r+1);m.call(w,s,v);v.push(w);return ;}}}}function S(u,w){var v=this.mBezierCurves,z=v.length,r=u.mBezierCurves.length,t,s;for(t=1;t<z;++t){var p=v[t].getStartPoint();for(s=1;s<r;++s){var q=u.mBezierCurves[s].getStartPoint();if(Math.abs(p.x-q.x)<c&&Math.abs(p.y-q.y)<c){var x=v[t].evaluateDerivative(v[t].getStartIndependent());var n=u.mBezierCurves[s].evaluateDerivative(u.mBezierCurves[s].getStartIndependent());var o=Math.abs(x-n)<Math.abs(1+x*n)*a;if(!o){var y=C.call(this,null,t);S.call(y,u,w);w.push(y);return ;}}}}}function E(p,t,s,o){var n=t.length,r;for(r=0;r<n;++r){o.push(0);}t[0]/=p[0];s[0]/=p[0];for(r=1;r<n;++r){var q=p[r]-t[r-1];t[r]/=q;s[r]=(s[r]-s[r-1])/q;}o[n-1]=s[n-1];for(r=n-2;r>=0;r--){o[r]=s[r]-t[r]*o[r+1];}}function J(w){var u=this.mBezierCurves,r=[],p=[],o=[],x=w.length,q;for(q=0;q<x;++q){var v,s;if(q===0){v=0;s=1;}else{if(q===w.length-1){v=w.length-2;s=w.length-1;}else{v=q-1;s=q+1;}}var n=this.mIsVertical?w[v].y:w[v].x,t=this.mIsVertical?w[s].y:w[s].x;o.push(t-n);}for(q=0;q<w.length;++q){r.push(4);}r[0]-=2;r[r.length-1]-=2;for(q=0;q<w.length;++q){p.push(1);}var y=[];E.call(this,r,p,o,y);for(q=0;q<x-1;++q){if(this.mIsVertical){u.push(new Q.BezierCurve({P0:w[q],F1:w[q].y+y[q],F2:w[q+1].y-y[q+1],P3:w[q+1],IsVertical:this.mIsVertical}));}else{u.push(new Q.BezierCurve({P0:w[q],F1:w[q].x+y[q],F2:w[q+1].x-y[q+1],P3:w[q+1],IsVertical:this.mIsVertical}));}}}function O(AF){var r=this.mChartContextPtr,AB=this.mFormatLinePtr.mLineStyle,w,v,AG;if(r.mImageFormat===R){return ;}if(this.mFormatLinePtr.mLineStyle===F.LS_SOLID||r.mUseAnimation){return ;}r.NewPath();var s=AF.length;if(s<2){return ;}var o=Q.FormatLine.getLinePattern(AB),u=o.length,AA=0,q=0,p=[],z=[];for(w=0;w<s;++w){z.push(0);p.push(0);}var AE=AF[0].x;var AD=AF[0].y;var AC=0.05;if(AB===F.LS_DOT_DOT_DOT){AC=0.03;o[u-1]*=3;}else{if(AB===F.LS_DOT){AC=0.005;}}for(AG=0;AG<=1;AG+=AC/s){for(w=1;w<s;++w){for(v=0;v<s-w;++v){if(w===1){p[v]=AF[v].x*(1-AG)+AF[v+1].x*AG;z[v]=AF[v].y*(1-AG)+AF[v+1].y*AG;continue;}p[v]=p[v]*(1-AG)+p[v+1]*AG;z[v]=z[v]*(1-AG)+z[v+1]*AG;}}q+=Math.sqrt((AE-p[0])*(AE-p[0])+(AD-z[0])*(AD-z[0]));if(q>=o[AA]){if(AA%2===0){if(this.mIsVertical){r.MoveTo(AE,AD);r.LineTo(p[0],z[0]);}else{r.MoveTo(AD,AE);r.LineTo(z[0],p[0]);}}AA=(AA+1)%u;q=0;AE=p[0];AD=z[0];}}}mstrmojo.chart.CurveLineObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.CurveLineObject",mBezierCurves:[],mIsVertical:false,isClosePath:false,identity:null,startPoint:null,midPoint:null,endPoint:null,init:function h(n){this.mBezierCurves=[];if(n.hasLine===undefined){n.hasLine=true;}if(n.IsVertical===undefined){n.IsVertical=true;}if(n.IsClosePath===undefined){n.IsClosePath=false;}n.GraphCollectionObject=n.GraphCollectionObject||null;this._super(n);this.isClosePath=n.IsClosePath;if(n.BezierCurvePtr){this.mBezierCurves.push(n.BezierCurvePtr);this.mIsVertical=n.BezierCurvePtr.mIsVertical;}else{this.mIsVertical=n.IsVertical;if(n.Points){J.call(this,n.Points);}}if(n.Identity){this.identity=n.Identity;}},Draw:function e(){var s=this.mChartContextPtr,t=this.mBezierCurves,r=s.GetLineJoin(),AE,w,AD=[],z=[],AF,u,AB,AA,AG,v,x,AC,AH;if(t.length===0){return ;}s.SetLineJoin(k.LJT_ROUND);this.SetLineWidth();w=t.length;if(this.mFormatLinePtr.mLineStyle===F.LS_SOLID||s.mUseAnimation){s.NewPath();t[0].MoveToStart(s);for(AE=0;AE<w;++AE){t[AE].CurveToEnd(s);}}else{for(AE=0;AE<w;++AE){t[AE].GetControlPoints(AD);O.call(this,AD);this.ApplyLineFormat();}}if(this.isClosePath){s.ClosePath();}if(this.mFormatLinePtr.mLineStyle===F.LS_SOLID||s.mUseAnimation){this.ApplyLineFormat();}s.SetLineJoin(r);for(AE=0;AE<w;++AE){var y=t[AE],q=new Q.Point2D({Point2D:y.mP0}),p=new Q.Point2D({Point2D:y.mP1}),o=new Q.Point2D({Point2D:y.mP2}),n=new Q.Point2D({Point2D:y.mP3});if(!this.mIsVertical){q.swap();p.swap();o.swap();n.swap();}z.push(q);z.push(p);z.push(o);z.push(n);}if((this.startPoint===undefined||this.startPoint===null)&&(this.endPoint===undefined||this.endPoint===null)&&(this.midPoint===undefined||this.midPoint===null)){AF=z.length;this.startPoint={x:z[0].x,y:z[0].y};this.endPoint={x:z[AF-1].x,y:z[AF-1].y};if(w%2===0){this.midPoint={x:z[AF/2-1].x,y:z[AF/2-1].y};}else{u=(w-1)/2;AB=(t[u].mP0.x+t[u].mP3.x)/2;AA=t[u].evaluate(AB);if(!this.mIsVertical){AG=AB;AB=AA;AA=AG;}this.midPoint={x:AB,y:AA};}}else{if(!this.mIsVertical){U.call(this,this.startPoint);U.call(this,this.midPoint);U.call(this,this.endPoint);}}s.FinishDrawCurves(z,this.mTripleId,this.identity,this.startPoint,this.midPoint,this.endPoint);},DrawOutLine:function j(){var q=this.mChartContextPtr,n=this.mBezierCurves,o;this.SetOutlineWidth();q.NewPath();n[0].MoveToStart(q);var p=n.length;for(o=0;o<p;++o){n[o].CurveToEnd(q);}this.ApplyOutlineFormat();},PointInObject:function K(q){var p=this.mBezierCurves,o=(this.mFormatLinePtr.mLineThickness<4)?4:this.mFormatLinePtr.mLineThickness,n=p.length,s,r;for(s=0;s<n;++s){r=[];p[s].GetApproximatePolygon(o,r);if(q.IsInPolygon(r)){return true;}}return false;},ObjectInRectangle:function i(s){var o=this.mBezierCurves,n=(this.mFormatLinePtr.mLineThickness<1)?1:this.mFormatLinePtr.mLineThickness,t=o.length,r,p,q;for(r=0;r<t;++r){q=[];o[r].GetApproximatePolygon(n,q);for(p=0;p<q.length;++p){if(!s.PointInRectangle(q[p])){return false;}}}return true;},AddBezierCurveLine:function W(n){var o=this.mBezierCurves;if(o.length===0){this.mIsVertical=n.mIsVertical;}o.push(n);},GetClockwisePolygon:function B(){return[];},MoveToStart:function V(n){var o=this.mChartContextPtr;this.mBezierCurves[0].MoveToStart(o,n&&o.NeedAdjustedLinePath());},CurveToEnd:function b(q){var r=this.mChartContextPtr,n=this.mBezierCurves,p=n.length,o;for(o=0;o<p;++o){n[o].CurveToEnd(r,q&&r.NeedAdjustedLinePath());}},DashedCurveToEnd:function N(o,r){var s=this.mChartContextPtr,u=this.mBezierCurves,AD=u.length,AK,AI,AE;for(AK=0;AK<AD;++AK){var AJ=[];u[AK].GetControlPoints(AJ);var AL=AJ.length;if(AL<4){return ;}var p=(r&&s.NeedAdjustedLinePath()),AN=p?0.5:0,z=p&&(AJ[0].y===AJ[1].y&&AJ[1].y===AJ[2].y&&AJ[2].y===AJ[3].y)?0.5:0,n=(Math.abs(AJ[0].x-AJ[1].x)<0.5)?0.5:0;AJ[1].x+=n;AJ[1].y+=z;AJ[2].x+=n;AJ[2].y+=z;AJ[3].x+=AN;AJ[3].y+=z;var AG=Q.FormatLine.getLinePattern(o),AF=AG.length,AM=0,q=0,w=[],AC=[];for(AK=0;AK<AL;++AK){AC.push(0);w.push(0);}var AB=AJ[0].x,AA=AJ[0].y;var v=0.05;if(o===F.LS_DOT_DOT_DOT){v=0.03;AG[AF-1]*=2;}else{var AH=11.2;for(AI=0;AI<AF;++AI){if(AI%2===0){AG[AI]*=AH;}}}for(AE=0;AE<=1;AE+=v/AL){for(AK=1;AK<AL;++AK){for(AI=0;AI<AL-AK;++AI){if(AK===1){w[AI]=AJ[AI].x*(1-AE)+AJ[AI+1].x*AE;AC[AI]=AJ[AI].y*(1-AE)+AJ[AI+1].y*AE;continue;}w[AI]=w[AI]*(1-AE)+w[AI+1]*AE;AC[AI]=AC[AI]*(1-AE)+AC[AI+1]*AE;}}q+=Math.sqrt((AB-w[0])*(AB-w[0])+(AA-AC[0])*(AA-AC[0]));if(q>=AG[AM]){if(AM%2===0){if(this.mIsVertical){s.MoveTo(AB,AA);s.LineTo(w[0],AC[0]);}else{s.MoveTo(AA,AB);s.LineTo(AC[0],w[0]);}}AM=(AM+1)%AF;q=0;AB=w[0];AA=AC[0];}}}},LineToStart:function P(n){var o=this.mChartContextPtr;this.mBezierCurves[0].LineToStart(o,n&&o.NeedAdjustedLinePath());},getStartPoint:function X(){return this.mBezierCurves[0].getStartPoint();},getEndPoint:function D(){var n=this.mBezierCurves;return n[n.length-1].getEndPoint();},evaluate:function T(q){var o=this.mBezierCurves,s=o.length,p;for(p=0;(p+1)<s;++p){var n=o[p].getMinX();var r=o[p].getMaxX();if(n-q<c&&q-r<c){return o[p].evaluate(q);}}return o[o.length-1].evaluate(q);},GetMinMax:function d(){var n=this.mBezierCurves,r=n.length,p,o,q;if(r>0){p=n[0].GetMinMax();for(o=1;o<r;++o){q=n[o].GetMinMax();if(q.MinY<p.MinY){p.MinY=q.MinY;}if(q.MaxY>p.MaxY){p.MaxY=q.MaxY;}}}return p;},GetApproximatePolyline:function M(q){var n=this.mBezierCurves,p,o,s,t,r;n[0].GetApproximatePolyline(q);s=n.length;for(p=1;p<s;++p){t=[];n[p].GetApproximatePolyline(t);r=t.length;for(o=1;o<r;++o){q.push(t[o]);}}},CloneReverseShift:function l(q){var n=this.mBezierCurves,p=new Q.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this.mpManager,GraphCollectionObject:this.mpParentObject,BezierCurvePtr:null}),o;for(o=n.length-1;o>-1;--o){p.AddBezierCurveLine(n[o].CloneReverseShift(q));}return p;},Clone:function I(){var n=this.mBezierCurves,p=new Q.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this.mpManager,GraphCollectionObject:this.mpParentObject,BezierCurvePtr:null}),q=n.length,o;for(o=0;o<q;++o){p.AddBezierCurveLine(n[o].Clone());}return p;},Reverse:function Z(){var n=this.mBezierCurves,p=n.length,o;for(o=0;o<p;++o){n[o].Reverse();}n.reverse();},getMinX:function H(){var n=this.mBezierCurves,p=Number.MAX_VALUE,r=n.length,o;for(o=0;o<r;++o){var q=n[o].getMinX();if(q<p){p=q;}}return p;},getMaxX:function g(){var o=this.mBezierCurves,n=Number.MIN_VALUE,r=o.length,p;for(p=0;p<r;++p){var q=o[p].getMaxX();if(q>n){n=q;}}return n;},isBefore:function G(t,r){var o=this.mBezierCurves,s=o.length,n=r.mBezierCurves.length,q,p;for(q=0;q<s;++q){for(p=0;p<n;++p){if(o[q].isBefore(t,r.mBezierCurves[p])){return true;}}}return false;},SplitAtTangentPoints:function A(o,n){if(!this.mIsVertical){o.swap();}if(o.x===0){return ;}f.call(this,o,n);},SplitAtIntersections:function Y(q,n){var p=[];m.call(this,q,p);n=p;S.call(this,q,n);var r=p.length,o;for(o=0;o<r;++o){S.call(p[o],q,n);}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumLineJoinType","EnumLineStyle");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject","EnumDSSGraphFillBevelEffect");mstrmojo.requiresClsP("mstrmojo.chart","Polygon2D","ShapeObject","FormatLine");var H=mstrmojo.chart,M=H.enums,K=M.EnumLineJoinType,Q=M.EnumLineStyle,B=mstrmojo.chart.model,C=B.enums,J=C.EnumDSSGraphObject,N=C.EnumDSSGraphFillBevelEffect;function I(){var X=this.mChartContextPtr,V=this.mFormatLinePtr,S=this.mDevicePolygon,R=S.length,W,T=[],U;if(V.mLineStyle!==Q.LS_SOLID&&V.mLineStyle!==Q.LS_GRADIENT&&!X.mUseAnimation){X.NewPath();X.MoveTo(S[R-1].x,S[R-1].y);W=R-1;for(U=0;U<R;++U){T=V.getLinePattern(V.mLineStyle);X.DrawDashedLine(S[W],S[U],T);W=U;}X.ClosePath();}}mstrmojo.chart.PolygonObject=mstrmojo.declare(mstrmojo.chart.ShapeObject,null,{scriptClass:"mstrmojo.chart.PolygonObject",mDevicePolygon:[],mHasHole:false,mPointsStyle:0,init:function P(T){var R,S;this._super(T);this.mDevicePolygon=[];if(T){if(T.Polygon!==undefined){R=T.Polygon.length;for(S=0;S<R;++S){this.mDevicePolygon.push(T.Polygon[S]);}}else{if(T.Points!==undefined){R=T.Points.length;for(S=0;S<R;++S){this.mDevicePolygon.push(T.Points[S]);}}}if(T.HasHole!==undefined){this.mHasHole=T.HasHole;}}},Draw:function A(){var Y=this.mChartContextPtr,R=this.mDevicePolygon,T=Y.GetLineJoin(),U=[],V,W=[],X=0,S;Y.SetLineJoin(K.LJT_ROUND);this.SetLineWidth();Y.DrawPolygon(R,false);this.ApplyFillFormat();if(this.mHasHole){V=Math.floor(R.length/2);U=U.concat(R.slice(0,V-1));Y.DrawPolygon(U,true);if(this.mFormatLinePtr||this.mFormatLinePtr.mLineStyle===Q.LS_SOLID){this.ApplyLineFormat();}U.splice(0,U.length);U=U.concat(R.slice(V+1,R.length));Y.DrawPolygon(U,true);I.call(this);this.ApplyLineFormat();}else{if(Y.mIsTimeSeriesChart&&this.mTripleId.mObjectId===J.DssGraphRiser){X=Math.floor(R.length/2);for(S=0;S<X;++S){W.push(R[S]);}Y.DrawPolyLine(W,true);}else{if(Y.NeedAdjustedLinePath()){Y.DrawPolygon(R,true);}}I.call(this);this.ApplyLineFormat();}Y.SetLineJoin(T);Y.FinishDrawPolygon(R,this.mPointsStyle,this.mTripleId);},PointInObject:function E(S){var R=this.mDevicePolygon;if(!this.mIsDetectable){return false;}if(R.length<3){return false;}return S.IsInPolygon(R);},DrawOutLine:function G(){var U=this.mChartContextPtr,R=this.mDevicePolygon,S=[],T;if(R.length<3){return ;}this.SetOutlineWidth();if(this.mHasHole){T=Math.floor(R.length/2);S=S.concat(R.slice(0,T-1));U.DrawPolygon(S,true);this.ApplyOutlineFormat();S.splice(0,S.length);S=S.concat(R.slice(T+1,R.length));U.DrawPolygon(S,true);this.ApplyOutlineFormat();}else{U.DrawPolygon(R,true);this.ApplyOutlineFormat();}},ObjectInRectangle:function D(T){var R=this.mDevicePolygon,U=R.length,S;if(!this.mIsDetectable){return false;}if(U<3){return false;}for(S=0;S<U;++S){if(!T.PointInRectangle(R[S])){return false;}}return true;},GetBoundingRect:function F(){return this.GetBoundingRectFromPolygon(this.mDevicePolygon);},GetClockwisePolygon:function L(){var R=H.Polygon2D.clone(this.mDevicePolygon);this.MakePolygonClockwise(R);return R;},FillBevel:function O(){var W=this.mFormatFillPtr;if(W.supportAdvancedFill(0)===false){return ;}var S=this.mDevicePolygon,V=W.mFillBevel.type,T=[],R,U;if(S.length<3){return ;}if(this.mHasHole&&(V===N.DssGraphFillBevelChiselEdge||V===N.DssGraphFillBevelSmoothEdge)){T=T.concat(S);R=T.length;S.splice(0,R);for(U=0;(U+1)*2<R;++U){S[0]=T[U];S[1]=T[U+1];S[2]=T[R-2-U];S[3]=T[R-1-U];this._super();}S.splice(0,S.length);this.mDevicePolygon=S.concat(T);}else{this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.requiresClsP("mstrmojo.chart","ShapeObject","ImageMap","FormatLine","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumObjectShape","EnumMarkerShape","EnumLineStyle","EnumGraphMajorType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphObject");var X=mstrmojo.chart,T=X.enums,N=T.EnumObjectShape.OS_CIRCLE,W=T.EnumMarkerShape,B=T.EnumLineStyle,C=T.EnumGraphMajorType,O=mstrmojo.hash,R=103,P=X.model,b=P.enums,I=b.EnumDSSGraphMarkerShape,J=b.EnumDSSGraphObject,E=10,a=31,D=100,H=[[4,-100,-100,100,-100,100,100,-100,100],[12,-80,-100,0,-20,80,-100,100,-80,20,0,100,80,80,100,0,20,-80,100,-100,80,-20,0,-100,-80],[12,-33,-100,33,-100,33,-33,100,-33,100,33,33,33,33,100,-33,100,-33,33,-100,33,-100,-33,-33,-33],[12,-50,-100,50,-100,50,-50,100,-50,100,50,50,50,50,100,-50,100,-50,50,-100,50,-100,-50,-50,-50],[0],[4,0,-100,100,0,0,100,-100,0],[3,0,-100,100,100,-100,100],[4,-100,-100,100,-100,100,100,-100,100],[10,0,-100,23,-31,95,-31,36,12,59,81,0,38,-59,81,-36,12,-95,-31,-23,-31],[7,0,-60,100,-100,100,100,-100,100,-100,-100,0,-60,0,100],[8,-100,-100,0,-50,100,-100,50,0,100,100,0,50,-100,100,-50,0]];X.gMarkerShapeMap=[I.DssGraphMarkerShapeRectangle,I.DssGraphMarkerShapePlainX,I.DssGraphMarkerShapePlus,I.DssGraphMarkerShapeFatPlus,I.DssGraphMarkerShapeCircle,I.DssGraphMarkerShapeDiamond,I.DssGraphMarkerShapeTriangle1,I.DssGraphMarkerShapeSquare,I.DssGraphMarkerShapeStar5,I.DssGraphMarkerShapeHouse,I.DssGraphMarkerShapeStar45];X.gMarkerShapeDict=[];function c(f){var e=H.length,h=X.gMarkerShapeMap,j=X.gMarkerShapeDict,g=false,d;if(j.length===0){for(d=0;d<h.length;d++){j[h[d]]=d;}}if(g){for(d=0;d<e;++d){if(h[d]===f){return d;}}}else{return j[f]||0;}return 0;}function L(){var d=this.mPolygon=[],g=this.mMarkerShape,k=this.mMarkerSize,f=this.mMarkerPosition;var m,h,e,o=false,l,j;if(g===W.MS_Circle){if(o){for(m=0;m<360;m+=E){h=X.gModuleMain.DegreeToRadian(m);d.push(new X.Point2D({x:f.x+k*Math.cos(h),y:f.y+k*Math.sin(h)}));}}else{d.push(new X.Point2D({x:f.x-k,y:f.y-k}));d.push(new X.Point2D({x:f.x+k,y:f.y-k}));d.push(new X.Point2D({x:f.x+k,y:f.y+k}));d.push(new X.Point2D({x:f.x-k,y:f.y+k}));}return ;}var q=H[g];var p=q[0];if(this.mIsIsometric){for(e=0;e<p;++e){l=q[2*e+1]*k/D+f.x;j=q[2*e+2]*k/D+f.y;d.push(new X.Point2D({x:l,y:j}));}}else{var n;for(e=0;e<p;++e){l=q[2*e+1]*k/D+f.x;j=q[2*e+2]*k/D+f.y;n={x:l,y:j};n=this.mChartContextPtr.vdPoint(n);d.push(n);}}}function S(f){var d={drawBorder:true,shapeSize:f},e=this.mFormatLinePtr;if(e&&f>=e.mLineThickness+1&&e.mLineStyle!==B.LS_NONE){d.shapeSize=f-e.mLineThickness;}else{d.drawBorder=false;}return d;}mstrmojo.chart.MarkerObject=mstrmojo.declare(mstrmojo.chart.ShapeObject,null,{scriptClass:"mstrmojo.chart.MarkerObject",mMarkerSize:0,mMarkerShape:I.DssGraphMarkerShapeNone,mMarkerPosition:null,mIsIsometric:true,mPolygon:null,mIsShown:true,init:function U(d){d.hasLine=d.MarkerSize>=2;this._super(d);var e=this.mChartContextPtr;this.mMarkerPosition=new X.Point2D({Point2D:d.MarkerPosition});this.mMarkerShape=c.call(this,d.MarkerShape);this.mIsIsometric=d.IsIsometric;this.mMarkerSize=d.MarkerSize;this.mIsShown=true;if(d.IsDialogSize){this.mMarkerSize=e.dialogSizeToPixelSize(d.MarkerSize);}},fallOut:function A(i){var l=this.mChartContextPtr,f=l.mGraphWidth,g=l.mGraphHeight,e=this.mMarkerPosition,d=e.x,k=e.y,j=this.mMarkerSize;if(i){return d+j<0||d-j>f||k+j<0||k-j>g;}else{return(d-j>=0&&d+j<=f)&&(k-j>=0&&k+j<=g);}},Draw:function Q(){if(!this.mIsShown){return ;}var e=this.mChartContextPtr,d=e.GetGraphMajorType();if(e.mPartialRendering){if(this.fallOut(true)){return ;}}if(this.mIsAnimationEnabled&&d===C.GMT_BUBBLE){e.BeginFirstFrame();this.SetProgress(0);this.DoDraw();e.EndFrame();e.BeginLastFrame();}this.DoDraw();if(this.mIsAnimationEnabled&&d===C.GMT_BUBBLE){this.mChartContextPtr.EndFrame();}},DoDraw:function Z(){var e=this.mChartContextPtr;var m,f,n,j,o,l,g,h,p,d,k;o=this.mMarkerSize;m=S.call(this,o);this.mMarkerSize=m.shapeSize;p=m.drawBorder;if(p){this.SetLineWidth();}this.setMarkerPath(false);this.ApplyFillFormat();if(e.NeedAdjustedLinePath()){this.setMarkerPath(true);}if(p&&this.mFormatLinePtr.mLineStyle!==B.LS_SOLID&&!e.mUseAnimation){if(this.mMarkerShape===W.MS_Circle){m=X.FormatLine.getLinePattern(this.mFormatLinePtr.mLineStyle);f=this.mMarkerSize*Math.abs(2*Math.PI);n=0;j=0;l=m.length;g=Math.PI/5;h=0;while(n<f){d=Math.min(m[j%l],f-n);k=d/this.mMarkerSize;++j;if(g>k){k=g;}n+=k*this.mMarkerSize;if(j%2===1){e.NewPath();e.drawArc(this.mMarkerPosition,this.mMarkerSize,h,h+k,false);this.ApplyLineFormat();}h+=k;}}}if(p){this.ApplyLineFormat();}if(this.mMarkerShape===I.DssGraphMarkerShapeCircle){e.FinishDrawCircle({x:this.mMarkerPosition.x,y:this.mMarkerPosition.y,r:this.mMarkerSize},this.mTripleId);}else{e.FinishDrawPolygon(this.mPolygon,0,this.mTripleId);}this.mMarkerSize=o;},setMarkerPath:function F(f){var h=this.mChartContextPtr,e,g=this.mMarkerSize,d=this.mMarkerShape;if(h.mImageFormat===R){return ;}if(this.mPolygon===null){L.call(this);}if(d===I.DssGraphMarkerShapeCircle){h.drawArc(this.mMarkerPosition,g,0,Math.PI*2);}else{h.DrawPolygon(this.mPolygon,f);}},GetBoundingRect:function K(){if(this.mPolygon===null){L.call(this);}return this.GetBoundingRectFromPolygon(this.mPolygon);},GetClockwisePolygon:function Y(){if(this.mPolygon===null){L.call(this);}return X.Polygon2D.clone(this.mPolygon);},SetMarkerShape:function G(e){var d=c.call(this,e);if(this.mMarkerShape===d){return ;}this.mMarkerShape=d;L.call(this);},getRadialInfo:function V(){if(this.mMarkerShape===I.DssGraphMarkerShapeCircle){var d={r:this.mMarkerSize,cx:this.mMarkerPosition.x,cy:this.mMarkerPosition.y,fx:0,fy:0};d.fx=d.cx;d.fy=d.cy;return d;}return null;},getShapeSize:function M(){return this.mMarkerSize;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject","EnumShapeType");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGenericDirection","EnumRectExpandDirection");mstrmojo.requiresClsP("mstrmojo.chart","ShapeObject","FormatLine","Rect2D");var U=mstrmojo.chart,L=mstrmojo.chart.model,W=L.enums,C=W.EnumShapeType,G=W.EnumDSSGraphObject,M=U.FormatLine,P=mstrmojo.chart.enums,A=P.EnumLineStyle,N=P.EnumGenericDirection,R=P.EnumRectExpandDirection,E=U.model.enums.EnumDSSGraphMarkerShape;var H=new U.Rect2D();function D(){var Z=[],Y=this.mRect;if(this.mBorderOpenType===N.NONE){Z.push(Y.GetTopLeft());Z.push(Y.GetTopRight());Z.push(Y.GetBottomRight());Z.push(Y.GetBottomLeft());Z.push(Y.GetTopLeft());}else{Z.push(Y.GetBottomLeft());Z.push(Y.GetTopLeft());Z.push(Y.GetTopRight());Z.push(Y.GetBottomRight());var X=0;switch(this.mBorderOpenType){case N.BOTTOM:break;case N.LEFT:X=1;break;case N.TOP:X=2;break;case N.RIGHT:X=3;break;default:break;}if(X!==0){Z=U.gModuleMain.ShiftPolygonBy(Z,X);}}return Z;}function S(Z,Y){var X,a=[];if(this.mChartContextPtr.mImageFormat===103){return a;}if(Y){X=Z.GetBottomLeft();if(X.x>1){X.x--;}a.push(X);X=Z.GetTopLeft();if(X.x>1){X.x--;}if(X.y>1){X.y--;}a.push(X);X=Z.GetTopRight();if(X.y>1){X.y--;}a.push(X);a.push(Z.GetBottomRight());}else{X=Z.GetTopLeft();if(X.x>0){X.x--;}if(X.y>0){X.y--;}a.push(X);X=Z.GetTopRight();if(X.y>0){X.y--;}a.push(X);a.push(Z.GetBottomRight());X=Z.GetBottomLeft();if(X.x>0){X.x--;}a.push(X);}return a;}function T(Y){var c=this.mChartContextPtr,X=this.mFormatLinePtr.mLineStyle,b,a,Z;if(X!==A.LS_SOLID){c.NewPath();b=M.getLinePattern(X);a=new U.Point2D({x:Y.x+0.5,y:Y.y+0.5});Z=new U.Point2D({x:Y.x+0.5+Y.width,y:Y.y+0.5});c.DrawDashedLine(a,Z,b);a.ResetPoint(Z);Z.x=Y.x+0.5+Y.width;Z.y=Y.y+0.5+Y.height;c.DrawDashedLine(a,Z,b);a.ResetPoint(Z);Z.x=Y.x+0.5;Z.y=Y.y+0.5+Y.height;c.DrawDashedLine(a,Z,b);a.ResetPoint(Z);Z.x=Y.x+0.5;Z.y=Y.y+0.5;c.DrawDashedLine(a,Z,b);}}function K(Y,X){if(X){if(Y.x>1){--Y.x;++Y.width;}if(Y.y>1){--Y.y;++Y.height;}}else{if(Y.x>0){--Y.x;++Y.width;}if(Y.y>0){--Y.y;++Y.height;}}}function B(Z){var Y=this.mFormatLinePtr,X=Y.mLineThickness,a=true;if(X>=1){var b=X/2;if(this.mShapeType===C._BAR){switch(this.mBorderOpenType){case N.BOTTOM:if((Z.width>X)&&(Z.height>b)){Z.Expand(-b,R.REC_EXP_HORIZONTAL);Z.y+=b;}else{a=false;}break;case N.LEFT:if((Z.height>X)&&(Z.width>b)){Z.Expand(-b,R.REC_EXP_VERTICAL);Z.wdith-=b;}else{a=false;}break;case N.TOP:if((Z.width>X)&&(Z.height>b)){Z.Expand(-b,R.REC_EXP_HORIZONTAL);Z.y-=b;}else{a=false;}break;case N.RIGHT:if((Z.height>X)&&(Z.width>b)){Z.Expand(-b,R.REC_EXP_VERTICAL);Z.wdith+=b;}else{a=false;}break;default:if(Z.height>X&&Z.width>X){Z.Expand(-b,R.REC_EXP_BOTH);}else{a=false;}break;}}else{if(Z.height>X&&Z.width>X){Z.Expand(-b,R.REC_EXP_BOTH);}else{a=false;}}}return a;}function F(){var Z=this.mChartContextPtr,f=this.mFormatLinePtr,a=Z.mIsGraphMatrix,d=Z.GetGraphMatrixContext(),c=(this.mShapeType===C._TICKER)||(d.mMarkerShape===E.DssGraphMarkerShapeGMTick);if(this.mTripleId.mObjectId===G.DssGraphRiser&&Z.mPartialRendering){if(this.fallOut(true)){return ;}}var b=B.call(this,this.mRect);Z.DrawRectangle(this.mRect,false);this.ApplyFillFormat();H.ResetRect(this.mRect);var X=f.mLineThickness;this.SetLineWidth();if(a){if(c===false){var e=this.mTripleId.mObjectId;if(e===G.DssGraphRiser){if(Z.IsBarChart()){b=true;this.SetOutlineWidthEx(X);var h=Z.IsVertical(),Y=S.call(this,H,h);if((Y.length===4)&&((h&&this.mBorderOpenType!==N.BOTTOM)||(!h&&this.mBorderOpenType!==N.LEFT))){Y[0].swapPoints(Y[1]);Y[2].swapPoints(Y[3]);Z.DrawPolyLine(Y,true);}}else{if(Z.IsGridChart()||Z.IsLineChart()||Z.IsBubbleChart()||Z.IsScatterChart()){b=true;Z.DrawRectangle(H,true);}}}}}else{if(Z.NeedAdjustedLinePath()&&!a){if(this.mBorderOpenType!==N.NONE){var g;g=D.call(this);Z.DrawPolyLine(g,true);}else{Z.DrawRectangle(H,true);}}else{Z.DrawRectangle(this.mRect,true);}}if(b){if(!a){T.call(this,this.mRect);}this.ApplyLineFormat();}else{this.hSetLineWidth(0);}Z.FinishDrawRect(H,this.mTripleId);}mstrmojo.chart.RectangleObject=mstrmojo.declare(mstrmojo.chart.ShapeObject,null,{scriptClass:"mstrmojo.chart.RectangleObject",mRect:null,mBorderOpenType:0,init:function Q(X){if(X.hasFill===undefined){X.hasFill=true;}if(X.hasLine===undefined){X.hasLine=true;}this.mpParentObject=X.GraphCollectionObject||null;this.mTripleId=X.TripleId;this.mpManager=X.GraphObjectManager||null;this.mChartContextPtr=this.mpManager?this.mpManager.mChartContextPtr:null;this.mIsDetectable=true;if(X.Shape){this.mShapeType=X.Shape;}if(X.hasLine&&this.mTripleId.mObjectId!==-3){this.mFormatLinePtr=(this.mpParentObject===null||this.mpParentObject===undefined)?this.mChartContextPtr.GetFormatLine(this.mTripleId,0,this.mShapeType):this.mpParentObject.mFormatLinePtr;}this.mIsAnimationEnabled=false;if(X.hasFill&&this.mTripleId.mObjectId!==G.DssGraphErrorBar){this.mFormatFillPtr=(this.mpParentObject===null)?this.mChartContextPtr.GetFormatFill(this.mTripleId,0):this.mpParentObject.GetFormatFill();}if(X&&X.Area){this.mRect=new U.Rect2D({Rect2D:X.Area});}this.mIsVirtual=X.IsVirtualMarker||false;},Draw:function O(){var X=this.mChartContextPtr;if(this.mIsVirtual){return ;}if(this.mIsAnimationEnabled){X.BeginFirstFrame();this.SetProgress(0);F.call(this);X.EndFrame();X.BeginLastFrame();}F.call(this);if(this.mIsAnimationEnabled){X.EndFrame();}},GetClockwisePolygon:function V(){var X=this.mRect;return[X.GetTopLeft(),X.GetTopRight(),X.GetBottomRight(),X.GetBottomLeft()];},GetBoundingRect:function I(X){X=X||false;if(X){return this.mRect;}return new U.Rect2D({Rect2D:this.mRect});},getShapeSize:function J(){return Math.round(Math.max(0.5*this.mRect.width,0.5*this.mRect.height)+0.5);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Angle","Rect2D","ChartContext","ShapeObject","ImageMap","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumLineJoinType","EnumObjectShape","EnumBoundingRectType","EnumRadientGradientUsage");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphFillBevelEffect");var f=mstrmojo.chart,O=f.enums,AJ=O.EnumLineJoinType,D=O.EnumBoundingRectType,m=O.EnumRadientGradientUsage,l=f.gModuleMain,Y=f.model,R=Y.enums,i=R.EnumDSSGraphFillBevelEffect,AF=0,t=0,g=1,I=8;function Z(){var AM=this.mFormatFillPtr;AM.MakeDarker(0.75);this.ApplyFillFormat(true);AM.RestoreColor();}function A(){if(this.mIsOutline){this.ApplyOutlineFormat();}else{var AM=this.mBoundingRectType;if((AM===D.BRT_TOP)||(AM===D.BRT_BOTTOM)){this.ApplyFillFormat();}else{Z.call(this);}this.ApplyLineFormat();}}function X(){var AN=l.mGlowWidth,AO=this.mChartContextPtr,AM=this.mSliceInfo;AO.DrawRingSector(AM.mCenter,AM.mRadius+AN,AM.mRadius,l.DegreeToRadian(AM.mStartAngle),l.DegreeToRadian(AM.mEndAngle));AO.saveState();AO.Clip();AO.RestoreState();}function L(){var AP=this.mChartContextPtr,AO=this.mSliceInfo,AN=new f.Point2D({x:AO.mCenter.x,y:AO.mCenter.y-AO.mDepth}),AM=AO.mRadius*(AO.mRingPieFactor*0.01);if(this.mIsOutline){AP.drawArc(AN,AO.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);A.call(this);AP.drawArc(AN,AM,this.mStartAngleRadian,this.mEndAngleRadian);A.call(this);}else{AP.DrawRingSector(AN,AO.mRadius,AM,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_TOP);this.ApplyFillFormat();AP.drawArc(AN,AO.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.ApplyLineFormat();AP.drawArc(AN,AM,this.mStartAngleRadian,this.mEndAngleRadian);this.ApplyLineFormat();}}function x(){var AO=this.mChartContextPtr,AN=this.mSliceInfo,AM=AN.mRadius*(AN.mRingPieFactor*0.01);if(this.mIsOutline){AO.drawArc(AN.mCenter,AN.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);A.call(this);AO.drawArc(AN.mCenter,AM,this.mStartAngleRadian,this.mEndAngleRadian);A.call(this);}else{AO.DrawRingSector(AN.mCenter,AN.mRadius,AM,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_BOTTOM);this.ApplyFillFormat();AO.drawArc(AN.mCenter,AN.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.ApplyLineFormat();AO.drawArc(AN.mCenter,AM,this.mStartAngleRadian,this.mEndAngleRadian);this.ApplyLineFormat();}}function AA(){var AO=this.mSliceInfo,AN=new f.Point2D({x:AO.mCenter.x,y:AO.mCenter.y-AO.mDepth});var AM=AO.mRadius*(AO.mRingPieFactor*0.01);this.mChartContextPtr.DrawRingSector(AN,AO.mRadius,AM,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_TOP);A.call(this);}function S(){var AN=this.mSliceInfo,AM=AN.mRadius*(AN.mRingPieFactor*0.01);this.mChartContextPtr.DrawRingSector(AN.mCenter,AN.mRadius,AM,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_BOTTOM);A.call(this);}function k(AO){var AQ=this.mSliceInfo,AP,AU=0;if(AO===t){AP=AQ.mStartAngle%360;if((AP<=90)||(AP>=270)){return ;}AU=this.mStartAngleRadian;}else{AP=AQ.mEndAngle%360;if((AP>=90)&&(AP<=270)){return ;}AU=this.mEndAngleRadian;}var AS=AQ.mRadius;var AR=AQ.mRadius;AS*=Math.cos(AU);AR*=Math.sin(AU);var AW=new f.Point2D({x:AQ.mCenter.x,y:AQ.mCenter.y});AW.x+=AS;AW.y+=AR;var AT=new f.Point2D({x:AQ.mCenter.x,y:AQ.mCenter.y});AT.x+=AS*(AQ.mRingPieFactor*0.01);AT.x+=AR*(AQ.mRingPieFactor*0.01);var AN=[];AN.push(AT);AN.push(AW);var AM=new f.Point2D({x:AW.x,y:AW.y-AQ.mDepth});AN.push(AM);var AV=new f.Point2D({x:AT.x,y:AT.y-AQ.mDepth});AN.push(AV);this.mChartContextPtr.DrawPolygon(AN);if(AO===t){this.SetBoundingRectType(D.BRT_START_RECT);}else{this.SetBoundingRectType(D.BRT_END_RECT);}A.call(this);}function F(AM,AQ,AS){var AR=this.mSliceInfo;if(this.mIsOutline&&AM){return ;}var AP=l.DegreeToRadian(AQ);var AO=l.DegreeToRadian(AS);var AN=AR.mRadius;if(AM){AN*=(AR.mRingPieFactor*0.01);}this.mChartContextPtr.DrawCylinder(AR.mCenter,AN,AP,AO,AR.mDepth);if(AM){this.SetBoundingRectType(D.BRT_RING_CYLINDER);}else{this.SetBoundingRectType(D.BRT_CYLINDER);}this.SetCylinderStart(AQ);this.SetCylinderEnd(AS);A.call(this);}function N(){var AO=this.mSliceInfo,AN=AO.mStartAngle,AM=AO.mEndAngle;if(AN<180){if(AM<180){F.call(this,false,AN,AM);}else{if(AM<=360){F.call(this,true,180,AM);F.call(this,false,AN,180);}else{F.call(this,true,180,360);F.call(this,false,AN,180);F.call(this,false,360,AM);}}}else{if(AN<360){if(AM<=360){F.call(this,true,AN,AM);}else{if(AM<540){F.call(this,true,AN,360);F.call(this,false,360,AM);}else{F.call(this,true,AN,360);F.call(this,true,540,AM);F.call(this,false,360,540);}}}else{if(AN<540){if(AM<540){F.call(this,false,AN,AM);}else{F.call(this,true,540,AM);F.call(this,false,AN,540);}}else{F.call(this,true,AN,AM);}}}}function B(){N.call(this);k.call(this,t);k.call(this,g);}function v(){var AM=this.mSliceInfo;if(this.mOneSeries){if(AM.mIs2DCircular){x.call(this);}else{N.call(this);L.call(this);}this.mChartContextPtr.FinishDrawRing(AM.mCenter,AM.mRadius,AM.mRadius*AM.mRingPieFactor/100,this.mTripleId,true);}else{if(AM.mIs2DCircular){S.call(this);}else{B.call(this);AA.call(this);}this.mChartContextPtr.FinishDrawRingPieSlice(AM.mCenter,AM.mRadius,AM.mRadius*AM.mRingPieFactor/100,this.mStartAngleRadian,this.mEndAngleRadian,this.mTripleId);}}function G(){var AN=this.mSliceInfo,AM=new f.Point2D({x:AN.mCenter.x,y:AN.mCenter.y-AN.mDepth});this.mChartContextPtr.drawArc(AM,AN.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_TOP);A.call(this);}function H(){var AM=this.mSliceInfo;this.mChartContextPtr.drawArc(AM.mCenter,AM.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_BOTTOM);A.call(this);}function j(){var AN=this.mSliceInfo,AM=new f.Point2D({x:AN.mCenter.x,y:AN.mCenter.y-AN.mDepth});this.mChartContextPtr.DrawSector(AM,AN.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_TOP);A.call(this);}function h(){var AM=this.mSliceInfo;this.mChartContextPtr.DrawSector(AM.mCenter,AM.mRadius,this.mStartAngleRadian,this.mEndAngleRadian);this.SetBoundingRectType(D.BRT_BOTTOM);A.call(this);}function AL(AN){var AS=this.mSliceInfo,AR,AQ=0;if(AN===t){AR=AS.mStartAngle%360;if((AR<=90)||(AR>=270)){return ;}AQ=this.mStartAngleRadian;}else{AR=AS.mEndAngle%360;if((AR>=90)&&(AR<=270)){return ;}AQ=this.mEndAngleRadian;}var AP=new f.Point2D({x:AS.mCenter.x,y:AS.mCenter.y});AP.x+=AS.mRadius*Math.cos(AQ);AP.y+=AS.mRadius*Math.sin(AQ);var AO=[];AO.push(AS.mCenter);AO.push(AP);var AM=new f.Point2D({x:AP.x,y:AP.y-AS.mDepth});AO.push(AM);var AT=new f.Point2D({x:AS.mCenter.x,y:AS.mCenter.y-AS.mDepth});AO.push(AT);this.mChartContextPtr.DrawPolygon(AO);if(AN===t){this.SetBoundingRectType(D.BRT_START_RECT);}else{this.SetBoundingRectType(D.BRT_END_RECT);}A.call(this);}function AB(){var AO=this.mSliceInfo,AN=AO.mStartAngle,AM=AO.mEndAngle;if(AN<180){if(AM<180){F.call(this,false,AN,AM);}else{if(AM<=360){F.call(this,false,AN,180);}else{F.call(this,false,AN,180);F.call(this,false,360,AM);}}}else{if(AN<360){if(AM<=360){AF++;}else{if(AM<540){F.call(this,false,360,AM);}else{F.call(this,false,360,540);}}}else{if(AN<540){if(AM<540){F.call(this,false,AN,AM);}else{F.call(this,false,AN,540);}}else{AF++;}}}}function M(){AB.call(this);AL.call(this,t);AL.call(this,g);}function P(){var AM=this.mSliceInfo;if(this.mOneSeries){if(AM.mIs2DCircular){H.call(this);}else{AB.call(this);G.call(this);}this.mChartContextPtr.FinishDrawPieSlice(AM.mCenter,AM.mRadius,this.mStartAngleRadian,this.mEndAngleRadian,this.mTripleId,true,this.mIsWhitenOuterBorder);}else{if(AM.mIs2DCircular){h.call(this);}else{M.call(this);j.call(this);}this.mChartContextPtr.FinishDrawPieSlice(AM.mCenter,AM.mRadius,this.mStartAngleRadian,this.mEndAngleRadian,this.mTripleId,false,this.mIsWhitenOuterBorder);}}function AI(AN){var AQ=this.mSliceInfo,AM={mStartAngle:AQ.mStartAngle,mEndAngle:AQ.mEndAngle};this.ConvertAngle(AM);if(AM.mStartAngle>AM.mEndAngle){var AO=[{mStartAngle:0,mEndAngle:AM.mEndAngle},{mStartAngle:AM.mStartAngle,mEndAngle:360}];if(AN.mStartAngle>AN.mEndAngle){return true;}return this.GetIntersectionAngle(AN,AO[0])||this.GetIntersectionAngle(AN,AO[1]);}if(AN.mStartAngle>AN.mEndAngle){var AP=[{mStartAngle:0,mEndAngle:AN.mEndAngle},{mStartAngle:AN.mStartAngle,mEndAngle:360}];return this.GetIntersectionAngle(AM,AP[0])||this.GetIntersectionAngle(AM,AP[1]);}return this.GetIntersectionAngle(AM,AN);}function c(AZ){var Ab,AS,AT=this.mSliceInfo,AU=AT.mCenter,Aa=AT.mRadius;if(AT.mIs2DCircular){Ab=(AZ.x-AU.x);AS=(AZ.y-AU.y);var AQ=Math.sqrt(Ab*Ab+AS*AS);if(((Aa-AQ)>-l.mTolerance)&&((AQ-(Aa*AT.mRingPieFactor/100))>-l.mTolerance)){var Ac=l.RadianToDegree(Math.acos(Ab/AQ));if(AS<-l.mTolerance){Ac=360-Ac;}if((Ac>=AT.mStartAngle)&&(Ac<=AT.mEndAngle)){return true;}Ac+=360;if((Ac>=AT.mStartAngle)&&(Ac<=AT.mEndAngle)){return true;}return false;}return false;}Ab=(AZ.x-AU.x);var AP,AM,AY,AO,AV,Ad=(Aa*Aa-Ab*Ab),AR=Aa*Aa*(AT.mRingPieFactor*AT.mRingPieFactor/10000)-Ab*Ab;if(Ad<-l.mTolerance){return false;}if(AR<-l.mTolerance){AP=l.RadianToDegree(Math.asin(Math.sqrt(Ad)/Aa));AS=(AZ.y-(AU.y-AT.mDepth));AO=new f.Angle();AV=new f.Angle();if(Ab>l.mTolerance){AO.mEndAngle=AP;AO.mStartAngle=360-AP;AM=Math.sqrt(Ab*Ab+AS*AS);if(AS>l.mTolerance){AV.mEndAngle=l.RadianToDegree(Math.asin(AS/AM));}else{AV.mEndAngle=360+l.RadianToDegree(Math.asin(AS/AM));}AS-=AT.mDepth;AM=Math.sqrt(Ab*Ab+AS*AS);if(AS>l.mTolerance){AV.mStartAngle=l.RadianToDegree(Math.asin(AS/AM));}else{AV.mStartAngle=360+l.RadianToDegree(Math.asin(AS/AM));}}else{AO.mStartAngle=180-AP;AO.mEndAngle=180+AP;AM=Math.sqrt(Ab*Ab+AS*AS);AV.mStartAngle=180-l.RadianToDegree(Math.asin(AS/AM));AS-=AT.mDepth;AM=Math.sqrt(Ab*Ab+AS*AS);AV.mEndAngle=180-l.RadianToDegree(Math.asin(AS/AM));}AY=new f.Angle();if(!this.GetIntersectionConvertedAngles(AO,AV,AY)){return false;}return AI.call(this,AY);}AP=l.RadianToDegree(Math.asin(Math.sqrt(Ad)/Aa));var AN=l.RadianToDegree(Math.asin(Math.sqrt(AR)/(Aa*AT.mRingPieFactor)));AS=(AZ.y-(AU.y-AT.mDepth));var AX=new f.Angle();var AW=new f.Angle();AV={};if(Ab>l.mTolerance){AX.mStartAngle=360-AP;AX.mEndAngle=360-AN;AW.mStartAngle=AN;AW.mEndAngle=AP;AM=Math.sqrt(Ab*Ab+AS*AS);if(AS>l.mTolerance){AV.mEndAngle=l.RadianToDegree(Math.asin(AS/AM));}else{AV.mEndAngle=360+l.RadianToDegree(Math.asin(AS/AM));}AS-=AT.mDepth;AM=Math.sqrt(Ab*Ab+AS*AS);if(AS>l.mTolerance){AV.mStartAngle=l.RadianToDegree(Math.asin(AS/AM));}else{AV.mStartAngle=360+l.RadianToDegree(Math.asin(AS/AM));}}else{AX.mStartAngle=180-AP;AX.mEndAngle=180-AN;AW.mStartAngle=180+AN;AW.mEndAngle=180+AP;AM=Math.sqrt(Ab*Ab+AS*AS);AV.mStartAngle=180-l.RadianToDegree(Math.asin(AS/AM));AS-=AT.mDepth;AM=Math.sqrt(Ab*Ab+AS*AS);AV.mEndAngle=180-l.RadianToDegree(Math.asin(AS/AM));}AY=[new f.Angle(),new f.Angle()];if(!this.GetIntersectionConvertedAngles(AX,AV,AY[0])){if(!this.GetIntersectionConvertedAngles(AW,AV,AY[1])){return false;}return AI.call(this,AY[1]);}if(!this.GetIntersectionConvertedAngles(AW,AV,AY[1])){return AI.call(this,AY[0]);}return(AI.call(this,AY[0])||AI.call(this,AY[1]));}function r(AR){var AU,AT,AM,AQ=this.mSliceInfo,AX=AQ.mCenter,AP=AQ.mRadius;if(AQ.mIs2DCircular){AU=(AR.x-AX.x);AT=(AR.y-AX.y);AM=Math.sqrt(AU*AU+AT*AT);if((AP-AM)>-l.mTolerance){if(AM<l.mTolerance){return false;}var AN=l.RadianToDegree(Math.acos(AU/AM));if(AT<-l.mTolerance){AN=360-AN;}if((AN>=AQ.mStartAngle)&&(AN<=AQ.mEndAngle)){return true;}AN+=360;if((AN>=AQ.mStartAngle)&&(AN<=AQ.mEndAngle)){return true;}return false;}return false;}AU=(AR.x-AX.x);var AZ,AV,AW,AY=AP*AP-AU*AU;if(AY<-l.mTolerance){return false;}var AO=l.RadianToDegree(Math.asin(Math.sqrt(AY)/AP));AT=(AR.y-(AX.y-AQ.mDepth));AZ={mStartAngle:0,mEndAngle:0};AV={mStartAngle:0,mEndAngle:0};if(AU>l.mTolerance){AZ.mEndAngle=AO;AZ.mStartAngle=360-AO;AW=Math.sqrt(AU*AU+AT*AT);if(AT>l.mTolerance){AV.mEndAngle=l.RadianToDegree(Math.asin(AT/AW));}else{AV.mEndAngle=360+l.RadianToDegree(Math.asin(AT/AW));}AT-=AQ.mDepth;AW=Math.sqrt(AU*AU+AT*AT);if(AT>l.mTolerance){AV.mStartAngle=l.RadianToDegree(Math.asin(AT/AW));}else{AV.mStartAngle=360+l.RadianToDegree(Math.asin(AT/AW));}}else{AZ.mStartAngle=180-AO;AZ.mEndAngle=180+AO;AW=Math.sqrt(AU*AU+AT*AT);AV.mStartAngle=180-l.RadianToDegree(Math.asin(AT/AW));AT-=AQ.mDepth;AW=Math.sqrt(AU*AU+AT*AT);AV.mEndAngle=180-l.RadianToDegree(Math.asin(AT/AW));}var AS={mStartAngle:0,mEndAngle:0};if(!this.GetIntersectionConvertedAngles(AZ,AV,AS)){return false;}return AI.call(this,AS);}function y(AS){var Ac,AP=this.mSliceInfo,AW=AP.mDepth,AQ=AP.mCenter,Aa=AP.mRadius,AO=l.DegreeToRadian(AP.mStartAngle),AT=l.DegreeToRadian(AP.mEndAngle);var AZ=new f.Point2D({x:AQ.x+Aa*Math.cos(AO),y:AQ.y+Aa*Math.sin(AO)});var AU=new f.Point2D({x:AQ.x+Aa*Math.cos(AT),y:AQ.y+Aa*Math.sin(AT)});if(this.mBoundingRectType===D.BRT_TOP){AZ.y-=AW;AU.y-=AW;}var Ae=new f.Point2D({x:Math.min(AZ.x,AU.x),y:Math.min(AZ.y,AU.y)});var AV=new f.Point2D({x:Math.max(AZ.x,AU.x),y:Math.max(AZ.y,AU.y)});if(AP.mIsRingPie){Ac=Aa*(AP.mRingPieFactor/100);var AN=new f.Point2D({x:AQ.x+Ac*Math.cos(AO),y:AQ.y+Ac*Math.sin(AO)});var AY=new f.Point2D({x:AQ.x+Ac*Math.cos(AT),y:AQ.y+Ac*Math.sin(AT)});if(this.mBoundingRectType===D.BRT_TOP){AN.y-=AW;AY.y-=AW;}Ae.x=Math.min(Ae.x,AN.x);Ae.y=Math.min(Ae.y,AN.y);AV.x=Math.max(AV.x,AN.x);AV.y=Math.max(AV.y,AN.y);Ae.x=Math.min(Ae.x,AY.x);Ae.y=Math.min(Ae.y,AY.y);AV.x=Math.max(AV.x,AY.x);AV.y=Math.max(AV.y,AY.y);}else{Ae.x=Math.min(Ae.x,AQ.x);AV.x=Math.max(AV.x,AQ.x);var AX=AQ.y;if(this.mBoundingRectType===D.BRT_TOP){AX-=AW;}Ae.y=Math.min(Ae.y,AX);AV.y=Math.max(AV.y,AX);}var AM;for(AM=(AP.mStartAngle/90+1)*90;AM<AP.mEndAngle;(AM+=90)){var Ab=l.DegreeToRadian(AM);var Ad=new f.Point2D({x:AQ.x+Aa*Math.cos(Ab),y:AQ.y+Aa*Math.sin(Ab)});if(this.mBoundingRectType===D.BRT_TOP){Ad.y-=AW;}Ae.x=Math.min(Ae.x,Ad.x);Ae.y=Math.min(Ae.y,Ad.y);AV.x=Math.max(AV.x,Ad.x);AV.y=Math.max(AV.y,Ad.y);if(AP.mIsRingPie){Ac=Aa*(AP.mRingPieFactor/100);var AR=new f.Point2D({x:AQ.x+Ac*Math.cos(Ab),y:AQ.y+Ac*Math.sin(Ab)});if(this.mBoundingRectType===D.BRT_TOP){AR.y-=AW;}Ae.x=Math.min(Ae.x,AR.x);Ae.y=Math.min(Ae.y,AR.y);AV.x=Math.max(AV.x,AR.x);AV.y=Math.max(AV.y,AR.y);}}AS.x=Ae.x;AS.y=Ae.y;AS.width=AV.x-Ae.x;AS.height=AV.y-Ae.y;}function K(AV){var AT=this.mSliceInfo,AO=AT.mDepth,AZ=AT.mCenter,AY=AT.mRadius;if(this.mBoundingRectType===D.BRT_RING_CYLINDER){AY*=(AT.mRingPieFactor/100);}var AS=l.DegreeToRadian(this.mCylinderStart);var AN=l.DegreeToRadian(this.mCylinderEnd);var AM=new f.Point2D({x:AZ.x+AY*Math.cos(AS),y:AZ.y+AY*Math.sin(AS)});var AR=new f.Point2D({x:AZ.x+AY*Math.cos(AN),y:AZ.y+AY*Math.sin(AN)});var AU=new f.Point2D({x:Math.min(AM.x,AR.x),y:Math.min(AM.y-AO,AR.y-AO)});var AP=new f.Point2D({x:Math.max(AM.x,AR.x),y:Math.max(AM.y,AR.y)});var AQ;for(AQ=(this.mCylinderStart/90+1)*90;AQ<this.mCylinderEnd;(AQ+=90)){var AX=l.DegreeToRadian(AQ);var AW=new f.Point2D({x:AZ.x+AY*Math.cos(AX),y:AZ.y+AY*Math.sin(AX)});AU.x=Math.min(AU.x,AW.x);AU.y=Math.min(AU.y,(AW.y-AO));AP.x=Math.max(AP.x,AW.x);AP.y=Math.max(AP.y,AW.y);}AV.x=AU.x;AV.y=AU.y;AV.width=AP.x-AU.x;AV.height=AP.y-AU.y;}function p(AO){var AT=this.mSliceInfo,AR=AT.mRadius,AM=AT.mDepth,AQ=AT.mCenter,AP=AT.mRingPieFactor,AS=(this.mBoundingRectType===D.BRT_START_RECT)?AT.mStartAngle:AT.mEndAngle;if(AS>=360){AS-=360;}var AN=l.DegreeToRadian(AS);if(AT.mIsRingPie){AO.width=(AR*(1-AP/100)*Math.abs(Math.cos(AN)));AO.height=(AM+AR*(1-AP/100)*Math.abs(Math.sin(AN)));}else{AO.width=(AR*Math.abs(Math.cos(AN)));AO.height=(AM+Math.abs(AR*Math.sin(AN)));}if(AS<90){if(AT.mIsRingPie){AO.x=(AQ.x+AR*(AP/100)*Math.cos(AN));AO.y=(AQ.y-AM+AR*(AP/100)*Math.sin(AN));}else{AO.x=AQ.x;AO.y=AQ.y-AM;}}else{if(AS<180){AO.x=(AQ.x+AR*Math.cos(AN));if(AT.mIsRingPie){AO.y=(AQ.y-AM+AR*(AP/100)*Math.sin(AN));}else{AO.y=AQ.y-AM;}}else{if(AS<270){AO.x=(AQ.x+AR*Math.cos(AN));AO.y=(AQ.y-AM+AR*Math.sin(AN));}else{AO.y=(AQ.y-AM+AR*Math.sin(AN));if(AT.mIsRingPie){AO.x=(AQ.x+AR*(AP/100)*Math.cos(AN));}else{AO.x=AQ.x;}}}}}mstrmojo.chart.PieSliceObject=mstrmojo.declare(mstrmojo.chart.ShapeObject,null,{scriptClass:"mstrmojo.chart.PieSliceObject",mSliceInfo:null,mBoundingRectType:D.BRT_TOP,mCylinderStart:0,mCylinderEnd:0,mOneSeries:false,mIsOutline:false,mStartAngleRadian:0,mEndAngleRadian:0,mMiddleAngleRadian:0,mMiddleAngle:0,mIsShown:false,mIsWhitenOuterBorder:false,init:function AD(AO){if(AO.TripleId){AO.TripleId.angleByIndex=AO.AngleIndex||0;AO.TripleId.sliceById=AO.SliceId||0;}this._super(AO);this.mSliceInfo={};var AN=this.mSliceInfo;AN.mStartAngle=AO.StartAngle;AN.mEndAngle=AO.EndAngle;AN.mRingPieFactor=AO.RingPieFactor;AN.mIsRingPie=AO.IsRing;AN.mIs2DCircular=AO.Is2DCircular;AN.mScale=AO.Scale;AN.mCenter=AO.Center;AN.mRadius=AO.Radius;AN.mDepth=AO.Depth;this.mOneSeries=AO.OneSeries;this.mIsShown=AO.IsShown;this.mStartAngleRadian=l.DegreeToRadian(AN.mStartAngle);this.mEndAngleRadian=l.DegreeToRadian(AN.mEndAngle);this.mMiddleAngleRadian=0.5*(this.mStartAngleRadian+this.mEndAngleRadian);this.mMiddleAngle=(0.5*(AN.mStartAngle+AN.mEndAngle));var AM=this.mMiddleAngle;if(AM>=360){AM%=360;}this.mMiddleAngleQuadrant=Math.floor(AM/90+1);if(!this.mOneSeries){AN.mCenter.x+=(AO.Explode*Math.cos(this.mMiddleAngleRadian));AN.mCenter.y+=(AO.Explode*Math.sin(this.mMiddleAngleRadian));}this.mIsWhitenOuterBorder=AO.IsWhitenOuterBorder||false;},SetCylinderStart:function Q(AM){this.mCylinderStart=AM;},SetCylinderEnd:function e(AM){this.mCylinderEnd=AM;},SetBoundingRectType:function q(AM){this.mBoundingRectType=AM;},SetDrawOutline:function AE(AM){this.mIsOutline=AM;},GetSliceInfo:function w(){return this.mSliceInfo;},GetMiddleAngleQuadrant:function T(){return this.mMiddleAngleQuadrant;},GetMiddleAngle:function a(){return this.mMiddleAngle;},GetMiddleAngleRadian:function o(){return this.mMiddleAngleRadian;},Draw:function z(){if(this.mIsShown){this.SetLineWidth();this.mIsOutline=false;if(this.mSliceInfo.mIsRingPie){v.call(this);}else{P.call(this);}}},DrawOutLine:function AH(){if(this.mIsShown){var AO=this.mChartContextPtr,AN=this.mSliceInfo;if(!(AN.mIsRingPie)&&AN.mIs2DCircular){X.call(this);}var AM=this.mChartContextPtr.GetLineJoin();AO.SetLineJoin(AJ.LJT_BEVEL);this.SetOutlineWidth();if(!AN.mIs2DCircular){AO.Scale(1,AN.mScale);}this.mIsOutline=true;if(AN.mIsRingPie){v.call(this);}else{P.call(this);}if(!AN.mIs2DCircular){AO.Scale(1,1/AN.mScale);}AO.SetLineJoin(AM);}},PointInObject:function J(AN){if(this.mIsShown&&this.mFormatLinePtr){var AM=false;if(this.mSliceInfo.mIsRingPie){AM=c.call(this,AN);}else{AM=r.call(this,AN);}return AM;}return false;},GetBoundingRect:function u(AM){if(AM===undefined){AM=new f.Rect2D();}var AQ=this.mFormatFillPtr,AP=this.mSliceInfo,AO=AP.mCenter,AN=AP.mRadius;switch(this.mBoundingRectType){case D.BRT_TOP:case D.BRT_BOTTOM:if(AQ.supportAdvancedFill(0)&&AQ.mFillBevel.type===i.DssGraphFillBevelSphere){AM.x=AO.x-AN;AM.y=AO.y-AP.mDepth-AN;AM.width=2*AN;AM.height=2*AN;}else{y.call(this,AM);}break;case D.BRT_CYLINDER:case D.BRT_RING_CYLINDER:K.call(this,AM);break;case D.BRT_START_RECT:case D.BRT_END_RECT:p.call(this,AM);break;}return AM;},FillBevel:function s(){var AS=this.mFormatFillPtr,AQ=this.mSliceInfo,AR=this.mChartContextPtr;if(AS.supportAdvancedFill(0)===false){return ;}if(AS.mFillBevel.type===i.DssGraphFillBevelDonut){var AM=0;if(AQ.mIsRingPie){AM=AQ.mRadius*AQ.mRingPieFactor/100;}var AP=AQ.mCenter.x;var AO=AQ.mCenter.y;if(!(AQ.mIs2DCircular)){AO-=AQ.mDepth;}AR.saveState();AR.Clip();AR.FillRadientGradient(AS,m.RG_PIESLICE,AP,AO,AM,AQ.mRadius);AR.RestoreState();}else{if(AS.mFillBevel.type===i.DssGraphFillBevelSphere){var AN=AS.mFillBevel.lightAngle;AS.mFillBevel.lightAngle=270;f.ShapeObject.prototype.FillBevel.apply(this,[]);AS.mFillBevel.lightAngle=AN;}}},ConvertAngle:function AC(AM){while(AM.mStartAngle<0){AM.mStartAngle+=360;}while(AM.mStartAngle>360){AM.mStartAngle-=360;}while(AM.mEndAngle<0){AM.mEndAngle+=360;}while(AM.mEndAngle>360){AM.mEndAngle-=360;}},GetIntersectionConvertedAngles:function U(AN,AM,AP){var AQ,AO;if(AN.mStartAngle>AN.mEndAngle){AQ=[{mStartAngle:0,mEndAngle:AN.mEndAngle},{mStartAngle:AN.mStartAngle,mEndAngle:360}];if(AM.mStartAngle>AM.mEndAngle){AO=[{mStartAngle:0,mEndAngle:AM.mEndAngle},{mStartAngle:AM.mStartAngle,mEndAngle:360}];var AR={mStartAngle:0,mEndAngle:0};this.GetIntersectionAngle(AQ[0],AO[0],AR);AP.mEndAngle=AR.mEndAngle;this.GetIntersectionAngle(AQ[1],AO[1],AR);AP.mStartAngle=AR.mStartAngle;return true;}return this.GetIntersectionAngle(AM,AQ[0],AP)||this.GetIntersectionAngle(AM,AQ[1],AP);}if(AM.mStartAngle>AM.mEndAngle){AO=[{mStartAngle:0,mEndAngle:AM.mEndAngle},{mStartAngle:AM.mStartAngle,mEndAngle:360}];return this.GetIntersectionAngle(AN,AO[0],AP)||this.GetIntersectionAngle(AN,AO[1],AP);}return this.GetIntersectionAngle(AN,AM,AP);},GetIntersectionAngle:function W(AP,AO,AQ){var AM=(AP.mStartAngle>AO.mStartAngle)?AP.mStartAngle:AO.mStartAngle;var AN=(AP.mEndAngle>AO.mEndAngle)?AO.mEndAngle:AP.mEndAngle;if(AM>AN){return false;}if(AQ){AQ.mStartAngle=AM;AQ.mEndAngle=AN;}return true;},ElementDrawRingPieTop:function d(){AA.call(this);},ElementDrawNormalPieTop:function b(){j.call(this);},ElementFillSide:function C(){Z.call(this);},GetClockwisePolygon:function E(){var AM=[],AR=this.mSliceInfo;var AN=new f.Point2D({x:AR.mCenter.x,y:AR.mCenter.y});if(!(AR.mIs2DCircular)){AN.y-=AR.mDepth;}AM.push(new f.Point2D({x:AN.x,y:AN.y*AR.mScale}));var AQ;for(AQ=AR.mStartAngle;AQ-AR.mEndAngle<0;AQ+=I){var AP=l.DegreeToRadian(AQ);AM.push(new f.Point2D({x:AN.x+AR.mRadius*Math.cos(AP),y:((AN.y+AR.mRadius*Math.sin(AP))*AR.mScale)}));}var AO=l.DegreeToRadian(AR.mEndAngle);AM.push(new f.Point2D({x:AN.x+AR.mRadius*Math.cos(AO),y:(AN.y+AR.mRadius*Math.sin(AO))*AR.mScale}));return AM;},IsCircularShape:function AG(){return true;},SetWhitenOuterBorder:function V(AM){this.mIsWhitenOuterBorder=AM;},getRadialInfo:function AK(){var AN=this.mSliceInfo,AM={r:AN.mRadius,cx:AN.mCenter.x,cy:AN.mCenter.y,fx:0,fy:0};AM.fx=AM.cx;AM.fy=AM.cy;if(AN.mIsRingPie){AM.startStop=AN.mRingPieFactor/100;}return AM;},getShapeSize:function n(){if(this.mSliceInfo){return this.mSliceInfo.mRadius||0;}return 0;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","FormatFont","ChartContext","ShapeObject","SubTextHolder","Point2D");mstrmojo.requiresCls("mstrmojo.chart.common.Utility","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumGraphMajorType","EnumAnchorPoint","EnumBoxStyle","EnumFontAlignment","EnumFontRotation","EnumRectExpandDirection");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject");var r=mstrmojo.chart,X=r.enums,k=r.model,d=k.enums,K=X.EnumCollectionType,s=X.EnumGraphMajorType,p=mstrmojo.VisUtility,AB=X.EnumAnchorPoint,i=X.EnumBoxStyle,f=X.EnumFontAlignment,P=X.EnumFontRotation,M=X.EnumRectExpandDirection,AF=d.EnumDSSGraphObject,V=r.common.Utility;var AK=true;var R=false,c=65280,x=0.03,U=0,Y=0,T=0.2,F=0.85,e=0,G=0;var AG=new r.Point2D(),o=new r.Point2D(),Z=new r.Point2D(),t=new r.Rect2D(),N=new r.Rect2D();function m(AV){var AU=this.mChartContextPtr,AR=true,AS,AT=AU.IsVertical();if(!AR){return 0;}if(AT){switch(AV.mObjectId){case AF.DssGraphY1Label:case AF.DssGraphY2Label:return(0.5*this.mFontHeight);case AF.DssGraphX1Label:if(this.mFormatFontPtr.mFontRotation===P.FR_NORMAL){AS=this.GetTransformedRect(true);return(0.5*AS.height)+1;}return 0;default:return 0;}}if(this.mFormatFontPtr.mFontRotation===P.FR_NORMAL){switch(AV.mObjectId){case AF.DssGraphX1Label:case AF.DssGraphX2Label:case AF.DssGraph2DO1Label:AS=this.GetTransformedRect(true);return(0.5*AS.height)+1;default:return 0;}}return 0;}function z(AT){var AR=true;var AS=this.mChartContextPtr;if(AR){switch(AT.mObjectId){case AF.DssGraph2DO1Label:case AF.DssGraph2DO2Label:if(AS.IsGridChart()||AS.IsVertical()){return Math.ceil(0.25*this.mFontHeight);}return 0;case AF.DssGraphDataText:return Math.ceil(0.2*this.mFontHeight);default:return 0;}}return 0;}function AE(){if(!this.mIsShown||!this.mText.localeCompare("")){return false;}if(!this.mIsOnScreen){return false;}if(this.mChartContextPtr.mImageFormat===103){var AR=this.rect;return(AR.width>0&&AR.height>0);}return true;}function u(AZ,AW,AS){var AV=this.mSubTextHolder,AY=this.mFormatFontPtr,AX,AT,AR=0,AU=AV.mVecPartition[AZ];for(AT=0;AT<AW-AU;AT++){AX=AS[AT];if(AX.Truncated){AR+=AV.GetStringWidth(AX.Word,AY);}else{AR+=AV.GetOneWordWidth(AX.Index);}if(AS.length>0){AR+=AV.GetSpaceWidth();}}return AR;}function AQ(){var AT=this.mChartContextPtr,AS=this.mpParentObject;this.mFormatFontPtr=(AS===null)?AT.GetFormatFont(this.mTripleId):AS.GetFormatFont();var AR=this.mFormatFontPtr;if(AR.mFontBox!==i.BS_NOFRAME&&AT.mIsGraphMatrix===false){if(AS===null){this.mFormatFillPtr=AT.GetFormatFill(this.mTripleId,K.CT_NO_COLLECTION);if(!R){this.mFormatLinePtr=AT.GetFormatLine(this.mTripleId,K.CT_NO_COLLECTION,-1);}}else{this.mFormatFillPtr=AS.GetFormatFill();if(!R){this.mFormatLinePtr=AS.mFormatLinePtr;}}}}function D(AS){AS=AS||false;var AR=8,AT=this.mFormatFontPtr;if(AT){if(AS){AR=AT.GetStringExtent("H").Height;}else{AR=AT.GetFontExtent();}}AR=Math.floor(AR*F+0.5);return AR;}function J(){var AR=this.mFormatFontPtr,AW=this.mChartContextPtr,AT,AV,AS;this.mFontHeight=D.call(this,true);if(AW.mIsGraphMatrix){var AU=AR.evalMargins();this.mWidthEdgeMargin=AU[0]||0;this.mHeightEdgeMargin=AU[1]||0;this.mTextLineSpace=AU[2]||0;}else{AV=this.mChartContextPtr.GetGraphMajorType();AS=(AV===s.GMT_3D_SCATTER||AV===s.GMT_3D_CATEGORY);AT=AR.mFontBox!==i.BS_NOFRAME;this.mDoubleLineMargin=this.mDoubleLineMargin||0;this.mDoubleLineMargin=Math.floor(AR.mFontSize*T+0.5);if(this.mDoubleLineMargin===0){this.mDoubleLineMargin=1;}this.mWidthEdgeMargin=Math.floor(AR.mFontSize*x+0.5);if((this.mWidthEdgeMargin===0&&AT)||AS){this.mWidthEdgeMargin=1;}this.mHeightEdgeMargin=Math.floor(AR.mFontSize*U+0.5);if((this.mHeightEdgeMargin===0&&AT)||AS){this.mHeightEdgeMargin=1;}this.mTextLineSpace=Math.floor(AR.mFontSize*Y+0.5);if(this.mTextLineSpace===0){this.mTextLineSpace=1;}switch(AR.mFontBox){case i.BS_NOFRAME:break;case i.BS_SINGLE_LINE_FRAME:this.mWidthEdgeMargin+=this.mDoubleLineMargin;this.mHeightEdgeMargin+=this.mDoubleLineMargin;break;case i.BS_DOUBLE_LINE_FRAME:case i.BS_BEVELED_FRAME:case i.BS_REVERSE_BEVELED_FRAME:this.mWidthEdgeMargin+=this.mDoubleLineMargin*2;this.mHeightEdgeMargin+=this.mDoubleLineMargin*2;break;}}}function AI(){var AR=0;switch(this.mFormatFontPtr.mFontRotation){case P.FR_45:AR=45;break;case P.FR_90:AR=90;break;case P.FR_180:AR=180;break;case P.FR_270:AR=270;break;case P.FR_315:AR=315;break;default:break;}return r.gModuleMain.DegreeToRadian(-AR);}function h(){var AT;var AR=[],AS=this.rect;AG.x=AS.x+AS.width/2;AG.y=AS.y+AS.height/2;AT=AI.call(this);AR.push(new r.Point2D({x:AS.x,y:AS.y}).rotateAndClone(AG,AT));AR.push(new r.Point2D({x:AS.x+AS.width,y:AS.y}).rotateAndClone(AG,AT));AR.push(new r.Point2D({x:AS.x+AS.width,y:AS.y+AS.height}).rotateAndClone(AG,AT));AR.push(new r.Point2D({x:AS.x,y:AS.y+AS.height}).rotateAndClone(AG,AT));return AR;}function w(AX,AT,AZ){var AV,AU,AS,AR,AW,AY=AX.length;for(AV=1;AV<=AY;++AV){AU=AX.substring(0,AY-AV);AS=AU.concat("...");AW=this.mFormatFontPtr.GetStringExtent(AS);AR=AW.Width;if(AR<AT){AZ.Text=AS;AZ.TextWidth=AR;return true;}}return false;}function L(AW,Af,AV,AX){var Ah={},AZ=AW.length;AX=AX||false;if(AX){var Ab=0,Ag=0,Ae=true,Ai=this.mSubTextHolder,AR=Ai.GetSpaceWidthEx(this.mFormatFontPtr),AS=this.mFormatFontPtr.GetStringExtent("...").Width,AT="",Aa=-1;if(AS>Af){return false;}var Ad;for(Ad=0;Ad<AZ;Ad++){Ag=Ai.GetOneWordWidth(AW[Ad]);if(Ab+(Ad>0?AR:0)>Af-AS){break;}if(Ab+Ag+(Ad>0?AR:0)>Af-AS){break;}AT=AT.concat(Ai.mVecStr[AW[Ad]]);if(Ad>0){AT=AT.concat(" ");}Ab+=Ag+(Ad>0?AR:0);Aa=Ad;}var Ac,AY=0;for(Ac=0;Ac<=Aa;Ac++){AY=AW[Ac];AV.Texts.push({Truncated:true,Index:AY,Word:Ai.mVecStr[AY]});}if(Ad>=AZ){p.visPrint("where is the truncated word....");return true;}Af-=Ab;if(Ae===false&&Aa!==-1){Af-=AR;}AY=AW[Ad];var AU="";AU=AU.concat(Ai.mVecStr[AY]);if(w.call(this,AU,Af,Ah)){AV.Texts.push({Truncated:true,Highlighted:false,Index:AY,Word:Ah.Text});Ab+=Ah.TextWidth;}else{p.visPrint("Should have truncated, but...");AV.Texts.push({Truncated:false,Highlighted:false,Index:AY,Word:Ai.mVecStr[AY]});Ab+=((AY===0?0:AR)+Ai.GetOneWordWidth(AY));}AV.TextWidth=Ab;AV.TextXBearing=0;return true;}if(w.call(this,AW,Af,Ah)){AV.TextWidth=Ah.TextWidth;AV.TextXBearing=0;AV.Texts.push({Truncated:true,Highlighted:false,Index:-1,Word:Ah.Text});return true;}return false;}function AO(Ae,AZ){var AR=this.mChartContextPtr,AY=this.mSubTextHolder,AT={TextWidth:0,TextXBearing:0,Texts:[]},AV,AS,AU;AZ=AZ||false;AS=AY.GetOneLineWidth(Ae);AV=AY.GetOneLineString(Ae);if(AS<=this.rect.width+(AK?4:0)){AT.TextXBearing=AY.GetOneLineXBearing(Ae);AT.TextWidth=AS;if(AZ){var AW,Ad=-1,Aa=AY.GetOneLineWords(Ae);for(AW=0;AW<Aa.length;AW++){Ad=Aa[AW];AT.Texts.push({Index:Ad,Word:AY.mVecStr[Ad],Highlighted:false,Truncated:false});}}else{AT.Texts.push({Index:-1,Word:AV,Highlighted:false,Truncated:false});}return AT;}var AX=AR.mIsGraphMatrix,Ac=AZ?AY.GetOneLineWords(Ae):AV;if(AX&&!AR.isUADataAreaOutput()){if(this.mFormatFontPtr.mFontRotation===P.FR_90){var Ab=this.GetBoundingRect(true);if(Ab.y+AS>AR.mGraphHeight){if(L.call(this,Ac,AR.mGraphHeight,AT,AZ)){this.mIsTruncated=true;return AT;}}}if(this.rect.x<0&&AS>this.rect.width+this.rect.x){if(L.call(this,Ac,this.rect.width+this.rect.x,AT,AZ)){this.mIsTruncated=true;return AT;}}}if(L.call(this,Ac,this.rect.width,AT,AZ)){this.mIsTruncated=true;return AT;}this.mIsTruncated=true;AU=this.mFormatFontPtr.GetStringExtent(AT.Text);AT.TextWidth=AU.Width;AT.TextXBearing=0;AT.Texts.push({Index:-1,Word:AX?"":"...",Highlighted:false,Truncated:true});return AT;}function O(Ac,Af,Aa){var AU=this.mChartContextPtr,AY,Ab,AR,Ae,AV=this.mFormatFontPtr,AZ;Aa=Aa||false;AY=AO.call(this,Af,Aa);Ab=AY.Text;AR=AY.Texts;AZ=AY.TextWidth;switch(this.mFormatFontPtr.mFontAlignment){case f.FA_LEFT:Ac.x+=this.mWidthEdgeMargin;break;case f.FA_CENTER:Ac.x+=Math.floor((this.rect.width-AZ)/2+0.5);break;case f.FA_RIGHT:Ac.x+=Math.floor(this.rect.width-AZ-this.mWidthEdgeMargin+0.5);break;}if(AU.mIsGraphMatrix&&!AU.isUADataAreaOutput()){if(this.rect.x<0&&this.mIsTruncated){Ac.x=this.rect.width+this.rect.x-AZ+0.5;}if(AV.mFontRotation===P.FR_90){var AS=this.GetBoundingRect();if(AS.y+AS.height>AU.mGraphHeight&&this.mIsTruncated){var Ag=this.mSubTextHolder.GetOneLineWidth(Af),Ai=Ag-AZ;Ac.x-=Ai/2;Ac.x+=Ai;}}}if(AR===undefined){return ;}e=z.call(this,this.mTripleId);G=m.call(this,this.mTripleId);var Ah={x:Ac.x,y:Ac.y-e},Ad,AT,AW;for(Ae=0;Ae<AR.length;Ae++){Ab=AR[Ae];Ac.x=Ah.x;Ac.y=Ah.y;if(Ae>0){AW=u.call(this,Af,Ab.Index,AR);Ac.x+=AW;}AT={};if(G!==0){AT={BaselineOffset:G};}Ad=Ac;if(Ab.Highlighted){var AX=AV.mFontColor;AV.mFontColor=c;AU.AddFormatedText(AV,Ad,Ab.Word,AT);AV.mFontColor=AX;}else{AU.AddFormatedText(AV,Ad,Ab.Word,AT);}}}function W(){var AT,AX=this.mChartContextPtr,AU=false;if(AX.mIsGraphMatrix){if(this.showBBox){AT=h.call(this);AX.DrawPolygon(AT,true);if(this.mTripleId.mObjectId===AF.DssGraphDataText){AU=true;}this.mChartContextPtr.FinishTextBoundingBox(AT,this.BBoxColor,AU);}else{if(V.isValidNumber(this.BBoxColor)){var AW=true,AV=true;if(AW){var AR=1,AS=new r.FormatFont({Font:this.mFormatFontPtr});AS.mStrokeColor=this.BBoxColor;AS.mStrokeWidth=this.mChartContextPtr.isCombinationChart()?0.01:0.5;if(AV){AS.mFontStyle=AR;}this.mFormatFontPtr=AS;}}}}else{if(R||this.mFormatFontPtr.mFontBox!==i.BS_NOFRAME){AT=h.call(this);AX.DrawPolygon(AT,false,null,null,null);this.ApplyFillFormat();}}return this.mFormatFontPtr;}mstrmojo.chart.TextObject=mstrmojo.declare(mstrmojo.chart.ShapeObject,null,{scriptClass:"mstrmojo.chart.TextObject",clientDrag:false,rect:null,mFormatFontPtr:null,mText:"",mSubTextHolder:null,mIsShown:true,mWidthEdgeMargin:0,mHeightEdgeMargin:0,mTextLineSpace:0,mFontHeight:0,mIsRectCalculated:false,mTextWidthLimit:-1,mIsStringent:true,mLineCount:-1,mIsTruncated:false,mOnMarker:false,mIsOnScreen:true,init:function AH(AR){AR.hasLine=false;AR.hasFill=false;if(AR.hasLine||AR.hasFill){this._super(AR);}else{this.mpParentObject=AR.GraphCollectionObject||null;this.mTripleId=AR.TripleId||r.gNullTripleId;this.mpManager=AR.GraphObjectManager||null;this.mChartContextPtr=this.mpManager?this.mpManager.mChartContextPtr:null;this.mIsDetectable=true;if(AR.Shape){this.mShapeType=AR.Shape;}}if(AR.Identity!==undefined&&AR.Identity!==null){this.identity=AR.Identity;}this.rect=this.rect||new r.Rect2D();this.mSubTextHolder=new r.SubTextHolder();if(AR&&AR.OnMarker){this.mOnMarker=AR.OnMarker;}AQ.call(this);J.call(this);},GetFormatFont:function AN(){return this.mFormatFontPtr;},SetText:function AP(AR,AT){if(AT===undefined){AT=-1;}this.mText=AR;this.mIsRectCalculated=false;if(this.mText!==""){var AS=this.mSubTextHolder;AS.Clear();AS.ParseText(this.mText," ",AT);AS.UpdateText(this.mChartContextPtr,this.mFormatFontPtr);}},GetBoundingRectEx:function AM(AT){var AR=this.mFormatFontPtr.mFontRotation;if(!this.mIsRectCalculated){this.CalculateDeviceRect();}var AS=this.rect;if(AR!==P.FR_NORMAL){if(AR===P.FR_90||AR===P.FR_270){AT.Reset(AS.x,AS.y,AS.width,AS.height);var AV=AS.x+0.5*AS.width,AU=AS.y+0.5*AS.height;AT.width=this.rect.height;AT.height=this.rect.width;AT.x=AV-0.5*AT.width;AT.y=AU-0.5*AT.height;}else{var AW=this.GetBoundingRectFromPolygon(h.call(this));AT.ResetRect(AW);}}else{AT.Reset(AS.x,AS.y,AS.width,AS.height);}},GetBoundingRect:function y(AR){var AT=this.mFormatFontPtr.mFontRotation,AS;if(!this.mIsRectCalculated){this.CalculateDeviceRect();}if(AT!==P.FR_NORMAL){if(AT===P.FR_90||AT===P.FR_270){AS=new r.Rect2D({Rect2D:this.rect});var AU=this.rect,AW=AU.x+0.5*AU.width,AV=AU.y+0.5*AU.height;AS.width=this.rect.height;AS.height=this.rect.width;AS.x=AW-0.5*AS.width;AS.y=AV-0.5*AS.height;}else{AS=this.GetBoundingRectFromPolygon(h.call(this));}}else{AR=AR||false;if(AR){return this.rect;}AS=new r.Rect2D({Rect2D:this.rect});}return AS;},GetClockwisePolygon:function I(){if(!this.mIsRectCalculated){this.CalculateDeviceRect();}return h.call(this);},CalculateDeviceRect:function AJ(){var AX=this.mSubTextHolder,AZ=this.rect,AR=this.mFontHeight,AU=this.mTextWidthLimit,AW=this.mTextLineSpace,AV=this.mWidthEdgeMargin,AY=this.mHeightEdgeMargin,AS=1,AT=this.mLineCount;if(AZ.width===0||AZ.height===0){if(AU===-1&&AT===-1){AS=AX.GetLineCount();AZ.width=AX.GetMaxWidth();AZ.height=(AR+(AS===1?0:AW))*AS;AZ.Explode(AV,AY);}else{if(AU!==-1&&AT===-1){AX.PartitionBy(AU,this.mIsStringent);AS=AX.GetLineCount();AZ.height=(AR+(AS===1?0:AW))*AS+AY*2;if(this.mIsStringent){AZ.width=Math.min(AX.GetMaxWidth(),AU)+AV*2;}else{AZ.width=AX.GetMaxWidth()+AV*2;}}else{if(AU===-1&&AT!==-1){AX.SetLineCount(AT);AS=AX.GetLineCount();AZ.width=AX.GetMaxWidth();AZ.height=(AR+(AS===1?0:AW))*AS;AZ.Explode(AV,AY);}else{AX.SetLineCount(AT,AU);AS=AX.GetLineCount();AZ.height=(AR+(AS===1?0:AW))*AS+AY*2;if(this.mIsStringent){AZ.width=Math.min(AX.GetMaxWidth(),AU)+AV*2;}else{AZ.width=AX.GetMaxWidth()+AV*2;}}}}}else{if(AU===-1){if(AX.GetMaxWidth()>AZ.width){AX.PartitionBy(AZ.width);}}else{if(AX.GetMaxWidth()>AU){AX.PartitionBy(AU,this.mIsStringent);if(this.mIsStringent){AZ.width=Math.min(AX.GetMaxWidth(),AU)+AV*2;}else{AZ.width=AX.GetMaxWidth()+AV*2;}}else{AZ.width=AX.GetMaxWidth()+AV*2;}}AS=AX.GetLineCount();AZ.height=(AR+(AS===1?0:AW))*AS+AY*2;}this.mIsRectCalculated=true;},GetLineCount:function C(){return this.mSubTextHolder.GetLineCount();},SetTextWidthLimit:function v(AS,AR){if(AR===undefined){AR=true;}this.mTextWidthLimit=AS;this.mIsStringent=AR;this.mIsRectCalculated=false;},SetRect:function B(AR){this.rect.copy(AR);},SetRotation:function AA(AT){var AS=this.mFormatFontPtr.mFontRotation;if(AT!==AS){var AR=new r.FormatFont({Font:this.mFormatFontPtr});AR.mFontRotation=AT;this.mFormatFontPtr=AR;}},MoveTo:function q(AT,AS,AR){AR=AR||AB.TOP_LEFT;if(!this.mIsRectCalculated){this.CalculateDeviceRect();}var AU=this.rect;switch(AR){case AB.TOP_LEFT:AU.x=AT;AU.y=AS;break;case AB.CENTER:AU.x=AT-AU.width/2;AU.y=AS-AU.height/2;break;case AB.TOP_MIDDLE:AU.x=AT-AU.width/2;AU.y=AS;break;case AB.TOP_RIGHT:AU.x=AT-AU.width;AU.y=AS;break;case AB.LEFT_MIDDLE:AU.x=AT;AU.y=AS-AU.height/2;break;case AB.RIGHT_MIDDLE:AU.x=AT-AU.width;AU.y=AS-AU.height/2;break;case AB.BOTTOM_LEFT:AU.x=AT;AU.y=AS-AU.height;break;case AB.BOTTOM_MIDDLE:AU.x=AT-AU.width/2;AU.y=AS-AU.height;break;case AB.BOTTOM_RIGHT:AU.x=AT-AU.width;AU.y=AS-AU.height;break;}},MoveToCenter:function AD(AS,AR){this.rect.x=Math.round(AS-this.rect.width/2);this.rect.y=Math.round(AR-this.rect.height/2);},GetTransformedRect:function H(AS){var AR,AV,AT;if(!this.mIsRectCalculated){this.CalculateDeviceRect();}var AU=this.mFormatFontPtr.mFontRotation;if(AU===P.DssGraphFontRotate45||AU===P.DssGraphFontRotate315){AT=new r.Rect2D({Rect2D:this.rect});AR=new r.Point2D({x:AT.x+AT.width*0.5,y:AT.y+AT.height*0.5});AV=(AU===P.DssGraphFontRotate45)?1:-1;AT.x=Math.floor((AR.x-AV*AR.y)*Math.SQRT1_2+(AT.x-AR.x)+0.5);AT.y=Math.floor((AV*AR.x+AR.y)*Math.SQRT1_2+(AT.y-AR.y)+0.5);}else{AT=this.GetBoundingRect(AS);}return AT;},GetTransformedRectEx:function AL(AT){var AV,AU,AS;if(!this.mIsRectCalculated){this.CalculateDeviceRect();}var AR=this.mFormatFontPtr.mFontRotation;if(AR===P.FR_45||AR===P.FR_315){AT.ResetRect(this.rect);AV=AT.x+AT.width*0.5;AU=AT.y+AT.height*0.5;AS=(AR===P.FR_45)?1:-1;AT.x=Math.floor((AV-AS*AU)*Math.SQRT1_2+(AT.x-AV)+0.5);AT.y=Math.floor((AS*AV+AU)*Math.SQRT1_2+(AT.y-AU)+0.5);}else{this.GetBoundingRectEx(AT);}},HasOverlapForSameRotation:function A(AR,AS,AU){AS=AS||0;AU=AU||M.REC_EXP_INVALID;var AT=this.GetTransformedRect(true),AV=AR.GetTransformedRect(true),AW=AS/2;if(AW>0){t.ResetRect(AT);N.ResetRect(AV);t.Expand(AW,AU);N.Expand(AW,AU);return t.HasIntersection(N);}return AT.HasIntersection(AV);},strokeBBox:function E(AS){var AR=false,AT=this.mChartContextPtr;if(AS===undefined){if(AR){AS=AT.getDefaultContrastColor();}else{AS=AT.getDefaultThemeColor();}}this.BBoxColor=AS;},Draw:function AC(){var AX=this.mChartContextPtr,AV=this.mFormatFontPtr,AS,AW,AU,AT,AR=false;if(AE.call(this)===false){return ;}if(isNaN(this.rect.x)||isNaN(this.rect.y)){return ;}this.mIsTruncated=false;AV=W.call(this);AV.ApplyFontFormat(AX,false);switch(this.mTripleId.mObjectId){case AF.DssGraph2DO1Label:case AF.DssGraph2DO2Label:AR=true;break;default:AR=false;break;}if(AV.mFontRotation!==P.FR_NORMAL){AX.saveState();Z.x=this.rect.x+this.rect.width/2;Z.y=this.rect.y+this.rect.height/2;AX.Rotate(Z,AI.call(this));}AS=this.mSubTextHolder.GetLineCount();AW=this.mFontHeight+this.mTextLineSpace;AU=Math.max((this.rect.height-AW*AS)/2,0);for(AT=0;AT<AS;AT++){o.x=this.rect.x;o.y=this.rect.y+AU+(AT+1)*this.mFontHeight;O.call(this,o,AT,AR);}if(AV.mFontRotation!==P.FR_NORMAL){AX.RestoreState();}AX.FinishDrawText(this.mTripleId,{OnMarker:this.mOnMarker,Tooltip:this.mIsTruncated?this.mText:null,Identities:this.IdentityMap,Identity:this.identity});},getFormatFromParent:function n(){var AR=this.mpParentObject;this.mFormatLinePtr=AR.mFormatLinePtr;this.mFormatFillPtr=AR.GetFormatFill();this.mFormatFontPtr=AR.GetFormatFont();},GetBoundingRectNoRotation:function b(AR){if(!this.mIsRectCalculated){this.CalculateDeviceRect();}AR=AR||false;if(AR){return this.rect;}return new r.Rect2D({Rect2D:this.rect});},RestoreWidthAndHeight:function S(){this.mSubTextHolder.ParseText(this.mText," ",-1);this.rect.width=0;this.rect.height=0;this.mTextWidthLimit=-1;this.mIsStringent=true;this.mLineCount=-1;this.CalculateDeviceRect();},Restore:function g(AR){if(AR===undefined){this.RestoreWidthAndHeight();return ;}this.rect.width=0;this.rect.height=0;this.rect.x=0;this.rect.y=0;this.mTextWidthLimit=(AR.TextWidthLimit!==undefined)?AR.TextWidthLimit:-1;this.mLineCount=(AR.LineCount!==undefined)?AR.LineCount:-1;this.mIsStringent=(AR.Stringent!==undefined)?AR.Stringent:true;if(AR.Restroke!==undefined&&AR.Restroke){this.SetText(this.mText,this.mTextWidthLimit);}},GetOneLineHeight:function a(){return this.mFontHeight;},getWidthHeightMargin:function j(AR){return AR?this.mWidthEdgeMargin:this.mHeightEdgeMargin;},possibleTruncate:function l(){return this.mTextWidthLimit>0&&this.rect.width>this.mTextWidthLimit&&!this.mIsStringent;},getDevicePolygon:function Q(){return h.call(this);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","TripleId","StraightLineObject");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumAxisDirection","EnumAxisLabelsLocation");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject");var D=mstrmojo.chart,H=D.enums,J=H.EnumAxisDirection,C=H.EnumAxisLabelsLocation,A=mstrmojo.chart.model,B=A.enums,E=B.EnumDSSGraphObject,F=D.gNullTripleId;mstrmojo.chart.CategoryAxisInfo=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.CategoryAxisInfo",mId:F,mAxisLabelsLocation:C.ALL_BOTTOM,mAxisDirection:J.AD_X,init:function K(L){this._super(L);this.mId=new D.TripleId({ObjectId:E.DssGraphO1Body,SeriesId:0});this.mAxisLabelsLocation=C.ALL_BOTTOM;this.mAxisDirection=J.AD_X;},ToX:function I(M){var L;if(M===undefined){M=false;}L=M?E.DssGraphO2Body:E.DssGraphO1Body;this.mId.mObjectId=L;this.mId.mSeriesId=0;this.mAxisDirection=J.AD_X;this.mAxisLabelsLocation=C.ALL_BOTTOM;},ToY:function G(M){var L;if(M===undefined){M=false;}L=M?E.DssGraphO2Body:E.DssGraphO1Body;this.mId.mObjectId=L;this.mId.mSeriesId=0;this.mAxisDirection=J.AD_Y;this.mAxisLabelsLocation=C.ALL_LEFT;}});}());(function(){mstrmojo.requiresCls("mstrmojo.num","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart.common","FractionNumber","Utility");mstrmojo.requiresClsP("mstrmojo.chart","TextObject","ChartAdvFormat","ChartContext","ShapeObject","SubTextHolder","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumNumberCategory");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphObject","EnumDSSGraphProperty");var c=mstrmojo.chart,K=c.enums,b=mstrmojo.VisUtility,d=K.EnumGraphMajorType,h=K.EnumNumberCategory,N=5,r=5;var V=mstrmojo.chart.model,M=V.enums,l=M.EnumDSSGraphType,s=M.EnumDSSGraphObject,q=M.EnumDSSGraphProperty,F=mstrmojo.num,D=mstrmojo.chart.common,G=D.Utility,A=G.tripleId;var B=["[SF:-3]","[SF:-6]","[SF:-9]"];var i=new c.TripleId(),k=new c.ChartAdvFormat(),L=new c.ChartAdvFormat(),g=new c.ChartAdvFormat();function Y(x){switch(x){case s.DssGraphY1Label:case s.DssGraphY2Label:case s.DssGraphY3Label:case s.DssGraphY4Label:case s.DssGraphX1Label:case s.DssGraphX2Label:return true;}return false;}function O(x){switch(x.mObjectId){case s.DssGraphUserLabel1:return s.DssGraphY1Label;case s.DssGraphUserLabel2:return s.DssGraphY2Label;case s.DssGraphUserLabel3:return s.DssGraphX1Label;case s.DssGraphUserLabel4:return s.DssGraphX2Label;default:return x.mObjectId;}}function E(AA){var x,y=this.mSuffix,z=AA;if(z.length&&this.mNumber<0){if(z[0]==="-"&&this.mPrefix!=="-"){z=z.substring(1);this.mPrefix="-"+this.mPrefix;}}x=this.mPrefix;if(this.mHasBracket){if(z.length>=2&&z[0]==="("&&z[z.length-1]===")"){z="("+x+z.substring(1,z.length-1)+y+")";}else{z=x+z+y;}}else{z=x+z+y;}if(this.mIsFinal){this.SetText(z);}else{this.mText=z;}}function S(x){return(x.search(/\?\/[0-9\?]/)!==-1);}function T(x){return x.replace(/[^"]E-/,"E");}function t(AD,AC,AH,AF){var AA,AB,z,AE,x,AG,y;y=AH;AA=new D.FractionNumber();AB=new D.FractionNumber();z=new D.FractionNumber();AE=new D.FractionNumber();AB.mNumerator=0;AB.mDenominator=z.mDenominator=z.mNumerator=1;AE.mDenominator=AB.mDenominator+z.mDenominator;AE.mNumerator=AB.mNumerator+z.mNumerator;AG=AD>=0;AD=Math.abs(AD);x=Math.floor(AD);AD-=x;while(AE.mDenominator<y){if(Math.abs(AE.ToDouble()-AD)<1e-15){AA.Copy(AE);break;}if(AE.ToDouble()>AD){z.Copy(AE);}else{AB.Copy(AE);}AE.mDenominator=AB.mDenominator+z.mDenominator;AE.mNumerator=AB.mNumerator+z.mNumerator;}if(AE.mDenominator>=y){if(AD-AB.ToDouble()<z.ToDouble()-AD){AA.Copy(AB);}else{AA.Copy(z);}}if(x>0){AA.mNumerator+=x*AA.mDenominator;}return AA.ToString(AC,AG,AF);}function W(AD,y,AA){var AB,z,AF,x=10,AE,AG;AG=y.indexOf("# ",0);AE=(AG!==-1);for(AB=5;AB>0;AB--){AF="/";for(z=0;z<AB;z++){AF+="?";}AG=y.indexOf(AF,0);if(AG!==-1){for(z=1;z<AB;z++){x*=10;}break;}}var AC;AC=t(AD,AE,x,AA);return AC;}function p(AJ,AD){var AA,AL,AK,AH=AD.lastIndexOf("/"),y=AD.substr(AH+1,AD.length);AA=(y.indexOf("?")===-1);if(AA){var AC=AJ<0,AI=(AD.indexOf("# ",0)!==-1),x,z=y.ToInteger();AJ=Math.abs(AJ);x=Math.floor(AJ);AJ-=x;var AE=Math.floor(AJ*z+0.5);x+=AE/z;AE%=z;if(!AI){AE+=x*z;x=0;}if(x===0&&AE===0){return"0";}if(x!==0){AK=x.ToString();if(AE!==0){AK+=" ";}}if(AE!==0){AK=AE.ToString();AK+="/";AK+=z.ToString();}AL=AK;if(AC){AL="-"+AL;}return AL;}var AG=this.mTripleId.mObjectId,AB=Y.call(this,AG),AF=AG===s.DssGraphDataText;AL=W(AJ,AD,!AB&&!AF);return AL;}function C(AC){var AB,AA,y,x="",z="";AB='"';AA=AC.indexOf(AB);if(AA===-1){return{Format:AC,HasLeftOver:true,Prefix:x,Suffix:z};}y=AC.indexOf(AB,AA+1);if(y===-1){return{Format:AC,HasLeftOver:false,Prefix:x,Suffix:z};}if(AA===0){x=AC.substring(1,y);AC=AC.substring(y+1);}AA=AC.lastIndexOf(AB);if(AA===-1){return{Format:AC,HasLeftOver:true,Prefix:x,Suffix:z};}y=AC.lastIndexOf(AB,AA-1);if(y===-1){return{Format:AC,HasLeftOver:false,Prefix:x,Suffix:z};}if(AA===AC.length-1){z=AC.substring(y+1,AA);AC=AC.substring(0,y);}return{Format:AC,HasLeftOver:true,Prefix:x,Suffix:z};}function R(AA,AH){AH=AH||false;var AJ,AL="",AB="",AE,AK,AD,y,z,AC,AG,x,AI=false,AF;AE=AA.indexOf(";");AJ=false;if(AE!==-1){AL=AA.substring(0,AE);AB=AA.substring(AE+1);}else{AL=AA;if(AH===false){AB=AL;AI=true;}}AK=AB.length>0;AD=AK;if(AD){AD=AB[0]==="[";if(AD){z=AB.indexOf("]");AD=z!==-1;if(AD){y=AB.substring(0,z+1);AB=AB.substring(z+1);}}}if(AB.length>=2){AJ=(AB[0]==="("&&AB[AB.length-1]===")");}if(AJ){AB=AB.substring(1,AB.length-1);}AC=false;if(this.mNumber>=0){AF=C.call(this,AL);AL=AF.Format;AC=AF.HasLeftOver;AG=AF.Prefix;x=AF.Suffix;AF=C.call(this,AB);AB=AF.Format;}else{AF=C.call(this,AB);AB=AF.Format;AC=AF.HasLeftOver;AG=AF.Prefix;x=AF.Suffix;AF=C.call(this,AL);AL=AF.Format;}if(AJ){AB="("+AB+")";}if(AD){AB=y+AB;}if(AK){if(AI){AA=AB;}else{AA=AL+";"+AB;}}else{AA=AL;}return{Format:AA,HasLeftOver:AC,HasBracket:AJ,Prefix:AG,Suffix:x};}function J(y,AB){AB=(AB!==undefined)?AB:true;var x,AA,AC,z;if(this.mPrefix.length>0||this.mSuffix.length>0){return y;}x=y.substring(0);z=R.call(this,x,AB);x=z.Format;AA=z.Prefix;AC=z.Suffix;if(AA.length){this.mPrefix=AA;}if(AC.length){this.mSuffix=AC;}return x.substring(0);}function P(x,y,AB){var AA,z;AA=this.mNumber;if(this.mNumber<0&&y>=2&&y!==5){AA=-this.mNumber;}z=G.hFormatValue(x,AA);if(this.mNumber<0){if(y===3||y===4){z="("+z+")";}if(y===2||y===4||y===5){this.mColor=255;}}E.call(this,z);}function v(AF,AI){var AB,AH,z,x,AC,AD=-1,AA=-1,AE=["[SF:-3]","[SF:-6]","[SF:-9]"];AB=AF.mCustomFormat[0];x=AF.mCustomFormat.length;AH=AF.mCustomFormat[x-1];AC=AF.mCustomFormat.substring(0);if(AB==="K"){AD=1;AA=0;z="K";}else{if(AH==="K"){AD=x;AA=0;z="K";}else{if(AB==="M"){AD=1;AA=1;z="M";}else{if(AH==="M"){AD=x;AA=1;z="M";}else{if(AB==="B"){AD=1;AA=2;z="B";}else{if(AH==="B"){AD=x;AA=2;z="B";}}}}}}if(AD!==-1){AC.replace(/([KMB])/g,'"$1"');var y;var AG=AC.indexOf(";");if(AG!==-1){if(AB===z){y='"'+z+'"'+B[AA];}else{y=B[AA]+'"'+z+'"';}AC.replace(";",";"+AE[AA]);}AC=B[AA]+AC;}P.call(this,AC,AF.mNegFormat,AI);}function Q(y,AE){var AA,x=y.mCustomFormat.substring(0);AA=R.call(this,x);this.mHasBracket=this.mHasBracket||AA.HasBracket;x=AA.Format;var AB=!AA.HasLeftOver,z=AA.HasBracket,AC=AA.Prefix,AD=AA.Suffix;if(AC.length){this.mPrefix=AC.substring(0);}if(AD.length){this.mSuffix=AD.substring(0);}y.mCustomFormat=x.substring(0);if(AB){y.mCustomFormat=J.call(this,y.mCustomFormat);}P.call(this,y.mCustomFormat,y.mNegFormat,AE);}function X(AB){var AA,z,y,x=AB.length;if(x===0){return{Format:AB,Base:1};}if(AB[x-1]!==","){return{Format:AB,Base:1};}if(AB===","){return{Format:AB,Base:1000};}z=AB.reverse();AA=z.search(/[^,]/);if(AA===-1){y=Math.pow(1000,x);return{Format:"",Base:y};}y=Math.pow(1000,AA);return{Format:AB.substring(0,x-AA),Base:y};}function I(AV,AH){var AU=this.mNumber,AX,AQ,AF,AJ,AD,AN,AE,z,AC,AO,AA,y,AS,AT,AL,AP,AB,AK,AM,x,AR;if(AV===null){E.call(this,G.hFormatValue("General",this.mNumber));}else{L.restore();AX=AV.getGridDataFormat(L,(this.mTripleId.mSeriesId<0)?0:this.mTripleId.mSeriesId,(this.mTripleId.mGroupId<0)?0:this.mTripleId.mGroupId,this.mColumnOffset);if(AX!==true){E.call(this,G.hFormatValue("General",this.mNumber));return ;}AQ=L.mCustomFormat.substring(0);if(S.call(this,AQ)){L.mFormatType=h.Fraction;}if(L.mFormatType===h.Fraction){AF=L.mCustomFormat.substring(0);AJ=p.call(this,this.mNumber,AF);E.call(this,AJ);return ;}L.mCustomFormat=J.call(this,L.mCustomFormat);AF=L.mCustomFormat.substring(0);T.call(this,AF);var AW=X.call(this,AF);AD=AW.Base;AF=AW.Format;this.mNumber/=AD;if(this.replaceQuestionMarkWithHash(AF)){AN=AF.indexOf(".");AE=AF.length-AN-1;AL=G.hFormatValue(AF,this.mNumber);z=AL.indexOf(".");AC=0;if(z===-1){z=AL.length;AE=AC;}else{AC=AL.length-AN-1;}AN-=z;AE-=AC;if(AN>0){this.mPrefix="";for(AR=0;AR<AN;AR++){this.mPrefix+=" ";}}if(AE>0){this.mSuffix="";for(AR=0;AR<AN;AR++){this.mSuffix+=" ";}}E.call(this,AL);this.mNumber=AU;return ;}if(L.mFormatType===h.Scientific){AF.replace("#","0");}AO=".";AD=1;AA=AF.lastIndexOf(AO);y=this.mNumber;if(AA!==-1&&L.mFormatType===h.Custom){var AG=this.AdjustFormatStringWithDot(AF,AA);AD=AG.BASE;AF=AG.STRING;y/=AD;}else{if(L.mFormatType===h.Custom){AS=AF.length;if(AS>2){var AI=AF[AS-1];if(AF[AS-2]==="\\"&&(AI==="B"||AI==="b"||AI==="M"||AI==="m"||AI==="K"||AI==="k")){AT=AF[AS-1];AP='"';AF=AF.substring(0,AS-2);AF+=AP;AF+=AT;AF+=AP;AB="";AD=this.getBaseForCustomFormatting(AF);y/=AD;AF+=AP;AF+=AB;AF+=AP;}}}}AK=false;if(AF.indexOf("* -")!==-1){AK=this.mNumber<0;if(AK){AF.replace("* -","* ");}}if(AF===""){E.call(this,G.hFormatValue("General",this.mNumber));return ;}AL=G.hFormatValue(AF,y);AM=AL.length;if(AL.length){x=L.mNegFormat>=3&&AL[0]==="("&&AL[AM-1]===")";if(x&&AL.length>this.mPrefix.length&&this.mPrefix.length&&this.mNumber<0){AL="("+this.mPrefix+AL.substring(1);this.mPrefix=this.mSuffix="";}}if(AK){this.mText=AL;AE=this.mText.search(/[0-9]/);if(AE!==-1){if(AE>0){AL=this.mText.substring(0,AE);}AL=AL+"-"+this.mText.substring(AE);}}E.call(this,AL);this.mNumber=AU;}}function U(AR,AE,AG){var AP,AO,AQ,AI,AC,AN,AF,AH,AK,AA,AL,AB,x,z,AM,y,AJ;switch(AE.mFormatType){case h.Default:b.visPrint("should not reach here.");break;case h.General:E.call(this,G.hFormatValue("",this.mNumber));break;case h.FromGrid:I.call(this,AR,AG);break;case h.Fixed:v.call(this,AE,AG);break;case h.Date:case h.Time:AC=AE.mCustomFormat.substring(0);AC.replace(/[:(tt)]/g,"");E.call(this,G.hFormatValue(AC,this.mNumber));break;case h.Percentage:AC=AE.mCustomFormat.substring(0);P.call(this,AC,AE.mNegFormat,AG);break;case h.Fraction:AC=AE.mCustomFormat.substring(0);AI=p.call(this,this.mNumber,AC);E.call(this,AI);break;case h.Special:AP=new c.ChartAdvFormat({ChartAdvFormat:AE});if(AP.mCustomFormat.localeCompare("#####")===false&&this.mNumber===0){AP.mCustomFormat[4]="0";}E.call(this,G.hFormatValue(AP.mCustomFormat,this.mNumber));break;case h.Currency:AP=new c.ChartAdvFormat({ChartAdvFormat:AE});Q.call(this,AP,AG);break;case h.Scientific:AC=AE.mCustomFormat.substring(0);AC.replace("#","0");E.call(this,F.formatByMask(AC,this.mNumber));break;default:AQ=this.mNumber;AF=false;AP=new c.ChartAdvFormat({ChartAdvFormat:AE});AH=AP.mCustomFormat.substring(0);if(AH==="?"){AH="0";}if(AP.mFormatType===h.Custom){AK=S.call(this,AH);if(AK){AI=p.call(this,this.mNumber,AH);E.call(this,AI);return ;}AH=T.call(this,AH);AN=X.call(this,AH);AA=AN.Base;AH=AN.Format;this.mNumber/=AA;if(this.replaceQuestionMarkWithHash(AH)){AL=AH.indexOf(".");AB=AH.length-AL-1;AJ=G.hFormatValue(AH,this.mNumber);x=AJ.indexOf(".");z=0;if(x===-1){x=AJ.length;AB=z;}else{z=AJ.length-AL-1;}AL-=x;AB-=z;if(AL>0){this.mPrefix="";for(AO=0;AO<AL;AO++){this.mPrefix+=" ";}}if(AB>0){this.mSuffix="";for(AO=0;AO<AL;AO++){this.mSuffix+=" ";}}E.call(this,AJ);this.mNumber=AQ;return ;}if(AH.indexOf("* -")!==-1){AH.replace("* -","* ");AF=true;}}AM=".";y=AH.lastIndexOf(AM);if(y!==-1){var AD=this.AdjustFormatStringWithDot(AH,y);AA=AD.BASE;AH=AD.STRING;this.mNumber/=AA;}E.call(this,G.hFormatValue(AH,this.mNumber));if(AF&&this.mNumber<0){AJ=this.mText.substring(0);AB=AJ.search(/[0-9]/);if(AB!==-1){if(AB>0){this.mText=AJ.substring(0,AB);}this.mText=this.mText+"-"+AJ.substring(AB);E.call(this,this.mText);}}this.mNumber=AQ;break;}}function a(){if(!this.mChartContextPtr.mIsGraphMatrix){return false;}return this.expectCondense===true;}function m(AB,AG,AD){var x=this.mChartContextPtr,AA,AF=this.mChartContextPtr.mIsGraphMatrix,AE=O.call(this,this.mTripleId);if(x.mIsTimeSeriesChart&&AE===s.DssGraphY1Label){this.SetNumberFormatForTimeSeries(AB);return ;}if(AF===false){return ;}if(Y.call(this,AE)){if(this.shouldCondense){this.SetNumberFormatForTimeSeries(AB);return ;}g.reset(AB);AA=this.mNumber;if(g.mFormatType===h.Default){var y=x.getAxisKeyFromObjectId(AE),z=x.getUniformAxisInformationFromKey(y),AH=z.Metrics;if(AH===undefined||AH.length===0){AH=[0];}x.getAxisAutoNumberFormat(g,AH);g.mCustomFormat=J.call(this,g.mCustomFormat);}U.call(this,AD,g,AG);var AC=this.mChartContextPtr.GetGraphMatrixContext();if(a.call(this)){if(this.mText.length>AC.getCondensedTextLimit(g.mFormatType)){this.mNumber=AA;this.mPrefix=this.mSuffix="";this.SetNumberFormatForTimeSeries(AB);}}}}mstrmojo.chart.NumberObject=mstrmojo.declare(mstrmojo.chart.TextObject,null,{scriptClass:"mstrmojo.chart.NumberObject",mNumber:0,mColor:-1,mIsFinal:false,mIsAbbreviated:false,mColumnOffset:0,mHasBracket:false,mPrefix:"",mSuffix:"",expectCondense:false,shouldCondense:false,init:function u(x){if(x.Locale===undefined){x.Locale=0;}this._super(x);this.mNumber=x.Number;this.mIsFinal=x.IsFinal!==undefined?x.IsFinal:true;this.mColumnOffset=x.ColumnOffset!==undefined?x.ColumnOffset:0;this.mPrefix="";this.mSuffix="";if(x.ExpectCondense){this.expectCondense=x.ExpectCondense;}if(x.ShouldCondense){this.shouldCondense=x.ShouldCondense;}this.SetNumberFormat(x.NumberFormat,x.Locale,x.DataSet);},SetNumberFormat:function Z(AB,AH,AC){var x=this.mChartContextPtr,AD,AA=this.mChartContextPtr.mIsGraphMatrix,AE=O.call(this,this.mTripleId),AG,AF,y,z;if(x.mIsTimeSeriesChart&&AE===s.DssGraphY1Label){return m.call(this,AB,AH,AC);}if(x.mIsGraphMatrix&&Y.call(this,AE)){return m.call(this,AB,AH,AC);}k.reset(AB);y=k.mFormatType;AD=x.GetGraphMajorType();A.reset(i,this.mTripleId.mObjectId);if(((AE===s.DssGraphDataText||AE===s.DssGraphRiser)&&(AD===d.GMT_SCATTER||AD===d.GMT_BUBBLE))&&!AA){switch(this.mColumnOffset){case 0:A.reset(i,s.DssGraphX1Body);break;case 1:A.reset(i,s.DssGraphY1Body);break;case 2:A.reset(i,s.DssGraphZBody);break;default:break;}AG=x.GetProperty(q.DssGraphAxisNumberFormat,i);if(AG){x.ParseValueToFormat(AG,k);}switch(this.mColumnOffset){case 0:A.reset(i,s.DssGraphX1Label);break;case 1:A.reset(i,s.DssGraphY1Label);break;default:break;}}AE=i.mObjectId;if(Y.call(this,AE)){if(AA===false){if(((y===h.FromGrid)||(y===h.Default))){if(x.mGraphType===l.DssGraphTypePareto_Percent){k.mFormatType=h.General;}else{x.getAxisAutoNumberFormat(k);k.mCustomFormat=J.call(this,k.mCustomFormat);}}}}else{if(y===h.Default){k.mFormatType=h.FromGrid;}if(AE===s.DssGraphDataText&&y===h.FromGrid&&AD===d.GMT_HISTOGRAM){k.mFormatType=h.General;}}if((this.mNumber>1000000000000000||this.mNumber<-1000000000000000)&&y===h.Currency){AF="0";for(z=0;z<k.mDigits;z++){if(z===0){AF+=".";}AF+="0";}AF+="E+00";k.mCustomFormat=AF.substr(0);k.mFormatType=h.Scientific;}U.call(this,AC,k,AH);},Draw:function o(){var y=this.mFormatFontPtr,x=this.mColor;if(x>=0){var z=x;if(y){z=y.mFontColor;y.mFontColor=x;}this._super();if(y){y.mFontColor=z;}}else{this._super();}},replaceQuestionMarkWithHash:function w(AB){var z,y,AA,x="";if(AB.length===0){return false;}y=AB.length;z=0;for(AA=0;AA<y;AA++){if(x.indexOf(AB[AA])===-1){x+=AB[AA];}if(AB[AA]==="."){z++;}}if(x===".?"||x==="?."){if(z===1){AB.replace("?","#");return true;}}return false;},AddTextBeforeNumber:function H(z){var x,y;x=new c.Rect2D();this.SetRect(x);y=z+"\n"+this.mText;this.SetText(y);this.mIsFinal=true;},getBaseForCustomFormatting:function n(AA){var AD="",AG="",AC=1000,y='"',AE=AA.lastIndexOf(y);if(AE!==-1&&AE===AA.length-1){AE=AA.lastIndexOf(y,AE-1);if(AE!==-1){if(AE!==0&&!(AE===1&&AA.charAt(0)==="-")){if(AA.lastIndexOf("(",AE-1)===-1){var z=AA.substr(AE,AA.length);AG=z.replace(/"""/gi,"");AA=AA.substr(0,AE);}}}}AE=AA.length-1;var x=1,AF=AA.charAt(AE),AB=true;switch(AF){case"K":case"k":x*=AC;AD=AF;AE-=1;break;case"M":case"m":x*=AC*AC;AD=AF;AE-=1;break;case"B":case"b":x*=AC*AC*AC;AD=AF;AE-=1;break;default:AB=false;break;}AA=AA.substr(0,AE+1);if(AB){AE=AA.length-1;if(AA.charAt(AE)===","){AA=AA.substr(0,AE);}return{BASE:x,STRING:AA,TAG:AD,SUFFIX:AG};}var AH=",";while(AE>0){if(AA.charAt(AE)!==AH){break;}AE--;x*=AC;}AA=AA.substr(0,AE+1);return{BASE:x,STRING:AA,TAG:AD,SUFFIX:AG};},AdjustFormatStringWithDot:function e(AE,AH){var z=".",AB=",",AM=0,AF=0,AA=1,AL="",AN=".",AK=AH-1;while(AK>=0){if(AE[AK]===AB){AF++;AA*=1000;}else{break;}AK--;AL+=AB;}AL+=z;if(!(AM===0&&AF===0)){var y=0,AD=AE.indexOf(AL),x="";while(AD!==-1){x=x.concat(AE.substr(y,AD-y));y=AD+AL.length;x=x.concat(AN);AD=AE.indexOf(AL,y);}x+=AE.substr(y,AE.length);AE=x;}var AG,AC,AI,AJ=AE.lastIndexOf(z);while(AJ!==-1){AI=AE.lastIndexOf(AB,AJ);if((AI!==-1)&&(AI<AJ)&&(AJ-AI>1)&&(AJ-AI<4)){AC="";AC=AC.concat(AE.substr(0,AI+1));for(AG=0;AG<4-(AJ-AI);AG++){AC=AC.concat(AE[AI+1]);}AC=AC.concat(AE.substr(AI+1));AE=AC;}AJ=AE.lastIndexOf(z,AJ-1);}return{BASE:AA,STRING:AE};},SetNumberFormatForTimeSeries:function j(AC){var y=this.mChartContextPtr,AA=this.mNumber,AG,z,AB=y.mIsGraphMatrix;if(AC.mFormatType===0&&!AB){var AF;if(this.mNumber>0){AF=y.getInt(AA);AG="$"+AF.ToString();}else{AA=-AA;AF=y.getInt(AA);AG="($"+AF.ToString()+")";}E.call(this,AG);return ;}this.mIsAbbreviated=this.mIsAbbreviated||AB;var AE=this.mTripleId.mObjectId,AD=AB&&Y.call(this,AE),x=AD?r:N;AG=G.abbreviateNumber(this.mNumber,x);if(AC.mFormatType===1){AG=AC.mCurrency+AG;}E.call(this,AG);},GetNumberFromText:function f(){if(this.mText!==""){var x=parseFloat(this.mText);if(G.isValidNumber(x)){return x;}return null;}return null;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","TripleId","GraphObjectManager","ShapeObject","TextObject","StraightLineObject","GraphCollectionObject","PolygonObject","PolyLineObject","GraphAxisGeneral","AxisObject","ChartConstants","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumGraphMajorType","EnumDSSExtraGraphObject","EnumAnchorPoint","EnumAxisLabelsLocation","EnumAxisDirection","EnumGraphObjectType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSGraphTitleName","EnumDSSExtraGraphProperty","EnumDSSGraphFontRotation","EnumDSSGraphGridLineType","EnumDSSGraphAxisLabelLocation");var Ac=mstrmojo.chart,AV=Ac.ChartConstants,N=Ac.enums,y=N.EnumCollectionType,AZ=N.EnumGraphMajorType,Ah=N.EnumDSSExtraGraphObject,An=N.EnumAnchorPoint,Z=N.EnumAxisLabelsLocation,Ag=N.EnumAxisDirection,V=N.EnumGraphObjectType,AF=Ac.gNullGroupId,m=Ac.gNullTripleId,AA=Ac.gNullObjectId,F=0,E=1,AE=2,p=3,o=4,n=5,l=6,s=7,AC=8,D=100,Ak=2;var AT=mstrmojo.chart.model,AH=AT.enums,As=AH.EnumDSSGraphProperty,At=AH.EnumDSSGraphObject,AM=AH.EnumDSSGraphTitleName,Af=AH.EnumDSSExtraGraphProperty,H=AH.EnumDSSGraphFontRotation,Au=AH.EnumDSSGraphGridLineType,O=AH.EnumDSSGraphAxisLabelLocation;var g=1,AD=2,b=4,v=8;var X=null,M=null,L=null,AX=null,u=null;function AP(){if(!this.mUseDepth){return ;}var A0=this.mDeviceDataArea,Az=this.mDepthOffset;A0.x+=Az.x;A0.y+=Az.y;this.mUseDepth=false;}function Ap(Az){switch(Az.mGridStyle){case Au.DssGraphGridRegular:case Au.DssGraphGridBoth:Az.mGridStyle=Au.DssGraphGridRegular;break;case Au.DssGraphGridInnerTicks:case Au.DssGraphGridOuterTicks:case Au.DssGraphGridSpanningTicks:Az.mShowGridLines=false;break;default:Az.mGridStyle=Au.DssGraphGridRegular;}}function T(A2,A6,A7){var A9,A4,A3,Az,BA,A5,BB,A1=this.mDeviceDataArea,A0=true,A8=true;if(this.IsVerticalAxis()){A0=(A2.x===A1.x);A8=(A2.x+A2.width===A1.x+A1.width);}else{A0=(A2.y+A2.height===A1.y+A1.height);A8=(A2.y===A1.y);}if(A0&&A8){this.generateGridsByArea(A7);this.MoveGraphObjectList(A6);return ;}A9=this.mUseDepth;A4=A1;A3=this.mMajorGrid.mShowGridLines;Az=this.mMinorGrid.mShowGridLines;BA=this.mMajorGrid.mGridStyle;A5=this.mMinorGrid.mGridStyle;BB=this.mAxisInfo.mAxisLabelsLocation;this.mDeviceDataArea=A2;if(A0||A8){if(A0){this.mAxisInfo.mAxisLabelsLocation=this.IsVerticalAxis()?Z.ALL_LEFT:Z.ALL_BOTTOM;}else{this.mAxisInfo.mAxisLabelsLocation=this.IsVerticalAxis()?Z.ALL_RIGHT:Z.ALL_TOP;}if(!this.hasDepthAxisLine(this.mAxisInfo.mAxisLabelsLocation)){AP.call(this);}}else{AP.call(this);Ap.call(this,this.mMajorGrid);Ap.call(this,this.mMinorGrid);}this.generateGridsByArea(A7);this.MoveGraphObjectList(A6);this.mUseDepth=A9;this.mDeviceDataArea.ResetRect(A4);this.mMajorGrid.mShowGridLines=A3;this.mMinorGrid.mShowGridLines=Az;this.mMajorGrid.mGridStyle=BA;this.mMinorGrid.mGridStyle=A5;this.mAxisInfo.mAxisLabelsLocation=BB;}function AJ(Az){var A2=this.mDeviceDataArea,A1,A0;switch(Az){case Z.ALL_BOTTOM:A1=A2.GetBottomLeft();A0=A2.GetBottomRight();if(this.mChartContextPtr.mIsTimeSeriesChart){A1.x=0;}break;case Z.ALL_TOP:A1=A2.GetTopLeft();A0=A2.GetTopRight();break;case Z.ALL_LEFT:A1=A2.GetTopLeft();A0=A2.GetBottomLeft();break;case Z.ALL_RIGHT:A1=A2.GetTopRight();A0=A2.GetBottomRight();break;default:A1=null;A0=null;break;}return{Start:A1,End:A0};}function Ax(Az){var A3,A0,A2,A1;if(this.mUseDepth){return ;}A1=AJ.call(this,Az);A3=A1.Start;A0=A1.End;A2=new Ac.StraightLineObject({TripleId:this.mTripleId,GraphObjectManager:this,StartPoint:A3,EndPoint:A0,GraphCollectionObject:this.mpAxisLineSet});this.mManagerGraphObjectList.push(A2);this.mpAxisLineSet.AddGraphObject(A2);}function B(){var A0,A1,A3,A4,A7=[],Az,A5,A6,A2;A3=this.IsVerticalAxis()?Z.ALL_LEFT:Z.ALL_BOTTOM;A4=this.IsVerticalAxis()?Z.ALL_RIGHT:Z.ALL_TOP;if(this.hasDepthAxisLine(A3)){A6=AJ.call(this,A3);}else{if(this.hasDepthAxisLine(A4)){A6=AJ.call(this,A4);}else{return ;}}A0=A6.Start;A1=A6.End;A7.push(A0);A7.push(A1);A7.push(A1.Shifted(this.mDepthOffset));A7.push(A0.Shifted(this.mDepthOffset));A2=new Ac.TripleId({ObjectId:At.DssGraphFrame});Az=new Ac.PolygonObject({TripleId:A2,GraphObjectManager:this,Polygon:A7});Az.mIsDetectable=false;A5=Az.GetFormatFill();A5.MakeDarker(this.IsVerticalAxis()?0.8:0.6);this.mManagerGraphObjectList.push(Az);}function e(A8,A3,A5,A7,A9,Az){var A1,A6,A2,A0,A4;A6=this.mChartContextPtr.CalculateDepthOffset(A5,this.mDepthDirection,true);A1=new Ac.Point2D({x:A6.OffsetX,y:A6.OffsetY});Az.splice(0,Az.length);A2=new Ac.Point2D();A0=new Ac.Point2D();A2.init({Point2D:A7});A0.init({Point2D:A9});if((this.IsVerticalAxis()&&this.IsLeftDirection())||(!this.IsVerticalAxis()&&this.IsDownDirection())){A2.init({Point2D:A9});A0.init({Point2D:A7});}A0=A0.Shifted(this.mDepthOffset);A4=new Ac.Point2D();A4.Reset(0,0);if(this.IsVerticalAxis()){A4.x=this.IsLeftDirection()?A5:-A5;}else{A4.y=this.IsDownDirection()?-A5:A5;}switch(A3){case Au.DssGraphGridRegular:Az.push(A2);Az.push(A2.Shifted(this.mDepthOffset));Az.push(A0);break;case Au.DssGraphGridBoth:if(this.hasDepthAxisLine(A8)||this.HasLabelsOnBothSides()){Az.push(A2.Shifted(A4));}Az.push(A2);Az.push(A2.Shifted(this.mDepthOffset));Az.push(A0);if(!this.hasDepthAxisLine(A8)||this.HasLabelsOnBothSides()){Az.push(A0.Shifted(-A4));}break;case Au.DssGraphGridInnerTicks:if(this.hasDepthAxisLine(A8)){Az.push(A2);Az.push(A2.Shifted(A1));}else{Az.push(A0);Az.push(A0.Shifted(A4));}break;case Au.DssGraphGridOuterTicks:if(this.hasDepthAxisLine(A8)){Az.push(A2.Shifted(A4));Az.push(A2);}else{Az.push(A0);Az.push(A0.Shifted(-A4));}break;case Au.DssGraphGridSpanningTicks:if(this.hasDepthAxisLine(A8)){Az.push(A2.Shifted(A4));Az.push(A2);Az.push(A2.Shifted(A1));}else{Az.push(A0.Shifted(A4));Az.push(A0.Shifted(-A4));}break;}}mstrmojo.chart.Axis=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.Axis",mDeviceDataArea:null,mTickLength:-1,mUseDepth:false,mDepth:0,mDepthDirection:0,mDepthOffset:null,mManagerGraphObjectList:null,mpMajorGridSet:null,mpMinorGridSet:null,mpAxisLabelSet:null,mpAxisLineSet:null,mIsUniformAxis:false,maxLabelLength:-1,hasLabelCreated:false,hasMajorTickCreated:false,hasMinorTickCreated:false,mLabelInterval:0,resizeAction:-1,mLabelList:null,restrictWidth:null,restrictHeight:null,mIsShown:true,mIntegrity:15,init:function AI(Az){this._super(Az);var A0=this.mChartContextPtr;this.mLabelList=[];if(this.mUseDepth){this.mDepthOffset=new Ac.Point2D();}this.mManagerGraphObjectList=[];if(!!Az.IsUA){this.mIsUniformAxis=true;}if(this.mIsUniformAxis){this.restrictHeight=this.restrictWidth=-1;}this.mAxisInfo=new Ac.GraphAxisGeneral(Az);this.mMajorGrid={mShowGridLines:true,mGridStyle:Au.DssGraphGridRegular,mUseManualGrid:false,mGridInterval:0};this.mMinorGrid={mShowGridLines:false,mGridStyle:Au.DssGraphGridNone,mUseManualGrid:false,mGridInterval:0};switch(Az.AxisDirection){case Ag.AD_X:this.mTickLength=A0.mGraphHeight/D+1;break;case Ag.AD_Y:this.mTickLength=A0.mGraphWidth/D+1;break;case Ag.AD_Z:this.mTickLength=2;break;}this.mTickLength=Math.max(4,this.mTickLength);},SetDeviceDataArea:function I(Az){if(this.mDeviceDataArea===null){this.mDeviceDataArea=new Ac.Rect2D({Rect2D:Az});}else{this.mDeviceDataArea.ResetRect(Az);}},IsReverseOrder:function W(){return this.mAxisInfo.mAxisDrawInReverse;},SetIntegrity:function q(Az){this.mIntegrity=Az;if((Az&g)===0){this.mAxisInfo.mShowAxisLine=false;this.mMajorGrid.mGridStyle=Au.DssGraphGridNone;}if((Az&AD)===0){this.mMajorGrid.mShowGridLines=false;this.mMajorGrid.mGridStyle=Au.DssGraphGridNone;}if((Az&v)===0){this.mMinorGrid.mShowGridLines=false;this.mMinorGrid.mGridStyle=Au.DssGraphGridNone;}if((Az&b)===0){this.mAxisInfo.mShowAxisLabels=false;}},HasLabelsOnBothSides:function AY(){return(this.mAxisInfo.mAxisLabelsLocation===Z.ALL_BOTTOM_TOP||this.mAxisInfo.mAxisLabelsLocation===Z.ALL_LEFT_RIGHT)&&!(this.mChartContextPtr.mIsTimeSeriesChart);},IsVerticalAxis:function J(){return this.mAxisInfo.mAxisDirection===Ag.AD_Y;},IsLeftDirection:function Al(){return this.mDepthDirection>90&&this.mDepthDirection<270;},IsDownDirection:function x(){return this.mDepthDirection>180;},HasOuterTicks:function AR(Az){return Az===Au.DssGraphGridOuterTicks||Az===Au.DssGraphGridBoth||Az===Au.DssGraphGridSpanningTicks;},HasTwoGridLineParts:function AG(Az){return this.HasLabelsOnBothSides()&&(Az===Au.DssGraphGridInnerTicks||Az===Au.DssGraphGridOuterTicks||Az===Au.DssGraphGridSpanningTicks);},IsLogarithmic:function Am(){return false;},getIndex:function Q(){switch(this.mTripleId.mObjectId){case At.DssGraphO1Body:return F;case At.DssGraphO2Body:return E;case At.DssGraphX1Body:return AE;case At.DssGraphY1Body:return p;case At.DssGraphY2Body:return o;case At.DssGraphY3Body:return n;case At.DssGraphY4Body:return l;case At.DssGraphZBody:return s;case At.DssGraphX2Body:return AC;default:return 0;}},GetInterlacedGridId:function Ay(){return Ah.DssGraphO1Interlaced+this.getIndex();},ReserveTitleArea:function d(A2){var A0,Az,A4,A1,A3;if(!this.mAxisInfo.mShowAxisTitle){return ;}A0=this.getIndex();Az=Ac.gAxisObjects[A0].mTitleId;if(Az.mObjectId===Ac.gNullObjectId){return ;}A4=new Ac.TripleId({ObjectId:Az.mObjectId,SeriesId:Ac.gNullSeriesId,GroupId:AF});A1=new Ac.Rect2D();this.InitObjectSet(A4,V.GOT_AXIS_TITLE);A3=new Ac.TextObject({TripleId:A4,GraphObjectManager:this,rect:A1,ParentObject:this.mpAxisTitleSet});this.mpAxisTitleSet.AddGraphObject(A3);A3.SetText(this.mAxisTitle);this.mGraphObjectList.push(A3);this.ReserveTitle(A2,false);},ReserveTitle:function AW(A4,A1){var A3,A0,Az,A2;if(!this.mAxisInfo.mShowAxisTitle){return ;}A3=this.mGraphObjectList[0];A0=A3.GetBoundingRect();Az=A1?-1:1;A2=((this.IsVerticalAxis()?A0.width:A0.height)+Ak)*Az;switch(this.mAxisInfo.mAxisLabelsLocation){case Z.ALL_BOTTOM:case Z.ALL_BOTTOM_TOP:A4.height-=A2;break;case Z.ALL_TOP:if(this.mTripleId.mObjectId===At.DssGraphO1Body){A4.height-=A2;}else{A4.y+=A2;A4.height-=A2;}break;case Z.ALL_LEFT:case Z.ALL_LEFT_RIGHT:A4.x+=A2;A4.width-=A2;break;case Z.ALL_RIGHT:if(this.mTripleId.mObjectId===At.DssGraphO1Body){A4.x+=A2;A4.width-=A2;}else{A4.width-=A2;}break;}},UpdateTitleLocation:function Ao(A4){var A3,A1,A0,Az,A2,A5;if(!this.mAxisInfo.mShowAxisTitle){return ;}A3=this.mGraphObjectList[0];if(this.mChartContextPtr.mManualLayoutMode&&!this.mChartContextPtr.mRecalculateFrame){this.MoveTitleForManual(A3);return ;}A1=A3.GetBoundingRect();A0=this.GetLabelOffset(this.mAxisInfo.mAxisLabelsLocation);if(this.IsVerticalAxis()){Az=A4.y+A4.height/2+A0.y;}else{Az=A4.x+A4.width/2+A0.x;}A2=(this.IsVerticalAxis()?A1.width:A1.height)/2+Ak;switch(this.mAxisInfo.mAxisLabelsLocation){case Z.ALL_BOTTOM:case Z.ALL_BOTTOM_TOP:A3.MoveTo(Az,A4.y+A4.height+A2,An.CENTER);break;case Z.ALL_TOP:if(this.mTripleId.mObjectId===At.DssGraphO1Body){A3.MoveTo(Az,A4.y+A4.height+A2,An.CENTER);}else{A3.MoveTo(Az,A4.y-A2,An.CENTER);}break;case Z.ALL_LEFT:case Z.ALL_LEFT_RIGHT:A3.MoveTo(A4.x-A2,Az,An.CENTER);break;case Z.ALL_RIGHT:if(this.mTripleId.mObjectId===At.DssGraphO1Body){A3.MoveTo(A4.x-A2,Az,An.CENTER);}else{A3.MoveTo(A4.x+A4.width+A2,Az,An.CENTER);}break;}A5=A3.mTripleId;A1=A3.GetBoundingRectNoRotation();this.mChartContextPtr.PutLocation(this.getAxisTitleLocationId(A5.mObjectId),A1);},generateAxisLine:function Av(Az){this.CreateAxisLine();return this.MoveGraphObjectList(Az);},CreateAxisLine:function j(){var Az;if(this.mUseDepth){B.call(this);return ;}if(!this.mAxisInfo.mShowAxisLine){return ;}Az=new Ac.TripleId({ObjectId:this.mTripleId.mObjectId});this.InitObjectSet(Az,V.GOT_AXIS_LINE);switch(this.mAxisInfo.mAxisLabelsLocation){case Z.ALL_BOTTOM_TOP:Ax.call(this,Z.ALL_BOTTOM);Ax.call(this,Z.ALL_TOP);break;case Z.ALL_LEFT_RIGHT:Ax.call(this,Z.ALL_LEFT);Ax.call(this,Z.ALL_RIGHT);break;default:Ax.call(this,this.mAxisInfo.mAxisLabelsLocation);break;}},ReserveDepthAxisLine:function Aj(A2,A0,Az){var A1;if(!this.mUseDepth){return ;}A1=new Ac.Point2D({Point2D:this.mDepthOffset});A1.x=Math.abs(A1.x);A1.y=Math.abs(A1.y);if(A0){A1.x=-A1.x;A1.y=-A1.y;}if(this.mAxisInfo.mAxisDirection===Ag.AD_X||Az){if(this.mDepthDirection<180){A2.y+=A1.y;A2.height-=A1.y;}else{A2.height-=A1.y;}}else{if(this.mAxisInfo.mAxisDirection===Ag.AD_Y||Az){if(this.mDepthDirection<90||this.mDepthDirection>270){A2.width-=A1.x;}else{A2.x+=A1.x;A2.width-=A1.x;}}}},TrimMarginsForDepthAxis:function AO(A2,A3){var A1,Az,A0;A1=A2;Az=A3;if(!this.mUseDepth){A0={HighMargin:Az,LowMargin:A1};return A0;}if(this.IsVerticalAxis()){if(this.mDepthDirection<180){Az+=this.mDepthOffset.y;}else{A1-=this.mDepthOffset.y;}}else{if(this.mDepthDirection<90||this.mDepthDirection>270){Az-=this.mDepthOffset.x;}else{A1+=this.mDepthOffset.x;}}Az=(Az>=0)?Az:0;A1=(A1>=0)?A1:0;A0={HighMargin:Az,LowMargin:A1};return A0;},getDepthMargin:function w(A2,A3){if(!this.mUseDepth){return null;}var A0=this.mDepthOffset,A1=A2,Az=A3;switch(this.mAxisInfo.mAxisLabelsLocation){case Z.ALL_LEFT:case Z.ALL_RIGHT:if(this.hasDepthAxisLine(this.mAxisInfo.mAxisLabelsLocation)){if(A0.y>0){A1=A0.y;}else{Az=-A0.y;}}else{if(A0.y>0){Az=A0.y;}else{A1=-A0.y;}}break;case Z.ALL_BOTTOM:case Z.ALL_TOP:if(this.hasDepthAxisLine(this.mAxisInfo.mAxisLabelsLocation)){if(A0.x>0){Az=A0.x;}else{A1=-A0.x;}}else{if(A0.x>0){A1=A0.x;}else{Az=-A0.x;}}break;case Z.ALL_LEFT_RIGHT:case Z.ALL_BOTTOM_TOP:break;default:return null;}return{highMargin:Az,lowMargin:A1};},GetLabelOffset:function S(Az,A0){if(!A0){A0=new Ac.Point2D();}A0.Reset(0,0);if((!this.mUseDepth)||this.hasDepthAxisLine(Az)){return A0;}A0.ResetPoint(this.mDepthOffset);return A0;},GenerateGridLinesEx:function Ad(){this.GenerateGridLines(this.mDeviceDataArea,0,this.mGraphObjectList);},GenerateGridLines:function c(A0,A1,Az){if((this.mMajorGrid.mShowGridLines&&this.mMajorGrid.mGridStyle!==Au.DssGraphGridNone)||(this.mMinorGrid.mShowGridLines&&this.mMinorGrid.mGridStyle!==Au.DssGraphGridNone)){T.call(this,A0,Az,true);}},GenerateInterlacedGrids:function a(A0,A1,Az){if(this.mAxisInfo.mUseInterlacedGrids){T.call(this,A0,Az,false);}},MoveGraphObjectList:function C(A0){var Az,A1;Az=this.mManagerGraphObjectList.length;for(A1=0;A1<Az;++A1){A0.push(this.mManagerGraphObjectList[A1]);}this.mManagerGraphObjectList.splice(0,this.mManagerGraphObjectList.length);},GenerateOneLineObject:function Ar(A2,A1,A0){var Az;Az=new Ac.PolyLineObject({TripleId:A2,GraphObjectManager:this,PolyLine:A1,GraphCollectionObject:A0});A0.AddGraphObject(Az);this.mManagerGraphObjectList.push(Az);},SetDepthAndDirection:function Aa(A1,Az){var A0;this.mUseDepth=true;this.mDepth=A1;this.mDepthDirection=Az;A0=this.mChartContextPtr.CalculateDepthOffset(this.mDepth,this.mDepthDirection);this.mDepthOffset.x=A0.OffsetX;this.mDepthOffset.y=A0.OffsetY;},getAxisTitleLocationId:function Ab(Az){switch(Az){case AM.DssGraphTitleCategory:return As.DssGraphTitleXLocation;case AM.DssGraphTitleY1:return As.DssGraphTitleY1Location;case AM.DssGraphTitleY2:return As.DssGraphTitleY2Location;case AM.DssGraph3DRowTitle:return As.DssGraph3DRowTitleLocationNEW;case AM.DssGraph3DColTitle:return As.DssGraph3DColTitleLocationNEW;case AM.DssGraph3DLYTitle:return As.DssGraph3DLYTitleLocation;case AM.DssGraph3DRYTitle:return As.DssGraph3DRYTitleLocation;default:return 0;}},MoveLabel:function AU(A5,Az,A1,A7){var A4,A2,A9,A3,A0;if(A7===undefined){A7=Ac.Axis.gLabelMargin;}A4=A5.GetTransformedRect(true);A9=A5.mFormatFontPtr.mFontRotation;if(X===null){X=new Ac.Point2D();}else{X.Reset(0,0);}switch(A9){case H.Rotate45:case H.Rotate315:case H.Normal:if(A9===H.Rotate45||A9===H.Rotate315){A2=(A9===H.Rotate45)?1:-1;A1.Reset((A1.x-A2*A1.y)*Math.SQRT1_2,(A2*A1.x+A1.y)*Math.SQRT1_2);Az.Reset((Az.x-A2*Az.y)*Math.SQRT1_2,(A2*Az.x+Az.y)*Math.SQRT1_2);}X.Reset(A4.width/2,A4.height/2);break;case H.Rotate90:X.Reset(A4.width/2,(A4.height+1)/2);break;case H.Rotate180:X.Reset((A4.width+1)/2,(A4.height+1)/2);break;case H.Rotate270:X.Reset((A4.width+1)/2,A4.height/2);break;case H.Custom:break;default:}A3=0.1;var A8=0,A6=0;if(Math.abs(A1.x)<A3||Math.abs(A1.y)<A3){if(Math.abs(A1.x)<A3&&A1.y<0){X.y=A4.height-X.y;}else{if(A1.x<0&&Math.abs(A1.y)<A3){X.x=A4.width-X.x;}}A0=X.x*Math.abs(A1.x)+X.y*Math.abs(A1.y)+A7;A8=Az.x+A0*A1.x;A6=Az.y+A0*A1.y;}else{if(A1.x>0&&A1.y<0){X.y=-(A4.height-X.y);}else{if(A1.x<0&&A1.x>0){X.x=-(A4.width-X.x);}else{if(A1.x<0&&A1.y<0){X.Reset(-(A4.width-X.x),-(A4.height-X.y));}}}A8=Az.x+A7*A1.x+X.x;A6=Az.y+A7*A1.y+X.y;}if(A9===H.Rotate45||A9===H.Rotate315){A2=(A9===H.Rotate45)?-1:1;A8=(A8-A2*A6)*Math.SQRT1_2;A6=(A2*A8+A6)*Math.SQRT1_2;}A5.MoveTo(Math.floor(A8+(A8<0?-0.5:0.5)),Math.floor(A6+(A6<0?-0.5:0.5)),An.CENTER);},MoveTitleForManual:function AK(A1){if(!this.mChartContextPtr.mManualLayoutMode){return ;}var A0=A1.mTripleId,Az=this.mChartContextPtr.GetLocationRect(this.getAxisTitleLocationId(A0.mObjectId));if(Az){A1.SetRect(Az);A1.CalculateDeviceRect();}else{A1.mIsShown=false;}},InitObjectSet:function AL(A2,A1){var A0,Az=y.CT_LINE;switch(A1){case V.GOT_AXIS_TITLE:A0=this.mpAxisTitleSet;Az=y.CT_TEXT;break;case V.GOT_AXIS_LABEL:A0=this.mpAxisLabelSet;Az=y.CT_TEXT;break;case V.GOT_AXIS_LINE:A0=this.mpAxisLineSet;break;case V.GOT_MAJOR_GRID:A0=this.mpMajorGridSet;break;case V.GOT_MINOR_GRID:A0=this.mpMinorGridSet;break;case V.GOT_INTERLACED_GRID:A0=this.mpInterlacedGridSet;Az=y.CT_GENERAL_SHAPE;break;default:}if(A0!==null&&A0!==undefined){return ;}if(this.mTripleId.mSeriesId>0){A0=this.GetGraphObject(A2,false);}if(!A0){A0=new Ac.GraphCollectionObject({TripleId:A2,GraphObjectManager:this,CollectionType:Az});this.AddToMap(A0);}switch(A1){case V.GOT_AXIS_TITLE:this.mpAxisTitleSet=A0;break;case V.GOT_AXIS_LABEL:this.mpAxisLabelSet=A0;break;case V.GOT_AXIS_LINE:this.mpAxisLineSet=A0;break;case V.GOT_MAJOR_GRID:this.mpMajorGridSet=A0;break;case V.GOT_MINOR_GRID:this.mpMinorGridSet=A0;break;case V.GOT_INTERLACED_GRID:this.mpInterlacedGridSet=A0;break;default:}},LoadProperties:function AQ(){var A2,A5,A4=this.mChartContextPtr,A3,A1,Az,A0;if(A4.mIsGraphMatrix){A5=this.mTripleId;if(this.hasOwnProperty("mTicks")){this.mMajorGrid.mShowGridLines=true;}else{this.mMajorGrid.mShowGridLines=false;this.mMajorGrid.mGridStyle=Au.DssGraphGridNone;}if(this.mMajorGrid.mShowGridLines){A2=A4.GetProperty(As.DssGraphStyleMajor,A5);if(this.mMajorGrid.mShowGridLines&&A2){this.mMajorGrid.mGridStyle=A2;}}return ;}A5=new Ac.TripleId({ObjectId:this.mTripleId.mObjectId});A2=A4.GetProperty(As.DssGraphShow2DAxisLabels,A5);if(A2){this.mAxisInfo.mShowAxisLabels=A2!==false;}if(A4.GetGraphMajorType()===AZ.GMT_GAUGE){return ;}A3=0;switch(this.mTripleId.mObjectId){case At.DssGraphO1Body:A3=As.DssGraphShow2DXTitle;break;case At.DssGraphO2Body:A3=As.DssGraphShowTitleSeries;break;case At.DssGraphX1Body:A3=As.DssGraphShow2DXTitle;break;case At.DssGraphY1Body:A3=As.DssGraphShow2DY1Title;break;case At.DssGraphY2Body:case At.DssGraphX2Body:A3=As.DssGraphShow2DY2Title;break;case At.DssGraphY3Body:case At.DssGraphY4Body:break;case At.DssGraphZBody:A3=As.DssGraphShow3DColTitle;break;default:}A2=A4.GetProperty(A3,m);if(A3!==0&&A2){this.mAxisInfo.mShowAxisTitle=A2!==false;}if(A4.isUADataAreaOutput()){this.mAxisInfo.mShowAxisLabels=false;this.mAxisInfo.mShowAxisTitle=false;}A1=this.mAxisInfo.mShowAxisTitle;if(A1){A0=Ac.gAxisObjects[this.getIndex()].mTitleId;A2=A4.GetProperty(As.DssGraphTextContent,A0);if(A0.mObjectId!==AA&&A2){this.mAxisTitle=A2;}}A2=A4.GetProperty(Af.DssGraphUseInterlacedGrid,A5);if(A2){this.mAxisInfo.mUseInterlacedGrids=A2!==false;}A2=A4.GetProperty(As.DssGraphShow2DAxisMajor,A5);if(A2){this.mMajorGrid.mShowGridLines=A2!==false;}A2=A4.GetProperty(As.DssGraphStyleMajor,A5);if(this.mMajorGrid.mShowGridLines&&A2){this.mMajorGrid.mGridStyle=A2;}A2=A4.GetProperty(As.DssGraphShow2DAxisMinor,A5);if(A2){this.mMinorGrid.mShowGridLines=A2!==false;}A2=A4.GetProperty(As.DssGraphStyleMinor,A5);if(this.mMinorGrid.mShowGridLines&&A2){this.mMinorGrid.mGridStyle=A2;}A2=A4.GetProperty(As.DssGraphManualMinor,A5);if(A2){this.mMinorGrid.mUseManualGrid=A2!==false;}A2=A4.GetProperty(As.DssGraphCountMinor,A5);if(A2){this.mMinorGrid.mGridInterval=A2;}A2=A4.GetProperty(As.DssGraphShow2DAxisLine,A5);if(A2){this.mAxisInfo.mShowAxisLine=A2;}switch(A4.GetGraphMajorType()){case AZ.GMT_POLAR:case AZ.GMT_RADAR:return ;default:break;}A2=A4.GetProperty(As.DssGraph2DSide,A5);if(A2){if(A2===O.DssGraphAxisLabelLowSide){this.mAxisInfo.mAxisLabelsLocation=this.IsVerticalAxis()?Z.ALL_LEFT:Z.ALL_BOTTOM;}else{if(A2===O.DssGraphAxisLabelHighSide){this.mAxisInfo.mAxisLabelsLocation=this.IsVerticalAxis()?Z.ALL_RIGHT:Z.ALL_TOP;}else{if(A2===O.DssGraphAxisLabelBothSides){this.mAxisInfo.mAxisLabelsLocation=this.IsVerticalAxis()?Z.ALL_LEFT_RIGHT:Z.ALL_BOTTOM_TOP;}}}}},generateGridsByArea:function r(){},GetOneGridLine:function Y(A0,A3,A2,Az,A1,A4){if(this.mUseDepth){e.call(this,A0,A3,A2,Az,A1,A4);return ;}A4.splice(0,A4.length);M=new Ac.Point2D({Point2D:Az});L=new Ac.Point2D({Point2D:A1});A4.push(M);A4.push(L);if(AX===null){AX=new Ac.Point2D();}else{AX.Reset(0,0);}if(u===null){u=new Ac.Point2D();}else{u.Reset(0,0);}if(this.IsVerticalAxis()){if(A0===Z.ALL_RIGHT){u.x=A2;}else{AX.x=-A2;}}else{if(A0===Z.ALL_TOP){u.y=-A2;}else{AX.y=A2;}}switch(A3){case Au.DssGraphGridRegular:break;case Au.DssGraphGridBoth:A4[0].x+=AX.x;A4[0].y+=AX.y;if(this.HasLabelsOnBothSides()){A4[1].x-=AX.x;A4[1].y-=AX.y;}else{A4[1].x+=u.x;A4[1].y+=u.y;}break;case Au.DssGraphGridInnerTicks:if(A0!==Z.ALL_RIGHT&&A0!==Z.ALL_TOP){A4[1].x=A4[0].x-AX.x;A4[1].y=A4[0].y-AX.y;}else{A4[0].x=A4[1].x-u.x;A4[0].y=A4[1].y-u.y;}break;case Au.DssGraphGridOuterTicks:if(A0!==Z.ALL_RIGHT&&A0!==Z.ALL_TOP){A4[1].x=A4[0].x+AX.x;A4[1].y=A4[0].y+AX.y;}else{A4[0].x=A4[1].x+u.x;A4[0].y=A4[1].y+u.y;}break;case Au.DssGraphGridSpanningTicks:if(A0!==Z.ALL_RIGHT&&A0!==Z.ALL_TOP){A4[1].x=A4[0].x-AX.x;A4[1].y=A4[0].y-AX.y;A4[0].x+=AX.x;A4[0].y+=AX.y;}else{A4[0].x=A4[1].x-u.x;A4[0].y=A4[1].y-u.y;A4[1].x+=u.x;A4[1].y+=u.y;}break;default:}},hasDepthAxisLine:function f(Az){if(!this.mUseDepth){return false;}switch(Az){case Z.ALL_LEFT:case Z.ALL_LEFT_RIGHT:return(this.mDepthDirection<90||this.mDepthDirection>270);case Z.ALL_RIGHT:return(this.mDepthDirection>90&&this.mDepthDirection<270);case Z.ALL_BOTTOM:case Z.ALL_BOTTOM_TOP:return(this.mDepthDirection<180);case Z.ALL_TOP:return(this.mDepthDirection>180);default:return false;}},TrimAxisPadding:function P(){},resetRestrictSpace:function Aq(Az){if(Az!==undefined){this.restrictWidth=Az.width;this.restrictHeight=Az.height;}else{this.restrictWidth=this.restrictHeight=-1;}},GetAxisLabelRotation:function Ai(){},isBaseLineQualified:function G(Az){return false;},liftedFromZero:function Aw(){return false;},SetTrimWithPadding:function z(){},GetPositionAtTick:function i(){},getLabelRotation:function AN(){if(this.mpAxisLabelSet){var Az=this.mpAxisLabelSet.GetFormatFont();return Az.mFontRotation;}return -1;},GetOuterTickLength:function k(){if(this.HasOuterTicks(this.mMajorGrid.mGridStyle)){return this.mTickLength;}if(this.HasOuterTicks(this.mMinorGrid.mGridStyle)){return this.mTickLength;}return 0;},updateMaxLabelLength:function AS(A0,Az){if(A0>0){if(Az===undefined){Az=false;}if(Az){A0=this.calculateMaxAxisSpace(A0);}}this.maxLabelLength=A0;},calculateMaxAxisSpace:function R(A0){var Az=this.mChartContextPtr.GetGraphMatrixContext();A0-=(this.GetOuterTickLength()+Az.getPadding(AV.kLabelToChart));if(this instanceof mstrmojo.chart.CategoryAxis){A0-=Az.getPadding(AV.kCategoricalLabelToTick);}else{A0-=Az.getPadding(AV.kNumericLabelToTick);}return Math.max(A0,0);},getNextStatus:function Ae(A0){var A2=-1,A3=1,A7=!this.IsVerticalAxis(),A6=0,A5=1,A4=2,A1=this.getStatus(),Az=this.mLabelInterval;if(A7){if(A0===A6){if(Az>1){A1=A2;}}else{if(A0===A4){if(Az>=2&&A1!==A3){A1=A2;}}}}else{if(A0===A5){if(Az!==1){A1=A2;}}else{if(Az<2){A1=A2;}}}return A1;},clearTickObjects:function AB(A5,A3){var A2,A0=this.mChartContextPtr.getUtiliy().tripleId,A1=this.mGraphObjectList,Az=A1.length,A4=A3?this.mpMajorGridSet:this.mpMinorGridSet;if(A4){A4.ClearCollection();}for(A2=Az-1;A2>=0;A2--){if(A0.equal(A1[A2].mTripleId,A5)){A1.splice(A2,1);}}},restoreLabels:function K(A0){var A2;if(this.hasLabelCreated){var A1,Az=this.mpAxisLabelSet.GetCollectionSize(),A4=Az<=0,A3;if(Az===0){Az=this.mLabelList.length;}for(A2=0;A2<Az;++A2){if(A4){A1=this.mLabelList[A2];}else{A1=this.mpAxisLabelSet.GetObjectByIndex(A2);}if(!!A1===false){continue;}A3={Stringent:true,Restroke:true,TextWidthLimit:this.maxLabelLength,DivideByWord:true};if(this instanceof mstrmojo.chart.CategoryAxis&&this.mChartContextPtr.mIsGraphMatrix){if(this.mWordWrap===false){A3.LineCount=1;}else{A3.LineCount=2;}}A1.Restore(A3);if(A0){A1.mIsShown=true;}}}},checkShownLabelCount:function t(A3){var A4=this.mLabelList,Az=A4.length,A0=0,A5=-2,A1=-1;for(var A2=0;A2<Az;A2++){if(A4[A2]&&A4[A2].mIsShown){A0++;}if(A3!==undefined&&A0>=A3){return A5;}}if(A3!==undefined){return A1;}return A0;},checkCondense:function A(){return false;},getCondenseStatus:function U(){return undefined;},getUniformAxisLabelsInfo:function h(A2){var A1=0,A3=[],Az=this.mLabelList.length;while(A1<Az){var A0=this.mLabelList[A1];if(A0.mIsShown){if(A2){if(A2.CheckTruncated){if(A0.mIsTruncated===false){continue;}}}A3.push({Text:A0.mText,Rect:A0.GetBoundingRect()});}++A1;}return A3;}});Ac.Axis.gLabelMargin=4;}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart","TripleId","FormatFill","FormatLine","PieSliceObject","ChartConstants");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMatrixPiePlotType","EnumGraphMatrixMarkerTypeInChart");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphObject","EnumVariantBool","EnumDSSExtraGraphProperty","EnumShapeType","EnumDSSGraphNumberFormatType");var d=mstrmojo.chart,c=mstrmojo.VisUtility,W=d.ChartConstants,Y=d.enums,S=Y.EnumGraphMatrixPiePlotType,J=Y.EnumGraphMatrixMarkerTypeInChart,T=d.model,h=T.enums,N=h.EnumDSSGraphObject,E=h.EnumShapeType,L=h.EnumDSSGraphMarkerShape,g=0,P=1,I=1,A=2,X=3;var Q=new d.TripleId(),V=new d.ChartAdvFormat();var O=0.1;function f(){var j=this.mChartContextPtr,i=j.GetGraphMatrixContext();this.mMinSizeByTotal=0;if(!this.mHasSizeBy){return this.mMinSizeByTotal;}this.mMinSizeByTotal=i.mMinSizeVal;return this.mMinSizeByTotal;}function e(){var j=this.mChartContextPtr,i=j.GetGraphMatrixContext();if(!this.mHasSizeBy){this.mMaxSizeByTotal=1;return this.mMaxSizeByTotal;}this.mMaxSizeByTotal=i.mMaxSizeVal;return this.mMaxSizeByTotal;}function F(){var j=this.mChartContextPtr,i=j.GetGraphMatrixContext();e.call(this);f.call(this);if(i.mMarkerShape===L.DssGraphMarkerShape2DPie){this.mPieOption.mLayout=g;}else{this.mPieOption.mLayout=P;}}function a(m,n,p,k){var j=this.mChartContextPtr.GetGraphMatrixContext(),l,o,i=2;if(this.mHasSizeBy){i=j.getSizeByPieRadius(this.mDatasetPtr,m,n,this.mMaxSizeByTotal,this.mMinSizeByTotal,this.mPieOption.mMaxRadius);if(i>=0&&i<1){i=1;}}else{i=this.mPieOption.mMaxRadius;}l=1;if(this.mPlotType===S.GMPPT_VALUE){o=k||this.mDatasetPtr.GetPieCountAtOneDataPoint(m,n);l=(p+1)/o;i=l*i;if(o>1){i-=1;}}return i;}function D(j,k,m){var n,l,q,p,o=this.mDatasetPtr,r=this.mPieOption,t={};t.Angles=[];t.ValidSeriesNumber=0;t.ValidSeriesIndex=[];t.IsValid=false;n=360-r.mPieRotation;t.Angles.push(n);t.ValidSeriesIndex.splice(0,t.ValidSeriesIndex.length);l=this.mDatasetPtr.GetPieSliceCount(j,k,0);q=0;for(p=0;p<l;++p){var s=o.GetPieSlicePercentage(j,k,m,p);if(s!==null){if(s<=1||s>=-1){++t.ValidSeriesNumber;t.ValidSeriesIndex.push(p);}q+=s;if(p===(l-1)){n=720-r.mPieRotation;}else{n=Math.round(Math.abs(360*q)*10)/10+O+(360-r.mPieRotation);}}else{if(p===(l-1)){n=720-r.mPieRotation;}}if(n>720-r.mPieRotation){n=720-r.mPieRotation;}t.Angles.push(n);}t.IsValid=true;return t;}function R(AA,u){var m=this.mChartContextPtr,AB=m.GetGraphMatrixContext(),y="",q,v=this.mDatasetPtr,z=new d.TripleId({ObjectId:N.DssGraphDataText,SeriesId:AA.mSeriesId,GroupId:AA.mGroupId}),t,x,i,w=v.dataLabelStyle,j,p=u.GetSliceInfo(),l,k,AC,s,r,n=false,o=5;if(v.showPieSliceDatalabel(AA.mSeriesId,AA.mGroupId,AA.angleByIndex,AA.sliceById)===false){return null;}z.angleByIndex=AA.angleByIndex;z.sliceById=AA.sliceById;if(m.mIsGraphMatrix){o=AB.getPadding(W.kDataLabel);}switch(w){case A:q=v.GetPieSliceData(AA.mSeriesId,AA.mGroupId,AA.angleByIndex,AA.sliceById);if(q===undefined||q===null){return null;}V.restore();v.getGridDataFormatForPie(V,AA);t=new d.NumberObject({TripleId:z,GraphObjectManager:this.mpManager,Number:q,NumberFormat:V,GraphCollectionObject:null,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0});if(t!==undefined&&t!==null){y=t.mText;}i=t;break;case X:x=v.GetTextLabel(AA.mSeriesId,AA.mGroupId,AA.angleByIndex,AA.sliceById);y=x;i=new d.TextObject({TripleId:z,GraphObjectManager:this.mpManager,GraphCollectionObject:null});break;}if(i!==undefined&&i!==null&&y!==""){i.SetText(y);j=i.GetBoundingRect();}else{return null;}l=u.GetMiddleAngleRadian();AC=(p.mRadius+o)*Math.cos(l);s=(p.mRadius+o)*Math.sin(l);k=u.GetMiddleAngleQuadrant();if(k===2||k===3){n=true;}r=j.height*0.5*Math.sin(l);if(n){i.MoveToCenter(p.mCenter.x+AC-(j.width+1)/2,p.mCenter.y+s+r);}else{i.MoveToCenter(p.mCenter.x+AC+(j.width+1)/2,p.mCenter.y+s+r);}return i;}function C(AE,t,k,AC,w,AB,y,o,l){var q={mObjectId:N.DssGraphPieSlice,mSeriesId:AE,mGroupId:t},n=this.mChartContextPtr,AA=n.getUtiliy().tripleId,z=this.mPieOption,u=n.mIsGraphMatrix,s,p,j,r=(this.mPlotType===S.GMPPT_VALUE),m=z.mLayout,i,x;var AD=l||this.mDatasetPtr.GetPieCountAtOneDataPoint(iSeriesId,t);if(y-AB<=O){return null;}AA.reset(Q,q.mObjectId,q.mSeriesId,q.mGroupId,k,AC);if(n.checkColorByAndSizeByValue(Q,this.mDatasetPtr,this.mHasColorBy,false)===false){return null;}if(y-AB===360){o=true;}s=((m===P)||(r&&k>0));if(s){if(m===P){if(r&&k>0){z.mRingFactor=(1-1/(k+1)*0.3)*100;}else{z.mRingFactor=70;}}else{z.mRingFactor=100/(k+1);}}p=a.call(this,AE,t,k);if(p<=0){return null;}j=new d.PieSliceObject({TripleId:q,AngleIndex:k,SliceId:AC,GraphObjectManager:this.mpManager,Explode:0,StartAngle:AB,EndAngle:y,RingPieFactor:z.mRingFactor,IsRing:s,Is2DCircular:true,Scale:z.mScale,Center:w,Radius:p,MaxRadius:z.mMaxRadius,Depth:z.mDepthInChart,OneSeries:o,ParentObject:null,IsShown:true,Shape:E._PIESLICE,hasFill:true});if(u){var v=this.mDatasetPtr.showPieDatalabels();if(v&&!(r&&k<AD-1)){i=R.call(this,q,j);if(i!==undefined&&i!==null){i.mIsShown=false;x=new d.GMDataLabelInfo({SeriesId:AE,GroupId:t,isValid:true,Label:i});x.HostMarkerPoint=w;x.HostMarkerBound=new d.Rect2D({x:w.x-p,y:w.y-p,height:2*p,width:2*p});this.dataLabels.push(x);}}}return j;}function H(){var k,i=this.mChartContextPtr.GetGraphMatrixContext(),j=J._PIE;if(this.mPlotType===S.GMPPT_CATEGORY){var l=this.mChartContextPtr.IsVertical(),m=this.mDatasetPtr.GetGroupCount();k=this.mDatasetPtr.GetPieCountAtOneDataPoint(0,0);return i.GetMaxMarkerSize(j,l,m*k);}else{if(this.mPlotType===S.GMPPT_VALUE){return i.GetMaxMarkerSize(j,true,1,this.mHasSizeBy);}}return 0;}function G(n){var v=this.mPieCircles,w=v.length,q,o,p=false,m=[],t=[],r=[],u,s,l,k;for(q=0;q<w;++q){p=false;k=v[q];for(o=0;o<m.length;++o){if(k.mCenter.x===m[o].x&&k.mCenter.y===m[o].y&&k.mRadius===t[o]){p=true;break;}}if(!p){u=k.mCenter;s=k.mRadius;t.push(s);m.push(u);r.push(k);}}n.CirclePieObjects=n.CirclePieObjects.concat(r);}mstrmojo.chart.PiePlotRenderer=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.PiePlotRenderer",mDatasetPtr:null,mChartContextPtr:null,mMaxSizeByTotal:0,mMinSizeByTotal:0,mHasColorBy:false,mHasSizeBy:false,mPlotType:S.GMPPT_CATEGORY,mPieOption:{mLayout:g,mRingFactor:70,mScale:1,mDepthInChart:0,mPieRotation:90},mpManager:null,dataLabels:[],shownDataLabels:[],mPieCircles:[],init:function Z(i){this._super(i);this.mpManager=i.GraphObjectManager;this.mChartContextPtr=i.ChartContext;this.mDatasetPtr=i.Dataset;this.mPieOption={mLayout:g,mRingFactor:70,mScale:1,mMaxRadius:10,mDepthInChart:0,mPieRotation:90};this.mPieOption.mLayout=i.Layout;this.mPlotType=i.PlotType;if(i.MaxRadius){this.mPieOption.mMaxRadius=i.MaxRadius;}else{this.mPieOption.mMaxRadius=H.call(this);}this.mHasColorBy=this.mChartContextPtr.GetGraphMatrixContext().mHasColorBy;this.mHasSizeBy=this.mChartContextPtr.GetGraphMatrixContext().mHasSizeBy;this.dataLabels=[];this.shownDataLabels=[];this.mPieCircles=[];if(i.shownDatalabels!==undefined&&i.shownDataLabels!==null){this.shownDataLabels=i.shownDataLabels;}F.call(this);},getShapeSizeAt:function b(l,j,i,k){if(k===undefined){k=true;}if(k){return this.mPieOption.mMaxRadius;}return a.call(this,l,j,i);},drawSinglePie:function B(l,s,k,t,j){var m=[],p,x,v,n,u,y,z,o={},w;if(t.x<0||t.y<0){return m;}n=a.call(this,l,s,k,j);o.mCenter=t;o.mRadius=n;u=D.call(this,l,s,k);if(!u.IsValid){return m;}x=u.ValidSeriesIndex;p=u.ValidSeriesNumber;v=u.Angles;var AA=j||this.mDatasetPtr.GetPieCountAtOneDataPoint(l,s),q=(this.mPlotType===S.GMPPT_VALUE),r=((this.mPieOption.mLayout===P)||(q&&k>0));if(p===0){c.visPrint("pieplotRenderer::Should not reach here");}else{if(p===1){y=C.call(this,l,s,k,x[0],t,360-this.mPieOption.mPieRotation,720-this.mPieOption.mPieRotation,true,AA);if(y){y.SetWhitenOuterBorder(q&&k<AA-1&&!r);m.push(y);}this.mPieCircles.push(o);}else{for(w=0;w<p;++w){z=x[w];y=C.call(this,l,s,k,z,t,v[z],v[z+1],false,AA);if(y){y.SetWhitenOuterBorder(q&&k<AA-1&&!r);m.push(y);}}this.mPieCircles.push(o);}}return m;},SetInfo:function U(j,i,k){this.mPieOption.mLayout=j;this.mPieOption.mMaxRadius=k;this.mPlotType=i;},enableDataLabel:function M(l,k){var m=this.mChartContextPtr,j=m.mIsGraphMatrix,i=m.GetGraphMatrixContext();if(j){G.call(this,l);l.PlaceDataLabels(this.dataLabels,k);}},GetPieRadius:function K(i,j,k){return a.call(this,i,j,k);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","RectangleObject","FormatFont");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumBoxStyle");var D=mstrmojo.chart,B=mstrmojo.chart.enums,C=B.EnumBoxStyle;function A(){var N=this.mChartContextPtr,L=this.mBoxStyle,M=this.mFormatFillPtr.mAlpha,I,K,H,J,G;I=4;K=new D.Rect2D({Rect2D:this.mRect});K.Implode(I,I);N.DrawRectangle(this.mRect,false);this.ApplyFillFormat();if(L===C.BS_BEVELED_FRAME||L===C.BS_REVERSE_BEVELED_FRAME){H=D.gBlack.ToInteger();J=Math.floor(M*(L===C.BS_BEVELED_FRAME?0.153:0.353));G=Math.floor(M*(L===C.BS_BEVELED_FRAME?0.353:0.153));N.ApplyBeveledFrameToRectangle(this.mRect,0,I,H,J,H,G);}else{if(L===C.BS_DOUBLE_LINE_FRAME){if(L===C.BS_DOUBLE_LINE_FRAME){N.DrawRectangle(K,true);this.ApplyLineFormat();}}}this.SetLineWidth();N.DrawRectangle(this.mRect,true);this.hSetBorderStyle(this.mRect);this.ApplyLineFormat();}mstrmojo.chart.FancyBoxObject=mstrmojo.declare(mstrmojo.chart.RectangleObject,null,{scriptClass:"mstrmojo.chart.FancyBoxObject",mBoxStyle:C.BS_NOFRAME,init:function F(G){this._super(G);this.mBoxStyle=G.BoxStyle||C.BS_NOFRAME;},Draw:function E(){if(this.mBoxStyle===C.BS_NOFRAME){this.mChartContextPtr.DrawRectangle(this.mRect,false);this.ApplyFillFormat();}else{A.call(this);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","Point2D","Rect2D","PolyLineObject","PolygonObject","FormatFont");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphFontRotation","EnumShapeType","EnumDSSGraphObject");mstrmojo.requiresCls("mstrmojo.chart.enums.EnumGraphMatrixDataLabelPosition");var $C=mstrmojo.chart,$M=mstrmojo.chart.model,$MODEL_ENUMS=$M.enums,$CHART_ENUMS=$C.enums,$FR=$MODEL_ENUMS.EnumDSSGraphFontRotation,$GO=$MODEL_ENUMS.EnumDSSGraphObject,$SHP=$MODEL_ENUMS.EnumShapeType,$GMDLP=$CHART_ENUMS.EnumGraphMatrixDataLabelPosition,kOffset=[[0,0],[0,1],[1,0],[1,1]],kGridGeneric=1,kGridOccupy=2,kGridObject=4,kGridCircle=8,k_MaxCount=10000000;function hPointToIndex(point,isUseFloorValue){var x=point.x-this.Origin.x,y=point.y-this.Origin.y,xIndex,yIndex;if(isUseFloorValue===undefined){isUseFloorValue=true;}if(isUseFloorValue){xIndex=Math.floor(x/this.XUnit);yIndex=Math.floor(y/this.YUnit);}else{xIndex=Math.ceil(x/this.XUnit);yIndex=Math.ceil(y/this.YUnit);}return{flag:!(xIndex<0||yIndex<0),col:xIndex,row:yIndex};}function hGetRectPosition(rect,adjustValue){var x,y,xCover,yCover,temp,result;temp=hPointToIndex.call(this,rect.GetTopLeft());x=temp.col;y=temp.row;temp=hPointToIndex.call(this,rect.GetBottomRight(),false);xCover=temp.col;yCover=temp.row;xCover-=x;yCover-=y;if(x<0||y<0||xCover>this.XCount||yCover>this.YCount||x+xCover>this.XCount||y+yCover>this.YCount){if(!adjustValue){result=null;}else{result={x:Math.max(0,x),y:Math.max(0,y),xRange:Math.min(xCover,this.XCount),yRange:Math.min(yCover,this.YCount)};}}else{result={x:x,y:y,xRange:xCover,yRange:yCover};}return result;}function hIndexToPoint(x,y,point){if(point){point.x=this.Origin.x+x*this.XUnit;point.y=this.Origin.y+y*this.YUnit;return point;}return new $C.Point2D({x:this.Origin.x+x*this.XUnit,y:this.Origin.y+y*this.YUnit});}function hIsOccupiedByHostMarkerRect(hostMarker,x,y){var lX,lY,lXRange,lYRange,lRetVal;lRetVal=hGetRectPosition.call(this,hostMarker,true);lX=lRetVal.x;lY=lRetVal.y;lXRange=lRetVal.xRange;lYRange=lRetVal.yRange;return(x>=lX&&x<=lX+lXRange&&y>=lY&&lY<=lY+lYRange);}function hIsOccupiedByHostMarkerCircle(center,radius,x,y){var i,xIndex,yIndex,point=new $C.Point2D();for(i=0;i<4;++i){xIndex=x+kOffset[i][0];yIndex=y+kOffset[i][1];point=hIndexToPoint.call(this,xIndex,yIndex,point);if(point.Distance(center)<radius){return true;}}return false;}function hGetApproximateCenterFromTopLeft(topLeftPoint,xOffset,yOffset){var point=new $C.Point2D({Point2D:topLeftPoint});point.x+=Math.ceil((0.5*xOffset)*this.XUnit);point.y+=Math.ceil((0.5*yOffset)*this.YUnit);return point;}function hCountOverlapsInRect(startX,startY,xCover,yCover,point,limit){var count=0,i,j,matrix=this.Matrix,tempPoint;for(j=0;j<yCover;++j){for(i=0;i<xCover;++i){count+=matrix[startY+j][startX+i];if(count>limit){return count;}}}tempPoint=hIndexToPoint.call(this,startX,startY);point.x=tempPoint.x;point.y=tempPoint.y;return count;}function hTreatTiltOccupation(occupy,isAdd,is45){return true;}function hGetRectRange(rect){var x,y,xCover,yCover,temp;temp=hPointToIndex.call(this,rect.GetTopLeft());x=temp.col;y=temp.row;temp=hPointToIndex.call(this,rect.GetBottomRight(),false);xCover=temp.col;yCover=temp.row;xCover-=x;yCover-=y;return{xRange:xCover,yRange:yCover};}function hDirection(point1,point2,point3){var dir1,dir2;dir1=new $C.Vector2D({StartPoint:point1,EndPoint:point3});dir2=new $C.Vector2D({StartPoint:point1,EndPoint:point2});return dir1.CrossProduct(dir2);}function hOnSegment(point1,point2,point3){var xMax,xMin,yMax,yMin;if(point1.x<point2.x){xMin=point1.x;xMax=point2.x;}else{xMin=point2.x;xMax=point1.x;}if(point1.y<point2.y){yMin=point1.y;yMax=point2.y;}else{yMin=point2.y;yMax=point1.y;}return !(point3.x<xMin||point3.x>xMax||point3.y<yMin||point3.y>yMax);}function hSegmentsIntersection(point1,point2,point3,point4){var d1=hDirection.call(this,point3,point4,point1),d2=hDirection.call(this,point3,point4,point2),d3=hDirection.call(this,point1,point2,point3),d4=hDirection.call(this,point1,point2,point4);if(d1*d2<0&&d3*d4<0){return true;}if(d1===0&&hOnSegment.call(this,point3,point4,point1)){return true;}if(d2===0&&hOnSegment.call(this,point3,point4,point2)){return true;}if(d3===0&&hOnSegment.call(this,point1,point2,point3)){return true;}if(d4===0&&hOnSegment.call(this,point1,point2,point4)){return true;}return false;}function hSearchAlongAxes(point,markerCenter,originIndex,xyOffset,rectCover,alreadyHasOnePlacement,isYFirst){var position=new $C.Point2D(),limit=1,outerStart,innerStart,outerRange,innerRange,outerOffset,innerOffset,outerCover,innerCover,needCheckForFullAccommodation,i,j,startX,startY,tempPoint1,tempPoint2,distSqr1,distSqr2,result=null;if(isYFirst===undefined){isYFirst=true;}outerStart=isYFirst?originIndex.x:originIndex.y;innerStart=originIndex.x+originIndex.y-outerStart;outerRange=isYFirst?this.XCount:this.YCount;innerRange=this.XCount+this.YCount-outerRange;outerOffset=isYFirst?xyOffset.x:xyOffset.y;innerOffset=xyOffset.x+xyOffset.y-outerOffset;outerCover=isYFirst?rectCover.x:rectCover.y;innerCover=rectCover.x+rectCover.y-outerCover;needCheckForFullAccommodation=(xyOffset.x===-1);for(i=outerStart;
/*lIsFound && */
(i>=0&&i<outerRange);i+=outerOffset){if(i+outerCover>outerRange||i+outerCover<0){continue;}for(j=innerStart;
/*lIsFound &&*/
(j>=0&&j<innerRange);j+=innerOffset){if(j+innerCover>innerRange||j+innerCover<0){continue;}startX=isYFirst?i:j;startY=i+j-startX;if(startX<0||startY<0){continue;}if(hCountOverlapsInRect.call(this,startX,startY,rectCover.x,rectCover.y,position,limit)<=limit){if(alreadyHasOnePlacement){tempPoint1=hGetApproximateCenterFromTopLeft.call(this,point,rectCover.x,rectCover.y);distSqr1=tempPoint1.DistanceSquared(markerCenter);tempPoint2=hGetApproximateCenterFromTopLeft.call(this,position,rectCover.x,rectCover.y);distSqr2=tempPoint2.DistanceSquared(markerCenter);if(distSqr1>distSqr2){result=position;}}else{result=position;alreadyHasOnePlacement=true;}if(!needCheckForFullAccommodation||(isYFirst&&needCheckForFullAccommodation&&(startX+rectCover.x)<=originIndex.x)){return result;}if(isYFirst){i=originIndex.x-rectCover.x;j=innerStart;}}}}return result;}function hSearchInAreas(position,markerCenter,originX,originY,width,height){var atLeastOneFound=false,eachArea,addX,addY,offset,originIndex,xyOffset,rectCover;for(eachArea=0;eachArea<4;++eachArea){addX=(eachArea===0||eachArea===1)?-1:1;addY=(eachArea===1||eachArea===2)?-1:1;offset=(eachArea===0||eachArea===1)?0:1;originIndex=new $C.Point2D({x:originX+offset,y:originY});xyOffset=new $C.Point2D({x:addX,y:addY});rectCover=new $C.Point2D({x:width,y:height});atLeastOneFound=(hSearchAlongAxes.call(this,position,markerCenter,originIndex,xyOffset,rectCover,atLeastOneFound)!==null);}return atLeastOneFound;}function hAreTwoRectsFitPadding(rectDataLabel,rect,padding){return((rectDataLabel.x+rectDataLabel.width+padding<=rect.x)||(rectDataLabel.x>=rect.x+rect.width+padding)||(rectDataLabel.y+rectDataLabel.height+padding<=rect.y)||(rectDataLabel.y>=rect.y+rect.height+padding));}function hAreTwoObjectsFitPadding(center,radius,rectDataLabel,padding){return !((center.Distance(rectDataLabel.GetTopLeft())<radius+padding)||(center.Distance(rectDataLabel.GetBottomLeft())<radius+padding)||(center.Distance(rectDataLabel.GetTopRight())<radius+padding)||(center.Distance(rectDataLabel.GetBottomRight())<radius+padding));}function hPopulateOneColumn(columnObject,columnElementCount,defaultValue){var oneColumnVector=[];for(var i=0;i<columnElementCount;i++){oneColumnVector[i]=defaultValue===0?0:[];}columnObject.push(oneColumnVector);}function hPopulateGrid(props){var propRect,propUnit,propRectWidth,propRectHeight,propUnitWidth,propUnitHeight,i=0,j=0,matrixType,gridOccupyCircleVector;props.MatrixType=props.MatrixType||15;this.Matrix=[];this.MatrixOccupy=[];this.MatrixOccupyObject=[];this.MatrixOccupyCircleObject=[];if(props&&props.Rect&&props.Unit){propRect=props.Rect;propUnit=props.Unit;propRectWidth=propRect.width;propRectHeight=propRect.height;propUnitWidth=propUnit.width;propUnitHeight=propUnit.height;matrixType=props.MatrixType;this.IsValid=((propRectWidth*propRectHeight>propUnitWidth*propUnitHeight)&&(propRectWidth>=propUnitWidth)&&(propRectHeight>=propUnitHeight));if(!this.IsValid){return false;}this.Origin=propRect.GetTopLeft();this.XCount=Math.ceil(propRectWidth/propUnitWidth);this.YCount=Math.ceil(propRectHeight/propUnitHeight);this.XUnit=propUnitWidth;this.YUnit=propUnitHeight;for(i=0;i<this.YCount;++i){if(matrixType&kGridGeneric){hPopulateOneColumn.call(this,this.Matrix,this.XCount,0);}if(matrixType&kGridOccupy){hPopulateOneColumn.call(this,this.MatrixOccupy,this.XCount,1);}if(matrixType&kGridObject){hPopulateOneColumn.call(this,this.MatrixOccupyObject,this.XCount,1);}if(matrixType&kGridCircle){hPopulateOneColumn.call(this,this.MatrixOccupyCircleObject,this.XCount,1);}}return true;}return false;}mstrmojo.chart.GridMap=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.GridMap",IsValid:false,Metric:0,XUnit:0,YUnit:0,XCount:0,YCount:0,Origin:null,Matrix:null,MatrixOccupy:null,MatrixOccupyObject:null,MatrixOccupyCircleObject:null,dataLabelPadding:5,initialized:false,init:function init(props){this.initialized=hPopulateGrid.call(this,props);},populate:function populate(props){this.initialized=this.initialized||hPopulateGrid.call(this,props);},destroy:function destroy(){this.initialized=this.IsValid=false;this.Matrix=[];this.MatrixOccupy=[];this.MatrixOccupyObject=[];this.MatrixOccupyCircleObject=[];},ToMetric:function ToMetric(){var i,j,count=0,xCount=this.XCount,yCount=this.YCount;for(i=0;i<yCount;++i){for(j=0;j<xCount;++j){if(this.Matrix[i][j]>=2){++count;}}}return count;},ToInspectedMetric:function ToInspectedMetric(shapeInfo){var density={Max:-100,Min:10000000000,Occupied:0,Total:0},rect=shapeInfo.BoundingBox,range=hGetRectPosition.call(this,rect,true),isPie=shapeInfo.Shape===$SHP._PIE,position=shapeInfo.Position,isCircle=isPie||(shapeInfo.Shape===$SHP._CIRCLE),inspectPoint=new $C.Point2D(),x=range.x,y=range.y,i,j,k,radius=shapeInfo.Size,restrictRadius=0,xRange=range.xRange,yRange=range.yRange;if(isPie&&shapeInfo.ExclusiveRect){restrictRadius=0.5*shapeInfo.ExclusiveRect.width;}for(i=0;i<range.xRange;++i){for(j=0;j<range.yRange;++j){x=range.x+i;y=range.y+j;if(x>=this.XCount||y>=this.YCount){continue;}var shouldCount=false;if(isCircle){for(k=0;k<4;++k){var distance,tempIndexY=y+kOffset[k][0],tempIndexX=x+kOffset[k][1];if(tempIndexX>=this.XCount||tempIndexY>=this.YCount){continue;}inspectPoint=hIndexToPoint.call(this,tempIndexX,tempIndexY,inspectPoint);distance=inspectPoint.Distance(position);if(distance<radius&&distance>=restrictRadius){shouldCount=true;break;}}}else{shouldCount=true;}if(shouldCount){var metric=this.Matrix[y][x];density.Max=Math.max(metric,density.Max);density.Min=Math.min(metric,density.Min);density.Occupied+=metric;}}}density.Total=range.xRange*range.yRange;return density;},veryDense:function veryDense(){return false;},UpdateMatrixCircle:function UpdateMatrixCircle(center,radius,isAdd){var x,y,xRange,yRange,occupyArea=new $C.Rect2D({x:center.x-radius,y:center.y-radius,height:radius*2,width:radius*2}),returnVal,delta=isAdd?1:-1,i,j,gridCellIndexPie,xIndex,yIndex,k,addMetric=0,matrix=this.Matrix,tempIndexX,tempIndexY,point=new $C.Point2D();returnVal=hGetRectPosition.call(this,occupyArea,true);x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){gridCellIndexPie=false;xIndex=x+i;yIndex=y+j;if(xIndex>=this.XCount||yIndex>=this.YCount){continue;}for(k=0;k<4;++k){tempIndexY=y+i+kOffset[k][0];tempIndexX=x+j+kOffset[k][1];if(tempIndexX>=this.XCount||tempIndexY>=this.YCount){continue;}point=hIndexToPoint.call(this,tempIndexX,tempIndexY,point);if(point.Distance(center)<radius){gridCellIndexPie=true;break;}}if(gridCellIndexPie){matrix[yIndex][xIndex]+=delta;if(matrix[yIndex][xIndex]===1){++addMetric;}}}}this.Metric+=addMetric;return true;},UpdateMatrixDataLabelMarker:function UpdateMatrixDataLabelMarker(isDataLabel,occupy){var x,y,xRange,yRange,i,j,xIndex,yIndex,matrix=this.Matrix,addMetric=0,returnVal;returnVal=hGetRectPosition.call(this,occupy,true);x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){yIndex=y+i;xIndex=x+j;if(matrix[yIndex]&&matrix[yIndex][xIndex]!==undefined){matrix[yIndex][xIndex]+=k_MaxCount;if(matrix[yIndex][xIndex]===k_MaxCount){addMetric++;}}}}this.Metric+=addMetric;return true;},UpdateMatrixPolyLine:function UpdateMatrixPolyLine(occupy,isAdd){var linePoints,i,numberOfLinePoints;if(isAdd===undefined){isAdd=true;}if(occupy===null||occupy===undefined){return false;}linePoints=occupy.mLinePoints;numberOfLinePoints=linePoints.length;for(i=0;i<numberOfLinePoints-1;++i){this.UpdateMatrixLineSegment(linePoints[i],linePoints[i+1],isAdd);}return true;},UpdateMatrixLineSegment:function UpdateMatrixLineSegment(segmentStart,segmentEnd,isAdd){var startPoint=new $C.Point2D({Point2D:segmentStart}),endPoint=new $C.Point2D({Point2D:segmentEnd}),tempPoint,startX,startY,endX,endY,deltaX,deltaY,ratio,temp,interEnd,tempStartY,tempEndX,tempEndY,i,j,matrix=this.Matrix,addMetric=0,subtractMetric=0,yOffset,yExchanged,xIndex,yIndex,delta;if(segmentStart.x>segmentEnd.x){tempPoint=startPoint;startPoint=endPoint;endPoint=tempPoint;}temp=hPointToIndex.call(this,startPoint);startX=temp.col;startY=temp.row;temp=hPointToIndex.call(this,endPoint);endX=temp.col;endY=temp.row;if(startPoint.x!==endPoint.x){deltaX=endPoint.x-startPoint.x;deltaY=endPoint.y-startPoint.y;ratio=deltaY/deltaX;interEnd=new $C.Point2D({Point2D:endPoint});tempStartY=startY;for(i=startX;i<=endX;++i){if(i<0||i>=this.XCount){continue;}deltaX=(i+1)*this.XUnit-startPoint.x;if(i===endX){deltaX=endPoint.x-startPoint.x;}yOffset=deltaX*ratio;interEnd.x=(i+1)*this.XUnit;interEnd.y=startPoint.y+yOffset;temp=hPointToIndex.call(this,interEnd);tempEndX=temp.col;tempEndY=temp.row;yExchanged=false;if(tempStartY>tempEndY){temp=tempStartY;tempStartY=tempEndY;tempEndY=temp;yExchanged=true;}for(j=tempStartY;j<=tempEndY;++j){if(j<0||j>=this.YCount){continue;}xIndex=i;yIndex=j;delta=isAdd?1:-1;matrix[yIndex][xIndex]+=delta;if(isAdd&&matrix[yIndex][xIndex]===1){++addMetric;}if(!isAdd&&matrix[yIndex][xIndex]===0){++subtractMetric;}}if(!yExchanged){tempStartY=tempEndY;}}}else{if(startY>endY){temp=startY;startY=endY;endY=temp;}for(i=startY;i<=endY;++i){if(i<0||i>=this.YCount){continue;}if(startX<0||startX>=this.XCount){break;}xIndex=startX;yIndex=i;delta=isAdd?1:-1;matrix[yIndex][xIndex]+=delta;if(isAdd&&matrix[yIndex][xIndex]===1){++addMetric;}if(!isAdd&&matrix[yIndex][xIndex]===0){++subtractMetric;}}}this.Metric+=addMetric;this.Metric-=subtractMetric;return true;},UpdateMatrixPolygon:function UpdateMatrixPolygon(occupy,isAdd){var polygonPoints,boundRect,x,y,matrix=this.Matrix,xRange,yRange,vertex,addMetric=0,subtractMetric=0,i,j,k,l,xIndex,yIndex,occupied,val,currentUnit,len,delta;if(occupy===null||occupy===undefined){return false;}if(isAdd===undefined){isAdd=true;}polygonPoints=occupy.mDevicePolygon;boundRect=occupy.GetBoundingRect();if(boundRect.width<=0||boundRect.height<=0){return false;}val=hGetRectPosition.call(this,boundRect,true);x=val.x;y=val.y;xRange=val.xRange;yRange=val.yRange;for(j=0;j<yRange;++j){for(i=0;i<xRange;++i){occupied=false;xIndex=x+i;yIndex=y+j;for(k=0;k<4;++k){vertex=hIndexToPoint.call(this,xIndex+kOffset[k][0],yIndex+kOffset[k][1]);if(occupy.PointInObject(vertex)){occupied=true;break;}}if(!occupied){vertex=hIndexToPoint.call(this,xIndex,yIndex);currentUnit=new $C.Rect2D({x:vertex.x,y:vertex.y,width:this.XUnit,height:this.YUnit});for(k=0;k<polygonPoints.length;++k){if(currentUnit.PointInRectangle(polygonPoints[k])){occupied=true;break;}}}if(!occupied){len=polygonPoints.length;for(k=0;k<4;++k){occupied=false;for(l=0;l<len;++l){var lP1,lP2,lP3,lP4;lP1=hIndexToPoint.call(this,xIndex+kOffset[k][0],yIndex+kOffset[k][1]);lP2=hIndexToPoint.call(this,xIndex+kOffset[(k+1)%4][0],yIndex+kOffset[(k+1)%4][1]);lP3=polygonPoints[l];lP4=polygonPoints[(l+1)%len];occupied=hSegmentsIntersection.call(this,lP1,lP2,lP3,lP4);if(occupied){break;}}if(occupied){break;}}}if(occupied){if(yIndex<0||yIndex>=this.YCount){continue;}if(xIndex<0||xIndex>=this.XCount){continue;}delta=isAdd?1:-1;matrix[yIndex][xIndex]+=delta;if(isAdd&&matrix[yIndex][xIndex]===1){++addMetric;}if(!isAdd&&matrix[yIndex][xIndex]===0){++subtractMetric;}}}}this.Metric+=addMetric;this.Metric-=subtractMetric;return true;},UpdateMatrixPolygonWithCanvas:function UpdateMatrixPolygonWithCanvas(occupy,canvas,isAdd){var polygonPoints,boundRect,x,y,matrix=this.Matrix,xRange,yRange,vertex,addMetric=0,subtractMetric=0,i,j,k,l,xIndex,yIndex,occupied,val,currentUnit,len,delta;if(occupy===null||occupy===undefined){return false;}if(isAdd===undefined){isAdd=true;}polygonPoints=occupy.mDevicePolygon;boundRect=occupy.GetBoundingRect();if(boundRect.width<=0||boundRect.height<=0){return false;}var ctx=canvas.getContext("2d");ctx.globalAlpha=0.01;ctx.beginPath();ctx.moveTo(polygonPoints[0].x,polygonPoints[0].y);for(i=1;i<polygonPoints.length;i++){ctx.lineTo(polygonPoints[i].x,polygonPoints[i].y);}ctx.closePath();ctx.fill();var imagedata=ctx.getImageData(0,0,canvas.width,canvas.height);var data=imagedata.data;function getAlpha(x,y){var i=((y*canvas.width)+x)*4;var a=data[i+3];return a/2;}val=hGetRectPosition.call(this,boundRect,true);x=val.x;y=val.y;xRange=val.xRange;yRange=val.yRange;for(j=0;j<yRange;++j){for(i=0;i<xRange;++i){occupied=false;xIndex=x+i;yIndex=y+j;for(k=0;k<4;++k){vertex=hIndexToPoint.call(this,xIndex+kOffset[k][0],yIndex+kOffset[k][1]);var alpha=getAlpha(vertex.x,vertex.y);if(alpha>0){occupied=true;break;}}if(occupied){if(yIndex<0||yIndex>=this.YCount){continue;}if(xIndex<0||xIndex>=this.XCount){continue;}delta=isAdd?1:-1;matrix[yIndex][xIndex]+=delta;if(isAdd&&matrix[yIndex][xIndex]===1){++addMetric;}if(!isAdd&&matrix[yIndex][xIndex]===0){++subtractMetric;}}}}this.Metric+=addMetric;this.Metric-=subtractMetric;return true;},UpdateMatrixRect:function UpdateMatrixRect(occupy,isAdd,rotation){var isTilt,delta,x,y,xRange,yRange,lVal,i,j,addMetric=0,subtractMetric=0,matrix=this.Matrix,indexX,indexY;if(isAdd===undefined){isAdd=true;}rotation=rotation||$FR.Normal;isTilt=(rotation===$FR.Rotate45||rotation===$FR.Rotate315);if(isTilt){return hTreatTiltOccupation.call(this,occupy,(rotation===$FR.Rotate45));}delta=isAdd?1:-1;lVal=hGetRectPosition.call(this,occupy,true);x=lVal.x;y=lVal.y;xRange=lVal.xRange;yRange=lVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){indexY=y+i;indexX=x+j;matrix[indexY][indexX]+=delta;if(isAdd&&matrix[indexY][indexX]===2){addMetric++;}if(!isAdd&&matrix[indexY][indexX]===0){subtractMetric++;}}}this.Metric+=addMetric;this.Metric-=subtractMetric;return true;},UpdateMatrixOccupyCircleObject:function UpdateMatrixOccupyCircleObject(occupy,center,radius){var x,y,xRange,yRange,i,j,xIndex,yIndex,circleOccupied={},returnVal,circleMatrix=this.MatrixOccupyCircleObject;returnVal=hGetRectPosition.call(this,occupy,true);x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){yIndex=y+i;xIndex=x+j;if(hIsOccupiedByHostMarkerCircle.call(this,center,radius,xIndex,yIndex)){if((yIndex<circleMatrix.length)&&(xIndex<circleMatrix[yIndex].length)){circleOccupied.c=center;circleOccupied.r=radius;circleMatrix[yIndex][xIndex].push(circleOccupied);}}}}return true;},UpdateMatrixOccupyObject:function UpdateMatrixOccupyObject(occupy,occupiedObject){var x,y,xRange,yRange,xIndex,yIndex,returnVal,i,j,rectMatrix=this.MatrixOccupyObject;returnVal=hGetRectPosition.call(this,occupy);x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){yIndex=y+i;xIndex=x+j;rectMatrix[yIndex][xIndex].push(occupiedObject);}}return true;},UpdateMatrixOccupy:function UpdateMatrixOccupy(isDataLabel,occupy,dataLabelIndex){var x,y,xRange,yRange,returnVal,i,j,occupyMatrix=this.MatrixOccupy,xIndex,yIndex;returnVal=hGetRectPosition.call(this,occupy,true);x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){yIndex=y+i;xIndex=x+j;if(isDataLabel){occupyMatrix[yIndex][xIndex].push({index:dataLabelIndex,type:1});}else{occupyMatrix[yIndex][xIndex].push({index:dataLabelIndex,type:0});}}}},IsFitPaddingWithBorder:function IsFitPaddingWithBorder(occupy,frame){var dataLabelPadding=this.dataLabelPadding;if(occupy.x<frame.x+dataLabelPadding||occupy.x+occupy.width+dataLabelPadding>frame.x+frame.width){return false;}if(occupy.y<frame.y+dataLabelPadding||occupy.y+occupy.height+dataLabelPadding>frame.y+frame.height){return false;}return true;},IsAccomdatableConsiderRotation:function IsAccomdatableConsiderRotation(hostMarker,occupy,position,rotation){var isFound,xCover,yCover,returnVal,markerPosition,col,row,rowColInfo;if(rotation===undefined){rotation=$FR.Normal;}returnVal=hGetRectRange.call(this,occupy);xCover=returnVal.xRange;yCover=returnVal.yRange;if((xCover>this.XCount)||(yCover>this.YCount)){return false;}markerPosition=hostMarker.GetCenter();rowColInfo=hPointToIndex.call(this,markerPosition);if(!rowColInfo.flag){return false;}row=rowColInfo.row;col=rowColInfo.col;isFound=hSearchInAreas.call(this,position,markerPosition,col,row,xCover,yCover);return isFound;},IsAccomdatableDataLabel:function IsAccomdatableDataLabel(hostMarker,occupy){var x,y,xRange,yRange,returnVal,count,i,j;returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=-1;i<=yRange;++i){for(j=-1;j<xRange;++j){count=this.Matrix[y+i][x+j];if(count>=2){return false;}if(count===1){if(!hIsOccupiedByHostMarkerRect.call(this,hostMarker,x+j,y+i)){return false;}}}}return true;},IsAccomdatableConsiderLocation:function IsAccomdatableConsiderLocation(occupy,location){var x,y,xRange,yRange,returnVal,count,i,j;returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=-1;i<=yRange;++i){for(j=-1;j<=xRange;++j){switch(location){case $GMDLP._TOP:if(i===yRange){continue;}break;case $GMDLP._BOTTOM:if(i===-1){continue;}break;case $GMDLP._LEFT:if(j===xRange){continue;}break;case $GMDLP._RIGHT:if(j===-1){continue;}break;default:}count=this.Matrix[y+i][x+j];if(count>=1){return false;}}}return true;},IsAccomdatableConsiderLabelPaddingOnly:function IsAccomdatableConsiderLabelPaddingOnly(occupy,isExceptDataLabel){var returnVal,x,y,xRange,yRange,xIndex,yIndex,count,i;if(isExceptDataLabel){returnVal=this.IsAccomdatableNoPadding(occupy);if(!returnVal){return false;}returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=-1;i<=yRange;++i){xIndex=x-1;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=k_MaxCount){return false;}}for(i=-1;i<=yRange;++i){xIndex=x+xRange;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=k_MaxCount){return false;}}for(i=-1;i<=xRange;++i){xIndex=x+i;yIndex=y-1;count=this.Matrix[yIndex][xIndex];if(count>=k_MaxCount){return false;}}for(i=-1;i<=xRange;++i){xIndex=x+i;yIndex=y+yRange;count=this.Matrix[yIndex][xIndex];if(count>=k_MaxCount){return false;}}return true;}return this.IsAccomdatableNoPadding(occupy);},IsAccomdatableNoPadding:function IsAccomdatableNoPadding(occupy){var x,y,xRange,yRange,returnVal,count,i,j;returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=0;i<yRange;++i){for(j=0;j<xRange;++j){count=this.Matrix[y+i][x+j];if(count>=1){return false;}}}return true;},IsAccomdatableCircle:function IsAccomdatableCircle(center,radius,occupy){var lX,lY,lXRange,lYRange,lVal,lCount,i,j;lVal=hGetRectPosition.call(this,occupy,false);if(lVal===null){return false;}lX=lVal.x;lY=lVal.y;lXRange=lVal.xRange;lYRange=lVal.yRange;for(i=0;i<lYRange;++i){for(j=0;j<lXRange;++j){lCount=this.Matrix[lY+i][lX+j];if(lCount>=2){return false;}if(lCount===1){if(!hIsOccupiedByHostMarkerCircle.call(this,center,radius,lX+j,lY+i)){return false;}}}}return true;},IsAccomdatableConsiderAccuDistPaddingCircle:function IsAccomdatableConsiderAccuDistPaddingCircle(center,radius,occupy){var x,y,xRange,yRange,returnVal,count,xIndex,yIndex,objects,i,j,dataLabelPadding=this.dataLabelPadding;if(!this.IsAccomdatableCircle(center,radius,occupy)){return false;}returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=-1;i<=yRange;++i){xIndex=x-1;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=1){if(count===1&&hIsOccupiedByHostMarkerCircle.call(this,center,radius,xIndex,yIndex)){continue;}objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}objects=this.MatrixOccupyCircleObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoObjectsFitPadding.call(this,objects[j].c,objects[j].r,occupy,dataLabelPadding)){return false;}}}}for(i=-1;i<=yRange;++i){xIndex=x+xRange;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=1){if(count===1&&hIsOccupiedByHostMarkerCircle.call(this,center,radius,xIndex,yIndex)){continue;}objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}objects=this.MatrixOccupyCircleObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoObjectsFitPadding.call(this,objects[j].c,objects[j].r,occupy,dataLabelPadding)){return false;}}}}for(i=-1;i<=xRange;++i){xIndex=x+i;yIndex=y-1;count=this.Matrix[yIndex][xIndex];if(count>=1){if(count===1&&hIsOccupiedByHostMarkerCircle.call(this,center,radius,xIndex,yIndex)){continue;}objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}objects=this.MatrixOccupyCircleObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoObjectsFitPadding.call(this,objects[j].c,objects[j].r,occupy,dataLabelPadding)){return false;}}}}for(i=-1;i<=yRange;++i){xIndex=x+i;yIndex=y+yRange;count=this.Matrix[yIndex][xIndex];if(count>=1){if(count===1&&hIsOccupiedByHostMarkerCircle.call(this,center,radius,xIndex,yIndex)){continue;}objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}objects=this.MatrixOccupyCircleObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoObjectsFitPadding.call(this,objects[j].c,objects[j].r,occupy,dataLabelPadding)){return false;}}}}return true;},IsAccomdatableConsiderAccuDistPaddingRect:function IsAccomdatableConsiderAccuDistPaddingRect(occupy){var x,y,xRange,yRange,returnVal,count,xIndex,yIndex,i,j,objects,dataLabelPadding=this.dataLabelPadding;if(!this.IsAccomdatableNoPadding(occupy)){return false;}returnVal=hGetRectPosition.call(this,occupy,false);if(returnVal===null){return false;}x=returnVal.x;y=returnVal.y;xRange=returnVal.xRange;yRange=returnVal.yRange;for(i=-1;i<=yRange;++i){xIndex=x-1;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=1){objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}}}for(i=-1;i<=yRange;++i){xIndex=x+xRange;yIndex=y+i;count=this.Matrix[yIndex][xIndex];if(count>=1){objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}}}for(i=-1;i<=xRange;++i){xIndex=x+i;yIndex=y-1;count=this.Matrix[yIndex][xIndex];if(count>=1){objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}}}for(i=-1;i<=xRange;++i){xIndex=x+i;yIndex=y+yRange;count=this.Matrix[yIndex][xIndex];if(count>=1){objects=this.MatrixOccupyObject[yIndex][xIndex];for(j=0;j<objects.length;++j){if(!hAreTwoRectsFitPadding.call(this,occupy,objects[j],dataLabelPadding)){return false;}}}}return true;},ToDraw:function ToDraw(graphObjManager){var xCount=this.XCount,yCount=this.YCount,matrix=this.Matrix,gridCellOccupied=[],i,j,k,gridPoints,point,tripleId,gridCell,formatLine;for(i=0;i<xCount;++i){for(j=0;j<yCount;++j){if(matrix[i][j]>=1){gridPoints=[];for(k=0;k<5;++k){point=hIndexToPoint.call(this,j+kOffset[k%4][0],i+kOffset[k%4][1]);gridPoints.push(point);}tripleId=new $C.TripleId({ObjectId:$GO.DssGraphDataLine});gridCell=new $C.PolyLineObject({TripleId:tripleId,GraphObjectManager:graphObjManager,PolyLine:gridPoints});formatLine=gridCell.mFormatLinePtr;formatLine.mLineColor=65280;formatLine.mLineThickness=1;gridCellOccupied.push(gridCell);}}}return gridCellOccupied;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.requiresClsP("mstrmojo.chart","GridMap","TextObject","ChartContext","ChartConstants");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMatrixDataLabelPosition");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumShapeType");var I=mstrmojo.chart,G=I.ChartConstants,D=I.model,E=D.enums,M=I.enums,H=E.EnumDSSGraphMarkerShape,J=M.EnumGraphMatrixDataLabelPosition,C=E.EnumShapeType,L={};function A(){var U=this.ChartContext,g=U.IsPieChart(),c=(U.IsBubbleChart()||U.IsScatterChart()),a=this.SinglePointObjects.length,Y,d=new I.Rect2D(),b,f=this.GridMap,X=this.PolyLineObjects,R=this.PolygonObjects,V=this.RectangleObjects,e=this.DataAreaFrame,W=this.CirclePieObjects;for(Y=0;Y<a;++Y){d.Reset(0,0,0,0);b=this.SinglePointObjects[Y].GetBoundingRect();if(U.RectangleIntersection(b,e,d)){f.UpdateMatrixRect(d);}}a=X.length;for(Y=0;Y<a;++Y){f.UpdateMatrixPolyLine(X[Y]);}a=R.length;var T=document.createElement("canvas");T.width=this.ChartContext.mGraphWidth;T.height=this.ChartContext.mGraphHeight;for(Y=0;Y<a;++Y){f.UpdateMatrixPolygonWithCanvas(R[Y],T);}a=V.length;for(Y=0;Y<a;++Y){d.Reset(0,0,0,0);if(U.RectangleIntersection(V[Y],e,d)){f.UpdateMatrixRect(d);if(c){f.UpdateMatrixOccupyObject(d,V[Y]);}}}a=W.length;for(Y=0;Y<a;++Y){var Q=W[Y].mCenter,Z=W[Y].mRadius,S=new I.Rect2D({x:Q.x-Z,y:Q.y-Z,height:Z*2,width:Z*2});f.UpdateMatrixCircle(Q,Z,true);if(g){f.UpdateMatrixOccupyCircleObject(S,Q,Z);}}}function K(S,b){var R=this.ChartContext,Y=R.IsLineChart(),T=R.IsAreaChart(),Z=(R.IsBubbleChart()||R.IsScatterChart()),a=false,V=R.GetGraphMatrixContext(),X=S,W,U,Q=b.HostMarkerPoint;W=V.mMarkerShape;if(W===H.DssGraphMarkerShapeCircle||W===H.DssGraphMarkerShapeRectangle||W===H.DssGraphMarkerShapeSquare){a=true;}if((Y&&!a)||T){if(S===J._BOTTOM){X=J._TOP;}else{if(S===J._TOP){X=J._BOTTOM;}}}else{if(Z){U=new I.Rect2D({x:0,y:0,width:R.mGraphWidth,height:R.mGraphHeight});if(S===J._BOTTOM){if(Q.y<=U.height/2){X=J._TOP;}else{X=J._BOTTOM;}}else{if(S===J._TOP){if(Q.y<=U.height/2){X=J._BOTTOM;}else{X=J._TOP;}}}}}return X;}function B(Y,X,Q){var R=Y.HostMarkerPoint,V=Y.CenterXOffset,S=Y.CenterYOffset,U=R.x,T=R.y,W=Y.Label.GetBoundingRect(true);switch(X){case J._BOTTOM:T+=S+Q+W.height*0.5;break;case J._TOP:T-=S+Q+W.height*0.5;break;case J._LEFT:U-=V+Q+W.width*0.5;break;case J._RIGHT:U+=V+Q+W.width*0.5;break;default:break;}Y.Label.MoveToCenter(U,T);}function F(Q,R,S){if(Q.x+Q.width+S<=R.x||Q.x>=R.x+R.width+S){return true;}return(Q.y+Q.height+S<=R.y||Q.y>=R.y+R.height+S);}mstrmojo.chart.DataLabelManager=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.DataLabelManager",GridMap:null,DataAreaFrame:null,ChartContext:null,seriesOptions:[],SinglePointObjects:[],PolygonObjects:[],PolyLineObjects:[],RectangleObjects:[],CirclePieObjects:[],init:function N(R){var T=this.ChartContext,Q,S;if(R&&R.DataArea){this.DataAreaFrame=R.DataArea;L.height=2;L.width=2;if(T!==null&&T!==undefined){Q=T.GetGraphMatrixContext();S=Q.getPadding(G.kDataLabel);}this.GridMap=new I.GridMap({Rect:this.DataAreaFrame,Unit:L,dataLabelPadding:S});}this.allowOverlap=(T&&T.allowOverlapBetweenDatalabels())||false;this.SinglePointObjects=[];this.PolygonObjects=[];this.PolyLineObjects=[];this.RectangleObjects=[];this.CirclePieObjects=[];this.seriesOptions=[];},PlaceDataLabels:function P(h,m,Q){var Y=false,a=this.ChartContext,v=a.GetGraphMatrixContext(),d=a.IsLineChart(),V=a.IsAreaChart(),W=a.IsPieChart(),f=(a.IsBubbleChart()||a.IsScatterChart()),y=v.isCombinationChart(),w,u,s,q,X,p,x,Z,n=new I.Rect2D(),U,T,t,c,S,g,l,e,r,b=v.getPadding(G.kDataLabel);this.allowOverlap=(a&&a.allowOverlapBetweenDatalabels())||false;this.GridMap.populate();r=this.GridMap;Z=v.mMarkerShape;Q=Q||!(a.isCombinationChart()||a.IsDualAxis());if(Z===H.DssGraphMarkerShapeCircle||Z===H.DssGraphMarkerShapeRectangle||Z===H.DssGraphMarkerShapeSquare){Y=true;}A.call(this);w=h.length;for(u=0;u<w;++u){var R=h[u],o=R.isValid;if(!o){continue;}if(y){T=R.SeriesId;t=R.SeriesInfo;c=this.seriesOptions[t];if(c){S=c.mRealSereisType;if(S===C._LINE||S===C._GENERIC){d=true;}else{if(S===C._CIRCLE||S===C._SQUARE||S===C._RECTANGLE){d=true;Y=true;}else{if(S===C._AREA){V=true;}else{if(S===C._PIE){W=true;}}}}}}x=this.allowOverlap;for(s=J._BOTTOM;s<=J._RIGHT;++s){if(W&&s>0){break;}X=J._BOTTOM;if(!W){X=K.call(this,s,R);B.call(this,R,X,b);}U=R.Label.GetBoundingRectNoRotation(true);p=this.DataAreaFrame;if(this.allowOverlap===false){x=r.IsFitPaddingWithBorder(U,p);if(!x){continue;}if(d&&Y){x=r.IsAccomdatableConsiderLocation(U,X);}else{if((d&&!W)||V){x=r.IsAccomdatableConsiderLabelPaddingOnly(U,true);}else{if(f){x=r.IsAccomdatableConsiderAccuDistPaddingRect(U);}else{if(W){x=r.IsAccomdatableConsiderAccuDistPaddingCircle(R.HostMarkerPoint,R.HostMarkerBound.width/2,U);}}}}if(!x){continue;}g=(m!==undefined&&m!==null)?m.length:0;for(q=0;q<g;++q){l=m[q];if(l.mIsShown){e=l.GetBoundingRect(true);x=F.call(this,U,e,b);if(!x){break;}}}}if(x){R.display=true;R.DataLabelLocation=X;n.Reset(0,0,0,0);if(a.RectangleIntersection(U,this.DataAreaFrame,n)){r.UpdateMatrixDataLabelMarker(true,n);if(f||W){r.UpdateMatrixOccupyObject(n,U);}}R.Label.mIsShown=true;if(m!==undefined&&m!==null){m.push(R.Label);}break;}}if(!x){R.Label.mIsShown=false;}}if(Q){this.GridMap.destroy();}return true;},UpdateMatrixDataLabel:function O(Q){return this.GridMap.UpdateMatrixDataLabelMarker(true,Q);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Point2D","GraphObjectManager","TripleId","FormatFont","ChartContext","GraphCollectionObject","FancyBoxObject","MarkerObject","FormatFill","StraightLineObject","TextObject","Rect2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumMarkerShape","EnumBoxStyle","EnumLineStyle","EnumLegendLayout","EnumLegendMarkersStyle");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject","EnumVariantType","EnumVariantBool","EnumDSSExtraGraphProperty","EnumDSSGraphMarkerLayout","EnumDSSGraphLegendPosition");mstrmojo.requiresCls("mstrmojo.chart.common.MapStructure");var V=mstrmojo.chart,M=mstrmojo.chart.enums,L=M.EnumCollectionType.CT_TEXT,U=M.EnumMarkerShape,S=M.EnumBoxStyle,G=M.EnumLineStyle,K=M.EnumLegendLayout,p=M.EnumLegendMarkersStyle,m=V.gNullTripleId,N=0.75,q=16,A=0.5,h=0.15,c=0.9,F=1742,P=725,D=2;var T=mstrmojo.chart.model,O=T.enums,f=O.EnumDSSGraphMarkerShape,a=O.EnumDSSGraphType,d=O.EnumDSSGraphProperty,e=O.EnumDSSGraphObject,E=O.EnumVariantBool,B=E.VARIANT_FALSE,Z=O.EnumDSSExtraGraphProperty,n=O.EnumDSSGraphMarkerLayout,I=O.EnumDSSGraphLegendPosition;var C=0;function X(r){this.mLegendMarkerSize=r.mFontSize<q?r.mFontSize:q;this.mLegendMarkerSize=Math.floor(this.mLegendMarkerSize*N+1.5);if(this.mLegendMarkerSize<2){this.mLegendMarkerSize=2;}this.mItemMargin=Math.floor(this.mLegendMarkerSize*0.3);this.mEdgeMargin=Math.floor(this.mLegendMarkerSize*0.8);}function l(AG,x){var t=this.mChartContextPtr,AC=this.mDatasetPtr,r=this.mGraphOptionsLegend,AE,u,AD,AB,v,w,s,AA,AI,y,AJ,z,AF,AH;AE=AC.GetSeriesCount();u=new V.Rect2D();AH=this.mLegendItemCount;for(AD=0;AD<AH;++AD){AB=new V.TripleId({ObjectId:e.DssGraphLegendText,SeriesId:AD});v=new V.TextObject({TripleId:AB,GraphObjectManager:this,GraphCollectionObject:x});v.mIsShown=false;x.AddGraphObject(v);s=t.mGraphType;if(AD>=AE&&s!==a.DssGraphTypeGridChart){if(t.mGraphType===a.DssGraphTypePareto_Percent){AA=t.GetProperty(d.DssGraphCumulativePercentLabel,new V.TripleId({SeriesId:AD-AE}));if(AA){w=AA;}else{w="Cumulative Percent";}}else{if(s>=a.DssGraphTypeHiLo_Stock_Chart&&s<=a.DssGraphTypeHiLoOpenClose_DualAxis_Stock_Chart){w=this.mStockMetricValue[this.mLegendItemIndexToStockMetricIndex[AD]];}}}else{if(r.mIsByGroup){w=AC.GetGroupLabel(AD,false);}else{w=AC.GetSeriesLabel(AD,false);}}v.SetText(w);AF=v.GetBoundingRect();this.AddToMapAndList(v);if(AF.width>u.width){u.width=AF.width;}}if(!t.mManualLayoutMode||r.mReposition){y=Math.floor(AG.width*h+0.5);if(r.mLegendPosition===I.DssGraphLegendPositionBottom){y=AG.width;}AI=(u.width<y)?u.width:y;}else{AJ=t.GetLocation(d.DssGraphLegendLocation);if(AJ.width===0){y=Math.floor(AG.width*h+0.5);AI=(u.width<y)?u.width:y;}else{AI=AJ.width-2*this.mEdgeMargin;if(r.mLegendMarkersStyle===n.DssGraphMarkerLeft||r.mLegendMarkersStyle===n.DssGraphMarkerRight){AI-=this.mLegendMarkerSize*(1+A);}}}u.width=0;for(AD=0;AD<AH;++AD){z=this.GetGraphObject(new V.TripleId({ObjectId:e.DssGraphLegendText,SeriesId:AD}));z.SetTextWidthLimit(AI);AF=z.GetBoundingRect();if(AF.height>u.height){u.height=AF.height;}if(AF.width>u.width){u.width=AF.width;}}return u;}function Y(){var r=this.mChartContextPtr.mGraphType;switch(r){case a.DssGraphTypeVertical_Area_Stacked:case a.DssGraphTypeVertical_Area_BiPolar_Stacked:case a.DssGraphTypeVertical_Area_DualAxis_Stacked:case a.DssGraphTypeVertical_Area_Percent:case a.DssGraphTypeVertical_Bar_Stacked:case a.DssGraphTypeVertical_Bar_DualAxis_Stacked:case a.DssGraphTypeVertical_Bar_BiPolar_Stacked:case a.DssGraphTypeVertical_Bar_Percent:case a.DssGraphTypeVertical_Line_Stacked:case a.DssGraphTypeVertical_Line_BiPolar_Stacked:case a.DssGraphTypeVertical_Line_DualAxis_Stacked:case a.DssGraphTypeVertical_Line_Percent:case a.DssGraphRadar_Line_Stacked:case a.DssGraphTypePareto:case a.DssGraphTypePareto_Percent:return true;default:return false;}}function J(AT,AE){var w=this.mGraphOptionsLegend,Aa=l.call(this,AT,AE),AV=new V.Rect2D(),Ac=this.mItemMargin,AH=this.mItemMargin,y=this.mDatasetPtr.GetSeriesCount(),AQ=new V.Rect2D({x:0,y:0,width:this.mLegendMarkerSize,height:this.mLegendMarkerSize}),AC=0,Ag=0,AX,Ah,AA,AG,AL,AZ,AM,AF,AO,t,AR,Ad,r,x,AN,Ab,AI,AB,AS,AW,s,AD,v,AY,AK,AJ,z,Af,u,Ae,AP;switch(w.mLegendMarkersStyle){case n.DssGraphMarkerLeft:case n.DssGraphMarkerRight:AC=Math.floor(Aa.width+AQ.width*(1+A));Ag=Aa.height;break;case n.DssGraphMarkerCentered:AC=Aa.width;Ag=Aa.height;break;case n.DssGraphMarkerAbove:case n.DssGraphMarkerBelow:AC=Aa.width;Ag=Math.floor(Aa.height+AQ.height*(1+A));break;default:break;}if(Ag===0){Ag=1;}if(AC===0){AC=1;}AX=0;Ah=0;AA=this.mLegendItemCount;switch(w.mLegendPosition){case I.DssGraphLegendPositionRight:case I.DssGraphLegendPositionLeft:AG=Math.floor((AT.height-Ac)/(Ag+Ac));if(AG===0){AG=1;}AX=Math.floor(this.mLegendItemCount/AG);if(AX*AG<this.mLegendItemCount){AX++;}Ah=Math.floor(this.mLegendItemCount/AX);if(Ah*AX<this.mLegendItemCount){Ah++;}break;case I.DssGraphLegendPositionBottom:AG=Math.floor((AT.width-AH)/(AC+AH));if(AG===0){AG=1;}Ah=Math.floor(this.mLegendItemCount/AG);if(Ah*AG<this.mLegendItemCount){Ah++;}AX=Math.floor(this.mLegendItemCount/Ah);if(Ah*AX<this.mLegendItemCount){AX++;}break;case I.DssGraphLegendPositionFreeFloat:AL=this.mChartContextPtr.GetLocation(d.DssGraphLegendLocation);AV.y=AL.y;AV.x=AL.x;if(!w.mRecalculate){AV.width=AL.width;AV.height=AL.height;AZ=Math.floor((AV.height-this.mEdgeMargin*2+D)/Ag);AM=Math.floor((AV.width-this.mEdgeMargin*2+D)/AC);if(AZ*AM<AA){AA=AZ*AM;Ah=AZ;AX=AM;}else{AX=Math.floor(this.mLegendItemCount/AZ);if(AX===0){AX=1;}if(AX*AZ<this.mLegendItemCount){AX++;}Ah=Math.floor(this.mLegendItemCount/AX);if(Ah*AX<this.mLegendItemCount){Ah++;}}if(Ah>0){Ac=Math.floor((AV.height-Ah*Ag-this.mEdgeMargin*2)/Ah);}if(AX>0){AH=Math.floor((AV.width-AX*AC-this.mEdgeMargin*2)/AX);}}else{AG=Math.floor((AT.height-Ac)/(Ag+Ac));if(AG===0){AG=1;}AX=Math.floor(this.mLegendItemCount/AG);if(AX*AG<this.mLegendItemCount){AX++;}Ah=Math.floor(this.mLegendItemCount/AX);if(Ah*AX<this.mLegendItemCount){Ah++;}}break;default:break;}if(w.mLegendPosition!==I.DssGraphLegendPositionFreeFloat||w.mRecalculate){AV.height=Math.floor(Ag*Ah+Ac*Ah+this.mEdgeMargin*2);AV.width=Math.floor(AC*AX+AH*AX+this.mEdgeMargin*2);if(w.mRecalculate){if(!this.mIsExpanded){AF=this.mChartContextPtr.mGraphWidth;AO=this.mChartContextPtr.mGraphHeight;if(AV.x+AV.width>AF){AV.width=AF-AV.x;}if(AV.y+AV.height>AO){AV.height=AO-AV.y;}}}}if(this.mIsExpanded){switch(w.mLegendPosition){case I.DssGraphLegendPositionRight:case I.DssGraphLegendPositionLeft:this.mArea.width=AV.width*1.8+530;if(this.mArea.width>F){this.mArea.width=F;}this.mChartContextPtr.SetGraphSize(this.mArea.x+this.mArea.width+this.mChartContextPtr.vdWidth(C),this.mChartContextPtr.mGraphHeight);break;case I.DssGraphLegendPositionBottom:this.mArea.height=AV.height*0.4+400;if(this.mArea.height>P){this.mArea.height=P;}this.mChartContextPtr.SetGraphSize(this.mChartContextPtr.mGraphWidth,this.mArea.y+this.mArea.height+this.mChartContextPtr.vdHeight(C));break;case I.DssGraphLegendPositionFreeFloat:t=this.mChartContextPtr.mGraphWidth;AR=this.mChartContextPtr.mGraphHeight;if(AV.x+AV.width>this.mChartContextPtr.mGraphWidth){t=AV.x+AV.width+this.mChartContextPtr.vdWidth(C);}if(AV.y+AV.height>this.mChartContextPtr.mGraphHeight){AR=AV.y+AV.height+this.mChartContextPtr.vdHeight(C);}this.mChartContextPtr.SetGraphSize(t,AR);break;default:break;}}switch(w.mLegendPosition){case I.DssGraphLegendPositionRight:AV.y=Math.floor(this.mArea.y+this.mArea.height/2-AV.height/2);AV.x=Math.floor(this.mArea.x+this.mArea.width-AV.width);break;case I.DssGraphLegendPositionLeft:AV.y=Math.floor(this.mArea.y+this.mArea.height/2-AV.height/2);AV.x=this.mArea.x;break;case I.DssGraphLegendPositionBottom:AV.y=this.mArea.y+this.mArea.height-AV.height;AV.x=Math.floor(this.mArea.x+(this.mArea.width-AV.width)/2);break;case I.DssGraphLegendPositionFreeFloat:break;default:break;}if(!this.mChartContextPtr.mManualLayoutMode||w.mReposition){this.mChartContextPtr.PutLocation(d.DssGraphLegendLocation,AV);}for(Ad=0;Ad<AA;++Ad){r=Math.floor(Ad/AX);x=Ad-r*AX;AN=0;switch(w.mLegendMarkersStyle){case n.DssGraphMarkerRight:AN=AH;break;case n.DssGraphMarkerCentered:case n.DssGraphMarkerAbove:case n.DssGraphMarkerBelow:AN=AH/2;break;}Ab=new V.Point2D();Ab.x=AV.x+(AC+AH)*x+this.mEdgeMargin+AN;Ab.y=Math.floor(AV.y+(Ag+Ac)*r+this.mEdgeMargin+Ac/2);AI=new V.Point2D();AB=new V.Point2D();switch(w.mLegendMarkersStyle){case n.DssGraphMarkerLeft:AI.x=Math.floor(Ab.x+AQ.width/2);AI.y=Math.floor(Ab.y+Ag/2);AB.x=Math.floor(Ab.x+AQ.width*(1+A));AB.y=Ab.y;break;case n.DssGraphMarkerRight:AI.x=Math.floor(Ab.x+AC-AQ.width/2);AI.y=Math.floor(Ab.y+Ag/2);AB.x=Ab.x;AB.y=Ab.y;break;case n.DssGraphMarkerCentered:AI.x=Math.floor(Ab.x+AC/2);AI.y=Math.floor(Ab.y+Ag/2);AB.x=Ab.x;AB.y=Ab.y;break;case n.DssGraphMarkerAbove:AI.x=Math.floor(Ab.x+AC/2);AI.y=Math.floor(Ab.y+AQ.height/2);AB.x=Ab.x;AB.y=Ab.y+AQ.height*(1+A);break;case n.DssGraphMarkerBelow:AI.x=Math.floor(Ab.x+AC/2);AI.y=Math.floor(Ab.y+Ag-AQ.height/2);AB.x=Ab.x;AB.y=Ab.y;break;default:break;}AS=Y.call(this)?(this.mLegendItemCount-Ad-1):Ad;AW=new V.TripleId({ObjectId:e.DssGraphLegendMarker,SeriesId:AS});AD=this.mChartContextPtr.mGraphType;if(AD>=a.DssGraphTypeHiLo_Stock_Chart&&AD<=a.DssGraphTypeHiLoOpenClose_DualAxis_Stock_Chart&&Ad>=y){var AU=this.mLegendItemIndexToStockMetricIndex[Ad];if(AU===undefined){break;}v=AU.value;if(this.mStockMetricLayout[v]===e.DssGraphMetricVerticalLine||this.mStockMetricLayout[v]===e.DssGraphMetricLine){AY=new V.Point2D({Point2D:AI});AK=this.mLegendMarkerSize/2;AJ=this.mStockMetricLayout[v]===e.DssGraphMetricVerticalLine?new V.Point2D({x:AY.x,y:Math.floor(AY.y-1.75*AK)}):new V.Point2D({x:Math.floor(AY.x-1.75*AK),y:AY.y});z=this.mStockMetricLayout[v]===e.DssGraphMetricVerticalLine?new V.Point2D({x:AY.x,y:Math.floor(AY.y+1.75*AK)}):V.Point2D({x:Math.floor(AY.x+1.75*AK),y:AY.y});Af=new V.StraightLineObject({TripleId:AW,GraphObjectManager:this,StartPoint:AJ,EndPoint:z});u=new V.FormatLine({LineStyle:G.LS_SHORT_DASH,Alpha:255,LineThickness:1,LineColor:V.gBlack.ToInteger()});Af.SetFormatLine(u);this.mLegendMarkerLines.push(Af);s=new V.MarkerObject({TripleId:AW,GraphObjectManager:this,MarkerPosition:AI,MarkerShape:U.MS_Rectangle,IsIsometric:true,MarkerSize:Math.floor(this.mLegendMarkerSize/2),GraphCollectionObject:null,IsDialogSize:false});s.mIsShown=false;}else{Ae=this.mStockMetricLayout[v]===e.DssGraphMetricBar?f.DssGraphMarkerShapeRectangle:f.DssGraphMarkerShapeHouse;s=new V.MarkerObject({TripleId:AW,GraphObjectManager:this,MarkerPosition:AI,MarkerShape:Ae,IsIsometric:true,MarkerSize:Math.floor(this.mLegendMarkerSize/2),GraphCollectionObject:null,IsDialogSize:false});s.SetFormatFill(new V.FormatFill({SimpleColor:V.gBlack.ToInteger()}));}}else{s=new V.MarkerObject({TripleId:AW,GraphObjectManager:this,MarkerPosition:AI,MarkerShape:U.MS_Rectangle,IsIsometric:true,MarkerSize:Math.floor(this.mLegendMarkerSize/2),GraphCollectionObject:null,IsDialogSize:false});}this.AddToMapAndList(s);AP=this.GetGraphObject(new V.TripleId({ObjectId:e.DssGraphLegendText,SeriesId:AS}));AP.SetRect(Aa);AP.MoveTo(AB.x,AB.y);AP.mIsShown=true;}return AV;}function W(){var r=this.mDatasetPtr;if(!this.mGraphOptionsLegend.mIsByGroup){return r.GetSeriesCount();}return r.GetGroupCount();}function Q(){var x=this.mChartContextPtr,v,u,w=[],t,r,s;v=x.GetLocationRect(d.DssGraphLegendLocation);u=new V.Point2D({x:Math.floor(v.x+v.width/2),y:Math.floor(v.y+v.height/2)});w[0]=u.Distance(new V.Point2D({x:x.mGraphWidth,y:Math.floor(x.mGraphHeight/2)}));w[1]=u.Distance(new V.Point2D({x:0,y:Math.floor(x.mGraphHeight/2)}));w[2]=u.Distance(new V.Point2D({x:Math.floor(x.mGraphWidth/2),y:x.mGraphHeight}));t=w[0];r=0;for(s=1;s<3;++s){if(w[s]<t){t=w[s];r=s;}}return(r+1);}function H(){var y=this.mChartContextPtr,s=this.mGraphOptionsLegend,v,r,w,x,u,t;v=y.GetProperty(d.DssGraphShowLegendText,m);if(v){s.mShowLegend=(v!==B);}v=y.GetProperty(d.DssGraphMarkerLayout,m);if(v){s.mLegendMarkersStyle=v;}v=y.GetProperty(d.DssGraphLegendLock,m);if(v){s.mLegendPosition=v;if(!y.mManualLayoutMode&&s.mLegendPosition===K.LL_LegendFreeFloat){s.mLegendPosition=K.LL_LegendOnRightSide;}}if(y.mManualLayoutMode){s.mLegendPosition=K.LL_LegendFreeFloat;v=y.GetProperty(d.DssGraphInfoRecalculateLegend,m);if(v){s.mRecalculate=v!==B;if(s.mRecalculate){v=y.GetProperty(Z.DssGraphInfoRecalculateChartFrame,m);if(v){s.mReposition=v!==B;if(s.mReposition){s.mLegendPosition=Q.call(this);}}}}v=y.GetProperty(d.DssGraphAxisAutoFit,m);if(v){s.mAxisLabelsAutoFit=v!==B;}if(s.mAxisLabelsAutoFit){s.mRecalculate=true;s.mReposition=true;s.mLegendPosition=Q.call(this);}}s.mIsByGroup=y.isLegendByGroup();if(!y.mManualLayoutMode||s.mRecalculate){v=y.GetProperty(Z.DssGraphInfoAutosizeHorizontal,m);r=y.GetProperty(Z.DssGraphInfoAutosizeVertical,m);if(v&&r){this.mIsExpanded=v!==B&&r!==B;}this.mIsExpanded=false;}this.mLegendItemCount=W.call(this);u=y.mGraphType;if(u===a.DssGraphTypePareto_Percent){w=false;x=1;v=y.GetProperty(Z.DssGraphUseChartArea,m);if(v){w=v!==B;}if(w){v=y.GetProperty(Z.DssGraphChartAreaNumber,m);if(v){x=v;if(x>this.mLegendItemCount){x=this.mLegendItemCount;}}}this.mLegendItemCount+=x;}else{if(u>=a.DssGraphTypeHiLo_Stock_Chart&&u<=a.DssGraphTypeHiLoOpenClose_DualAxis_Stock_Chart){for(t=0;t<3;++t){v=y.GetProperty(d.DssGraphShowMetric1+t,m);if(v){if(v!==B){this.mLegendItemIndexToStockMetricIndex[this.mLegendItemCount++]=t;v=y.GetProperty(d.DssGraphMetric1Value+t,m);if(v){this.mStockMetricValue[t]=v;}v=y.GetProperty(d.DssGraphMetric1Style+t,m);if(v){this.mStockMetricLayout[t]=v;}}}}}}}mstrmojo.chart.Legend=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.Legend",mDatasetPtr:null,mLegendArea:null,mArea:null,mGraphOptionsLegend:null,mStockMetricLayout:null,mStockMetricValue:null,mLegendMarkerLines:null,mItemMargin:0,mEdgeMargin:0,mLegendMarkerSize:0,mIsExpanded:false,mLegendItemCount:0,mLegendItemIndexToStockMetricIndex:null,init:function k(r){this._super(r);this.mDatasetPtr=r.DataSet||null;this.mLegendArea=r.Area?new V.Rect2D({Rect2D:r.Area}):null;this.mArea=r.Area?new V.Rect2D({Rect2D:r.Area}):null;this.mGraphOptionsLegend={mShowLegend:true,mShowSeriesTitles:true,mLegendPosition:K.LL_LegendOnRightSide,mLegendMarkersStyle:p.LMS_LeftOfText,mLegendBoxStyle:S.BS_NOFRAME,mLegendItemsNum:0,mAxisLabelsAutoFit:true,mVertical:true,mRecalculate:false,mReposition:false,mIsByGroup:false};this.mStockMetricLayout=[0,0,0];this.mStockMetricValue=new Array(3);this.mLegendMarkerLines=[];this.mLegendItemIndexToStockMetricIndex={};H.call(this);},GenerateMapAndList:function j(){var w=this.mChartContextPtr,v,s,t,u,r;v=new V.TripleId({ObjectId:e.DssGraphLegendText});s=new V.GraphCollectionObject({TripleId:v,GraphObjectManager:this,CollectionType:L});this.AddToMap(s);t=w.GetFormatFont(new V.TripleId({ObjectId:e.DssGraphLegendText}));s.SetFormatFont(t);X.call(this,t);this.mLegendArea=J.call(this,this.mArea,s);u=w.GetProperty(d.DssGraphLegendBox,m);if(u===null||u===undefined){u=S.BS_NOFRAME;}v=new V.TripleId({ObjectId:e.DssGraphLegendArea});r=new V.FancyBoxObject({TripleId:v,GraphObjectManager:this,BoxStyle:u,Area:this.mLegendArea});this.AddToMapAndList(r);},GetLegendArea:function i(){return this.mLegendArea;},CalculateFrame:function R(v,u,t){var r,s;r=this.GetLegendArea();switch(this.mGraphOptionsLegend.mLegendPosition){case I.DssGraphLegendPositionRight:if(r.width<this.mArea.width*c){t.width=r.x-v-this.mArea.x;}break;case I.DssGraphLegendPositionLeft:if(r.width<this.mArea.width*c){s=this.mArea.x+this.mArea.width;t.x=r.x+r.width+v;t.width=s-t.x;}break;case I.DssGraphLegendPositionBottom:if(r.height<this.mArea.height*c){t.height=r.y-u-this.mArea.y;}break;case I.DssGraphLegendPositionFreeFloat:break;default:break;}},Draw:function b(){var t=this.mGraphObjectList,u=this.mLegendMarkerLines,r,s;t[0].Draw();r=u.length;for(s=0;s<r;++s){u[s].Draw();}r=t.length;for(s=1;s<r;++s){t[s].Draw();}},SetFormatLineOfLegendMarkerLine:function g(y,AB,u){var s=this.mChartContextPtr,v,w,AA,x,r,z;if(u===undefined){u=false;}v=this.GetGraphObject(new V.TripleId({ObjectId:e.DssGraphLegendMarker,SeriesId:AB}));if(!v){return false;}w=v.mMarkerPosition;AA=v.mMarkerSize;x=s.mIsGraphMatrix?1:1.75;r=u?new V.Point2D({x:w.x,6:w.y-x*AA}):new V.Point2D({x:w.x-x*AA,y:w.y});z=u?new V.Point2D({x:w.x,y:w.y+x*AA}):new V.Point2D({x:w.x+x*AA,y:w.y});var t=new V.StraightLineObject({TripleId:new V.TripleId({ObjectId:e.DssGraphLegendMarker,SeriesId:AB}),GraphObjectManager:this,StartPoint:r,EndPoint:z});t.SetFormatLine(y);this.mLegendMarkerLines.push(t);return true;},UpdateFormatForLegendMarker:function o(r,x,u,w,s){if(r<0||r>=this.mLegendItemCount){return ;}w=(w!==undefined)?w:false;s=(s!==undefined)?s:false;var v=new V.TripleId({ObjectId:e.DssGraphLegendMarker,SeriesId:r});var t=this.GetGraphObject(v);if(!t){return ;}if(x){t.SetFormatFill(x);}if(u){if(w){this.SetFormatLineOfLegendMarkerLine(u,r,s);}else{t.SetFormatLine(u);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.chart.common.MapStructure");mstrmojo.requiresClsP("mstrmojo.chart","Axis","TripleId","Rect2D","CategoryAxisInfo","ChartConstants","StraightLineObject","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumAnchorPoint","EnumAxisLabelsLocation","EnumAxisDirection","EnumGraphObjectType","EnumCategoryAxisOidItem","EnumCategoryLabelStyle","EnumRectCompare","EnumChartStyle","EnumImageUsage","EnumRectExpandDirection","EnumGraphMatrixMajorGraphType","EnumLabelLevelOption");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSGraphFontRotation","EnumDSSGraphGridLineType");var Ar=mstrmojo.chart,Ai=Ar.ChartConstants,Q=Ar.enums,A6=Q.EnumAnchorPoint,Al=Q.EnumGraphMajorType,g=Q.EnumAxisLabelsLocation,Av=Q.EnumAxisDirection,Y=Q.EnumGraphObjectType,c=Q.EnumCategoryAxisOidItem,G=Q.EnumCategoryLabelStyle,AI=Q.EnumImageUsage,As=Q.EnumLabelLevelOption,AJ=Q.EnumChartStyle,Ae=Q.EnumRectCompare,AO=Ar.gNullGroupId,AQ=Ar.gNullSeriesId;var Ag=mstrmojo.chart.model,AP=Ag.enums,A7=AP.EnumDSSGraphType,BC=AP.EnumDSSGraphProperty,BD=AP.EnumDSSGraphObject,J=AP.EnumDSSGraphFontRotation,BO=AP.EnumDSSGraphGridLineType,Ac=0,A8=1,BG=2,C=3;var v=new Ar.Point2D(),AX=new Ar.Point2D(),BJ=new Ar.Rect2D(),Aw=new Ar.Rect2D(),H=new Ar.Rect2D(),t=new Ar.Rect2D(),Aa=new Ar.Rect2D();function h(BQ,BP){if(BP===undefined){BP=-3;}switch(this.mTripleId.mObjectId){case BD.DssGraphO1Body:return new Ar.TripleId({ObjectId:BD.DssGraph2DO1Label,GroupId:BQ,SeriesId:BP});case BD.DssGraphO2Body:return new Ar.TripleId({ObjectId:BD.DssGraph2DO2Label,GroupId:BQ,SeriesId:BP});default:return new Ar.TripleId({ObjectId:BD.DssGraph2DO1Label,GroupId:BQ,SeriesId:BP});}}function s(BR,BU,BQ){var BP=BU||0,BT=BR||0,BS=(this.mAxisInfo.mAxisDirection===Av.AD_X)?BQ.width:BQ.height;if(BP<0){BP=0;}if(BT<0){BT=0;}if(BS<=0||BS<BP+BT){return ;}BS-=BP+BT;this.mLowTrim=BP;this.mHighTrim=BT;if(this.mAxisInfo.mAxisDirection===Av.AD_X){BQ.x+=BP;BQ.width=BS;}if(this.mAxisInfo.mAxisDirection===Av.AD_Y){BQ.y+=BT;BQ.height=BS;}}function AL(BQ){var BR,BS=this.mLabelList,BP=BS.length;for(BR=0;BR<BP;BR++){if(BS[BR]){BS[BR].Restore({LineCount:BQ});}}}function i(BP,BT){var BS=this.mChartContextPtr,BQ=BS.GetGraphMatrixContext(),BT=BT||BQ.getPadding(Ai.kLabelToChart),BR=BP.GetBoundingRect(true);return(BR.y>=BT&&BR.y+BR.height+BT<=BS.mGraphHeight);}function I(){var BS=this.mChartContextPtr,BV=BS.GetGraphMatrixContext(),BU=BS.RenderClusterShapes(),BT=this.mDatasetPtr,BX=false,BP=BU;if(BU===false){if(BV.isCombinationChart()){var BQ=BS.mUniformAxisContext.CategoryAxis,BW=this.IsVerticalAxis()?"Y":"X";BU=BQ[BW].EnforceFringe;if(BU){return true;}var BR=BT.GetSeriesByShape().Bar;BP=BX=BR&&BR.length>0;BP=BP||BU;}else{BP=BS.IsBarChart()&&BS.IsAdvancedBarChart(AJ._bullet)===false;}}return BP;}function Au(){if(I.call(this)){var BV=this.mChartContextPtr,BQ=BV.GetGraphMatrixContext(),BR=false,BT=false;if(BQ.isCombinationChart()){var BP=BV.mUniformAxisContext.CategoryAxis,BS=this.IsVerticalAxis()?"Y":"X";BR=BP[BS].EnforceCluster;if(BR){return true;}var BU=this.mDatasetPtr.GetSeriesByShape().Bar;BT=BU&&BU.length>0;return(BV.IsBarChart(AJ._cluster)||(BT&&!BV.IsPercentChart()&&!BV.IsStackedChart()));}return BV.IsBarChart(AJ._cluster);}return false;}function Ah(){var BS=this.mChartContextPtr;if(BS.mPartialRendering&&BS.mRenderingWindow){var BQ,BP,BR=BS.mRenderingWindow;if(this.IsVerticalAxis()){BQ=BR.y;BP=BQ+BR.height;}else{BQ=BR.x;BP=BQ+BR.width;}this.screenWindow={Min:this.getGroupSlotAt(BQ)-1,Max:this.getGroupSlotAt(BP)+1};}}function AZ(BV,BT){if(BV===0&&BT===0){return 0;}var BP=0,Be,BR=this.mChartContextPtr,BX=BR.mIsGraphMatrix,Ba=BR.GetGraphMatrixContext(),BQ=this.mCategoryOption.mLabelStyle,Bb=BX?Ba.getPadding(Ai.kLabelToChart):0,BW=this.mLevelSize,BS=BX?Ba.getPadding(Ai.kCategoricalLabelToTick):this.mLevelSpace,BU,Bd=this.mGroupCount;switch(BQ){case G.CLS_NORMAL:case G.CLS_MANUAL:case G.CLS_AUTOMATIC:BW.push(Math.max(BV,BT));BP=Math.max(BV,BT)+BS;break;default:Be=this.mpAxisLabelSet.GetFormatFont().mFontRotation;if(Be===J.Rotate45||Be===J.Rotate315){BV=0;var Bc=this.getGroupSize(),BZ,BY;for(BU=0;BU<(Bd+1)/2;++BU){BZ=this.mLabelList[BU].GetBoundingRectNoRotation(true);BY=Math.max(BZ.width,BZ.height)*Math.SQRT1_2;if(BY>Bc){BY+=(BY-Bc);}BV=Math.max(BV,(BY+0.5));}}BW.push(BV);BW.push(BT);BP=BV+BS+BT+this.mLevelSpace;break;}return BP+Bb;}function Z(BP){var BQ=this.mDeviceDataArea;return(BP>BQ.x&&BP<BQ.x+BQ.width);}function L(BP){var BQ=this.mDeviceDataArea;return(BP>BQ.y&&BP<BQ.y+BQ.height);}function BK(){return this.mTripleId.mObjectId===BD.DssGraphO2Body;}function Am(BP){return this.mGroupOrder.length===0?BP:this.mGroupOrder[BP];}function BF(BQ,BT){var BS,BR,BP;BP=BQ.length;for(BS=0;BS<BP;++BS){BR=new Ar.StraightLineObject({TripleId:BT.mTripleId,GraphObjectManager:this,StartPoint:BQ[BS],EndPoint:BQ[BS].Shifted(this.mDepthOffset),ParentObject:BT});BT.AddGraphObject(BR);this.mManagerGraphObjectList.push(BR);}}function l(BU,BS){var BT,BR,BQ,BP,BV=this.mDeviceDataArea,BW;if(this.mChartContextPtr.mIsTimeSeriesChart){BP=this.mShownLabelList.length;for(BT=0;BT<BP;++BT){BR=this.mShownLabelList[BT].mTripleId.mGroupId;if(!this.IsVerticalAxis()){BQ=new Ar.Point2D({x:this.getGroupMiddlePos(BR),y:BV.GetBottomMiddle().y});BU.push(BQ);BQ=new Ar.Point2D({x:this.getGroupMiddlePos(BR),y:BV.GetTopMiddle().y});BS.push(BQ);}else{BQ=new Ar.Point2D({x:BV.GetLeftMiddle().x,y:this.getGroupMiddlePos(BR)});BU.push(BQ);BQ=new Ar.Point2D({x:BV.GetRightMiddle().x,y:this.getGroupMiddlePos(BR)});BS.push(BQ);}}}else{BW=this.mGroupCount;for(BT=0;BT<BW;++BT){if(this.mAxisCross&&BT===0){continue;}if(!this.IsVerticalAxis()){BQ=new Ar.Point2D({x:this.getGroupMiddlePos(BT),y:BV.y+BV.height});BU.push(BQ);BQ=new Ar.Point2D({x:this.getGroupMiddlePos(BT),y:BV.y});BS.push(BQ);}else{BQ=new Ar.Point2D({x:BV.x,y:this.getGroupMiddlePos(BT)});BU.push(BQ);BQ=new Ar.Point2D({x:BV.x+BV.width,y:this.getGroupMiddlePos(BT)});BS.push(BQ);}}}}function O(){var BS=this.mMajorGrid;if(!BS.mShowGridLines||(BS.mGridStyle!==BO.DssGraphGridRegular&&BS.mGridStyle!==BO.DssGraphGridBoth)){return ;}var BR=Ar.gAxisObjects[this.getIndex()].mMajorId;this.InitObjectSet(BR,Y.GOT_MAJOR_GRID);var BQ=[],BP=[];l.call(this,BQ,BP);BF.call(this,BP,this.mpMajorGridSet);}function u(BZ,Bc){var BX=this.mMinorGrid,BY=this.mDeviceDataArea,BS=1,BP,BR,BV,Ba=this.mGroupCount,BW,BU,BT,BQ,Bb;if(BX.mUseManualGrid){BS=(BX.mGridInterval);}BP=Math.floor(BS/2);BR=this.getGroupSize()/(BS+1);BV=((BS%2)===0)?BP:(BP+1);for(BW=0;BW<Ba;++BW){for(BU=-BP;BU<=BV;++BU){if((BU!==0)){if(BW===this.mGroupCount-1){if((BS%2)!==0&&BU===BV){continue;}}BT=(BR*BU+(BU>=0?0.5:-0.5));if(!this.IsVerticalAxis()){BQ=this.getGroupMiddlePos(BW)+BT;if(Z.call(this,BQ)){BZ.push(new Ar.Point2D({x:BQ,y:BY.y+BY.height}));Bc.push(new Ar.Point2D({x:BQ,y:BY.y}));}}else{Bb=this.getGroupMiddlePos(BW)+BT;if(L.call(this,Bb)){BZ.push(new Ar.Point2D({x:BY.x,y:Bb}));Bc.push(new Ar.Point2D({x:BY.x+BY.width,y:Bb}));}}}}}}function Af(){var BR=this.mMinorGrid;if(!BR.mShowGridLines||(BR.mGridStyle!==BO.DssGraphGridRegular&&BR.mGridStyle!==BO.DssGraphGridBoth)){return ;}var BP=Ar.gAxisObjects[this.getIndex()].mMinorId;this.InitObjectSet(BP,Y.GOT_MINOR_GRID);var BS=[],BQ=[];u.call(this,BS,BQ);BF.call(this,BQ,this.mpMinorGridSet);}function n(){}function M(BP,BQ){return BP;}function BE(BR,BP){var BQ=As.LLO_NORMAL;if(this.mChartContextPtr.mIsGraphMatrix){return{Option:BQ,Index:BP};}return{Option:BQ,Index:BP};}function AF(BR,Ba,Bb){if(Bb){var BV=this.mDatasetPtr,BS=Bb.length,Bc=BR?BV.GetSeriesLabelIdentities(Ba):BV.GetGroupLabelIdentities(Ba),BZ=Bc.length,BX=1,BQ=[],BT=0,BW,BU;for(BW=0;BW<BS;++BW){var BY=Bb[BW],BP=BY.match(/ /g);if(BP){BX=BP.length+1;}for(BU=0;BU<BX;++BU){if(BW<BZ){BQ[BT]=Bc[BW];}else{BQ[BT]=null;}BT++;}}return BQ;}return null;}function o(){var BW=this.mChartContextPtr,BT=this.mLabelList,BP=BT.length,BR,BV=BK.call(this),BQ,BU,BS;if(BW.mImageUsage===AI.GENERAL){for(BS=0;BS<BP;BS++){BR=BT[BS];if(BR&&BR.texts){if(BR.mIsShown===false){delete BR.texts;continue;}BQ=BR.mTripleId.mGroupId;BU=AF.call(this,BV,BQ,BR.texts);if(BU&&BU.length){BR.IdentityMap=BU;delete BR.texts;}}}}}function Ak(Bc,BS){BS=BS||false;var BR=this.mChartContextPtr,BQ=!this.IsVerticalAxis(),Ba,Bb,BU=this.mDatasetPtr,BV=As.LLO_NORMAL,BX;if(BQ&&this.mIsUniformAxis){var BW=BR.getUniformAxisContext(),BP=BW.CategoryAxis.X.Truncation;if(BP){var BY=-1,BZ=BP.Indices,BT=BP.Texts;if(BZ&&BZ.length){BY=BZ.indexOf(Bc);if(BY!==-1){Ba=BT[BY];if(Ba){return Ba;}}}}}if(BK.call(this)){BX=BE.call(this,false,Bc);Bc=BX.Index;BV=BX.Option;Bb=BU.GetSeriesLabel(Bc,0,BV,BS);Ba=BU.GetMergedLabel(Bb,BV);if(BR.mImageUsage===AI.GENERAL&&BS){return{Text:Ba,Texts:Bb};}return{Text:Ba};}BX=BE.call(this,true,Bc);Bc=Am.call(this,BX.Index);BV=BX.Option;Bb=BU.GetGroupLabel(Bc,0,BV,BS);Ba=BU.GetMergedLabel(Bb,BV);if(BR.mImageUsage===AI.GENERAL&&BS){return{Text:Ba,Texts:Bb};}return{Text:Ba};}function p(BP){var BS=this.mChartContextPtr;if(BS.mPartialRendering){var BR=BP.mTripleId.mGroupId,BQ=this.screenWindow;return BR>=BQ.Min&&BR<=BQ.Max;}return true;}function x(BP){switch(this.mAxisInfo.mAxisLabelsLocation){case g.ALL_BOTTOM:case g.ALL_TOP:case g.ALL_LEFT:case g.ALL_RIGHT:return this.mAxisInfo.mAxisLabelsLocation;}if(this.mAxisInfo.mAxisLabelsLocation===g.ALL_BOTTOM_TOP){if(BP<this.mLabelSubIndex){return g.ALL_BOTTOM;}return g.ALL_TOP;}if(BP<this.mLabelSubIndex){return g.ALL_LEFT;}return g.ALL_RIGHT;}function AN(BP){var BQ=this.HasOuterTicks(this.mMajorGrid.mGridStyle)||this.HasOuterTicks(this.mMinorGrid.mGridStyle);if(this.mAxisInfo.mAxisLabelsLocation===g.ALL_BOTTOM_TOP||this.mAxisInfo.mAxisLabelsLocation===g.ALL_LEFT_RIGHT){return BQ;}return BQ&&(BP===this.mAxisInfo.mAxisLabelsLocation);}function k(BQ,BS,BP){var BR=this.mDeviceDataArea;switch(BQ){case g.ALL_BOTTOM:BP.Reset(0,1);return BR.y+BR.height+BS;case g.ALL_TOP:BP.Reset(0,-1);return BR.y-BS;case g.ALL_LEFT:BP.Reset(-1,0);return BR.x-BS;case g.ALL_RIGHT:BP.Reset(1,0);return BR.x+BR.width+BS;default:return 0;}}function V(){if(this.mIsUniformAxis===false){return false;}return this.restrictWidth>=0&&this.restrictHeight>=0;}function AM(BW,BV){var BY=BV,BT=this.getLabelRotation(),BU=(BT===J.Rotate90),BQ=V.call(this)&&BU,BS=this.mChartContextPtr.getUniformAxisContext();if(V.call(this)){if(BU){if(this.maxLabelLength===-1){var BP=this.mAxisInfo.mAxisDirection===Av.AD_X;if(BP&&BU&&(this.resizeAction===Ae.ShrinkX||this.resizeAction===Ae.ExpandX)){BY=1000;}else{BY=this.calculateMaxAxisSpace(this.restrictHeight);}}else{BY=this.maxLabelLength;}}else{BY=this.calculateMaxAxisSpace(this.restrictWidth);BW.rect.width=BW.rect.height=0;BW.mIsRectCalculated=false;}}else{var BX=false,BR=BS.CategoryAxis.X;if(BR.Layout===C){BX=true;}if(!this.IsVerticalAxis()){if(BU||BX){var BZ=BS.CategoryAxis.X.LabelWidthLimit;if(BZ){BY=BZ;BQ=true;}if((BU||BX)&&!V.call(this)){BQ=true;BY=1000;}}else{if(!this.mWordWrap){BY=1000;}}}}return{Stringent:BQ,WidthLimit:BY};}function AK(){if(this.mPaddingOnSide===-1){var BS=this.mDatasetPtr,BU=this.mChartContextPtr;if(!BU.mIsGraphMatrix){this.mPaddingOnSide=0;}else{if(I.call(this)){var BQ=1,BT=this.mGroupCount;if(Au.call(this)===false){BQ=(BT+0.5);}else{BQ=BT*BS.GetClusterSeriesCount()+0.5;}var BP=0,BR=this.mDeviceDataArea;switch(this.mAxisInfo.mAxisDirection){case Av.AD_X:BP=BR.width;break;case Av.AD_Y:BP=BR.height;break;case Av.AD_Z:break;}this.mPaddingOnSide=BP/BQ/4;}else{this.mPaddingOnSide=0;}this.mPaddingOnSide=Math.round(this.mPaddingOnSide);}}return this.mPaddingOnSide;}function P(){var BP=0;switch(this.mAxisInfo.mAxisDirection){case Av.AD_X:BP=this.mDeviceDataArea.width;break;case Av.AD_Y:BP=this.mDeviceDataArea.height;break;case Av.AD_Z:break;}return BP-2*AK.call(this);}function AC(BW,BY,BQ){var BR,BX,BS=this.mChartContextPtr,BT=!this.IsVerticalAxis(),BP=false;if(BT){BR=0;if(BS.mManualLayoutMode){BR=(BY*this.getGroupSize(true)+0.5);}else{BR=BX=BY*this.getGroupSize(true);if(BS.mIsGraphMatrix===false){BR=Math.floor((BX*Math.max(1,((P.call(this)/10)/BX))-Ar.Axis.gLabelMargin+0.5));if(this.mAxisCross||BS.mIsTimeSeriesChart){BR=Math.min(BR,BQ);}}BR=Math.max(1,BR);}if(this.mIsUniformAxis){var BV=AM.call(this,BW,BR);BR=BV.WidthLimit;BP=BP||BV.Stringent;}BW.mSubTextHolder.SetLineCount(1);BW.SetTextWidthLimit(BR,BP);}else{BR=this.mDeviceDataArea.width;if(!this.mIsUniformAxis){BR=BR/2;}else{var BU=BS.getUniformAxisContext(),BZ=BU.CategoryAxis.Y;BR=BZ.LabelWidthLimit||BR;}if(this.mIsUniformAxis){if(V.call(this)){BW.rect.width=BW.rect.height=0;BW.mIsRectCalculated=false;}}BW.SetTextWidthLimit(BR);}}function At(BU,BQ,BR){BR=(BR!==undefined)?BR:false;var BT=this.mDeviceDataArea,BP,BS;if(this.IsVerticalAxis()){BP=BT.x+BT.width/2;BS=this.getGroupMiddlePos(BU.mGroupId,BR);}else{BP=this.getGroupMiddlePos(BU.mGroupId,BR);BS=BT.y+BT.height;}BQ.MoveTo(BP,BS,A6.CENTER);}function a(BW,BS,BV,BQ){var BP,BT,BU;if(BQ===undefined){if(this.maxLabelLength>0){BQ=this.maxLabelLength;}else{BQ=1000;}}var BR=BW.mGroupId;BP=this.mLabelList[BR];if(BP===undefined){BU=BW;BP=new Ar.TextObject({TripleId:BU,GraphObjectManager:this,GraphCollectionObject:this.mpAxisLabelSet,hasFill:false,hasLine:false});BT=Ak.call(this,BU.mGroupId,true);BP.SetText(BT.Text);delete BT.Text;if(BT.Texts){BP.texts=BT.Texts;delete BT.Texts;}this.mLabelList[BR]=BP;}AC.call(this,BP,BS,BQ);if(BV){At.call(this,BW,BP);}return BP;}function BI(BT,BV,BU,BR){var BS=BU,BQ=BR,BP;if(this.mUseDepth){BP=this.getDepthMargin(0,0);BS=BS-BP.lowMargin;BQ=BQ-BP.highMargin;}BS=(BS<0)?0:BS;BQ=(BQ<0)?0:BQ;return{LowMargin:BS>BT?BS-BT:0,HighMargin:BQ>BV?BQ-BV:0};}function AA(BX,BT,BQ,BU,BV){var BW,BR;t.ResetRect(BU);Aa.ResetRect(BV);if(this.mChartContextPtr.mIsGraphMatrix){var BS=this.mChartContextPtr.GetGraphMatrixContext().getPadding(Ai.kLabelToChart);var BP=0;if(this.IsVerticalAxis()){t.y-=BS;t.height+=BS;Aa.height+=BS;}else{t.x-=(BS+BP);t.width+=BS+BP;Aa.width+=BS;}}BW=this.IsVerticalAxis()?Aa.y+Aa.height-(BQ.y+BQ.height):BQ.x-t.x;BR=this.IsVerticalAxis()?BQ.y-t.y:Aa.x+Aa.width-(BQ.x+BQ.width);return BI.call(this,BX,BT,BW,BR);}function BH(BV,BW,BU){BU=BU||0;var BQ,BS,BT,BX,BR=this.mChartContextPtr,BP={x:0,y:0,width:BR.mGraphWidth,height:BR.mGraphHeight};if(BW){BQ=BV.x-BU;BS=BV.x+BV.width+BU;BT=BP.x;BX=BP.x+BP.width;}else{BQ=BV.y-BU;BS=BV.y+BV.height+BU;BT=BP.y;BX=BP.y+BP.height;}return !(BQ>=BT&&BS<=BX);}function AE(BZ,BX,BW,BS,BV){var BR=this.mChartContextPtr,BQ=0,BT=1,BP=5,BY=false,BU=BR.GetGraphMatrixContext();if(BZ){switch(BW){case Ac:case C:case A8:if(BX){BY=BU.checkPaddingBetweenLabels(BS,BV,BP,true);}else{BY=BU.checkPaddingBetweenLabels(BS,BV,BT,true);}break;default:BY=BU.checkPaddingBetweenLabels(BS,BV,BT,true);break;}}else{BY=BU.checkPaddingBetweenLabels(BS,BV,BP,false);}return BY;}function AD(BR,BQ){var BP;var BS=h.call(this,BR,-3);BP=BP||a.call(this,BS,BQ,true);return BP;}function AH(BS,BT,BP,BX,BQ,BV,BU){var BW=false,BR=this.mChartContextPtr;if(!BS){BW=BT.HasIntersection(BP);BW=BW||(BR.mIsGraphMatrix&&AE.call(this,BX,BQ,BV,BP,BT));}if(BX&&!BQ){BW=BW||(BR.mIsGraphMatrix&&BH.call(this,BT,BX,BU));}return BW;}function AH(BS,BT,BP,BX,BQ,BV,BU){var BW=false,BR=this.mChartContextPtr;if(!BS){BW=BT.HasIntersection(BP);BW=BW||(BR.mIsGraphMatrix&&AE.call(this,BX,BQ,BV,BP,BT));}if(BX&&!BQ){BW=BW||(BR.mIsGraphMatrix&&BH.call(this,BT,BX,BU));}return BW;}function BM(BS,Bb,BZ,BV){var BU,BY=new Ar.Rect2D(),Ba,BT=true,Bd=!this.IsVerticalAxis(),BR=this.mChartContextPtr,BX=0,BQ=this.mPlotGroupCount,BW=this.mCategoryOption.mLabelStyle,BP=this.getLabelRotation()===J.Rotate90||this.getLabelRotation()===J.Rotate270,Bc={Overlapped:false,MaxSpace:BZ};if(BR.mIsGraphMatrix){BX=BR.GetGraphMatrixContext().getPadding(Ai.kLabelToChart);}Aw.Reset(0,0,0,0);for(BU=Bb;BU<BQ;BU+=BS){Ba=AD.call(this,BU,BS);BV.push(Ba);Ba.GetTransformedRectEx(BY);Bc.Overlapped=AH.call(this,BT,BY,Aw,Bd,BP,BW,BX);if(Bc.Overlapped){Bc.MaxSpace=BZ;return Bc;}if(BT===true){BT=false;Aw.ResetRect(BY);}else{Aw.ResetRect(BY);BZ=Math.max(BZ,this.IsVerticalAxis()?BY.width:BY.height);Bc.MaxSpace=BZ;}}if(Bb>=BS){BT=true;Aw.Reset(0,0,0,0);for(BU=Bb;BU>=0;BU-=BS){Ba=AD.call(this,BU,BS);if(BU!==Bb){BV.unshift(Ba);}BY=Ba.GetTransformedRect(true);Bc.Overlapped=AH.call(this,BT,BY,Aw,Bd,BP,BW,BX);if(Bc.Overlapped){Bc.MaxSpace=BZ;return Bc;}if(BT===true){BT=false;Aw.ResetRect(BY);}else{Aw.ResetRect(BY);BZ=Math.max(BZ,this.IsVerticalAxis()?BY.width:BY.height);Bc.MaxSpace=BZ;}}}Bc.Overlapped=false;return Bc;}function z(BP,BQ){if(this.IsVerticalAxis()){this.mDeviceDataArea.y+=BQ;this.mDeviceDataArea.height-=BQ+BP;}else{this.mDeviceDataArea.x+=BP;this.mDeviceDataArea.width-=BP+BQ;}}function U(BT,BQ,BR,BP,BS){if(!BT){return ;}if(this.IsVerticalAxis()){if(BR>0){BP.mIsShown=false;}if(BQ>0){BS.mIsShown=false;}}else{if(BQ>0){BP.mIsShown=false;}if(BR>0){BS.mIsShown=false;}}}function AU(){var BR=this.mChartContextPtr,BP=BR.getUniformAxisContext();if(BR.mIsGraphMatrix){var BQ=BP.CategoryAxis.X;return !!BQ.ForbideStagger===false;}return true;}function e(Bb,BS,Bj,BX,BY,Bi,Bg,BR,Bk,BW){var Bc,Bd,BU,Bf,Ba,BT,BZ,Bh,BQ,BV,BP=[],Be;BU={MaxSpace1:Bi,MaxSpace2:Bg,Overlapped:true};Bf=this.mPlotGroupCount-((this.mPlotGroupCount&1)===0?1:2);Bc=h.call(this,Bf);BT=a.call(this,Bc,2,true,BS*2);Ba=BT.GetBoundingRect();BZ=AA.call(this,Bb,BS,BX,BR,Ba);BQ=BZ.LowMargin;BV=BZ.HighMargin;if(BQ>Bk||BV>BW){this.mDeviceDataArea=BX;BQ=Math.max(Bk,BQ);BV=Math.max(BW,BV);if(!Bj){z.call(this,BQ,BV);}BU.MaxSpace1=0;BZ=BM.call(this,2,0,Bi,BP);BU.MaxSpace1=BZ.MaxSpace;if(BZ.Overlapped){return BU;}}else{BP=BP.concat(BY);}BZ=BM.call(this,2,1,Bg,BP);BU.MaxSpace2=Bg=BZ.MaxSpace;if(BZ.Overlapped){return BU;}Bh=Bi+this.mLevelSpace+Bg+this.mLevelSpace;if(this.HasLabelsOnBothSides()){Bh+=Bh;}if(Bh*2>(this.IsVerticalAxis()?this.mDeviceDataArea.width:this.mDeviceDataArea.height)){return BU;}BT=(this.mPlotGroupCount&1)===0?BP[BP.length-1]:BP[Math.floor(this.mPlotGroupCount/2)];U.call(this,Bj,BQ,BV,BP[0],BT);BY.splice(0,BY.length);Be=BP.length;for(Bd=0;Bd<Be;++Bd){BY.push(BP[Bd]);}BU.Overlapped=false;return BU;}function B(BP){return e.call(this,BP.LowMargin,BP.HighMargin,BP.FixedMargin,BP.BackupRect2D,BP.LabelArray,BP.MaxSpace_1,BP.MaxSpace_2,BP.FirstRect,BP.LowLabelMargin,BP.HighLabelMargin);}function BN(BV,Ba,BS){Ba=Ba||0;var BR=this.mPlotGroupCount-1,BX=Ba,BW,BU=false,BZ,BT,BQ=this.mCategoryOption.mLabelStyle,BP=!this.IsVerticalAxis(),BY;if(this.mPlotGroupCount<2){return 1;}if(BP&&this.mIsUniformAxis){if(BQ===A8){if(BS===1){return BQ;}}if(BQ===BG){if(BS===2){return BQ;}}}while(BR>BX){BW=Math.floor((BR+BX+1)/2);BT=h.call(this,BW);BY=a.call(this,BT,BS,true);BZ=BY.GetTransformedRect(true);if(BV.HasIntersection(BZ)){BX=BW;BU=true;}else{BU=false;if(BR===BW){break;}BR=BW;}}return BU?this.mGroupCount:Math.max(BR-Ba,BS);}function BB(BP,BR,BQ){switch(BP){case g.ALL_BOTTOM:BR.height-=BQ;break;case g.ALL_TOP:BR.y+=BQ;BR.height-=BQ;break;case g.ALL_LEFT:BR.x+=BQ;BR.width-=BQ;break;case g.ALL_RIGHT:BR.width-=BQ;break;}}function j(BP){var BQ=this.mAxisInfo.mAxisLabelsLocation;switch(BQ){case g.ALL_BOTTOM:case g.ALL_TOP:case g.ALL_LEFT:case g.ALL_RIGHT:BP.push(BQ);break;}if(BQ===g.ALL_BOTTOM_TOP){BP.push(g.ALL_BOTTOM);BP.push(g.ALL_TOP);}else{if(BQ===g.ALL_LEFT_RIGHT){BP.push(g.ALL_LEFT);BP.push(g.ALL_RIGHT);}}}function W(BZ){var BY,BU,BS,BW,BT=BZ.FirstLabel,BQ=this.mChartContextPtr,BV=BQ.mIsGraphMatrix,Ba=this.mCategoryOption.mManualSkip,BR=this.mDeviceDataArea,Bb=this.mAxisInfo.mAxisDirection===Av.AD_Y,BP=this.mCategoryOption.mLabelStyle,BX=new Ar.Rect2D({Rect2D:BR});switch(BZ.Interval){case 1:if(!this.IsVerticalAxis()&&BZ.FirstLabel.possibleTruncate()){BP=C;}else{BP=A8;}break;case 2:BU=this.getLabelRotation();BY=(BU===J.Rotate90)||(BU===J.Rotate270);BS=true;if(BV){BS=BS&&!Bb&&!BY;if(BS){BS=AU.call(this)&&(BT.mTripleId.mGroupId===0);}}else{}if(BS){BW=B.call(this,BZ);BZ.MaxSpace_1=BW.MaxSpace1;BZ.MaxSpace_2=BW.MaxSpace2;BS=BW.Overlapped===false;if(!BZ.MaxSpace_2){BZ.MaxSpace_2=BZ.MaxSpace_1;}}if(BS){if(BV&&this.mPlotGroupCount===2){BR.ResetRect(BX);BP=C;Ba=2;}else{BP=BG;}}else{BR.ResetRect(BX);BP=G.CLS_MANUAL;Ba=2;}break;default:BP=G.CLS_MANUAL;Ba=BZ.Interval;break;}this.mCategoryOption.mManualSkip=Ba;this.mCategoryOption.mLabelStyle=BP;}function A2(BW){var BS=this.mpAxisLabelSet;if(BS){var Bb=BS.GetFormatFont();if(!!Bb===false){return 1;}var Ba=this.getGroupSize(true),BZ=BW.mGroupId,BU=this.mDatasetPtr,BR;if(BK.call(this)){BR=BU.GetSeriesLabel(BZ);}else{BR=BU.GetGroupLabel(BZ);}var BV=Bb.mFontRotation,BQ=this.mChartContextPtr,BX=BQ.getUniformAxisContext(),BP=BX.CategoryAxis,Bc=Bb.GetStringExtent(BR);if(BV===J.Rotate180||BV===J.Normal){var BY=2;if(this.IsVerticalAxis()){if(Bc.Height>=Ba){BY=Math.ceil(Bc.Height/Ba);return Math.min(BY,this.mGroupCount);}}else{if(Bc.Width>=Ba){BY=Math.ceil(Bc.Width/Ba);return Math.min(BY,this.mGroupCount);}}if(this.IsVerticalAxis()===false){var BT=BP.X;if(BT&&BT.Layout===BG){return Math.min(2,this.mGroupCount);}}}else{if(BV===J.Rotate90||BV===J.Rotate270){if(Bc.Height>=Ba){return Math.min(2,this.mGroupCount);}}}}return 1;}function A1(Br,BZ,Bt,Bk){Bk=(Bk!==undefined)?Bk:0;var BX,Bi,Bh,Bp=this.mChartContextPtr,Bf,BS,Bs,Bo,BP,BU,BR,Bb=this.mGroupCount,Bl=this.mShownLabelList,Bu=this.mLabelList,Ba=0,Bw=0,Bn,Bc,Bx,B0,BQ,By,Bd,Bz,Bj;this.mLevelSize.splice(0,this.mLevelSize.length);Bi=Bh=0;if(Bb<1){return 0;}var Be=Bp.getUniformAxisLabelRotateMode("x"),BW=this.IsVerticalAxis()?"Y":"X";BQ=Be===-1;Bf=Bp.mIsGraphMatrix?Bk:0;BS=Bb-1;Bf=AV.call(this,BW,Bf,BS);if(!Bp.mManualLayoutMode||Bp.mRecalculateFrame){Bs=h.call(this,Bf);BR=A2.call(this,Bs);Bo=a.call(this,Bs,BR,true);BP=Bo.GetBoundingRect(true);BU=Bo.GetTransformedRect(true);BR=BN.call(this,BU,Bf,BR);H.ResetRect(this.mDeviceDataArea);var BT=this.mDeviceDataArea;while(BR<=Bb){BT.ResetRect(H);Bi=0;Bh=0;if(true){Bs=h.call(this,Bf);AC.call(this,Bo,BR,Br*2);At.call(this,Bs,Bo);BP=Bo.GetBoundingRect(true);}Bi=this.IsVerticalAxis()?BP.width:BP.height;Bn=parseInt(BS/BR)*BR;Bs=h.call(this,Bn);if(this.mIsUniformAxis){Bc=a.call(this,Bs,BR,true);}else{Bc=a.call(this,Bs,BR,true,2*BZ);}Bx=Bc.GetBoundingRect(true);if(this.mChartContextPtr.GetGraphType()===A7.DssGraphTypeGridChart&&BW==="X"){Ba=0;Bw=0;this.mLowTrim=0;this.mHighTrim=0;}else{Bj=AA.call(this,Br,BZ,BT,BP,Bx);Ba=Bj.LowMargin;Bw=Bj.HighMargin;this.mLowTrim=Ba;this.mHighTrim=Bw;}if(!Bt){z.call(this,Ba,Bw);}if(!this.IsVerticalAxis()){By=this.getLabelRotation();Bd=(By===J.Rotate90);if(Bd===false){Bs=h.call(this,Bf);AC.call(this,Bo,BR,Br*2);At.call(this,Bs,Bo);BP=Bo.GetBoundingRect(true);if(BH.call(this,BP,true,5)){if(BQ){this.mpAxisLabelSet.GetFormatFont().mFontRotation=J.Rotate90;this.mLabelInterval=-1;this.mCategoryOption.mLabelStyle=C;return 0;}else{Bo.mIsShown=false;Bf++;}}}}Bl.splice(0,Bl.length);if(this.mGroupCount===1&&!this.IsVerticalAxis()){if(BT.width<BP.width){By=this.getLabelRotation();Bd=(By===J.Rotate90)||(By===J.Rotate270);if(Bd){Bo.mIsShown=false;Bi=Bh=0;break;}BR=2;this.mpAxisLabelSet.GetFormatFont().mFontRotation=J.Rotate90;this.mCategoryOption.mLabelStyle=C;Bu.splice(0,Bu.length);this.mLabelList.push(Bo);Bl.push(Bo);BP=Bo.GetBoundingRect();return BP.height+5;}}Bj=BM.call(this,BR,Bf,Bi,Bl);Bi=Bj.MaxSpace;if(Bj.Overlapped){++BR;}else{this.mLabelInterval=BR;if(Bl.length>=1){U.call(this,Bt,Ba,Bw,Bl[0],Bl[Bl.length-1]);if(this.mChartContextPtr.GetGraphType()===A7.DssGraphTypeGridChart&&BW==="X"){Bx=Bl[Bl.length-1].GetBoundingRect(true);if(BH.call(this,Bx,true,0)){Bl.splice(Bl.length-1,1);}}}break;}}Bz={Interval:BR,FirstLabel:Bo,LowMargin:Br,HighMargin:BZ,BackupRect2D:H,FirstRect:BP,FixedMargin:Bt,MaxSpace_1:Bi,MaxSpace_2:Bh,LabelArray:Bl,LowLabelMargin:Ba,HighLabelMargin:Bw};W.call(this,Bz);Bi=Bz.MaxSpace_1;Bh=Bz.MaxSpace_2;if(Bp.mIsGraphMatrix){var Bm=[],BY=this.mGraphObjectList,Bv=BY.length,BV=Bl.length;for(B0=0;B0<BV;++B0){Bl[B0].mIsShown=true;Bm.push(Bl[B0].mTripleId.mGroupId);}var Bq,Bg;Bg=Bu.length;for(B0=0;B0<Bg;B0++){if(Bu[B0]){Bu[B0].mIsShown=false;}}Bg=Bl.length;for(B0=0;B0<Bg;B0++){Bq=Bl[B0].mTripleId.mGroupId;if(Bu[Bq]){Bu[Bq].mIsShown=true;}else{Bu[Bq]=Bl[B0];}}}else{Bu=Bu.concat(Bl);}}this.hasLabelCreated=true;BX=AZ.call(this,Bi,Bh);return BX;}function BA(BP){this.mDeviceDataArea.ResetRect(BP.Rect2D);this.mLevelSize.splice(0,this.mLevelSize.length);this.mShownLabelList.splice(0,this.mShownLabelList.length);return A1.call(this,BP.LowMargin,BP.HighMargin,BP.FixedMargin,BP.StartIndex);}function AV(BQ,BX,BV){var BU,BP,BR,BW,BT=this.mChartContextPtr.GetGraphMatrixContext().getPadding(Ai.kLabelToChart);var BS=function(){BU=h.call(this,BX);BP=A2.call(this,BU);BR=a.call(this,BU,BP,true);BW=BR.GetBoundingRect(true);while(BX<BV){if((BQ==="Y"&&BW.y>=BT)||(BQ==="X"&&BW.x>0)){break;}BX++;BU=h.call(this,BX);BP=A2.call(this,BU);BR=a.call(this,BU,BP,true);BW=BR.GetBoundingRect(true);}};if(BQ==="Y"){BS.call(this);}else{if(this.mChartContextPtr.GetGraphType()===A7.DssGraphTypeGridChart&&BQ==="X"){BS.call(this);}}return BX;}function A3(){if(this.mLabelInterval<=1){return 0;}var BP=this.mGroupCount%this.mLabelInterval;if(BP<=0){BP=this.mLabelInterval;}return Math.ceil((BP+1)/2)-1;}function Ad(BQ){var BR=[[BD.DssGraph2DO1Label,BD.DssGraph2DO2Label],[BD.DssGraphO1Major,BD.DssGraphO2Major],[BD.DssGraphO1Minor,BD.DssGraphO2Minor]],BP=1;if(this.mTripleId.mObjectId===BD.DssGraphO1Body){BP=0;}return BR[BQ][BP];}function F(BR){if(BR<0){return true;}var BV=new Ar.TripleId({ObjectId:Ad.call(this,c.OID_LABEL)});this.InitObjectSet(BV,Y.GOT_AXIS_LABEL);var BT=this.mpAxisLabelSet.mFormatFontPtr,BQ=4+2*BT.GetStringHeight("H"),BS=this.mChartContextPtr.GetGraphMatrixContext(),BU=this.mGroupCount,BP=BS.getPadding(Ai.kEndLabelToChart)*2+BQ*BU+BS.getPadding(Ai.kBetweenLabels)*(BU-1);return BP<BR;}function A4(BQ){var BR=this.mChartContextPtr,BP={Skip:false,Space:-1};if(!BR.mIsGraphMatrix){return BP;}if(!BQ){if(this.resizeAction===-1||this.maxLabelLength===-1){return BP;}this.mWordWrap=F.call(this,this.mDeviceDataArea.height);if(this.resizeAction===Ae.ShrinkX||this.resizeAction===Ae.ExpandX){BP.Skip=!this.mWordWrap;BP.Space=AZ.call(this,this.maxLabelLength,0);}}else{if(this.resizeAction===-1||this.maxLabelLength===-1){return BP;}if(this.resizeAction===Ae.ExpandY||this.resizeAction===Ae.ShrinkY){if(this.getStatus()===2){this.mWordWrap=F.call(this,this.mDeviceDataArea.height);BP.Skip=!this.mWordWrap;this.mLevelSize.splice(0,this.mLevelSize.length);BP.Space=AZ.call(this,this.maxLabelLength,0);}}}return BP;}function AY(BQ){var BT=this.mChartContextPtr;if(!BT.mIsGraphMatrix){return false;}var Ba=BT.GetGraphMatrixContext(),BY,Bc,BU,BR=this.mPlotGroupCount,BZ=0,BP=1,Bb=this.getLabelRotation()===J.Rotate90,BS=1,BW,BX=0,BV=0,Bd;for(BW=0;BW<BR;BW+=BS){BY=h.call(this,BW,-3);Bc=a.call(this,BY,BS,false);if(this.maxLabelLength===-1){Bc.Restore({Stringent:false,Restroke:true});}Bd=Bc.GetBoundingRect(true);BU=Bb?Bd.height:Bd.width;if(BW%2===0){BX+=BU;}else{BV+=BU;}}if(BQ===BP){BU=Math.max(BX,BV)+Math.ceil(BR/2)*Ba.getPadding(Ai.kBetweenLabels);}else{if(BQ===BZ){BU=BX+BV+(BR-1)*Ba.getPadding(Ai.kBetweenLabels);}else{BU=BX+BV+(BR-1)*Ba.getPadding(Ai.kBetweenLabels);}}BU+=2*Ba.getPadding(Ai.kLabelToChart);return BU<=this.mDeviceDataArea.width;}function m(){var BR=V.call(this),BP=this.mChartContextPtr,BS=BP.getUniformAxisContext(),BX=this.mAxisInfo.mAxisDirection===Av.AD_X,BQ=BS.CategoryAxis.X,BU=this.mpAxisLabelSet.GetFormatFont(),BV=false;if(this.mIsUniformAxis&&BX&&BQ){var BT=BP.getUniformAxisLabelRotateMode("x");if(BT===J.Automatic){if(BQ.Layout){var BW=this.mCategoryOption;BW.mLabelStyle=BQ.Layout;if(BR){this.restoreLabels();}if(BW.mLabelStyle===1||BW.mLabelStyle===2){BU.mFontRotation=J.Normal;}else{BU.mFontRotation=J.Rotate90;}BV=true;}}else{BV=true;BU.mFontRotation=BT;}}if(!BV){if(BR){this.restoreLabels();if(BR&&this.maxLabelLength===-1){BU.mFontRotation=J.Normal;}}if(this.mIsUniformAxis&&BX&&BU.mFontRotation===J.Normal){if(AY.call(this,1)===false){BU.mFontRotation=J.Rotate90;}}}}function d(BX,BQ,Bb,BW,Bh){var BT=this.mChartContextPtr,BS={Rect2D:BQ,LowMargin:Bb,HighMargin:BW,FixedMargin:Bh,StartIndex:0},Bg;Bg=BA.call(this,BS);if(BT.mIsGraphMatrix===false){return Bg;}BS={Rect2D:BQ,LowMargin:Bb,HighMargin:BW,FixedMargin:Bh,StartIndex:0};var Bd,Bc=this.mCategoryOption.mLabelStyle,Ba=600,BZ=800,Be=this.mLabelInterval;if(BX){Bd=BT.getUniformAxisLabelRotateMode("x");if(Bc!==BG&&Be!==1&&this.mPlotGroupCount<=Ba){if(Bd===J.Automatic||Bd===J.Rotate90){this.mpAxisLabelSet.GetFormatFont().mFontRotation=J.Rotate90;this.mCategoryOption.mLabelStyle=C;}AL.call(this,1);BS.StartIndex=(Be>=3)?A3.call(this):0;Bg=BA.call(this,BS);if(Bc===C&&Be>=3&&BT.GetGraphType()===Y.DssGraphTypeGridChart){BS.StartIndex=A3.call(this);Bg=BA.call(this,BS);}}}else{if(Be>1&&this.mGroupCount>1){var Bf=this.checkShownLabelCount();if(Bf>=2){}else{if(Bf===1){var BU=true,BV=A3.call(this),BR=this.mLabelList[BV],BP=this.mShownLabelList[0],BY=BP&&BR;if(BY){BU=BP.mTripleId.mGroupId!==BR.mTripleId.mGroupId;}if(BY&&BU){if(i.call(this,BR)){BP.mIsShown=false;BR.mIsShown=true;this.mShownLabelList=[];this.mShownLabelList.push(BR);BU=false;}}if(BU){BS.StartIndex=A3.call(this);Bg=BA.call(this,BS);}}}}}return Bg;}function b(BX,BU,BT){var BY=this.mLabelList,BW=[],BQ,BS,Ba,BP,BR=V.call(this),BZ=this.mAxisInfo.mAxisDirection===Av.AD_X,BV;BJ.ResetRect(this.mDeviceDataArea);j.call(this,BW);Ba=A4.call(this,BZ);if(Ba.Skip&&BR){if(BR){this.restoreLabels();if(this.mLowTrim!==undefined&&this.mHighTrim!==undefined){if(this.mLowTrim>=0&&this.mHighTrim>=0){z.call(this,this.mLowTrim,this.mHighTrim);}}}return Ba.Space;}m.call(this);BQ=d.call(this,BZ,BJ,BX,BU,BT);BV=BW.length;for(BS=0;BS<BV;++BS){BP=BQ;if(AN.call(this,BW[BS])){BP+=this.mTickLength;}BB.call(this,BW[BS],this.mDeviceDataArea,BP);}if(this.HasLabelsOnBothSides()){BV=BY.length;for(BS=0;BS<BV;++BS){BY.push(BY[BS]);}}this.mLabelSubIndex=this.mLabelList.length/(this.HasLabelsOnBothSides()?2:1);if(this.hasLabelCreated){o.call(this);}}function AT(BP){switch(this.mAxisInfo.mAxisDirection){case Av.AD_X:switch(BP){case g.ALL_BOTTOM:if(this.mDepthDirection>0&&this.mDepthDirection<180){return true;}break;case g.ALL_TOP:if(this.mDepthDirection>=180&&this.mDepthDirection<360){return true;}break;}break;case Av.AD_Y:switch(BP){case g.ALL_LEFT:if(!(this.mDepthDirection>=90&&this.mDepthDirection<270)){return true;}break;case g.ALL_RIGHT:if(this.mDepthDirection>=90&&this.mDepthDirection<270){return true;}break;}break;}return false;}function Az(BP,BS){var BR,BQ=this.mChartContextPtr.GetGraphMatrixContext(),BT=AN.call(this,BP)?this.mTickLength:0;if(this.mIsGraphMatrix){BT+=BQ.getPadding(Ai.kCategoricalLabelToTick);}else{BT+=this.mLevelSpace*BS;}for(BR=0;BR+1<BS;++BR){BT+=this.mLevelSize[BR];}return BT;}function Aj(){var BU,Bc,BT,BV,BY,BQ,BZ,Be=1,Bd=2,BX=this.mShownLabelList,BP=BX.length,BS=this.mChartContextPtr,BW=BS.getUniformAxisContext(),Bb=this.mIsUniformAxis,Ba=this.mCategoryOption,BR=BW.CategoryAxis.X;v.Reset(0,0);AX.Reset(0,0);for(BU=0;BU<BP;++BU){Bc=x.call(this,BU);BT=BX[BU];if(!(BT.mIsShown)){continue;}BT.mIsOnScreen=p.call(this,BT);if(!BT.mIsOnScreen){continue;}BV=this.getGroupMiddlePos(BT.mTripleId.mGroupId,true);BQ=Be;if(Ba.mLabelStyle===G.CLS_STAGGER&&!(BS.mIsTimeSeriesChart)){BZ=(BU>=this.mLabelSubIndex)?(BU-this.mLabelSubIndex):BU;if(BZ>=Math.floor((this.mLabelSubIndex+1)/2)){BQ=Bd;}if(Bb){if(BR.StartRow&&BR.StartRow===Bd){BQ=Bd+Be-BQ;}}}BY=Az.call(this,Bc,BQ);v.x=0;v.y=1;AX.x=BV;AX.y=k.call(this,Bc,BY,v);if(this.IsVerticalAxis()){AX.swap();}if(this.mUseDepth){if(!AT.call(this,Bc)){AX.x+=this.mDepthOffset.x;AX.y+=this.mDepthOffset.y;}}this.MoveLabel(BT,AX,v,0);}}function Ao(BR,BT,BP){var BQ=this.mAxisCross?this.getGroupMiddlePos(BR):(this.getGroupStartPos(BR)+0.5),BS=this.mAxisCross?this.getGroupMiddlePos(BR+1):(this.getGroupStartPos(BR)+this.getGroupSize()+0.5);BT.y=this.mDeviceDataArea.y;BP.y=this.mDeviceDataArea.y;if(this.IsVerticalAxis()){BT.x=this.mDeviceDataArea.x+this.mDeviceDataArea.width;BP.x=BT.x;BT.y=BQ;BP.y=BS;}else{BT.y=this.mDeviceDataArea.y;BP.y=BT.y;BT.x=BQ;BP.x=BS;}}function AS(BQ,BX,BW,BU,BR,BV){var BS=this.mChartContextPtr.getUtiliy().tripleId,BT,BP=[];BT=BS.create(BQ,this.mTripleId.mSeriesId,M());this.GetOneGridLine(this.mAxisInfo.mAxisLabelsLocation,BW,this.mTickLength,BU,BR,BP);this.GenerateOneLineObject(BT,BP,BV);if(this.HasTwoGridLineParts(BW)){BP.splice(0,BP.length);this.GetOneGridLine(this.IsVerticalAxis()?g.ALL_RIGHT:g.ALL_TOP,BW,this.mTickLength,BU,BR,BP);this.GenerateOneLineObject(BT,BP,BV);}}function Aq(){var BT=Ar.gAxisObjects[this.getIndex()].mMajorId,BS=[],BQ=[],BR,BP;l.call(this,BS,BQ);this.InitObjectSet(BT,Y.GOT_MAJOR_GRID);BP=BS.length;for(BR=0;BR<BP;++BR){AS.call(this,BD.DssGraphO1Major,BR,this.mMajorGrid.mGridStyle,BS[BR],BQ[BR],this.mpMajorGridSet);}}function Ay(){var BQ=[],BT=[],BS=Ar.gAxisObjects[this.getIndex()].mMinorId,BR,BP;u.call(this,BQ,BT);this.InitObjectSet(BS,Y.GOT_MINOR_GRID);BP=BQ.length;for(BR=0;BR<BP;++BR){AS.call(this,BD.DssGraphO1Minor,BR,this.mMinorGrid.mGridStyle,BQ[BR],BT[BR],this.mpMinorGridSet);}}function r(BP){return BP?this.mPlotGroupCount:this.mGroupCount;}function AG(BP){return BP?this.mPlotGroupSize:this.mGroupSize;}mstrmojo.chart.CategoryAxis=mstrmojo.declare(mstrmojo.chart.Axis,null,{scriptClass:"mstrmojo.chart.CategoryAxis",mLevelSpace:4,mLevelSize:null,mShownLabelList:null,mGroupOrder:null,mLabelSubIndex:0,mCategoryOption:null,mAxisCross:false,mGroupSize:-1,mPlotGroupSize:-1,mPlotGroupCount:0,mGroupCount:1,mDatasetPtr:null,mPaddingOnSide:-1,mWordWrap:true,screenWindow:null,init:function AR(BP){this._super(BP);if(this.mChartContextPtr.mIsGraphMatrix){this.mLevelSpace=this.mChartContextPtr.GetGraphMatrixContext().getPadding(Ai.kBetweenLabelLines);}this.mLevelSize=[];this.mShownLabelList=[];this.mGroupOrder=[];this.mCategoryOption={mLabelStyle:G.CLS_AUTOMATIC,mManualSkip:0};if(this.mChartContextPtr.mIsUniformAxisMode){this.mIsShown=this.mIsUniformAxis;}if(BP.AxisDirection===Av.AD_X){this.mAxisInfo.mAxisLabelsLocation=g.ALL_BOTTOM;}if(BP.AxisDirection===Av.AD_Y){this.mAxisInfo.mAxisLabelsLocation=g.ALL_LEFT;}this.mDatasetPtr=null;this.mWordWrap=false;this.LoadProperties();},SetDataset:function AB(BP){this.mGroupSize=-1;var BQ=this.mDatasetPtr=BP;if(BQ!==null){if(BK.call(this)){this.mGroupCount=BQ.GetSeriesCount();}else{this.mGroupCount=BQ.GetGroupCount();}this.mPlotGroupCount=this.mGroupCount;}},getSubGroupMiddlePos:function Ax(BT,BS,BQ,BU){if(BQ<=0){return 0;}BU=BU||false;if(BQ===1){return this.getGroupMiddlePos(BT);}var BP=this.getGroupSize(BU),BR=this.getGroupStartPos(BT,BU);BR+=BP/(2*BQ);return BR+BS*(BP/BQ);},getGroupMiddlePos:function A9(BP,BQ){BQ=(BQ!==undefined)?BQ:false;return Math.round(this.getGroupStartPos(BP,BQ)+this.getGroupSize()/2);},getFloatGroupMiddlePos:function BL(BP,BQ){BQ=(BQ!==undefined)?BQ:false;return this.getGroupStartPos(BP,BQ)+this.getGroupSize()/2;},getGroupStartPos:function f(BQ,BR){BR=(BR!==undefined)?BR:false;var BP=0;switch(this.mAxisInfo.mAxisDirection){case Av.AD_X:BP=this.mDeviceDataArea.x+AK.call(this);break;case Av.AD_Y:BP=this.mDeviceDataArea.y+AK.call(this);break;}if(this.mChartContextPtr.mIsGraphMatrix){if(this.mAxisCross){BP-=this.getGroupSize(BR)*0.5;}}else{if(this.mAxisCross){BP-=this.getGroupSize(BR)*0.5;}}return BP+this.getGroupSize(BR)*BQ;},getGroupSize:function T(BQ){BQ=(BQ!==undefined)?BQ:false;var BP=AG.call(this,BQ);if(BP!==-1){return BP;}BP=0;var BR=r.call(this,BQ);if(this.mDatasetPtr!==null){if(!this.mAxisCross){if(BR===0){BR=1;}BP=P.call(this)/BR;}else{if(BR>1){BP=P.call(this)/(BR-1);}else{BP=P.call(this)*2;}}}return BP;},GenerateMapAndList:function y(){var BU,BW,BR=this.mGraphObjectList,BT=this.mpAxisLabelSet,BS=this.mLabelList,BP;if(this.mIsShown===false){return ;}Ah.call(this);if(BS.length!==0){Aj.call(this);if(this.mChartContextPtr.mIsGraphMatrix){var BQ=[],BV=Ar.gAxisObjects[this.getIndex()].mLabelId;for(BU=0;BU<BR.length;BU++){if(BR[BU]&&BR[BU].mTripleId.mObjectId!==BV.mObjectId){BQ.push(BR[BU]);}}BR=this.mGraphObjectList=[];BT.ClearCollection();BP=BS.length;for(BU=0;BU<BP;++BU){if(BS[BU]){BR.push(BS[BU]);BT.AddGraphObject(BS[BU]);}}for(BU=0;BU<BQ.length;BU++){BR.push(BQ[BU]);}}else{BP=BS.length;for(BU=0;BU<BP;++BU){if(BS[BU]){BR.push(BS[BU]);BT.AddGraphObject(BS[BU]);}}}}if(this.mAxisInfo.mShowAxisTitle){BW=this.getAdjustedTitleArea();this.UpdateTitleLocation(BW);}},getAdjustedTitleArea:function E(){var BS=new Ar.Rect2D({Rect2D:this.mDeviceDataArea}),BR,BQ,BP=this.mLevelSize.length;if(this.IsVerticalAxis()){BQ=g.ALL_LEFT;if(BQ===this.mAxisInfo.mAxisLabelsLocation||this.mAxisInfo.mAxisLabelsLocation===g.ALL_LEFT_RIGHT){BS.x-=AN.call(this,BQ)?this.mTickLength:0;for(BR=0;BR<BP;++BR){BS.x-=this.mLevelSpace;BS.x-=this.mLevelSize[BR];}if(!AT.call(this,BQ)){BS.x+=this.mDepthOffset.x;}}}else{BQ=g.ALL_BOTTOM;if(BQ===this.mAxisInfo.mAxisLabelsLocation||this.mAxisInfo.mAxisLabelsLocation===g.ALL_BOTTOM_TOP){BS.height+=AN.call(this,BQ)?this.mTickLength:0;for(BR=0;BR<BP;++BR){BS.height+=this.mLevelSpace;BS.height+=this.mLevelSize[BR];}if(!AT.call(this,BQ)){BS.height+=this.mDepthOffset.y;}}}return BS;},generateInterlacedSection:function AW(){var BT=new Ar.TripleId({ObjectId:this.GetInterlacedGridId(),SeriesId:AQ,GroupId:AO}),BQ,BP=[],BR,BS=this.mGroupCount;this.InitObjectSet(BT,Y.GOT_INTERLACED_GRID);for(BQ=0;BQ<BS;BQ+=2){if(this.mAxisCross&&BQ===BS-1){continue;}BP.splice(0,BP.length);this.getInterlacedSectionPolygon(BQ,BP);BR=new Ar.PolygonObject({TripleId:BT,GraphObjectManager:this,Polygon:BP,GraphCollectionObject:this.mpInterlacedGridSet});this.mpInterlacedGridSet.AddGraphObject(BR);this.mManagerGraphObjectList.push(BR);}},getInterlacedSectionPolygon:function q(BU,BY){var BV=this.mUseDepth,BS=this.mDeviceDataArea,BT=this.mDepthDirection,BP=this.mDepthOffset,BX=new Ar.Point2D(),BW=new Ar.Point2D(),BR,BQ;Ao.call(this,BU,BX,BW);BR=new Ar.Point2D({Point2D:BX});BQ=new Ar.Point2D({Point2D:BW});if(!this.IsVerticalAxis()){BR.y=BS.GetBottomLeft().y;BQ.y=BR.y;if(BV&&BT>=180&&BT<360){BR.swapPoints(BX);BQ.swapPoints(BW);}}else{BR.x=BS.x;BQ.x=BR.x;if(BV&&BT>=90&&BT<270){BR.swapPoints(BX);BQ.swapPoints(BW);}}if(BV){BY.push(BR);BY.push(BQ);BY.push(BQ.Shifted(BP));BY.push(BW.Shifted(BP));BY.push(BX.Shifted(BP));BY.push(BR.Shifted(BP));}else{BY.push(BR);BY.push(BQ);BY.push(BW);BY.push(BX);}},AdjustTitleArea:function Ap(BP){if(this.mAxisInfo.mShowAxisTitle){this.ReserveTitleArea(BP);}},AdjustDataArea:function A(BP,BR,BT,BV){var BU;if(!this.mIsShown){return ;}if(BR===undefined){BR=1000;}if(BT===undefined){BT=1000;}if(BV===undefined){BV=false;}if(this.mUseDepth){this.ReserveDepthAxisLine(BP);}if(this.mDatasetPtr!==null&&this.mAxisInfo.mShowAxisLabels){if(this.mUseDepth){var BQ=this.TrimMarginsForDepthAxis(BR,BT);BR=BQ.LowMargin;BT=BQ.HighMargin;BT=BQ.HighMargin;}BU=Ar.gAxisObjects[this.getIndex()].mLabelId;this.InitObjectSet(BU,Y.GOT_AXIS_LABEL);if(this.mChartContextPtr.mIsGraphMatrix&&this.mAxisInfo.mAxisDirection===Av.AD_Y){this.mpAxisLabelSet.GetFormatFont().mFontRotation=J.Normal;}this.SetDeviceDataArea(BP);b.call(this,BR,BT,BV);var BS=this.mDeviceDataArea;BS.width=Math.max(BS.width,0);BS.height=Math.max(BS.height,0);BP.ResetRect(BS);}},generateGridsByArea:function w(BP){if(BP){if(this.mMajorGrid.mShowGridLines){Aq.call(this);}if(this.mMinorGrid.mShowGridLines){Ay.call(this);}}else{if(this.mAxisInfo.mUseInterlacedGrids){this.generateInterlacedSection();}}},getMinMaxLogicalCoord:function An(){if(this.mAxisCross){return{min:1,max:(this.mGroupCount>1)?this.mGroupCount:2};}return{min:0.5,max:this.mGroupCount+0.5};},GenerateGridsOnMiddleWall:function N(BQ,BP){var BR=this.mDeviceDataArea;this.mDeviceDataArea=BQ;n.call(this);O.call(this);Af.call(this);if(!this.mManagerGraphObjectList.empty()){this.MoveGraphObjectList(BP);}this.mDeviceDataArea=BR;},getTotalGroupCount:function X(){var BQ=this.mDatasetPtr.GetSliceFlag(),BP;this.mDatasetPtr.EnableSlices(false);BP=this.mDatasetPtr.GetGroupCount();this.mDatasetPtr.EnableSlices(BQ);return BP;},LoadProperties:function Ab(){var BS,BQ;this._super();if(!this.mIsShown){return ;}var BR=this.mChartContextPtr,BP=this.mCategoryOption;if(!BR.mIsGraphMatrix){BS=new Ar.TripleId({ObjectId:this.mTripleId.mObjectId});BQ=BR.GetProperty(BC.DssGraphAxisAutoFit,BS);if(BQ!==null&&BQ!==undefined){if(BQ!==false){BP.mLabelStyle=G.CLS_NORMAL;}else{BQ=BR.GetProperty(BC.DssGraphAxisStagger,BS);if(BQ!==null&&BQ!==undefined){if(BQ!==false){BP.mLabelStyle=G.CLS_STAGGER;}else{BP.mLabelStyle=G.CLS_MANUAL;BQ=BR.GetProperty(BC.DssGraphAxisScaleFreq,BS);if(BQ){BP.mManualSkip=BQ;if(BP.mManualSkip<1){BP.mManualSkip=1;}}}}}}switch(BR.GetGraphMajorType()){case Al.GMT_RADAR:case Al.GMT_3D_CATEGORY:return ;case Al.GMT_CATEGORY:if(BR.isParetoChart()){return ;}break;default:break;}}},TrimAxisPadding:function R(BT){var BU=this.mChartContextPtr,BQ=BU.getUniformAxisContext(),BS=BQ.CategoryAxis;if(BU.mIsGraphMatrix===false){return ;}var BR,BP="X";if(this.IsVerticalAxis()){BP="Y";}if(this.mIsUniformAxis===false){BR=BS[BP];this.mHighTrim=BR.Trims[1]||0;this.mLowTrim=BR.Trims[0]||0;}s.call(this,this.mHighTrim,this.mLowTrim,BT);},ResetAxisPadding:function D(){this.mPaddingOnSide=-1;},getStatus:function K(){var BS=0,BP=1,BT=2,BR=this.getLabelRotation(),BQ=this.mLabelInterval;if(BR===J.Rotate90){return BT;}if(BQ===1){return BS;}if(BQ===2&&this.mCategoryOption.mLabelStyle===G.CLS_STAGGER){return BP;}return BT;},getGroupSlotAt:function A5(BQ){var BR=this.getGroupStartPos(0),BP=this.getGroupSize();return Math.ceil((BQ-BR)/BP)-1;},getGridLinePosition:function A0(){return[];},getBandings:function S(){var BW=[],BV=0,BS=0,BR,BU=this.mGroupCount,BT=this.mChartContextPtr,BQ;if(BU===1){if(this.IsVerticalAxis()){BS=BT.mGraphHeight;}else{BS=BT.mGraphWidth;}BW.push({Start:BV,Size:BS});}else{var BP=this.getGroupSize(true);for(BQ=0;BQ<BU;++BQ){if(BQ===0){BV=0;BS=this.getGroupStartPos(1,true);}else{if(BQ===BU-1){if(this.IsVerticalAxis()){BS=BT.mGraphHeight;}else{BS=BT.mGraphWidth;}BR=BW[BQ-1];BV=BR.Start+BR.Size;BS=BS-BV;}else{BR=BW[BQ-1];BV=BR.Start+BR.Size;BS=BP;}}BW.push({Start:BV,Size:BS});}}return BW;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphRegressionType");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumDSSGraphOffScaleType","EnumLineJoinType");mstrmojo.requiresClsP("mstrmojo.chart","GraphTrendLineOptions","GraphObject","Axis","FormatLine","Point2D","BezierCurve","CurveLineObject");mstrmojo.requiresCls("mstrmojo.VisUtility");var f=mstrmojo.chart,g=f.model.enums,d=mstrmojo.VisUtility,Y=f.enums,N=Y.EnumDSSGraphOffScaleType,U=g.EnumDSSGraphType,E=g.EnumShapeType,c=Y.EnumLineJoinType,C=Y.EnumLineStyle,D=g.EnumDSSGraphRegressionType,F=1e-10,K=100,I=0.25,J=0.01,h=0.15,O=0.3,a=1,P=1.001,B=0,R=1;function Q(i){var j=i.x;i.x=i.y;i.y=j;}function H(n){var k,j,m,l,p=this.mCoefficients,o=this.mTrendLineOptions.mRegressionType;j=n.length;for(k=0;k<j;++k){m=n[k];if(typeof (m)==="number"){p.push(m);}else{if(typeof (m)==="string"&&o===D.DssGraphRegressionExp){if(m.indexOf("Ln")===0){l=m.substr(2);m=parseFloat(l);if(isNaN(m)){return false;}this.subType=R;p.push(m);}}else{return false;}}}if((j===1)&&(o===D.DssGraphRegressionExp||o===D.DssGraphRegressionLog||o===D.DssGraphRegressionPow)){this.deformed=true;}return true;}function X(l,k){var i=l.mOptions.mOffScaleType,j;l.mOptions.mOffScaleType=N.DssGraphOffScaleShow;j=l.GetPositionByValue(k);l.mOptions.mOffScaleType=i;return j;}function b(AC){var o=this.mChartContextPtr,w=this.mFormatLinePtr.mLineStyle,s,r,AD;if(this.mFormatLinePtr.mLineStyle===C.LS_SOLID||o.mUseAnimation){return ;}o.NewPath();var p=AC.length;if(p<2){return ;}var k=f.FormatLine.getLinePattern(w),q=k.length,v=0,m=0,l=[],u=[];for(s=0;s<p;++s){u.push(0);l.push(0);}var AB=AC[0].x;var AA=AC[0].y;var z=0.05;if(w===C.LS_DOT_DOT_DOT){z=0.03;k[q-1]*=3;}else{if(w===C.LS_DOT){z=0.005;}}for(AD=0;AD<=1;AD+=z/p){for(s=1;s<p;++s){for(r=0;r<p-s;++r){if(s===1){l[r]=AC[r].x*(1-AD)+AC[r+1].x*AD;u[r]=AC[r].y*(1-AD)+AC[r+1].y*AD;continue;}l[r]=l[r]*(1-AD)+l[r+1]*AD;u[r]=u[r]*(1-AD)+u[r+1]*AD;}}m+=Math.sqrt((AB-l[0])*(AB-l[0])+(AA-u[0])*(AA-u[0]));if(m>=k[v]){if(v%2===0){if(this.mIsVertical){o.MoveTo(AB,AA);o.LineTo(l[0],u[0]);}else{o.MoveTo(AA,AB);o.LineTo(u[0],l[0]);}}v=(v+1)%q;m=0;AB=l[0];AA=u[0];}}}function A(m,j,k,o,l){var n,i={};i.usedDefaultValueX=false;switch(m){case D.DssGraphRegressionLog:n=j;j*=k;if(j-n>l){j=n+l;i.usedDefaultValueX=true;}i.startX=j;break;case D.DssGraphRegressionExp:j+=k/Math.pow(o,j*0.25);i.startX=j;break;case D.DssGraphRegressionPoly:j+=k;i.startX=j;break;}return i;}function e(i,x,u,p,w,t,n,k){var z=0,m,l=0,s,q,j,r,v,o,y;for(v=x;v<u;){k.push(v);k.push(G.call(this,v));o=v;y=A.call(this,i,v,p,n,w);v=y.startX;r=y.usedDefaultValueX;if(!r){z=L.call(this,o);l=L.call(this,v);}m=Math.abs(z);s=Math.abs(l-z);if(t===0){q=this.mpXAxis.GetPositionByValue(o);j=this.mpXAxis.GetPositionByValue(v);}while(!r&&(v<u)&&((t===0&&Math.abs(j-q)<5)||(t!==0&&Math.abs(v-o)<t)||(m<=K&&m>I&&s<h*m)||(m<=I&&m>J&&s<O*m)||(m<=J&&s<a*m))){y=A.call(this,i,v,p,n,w);v=y.startX;r=y.usedDefaultValueX;if(!r){l=L.call(this,v);s=Math.abs(l-z);}if(t===0){j=this.mpXAxis.GetPositionByValue(v);}}if(v>=u){k.push(u);k.push(G.call(this,u));return ;}}}function W(){var m=this.mTrendLineOptions.mRegressionType,w,j=this.mTrendLineDataValues,q=this.mCoefficients,v=q.length-1,k=j.length,AD=[],l,AA,u,z,s,AE,AC,n,p,y,AB=16,x,o;n=[];for(w=0;2*w<k-k%2;++w){if(j[2*w]!==null&&j[2*w+1]!==null){AD.push(j[2*w]);AD.push(j[2*w+1]);}}l=AD.length;if(l<2){this.isValid=false;return ;}AA=AD[0];u=AD[l-l%2-2];x=(u-AA)/AB;z=G.call(this,AA);s=G.call(this,u);AE=this.mpXAxis.GetPositionByValue(AA);AC=this.mpYAxis.GetPositionByValue(z);this.startPoint={x:AE,y:AC};AE=this.mpXAxis.GetPositionByValue(u);AC=this.mpYAxis.GetPositionByValue(s);this.endPoint={x:AE,y:AC};if(x<F){this.deformed=true;}if(this.deformed){n.push(AD[0]);n.push(AD[1]);n.push(AD[l-l%2-2]);n.push(AD[l-l%2-1]);}else{var t=this.mpXAxis.GetValueForUnit(),r;if(t!==undefined&&t!==null){r=5*t;}else{r=0;}switch(m){case D.DssGraphRegressionNone:break;case D.DssGraphRegressionLinear:n=AD;break;case D.DssGraphRegressionLog:if(q[1]!==0){p=1+Math.SQRT2/Math.pow(Math.abs(q[1]),0.25);}p=Math.max(p,P);e.call(this,m,AA,u,p,x,r,0,n);break;case D.DssGraphRegressionExp:if(this.subType===R){o=Math.pow(Math.E,q[1]);}else{o=q[1];}if((q[0]!==0)&&(o!==0)){p=Math.pow(24/Math.abs(q[0]),0.25)/Math.abs(Math.log(o));p=Math.min(p,x);p=Math.max(p,r);e.call(this,m,AA,u,p,x,r,o,n);break;}else{for(y=AA;y<u;){n.push(y);n.push(G.call(this,y));y+=x;if(y>=u){n.push(u);n.push(G.call(this,u));break;}}}break;case D.DssGraphRegressionPow:for(y=AA;y<u;){n.push(y);n.push(G.call(this,y));y+=x;if(y>=u){n.push(u);n.push(G.call(this,u));break;}}break;case D.DssGraphRegressionPoly:p=1;if(v>1){p=1/Math.pow(Math.abs(q[v]),1/v);}else{p=x;}p=Math.min(x,p);p=Math.max(p,r);e.call(this,m,AA,u,p,x,r,0,n);break;default:break;}}this.mCalcValues=n;}function G(m){var l=this.mTrendLineOptions.mRegressionType,o,n=this.mCoefficients,j,k;switch(l){case D.DssGraphRegressionNone:o=null;break;case D.DssGraphRegressionLinear:o=null;break;case D.DssGraphRegressionLog:o=n[0]+n[1]*Math.log(m);break;case D.DssGraphRegressionExp:switch(this.subType){case B:o=n[0]*Math.pow(n[1],m);break;case R:o=n[0]*Math.pow(Math.E,n[1]*m);break;}break;case D.DssGraphRegressionPow:o=n[0]*Math.pow(m,n[1]);break;case D.DssGraphRegressionPoly:j=n.length-1;o=n[0];for(k=1;k<=j;++k){o+=n[k]*Math.pow(m,k);}break;default:o=null;break;}return o;}function L(m){var l=this.mTrendLineOptions.mRegressionType,o,n=this.mCoefficients,j,k;switch(l){case D.DssGraphRegressionNone:o=null;break;case D.DssGraphRegressionLinear:o=null;break;case D.DssGraphRegressionLog:o=n[1]/m;break;case D.DssGraphRegressionExp:switch(this.subType){case B:o=n[0]*Math.log(n[1])*Math.pow(n[1],m);break;case R:o=n[0]*n[1]*Math.pow(Math.E,n[1]*m);}break;case D.DssGraphRegressionPow:o=n[0]*n[1]*Math.pow(m,n[1]-1);break;case D.DssGraphRegressionPoly:j=n.length-1;o=0;for(k=1;k<=j;++k){o+=n[k]*k*Math.pow(m,k-1);}break;default:o=null;break;}return o;}function T(p,m,o,n,j){var i,l=o,k=n;if(p){if(l>j){if(k>m&&k<j){l=(m+2*k)/3;}else{l=(m+2*j)/3;}}if(k<m||k<l){k=(l+j)/2;}}else{if(l<j){if(k<m&&k>j){l=(m+2*k)/3;}else{l=(m+2*j)/3;}}if(k>m||k>l){k=(l+j)/2;}}i={control1:l,control2:k};return i;}function S(p,k,m,l,j){var i,n=this.mCoefficients,o;if(p===D.DssGraphRegressionPow){if((n[1]<0&&n[0]>0)||(n[1]>0&&n[0]<0)){i=T(false,k,m,l,j);}else{if((n[1]>0&&n[0]>0)||(n[1]<0&&n[0]<0)){i=T(true,k,m,l,j);}}}else{if(p===D.DssGraphRegressionLog){if(n[1]>0){i=T(true,k,m,l,j);}else{if(n[1]<0){i=T(false,k,m,l,j);}}}else{if(p===D.DssGraphRegressionExp){if(this.subType===R){o=Math.pow(Math.E,n[1]);}else{o=n[1];}if((o<1&&n[0]>0)||(o>1&&n[0]<0)){i=T(false,k,m,l,j);}else{if((o>1&&n[0]>0)||(o<1&&n[0]<0)){i=T(true,k,m,l,j);}}}}}if(i===undefined||i===null){i={control1:m,control2:l};}return i;}mstrmojo.chart.TrendLineObject=mstrmojo.declare(mstrmojo.chart.GraphObject,null,{scriptClass:"mstrmojo.chart.TrendLineObject",mpXAxis:null,mpYAxis:null,mTrendLineOptions:null,mDataArea:null,mDepthOffset:null,mIsVertical:false,mTextPtr:null,mRealObjectId:U.DssGraphTypeReserved,mCurveLinePtr:null,mMinXLogical:0,mMaxXLogical:0,mMinYLogical:0,mMaxYLogical:0,mTrendLineType:0,mCoefficients:[],mTrendLineDataValues:[],mCalcValues:[],mBezierCurves:[],identity:null,isValid:null,subType:B,deformed:false,startPoint:{},midPoint:{},endPoint:{},init:function Z(j){var i=0,k;this._super(j);this.deformed=false;this.mCoefficients=[];this.mTrendLineDataValues=[];if(j){if(j.RealObjectId){this.mRealObjectId=j.RealObjectId;}if(j.XAxis){this.mpXAxis=j.XAxis;}if(j.YAxis){this.mpYAxis=j.YAxis;}if(j.TrendLineOptions){this.mTrendLineOptions=j.TrendLineOptions;}this.mDataArea=j.DataArea||new f.Rect2D();this.mDepthOffset=j.DepthOffset||new f.Point2D();this.mIsVertical=j.IsVertical||false;if(j.Coefficients){this.isValid=H.call(this,j.Coefficients);}else{this.isValid=false;}if(j.TrendLineValues){this.mTrendLineDataValues=j.TrendLineValues;}if(j.Identity){this.identity=j.Identity;}}this.startPoint={};this.midPoint={};this.endPoint={};this.mCalcValues=[];W.call(this);this.mBezierCurves=[];if(!this.mIsVertical){i=this.mDepthOffset.x;this.mDepthOffset.x=this.mDepthOffset.y;this.mDepthOffset.y=i;}if(this.mpXAxis){k=this.mpXAxis.GetMinMaxLogicalCoord();this.mMinXLogical=k.Min;this.mMaxXLogical=k.Max;}if(this.mpYAxis){k=this.mpYAxis.GetMinMaxLogicalCoord();this.mMinYLogical=k.Min;this.mMaxYLogical=k.Max;}},Draw:function V(){var j=this.mChartContextPtr,n=this.mBezierCurves,l=j.GetLineJoin(),m,t,q=[];if(!this.isValid){return ;}j.SetLineJoin(c.LJT_ROUND);this.SetLineWidth();t=n.length;if(this.mFormatLinePtr.mLineStyle===C.LS_SOLID||j.mUseAnimation){j.NewPath();n[0].MoveToStart(j);for(m=0;m<t;++m){n[m].CurveToEnd(j);}}else{for(m=0;m<t;++m){n[m].GetControlPoints(q);b.call(this,q);this.ApplyLineFormat();}}if(this.isClosePath){j.ClosePath();}if(this.mFormatLinePtr.mLineStyle===C.LS_SOLID||j.mUseAnimation){this.ApplyLineFormat();}j.SetLineJoin(l);for(m=0;m<t;++m){var k=n[m],s=new f.Point2D({Point2D:k.mP0}),r=new f.Point2D({Point2D:k.mP1}),p=new f.Point2D({Point2D:k.mP2}),o=new f.Point2D({Point2D:k.mP3});if(!this.mIsVertical){s.swap();r.swap();p.swap();o.swap();Q.call(this,this.startPoint);Q.call(this,this.midPoint);Q.call(this,this.endPoint);}q.push(s);q.push(r);q.push(p);q.push(o);}j.FinishDrawCurves(q,this.mTripleId,this.identity,this.startPoint,this.midPoint,this.endPoint);},CreateTrendLine:function M(){var AQ,AP,m=this.mTrendLineOptions,AE=m.mRegressionType,y,x,k,AW,AL,AN=[],AO,AC=new f.Point2D(),t=new f.Point2D(),AG,AF,AK,AJ,v,u,AS,AI,AV,w,AT,AB,AA,s,r,n,l,z,AR=this.mTrendLineDataValues,AD=AR.length,o,q,AM=this.mBezierCurves,AH=0,AU,p=null;if(!this.isValid){return p;}AD=AD-(AD%2);if(AE===D.DssGraphRegressionLinear){if(m.mSeasonal){for(AQ=0;2*AQ<AD;++AQ){y=AR[2*AQ];x=AR[2*AQ+1];if(y!==null&&y!==undefined&&x!==null&&x!==undefined){k=X.call(this,this.mpXAxis,y);AW=X.call(this,this.mpYAxis,x);if(k!==undefined&&k!==null&&AW!==undefined&&AW!==null){AL=new f.Point2D({x:k,y:AW});AN.push(AL);}else{d.visPrint("Trendline point calculation abnormal:");d.visPrint("\tdata point #: "+(2*AQ)+" and "+(2*AQ+1));d.visPrint("\tvalueX = "+y+", valueY = "+x);d.visPrint("\tx = "+k+", y = "+AW);}}}if(AN.length>=2){AB=AN[0].x;s=AN[AD-1].x;n=(AB+s)/2;for(AQ=0;AQ<AD;++AQ){if(AN[AQ].x===n){l=AN[AQ].y;break;}else{if(AQ<AD-1&&AN[AQ].x<n&&AN[AQ+1].x>n){z=(AN[AQ+1].y-AN[AQ].y)/(AN[AQ+1].x-AN[AQ].x);l=AN[AQ].y+z*(n-AN[AQ].x);break;}}}this.midPoint.x=n;this.midPoint.y=l;}}else{for(AQ=0;AQ*2<AD;++AQ){y=AR[2*AQ];x=AR[2*AQ+1];if(y!==null&&y!==undefined&&x!==null&&x!==undefined){k=X.call(this,this.mpXAxis,y);AW=X.call(this,this.mpYAxis,x);if(k!==undefined&&k!==null&&AW!==undefined&&AW!==null){AL=new f.Point2D({x:k,y:AW});AN.push(AL);break;}else{d.visPrint("Trendline point calculation abnormal:");d.visPrint("\tdata point #: "+(2*AQ)+" and "+(2*AQ+1));d.visPrint("\tvalueX = "+y+", valueY = "+x);d.visPrint("\tx = "+k+", y = "+AW);}}}for(AP=(AD/2)-1;AP>AQ;--AP){y=AR[2*AP];x=AR[2*AP+1];if(y!==null&&y!==undefined&&x!==null&&x!==undefined){k=X.call(this,this.mpXAxis,y);AW=X.call(this,this.mpYAxis,x);if(k!==undefined&&k!==null&&AW!==undefined&&AW!==null){AL=new f.Point2D({x:k,y:AW});AN.push(AL);break;}else{d.visPrint("Trendline point calculation abnormal:");d.visPrint("\tdata point #: "+(2*AP)+" and "+(2*AP+1));d.visPrint("\tvalueX = "+y+", valueY = "+x);d.visPrint("\tx = "+AL.x+", y = "+AL.y);}}}if(AN.length>=2){n=(AN[0].x+AN[1].x)/2;l=(AN[0].y+AN[1].y)/2;this.midPoint.x=n;this.midPoint.y=l;}}if(AN.length>=2){AO=new f.PolyLineObject({TripleId:this.mTripleId,GraphObjectManager:this,PolyLine:AN,Shape:E._LINE,Identity:this.identity,startPoint:this.startPoint,midPoint:this.midPoint,endPoint:this.endPoint});}p=AO;}else{o=this.mCalcValues;q=o.length;if(this.deformed){y=o[0];x=o[1];if(y!==null&&y!==undefined&&x!==null&&x!==undefined){k=X.call(this,this.mpXAxis,y);AW=X.call(this,this.mpYAxis,x);if(k!==undefined&&k!==null&&AW!==undefined&&AW!==null){AL=new f.Point2D({x:k,y:AW});AN.push(AL);}else{d.visPrint("Trendline point calculation abnormal:");d.visPrint("\tdata point #: 0 and 1");d.visPrint("\tvalueX = "+y+", valueY = "+x);d.visPrint("\tx = "+k+", y = "+AW);}}y=o[2];x=o[3];if(y!==null&&y!==undefined&&x!==null&&x!==undefined){k=X.call(this,this.mpXAxis,y);AW=X.call(this,this.mpYAxis,x);if(k!==undefined&&k!==null&&AW!==undefined&&AW!==null){AL=new f.Point2D({x:k,y:AW});AN.push(AL);}else{d.visPrint("Trendline point calculation abnormal:");d.visPrint("\tdata point #: 2 and 3");d.visPrint("\tvalueX = "+y+", valueY = "+x);d.visPrint("\tx = "+AL.x+", y = "+AL.y);}}if(AN.length>=2){n=(AN[0].x+AN[1].x)/2;l=(o[0].y+AN[1].y)/2;this.midPoint.x=n;this.midPoint.y=l;AO=new f.PolyLineObject({TripleId:this.mTripleId,GraphObjectManager:this,PolyLine:AN,Shape:E._LINE,Identity:this.identity,startPoint:this.startPoint,midPoint:this.midPoint,endPoint:this.endPoint});}p=AO;}else{for(AQ=0;2*AQ+3<2*q;++AQ){AG=o[2*AQ];AF=o[2*AQ+1];AK=o[2*AQ+2];AJ=o[2*AQ+3];if(AG!==undefined&&AG!==null&&AF!==undefined&&AF!==null&&AK!==undefined&&AK!==null&&AJ!==undefined&&AJ!==null){w=L.call(this,AG);AT=L.call(this,AK);v=AF+w*((2*AG+AK)/3-AG);u=AJ+AT*((AG+2*AK)/3-AK);if(AE===D.DssGraphRegressionExp||AE===D.DssGraphRegressionLog||AE===D.DssGraphRegressionPow){AV=S.call(this,AE,AF,v,u,AJ);v=AV.control1;u=AV.control2;}AB=X.call(this,this.mpXAxis,AG);AA=X.call(this,this.mpYAxis,AF);s=X.call(this,this.mpXAxis,AK);r=X.call(this,this.mpYAxis,AJ);AS=X.call(this,this.mpYAxis,v);AI=X.call(this,this.mpYAxis,u);if(AB!==undefined&&AB!==null&&AA!==undefined&&AA!==null&&s!==undefined&&s!==null&&r!==undefined&&r!==null&&AS!==undefined&&AS!==null&&AI!==undefined&&AI!==null){AC=new f.Point2D({x:AB,y:AA});t=new f.Point2D({x:s,y:r});AM.push(new f.BezierCurve({P0:AC,F1:AS,F2:AI,P3:t,IsVertical:this.mIsVertical}));}else{d.visPrint("Trendline point calculation abnormal:");if(AB===undefined||AB===null||AA===undefined||AA===null){d.visPrint("\tdata point #: "+(2*AQ)+" and "+(2*AQ+1));d.visPrint("\tvalueX = "+AG+", valueY = "+AF);d.visPrint("\tx = "+AB+", y = "+AA);}if(s===undefined||s===null||r===undefined||r===null){d.visPrint("\tdata point #: "+(2*AQ+2)+" and "+(2*AQ+3));d.visPrint("\tvalueX = "+AK+", valueY = "+AJ);d.visPrint("\tx = "+s+", y = "+r);}}}}AH=AM.length;AB=AM[0].mP0.x;s=AM[AH-1].mP3.x;n=(AB+s)/2;AP=-1;for(AQ=0;AQ<AH;++AQ){if(AM[AQ].mP0.x===n){l=AM[AQ].mP0.y;AP=AQ;break;}else{if(AM[AQ].mP3.x===n){l=AM[AQ].mP3.y;AP=AQ+1;break;}else{if(AM[AQ].mP0.x<n&&AM[AQ].mP3.x>n){AP=AQ;break;}}}}if(l!==undefined){this.midPoint.x=n;this.midPoint.y=l;}else{if(AP<AH){l=AM[AP].evaluate(n);this.midPoint.x=n;this.midPoint.y=l;}}AU=new f.CurveLineObject({TripleId:this.mTripleId,GraphObjectManager:this,IsVertical:true,Identity:this.identity,startPoint:this.startPoint,midPoint:this.midPoint,endPoint:this.endPoint});for(AQ=0;AQ<AH;++AQ){AU.AddBezierCurveLine(AM[AQ]);}p=AU;}}return p;}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.requiresClsP("mstrmojo.chart","Axis","ChartAdvFormat","NumberObject","AxisObject","Vector2D","ChartConstants","Point2D");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumDSSGraphOffScaleType","EnumAnchorPoint","EnumAxisLabelsLocation","EnumAxisDirection","EnumGraphObjectType","EnumNumberCategory","EnumCollectionType","EnumRectExpandDirection");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSExtraGraphProperty","EnumDSSGraphFontRotation","EnumDSSGraphGridLineType","EnumDSSGraphMarkerShape");mstrmojo.requiresCls("mstrmojo.chart.common.Utility");mstrmojo.requiresCls("mstrmojo.VisUtility");mstrmojo.requiresCls("mstrmojo.gm.GMUtility");var AH=mstrmojo.hash,BU=mstrmojo.chart,BQ=BU.ChartConstants,BA=BU.enums,BN=mstrmojo.VisUtility,a=BA.EnumGraphMajorType,Am=BA.EnumDSSGraphOffScaleType,Z=BA.EnumAnchorPoint,T=BA.EnumAxisLabelsLocation,g=BA.EnumAxisDirection,AI=BA.EnumGraphObjectType,q=BA.EnumCollectionType,BP=BU.model,AS=BP.enums,e=AS.EnumDSSGraphMarkerShape,Aw=AS.EnumDSSGraphType,Az=AS.EnumDSSGraphProperty,A1=AS.EnumDSSGraphObject,A0=AS.EnumDSSExtraGraphProperty,BE=AS.EnumDSSGraphFontRotation,n=AS.EnumDSSGraphGridLineType,o=BA.EnumRectExpandDirection,S=BA.EnumGraphMatrixMajorGraphType,AL=BU.common.Utility,A4=mstrmojo.gm,AA=A4.GMUtility,BT=0,AE=1e-14,y=10000,BR=0.1;var AC=new BU.Rect2D(),Bd=new BU.Rect2D(),N=new BU.Rect2D(),Q=null,E=null,x=null,U=null,t=new BU.TripleId();function Av(Be){switch(Be){case A1.DssGraphY2Body:case A1.DssGraphX2Body:return true;}return false;}function BK(Bl,Bk,Bg){var Bj=Bl,Bh=10,Be=this.mChartContextPtr,Bi=Be.mGraphWidth,Bf=Be.mGraphHeight,Bn=this.IsVerticalAxis();if(Bg===undefined){var Bm=Bn?Bf:Bi;if((Bn^Bk)===0){Bg=0.5*Bl;}else{Bg=0.5*(Bm-Bl);}}Bg=Bk?-Bg:Bg;if(!Bn){Bg=-Bg;}Bj+=Bg;if(Bj<Bh||Bj+Bh>(Bn?Bf:Bi)){return null;}return Bj;}function Ab(){var Bf=this.mChartContextPtr,Bn=Bf.GetGraphMatrixContext(),Bo={Include:false,DrawFromZero:false};if(Bn.isCombinationChart()){var Bj=Bf.mDataset,Bi=Bj.GetSeriesByShape(),Bq=this.mTripleId.mObjectId,Bp=false,Bm=Av.call(this,Bq),Bk=Bi.Bar,Bh=Bi.Area,Bg=0,Be=0;var Bs=Bj.GetSeriesCount();if(Bf.IsDualAxis()){var Bl=Bm?1:0,Br=Bm?"Secondary":"Primary";Bi=Bj.GetShapesDistributionByValueAxis(Bl)[Br];Bk=Bi.BAR;Bh=Bi.AREA;Bs=Bj.GetSeriesByValueAxis(Bl).length;Bp=(Bk&&Bk.indexOf(Bl)!==-1)||(Bh&&Bh.indexOf(Bl)!==-1);}else{Bp=((Bk&&Bk.length>0)||(Bh&&Bh.length>0));}Bp=!!Bp;Bo.Include=Bp;if(Bk&&Bk.length>0){Bg=Bk.length;}if(Bh&&Bh.length>0){Be=Bh.length;}Bo.DrawFromZero=(Be+Bg===Bs);}return Bo;}function J(Be){return Math.log(Be)/Math.log(10);}function R(){return this.mOptions.mUseMinValue&&this.mOptions.mShowMinLabel;}function At(){return this.mGraphMajorType===a.GMT_HISTOGRAM&&this.mTripleId.mObjectId===A1.DssGraphX1Body;}function I(){var Be=this.mChartContextPtr;if(Be.mIsGraphMatrix){return !this.IsVerticalAxis();}if(!this.mChartContextPtr.mManualLayoutMode&&this.mTripleId.mObjectId===A1.DssGraphX1Body&&!this.IsVerticalAxis()){switch(this.mGraphMajorType){case a.GMT_HISTOGRAM:case a.GMT_SCATTER:case a.GMT_BUBBLE:return true;default:break;}}return false;}function AG(){var Bw,Bh,Bp,Bv,Bg,Bs=0,Bm=this.mOptions,Bu,Bj,Bn,Bi=0;var Bf=this.mChartContextPtr,Bl=Bf.mIsGraphMatrix,Be=Bf.getUniformAxisLabelRotateMode("x");Bw=[];this.GetTicks(Bw);if(Bw.length<2){if(!Bl||Be===BE.Automatic){return ;}}Bp=BU.gAxisObjects[this.getIndex()].mLabelId;this.InitObjectSet(Bp,AI.GOT_AXIS_LABEL);Bg=this.mpAxisLabelSet.GetFormatFont();if(Bl){if(Be!==BE.Automatic){Bg.mFontRotation=Be;return ;}}Bu=Bw.length;Bv=50;Bh=false;AC.Reset(0,0,0,0);Bg.mFontRotation=BE.Normal;if(!Bl&&Bu>=2){if(this.mOptions.mUseMinValue){Bs=1;Bi=1;}if(this.mOptions.mUseMaxValue){Bu--;}}var Bq,Br=Bs,Bt=this.mChartContextPtr.GetGraphMatrixContext();for(Bq=0;Bs<Bu;Bs++){if(this.hasLabelCreated){Bj=this.mLabelList[Bs];}Bj=Bj||new BU.NumberObject({TripleId:Bp,GraphObjectManager:this,Number:Bw[Bs],NumberFormat:this.mNumberFormat,GraphCollectionObject:this.mpAxisLabelSet,ShouldCondense:this.mCondenseLabels,ExpectCondense:this.mCondenseLabels});Bj.MoveTo(this.ValueToPosition(Bw[Bs]),Bv,Z.CENTER);Bn=Bj.GetBoundingRect(true);if(Bs!==Bi){if(Bl){var Bo=(Bs===1&&Bm.mUseMinValue)||(Bs===Bu-1&&Bm.mUseMaxValue);if(!Bo){var Bk=1;Bh=Bn.HasIntersection(AC)||Bt.checkPaddingBetweenLabels(AC,Bn,Bk,true);}}else{Bh=Bn.HasIntersection(AC);}}AC.ResetRect(Bn);}this.hasLabelCreated=this.mpAxisLabelSet.GetCollectionSize()===Bu;if(Bh){Bg.mFontRotation=Bl?BE.Rotate90:BE.Rotate270;}else{Bg.mFontRotation=BE.Normal;}this.maxLabelLength=this.fakeMaxLabelLength;if(this.maxLabelLength!==-1){this.restoreLabels(true);for(Bq=0;Br<Bu;Br++){Bj=this.mLabelList[Br];Bj.MoveTo(this.ValueToPosition(Bw[Br]),Bv,Z.CENTER);}}}function AX(){switch(this.mChartContextPtr.GetGraphType()){case Aw.DssGraphTypeVertical_Area_DualAxis_Absolute:case Aw.DssGraphTypeVertical_Area_DualAxis_Stacked:case Aw.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case Aw.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case Aw.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case Aw.DssGraphTypeVertical_Bar_DualAxis_Stacked:case Aw.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case Aw.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case Aw.DssGraphTypeVertical_Line_DualAxis_Absolute:case Aw.DssGraphTypeVertical_Line_DualAxis_Stacked:case Aw.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case Aw.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case Aw.DssGraphTypeVertical_Bar_DualAxis_Absolute:case Aw.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:return true;default:return false;}}function f(){if(this.mUseDepth){return(Av.call(this,this.mTripleId.mObjectId)===false||!(AX.call(this)));}return this.mAxisInfo.mShowAxisLine;}function v(Bg,Be){var Bf;Bf=new BU.NumberObject({TripleId:Bg,GraphObjectManager:this,Number:Be,NumberFormat:this.mNumberFormat,GraphCollectionObject:this.mpAxisLabelSet,ShouldCondense:this.mCondenseLabels,ExpectedCondense:this.mCondenseLabels});this.mGraphObjectList.push(Bf);this.mpAxisLabelSet.AddGraphObject(Bf);}function Bc(){var Bg,Be,Bh,Bf;Bg=[];this.GetTicks(Bg);Be=Bg.length;Bh=this.mLabelObjectId;for(Bf=0;Bf<Be;++Bf){v.call(this,Bh,Bg[Bf]);}}function z(Bm,Bf,Bk){var Bh=this.mChartContextPtr,Bn=this.mOptions,Be=Bf,Bj=Bk;var Bg=Bh.mIsGraphMatrix&&Bn.mUseCustomMinMax;if(!Bh.mIsTimeSeriesChart&&!Bg){if(Bh.mIsGraphMatrix){var Bl=1e-9,Bi=Math.abs((Bm-this.mMaxTick)/(this.mMaxTick-this.mMinTick));if((Bm<this.mMinTick||(Bm>this.mMaxTick&&Bi>Bl))&&Bn.mOffScaleType===Am.DssGraphOffScaleHide){return{Flag:false,Value:Bm,Min:Be,Max:Bj};}if(Bm>this.mMaxTick&&Bn.mOffScaleType===Am.DssGraphOffScaleHide){Bm=this.mMaxTick;}}else{if((Bm<this.mMinTick||Bm>this.mMaxTick)&&Bn.mOffScaleType===Am.DssGraphOffScaleHide){return{Flag:false,Value:Bm,Min:Be,Max:Bj};}}if(Bn.mOffScaleType===Am.DssGraphOffScaleClip){Bm=(Bm>this.mMaxTick)?this.mMaxTick:Bm;Bm=(Bm<this.mMinTick)?this.mMinTick:Bm;}}Be=this.mMinTick;Bj=this.mMaxTick;if(this.IsLogarithmic()){if(Bm<=0){return{Flag:false,Value:Bm,Min:Be,Max:Bj};}Bm=J.call(this,Bm);Be=J.call(this,Be);Bj=J.call(this,Bj);}return{Flag:true,Value:Bm,Min:Be,Max:Bj};}function C(){}function AU(Bh){if(x===null){x=new BU.Point2D();}else{U.Reset(0,0);}if(U===null){U=new BU.Point2D();}else{U.Reset(0,0);}var Bf=x,Bj=U,Bg=this.mDeviceDataArea,Be,Bi;Be=this.IsVerticalAxis()?Bg.x:Bg.x+Bg.width;Bi=this.IsVerticalAxis()?Bg.y:Bg.y+Bg.height;Bf.Reset(Be,Bi);Bj.Reset(Bg.x+Bg.width,Bg.y);if(this.IsVerticalAxis()){Bf.y=this.ValueToPosition(Bh);Bj.y=Bf.y;}else{Bf.x=this.ValueToPosition(Bh);Bj.x=Bf.x;}return{LowEnd:Bf,HighEnd:Bj};}function Ba(){if(!this.mChartContextPtr.mIsGraphMatrix){return ;}var Bi=this.mOptions;if(Bi.mUseCustomMinMax||Bi.mUseLogarithmicScale){return ;}var Bg=false,Be=false,Bh=[];this.GetTicks(Bh);if(Bh.length>=2){var Bf=Bh.length;Be=((Math.abs(this.mMaximum-Bh[Bf-2])<BR*this.mStep));Bg=((Math.abs(this.mMinimum-Bh[1])<BR*this.mStep));if(this.mIsPercent){Be=false;}}if(Be&&Bg){this.mMaxTick=this.mMaximum;this.mMinTick=this.mMinimum;Bi.mUseMinValue=true;Bi.mShowMinLabel=false;Bi.mUseMaxValue=true;Bi.mShowMaxLabel=false;}else{if(Be){this.mMaxTick=this.mMaximum;Bi.mUseMaxValue=true;Bi.mShowMaxLabel=false;}else{if(Bg){this.mMinTick=this.mMinimum;Bi.mUseMinValue=true;Bi.mShowMinLabel=false;}else{BT++;}}}if(Bi.mAlwaysIncludeZero){this.mMaxTick=(this.mMaximum<0)?0:this.mMaxTick;this.mMinTick=(this.mMinimum>0)?0:this.mMinTick;}}function As(){if(!this.mChartContextPtr.mIsGraphMatrix){return ;}if(this.mGraphMajorType===a.GMT_BUBBLE&&this.mTripleId.mObjectId===A1.DssGraphZBody){return ;}Ba.call(this);}function s(){var Bi=this.mChartContextPtr;if(!Bi.mIsGraphMatrix){return false;}var Bh=Bi.mDataset;if(!Bh){return false;}if(!this.mIsUniformAxis){var Bg=Bi.GetGraphMatrixContext();if(Bg.isPieOrRingShape()===false&&Bh.showDatalabels()===false){return true;}if(Bg.isPieOrRingShape()===true&&Bh.showPieDatalabels()===false){return true;}}if(this.mPrimaryMetrics){if(!!this.mNumberFormat.isDefault){this.mNumberFormat=new BU.ChartAdvFormat();}var Bf=Bh.getValueAxisNumberFormat(this.mNumberFormat,this.mPrimaryMetrics);if(this.mIsPercent===false){return Bf;}}var Be=this.mNumberFormat;if(this.mIsPercent){Be.mFormatType=4;Be.mCustomFormat="0%";return true;}return false;}function AP(Bh){var Bf,Bg,Be;for(Bf=0;Bf<2;Bf++){Bg=(Bf===0)?this.mHighTicksToLabel:this.mLowTicksToLabel;Be=Bg[Bh];if(Be&&Be.mIsShown){return Be;}}return null;}function AT(Bj,Bg){var Bh,Bi=this.mChartContextPtr;if(Bi.mIsGraphMatrix){if(this.IsVerticalAxis()){if(Bg.y===Bi.mGraphHeight){--Bg.y;--Bj.y;}}if(Bi.isUADataAreaOutput()){var Bf=Bi.GetGraphMatrixContext().getPadding(BQ.kEndTickToChart),Be=Bi.getUniformAxisContext();if(this.IsVerticalAxis()){if(Be.mDataAreaRightMargin>=0){if(Bj.x+Be.mDataAreaRightMargin<=Bi.mGraphWidth){Bj.x+=Be.mDataAreaRightMargin;}else{Bj.x=Bi.mGraphWidth;}}if(Be.mDataAreaLeftMargin>=0){if(Bg.x>=Be.mDataAreaLeftMargin){Bg.x-=Be.mDataAreaLeftMargin;}}Bh=Bi.mGraphHeight;if(Math.abs(Bg.y-Bh)<Bf||Math.abs(Bg.y)<Bf){return false;}}else{if(Be.mDataAreaBottomMargin>=0){if(Bg.y+Be.mDataAreaBottomMargin<=Bi.mGraphHeight){Bg.y+=Be.mDataAreaBottomMargin;}else{Bg.y=Bi.mGraphHeight;}}if(Be.mDataAreaTopMargin>=0){if(Bj.y>=Be.mDataAreaTopMargin){Bj.y-=Be.mDataAreaTopMargin;}}Bh=Bi.mGraphWidth;if(Math.abs(Bg.x)<Bf||Math.abs(Bj.x-Bh)<Bf){return false;}}}}return true;}function Aa(Bm,Bn,Bo,Bg){var Bp,Bq,Bi,Bj,Be=[],Bf=this.mChartContextPtr,Bh;if(Bn>this.mMaxTick||Bn<this.mMinTick){return ;}if(Bf.mIsGraphMatrix){if(this.mAxisInfo.mAxisDirection>=g.AD_Z){return ;}if(Bf.isUADataAreaOutput()){var Bl=Bf.GetGraphMatrixContext().mShownValueTickSet[this.mAxisInfo.mAxisDirection];if(Bl[Bn]===undefined){return ;}}if(this.mIsUniformAxis){if(this.mAxisInfo.mShowAxisLabels===false){return ;}var Bk=AP.call(this,Bn);if(!Bk||!Bk.mIsShown){return ;}}}Bh=AU.call(this,Bn);Bp=Bh.LowEnd;Bq=Bh.HighEnd;if(!AT.call(this,Bq,Bp)){return ;}Bi=Bg?this.mMajorGrid.mGridStyle:this.mMinorGrid.mGridStyle;Bj=Math.floor(Bg?this.mTickLength:this.mTickLength*2/3+1);this.GetOneGridLine(this.mAxisInfo.mAxisLabelsLocation,Bi,Bj,Bp,Bq,Be);this.GenerateOneLineObject(Bm,Be,Bo);if(this.HasTwoGridLineParts(Bi)){Be.splice(0,Be.length);this.GetOneGridLine(this.IsVerticalAxis()?T.ALL_RIGHT:T.ALL_TOP,Bi,Bj,Bp,Bq,Be);this.GenerateOneLineObject(Bm,Be,Bo);}}function r(Bf,Bh,Be){var Bg=Bf?this.mHighTicksToLabel:this.mLowTicksToLabel;Bg[Bh]=Be;}function BV(Bg,Bh){var Bf,Be=this.mpAxisLabelSet.GetCollectionSize(),Bi=Bg?this.mHighTicksToLabel:this.mLowTicksToLabel;Bi={};if(Bh<0||Bh>=Be){return ;}for(Bf=Bh;Bf<Be;Bf++){var Bj=this.mpAxisLabelSet.GetObjectByIndex(Bf);if(Bj){r.call(this,Bg,Bj.mNumber,Bj);}}}function P(Be,Bg){if(Bg<=0){return 0;}var Bl=this.mOptions,Bk=this.mMaxTick,Bi=this.mMinTick,Bj=this.mMaximum,Bh=this.mMinimum,Bf;if(Bl.mUseLogarithmicScale){Bj=Bj<=0?-1:J.call(this,Bj);Bh=Bh<=0?-1:J.call(this,Bh);Bk=J.call(this,Bk);Bi=J.call(this,Bi);}Bf=Be?Bk-Bj:Bh-Bi;Bf=Math.abs(Bf);return Bf/(Bk-Bi)*Bg;}function BC(){var Bg,Bh,Be,Bf;if(this.mIsUniformAxis){Bg=this.mTripleId;}else{Bg=BU.gAxisObjects[this.getIndex()].mMajorId;}if(this.hasMajorTickCreated){this.clearTickObjects(Bg,true);this.hasMajorTickCreated=false;}this.InitObjectSet(Bg,AI.GOT_MAJOR_GRID);if(this.mChartContextPtr.mIsGraphMatrix){Aa.call(this,Bg,this.mMinTick,this.mpMajorGridSet,true);Aa.call(this,Bg,this.mMaxTick,this.mpMajorGridSet,true);}else{Bh=true;Be=this.mChartContextPtr.GetProperty(Az.DssGraphLineAlpha,new BU.TripleId({ObjectId:A1.DssGraphFrame}));if(Be){Bh=(Be>0);}if(!Bh||this.mAxisInfo.mAxisDrawInReverse){Aa.call(this,Bg,this.mMinTick,this.mpMajorGridSet,true);}if(!Bh||!this.mAxisInfo.mAxisDrawInReverse){Aa.call(this,Bg,this.mMaxTick,this.mpMajorGridSet,true);}}for(Bf=0;Bf<this.mTicks.length;++Bf){Aa.call(this,Bg,this.mTicks[Bf],this.mpMajorGridSet,true);}this.hasMajorTickCreated=true;}function O(){var Bh,Bg=this.mOptions,Be,Bj,Bi,Bf;Bh=1;if(Bg.mUseLogarithmicScale){Bh=8;}else{if(this.mMinorGrid.mUseManualGrid){Bh=Math.floor(this.mMinorGrid.mGridInterval);}}if(this.mIsUniformAxis){Be=this.mTripleId;}else{Be=BU.gAxisObjects[this.getIndex()].mMinorId;}if(this.hasMinorTickCreated){this.clearTickObjects(Be,false);this.hasMinorTickCreated=false;}this.InitObjectSet(Be,AI.GOT_MINOR_GRID);Bj=this.mStep/(Bh+1);for(Bi=0;Bi<this.mTicks.length;++Bi){Bj=Bg.mUseLogarithmicScale?this.mTicks[Bi]:Bj;for(Bf=1;Bf<=Bh;++Bf){Aa.call(this,Be,this.mTicks[Bi]+Bf*Bj,this.mpMinorGridSet,false);}}if(this.mTicks.length===0){Bj=Math.floor(Bg.mUseLogarithmicScale?this.mMinTick:(this.mMaxTick-this.mMinTick)/(Bh+1));for(Bf=1;Bf<=Bh;++Bf){Aa.call(this,Be,this.mMinTick+Bf*Bj,this.mpMinorGridSet,false);}return ;}Bj=Bg.mUseLogarithmicScale?this.mMinTick:Bj;for(Bf=1;Bf<=Bh;++Bf){Aa.call(this,Be,this.mTicks[0]-Bf*Bj,this.mpMinorGridSet,false);}this.hasMinorTickCreated=true;}function Bb(){var Bh=this.mChartContextPtr;if(Bh.mIsGraphMatrix&&!Bh.isUADataAreaOutput()){if(this.mAxisInfo.mAxisDirection>=g.AD_Z){return ;}var Bf=Bh.GetGraphMatrixContext(),Be=Bf.mShownValueTickSet[this.mAxisInfo.mAxisDirection]={},Bg=function(Bi){AH.forEach(Bi,function(Bj){if(Bj.mIsShown){Be[Bj]=true;}});};Bg(this.mHighTicksToLabel);Bg(this.mLowTicksToLabel);}}function Ar(Bf,Bh,Bg){var Be=this.ValueToFloatPosition(Bf),Bi=Bh+0.5*Bg,Bj=this.mChartContextPtr;if(Be>=Bi&&Be+Bi<=Bj.mGraphWidth){return true;}return false;}function d(){var Bf=this.mChartContextPtr,Bj=Bf.GetGraphMatrixContext(),Bk=this.mDeviceDataArea,Bm=this.IsVerticalAxis(),Be,Bn=this.mpAxisLabelSet.mFormatFontPtr,Bg=Bj.getPadding(BQ.kEndLabelToChart);if(Bm){Be=Math.max(Bk.height,Bf.mGraphHeight);}else{Be=Math.max(Bk.width,Bf.mGraphWidth);}if(Be<Bn.mFontSize+2*Bg){return false;}if(Be<Bn.GetStringHeight("H")+2*Bg){return false;}if(Bk.width>=0&&Bk.height>0){var Bl=[];this.GetTicks(Bl);var Bh,Bi=Bl.length;for(Bh=0;Bh<Bi;Bh++){if(Ar.call(this,Bl[Bh],Bg,Bn.mFontSize)===true){return true;}}}return true;}function W(){if(this.hasLabelCreated){var Bf,Bg=this.mLabelList,Be=Bg.length;for(Bf=0;Bf<Be;Bf++){if(Bg[Bf]&&Bg[Bf].mIsShown){return true;}}return false;}return d.call(this);}function K(Bg){var Bh=this.mChartContextPtr,Bf=0,Be=0;if(Bh.mIsGraphMatrix){Be=Bf=Bh.GetGraphMatrixContext().getPadding(BQ.kChartToChart);if(Bg){Be=Bf=0;}else{if(this.mMaxTick<=0){Bf=0;}if(this.mMinTick>=0){Be=0;}}}return{LowPadding:Be,HighPadding:Bf};}function Ad(){var Bi=this.mChartContextPtr,Bf=0,Be=Bi.GetGraphMatrixContext(),Bh=Bi.mDataset.GetGroupCount();if(Bi.mIsGraphMatrix===false){return 0;}if(Be.isCombinationChart()){var Bg=Bi.mDataset.GetSeriesByShape();if(Bg.Circle&&Bg.Circle.length){return Be.getPadding(BQ.kExtra);}if(Bg.Square&&Bg.Square.length){return Be.getPadding(BQ.kExtra);}if(Bg.Circle&&Bg.Circle.length){return Be.getPadding(BQ.kExtra);}if((Bg.Line&&Bg.Line.length)||(Bg.Area&&Bg.Area.length)){if(Bh===1){return Be.getPadding(BQ.kExtra);}}return 0;}switch(Bi.GetGraphMatrixGraphMajorType()){case S._BUBBLE:case S._SCATTER:case S._PIE:Bf=Be.getPadding(BQ.kExtra);break;case S._LINE:case S._AREA:if(Bh===1||Be.mMarkerShape!==e.DssGraphMarkerShapeNone){Bf=Be.getPadding(BQ.kExtra);}break;}return Bf;}function V(Bm,B1,Bx,Bw){var Bh=this.mChartContextPtr,Bq=0,Bi=0,Br=0,B0=0,Bv=0,By=0,Bo=0,Bn=Bx,Bf=Bw,Bt=this.mTripleId.mObjectId===A1.DssGraphY1Body||this.mTripleId.mObjectId===A1.DssGraphX1Body,Bl=this.mAxisInfo.mAxisDirection===g.AD_X,Bj=this.mOptions.mUseCustomMinMax,Be=!Bj||(Bj&&!this.mOptions.mUseMinValue),Bg=!Bj||(Bj&&!this.mOptions.mUseMaxValue),Bs=Bh.mUniformAxisContext,Bz=Bh.GetGraphMatrixContext();if(Bg){Bq=Ad.call(this);By=Bz.GetValueAxisPadding(Bl,true,Bt);By=By>0?By+Bq:By;Bi=P.call(this,true,B1-By-Bo);B0=By-Bi;Bn=Math.max(Bn,B0);}if(Be){Bq=Ad.call(this);Bo=Bz.GetValueAxisPadding(Bl,false,Bt);Bo=Bo>0?Bo+Bq:Bo;Br=P.call(this,false,B1-By-Bo);Bv=Bo-Br;Bf=Math.max(Bf,Bv);}var Bp=0,Bk=Bl?Bs.mDataAreaRightMargin:Bs.mDataAreaTopMargin,Bu=Bl?Bs.mDataAreaLeftMargin:Bs.mDataAreaBottomMargin;if(!Bm){Bp=Bn;if(Bk>=0&&Bk<Bp){Bn=Bp-Bk;}else{Bn=0;}Bp=Bf;if(Bu>=0&&Bu<Bp){Bf=Bp-Bu;}else{Bf=0;}}return{HighPadding:Bn,LowPadding:Bf};}function F(Bh,Bg,Bk,Bf){var Be=Bk,Bj=Bg,Bi=(this.mAxisInfo.mAxisDirection===g.AD_X)?Bf.width:Bf.height;if(Be<0){Be=0;}if(Bj<0){Bj=0;}if(Bi<=0||Bi<Be+Bj){return ;}Bi-=Be+Bj;this.mLowTrim=Be;this.mHighTrim=Bj;if(!Bh){this.mIsTrimmedWithPadding=true;}if(this.mAxisInfo.mAxisDirection===g.AD_X){Bf.x+=Be;Bf.width=Bi;}if(this.mAxisInfo.mAxisDirection===g.AD_Y){Bf.y+=Bj;Bf.height=Bi;}}function k(){if(this.mChartContextPtr.mIsGraphMatrix&&this.mOptions.mUseCustomMinMax){return y;}return 32757;}function Af(Bf,Bh){var Bg=this.mChartContextPtr,Be=Bf.GetBoundingRect(true);if(this.IsVerticalAxis()){return(Be.y>=Bh&&Be.y+Be.height+Bh<=Bg.mGraphHeight);}return(Be.x>=Bh&&Be.x+Be.width+Bh<=Bg.mGraphWidth);}function AQ(Bj,Bl){var Bk=this.mChartContextPtr,Be=0,Bh=Bj-1;if(!Bk.mIsGraphMatrix){return -1;}if(this.mIsPercent&&!this.mOptions.mUseCustomMinMax){if(Bl&&this.mMaxTick===1){return Bh;}if(this.mMinTick===-1){return Be;}}var Bg,Bi=Bk.GetGraphMatrixContext().getPadding(BQ.kEndLabelToChart),Bf=this.mGraphObjectList;if(Bl){while(Bh>=0){Bg=Bf[Bh];if(!Bg.mIsShown){Bh--;continue;}if(Af.call(this,Bg,Bi)){return Bh;}Bg.mIsShown=false;Bh--;}}else{while(Be<=Bh){Bg=Bf[Be];if(!Bg.mIsShown){Be++;continue;}if(Af.call(this,Bg,Bi)){return Be;}Bg.mIsShown=false;Be++;}}return -1;}function A5(Bz,Bk,Bf,Bj,Bg){var Bs=true,Bw=this.mChartContextPtr.mIsGraphMatrix,By=Bw&&this.mIsPercent,Bl=1,Bu=this.mLabelSpan,Bh=this.mOptions,Bi=this.mGraphObjectList,Bp=Bi[Bj],Bm=Bp;while(Bs){Bs=false;var Bv=By?Bj-Bl:Bj+Bl,Bx=By?(Bv>=Bk):(Bv<Bf);while(Bx){var Bt=Bi[Bv];if(Bt.HasOverlapForSameRotation(Bm,Bu,Bg)){Bs=true;Bm=Bp;++Bl;break;}else{Bm=Bt;}Bv+=By?-Bl:Bl;Bx=By?(Bv>=Bk):(Bv<Bf);}}var Bq=this.mIsPercent?(Bj-Bk)/Bl:(Bf-Bj)/Bl;Bq=Math.floor(Bq);if(Bq<3){return Bl;}var Br,Be,Bn=AQ.call(this,Bf,false),Bo=AQ.call(this,Bf,true);if(Bn===-1||Bo===-1){return Bl;}if(this.mIsPercent){if(Bn<=Bj-Bq*Bl){return Bl;}if(Bn===0&&Bh.mUseMinValue&&Bh.mShowMinLabel&&this.mMinTick!==-1){Bn++;}Br=(Bj-Bn)/Bl;Be=(Bj-Br*Bl)-Bn;Bl+=Be/Br;}else{if(Bo>=Bj+Bq*Bl){return Bl;}Br=(Bo-Bj)/Bl;Be=Bo-(Bj+Br*Bl);Bl+=Math.floor(Be/Br);}return Bl;}function B(Bo,Bg,Bi,Bf,Bn){var Bk,Be=this.mChartContextPtr,Bl=Be.mIsGraphMatrix,Bp=Be.mIsTimeSeriesChart;if(this.mOptions.mShowMaxLabel){if((!Bl&&!Bp)||(Bl&&this.mIsPercent)){var Bh=((Bg-1-Bi)%Bf);if(Bh!==0){Bk=this.mGraphObjectList[Bg-1];Bk.mIsShown=true;var Bj=Bg-1-Bh,Bm=this.mGraphObjectList[Bj];if(Bk.HasOverlapForSameRotation(Bm,this.mLabelSpan,Bn)&&(Bj>Bo||!this.mOptions.mShowMinLabel)){Bm.mIsShown=false;}}}else{if(Bl&&this.mOptions.mUseMaxValue&&Bg-Bo>2){Bk=this.mGraphObjectList[Bg-1];Bk.mIsShown=false;}}}}function AD(Bg){var Be,Bf=this.mChartContextPtr.mIsGraphMatrix;if(this.mOptions.mShowMinLabel){if(Bf){if(this.mIsPercent&&this.mMinTick===-1){Be=this.mGraphObjectList[Bg];Be.mIsShown=true;}else{if(this.mIsPercent&&this.mOptions.mUseMinValue){Be=this.mGraphObjectList[Bg];Be.mIsShown=false;}}}}}function BB(Bm,Bf,Bj,Bg,Bh,Bo,Bn){var Bk=Bf,Bi=Bh?1:-1,Be=0,Bl=Bh?(Bg?Bk-Bj<=0:Bk-Bj<0):(Bg?Bk-Bj>=0:Bk-Bj>0);while(Bl){if(Bh){Be=Bk-Bo;}else{Be=Bo-Bk;}if(Be%Bm!==0){this.mGraphObjectList[Bk].mIsShown=false;}else{if(Bn&&Bn(Bk,Bm,Bf,Bj)){this.mGraphObjectList[Bk].mIsShown=false;}}Bk+=Bi;Bl=Bh?(Bg?Bk-Bj<=0:Bk-Bj<0):(Bg?Bk-Bj>=0:Bk-Bj>0);}}function u(Bf,Bg,Bm,Bh,Be){var Bk=Be,Bl=function(Bp,Bo,Br,Bq){return Bp===Bq;},Bn=function(Bp,Bo,Br,Bq){return Bp<Bo+Bq;};if(this.mChartContextPtr.mIsGraphMatrix&&this.mIsPercent){if(this.mMinTick===-1){if(this.mMaxTick===0){BB.call(this,Bk,Bg,Bh,true,true,0,Bl);}else{var Bj=(Bh-Bg)/Be,Bi=(Bh-Bg)/Bj;BB.call(this,Bi,Bh-1,Bg,false,false,Bh,Bn);Bk=Bi;}}else{BB.call(this,Bk,Bh-1,Bg,true,false,Bh);}}else{BB.call(this,Bk,Bh+1,Bm,false,true,Bh);}return Bk;}function i(Bn,Bk,Bg){if(Bk>this.mMaxTick||Bk<this.mMinTick){return ;}var Bl={},Bm={},Bj,Bo=false,Be=[];Bj=AU.call(this,Bk);Bl.x=Bj.LowEnd.x;Bl.y=Bj.LowEnd.y;Bm.x=Bj.HighEnd.x;Bm.y=Bj.HighEnd.y;var Bf=this.mChartContextPtr;if(Bf.mIsGraphMatrix){if(this.IsVerticalAxis()){Bo=Bl.y===Bf.mGraphHeight||Bl.y===0;}else{Bo=Bl.x===Bf.mGraphWidth||Bl.x===0;}}if(Bo){return ;}if(Bf.mIsGraphMatrix){if(this.IsVerticalAxis()){Bl.x=Math.min(Bl.x,0);Bm.x=Math.max(Bm.x,Bf.mGraphWidth);}else{Bm.y=Math.min(Bm.y,0);Bl.y=Math.max(Bl.y,Bf.mGraphHeight);}}if(this.mUseDepth){if((this.IsVerticalAxis()&&this.IsLeftDirection())||(!this.IsVerticalAxis()&&this.IsDownDirection())){Bl.swapPoints(Bm);}Be.push(Bm.Shifted(this.mDepthOffset));}Be.push(Bm);Be.push(Bl);var Bh=new BU.TripleId({ObjectId:Bg,SeriesId:0,GroupId:0}),Bi;if(this.mTripleId.mSeriesId>0){Bi=this.mpManager.GetGraphObject(Bh,false);}if(!Bi){Bi=new BU.GraphCollectionObject({TripleId:Bh,GraphObjectManager:this,CollectionType:q.CT_LINE});this.mpManager.AddToMap(Bi);}var Bp=new BU.PolyLineObject({TripleId:Bh,GraphObjectManager:this,PolyLine:Be,GraphCollectionObject:Bi});Bi.AddGraphObject(Bp);Bn.push(Bp);}function AM(){this.mTicks.splice(0,this.mTicks.length);var Be=AA.computeTicksForAxis(this);this.mMaxTick=Be.mMaxTick;this.mMinTick=Be.mMinTick;this.mTicks=Be.mTicks;this.mStep=Be.mStep;}function BM(Bi){var Bh,Be,Bg,Bf;Bh=0;Be=this.mTicks.length+(this.mOptions.mShowMinLabel?1:0)+(this.mOptions.mShowMaxLabel?1:0);for(Bg=0;Bg<Be;++Bg){Bf=this.mGraphObjectList[Bg+this.mLabelStartIndex];if(Bf===undefined){continue;}Bf.GetBoundingRectEx(Bd);if(Bi){Bh=(Bh<Bd.width)?Bd.width:Bh;}else{Bh=(Bh<Bd.height)?Bd.height:Bh;}}return Bh;}function AY(Bk,Bi,Bm){var Bf,Be,Bl,Bj,Bh=true,Bg=this.mLabelArea;Bf=this.mGraphObjectList[Bk];if(!Bf){return ;}if(this.mUseDepth){Be=new BU.Point2D();this.GetLabelOffset(Bi,Be);Bl=Be.x;Bj=Be.y;}else{Bl=Bj=0;}if(Q===null){Q=new BU.Point2D();}else{Q.Reset(0,0);}if(E===null){E=new BU.Point2D();}else{E.Reset(1,0);}switch(Bi){case T.ALL_BOTTOM:case T.ALL_BOTTOM_TOP:Q.x=this.ValueToPosition(Bm)+Bl;Q.y=Bg.y+Bg.height;E.x=0;E.y=1;break;case T.ALL_TOP:Q.x=this.ValueToPosition(Bm)+Bl;Q.y=Bg.y;E.x=0;E.y=-1;break;case T.ALL_LEFT:case T.ALL_LEFT_RIGHT:Q.x=Bg.x;Q.y=this.ValueToPosition(Bm)+Bj;E.x=-1;E.y=0;break;case T.ALL_RIGHT:Q.x=Bg.x+Bg.width;Q.y=this.ValueToPosition(Bm)+Bj;E.x=1;E.y=0;break;default:Bh=false;break;}if(Bh){this.MoveLabel(Bf,Q,E);}}function BW(){var Bj,Bm=[],Bf,Bn,Bh,Bi;this.GetTicks(Bm);if(Bm.length===0){return ;}Bf=new BU.Rect2D({Rect2D:this.mLabelArea});if(this.mIsStagger){Bh=BM.call(this,this.IsVerticalAxis());if(this.IsVerticalAxis()){Bf.x-=Bh;Bf.width+=Bh*2;}else{Bf.x-=Bh;Bf.height+=Bh*2;}}else{var Bg,Be,Bl=3,Bo=this.mGraphObjectList,Bk=Bo.length;if(this.hasLabelCreated){Be=this.IsVerticalAxis()?this.mLabelArea.height:this.mLabelArea.width;Be-=this.mChartContextPtr.GetGraphMatrixContext().getPadding(BQ.kEndLabelToChart)+4;Bg=Be>Bl;if(Bg===false){for(Bj=0;Bj<Bk;Bj++){Bo[Bj].mIsShown=false;}return ;}}}Bn=new BU.Rect2D({Rect2D:this.mLabelArea});Bi=Bm.length;for(Bj=0;Bj<Bi;++Bj){this.mLabelArea=(Bj&1)===0?Bn:Bf;AY.call(this,Bj+this.mLabelStartIndex,this.mAxisInfo.mAxisLabelsLocation,Bm[Bj]);}this.HideOverlappedLabels(this.mLabelStartIndex,this.mLabelStartIndex+Bm.length);if(this.HasLabelsOnBothSides()){for(Bj=0;Bj<Bi;++Bj){this.mLabelArea=(Bj&1)===0?Bn:Bf;AY.call(this,Bj+Bi+this.mLabelStartIndex,this.IsVerticalAxis()?T.ALL_RIGHT:T.ALL_TOP,Bm[Bj]);}this.HideOverlappedLabels(this.mLabelStartIndex+Bi,this.mLabelStartIndex+2*Bi);}Bb.call(this);}function BH(Bf,Bl){var Bn,Be=this.mChartContextPtr,Bj=Be.mIsGraphMatrix,Bk=Bf+(R.call(this)||Bj?1:0),Bg=false,Bo=this.mLabelList,Bi=Bo.length,Bm=Be.GetGraphMatrixContext().getPadding(BQ.kLabelToChart),Bh;for(Bh=Bk;Bh<Bi;Bh++){Bn=Bo[Bh];if(Af.call(this,Bn,Bm)){Bg=true;break;}}if(!Bj){return{Start:Bk,PaddingPossible:Bg};}if(this.mIsPercent){return{Start:Bl-1,PaddingPossible:Bg};}if(Bg){return{Start:Bh,PaddingPossible:Bg};}return{Start:Bk,PaddingPossible:Bg};}function Au(){var Bl=0,Bk=0,Bm,Be=this.mChartContextPtr,Bi=Be.GetGraphMatrixContext(),Bg=this.mOptions,Bf=this.mAxisInfo,Bj=this.mDeviceDataArea,Bh;if(this.mLabelStartIndex>=this.mGraphObjectList.length){return{LowMargin:Bl,HighMargin:Bk};}if(Bg.mUseCustomMinMax){return{LowMargin:Bl,HighMargin:Bk};}if(this.mUseDepth){this.ReserveDepthAxisLine(Bj,false,this.mTripleId.mObjectId!==A1.DssGraphX1Body);}N.Reset(0,0,0,0);Bm=this.mLabelList[this.mLabelStartIndex];Bm.GetBoundingRectEx(N);Bh=this.ValueToPosition(Bm.mNumber);if(Bf.mAxisDrawInReverse){Bk=this.IsVerticalAxis()?N.height/2-(Bh-Bj.y):N.width/2-(Bj.x+Bj.width-Bh);Bk=(Bk<0)?0:Bk;}else{if(Be.mIsGraphMatrix){if(this.mIsPercent&&this.mMinTick===-1){Bl=this.IsVerticalAxis()?N.height/2-(Bj.y+Bj.height-Bh):N.width/2-(Bh-Bj.x);Bl+=Bi.getPadding(BQ.kLabelToChart);}else{Bl=0;}Bl=Math.max(Bl,0);}else{Bl=this.IsVerticalAxis()?N.height/2-(Bj.y+Bj.height-Bh):N.width/2-(Bh-Bj.x);Bl=(Bl<0)?0:Bl;}}N.Reset(0,0,0,0);Bm=this.mLabelList[this.mLabelList.length-1];Bm.GetBoundingRectEx(N);Bh=this.ValueToPosition(Bm.mNumber);if(!Bf.mAxisDrawInReverse){Bk=this.IsVerticalAxis()?N.height/2-(Bh-Bj.y):N.width/2-(Bj.x+Bj.width-Bh);if(Be.mIsGraphMatrix){if(this.mIsPercent&&this.mMaxTick===1){Bk+=Bi.getPadding(BQ.kLabelToChart);}else{Bk=0;}}Bk=(Bk<0)?0:Bk;}else{Bl=this.IsVerticalAxis()?N.height/2-(Bj.y+Bj.height-Bh):N.width/2-(Bh-Bj.x);Bl=(Bl<0)?0:Bl;}if(!this.mUseDepth){return{LowMargin:Bl,HighMargin:Bk};}var Bn=this.getDepthMargin(0,0);Bl=(Bl<Bn.lowMargin)?0:Bl-Bn.lowMargin;Bk=(Bk<Bn.highMargin)?0:Bk-Bn.highMargin;return{LowMargin:Bl,HighMargin:Bk};}function c(Bh){var Bg=this.mChartContextPtr;if(Bh.mDrawCustomLine){this.mMinimum=Math.min(this.mMinimum,Bh.mAxisCustomValue);this.mMaximum=Math.max(this.mMaximum,Bh.mAxisCustomValue);}if(this.mIsPercent&&this.mMinimum===this.mMaximum&&1===this.mMaximum){if(this.mMinimum===1){this.mMinimum=0;}}if(Math.abs(this.mMinimum-this.mMaximum)<AE){var Bf=Bg.mIsGraphMatrix;if(this.mMinimum<-AE||this.mMinimum>AE){var Be=Math.abs(this.mMinimum)*0.5;if(Bf===false){this.mMaximum=this.mMaximum+Be;this.mMinimum=this.mMinimum-Be;}else{if(this.mMaximum>0){this.mMinimum=0;}else{this.mMaximum=0;}}}else{if(Bf===false||Bf&&this.mMinimum!==this.mMaximum){this.mMinimum=-6;this.mMaximum=6;}}}}mstrmojo.chart.ValueAxis=mstrmojo.declare(mstrmojo.chart.Axis,null,{scriptClass:"mstrmojo.chart.ValueAxis",mLargerGridInterval:false,mIsPercent:false,mMinimum:-1,mMaximum:-1,mMaxTick:-1,mMinTick:-1,mStep:-1,mLabelStartIndex:0,mTicks:null,mLabelSpan:0,mIsStagger:false,mNumberFormat:null,mLabelArea:null,mGraphMajorType:a.GMT_CATEGORY,mLabelObjectId:null,mIsMaxZoom:false,mPrimaryMetrics:-1,mHighTicksToLabel:null,mLowTicksToLabel:null,mIsTrimmedWithPadding:false,mCondenseLabels:null,init:function BX(Bj){Bj.AxisLabelsLocation=T.ALL_LEFT;this._super(Bj);this.mOptions={mUseLogarithmicScale:false,mAlwaysIncludeZero:true,mDrawFromZero:true,mUseMinValue:false,mUseMaxValue:false,mShowMinLabel:true,mShowMaxLabel:true,mDrawCustomLine:false,mDrawSecondCustomLine:false,mUseSmartScaleBreak:false,mOffScaleType:Am.DssGraphOffScaleHide,mAxisMinValue:0,mAxisMaxValue:0,mAxisCustomValue:0,mAxisSecondCustomValue:0,mUseCustomMinMax:false};var Bf=this.mChartContextPtr,Bl=this.mTripleId.mObjectId;this.mTicks=[];this.mHighTicksToLabel={};this.mLowTicksToLabel={};this.mLargerGridInterval=Bj.LargerGridInterval;this.mIsPercent=Bj.IsPercent;this.mMinimum=Math.min(Bj.Max,Bj.Min);this.mMaximum=Math.max(Bj.Max,Bj.Min);this.mLabelStartIndex=0;this.mIsStagger=false;this.mLabelObjectId=null;this.mIsMaxZoom=false;if(Bj.IsShown!==null){this.mIsShown=Bj.IsShown;}if(Bf.mIsTimeSeriesChart){this.mIsShown=true;}if(Bf.mIsUniformAxisMode){this.mIsShown=!Bf.isUADataAreaOutput();}if(this.mIsUniformAxis||Bf.mIsGraphMatrix===false){this.mNumberFormat=new BU.ChartAdvFormat({});}else{this.mNumberFormat=BU.dNF;}if(Bj.PrimaryMetricIndex!==null){this.mPrimaryMetrics=Bj.PrimaryMetricIndex;}else{this.mPrimaryMetrics=[];}if(this.mDeviceDataArea===null){this.mDeviceDataArea=new BU.Rect2D();this.mDeviceDataArea.width=this.mDeviceDataArea.height=-1;}this.mGraphMajorType=Bf.GetGraphMajorType();if(this.mIsUniformAxis===false){if(this.mGraphMajorType===a.GMT_HISTOGRAM){this.mIsShown=this.mIsShown||(this.mTripleId.mObjectId===A1.DssGraphY1Body);if(this.mTripleId.mObjectId===A1.DssGraphX1Body){this.mMaximum+=(this.mMinimum===this.mMaximum)?10:(this.mMaximum-this.mMinimum)*0.01;}}}var Bg=this.mAxisInfo,Bh=this.mOptions,Bi=Bf.GetGraphMatrixContext(),Bm=Bi.AxisLayout;if(Bj.AxisDirection===g.AD_Y){if(Bl!==A1.DssGraphY1Body){Bg.mAxisLabelsLocation=T.ALL_RIGHT;}else{if(Bf.IsBubbleChart()||Bf.IsScatterChart()){var Bk=4;if(Bm&Bk){Bg.mAxisLabelsLocation=T.ALL_RIGHT;}}}}else{if(Bj.AxisDirection===g.AD_X){if(Bl===A1.DssGraphY1Body||Bl===A1.DssGraphX1Body){Bg.mAxisLabelsLocation=T.ALL_BOTTOM;if(Bf.IsBubbleChart()||Bf.IsScatterChart()){var Be=8;if(Bm&Be){Bg.mAxisLabelsLocation=T.ALL_TOP;}}}else{Bg.mAxisLabelsLocation=T.ALL_TOP;}}}this.hLoadProperties();c.call(this,Bh);AM.call(this);if(Bh.mUseLogarithmicScale&&Bf.IsStackedChart()){this.mMaximum=Bh.mDrawCustomLine?Math.max(this.mMaximum+this.mMinTick,Bh.mAxisCustomValue):this.mMaximum+this.mMinTick;this.mMinimum=Math.min(this.mMinimum,0);this.mTicks.splice(0,this.mTicks.length);var Bn=AA.computeTicksForLogScale(this);this.mMaxTick=Bn.mMaxTick;this.mMinTick=Bn.mMinTick;this.mTicks=Bn.mTicks;this.mStep=Bn.mStep;}As.call(this);},IsBaseAtZero:function BZ(){var Be=this.mOptions;return Be.mDrawFromZero&&!Be.mUseLogarithmicScale;},hLoadProperties:function A3(){var Bf=this.mChartContextPtr,Bp=Bf.mIsGraphMatrix,Bl=Bf.GetGraphMatrixContext(),Bi=this.mOptions,Bn,Bq;AL.tripleId.reset(t,this.mTripleId.mObjectId);if(Bp){var Bk=Bf.hasBarAreaInComb()||Bf.IsBarChart()||Bf.IsAreaChart()||Bf.IsPercentChart()||(Bf.IsStackedChart()&&this.mMaximum*this.mMinimum<0);Bi.mDrawFromZero=Bk;Bi.mAlwaysIncludeZero=Bk;if(Bl.isCombinationChart()){var Bm=Ab.call(this);Bi.mAlwaysIncludeZero=Bi.mAlwaysIncludeZero||Bm.Include;Bi.mDrawFromZero=Bi.mDrawFromZero||Bm.DrawFromZero;}if(this.mLabelSpan===0){this.mLabelSpan=Bl.getPadding(BQ.kBetweenLabels);}var Br=Bf.getUniformAxisInformation(this.mTripleId.mObjectId);if(Br.CustomScale){Bi.mUseCustomMinMax=Br.CustomScale;Bi.mUseMaxValue=!Br.AutoMax;Bi.mUseMinValue=!Br.AutoMin;Bi.mAxisMaxValue=Br.Max;Bi.mAxisMinValue=Br.Min;}var Bh=this.mDatasetPtr||Bf.mDataset,Be=Bf.getAxisKeyFromObjectId(this.mTripleId.mObjectId);if(Be==="Z"){return ;}var Bg=Bh.getAxisOriginFormat(Be);Bi.mDrawCustomLine=Bg.show||false;Bi.mAxisCustomValue=Bg.number||0;Bi.mUseLogarithmicScale=Bh.isLogScaleAxis(Be);if(Bi.mUseLogarithmicScale){Bi.mAlwaysIncludeZero=false;Bi.mDrawFromZero=false;}}else{Bn=Bf.GetProperty(Az.DssGraph2ExcludeZero,t);if(Bn){Bi.mAlwaysIncludeZero=Bn!==false;}if(Bf.mIsTimeSeriesChart){Bi.mShowMinLabel=false;}else{Bn=Bf.GetProperty(Az.DssGraph2ScaleEndMin,t);if(Bn){Bi.mShowMinLabel=Bn!==false;}}Bn=Bf.GetProperty(Az.DssGraph2ScaleEndMax,t);if(Bn){Bi.mShowMaxLabel=Bn!==false;}if(Bf.mImageUsage===0){Bn=Bf.GetProperty(Az.DssGraph2LogScale,t);if(!this.mIsPercent&&Bn){Bi.mUseLogarithmicScale=Bn!==false;}Bn=Bf.GetProperty(Az.DssGraph2ScaleUseMin,t);if(Bn){Bi.mUseMinValue=Bn!==false;}Bn=Bf.GetProperty(Az.DssGraph2ScaleUseMax,t);if(Bn){Bi.mUseMaxValue=Bn!==false;}Bn=Bf.GetProperty(A0.DssGraphOffScaleType,t);if(Bn){Bi.mOffScaleType=Bn;}Bn=Bf.GetProperty(Az.DssGraph2ScaleMin,t);if(Bi.mUseMinValue&&Bn){Bi.mAxisMinValue=Bn;}Bn=Bf.GetProperty(Az.DssGraph2ScaleMax,t);if(Bi.mUseMaxValue&&Bn){Bi.mAxisMaxValue=Bn;}if(Bi.mUseMinValue&&Bi.mUseMaxValue){if(Bi.mAxisMinValue>Bi.mAxisMaxValue){Bq=Bi.mAxisMinValue;Bi.mAxisMinValue=Bi.mAxisMaxValue;Bi.mAxisMaxValue=Bq;}else{if(Bi.mAxisMinValue===Bi.mAxisMaxValue){Bq=Bi.mAxisMinValue===0?10:Math.abs(Bi.mAxisMinValue);Bi.mAxisMaxValue=Bi.mAxisMaxValue+Bq*0.5;Bi.mAxisMinValue=Bi.mAxisMinValue-Bq*0.5;}}}}}var Bo=false;if(Bp){Bo=s.call(this);}if(!Bo){Bn=Bf.GetProperty(Az.DssGraphAxisNumberFormat,t);if(Bn){Bf.ParseValueToFormat(Bn,this.mNumberFormat);}}if(this.mGraphMajorType===a.GMT_BUBBLE&&this.mTripleId.mObjectId===A1.DssGraphZBody){return ;}if(Bf.mIsGraphMatrix){var Bj=this.mTripleId;if(this.hasOwnProperty("mTicks")){this.mMajorGrid.mShowGridLines=true;}else{this.mMajorGrid.mShowGridLines=false;this.mMajorGrid.mGridStyle=n.DssGraphGridNone;}if(this.mMajorGrid.mShowGridLines){Bn=Bf.GetProperty(Az.DssGraphStyleMajor,Bj);if(this.mMajorGrid.mShowGridLines&&Bn){this.mMajorGrid.mGridStyle=Bn;}}return ;}if(Bf.mImageUsage===0&&!Bf.mIsGraphMatrix){Bn=Bf.GetProperty(Az.DssGraph2ScaleDirection,t);if(Bn){this.mAxisInfo.mAxisDrawInReverse=Bn!==false;}if(this.mGraphMajorType===a.GMT_GAUGE){return ;}Bn=Bf.GetProperty(Az.DssGraphAxisShowUserLine,t);if(Bn){Bi.mDrawCustomLine=Bn!==false;}Bn=Bf.GetProperty(A0.DssGraphAxisShowSecondUserLine,t);if(Bn){Bi.mDrawSecondCustomLine=Bn!==false;}Bn=Bf.GetProperty(Az.DssGraphManualMajor,t);if(Bn){this.mMajorGrid.mUseManualGrid=Bn!==false;}Bn=Bf.GetProperty(Az.DssGraphCountMajor,t);if(this.mMajorGrid.mUseManualGrid&&Bn){this.mMajorGrid.mGridInterval=Bn;}if(At.call(this)){Bn=Bf.GetProperty(Az.DssGraphAxisStagger,t);if(Bn){this.mIsStagger=Bn!==false;}return ;}Bn=Bf.GetProperty(Az.DssGraphAxisUserLineValue,t);if(Bi.mDrawCustomLine&&Bn){Bi.mAxisCustomValue=Bn;}Bn=Bf.GetProperty(A0.DssGraphAxisSecondUserLineValue,t);if(Bi.mDrawSecondCustomLine&&Bn){Bi.mAxisSecondCustomValue=Bn;}}},GetStep:function Y(){return this.mStep;},IsLogarithmic:function AV(){return this.mOptions.mUseLogarithmicScale;},ReserveTitleAndLabels:function Ae(Bk,Bi,Bg){var Be,Bj,Bf;if(!this.mIsShown||!this.mChartContextPtr.mIsValueAxisShown){return ;}if(this.mAxisInfo.mShowAxisTitle){this.ReserveTitleArea(Bk);this.mLabelStartIndex=1;}else{this.mLabelStartIndex=0;}this.mDeviceDataArea.ResetRect(Bk);if(this.mAxisInfo.mShowAxisLabels){if(this.mLabelObjectId===null){this.mLabelObjectId=BU.gAxisObjects[this.getIndex()].mLabelId;}if(I.call(this)){this.fakeMaxLabelLength=this.maxLabelLength;this.maxLabelLength=-1;this.restoreLabels(true);AG.call(this);}else{this.restoreLabels(true);this.InitObjectSet(this.mLabelObjectId,AI.GOT_AXIS_LABEL);}if(d.call(this)===false){return ;}this.GenerateTickLabels();if(Bi<1000){if(this.mUseDepth&&this.mTripleId.mObjectId===A1.DssGraphX1Body){var Bh=this.TrimMarginsForDepthAxis(Bi,Bg);Bi=Bh.LowMargin;Bg=Bh.HighMargin;}Bf=Au.call(this);Be=Bf.LowMargin;Bj=Bf.HighMargin;Be=Be>Bi+this.mLowTrim?Be-Bi-this.mLowTrim:0;Bj=Bj>Bg+this.mHighTrim?Bj-Bg-this.mHighTrim:0;if(this.IsVerticalAxis()){Bk.y+=Bj;Bk.height-=Bj+Be;}else{Bk.x+=Be;Bk.width-=Be+Bj;}if(this.mIsUniformAxis){if(Be>0){this.mLowTrim+=Be;}if(Bj>0){this.mHighTrim+=Bj;}}}this.hReserveLabelOrTickArea(Bk,true,false);}},CreateAxisLine:function BJ(){if(!this.mChartContextPtr.mIsValueAxisShown){return ;}if(!this.mIsShown&&!this.mUseDepth){return ;}if(f.call(this)){this._super();}},GenerateTickLabels:function Ag(){if(this.hasLabelCreated){return ;}this.mLabelList.splice(0,this.mLabelList.length);var Bg=this.mChartContextPtr.mIsGraphMatrix;Bc.call(this);if(Bg){BV.call(this,true,0);}var Bf,Be=this.mpAxisLabelSet.GetCollectionSize();if(this.mAxisInfo.mAxisLabelsLocation===T.ALL_LEFT_RIGHT||this.mAxisInfo.mAxisLabelsLocation===T.ALL_BOTTOM_TOP){Bc.call(this);if(Bg){BV.call(this,false,Be);}}Be=this.mpAxisLabelSet.GetCollectionSize();for(Bf=0;Bf<Be;Bf++){this.mLabelList.push(this.mpAxisLabelSet.GetObjectByIndex(Bf));}this.hasLabelCreated=true;},GetTicks:function Ay(Bf){if(this.mOptions.mShowMinLabel){Bf.push(this.mMinTick);}var Be;for(Be=0;Be<this.mTicks.length;++Be){Bf.push(this.mTicks[Be]);}if(this.mOptions.mShowMaxLabel){Bf.push(this.mMaxTick);}},hReserveLabelOrTickArea:function AW(Bj,Bk,Bf,Bl){var Be=this.mAxisInfo.mAxisLabelsLocation,Bh,Bg;if(Bk){Bg=Bl!==undefined?Bl:BM.call(this,this.IsVerticalAxis());var Bi=this.mChartContextPtr.mpGraphMatrixContext.getPadding(BQ.kLabelToChart);Bh=(Bg*(this.mIsStagger?2:1)+BU.Axis.gLabelMargin)+Bi;}else{Bh=this.GetOuterTickLength();}if(Bf){Bh=-Bh;}if(this.IsVerticalAxis()){if(Be===T.ALL_LEFT||Be===T.ALL_LEFT_RIGHT){Bj.x+=Bh;Bj.width-=Bh;}if(Be===T.ALL_RIGHT||Be===T.ALL_LEFT_RIGHT){Bj.width-=Bh;}}else{if(Be===T.ALL_BOTTOM||Be===T.ALL_BOTTOM_TOP){Bj.height-=Bh;}if(Be===T.ALL_TOP||Be===T.ALL_BOTTOM_TOP){Bj.y+=Bh;Bj.height-=Bh;}}},ValueToPosition:function j(Bf,Be){if(Be===undefined){if(this.mOptions.mOffScaleType!==Am.DssGraphOffScaleHide){Be=false;}else{Be=true;}}if(Be){Bf=(Bf>this.mMaxTick)?this.mMaxTick:Bf;Bf=(Bf<this.mMinTick)?this.mMinTick:Bf;}return Math.floor(this.ValueToFloatPosition(Bf)+0.5);},ValueToPosition2:function AO(Bj,Bg,Bi){var Bf=this.mMinTick;var Be=this.mMaxTick;if(this.mOptions.mUseLogarithmicScale){Bj=Bj<=0?-1:J.call(this,Bj);Bf=J.call(this,Bf);Be=J.call(this,Be);}var Bh=this.mAxisInfo.mAxisDrawInReverse?(Be-Bj):(Bj-Bf);return Bg+((Bi-Bg)*Bh/(Be-Bf));},ValueToFloatPosition:function Aq(Bm){var Bn=0,Bj=this.mMinTick,Bg=this.mMaxTick,Bi=this.mOptions,Bl=this.mDeviceDataArea,Bh=this.mAxisInfo,Bk;if(Bi.mUseLogarithmicScale){Bm=Bm<=0?-1:J.call(this,Bm);Bj=J.call(this,Bj);Bg=J.call(this,Bg);}Bk=Bh.mAxisDrawInReverse?(Bm-Bj):(Bg-Bm);if(Bg===Bj){return Bn;}if(Bh.mAxisDirection===g.AD_Y){Bn=Bl.y+Bk/(Bg-Bj)*Bl.height;}else{Bn=Bl.x+Bl.width-Bk/(Bg-Bj)*Bl.width;}var Be=k.call(this),Bf=-Be;if(Bn>Be){Bn=Be;this.mIsMaxZoom=true;}else{if(Bn<Bf){Bn=Bf;this.mIsMaxZoom=true;}}return Bn;},ValueToPositionCheckLogScale:function m(Bj,Bg,Bi){var Bh,Bf,Be;Bh=this.mMinTick;Bf=this.mMaxTick;if(this.mOptions.mUseLogarithmicScale){Bj=Bj<=0?-1:J.call(this,Bj);Bh=J.call(this,Bh);Bf=J.call(this,Bf);}Be=this.mAxisInfo.mAxisDrawInReverse?(Bf-Bj):(Bj-Bh);return Bg+((Bi-Bg)*Be/(Bf-Bh));},ValueToPositionCheckValue:function BO(Bl,Bi,Bk){var Bj,Bf,Bh,Be,Bg;Bj=0;Bf=0;Bh=z.call(this,Bl,Bj,Bf);Bl=Bh.Value;Bj=Bh.Min;Bf=Bh.Max;if(!Bh.Flag){return{Flag:false};}Be=this.mAxisInfo.mAxisDrawInReverse?(Bf-Bl):(Bl-Bj);Bg=Bi+Math.floor((Bk-Bi)*Be/(Bf-Bj));return{Flag:true,Position:Bg};},GetValueForUnit:function BY(){var Bh=this.mAxisInfo,Bf,Bk=this.mDeviceDataArea,Bj=(this.mMinTick+this.mMaxTick)/2,Bi=0,Be=0,Bg=z.call(this,Bj,Bi,Be);Bi=Bg.Min;Be=Bg.Max;if(!this.mOptions.mUseLogarithmicScale&&Bg.Flag){if(Bh.mAxisDirection===g.AD_Y){Bf=(Be-Bi)/Bk.height;}else{Bf=(Be-Bi)/Bk.width;}}return Bf;},GetOuterTickLength:function A7(){if(this.HasOuterTicks(this.mMajorGrid.mGridStyle)){return this.mTickLength;}if(this.HasOuterTicks(this.mMinorGrid.mGridStyle)){return this.mTickLength/2;}return 0;},AdjustDeviceDataArea:function AZ(Bf,Be){if(this.mIsShown&&this.mAxisInfo.mShowAxisLabels){this.hReserveLabelOrTickArea(Bf,false,Be);}if(this.mIsShown||this.mUseDepth){this.ReserveDepthAxisLine(Bf,Be);}},UpdateTitleAndLabelArea:function AN(Bf){var Bg=this.mChartContextPtr,Be=this.mAxisInfo;if(!this.mIsShown||!Bg.mIsValueAxisShown){return ;}if(this.mLabelArea===null||this.mLabelArea===undefined){this.mLabelArea=new BU.Rect2D({Rect2D:Bf});}else{this.mLabelArea.ResetRect(Bf);}if(Be.mShowAxisLabels&&W.call(this)){BW.call(this);this.hReserveLabelOrTickArea(Bf,true,true);}if(Be.mShowAxisTitle){this.UpdateTitleLocation(Bf);this.ReserveTitle(Bf,true);}},HideCustomPercentOverlappedLabels:function BL(){BN.visPrint("To be impl with percetn in custom scale");},HideOverlappedLabels:function Aj(Bl,Bg){var Bp,Bm,Bh,Bz,Bi=this.mChartContextPtr,Bx=Bi.mIsGraphMatrix,Bf=this.IsVerticalAxis()?o.REC_EXP_VERTICAL:o.REC_EXP_HORIZONTAL;if(Bg-Bl<2){return ;}var B0=this.mIsPercent&&Bx,B1=BH.call(this,Bl,Bg),Bk=B1.Start,Bt=this.mLabelList,Bj=this.mGraphObjectList,Bv=B1.PaddingPossible;Bp=Bj[Bk];Bm=Bp;if(Bv===false){var Bw,By=Bt.length;for(Bw=0;Bw<By;Bw++){if(Bt[Bw]){Bt[Bw].mIsShown=false;}}return ;}if(R.call(this)||(!this.mIsPercent&&Bx)){Bm=Bj[Bl];var Br=Bx?Bm:Bp;if(Bm.HasOverlapForSameRotation(Bp,this.mLabelSpan,Bf)){Br.mIsShown=false;}}var Bn,Bo=this.mOptions,Bs=this.mGraphMajorType,Bu=this.mTripleId.mObjectId,Be=Bg;if(Be-Bl>2&&!B0){if(Bo.mUseMaxValue&&Bo.mShowMaxLabel){Be--;}}Bn=A5.call(this,B0,Bl,Be,Bk,Bf);Bn=u.call(this,B0,Bl,Be,Bk,Bn);B.call(this,Bl,Bg,Bk,Bn,Bf);AD.call(this,Bl);if(Bp.mIsShown){var Bq=Bi.GetGraphMatrixContext().getPadding(BQ.kEndLabelToChart);Bp.mIsShown=Af.call(this,Bp,Bq);}if((Bs===a.GMT_POLAR&&Bu===A1.DssGraphX1Body)||(Bs===a.GMT_RADAR&&Bu===A1.DssGraphO1Body)){Bh=((Bg-1-Bk)%Bn);Bz=Bj[Bg-1-Bh];if(Bz.HasOverlapForSameRotation(Bm)){Bz.mIsShown=false;}}if(Bv){AQ.call(this,Bg,true);AQ.call(this,Bg,false);}this.mLabelInterval=Bn;},ValueToBubbleSize:function D(Be,Bk){var Bi,Bm,Bh,Bj,Bl,Bg,Bf=this.mChartContextPtr;Bk=(Bk>this.mMaxTick)?this.mMaxTick:Bk;Bk=(Bk<this.mMinTick)?this.mMinTick:Bk;Bi=this.mMinTick;Bm=this.mMaxTick;if(this.mOptions.mUseLogarithmicScale){Bk=Bk<=0?-1:(J.call(this,Bk));Bi=J.call(this,Bi);Bm=J.call(this,Bm);}Bh=Math.min(Bf.mGraphHeight,Bf.mGraphWidth)*Be;Bj=Bh/5000;Bl=Bh/1000;Bg=Bj+((Bk-Bi)*(Bl-Bj)/(Bm-Bi));return Math.ceil(Bg);},GetBottomPosition:function AR(Be){if(this.mChartContextPtr.mIsGraphMatrix){Be=Be||false;if(this.mOptions.mUseCustomMinMax&&this.mOptions.mDrawFromZero){return this.ValueToPosition(this.GetBaseValue(Be),false);}}return this.ValueToPosition(this.mMinTick);},GetAxisOriginValue:function Ah(){var Be=this.mOptions;if(Be.mDrawCustomLine){return Be.mAxisCustomValue;}return null;},GetBasePosition:function Ao(Bf,Be){Bf=Bf||false;if(Be===null||Be===undefined){Be=this.GetBaseValue(Bf);}if(this.mChartContextPtr.mIsGraphMatrix){if(this.mOptions.mUseCustomMinMax&&this.mOptions.mDrawFromZero){return this.ValueToPosition(Be,false);}}return this.ValueToPosition(Be);},GetMinTick:function Al(){return this.mMinTick;},GetMaxTick:function A8(){return this.mMaxTick;},GetBaseValue:function An(Bf){Bf=Bf||false;var Bg=this.mChartContextPtr,Be=this.mOptions;if(Bg.mIsGraphMatrix){if(Bf&&Be.mDrawCustomLine){if(AL.isValidNumber(Be.mAxisCustomValue)){return Be.mAxisCustomValue;}}if(Be.mUseCustomMinMax&&Be.mDrawFromZero){return 0;}}if(this.mMaxTick<0){return this.mMaxTick;}if(!Be.mDrawFromZero||this.mMinTick>0||this.mMaxTick<0){return this.mMinTick;}return 0;},GetPositionByValue:function Ai(Bf){var Be=this.GetFloatPositionByValue(Bf);if(Be===null){return Be;}Be=Math.floor(Be+0.5);return Be;},GetFloatPositionByValue:function BG(Bl){var Bf=0,Bk=0,Bh,Bm,Bj;Bj=z.call(this,Bl,Bf,Bk);Bl=Bj.Value;Bf=Bj.Min;Bk=Bj.Max;if(!Bj.Flag){return null;}var Bg=this.mAxisInfo,Bi=this.mDeviceDataArea;Bh=Bg.mAxisDrawInReverse?(Bl-Bf):(Bk-Bl);Bm=0;if(Bk===Bf){return Bm;}if(Bg.mAxisDirection===g.AD_Y){Bm=Bi.y+Bh*Bi.height/(Bk-Bf);}else{Bm=Bi.x+Bi.width-Bh*Bi.width/(Bk-Bf);}var Be=k.call(this);if(Bm>Be){Bm=Be;this.mIsMaxZoom=true;}if(Bm<-Be){Bm=-Be;this.mIsMaxZoom=true;}return Bm;},GenerateCustomLine:function b(Be,Bh){var Bj=this.mOptions,Bg=this.mDeviceDataArea;if(this.mChartContextPtr.mIsGraphMatrix){if(this.mPrimaryMetrics.length===0){return ;}}if(!Bj.mDrawCustomLine&&!Bj.mDrawSecondCustomLine){return ;}var Bf,Bi;if(this.mChartContextPtr.mIsGraphMatrix){Bi=BU.gAxisObjects[this.getIndex()].mCustomLineId.mObjectId;Bf=Bg;}else{Bi=BU.gAxisObjects[this.getIndex()].mCustomLineId.mObjectId;Bf=new BU.Rect2D({Rect2D:this.mDeviceDataArea});Bg.ResetRect(Be);}if(Bj.mDrawCustomLine){i.call(this,Bh,Bj.mAxisCustomValue,Bi);}if(this.mTripleId.mObjectId===A1.DssGraphY1Body&&Bj.mDrawSecondCustomLine){i.call(this,Bh,Bj.mAxisSecondCustomValue,A1.DssGraphY1SecondUserLine);}Bg.ResetRect(Bf);},GenerateMapAndList:function Ax(){},generateGridsByArea:function AK(Bg){if(!this.mIsShown){return ;}var Bf=this.mMajorGrid,Be=this.mMinorGrid;if(Bg){if(Bf.mShowGridLines&&Bf.mGridStyle!==n.DssGraphGridNone){BC.call(this);}if(Be.mShowGridLines&&Be.mGridStyle!==n.DssGraphGridNone){O.call(this);}}else{if(this.mAxisInfo.mUseInterlacedGrids){C.call(this);}}},GetNumberFormat:function A(){return this.mNumberFormat;},GetTrimWithPadding:function Ak(){return this.mIsTrimmedWithPadding;},GetPositionAtTick:function BS(Be){var Bf=this.GetFloatPositionByValue(Be);if(Bf!==null){return Bf;}return 0;},GetMaxMinDataInput:function BF(){return{Max:this.mMaximum,Min:this.mMinimum};},GetMaxMinDataInputPosition:function L(){var Be=this.GetPositionByValue(this.mMinimum),Bf=this.GetPositionByValue(this.mMaximum);return{LowBoundary:Be,HighBoundary:Bf};},postProcessStep:function p(Be,Bg){var Bf=Be,Bk=this.mChartContextPtr;switch(this.mGraphMajorType){case a.GMT_HISTOGRAM:case a.GMT_POLAR:case a.GMT_SCATTER:case a.GMT_BUBBLE:case a.GMT_3D_SCATTER:case a.GMT_GANTT:break;case a.GMT_GAUGE:break;case a.GMT_CATEGORY:if(!this.IsVerticalAxis()&&!Bk.mIsGraphMatrix){this.mLargerGridInterval=true;}break;default:if(!this.IsVerticalAxis()&&!Bk.mIsGraphMatrix){this.mLargerGridInterval=true;}break;}if(this.mLargerGridInterval){if(Bg<Bf*7){Bf*=2;}else{Bf*=4;}}if(Bk.mIsGraphMatrix){var Bi=this.mChartContextPtr.GetGraphMatrixContext().GetValueAxisZoomScale(this.mTripleId.mObjectId);if(Bi>1){Bf/=Bi;}if(Math.abs(this.mMaximum)<0.3&&Math.abs(this.mMinimum)<0.3){var Bj=Math.ceil(this.mMaximum/Bf)*Bf,Bh=Math.floor(this.mMinimum/Bf)*Bf;if(Bj<Bh+Bf){Bf/=2;}}}return Bf;},GetLogicalCoord:function w(Bh){var Bf=0,Bj=this.mDeviceDataArea,Bg=this.mMinTick,Be=this.mMaxTick;if(this.mOptions.mUseLogarithmicScale){Bg=J.call(this,Bg);Be=J.call(this,Be);}var Bi=this.IsVerticalAxis()?(Be-Bg)*(Bh-Bj.y)/Bj.height:(Be-Bg)*(Bj.x+Bj.width-Bh)/Bj.width;Bf=this.mAxisInfo.mAxisDrawInReverse?Bg+Bi:Be-Bi;if(this.mOptions.mUseLogarithmicScale){Bf=Math.pow(10,Bf);}return Bf;},GetSlopeFactor:function BI(Bf){var Be=this.IsVerticalAxis()?-this.mDeviceDataArea.height:this.mDeviceDataArea.width;if(this.mOptions.mUseLogarithmicScale){Be/=((Math.log(this.mMaxTick)-Math.log(this.mMinTick))*Bf);}else{Be/=(this.mMaxTick-this.mMinTick);}return this.mAxisInfo.mAxisDrawInReverse?-Be:Be;},GetMinMaxLogicalCoord:function A2(){return{Min:this.mMinTick,Max:this.mMaxTick};},GenerateLabelsFor3D:function A9(){},GetGridLinePositionsFor3D:function G(){},OnZooming:function M(){},getStatus:function X(){var Bg=0,Bh=2,Bf=this.getLabelRotation(),Be=this.mLabelInterval;if(Bf===BE.Rotate90){return Bh;}if(Be===1){return Bg;}return Bh;},getCondenseStatus:function h(){return this.mCondenseLabels;},checkCondense:function H(Be){this.mCondenseLabels=Be;return this.mCondenseLabels;},isBaseLineQualified:function AJ(Be){Be=Be||0;return this.mMaxTick>Be&&this.mMinTick<Be;},liftedFromZero:function AB(){return this.mMinTick===0&&this.mLowTrim>0;},getBandings:function Ap(){var Bg=0,Be,Bf=this.mChartContextPtr;if(this.IsVerticalAxis()){Be=Bf.mGraphHeight;}else{Be=Bf.mGraphWidth;}return[{Start:Bg,Size:Be}];},formatAsLabel:function Ac(Bf){var Bg=BU.gAxisObjects[this.getIndex()].mLabelId,Be=new BU.NumberObject({TripleId:Bg,GraphObjectManager:this,Number:Bf,NumberFormat:this.mNumberFormat,GraphCollectionObject:this.mpAxisLabelSet,ShouldCondense:this.mCondenseLabels,ExpectCondense:this.mCondenseLabels});return Be.mText;},getGridLinePosition:function A6(Bm){if(!(this.mIntegrity&4)){return[];}if(Bm===undefined){Bm=true;}var Bf,Bj,Bp=[];var Bt=this.mLabelList,Bn=Bt.length;var Bi=10,Bg=this.mChartContextPtr,Bk=Bg.mGraphWidth,Bh=Bg.mGraphHeight,Bs=this.IsVerticalAxis();for(Bj=0;Bj<Bn;Bj++){if(Bt[Bj].mIsShown){Bf=this.ValueToPosition(Bt[Bj].mNumber);if(Bf<Bi||Bf+Bi>(Bs?Bh:Bk)){continue;}Bp.push(Bf);}}if(Bm){return Bp;}var Bq,Br,Be=[];Bn=Bp.length;if(Bn===0){return Be;}else{var Bo,Bl;for(Bj=1;Bj<Bn;Bj++){Bf=0.5*(Bp[Bj-1]+Bp[Bj]);if(Bj===1){Bo=Math.abs(Bf-Bp[Bj-1]);}else{if(Bj===Bn-1){Bl=Math.abs(Bf-Bp[Bj-1]);}}Be.push(Bf);}Br=!Bs?Bn-1:0;Bq=Bp[Br];Bf=BK.call(this,Bq,false,Bo);if(Bf!==null){Be.push(Bf);}Br=Bs?Bn-1:0;Bq=Bp[Br];Bf=BK.call(this,Bq,true,Bl);if(Bf!==null){Be.push(Bf);}}return Be;},TrimDeviceDataArea:function BD(Bf){var Bg=this.mChartContextPtr,Be;Be=Bg.getUniformAxisInformation(this.mTripleId.mObjectId);if(Be.PerCell){return this.TrimAxisPadding(Bf,false);}this.mLowTrim=Be.Trims[0];this.mHighTrim=Be.Trims[1];F.call(this,false,this.mHighTrim,this.mLowTrim,Bf);},refresh:function AF(Bf,Bh){if(Bf==="clipping"){var Bj=this.mChartContextPtr,Bi=this.mOptions;if(this.mMaximum!==Bh.max||this.mMinimum!==Bh.min){this.mMaximum=Bh.max;this.mMinimum=Bh.min;Bi.mAxisMaxValue=Bh.max;Bi.mAxisMinValue=Bh.min;c.call(this,this.mOptions);this.mTicks=[];this.mMaxTick=this.mMinTick=-1;this.mStep=-1;AM.call(this);if(Bi.mUseLogarithmicScale&&Bj.IsStackedChart()){this.mMaximum=Bi.mDrawCustomLine?Math.max(this.mMaximum+this.mMinTick,Bi.mAxisCustomValue):this.mMaximum+this.mMinTick;this.mMinimum=Math.min(this.mMinimum,0);this.mTicks.splice(0,this.mTicks.length);var Be=AA.computeTicksForLogScale(this);this.mMaxTick=Be.mMaxTick;this.mMinTick=Be.mMinTick;this.mTicks=Be.mTicks;this.mStep=Be.mStep;}As.call(this);}var Bg={x:0,y:0,width:Bj.mGraphWidth,height:Bj.mGraphHeight};this.TrimAxisPadding(Bg,false);}},TrimAxisPadding:function l(Bi,Bh){if(!this.mChartContextPtr.mIsGraphMatrix){return ;}var Bg,Be,Bf,Bj,Bk=this.mOptions.mUseCustomMinMax;this.mLowTrim=this.mHighTrim=0;Bg=K.call(this,Bk);Be=Bg.LowPadding;Bf=Bg.HighPadding;Bj=this.mAxisInfo.mAxisDirection===g.AD_X?Bi.width:Bi.height;Bj-=(Bf+Be);Bg=V.call(this,Bh,Bj,Bf,Be);Be=Bg.LowPadding;Bf=Bg.HighPadding;F.call(this,Bh,Bf,Be,Bi);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","GraphObjectManager","TrendLineObject","Rect2D","TripleId","TrendLineObject","ChartContext");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumValueAxis","EnumTrendLineIndex","EnumAnchorPoint","EnumCollectionType","EnumGraphMajorType","EnumFontRotation");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphDataTextPosition","EnumDSSGraphObject");var Z=mstrmojo.chart,V=Z.enums,c=V.EnumCollectionType,C=V.EnumGraphMajorType,X=V.EnumValueAxis,J=V.EnumAnchorPoint,d=Z.gNullTripleId,B=Z.gNullObjectId,R=mstrmojo.chart.model,e=R.enums,I=e.EnumDSSGraphType,K=e.EnumDSSGraphMarkerShape,L=e.EnumDSSGraphProperty,a=e.EnumDSSGraphDataTextPosition,M=e.EnumDSSGraphObject;mstrmojo.chart.Plot=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.Plot",mDatasetPtr:null,mLegendPtr:null,mSeriesId:null,mDataArea:null,mTrendLines:null,mPostTrendLineObjects:null,mHasSizeBy:false,mHasColorBy:false,mPartialRendering:false,mClippedElementSize:null,shownDataLabels:[],shownRefLabels:[],dataLabelManager:null,axisOriginLabels:[],DPCount:0,seriesDPCount:[],init:function W(h){this._super(h);this.mSeriesId=[];this.mTrendLines=[[],[]];this.mPostTrendLineObjects=[];var i=this.mChartContextPtr,g=i.GetGraphMatrixContext();this.mHasSizeBy=g.mHasSizeBy;this.mHasColorBy=g.mHasColorBy;this.mPartialRendering=i.mPartialRendering;this.mClippedElementSize={};this.shownDataLabels=[];this.shownRefLabels=[];this.dataLabelManager=null;this.axisOriginLabels=[];if(h.Area){this.mDataArea=new Z.Rect2D({Rect2D:h.Area});}this.DPCount=0;this.seriesDPCount=[];},Draw:function T(g){var h=false;if(g&&g.Skip){g.Skip--;h=true;}this._super();if(!h){this.DrawTrendLinesAndEquationsInArea(this.mDataArea,false);this.DrawTrendLinesAndEquationsInArea(this.mDataArea,true);this.DrawPostTrendLineObjects();}},DrawTrendLinesAndEquations:function b(){var g=this.mDataArea;this.DrawTrendLinesAndEquationsInArea(g,false);this.DrawTrendLinesAndEquationsInArea(g,true);},OnRectangleSelection:function H(i,h,g){g=g||0;return h;},SetDataArea:function F(g){if(this.mDataArea===null){this.mDataArea=new Z.Rect2D({Rect2D:g});}else{this.mDataArea.ResetRect(g);}},MoveLabel:function Y(m,p,t,i,g,l){var r,k,o,q,j,s,h,n;if(m===null){return ;}r=m.GetBoundingRect();k=r.width/2;o=r.height/2;q=p;j=t;if(i){s=q;q=j;j=s;}n=q;if(l===a.DssGraphDTPositionOutMin||l===a.DssGraphDTPositionInMin){n=j;}h=i?-1:1;switch(l){case a.DssGraphDTPositionCenter:n=q.MiddleTo(j);break;case a.DssGraphDTPositionInMin:case a.DssGraphDTPositionOutMax:if(g){n.y-=o*h;}else{n.x+=k*h;}break;case a.DssGraphDTPositionOutMin:case a.DssGraphDTPositionInMax:if(g){n.y+=o*h;}else{n.x-=k*h;}break;default:break;}m.MoveTo(n.x,n.y,J.CENTER);},AddLegendMarkerToCollection:function G(h,q,j,m,s,p,n){var i=this.mChartContextPtr,r,k,l,g,o;if(this.mLegendPtr===null||q===null){return ;}if(i.mIsGraphMatrix){return ;}j=j||false;s=s||K.DssGraphMarkerShapeRectangle;n=n||false;if(m===undefined){m=true;}if(p===undefined){p=true;}g=i.mGraphType;r=new Z.TripleId({ObjectId:M.DssGraphLegendMarker,SeriesId:h});k=this.mLegendPtr.GetGraphObject(r);if(k){if(j){l=k;q.AddGraphObject(k,false);if(p&&g!==I.DssGraphTypePareto_Percent){r.mObjectId=M.DssGraphDataLine;this.mLegendPtr.SetFormatLineOfLegendMarkerLine(i.GetFormatLine(r,c.CT_LINE),h,n);}r.mObjectId=M.DssGraphRiser;l.SetFormatLine(i.GetFormatLine(r,c.CT_NO_COLLECTION));l.SetFormatFill(i.GetFormatFill(r,c.CT_DEPTH_LINE_OR_LINE_MARKER));l.mIsShown=m;if(m){l.SetMarkerShape(s);}}else{o=i.GetGraphMajorType();q.AddGraphObject(k);if(o===C.GMT_BUBBLE){if(p){r.mObjectId=M.DssGraphDataLine;this.mLegendPtr.SetFormatLineOfLegendMarkerLine(i.GetFormatLine(r,c.CT_LINE),h);}if(m){l=k;l.SetMarkerShape(s);}}if(g===I.DssGraphTypePareto_Percent||o===C.GMT_GAUGE){if(m){l=k;l.SetMarkerShape(s);}}if(o===C.GMT_STOCK){if(p){r.mObjectId=M.DssGraphRiser;this.mLegendPtr.SetFormatLineOfLegendMarkerLine(i.GetFormatLine(r,c.CT_LINE),h,n);}if(m){l=k;l.SetMarkerShape(s);}}}}},CreateTrendLine:function P(p,o,r,i,k,j,g,m,n,h,l,q){},AdjustTrendLineEquation:function N(h,g){},DrawTrendLinesAndEquationsInArea:function U(g,h){var m=this.mChartContextPtr,k=h?this.mTrendLines[1]:this.mTrendLines[0],j;if(k.length===0){return ;}m.saveState();m.DrawRectangle(g,true);m.Clip();for(j=0;j<k.length;++j){k[j].Draw();}m.RestoreState();for(j=0;j<k.length;++j){var l=k[j].mTextPtr;if(l!==null){l.Draw();}}},DrawPostTrendLineObjects:function f(){var j=this.mPostTrendLineObjects,g=j.length,h;for(h=0;h<g;++h){j[h].Draw();}},LoadTrendLineProperties:function D(i,h){var l=this.mChartContextPtr;if(l.mIsGraphMatrix||!!h){return ;}if(l.mIsGraphMatrix){var g=this.mDatasetPtr.GetTrendLinePropertiesBySeries(i);if(g){h.mRegressionType=g.RegressionType||h.mRegressionType;if(g.Order!==null&&g.Order!==undefined){h.mOrder=g.Order;}if(g.Period!==null&&g.Period!==undefined){h.mPeriod=g.Period;}h.mShowCoefficients=g.ShowCoefficients||h.mShowCoefficients;h.mShowEquation=g.ShowEquation||h.mShowEquation;h.mUserSeriesGraphColor=g.UserSeriesGraphColor||h.mUserSeriesGraphColor;}}else{var j,k=new Z.TripleId({ObjectId:M.DssGraphRiser,SeriesId:i});j=l.GetProperty(L.DssGraphSDRegressionType,k);if(j){h.mRegressionType=j;}j=l.GetProperty(L.DssGraphSDPolyFactor,k);if(j){h.mOrder=j;}j=l.GetProperty(L.DssGraphSDMOVAFactor,k);if(j){h.mPeriod=j;}j=l.GetProperty(L.DssGraphShowSDLinrCorr,k);if(j){h.mShowCoefficients=j;}j=l.GetProperty(L.DssGraphShowSDLinrFormula,k);if(j){h.mShowEquation=j;}k.mObjectId=B;j=l.GetProperty(L.DssGraphCurveColorAsSeries,k);if(j){h.mUserSeriesGraphColor=j;}}},LoadValueAxisInfo:function S(j,g){var m=this.mChartContextPtr,i=this.mSeriesId,h,l,k;if(g){if(m.mIsGraphMatrix){k=this.mDatasetPtr.GetValueAxisBySeries(i[j]);}else{h=m.GetProperty(L.DssGraph2DSplitYAutomatic,d);if(h===null||h===undefined){k=(j%2===0)?X.VA_Y1:X.VA_Y2;}else{l=new Z.TripleId({ObjectId:L.DssGraphRiser,SeriesId:i[j]});h=m.GetProperty(L.DssGraph2DSDSplitY,l);if(h){k=h?X.VA_Y2:X.VA_Y1;}}}}else{k=X.VA_Y1;}return k;},GetDataset:function Q(){return this.mDatasetPtr;},SetDataset:function O(g){this.mDatasetPtr=g;},AddSeries:function E(g){this.mSeriesId.push(g);},GetMaxElementOffsetClippedByBoundary:function A(h,i){var g={X1:{LowOffset:0,HighOffset:0},X2:{LowOffset:0,HighOffset:0},Y1:{LowOffset:0,HighOffset:0},Y2:{LowOffset:0,HighOffset:0}},j=this.mChartContextPtr;if(j.IsBarChart()||j.mGraphType===I.DssGraphTypeGridChart){return g;}if(j.IsLineChart()||j.IsAreaChart()){return g;}return g;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","Plot","CategoryAxis");var B=mstrmojo.chart;mstrmojo.chart.GridBasePlot=mstrmojo.declare(mstrmojo.chart.Plot,null,{scriptClass:"mstrmojo.chart.GridBasePlot",mHasXAxis:false,mHasYAxis:false,mMarkerShape:0,mXaxis:null,mYaxis:null,mDataArea:null,init:function E(F){this._super(F);this.mMarkerShape=4;this.mHasXAxis=true;this.mHasYAxis=true;this.mDataArea=new B.Rect2D();},AssignSeries:function A(F){},AssignAxis:function D(G,F){if(F){this.mYAxis=G;}else{this.mXAxis=G;}},AssignDataArea:function C(F,G){this.mDataArea.ResetRect(F);if(G){this.mYAxis.SetDeviceDataArea(F);}else{this.mXAxis.SetDeviceDataArea(F);}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Plot","NumberObject","Rect2D","TextObject");var A=mstrmojo.chart;mstrmojo.chart.CategoryPlot=mstrmojo.declare(mstrmojo.chart.Plot,null,{scriptClass:"mstrmojo.chart.CategoryPlot",createRiserLabel:function C(G,F,K,H,E){var L,D=this.realComboChart;if((K===null&&H==="")||E===null){return null;}if(K){L=new A.NumberObject({TripleId:G,GraphObjectManager:this,Number:F,NumberFormat:K,GraphCollectionObject:E,Locale:0,clientDrag:true,DataSet:this.mDatasetPtr,IsFinal:(H==="")});if(L===null){return null;}if(H&&H!==""){L.AddTextBeforeNumber(H);}if(D){L.strokeBBox();}this.AddToMap(L);E.AddGraphObject(L);return L;}var J=new A.Rect2D({x:0,y:0,width:0,height:0}),I=new A.TextObject({TripleId:G,GraphObjectManager:this,rect:J,GraphCollectionObject:E,clientDrag:true});if(I!==null){I.SetText(H);if(D){I.strokeBBox();}this.AddToMap(I);E.AddGraphObject(I);return I;}return null;},ReserveAreaForDataLabels:function B(D){}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Rect2D","Point2D","TripleId","Plot","GridMap","LabelInfo","TextObject","StraightLineObject","PolyLineObject","NumberObject","GraphCollectionObject","MarkerObject","DataLabelManager","GMDataLabelInfo","ChartConstants","TrendLineObject");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumDSSGraphObjectManager","EnumCollectionType","EnumAnchorPoint","EnumImageUsage","EnumFontRotation","EnumGraphMatrixMarkerTypeInChart","EnumGraphMatrixPiePlotType","EnumGraphMatrixThemeType","EnumGraphMatrixElementSizeMode");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphObject","EnumDSSGraphProperty","EnumDSSGraphRegressionType","EnumDSSGraphDataTextPosition","EnumDSSGraphDataTextShowType","EnumDSSExtraGraphProperty","EnumShapeType","EnumDSSGraphDataTextPosition");mstrmojo.requiresCls("mstrmojo.chart.common.MapStructure");mstrmojo.requiresCls("mstrmojo.VisUtility");var An=mstrmojo.chart;var Ao=An.gModuleMain,Ai=An.ChartConstants,AN=mstrmojo.VisUtility,R=An.enums,AK=R.EnumCollectionType,Aj=R.EnumGraphMajorType,A0=R.EnumAnchorPoint,M=R.EnumFontRotation,Ah=R.EnumGraphMatrixMarkerTypeInChart,d=R.EnumGraphMatrixElementSizeMode,AM=R.EnumImageUsage,q=R.EnumGraphMatrixPiePlotType,l=An.common,AB=An.gNullTripleId,Aq=An.gNullGroupId,Af=mstrmojo.chart.model,AR=Af.enums,A3=AR.EnumDSSGraphProperty,Q=AR.EnumDSSGraphRegressionType,Ae=AR.EnumDSSGraphDataTextPosition,Ac=AR.EnumDSSGraphDataTextShowType,Az=AR.EnumDSSGraphDataTextPosition,A4=AR.EnumDSSGraphObject,As=AR.EnumDSSExtraGraphProperty,c=AR.EnumShapeType,A7=AR.EnumDSSGraphMarkerShape;var F=-1,A6=0.7,AH=2,J=3,z=1,x=2,w=3,u=4,t=5,s=6,b=1,A2=1,O=2,A1=3,L=4;var Ad=new An.Point2D();function j(BE,BD){var BF;if(BE.cannotFitVertically===true&&BD.cannotFitVertically===false){return 1;}if(BE.cannotFitVertically===false&&BD.cannotFitVertically===true){return -1;}if(BE.cannotFitHorizontally===true&&BD.cannotFitHorizontally===false){return 1;}if(BE.cannotFitHorizontally===false&&BD.cannotFitHorizontally===true){return -1;}BF=BE.overlapRefLabelCount-BD.overlapRefLabelCount;if(BF<0){return -1;}else{if(BF>0){return 1;}else{BF=BE.overlapRefLineCount-BD.overlapRefLineCount;if(BF<0){return -1;}else{if(BF>0){return 1;}else{BF=BE.overlapDataLabelCount-BD.overlapDataLabelCount;if(BF<=0){return -1;}else{return 1;}}}}}}function At(){var BD={ConnectDataPoint:false,ShowDataLabel:false,MarkerSize:33,MarkerShape:4,ValueAxisIndex:0,SeriesID:0,IsNullData:[],TrendLineOptions:{mRegressionType:Q.DssGraphRegressionNone,mOrder:3,mPeriod:2,mShowEquation:false,mShowCoefficients:false,mUserSeriesGraphColor:true}};return BD;}function p(BI){var BF,BM=this.labelMatrix.length,BD=this.mDataArea.width,BL=this.mDataArea.height,BJ,BE=this.mChartContextPtr,BH=0.25;if(BE.mIsGraphMatrix){var BG=BE.GetGraphMatrixContext(),BK=BG.mConstants.FixedTickerSize;if(BG.mMarkerShape===A7.DssGraphMarkerShapeGMTick){BL=BK;BD=this.minRadius*BH;}else{BL=BD=this.minRadius*BH;}}else{for(BF=0;BF<BM;++BF){BJ=this.labelMatrix[BF].Label.GetBoundingRectNoRotation(true);BD=Math.min(BJ.width,BD);BL=Math.min(BJ.height,BL);if(this.isBubbleChart){BD=Math.min(this.labelMatrix[BF].HostMarker.width,BD);BL=Math.min(this.labelMatrix[BF].HostMarker.height,BL);}}if(!this.isBubbleChart){BD=Math.min(this.labelMatrix[0].HostMarker.width,BD);BL=Math.min(this.labelMatrix[0].HostMarker.height,BL);}if(BD>1){BD=Math.round(BD*BH);}if(BL>1){BL=Math.round(BL*BH);}}BI.width=Math.max(BD,1);BI.height=Math.max(BL,1);}function G(BD){return 3;}function AC(BH,BI){var BF=BI.Size,BD=BI.Position,BE=BF+BD.y<BH.y||BD.y-BF>BH.y+BH.height,BG=BF+BD.x<BH.x||BD.x-BF>BH.x+BH.width;return !BG&&!BE;}function U(BL){var BE=this.mChartContextPtr,BG,BD=5;if(BE.mPartialRendering===false){return false;}if(BE.mIsGraphMatrix){BG=BE.GetGraphMatrixContext();BD=BG.getPadding(Ai.kDataLabel);if(AC.call(this,BE.mRenderingWindow,BL)===false){return true;}}if(this.shapeCanvas===null){var BI=new An.Rect2D();p.call(this,BI);this.shapeCanvas=new An.GridMap({Rect:this.mDataArea,Unit:BI,MatrixType:1,dataLabelPadding:BD});if(F<0){F=G.call(this,1);}}var BJ,BK=this.shapeCanvas;if(BK.veryDense()){return true;}BJ=BK.ToInspectedMetric(BL);if(BJ.Min>=F-1||((BJ.Occupied/BJ.Total)>=F-1&&BJ.Min>0)){return true;}var BH=BL.BoundingBox,BF=BL.Position,BM=BL.Size;switch(BL.Shape){case c._CIRCLE:BK.UpdateMatrixCircle(BF,BM,true);break;case c._PIE:BK.UpdateMatrixCircle(BF,BM,true);if(BL.ExclusiveRect){BK.UpdateMatrixCircle(BF,BM*A6,false);}break;case c._TICKER:case c._RECTANGLE:BK.UpdateMatrixRect(BH,true);break;default:console.alert("Bubble partial rendering: shape not support yet");break;}return false;}function H(BJ,BK,BD){var BE=this.mChartContextPtr,BH=BE.GetGraphMatrixContext(),BL,BI,BO;switch(BJ){case A7.DssGraphMarkerShapeGMTick:var BM=Math.round(BH.mConstants.FixedTickerSize*0.5),BN=Math.round(0.5*BD);BL=new An.Rect2D();BL.x=BK.x-BN;BL.y=BK.y-BM;BL.width=2*BN;BL.height=2*BM;BI=c._TICKER;break;case A7.DssGraphMarkerShape2DPie:case A7.DssGraphMarkerShape2DRingPie:var BF=0;if(BJ===A7.DssGraphMarkerShape2DRingPie){BF=1;}if(this.mPieRenderer===null||this.mPieRenderer===undefined){this.mPieRenderer=new An.PiePlotRenderer({GraphObjectManager:this,Dataset:this.mDatasetPtr,ChartContext:BE,Layout:BF,MaxRadius:this.maxUnitRadius,PlotType:q.GMPPT_VALUE,ShownDataLabels:this.shownDataLabels});}var BG=this.mPieRenderer.GetPieRadius(0,0,0);BL=BE.transformToRect(BK,BG,true);BI=c._PIE;if(BF===1){BO=BE.transformToRect(BK,BG*A6,true);}break;case A7.DssGraphMarkerShapeSquare:case A7.DssGraphMarkerShapeRectangle:BL=BE.transformToRect(BK,BD,true);BI=c._RECTANGLE;break;default:BL=BE.transformToRect(BK,BD,true);BI=c._CIRCLE;break;}return{BoundingBox:BL,Shape:BI,ExclusiveRect:BO};}function Ax(BG,BE,BF){var BH,BI,BD;BH=this.mDatasetPtr.GetData(this.VecSeriesInfo[BG].SeriesID,BE,0);if(BH===null){return false;}BD=this.xAxis.GetPositionByValue(BH);if(BD===null){return false;}BF.x=BD;BH=this.mDatasetPtr.GetData(this.VecSeriesInfo[BG].SeriesID,BE,1);if(BH===null){return false;}BI=(this.VecSeriesInfo[BG].ValueAxisIndex===0)?this.y1Axis:this.y2Axis;BD=BI.GetPositionByValue(BH);if(BD===null){return false;}BF.y=BD;return true;}function BA(BE,BL){var BO,BM,BD=this.mChartContextPtr,BI=BD.GetGraphMatrixContext(),BF=this.mDatasetPtr,BG=this.VecSeriesInfo,BK,BN,BH=c._CIRCLE,BJ=BI.mMarkerShape;if(BD.mIsGraphMatrix){if(this.isBubbleChart){BK=BF.GetSizeByData(this.VecSeriesInfo[BE].SeriesID,BL);if(BK===null){return null;}BN=this.maxUnitRadius;if(BJ===A7.DssGraphMarkerShapeGMTick){BH=c._TICKER;BN=BI.GetScaledSize(BK,BN,BH);}else{if(BJ===A7.DssGraphMarkerShape2DPie||BJ===A7.DssGraphMarkerShape2DRingPie){BH=c._PIE;BN=BI.GetScaledSize(BK,BN,BH);BN=Math.max(BN,BI.mConstants.MinimalSize.Pie);}else{if(BJ!==A7.DssGraphMarkerShapeCircle){BH=c._SQUARE;}BN=BI.GetScaledSize(BK,BN,BH);}}BO=BN;this.maxRadius=Math.max(this.maxRadius,BN);this.minRadius=Math.min(this.minRadius,BN);}else{BO=this.maxUnitRadius;this.minRadius=this.maxRadius=this.maxUnitRadius;}}else{if(this.isBubbleChart){BM=0;BK=BF.GetProperty(A3.DssGraphMarkerSize,AB);if(BK){BM=BK;}BK=BF.GetData(this.VecSeriesInfo[BE].SeriesID,BL,2);if(BK===null){BG[BE].IsNullData[BL]=true;}else{BG[BE].IsNullData[BL]=false;BO=this.zAxis.ValueToBubbleSize(BM,BK);}}else{BO=BG[BE].MarkerSize;}}if(BO){BO=Math.max(BO,1);BO=Math.floor(BO);}return BO;}function g(BF,BE,BM,BG){var BL,BH,BD,BI,BJ,BK=null;if(BM===0){BL=this.xAxis;}else{if(BM===1){BL=(this.VecSeriesInfo[BF].ValueAxisIndex===0)?this.y1Axis:this.y2Axis;}else{if(BM===2){BL=this.zAxis;}}}if(BL===null){return BK;}BH=this.mDatasetPtr.GetData(this.VecSeriesInfo[BF].SeriesID,BE,BM);if(BH===null){return BK;}BD=BL.GetNumberFormat();BI=new An.TripleId({ObjectId:A4.DssGraphDataText,SeriesId:this.VecSeriesInfo[BF].SeriesID,GroupId:BE});BJ=new An.NumberObject({TripleId:BI,GraphObjectManager:this,Number:BH,NumberFormat:BD,GraphCollectionObject:BG,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:BM});if(BJ!==null){BK=BJ.mText;}return BK;}function Ag(BI,BD,BE,BH){var BG,BF;BG=BI.GetBoundingRectNoRotation();BF=BG;BI.SetRect(BF);return Math.sqrt((BF.x-BD.x)*(BF.x-BD.x)+(BF.y-BD.y)*(BF.y-BD.y));}function AG(BI,BM,BS,BP){var BN=false,BK=false,BL=2,BO,BD=0,BH,BR=0,BG=0,BF,BQ,BE,BJ=this.isSmarted?BP:this.labelLocation;switch(BS){case M.FR_90:case M.FR_270:BN=true;break;case M.FR_45:case M.FR_315:BK=true;break;default:break;}if(BK){BL=1.414;}BO=BI.GetBoundingRectNoRotation();if((BJ===Ae.DssGraphDTPositionOutMin)||(BJ===Ae.DssGraphDTPositionInMin)){BD=BK?BM.height/2+BM.width/2:BM.width;}else{BD=BK?BM.width/2+BM.height/2:BM.height;}BH=BD;switch(BJ){case Ae.DssGraphDTPositionCenter:BR=BG=0;break;case Ae.DssGraphDTPositionOutMin:BR=1;BH+=(BN||BK)?BO.Height/BL:BO.Width/2;break;case Ae.DssGraphDTPositionInMin:BR=-1;BH+=(BN||BK)?BO.Height/BL:BO.Width/2;break;case Ae.DssGraphDTPositionInMax:BG=-1;BE=BN?BO.Width:BO.Height;BH+=(BN||BK)?BE/BL:BO.Height/2;break;case Ae.DssGraphDTPositionOutMax:BG=1;BE=BN?BO.Width:BO.Height;BH+=(BN||BK)?BE/BL:BO.Height/2;break;default:break;}BF=BM.GetCenter().x+BR*BH;BQ=BM.GetCenter().y+BG*BH;BI.MoveTo(BF,BQ,A0.CENTER);return BD;}function AQ(BH,BK,BF,BE){var BD=BF.GetCenter(),BJ=(BE.y+BE.height-BD.y)<0,BL=(BE.x+BE.width-BD.x)<0,BI=(BE.x-BD.x)*(BE.x+BE.width-BD.y),BG=(BE.y-BD.y)*(BE.y+BE.height-BD.y);if(BG<=0){BH.x=BL?BF.x:BF.x+BF.width;BH.y=BL?Math.round(BF.y+0.5*BF.height):Math.round(BF.y+0.5*BF.height);BK.y=BD.y;BK.x=BL?BE.x+BE.width:BE.x;}else{BH.x=BJ?Math.round(BF.x+0.5*BF.width):Math.round(BF.x+0.5*BF.width);BH.y=BJ?BF.y:BF.y+BF.height;if(BI<=0){BK.x=BD.x;BK.y=BJ?BE.y+BE.height:BE.y;}else{if(BL){BK.x=BJ?BE.x+BE.width:BE.x+BE.width;BK.y=BJ?BE.y+BE.height:BE.y;}else{BK.x=BJ?BE.x:BE.x;BK.y=BJ?BE.y+BE.height:BE.y;}}}}function BC(BF,BE,BI,BJ,BH){var BG=0,BD=0;switch(BH){case Ae.DssGraphDTPositionOutMin:BG=1;BF.x=BI.x+BI.width;BF.y=BI.y+0.5*BI.height;BJ-=BI.width/2;break;case Ae.DssGraphDTPositionInMin:BG=-1;BF.x=BI.x;BF.y=BI.y+0.5*BI.height;BJ-=BI.width/2;break;case Ae.DssGraphDTPositionInMax:BD=-1;BF.x=BI.x+0.5*BI.width;BF.y=BI.y;BJ-=BI.height/2;break;case Ae.DssGraphDTPositionOutMax:BD=1;BF.x=BI.x+0.5*BI.width;BF.y=BI.y;BJ-=BI.height/2;break;}BE.x=BF.x+BG*BJ;BE.y=BF.y+BD*BJ;}function Aa(BG,BJ,BL,BF){var BD,BH,BK,BI,BE;if(BG===null){return ;}BD=AG.call(this,BG,BJ,BL,this.labelLocation);if(this.dataLabelLine){BH=new An.Point2D();BK=new An.Point2D();BC.call(this,BH,BK,BJ,BD,this.labelLocation);BI=new An.TripleId({ObjectId:A4.DssGraphDataTextConnectLine,SeriesId:-3,GroupId:-3});BE=new An.StraightLineObject({TripleId:BI,GraphObjectManager:this,Start:BH,End:BK});this.mGraphObjectList.push(BE);BF.AddGraphObject(BE);}}function Ab(BJ,BI,BH){var BE=this.mDatasetPtr,BK=BE.dataLabelStyle,BG="",BF,BD,BL;switch(BK){case AH:BF=g.call(this,BJ,BI,0,BH);BD=g.call(this,BJ,BI,1,BH);BG="("+BF+", "+BD+")";break;case J:BG=BE.GetTextLabel(this.VecSeriesInfo[BJ].SeriesID,BI);break;}BL=new An.TextObject({TripleId:new An.TripleId({ObjectId:A4.DssGraphDataText,SeriesId:this.VecSeriesInfo[BJ].SeriesID,GroupId:BI}),GraphObjectManager:this,GraphCollectionObject:BH});BL.SetText(BG);this.mPostTrendLineObjects.push(BL);return BL;}function Av(BJ){var BF,BG=this.VecSeriesInfo.length,BD=BJ.length,BI,BH;if(BD>0){BJ.splice(0,BD);}for(BF=0;BF<BG;++BF){var BE=this.VecSeriesInfo[BF].ShowDataLabel;if(BE){BI=new An.TripleId({ObjectId:A4.DssGraphDataText,SeriesId:this.VecSeriesInfo[BF].SeriesID});BH=new An.GraphCollectionObject({TripleId:BI,GraphObjectManager:this,CollectionType:AK.CT_TEXT});BJ.push(BH);this.AddToMap(BH);}}}function K(BK){var BG,BJ=this.VecSeriesInfo,BI=BJ.length,BF=BK.length,BD,BH;if(BF>0){BK.splice(0,BF);}for(BG=0;BG<BI;++BG){var BE=BJ[BG].ShowDataLabel;if(BE){BD=new An.TripleId({ObjectId:A4.DssGraphDataText,SeriesId:BJ[BG].SeriesID});BH=new An.GraphCollectionObject({TripleId:BD,GraphObjectManager:this,CollectionType:AK.CT_TEXT});BK.push(BH);this.AddToMap(BH);}}}function v(){if(this.mChartContextPtr.mIsGraphMatrix){return(this.xAxis&&this.xAxis.mOptions.mUseCustomMinMax)||(this.y1Axis&&this.y1Axis.mOptions.mUseCustomMinMax)||(this.y2Axis&&this.y2Axis.mOptions.mUseCustomMinMax);}return false;}function AY(BE){var BD=this.mDataArea,BF=v.call(this);if(BF){if(BE.x<BD.x||BE.x+BE.width>BD.x+BD.width){return false;}if(BE.y<BD.y||BE.y+BE.height>BD.y+BD.height){return false;}}return true;}function AW(BO,BT){var BM=this.VecSeriesInfo,BI=BM.length,BE=this.waitingList,BH,BG,BQ=null,BL=0,BS,BR,BK,BP;if(BE&&this.waitingList.length){var BN=this.waitingList,BJ=BN.length,BF;this.hiddenMarkers=this.hiddenMarkers||[];BQ=this.hiddenMarkers;for(BH=0;BH<BJ;BH++){BF=BN[BH].Id;BQ[BF.mSeriesId]=BQ[BF.mSeriesId]||[];BQ[BF.mSeriesId][BF.mGroupId]=1;}}for(BH=0;BH<BI;++BH){BL=0;BS=BM[BH].SeriesID;BR=BM[BH].IsNullData.length;for(BG=0;BG<BR;++BG){if(BQ&&BQ[BS][BG]!==undefined){if(!BM[BH].IsNullData[BG]){++BL;}continue;}var BD=BM[BH].ShowDataLabel;if(!BD){this.standAloneMarkers.push(BO[BH][BL++]);continue;}if(!BM[BH].IsNullData[BG]){BK=new An.GMDataLabelInfo();BK.isValid=true;BK.GroupId=BG;BK.SeriesId=BS;BK.HostMarkerBound=BO[BH][BG];BK.HostMarkerPoint=BK.HostMarkerBound.GetCenter();BK.Label=Ab.call(this,BH,BG,BT[BH]);if(!AY.call(this,BK.HostMarkerBound)){BK.isValid=false;continue;}if(BK.Label===null||BK.Label===undefined){BK.isValid=false;continue;}else{}this.mDataLabels.push(BK);BT[BH].AddGraphObject(BK.Label);}}}delete this.hiddenMarkers;}function C(BF){var BI,BH,BG=BF.length,BE=0,BD=[];for(BI=0;BI<BG;++BI){if(BF[BI].length>0){BE=BF[BI].length;for(BH=0;BH<BE;++BH){BD.push(BF[BI][BH]);}}}return BD;}function A9(BE){var BD=this.mDataArea;if(BE.x<BD.x||BE.y<BD.y){return true;}return(BE.x+BE.width>BD.x+BD.width||BE.y+BE.height>BD.y+BD.height);}function W(BE,BH,BI,BD){var BG=Math.max(BE.y,BH.y),BF=BE.y+BH.y-BG;if(BF>BD.y||BG<BD.y){return false;}BG=Math.max(BE.x,BH.x);BF=BE.x+BH.x-BG;return !(BF>Math.max(BI.x,BD.x)||BG<Math.min(BI.x,BD.x));}function AI(BE,BH,BI,BD){var BG=Math.max(BE.x,BH.x),BF=BE.x+BH.x-BG;if(BF>BD.x||BG<BD.x){return false;}BG=Math.max(BE.y,BH.y);BF=BE.y+BH.y-BG;return !(BF>Math.max(BI.y,BD.y)||BG<Math.min(BI.y,BD.y));}function Z(BH,BI,BG){var BE=true,BD=BG.length,BF;for(BF=0;BF<BD;++BF){BE=(BF===0)||(BF===2);if(BE){if(W.call(this,BH,BI,BG[BF],BG[(BF+1)%BD])){return true;}}else{if(AI.call(this,BH,BI,BG[BF],BG[(BF+1)%BD])){return true;}}}return false;}function f(BQ,BP){var BF=1,BL,BU,BO,BM,BG,BV,BH,BS,BJ=[],BN,BK,BI,BT,BE,BD,BR;switch(BQ.LabelRotation){case M.FR_NORMAL:case M.FR_CUSTOME:case M.FR_90:case M.FR_180:case M.FR_270:case M.FR_HOTEL:break;case M.FR_45:break;case M.FR_315:BF=-1;break;}BL=BQ.Label.GetBoundingRectNoRotation();BU=BL.GetCenter();BO=0.5*BL.width;BM=0.5*BL.height;BG=Math.sqrt(BO*BO+BM*BM);for(BR=0;BR<4;++BR){BH=(BR===0||BR===3)?-1:1;BS=(BR===0||BR===1)?-1:1;BV=new An.Point2D({x:BH*BO,y:BS*BM});BJ.push(BV);}for(BR=0;BR<4;BR++){BN=(BR===0||BR===3)?180:0;BK=Math.atan(BJ[BR].x/BJ[BR].y);BI=Ao.RadianToDegree(BK);BI+=(BN+BF*45);BT=Ao.DegreeToRadian(BI);BE=Math.round(BG*Math.cos(BT))+BU.x;BD=Math.round(BG*Math.sin(BT))+BU.y;BV=new An.Point2D({x:BE,y:BD});BP.push(BV);}}function e(BF,BI,BJ,BH){var BE=BI.length,BD=0,BG=0;BJ=BJ||false;BH=BH||false;if(!BH){for(BG=0;BG<BE;++BG){if(BF.HasIntersection(BI[BG])){++BD;}}}else{AN.visPrint("Checking label overlap with tilt targets has not been implemented yet.");}return BD;}function o(BK,BD,BF){var BI=0,BE=BD.length,BM=((BK.LabelRotation===M.FR_45)||(BK.LabelRotation===M.FR_315)),BH=[],BG=0,BL,BJ;BF=BF||false;if(BM){f.call(this,BK,BH);for(BG=0;BG<BE;++BG){BL=[];BL.push(BD[BG].GetBottomLeft());BL.push(BD[BG].GetBottomRight());BL.push(BD[BG].GetTopRight());BL.push(BD[BG].GetTopLeft());if(!BF){if(Z.call(this,BH[0],BH[1],BL)||Z.call(this,BH[1],BH[2],BL)||Z.call(this,BH[2],BH[3],BL)||Z.call(this,BH[3],BH[0],BL)){++BI;}}else{AN.visPrint("We currently do not support tilt rectangle against tilt targets");}}}else{BJ=BK.Label.GetBoundingRect();BI=e.call(this,BJ,BD,false,BF);}return BI;}function B(BJ){var BI,BF,BE=this.mDataArea,BH,BD,BK,BG;BH=this.standAloneMarkers.length;BD=new An.Rect2D();for(BF=0;BF<BH;++BF){BD.Reset(0,0,0,0);if(this.mChartContextPtr.RectangleIntersection(this.standAloneMarkers[BF],BE,BD)){BJ.UpdateMatrixRect(BD);}}BH=this.labelMatrix.length;for(BI=0;BI<BH;++BI){BD.Reset(0,0,0,0);if(this.mChartContextPtr.RectangleIntersection(this.labelMatrix[BI].HostMarker,BE,BD)){BJ.UpdateMatrixRect(BD);}if(this.labelMatrix[BI].IsPut){BK=this.labelMatrix[BI].Label.GetBoundingRectNoRotation();if(this.mChartContextPtr.RectangleIntersection(BK,BE,BD)){BJ.UpdateMatrixRect(BD,true,this.labelMatrix[BI].LabelRotation);}}}BG=Math.round(0.95*BJ.XCount*BJ.YCount);return BJ.Metric<BG;}function N(BG,BK,BJ){var BE=new An.Point2D(),BF=new An.Point2D(),BD=new An.TripleId({ObjectId:A4.DssGraphDataTextConnectLine,SeriesId:-3,GroupId:-3}),BI,BH;if(!BG.IsValid){return false;}if(BG.IsPut){if(BG.SuggestedStart===Ae.DssGraphDTPositionPieSmart){if(this.dataLabelLine||(!this.dataLabelLine&&BG.IsMoved(this.labelLocation))){BI=BG.Label.GetBoundingRect();AQ.call(this,BE,BF,BG.HostMarker,BI);}else{return false;}}else{if(this.dataLabelLine||(!this.dataLabelLine&&BG.IsMoved(this.labelLocation))){BC.call(this,BE,BF,BG.HostMarker,BJ,BG.SuggestedStart);}else{return false;}}BH=new An.StraightLineObject({TripleId:BD,GraphObjectManager:this,StartPoint:BE,EndPoint:BF,GraphCollectionObject:BK});this.mGraphObjectList.push(BH);BK.AddGraphObject(BH);return true;}if(this.dataLabelLine){BC.call(this,BE,BF,BG.HostMarker,BJ,BG.SuggestedStart);}else{return false;}BH=new An.StraightLineObject({TripleId:BD,GraphObjectManager:this,StartPoint:BE,EndPoint:BF,GraphCollectionObject:BK});this.mGraphObjectList.push(BH);BK.AddGraphObject(BH);return true;}function a(BG,BH){var BL=this.labelMatrix.length,BJ=new An.Point2D(),BM=new An.Rect2D(),BE,BK,BD,BI,BF;for(BI=0;BI<BL;++BI){BF=this.labelMatrix[BI];if(!BF.IsPut){BE=BF.Label.GetBoundingRectNoRotation();BK=BG.IsAccomdatableConsiderRotation(BF.HostMarker,BE,BJ,BF.LabelRotation);if(BK){BF.IsPut=true;BF.SuggestedStart=Az.DssGraphDTPositionPieSmart;BD=Ag.call(this,BF.Label,BF.HostMarker,BJ,BF.LabelRotation);BE=BF.Label.GetBoundingRectNoRotation();N.call(this,BF,BH,BD);this.AddToMap(BF.Label);BM.Reset(0,0,0,0);if(this.mChartContextPtr.RectangleIntersection(BE,this.mDataArea,BM)){BG.UpdateMatrixRect(BM,true,BF.LabelRotation);}}}}return true;}function Ap(BI){var BF,BK,BD,BH,BJ,BG,BE=this.VecSeriesInfo.length;BD=this.isBubbleChart?A4.DssGraphRiser:A4.DssGraphDataLine;BH=this.isBubbleChart?AK.CT_GENERAL_SHAPE:AK.CT_LINE;for(BF=0;BF<BE;++BF){BK=this.VecSeriesInfo[BF];BJ=new An.TripleId({ObjectId:BD,SeriesId:BK.SeriesID,GroupId:Aq});BG=new An.GraphCollectionObject({TripleId:BJ,GraphObjectManager:this,CollectionType:BH});BI.push(BG);this.AddToMap(BI[BF]);if(!this.mChartContextPtr.mIsGraphMatrix){this.AddLegendMarkerToCollection(BK.SeriesID,BI[BF],!this.isBubbleChart,true,BK.MarkerShape,BK.ConnectDataPoint);}}}function A8(BG){var BE=this.labelMatrix.length,BJ,BI,BF,BH,BD;for(BH=0;BH<BE;++BH){BD=this.labelMatrix[BH];BJ=BD.Label.mTripleId;BF=M.FR_NORMAL;BI=this.mChartContextPtr.GetProperty(A3.DssGraphFontRotation,BJ);if(BI){BF=BI;}if(!BD.IsPut){Aa.call(this,BD.Label,BD.HostMarker,BF,BG);this.AddToMap(BD.Label);}}}function AX(BI,BG,BD,BE){var BF,BH;if(this.labelLocation===Ae.DssGraphDTPositionOutMin){BI.SuggestedStart=Ae.DssGraphDTPositionInMin;}BH=AG.call(this,BI.Label,BI.HostMarker,BI.LabelRotation,BI.SuggestedStart);BF=BI.ToRectangle();if(A9.call(this,BF)||(o.call(this,BI,BG)>0)||(o.call(this,BI,this.standAloneMarkers)>0)||(o.call(this,BI,BD)>0)){if(BI.SuggestedStart>=Ae.DssGraphDTPositionOutMax){return false;}++BI.SuggestedStart;if(BI.SuggestedStart===this.labelLocation){++BI.SuggestedStart;}if(BI.SuggestedStart>Ae.DssGraphDTPositionOutMax){return false;}return AX.call(this,BI,BG,BD,BE);}BD.push(BF);BI.IsPut=true;N.call(this,BI,BE,BH);return true;}function AD(BJ,BM,BE){var BL=this.labelMatrix.length,BH=0,BI,BD,BK,BG,BF;for(BF=0;BF<BL;++BF){BI=this.labelMatrix[BF];BD=AG.call(this,BI.Label,BI.HostMarker,BI.LabelRotation,this.labelLocation);BK=BI.ToRectangle();BG=(A9.call(this,BK)||(o.call(this,BI,BJ)>0)||(o.call(this,BI,this.standAloneMarkers)>0)||(o.call(this,BI,BM)>0));if(!BG){BM.push(BK);BI.IsPut=true;BI.SuggestedStart=this.labelLocation;N.call(this,BI,BE,BD);++BH;this.AddToMap(BI.Label);continue;}if(AX.call(this,BI,BJ,BM,BE)){++BH;this.AddToMap(BI.Label);}else{BI.SuggestedStart=this.labelLocation;}}return BH;}function r(BJ,BO){var BL,BG=this.VecSeriesInfo.length,BI,BF,BE=0,BN,BM,BH,BK;for(BF=0;BF<BG;++BF){BL=this.VecSeriesInfo[BF];BI=0;BN=this.VecSeriesInfo[BF].SeriesID;BM=this.VecSeriesInfo[BF].IsNullData.length;for(BE=0;BE<BM;++BE){var BD=this.VecSeriesInfo[BF].ShowDataLabel;if(!BD){this.standAloneMarkers.push(BJ[BF][BI++]);continue;}if(!this.VecSeriesInfo[BF].IsNullData[BE]){BH=new An.LabelInfo();BH.IsValid=true;BH.GroupId=BE;BH.SeriesId=BN;BH.HostMarker=BJ[BF][BI++];BH.Label=Ab.call(this,BF,BE,BO[BF]);if(BH.Label===null){BH.IsValid=false;continue;}else{}this.labelMatrix.push(BH);BO[BF].AddGraphObject(BH.Label);}}}}function S(BO,BF){var BM,BK=this.VecSeriesInfo.length,BI,BG=0,BE,BJ,BP,BR=0,BL,BN,BQ,BH;for(BI=0;BI<BK;++BI){BM=this.VecSeriesInfo[BI];var BD=this.mDatasetPtr.showSeriesDatalabel(BM.SeriesID);if(BD){BJ=new An.TripleId({ObjectId:A4.DssGraphDataText,SeriesId:BM.SeriesID});BE=new An.GraphCollectionObject({TripleId:BJ,GraphObjectManager:this,CollectionType:AK.CT_TEXT});BP=BO[BI];BR=0;BN=BM.IsNullData.length;for(BG=0;BG<BN;++BG){if(BM.IsNullData[BG]){continue;}BQ=Ab.call(this,BI,BG,BE);BE.AddGraphObject(BQ);this.AddToMap(BQ);BJ=BQ.mTripleId;BH=M.FR_NORMAL;BL=this.mChartContextPtr.GetProperty(A3.DssGraphFontRotation,BJ);if(BL){BH=BL;}Aa.call(this,BQ,BP[BR++],BH,BF);}if(BE.GetCollectionSize()>0){this.AddToMap(BE);}}}}function A(){var BJ=this.mChartContextPtr,BG=this.dataLabelManager,BF,BD=this.mDataLabels,BE=BD.length,BH=[],BI=new An.Rect2D({x:0,y:0,width:BJ.mGraphWidth,height:BJ.mGraphHeight});if(BG===null||BG===undefined){BG=this.dataLabelManager=new An.DataLabelManager({DataArea:BI});BG.ChartContext=BJ;}BG.RectangleObjects=BG.RectangleObjects.concat(this.standAloneMarkers);for(BF=0;BF<BE;++BF){BH.push(BD[BF].HostMarkerBound);}BG.RectangleObjects=BG.RectangleObjects.concat(BH);return BG;}function AU(){var BD=this.mDataLabels,BF=BD.length,BE;for(BE=0;BE<BF;++BE){BD[BE].CenterXOffset=BD[BE].HostMarkerBound.width/2;BD[BE].CenterYOffset=BD[BE].HostMarkerBound.height/2;}}function P(){var BT=this.VecSeriesInfo.length,BE,BO,BR,BS,BF,BJ,BI,BH,BN,BU,BP,BQ,BK=this.mDatasetPtr,BG=this.mChartContextPtr,BD,BL,BM;if(this.mTrendLineObjects===null){this.mTrendLineObjects=[];}if(BK.isBare(BG.IsPieChart())){return ;}for(BR=0;BR<BT;++BR){BO=this.VecSeriesInfo[BR];BE=BO.SeriesID;BH=this.mDatasetPtr.GetTrendLineOfSeries(BE);BS=BO.ValueAxisIndex===0?this.y1Axis:this.y2Axis;BI=new An.TripleId({ObjectId:A4.DssGraphTrendLine,SeriesId:BE});if(BH){BN=BH.getTrendLineType();if(BN!==Q.DssGraphRegressionNone){BU=BH.getIdentity();BF=BH.getTrendLineValuesWithForecast();BJ=BH.getTrendLineValues();if(E(BJ)<=1){continue;}BP=BH.getCoefficients(true);BQ=BP.length-1;if(BF&&BF.length){BD={mRegressionType:BN,mOrder:BQ,mPeriod:0,mShowEquation:false,mShowCoefficients:false,mUserSeriesGraphColor:true,mSeasonal:false};BL=new An.TrendLineObject({TripleId:BI,GraphObjectManager:this,GraphCollectionObject:null,TrendLineOptions:BD,XAxis:this.xAxis,YAxis:BS,TrendLineValues:BF,Coefficients:BP,IsVertical:true,Identity:BU});if(BL!==undefined&&BL!==null){BM=BL.CreateTrendLine();if(BM!==undefined&&BM!==null){this.mTrendLineObjects.push(BM);}}}}}}}function AA(BG,BN,BJ,BD,BF,BM,BL,BI,BH,BK){var BE={};BE.rect=new An.Rect2D({x:0,y:0,width:BD+2*BH,height:BN+2*BH});switch(BG){case z:if(BK){BE.xOffset=BM+BH+BF;BE.yOffset=BH+BJ;BE.rect.x=BM;BE.rect.y=0;}else{BE.xOffset=BI-BH-BF;BE.yOffset=BM-BH-BJ;BE.rect.x=BI-2*BH-BD;BE.rect.y=BM-2*BH-BN;}break;case x:if(BK){BE.xOffset=BM-BH-BF;BE.yOffset=BH+BJ;BE.rect.x=BM-2*BH-BD;BE.rect.y=0;}else{BE.xOffset=BI-BH-BF;BE.yOffset=BM+BH+BJ;BE.rect.x=BI-2*BH-BD;BE.rect.y=BM;}break;case w:if(BK){BE.xOffset=BM+BH+BF;BE.yOffset=BL/2;BE.rect.x=BM;BE.rect.y=BL/2-BH-BJ;}else{BE.xOffset=BI/2;BE.yOffset=BM-BH-BJ;BE.rect.x=BI/2-BH-BF;BE.rect.y=BM-2*BH-BN;}break;case u:if(BK){BE.xOffset=BM-BH-BF;BE.yOffset=BL/2;BE.rect.x=BM-2*BH-BD;BE.rect.y=BL/2-BH-BJ;}else{BE.xOffset=BI/2;BE.yOffset=BM+BH+BJ;BE.rect.x=BI/2-BH-BF;BE.rect.y=BM;}break;case t:if(BK){BE.xOffset=BM+BH+BF;BE.yOffset=BL-BH-BJ;BE.rect.x=BM;BE.rect.y=BL-2*BH-BN;}else{BE.xOffset=BH+BF;BE.yOffset=BM-BH-BJ;BE.rect.x=0;BE.rect.y=BM-2*BH-BN;}break;case s:if(BK){BE.xOffset=BM-BH-BF;BE.yOffset=BL-BH-BJ;BE.rect.x=BM-2*BH-BD;BE.rect.y=BL-2*BH-BN;}else{BE.xOffset=BH+BF;BE.yOffset=BM+BH+BJ;BE.rect.x=0;BE.rect.y=BM;}break;}return BE;}function Ak(BH,BO,BK,BI,BF,BD){var BL=BH.rect,BJ,BG,BE,BM,BN;if(BL.y<0||BL.y+BL.height>BO){BH.cannotFitVertically=true;return ;}if(BL.x<0||BL.x+BL.width>BK){BH.cannotFitHorizontally=true;}BJ=BF.length;for(BG=0;BG<BJ;++BG){BE=BF[BG].GetBoundingRect();if(BL.HasIntersection(BE)){++BH.overlapRefLabelCount;}}BJ=BD.length;for(BG=0;BG<BJ;++BG){BN=BD[BG];if(BN.isVertical){if(BL.x<BN.position&&BL.x+BL.width>BN.position){++BH.overlapRefLineCount;}}else{if(BL.y<BN.position&&BL.y+BL.height>BN.position){++BH.overlapRefLineCount;}}}BJ=BI.length;for(BG=0;BG<BJ;++BG){BM=BI[BG];if(BM.mIsShown){BE=BM.GetBoundingRect();if(BL.HasIntersection(BE)){++BH.overlapDataLabelCount;BH.overlapDataLabels.push(BI[BG]);}}}}function AE(BY,BT,BL){var BF=this.mChartContextPtr,BX=BF.GetGraphMatrixContext(),BE=BX.getPadding(Ai.kRefLabel),BK=BL.length,BI,BJ,BQ,BN,BH,BO,BD,BV,BU,BR,BG,BM,BS,BP,BW;for(BV=0;BV<BK;++BV){BI=BL[BV];BJ=new An.TextObject({TripleId:BI.tripleId,GraphObjectManager:this,GraphCollectionObject:null,Identity:BI.identity});if(BJ!==null){BJ.SetText(BI.labelText);for(BU=0;BU<2;++BU){if(BU===1){BG=BJ.mText;BJ.SetText(BG[0]+"...");BJ.rect.height=0;BJ.rect.width=0;}BD=BJ.GetBoundingRect();BN=BD.height;BO=BN/2;BQ=BD.width;BH=BQ/2;BP=[];for(BR=z;BR<=s;++BR){BM={};BM.position=BR;BM.cannotFitVertically=false;BM.cannotFitHorizontally=false;BM.overlapRefLabelCount=0;BM.overlapRefLineCount=0;BM.overlapDataLabelCount=0;BM.overlapDataLabels=[];BS=AA.call(this,BR,BN,BO,BQ,BH,BI.position,BY,BT,BE,BI.isVertical);BM.xOffset=BS.xOffset;BM.yOffset=BS.yOffset;BM.rect=BS.rect;Ak.call(this,BM,BY,BT,this.shownDataLabels,this.shownRefLabels,BL);BP.push(BM);}BP.sort(j);if(BP[0].cannotFitVertically){break;}if(BP[0].cannotFitHorizontally){if(BV===0){continue;}else{break;}}BJ.MoveTo(BP[0].xOffset,BP[0].yOffset,A0.CENTER);BJ.mIsShown=true;BW=BP[0].overlapDataLabelCount;for(BR=0;BR<BW;++BR){BP[0].overlapDataLabels[BR].mIsShown=false;}this.mPostTrendLineObjects.push(BJ);this.shownRefLabels.push(BJ);break;}}}}function Al(){var BP=this.VecSeriesInfo.length,BF,BS,Ba,BW,Bb,BT,BY=[],BH,BZ,BQ,BG,BX,Bh,Bf,BM,BI,Bg,Bc,BE,BK={},Be,BD,BN=this.mDatasetPtr,BV=BN.GetSeriesCount()*BN.GetGroupCount(),BJ=this.mChartContextPtr,BU=BJ.mGraphWidth,Bd=BJ.mGraphHeight,BL,BO=[];if(this.mReferenceLineObjects===null){this.mReferenceLineObjects=[];}if(BJ.mPartialRendering===false){BV=this.DPCount;}for(Ba=0;Ba<BP;++Ba){BS=this.VecSeriesInfo[Ba];BF=BS.SeriesID;BQ=this.mDatasetPtr.GetReferenceLinesOfSeries(BF);Bb=BS.ValueAxisIndex===0?this.y1Axis:this.y2Axis;BD={};BD.Condense=Bb.mCondenseLabels;if(!BD.Condense){if(Bb.mNumberFormat.isDefault){var BR=new An.ChartAdvFormat();BJ.getAxisAutoNumberFormat(BR,Bb.mPrimaryMetrics);Bb.mNumberFormat=BR;}BD.NumberFormat=Bb.mNumberFormat.mCustomFormat;}BL=BQ.length;for(BW=0;BW<BL;++BW){BH=new An.TripleId({GroupId:BW,ObjectId:A4.DssGraphReferenceLine,SeriesId:BF});Be=new An.TripleId({ObjectId:A4.DssGraphRefLineText,SeriesId:BF,GroupId:BW});BY=[];BZ=BQ[BW];if(BZ){Bh=BZ.getIdentity();BT=BZ.getReferenceLineValue();Bf=BZ.getReferenceLineDirection();BG=BZ.getReferenceLineLabel(false,false,BD);BX=BZ.getLevel();if(BV===0){continue;}if(BT===null&&BT===undefined){continue;}BM=(Bf!=="horizontal");if(BM){Bg=this.xAxis.GetPositionByValue(BT);}else{Bg=Bb.GetPositionByValue(BT);}if(Bg!==null){Bc=1;if(BM){if(Bg===0){Bg=1;}else{if(Bg===BU){--Bg;}}BE=Bd-1;BY.push(new An.Point2D({x:Bg,y:Bc}));BY.push(new An.Point2D({x:Bg,y:BE}));BK.x=Bg;BK.y=(BY[0].y+BY[1].y)/2;}else{if(Bg===0){Bg=1;}else{if(Bg===Bd){--Bg;}}BE=BU-1;BY.push(new An.Point2D({x:Bc,y:Bg}));BY.push(new An.Point2D({x:BE,y:Bg}));BK.x=(BY[0].x+BY[1].x)/2;BK.y=Bg;}BI=new An.StraightLineObject({TripleId:BH,GraphObjectManager:this,StartPoint:BY[0],EndPoint:BY[1],GraphCollectionObject:null,Identity:Bh,Shape:c._LINE,MidPoint:BK});if(BI!==null){if(!BI.mFormatLinePtr){BI.mFormatLinePtr=new An.FormatLine();}this.mReferenceLineObjects.push(BI);BO.push({tripleId:Be,identity:Bh,isVertical:BM,position:Bg,labelText:BG});}}else{AN.visPrint("Reference line point calculation abnormal:");AN.visPrint("\tref line #: "+BW+" direction: "+Bf);AN.visPrint("\tvalue = "+BT);if(BM){AN.visPrint("\tx = "+Bg);}else{AN.visPrint("\ty = "+Bg);}}}}}AE.call(this,Bd,BU,BO);}function n(){var BE=this.mTrendLineObjects.length,BD;for(BD=0;BD<BE;++BD){this.mTrendLineObjects[BD].Draw();}}function X(){var BE=this.mReferenceLineObjects,BD;for(BD=0;BD<BE.length;++BD){BE[BD].Draw();}}function E(BF){var BE,BD=0;for(BE=0;BE<BF.length;BE++){if(BF[BE]!==null){BD++;}}return BD;}function Au(BO,BJ){if(!BJ){return ;}var BG=this.mChartContextPtr,BL=this.mDatasetPtr,BY=this.mChartContextPtr.GetGraphMatrixContext(),BZ=BG.mIsGraphMatrix,BM,BT,Bc,BF,BV,BR,BX,BS,BE,Ba,BU;var BN=BL.showDatalabels();if(BZ&&BN){Ba=this.dataLabelManager;if(Ba===null||Ba===undefined){BU=new An.Rect2D({x:0,y:0,width:BG.mGraphWidth,height:BG.mGraphHeight});Ba=this.dataLabelManager=new An.DataLabelManager({DataArea:BU});Ba.ChartContext=BG;}if(BY.mMarkerShape===A7.DssGraphMarkerShape2DPie||BY.mMarkerShape===A7.DssGraphMarkerShape2DRingPie){this.mPieRenderer.enableDataLabel(Ba,this.shownDataLabels);BS=this.mPieRenderer.dataLabels;BR=BS.length;for(BX=0;BX<BR;++BX){BE=BS[BX].Label;if(BE.mIsShown){this.AddToMapAndList(BE);}}}else{BT=[];K.call(this,BT);AW.call(this,BO,BT);AU.call(this);Ba=A.call(this);Ba.PlaceDataLabels(this.mDataLabels,this.shownDataLabels);}}else{if(this.isSmarted){BM=[];Bc=[];BF=[];BV=C.call(this,BO);if(BV){Bc=BV;}Av.call(this,BM);r.call(this,BO,BM);var BI=new An.TripleId({ObjectId:A4.DssGraphDataTextConnectLine,SeriesId:this.TripleId.mSeriesId,GroupId:this.TripleId.mGroupId}),BH=new An.GraphCollectionObject({TripleId:BI,GraphObjectManager:this,CollectionType:AK.CT_LINE});var Bb=this.labelMatrix.length,BK=AD.call(this,Bc,BF,BH);if(BK===Bb){return ;}if(BK===0){BJ=false;}else{var BQ=new An.Rect2D(),BW,BD;p.call(this,BQ);BW=new An.GridMap({Rect:this.mDataArea,Unit:BQ,dataLabelPadding:5});BD=B.call(this,BW);if(BD){var BP=function BP(Be,Bd){return Be.HostMarker.x-Bd.HostMarker.x;};this.labelMatrix.sort(BP);a.call(this,BW,BH);}else{A8.call(this,BH);}}if(BH.GetCollectionSize()){this.AddToMap(BH);}if(!this.isSmarted){if(this.isSmarted){this.mPostTrendLineObjects.splice(0,this.mPostTrendLineObjects.length);}if(!this.dataLabelLine){S.call(this,BO);}else{BH=new An.GraphCollectionObject({TripleId:BI,GraphObjectManager:this,CollectionType:AK.CT_LINE});S.call(this,BO,BH);if(BH.GetCollectionSize()>0){this.AddToMap(BH);}}}}}}function D(){var BF=this.mChartContextPtr,BD=this.mDataArea,BE=this.mPostTrendLineObjects;if(BF.mIsGraphMatrix){BE=[];}this.y1Axis.GenerateCustomLine(BD,BE);if(this.mChartContextPtr.IsDualAxis()){this.y2Axis.GenerateCustomLine(BD,BE);}this.xAxis.GenerateCustomLine(BD,BE);if(BF.mIsGraphMatrix&&BE.length){this.mGraphObjectList=BE.concat(this.mGraphObjectList);}}function I(BG){var BK=this.mChartContextPtr,BH=BK.mGraphHeight,BF=BK.mGraphWidth,BJ,BE,BI,BD;if(BG===undefined||BG===null){return false;}BJ=BG.mOptions;BE=BJ.mAxisCustomValue;BI=BG.IsVerticalAxis();BD=BG.ValueToPosition(BE);if(!BJ.mDrawCustomLine){return false;}if(BE>BG.mMaxTick||BE<BG.mMinTick){return false;}if(BD===0){return false;}if(BI){if(BD===BH){return false;}}else{if(BD===BF){return false;}}return true;}function AJ(BI,BP,BD,BO,BM,BK,BF,BG){var BE={},BJ=BP/2,BH=BD/2,BL=BG.IsVerticalAxis(),BN;if(BG.mTripleId.mObjectId===A4.DssGraphY2Body){BN=A1;}else{if(BG.mTripleId.mObjectId===A4.DssGraphX2Body){BN=L;}else{BN=BL?A2:O;}}BE.rect=new An.Rect2D({x:0,y:0,width:BD+2*BF,height:BP+2*BF});switch(BI){case 0:switch(BN){case A2:BE.xOffset=BF+BH;BE.yOffset=BO-BF-BJ;BE.rect.y=BO-2*BF-BP;BE.rect.x=0;break;case O:BE.xOffset=BO-BF-BH;BE.yOffset=BM-BF-BJ;BE.rect.y=BM-2*BF-BP;BE.rect.x=BO-2*BF-BD;break;case A1:BE.xOffset=BK-BF-BH;BE.yOffset=BO-BF-BJ;BE.rect.y=BO-2*BF-BP;BE.rect.x=BK-2*BF-BD;break;case L:BE.xOffset=BO-BF-BH;BE.yOffset=BF+BJ;BE.rect.y=0;BE.rect.x=BO-2*BF-BD;break;}break;case 1:switch(BN){case A2:BE.xOffset=BF+BH;BE.yOffset=BO+BF+BJ;BE.rect.y=BO;BE.rect.x=0;break;case O:BE.xOffset=BO+BF+BH;BE.yOffset=BM-BF-BJ;BE.rect.y=BM-2*BF-BP;BE.rect.x=BO;break;case A1:BE.xOffset=BK-BF-BH;BE.yOffset=BO+BF+BJ;BE.rect.y=BO;BE.rect.x=BK-2*BF-BD;break;case L:BE.xOffset=BO+BF+BH;BE.yOffset=BF+BJ;BE.rect.y=0;BE.rect.x=BO;break;}break;}return BE;}function Aw(BH,BN,BK,BI,BE,BF){var BL=BH.rect,BJ,BG,BD,BM;if(BL.y<0||BL.y+BL.height>BN){return false;}if(BL.x<0||BL.x+BL.width>BK){return false;}BJ=BF.length;for(BG=0;BG<BJ;++BG){BD=BF[BG].GetBoundingRect(true);if(BL.HasIntersection(BD)){return false;}}BJ=BE.length;for(BG=0;BG<BJ;++BG){BD=BE[BG].GetBoundingRect(true);if(BL.HasIntersection(BD)){return false;}}BJ=BI.length;for(BG=0;BG<BJ;++BG){BM=BI[BG];if(BM.mIsShown){BD=BM.GetBoundingRect(true);if(BL.HasIntersection(BD)){return false;}}}return true;}function AP(BF){var BI=this.mChartContextPtr,BT=BI.mGraphWidth,BX=BI.mGraphHeight,BV=BI.mpGraphMatrixContext,BM=BF.mOptions.mAxisCustomValue,BK=BF.Key==="Y1"||BF.Key==="Y2",BN=this.mDatasetPtr.fetchShownLabels(BK),BY=BN&&BN[BF.Key],BH=BY&&BY.length,BL,BG=false,BU,Bb,BE,BJ,BQ,BD,BO,BP,Ba,BW,BS,BR,BZ=BV.getPadding(Ai.kAxisOriginLabel);BQ=An.gAxisObjects[BF.getIndex()].mCustomLabelId;for(BU=0;BU<BH&&!BG;++BU){BL=BY[BU];if(BL===BM){BG=true;}}if(BG){return ;}Bb=new An.NumberObject({TripleId:BQ,GraphObjectManager:this,Number:BM,NumberFormat:BF.mNumberFormat,GraphCollectionObject:null,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0,ShouldCondense:BF.mCondenseLabels});if(Bb===null||Bb===undefined){return ;}BJ=Bb;BE=Bb.mText;BJ.SetText(BE);BD=BJ.GetBoundingRect(true);BO=BD.height;BP=BD.width;Ba=BF.ValueToPosition(BM);BW=false;for(BU=0;BU<=1&&!BW;++BU){BS={};BR=AJ.call(this,BU,BO,BP,Ba,BX,BT,BZ,BF);BS.xOffset=BR.xOffset;BS.yOffset=BR.yOffset;BS.rect=BR.rect;BW=Aw.call(this,BS,BX,BT,this.shownDataLabels,this.shownRefLabels,this.axisOriginLabels);}if(BW){BJ.MoveTo(BS.xOffset,BS.yOffset,A0.CENTER);BJ.mIsShown=true;this.mPostTrendLineObjects.push(BJ);this.axisOriginLabels.push(BJ);}}function AT(BI,BL,BE,BD,BJ,BG){var BF={},BK=BL/2,BH=BE/2;BF.rect=new An.Rect2D({x:0,y:0,width:BE+2*BG,height:BL+2*BG});switch(BI){case 0:BF.xOffset=BD+BG+BH;BF.yOffset=BJ-BG-BK;BF.rect.x=BD;BF.rect.y=BJ-2*BG-BL;break;case 1:BF.xOffset=BD-BG-BH;BF.yOffset=BJ-BG-BK;BF.rect.x=BD-2*BG-BE;BF.rect.y=BJ-2*BG-BL;break;case 2:BF.xOffset=BD-BG-BH;BF.yOffset=BJ+BG+BK;BF.rect.x=BD-2*BG-BE;BF.rect.y=BJ;break;case 3:BF.xOffset=BD+BG+BH;BF.yOffset=BJ+BG+BK;BF.rect.x=BD;BF.rect.y=BJ;break;}return BF;}function Ay(BF){var BI=this.mChartContextPtr,BU=BI.mGraphWidth,BZ=BI.mGraphHeight,BW=BI.mpGraphMatrixContext,BD,BP,BR,BH,BM,BK,BJ,BX,BS,BG,BL,BE,BO,BQ,BY,BN,BT,BV,Ba=BW.getPadding(Ai.kAxisOriginLabel);BM=this.xAxis;BS=An.gAxisObjects[BM.getIndex()].mCustomLabelId;BD=BF?this.y1Axis:this.y2Axis;BP=BD.mOptions.mAxisCustomValue;BR=BD.ValueToPosition(BP);BH=new An.NumberObject({TripleId:BS,GraphObjectManager:this,Number:BP,NumberFormat:BD.mNumberFormat,GraphCollectionObject:null,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0,ShouldCondense:BM.mCondenseLabels});BK=BM.mOptions.mAxisCustomValue;BJ=BM.ValueToPosition(BK);BX=new An.NumberObject({TripleId:BS,GraphObjectManager:this,Number:BK,NumberFormat:BM.mNumberFormat,GraphCollectionObject:null,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0,ShouldCondense:BM.mCondenseLabels});BG="("+BX.mText+", "+BH.mText+")";BL=new An.TextObject({TripleId:BS,GraphObjectManager:this,GraphCollectionObject:null});BL.SetText(BG);BE=BL.GetBoundingRect(true);BO=BE.height;BQ=BE.width;BY=false;for(BV=0;BV<4&&!BY;++BV){BN={};BT=AT.call(this,BV,BO,BQ,BJ,BR,Ba);BN.xOffset=BT.xOffset;BN.yOffset=BT.yOffset;BN.rect=BT.rect;BY=Aw.call(this,BN,BZ,BU,this.shownDataLabels,this.shownRefLabels,this.axisOriginLabels);}if(BY){BL.MoveTo(BN.xOffset,BN.yOffset,A0.CENTER);BL.mIsShown=true;this.mPostTrendLineObjects.push(BL);this.axisOriginLabels.push(BL);}}function AL(){var BF=0,BE,BD,BG;BE=I.call(this,this.y1Axis);BD=I.call(this,this.y2Axis);BG=I.call(this,this.xAxis);if((BE||BD)&&BG){BF=true;}if(BF){Ay.call(this,BE);}else{if(BE){AP.call(this,this.y1Axis);}if(BD){AP.call(this,this.y2Axis);}if(BG){AP.call(this,this.xAxis);}}}function k(BT,BS){var BK=this.mChartContextPtr,BN=null,BH,BD,BL,BG,BJ=BT.Id,BO=BT.MarkerType,BM=BT.Shape,BF=BT.Position,BQ=BT.Size,BE=[];if(BK.mIsGraphMatrix){var BP=BT.BoundingBox;if(U.call(this,BT)){if(this.waitingList===null){this.waitingList=[];}this.waitingList.push(BT);return[];}BH=null;switch(BO){case A7.DssGraphMarkerShapeGMTick:var BR=BK.transformRectToTicker(BP,true);if(BR.length>=2){BN=new An.StraightLineObject({TripleId:BJ,GraphObjectManager:this,StartPoint:BR[0],EndPoint:BR[1],GraphCollectionObject:null,Shape:c._TICKER});}else{return[];}break;case A7.DssGraphMarkerShape2DPie:case A7.DssGraphMarkerShape2DRingPie:var BI=0;if(BO===A7.DssGraphMarkerShape2DRingPie){BI=1;}if(this.mPieRenderer===null||this.mPieRenderer===undefined){this.mPieRenderer=new An.PiePlotRenderer({GraphObjectManager:this,Dataset:this.mDatasetPtr,ChartContext:BK,Layout:BI,PlotType:q.GMPPT_VALUE,ShownDataLabels:this.shownDataLabels});}BD=this.mDatasetPtr.GetPieCountAtOneDataPoint(BJ.mSeriesId,BJ.mGroupId);for(BG=0;BG<BD;++BG){BL=this.mPieRenderer.drawSinglePie(BJ.mSeriesId,BJ.mGroupId,BG,BF,BD);BE=BE.concat(BL);}break;case A7.DssGraphMarkerShapeSquare:case A7.DssGraphMarkerShapeRectangle:BN=new An.RectangleObject({TripleId:BJ,GraphObjectManager:this,GraphCollectionObject:null,Area:BP,Shape:BM});break;default:BN=new An.MarkerObject({TripleId:BJ,GraphObjectManager:this,MarkerPosition:BF,MarkerShape:BO,IsIsometric:true,MarkerSize:BQ,GraphCollectionObject:BH,IsDialogSize:false,Shape:BM});break;}}else{BN=new An.MarkerObject({TripleId:BJ,GraphObjectManager:this,MarkerPosition:BF,MarkerShape:BO,IsIsometric:true,MarkerSize:BQ,GraphCollectionObject:BS,IsDialogSize:!this.isBubbleChart});}if(BN!==null&&BN!==undefined){BE.push(BN);this.AddToMap(BN);if(BS){BS.AddGraphObject(BN);}}return BE;}function BB(BT,BL,BD,BR,BM){var BE=this.VecSeriesInfo[BR].MarkerShape,BI=0,BK=this.VecSeriesInfo[BR].IsNullData.length,BS,BQ,BP,BN,BF,BH,BU,BG,BJ,BO;BO=new An.TripleId({ObjectId:A4.DssGraphRiser,SeriesId:this.VecSeriesInfo[BR].SeriesID});BS=new An.GraphCollectionObject({TripleId:BO,GraphObjectManager:this,CollectionType:AK.CT_GENERAL_SHAPE});for(BQ=0;BQ<BK;++BQ){if(this.VecSeriesInfo[BR].IsNullData[BQ]){continue;}BF=BD[BI];BH=this.isBubbleChart?BM:BS;BU=new An.TripleId({ObjectId:A4.DssGraphRiser,SeriesId:this.VecSeriesInfo[BR].SeriesID,GroupId:BQ});BN={MarkerShape:BE,Size:BF,Position:BL,Id:BU,MarkerType:this.VecSeriesInfo[BR].MarkerShape};BG=k.call(this,BN,BM);if(BG.length>0){for(BP=0;BP<BG.length;++BP){this.mGraphObjectList.push(BG[BP]);this.AddToMap(BG[BP]);BH.AddGraphObject(BG[BP]);BJ=BG[BP].GetBoundingRect();BT[BR].push(BJ);}}}if(!this.isBubbleChart){this.AddToMap(BS);}}function A5(BI,BF,BH){var BE,BG,BD;if(BI.length===0){return ;}if(this.VecSeriesInfo[BF].ConnectDataPoint){BE=this.isBubbleChart?null:BH;BD=new An.TripleId({ObjectId:A4.DssGraphDataLine,SeriesId:this.VecSeriesInfo[BF].mSeriesId,GroupId:Aq});BG=new An.PolyLineObject({TripleId:BD,GraphObjectManager:this,PolyLine:BI,Parent:BE});this.mGraphObjectList.push(BG);this.AddToMap(BG);if(!this.isBubbleChart){BH.AddGraphObject(BG);}}}function y(BJ,BE){Ap.call(this,BJ);var BH,BG,BM=this.VecSeriesInfo,BK=BM.length,BQ=this.mDatasetPtr.GetGroupCount(),BP,BI,BO,BF,BN,BL=false;for(BH=0;BH<BK;++BH){BF=[];BN=[];var BD=BM[BH].ShowDataLabel;BL=BL||BD;for(BG=0;BG<BQ;++BG){BI=new An.Point2D();BP=Ax.call(this,BH,BG,BI);this.VecSeriesInfo[BH].IsNullData.push(!BP);if(!BP){continue;}BO=BA.call(this,BH,BG);if(BO===undefined){continue;}BF.push(BI);BN.push(BO);}A5.call(this,BF,BH,BJ[BH]);BB.call(this,BE,BF,BN,BH,BJ[BH]);}return{IsLabelPossible:BL,MarkerRectangles:BE};}function AV(BO){var BV,BS,BN=this.VecSeriesInfo,BZ=BN.length,BF=this.mDatasetPtr.GetGroupCount(),BE,Be,BW,BI=this.mGraphObjectList,Bd=this.drawBySize,BY=[],BJ=false,BH=this.mChartContextPtr,BX=BH.GetGraphMatrixContext(),BG=BX.mMarkerShape,BQ=BG===A7.DssGraphMarkerShape2DPie||BG===A7.DssGraphMarkerShape2DRingPie,BD=BH.mPartialRendering,Bc=[],BU=function BU(Bh,Bg){if(Bh.Size<Bg.Size){return 1;}if(Bh.Size>Bg.Size){return -1;}return 0;};for(BV=0;BV<BZ;++BV){var Bb=BN[BV].ShowDataLabel;BJ=BJ||Bb;for(BS=0;BS<BF;++BS){Be=new An.Point2D();BE=Ax.call(this,BV,BS,Be);BN[BV].IsNullData.push(!BE);if(!BE){continue;}BW=BA.call(this,BV,BS);if(BW===undefined){continue;}var Bf=new An.TripleId({ObjectId:A4.DssGraphRiser,SeriesId:BN[BV].SeriesID,GroupId:BS});if(BH.checkColorByAndSizeByValue(Bf,this.mDatasetPtr,this.mHasColorBy&&!BQ,this.mHasSizeBy)===false){BN[BV].IsNullData[BN[BV].IsNullData.length-1]=true;continue;}var BP=H.call(this,BG,Be,BW);BP.Id=Bf;BP.Position=Be;BP.Size=BW;BP.MarkerType=BN[BV].MarkerShape;BY.push(BP);++this.DPCount;if(this.seriesDPCount[BV]===undefined||this.seriesDPCount[BV]===null){this.seriesDPCount[BV]=1;}else{++this.seriesDPCount[BV];}}}if(Bd||BD){BY.sort(BU);if(BD){BY.reverse();}}var BR;for(BV=0;BV<BY.length;BV++){var BK=k.call(this,BY[BV],null);for(BR=0;BR<BK.length;++BR){var Ba=BY[BV],BL=Ba.Id.mSeriesId,BM=Ba.Id.mGroupId;BG=Ba.MarkerType;var BT=BG===A7.DssGraphMarkerShape2DPie||BG===A7.DssGraphMarkerShape2DRingPie;BO[BL][BM]=Ba.BoundingBox;if(BT){this.AddToMap(BK[BR]);}Bc.push(BK[BR]);}}if(BD){Bc.reverse();this.shapeCanvas=null;}for(BV=0;BV<Bc.length;BV++){BI.push(Bc[BV]);}return{IsLabelPossible:BJ,MarkerRectangles:BO};}function h(BH,BI,BL,BK){var BF=this.mChartContextPtr,BJ=BF.GetGraphMatrixContext(),BD,BG,BE;if(BF.mIsGraphMatrix&&!BK){BJ=BF.GetGraphMatrixContext();if(BJ.isPieOrRingShape()){BD=BJ.GetMaxMarkerSize(Ah._PIE,true,1,this.isBubbleChart);}else{if(BJ.mMarkerShape===A7.DssGraphMarkerShapeGMTick){BD=BJ.GetMaxMarkerSize(Ah._TICK_VALUE,true,this.isBubbleChart);}else{BD=BJ.GetMaxMarkerSize(Ah._SHAPES_IN_BUBBLESCATTER,false,0,this.isBubbleChart);}}return Math.round(BD);}BG=BH.width;BE=BH.height;return Math.round(Math.min(BG/BI+0.5,BE/BL+0.5)*0.5);}function i(){var BG,BD,BH=this.mDatasetPtr.GetSeriesCount(),BF=this.mDatasetPtr.GetGroupCount(),BE;if(this.mDatasetPtr.GetSeriesByColumn()){BG=BF;BD=BH;}else{BD=BF;BG=BH;}if(BG*BD===0){return 0;}BE=h.call(this,this.mDataArea,BG,BD,false);if(BE<3){BE=3;}return BE;}mstrmojo.chart.ValuePlot=mstrmojo.declare(mstrmojo.chart.Plot,null,{scriptClass:"mstrmojo.chart.ValuePlot",dataLabelLine:false,isBubbleChart:false,isSmarted:false,maxUnitRadius:-1,maxRadius:-10,minRadius:10000,labelFormat:Ac.DssGraphDataTextSeriesDependent|Ac.DssGraphDataTextLabel,labelLocation:Ae.DssGraphDTPositionCenter,xAxis:null,y1Axis:null,y2Axis:null,zAxis:null,VecSeriesInfo:[],standAloneMarkers:[],labelMatrix:[],drawBySize:false,mPieRenderer:null,mDataLabels:[],mTrendLineObjects:null,mReferenceLineObjects:null,waitingList:null,shapeCanvas:null,viewPort:null,init:function AS(BD){var BE;this._super(BD);BE=this.mChartContextPtr;this.xAxis=null;this.y1Axis=null;this.y2Axis=null;this.zAxis=null;this.VecSeriesInfo=[];this.standAloneMarkers=[];this.labelMatrix=[];this.isBubbleChart=(BE.GetGraphMajorType()===Aj.GMT_BUBBLE);this.drawBySize=this.isBubbleChart&&this.mChartContextPtr.mIsGraphMatrix;this.mDataLabels=[];},OnRectangleSelection:function m(BL,BO,BJ){BJ=BJ||0;var BE=this.mChartContextPtr;if(BJ===0&&this.waitingList){var BN=this.waitingList,BH=BN.length,BG,BM,BK,BI,BD,BF=(BN[0].Shape===c._PIE)?"pie":"shape";for(BG=0;BG<BH;BG++){BM=BN[BG].Position.x;BK=BN[BG].Position.y;if((BM>=BL.x&&BM<=BL.x+BL.width)&&(BK>=BL.y&&BK<=BL.y+BL.height)){BD=BN[BG].Id;BI=BE.getIdentity(BD,BF);BO.push(BI);}}}},GenerateMapAndList:function AF(){var BD,BJ=[],BI,BH,BK=this.mChartContextPtr,BF=BK.mIsGraphMatrix,BE=this.VecSeriesInfo.length;this.maxUnitRadius=i.call(this);BD=[];for(BI=0;BI<BE;++BI){BD.push([]);}if(BK.mImageUsage!==AM.GENERAL){return ;}var BG;if(BF){BG=AV.call(this,BD);}else{BG=y.call(this,BJ,BD);}BD=BG.MarkerRectangles;BH=BG.IsLabelPossible;Au.call(this,BD,BH);P.call(this);Al.call(this);D.call(this);AL.call(this);},Draw:function Ar(){var BF=this.drawBySize,BH=this.mChartContextPtr,BE=this.VecSeriesInfo.length;if(BF){var BD=[],BG;for(BG=0;BG<BE;BG++){BD[BG]=0;}BH.setDrawingOrderToCanvas(BD);}An.GraphObjectManager.prototype.Draw.apply(this,[]);n.call(this);X.call(this);this.DrawPostTrendLineObjects();},AssignValueAxis:function T(BE,BD){switch(BD){case 0:this.xAxis=BE;break;case 1:this.y1Axis=BE;break;case 2:this.y2Axis=BE;break;case 3:this.zAxis=BE;break;default:break;}},AssignSeriesInfo:function Y(BF,BI){var BE=BF.length,BH,BG,BD;for(BD=0;BD<BE;++BD){BG=At.call(this);this.VecSeriesInfo.push(BG);BH=BF[BD];this.VecSeriesInfo[BD].SeriesID=BH;this.VecSeriesInfo[BD].ValueAxisIndex=BI[BH];}this.LoadProperties();},GetMaxElementRadius:function AO(){var BE=new An.TripleId(),BD=this.mChartContextPtr.GetProperty(As.DssGraphMatrixUsePerfectPadding,BE);if(BD===null||BD===undefined){return 0;}return this.maxUnitRadius;},GetMaxElementOffsetClippedByBoundary:function V(BF,BR){var Bb={LowOffset:0,HighOffset:0},BI=this.mChartContextPtr,BX=BI.GetGraphMatrixContext(),BS,BK,Bd,BJ,BQ,BP,BO,BN,BV,BH,BU,BT,BG,BW;if(BR===undefined){BR=true;}if(!BI.mIsGraphMatrix){return Bb;}var BE=BF?(BR?"X1":"X2"):(BR?"Y1":"Y2"),BD=this.mClippedElementSize;if(BD[BE]!==undefined){return BD[BE];}if(this.maxUnitRadius<0){this.maxUnitRadius=i.call(this);}BV=this.mDatasetPtr.GetSeriesCount();BH=this.mDatasetPtr.GetGroupCount();var BM={LowOffset:0,HighOffset:0};var BL={LowOffset:0,HighOffset:0};for(BU=0;BU<BV;++BU){for(BT=0;BT<BH;++BT){Ad.Reset(0,0);BG=Ax.call(this,BU,BT,Ad);if(!BG){continue;}BW=BA.call(this,BU,BT);if(BW===undefined){continue;}var Bc=0,BZ=0;var Ba=0,BY=0;Bb={LowOffset:0,HighOffset:0};BS=this.xAxis;BK=this.y1Axis;if(BS===null||BK===null){BD[BE]=Bb;return Bb;}Bd=BS.GetMaxMinDataInput();BJ=BK.GetMaxMinDataInput();BQ=BS.GetPositionByValue(Bd.Min);BP=BK.GetPositionByValue(BJ.Min);if(BQ===null||BP===null){BD[BE]=Bb;return Bb;}BO=BS.GetPositionByValue(Bd.Max);BN=BK.GetPositionByValue(BJ.Max);if(BO===null||BN===null){BD[BE]=Bb;return Bb;}Bc=BM.LowOffset;BZ=BM.HighOffset;BM=BX.getClippedOffset(BQ,BO,BW,Ad,true,Bc,BZ);Bc=Math.max(BM.LowOffset,Bc);BZ=Math.max(BM.HighOffset,BZ);BD.X1=BM;Ba=BL.LowOffset;BY=BL.HighOffset;BL=BX.getClippedOffset(BP,BN,BW,Ad,false,Ba,BY);Ba=Math.max(BL.LowOffset,Ba);BY=Math.max(BL.HighOffset,BY);BD.Y1=BL;}}if(BD.X1){BD.X2=mstrmojo.hash.copy(BD.X1);}else{BD.X1=BD.X2={LowOffset:0,HighOffset:0};}if(BD.Y1){BD.Y2=mstrmojo.hash.copy(BD.Y1);}else{BD.Y1=BD.Y2={LowOffset:0,HighOffset:0};}return BD[BE];},refresh:function Am(BD,BE){if(BD==="clipping"){this.mDataArea.width=this.mChartContextPtr.mGraphWidth;this.mDataArea.height=this.mChartContextPtr.mGraphHeight;this.maxUnitRadius=-1;this.mClippedElementSize={};}else{}},LoadProperties:function AZ(){var BF,BJ,BD,BI=this.isBubbleChart?A3.DssGraphShowSDLine:A3.DssGraphShowLine,BH,BK=this.mChartContextPtr,BE=BK.GetGraphMatrixContext(),BG=BK.mIsGraphMatrix;for(BH=0;BH<this.VecSeriesInfo.length;++BH){BF=this.VecSeriesInfo[BH];BD=new An.TripleId({ObjectId:A4.DssGraphRiser,SeriesId:BF.SeriesID});if(BG){BF.MarkerShape=BE.mMarkerShape;}else{BJ=BK.GetProperty(A3.DssGraphSDMarkerShape,BD);if(BJ){BF.MarkerShape=BJ;}else{BF.MarkerShape=A7.DssGraphMarkerShapeCircle;}}switch(BF.MarkerShape){case A7.DssGraphMarkerShapeCircle:case A7.DssGraphMarkerShapeRectangle:case A7.DssGraphMarkerShapeSquare:case A7.DssGraphMarkerShape2DPie:case A7.DssGraphMarkerShape2DRingPie:break;default:this.drawBySize=false;break;}if(BK.mImageUsage!==0){return ;}BJ=BK.GetProperty(BI,BD);if(BJ){BF.ConnectDataPoint=BJ;}BJ=BK.GetProperty(A3.DssGraphSDShowDataText,BD);if(BJ){BF.ShowDataLabel=BJ;}if(BG){BF.ShowDataLabel=this.mDatasetPtr.showSeriesDatalabel(BD.mSeriesId);}this.LoadTrendLineProperties(this.VecSeriesInfo[BH].SeriesID,BF.TrendLineOptions);}BJ=BK.GetProperty(A3.DssGraphNewUseSmartLabels,AB);if(BJ){this.isSmarted=BJ;}BJ=BK.GetProperty(A3.DssGraphAxisDataTextPlace,AB);if(BJ){this.labelLocation=BJ;}BJ=BK.GetProperty(A3.DssGraphShowDataText,AB);if(BJ){this.labelFormat=BJ;}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphRegressionType","EnumDSSGraphDataTextPosition","EnumShapeType","EnumDSSGraphObject");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumLayout","EnumOrientation","EnumValueAxis","EnumFillType","EnumAnchorPoint","EnumGraphMatrixMarkerTypeInChart","EnumLineStyle","EnumImageUsage","EnumAxisDirection","EnumGraphMatrixMarkerTypeInChart","EnumGraphMatrixPiePlotType","EnumGraphMatrixThemeType","EnumGraphMatrixElementSizeMode","EnumCollectionType","EnumFontStyle");mstrmojo.requiresClsP("mstrmojo.chart","GraphObjectManager","CategoryPlot","PiePlotRenderer","Rect2D","Vector2D","NumberObject","MarkerObject","FormatFill","Point2D","GMDataLabelInfo");mstrmojo.requiresCls("mstrmojo.chart.common.MapStructure","mstrmojo.VisUtility");var AR=mstrmojo.chart,Y=AR.common,P=AR.enums,AN=AR.ChartConstants,z=mstrmojo.VisUtility,AW=P.EnumLayout,AB=P.EnumOrientation,y=P.EnumValueAxis,Aa=P.EnumAnchorPoint,AL=P.EnumGraphMatrixMarkerTypeInChart,AU=P.EnumAxisDirection,x=P.EnumImageUsage,a=P.EnumGraphMatrixPiePlotType,w=P.EnumCollectionType;var AK=AR.model,AA=AK.enums,Ae=AA.EnumDSSGraphMarkerShape,O=AA.EnumDSSGraphRegressionType,AJ=AA.EnumDSSGraphDataTextPosition,U=AA.EnumShapeType,AD=P.EnumGraphMatrixElementSizeMode,Ad=AA.EnumDSSGraphObject,E=P.EnumFontStyle;var D=AR.common.Utility;var AP=1e-10,t=0.00001,u=2,G=3,l=1,k=2,j=3,h=4,f=5,d=6;var p=new AR.ChartAdvFormat(),AY=new AR.Point2D(),v=new AR.Point2D(),L=new AR.Point2D();function W(Ak,Aj){var Al;if(Ak.cannotFitVertically===true&&Aj.cannotFitVertically===false){return 1;}if(Ak.cannotFitVertically===false&&Aj.cannotFitVertically===true){return -1;}if(Ak.cannotFitHorizontally===true&&Aj.cannotFitHorizontally===false){return 1;}if(Ak.cannotFitHorizontally===false&&Aj.cannotFitHorizontally===true){return -1;}Al=Ak.overlapRefLabelCount-Aj.overlapRefLabelCount;if(Al<0){return -1;}if(Al>0){return 1;}Al=Ak.overlapRefLineCount-Aj.overlapRefLineCount;if(Al<0){return -1;}if(Al>0){return 1;}Al=Ak.overlapDataLabelCount-Aj.overlapDataLabelCount;return Al;}function o(Aj){switch(Aj){case U._CIRCLE:return Ae.DssGraphMarkerShapeCircle;case U._RECTANGLE:return Ae.DssGraphMarkerShapeRectangle;case U._SQUARE:return Ae.DssGraphMarkerShapeSquare;case U._TICKER:return Ae.DssGraphMarkerShapeGMTick;default:return Ae.DssGraphMarkerShapeNone;}}function Ah(Al,Ak,Ap,Aw,Am,Aj,Au){var Ar=-1,Aq=-1,At=-1,As=new AR.Point2D({x:-1,y:-1}),Ao=this.mpABLPlotContext,An=Ao.mCategoryAxisPtr,Av=Ao.mValueAxis;if(this.mIsVertical){Ar=An.getSubGroupMiddlePos(Ak,Aw,Aj);At=Av[this.mSeriesInfo[Al].mValueAxis].GetPositionByValue(Ap);if(At!==null){Aq=At;}}else{Aq=An.getSubGroupMiddlePos(Ap,Am,Au);At=Av[this.mSeriesInfo[Al].mValueAxis].GetPositionByValue(Ak);if(At!==null){Ar=At;}}if(Ar>=0&&Aq>=0){As.x=Ar;As.y=Aq;}return As;}function e(Av,An,Ax,Ak){var Am=0,Ap,Aj,Ao,Al=1,As=1,Aw,Ar,At=[Av,An,Ax];if(this.mPieCentersPool===null){this.mPieCentersPool=new Y.MapStructure();}var Aq=this.mPieCentersPool.find(At);if(Aq!==null&&Aq!==undefined){return Aq;}Aw=Ak||this.mDatasetPtr.GetPieCountAtOneDataPoint(this.mSeriesInfo[Av].mSeriesId,An);if(this.mIsVertical){Al=Aw;}else{As=Aw;}Ar=this.GetData(Av,An);if(Ar!==null){Am=Ar;}Aj=this.mSeriesInfo[Av].mSeriesId;Ap=An;Ao=Ax;if(this.mIsVertical){var Au;Au=Am;Am=Ap;Ap=Au;Au=Aj;Aj=Ao;Ao=Au;}Aq=Ah.call(this,Av,Am,Ap,Aj,Ao,Al,As);this.mPieCentersPool.replace(At,Aq);return Aq;}function Z(){var Ak=this.mTrendLineObjects.length,Aj;for(Aj=0;Aj<Ak;++Aj){this.mTrendLineObjects[Aj].Draw();}}function R(){var Ak=this.mReferenceLineObjects.length,Aj;for(Aj=0;Aj<Ak;++Aj){this.mReferenceLineObjects[Aj].Draw();}}function B(Al){var Ak,Aj=0;for(Ak=0;Ak<Al.length;Ak++){if(Al[Ak]!==null){Aj++;}}return Aj;}function i(Am,Al,As,Au,Aq,Ak){var Ao,An,Aj,At,Av,Ap,Ar;if(this instanceof mstrmojo.chart.BarSeriesRenderer){Ao={groupID:Al,seriesInfoID:Am,groupIndex:0,useFloat:!Ak};if(Ak){An=this.GetRiserStartPosAndSize(Ao);At=Au.GetPositionByValue(As);}else{An=this.GetRiserStartPosAndSize(Ao);At=Au.GetFloatPositionByValue(As);}Aj=An.Start+An.Size/2;}else{if(this instanceof mstrmojo.chart.AreaSeriesRenderer||this instanceof mstrmojo.chart.LineSeriesRenderer){if(Ak){Aj=this.mpABLPlotContext.mCategoryAxisPtr.getGroupMiddlePos(Al);At=Au.GetPositionByValue(As);}else{Aj=this.mpABLPlotContext.mCategoryAxisPtr.getFloatGroupMiddlePos(Al);At=Au.GetFloatPositionByValue(As);}}}Av=Aq?Aj:At;Ap=Aq?At:Aj;Ar=new AR.Point2D({x:Av,y:Ap});return Ar;}function b(Ao){var Am,Aj,Al,An,Ak,Ap;Al=Ao.length;if(Al<=2){Aj=Ao;}else{Aj=[];Aj.push(Ao[0]);for(Am=0;Am+2<Al;++Am){Ap=false;if((Math.abs(Ao[Am].x-Ao[Am+1].x)>AP)&&(Math.abs(Ao[Am+1].x-Ao[Am+2].x)>AP)){An=(Ao[Am+1].y-Ao[Am].y)/(Ao[Am+1].x-Ao[Am].x);Ak=(Ao[Am+2].y-Ao[Am+1].y)/(Ao[Am+2].x-Ao[Am+1].x);if(Math.abs(An-Ak)<t){Ap=true;}}else{if((Math.abs(Ao[Am].x-Ao[Am+1].x)<=AP)&&(Math.abs(Ao[Am+1].x-Ao[Am+2].x)<=AP)){Ap=true;}else{if((Math.abs(Ao[Am].x-Ao[Am+1].x)>AP)&&(Math.abs(Ao[Am+1].x-Ao[Am+2].x)<=AP)){if(Math.abs(Ao[Am+1].y-Ao[Am+2].y)<=AP){Ap=true;}}}}if(!Ap){Aj.push(Ao[Am+1]);}}Aj.push(Ao[Al-1]);}return Aj;}function m(Am,At,Ap,Aj,Al,As,Ar,Ao,An,Aq){var Ak={};Ak.rect=new AR.Rect2D({x:0,y:0,width:Aj+2*An,height:At+2*An});switch(Am){case l:if(Aq){Ak.xOffset=As+An+Al;Ak.yOffset=An+Ap;Ak.rect.x=As;Ak.rect.y=0;}else{Ak.xOffset=Ao-An-Al;Ak.yOffset=As-An-Ap;Ak.rect.x=Ao-2*An-Aj;Ak.rect.y=As-2*An-At;}break;case k:if(Aq){Ak.xOffset=As-An-Al;Ak.yOffset=An+Ap;Ak.rect.x=As-2*An-Aj;Ak.rect.y=0;}else{Ak.xOffset=Ao-An-Al;Ak.yOffset=As+An+Ap;Ak.rect.x=Ao-2*An-Aj;Ak.rect.y=As;}break;case j:if(Aq){Ak.xOffset=As+An+Al;Ak.yOffset=Ar/2;Ak.rect.x=As;Ak.rect.y=Ar/2-An-Ap;}else{Ak.xOffset=Ao/2;Ak.yOffset=As-An-Ap;Ak.rect.x=Ao/2-An-Al;Ak.rect.y=As-2*An-At;}break;case h:if(Aq){Ak.xOffset=As-An-Al;Ak.yOffset=Ar/2;Ak.rect.x=As-2*An-Aj;Ak.rect.y=Ar/2-An-Ap;}else{Ak.xOffset=Ao/2;Ak.yOffset=As+An+Ap;Ak.rect.x=Ao/2-An-Al;Ak.rect.y=As;}break;case f:if(Aq){Ak.xOffset=As+An+Al;Ak.yOffset=Ar-An-Ap;Ak.rect.x=As;Ak.rect.y=Ar-2*An-At;}else{Ak.xOffset=An+Al;Ak.yOffset=As-An-Ap;Ak.rect.x=0;Ak.rect.y=As-2*An-At;}break;case d:if(Aq){Ak.xOffset=As-An-Al;Ak.yOffset=Ar-An-Ap;Ak.rect.x=As-2*An-Aj;Ak.rect.y=Ar-2*An-At;}else{Ak.xOffset=An+Al;Ak.yOffset=As+An+Ap;Ak.rect.x=0;Ak.rect.y=As;}break;}return Ak;}function AO(An,Au,Aq,Ao,Al,Aj){var Ar=An.rect,Ap,Am,Ak,As,At;if(Ar.y<0||Ar.y+Ar.height>Au){An.cannotFitVertically=true;return ;}if(Ar.x<0||Ar.x+Ar.width>Aq){An.cannotFitHorizontally=true;}Ap=Al.length;for(Am=0;Am<Ap;++Am){Ak=Al[Am].GetBoundingRect();if(Ar.HasIntersection(Ak)){++An.overlapRefLabelCount;}}Ap=Aj.length;for(Am=0;Am<Ap;++Am){At=Aj[Am];if(At.isVertical){if(Ar.x<At.position&&Ar.x+Ar.width>At.position){++An.overlapRefLineCount;}}else{if(Ar.y<At.position&&Ar.y+Ar.height>At.position){++An.overlapRefLineCount;}}}Ap=Ao.length;for(Am=0;Am<Ap;++Am){As=Ao[Am];if(As.mIsShown){Ak=As.GetBoundingRect();if(Ar.HasIntersection(Ak)){++An.overlapDataLabelCount;An.overlapDataLabels.push(Ao[Am]);}}}}function r(A6,A1,Ar){var Al=this.mChartContextPtr,A5=Al.GetGraphMatrixContext(),Ak=A5.getPadding(AN.kRefLabel),Aq=Ar.length,Ao,Ap,Ay,Av,An,Aw,Aj,A3,A2,Az,Am,At,A0,Ax,A4,As=this.mpABLPlot.shownDataLabels,Au=this.mpABLPlot.shownRefLabels;for(A3=0;A3<Aq;++A3){Ao=Ar[A3];Ap=new AR.TextObject({TripleId:Ao.tripleId,GraphObjectManager:this,GraphCollectionObject:null,Identity:Ao.identity});if(Ap!==null){Ap.SetText(Ao.labelText);for(A2=0;A2<2;++A2){if(A2===1){Am=Ap.mText;Ap.SetText(Am[0]+"...");Ap.rect.height=0;Ap.rect.width=0;}Aj=Ap.GetBoundingRect();Av=Aj.height;Aw=Av/2;Ay=Aj.width;An=Ay/2;Ax=[];for(Az=l;Az<=d;++Az){At={};At.position=Az;At.cannotFitVertically=false;At.cannotFitHorizontally=false;At.overlapRefLabelCount=0;At.overlapRefLineCount=0;At.overlapDataLabelCount=0;At.overlapDataLabels=[];A0=m.call(this,Az,Av,Aw,Ay,An,Ao.position,A6,A1,Ak,Ao.isVertical);At.xOffset=A0.xOffset;At.yOffset=A0.yOffset;At.rect=A0.rect;AO.call(this,At,A6,A1,As,Au,Ar);Ax.push(At);}Ax.sort(W);if(Ax[0].cannotFitVertically){break;}if(Ax[0].cannotFitHorizontally){if(A3===0){continue;}else{break;}}Ap.MoveTo(Ax[0].xOffset,Ax[0].yOffset,Aa.CENTER);Ap.mIsShown=true;A4=Ax[0].overlapDataLabelCount;for(Az=0;Az<A4;++Az){Ax[0].overlapDataLabels[Az].mIsShown=false;}this.mpABLPlot.mPostTrendLineObjects.push(Ap);Au.push(Ap);break;}}}}mstrmojo.chart.SeriesRenderer=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.SeriesRenderer",mDeviceDataArea:null,mpABLPlot:null,mGroupCount:0,mSeriesCount:0,mDatasetPtr:null,mLegendPtr:null,mSeriesInfo:null,mCumulateData:null,mSeriesNumber:null,mTextCollection:null,mTrendLineObjects:null,mReferenceLineObjects:null,mpABLPlotContext:null,mIsVertical:true,mUseDepth:false,mHasNegativeValue:false,mDepth:0,mDepthDirection:0,mStartLevel:0,mGroupIdMapPerSeries:[],mHasSizeBy:false,mHasColorBy:false,mClippedMarkerSize:null,mPieRenderer:null,mPieCentersPool:null,renderSequence:null,init:function AC(Ak){this._super(Ak);this.mSeriesInfo=[];this.mCumulateData=[[],[]];this.mClippedMarkerSize={X1:{LowOffset:0,HighOffset:0},X2:{LowOffset:0,HighOffset:0},Y1:{LowOffset:0,HighOffset:0},Y2:{LowOffset:0,HighOffset:0}};this.mSeriesNumber=[0,0];this.mTextCollection=[];this.mTrendLineObjects=[];this.mReferenceLineObjects=[];this.mDatasetPtr=Ak.DataSet;this.mLegendPtr=Ak.Legend;this.mDepth=0;this.mDepthDirection=0;this.mHasNegativeValue=false;this.mpABLPlot=this.mpManager;this.mGroupCount=this.mDatasetPtr.GetGroupCount();var Am=this.mpABLPlotContext=this.mpABLPlot.mABLPlotContext;this.mIsVertical=(Am.mABLOptions.mOrientation===AB.OR_VERTICAL);this.mUseDepth=Am.mABLOptions.mUseDepth;if(this.mUseDepth){this.mDepth=this.mpABLPlot.unitLevelDepth;this.mDepthDirection=Am.mABLOptions.mDepthDirection;}var Al=this.mChartContextPtr,Aj=Al.GetGraphMatrixContext();this.mHasSizeBy=Aj.mHasSizeBy;this.mHasColorBy=Aj.mHasColorBy;this.renderSequence=[];},AddSeries:function Ag(Ak,Am,Aj,Al){this.mSeriesInfo.push({mSeriesId:Ak,mSeriesIndex:Am,mDataIndex:Aj,mValueAxis:Al});++this.mSeriesNumber[Al];},GetMinMaxValue:function Q(Az,An,Au,Ar){var Ak=this.mChartContextPtr,Aq,Aw,Ax,At=[],Ao,Am,Al,Ay=this.mSeriesInfo,As,Aj;if(Ay.length===0){return{Min:An,Max:Au,AreInitialized:Ar};}if(Ak.mIsUniformAxisMode){var Ap=Ak.getUniformAxisContext(),Av=Ap.ValueAxis;if(Ak.IsVertical()===false){if(Az===0){return{Min:Av.X1.Min,Max:Av.X1.Max,AreInitialized:true};}else{return{Min:Av.X2.Min,Max:Av.X2.Max,AreInitialized:true};}}if(Az===0){return{Min:Av.Y1.Min,Max:Av.Y1.Max,AreInitialized:true};}return{Min:Av.Y2.Min,Max:Av.Y2.Max,AreInitialized:true};}Aq=Ak.mIsTimeSeriesChart&&this.mpABLPlotContext.mABLOptions.mUseGlobalAutoScale;Aw=0;Ax=this.mDatasetPtr.GetDataGroup();for(Ao=0;Ao<Ay.length;++Ao){if(Ay[Ao].mValueAxis===Az){if(Aq){At.push(Ay[Ao].mSeriesId);}else{for(Am=0;Am<this.mGroupCount;++Am){for(Al=0;Al<Ax;++Al){Aw=this.GetData(Ao,Am,false,Al);if(Aw!==null){continue;}if(!Ar){Ar=true;An=Aw;Au=Aw;}else{Au=Math.max(Aw,Au);An=Math.min(Aw,An);}}}}}}if(Aq&&At.length!==0){As=0;Aj=0;Aw=this.mDatasetPtr.GetPeakValuesAcrossSeries(Aj,As,At,0);Au=(Aw.Max>Au)?Aw.Max:Au;An=(Aw.Min<An)?Aw.Min:An;Ar=true;}return{Min:An,Max:Au,AreInitialized:Ar};},GetData:function AF(Ap,Aq,An,Ak){var Au=this.mpABLPlotContext,As=Au.mABLOptions,Am=this.mpABLPlot,At=As.mLayout,Ax=this.mSeriesInfo,Ao=this.mDatasetPtr,Av=Ax[Ap].mValueAxis,Aw,Ar,Aj,Al;An=An||false;Ak=Ak||0;if((At===AW.LO_STACKED)||(At===AW.LO_PERCENT)){Aw=this.hGetCumulateData(Av,Ax[Ap].mDataIndex,Aq);Ar=Ao.GetData(Ax[Ap].mSeriesId,Aq,Ak);if(Ar!==null){if(An){Aj=Au.mValueAxis[Av].GetBaseValue();Aw=(Aw-Aj-Ar)+Aj;if(D.AlmostZero(Aw)){Aw=0;}}if(At===AW.LO_PERCENT){Al=Am.getGroupTotals(Aq,Av);if(Al===0){Aw=0;}else{Aw/=Al;}}return Aw;}if(At===AW.LO_PERCENT){Al=Am.getGroupTotals(Aq,Av);if(Al===0){Aw=0;}else{Aw/=Al;}}return null;}Ar=Ao.GetData(Ax[Ap].mSeriesId,Aq,Ak);if(Ar!==null){Aw=Ar;}else{Aw=null;}return Aw;},SetDeviceDataArea:function I(Aj){if(this.mChartContextPtr.mUseAnimation){if(this.mDeviceDataArea===null){this.mDeviceDataArea=new AR.Rect2D({Rect2D:Aj});}else{this.mDeviceDataArea.ResetRect(Aj);}}},IsReverseSeriesOrder:function c(Al){var Aj=this.mpABLPlotContext.mValueAxis,Ak;if(Al>=Aj.length){return false;}Ak=Aj[Al];return this.mChartContextPtr.IsReverseSeriesOrder(Ak,this.mIsVertical,this.mDepthDirection);},IsReverseGroupOrder:function n(){return this.mChartContextPtr.IsReverseGroupOrder(this.mIsVertical,this.mDepthDirection);},PriorToNextSeries:function N(Ak){var An=this.mChartContextPtr,Al,Am,Aj=false;Al=this.mIsVertical?new AR.Vector2D({x:1,y:0}):new AR.Vector2D({x:0,y:1});Am=An.normalDirection(Ak,this.mDepthDirection)*An.normalDirection(Al,this.mDepthDirection);if(Am===0){Aj=this.mIsVertical?(Ak.y>0):(Ak.x<0);}else{Aj=Am>0;}return Aj;},CreateTotalLabel:function S(Aq,Ak,Ao){var Ar=this.mSeriesInfo,An=true,Am=0,Al,Ap,Aj;for(Al=0;Al<Ar.length;++Al){if(Ar[Al].mValueAxis===Aq&&this.mpABLPlotContext.mSeriesOptions[Ar[Al].mSeriesIndex].mShowDataLabels){Ap=this.mDatasetPtr.GetData(Ar[Al].mSeriesId,Ak);if(Ap!==null){Am+=Ap;if(An){An=false;}}}}if(An){return null;}Aj=new AR.NumberObject({TripleId:new AR.TripleId({ObjectId:401,SeriesId:Aq,GroupId:Ak}),GraphObjectManager:this,Number:Am,NumberFormat:this.mpABLPlotContext.mSeriesOptions[0].mGraphNumberFormat,GraphCollectionObject:Ao,Locale:0,clientDrag:true,DataSet:this.mDatasetPtr});this.AddToMap(Aj);Ao.AddGraphObject(Aj);return Aj;},GetUpmostIndexByValueAxisAndGroup:function M(Ap,Am){var An=this.mSeriesInfo,Ak,Al,Ao,Aj;Ak=-1;Aj=An.length;for(Al=Aj-1;Al>-1;--Al){if(An[Al].mValueAxis===Ap){Ao=this.mDatasetPtr.GetData(An[Al].mSeriesId,Am);if(Ao!==null){Ak=Al;if(Ao>0){break;}}}}return Ak;},createRiserLabel:function AS(Aj,Ak,An){var As=this.mSeriesInfo,Ar=As[Aj],Am=this.mpABLPlotContext.mABLOptions,Al,Ao,Aq=null,Ap="";Al=this.mDatasetPtr.GetData(Ar.mSeriesId,Ak);if(Al===null){return null;}Ao=0;if(((Am.mLayout===AW.LO_STACKED)||(Am.mLayout===AW.LO_PERCENT))&&(!Am.mShowCumulate)){Ao=Al;if(Am.mLayout===AW.LO_PERCENT&&Am.mShowAsPercentage){Ao/=this.mpABLPlot.getGroupTotals(Ak,Ar.mValueAxis);}}else{if(Am.mLayout===AW.LO_PERCENT&&!Am.mShowAsPercentage){Ao=this.hGetCumulateData(Ar.mValueAxis,Ar.mDataIndex,Ak);}else{Ao=this.GetData(Aj,Ak);if(Ao===null||Ao===undefined){return null;}}}Am.mShowValue=true;if(Am.mShowValue){Aq=this.mpABLPlotContext.mSeriesOptions[Ar.mSeriesIndex].mGraphNumberFormat;}if(Am.mShowLabel){Ap=this.mDatasetPtr.GetSeriesLabel(Ar.mSeriesId,false);}return this.mpABLPlot.createRiserLabel(new AR.TripleId({ObjectId:Ad.DssGraphDataText,SeriesId:Ar.mSeriesId,GroupId:Ak}),Ao,Aq,Ap,An);},AddTextToMapAndList:function AH(){},GetIndexFromSeriesId:function Ai(Am){var Al=this.mSeriesInfo,Aj=Al.length,Ak;for(Ak=0;Ak<Aj;++Ak){if(Al[Ak].mSeriesId===Am){return Ak;}}return -1;},AddLegendMarkerToCollection:function s(An,Ak,Aj,Al,Am,Ao){Aj=Aj||false;Al=(Al===undefined)?true:Al;Am=Am||Ae.DssGraphMarkerShapeRectangle;Ao=(Ao===undefined)?true:Ao;this.mpABLPlot.AddLegendMarkerToCollection(this.mSeriesInfo[An].mSeriesId,Ak,Aj,Al,Am,Ao);},MoveLabel:function AM(Ax,Aw,A5,A3,Aj){var A1=this.mSeriesInfo,Ay=this.mpABLPlotContext.mABLOptions,A8,As,A7,Aq,Av,Ap,Ak,Ar,A0,A2,Ao,An,Am,A4,A6,Al,Au,At,Az,A9;if(Aw===null||Aw===undefined){return ;}A8=this.mpABLPlotContext.mValueAxis[A1[Aj].mValueAxis].IsReverseOrder();As=A8;A7=A8?-1:1;Aq=0;A9=this.GetData(Aj,Ax);if(A9!==null&&A9!==undefined){Aq=A9;}if(A9&&(Aq<0)){A7=-A7;As=!As;}v.Reset(A5.x,A5.y);L.Reset(A3.x,A3.y);Av=v;Ap=L;if(this.mIsVertical){if(As){if(Av.y<Ap.y){Av.swapPoints(Ap);}}else{if(Ap.y<Av.y){Av.swapPoints(Ap);}}}else{if(As){if(Ap.x<Av.x){Av.swapPoints(Ap);}}else{if(Av.x<Ap.x){Av.swapPoints(Ap);}}}Ak=Aw.GetBoundingRect();Ar=Math.floor(Ak.width/2);A0=Math.floor(Ak.height/2);AY.Reset(Av.x,Av.y);A2=AY;Ao=Aw.mTripleId;An=(Ao.mObjectId===Ad.DssGraphDataTextStackTotal);Am=An?AJ.DssGraphDTPositionOutMax:Ay.mTextPosition;if(Am===AJ.DssGraphDTPositionOutMin||Am===AJ.DssGraphDTPositionInMin){A2.x=Ap.x;A2.y=Ap.y;}switch(Am){case AJ.DssGraphDTPositionCenter:A2.x=(A2.x+Ap.x)/2;A2.y=(A2.y+Ap.y)/2;break;case AJ.DssGraphDTPositionInMin:case AJ.DssGraphDTPositionOutMax:if(this.mIsVertical){A2.y-=A0*A7;}else{A2.x+=Ar*A7;}break;case AJ.DssGraphDTPositionOutMin:case AJ.DssGraphDTPositionInMax:if(this.mIsVertical){A2.y+=A0*A7;}else{A2.x-=Ar*A7;}break;default:break;}if(An&&Ay.mTextPosition===AJ.DssGraphDTPositionOutMax){A4=this.GetUpmostIndexByValueAxisAndGroup(y.VA_Y1,Ax);A6=this.mpManager.GetGraphObject(new AR.TripleId({ObjectId:Ad.DssGraphDataText,SeriesId:A1[A4].mSeriesId,GroupId:Ax}));if(!A6){Aw.MoveTo(A2.x,A2.y,Aa.CENTER);return ;}Al=A6.GetBoundingRect();Au=A6.GetFormatFont();At=Aw.GetFormatFont();Az=Au.mFontSize+At.mFontSize;if(this.mIsVertical){if(Au.isHorizontal()||At.isHorizontal()){A2.y-=Math.floor(Al.height+Az/3)*A7;}else{if(Au.isVertical()){A2.x+=Az;}else{A2.x+=Math.floor(Az*Math.SQRT2);}}}else{if(Au.isVertical()||At.isVertical()){A2.x+=Math.floor(Al.width+Az/3)*A7;}else{if(Au.isHorizontal()){A2.y+=Az;}else{A2.y+=Math.floor(Az*Math.SQRT2);}}}}Aw.MoveTo(A2.x,A2.y,Aa.CENTER);},updateGroupStackInfoWithBase:function AG(Au,An,Ay){if(this.mStackedGroupInfos===null||this.mStackedGroupInfos===undefined){this.mStackedGroupInfos=[[],[],[],[]];}function Ax(A3,A2){var A1=A2+1;for(;A1<A3.length;A1++){if(A3[A1]!==null&&A3[A1]!==undefined){return Math.min(A3[A1],Ay);}}return Ay;}function Ao(A3,A2){var A1=A2-1;for(;A1>=0;A1--){if(A3[A1]!==null&&A3[A1]!==undefined){return Math.max(A3[A1],Ay);}}return Ay;}var Aq=this.mStackedGroupInfos,Ak;if(Aq[Au]&&Aq[Au][An]){return Aq[Au][An];}var Av=Aq[Au],As,Az=[],Al=this.mSeriesInfo,At=Al.length;var Ap=[],Ar=[];for(As=0;As<At;As++){var Am=this.GetData(As,An),A0={Min:Am,Max:Am,SeriesIndex:As};(Am>=0)?Ap.push(A0):Ar.unshift(A0);}Ak=Ar.concat(Ap);var Aj=[],Aw=-1;for(As=0;As<Ak.length;As++){Az[Ak[As].SeriesIndex]=As;Aj.push(Ak[As].Max);}for(As=0;As<Ak.length;As++){if(Ak[As].Max!==null&&Ak[As].Max!==undefined){if(Ak[As].Max>=Ay){Ak[As].Min=Ao(Aj,As);}else{Ak[As].Max=Ax(Aj,As);}}}Av[An]=Ak;Aq[Au+2][An]=Az;return Av[An];},getGroupStackedInformation:function AQ(Av,Ap){if(this.mStackedGroupInfos===null||this.mStackedGroupInfos===undefined){this.mStackedGroupInfos=[[],[],[],[]];}var Am=this.mStackedGroupInfos;if(Am[Av]&&Am[Av][Ap]){return Am[Av][Ap];}var Aj=Am[Av],Ar,Ak=[],As=this.mSeriesInfo,Ao=As.length;var Aq=[],An=[];for(Ar=0;Ar<Ao;Ar++){var At=this.GetData(Ar,Ap,true),Au=this.GetData(Ar,Ap),Al={Min:Math.min(At,Au),Max:Math.max(At,Au),SeriesIndex:Ar};(Au>=0)?Aq.push(Al):An.unshift(Al);}Aj[Ap]=An.concat(Aq);for(Ar=0;Ar<Aj[Ap].length;Ar++){Ak[Aj[Ap][Ar].SeriesIndex]=Ar;}Am[Av+2][Ap]=Ak;return Aj[Ap];},getSeriesOffsetIntoStackedInfo:function J(Ap,Am,Ak){var Ao=this.mStackedGroupInfos;if(Ao[Ap+2]&&Ao[Ap+2][Am]){return Ao[Ap+2][Am][Ak];}var Aj=Ao[Ap],An=Aj[Am],Al;for(Al=0;Al<An.length;Al++){if(An[Al].SeriesIndex===Ak){return Al;}}return Ak;},analyzeGroupInfo:function T(Ap,Ao,An){this.groupStackAnalysis=this.groupStackAnalysis||[[],[]];if(this.groupStackAnalysis[Ap][Ao]){return this.groupStackAnalysis[Ap][Ao];}var Aj=this.groupStackAnalysis[Ap],Am=this.getGroupStackedInformation(Ap,Ao),Al,Ak={Reverse:3};if(Am&&Am.length){Al=Am.length-1;if(Am[Al].Max<=An){Ak={Reverse:0,CeilUpdated:Al};}else{if(Am[0].Min>=An){Ak={Reverse:1,FloorUpdated:0};}else{for(Al=0;Al<Am.length;Al++){if(Am[Al].Max>=An){Ak.FloorUpdated=Al;Ak.CeilUpdated=Al>0?Al-1:-1;}}}}}else{Ak={Reverse:4};}Aj[Ao]=Ak;return Aj[Ao];},UpdateCumulateData:function AX(Az,At,Ax){var As=this.mSeriesInfo,Ap=this.mDatasetPtr,Al=this.mGroupCount,Ar=this.mCumulateData,A1,Ak,Aj,Ay,Aw,Av,Au,Aq=this.mChartContextPtr.IsDualAxis(),A2=Ax!==undefined&&Ax>=0,Am,A0,A3,An;if(A2){var Ao=Ap.GetValueAxisBySeries(Ax);if(Ao!==Az){return At;}}A1=As.length;if(A1===0){return At;}Ay=A1;if(Aq){Ak=this.mSeriesNumber[0];Aj=A1-Ak;}for(Aw=0;Aw<Al;++Aw){Am=(At&&At.positive[Aw])||0;A0=(At&&At.negative[Aw])||0;for(Av=0;Av<A1;++Av){if(A2){if(As[Av].mSeriesId!==Ax){continue;}}if(As[Av].mValueAxis===Az){A3=Ap.GetData(As[Av].mSeriesId,Aw);An=0;if(A3!==null&&A3!==undefined){An=A3;if(An<0){this.mHasNegativeValue=true;An+=A0;A0=An;}else{An+=Am;Am=An;}}else{An=Am;}if(A2){if(An>=0){At.positive[Aw]=An;}else{At.negative[Aw]=An;}if(Aq){Ay=Az===y.VA_Y1?Ak:Aj;}Au=Aw*Ay+As[Av].mDataIndex;Ar[Az][Au]=An;}else{Ar[Az].push(An);if(Av===A1-1){if(An>=0){At.positive[Aw]=An;}else{At.negative[Aw]=An;}}}}}}return At;},AddBaseToCumulateData:function AI(Am,Al){var Aj=this.mCumulateData[Am].length,Ak;for(Ak=0;Ak<Aj;++Ak){this.mCumulateData[Am][Ak]+=Al;}},drawSingleDataPoint:function V(Au,At,Ak,Aq){var Ao=this.mChartContextPtr,Ax=Ao.GetGraphMatrixContext(),Al=0,Aw,Av,A0,Ap,Aj,Ay,As=[],Ar=this.mpABLPlot.shownDataLabels;var Am=Ax.mMarkerShape;if(Am===Ae.DssGraphMarkerShape2DPie||Am===Ae.DssGraphMarkerShape2DRingPie){if(this.mPieRenderer===null){var Az=0;if(Am===Ae.DssGraphMarkerShape2DRingPie){Az=1;}this.mPieRenderer=new AR.PiePlotRenderer({GraphObjectManager:this,Dataset:this.mDatasetPtr,ChartContext:this.mChartContextPtr,Layout:Az,PlotType:a.GMPPT_CATEGORY,ShownDataLabel:Ar});}var An=this.mPieRenderer;Al=this.mDatasetPtr.GetPieCountAtOneDataPoint(Au.mSeriesId,Au.mGroupId);for(Aw=0;Aw<Al;++Aw){if(Ao.checkColorByAndSizeByValue(Au,this.mDatasetPtr,false,this.mHasSizeBy)===false){As.push({Object:null,ShapeSize:Ap});continue;}if(Ao.mImageUsage===x.GENERAL){A0=e.call(this,Au.mSeriesId,Au.mGroupId,Aw,Al);Aj=An.drawSinglePie(Au.mSeriesId,Au.mGroupId,Aw,A0,Al);for(Av=0;Av<Aj.length;Av++){if(Aj[Av]){As.push({Object:Aj[Av],ShapeSize:Aj[Av].getShapeSize()});}}}else{if(Ao.mImageUsage===x.OBJECT_CLIP_COMPUTATION){Ap=An.getShapeSizeAt(Au.mSeriesId,Au.mGroupId,Aw,!this.mHasSizeBy);As.push({Object:null,ShapeSize:Ap});}}}}else{if(Ak===U._COMBINED){Ak=this.mDatasetPtr.GetShapeByCell(Au.mSeriesId,Au.mGroupId);if(Ak===U._GENERIC){Ak=U._CIRCLE;}}Ay=this.drawSinglePoint(Au,At,Ak,Aq);As.push(Ay);}return As;},drawSinglePoint:function Ac(Ay,Ax,Am,Aw){var Ap=(Am!==undefined)?Am!==U._LINE:false,Ar=this.mChartContextPtr,A1=Ar.GetGraphMatrixContext(),As=this.mGroupCount,A2,Ao,Aq,A0,An,Av,Al,Az=this.mDatasetPtr.getForecastCount();if(Ar.checkColorByAndSizeByValue(Ay,this.mDatasetPtr,this.mHasColorBy,this.mHasSizeBy)===false){return{Object:null,ShapeSize:0};}if(Aw===U._AREA){Ap=false;}Aq=o.call(this,Am);if(Ar.RenderClusterShapes()){if(!(As===1&&Am===2)){As*=this.mSeriesInfo.length;}}if(Aq===Ae.DssGraphMarkerShapeGMTick){A0=A1.GetMaxMarkerSize(AL._TICK_CATEGORY,Ar.IsVertical(),As);}else{if(Am===U._AREA||Aw===U._AREA){A0=A1.GetMaxElementSizeInAreaChart(this.mIsVertical,As,!Ap,Az);}else{A0=A1.GetMaxElementSizeInLineChart(this.mIsVertical,As,!Ap,Aq);}}Ao=this.mDatasetPtr.GetGroupCount();if(this.mHasSizeBy){A2=this.mDatasetPtr.GetSizeByData(Ay.mSeriesId,Ay.mGroupId);if(A2!==null&&A2!==undefined){if(Aq===Ae.DssGraphMarkerShapeNone&&(A1.mMaxSizeVal===A1.mMinSizeVal)){if(!Ap&&Ao>=3){A0=A1.GetAdjustThicknessValue(A1.mConstants.MinimalSize.General);}A0=Math.round(Math.max(A0,1));}else{A0=A1.GetScaledSize(A2,A0,Am);A0=Math.max(Math.round(A0),A1.mConstants.MinimalSize.General);}}}if(Ar.mImageUsage===x.OBJECT_CLIP_COMPUTATION){var Au=A0;if(Aq===Ae.DssGraphMarkerShapeGMTick){Au=Math.round(0.5*(this.mIsVertical?A1.mConstants.FixedTickerSize:A0));}return{Object:null,ShapeSize:Au};}if(Aq===Ae.DssGraphMarkerShapeNone){Aq=Ae.DssGraphMarkerShapeCircle;}if(Aq===Ae.DssGraphMarkerShapeGMTick){var Ak,Aj,At=Math.round(0.5*A0);if(Ar.IsVertical()){Ak={x:Ax.x-At,y:Ax.y};Aj={x:Ax.x+At,y:Ax.y};}else{Ak={y:Ax.y-At,x:Ax.x};Aj={y:Ax.y+At,x:Ax.x};}An=new AR.StraightLineObject({TripleId:Ay,GraphObjectManager:this,StartPoint:Ak,EndPoint:Aj,GraphCollectionObject:null,Shape:U._TICKER});}else{if(Aq===Ae.DssGraphMarkerShapeSquare||Aq===Ae.DssGraphMarkerShapeRectangle){Al=this.mChartContextPtr.transformToRect(Ax,A0,true);An=new AR.RectangleObject({TripleId:Ay,GraphObjectManager:this,GraphCollectionObject:null,Area:Al,Shape:U._RECTANGLE,hasFill:true});}else{An=new AR.MarkerObject({TripleId:Ay,GraphObjectManager:this,MarkerPosition:Ax,MarkerShape:Aq,IsIsometric:true,MarkerSize:A0,GraphCollectionObject:null,IsDialogSize:false,Shape:U._CIRCLE,hasFill:true});}}if(A1.mMarkerShape===Ae.DssGraphMarkerShapeNone){A1.AddToIsolatedDotList(Ay);if(Ay.mObjectId!==Ad.DssGraphDataMarker){Av=new AR.TripleId({ObjectId:Ad.DssGraphDataMarker,SeriesId:Ay.mSeriesId,GroupId:Ay.mGroupId});A1.AddToIsolatedDotList(Av);}}return{Object:An,ShapeSize:An.getShapeSize()};},getCorrectGroupIdInSeriesPoints:function Ab(Aj,Al){var Ak=this.mGroupIdMapPerSeries[Aj];if(Ak!==null&&Ak!==undefined){return Ak;}return Al;},prepareTransitionalGradient:function g(Aj,Ao,Ap){var Am,Al,An={Effective:false};if(Ap!==undefined){Ap=Math.min(Ao.length,Ap);}else{Ap=Ao.length;}An.Colors=[];for(Am=0;Am<Ap;Am++){var Ak=this.mDatasetPtr.GetColorByData(Aj.mSeriesId,Aj.mGroupId+Am);if(Ak===null){Ak=this.mDatasetPtr.GetDefaultShapeFillColor();}if(Am===0){Al=Ak;An.StartGraphColor=Ak;}else{if(Am===Ap-1){An.EndGraphColor=Ak;An.Effective=An.Effective||Ak!==Al;}else{An.Colors.push({Color:Ak,Step:Am/(Ap-1)});An.Effective=An.Effective||Ak!==Al;}}}An.Style=1;An.EndAlpha=255;An.Angle=this.mChartContextPtr.IsVertical()?0:1;return An;},getMaxElementOffsetClippedByBoundary:function AE(Aj,Am,Ak){var An=Am?(Ak?"X1":"X2"):(Ak?"Y1":"Y2");if(this.mClippedMarkerSize[An]){var Al=this.mClippedMarkerSize[An];Aj.LowOffset=Math.max(Al.LowOffset,Aj.LowOffset);Aj.HighOffset=Math.max(Al.HighOffset,Aj.HighOffset);}else{Aj.LowOffset=Math.max(0,Aj.LowOffset);Aj.HighOffset=Math.max(0,Aj.HighOffset);}},CreateOneDataMarker:function F(Ak,At,As,Az,Aw,A6){var Ay=this.mSeriesInfo[Ak],Ao=this.mChartContextPtr,A0=new AR.TripleId({ObjectId:Ad.DssGraphRiser,SeriesId:Ay.mSeriesId,GroupId:At}),A2=Ao.GetGraphMatrixContext(),Au=this.mDatasetPtr,Am=Au.GetShapeBySeries(Ay.mSeriesId),A3=(Am===U._LINE||Am===U._GENERIC),Ax=(Am===U._AREA),Ap=A2.IsIsolatedDot(A0),Ar=A2.mHasSizeBy,A4,Av,Aj,Aq;A6=A6||false;var A5,An=Ae.DssGraphMarkerShapeCircle;if(A2.mMarkerShape===Ae.DssGraphMarkerShapeCombined){A4=(Am===U._CIRCLE||Am===U._RECTANGLE||Am===U._SQUARE);}else{A4=(A2.mMarkerShape===Ae.DssGraphMarkerShapeCircle||A2.mMarkerShape===Ae.DssGraphMarkerShapeRectangle||A2.mMarkerShape===Ae.DssGraphMarkerShapeSquare);}A5=(!Ap&&!A4&&!Ar);if(!A5){return ;}Aj=this.mDatasetPtr.getMarkerShapeInfoAt(Ay.mSeriesId,At);A5=(Aj.Show||A6)&&An!==undefined;if(!A5){return ;}An=Aj.Shape;As=null;var A7=new AR.TripleId({ObjectId:Ad.DssGraphDataMarker,SeriesId:Ay.mSeriesId,GroupId:At}),A1=Aj.Size||3;if(A6){An=Ae.DssGraphMarkerShapeCircle;A1=A2.mConstants.FixedDataMarkerSize;}if(An===Ae.DssGraphMarkerShapeCircle){Av=new AR.MarkerObject({TripleId:A7,MarkerPosition:Az,MarkerShape:An,IsIsometric:true,MarkerSize:A1,GraphCollectionObject:As,GraphObjectManager:this,IsDialogSize:false,Shape:U._CIRCLE});}else{if(An===Ae.DssGraphMarkerShapeRectangle||An===Ae.DssGraphMarkerShapeSquare){var Al=this.mChartContextPtr.transformToRect(Az,A1,true);Av=new AR.RectangleObject({TripleId:A7,GraphObjectManager:this,GraphCollectionObject:As,Area:Al,Shape:U._RECTANGLE});}}Aq=this.mGraphObjectList;if(A3){Aq.push(Av);}else{if(Ax){Aq.push(Av);}}},CreateAllDataLabels:function A(){var Am,Ak,An,Ao,At=this.mTextCollection,Al,Ar,Au=true,Aq=this.mDataLabels,Ap=this.mSeriesInfo,Aj,As;An=new AR.TripleId({ObjectId:Ad.DssGraphDataText});if(Au){Ao=new AR.GraphCollectionObject({TripleId:An,GraphObjectManager:this,CollectionType:w.CT_TEXT});}for(Am=0;Am<Ap.length;++Am){As=Ap[Am].mSeriesId;if(this.mDatasetPtr.showSeriesDatalabel(As)===false){continue;}if(!Au){Ao=new AR.GraphCollectionObject({TripleId:An,GraphObjectManager:this,CollectionType:w.CT_TEXT});}At.push(Ao);for(Ak=0;Ak<this.mGroupCount;++Ak){Al=this.mDatasetPtr.GetData(As,Ak);if(Al!==undefined&&Al!==null){Ar=this.CreateOneDataLabel(As,Ak,Al,Ao);if(Ar!==null&&Ar!==undefined){Aj=new AR.GMDataLabelInfo({SeriesId:As,GroupId:Ak,SeriesInfo:Am,isValid:true,Label:Ar});Ar.mIsShown=false;Aq.push(Aj);this.AddToMapAndList(Ar);}}}}},hGetCumulateData:function X(Al,Ak,Aj){return this.mCumulateData[Al][Aj*this.mSeriesNumber[Al]+Ak];},GetAccompanyPoints:function AZ(Al,An){var Am=new AR.Point2D(),Aj=new AR.Point2D(),Ak={};Am.x=Al.x;Am.y=Al.y;Aj.x=Al.x;Aj.y=Al.y;if(this.mIsVertical){Am.y-=An;Aj.y+=An;}else{Am.x-=An;Aj.x+=An;}Ak.lowPoint=Am;Ak.highPoint=Aj;return Ak;},CreateOneDataLabel:function Af(Ax,An,Aj,At){var Ao=Aj,Ar="",Au,Aq,Al,Ay,Am,Aw,Av,Ap,As,Ak;Aq=new AR.TripleId({ObjectId:Ad.DssGraphDataText,SeriesId:Ax,GroupId:An});Am=this.mDatasetPtr;Av=this.mpABLPlotContext;Ap=Av.mABLOptions;As=Ap.mLayout;if(As===AW.LO_STACKED||As===AW.LO_PERCENT){Ao=Am.GetData(Ax,An);}Aw=Am.dataLabelStyle;switch(Aw){case u:Au=this.mSeriesInfo[0].mValueAxis;p.restore();Am.getGridDataFormat(p,Ax,An,0);Al=new AR.NumberObject({TripleId:Aq,GraphObjectManager:this,Number:Ao,NumberFormat:p,GraphCollectionObject:At,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0});if(Al){Ar=Al.mText;Ay=Al;}break;case G:Ar=this.mDatasetPtr.GetTextLabel(Ax,An);Ay=new AR.TextObject({TripleId:Aq,GraphObjectManager:this,GraphCollectionObject:At});break;}if(Ar.length!==0){Ay.SetText(Ar);return Ay;}return null;},Draw:function AT(){this._super();Z.call(this);R.call(this);},updateSeriesRenderSequence:function q(Ak,Aq,Am){var Ao,Al,An=0,Ap=this.renderSequence,Aj=Ap.length;if(Am===undefined){Am=true;}Aq=Am?Aq:0;for(Ao=0;Ao<Aj;Ao++){Al=Ap[Ao];if(Al!==null&&Al!==undefined){An++;Ak[Ao]=Al+Aq;}}if(Am){return Aq+An;}return 0;},populateRenderSequence:function AV(An){if(An){this.renderSequence=An;}else{var Ak,Al=this.renderSequence,Am=this.mSeriesInfo,Aj=Am.length;Al.splice(0,Al.length);for(Ak=0;Ak<Aj;Ak++){Al[Am[Ak].mSeriesId]=Ak;}}},evalBarStyleUnitWidth:function H(Aj,Am,Ao){var Ap=this.mChartContextPtr,Al=Ap.GetGraphMatrixContext(),Ak={unitWidth:0,columns:1,riserGap:0,groupGap:0,overlapRatio:0,gapRatio:10};if(Ao===undefined){Ao=10;var An=Al.mElementsInfo;if(An.Max.Mode===AD._MANUAL){Ao=An.Max.Size*100;if(Ao<1){Ao=1;}if(Ao>100){Ao=99;}Ak.gapRatio=100-Ao;}}else{Ak.gapRatio=Ao;}Ak.columns=Am||this.mSeriesInfo.length;Ak.unitWidth=(Aj*(1-Ak.gapRatio/100)/Ak.columns);if(Ap.mIsGraphMatrix){if(Ak.unitWidth>2){Ak.unitWidth-=1;}if(Al.mElementsInfo.Max.Mode===AD._AUTOMATIC){Ak.unitWidth=Math.min(Ak.unitWidth,Al.mConstants.MaximalSize.Bar);}if(this.mHasSizeBy===false){if(!Ap.isCompactMode()){Ak.unitWidth=Math.max(Ak.unitWidth,Al.mConstants.MinimalSize.Bar);}}Ak.gapRatio=(1-Ak.unitWidth*Ak.columns/Aj)*100;Ak.riserGap=0;Ak.groupGap=Aj*Ak.gapRatio/100;}return Ak;},GenerateTrendLine:function K(){var A3=this.mpABLPlotContext,At,A4,Aq=A3.mCategoryAxisPtr,BF,BD,BB,Ay,BC,BI,Ax,A9,BE=this.mDatasetPtr,A0=this.mChartContextPtr,Az=this.mSeriesInfo,Ar=Az.length,Al,A1,A7,Am,Ap,A2,A5=[],As,A6,BH,A8,Ak,Aj,Au,Av,An,BG,Aw={},BA={},Ao={};if(BE.isBare(A0.IsPieChart())){return ;}if(Aq.mAxisInfo.mAxisDirection===AU.AD_X){A4=true;}else{A4=false;}for(BF=0;BF<Ar;++BF){A5=[];Al=Az[BF];A1=Al.mSeriesId;At=BE.GetTrendLineOfSeries(A1);Am=Al.mValueAxis;Ap=A3.mValueAxis[Am];As=new AR.TripleId({ObjectId:Ad.DssGraphTrendLine,SeriesId:A1});if(!!At===false){continue;}Ay=At.getTrendLineType();if(Ay===O.DssGraphRegressionNone){continue;}A8=At.getIdentity();BI=At.getTrendLineValuesWithForecast();Ax=At.getTrendLineValues();BC=At.getSeasonalityType();if(B(Ax)<=1){continue;}if(!!BI===false||BI.length===0){continue;}A9=BI.length;if(Ay===O.DssGraphRegressionLinear){if(BC!==0){for(BD=0;BD<A9;++BD){A7=BI[BD];if(A7!==null&&A7!==undefined){A2=i.call(this,BF,BD,A7,Ap,A4,true);if(A2.x!==null&&A2.y!==null){A5.push(A2);}else{z.visPrint("Trendline point calculation abnormal:");z.visPrint("\tseries #: "+BF+", data point #:"+BD);z.visPrint("\tvalue = "+A7);z.visPrint("\tx = "+A2.x+", y = "+A2.y);}}}A5=b.call(this,A5);BG=A5.length;if(BG>=2){Av=A5[0].x;An=A5[BG-1].x;Ak=(Av+An)/2;for(BF=0;BF<BG;++BF){if(A5[BF].x===Ak){Aj=A5[BF].y;break;}else{if(BF<BG-1&&A5[BF].x<Ak&&A5[BF+1].x>Ak){Au=(A5[BF+1].y-A5[BF].y)/(A5[BF+1].x-A5[BF].x);Aj=A5[BF].y+Au*(Ak-A5[BF].x);break;}}}BA.x=Ak;BA.y=Aj;}}else{for(BD=0;BD<A9;++BD){A7=BI[BD];if(A7!==null&&A7!==undefined){A2=i.call(this,BF,BD,A7,Ap,A4,true);if(A2.x!==null&&A2.y!==null){A5.push(A2);break;}else{z.visPrint("Trendline point calculation abnormal:");z.visPrint("\tseries #: "+BF+", data point #:"+BD);z.visPrint("\tvalue = "+A7);z.visPrint("\tx = "+A2.x+", y = "+A2.y);}}}for(BB=A9-1;BB>BD;--BB){A7=BI[BB];if(A7!==null&&A7!==undefined){A2=i.call(this,BF,BB,A7,Ap,A4,true);if(A2.x!==null&&A2.y!==null){A5.push(A2);break;}else{z.visPrint("Trendline point calculation abnormal:");z.visPrint("\tseries #: "+BF+", data point #:"+BB);z.visPrint("\tvalue = "+A7);z.visPrint("\tx = "+A2.x+", y = "+A2.y);}}}BG=A5.length;if(BG>=2){Ak=(A5[0].x+A5[1].x)/2;Aj=(A5[0].y+A5[1].y)/2;BA.x=Ak;BA.y=Aj;}}if(BG>=2){Aw.x=A5[0].x;Aw.y=A5[0].y;Ao.x=A5[BG-1].x;Ao.y=A5[BG-1].y;A6=new AR.PolyLineObject({TripleId:As,GraphObjectManager:this,PolyLine:A5,Shape:U._LINE,Identity:A8,startPoint:Aw,midPoint:BA,endPoint:Ao});if(A6!==null){this.mTrendLineObjects.push(A6);}}}else{for(BD=0;BD<A9;++BD){A7=BI[BD];if(A7!==null&&A7!==undefined){A2=i.call(this,BF,BD,A7,Ap,A4,false);if(A2.x!==null&&A2.y!==null){A5.push(A2);}else{z.visPrint("Trendline point calculation abnormal:");z.visPrint("\tseries #: "+BF+", data point #:"+BD);z.visPrint("\tvalue = "+A7);z.visPrint("\tx = "+A2.x+", y = "+A2.y);}}}if(A5.length>=2){BH=new AR.CurveLineObject({TripleId:As,GraphObjectManager:this,Points:A5,IsVertical:A4,Identity:A8,Shape:U._CURVE});if(BH!==undefined&&BH!==null){this.mTrendLineObjects.push(BH);}}}}},GenerateRefLine:function C(){var An=this.mpABLPlotContext,Ar=this.mChartContextPtr,A5=Ar.mGraphWidth,BC=Ar.mGraphHeight,Ay=this.mSeriesInfo.length,Am,A1,A9,A6,As,BA,A2,BE,A7=[],Ao,A8,Az,Al,A4,BG,Aq,Ap,BF,BB,Ak,At={},BD,Aj,Aw=this.mDatasetPtr,Av,Ax=[],Au,A3=Aw.GetSeriesCount()*Aw.GetGroupCount();if(Ar.mPartialRendering===false){A3=this.mpABLPlot.DPCount;}for(A9=0;A9<Ay;++A9){A1=this.mSeriesInfo[A9];Am=A1.mSeriesId;Az=Aw.GetReferenceLinesOfSeries(Am);As=A1.mValueAxis;BA=An.mValueAxis[As];Aj={};Aj.Condense=BA.mCondenseLabels;if(!Aj.Condense){if(BA.mNumberFormat.isDefault){var A0=new AR.ChartAdvFormat();Ar.getAxisAutoNumberFormat(A0,BA.mPrimaryMetrics);BA.mNumberFormat=A0;}Aj.NumberFormat=BA.mNumberFormat.mCustomFormat;}Au=Az.length;for(A6=0;A6<Au;++A6){A7=[];A8=Az[A6];if(A8){BG=A8.getIdentity();A2=A8.getReferenceLineValue();BE=A8.getReferenceLineDirection();Av=(BE!=="horizontal");Al=A8.getReferenceLineLabel(false,false,Aj);Aq=A8.getRefLineLabelIdentity();if(A3===0){continue;}Ao=new AR.TripleId({ObjectId:Ad.DssGraphReferenceLine,SeriesId:Am,GroupId:A6});BD=new AR.TripleId({ObjectId:Ad.DssGraphRefLineText,SeriesId:Am,GroupId:A6});if(A2!==null&&A2!==undefined){BF=BA.GetPositionByValue(A2);if(BF!==null&&BF!==undefined){BB=1;if(Av){if(BF===0){BF=1;}else{if(BF===A5){--BF;}}Ak=BC-1;A7.push(new AR.Point2D({x:BF,y:BB}));A7.push(new AR.Point2D({x:BF,y:Ak}));At.x=BF;At.y=(A7[0].y+A7[1].y)/2;}else{if(BF===0){BF=1;}else{if(BF===BC){--BF;}}Ak=A5-1;A7.push(new AR.Point2D({x:BB,y:BF}));A7.push(new AR.Point2D({x:Ak,y:BF}));At.x=(A7[0].x+A7[1].x)/2;At.y=BF;}Ap=new AR.StraightLineObject({TripleId:Ao,GraphObjectManager:this,StartPoint:A7[0],EndPoint:A7[1],GraphCollectionObject:null,Identity:BG,Shape:U._LINE,MidPoint:At});if(Ap!==null){if(!Ap.mFormatLinePtr){Ap.mFormatLinePtr=new AR.FormatLine();}this.mReferenceLineObjects.push(Ap);Ax.push({tripleId:BD,identity:Aq,isVertical:Av,position:BF,labelText:Al});}}else{z.visPrint("Reference line point calculation abnormal:");z.visPrint("\tseries #: "+A9+"ref line #: "+A6);z.visPrint("\tvalue = "+A2);z.visPrint("\ty = "+BF);}}}}}r.call(this,BC,A5,Ax);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","GraphObjectManager","CategoryPlot","TripleId");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumOrientation");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphObject","EnumVariantBool","EnumDSSExtraGraphProperty");var O=mstrmojo.chart,M=O.enums,B=M.EnumOrientation,P=O.gNullObjectId,L=O.gNullTripleId;var J=mstrmojo.chart.model,Q=J.enums,E=Q.EnumDSSGraphType,F=Q.EnumDSSGraphObject,K=Q.EnumVariantBool.VARIANT_FALSE,R=Q.EnumDSSExtraGraphProperty;mstrmojo.chart.PlotManager=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.PlotManager",mLegendPtr:null,mDatasetPtr:null,mGraphType:E.DssGraphTypeVertical_Bar_Side_by_Side,mPlotArea:null,mChartAreaOptions:null,mRecalculateFrame:false,mLeftMargin:0,mRightMargin:0,mTopMargin:0,mBottomMargin:0,init:function N(S){this._super(S);this.mChartAreaOptions={useChartArea:false,chartAreaNumber:1,orientation:B.OR_VERTICAL,vecPercentageHeightOrWidth:[],seriesDistribution:[]};this.mPlotArea=S.Area||null;this.mChartContextPtr=S.GraphObjectManager.mChartContextPtr;},SetDataset:function G(S){this.mDatasetPtr=S;},SetMarginInfo:function H(V,T,S,U){this.mLeftMargin=V;this.mRightMargin=T;this.mTopMargin=S;this.mBottomMargin=U;},LoadProperties:function I(){var Z,U,b,W,X,S=[],V=[],a=[];var T=this.mChartContextPtr,Y=this.mChartAreaOptions;this.mGraphType=T.mGraphType;this.mRecalculateFrame=T.mRecalculateFrame;if(!T.mIsGraphMatrix){Z=T.GetProperty(R.DssGraphUseChartArea,P);if(Z){Y.useChartArea=Z!==K;}}U=this.mDatasetPtr.GetSeriesCount();b=1;W=0;if(Y.useChartArea){Z=T.GetProperty(R.DssGraphChartAreaNumber,P);if(Z){Y.chartAreaNumber=Z;if(Y.chartAreaNumber>U){Y.chartAreaNumber=U;}}Z=T.GetProperty(R.DssGraphChartAreaOrientation,P);if(Z){Y.orientation=(Z!==K?B.OR_VERTICAL:B.OR_HORIZONTAL);}for(X=0;X<Y.chartAreaNumber;X++){Z=T.GetProperty(R.DssGraphChartAreaSpacePercentage,new mstrmojo.chart.TripleId({ObjectId:F.DssGraphFrame,SeriesId:X}));if(Z&&Z>=0){Y.vecPercentageHeightOrWidth.push(Z/100);b-=Z/100;}else{Y.vecPercentageHeightOrWidth.push(-1);W++;}}}else{Y.chartAreaNumber=1;Y.vecPercentageHeightOrWidth.push(1);}for(X=0;X<Y.chartAreaNumber;X++){Y.seriesDistribution.push(S);}this.mDatasetPtr.GetOneSliceRangeSimple(V,a);for(X=0;X<U;X++){if(T.mIsGraphMatrix){Y.seriesDistribution[X%Y.chartAreaNumber].push(V[X]);}else{Z=T.GetProperty(R.DssGraphChartAreaDestination,new mstrmojo.chart.TripleId({ObjectId:F.DssGraphRiser,SeriesId:X}));if(Y.useChartArea&&Z){Y.seriesDistribution[Z].push(X);}else{Y.seriesDistribution[X%Y.chartAreaNumber].push(V[X]);}}}if(W>0){for(X=0;X<Y.chartAreaNumber;X++){if(Y.vecPercentageHeightOrWidth[X]<=0){Y.vecPercentageHeightOrWidth[X]=b/W;}}}},CalculateChartAreas:function A(W,a){var c,S,Y,V,Z=this.mChartAreaOptions,U,T,X,b;c=0;if(Z.orientation===B.OR_VERTICAL){S=W.height/20;b=Z.chartAreaNumber;for(V=0;V<b;V++){U=(W.height-S*(Z.chartAreaNumber-1))*Z.vecPercentageHeightOrWidth[V];a.push(new mstrmojo.chart.Rect2D({x:W.x,y:W.y+(W.height-S*(b-1))*c+S*V,width:W.width,height:U}));c+=Z.vecPercentageHeightOrWidth[V];}X=a[Z.chartAreaNumber-1];X.height=W.y+W.height-X.y;}else{Y=W.width/20;b=Z.chartAreaNumber;for(V=0;V<b;V++){T=(W.width-Y*(Z.chartAreaNumber-1))*Z.vecPercentageHeightOrWidth[V]+0.5;a.push(new mstrmojo.chart.Rect2D({x:W.x+(W.width-Y*(b-1))*c+Y*V,y:W.y,widht:T,height:W.height}));c+=Z.vecPercentageHeightOrWidth[V];}X=a[b-1];X.width=W.x+W.width-X.x;}},RectangleUnion:function C(S,U,T){T.x=Math.min(S.x,U.x);T.y=Math.min(S.y,U.y);T.width=Math.max(S.x+S.width,U.x+U.width)-T.x;T.height=Math.max(S.y+S.height,U.y+U.height)-T.y;},RectangleIntersection:function D(S,U,T){if((S.x>(U.x+U.width))||(U.x>(S.x+S.width))||(S.y>(U.y+U.height))||(U.y>(S.y+S.height))){return false;}T.x=Math.max(S.x,U.x);T.y=Math.max(S.y,U.y);T.width=Math.min(S.x+S.width,U.x+U.width)-T.x;T.height=Math.min(S.y+S.height,U.y+U.height)-T.y;return true;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","TripleId","Rect2D","Point2D","RectangleObject","TextObject","NumberObject","GraphCollectionObject","GridDataLabelInfo","GridBasePlot","CategoryAxis","PiePlotRenderer","MarkerObject","ChartConstants");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMatrixElementSizeMode","EnumGraphMatrixMarkerTypeInChart","EnumAnchorPoint");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphObject","EnumShapeType");mstrmojo.requiresClsP("mstrmojo.chart.common","Utility","MapStructure");var W=mstrmojo.chart,T=W.ChartConstants,J=W.enums,o=J.EnumAnchorPoint,C=J.EnumCollectionType,Q=J.EnumGraphMatrixMarkerTypeInChart,n=J.EnumGraphMatrixElementSizeMode,U=J.EnumGraphMatrixPiePlotType,S=mstrmojo.chart.model,O=S.enums,s=O.EnumDSSGraphMarkerShape,r=O.EnumDSSGraphObject,t=O.EnumShapeType,B=W.common,F=B.Utility,V=F.tripleId;var P=new W.Rect2D(),AE=new W.Point2D(),AC=new W.Point2D(),q=new W.ChartAdvFormat(),p=new W.Point2D();var L=0,d=1,b=2;var M=1,N=2,X=3;function K(AH,AG){if(AH.mYIndex===AG.mYIndex){return AH.mXIndex-AG.mXIndex;}return AH.mYIndex-AG.mYIndex;}function y(){var AG=this.mXAxis,AM=this.mYAxis,AK=this.mDatasetPtr;if(this.mPartialRendering){var AI=this.mChartContextPtr,AO={PartialRendering:true,Group:{},Series:{}},AH,AL,AP,AJ,AN=AI.mRenderingWindow;AH=AN.x;AL=AH+AN.width;AP=AN.y;AJ=AP+AN.height;if(AG){AL=AG.getGroupSlotAt(AL)+1;AH=AG.getGroupSlotAt(AH)-1;}if(AM){AJ=AM.getGroupSlotAt(AJ)+1;AP=AM.getGroupSlotAt(AP)-1;}if(this.mDatasetPtr.GetSeriesByColumn()){if(AM){AO.Group.Max=AJ;AO.Group.Min=AP;}if(AG){AO.Series.Max=AL;AO.Series.Min=AH;}}else{if(AM){AO.Series.Max=AJ;AO.Series.Min=AP;}if(AG){AO.Group.Max=AL;AO.Group.Min=AH;}}AK.updateDataWindow(AO);}else{AK.resetDataWindow();}}function z(AN){if(!AN){var AI=this.mChartContextPtr.GetGraphMatrixContext(),AM=AI.mElementsInfo;if(this.mMarkerShape===s.DssGraphMarkerShapeRectangle){var AL=AM.Max.Size,AJ=1;var AH=this.mAutoFitMarkerRect;this.mAdjustMarkerRect=new W.Rect2D({Rect2D:AH});var AG=this.mAdjustMarkerRect;if(AM.Max.Mode===n._MANUAL){AJ=Math.min(AJ,AL);if(AJ<1){AG.width=AH.width*AJ;AG.height=AH.height*AJ;}}}if(this.mMarkerShape===s.DssGraphMarkerShapeGMTick){var AK=new W.Rect2D();AK.width=AI.mConstants.FixedTickerSize;AK.height=AI.GetMaxMarkerSize(Q._TICK_CATEGORY,false,this.mYArity);this.mAdjustMarkerRect=AK;}}return this.mAdjustMarkerRect;}function k(){var AG=this.mSeriesSet.length,AI=this.mDatasetPtr.GetGroupCount(),AH=this.mDatasetPtr;if(this.mIsSeriesByCol){this.mXArity=AG;this.mYArity=AI;}else{this.mXArity=AI;this.mYArity=AG;}if(this.mXArity===0&&!this.mHasXAxis){this.mXArity=1;}if(this.mXArity===0&&!AH.mHasMetrics){this.mXArity=1;}if(this.mYArity===0&&!this.mHasYAxis){this.mYArity=1;}if(this.mYArity===0&&!AH.mHasMetrics){this.mYArity=1;}}function AB(){return this.mDatasetPtr.IsGridPieAngleBreakX();}function h(){var AI=this.mChartContextPtr,AL=AI.GetGraphMatrixContext(),AH=AL.mElementsInfo,AQ=0,AO=this.mMarkerShape,AS=AO===s.DssGraphMarkerShape2DPie||AO===s.DssGraphMarkerShape2DRingPie,AN=1,AG=1,AK=2500,AM=1,AT,AR,AJ;if(AO!==s.DssGraphMarkerShapeRectangle){if(this.mHasXAxis){AR=this.mXAxis.getGroupSize();}else{AR=this.mDataArea.width;}if(this.mHasYAxis){AJ=this.mYAxis.getGroupSize();}else{AJ=this.mDataArea.height;}if(AS){if(AH.Max.Mode===n._AUTOMATIC){AK=250;}AQ=this.mDatasetPtr.GetAngleNumber();var AP=AB.call(this);if(AP){AN=AQ;}else{AG=AQ;}if(AH.Max.Mode===n._AUTOMATIC){AM=this.mDatasetPtr.showDatalabels()?0.5:0.9;if(AM<0){AM=0.1;}AM=Math.min(AM,1);}}if(AH.Max.Mode===n._MANUAL){AM=AH.Max.Size;if(AM<0){AM=0.1;}AM=Math.min(AM,1);}AT=0.5*Math.min(AR/AN,AJ/AG);if(AO!==s.DssGraphMarkerShapeCircle||AT>=4){AT-=1;}AT=Math.max(AT,1);AT*=AM;AT=Math.min(AT,AK);AT=Math.max(AT,1);return Math.floor(AT);}return 1;}function E(){var AL=this.mDatasetPtr,AJ=this.mDataArea,AK=this.mXAxis,AI=this.mYAxis,AH=this.mAutoFitMarkerRect,AM=this.mChartContextPtr,AG=this.mpManager.mPlotOption;this.mIsAutoFitMode=AG.mIsAutoFitMode;this.mMaxDataVal=AG.mMaxDataVal;this.mMinDataVal=AG.mMinDataVal;this.mUniformColorMode=AL.GetSeriesByColumn()?b:d;if(this.mHasXAxis){AH.width=AK.getGroupSize();}else{AH.width=AJ.width;}if(this.mHasYAxis){AH.height=AI.getGroupSize();}else{AH.height=AJ.height;}this.mMarkerShape=AG.mMarkerShape;if(this.mMarkerShape===s.DssGraphMarkerShapeNone){this.mMarkerShape=s.DssGraphMarkerShapeRectangle;}this.mIsSeriesByCol=AL.GetSeriesByColumn();if(this.mHasXAxis){this.mPreXCoord=AK.getGroupStartPos(0);}else{this.mPreXCoord=AJ.x;}if(this.mHasYAxis){this.mPreYCoord=AI.getGroupStartPos(0);}else{this.mPreYCoord=AJ.y;}k.call(this);z.call(this,false);this.mMinMarkerSize=1;this.mMaxMarkerSize=h.call(this);this.mDataGroup=AL.GetDataGroup();}function c(AG,AH){if(this.mHasColorBy===false){return this.mMarkerCollectionSet[0]||null;}return null;}function e(AG,AI,AH){if(!AH){return ;}if(this.mLegendPtr===null||this.mLegendPtr===undefined){return ;}if(this.mChartContextPtr.mIsGraphMatrix){return ;}}function i(AL,AH,AK,AG){var AJ=AL?AG.x:AG.y,AM=0,AI;if(AL){AM=AH?this.mXAxis.getGroupMiddlePos(AK+1):this.mXAxis.getGroupMiddlePos(AK-1);AI=(AM+AJ)/2;}else{AM=AH?this.mYAxis.getGroupMiddlePos(AK+1):this.mYAxis.getGroupMiddlePos(AK-1);AI=(AM+AJ)/2;}var AN=AI-Math.floor(AI);if(AN!==0){AI-=0.5;}if(AI===0){AI=1;}return AI;}function Y(AT,AR){var AV=1,AL=0,AO=t._RECTANGLE,AH=false,AK=this.mDatasetPtr.dataProvider;AE.x=this.mXAxis.getGroupMiddlePos(AT);AE.y=this.mYAxis.getGroupMiddlePos(AR);P.Reset(0,0,0,0);if(this.mMarkerShape===s.DssGraphMarkerShapeRectangle){if(this.mXArity*this.mYArity===1){P=z.call(this,true);}else{var AQ=0,AJ=0;if(!this.resizerLine){this.resizerLine=AK.getResizerLineThickNess();}if(!this.chartInfo){this.chartInfo=AK.getChartRowColCount();}if(AT===0){AQ=this.mDataArea.x+AV+AL;AJ=i.call(this,true,true,AT,AE);}else{if(AT===this.mXArity-1){AQ=i.call(this,true,false,AT,AE);AJ=this.mDataArea.x+this.mDataArea.width;}else{AQ=i.call(this,true,false,AT,AE);AJ=i.call(this,true,true,AT,AE);}}if(AT===this.mXArity-1){if(AK.colIndex!==this.chartInfo.cir-1){AJ-=this.resizerLine.MATRIX_VLINE_THICKNESS;}else{AJ-=parseInt(this.resizerLine.MATRIX_VLINE_THICKNESS/2);}}P.x=AQ;P.width=AJ-AQ;P.width=Math.max(0,P.width);if(AR===0){AQ=this.mDataArea.y+AV;AJ=i.call(this,false,true,AR,AE);}else{if(AR===this.mYArity-1){AQ=i.call(this,false,false,AR,AE);AJ=this.mDataArea.y+this.mDataArea.height;}else{AQ=i.call(this,false,false,AR,AE);AJ=i.call(this,false,true,AR,AE);}}if(AK.rowIndex!==0&&AR===0){AQ+=this.resizerLine.MATRIX_HLINE_THICKNESS;}if(AK.rowIndex===this.chartInfo.cic-1&&AR===this.mYArity-1){AJ-=this.resizerLine.AXIS_X_THICKNESS;}P.y=AQ;P.height=AJ-AQ;P.height=Math.max(0,P.height);if(P.width>AV){P.width-=AV+AL*2;}if(P.height>AV){P.height-=AV+AL;}}}else{AH=true;AO=t._TICKER;var AS=z.call(this,true);AC.x=AC.y=0;if(this.mHasXAxis){AC.x=this.mXAxis.getGroupMiddlePos(AT);}else{AC.x=this.mDataArea.GetCenter().x;}if(this.mHasYAxis){AC.y=this.mYAxis.getGroupMiddlePos(AR);}else{AC.y=this.mDataArea.GetCenter().y;}P.width=AS.width;P.height=AS.height;P.x=AC.x-0.5*P.width;P.y=AC.y-0.5*P.height;}if(this.mMinDataVal===this.mMaxDataVal){return P;}var AN=this.mChartContextPtr.GetGraphMatrixContext(),AM=AN.mElementsInfo.Max;if(this.mIsAutoFitMode){if(AM.Mode===n._AUTOMATIC){return P;}if(AM.Mode===n._MANUAL&&AM.Size===1){return P;}}var AI,AG;if(AM.Mode===n._MANUAL&&AM.Size!==1){var AP=AM.Size;AI=Math.round((1-AP)*0.5*P.width);AG=Math.round((1-AP)*0.5*P.height);P.x+=AI;P.y+=AG;P.width-=2*AI;P.height-=2*AG;}if(this.mIsAutoFitMode){return P;}var AU=0;if(this.mIsSeriesByCol){AU=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AT],AR);}else{AU=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AR],AT);}AI=0.5*P.width;AG=0.5*(P.height-AN.GetScaledSize(AU,P.height,AO)+0.5);if(AH){P.x+=AI-1;P.y+=AG;P.width=AN.mConstants.FixedTickerSize;}else{AI=0.5*(P.width-AN.GetScaledSize(AU,P.width,AO)+0.5);P.x+=AI;P.y+=AG;P.width-=2*AI;}P.height-=2*AG;return P;}function v(AI,AL,AS,AJ,AH,AP){var AN=-1,AM=-1,AG,AQ,AK,AR,AO=new W.Point2D({x:-1,y:-1});if(this.mHasXAxis){AN=this.mXAxis.getSubGroupMiddlePos(AI,AS,AH);}else{AG=this.mDataArea.x;AK=this.mDataArea.width/AH;AN=AG+AK*AS+AK/2;}if(this.mHasYAxis){AM=this.mYAxis.getSubGroupMiddlePos(AL,AJ,AP);}else{AR=this.mDatasetPtr.GetSeriesCount();AG=this.mDataArea.y;AQ=this.mDataArea.height/AR;AK=this.mDataArea.height/AP/AR;AM=AG+AQ*AL+AK*AJ+AK/2;}if(AN>=0&&AM>=0){AO.x=AN;AO.y=AM;}return AO;}function R(AP,AK,AS){var AQ=[AP,AK,AS],AO,AJ,AM,AH,AL,AI=1,AN=1;if(this.mPieCentersPool===null){this.mPieCentersPool=new B.MapStructure();}var AG=this.mPieCentersPool.find(AQ);if(AG!==null&&AG!==undefined){return AG;}AJ=AK;AH=AS;AM=AP;AL=AS;var AR=this.mDatasetPtr.GetPieCountAtOneDataPoint(AP,AK);if(AB.call(this)){AH=AS;AI=AR;}else{AL=AS;AN=AR;}AO=v.call(this,AJ,AM,AH,AL,AI,AN);this.mPieCentersPool.replace(AQ,AO);return AO;}function g(AH,AK){var AJ=this.mDataArea,AI=AH,AG=AK;if(this.mIsSeriesByCol){if(this.mHasXAxis){AI=this.mSeriesSet.length>AH?this.mSeriesSet[AH]:AH;}AG=AK;}else{AI=AH;if(this.mHasYAxis){AG=this.mSeriesSet.length>AK?this.mSeriesSet[AK]:AK;}}if(this.mHasXAxis){p.x=this.mXAxis.getGroupMiddlePos(AI);}else{p.x=AJ.x+AJ.width/2;}if(this.mHasYAxis){p.y=this.mYAxis.getGroupMiddlePos(AG);}else{p.y=AJ.y+AJ.height/2;}return p;}function m(AH,AM){var AG,AL,AJ=t._SQUARE,AI=this.mChartContextPtr.GetGraphMatrixContext(),AK=AI.mMarkerShape;if(this.mIsAutoFitMode){AG=this.mMaxMarkerSize;}else{if(this.mMinDataVal===this.mMaxDataVal){return this.mMaxMarkerSize;}if(AK===s.DssGraphMarkerShapeCircle){AJ=t._CIRCLE;}else{if(AK===s.DssGraphMarkerShape2DPie||AK===s.DssGraphMarkerShape2DRingPie){AJ=t._PIE;}}if(this.mIsSeriesByCol){AL=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AH],AM);}else{AL=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AM],AH);}AG=AI.GetScaledSize(AL,this.mMaxMarkerSize,AJ);}return AG;}function A(AO,AN){var AM=this.mChartContextPtr,AY=r.DssGraphRiser,AV,AS,AL=this.mMarkerShape,AQ=(AL===s.DssGraphMarkerShape2DPie||AL===s.DssGraphMarkerShape2DRingPie),AI=null,AK,AU,AZ,AG,AP=[],AH;AV=(this.mSeriesSet.length>AO)?this.mSeriesSet[AO]:AO;AS=new W.TripleId({ObjectId:AY,SeriesId:AV,GroupId:AN});if(!this.mIsSeriesByCol){AS.mSeriesId=(this.mSeriesSet.length>AN)?this.mSeriesSet[AN]:AN;AS.mGroupId=AO;}if(this.mDatasetPtr&&this.mDatasetPtr.useSliceWindow){if(this.mDatasetPtr.IsInSlicedWindow(AS.mSeriesId,AS.mGroupId)===false){return AP;}}if(AM.checkColorByAndSizeByValue(AS,this.mDatasetPtr,this.mHasColorBy&&!AQ,this.mHasSizeBy)===false){return AP;}var AJ=t._RECTANGLE,Aa=c.call(this,AO,AN);e.call(this,AO,AN,Aa);if(AL===s.DssGraphMarkerShapeRectangle||AL===s.DssGraphMarkerShapeGMTick){AH=Y.call(this,AO,AN);if(AL===s.DssGraphMarkerShapeGMTick){AJ=t._TICKER;}if(AH.width<=0){AH.width=1;}if(AH.height<=0){AH.height=1;}if(AL===s.DssGraphMarkerShapeRectangle){AI=new W.RectangleObject({TripleId:AS,GraphObjectManager:this,Area:AH,GraphCollectionObject:Aa,IsOnlyForToolTip:false,Shape:AJ});}else{var AT=AM.transformRectToTicker(AH,false);if(AT.length>=2){AI=new W.StraightLineObject({TripleId:AS,GraphObjectManager:this,StartPoint:AT[0],EndPoint:AT[1],GraphCollectionObject:null,Shape:AJ});}else{return AP;}}}else{if(AQ){var AX=0;if(AL===s.DssGraphMarkerShape2DRingPie){AX=1;}if(this.mPieRenderer===null||this.mPieRenderer===undefined){this.mPieRenderer=new W.PiePlotRenderer({GraphObjectManager:this,Dataset:this.mDatasetPtr,ChartContext:AM,Layout:0,PlotType:U.GMPPT_GRID,MaxRadius:this.mMaxMarkerSize,ShownDataLabels:this.shownDataLabels});}AK=this.mDatasetPtr.GetPieCountAtOneDataPoint(AS.mSeriesId,AS.mGroupId);for(AU=0;AU<AK;++AU){AZ=R.call(this,AS.mSeriesId,AS.mGroupId,AU);AG=this.mPieRenderer.drawSinglePie(AS.mSeriesId,AS.mGroupId,AU,AZ,AK);AP=AP.concat(AG);}}else{var AR=g.call(this,AO,AN),AW=m.call(this,AO,AN);if(AW<=0){return AP;}if(AL===s.DssGraphMarkerShapeSquare){AH=this.mChartContextPtr.transformToRect(AR,AW,true,AH);AI=new W.RectangleObject({TripleId:AS,GraphObjectManager:this,GraphCollectionObject:null,Area:AH,Shape:AJ});}else{AJ=t._CIRCLE;AI=new W.MarkerObject({TripleId:AS,MarkerPosition:AR,MarkerShape:AL,IsIsometric:true,MarkerSize:AW,GraphObjectManager:this,GraphCollectionObject:Aa,Shape:AJ});}}}if(AP.length===0&&AI){AP.push(AI);}return AP;}function l(AI,AM,AL,AG,AK){var AJ=new W.TripleId(r.DssGraphDataText,AL,AG);q.restore();this.mDatasetPtr.getSizeByDataFormat(q,AL,AG);var AH=new W.NumberObject({TripleId:AJ,GraphObjectManager:this,Number:AI,NumberFormat:q,GraphCollectionObject:AK,Locale:0,clientDrag:false,DataSet:null});if(AH){AM=AH.mText;}return AM;}function D(AM,AL){var AJ="",AO=(this.mSeriesSet.length>AM)?this.mSeriesSet[AM]:AM,AI=AL,AK=this.mChartContextPtr.GetGraphMatrixContext(),AH=this.mDatasetPtr,AN=AH.dataLabelStyle;if(!this.mIsSeriesByCol){AO=(this.mSeriesSet.length>AL)?this.mSeriesSet[AL]:AL;AI=AM;}if((AN===N)&&AK.mHasSizeBy){var AG;if(this.mIsSeriesByCol){AG=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AM],AL);}else{AG=this.mDatasetPtr.GetSizeByData(this.mSeriesSet[AL],AM);}if(!!AG===false){return null;}AJ=l.call(this,AG,AJ,AO,AI,null);}var AP=new W.TextObject({TripleId:new W.TripleId({ObjectId:r.DssGraphDataText,SeriesId:AO,GroupId:AI}),GraphObjectManager:this,OnMarker:true});AP.SetText(AJ);return AP;}function Z(AH,AK){if(this.mMarkerShape===s.DssGraphMarkerShapeRectangle||this.mMarkerShape===s.DssGraphMarkerShapeGMTick){return new W.Rect2D({Rect2D:Y.call(this,AH,AK)});}var AG=g.call(this,AH,AK),AI=m.call(this,AH,AK),AJ=Math.floor(AI+0.5);return new W.Rect2D({x:AG.x-AJ,y:AG.y-AJ,width:AJ*2,height:AJ*2});}function j(){var AJ,AG,AL=this.mXArity,AI=this.mYArity,AM;for(AJ=0;AJ<AL;++AJ){for(AG=0;AG<AI;++AG){var AN=(this.mSeriesSet.length>AJ)?this.mSeriesSet[AJ]:AJ;var AH=AG;if(!this.mIsSeriesByCol){AN=(this.mSeriesSet.length>AG)?this.mSeriesSet[AG]:AG;AH=AJ;}if(this.mDatasetPtr.showSeriesDatalabel(AN)===false){continue;}var AK=new W.GridDataLabelInfo();AK.mIsValid=true;AK.mGroupId=AH;AK.mSeriesId=AN;AK.mXIndex=AJ;AK.mYIndex=AG;AK.mHostMarkerBound=Z.call(this,AJ,AG);AK.mLabelPtr=D.call(this,AJ,AG);if(AK.mLabelPtr===null||AK.mLabelPtr===undefined){AK.mIsValid=false;continue;}else{}this.mDataLabels.push(AK);}}}function AA(){var AI,AG=286,AN=this.mChartContextPtr,AK=AN.GetGraphMatrixContext(),AH,AJ,AL=this.mMarkerCollectionSet;AL.splice(0,AL.length);var AM;if(this.mHasColorBy){return ;}if(AN.mIsGraphMatrix){AJ=AK.markerToShape(AK.mMarkerShape);}if(AJ!==t._PIE){AI=V.create(AG,0,0);AH=new W.GraphCollectionObject({TripleId:AI,GraphObjectManager:this,CollectionType:C.CT_GENERAL_SHAPE,Shape:AJ});AL.push(AH);}else{}}function f(AH){var AI=this.mDataLabels,AK=AI[AH].mHostMarkerBound,AJ={x:AK.x+0.5*AK.width,y:AK.y+0.5*AK.height},AL=AJ.x,AG=AJ.y;AL+=AK.width%2;AG+=AK.height%2;AI[AH].mLabelPtr.MoveTo(AL,AG,o.CENTER);}function I(AG,AH){return AH*this.mXArity+AG;}function AD(AG,AH){return new W.Rect2D({x:AG.x-AH,y:AG.y-AH,width:AG.width+2*AH,height:AG.height+2*AH});}function G(AH,AI){var AG=new W.Rect2D({x:0,y:0,width:this.mChartContextPtr.mGraphWidth,height:this.mChartContextPtr.mGraphHeight});if(AH.x<AG.x+AI||AH.x+AH.width+AI>=AG.x+AG.width){return false;}return !(AH.y<AG.y+AI||AH.y+AH.height+AI>=AG.y+AG.height);}function H(){var AP,AN,AG=this.mDataLabels,AW=AG.length,AJ=this.mChartContextPtr,AV=AJ.GetGraphMatrixContext(),AK=AV.getPadding(T.kDataLabel),AU,AQ,AO,AS,AX={};for(AU=0;AU<AW;++AU){AS=I.call(this,AG[AU].mXIndex,AG[AU].mYIndex);AX[AS]=AU;}for(AU=0;AU<AW;++AU){var AH,AT,AR,AL,AI=false;f.call(this,AU);if(!AJ.allowOverlapBetweenDatalabels()){AH=this.mDataLabels[AU].mLabelPtr.GetBoundingRectNoRotation(true);AR=AD.call(this,AH,AK);AT=G.call(this,AH,AK);if(!AT){continue;}AP=AG[AU].mXIndex;AN=AG[AU].mYIndex;for(AQ=AP-1;AQ<=AP+1;AQ++){if(AQ<0||AQ>=this.mXArity){continue;}for(AO=AN-1;AO<=AN+1;AO++){if(AO<0||AO>=this.mYArity){continue;}if(AQ===AP&&AO===AN){continue;}AS=I.call(this,AQ,AO);AL=AX[AS];if(AL>=AG.length){continue;}if(!!AG[AL]===false){continue;}if(AG[AL].mIsValid===false||!!AG[AL].mLabelPtr===false){continue;}AI=AR.HasIntersection(AG[AL].mHostMarkerBound);if(AI){break;}if(AG[AL].mIsDisPlayed){var AM=AG[AL].mLabelPtr.GetBoundingRectNoRotation(true);AI=AI||AR.HasIntersection(AM);}if(AI){break;}}if(AI){break;}}}if(!AI){AG[AU].mIsDisPlayed=true;AG[AU].mLabelPtr.mIsShown=true;this.AddToMapAndList(this.mDataLabels[AU].mLabelPtr);}else{AG[AU].mLabelPtr.mIsShown=false;}}}function a(){var AL,AG=this.mChartContextPtr;if(AG.mIsGraphMatrix){var AM=AG.GetGraphMatrixContext();if(this.mDatasetPtr.showDatalabels()){var AH=this.dataLabelManager;if(AH===null||AH===undefined){AL=new W.Rect2D({x:0,y:0,width:AG.mGraphWidth,height:AG.mGraphHeight});AH=this.dataLabelManager=new W.DataLabelManager({DataArea:AL});AH.ChartContext=AG;}if(AM.mMarkerShape===s.DssGraphMarkerShape2DPie||AM.mMarkerShape===s.DssGraphMarkerShape2DRingPie){var AK=[];this.mPieRenderer.enableDataLabel(AH,AK);var AI,AN=this.mPieRenderer.dataLabels,AJ=AN.length;for(AI=0;AI<AJ;++AI){var AO=AN[AI].Label;if(AO.mIsShown){this.AddToMapAndList(AO);}}}else{j.call(this);this.mDataLabels.sort(K);H.call(this);}}}}mstrmojo.chart.GridChartPlot=mstrmojo.declare(mstrmojo.chart.GridBasePlot,null,{scriptClass:"mstrmojo.chart.GridChartPlot",mXArity:0,mYArity:0,mDataGroup:1,mIsSeriesByCol:false,mIsAutoFitMode:false,mDataLabelTextMode:0,mMaxDataVal:0,mMinDataVal:0,mMaxMarkerSize:0,mMinMarkerSize:0,mPreXCoord:0,mPreYCoord:0,mUniformColorMode:0,mSeriesSet:null,mMarkerCollectionSet:null,mAutoFitMarkerRect:null,mAdjustMarkerRect:null,mDataLabels:null,mPieRenderer:null,mPieCentersPool:null,init:function x(AG){this._super(AG);this.mSeriesSet=[];this.mMarkerCollectionSet=[];this.mDataLabels=[];this.mAutoFitMarkerRect=new W.Rect2D();this.mAdjustMarkerRect=new W.Rect2D();},AssignSeries:function u(AG){this.mSeriesSet=AG.slice();},GetMaxElementRadius:function AF(){if(this.mMarkerShape===s.DssGraphMarkerShapeRectangle){return Math.min(this.mAdjustMarkerRect.width,this.mAdjustMarkerRect.height);}return this.mMaxMarkerSize;},GenerateMapAndList:function w(){var AJ=this.mDatasetPtr,AG=this.mDataArea,AL,AK,AH,AN,AO;if(AJ===null||AJ===undefined){return ;}if((AJ.mHasMetrics)&&(this.mSeriesSet.length===0)){return ;}if(AG.width*AG.height===0){return ;}y.call(this);E.call(this);AA.call(this);AN=this.mXArity;AO=this.mYArity;for(AL=0;AL<AN;++AL){for(AK=0;AK<AO;++AK){var AI=A.call(this,AL,AK),AM=AI.length;for(AH=0;AH<AM;++AH){this.AddToMapAndList(AI[AH]);}}}if(this.mChartContextPtr.mImageUsage===0){a.call(this);}AJ.resetDataWindow();}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","Plot","CategoryAxis","PlotManager","GridChartPlot");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumOrientation","EnumDSSGraphObjectManager");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject","EnumDSSGraphProperty","EnumDSSExtraGraphProperty");var O=mstrmojo.chart,K=O.enums,A=K.EnumOrientation,E=K.EnumDSSGraphObjectManager,H=O.model,P=H.enums,D=P.EnumDSSGraphProperty;var C=new O.Rect2D(),B=new O.Rect2D();mstrmojo.chart.PlotOption=mstrmojo.provide("mstrmojo.chart.PlotOption",{});function R(S){var T,U;if(this.mChartContextPtr.mIsGraphMatrix){U=O.PlotId0;}else{U=new O.TripleId();U.mObjectId=E.DssPlot;U.mSeriesId=S;}T=new O.GridChartPlot({TripleId:U,GraphObjectManager:this,Area:O.gEmptyRect});T.SetDataset(this.mDatasetPtr);return T;}function Q(U,S){var T=this.mChartAreaOptions.chartAreaNumber,W=this.mIsReuseYAxis?this.mYAxisSet:this.mXAxisSet,V;W[0].SetDeviceDataArea(U);for(V=0;V<T;++V){this.mPlots[V].AssignDataArea(S[V],!this.mIsReuseYAxis);}}function N(Z,V){if(V){var X=new O.Rect2D({Rect2D:Z}),a=this.mIsReuseYAxis?this.mYAxisSet:this.mXAxisSet;a[0].AdjustTitleArea(X);a[0].AdjustDataArea(X,0,0,true);return X;}var Y=!(this.mIsReuseYAxis)?this.mYAxisSet:this.mXAxisSet,b=Y.length,S=[],W,U;this.CalculateChartAreas(Z,S);for(U=0;U<b;++U){Y[U].AdjustTitleArea(S[U]);Y[U].AdjustDataArea(S[U],0,0,true);}W=S;var T=W.length;C.Reset(0,0,0,0);B.ResetRect(W[0]);for(U=1;U<T;++U){if(!this.RectangleIntersection(B,W[U],C)){B.Reset(0,0,0,0);break;}B.ResetRect(C);}return B;}function F(S){var T=new O.CategoryAxisInfo(),U,X,V,W=this.mDatasetPtr.GetSeriesByColumn();if(this.mIsReuseYAxis){T.ToY(!W);}else{T.ToX(W);}U=this.mIsReuseYAxis?this.mYAxisSet:this.mXAxisSet;if(U.length===0){X=new O.CategoryAxis({TripleId:T.mId,GraphObjectManager:this,AxisLabelsLocation:T.mAxisLabelsLocation,AxisDirection:T.mAxisDirection});X.SetDataset(this.mDatasetPtr);U.push(X);}this.mPlots[S].AssignAxis(U[0],this.mIsReuseYAxis);if(this.mIsReuseYAxis){T.ToX(W);}else{T.ToY(!W);}T.mId.mSeriesId=S;V=(!this.mIsReuseYAxis)?this.mYAxisSet:this.mXAxisSet;X=new O.CategoryAxis({TripleId:T.mId,GraphObjectManager:this,AxisLabelsLocation:T.mAxisLabelsLocation,AxisDirection:T.mAxisDirection});X.SetDataset(this.mDatasetPtr);V.push(X);this.mPlots[S].AssignAxis(V[S],!this.mIsReuseYAxis);}function M(){var S=this.mChartContextPtr.GetGraphMatrixContext();if(S){this.mPlotOption.mIsAutoFitMode=!S.mHasSizeBy;this.mPlotOption.mMaxDataVal=S.mMaxSizeVal;this.mPlotOption.mMinDataVal=S.mMinSizeVal;this.mPlotOption.mMarkerShape=S.mMarkerShape;}}mstrmojo.chart.GridChartPlotManager=mstrmojo.declare(mstrmojo.chart.PlotManager,null,{scriptClass:"mstrmojo.chart.GridChartPlotManager",mPlots:null,mXAxisSet:null,mYAxisSet:null,mIsReuseYAxis:false,mPlotOption:{},init:function L(S){this._super(S);this.mPlots=[];this.mXAxisSet=[];this.mYAxisSet=[];this.mPlotOption={mIsAutoFitMode:false,mMaxDataVal:100000,mMinDataVal:0,mMarkerShape:4};this.mIsReuseYAxis=false;},Draw:function J(){this._super();var U=this.mYAxisSet.length,V=this.mXAxisSet.length,T=this.mPlots.length,S;for(S=0;S<U;++S){this.mYAxisSet[S].Draw();}for(S=0;S<V;++S){this.mXAxisSet[S].Draw();}for(S=0;S<T;++S){this.mPlots[S].Draw();}},LoadProperties:function G(){this._super();this.mIsReuseYAxis=(this.mChartAreaOptions.mOrientation===A.OR_HORIZONTAL);M.call(this);},GenerateMapAndList:function I(){var S=this.mPlotArea,d=this.mChartAreaOptions,T=this.mGraphObjectManagerList,U=this.mChartContextPtr,Y,a;if(S.width*S.height===0){return ;}if(this.mDatasetPtr===null||this.mDatasetPtr===undefined){return ;}this.LoadProperties();var e=d.chartAreaNumber;for(Y=0;Y<e;++Y){var W=R.call(this,Y);W.AssignSeries(d.seriesDistribution[Y]);W.mLegendPtr=this.mLegendPtr;this.mPlots.push(W);F.call(this,Y);}a=this.mPlots.length;for(Y=0;Y<a;++Y){T.push(this.mPlots[Y]);}a=this.mXAxisSet.length;for(Y=0;Y<a;++Y){T.push(this.mXAxisSet[Y]);}a=this.mYAxisSet.length;for(Y=0;Y<a;++Y){T.push(this.mYAxisSet[Y]);}var c=N.call(this,S,true),V=N.call(this,c,false);if(V.width<0){V.width=0;}if(V.height<0){V.height=0;}var b=S.y+Math.max(c.y-S.y,V.y-c.y),f=S.y+S.height-Math.max(S.y+S.height-(c.y+c.height),c.y+c.height-(V.y+V.height))-b;V.y=b;V.height=f;if(U.mManualLayoutMode&&!this.mRecalculateFrame){V=S;}else{}var X=[];this.CalculateChartAreas(V,X);if(U.isUADataAreaOutput()){var Z=U.getUniformAxisContext();X[0].x=Z.mDataAreaLeftMargin;X[0].y=Z.mDataAreaTopMargin;X[0].width=U.mGraphWidth-X[0].x-Z.mDataAreaRightMargin;X[0].height=U.mGraphHeight-X[0].y-Z.mDataAreaBottomMargin;this.mXAxisSet[0].TrimAxisPadding(X[0],false);this.mYAxisSet[0].TrimAxisPadding(X[0],false);V=X[0];}Q.call(this,V,X);a=this.mPlots.length;for(Y=0;Y<a;++Y){this.mPlots[Y].GenerateMapAndList();}a=this.mXAxisSet.length;for(Y=0;Y<a;++Y){this.mXAxisSet[Y].GenerateMapAndList();}a=this.mYAxisSet.length;for(Y=0;Y<a;++Y){this.mYAxisSet[Y].GenerateMapAndList();}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumValueAxis","EnumDSSGraphObjectManager");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject");mstrmojo.requiresClsP("mstrmojo.chart","PlotManager","ValuePlot","GraphObjectManager");var d=mstrmojo.chart,Z=d.enums,B=Z.EnumGraphMajorType,D=Z.EnumAxisDirection,A=Z.EnumOrientation,c=Z.EnumValueAxis,f=Z.EnumDSSGraphObjectManager,Y=d.gNullTripleId,T=mstrmojo.chart.model,h=T.enums,J=h.EnumDSSGraphType,K=h.EnumDSSGraphProperty,M=h.EnumDSSGraphObject;var G=new d.Rect2D(),I=new d.Rect2D();function F(i){var j=this.mChartContextPtr;return j.mirrorPrimaryInBubbleScatter(i);}function P(j,i,k){var l=this.mChartContextPtr;if(l.mIsGraphMatrix===false){return j;}if(j==="X1"||j==="Y1"){if(F.call(this,k)){j=j[0]+"2";i=(j==="X2")?4:2;}}return{Key:j,Index:i};}function N(){var i=this.mChartContextPtr.GetGraphType();return((i===J.DssGraphTypeDualAxis_X_Y_Scatter)||(i===J.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels)||(i===J.DssGraphTypeBubble_DualAxis)||(i===J.DssGraphTypeBubble_DualAxis_With_Labels));}function b(){return(this.mChartAreaOptions.orientation===A.OR_VERTICAL);}function O(n,l){var j=this.Y1Axis[l],o,m=new d.Rect2D({Rect2D:n}),k,p,i;j.TrimDeviceDataArea(m);j.SetDeviceDataArea(m);k=new d.Rect2D({Rect2D:m});j.AdjustDeviceDataArea(k,true);p=new d.Rect2D({Rect2D:k});if(N.call(this)){o=this.Y2Axis[l];o.TrimDeviceDataArea(m);o.SetDeviceDataArea(m);i=new d.Rect2D({Rect2D:m});o.AdjustDeviceDataArea(i,true);this.RectangleUnion(k,i,p);}j.UpdateTitleAndLabelArea(p);if(N.call(this)){o.UpdateTitleAndLabelArea(p);}}function C(j,k){var i=0,l=[this.XAxis,this.Y1Axis,this.Y2Axis];if(((k===1||k===2)&&b.call(this))||(k===0&&!b.call(this))){i=j;}return l[k][i];}function E(s,w){var m=0,r=0,n=Number.MAX_VALUE,v=-n,l,u,q=0,t=[],p=0,z,k,j,y=false;if(this.mChartContextPtr.mIsUniformAxisMode){var o=this.mChartContextPtr.getUniformAxisContext(),x=o.ValueAxis;switch(w){case 0:n=x.X1.Min;v=x.X1.Max;l=x.X1.Metrics.concat();break;case 1:n=x.Y1.Min;v=x.Y1.Max;l=x.Y1.Metrics.concat();break;case 2:n=x.Y2.Min;v=x.Y2.Max;l=x.Y2.Metrics.concat();break;case 3:n=x.Z.Min;v=x.Z.Max;l=[];break;case 4:n=x.X2.Min;v=x.X2.Max;l=x.X2.Metrics.concat();break;default:n=x.Y1.Min;v=x.Y1.Max;l=x.Y1.Metrics.concat();break;}return{Min:n,Max:v,Metrics:l};}if(w===1||w===2){r=1;}else{if(w===3){r=2;}}u=this.mDatasetPtr.GetGroupCount();if(s===-3){q=this.mDatasetPtr.GetSeriesCount();for(m=0;m<q;++m){t.push(m);}}else{t=this.mChartAreaOptions.seriesDistribution[s];}z=t.length;for(m=0;m<u;++m){for(p=0;p<z;++p){if((w===0||w===3)||((w===1||w===2)&&((w-1)===this.VecSeriesVAIndex[t[p]]))){k=this.mDatasetPtr.GetData(t[p],m,r);}if(k!==null){j=k;if(!y){y=true;}if(n>j){n=j;}if(v<j){v=j;}}}}if(n>v){n=0;v=0;}if(y){return{Min:n,Max:v};}}function L(q){var k=[],j,m,p=this.Y1Axis.length,l,o,n;j=N.call(this);for(m=0;m<p;++m){o=new d.Rect2D({Rect2D:q});n=new d.Rect2D({Rect2D:q});if(j){this.Y2Axis[m].ReserveTitleAndLabels(n,this.mBottomMargin,this.mTopMargin);o=n;o.y=q.y;o.height=q.height;}this.Y1Axis[m].ReserveTitleAndLabels(o,this.mBottomMargin,this.mTopMargin);if(j){n=o;n.y=q.y;n.height=q.height;}this.Y1Axis[m].AdjustDeviceDataArea(o,false);k.push(o);if(j){this.Y2Axis[m].AdjustDeviceDataArea(n,false);}k.push(n);}l=k.length;I.ResetRect(k[0]);G.Reset(0,0,0,0);var r;for(m=1;m<l;++m){if(!this.RectangleIntersection(I,k[m],G)){I.Reset(0,0,0,0);break;}I=G;}return I;}function X(m){var o=[],l,j=this.XAxis.length,k,p,n;for(l=0;l<j;++l){n=this.XAxis[l];p=new d.Rect2D({Rect2D:m});n.ReserveTitleAndLabels(p,this.mLeftMargin,this.mRightMargin);n.AdjustDeviceDataArea(p,false);o.push(p);}I.ResetRect(o[0]);G.Reset(0,0,0,0);k=o.length;for(l=1;l<k;++l){if(!this.RectangleIntersection(I,o[l],G)){I.Reset(0,0,0,0);break;}I=G;}return I;}function S(o){var m,l,p=this.Y1Axis.length,k=this.XAxis.length,n=this.mChartAreaOptions.chartAreaNumber;for(m=0;m<p;++m){if(b.call(this)){this.Y1Axis[m].GenerateGridLines(o[m],m,this.mGraphObjectList);if(N.call(this)){this.Y2Axis[m].GenerateGridLines(o[m],m,this.mGraphObjectList);}}else{for(l=0;l<n;++l){this.Y1Axis[m].GenerateGridLines(o[l],l,this.mGraphObjectList);if(N.call(this)){this.Y2Axis[m].GenerateGridLines(o[l],l,this.mGraphObjectList);}}}}for(m=0;m<k;++m){if(b.call(this)){for(l=0;l<n;++l){this.XAxis[m].GenerateGridLines(o[l],l,this.mGraphObjectList);}}else{this.XAxis[m].GenerateGridLines(o[m],m,this.mGraphObjectList);}}}function e(i){}function U(){var l,m=this.Y1Axis.length,j=this.Y2Axis.length,k=this.XAxis.length;for(l=0;l<m;++l){this.Y1Axis[l].generateAxisLine(this.mGraphObjectList);}if(N.call(this)){for(l=0;l<j;++l){this.Y2Axis[l].generateAxisLine(this.mGraphObjectList);}}for(l=0;l<k;++l){this.XAxis[l].generateAxisLine(this.mGraphObjectList);}}function Q(){var k=this.mChartContextPtr.GetGraphMajorType(),i=0,j;if(k===B.GMT_SCATTER||k===B.GMT_BUBBLE){i=this.mDatasetPtr.GetSeriesCount();j=this.mChartContextPtr.GetGraphType();if(j===J.DssGraphTypeX_Y_Scatter||j===J.DssGraphTypeX_Y_Scatter_with_Labels||j===J.DssGraphTypeBubble||j===J.DssGraphTypeBubble_With_Labels){return i>=1;}if(j===J.DssGraphTypeDualAxis_X_Y_Scatter||j===J.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels||j===J.DssGraphTypeBubble_DualAxis||j===J.DssGraphTypeBubble_DualAxis_With_Labels){return i>=2;}}return false;}function H(k,p,q,i){var n=this.mChartContextPtr.getAxisTripleId(k),l=new d.ValueAxis({TripleId:n,GraphObjectManager:this,Min:p.Min,Max:p.Max,LargerGridInterval:false,PrimaryMetricIndex:p.Metrics,IsPercent:false,AxisDirection:q,IsShown:i,Key:k});var j=this.mChartContextPtr;if(j.mIsGraphMatrix&&l.mIsUniformAxis===false){var m=j.getUniformAxisInformation(n.mObjectId),o=m.CondenseEnforced;l.checkCondense(!!o);}return l;}function g(k,j,n,p,l,i){var o=E.call(this,j,n);if(o){var m=H.call(this,k,o,p,l);i.push(m);this.mGraphObjectManagerList.push(m);}}mstrmojo.chart.ValuePlotManager=mstrmojo.declare(mstrmojo.chart.PlotManager,null,{scriptClass:"mstrmojo.chart.ValuePlotManager",ValuePlot:[],XAxis:[],Y1Axis:[],Y2Axis:[],ZAxis:[],VecSeriesVAIndex:[],init:function a(i){this._super(i);this.ValuePlot=[];this.XAxis=[];this.Y1Axis=[];this.Y2Axis=[];this.ZAxis=[];this.VecSeriesVAIndex=[];},Draw:function W(){var n,l=0,o=[this.XAxis,this.Y2Axis,this.Y1Axis],m,k=this.ValuePlot;d.GraphObjectManager.prototype.Draw.apply(this,[]);for(n=0;n<=2;++n){m=o[n];for(l=0;l<m.length;++l){m[l].Draw();}}for(n=0;n<k.length;++n){k[n].Draw();}},GenerateMapAndList:function V(){var n=this.mChartContextPtr,o=this.mPlotArea,AD=this.mGraphObjectManagerList,p=n.isUADataAreaOutput(),w,y,t,u,k,AA,AB,AC=0,l,q,j,AF,AE,x,m,s=[],v,r;if(o.width<=0||o.height<=0){return ;}this.LoadProperties();if(!Q.call(this)){return ;}if(b.call(this)){y=P.call(this,"X1",0,true);g.call(this,y.Key,-3,y.Index,D.AD_X,!p,this.XAxis);for(AC=0;AC<this.mChartAreaOptions.chartAreaNumber;++AC){y=P.call(this,"Y1",1,false);g.call(this,y.Key,AC,y.Index,D.AD_Y,!p,this.Y1Axis);if(N.call(this)){y=P.call(this,"Y2",2,false);g.call(this,y.Key,AC,y.Index,D.AD_Y,!p,this.Y2Axis);}}}else{y=P.call(this,"Y1",1,false);g.call(this,y.Key,-3,y.Index,D.AD_Y,!p,this.Y1Axis);if(N.call(this)){y=P.call(this,"Y2",2,false);g.call(this,y.Key,-3,y.Index,D.AD_Y,!p,this.Y2Axis);}for(AC=0;AC<this.mChartAreaOptions.chartAreaNumber;++AC){y=P.call(this,"X1",0,true);g.call(this,y.Key,AC,y.Index,D.AD_X,!p,this.XAxis);}}if(n.GetGraphMajorType()===B.GMT_BUBBLE){if(n.isUADataAreaOutput()){l=n.getUniformAxisContext();w={Metrics:[]};w.Min=l.ValueAxis.Z.Min;w.Max=l.ValueAxis.Z.Max;}else{w=E.call(this,-3,3);}if(w){AA=H.call(this,"Z",w,D.AD_Z,false);this.ZAxis.push(AA);AD.push(AA);}}j=X.call(this,o);this.mLeftMargin+=j.x-o.x;this.mRightMargin+=o.x+o.width-(j.x+j.width);this.mTopMargin+=j.y-o.y;this.mBottomMargin+=o.y+o.height-(j.y+j.height);j.width=Math.max(0,j.width);j.height=Math.max(0,j.height);q=L.call(this,j);q.width=Math.max(0,q.width);q.height=Math.max(0,q.height);AE=o.y+Math.max(j.y-o.y,q.y-j.y);x=o.y+o.height-Math.max(o.y+o.height-(j.y+j.height),j.y+j.height-(q.y+q.height))-AE;q.y=AE;q.height=x;AF=o.x+Math.max(j.x-o.x,q.x-j.x);m=o.x+o.width-Math.max(o.x+o.width-(j.x+j.width),j.x+j.width-(q.x+q.width))-AF;q.x=AF;q.width=m;if(n.mManualLayoutMode&&!this.mRecalculateFrame){q=o;}else{}this.CalculateChartAreas(q,s);if(n.isUADataAreaOutput()){var z=n.getUniformAxisContext();s[0].x=z.mDataAreaLeftMargin;s[0].y=z.mDataAreaTopMargin;s[0].width=n.mGraphWidth-s[0].x-z.mDataAreaRightMargin;s[0].height=n.mGraphHeight-s[0].y-z.mDataAreaBottomMargin;q=s[0];}if(b.call(this)){j=new d.Rect2D({Rect2D:q});t=this.XAxis[0];t.TrimDeviceDataArea(j);t.SetDeviceDataArea(j);t.AdjustDeviceDataArea(j,true);t.UpdateTitleAndLabelArea(j);for(AC=0;AC<this.mChartAreaOptions.chartAreaNumber;++AC){O.call(this,s[AC],AC);}}else{O.call(this,q,0);for(AC=0;AC<this.mChartAreaOptions.chartAreaNumber;++AC){t=this.XAxis[AC];j=new d.Rect2D({Rect2D:s[AC]});t.TrimDeviceDataArea(j);t.SetDeviceDataArea(j);t.AdjustDeviceDataArea(j,true);t.UpdateTitleAndLabelArea(j);}}if(n.mManualLayoutMode&&!this.mRecalculateFrame){q=o;}for(AC=0;AC<this.mChartAreaOptions.chartAreaNumber;++AC){if(!n.mIsGraphMatrix){AB=new d.TripleId({ObjectId:M.DssGraphFrame,SeriesId:AC});v=new d.RectangleObject({TripleId:AB,GraphObjectManager:this,Area:s[AC]});this.AddToMapAndList(v);}e.call(this,s);S.call(this,s);U.call(this);t=C.call(this,AC,0);u=C.call(this,AC,1);if(N.call(this)){k=C.call(this,AC,2);}if(n.mIsGraphMatrix){AB=d.PlotId0;}else{AB=new d.TripleId({ObjectId:f.DssPlot,SeriesId:AC});}r=new d.ValuePlot({TripleId:AB,GraphObjectManager:this,Area:s[AC]});this.ValuePlot.push(r);AD.push(r);r.SetDataset(this.mDatasetPtr);r.mLegendPtr=this.mLegendPtr;r.AssignValueAxis(t,0);r.AssignValueAxis(u,1);if(N.call(this)){r.AssignValueAxis(k,2);}if(n.GetGraphMajorType()===B.GMT_BUBBLE){r.AssignValueAxis(this.ZAxis[0],3);}r.AssignSeriesInfo(this.mChartAreaOptions.seriesDistribution[AC],this.VecSeriesVAIndex);r.GenerateMapAndList();}if(n.isUADataAreaOutput()){l=n.getUniformAxisContext();s[0].x=l.mDataAreaLeftMargin;s[0].y=l.mDataAreaTopMargin;s[0].width=n.mGraphWidth-s[0].x-l.mDataAreaRightMargin;s[0].height=n.mGraphHeight-s[0].y-l.mDataAreaBottomMargin;q.ResetRect(s[0]);}},LoadProperties:function R(){var p=this.mChartContextPtr,l=this.VecSeriesVAIndex,k,j,m,o,n;this._super();k=this.mDatasetPtr.GetSeriesCount();l.splice(0,l.length);for(j=0;j<k;++j){o=new d.TripleId({ObjectId:M.DssGraphRiser,SeriesId:j});l[j]=c.VA_Y1;if(N.call(this)){n=p.GetProperty(K.DssGraph2DSplitYAutomatic,Y);if(n){m=p.GetProperty(K.DssGraph2DSDSplitY,o);if(m){l[j]=(m===false)?c.VA_Y1:c.VA_Y2;}}else{l[j]=(j%2===0)?c.VA_Y1:c.VA_Y2;}}}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","CategoryPlot","MarkerObject","SeriesRenderer","Plot","ChartConstants");mstrmojo.requiresClsP("mstrmojo.chart.common","MapStructure","Utility");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumMajorGraphType","EnumLayout","EnumOrientation","EnumValueAxis","EnumFillType","EnumGraphMatrixElementSizeMode","EnumGraphMatrixDataLabelPosition","EnumFontRotation","EnumAnchorPoint","EnumImageUsage","EnumGenericDirection");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphProperty","EnumDSSGraphObject");var AD=mstrmojo.chart,AA=AD.ChartConstants,I=AD.enums,h=I.EnumCollectionType,AH=I.EnumLayout,m=I.EnumOrientation,j=I.EnumValueAxis,AJ=I.EnumAnchorPoint,B=I.EnumFillType,AV=I.EnumGenericDirection,i=I.EnumImageUsage,r=I.EnumGraphMatrixElementSizeMode,W=I.EnumGraphMatrixDataLabelPosition,D=I.EnumFontRotation,z=mstrmojo.chart.model,l=z.enums,AQ=l.EnumDSSGraphMarkerShape,N=l.EnumShapeType,AO=l.EnumDSSGraphObject,A=AD.common.Utility;var AL=0,p=1,v=2,R=3;var x=new AD.Rect2D(),O=new AD.Rect2D();function L(){var AZ=this.mSeriesInfo,AX=0,Aa=0,AY,AW=AZ.length;for(AY=0;AY<AW;++AY){if(AZ[AY].mValueAxis===j.VA_Y1){AX=1;}if(AZ[AY].mValueAxis===j.VA_Y2){Aa=1;}}return AX+Aa;}function e(AX){var AW=0;switch(this.mBarRenderType){case p:AW=AX.seriesInfoID;break;case v:if(L.call(this)>1&&!this.mpABLPlotContext.mABLOptions.mSplitDualAxes){AW=this.mSeriesInfo[AX.seriesInfoID].mValueAxis;}break;}return AW;}function S(Aa){var AX=this.mChartContextPtr.GetGraphMatrixContext(),Ab=this.mDatasetPtr,AZ=this.mSeriesInfo,Ac,AY,AW;if(AX&&this.mHasSizeBy){Ac=Ab.GetSizeByData(AZ[Aa.seriesInfoID].mSeriesId,Aa.groupID);Ac=Ac||0;AY=AX.GetScaledSize(Ac,this.mBarWidth,N._BAR);AY=Math.max(AY,1);if(this.mBarRenderType===v){AW=AY;if(AW%2===0){AW++;}return AW;}return AY;}return this.mBarWidth;}function P(Af,Ai){var AX,Aj,Ac,Ad,Ae,AY,Ag,AW,Ah,AZ,Ab=this.mpABLPlotContext,Aa=false;if(Af.useFloat!==undefined){Aa=Af.useFloat;}Ai=Ai||this.mBarWidth;Ad=Ab.mCategoryAxisPtr;AY=Af.groupID;if(Ab.takeGroupCenter){Ah=this.mDatasetPtr.GetClusterDataGroup();Ag=Ad.getFloatGroupMiddlePos(AY);if(Ah<=1){Ag=Ag-0.5*Ai;}else{AZ=Af.seriesInfoID%Ah;Ag-=0.5*Ah*Ai;Ag+=AZ*Ai;}}else{Ae=e.call(this,Af);Ag=Ad.getGroupStartPos(AY)+this.mSpaceBetweenGroup/2+(Ai+this.mSpaceBetweenRiser)*Ae;}AX=Math.floor(Ag+0.5);if(this.mChartContextPtr.mIsGraphMatrix){Aj=Ai;if(this.mHasSizeBy){if(!this.mUseDepth){AW=S.call(this,Af);Ac=Aj-AW;Ag+=Ac*0.5;AX=Math.round(Ag);Aj=Math.round(AW);}}else{Aj=(Aa?(Ag+Ai):Math.round(Ag+Ai))-AX;}}else{Aj=(Aa?(Ag+Ai):Math.round(Ag+Ai))-AX;}if(Aj===0&&Ai>=0.5){Aj=1;}return{Start:AX,Size:Aj};}function H(AX){var AW,AY;if(this.mBarOptions.mColorBySeries){if(AX<0||AX>=this.mSeriesInfo.length){return true;}}else{AY=this.mDatasetPtr.GetGroupCount();if(AX<0||AX>=AY){return true;}}AW=(this.mAddedLegendMarkerSet[AX]!==undefined);if(!AW){this.mAddedLegendMarkerSet[AX]=true;}return AW;}function n(Ac,AY){var Ab,Aa,AX,AZ,AW,Ad;Ad=AY.length;for(Ab=0;Ab<(Ad-1);++Ab){Aa=AY[Ab].GetBoundingRect();AX=AY[Ab+1].GetBoundingRect();AZ=this.mpABLPlotContext.mValueAxis[Ac].IsReverseOrder()?1:-1;if(Aa.HasIntersection(AX)){AW=new AD.Point2D({x:Math.floor(AX.x+AX.height/2),y:Aa.y});if(AZ===1){AW.y+=Aa.height;}AW.y+=Math.floor(AZ*AX.height/2);AY[Ab+1].MoveTo(AW.x,AW.y,AJ.CENTER);}}}function AK(Ad,AW,Ac){var Ae,Ab,AX,Aa,AZ,AY=this.mBarRenderType,Af;Ae=this.createRiserLabel(Ad.seriesInfoID,Ad.groupID,Ac);if(Ae===null){return null;}if(AY===v||AY===R){Ae.mOnMarker=true;}Ab=this.mIsVertical?AW.GetTopMiddle():AW.GetRightMiddle();AX=this.mIsVertical?AW.GetBottomMiddle():AW.GetLeftMiddle();Aa=false;AZ=this.GetData(Ad.seriesInfoID,Ad.groupID);if(AZ!==null&&AZ!==undefined){Af=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[Ad.seriesInfoID].mValueAxis];Aa=(AZ<0)^Af.IsReverseOrder();}if(Aa){Ab.swapPoints(AX);}this.MoveLabel(Ad.groupID,Ae,Ab,AX,Ad.seriesInfoID);return Ae;}function T(AY,Aa){var AZ=this.mSeriesInfo,AX,AW=AZ.length;for(AX=0;AX<AW;++AX){if(Aa===j.VA_BOTH||AZ[AX].mValueAxis===Aa){AY.push(AX);}}}function AE(){var AX=this.mpABLPlotContext.mABLOptions;var AY=j.VA_Y1,AW=j.VA_Y2;if(AX.mUseDepth&&L.call(this)>1&&AX.mDualAxes&&!AX.mSplitDualAxes){if((AX.mOrientation===m.OR_VERTICAL&&AX.mDepthDirection>=90&&AX.mDepthDirection<270)||(AX.mOrientation===m.OR_HORIZONTAL&&AX.mDepthDirection>=0&&AX.mDepthDirection<180)){AY=j.VA_Y2;AW=j.VA_Y1;}}return{First:AY,Second:AW};}function X(AZ,Ab){if(Ab.length===0){return Ab;}var AX,AW=[],AY,Aa;for(AX in Ab){if(Ab.hasOwnProperty(AX)){Aa=Ab[AX];AY=this.mDatasetPtr.GetData(Aa,AZ);if(AY!==null&&AY<0){AW.unshift(Aa);}else{AW.push(Aa);}}}return AW;}function M(Ad,AX,Ac){var Ab=this.mpABLPlotContext.mABLOptions,AY=Ab.mDepthDirection,AW=Ab.mOrientation,AZ=this.mBarRenderType,Aa=false;switch(this.mBarRenderType){case AL:Aa=false;break;case p:if(Ab.mUseDepth&&((AW===m.OR_VERTICAL&&AY>=90&&AY<270)||(AW===m.OR_HORIZONTAL&&AY>0&&AY<180))){Aa=true;}break;case v:case R:if((Ab.mUseDepth)&&((AW===m.OR_VERTICAL&&AY>=180&&AY<360)||(AW===m.OR_HORIZONTAL&&AY>=90&&AY<270))){Aa=true;}break;}AX.splice(0,AX.length);T.call(this,AX,Ac);if(AX.length===0){return ;}if(AZ===v||(AZ===R&&Ac!==j.VA_BOTH)){AX=X.call(this,Ad,AX);var Ae=this.mpABLPlotContext.mValueAxis[Ac];if(Ae.IsReverseOrder()){Aa=!Aa;}}if(Aa&&AX.length>0){AX.reverse();}}function U(){var AZ=this.mpABLPlotContext,AY=this.mBarOptions;if(this.mBarColumns===-1){this.mBarColumns=1;switch(this.mBarRenderType){case p:this.mBarColumns=this.mSeriesInfo.length;break;case v:if(L.call(this)>1&&!AZ.mABLOptions.mSplitDualAxes){this.mBarColumns=2;}break;}var AW=this.mGroupSize,AX=this.evalBarStyleUnitWidth(AW,this.mBarColumns,AY.mGapWidth);this.mBarWidth=AX.unitWidth;this.mSpaceBetweenRiser=AX.riserGap;this.mSpaceBetweenGroup=AX.groupGap;}}function k(){switch(this.mpABLPlotContext.mABLOptions.mLayout){case AH.LO_ABSOLUTE:if(this.mChartContextPtr.GetGraphMatrixContext().isCombinationChart()){return p;}return AL;case AH.LO_CLUSTER:return p;case AH.LO_STACKED:return v;case AH.LO_PERCENT:return R;default:return p;}}function AM(AZ,AX){var AW,AY;AW=this.mDatasetPtr.GetColorByData(AZ.mSeriesId,AZ.mGroupId);if(AW){AY=new AD.FormatFill();AY.mFillType=B.FT_SIMPLE;AY.mAlpha=255*0.7;AY.mSimpleColor=AW;AX.SetFormatFill(AY);}}function J(){if(this.mChartContextPtr.mIsGraphMatrix){return ;}}function E(){}function AI(Ab,AW,Ai){var AZ,Ae,Aa,Aj,AX=this.mpABLPlot,AY=this.mpABLPlotContext,Ag=this.mSeriesInfo[Ab.seriesInfoID].mValueAxis,Ah=AY.mValueAxis[Ag],Ad=Ah.mOptions.mDrawFromZero,Af=Ah.GetAxisOriginValue();Ah.mOptions.mDrawFromZero=(Af===null||Af===0);AZ=this.hPrepareData(Ab);if(A.isValidNumber(AZ)===false){return ;}Ae=this.hPrepareRect(Ab,AZ);Aj=Ae.Rect;Aa=Ae.AboveBase;if(!this.hUpdateBarRect(Ab,Aj,Aa,AZ)){Ah.mOptions.mDrawFromZero=Ad;return ;}if(Aj.width<=0||Aj.height<=0){Ah.mOptions.mDrawFromZero=Ad;return ;}if(!Ai){var Ac=this.hPrepareRectangleObject(Ab,Aj,Aa);if(Ac){this.hPostProcessOneBar(Ab,Ac);++AX.DPCount;if(AX.seriesDPCount[Ab.seriesInfoID]===undefined||AX.seriesDPCount[Ab.seriesInfoID]===null){AX.seriesDPCount[Ab.seriesInfoID]=1;}else{++(AX.seriesDPCount[Ab.seriesInfoID]);}}}Ah.mOptions.mDrawFromZero=Ad;}function AF(Aa,AX,Ac){var AY,Ab,AW,AZ=[];if((Ac===j.VA_BOTH&&this.mBarRenderType===v)||this.mBarRenderType===R){AY=AE.call(this);Ab=AY.First;AW=AY.Second;M.call(this,Aa,AX,Ab);M.call(this,Aa,AZ,AW);if(AZ.length>0){AX=AX.concat(AZ);}}else{M.call(this,Aa,AX,Ac);}return AX;}function g(Af,Ah){var Ag=this.mChartContextPtr,Ae=1500,AW=-1,AX=-1;if(this.mBarRenderType===p&&!this.mDatasetPtr.ShouldTakeGroupCenter()){if(Ah>=Ae&&Ag.mPartialRendering){var AZ,Ac,Ai=this.mBarWidth,Ab=Ag.mRenderingWindow,Ad=Ag.IsVertical(),AY=this.mpABLPlotContext,Aa=AY.mCategoryAxisPtr;if(Ad){AZ=Ab.x;Ac=AZ+Ab.width;}else{AZ=Ab.y;Ac=AZ+Ab.height;}AW=AZ-Aa.getGroupStartPos(Af)-this.mSpaceBetweenGroup/2;AW=Math.round(AW/(Ai+this.mSpaceBetweenRiser))-1;AW=Math.max(AW,0);AX=Ac-Aa.getGroupStartPos(Af)-this.mSpaceBetweenGroup/2;AX=Math.round(AX/(Ai+this.mSpaceBetweenRiser))+1;AX=Math.min(AX,Ah-1);return[AW,AX];}}return[];}function Y(Ad){var AX=this.mpABLPlotContext,Aj=this.IsReverseGroupOrder(),Ai,Af,Ae=[],AW=[],AY,AZ,Ab=[],Ag=[],Ac,Aa,Ah;this.initialSeries=[];Ai=this.mDatasetPtr.GetGroupCount();for(Ah=0;Ah<Ai;++Ah){Af=Ah;if(Aj){Af=Ai-1-Af;}Ae=AF.call(this,Af,Ae,Ad);AY=Ae.length;Aa=g.call(this,Af,AY);for(AZ=0;AZ<AY;++AZ){if(Aa.length===2&&(AZ<Aa[0]||AZ>Aa[1])){continue;}Ac={groupID:Af,seriesInfoID:Ae[AZ]};AI.call(this,Ac,AW);}if(this.mBarRenderType===p){AY=AW.length;for(AZ=0;AZ<AY;++AZ){if(AX.mSeriesOptions[AW[AZ].first].mValueAxis===j.VA_Y1){Ab.push(AW[AZ].second);}else{Ag.push(AW[AZ].second);}}if(Ab.length!==0){n.call(this,j.VA_Y1,Ab);}if(Ag.length!==0){n.call(this,j.VA_Y2,Ag);}}AW.splice(0,AW.length);}}function AS(AX){var Aa=this.mChartContextPtr;if(Aa.mIsGraphMatrix&&this.mHasColorBy){return null;}if(this.mGroupCount<2){return null;}var AW,AY=this.mDatasetPtr;AW=new AD.TripleId({ObjectId:AO.DssGraphRiser});if(this.mBarOptions.mColorBySeries){AW.mSeriesId=this.mSeriesInfo[AX.seriesInfoID].mSeriesId;}else{AW.mSeriesId=AX.groupID;}var AZ=this.GetGraphObject(AW);if(AZ===undefined){if(Aa.mIsGraphMatrix){if(AY.findCell(true,AW.mSeriesId,1)!==-1){AZ=null;return AZ;}}if(AZ===undefined){AZ=new AD.GraphCollectionObject({TripleId:AW,GraphObjectManager:this,CollectionType:(this.mIsVertical?h.CT_VERTICAL_BAR:h.CT_HORIZONTAL_BAR)});}this.AddToMap(AZ);}return this.GetGraphObject(AW);}function V(AX){if(this.mChartContextPtr.mIsGraphMatrix){var AW=this.mpABLPlotContext.mValueAxis[AX];if(AW){return AW.mOptions.mUseCustomMinMax;}return false;}return false;}function b(AW,AX){if(AW.x<AX||AW.x+AW.width+AX>this.mChartContextPtr.mGraphWidth){return false;}return(!(AW.y<AX||AW.y+AW.height+AX>this.mChartContextPtr.mGraphHeight));}function f(AW,AX,AY){if(AW.x+AW.width+AY<=AX.x||AW.x>=AX.x+AX.width+AY){return true;}return(AW.y+AW.height+AY<=AX.y||AW.y>=AX.y+AX.height+AY);}function AU(Ad,Ah,Af,Ac){var Ae,Aa=0,AZ=0,AY,Ag,AX=this.mChartContextPtr,Ab=AX.GetGraphMatrixContext(),AW=5;if(AX.mIsGraphMatrix){AW=Ab.getPadding(AA.kDataLabel);}if(Ac){Ah.GetFormatFont().mFontRotation=D.FR_90;}else{Ah.GetFormatFont().mFontRotation=D.FR_NORMAL;}Ae=Ah.GetBoundingRect();switch(Af){case W._BOTTOM:Aa=0;AZ=(Ad.height+Ae.height)/2+AW;break;case W._TOP:Aa=0;AZ=-1*((Ad.height+Ae.height)/2+AW);break;case W._LEFT:Aa=-1*((Ad.width+Ae.width)/2+AW);AZ=0;break;case W._RIGHT:Aa=(Ad.width+Ae.width)/2+AW;AZ=0;break;case W._CENTER:Aa=0;AZ=0;break;}AY=Ad.GetCenter().x+Ad.width%2+Aa;Ag=Ad.GetCenter().y+Ad.height%2+AZ;Ah.MoveTo(AY,Ag,AJ.CENTER);}function Q(Ah,Af,Ae,Ad,Aa,Ac){var AY=this.mChartContextPtr,Ab=AY.GetGraphMatrixContext(),AX,Ag=this.mpABLPlotContext.mABLOptions,AZ=Ag.mLayout,AW=Ag.mOrientation;if(Aa===null||Aa===undefined){Aa=false;}if(Ac===null||Ac===undefined){Ac=false;}if(Aa){AX=Ac;}else{AX=Ab.mIsNeedRotateDataLabel;}if(AW===m.OR_VERTICAL){if(AZ===AH.LO_ABSOLUTE||AZ===AH.LO_CLUSTER){if(Ae-Ad<0){AU.call(this,Ah,Af,W._BOTTOM,AX);}else{AU.call(this,Ah,Af,W._TOP,AX);}}else{if(this.mSeriesInfo.length===1){if(Ae-Ad<0){AU.call(this,Ah,Af,W._BOTTOM,AX);}else{AU.call(this,Ah,Af,W._TOP,AX);}}else{AU.call(this,Ah,Af,W._CENTER,AX);}}}else{if(AZ===AH.LO_ABSOLUTE||AZ===AH.LO_CLUSTER){if(Ae-Ad<0){AU.call(this,Ah,Af,W._LEFT,AX);}else{AU.call(this,Ah,Af,W._RIGHT,AX);}}else{if(this.mSeriesInfo.length===1){if(Ae-Ad<0){AU.call(this,Ah,Af,W._LEFT,AX);}else{AU.call(this,Ah,Af,W._RIGHT,AX);}}else{AU.call(this,Ah,Af,W._CENTER,AX);}}}}function o(Ak,Ad,Ae,Af,AW,Ag){var AY=this.mChartContextPtr,Ab=this.mDatasetPtr,Aj=AY.mIsGraphMatrix,Aa={},Ac=new AD.TripleId({ObjectId:AO.DssGraphDataText}),Ai=-3,Ah,AZ;if(Aj){var AX=Ab.showSeriesDatalabel(Ak.mSeriesId);if(AX){Aa.SeriesId=Ak.mSeriesId;Aa.GroupId=Ad.groupID;Aa.SeriesInfo=Ad.seriesInfoID;Aa.HostMarkerBound=Af;Ah=this.mSGMapLabel[Ai];if(Ah===null||Ah===undefined){this.mSGMapLabel[Ai]=new AD.GraphCollectionObject({TripleId:Ac,GraphObjectManager:this,CollectionType:h.CT_TEXT});}var Al=false;if(Al&&this.mBarRenderType===p){AZ=this.CreateOneDataLabel(Ad.groupID,this.mSeriesInfo[Ad.seriesInfoID].mSeriesId,AW,this.mSGMapLabel[Ai]);}else{AZ=this.CreateOneDataLabel(this.mSeriesInfo[Ad.seriesInfoID].mSeriesId,Ad.groupID,AW,this.mSGMapLabel[Ai]);}if(AZ!==null&&AZ!==undefined){Aa.Label=AZ;AZ.mIsShown=false;Q.call(this,Af,AZ,AW,Ag);this.mDataLabels.push(Aa);this.AddToMapAndList(AZ);}}}}function AN(Ag,AX,Ab,AZ,Aj){var Am,Ah,Ae,Ad,Ak,AY,Aa,Ai,Af,Al,AW,An,Ac;Am=this.hPrepareData(Ag);if(Am===null||Am===undefined){return ;}Ah=this.hPrepareRect(Ag,Am);Ak=new AD.Rect2D({Rect2D:Ah.Rect});Ae=Ah.AboveBase;Ad=Ah.AxisOriginValue;if(Ak.width<0||Ak.height<0){return ;}AY=new AD.Rect2D();AY.x=Ak.x;AY.y=Ak.y;AY.width=Ak.width;AY.height=Ak.height;if(!this.hUpdateBarRect(Ag,Ak,Ae,Am)){return ;}AX.push(Ak);if(Aj){Aa=false;Ai=new AD.TripleId({ObjectId:AO.DssGraphDataText});Af=new AD.GraphCollectionObject({TripleId:Ai,GraphObjectManager:this,CollectionType:h.CT_TEXT});if(Aa&&this.mChartContextPtr.mIsGraphMatrix&&this.mBarRenderType===p){Al=this.CreateOneDataLabel(Ag.groupID,this.mSeriesInfo[Ag.seriesInfoID].mSeriesId,Am,Af);}else{Al=this.CreateOneDataLabel(this.mSeriesInfo[Ag.seriesInfoID].mSeriesId,Ag.groupID,Am,Af);}if(Al!==null&&Al!==undefined){Q.call(this,Ak,Al,Am,Ad,true,AZ);AW=Al.GetBoundingRect();Ab.push(AW);}}else{Ai=new AD.TripleId({ObjectId:AO.DssGraphDataText});An=this.mSeriesInfo[Ag.seriesInfoID].mSeriesId;Ai.mSeriesId=An;Ac=this.mSGMapLabel[An];if(Ac===null||Ac===undefined){this.mSGMapLabel[An]=new AD.GraphCollectionObject({TripleId:Ai,GraphObjectManager:this,CollectionType:h.CT_TEXT});}o.call(this,Ai,Ag,Ak,AY,Am,Ad);}}function AB(Aj,Ag,Ah,AW){var Ac=this.IsReverseGroupOrder(),Al,Ad=this.mpABLPlotContext.mCategoryAxisPtr,AZ=false,Ak,Ai,AX=[],AY,Ab,Af,Ae,Aa;this.initialSeries=[];Aj.splice(0,Aj.length);Ag.splice(0,Ag.length);if(this.mChartContextPtr.mIsGraphMatrix){Al=Ad.mGroupCount;}else{Al=this.mDatasetPtr.GetGroupCount();}for(Ak=0;Ak<Al;++Ak){Ai=Ak;if(Ac){Ai=Al-1-Ai;}if(AZ&&this.mChartContextPtr.mIsGraphMatrix&&this.mBarRenderType===p){AY=this.mDatasetPtr.GetGroupCount();for(Ab=0;Ab<AY;++Ab){AX.push(Ab);}}else{AX=AF.call(this,Ai,AX,j.VA_BOTH);}Aa=AX.length;for(Af=0;Af<Aa;++Af){Ae={};Ae.groupID=Ai;Ae.seriesInfoID=AX[Af];AN.call(this,Ae,Aj,Ag,Ah,AW);}}}function u(Ah){var Ai=[],Ag=[],Aj=[],Ae=0,Ac,Ab,Aa,AX,Ad,AY,AZ=this.mChartContextPtr,Af=AZ.GetGraphMatrixContext(),AW=5;if(AZ.mIsGraphMatrix){AW=Af.getPadding(AA.kDataLabel);}AB.call(this,Ai,Ag,Ah,true);for(Ac=0;Ac<Ag.length;++Ac){AX=b.call(this,Ag[Ac],AW);if(!AX){continue;}Ad=true;for(Ab=0;Ab<Ai.length;++Ab){if(Ac===Ab){continue;}AY=f.call(this,Ag[Ac],Ai[Ab],AW);if(!AY){Ad=false;break;}}if(!Ad){continue;}for(Aa=0;Aa<Aj.length;++Aa){AY=f.call(this,Ag[Ac],Aj[Aa],AW);if(!AY){Ad=false;break;}}if(Ad){++Ae;Aj.push(Ag[Ac]);}}return Ae;}function s(){var AW,AX;if(this.mSeriesInfo.length===0){return false;}this.mGroupSize=this.mpABLPlotContext.mCategoryAxisPtr.getGroupSize();U.call(this);AW=u.call(this,false);AX=u.call(this,true);return(AX>AW);}function AT(AW){var AZ=this.mChartContextPtr,AY=AZ.mIsGraphMatrix,AX;if(AY&&AZ.mIsUniformAxisMode){AX=AZ.getUniformAxisContext();if(AW.x<AX.mDataAreaLeftMargin||AW.x+AW.width>AZ.mGraphWidth-AX.mDataAreaRightMargin){return false;}if(AW.y<AX.mDataAreaTopMargin||AW.y+AW.height>AZ.mGraphHeight-AX.mDataAreaBottomMargin){return false;}}return true;}function AG(Af){var Ak,Aj,Ai,Ah,Aa=this.mChartContextPtr,Al=Aa.GetGraphMatrixContext(),Ao,AX,AY=this.mDataLabels,Am,Ae=Aa.allowOverlapBetweenDatalabels(),AZ,Ag,Ab,Ad,Ac=5;if(Aa.mIsGraphMatrix){Ac=Al.getPadding(AA.kDataLabel);}Am=AY.length;for(Ak=0;Ak<Am;++Ak){for(Ah=0;Ah<4;++Ah){if(Al.mMarkerShape===AQ.DssGraphMarkerShapeGMTick){AX=Ah;AU.call(this,AY[Ak].HostMarkerBound,AY[Ak].Label,AX,false);}else{if(Ah>0){break;}}Ao=AY[Ak].Label.GetBoundingRect();Ag=Ae||b.call(this,Ao,Ac);if(!Ag){continue;}Ab=true;for(Aj=0;Aj<Am;++Aj){if(Aj===Ak){continue;}Ad=Ae||f.call(this,Ao,AY[Aj].HostMarkerBound,Ac);if(!Ad){Ab=false;break;}}if(!Ab){continue;}AZ=Af.length;for(Ai=0;Ai<AZ;++Ai){Ad=Ae||f.call(this,Ao,Af[Ai].GetBoundingRect(),Ac);if(!Ad){Ab=false;break;}}if(V.call(this,this.mSeriesInfo[AY[Ak].SeriesInfo].mValueAxis)){if(!AT.call(this,Ao)){Ab=false;}}if(Ab){Af.push(AY[Ak].Label);AY[Ak].IsDisplayed=true;AY[Ak].Label.mIsShown=true;if(Al.mMarkerShape===AQ.DssGraphMarkerShapeGMTick){break;}}}}if(Af&&Af.length>0){var AW={x:0,y:0,width:0,height:0};Af.forEach(function(Aq,Ap){var Ar=Aq.GetBoundingRect();if(Ap===0){AW={x:Ar.x,y:Ar.y,width:Ar.width,height:Ar.height};return true;}if(Ar.x<AW.x&&Ar.x+Ar.width>AW.x+AW.width){AW.width=Ar.width;AW.x=Ar.x;}else{if(Ar.x<AW.x){AW.width+=AW.x-Ar.x;AW.x=Ar.x;}else{if(Ar.x+Ar.width>AW.x+AW.width){AW.width+=Ar.x+Ar.width-AW.x-AW.width;}}}if(Ar.y<AW.y&&Ar.y+Ar.height>AW.y+AW.height){AW.height=Ar.height;AW.y=Ar.y;}else{if(Ar.y<AW.y){AW.height+=AW.y-Ar.y;AW.y=Ar.y;}else{if(Ar.y+Ar.height>AW.y+AW.height){AW.height+=Ar.y+Ar.height-AW.y-AW.height;}}}});var An=this.mpABLPlot.dataLabelManager;if(!An){An=this.mpABLPlot.dataLabelManager=new AD.DataLabelManager({DataArea:new AD.Rect2D(AW)});An.ChartContext=Aa;}if(Ab&&!Ae){Af.forEach(function(Ap){An.UpdateMatrixDataLabel(Ap.GetBoundingRect());});}}}mstrmojo.chart.BarSeriesRenderer=mstrmojo.declare(mstrmojo.chart.SeriesRenderer,null,{scriptClass:"mstrmojo.chart.BarSeriesRenderer",mSGMapLabel:[],mpSeriesLineInfo:null,mBarRenderType:AL,mBarWidth:0,mGroupSize:0,mSpaceBetweenRiser:0,mSpaceBetweenGroup:0,mBarColumns:-1,mBarOptions:null,mAddedLegendMarkerSet:null,mDataLabels:null,init:function q(AW){this._super(AW);this.mSGMapLabel=[];this.mAddedLegendMarkerSet=[];this.mDataLabels=[];this.mBarOptions={mOverlap:0,mGapWidth:40,mRiserShape:0,mShowErrorBar:false,mHasMiddleValue:false,mMiddleValueSize:50,mShowSeriesLines:false,mColorBySeries:true};this.LoadProperties();},SetDeviceDataArea:function F(AW){if(this.mChartContextPtr.mUseAnimation){if(this.mDeviceDataArea===null){this.mDeviceDataArea=new AD.Rect2D({Rect2D:AW});}else{this.mDeviceDataArea.ResetRect(AW);}}this.mBarRenderType=k.call(this);},AddTextToMapAndList:function y(AW,AX){var AZ,AY,Ab,Aa,Ac,Ad;Ab=this.mSGMapLabel.length;for(AY=0;AY<Ab;++AY){Ac=this.mSGMapLabel[AY];if(Ac!==null&&Ac!==undefined){Aa=Ac.GetCollectionSize();for(AZ=0;AZ<Aa;++AZ){AX.push(Ac.GetObjectByIndex(AZ));}Ad=Ac.mTripleId;AW.push(Ad,Ac);}}this.mSGMapLabel.splice(0,this.mSGMapLabel.length);this._super(AW,AX);},CreateTrendLine:function Z(AY,AX,AW){this._super(AY,AX,AW);},GenerateMapAndList:function a(AW){var AX=this.mChartContextPtr;if(AX.mImageUsage!=i.OBJECT_CLIP_COMPUTATION){return this.GenerateByValueAxis(j.VA_BOTH,AW);}},GenerateByValueAxis:function G(Aa,AY){var AZ=this.mChartContextPtr;if(this.mSeriesInfo.length===0){return ;}this.mGroupSize=this.mpABLPlotContext.mCategoryAxisPtr.getGroupSize();U.call(this);Y.call(this,Aa);if(AZ.mIsGraphMatrix){if(AZ.mImageUsage===i.GENERAL){if(this.mDatasetPtr.showDatalabels()){var AX=[],AW=[];AB.call(this,AX,AW,false,false);AG.call(this,AY);}this.GenerateTrendLine();this.GenerateRefLine();}}this.populateRenderSequence();},LoadProperties:function w(){var Aa=this.mChartContextPtr,AY=this.mBarOptions,AZ,AW=Aa.GetGraphMatrixContext(),AX=AW.mElementsInfo;if(Aa.mIsGraphMatrix){AY.mColorBySeries=!this.mChartContextPtr.isLegendByGroup();AY.mGapWidth=10;if(AX.Max.Mode===r._MANUAL){AZ=AX.Max.Size*100;if(AZ<1){AZ=1;}if(AZ>100){AZ=99;}AY.mGapWidth=100-AZ;}}if(Aa.mImageUsage!==0){return ;}},ShouldRotateDataLabel:function t(){var AX=this.mChartContextPtr.GetGraphMatrixContext(),AY=this.mpABLPlotContext.mABLOptions,AW=AY.mOrientation,AZ=AY.mLayout;if(AX.mMarkerShape===AQ.DssGraphMarkerShapeGMTick){return false;}if(AW===m.OR_HORIZONTAL){return false;}if(AX.isCombinationChart()&&(AZ===AH.LO_ABSOLUTE)){AZ=AH.LO_CLUSTER;}if(AZ===AH.LO_ABSOLUTE||this.mSeriesInfo.length===1){return s.call(this);}if(AZ===AH.LO_CLUSTER){return true;}return false;},GetSeriesOrderByType:function d(AX,AW,AY){return AF.call(this,AX,AW,AY);},GetRiserStartPosAndSize:function c(AX,AW){return P.call(this,AX,AW);},hUpdateBarRect:function AP(Af,Ag,Ad,AX){var AZ=this.mChartContextPtr,Ae,Aj,Ab,AW,Ai=this.mpABLPlotContext,Ak=Ai.mABLOptions,Aa=this.mDatasetPtr,Ah=this.mSeriesInfo,AY=Ak.mOrientation,Ac=Ak.mLayout;if(!AZ.mIsGraphMatrix){return true;}if(AX!==0&&(this.mBarRenderType===v||this.mBarRenderType===R)){AX=Aa.GetData(Ah[Af.seriesInfoID].mSeriesId,Af.groupID,0);}if(AX!==0){if(AY===m.OR_VERTICAL&&Ag.height===0){Ag.height=1;}if(AY===m.OR_HORIZONTAL&&Ag.width===0){Ag.width=1;}}if(Ag.width*Ag.height===0){return false;}Ae=this.mSeriesInfo[Af.seriesInfoID].mValueAxis;Aj=Ai.mValueAxis[Ae];if(Aj===null){return false;}x.ResetRect(Ag);Ab=Aj.GetBasePosition(true);AW=Aj.GetBaseValue(true);if(Ab===null||AW===null){return false;}if(AY===m.OR_VERTICAL){if(Aj.isBaseLineQualified()){if(x.y===Ab){if(Ad){--(x.y);--(x.y);}else{}if(x.height>1&&Ac===AH.LO_STACKED){++(x.y);--(x.height);}}else{if(x.y+x.height===Ab){if(x.height>1){x.height--;}else{x.y--;}}}}else{if(x.y===Ab){if(AX>=AW){--(x.y);--(x.y);}else{if(x.height>1){x.y++;x.height--;}}}if(x.y+x.height===Ab&&x.height===1){if(AX>=AW){--(x.y);++(x.height);}}}}if(AY===m.OR_HORIZONTAL){if(Aj.isBaseLineQualified()){if(x.x===Ab){if(Ad){++(x.x);}else{--(x.x);--(x.x);}if(x.width>1&&Ac===AH.LO_STACKED){--(x.width);}}else{if(x.x+x.width===Ab){if(x.width>1){}else{x.x--;}}}}else{if(x.x===Ab){if(Ad&&AX>AW){if(x.x>Ab){x.width+=x.x;x.x=Ab;}}}if(x.x+x.width===Ab){--(x.x);++(x.width);}}}Ag.copy(x);return true;},hPrepareData:function K(AX){var AY,Aa=this.mChartContextPtr,AW;AY=this.GetData(AX.seriesInfoID,AX.groupID);if(AY===null){if(Aa.mIsGraphMatrix===false){AW=AS.call(this,AX);if(AW){if(this.mBarOptions.mColorBySeries&&!H.call(this,AX.seriesInfoID)){this.AddLegendMarkerToCollection(AX.seriesInfoID,AW);}}}}else{var AZ={mSeriesId:this.mSeriesInfo[AX.seriesInfoID].mSeriesId,mGroupId:AX.groupID};if(Aa.checkColorByAndSizeByValue(AZ,this.mDatasetPtr,this.mHasColorBy,this.mHasSizeBy)===false){AY=null;}}return AY;},hPrepareRect:function C(Ag,Ap,Af){var AY=this.mpABLPlotContext,Ae=AY.mABLOptions,Aa=this.mSeriesInfo[Ag.seriesInfoID].mValueAxis,Ak=AY.mValueAxis[Aa];var Ad=Ak.GetAxisOriginValue(),An=Ak.GetBaseValue(true),AZ=Ap>An,Am=P.call(this,Ag,Af),AX=Am.Start,Ah=Am.Size,AW=Ak.GetBasePosition(true),Al=Ak.GetPositionByValue(Ap);O.Reset(0,0,0,0);if(Al===null){O.width=O.height=-1;return{Rect:O,AboveBase:AZ};}if(this.mBarRenderType===v||this.mBarRenderType===R){var Ac,Aq=false,Ai,Aj,Ab;if(Ad===null||Ad===0||this.mBarRenderType===R){Aq=true;}else{Ai=this.updateGroupStackInfoWithBase(Aa,Ag.groupID,Ad);Aj=this.getSeriesOffsetIntoStackedInfo(Aa,Ag.groupID,Ag.seriesInfoID);var Ao=Ai[Aj];if(Ao.Max===null||Ao.Min===null){O.width=O.height=-1;return{Rect:O,AboveBase:AZ};}AW=Ak.ValueToPosition(Ao.Min);Al=Ak.ValueToPosition(Ao.Max);}if(Aq){if(this.mBarRenderType===v&&Ak.mOptions.mUseLogarithmicScale&&this.initialSeries[Ag.groupID]===undefined){Ac=Math.max(An,1);this.initialSeries[Ag.groupID]=Ag.seriesInfoID;}else{Ac=this.GetData(Ag.seriesInfoID,Ag.groupID,true);}Ab=this.GetData(Ag.seriesInfoID,Ag.groupID);AW=Ak.GetPositionByValue(Ac);Al=Ak.GetPositionByValue(Ab);}if(AW===null||Al===null){O.width=O.height=-1;return{Rect:O,AboveBase:AZ};}AZ=(Ab>=An);}switch(Ae.mOrientation){case m.OR_VERTICAL:O.x=AX;O.y=Math.min(AW,Al);O.width=Ah;O.height=Math.abs(AW-Al);break;case m.OR_HORIZONTAL:O.x=Math.min(AW,Al);O.y=AX;O.width=Math.abs(AW-Al);O.height=Ah;break;}return{Rect:O,AboveBase:AZ,AxisOriginValue:(Ad||0)};},hPostProcessOneBar:function AR(AZ,Ab){var AW=AS.call(this,AZ);if(Ab!==null){var AX=this.mBarOptions;if(AW){AW.AddGraphObject(Ab);}if(this.mChartContextPtr.mIsGraphMatrix){if(this.mHasColorBy&&!this.mChartContextPtr.mDebugUseNewProperties){var Aa=Ab.mTripleId;AM.call(this,Aa,Ab);}}this.mGraphObjectList.push(Ab);this.AddToMap(Ab);if(AX.mColorBySeries&&!H.call(this,AZ.seriesInfoID)){this.AddLegendMarkerToCollection(AZ.seriesInfoID,AW);}else{if(!this.mBarOptions.mColorBySeries&&this.mChartContextPtr.mIsGraphMatrix){if(this.mAddedLegendMarkerSet[AZ.groupID]===null&&this.mLegendPtr!==null){var AY;if(AW){AY=AW.GetFormatFill();}else{AY=Ab.GetFormatFill();}this.mLegendPtr.UpdateFormatForLegendMarker(AZ.groupID,AY,null);this.mAddedLegendMarkerSet[AZ.groupID]=true;}}}}},hPrepareRectangleObject:function AC(Ac,Ae,AW){if(Ae.width<0||Ae.height<0){return null;}var AX=this.mChartContextPtr,Aa=this.mpABLPlot.mABLPlotContext,Ab=Aa.mABLOptions,Ad=AS.call(this,Ac),AY=new AD.TripleId({ObjectId:AO.DssGraphRiser,SeriesId:this.mSeriesInfo[Ac.seriesInfoID].mSeriesId,GroupId:Ac.groupID}),AZ;if(Ab.mUseDepth){console.alert("Missing method for depth rectangle object");}else{AZ=new AD.RectangleObject({TripleId:AY,GraphObjectManager:this,Area:Ae,GraphCollectionObject:Ad,Shape:N._BAR,hasFill:true});if(AX.mIsGraphMatrix){if(AW){AZ.mBorderOpenType=this.mIsVertical?AV.BOTTOM:AV.LEFT;}else{AZ.mBorderOpenType=this.mIsVertical?AV.TOP:AV.RIGHT;}}}if(AX.mUseAnimation){AZ.SetAnimationEnable(true);AZ.SetProgress(1);}return AZ;}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","TripleId","CategoryPlot","MarkerObject","NumberObject","Point2D","SeriesRenderer","PolyLineObject","DataLabelManager");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumDSSExtraGraphObject","EnumMajorGraphType","EnumLayout","EnumOrientation","EnumAttachedPointsStyle","EnumImageUsage","EnumGraphMatrixElementSizeMode","EnumValueAxis");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphMarkerShape","EnumDSSGraphObject","EnumShapeType","EnumDSSExtraGraphProperty");var f=mstrmojo.chart,O=f.enums,E=O.EnumCollectionType,AA=O.EnumDSSExtraGraphObject,n=O.EnumMajorGraphType,Q=O.EnumLayout,J=O.EnumOrientation,F=O.EnumValueAxis,P=O.EnumAttachedPointsStyle,L=O.EnumImageUsage,AH=O.EnumGraphMatrixElementSizeMode,z=f.gNullGroupId,Z=f.model,S=Z.enums,AD=S.EnumDSSGraphMarkerShape,AC=S.EnumDSSGraphObject,AE=S.EnumShapeType;var K=new f.TripleId(),U=new f.Point2D(),C=new f.Point2D();U.Reset(-2,-2);C.Reset(-1,-1);U.dangling=true;C.isNull=true;mstrmojo.chart.LineSeriesOptions=mstrmojo.provide("mstrmojo.chart.LineSeriesOptions",{});function b(){if(this.mExpectedLineCount===undefined){var AS=this.mSeriesInfo,AR,AU,AQ=0,AT=this.mDatasetPtr,AP=AS.length;for(AR=0;AR<AP;AR++){AU=AS[AR].mSeriesId;if(AT.GetShapeBySeries(AU)===AE._LINE){AQ++;}}this.mExpectedLineCount=AQ;}return this.mExpectedLineCount;}function d(){return{mShowStepLine:false,mShowMarkers:true,mMarkerShape:0,mMarkerSize:50};}function AO(AT){if(!this.mSupportDiscretePoints){return ;}var AP=[],AR=0,AU=new f.Point2D(),AX=this.mVecGroupIdMapPerSeries,AQ,AV;if(this.discreteMatrix===undefined){this.discreteMatrix=[];}var AS=[];AX.splice(0,AX.length);AV=this.mGroupCount;for(AQ=0;AQ<AV;++AQ){if(this.GetLinePoint(AT,AQ,AU)){AP[AR]=AQ;AR++;}else{if(AP.length>0){var AW=AP.concat();AX.push(AW);}AP.splice(0,AP.length);AR=0;AS.push(AQ);}}AS.push(AV);this.discreteMatrix[AT]=AS;if(AP.length>0){AX.push(AP);}}function w(){if(this.mChartContextPtr.mUseAnimation){return this.mProgress===1;}return true;}function h(){return true;}function M(AW,AT){var AS=-1,AR,AP,AQ=this.clusterInfo,AU=this.mpABLPlotContext,AV=AU.mCategoryAxisPtr;AR=this.mSeriesInfo[AW].mDataIndex;if(AQ.Circle){AS=AQ.Circle.indexOf(AR);}if(AS===-1&&AQ.Tick){AS=AQ.Tick.indexOf(AR);}if(AS===-1&&AQ.Square){AS=AQ.Square.indexOf(AR);}if(AS===-1){AS=AR%AQ.columns;}AP=AV.getGroupStartPos(AT)+0.5*AQ.groupGap+(AQ.unitWidth+AQ.riserGap)*AS+0.5*AQ.unitWidth;AP=Math.floor(AP+0.5);return AP;}function x(AT,AW,AR){var AP=this.mChartContextPtr;if(AP.RenderClusterShapes()&&this.mpABLPlotContext.takeGroupCenter===false){if(this.clusterInfo===undefined){var AS,AQ=this.mDatasetPtr.GetClusterSeriesCount(),AX=this.mpABLPlot.mABLPlotContext.mCategoryAxisPtr.getGroupSize(),AZ=this.evalBarStyleUnitWidth(AX,AQ);this.clusterInfo=mstrmojo.hash.copy(AZ);if(AS){var AY=this.clusterInfo;AY.Circle=AS.Circle.concat();AY.Tick=AS.Tick.concat();AY.Square=AS.Square.concat();}}var AU=M.call(this,AT,AW),AV=new f.Point2D({Point2D:AR});if(this.mIsVertical){AV.x=AU;}else{AV.y=AU;}return AV;}return AR;}function N(Ab,AQ,Aa,AY){var Ag,Ap,Am,Ak,Ai,Af,Aj,AT=false,AV,AR=Ab.shape,AU,Ae,Al=Aa[AY],AS=this.mChartContextPtr,AZ=this.mDatasetPtr,Ac=this.mSinglePointObjects,Ao=AS.GetGraphMatrixContext(),Aq,An;Ap=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[AQ].mValueAxis];if(Ap){AT=true;Ag=Ap.GetMaxMinDataInputPosition();AU=Ag.LowBoundary;Ae=Ag.HighBoundary;Aj="y1";var AP=Ap.mTripleId.mObjectId;Aj=AS.getAxisKeyFromObjectId(AP);AV=this.mClippedMarkerSize[Aj];}Aq=Al.length;var Ar;var Ad,Ah,AX,As,AW;for(Am=0;Am<Aq;++Am){Ai=new f.TripleId({ObjectId:AC.DssGraphRiser,SeriesId:this.mSeriesInfo[AQ].mSeriesId,GroupId:this.getCorrectGroupIdInSeriesPoints(Am,AY)});Ar=Al[Am];Af=this.drawSingleDataPoint(Ai,Ar,AR);An=Af.length;for(Ak=0;Ak<An;++Ak){if(Af[Ak].Object){this.AddToMapAndList(Af[Ak].Object);}}Ad=AZ.showSeriesDatalabel(Ai.mSeriesId);if(Af.length>0){if(Af[0].Object!==null&&Af[0].Object!==undefined&&Ad){Ac.push(Af[0].Object);}Ab.AlreadyInMapAndList=true;Ab.Obj=Af[0];if(AT){An=Af.length;for(Ak=0;Ak<An;++Ak){Ah=Af[Ak];AX=AV.LowOffset;As=AV.HighOffset;AW=Ah.ShapeSize;if(AW===undefined){if(Ah.Object){AW=Ah.Object.getShapeSize();}else{AW=0;}}Ag=Ao.getClippedOffset(AU,Ae,AW,Al[Am],!AS.IsVertical(),AX,As);AV.LowOffset=AX=Ag.LowOffset;AV.HighOffset=As=Ag.HighOffset;}}}}Ab.AlreadyInMapAndList=true;Ab.Obj=null;return Ab;}function y(AS){var AV=this.mChartContextPtr,AQ,AT=[];if(AV.mIsGraphMatrix&&this.mGroupCount===1){AQ=new f.Point2D();if(!this.GetLinePoint(AS,0,AQ)){return ;}AT.push(AQ);var AU=[];AU.push(AT);var AP={};var AR=i.call(this,AS);AP.shape=AR;N.call(this,AP,AS,AU,0);if(AP.AlreadyInMapAndList===false){this.AddToMapAndList(AP.Obj);}}}function m(AW,AR,AQ){var AP,AT,AV=true,AS=0,AU=100;for(AP=0;AP<AQ;++AP){AT=this.mDatasetPtr.GetSizeByData(AW,AR+AP);if(AT!==null){if(AV){AS=AT;AV=false;}else{if(AS!==AT){return true;}}}if(AP>AU){return true;}}return false;}function I(Ag,AW,AU,AQ,AP){var AS=this.mChartContextPtr,Ad=AW[AU],Ab=new f.TripleId({ObjectId:AC.DssGraphDataLine,SeriesId:this.mSeriesInfo[AQ].mSeriesId,GroupId:AU}),AY,Ac,AV=this.mDatasetPtr,Af;Ab.mGroupId=this.getCorrectGroupIdInSeriesPoints(0,Ab.mGroupId);AY=new f.PolyLineObject({TripleId:Ab,GraphObjectManager:this,PolyLine:Ad,GraphCollectionObject:this.mLineCollections[AQ],Shape:AE._LINE});Ac=AY.mFormatLinePtr;AY.movePointsAgainstBorder();Ad=AY.mLinePoints;var AZ=Ag&&this.mDatasetPtr.isGradientABL();if(AZ){var Ae,AT,AX=Ad.length,Aa,AR={Valid:true,Angle:AS.IsVertical()?0:1,EndAlpha:255,Style:1,Colors:[],Start:{x:Ad[0].x,y:Ad[0].y},End:{x:Ad[AX-1].x,y:Ad[AX-1].y}};Af=Ad.length;for(Ae=0;Ae<Af;++Ae){AT=Ae/(Ad.length-1);Aa=AV.GetColorByData(Ab.mSeriesId,Ab.mGroupId+Ae);AR.Colors.push({Step:AT,Color:Aa});}AY.mFormatLinePtr=Ac.transformToGradient(AR);this.AddToMapAndList(AY);}if(AV.showSeriesDatalabel(Ab.mSeriesId)){this.mPolyLineObjects.push(AY);}return{Obj:AY,AlreadyInMapAndList:AZ};}function k(AP,AW,AS,AV,AU){var AT=this.mChartContextPtr.GetGraphMatrixContext(),AX=AT.GetScaledSizeWithRatio(AS,AW)/2,AR=new f.Point2D({Point2D:AP}),AQ=new f.Point2D({Point2D:AP});if(this.mIsVertical){AR.y-=AX;AQ.y+=AX;}else{AR.x-=AX;AQ.x+=AX;}AV.x=AR.x;AV.y=AR.y;AU.x=AQ.x;AU.y=AQ.y;}function u(AU,Ac,AV){var AX=this.mChartContextPtr.GetGraphMatrixContext(),AP=AX.mElementsInfo.Min.Mode,AQ,AS,AT=[],AW=[],AZ=0,AY,Ab,AR,Ad,Aa;Aa=Ac.length;for(AS=0;AS<Aa;++AS){AQ=Ac[AS];AY=this.mDatasetPtr.GetSizeByData(AU.mSeriesId,AU.mGroupId+AS);if(AY!==null){AZ=AX.ToRatioEx(AY,(AP===AH._PROPORTIONAL));if(AZ<0){AZ=0;}}Ab=new f.Point2D();AR=new f.Point2D();k.call(this,AQ,AV,AZ,Ab,AR);AT.push(Ab);AW.push(AR);}AW.reverse();Ad=AT.concat(AW);return Ad;}function V(Aq,Ad,Ab,AR,AQ){var Ac=this.mDatasetPtr,AZ=Ad[Ab],Al,Ak,Am,Ae,AU,AS=null,AV=this.mChartContextPtr,Aa=this.mSeriesInfo,Ao=AV.GetGraphMatrixContext(),Ag=Ao.GetAdjustThicknessValue(AQ),Aj=new f.TripleId({ObjectId:AC.DssGraphRiser,SeriesId:Aa[AR].mSeriesId,GroupId:Ab}),Ap,Ah,AW,Af,AY,Ai,AP;Aj.mGroupId=this.getCorrectGroupIdInSeriesPoints(0,Aj.mGroupId);Ae=u.call(this,Aj,AZ,Ag);if(AV.mImageUsage===L.GENERAL){AS=new f.PolygonObject({TripleId:Aj,GraphObjectManager:this,Polygon:Ae,Shape:AE._POLYGON});AS.mPointsStyle=P.TOOLTIP_TRAPEZOID;}var An=this.mpABLPlotContext.mValueAxis[Aa[AR].mValueAxis];if(An){Ah=An.GetMaxMinDataInputPosition();AW=Ah.LowBoundary;Af=Ah.HighBoundary;AP=An.mTripleId.mObjectId;Ai=AV.getAxisKeyFromObjectId(AP);AY=this.mClippedMarkerSize[Ai];}if(Aq&&AS){Ak=AS.mFormatFillPtr;AU=this.prepareTransitionalGradient(Aj,AZ);Am=Ak.transformToGradient(AU);AS.SetFormatFill(Am);}Ap=Ae.length;var AX,AT=2+2;for(Al=0;Al<Ap;++Al){AX=this.mChartContextPtr.IsVertical()?Ae[Al].y:Ae[Al].x;if(this.mChartContextPtr.IsVertical()){if(AX<Af){AY.HighOffset=Math.max(AY.HighOffset,Af-AX);AY.HighOffset=Math.max(AY.HighOffset,AT);}if(AW<AX){AY.LowOffset=Math.max(AY.LowOffset,AX-AW);AY.LowOffset=Math.max(AY.LowOffset,AT);}}else{if(AX-Af>0){AY.HighOffset=Math.max(AY.HighOffset,AX-Af);AY.HighOffset=Math.max(AY.HighOffset,AT);}if(AW-AX>0){AY.LowOffset=Math.max(AY.LowOffset,AW-AX);AY.LowOffset=Math.max(AY.LowOffset,AT);}}}if(AS){this.AddToMapAndList(AS);if(Ac.showSeriesDatalabel(Aj.mSeriesId)){this.mPolygonObjects.push(AS);}}return{Obj:AS,AlreadyInMapAndList:true};}function t(AS,AT,AQ){var AR=this.mChartContextPtr,AU=4,AW=AR.GetGraphMatrixContext(),AV=AW.GetMaxElementSizeInLineChart(this.mIsVertical,this.mGroupCount,false,AD.DssGraphMarkerShapeNone),AP=false,AX=true;if(this.mHasSizeBy){AX=(AV<=AU)&&!m.call(this,this.mSeriesInfo[AS].mSeriesId,this.getCorrectGroupIdInSeriesPoints(0,AT),AQ[AT].length);if(AW.mMaxSizeVal===AW.mMinSizeVal){AV=Math.max(AW.mElementsInfo.Max.Size,AW.mConstants.MinimalSize.Line);}}AP=AP||this.mHasColorBy;if(AX){return I.call(this,AP,AQ,AT,AS,AV);}return V.call(this,AP,AQ,AT,AS,AV);}function i(AQ){var AU=this.mChartContextPtr,AS=AU.GetGraphMatrixContext(),AR,AP=AS.mMarkerShape;if(AU.mIsGraphMatrix){if(AU.isCombinationChart()){var AT=this.mDatasetPtr;AQ=this.mSeriesInfo[AQ].mSeriesId;AR=AT.GetShapeBySeries(AQ);return AR;}switch(AP){case AD.DssGraphMarkerShapeCircle:return AE._CIRCLE;case AD.DssGraphMarkerShapeRectangle:case AD.DssGraphMarkerShapeSquare:return AE._SQUARE;case AD.DssGraphMarkerShape2DPie:case AD.DssGraphMarkerShape2DRingPie:return AE._PIE;case AD.DssGraphMarkerShapeGMTick:return AE._TICKER;default:return AE._LINE;}}else{return 0;}}function T(AR,AS,AP){var AQ=this.mChartContextPtr,AT,AU,AW=AQ.mIsGraphMatrix,AX={Obj:null,AlreadyInMapAndList:false};if(AW){var AV=i.call(this,AR);AX.shape=AV;if(AP[AS].length===1){if(this.mDatasetPtr.ShouldTakeGroupCenter()&&AQ.isCombinationChart()){if(AX.shape===AE._LINE){AX.shape=AE._CIRCLE;}}return N.call(this,AX,AR,AP,AS);}switch(AV){case AE._CIRCLE:case AE._SQUARE:case AE._PIE:case AE._TICKER:case AE._COMBINED:return N.call(this,AX,AR,AP,AS);default:return t.call(this,AR,AS,AP);}}AT=new f.TripleId({ObjectId:AC.DssGraphDataLine,SeriesId:this.mSeriesInfo[AR].mSeriesId,GroupId:AS});AU=new f.PolyLineObject({TripleId:AT,GraphObjectManager:this,PolyLine:AP[AS],GraphCollectionObject:this.mLineCollections[AR]});AX.Obj=AU;return AX;}function B(AR,AQ){var AW=this.discreteMatrix,AT=0,AS,AU,AX;if(AW&&AW[AR]){AX=AW[AR];AU=AX.length;for(AS=0;AS<AU;AS++){if(AQ>=AT&&AQ<AX[AS]){return AS;}AT=AX[AS];}}var AP=[],AV;AT=0;this.GetLinePointSet(AR,AP);AV=AP.length;for(AS=0;AS<AV;++AS){if(AQ>=AT&&AQ<AT+AP[AS].length){return AQ;}AT+=AP[AS].length;}return AQ;}function s(AU,AR,AT){var AP,AQ=new f.Point2D(),AS=new f.Point2D();AQ.x=AR.x;AQ.y=AR.y;AS.x=AR.x;AS.y=AR.y;AP={HighPoint:AQ,LowPoint:AS};if(AU){AS.y-=AT;AQ.y+=AT;}else{AS.x-=AT;AQ.y+=AT;}return AP;}function g(AR,AT,AQ){var AP=this.mChartContextPtr.GetGraphMatrixContext(),AS=AP.GetScaledSizeWithRatio(AQ,AT)/2;return s.call(this,this.mIsVertical,AR,AS);}function H(AV,Ad){var AP=new f.Point2D(),AS,AZ=true,AX=this.mChartContextPtr.GetGraphMatrixContext(),AQ=AX.mElementsInfo.Min.Mode,AW,Ae,Aa,AU=0,Ac,AY=1,Ab,AT,AR={};this.GetLinePoint(AV,Ad,AP);AS=AX.GetMaxElementSizeInLineChart(this.mIsVertical,this.mGroupCount);if(AX.mHasSizeBy){AZ=false;if(AX.mMaxSizeVal===AX.mMinSizeVal){AS=Math.max(AX.mElementsInfo.Max.Size,AX.mConstants.MinimalSize.Line);AZ=true;}}if(AZ){AT=B.call(this,AV,Ad);AW=new f.TripleId({ObjectId:AC.DssGraphDataLine,SeriesId:this.mSeriesInfo[AV].mSeriesId,GroupId:AT});Ae=this.GetGraphObject(AW);if(Ae!==undefined&&Ae!==null){Aa=Ae.mFormatLinePtr;AS=Aa.mLineThickness;AU=AS/2;}Ac=s.call(this,this.mIsVertical,AP,AU);}else{Ab=this.mDatasetPtr.GetData(this.mSeriesInfo[AV].mSeriesId,Ad,AX.mSizeIndex,false);if(Ab!==null&&Ab!==undefined){AY=AX.ToRatioEx(Ab,(AQ===AH._PROPORTIONAL));if(AY<0){AY=0;}}Ac=g.call(this,AP,AS,AY);}AR.XCenterOffset=(Ac.HighPoint.x-Ac.LowPoint.x)/2;AR.YCenterOffset=(Ac.HighPoint.y-Ac.LowPoint.y)/2;return AR;}function AL(Ab){var AV=new f.TripleId({ObjectId:AC.DssGraphRiser,SeriesId:Ab.SeriesId,GroupId:Ab.GroupId}),AQ=this.mChartContextPtr,AY=AQ.GetGraphMatrixContext(),AZ=AY.IsIsolatedDot(AV),AR,AP=new f.Point2D(),Aa=0,AU=0,AT,AW,AS=this.mDatasetPtr,AX;if(this.GetLinePoint(Ab.SeriesInfo,Ab.GroupId,AP)){if(AY.mMarkerShape===AD.DssGraphMarkerShapeCombined){AX=AS.GetShapeBySeries(Ab.SeriesId);AR=(AX===AE._CIRCLE||AX===AE._RECTANGLE||AX===AE._TICKER||AX===AE._SQUARE);}else{AR=(AY.mMarkerShape===AD.DssGraphMarkerShapeCircle||AY.mMarkerShape===AD.DssGraphMarkerShapeRectangle||AY.mMarkerShape===AD.DssGraphMarkerShapeGMTick||AY.mMarkerShape===AD.DssGraphMarkerShapeSquare);}if(AZ||AR){AT=this.GetGraphObject(AV);if(AT!==null&&AT!==undefined){if(AT.mMarkerSize!==undefined&&AT.mMarkerSize!==null&&AT.MarkerPosition!==undefined&&AT.MarkerPosition!==null){Aa=AT.mMarkerSize;AU=Aa;AP.x=AT.MarkerPosition.x;AP.y=AT.MarkerPosition.y;}else{if(AT instanceof mstrmojo.chart.RectangleObject&&AT.mRect!==undefined&&AT.mRect!==null){Aa=AT.mRect.width/2;AU=AT.mRect.height/2;AP.x=AT.mRect.x+Aa;AP.y=AT.mRect.y+AU;}else{if(AT instanceof mstrmojo.chart.StraightLineObject){AP.x=0.5*(AT.mDeviceStartPoint.x+AT.mDeviceEndPoint.x);AP.y=0.5*(AT.mDeviceStartPoint.y+AT.mDeviceEndPoint.y);}}}}}else{AW=H.call(this,Ab.SeriesInfo,Ab.GroupId);if(AW!==null&&AW!==undefined){Aa=AW.XCenterOffset;}AU=AW.YCenterOffset;}Ab.HostMarkerPoint=AP;Ab.CenterXOffset=Aa;Ab.CenterYOffset=AU;return true;}return false;}function a(){var AR,AQ=this.mDataLabels,AP=AQ.length;for(AR=0;AR<AP;++AR){AQ[AR].isValid=AL.call(this,AQ[AR]);}}function W(){var AP=this.mpABLPlot.dataLabelManager,AR=this.mChartContextPtr,AQ=new f.Rect2D({x:0,y:0,width:AR.mGraphWidth,height:AR.mGraphHeight});if(AP===null||AP===undefined){AP=this.mpABLPlot.dataLabelManager=new f.DataLabelManager({DataArea:AQ});AP.ChartContext=AR;}AP.SinglePointObjects=AP.SinglePointObjects.concat(this.mSinglePointObjects);AP.PolyLineObjects=AP.PolyLineObjects.concat(this.mPolyLineObjects);AP.PolygonObjects=AP.PolygonObjects.concat(this.mPolygonObjects);AP.seriesOptions=this.mpABLPlotContext.mSeriesOptions;return AP;}function l(){var AS=this.mDataLabels.length,AR,AQ,AP;for(AP=0;AP<AS;++AP){AQ=this.mDataLabels[AP];if(AQ.display){AR=AQ.GroupId;this.CreateOneDataMarker(AQ.SeriesInfo,AQ.GroupId,this.mMarkerCollections[AQ.SeriesInfo],AQ.HostMarkerPoint,AR,true);}}}function AM(AP){var AQ=this.mChartContextPtr,AT=this.mDatasetPtr,AW=AQ.GetGraphMatrixContext(),AZ,AX,AR=this.mpABLPlot;if(AQ.mIsGraphMatrix){AX=AT.showDatalabels();AZ=(AW.mMarkerShape===AD.DssGraphMarkerShape2DPie||AW.mMarkerShape===AD.DssGraphMarkerShape2DRingPie);}if(AX){var AS=AR.dataLabelManager;if(AS===null||AS===undefined){var AV=new f.Rect2D({x:0,y:0,width:AQ.mGraphWidth,height:AQ.mGraphHeight});AS=AR.dataLabelManager=new f.DataLabelManager({DataArea:AV});AS.ChartContext=AQ;}if(AZ){var Ac=this.mPieRenderer;Ac.enableDataLabel(this.mpABLPlot.dataLabelManager,AP);var AU,AY=Ac.dataLabels,Ab,Aa=AY.length;for(AU=0;AU<Aa;++AU){Ab=AY[AU].Label;if(Ab.mIsShown){this.AddToMapAndList(Ab);}}}else{this.CreateAllDataLabels();a.call(this);AS=W.call(this);AS.PlaceDataLabels(this.mDataLabels,AP);l.call(this);}}}mstrmojo.chart.LineSeriesRenderer=mstrmojo.declare(mstrmojo.chart.SeriesRenderer,null,{scriptClass:"mstrmojo.chart.LineSeriesRenderer",mLineCollections:null,mMarkerCollections:null,mVecSeriesPoints:null,mLineSeriesOptions:null,mDepth:0,mInitialized:false,mIsByValueAxis:false,mGroupIdMapPerSeries:null,mVecGroupIdMapPerSeries:null,mHasCreatedMarkers:false,mDataLabels:null,mSinglePointObjects:null,mPolyLineObjects:null,mPolygonObjects:null,init:function AJ(AP){this._super(AP);this.mDepth=this.mpABLPlot.unitLevelDepth;this.mLineCollections=[];this.mMarkerCollections=[];this.mVecSeriesPoints=[];this.mLineSeriesOptions=[];this.mGroupIdMapPerSeries=[];this.mVecGroupIdMapPerSeries=[];this.mSupportDiscretePoints=this.mChartContextPtr.mIsGraphMatrix;this.mDataLabels=[];this.mSinglePointObjects=[];this.mPolyLineObjects=[];this.mPolygonObjects=[];},GenerateMapAndList:function AI(AR){var AV=this.mChartContextPtr,AQ,AS,AU=mstrmojo.chart.RenderLayer2,AT=this.mSeriesInfo,AP=this.mLineSeriesOptions;if(AT.length===0){return ;}for(AQ=0;AQ<AT.length;++AQ){AP.push(d());if(AV.mIsGraphMatrix){AP[this.mLineSeriesOptions.length-1].mShowMarkers=false;}this.loadSeriesProperties(AQ);}this.GenerateLineCollections();this.GenerateMarkerCollections();AS=new f.GraphObjectAggregation({TripleId:AU,GraphObjectManager:this});this.mGraphObjectList.push(AS);this.GenerateInterpolationFrame(1);if(AV.mUseAnimation){this.GenerateInterpolationFrame(0);}if(AV.mImageUsage===L.GENERAL){this.CreateAllSeriesLabels(AR);this.GenerateTrendLine();this.GenerateRefLine();this.populateRenderSequence();}},GenerateByValueAxis:function v(AS,AP){var AR=this.mSeriesInfo,AQ;if(AR.length===0){return ;}if(!this.mInitialized){for(AQ=0;AQ<AR.length;++AQ){this.mLineSeriesOptions.push(d());this.loadSeriesProperties(AQ);}this.GenerateLineCollections();this.GenerateMarkerCollections();this.mInitialized=true;this.mIsByValueAxis=true;}this.mGraphObjectList.push(new f.GraphObjectAggregation({TripleId:new f.TripleId({ObjectId:AA.DssGraphRendererLayer,SeriesId:AS,GroupId:z}),GraphObjectManager:this}));this.GenerateInterpolationFrame(1);if(this.mChartContextPtr.mUseAnimation){this.GenerateInterpolationFrame(0);}if(AS===F.VA_Y1){this.CreateAllSeriesLabels();}},loadSeriesProperties:function r(AP){if(this.mChartContextPtr.mImageUsage!==0){return ;}},LoadStepLine:function c(AP){this.mLineSeriesOptions[AP].mShowStepLine=false;},GenerateMapAndListForSeries:function p(AU){var AQ=this.mChartContextPtr,AP=[],AR,AV,AW,AT,Aa,AZ,AX;if(this.mGroupCount<2&&this.mSupportDiscretePoints){y.call(this,AU);return ;}AO.call(this,AU);this.GetLinePointSet(AU,AP);AR=w.call(this);if(!this.mpABLPlotContext.mABLOptions.mUseDepth){var AY=this.mGraphObjectList,AS=this.mLineCollections;if(AP&&AP.length){if(this.mpABLPlotContext.mABLOptions.mCurvedLines){AX=AP.length;for(AV=0;AV<AX;++AV){AW=new f.TripleId({ObjectId:AC.DssGraphDataLine,SeriesId:this.mSeriesInfo[AU].mSeriesId,GroupId:AV});AT=null;if(AT){AY.push(AT);}if(AR){this.mGraphObjectMap.push(AW,AT);AS[AU].AddGraphObject(AT);}}}else{AX=AP.length;for(AV=0;AV<AX;++AV){if(AQ.mIsGraphMatrix){this.mGroupIdMapPerSeries=this.mVecGroupIdMapPerSeries[AV];}else{this.mGroupIdMapPerSeries.splice(0,this.mGroupIdMapPerSeries.length);}Aa=false;AZ=T.call(this,AU,AV,AP);AT=AZ.Obj;Aa=AZ.AlreadyInMapAndList;if(AQ.mIsTimeSeriesChart){AT.mIsDetectable=false;}if(!Aa&&AT){AY.push(AT);if(AR){this.AddToMap(AT);AS[AU].AddGraphObject(AT);}}}}}}},GenerateByValueAxisAndGroup:function AB(AV,AR){var AS,AZ,AT=[],Aa=[],AX=[],AW,AP,AY,AQ,AU;if(this.mGroupCount<2){return ;}if((AR===-1)||this.mHasNegativeValue){this.GenerateOrderedDepthLine(AV,AR,false);}else{AZ=this.IsReverseSeriesOrder(AV);AU=this.mSeriesInfo.length;for(AS=0;AS<AU;++AS){AW=AZ?this.mSeriesInfo.length-AS:AS;if(this.mSeriesInfo[AW].mValueAxis===AV){AP=new f.Point2D();AY=new f.Point2D();if(this.GetLinePoint(AW,AR-1,AP)&&this.GetLinePoint(AW,AR,AY)){AT.push([AP,AY]);Aa.push(AW);AX.push(true);}}}AU=AT.length;for(AS=0;AS+1<AU;++AS){AQ=new f.Vector2D({x:AT[AS+1][0],y:AT[AS+1][1]});if(this.PriorToNextSeries(AQ,AR)){this.GenerateDepthLine(Aa[AS],AR,AT[AS]);AX[AS]=false;}}for(AS=AT.length-1;AS>=0;--AS){if(AX[AS]){this.GenerateDepthLine(Aa[AS],AR,AT[AS]);}}}},GetLinePointSet:function e(AV,AR){var AU=[],AT=this.mSupportDiscretePoints?0:1,AS,AQ,AP,AW=this.mGroupCount;for(AS=0;AS<AW;++AS){AP=new f.Point2D();if(this.GetLinePoint(AV,AS,AP)){AU.push(AP);}else{if(AU.length>AT){AQ=AU.slice(0);AR.push(AQ);}AU.length=0;}}if(AU.length>AT){AR.push(AU);}},GetLinePoint:function AF(AW,Ab,AU){var AS=this.mChartContextPtr,AY=0,AX=0,Aa,AV,AQ,AP=false,Ac,AT,AR,AZ;if(!this.GetFinalLinePoint(AW,Ab,AU,false)){return false;}if(this.mProgress===1){return true;}if(this.mUseDepth){AZ=this.mpABLPlot.GetDepthOffset(this.mSeriesInfo[AW].mSeriesIndex);AY=AZ.OffsetX;AX=AZ.OffsetY;}if(AS.mOldChartManager!==null){AV=AS.mOldChartManager;Aa=AV.GetGraphObjectManager(this.mTripleId,true);}AQ=new f.Point2D({Point2D:AU});if(Aa!==null){Ac=Aa;AP=Ac.GetFinalLinePoint(AW,Ab,AQ,true);if(!AP){AT=Ac.mpABLPlotContext.mCategoryAxisPtr.getGroupMiddlePos(Ab);if(this.mpABLPlotContext.mABLOptions.mOrientation===J.OR_HORIZONTAL){if(this.mDeviceDataArea){if(AT>this.mDeviceDataArea.y+this.mDeviceDataArea.height){AT=this.mDeviceDataArea.y+this.mDeviceDataArea.height;}if(AT<this.mDeviceDataArea.y){AT=this.mDeviceDataArea.y;}AQ.y=AT+AX;}}else{if(this.mDeviceDataArea){if(AT>this.mDeviceDataArea.x+this.mDeviceDataArea.width){AT=this.mDeviceDataArea.x+this.mDeviceDataArea.width;}if(AT<this.mDeviceDataArea.x){AT=this.mDeviceDataArea.x;}AQ.x=AT+AY;}}}}if(!AP){AR=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[AW].mValueAxis].GetBasePosition();if(this.mpABLPlotContext.mABLOptions.mOrientation===J.OR_HORIZONTAL){AQ.x=AR+AY;}else{AQ.y=AR+AX;}}AU.x=AQ.x+(AU.x-AQ.x)*this.mProgress;AU.y=AQ.y+(AU.y-AQ.y)*this.mProgress;return true;},GetFinalLinePoint:function D(AV,Ac,AQ,Ab){var Ad,AT=this.mVecSeriesPoints,AU=this.mpABLPlotContext,AR=this.mpABLPlot,AY=0,AX=0,AW,AP,Aa,AZ;if(Ab&&(AV>=AT.length||Ac>=AT[AV].length)){return false;}while(AT.length<=AV){Ad=[];AT.push(Ad);}while(AT[AV].length<=Ac){AT[AV].push(U);}var AS=AT[AV][Ac];if(AS.x!==-2&&!!AS.dangling===false){if(AS.x===-1&&AS.isNull){return false;}AQ.ResetPoint(AS);return true;}if(Ab){return false;}AT[AV][Ac]=C;if(this.mUseDepth){AZ=this.mpABLPlot.GetDepthOffset(this.mSeriesInfo[AV].mSeriesIndex);AY=AZ.OffsetX;AX=AZ.OffsetY;}AW=this.GetData(AV,Ac);if(AW===null){return false;}K.mSeriesId=this.mSeriesInfo[AV].mSeriesId;K.mGroupId=Ac;if(this.mDatasetPtr.GetShapeBySeries(K.mSeriesId)===AE._LINE){if(this.mChartContextPtr.checkColorByAndSizeByValue(K,this.mDatasetPtr,this.mHasColorBy,this.mHasSizeBy)===false){return false;}}AP=Math.floor(AU.mCategoryAxisPtr.getGroupMiddlePos(Ac));Aa=AU.mValueAxis[this.mSeriesInfo[AV].mValueAxis].GetPositionByValue(AW);if(Aa===null){return false;}if(AU.mABLOptions.mOrientation===J.OR_HORIZONTAL){AQ.x=Aa+AY;AQ.y=AP+AX;}else{AQ.x=AP+AY;AQ.y=Aa+AX;}AT[AV][Ac]=new f.Point2D({Point2D:AQ});++AR.DPCount;if(AR.seriesDPCount[this.mSeriesInfo[AV].mSeriesId]===undefined||AR.seriesDPCount[this.mSeriesInfo[AV].mSeriesId]===null){AR.seriesDPCount[this.mSeriesInfo[AV].mSeriesId]=1;}else{++(AR.seriesDPCount[this.mSeriesInfo[AV].mSeriesId]);}return true;},GenerateDepthLine:function Y(AR,AQ,AP){},GenerateLineCollections:function R(){var AP=this.mChartContextPtr,AR,AQ,AW,AV,AS,AY,AT,AU=AP.GetGraphMatrixContext(),AX=AP.mIsGraphMatrix;AQ=this.mUseDepth?E.CT_DEPTH_LINE_OR_LINE_MARKER:E.CT_LINE;AW=this.mUseDepth?AC.DssGraphRiser:AC.DssGraphDataLine;AV=this.mSeriesInfo.length;if(AX){if(AP.isLegendByGroup()){AV=this.mGroupCount;}AQ=E.CT_LINE;}for(AR=0;AR<AV;++AR){AY=this.mSeriesInfo[AR].mSeriesId;AS=new f.TripleId({ObjectId:AW,SeriesId:AY});if(AU.isCombinationChart()===false&&AU.isPieOrRingShape()){AT=null;}else{AT=new f.GraphCollectionObject({TripleId:AS,GraphObjectManager:this,CollectionType:AQ});}this.mLineCollections.push(AT);if(this.mpABLPlotContext.mABLOptions.mMajorGraphType!==n.MGT_PARETO||this.mUseDepth){if(!AX){this.AddLegendMarkerToCollection(AR,this.mLineCollections[AR],true,this.mLineSeriesOptions[AR].mShowMarkers,this.mLineSeriesOptions[AR].mMarkerShape,this.mpABLPlotContext.mABLOptions.mShowLines);}}}},GenerateMarkerCollections:function A(){var AQ,AT,AR=this.mLineSeriesOptions,AP=this.mGraphObjectMap,AS=this.mMarkerCollections,AU,AV;AQ=this.mSeriesInfo.length;for(AT=0;AT<AQ;++AT){if(AR[AT].mShowMarkers&&(!this.mUseDepth)){AU=new f.TripleId({ObjectId:AC.DssGraphRiser,SeriesId:this.mSeriesInfo[AT].mSeriesId});AV=new f.GraphCollectionObject({TripleId:AU,GraphObjectManager:this,CollectionType:E.CT_DEPTH_LINE_OR_LINE_MARKER});AP.push(AU,AV);AS.push(AV);}else{AS.push(null);}}},CreateSeriesMarkers:function G(AR){var AQ,AP,AS;AS=this.mGroupCount;for(AQ=0;AQ<AS;++AQ){AP=new f.Point2D();if(this.GetLinePoint(AR,AQ,AP)){this.CreateMarker(AR,AQ,this.mMarkerCollections[AR],AP);}}},CreateAllSeriesLabels:function AG(AQ){var Ab,Aa,AV,AU,AT,Ad,AY,Ac,AZ,AS,AX,AP=this.mpABLPlotContext,AW=AP.mABLOptions,AR=AP.mSeriesOptions,Ae=this.mGroupCount;if(this.mChartContextPtr.mIsGraphMatrix){AM.call(this,AQ);return ;}AX=this.mSeriesInfo.length;for(AV=0;AV<AX;++AV){if(AR[this.mSeriesInfo[AV].mSeriesIndex].mShowDataLabels){Ab=new f.TripleId({ObjectId:AC.DssGraphDataText,SeriesId:this.mSeriesInfo[AV].mSeriesId});Aa=new f.GraphCollectionObject({TripleId:Ab,GraphObjectManager:this,CollectionType:E.CT_TEXT});this.mTextCollection.push(Aa);for(AU=0;AU<Ae;++AU){AT=this.createRiserLabel(AV,AU,Aa);if(AT!==null){Ad=new f.Point2D();AY=new f.Point2D();this.GetMinMaxPoint(AV,AU,Ad,AY);this.MoveLabel(AU,AT,AY,Ad,AV);}}}}if((AW.mMajorGraphType===n.MGT_LINE)&&(AW.mLayout===Q.LO_STACKED)&&(!AW.mShowCumulate)&&(AW.mShowValue)&&(AW.mShowTotal)){Ab=new f.TripleId({ObjectId:AC.DssGraphDataTextStackTotal,SeriesId:this.mTripleId.mSeriesId});Aa=new f.GraphCollectionObject({TripleId:Ab,GraphObjectManager:this,CollectionType:E.CT_TEXT});this.mTextCollection.push(Aa);if(AW.mDualAxes){for(AV=0;AV<Ae;++AV){Ac=this.CreateTotalLabel(F.VA_Y1,AV,Aa);AZ=this.CreateTotalLabel(F.VA_Y2,AV,Aa);if(Ac!==null){Ad=new f.Point2D();AY=new f.Point2D();AS=this.GetUpmostIndexByValueAxisAndGroup(F.VA_Y1,AV);this.GetMinMaxPoint(AS,AV,Ad,AY);this.MoveLabel(AV,Ac,AY,Ad,AS);}if(AZ!==null){Ad=new f.Point2D();AY=new f.Point2D();AS=this.GetUpmostIndexByValueAxisAndGroup(F.VA_Y2,AV);this.GetMinMaxPoint(AS,AV,Ad,AY);this.MoveLabel(AV,AZ,AY,Ad,AS);}}}else{for(AV=0;AV<Ae;++AV){AT=this.CreateTotalLabel(F.VA_Y1,AV,Aa);if(AT!==null){Ad=new f.Point2D();AY=new f.Point2D();AS=this.GetUpmostIndexByValueAxisAndGroup(F.VA_Y1,AV);this.GetMinMaxPoint(AS,AV,Ad,AY);this.MoveLabel(AV,AT,AY,Ad,AS);}}}}},CreateMarker:function AK(AQ,AR,AS,AV){var AP=this.mChartContextPtr,AT,AY,AU;AT=new f.TripleId({ObjectId:AC.DssGraphDataMarker,SeriesId:this.mSeriesInfo[AQ].mSeriesId,GroupId:AR});if(AP.mIsTimeSeriesChart){var AX=this.GetData(AQ,AR-1);var AW=this.GetData(AQ,AR+1);if((AR>0&&AX!==null)||(AR<this.mGroupCount-1&&AW!==null)){return ;}AY=4;AU=new f.MarkerObject({TripleId:AT,GraphObjectManager:this,MarkerPosition:AV,MarkerShape:AD.DssGraphMarkerShapeCircle,IsIsometric:true,MarkerSize:AY,GraphCollectionObject:AS,IsDialogSize:false});AS.AddGraphObject(AU);this.mGraphObjectList.push(AU);}else{if(AP.mIsGraphMatrix){this.CreateOneDataMarker(AQ,AR,AS,AV,AR);}else{}}},GetMinMaxPoint:function AN(AU,AT,AR,AS){var AQ,AV,AP;AQ=new f.Point2D();if(!this.GetFinalLinePoint(AU,AT,AQ,false)){return ;}AV=this.mChartContextPtr.dialogSizeToPixelSize(this.mLineSeriesOptions[AU].mMarkerSize);AP=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[AU].mValueAxis].IsReverseOrder();if(this.mIsVertical){if(AP){AR.Reset(AQ.x,AQ.y-AV);AS.Reset(AQ.x,AQ.y+AV);}else{AR.Reset(AQ.x,AQ.y+AV);AS.Reset(AQ.x,AQ.y-AV);}}else{if(AP){AR.Reset(AQ.x+AV,AQ.y);AS.Reset(AQ.x-AV,AQ.y);}else{AR.Reset(AQ.x-AV,AQ.y);AS.Reset(AQ.x+AV,AQ.y);}}},GetPointPair:function o(AS,AQ,AR,AP){return this.GetLinePoint(AS,AQ-1,AR)&&this.GetLinePoint(AS,AQ,AP);},GenerateOrderedDepthLine:function q(AR,AP,AQ){},GenerateInterpolationFrame:function X(AQ){var AT,AR,AP,AS;this.mProgress=AQ;AT=this.mGraphObjectList.length;AP=this.mGraphObjectList.concat();this.mGraphObjectList.splice(0,AT);for(AR=0;AR<AT;++AR){AS=AP[AR];if(this.mChartContextPtr.mUseAnimation&&!this.mUseDepth){AS.SetAnimationEnable(true);}AS.SetProgress(AQ);this.GenerateFrameInOnePlot(AS,AQ<0.5);}this.mGraphObjectList=AP.concat();this._super(AQ);},GenerateFrameInOnePlot:function j(AY,AZ){var AR=this.mChartContextPtr,AW=AR.GetGraphMatrixContext(),AQ=this.mpABLPlotContext,AU=AQ.mABLOptions,AT,Ad,Ab,AV,AP,Aa=this.mGroupCount;if(this.mIsByValueAxis){var AX=F.VA_BOTH;if(AU.mLayout===Q.LO_STACKED){if(AU.mCurvedLines){this.GenerateByValueAxisAndGroup(AX,-1);}else{Ad=this.IsReverseGroupOrder();for(AT=1;AT<this.mGroupCount;++AT){Ab=Ad?Aa-AT:AT;this.GenerateByValueAxisAndGroup(AX,Ab);}}}else{var Ac=this.mSeriesInfo,AS=this.mSeriesInfo.length;for(AT=0;AT<AS;++AT){if(Ac[AT].mValueAxis===AX){this.GenerateMapAndListForSeries(AT);}}}}else{if(this.mpABLPlot.isAbsoluteOrCluster()||!this.mUseDepth){AV=this.mSeriesInfo.length;for(AT=0;AT<AV;++AT){if(AU.mShowLines){this.GenerateMapAndListForSeries(AT);}if(!(AR.mIsGraphMatrix&&AW.isPieOrRingShape())){this.CreateSeriesMarkers(AT);this.mHasCreatedMarkers=true;}}}else{if(AU.mShowLines){if(AU.mCurvedLines){this.GenerateByValueAxisAndGroup(F.VA_Y2,-1);this.GenerateByValueAxisAndGroup(F.VA_Y1,-1);}else{Ad=this.IsReverseGroupOrder();for(AT=1;AT<Aa;++AT){Ab=Ad?Aa-AT:AT;this.GenerateByValueAxisAndGroup(F.VA_Y2,Ab);}for(AT=1;AT<Aa;++AT){Ab=Ad?Aa-AT:AT;this.GenerateByValueAxisAndGroup(F.VA_Y1,Ab);}}}}}if(AR.mIsGraphMatrix===false){if(!this.mHasCreatedMarkers){AV=this.mSeriesInfo.length;for(AT=0;AT<AV;++AT){this.CreateSeriesMarkers(AT);}}}AP=this.mGraphObjectList.length;for(AT=0;AT<AP;++AT){AY.AddGraphObject(this.mGraphObjectList[AT],AZ);}this.mGraphObjectList.splice(0,this.mGraphObjectList.length);}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","TripleId","Point2D","Vector2D","Polygon2D","SeriesRenderer","CategoryPlot","MarkerObject","NumberObject","Plot","ChartConstants","GraphObjectAggregation","DataLabelManager");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumDSSExtraGraphObject","EnumMajorGraphType","EnumLayout","EnumValueAxis","EnumShowFace","EnumAttachedPointsStyle","EnumPictureFormatType","EnumImageUsage");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject","EnumShapeType","EnumDSSGraphFillEffect","EnumDSSGraphMarkerShape");var i=mstrmojo.chart,d=i.ChartConstants,O=mstrmojo.chart.enums,S=O.EnumAttachedPointsStyle,C=O.EnumCollectionType,o=O.EnumMajorGraphType,T=O.EnumLayout,D=O.EnumValueAxis,y=O.EnumDSSExtraGraphObject,J=O.EnumImageUsage,x=O.EnumPictureFormatType,b=mstrmojo.chart.model,V=b.enums,AA=V.EnumDSSGraphObject,AB=V.EnumDSSGraphMarkerShape,AC=V.EnumShapeType,R=V.EnumDSSGraphFillEffect,w=i.gNullGroupId;var K=new i.Rect2D(),u=new i.TripleId();var A=new i.Point2D();A.Reset(-1,-1);A.isNull=true;function t(){var AL,AK,AJ,AM,AN,AI=this.mAreaCollection;AI.splice(0,AI.length);AL=this.mIsVertical?C.CT_VERTICAL_AREA:C.CT_HORIZONTAL_AREA;AK=this.mSeriesInfo.length;for(AJ=0;AJ<AK;++AJ){AM=new i.TripleId({ObjectId:AA.DssGraphRiser,SeriesId:this.mSeriesInfo[AJ].mSeriesId});AN=new i.GraphCollectionObject({TripleId:AM,GraphObjectManager:this,CollectionType:AL});AI.push(AN);this.AddToMap(AI[AJ]);this.AddLegendMarkerToCollection(AJ,AI[AJ]);}}function F(AJ){var AO,AK,AN,AM,AL,AI,AP;AO=this.mSeriesInfo[AJ].mSeriesId;AN=new i.TripleId({ObjectId:AA.DssGraphDataText,SeriesId:AO,GroupId:w});AK=new i.GraphCollectionObject({TripleId:AN,GraphObjectManager:this,CollectionType:C.CT_TEXT});this.mTextCollection.push(AK);AM=this.mFinalSeriesPolygons[AJ];AP=this.mGroupCount;for(AL=0;AL<AP;++AL){if(AM[AL].x!==-1){AI=this.createRiserLabel(AJ,AL,AK);this.MoveLabel(AL,AI,AM[AL],AM[2*this.mGroupCount-1-AL],AJ);}}}function B(AN,AL){var AK,AM,AI,AJ;for(AK=0;AK<this.mGroupCount;++AK){AM=this.CreateTotalLabel(AN,AK,AL);if(AM!==null){AI=this.GetUpmostIndexByValueAxisAndGroup(AN,AK);AJ=this.mFinalSeriesPolygons[AI];this.MoveLabel(AK,AM,AJ[AK],AJ[2*this.mGroupCount-1-AK],AI);}}}function e(){var AK,AJ,AO,AM,AI,AN=this.mpABLPlotContext,AL=AN.mABLOptions;AK=this.mSeriesInfo.length;for(AJ=0;AJ<AK;++AJ){if(AN.mSeriesOptions[this.mSeriesInfo[AJ].mSeriesIndex].mShowDataLabels){F.call(this,AJ);}}if(AL.mMajorGraphType===o.MGT_AREA&&AL.mLayout===T.LO_STACKED&&!AL.mShowCumulate&&AL.mShowValue&&AL.mShowTotal){AM=this.mpManager.mTripleId;AO=new i.TripleId({ObjectId:AA.DssGraphDataTextStackTotal,SeriesId:AM.mSeriesId,GroupId:w});AI=new i.GraphCollectionObject({TripleId:AO,GraphObjectManager:this,CollectionType:C.CT_TEXT});this.mTextCollection.push(AI);B.call(this,D.VA_Y1,AI);if(AL.mDualAxes){B.call(this,D.VA_Y2,AI);}}}function p(){}function l(AI){var AJ=AI,AL=this.mpABLPlotContext.mABLOptions.mLayout,AK=this.mChartContextPtr.mIsGraphMatrix;if(AK&&(AL===T.LO_STACKED||AL===T.LO_PERCENT)){if(AI>=0&&AI<this.mSeriesDrawingOrder.length){AJ=this.mSeriesDrawingOrder[AI];}}return AJ;}function G(AJ){var AK=0,AI=0;this.mGroupIdMapPerSeries.splice(0,this.mGroupIdMapPerSeries.length);while(AK<this.mGroupCount){if(AJ[AK].x===-1){++AK;continue;}this.mGroupIdMapPerSeries[AI]=AK;++AK;AI++;}}function j(AL){this.mGroupRangeList.splice(0,this.mGroupRangeList.length);if(AL.length===0){return ;}var AK=0,AO,AN,AJ,AM,AI;AI=AL.length;for(AM=0;AM<AI;++AM){AO=AK+AL[AM].length/2;AN=this.getCorrectGroupIdInSeriesPoints(AK,AK);AJ=this.getCorrectGroupIdInSeriesPoints(AO-1,AO-1);this.mGroupRangeList.push({Start:AN,End:AJ});AK=AO;}}function L(AQ,AO){var AU=[],AR=[],AV,AT,AL,AK,AS,AJ=this.mChartContextPtr,AN=AJ.mIsGraphMatrix,AP=AJ.mIsTimeSeriesChart;AV=0;AT=AQ.length;AS=(AP||AN)?0:1;for(AL=0;AL*2<=AT;++AL){if(AQ[AL].x!==-1){continue;}if(AL-AV>AS){var AI=2*(AL-AV);for(AK=AV;AK<AL;++AK){AU[AK-AV]=AQ[AK];AU[AI-1-(AK-AV)]=AQ[AT-1-AK];}AR.push(AU);AO.push(AU);AU=[];}AV=AL+1;}if(AV<AT/2){var AW=AT/2-AV;if(AW>AS){if(AV===0){AR.push(AQ);AO.push(AQ);}else{if(AV<AT/2){var AM=AW*2,AX=AQ.slice(AV,AV+AM);AR.push(AX);AO.push(AX);}}}}G.call(this,AQ);j.call(this,AR);return AR;}function W(AI,AJ){if(AI<0||AI>=this.mGroupRangeList.length){return AJ;}return this.mGroupRangeList[AI].Start;}function AD(AM,AJ,AP){var AL=new i.TripleId({TripleId:AM}),AK=null,AO=this.mChartContextPtr;if(AJ.length===2){AL.mObjectId=AA.DssGraphDataMarker;var AN=4,AI=AB.DssGraphMarkerShapeCircle;AK=new i.MarkerObject({TripleId:AL,MarkerPosition:AJ[0],MarkerShape:AI,IsIsometric:true,MarkerSize:AN,GraphObjectManager:this,GraphCollectionObject:AP});return AK;}if(AO.mImageUsage===J.OBJECT_CLIP_COMPUTATION){return AK;}AK=new i.PolygonObject({TripleId:AL,GraphObjectManager:this,Polygon:AJ,ParentObject:AP,Shape:AC._POLYGON});if(AO.mIsGraphMatrix&&this.mChartContextPtr.mImageFormat===x.SVG){AK.mPointsStyle=S.TOOLTIP_UPPER;}return AK;}function a(AI,AJ,AM){var AL=new i.TripleId({ObjectId:AA.DssGraphRiser,SeriesId:this.mSeriesInfo[AI].mSeriesId,GroupId:w}),AN=this.mAreaCollection[AI],AK;AK=AD.call(this,AL,AJ,AM,AN);if(AK){this.mGraphObjectList.push(AK);AN.AddGraphObject(AK);}}function AG(AT,AI,AQ){var AJ=this.mChartContextPtr,AN=AJ.GetGraphMatrixContext(),AU=AT.GetMaxMinDataInputPosition(),AR=AT.mTripleId.mObjectId,AO=AU.LowBoundary,AP=AU.HighBoundary,AL;if(this.mIsVertical){AL=(AR===AA.DssGraphY1Body)?"Y1":"Y2";}else{AL=(AR===AA.DssGraphX1Body)?"X1":"X2";}var AK=this.mClippedMarkerSize[AL],AS=AK.LowOffset,AM=AK.HighOffset;AU=AN.getClippedOffset(AO,AP,AQ,AI,!this.mIsVertical,AS,AM);AK.LowOffset=AS=AU.LowOffset;AK.HighOffset=AM=AU.HighOffset;}function z(AO,AR,AN){if(!this.mChartContextPtr.mIsGraphMatrix){return AO;}var AM,AL=0,AS=false,AK;if(AR.IsBaseAtZero()){AM=AR.GetPositionByValue(0);if(AM!==null){AL=AM;if(AR.isBaseLineQualified()){var AQ=AO.length;if(AQ%2===0&&AQ>=4){var AI=AQ/2,AP,AJ;AP=AO.slice(0,AI);AJ=AO.slice(AI,AO.length+1);if(AN&&AJ[0].y===AL){AS=true;for(AK=0;AK<AI;++AK){if(AP[AK].y!==AJ[AI-1-AK].y){AJ[AI-1-AK].y--;}}}if(!AN&&AJ[0].x===AL){AS=true;for(AK=0;AK<AI;++AK){if(AP[AK].x!==AJ[AI-1-AK].x){AJ[AI-1-AK].x++;}}}if(AS){AO.splice(0,AO.length);AO=AP.concat(AJ);}}}}}return AO;}function M(AM,AO){if(!this.mChartContextPtr.mIsGraphMatrix){return AM;}var AI=AM.length,AL;if(AI%2===0&&AI>=4){var AK=AI/2,AN,AJ;AN=AM.slice(0,AK);AJ=AM.slice(AK,AM.length+1);for(AL=0;AL<AK;++AL){if(AO){if(AN[AL].y!==AJ[AK-1-AL].y){AJ[AK-1-AL].y++;}}else{if(AN[AL].x!==AJ[AK-1-AL].x){AJ[AK-1-AL].x--;}}}AM.splice(0,AM.length);AM=AN.concat(AJ);return AM;}return AM;}function r(AW,AM,AS,AK){var AY=this.mChartContextPtr.mIsGraphMatrix,AZ,AX,Ab,AP;if(!AY){a.call(this,AW,AS,AK);}var AL=this.mpABLPlotContext.mValueAxis,AT=new i.TripleId({ObjectId:AA.DssGraphRiser,SeriesId:this.mSeriesInfo[AW].mSeriesId,GroupId:AM});if(AS.length===1){return ;}if(AS.length<=2){var AQ=this.drawSinglePoint(AT,AS[0],AC._CIRCLE,AC._AREA);AZ=AQ.Object;if(this.mDatasetPtr.showSeriesDatalabel(this.mSeriesInfo[AW].mSeriesId)){if(AZ!==undefined&&AZ!==null){this.mSinglePointObjects.push(AZ);}}AP=AQ.ShapeSize;if(AP===undefined){if(AZ){AP=AZ.getShapeSize();}else{AP=0;}}AX=AL[this.mSeriesInfo[AW].mValueAxis];if(AX){AG.call(this,AX,AS[0],AP);}}else{var AU=this.mHasColorBy&&this.mDatasetPtr.isGradientABL();AX=AL[this.mSeriesInfo[AW].mValueAxis];Ab=AS.slice(0);Ab=z.call(this,Ab,AX,this.mIsVertical);if(AT.mSeriesId!==0){Ab=M.call(this,Ab,this.mIsVertical);AZ=AD.call(this,AT,Ab,AK,null);}else{AZ=AD.call(this,AT,Ab,AK,null);}if(AU){var AV=Ab;if(AZ){var AN=this.prepareTransitionalGradient(AT,AV,AV.length/2),AO=AZ.GetFormatFill(),Aa=AO.transformToGradient(AN);AZ.SetFormatFill(Aa);if(AN.Effective){var AR=Aa.getGradient(),AJ=AZ.mFormatLinePtr.transformToGradientFromFill(AR,AV[0],AV[AV.length/2-1]);AZ.SetFormatLine(AJ);}}}var AI=AZ&&(AZ instanceof i.MarkerObject);if(AI){AX=AL[this.mSeriesInfo[AW].mValueAxis];if(AX){AP=AZ.getShapeSize();AG.call(this,AX,AS[0],AP);}}}if(AZ){this.mGraphObjectList.push(AZ);this.AddToMap(AZ);}}function g(AI,AK){var AN=AK.length/2,AM=AK.length-1,AL=[],AJ;if(AI.mSeriesId===0&&this.mIgnoreBasesSeriesBorder){delete this.mIgnoreBasesSeriesBorder;return null;}AL.push(AK[AM]);for(AJ=0;AJ<=AN;++AJ){AL.push(AK[AJ]);}return new i.PolyLineObject({TripleId:AI,GraphObjectManager:this,PolyLine:AL});}function I(AK,AS,AN){var AJ=this.mChartContextPtr,AT=this.mSeriesInfo[AK],AQ=AT.mSeriesId,AR=new i.TripleId({ObjectId:AA.DssGraphRiser,SeriesId:AQ,GroupId:AS}),AI,AL,AU,AM;if(AN.length<4){return ;}if(!AJ.mIsGraphMatrix){return ;}AI=this.GetGraphObject(AR);if(AI!==undefined&&AI!==null){AL=new i.TripleId({ObjectId:AA.DssGraphDataLine,SeriesId:AQ});AU=g.call(this,AL,AN,AK);if(AU){AM=AU.mFormatLinePtr;AM.mLineThickness=2;var AP=AI.mFormatLinePtr,AO=AI.GetFormatFill();if(AP){AM=mstrmojo.hash.copy(AP,AM);}else{if(AO){AM.mLineColor=AO.mSimpleColor;}}}if(AU){AU.mIsDetectable=false;this.mGraphObjectList.push(AU);}}}function v(AL,AS,AP){var AJ=this.mChartContextPtr,AK=this.mDatasetPtr,AN,AT=this.mSeriesInfo[AL],AR=AT.mSeriesId,AQ,AI,AM,AU,AO;if(AP.length<4){return ;}if(!AJ.mIsGraphMatrix){return ;}AN=AK.showSeriesDatalabel(AR);if(AN){AQ=new i.TripleId({ObjectId:AA.DssGraphRiser,SeriesId:AR,GroupId:AS});AI=this.GetGraphObject(AQ);if(AI!==undefined&&AI!==null){AM=new i.TripleId({ObjectId:AA.DssGraphDataLine,SeriesId:AR});AU=g.call(this,AM,AP,AL);if(AU===null){return ;}AO=AU.mFormatLinePtr;AO.mLineThickness=2;AO.mAlpha=255;this.mAreaBoundForDataLabel.push(AU);}}}function H(AI,AK){var AN,AO,AQ,AJ,AR=[],AM=this.mChartContextPtr.mIsGraphMatrix;var AL=l.call(this,AI);AN=this.mSeriesPolygons[AL];if(AN.length<4&&!AM){return ;}this.mGroupIdMapPerSeries.splice(0,this.mGroupIdMapPerSeries.length);this.mGroupRangeList.splice(0,this.mGroupRangeList.length);AO=L.call(this,AN,AR);AQ=AO.length;for(AJ=0;AJ<AQ;++AJ){var AP=-3;if(AM){AP=W.call(this,AJ,AP);}r.call(this,AL,AP,AO[AJ],AK);I.call(this,AL,AP,AR[AJ],AK);v.call(this,AL,AP,AR[AJ],AK);}}function k(){}function Q(AJ,AL){var AK=this.mSeriesPolygons[AJ];if(AK[AL-1].x===-1||AK[AL].x===-1){return ;}var AI=[];AI[0]=AK[AL-1];AI[1]=AK[AL];AI[2]=AK[AK.length-AL-1];AI[3]=AK[AK.length-AL];return AI;}function U(AO,AK){var AS,AP=[],AQ=[],AJ=[],AN,AL,AT,AR,AI,AM;if(this.mHasNegativeValue){k.call(this,AO,AK);return ;}AS=this.IsReverseSeriesOrder(AO);AN=this.mSeriesInfo.length;for(AM=0;AM<AN;++AM){AL=AS?AN-1-AM:AM;if(this.mSeriesInfo[AL].mValueAxis===AO){AT=Q.call(this,AL,AK);if(AT===undefined){continue;}AP.push(AT);AQ.push(AL);AJ.push(true);}}AR=AP.length;for(AM=0;AM+1<AR;++AM){if(AS){AI=new i.Vector2D({StartPoint:AP[AM][3],EndPoint:AP[AM][2]});}else{AI=new i.Vector2D({StartPoint:AP[AM][0],EndPoint:AP[AM][1]});}if(this.PriorToNextSeries(AI,AK)){p.call(this,AQ[AM],AP[AM],AK);AJ[AM]=false;}}for(AM=AR-1;AM>=0;--AM){if(AJ[AM]){p.call(this,AQ[AM],AP[AM],AK);}}}function m(AN){var AJ,AM,AL,AK=this.mSeriesInfo,AI=AK.length;if(this.mpABLPlot.isAbsoluteOrCluster()||!this.mUseDepth){for(AJ=0;AJ<AI;++AJ){if(AN===AK[AJ].mValueAxis||AN===D.VA_BOTH){H.call(this,AJ,this.mUseDepth);}}}else{AM=this.IsReverseGroupOrder();if(this.mpABLPlotContext.mABLOptions.mCurvedLines){k.call(this,AN,0);}else{for(AJ=1;AJ<this.mGroupCount;++AJ){AL=AM?this.mGroupCount-AJ:AJ;U.call(this,AN,AL);}}for(AJ=0;AJ<AI;++AJ){if(AN===AK[AJ].mValueAxis||AN===D.VA_BOTH){H.call(this,AJ,false);}}}}function Y(AJ,AK,AL,AI){if(AJ){if(AL){return AI.y<AK;}return AI.y<=AK;}if(AL){return AI.x>AK;}return AI.x>=AK;}function E(Ae){var AI=this.mpABLPlotContext,AO=this.mpABLPlot,AT=[],Al=0,Aj=0,Ab,Ah,AN,Ao,AW,AM,Ad,AU,AP,AZ,Ai,AR,Ak,AS,AL,Ag=false,AV=false,AX=false,Am=this.mpABLPlotContext.mABLOptions.mLayout,Af=this.mChartContextPtr.mIsGraphMatrix,AK=this.mGroupCount;if(this.mUseDepth){Ab=this.mpABLPlot.GetDepthOffset(this.mSeriesInfo[Ae].mSeriesIndex);Al=Ab.OffsetX;Aj=Ab.OffsetY;}AN=this.mSeriesInfo[Ae].mValueAxis;Ah=AI.mValueAxis[AN];AS=Ah.GetAxisOriginValue();AU=Ah.mOptions.mDrawFromZero;Ah.mOptions.mDrawFromZero=(AS===null||AS===0)&&(Ah.mOptions.mUseLogarithmicScale===false);AM=Ah.GetBasePosition(true);Ao=Ah.GetBaseValue(true);AL=Ah.GetPositionByValue(AS!==null?AS:0);if(AL===null){AL=-100;}AW=Ah.GetBasePosition(AS);for(Ad=0;Ad<AK;++Ad){AP=0;Ab=this.GetData(Ae,Ad);AZ=(Ab===null);if(Ab!==null){AP=Ab;++AO.DPCount;if(AO.seriesDPCount[this.mSeriesInfo[Ae].mSeriesId]===undefined||AO.seriesDPCount[this.mSeriesInfo[Ae].mSeriesId]===null){AO.seriesDPCount[this.mSeriesInfo[Ae].mSeriesId]=1;}else{++(AO.seriesDPCount[this.mSeriesInfo[Ae].mSeriesId]);}}Ai=0;Ab=Ah.GetPositionByValue(AP);if(Ab!==null){Ai=Ab;}if(Af&&AZ){AT[Ad]=A;AT[AK*2-Ad-1]=A;continue;}if((this.mIsAbsolute&&AZ)||Ab===null){AT[Ad]=A;AT[AK*2-Ad-1]=A;continue;}AR=AI.mCategoryAxisPtr.getGroupMiddlePos(Ad);if(!this.mIsAbsolute){var AQ=Am===T.LO_STACKED,AJ=Ah.mOptions.mUseCustomMinMax,An=Ah.mOptions.mUseLogarithmicScale;if(Ah.mOptions.mDrawFromZero||T.LO_PERCENT===Am||(AQ&&!AJ&&An)){if((AQ&&!AJ&&An)&&(Ae===0)){Ak=Ao;}else{Ak=0;Ab=this.GetData(Ae,Ad,true);if(Ab!==null){Ak=Ab;}}Ab=Ah.GetPositionByValue(Ak);if(Ab!==null){AM=Ab;}else{AT[Ad]=A;AT[AK*2-Ad-1]=A;continue;}}else{var AY=this.updateGroupStackInfoWithBase(AN,Ad,AS);var Aa=this.getSeriesOffsetIntoStackedInfo(AN,Ad,Ae);var Ap=AY[Aa];AM=Ah.ValueToPosition(AP>=Ao?Ap.Min:Ap.Max);Ai=Ah.ValueToPosition(AP>=Ao?Ap.Max:Ap.Min);}}if(Ai===AW&&AP!==Ao){if(this.mIsAbsolute&&this.mSeriesInfo.length===1){if(this.mIsVertical){Aj=AP>0?-1:1;}else{Al=AP>0?1:-1;}}else{if(Ae===0){this.mIgnoreBasesSeriesBorder=true;}}}if(this.mIsVertical){AT[Ad]=new i.Point2D({x:AR+Al,y:Ai+Aj});AT[AK*2-Ad-1]=new i.Point2D({x:AR+Al,y:AM+Aj});}else{AT[Ad]=new i.Point2D({x:Ai+Al,y:AR+Aj});AT[AK*2-Ad-1]=new i.Point2D({x:AM+Al,y:AR+Aj});}if(!AX&&Af){var Ac=AT[Ad];var Aq=Y.call(this,this.mIsVertical,AL,true,Ac);Ag=Ag||Aq;AV=AV||!Aq;Ac=AT[AK*2-Ad-1];Aq=Y.call(this,this.mIsVertical,AL,false,Ac);Ag=Ag||Aq;AV=AV||!Aq;AX=AV&&Ag;}}Ah.mOptions.mDrawFromZero=AU;return{POLYGON:AT,CROSS:AX};}function n(){var AL=this.mFinalSeriesPolygons,AR=this.mSeriesPolygons,AJ,AI,AK,AT,AS,AM=this.mpABLPlotContext.mABLOptions.mLayout;this.mSeriesDrawingOrder.splice(0,this.mSeriesDrawingOrder.length);AK=this.mSeriesInfo.length;for(AJ=0;AJ<AK;++AJ){var AN=E.call(this,AJ);var AP=AN.POLYGON;AS=AN.CROSS;AL.push(AP);if((AM===T.LO_STACKED||AM===T.LO_PERCENT)&&this.mChartContextPtr.mIsGraphMatrix){if(AS){this.mSeriesDrawingOrder.unshift(AJ);}else{this.mSeriesDrawingOrder.push(AJ);}}}AR.splice(0,AR.length);var AO;AK=AL.length;for(AJ=0;AJ<AK;++AJ){AO=[];AT=AL[AJ].length;for(AI=0;AI<AT;++AI){var AQ=new i.Point2D();this.GetAreaPointByProgress(AJ,AI,this.mProgress,AQ);AO.push(AQ);}AR.push(AO);}}function q(AJ){var AI;for(AI=0;AI<this.mSeriesInfo.length;++AI){if(AJ===this.mSeriesInfo[AI].mValueAxis||AJ===D.VA_BOTH){h.call(this,AI);}}}function h(AI){var AR=this.mSeriesInfo,AO=this.mSeriesPolygons[AI],AQ=this.mChartContextPtr.mIsGraphMatrix,AK,AN,AL,AS,AM=d.kVirtualMarkerSize,AJ,AP=AO.length;for(AJ=0;AJ*2<AP;++AJ){if(AO[AJ].x===-1){continue;}AK=this.mDatasetPtr.GetData(AR[AI].mSeriesId,AJ,0);if(AK===null||AK===undefined){continue;}if(AQ){this.CreateOneDataMarker(AI,AJ,null,AO[AJ],AJ);}else{AN=new i.Rect2D({x:AO[AJ].x-AM/2,y:AO[AJ].y-AM/2,height:AM,width:AM});AL=new i.TripleId({ObjectId:AA.DssGraphDataMarker,SeriesId:AR[AI].mSeriesId,GroupId:AJ});AS=new i.RectangleObject({TripleId:AL,GraphObjectManager:this,Area:AN,GraphCollectionObject:null,IsOnlyForToolTip:true,IsVirtualMarker:true});this.AddToMapAndList(AS);}}}function AH(AQ){var AO=this.mFinalSeriesPolygons[AQ.SeriesInfo],AP=0,AM=0,AI=this.mChartContextPtr,AN=AI.GetGraphMatrixContext(),AJ=AI.getUtiliy().tripleId,AL,AK;AJ.reset(u,AA.DssGraphRiser,AQ.SeriesId,AQ.GroupId);AL=AN.IsIsolatedDot(u);if(AO[AQ.GroupId].x===-1){return false;}if(AL){AK=this.GetGraphObject(u);if(AK!==null&&AK!==undefined&&AK.mMarkerSize!==undefined&&AK.mMarkerSize!==null){AP=AK.mMarkerSize;}AM=AP;}AQ.HostMarkerPoint=AO[AQ.GroupId];AQ.CenterXOffset=AP;AQ.CenterYOffset=AM;return true;}function c(){var AK,AJ=this.mDataLabels,AI=AJ.length;for(AK=0;AK<AI;++AK){AJ[AK].isValid=AH.call(this,AJ[AK]);}}function X(){var AI=this.mpABLPlot.dataLabelManager,AK=this.mChartContextPtr,AJ=new i.Rect2D({x:0,y:0,width:AK.mGraphWidth,height:AK.mGraphHeight});if(AI===null||AI===undefined){AI=this.mpABLPlot.dataLabelManager=new i.DataLabelManager({DataArea:AJ});AI.ChartContext=AK;}AI.SinglePointObjects=AI.SinglePointObjects.concat(this.mSinglePointObjects);AI.PolyLineObjects=AI.PolyLineObjects.concat(this.mAreaBoundForDataLabel);AI.seriesOptions=this.mpABLPlotContext.mSeriesOptions;return AI;}function P(){var AJ=this.mDataLabels,AI=AJ.length,AK;for(AK=0;AK<AI;++AK){if(AJ[AK].display){this.CreateOneDataMarker(AJ[AK].SeriesInfo,AJ[AK].GroupId,null,AJ[AK].HostMarkerPoint,-3,true);}}}function f(AJ){if(this.mChartContextPtr.mIsGraphMatrix){if(this.mDatasetPtr.showDatalabels()){this.CreateAllDataLabels();c.call(this);var AI=X.call(this);AI.PlaceDataLabels(this.mDataLabels,AJ);P.call(this);}}else{e.call(this);}}mstrmojo.chart.AreaSeriesRenderer=mstrmojo.declare(mstrmojo.chart.SeriesRenderer,null,{scriptClass:"mstrmojo.chart.AreaSeriesRenderer",mAreaCollection:null,mSeriesPolygons:null,mFinalSeriesPolygons:null,mIsAbsolute:false,mIsPolygonSplit:false,mSeriesDrawingOrder:null,mGroupRangeList:null,mSinglePointObjects:null,mHasCreatedMarkers:false,mAreaBoundForDataLabel:null,mDataLabels:null,init:function AF(AI){this._super(AI);this.mAreaCollection=[];this.mSeriesPolygons=[];this.mFinalSeriesPolygons=[];this.mSeriesDrawingOrder=[];this.mGroupRangeList=[];this.mIsAbsolute=this.mpABLPlot.isAbsoluteOrCluster();this.mProgress=1;this.mSinglePointObjects=[];this.mAreaBoundForDataLabel=[];this.mDataLabels=[];},GenerateMapAndList:function AE(AI){var AJ=this.mChartContextPtr;if(this.mSeriesInfo.length===0){return ;}t.call(this);n.call(this);var AO=new i.TripleId({ObjectId:y.DssGraphRendererLayer,SeriesId:D.VA_BOTH}),AM=new i.GraphObjectAggregation({TripleId:AO,GraphObjectManager:this}),AR=this.mGraphObjectList;AR.splice(0,AR.length);this.GenerateInterpolationFrame(1,AM);if(AJ.mUseAnimation){this.GenerateInterpolationFrame(0,AM);}AR.push(AM);if(AJ.mImageUsage===J.GENERAL){f.call(this,AI);this.GenerateTrendLine();this.GenerateRefLine();}if(this.mSeriesDrawingOrder&&this.mSeriesDrawingOrder.length){var AL=this.renderSequence,AK=this.mSeriesDrawingOrder,AS=this.mSeriesInfo,AN,AQ=this.mSeriesDrawingOrder.length;AL.splice(0,AL.length);for(AN=0;AN<AQ;AN++){var AP=AK[AN];AP=AS[AP].mSeriesId;AL[AP]=AN;}}else{this.populateRenderSequence();}},GenerateByValueAxis:function s(AP){var AM=[],AL=[],AJ,AI,AK=this.mGraphObjectList,AO,AN;if(this.mSeriesPolygons.length===0){t.call(this);n.call(this);}AO=new i.TripleId({ObjectId:y.DssGraphRendererLayer,SeriesId:AP,GroupId:w});AN=new i.GraphObjectAggregation({TripleId:AO,GraphObjectManager:this});AM.push(AN);this.GenerateInterpolationFrame(1,AN);if(this.mChartContextPtr.mUseAnimation){this.GenerateInterpolationFrame(0,AN);}AJ=AK.length;for(AI=0;AI<AJ;AI++){AL.push(AK[AI]);}AK.splice(0,AJ);AK.splice(0,AJ);for(AI=0;AI<AJ;++AI){AK.push(AL[AI]);}if(AP===D.VA_Y1){e.call(this);this.GenerateTrendLine();this.GenerateRefLine();}},GenerateInterpolationFrame:function Z(AI,AJ){var AQ=this.mSeriesPolygons,AN=this.mGraphObjectList,AU=AN.slice(0),AL=this.mFinalSeriesPolygons.length,AM,AK,AO,AS,AP,AT,AR;this.mProgress=AI;AQ.splice(0,AQ.length);for(AM=0;AM<AL;++AM){AO=[];AS=this.mFinalSeriesPolygons[AM].length;for(AK=0;AK<AS;++AK){AP=new i.Point2D();this.GetAreaPointByProgress(AM,AK,this.mProgress,AP);AO.push(AP);}AQ.push(AO);}AT=AJ.mTripleId.mSeriesId;if(AT===D.VA_BOTH){if(this.mpABLPlot.isAbsoluteOrCluster()||!this.mUseDepth){m.call(this,D.VA_BOTH);q.call(this,D.VA_BOTH);}else{m.call(this,D.VA_Y2);m.call(this,D.VA_Y1);q.call(this,D.VA_Y2);q.call(this,D.VA_Y1);}}else{m.call(this,AT===D.VA_Y1?D.VA_Y1:D.VA_Y2);q.call(this,AT===D.VA_Y1?D.VA_Y1:D.VA_Y2);}AJ.Clear(AI<0.5,AI>=0.5);AR=AN.length;for(AM=0;AM<AR;++AM){AJ.AddGraphObject(AN[AM],AI<0.5);}if(this.mChartContextPtr.mUseAnimation&&!this.mUseDepth){AJ.SetAnimationEnable(true);AJ.SetProgress(AI);}AN.splice(0,AN.length);AN=AN.concat(AU);this._super(AI);},GetAreaPointByProgress:function N(AN,AQ,AI,AS){var AO=this.mFinalSeriesPolygons,AK=this.mChartContextPtr,AR=false,AM=[],AL,AT;if(AO[AN][AQ].x===-1&&AO[AN][AQ].y===-1){AS.x=-1;AS.y=-1;return ;}if(!!AK.mpOldChartManager){AL=AK.mpOldChartManager;var AP=AL.GetGraphObjectManager(this.mTripleId,true);if(AP!==null){AT=AP;AM=AT.mFinalSeriesPolygons.slice(0);AR=true;}}if(AR&&AN<AM.length&&AQ<AM[AN].length&&!(AM[AN][AQ].x===-1&&AM[AN][AQ].y===-1)){AS.x=AM[AN][AQ].x+(AO[AN][AQ].x-AM[AN][AQ].x)*AI;AS.y=AM[AN][AQ].y+(AO[AN][AQ].y-AM[AN][AQ].y)*AI;}else{var AJ=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[AN].mValueAxis].GetBasePosition();if(this.mIsVertical){AS.x=AO[AN][AQ].x;AS.y=AJ-(AJ-AO[AN][AQ].y)*AI;}else{AS.x=AJ-(AJ-AO[AN][AQ].x)*AI;AS.y=AO[AN][AQ].y;}}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","CategoryPlot","StraightLineObject","MarkerObject","SeriesRenderer","BarSeriesRenderer","Plot");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumCollectionType","EnumMajorGraphType","EnumOrientation","EnumGraphMatrixThemeType","EnumValueAxis","EnumFontRotation","EnumFontRotation","EnumGenericDirection");mstrmojo.requiresCls("mstrmojo.chart.common.Utility");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphDataTextPosition","EnumDSSGraphObject");var W=mstrmojo.chart,J=W.enums,F=J.EnumOrientation,V=J.EnumGraphMatrixThemeType,B=J.EnumCollectionType,E=J.EnumFontRotation,P=mstrmojo.chart.model,L=P.enums,b=L.EnumDSSGraphDataTextPosition,i=L.EnumDSSGraphObject;var R=W.ChartConstants,G=mstrmojo.chart.common.Utility,a=0.9,K=5,Z=0,Q=2,d=3,M=4,D=100,X=10,C=3,f=1,I=1;function j(v){var p={},t,o,n=[0.1,0.2,0.3],r,u,s,q=this.mChartContextPtr;if(this.oneGroupBandColors){return this.oneGroupBandColors;}this.oneGroupBandColors=null;switch(this.bandOptions.ColorMode){case Q:t=7697781;break;case Z:r=new W.TripleId([i.DssGraphRiser,C,v]);u=this.GetGraphObject(r,true);if(u&&u.mFormatFillPtr){s=u.mFormatFillPtr.mSimpleColor;}else{s=q.GetColorValue(r,0,true);}t=s;break;case M:o=[16711680,65280,16776960];break;case d:o=[255,16776960,65280];break;default:break;}if(t){p.Color=t;}if(o){if(this.bandOptions.DescentLayout){p.Colors=o.reverse();}else{p.Colors=o;}}p.Alphas=n;this.oneGroupBandColors=p;return p;}function O(w,o){o=o||0;var u,z,q;u=this.mDatasetPtr.getBandDivision(w,o);if(u.Metrics&&u.Metrics.length){u=u.Metrics;z=[];var v,p=this.mpABLPlotContext,t=this.mSeriesInfo[o].mValueAxis,y=p.mValueAxis[t],s=y.mMinTick,n=y.mMaxTick-s,r=u.length;for(q=0;q<r;++q){if(q===r-1){v=1;}else{v=u[q];v=Math.max(v-s/n,0);v=Math.min(v,1);}z.push(v);}}else{if(u.Ratios&&u.Ratios.length){z=u.Ratios;}}return(z||[3/11,6/11,1]);}function A(w,o){o=o||0;if(this.oneGroupBandValues){return this.oneGroupBandValues;}var r=O.call(this,w,o),p=this.mpABLPlotContext,u=this.mSeriesInfo[o].mValueAxis,x=p.mValueAxis[u],t=x.mMinTick,n=x.mMaxTick-t,v=[],q,s=r.length;for(q=0;q<s;++q){v.push(t+r[q]*n);}this.oneGroupBandValues=v;return v;}function Y(){if(this.mBarWidth<=0){var s=this.mBarOptions,t=this.bandOptions;if(this.mBarColumns===-1){s.mGapWidth=0;this.mBarColumns=1;var o=this.mpABLPlot.mABLPlotContext.mCategoryAxisPtr.getGroupSize(),r=t.Width.Padding;this.mBarWidth=(o-2*r)*t.Width.Ratio;this.mBarWidth=Math.round(this.mBarWidth);var q=this.bandOptions.Width.Limit;this.mBarWidth=Math.min(this.mBarWidth,q.Max);this.mBarWidth=Math.max(this.mBarWidth,q.Min);this.mBarWidth=Math.round(this.mBarWidth);t.Width.Padding=r=Math.max((o-this.mBarWidth)/2,0);this.mSpaceBetweenRiser=0;this.mSpaceBetweenGroup=r*2;}}var n=this.mBarWidth,p;if(G.isIntegar(n)){p=n%3;this.bulletWidth=(n-p)/3+p;}else{this.bulletWidth=n/3;}}function m(z,x){var AE=z.seriesInfoID,v=AE>=C&&AE<C+f,r=x.mRect,t=0,p=this.mpABLPlotContext,y=p.mABLOptions,AC=p.mCategoryAxisPtr,u=z.groupID;this.hPostProcessOneBar(z,x);if(v){switch(y.mOrientation){case F.OR_VERTICAL:t=Math.abs(AC.getGroupMiddlePos(u)-r.GetBottomMiddle().x);r.x+=t;break;case F.OR_HORIZONTAL:t=Math.abs(AC.getGroupMiddlePos(u)-r.GetLeftMiddle().y);r.y-=t;break;}}else{var s=this.mSeriesInfo[z.seriesInfoID].mValueAxis,AD=p.mValueAxis[s],o=A.call(this,z.groupID),n=z.seriesInfoID,AB=o[n],q=AD.ValueToPosition(AB),AF=AD.ValueToPosition(AD.mMinTick);switch(y.mOrientation){case F.OR_VERTICAL:if(z.seriesInfoID!==0){AB=o[n-1];AF=AD.ValueToPosition(AB);}r.y=q;r.height=Math.abs(q-AF);break;case F.OR_HORIZONTAL:if(z.seriesInfoID!==0){AB=o[n-1];AF=AD.ValueToPosition(AB);}r.x=AF;r.width=Math.abs(q-AF);break;}var w=x.mFormatFillPtr,AA=j.call(this,z.groupID);w.mSimpleColor=AA.Color||AA.Colors[z.seriesInfoID]||255;w.mAlpha=AA.Alphas[z.seriesInfoID]*255||255;}}function S(q,u){var r=q.seriesInfoID,s=r>=C&&r<C+f,w={Bar:null,AddToMapAndList:false};var o=this.PrepareData(q,s);if(o===null||o===undefined){return w;}var t=this.hPrepareRect(q,o,s?this.bulletWidth:this.mBarWidth),v=t.Rect,n=t.AboveBase;if(s){if(!this.hUpdateBarRect(q,v,n,o)){return w;}}if(v.width<=0||v.height<=0){return w;}if(!u){var p=this.hPrepareRectangleObject(q,v,n);if(p){m.call(this,q,p);}w.Bar=p;w.AddToMapAndList=true;}return w;}function U(y,AB,u){u=u||0;AB=AB||false;if(AB){return ;}var r=this.mChartContextPtr,AE=r.GetGraphMatrixContext(),o=this.mpABLPlotContext,AA=this.mDatasetPtr.GetData(y.seriesInfoID,y.groupID),t=this.mSeriesInfo[u].mValueAxis,AD=o.mValueAxis[t],w=o.mABLOptions,x,z,AC=[],q=new W.Point2D(),p=new W.Point2D(),s=new W.TripleId([i.DssGraphRiser,0,y.groupID]),AF=new W.TripleId([i.DssGraphDataLine,y.seriesInfoID,y.groupID]);z=this.GetGraphObject(s);if(z){var n=z.GetBoundingRect();switch(w.mOrientation){case F.OR_VERTICAL:q.x=n.GetLeftMiddle().x;p.x=n.GetRightMiddle().x;q.y=p.y=AD.ValueToPosition(AA);break;case F.OR_HORIZONTAL:q.y=n.GetTopMiddle().y;p.y=n.GetBottomMiddle().y;q.x=p.x=AD.ValueToPosition(AA);break;}}else{var v=this.GetRiserStartPosAndSize(y);switch(w.mOrientation){case F.OR_VERTICAL:q.x=v.Start;p.x=v.Start+v.Size;q.y=p.y=AD.ValueToPosition(AA);break;case F.OR_HORIZONTAL:q.y=v.Start;p.y=v.Start+v.Size;q.x=p.x=AD.ValueToPosition(AA);break;}}AC.push(q);AC.push(p);x=new W.StraightLineObject({TripleId:AF,GraphObjectManager:this,StartPoint:AC[0],EndPoint:AC[1],GraphCollectionObject:null});if(x){this.AddToMapAndList(x);}}function H(v,y,AB,p,AE,q){var s,t,z,AA,r=this.mChartContextPtr,u=this.mIsVertical,AC;p=p||false;s=u?AB.GetTopMiddle():AB.GetRightMiddle();t=u?AB.GetBottomMiddle():AB.GetLeftMiddle();z=false;AA=this.GetData(y.seriesInfoID,y.groupID);if(AA!==null){AC=this.mpABLPlotContext.mValueAxis[this.mSeriesInfo[y.seriesInfoID].mValueAxis];z=(AA<0)^AC.IsReverseOrder();}else{return false;}if(AE===undefined){AE=0;}if(q===undefined){q=this.mIsVertical?r.mGraphHeight:r.mGraphWidth;}var n=v.GetBoundingRect(),AD=r.GetGraphMatrixContext();if(z){s.swapPoints(t);AE=0;q=AC.GetBasePosition();}var x=AD.getPadding(R.kLabelToChart),w=this.mpABLPlotContext.mABLOptions,o=w.mTextPosition;switch(o){case b.DssGraphDTPositionCenter:break;case b.DssGraphDTPositionInMin:case b.DssGraphDTPositionOutMax:if(p){if(z){if(u){s.y-=x;}else{s.x+=x;}}else{if(u){s.y+=x;}else{s.x-=x;}}}else{if(z){if(u){s.y+=x;}else{s.x-=x;}}else{if(u){s.y-=x;}else{s.x+=x;}}}break;case b.DssGraphDTPositionOutMin:case b.DssGraphDTPositionInMax:break;default:break;}this.MoveLabel(y.groupID,v,s,t,y.seriesInfoID);n=v.GetBoundingRect();return AD.checkLabelPaddingToBorder(n,AE,q,!this.mIsVertical);}function T(n,o){var p=o.rect;if(this.mIsVertical){return !(p.GetBottomMiddle().y>=n&&p.GetTopMiddle().y<=n);}return !(p.GetRightMiddle().x>=n&&p.GetLeftMiddle().x<=n);}function h(q,r,p,t){t=t||false;var o=new W.Rect2D({Rect:q}),n,s;if(this.mIsVertical){if(p){if(t){o.height-=Math.max(0,r-o.y);o.y=Math.max(r,o.y);}else{o.height+=Math.max(0,o.y-r);o.y=Math.min(r,o.y);}}else{if(t){o.height-=Math.max(0,r-o.y);}else{o.height+=Math.max(0,o.y-r);}}}else{if(p){if(t){o.width=r-o.x;}else{o.width=r-o.x;}}else{if(t){o.width-=Math.max(r-o.x,0);o.x=r;}else{o.width+=Math.max(o.x-r,0);o.x=r;}}}return{Valid:true,Rect:o,Low:n,High:s};}function k(z){var AC=new W.TripleId({ObjectId:i.DssGraphRiser,SeriesId:this.mSeriesInfo[z.seriesInfoID].mSeriesId,GroupId:z.groupID}),u=I>0,s=u,w,AF,AJ=this.GetGraphObject(AC),AG,AI,AD;if(!AJ){return null;}AF=AJ.GetBoundingRect();AC.mObjectId=i.DssGraphDataText;if(this.mSGMapLabel[AC.mSeriesId]===undefined){this.mSGMapLabel[AC.mSeriesId]=new W.GraphCollectionObject({TripleId:AC,GraphObjectManager:this,CollectionType:B.CT_TEXT});}var x=this.mSGMapLabel[AC.mSeriesId],AA=0,AB=true,r=this.mDatasetPtr.GetData(AC.mSeriesId,AC.mGroupId),t=this.createRiserLabel(z.seriesInfoID,z.groupID,x);if(t===null){return null;}if(s){var q=this.mDatasetPtr.GetData(C+f,AC.mGroupId);if(q){if(q===0||q===r){s=false;}else{s=(q>0&&r>=0)||(q<0&&r<=0);if(s){AB=(q>r&&r>=0)||(q<r&&r<=0);}}}else{s=false;}}for(AG=0;AG<2;++AG){if(w===true){return t;}if(AG===1){t.SetRotation(E.FR_90);}w=H.call(this,t,z,AF);if(s&&AB&&w){w=T.call(this,AA,t);if(!w){AI=h.call(this,AF,AA,(r>=0),false);if(AI.Valid){w=H.call(this,t,z,AI.Rect,false,AI.High,AI.Low);}}}if(!w){var v=this.mpABLPlotContext.mABLOptions,n=v.mTextPosition,AE=n;v.mTextCollection=b.DssGraphDTPositionInMax;w=H.call(this,t,z,AF,true);if(s&&!AB&&w){w=T.call(this,AA,t);if(!w){AI=h.call(this,AF,AA,(r>=0),true);if(AI.Valid){w=H.call(this,t,z,AI.Rect,true,AI.High,AI.Low);}}}var p=true,AH=false;if(this.mIsVertical){AH=AF.height<=t.height;}else{AH=AF.width<=t.width;}if(p){AD=this.mChartContextPtr.getDefaultContrastColor();var y=1,o=new W.FormatFont({Font:t.mFormatFontPtr});o.mStrokeColor=AD;if(AH){o.mFontStyle=y;}t.mFormatFontPtr=o;}v.mTextCollection=AE;}}return t;}function N(y,u,AA){var q=u,z={groupID:y,seriesInfoID:0},o=true,AC=true,v=true,n=true;var t,AB,x;if(o){for(t=0;t<f;++t){z.seriesInfoID=q[C+t];AB=S.call(this,z,AA);if(AB.Bar===null){return ;}}}else{return ;}if(AC){for(t=0;t<C;++t){z.seriesInfoID=q[t];AB=S.call(this,z,AA);}}if(v){for(t=0;t<I;++t){z.seriesInfoID=q[C+f+t];x=U.call(this,z,AA);}}if(n){for(t=0;t<f;++t){z.seriesInfoID=q[C+t];var w=this.mpABLPlotContext.mABLOptions,s=w.mShowValue,r=this.mpABLPlotContext.mSeriesOptions[this.mSeriesInfo[z.seriesInfoID].mSeriesIndex].mShowDataLabels;w.mShowValue=true;this.mpABLPlotContext.mSeriesOptions[this.mSeriesInfo[z.seriesInfoID].mSeriesIndex].mShowDataLabels=true;var p=k.call(this,z);if(p){p.mTripleId.mSeriesID=C+f+I;this.AddToMapAndList(p);}w.mShowValue=s;this.mpABLPlotContext.mSeriesOptions[this.mSeriesInfo[z.seriesInfoID].mSeriesIndex].mShowDataLabels=r;}}}function g(t){var o=this.IsReverseGroupOrder(),p,s=[],n,q;var r=this.mDatasetPtr.GetGroupCount();for(q=0;q<r;++q){p=q;if(o){p=r-1-p;}s=this.GetSeriesOrderByType(p,s,t);n=s.length;A.call(this,p,t);j.call(this,p);N.call(this,p,s);this.oneGroupBandValues=null;this.oneGroupBandColors=null;}this.GenerateTrendLine();this.GenerateRefLine();}mstrmojo.chart.BulletSeriesRenderer=mstrmojo.declare(mstrmojo.chart.BarSeriesRenderer,null,{scriptClass:"mstrmojo.chart.BulletSeriesRenderer",bandOptions:null,bulletWidth:0,oneGroupBandValues:null,oneGroupBandColors:null,labelCollection:null,init:function l(n){this._super(n);this.bandOptions={DescentLayout:false,Width:{Ratio:a,Padding:K,Limit:{Max:D,Min:X}},ColorMode:Q,PositionByMetric:false};},GenerateByValueAxis:function e(n){this.mGroupSize=this.mpABLPlotContext.mCategoryAxisPtr.getGroupSize();Y.call(this);if(this.mSeriesInfo.length===0){return ;}g.call(this,n);},PrepareData:function c(o,p){if(p){return this.hPrepareData(o);}var n=A.call(this,o.groupID);return n[o.seriesInfoID];}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.requiresClsP("mstrmojo.chart","TripleId","CategoryPlot","BarSeriesRenderer","AreaSeriesRenderer","LineSeriesRenderer","BulletSeriesRenderer","Plot","GraphObjectManager","TrendLineObject");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumMajorGraphType","EnumGraphSubType","EnumOrientation","EnumValueAxis","EnumAnchorPoint","EnumTrendLineIndex");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphDataTextShowType","EnumShapeType","EnumDSSGraphObject");var R=mstrmojo.hash,f=mstrmojo.chart,Z=f.ChartConstants,M=f.enums,g=M.EnumMajorGraphType,O=M.EnumLayout,i=M.EnumGraphSubType,K=M.EnumOrientation,E=M.EnumValueAxis,a=M.EnumTrendLineIndex,n=M.EnumAnchorPoint,k=f.gNullTripleId,W=mstrmojo.chart.model,Q=W.enums,t=Q.EnumShapeType,o=Q.EnumDSSGraphType,r=Q.EnumDSSGraphProperty,S=Q.EnumDSSGraphDataTextShowType,s=Q.EnumDSSGraphObject,V=0,b=1,p=2,AA=1,N=2,x=3,L=4;var AB=new f.TripleId();function AD(){var AE=this.mChartContextPtr,AF=this.mABLPlotContext,AI=AF.mABLOptions,AH,AM={positive:[],negative:[]},AJ=this.mAreaSeriesRendererPtr,AN=this.mBarSeriesRendererPtr,AL=this.mLineSeriesRendererPtr;if((AI.mLayout===O.LO_STACKED)||(AI.mLayout===O.LO_PERCENT)){if(AE.isCombinationChart()){var AK=this.mSeriesId,AG=AK.length;for(AH=0;AH<AG;++AH){if(AJ){AM=AJ.UpdateCumulateData(E.VA_Y1,AM,AK[AH]);}if(AN){AM=AN.UpdateCumulateData(E.VA_Y1,AM,AK[AH]);}if(AL){AM=AL.UpdateCumulateData(E.VA_Y1,AM,AK[AH]);}}if(AI.mDualAxes){AM={positive:[],negative:[]};for(AH=0;AH<AG;++AH){if(AJ){AM=AJ.UpdateCumulateData(E.VA_Y2,AM,AK[AH]);}if(AN){AM=AN.UpdateCumulateData(E.VA_Y2,AM,AK[AH]);}if(AL){AM=AL.UpdateCumulateData(E.VA_Y2,AM,AK[AH]);}}}}else{if(AJ){AM=AJ.UpdateCumulateData(E.VA_Y1,AM);}if(AN){AM={positive:[],negative:[]};AM=AN.UpdateCumulateData(E.VA_Y1,AM);}if(AL){AM={positive:[],negative:[]};AL.UpdateCumulateData(E.VA_Y1,AM);}if(AI.mDualAxes){AM={positive:[],negative:[]};if(AJ){AM=AJ.UpdateCumulateData(E.VA_Y2,AM);}if(AN){AM={positive:[],negative:[]};AM=AN.UpdateCumulateData(E.VA_Y2,AM);}if(AL){AM={positive:[],negative:[]};AL.UpdateCumulateData(E.VA_Y2,AM);}}}}}function U(){var AI=[],AG=[this.mAreaSeriesRendererPtr,this.mBarSeriesRendererPtr,this.mLineSeriesRendererPtr],AE=AG.length,AF,AH=0;for(AF=0;AF<AE;AF++){if(AG[AF]){AH=AG[AF].updateSeriesRenderSequence(AI,AH);}}return AI;}function w(){var AF=this.mABLPlotContext,AI=AF.mCategoryAxisPtr,AG=this.mDatasetPtr;this.DPCount=0;this.seriesDPCount.splice(0,this.seriesDPCount.length);if(this.mPartialRendering){var AE=this.mChartContextPtr,AK={PartialRendering:true,Group:{}},AH,AL,AJ=AE.mRenderingWindow,AM=AE.IsVertical();if(AM){AH=AJ.x;AL=AH+AJ.width;}else{AH=AJ.y;AL=AH+AJ.height;}AK.Group.Max=AI.getGroupSlotAt(AL)+1;AK.Group.Min=AI.getGroupSlotAt(AH)-1;AK.Data={Max:-1,Min:-1};AG.updateDataWindow(AK);}else{AG.resetDataWindow();}}function AC(){var AF=this.mDatasetPtr,AM,AG,AL=E.VA_Y1,AE,AJ,AH,AN,AK,AI;AM=AF.GetGroupCount();AG=this.mSeriesId.length;if(this.mChartContextPtr.IsDualAxis()){AE=AF.GetSeriesByValueAxis(E.VA_Y2);}else{AE=[];}for(AJ=0;AJ<AM;++AJ){AN=AK=0;for(AH=0;AH<AG;++AH){AI=AF.GetData(this.mSeriesId[AH],AJ);if(AI!==null&&AI!==undefined){if(AE.indexOf(this.mSeriesId[AH])!==-1){AL=E.VA_Y2;if(AI>0){AK+=AI;}else{AK+=Math.abs(AI);}}else{AL=E.VA_Y1;if(AI>0){AN+=AI;}else{AN+=Math.abs(AI);}}}}this.groupTotals[0].push(AN);this.groupTotals[1].push(AK);}}function c(){var AN=this.mABLPlotContext.mABLOptions,AH=this.mABLPlotContext.mSeriesOptions,AG=this.mChartContextPtr,AT,AK,AJ,AL,AM,AR,AP,AS=0;if(AG.mIsGraphMatrix&&AG.isCombinationChart()){var AQ,AI=this.mDatasetPtr.GetSeriesByShape(),AF=[AI.Tick,AI.Line,AI.Square,AI.Circle,AI.Bar,AI.Area,AI.Pie],AO=[t._TICKER,t._LINE,t._SQUARE,t._CIRCLE,t._BAR,t._AREA,t._PIE];AP=AF.length;for(AK=0;AK<AP;++AK){AQ=AF[AK];AR=AO[AK];if(AQ&&AQ.length){++AS;for(AJ=0;AJ<AQ.length;AJ++){AH[AQ[AJ]].mRealSeriesType=AR;}}}this.countOfTypes=AS;this.realComboChart=(AS>1);return ;}var AE=AG.getUtiliy().tripleId;AL=AH.length;for(AK=0;AK<AL;++AK){switch(AH[AK].mSeriesType){case t._AREA:AH[AK].mRealSeriesType=t._AREA;break;case t._BAR:AH[AK].mRealSeriesType=t._BAR;break;case t._LINE:if(AN.mCurvedLines){AH[AK].mRealSeriesType=t._LINE;}else{AM=AE.create(s.DssGraphRiser,this.mSeriesId[AK]);AT=AG.GetProperty(r.DssGraphShowStepLine,AM);if(AT!==undefined&&AT!==null){if(AT){AH[AK].mRealSeriesType=t._STEPLINE;}else{AH[AK].mRealSeriesType=t._LINE;}}}break;case t._PIE:AH[AK].mRealSereisType=t._LINE;break;case t._DEFAULT:if(AN.mMajorGraphType===g.MGT_AREA){AH[AK].mRealSeriesType=t._AREA;}else{if(AN.mMajorGraphType===g.MGT_BAR){AH[AK].mRealSeriesType=t._BAR;}else{if(AN.mCurvedLines){AH[AK].mRealSeriesType=t._LINE;}else{AM=AE.create(s.DssGraphRiser,this.mSeriesId[AK]);AT=AG.GetProperty(r.DssGraphShowStepLine,AM);if(AT!==undefined&&AT!==null){if(AT){AH[AK].mRealSeriesType=t._STEPLINE;}else{AH[AK].mRealSeriesType=t._LINE;}}else{AH[AK].mRealSeriesType=t._LINE;}}}}break;}}}function Y(AF){var AK=this.mChartContextPtr,AJ=this.mABLPlotContext,AH=AJ.mABLOptions,AE=AJ.mSeriesOptions,AI;var AG=AK.getUtiliy().tripleId;AG.reset(AB,s.DssGraphRiser,this.mSeriesId[AF]);if(!AK.mIsGraphMatrix){AI=AK.GetProperty(r.DssGraphSDRiserType,AB);if(AI){switch(AI){case V:AE[AF].mSeriesType=t._DEFAULT;break;case b:if(AH.mMajorGraphType===g.MGT_LINE){AE[AF].mSeriesType=t._BAR;}else{AE[AF].mSeriesType=t._LINE;}break;case p:if(AH.mMajorGraphType===g.MGT_AREA){AE[AF].mSeriesType=t._BAR;}else{AE[AF].mSeriesType=t._AREA;}break;default:AE[AF].mSeriesType=AI;break;}}}AE[AF].mValueAxis=this.LoadValueAxisInfo(AF,AH.mDualAxes);if(AK.mImageUsage!==0){return ;}this.LoadTrendLineProperties(this.mSeriesId[AF],AE[AF].mTrendLineOptions);if(AK.mIsGraphMatrix===false){AE[AF].mGraphNumberFormat=new f.ChartAdvFormat();AI=AK.GetProperty(-r.DssGraphFormatDataTextAdv,AB);if(AI){AK.ParseValueToFormat(AI,AE[AF].mGraphNumberFormat);}}}function I(){var AJ=this.mChartContextPtr,AI=this.mABLPlotContext,AF=AI.mABLOptions,AG;this.SetGraphType(AJ.mGraphType);if(AJ.mImageUsage!==0){return ;}if(AJ.mIsGraphMatrix){return ;}var AH=new f.TripleId({SeriesId:this.mTripleId.mSeriesId});AG=AJ.GetProperty(r.DssGraphShowDataText,AH);if(AG){AF.mTextShowType=AG;AF.mShowCumulate=(AG&S.DssGraphDataTextAbs)===0;}var AE=21001;AG=AJ.GetProperty(AE,AH);if(AG){AF.mUseGlobalAutoScale=AG;}AG=AJ.GetProperty(r.DssGraphDepthMode,AH);if(AG){AF.mUseDepth=AG;}AG=AJ.GetProperty(r.DssGraph2DDepth,AH);if(AG){AF.mDepth=AG;}AG=AJ.GetProperty(r.DssGraph2DAngle,AH);if(AG){AF.mDepthDirection=AG;}AG=AJ.GetProperty(r.DssGraphShowLine,AH);if(AG){AF.mShowLines=AG;}AG=AJ.GetProperty(r.DssGraphShowDivBiPolar,AH);if(AG){AF.mShowAxisSplit=AG;}AG=AJ.GetProperty(r.DssGraphShowDataLabel,AH);if(AG){AF.mShowLabel=AG;}AG=AJ.GetProperty(r.DssGraphShowDataValue,AH);if(AG){AF.mShowValue=AG;}AG=AJ.GetProperty(r.DssGraphShowDVPercent,AH);if(AG){AF.mShowAsPercentage=AG;}AG=AJ.GetProperty(r.DssGraphShowTotalValue,AH);if(AG){AF.mShowTotal=AG;}AG=AJ.GetProperty(r.DssGraphCurvedLines,AH);if(AG){AF.mCurvedLines=AG;}AG=AJ.GetProperty(r.DssGraphAxisDataTextPlace,AH);if(AG){AF.mTextPosition=AG;}AG=AJ.GetProperty(r.DssGraphSplitYPosition,AH);if(AG){AF.mSplitAxisPosition=AG;}}function y(AG){var AK=this.mChartContextPtr,AF=AK.GetGraphMatrixContext();if(AK.mIsGraphMatrix){if(AF.isCombinationChart()){var AH=AK.mImageUsage===mstrmojo.chart.enums.EnumImageUsage.OBJECT_CLIP_COMPUTATION;var AI=this.mDatasetPtr,AJ=AI.GetSeriesByShape(),AE=((AJ.Square&&AJ.Square.length)||(AJ.Circle&&AJ.Circle.length)||(AJ.Tick&&AJ.Tick.length));if((AJ.Bar&&AJ.Bar.length)){if(!AH||AI.onlyBarDataLabelEnabled()){this.mBarSeriesRendererPtr=new f.BarSeriesRenderer(R.copy(AG,{TripleId:f.BarRenderer0}));}}if(AJ.Area&&AJ.Area.length){this.mAreaSeriesRendererPtr=new f.AreaSeriesRenderer(R.copy(AG,{TripleId:f.AreaRenderer0}));}if((AJ.Line&&AJ.Line.length)||AE){if(!AH||(AH&&!(AJ.Line.length===1&&AI.GetGroupCount()===1))){this.mLineSeriesRendererPtr=new f.LineSeriesRenderer(R.copy(AG,{TripleId:f.LineRenderer0}));}}return true;}if(AK.IsBarChart()){if(AK.IsBulletChart()){this.mBarSeriesRendererPtr=new f.BulletSeriesRenderer(R.copy(AG,{TripleId:f.BarRenderer0}));}else{this.mBarSeriesRendererPtr=new f.BarSeriesRenderer(R.copy(AG,{TripleId:f.BarRenderer0}));}}else{if(AK.IsLineChart()){this.mLineSeriesRendererPtr=new f.LineSeriesRenderer(R.copy(AG,{TripleId:f.LineRenderer0}));}else{if(AK.IsAreaChart()){this.mAreaSeriesRendererPtr=new f.AreaSeriesRenderer(R.copy(AG,{TripleId:f.AreaRenderer0}));}else{return false;}}}return true;}this.mAreaSeriesRendererPtr=new f.AreaSeriesRenderer(R.copy(AG,{TripleId:f.AreaRenderer0}));this.mBarSeriesRendererPtr=new f.BarSeriesRenderer(R.copy(AG,{TripleId:f.BarRenderer0}));this.mLineSeriesRendererPtr=new f.LineSeriesRenderer(R.copy(AG,{TripleId:f.LineRenderer0}));return true;}function P(AP,AG){var AN=y.call(this,AP);if(!AN){return ;}var AL=this.mAreaSeriesRendererPtr,AR=this.mBarSeriesRendererPtr,AQ=this.mLineSeriesRendererPtr;var AJ=[[0,0],[0,0],[0,0],[0,0]],AE=[],AM,AI=0,AH=this.mDatasetPtr,AF=this.mChartContextPtr,AO=this.mSeriesId,AK=AO.length;if(AF.isCombinationChart()){AE=AH.GetSeriesIndexByPriority();}for(AM=0;AM<AK;++AM){if(AE&&AE.length>AM){AI=AE[AM];}else{AI=AM;}switch(AG[AI].mRealSeriesType){case t._AREA:if(AL){AL.AddSeries(AO[AI],AI,AJ[t._AREA][AG[AI].mValueAxis],AG[AI].mValueAxis);++AJ[t._AREA][AG[AI].mValueAxis];}break;case t._BAR:if(AR){AR.AddSeries(AO[AI],AI,AJ[t._BAR][AG[AI].mValueAxis],AG[AI].mValueAxis);++AJ[t._BAR][AG[AI].mValueAxis];}break;case t._TICKER:case t._LINE:case t._SQUARE:case t._CIRCLE:case t._PIE:if(AQ){AQ.AddSeries(AO[AI],AI,AJ[t._LINE][AG[AI].mValueAxis],AG[AI].mValueAxis);++AJ[t._LINE][AG[AI].mValueAxis];}break;default:}}}function C(AJ,AQ,AE,AP,AN,AL,AG,AH){var AF={},AK=AQ/2,AI=AE/2,AM=AH.IsVerticalAxis(),AO;if(AH.mTripleId.mObjectId===s.DssGraphY2Body){AO=AM?x:L;}else{AO=AM?AA:N;}AF.rect=new f.Rect2D({x:0,y:0,width:AE+2*AG,height:AQ+2*AG});switch(AJ){case 0:switch(AO){case AA:AF.xOffset=AG+AI;AF.yOffset=AP-AG-AK;AF.rect.y=AP-2*AG-AQ;AF.rect.x=0;break;case N:AF.xOffset=AP-AG-AI;AF.yOffset=AN-AG-AK;AF.rect.y=AN-2*AG-AQ;AF.rect.x=AP-2*AG-AE;break;case x:AF.xOffset=AL-AG-AI;AF.yOffset=AP-AG-AK;AF.rect.y=AP-2*AG-AQ;AF.rect.x=AL-2*AG-AE;break;case L:AF.xOffset=AP-AG-AI;AF.yOffset=AG+AK;AF.rect.y=0;AF.rect.x=AP-2*AG-AE;break;}break;case 1:switch(AO){case AA:AF.xOffset=AG+AI;AF.yOffset=AP+AG+AK;AF.rect.y=AP;AF.rect.x=0;break;case N:AF.xOffset=AP+AG+AI;AF.yOffset=AN-AG-AK;AF.rect.y=AN-2*AG-AQ;AF.rect.x=AP;break;case x:AF.xOffset=AL-AG-AI;AF.yOffset=AP+AG+AK;AF.rect.y=AP;AF.rect.x=AL-2*AG-AE;break;case L:AF.xOffset=AP+AG+AI;AF.yOffset=AG+AK;AF.rect.y=0;AF.rect.x=AP;break;}break;}return AF;}function j(AI,AO,AL,AJ,AF,AG){var AM=AI.rect,AK,AH,AE,AN;if(AM.y<0||AM.y+AM.height>AO){return false;}if(AM.x<0||AM.x+AM.width>AL){return false;}AK=AG.length;for(AH=0;AH<AK;++AH){AE=AG[AH].GetBoundingRect(true);if(AM.HasIntersection(AE)){return false;}}AK=AF.length;for(AH=0;AH<AK;++AH){AE=AF[AH].GetBoundingRect(true);if(AM.HasIntersection(AE)){return false;}}AK=AJ.length;for(AH=0;AH<AK;++AH){AN=AJ[AH];if(AN.mIsShown){AE=AN.GetBoundingRect(true);if(AM.HasIntersection(AE)){return false;}}}return true;}function D(){var Ab=this.mABLPlotContext.mValueAxis,Ah=this.mABLPlotContext.mABLOptions,AK=this.mChartContextPtr,AX=AK.mGraphWidth,Af=AK.mGraphHeight,Ac=AK.mpGraphMatrixContext,AE=Ah.mOrientation,AM=AE===1,AR=this.mDatasetPtr.fetchShownLabels(AM),AH,AQ,Ad,AZ,AY,Ag,AJ,AO,AP,AI,Ak,AF,AU,AS,AT,Aj,AW,AL,AG,AV,Ai=Ac.getPadding(Z.kAxisOriginLabel),Ae,AN;Ad=Ab.length;for(AZ=0;AZ<Ad;++AZ){AH=Ab[AZ];AU=f.gAxisObjects[AH.getIndex()].mCustomLabelId;AQ=AH.mOptions;AP=AQ.mAxisCustomValue;Ag=AR&&AR[AH.Key];AJ=Ag&&Ag.length;AI=false;if(!AQ.mDrawCustomLine){continue;}for(AY=0;AY<AJ&&!AI;++AY){AO=Ag[AY];if(AO===AP){AI=true;}}if(AI){continue;}if(AP>AH.mMaxTick||AP<AH.mMinTick){continue;}var Aa={};if(AH.mIsPercent){Aa.mFormatType=4;Aa.mCustomFormat="0%";}else{Aa=AH.mNumberFormat;}Aj=new f.NumberObject({TripleId:AU,GraphObjectManager:this,Number:AP,NumberFormat:Aa,GraphCollectionObject:null,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0,ShouldCondense:AH.mCondenseLabels});if(Aj===null||Aj===undefined){continue;}AL=Aj;AG=Aj.mText;AL.SetText(AG);AF=AL.GetBoundingRect(true);AS=AF.height;AT=AF.width;Ak=AH.ValueToPosition(AP);AN=AH.IsVerticalAxis();if(Ak===0){continue;}if(AN){if(Ak===Af){continue;}}else{if(Ak===AX){continue;}}Ae=false;for(AY=0;AY<=1&&!Ae;++AY){AW={};AV=C.call(this,AY,AS,AT,Ak,Af,AX,Ai,AH);AW.xOffset=AV.xOffset;AW.yOffset=AV.yOffset;AW.rect=AV.rect;Ae=j.call(this,AW,Af,AX,this.shownDataLabels,this.shownRefLabels,this.axisOriginLabels);}if(Ae){AL.MoveTo(AW.xOffset,AW.yOffset,n.CENTER);AL.mIsShown=true;this.mPostTrendLineObjects.push(AL);this.axisOriginLabels.push(AL);}}}function T(){return{mSeriesOptions:[],mValueAxis:[],mABLOptions:{mGraphType:o.DssGraphTypeVertical_Line_Absolute,mMajorGraphType:g.MGT_LINE,mLayout:O.LO_ABSOLUTE,mOrientation:K.OR_VERTICAL,mGraphSubType:i.GST_NULL,mUseDepth:false,mDualAxes:false,mSplitDualAxes:false,mShowAxisSplit:true,mShowLabel:false,mShowValue:false,mShowAsPercentage:false,mShowTotal:true,mShowCumulate:false,mCurvedLines:false,mShowLines:true,mUseGlobalAutoScale:true,mDepth:200,mDepthDirection:45,mSplitAxisPosition:50,mTextPosition:4,mTextShowType:S.DssGraphDataTextValue,mTotalNumberFormat:null}};}mstrmojo.chart.ABLPlot=mstrmojo.declare(mstrmojo.chart.CategoryPlot,null,{scriptClass:"mstrmojo.chart.ABLPlot",mAreaSeriesRendererPtr:null,mBarSeriesRendererPtr:null,mLineSeriesRendererPtr:null,mABLPlotContext:null,mDepthLevel:null,mAxesAreas:null,unitLevelDepth:0,takeGroupCenter:false,groupTotals:null,groupOrder:null,countOfTypes:0,realComboChart:false,init:function v(AE){this._super(AE);this.mDepthLevel=[];this.groupTotals=[[],[]];this.mAxesAreas=[];this.groupOrder=[];this.mABLPlotContext=T.call(this);this.mABLPlotContext.takeGroupCenter=this.mChartContextPtr.mDatasetPtr.ShouldTakeGroupCenter();},getLayout:function J(){return this.mABLPlotContext.mABLOptions.mLayout;},getOrientation:function z(){return this.mABLPlotContext.mABLOptions.mOrientation;},isAbsoluteOrCluster:function F(){var AE=this.mABLPlotContext.mABLOptions.mLayout;return AE===O.LO_ABSOLUTE||AE===O.LO_CLUSTER;},GenerateMapAndList:function u(){var AJ=this.mChartContextPtr,AF=this.mABLPlotContext,AN=AF.mABLOptions,AK=this.mDataArea,AM,AL,AS,AW,AO=this.shownDataLabels;if(AK.width<=0||AK.height<=0){return ;}w.call(this);var AI=this.mAxesAreas;if(AN.mDualAxes&&AN.mSplitDualAxes){AM=new f.Rect2D();AL=new f.Rect2D();this.mChartContextPtr.SplitRect(AK,AN.mOrientation===K.OR_VERTICAL,AN.mSplitAxisPosition,AM,AL);AI.push(AM);AI.push(AL);}else{AM=new f.Rect2D({x:AK.x,y:AK.y,width:AK.width,height:AK.height});AI.push(AM);if(AN.mDualAxes){AL=new f.Rect2D({x:AK.x,y:AK.y,width:AK.width,height:AK.height});AI.push(AL);}}var AP=this.mABLPlotContext.mValueAxis,AT,AU=AP.length,AE=this.mAreaSeriesRendererPtr,AR=this.mBarSeriesRendererPtr,AX=this.mLineSeriesRendererPtr,AG=this.mGraphObjectManagerList,AQ=this.mGraphObjectMap,AH=this.mPostTrendLineObjects;if(AJ.mIsGraphMatrix===false){for(AS=0;AS<AU;++AS){AT=AP[AS];if(!AT.IsBaseAtZero()&&AT.mOptions.mUseLogarithmicScale===false){AW=AT.GetBaseValue();if(AE){AE.AddBaseToCumulateData(AS,AW);}if(AR){AR.AddBaseToCumulateData(AS,AW);}if(AX){AX.AddBaseToCumulateData(AS,AW);}}}}if(AE){AE.SetDeviceDataArea(AK);}if(AR){AR.SetDeviceDataArea(AK);}if(AX){AX.SetDeviceDataArea(AK);}if(!(AN.mDualAxes&&AN.mSplitDualAxes&&AN.mUseDepth)){if(AE){AE.GenerateMapAndList(AO);AG.push(AE);}if(AR){AR.GenerateMapAndList(AO);AG.push(AR);}if(AX){AX.GenerateMapAndList(AO);AG.push(AX);}}if(AN.mDualAxes){if(AN.mSplitDualAxes){this.AdjustTrendLineEquation(AI[0],a.TLI_Y1);this.AdjustTrendLineEquation(AI[1],a.TLI_Y2);}else{this.AdjustTrendLineEquation(AK,a.TLI_BOTH);}}else{this.AdjustTrendLineEquation(AK,a.TLI_Y1);}AU=AP.length;this.axisOriginLines=[];var AV=this.axisOriginLines;for(AS=0;AS<AU;++AS){AT=AP[AS];if(this.mChartContextPtr.mIsGraphMatrix){AT.GenerateCustomLine(AI[AS],AV);}else{AT.GenerateCustomLine(AI[AS],AH);}}D.call(this);if(AE){AE.AddTextToMapAndList(AQ,AH);}if(AR){AR.AddTextToMapAndList(AQ,AH);}if(AX){AX.AddTextToMapAndList(AQ,AH);}this.mDatasetPtr.resetDataWindow();},Draw:function q(){var AE=this.mChartContextPtr,AF=this.mDataArea,AM=this.mAreaSeriesRendererPtr,AP=this.mBarSeriesRendererPtr,AO=this.mLineSeriesRendererPtr;var AN=this.axisOriginLines;if(AN&&AN.length){var AI,AK=AN.length;for(AI=0;AI<AK;AI++){AN[AI].Draw();}}if(this.mAreaSeriesRendererPtr){var AG=U.call(this);AE.setDrawingOrderToCanvas(AG);}if(AE.mIsTimeSeriesChart){var AL=new f.Rect2D({x:AF.x+1,y:AF.y,width:AF.width-1,height:AF.height});AE.DrawRectangle(AL,false);AE.saveState();AE.Clip();if(AM){AM.Draw();}if(AP){AP.Draw();}if(AO){AO.Draw();}this._super();this.DrawPostTrendLineObjects();AE.RestoreState();}else{var AH=this.mABLPlotContext,AJ=AH.mABLOptions;if(!AJ.mDualAxes||!AJ.mSplitDualAxes||!AJ.mUseDepth){if(AM){AM.Draw();}}if(AP){AP.Draw();}if(!AJ.mDualAxes||!AJ.mSplitDualAxes||!AJ.mUseDepth){if(AO){AO.Draw();}}this._super({Skip:1});if(this.mAxesAreas.length!==0){this.DrawTrendLinesAndEquations();}this.DrawPostTrendLineObjects();}},DrawTrendLinesAndEquations:function e(){if(!this.mChartContextPtr.mIsTimeSeriesChart&&this.mAxesAreas.length!==0){this.DrawTrendLinesAndEquationsInArea(this.mAxesAreas[0],false);if(this.mABLPlotContext.mABLOptions.mDualAxes){this.DrawTrendLinesAndEquationsInArea(this.mAxesAreas[1],true);}}},AddValueAxis:function A(AE){this.mABLPlotContext.mValueAxis.push(AE);},SetCategoryAxis:function h(AJ){var AE=this.mChartContextPtr,AH=this.mABLPlotContext,AF,AM,AG,AN,AK,AI,AL=AH.mCategoryAxisPtr=AJ;AF=false;if(AE.mIsTimeSeriesChart){AF=true;}else{AM=AE.GetProperty(r.DssGraph2DOrdSpaceMode,k);if(AM){AF=AM;}}AG=AH.mABLOptions.mMajorGraphType!==g.MGT_BAR;AN=true;AK=this.mSeriesId.length;for(AI=0;AI<AK;++AI){if(AH.mSeriesOptions[AI].mRealSeriesType===t._BAR){AN=false;break;}}AL.mAxisCross=(AF&&AG&&AN);if(AE.mIsGraphMatrix&&AE.IsLineChart()){if(this.mDatasetPtr.GetGroupCount()<=1){AL.mAxisCross=false;}}},GetDepthOffset:function B(AE){return this.mChartContextPtr.CalculateDepthOffset(this.mDepthLevel[AE]*this.unitLevelDepth,this.mABLPlotContext.mABLOptions.mDepthDirection);},getGroupTotals:function m(AE,AF){return this.groupTotals[AF][AE];},Init:function l(){var AH,AE,AJ=this.mABLPlotContext,AG=AJ.mSeriesOptions;AG.splice(0,AG.length);AE=this.mSeriesId.length;for(AH=0;AH<AE;++AH){var AI={mSeriesType:t._DEFAULT,mRealSeriesType:t._LINE,mValueAxis:E.VA_Y1,mShowDataLabels:false,mTrendLineOptions:null,mGraphNumberFormat:f.dNF};if(this.mChartContextPtr.mIsGraphMatrix==false){AI.mTrendLineOptions=new f.GraphTrendLineOptions();}AG.push(AI);}I.call(this);for(AH=0;AH<AE;++AH){Y.call(this,AH);}c.call(this);var AF={GraphObjectManager:this,DataSet:this.mDatasetPtr,Legend:this.mLegendPtr};P.call(this,AF,AG);AC.call(this);AD.call(this);},SetGraphType:function d(AF){var AE=this.mABLPlotContext.mABLOptions;AE.mGraphType=AF;switch(AF){case o.DssGraphTypeVertical_Area_Absolute:AE.mMajorGraphType=g.MGT_AREA;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeVertical_Area_Stacked:AE.mMajorGraphType=g.MGT_AREA;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeVertical_Area_BiPolar_Absolute:AE.mMajorGraphType=g.MGT_AREA;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_BIPOLAR;break;case o.DssGraphTypeVertical_Area_BiPolar_Stacked:AE.mMajorGraphType=g.MGT_AREA;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_BIPOLAR;break;case o.DssGraphTypeVertical_Area_DualAxis_Absolute:AE.mMajorGraphType=g.MGT_AREA;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeVertical_Area_DualAxis_Stacked:AE.mMajorGraphType=g.MGT_AREA;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeVertical_Area_Percent:AE.mMajorGraphType=g.MGT_AREA;AE.mLayout=O.LO_PERCENT;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeHorizontal_Area_Absolute:AE.mMajorGraphType=g.MGT_AREA;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeHorizontal_Area_Stacked:AE.mMajorGraphType=g.MGT_AREA;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeHorizontal_Area_BiPolar_Absolute:AE.mMajorGraphType=g.MGT_AREA;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_BIPOLAR;break;case o.DssGraphTypeHorizontal_Area_BiPolar_Stacked:AE.mMajorGraphType=g.MGT_AREA;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_BIPOLAR;break;case o.DssGraphTypeHorizontal_Area_DualAxis_Absolute:AE.mMajorGraphType=g.MGT_AREA;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeHorizontal_Area_DualAxis_Stacked:AE.mMajorGraphType=g.MGT_AREA;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeHorizontal_Area_Percent:AE.mMajorGraphType=g.MGT_AREA;AE.mLayout=O.LO_PERCENT;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeVertical_Bar_Side_by_Side:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_CLUSTER;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeVertical_Bar_Stacked:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_CLUSTER;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeVertical_Bar_DualAxis_Stacked:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_CLUSTER;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_BIPOLAR;break;case o.DssGraphTypeVertical_Bar_BiPolar_Stacked:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_BIPOLAR;break;case o.DssGraphTypeVertical_Bar_Percent:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_PERCENT;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeHorizontal_Bar_Side_by_Side:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_CLUSTER;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeHorizontal_Bar_Stacked:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_CLUSTER;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_CLUSTER;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_BIPOLAR;break;case o.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_BIPOLAR;break;case o.DssGraphTypeHorizontal_Bar_Percent:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_PERCENT;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeVertical_Line_Absolute:AE.mMajorGraphType=g.MGT_LINE;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeVertical_Line_Stacked:AE.mMajorGraphType=g.MGT_LINE;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeVertical_Line_BiPolar_Absolute:AE.mMajorGraphType=g.MGT_LINE;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_BIPOLAR;break;case o.DssGraphTypeVertical_Line_BiPolar_Stacked:AE.mMajorGraphType=g.MGT_LINE;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_BIPOLAR;break;case o.DssGraphTypeVertical_Line_DualAxis_Absolute:AE.mMajorGraphType=g.MGT_LINE;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeVertical_Line_DualAxis_Stacked:AE.mMajorGraphType=g.MGT_LINE;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeVertical_Line_Percent:AE.mMajorGraphType=g.MGT_LINE;AE.mLayout=O.LO_PERCENT;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeHorizontal_Line_Absolute:AE.mMajorGraphType=g.MGT_LINE;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeHorizontal_Line_Stacked:AE.mMajorGraphType=g.MGT_LINE;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeHorizontal_Line_BiPolar_Absolute:AE.mMajorGraphType=g.MGT_LINE;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_BIPOLAR;break;case o.DssGraphTypeHorizontal_Line_BiPolar_Stacked:AE.mMajorGraphType=g.MGT_LINE;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_BIPOLAR;break;case o.DssGraphTypeHorizontal_Line_DualAxis_Absolute:AE.mMajorGraphType=g.MGT_LINE;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeHorizontal_Line_DualAxis_Stacked:AE.mMajorGraphType=g.MGT_LINE;AE.mLayout=O.LO_STACKED;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeHorizontal_Line_Percent:AE.mMajorGraphType=g.MGT_LINE;AE.mLayout=O.LO_PERCENT;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeVertical_Bullet:case o.DssGraphTypeVertical_Bar_Absolute:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeHorizontal_Bullet:case o.DssGraphTypeHorizontal_Bar_Absolute:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_NULL;break;case o.DssGraphTypeVertical_Bar_BiPolar_Absolute:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_BIPOLAR;break;case o.DssGraphTypeVertical_Bar_DualAxis_Absolute:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_BIPOLAR;break;case o.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_ABSOLUTE;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeVertical_Area_DualAxis_Percent:AE.mMajorGraphType=g.MGT_AREA;AE.mLayout=O.LO_PERCENT;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeHorizontal_Area_DualAxis_Percent:AE.mMajorGraphType=g.MGT_AREA;AE.mLayout=O.LO_PERCENT;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeVertical_Bar_DualAxis_Percent:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_PERCENT;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeHorizontal_Bar_DualAxis_Percent:AE.mMajorGraphType=g.MGT_BAR;AE.mLayout=O.LO_PERCENT;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeVertical_Line_DualAxis_Percent:AE.mMajorGraphType=g.MGT_LINE;AE.mLayout=O.LO_PERCENT;AE.mOrientation=K.OR_VERTICAL;AE.mGraphSubType=i.GST_DUALAXIS;break;case o.DssGraphTypeHorizontal_Line_DualAxis_Percent:AE.mMajorGraphType=g.MGT_LINE;AE.mLayout=O.LO_PERCENT;AE.mOrientation=K.OR_HORIZONTAL;AE.mGraphSubType=i.GST_DUALAXIS;break;}switch(AE.mGraphSubType){case i.GST_NULL:AE.mDualAxes=false;AE.mSplitDualAxes=false;break;case i.GST_DUALAXIS:AE.mDualAxes=true;AE.mSplitDualAxes=false;break;case i.GST_BIPOLAR:AE.mDualAxes=true;AE.mSplitDualAxes=true;break;}},GetMinMaxValue:function H(AL,AH,AE,AJ){var AG,AK=this.mChartContextPtr;if(AK.mIsUniformAxisMode){var AF=AK.getUniformAxisContext(),AI=AF.ValueAxis;if(AL===E.VA_Y1){if(AK.IsVertical()===false){return{Min:AI.X1.Min,Max:AI.X1.Max,AreInitialized:true};}return{Min:AI.Y1.Min,Max:AI.Y1.Max,AreInitialized:true};}if(AK.IsVertical()===false){return{Min:AI.X2.Min,Max:AI.X2.Max,AreInitialized:true};}return{Min:AI.Y2.Min,Max:AI.Y2.Max,AreInitialized:true};}if(this.mAreaSeriesRendererPtr){AG=this.mAreaSeriesRendererPtr.GetMinMaxValue(AL,AH,AE,AJ);}if(this.mBarSeriesRendererPtr){AG=this.mBarSeriesRendererPtr.GetMinMaxValue(AL,AG.Min,AG.Max,AG.AreInitialized);}if(this.mLineSeriesRendererPtr){AG=this.mLineSeriesRendererPtr.GetMinMaxValue(AL,AG.Min,AG.Max,AG.AreInitialized);}return{Min:AG.Min,Max:AG.Max,AreInitialized:AG.AreInitialized};},ShouldRotateDataLabel:function X(){return this.mBarSeriesRendererPtr.ShouldRotateDataLabel();},GetMaxElementOffsetClippedByBoundary:function G(AM,AP){var AF={LowOffset:0,HighOffset:0},AL,AG,AJ,AN;if(AP===undefined||AP===null){AP=true;}if(!this.mChartContextPtr.mIsGraphMatrix){return AF;}var AH=AM?(AP?"X1":"X2"):(AP?"Y1":"Y2"),AE=this.mClippedElementSize;if(AE[AH]!==undefined){return AE[AH];}for(AG=0;AG<2;++AG){for(AJ=0;AJ<2;++AJ){var AO=[this.mLineSeriesRendererPtr,this.mAreaSeriesRendererPtr],AK=(AJ===0),AI=(AG===0),AQ=AK?(AI?"X1":"X2"):(AI?"Y1":"Y2");AF={LowOffset:0,HighOffset:0};AN=AO.length;for(AL=0;AL<AN;++AL){if(AO[AL]){AO[AL].getMaxElementOffsetClippedByBoundary(AF,AK,AI);}}AE[AQ]=AF;}}return AE[AH];}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart","PlotManager","CategoryPlot","ABLPlot","Axis","CategoryAxis","ValueAxis","GraphObjectManager","TripleId");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumDSSGraphObjectManager","EnumLayout","EnumOrientation","EnumValueAxis","EnumAxisLabelsLocation","EnumAxisDirection","EnumCollectionType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSExtraGraphProperty","EnumDSSGraphObject","EnumVariantBool");var W=mstrmojo.chart,M=W.enums,X=M.EnumGraphMajorType,d=M.EnumDSSGraphObjectManager.DssPlot,N=M.EnumLayout,J=M.EnumOrientation,E=M.EnumValueAxis,a=M.EnumAxisLabelsLocation,A=M.EnumAxisDirection,o=W.gNullTripleId,T=mstrmojo.chart.model,O=T.enums,g=O.EnumDSSGraphType,i=O.EnumDSSGraphProperty,f=O.EnumDSSExtraGraphProperty,k=O.EnumDSSGraphObject,B=O.EnumVariantBool.VARIANT_FALSE;var l=new W.Rect2D(),j=new W.Rect2D(),C=new W.Rect2D(),I=new W.Rect2D(),H=new W.Rect2D(),K=new W.Rect2D(),L=new W.Rect2D();function P(){var w=this.mChartContextPtr,u=this.mDatasetPtr,r=w.GetGraphMatrixContext(),v=false,s=false,t;if(w.mIsGraphMatrix&&this.mOrientation===J.OR_VERTICAL){var q=this.mCategoryPlots[0];t=w.GetProperty(f.DssGraphMatrixInitedDataLabelRotation,o);if(t){v=t;}if(!v){if(w.isCombinationChart()&&!u.onlyBarDataLabelEnabled()){w.PutGraphProperty(f.DssGraphMatrixInitedDataLabelRotation,o,true);r.mIsNeedRotateDataLabel=false;w.PutGraphProperty(f.DSSGraphMatrixDataLabelRotated,o,false);return ;}if(w.IsBarChart()||(w.isCombinationChart()&&u.onlyBarDataLabelEnabled())){s=q.ShouldRotateDataLabel();w.PutGraphProperty(f.DssGraphMatrixInitedDataLabelRotation,o,true);r.mIsNeedRotateDataLabel=s;w.PutGraphProperty(f.DSSGraphMatrixDataLabelRotated,o,s);}}}}function b(v,s){var z=this.mChartContextPtr;if(z.mIsGraphMatrix){s.Reset(v.x,v.y,v.width,v.height);return ;}var r,t,w,q,u=new W.Rect2D();Z.call(this,v,u);u.width=Math.max(0,u.width);u.height=Math.max(0,u.height);this.mLeftMargin+=u.x-v.x;this.mRightMargin+=v.x+v.width-(u.x+u.width);this.mTopMargin+=u.y-v.y;this.mBottomMargin+=v.y+v.height-(u.y+u.height);this.ReserveAreaCategoryAxis(u,s);if(s.width<0){s.width=0;}if(s.height<0){s.height=0;}if(this.mOrientation===J.OR_HORIZONTAL){r=v.x+Math.max(u.x-v.x,s.x-u.x);t=v.x+v.width-Math.max(v.x+v.width-(u.x+u.width),u.x+u.width-(s.x+s.width))-r;s.x=r;s.width=t;}else{w=v.y+Math.max(u.y-v.y,s.y-u.y);q=v.y+v.height-Math.max(v.y+v.height-(u.y+u.height),u.y+u.height-(s.y+s.height))-w;s.y=w;s.height=q;}}function Y(q){var t=this.mChartContextPtr,s,r;s=t.GetGraphMajorType();if(t.mIsGraphMatrix){r=W.PlotId0;}else{r=new W.TripleId({ObjectId:d,SeriesId:q});}switch(s){case X.GMT_CATEGORY:return new W.ABLPlot({TripleId:r,GraphObjectManager:this,Area:W.gEmptyRect});default:break;}return null;}function Z(t,AE){var r=this.mChartContextPtr,s=[],y=this.mVecY1Axis.length,v,AC,z,u,AA,x,w,q,AD;for(v=0;v<y;++v){AC=this.mOrientation===J.OR_VERTICAL?this.mBottomMargin:this.mLeftMargin;z=this.mOrientation===J.OR_VERTICAL?this.mTopMargin:this.mRightMargin;u=AC;if(r.mIsGraphMatrix){L.ResetRect(t);K.ResetRect(t);}else{K=new W.Rect2D({Rect2D:t});L=new W.Rect2D({Rect2D:t});}if(this.mDualAxes){AA=z;if(this.mSplitDualAxes){x=new W.Rect2D();w=new W.Rect2D();r.SplitRect(L,r.IsVertical(),this.mSplitAxisPosition,x,w);if(this.mOrientation===J.OR_VERTICAL){AA+=x.height;u+=w.height;}else{AA+=x.width;u+=w.width;}}this.mVecY2Axis[v].ReserveTitleAndLabels(K,AC,AA);if(!this.mSplitDualAxes){L.ResetRect(K);if(this.mOrientation===J.OR_VERTICAL){L.y=t.y;L.height=t.height;}else{L.x=t.x;L.width=t.width;}}if(this.mSplitDualAxes){if(this.mOrientation===J.OR_VERTICAL&&K.y>t.y){q=K.y+K.height;K.y=t.y+(K.y-t.y)*100/this.mSplitAxisPosition;K.height=q-K.y;}if(this.mOrientation===J.OR_HORIZONTAL&&K.x+K.width<t.x+t.width){K.width=t.width-(t.x+t.width-(K.x+K.width))*100/this.mSplitAxisPosition;}}}this.mVecY1Axis[v].ReserveTitleAndLabels(L,u,z);if(this.mDualAxes&&this.mSplitDualAxes){if(this.mOrientation===J.OR_VERTICAL&&L.y+L.height<t.y+t.height){L.height=(t.y+t.height-(L.y+L.height))*100/this.mSplitAxisPosition;}if(this.mOrientation===J.OR_HORIZONTAL&&L.x>t.x){var AB=L.x+L.width;L.x=t.x+(L.x-t.x)*100/this.mSplitAxisPosition;L.width=AB-L.x;}}if(this.mDualAxes&&!this.mSplitDualAxes){K.ResetRect(L);if(this.mOrientation===J.OR_VERTICAL){K.y=t.y;K.height=t.height;}else{K.x=t.x;K.width=t.width;}}this.mVecY1Axis[v].AdjustDeviceDataArea(L,false);s.push(L);if(this.mDualAxes){this.mVecY2Axis[v].AdjustDeviceDataArea(K,false);s.push(K);}}l.Reset(0,0,0,0);j.ResetRect(s[0]);AD=s.length;for(v=1;v<AD;++v){if(!this.RectangleIntersection(j,s[v],l)){j.Reset(0,0,0,0);break;}j.ResetRect(l);}AE.ResetRect(j);}function p(r,t){var v=this.mChartContextPtr,s=v.mUniformAxisContext,q=new W.Rect2D({Rect2D:t});if(v.mIsGraphMatrix){var u=0;if(v.IsVertical()){u=s.yDataLabelPadding||0;u-=q.y;if(u){q.y+=u;q.height-=u;}}else{u=s.xDataLabelPadding||0;u-=v.mGraphWidth-q.x-q.width;if(u){q.width-=u;}}}return q;}function Q(q,s){var r=this.mChartContextPtr,AA=this.mVecY1Axis,z=this.mVecY2Axis,y=AA[s],x=z[s],v,u,w,t;if(this.mDualAxes&&this.mSplitDualAxes){w=new W.Rect2D({Rect2D:q});v=new W.Rect2D();u=new W.Rect2D();r.SplitRect(w,r.IsVertical(),this.mSplitAxisPosition,v,u);y.SetDeviceDataArea(v);y.AdjustDeviceDataArea(v,true);y.UpdateTitleAndLabelArea(v);x.SetDeviceDataArea(u);x.AdjustDeviceDataArea(u,true);x.UpdateTitleAndLabelArea(u);}else{if(this.mDualAxes){v=p.call(this,0,q);if(AA.length){y.TrimDeviceDataArea(v);}y.SetDeviceDataArea(v);y.AdjustDeviceDataArea(v,true);u=p.call(this,1,q);if(z.length){x.TrimDeviceDataArea(u);}x.SetDeviceDataArea(u);if(!r.mIsGraphMatrix){t=new W.Rect2D({Rect2D:v});x.AdjustDeviceDataArea(u,true);this.RectangleUnion(v,u,t);y.UpdateTitleAndLabelArea(t);x.UpdateTitleAndLabelArea(t);}}else{v=p.call(this,0,q);if(AA.length){y.TrimDeviceDataArea(v);}y.SetDeviceDataArea(v);if(!r.mIsGraphMatrix){y.AdjustDeviceDataArea(v,true);t=new W.Rect2D({Rect2D:v});y.UpdateTitleAndLabelArea(t);}}}}function R(){var r=this.mGraphObjectList,s,t,q;s=this.mVecY1Axis.length;for(q=0;q<s;++q){this.mVecY1Axis[q].generateAxisLine(r);if(this.mDualAxes){this.mVecY2Axis[q].generateAxisLine(r);}}t=this.mVecO1Axis.length;for(q=0;q<t;++q){this.mVecO1Axis[q].generateAxisLine(r);}}function e(u){var q=this.mChartContextPtr,y=this.mGraphObjectList,AA=this.mChartAreaOptions,z=AA.chartAreaNumber,t,s,x,r,w,v;x=this.mVecY1Axis.length;for(t=0;t<x;++t){if(!this.isMutipleValueAxis()){for(s=0;s<z;++s){if(this.mDualAxes&&this.mSplitDualAxes){w=new W.Rect2D();v=new W.Rect2D();q.SplitRect(u[s],q.IsVertical(),this.mSplitAxisPosition,w,v);this.mVecY1Axis[t].GenerateGridLines(w,s,y);this.mVecY2Axis[t].GenerateGridLines(v,s,y);}else{this.mVecY1Axis[t].GenerateGridLines(u[s],s,y);if(this.mDualAxes){this.mVecY2Axis[t].GenerateGridLines(u[s],s,y);}}}}else{if(this.mDualAxes&&this.mSplitDualAxes){w=new W.Rect2D();v=new W.Rect2D();q.SplitRect(u[t],q.IsVertical(),this.mSplitAxisPosition,w,v);this.mVecY1Axis[t].GenerateGridLines(w,t,y);this.mVecY2Axis[t].GenerateGridLines(v,t,y);}else{this.mVecY1Axis[t].GenerateGridLines(u[t],t,y);if(this.mDualAxes){this.mVecY2Axis[t].GenerateGridLines(u[t],t,y);}}}}r=this.mVecO1Axis.length;for(t=0;t<r;++t){if(this.isMutipleValueAxis()){for(s=0;s<z;++s){this.mVecO1Axis[t].GenerateGridLines(u[s],s,y);}}else{this.mVecO1Axis[t].GenerateGridLines(u[t],t,y);}}}function D(r,q){var v=this.mChartContextPtr,u,s;I.Reset(r.x,r.y,r.width,r.height);H.Reset(r.x,r.y,r.width,r.height);if(!v.mIsGraphMatrix){if(v.mManualLayoutMode&&!this.mRecalculateFrame){I.ResetRect(this.mPlotArea);}else{v.PutLocation(i.DssGraphFrameLocationNEW,I);}q.splice(0,q.length);this.CalculateChartAreas(I,q);}else{q.splice(0,q.length);q.push(H);}if(v.isUADataAreaOutput()){var t=v.mUniformAxisContext;H.x=t.mDataAreaLeftMargin;H.y=t.mDataAreaTopMargin;H.width=v.mGraphWidth-H.x-t.mDataAreaRightMargin;H.height=v.mGraphHeight-H.y-t.mDataAreaBottomMargin;if(this.mVecO1Axis.length){this.mVecO1Axis[0].TrimAxisPadding(H,false);}I.ResetRect(H);this.mCategoryPlots[0].SetDataArea(H);if(this.isMutipleValueAxis()){this.mVecO1Axis[0].SetDeviceDataArea(I);Q.call(this,H,0);}else{Q.call(this,I,0);this.mVecO1Axis[0].SetDeviceDataArea(H);}return ;}u=this.mChartAreaOptions.chartAreaNumber;for(s=0;s<u;++s){this.mCategoryPlots[s].SetDataArea(q[s]);}if(this.isMutipleValueAxis()){this.mVecO1Axis[0].SetDeviceDataArea(I);for(s=0;s<this.mChartAreaOptions.chartAreaNumber;++s){Q.call(this,q[s],s);}}else{Q.call(this,I,0);for(s=0;s<this.mChartAreaOptions.chartAreaNumber;++s){this.mVecO1Axis[s].SetDeviceDataArea(q[s]);}}}function c(s,r){var w=this.mChartContextPtr,t;D.call(this,s,r);var q=this.mDatasetPtr.showDatalabels();if(q){P.call(this);if(!w.mIsGraphMatrix){var v=new W.Rect2D({Rect2D:s}),u=this.mCategoryPlots.length;for(t=0;t<u;++t){this.mCategoryPlots[t].ReserveAreaForDataLabels(s);}if(s.width!==v.width||s.height!==v.height){D.call(this,s,r);}}else{this.ShouldRotateDataLabel();}}}function G(t,u,z,AB,q){var s=this.mChartContextPtr,w=s.getAxisTripleId(t),v=s.getUniformAxisInformation(w.mObjectId),y=v.Metrics,AA=(this.mOrientation===J.OR_VERTICAL?A.AD_Y:A.AD_X),r=new W.ValueAxis({TripleId:w,GraphObjectManager:this,Min:u,Max:z,PrimaryMetricIndex:y,LargerGridInterval:AB!==1||(this.mDualAxes&&this.mSplitDualAxes),IsPercent:this.mLayout===N.LO_PERCENT,AxisDirection:AA,IsShown:q,Key:t});if(s.mIsGraphMatrix&&r.mIsUniformAxis===false){var x=v.CondenseEnforced;r.checkCondense(!!x);}return r;}mstrmojo.chart.CategoryPlotManager=mstrmojo.declare(mstrmojo.chart.PlotManager,null,{scriptClass:"mstrmojo.chart.CategoryPlotManager",mGraphType:g.DssGraphTypeVertical_Line_Absolute,mLayout:N.LO_ABSOLUTE,mOrientation:J.OR_VERTICAL,mUseDepth:false,mDualAxes:false,mSplitDualAxes:false,mDepth:200,mDepthDirection:45,mSplitAxisPosition:50,mDataAreaSplitX:50,mCategoryPlots:null,mVecO1Axis:null,mVecY1Axis:null,mVecY2Axis:null,init:function n(q){this._super(q);this.mCategoryPlots=[];this.mVecO1Axis=[];this.mVecY1Axis=[];this.mVecY2Axis=[];this.mChartContextPtr=q.GraphObjectManager.mChartContextPtr;},GenerateMapAndList:function m(){var AA=this.mChartAreaOptions,x=AA.chartAreaNumber,w=this.mPlotArea,s=this.mCategoryPlots,v=this.mChartContextPtr,r=this.mGraphObjectManagerList,AO,AM,q,AR,AP,AJ,AN,y,AC,AF,AU,z,AI,AB=[],u,AG,AQ;var AL="Y1",AD=this.mVecO1Axis,AT=this.mVecY1Axis,AS=this.mVecY2Axis;if(w.width<=0||w.height<=0){return ;}this.LoadProperties();for(AO=0;AO<x;++AO){q=Y.call(this,AO);q.SetDataset(this.mDatasetPtr);q.mLegendPtr=this.mLegendPtr;s.push(q);AQ=AA.seriesDistribution[AO].length;for(AM=0;AM<AQ;++AM){s[AO].AddSeries(AA.seriesDistribution[AO][AM]);}q.Init();}var t;if(this.isMutipleValueAxis()){t=v.getAxisTripleId("O1");var AH=new W.CategoryAxis({TripleId:t,GraphObjectManager:this,AxisLabelsLocation:a.ALL_BOTTOM,AxisDirection:(this.mOrientation===J.OR_VERTICAL?A.AD_X:A.AD_Y)});AD.push(AH);for(AO=0;AO<x;++AO){AR=false;AP=false;AJ=[0,0];AN=[0,0];AG=s[AO].GetMinMaxValue(E.VA_Y1,AJ[0],AN[0],AR);AJ[0]=AG.Min;AN[0]=AG.Max;AR=AG.AreInitialized;if(this.mDualAxes){AG=s[AO].GetMinMaxValue(E.VA_Y2,AJ[1],AN[1],AP);AJ[1]=AG.Min;AN[1]=AG.Max;AP=AG.AreInitialized;}s[AO].SetCategoryAxis(AH);if(v.mIsGraphMatrix&&this.mOrientation===J.OR_HORIZONTAL){AL="X1";}y=G.call(this,AL,AJ[0],AN[0],x,AR);AT.push(y);s[AO].AddValueAxis(y);if(this.mDualAxes){AL="Y2";if(v.mIsGraphMatrix&&this.mOrientation===J.OR_HORIZONTAL){AL="X2";}AC=G.call(this,AL,AJ[1],AN[1],x,AP);AS.push(AC);s[AO].AddValueAxis(AC);}}}else{AR=false;AP=false;AJ=[0,0];AN=[0,0];for(AO=0;AO<x;++AO){AG=s[AO].GetMinMaxValue(E.VA_Y1,AJ[0],AN[0],AR);AJ[0]=AG.Min;AN[0]=AG.Max;AR=AG.AreInitialized;if(this.mDualAxes){AG=s[AO].GetMinMaxValue(E.VA_Y2,AJ[1],AN[1],AP);AJ[1]=AG.Min;AN[1]=AG.Max;AP=AG.AreInitialized;}t=v.mIsGraphMatrix?v.getAxisTripleId("O1"):new W.TripleId({ObjectId:k.DssGraphO1Body,SeriesId:AO});AF=new W.CategoryAxis({TripleId:t,GraphObjectManager:this,AxisLabelsLocation:a.ALL_BOTTOM,AxisDirection:(this.mOrientation===J.OR_VERTICAL?A.AD_X:A.AD_Y)});s[AO].SetCategoryAxis(AF);AD.push(AF);}if(v.mIsGraphMatrix&&this.mOrientation===J.OR_HORIZONTAL){AL="X1";}y=G.call(this,AL,AJ[0],AN[0],x,AR);AT.push(y);for(AO=0;AO<x;++AO){s[AO].AddValueAxis(y);}if(this.mDualAxes){AL="Y2";if(v.mIsGraphMatrix&&this.mOrientation===J.OR_HORIZONTAL){AL="X2";}AC=G.call(this,AL,AJ[1],AN[1],x,AP);AS.push(AC);for(AO=0;AO<x;++AO){s[AO].AddValueAxis(AC);}}}AU=this.mVecO1Axis.length;z=this.mVecY1Axis.length;AI=this.mVecY2Axis.length;if(this.mUseDepth){for(AO=0;AO<AU;++AO){AD[AO].SetDepthAndDirection(this.mDepth,this.mDepthDirection);}for(AO=0;AO<z;++AO){AT[AO].SetDepthAndDirection(this.mDepth,this.mDepthDirection);}for(AO=0;AO<AI;++AO){AS[AO].SetDepthAndDirection(this.mDepth,this.mDepthDirection);}}AQ=AD.length;for(AO=0;AO<AQ;++AO){AD[AO].SetDataset(this.mDatasetPtr);}for(AO=0;AO<AU;++AO){r.push(this.mVecO1Axis[AO]);}for(AO=0;AO<z;++AO){r.push(this.mVecY1Axis[AO]);if(this.mDualAxes){r.push(this.mVecY2Axis[AO]);}}C.Reset(0,0,0,0);b.call(this,w,C);c.call(this,C,AB);u=s.length;for(AO=0;AO<u;++AO){r.push(s[AO]);s[AO].GenerateMapAndList();}for(AO=0;AO<AU;++AO){AT[AO].GenerateMapAndList();}for(AO=0;AO<z;++AO){AT[AO].GenerateMapAndList();if(this.mDualAxes){AS[AO].GenerateMapAndList();}}var AE=v.mIsGraphMatrix,AK=v.isUADataAreaOutput();if(!(AE&&AK)){if(this.mUseDepth){R.call(this);e.call(this,AB);}else{e.call(this,AB);R.call(this);}}},LoadProperties:function V(){var r,s=this.mChartContextPtr;this._super();var q=this.mGraphType=s.mGraphType;if(!(s.mIsTimeSeriesChart)){if(!s.mIsGraphMatrix){r=s.GetProperty(i.DssGraphDepthMode,o);if(r){this.mUseDepth=(r!==B);}r=s.GetProperty(i.DssGraph2DDepth,o);if(r){this.mDepth=r;}r=s.GetProperty(i.DssGraph2DAngle,o);if(r){this.mDepthDirection=r;}}this.mOrientation=s.IsVertical()?J.OR_VERTICAL:J.OR_HORIZONTAL;this.mDualAxes=s.IsDualAxis();}if((q>=g.DssGraphTypeVertical_Area_Percent)&&(q<=g.DssGraphTypeHorizontal_Line_Percent)&&(q%7===0)){this.mLayout=N.LO_PERCENT;}if(this.mLayout!==N.LO_PERCENT&&(q>=g.DssGraphTypeVertical_Bar_DualAxis_Percent&&q<=g.DssGraphTypeHorizontal_Area_DualAxis_Percent)){this.mLayout=N.LO_PERCENT;}},isMutipleValueAxis:function S(){var q=this.mChartAreaOptions;return(this.mOrientation===q.mOrientation);},ReserveAreaCategoryAxis:function F(u,AC){var r=this.mChartContextPtr,t=[],x=[],v,w,z,y,s,AB,q,AA;if(!this.isMutipleValueAxis()){this.CalculateChartAreas(u,x);}v=this.mVecO1Axis.length;for(w=0;w<v;++w){if(r.mIsGraphMatrix){j.ResetRect(this.isMutipleValueAxis()?u:x[w]);}else{j=this.isMutipleValueAxis()?new W.Rect2D({Rect2D:u}):new W.Rect2D({Rect2D:x[w]});}this.mVecO1Axis[w].AdjustTitleArea(j);if(r.mIsTimeSeriesChart){this.mVecO1Axis[w].AdjustDataArea(j,0,0,true);}else{z=this.mOrientation===J.OR_HORIZONTAL?this.mBottomMargin:this.mLeftMargin;y=this.mOrientation===J.OR_HORIZONTAL?this.mTopMargin:this.mRightMargin;this.mVecO1Axis[w].AdjustDataArea(j,z,y);}if(r.mRecalculateFrame){if(this.mOrientation===J.OR_VERTICAL){s=u.x;q=u.width;if(w===0){if(j.x>u.x){s=j.x;q-=(j.x-u.x);}}if(w===this.mVecO1Axis.length-1){if(u.x+u.width>j.x+j.width){q=j.x+j.width-s;}}j.x=s;j.width=q;}else{AB=u.y;AA=u.height;if(w===0){if(j.y>u.y){AB=j.y;AA-=(j.y-u.y);}}if(w===this.mVecO1Axis.length-1){if(u.y+u.height>j.y+j.height){AA=j.y+j.height-AB;}}j.y=AB;j.height=AA;}}t.push(j);}j.ResetRect(t[0]);for(w=1;w<t.length;++w){if(!this.RectangleIntersection(j,t[w],l)){j.Reset(0,0,0,0);break;}j.ResetRect(l);}AC.ResetRect(j);},Draw:function h(){var r=this.mCategoryPlots,t,v,u,q,s;this._super();t=this.mVecY1Axis.length;for(s=0;s<t;++s){this.mVecY1Axis[s].Draw();}v=this.mVecY2Axis.length;for(s=0;s<v;++s){this.mVecY2Axis[s].Draw();}u=this.mVecO1Axis.length;for(s=0;s<u;++s){this.mVecO1Axis[s].Draw();}q=r.length;for(s=0;s<q;++s){r[s].Draw();}},ShouldRotateDataLabel:function U(){var x=this.mChartContextPtr,v=this.mDatasetPtr,q=x.GetGraphMatrixContext(),u=v.showDatalabels(),s=false,w=false;if(u&&x.mIsGraphMatrix&&v.onlyBarDataLabelEnabled()){var r=this.mCategoryPlots[0],t;if(this.mOrientation===J.OR_VERTICAL){t=x.GetProperty(f.DssGraphMatrixInitedDataLabelRotation,W.gNullTripleId);if(t!==undefined&&t!==null){w=t;}if(w){t=x.GetProperty(f.DSSGraphMatrixDataLabelRotated,W.gNullTripleId);if(t!==undefined&&t!==null){q.mIsNeedRotateDataLabel=t;return ;}}s=r.ShouldRotateDataLabel();q.mIsNeedRotateDataLabel=s;x.PutGraphProperty(f.DssGraphMatrixInitedDataLabelRotation,W.gNullTripleId,true);x.PutGraphProperty(f.DSSGraphMatrixDataLabelRotated,W.gNullTripleId,s);}}}});}());(function(){mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumDSSExtraGraphObject","EnumDSSGraphObjectManager");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject","EnumVariantBool","EnumDSSExtraGraphProperty");mstrmojo.requiresClsP("mstrmojo.chart","GraphObjectManager","CategoryPlotManager","TripleId","Rect2D","RectangleObject","TextObject","Legend","GridChartPlotManager","ValuePlotManager");var W=mstrmojo.chart,R=W.enums,A=R.EnumDSSExtraGraphObject,B=R.EnumGraphMajorType,J=W.ChartContext,X=R.EnumDSSGraphObjectManager,K=X.DssLegend,Y=W.gNullTripleId,C=W.gNullSeriesId,E=W.gNullGroupId;var M=mstrmojo.chart.model,Z=M.enums,D=Z.EnumDSSGraphType,F=Z.EnumDSSGraphProperty,G=Z.EnumDSSGraphObject,U=Z.EnumVariantBool,Q=U.VARIANT_FALSE,a=Z.EnumDSSExtraGraphProperty;function P(g,f){var i=this.mChartContextPtr,e=this.mGraphObjectList,d,b,c;f=f||false;if(!this.isSupportedChartType()||f){d="Graph Type Not Supported";b=new W.TextObject({TripleId:new W.TripleId({ObjectId:A.DssGraphWarningMessage}),GraphObjectManager:this});b.SetTextWidthLimit(g.width);b.SetText(d);c=b.GetBoundingRect();b.SetTextWidthLimit(g.width);b.MoveTo((g.width-c.width)/2,(g.height-c.height)/2);e.push(b);return true;}if(!this.checkDataset()){d="Insufficient Data To Plot";b=new W.TextObject({TripleId:new W.TripleId([A.DssGraphWarningMessage,C,E]),GraphObjectManager:this});b.SetTextWidthLimit(g.width);b.SetText(d);c=b.GetBoundingRect();b.SetTextWidthLimit(g.width);b.MoveTo((g.width-c.width)/2,(g.height-c.height)/2);e.push(b);return true;}var h=i.mImageUsage===32;if(h){d=this.mDatasetPtr.GetBannerText();b=new W.TextObject({TripleId:new W.TripleId([A.DssGraphBanner,0,0]),GraphObjectManager:this});b.SetTextWidthLimit(g.width);b.SetText(d);c=b.GetBoundingRect();b.SetTextWidthLimit(g.width);b.MoveTo((g.width-c.width)/2,(g.height-c.height)/2);e.push(b);return true;}return false;}mstrmojo.chart.ChartManager=mstrmojo.declare(mstrmojo.chart.GraphObjectManager,null,{scriptClass:"mstrmojo.chart.ChartManager",mGraphType:D.DssGraphTypeVertical_Bar_Side_by_Side,mPlotManagers:null,mDatasetPtr:null,mLegendPtr:null,mHighlightLayerObjectPtr:null,mIsTitleShown:false,mIsSubtitleShown:false,mIsFootnoteShown:false,mIsLegendShown:false,mIsExpanded:false,mIsInitialized:false,mLeftMargin:0,mRightMargin:0,mTopMargin:0,mBottomMargin:0,mAxisLabelsAutoFit:true,init:function T(b){this._super(b);this.mPlotManagers=[];},GenerateMapAndList:function N(){var j=this.mChartContextPtr,f,g,e,h,c,b,d;this.LoadProperties();f=new W.Rect2D({x:0,y:0,width:j.mGraphWidth,height:j.mGraphHeight});if(P.call(this,f)===true){this.mIsInitialized=true;return ;}if(!j.mIsGraphMatrix){g=j.GetProperty(F.DssGraph2ScaleDirection,new W.TripleId({ObjectId:G.DssGraphO1Body,SeriesId:-3}));if(g){this.mDatasetPtr.mReverseGroup=(g!==Q);}else{this.mDatasetPtr.mReverseGroup=false;}e=this.CreateBackground();this.mGraphObjectList.unshift(e);this.AddToMap(e);}h=null;c=null;switch(j.GetGraphMajorType()){case B.GMT_GRID:this.CalculateLayout(f);c=new W.GridChartPlotManager({TripleId:W.PlotManagerId,GraphObjectManager:this,Area:f});break;case B.GMT_BOX:case B.GMT_CATEGORY:this.CalculateLayout(f);c=new W.CategoryPlotManager({TripleId:W.PlotManagerId,GraphObjectManager:this,Area:f});break;case B.GMT_PIE:break;case B.GMT_SCATTER:case B.GMT_BUBBLE:this.CalculateLayout(f);c=new W.ValuePlotManager({TripleId:W.PlotManagerId,GraphObjectManager:this,Area:f});break;default:P.call(this,f,true);break;}if(c!==null&&c!==undefined){this.mGraphObjectManagerList.unshift(c);c.SetDataset(this.mDatasetPtr);c.mLegendPtr=this.mLegendPtr;if(j.mIsTimeSeriesChart){this.mRightMargin=0;}c.SetMarginInfo(this.mLeftMargin,this.mRightMargin,this.mTopMargin,this.mBottomMargin);this.mPlotManagers.push(c);b=this.mPlotManagers.length;for(d=0;d<b;++d){this.mPlotManagers[d].GenerateMapAndList();}}this.mIsInitialized=true;},LoadProperties:function L(){var f=this.mChartContextPtr,d,e,c,b;d=f.GetProperty(F.DssGraphType,Y);if(d){this.mGraphType=d;}if(f.mIsTimeSeriesChart||f.mIsGraphMatrix){this.mIsTitleShown=false;this.mIsSubtitleShown=false;this.mIsFootnoteShown=false;this.mIsLegendShown=false;return ;}e=f.GetGraphMajorType();if(e!==B.GMT_3D_CATEGORY&&e!==B.GMT_HISTOGRAM&&e!==B.GMT_BOX){d=f.GetProperty(F.DssGraphShowLegendText,Y);if(d){this.mIsLegendShown=d!==Q;}}d=f.GetProperty(F.DssGraphShowTitle,Y);if(d){this.mIsTitleShown=d!==Q;}d=f.GetProperty(F.DssGraphShowSubtitle,Y);if(d){this.mIsSubtitleShown=d!==Q;}d=f.GetProperty(F.DssGraphShowfootnote,Y);if(d){this.mIsFootnoteShown=d!==Q;}c=false;if(!f.mManualLayoutMode){c=true;}else{d=f.GetProperty(a.DssGraphInfoRecalculateLegend,Y);if(d){if(d!==Q){c=true;}}}if(c){d=f.GetProperty(a.DssGraphInfoAutosizeHorizontal,Y);b=f.GetProperty(a.DssGraphInfoAutosizeVertical,Y);if(d&&b){this.mIsExpanded=(d!==Q&&b!==Q);}}if(f.mManualLayoutMode){d=f.GetProperty(F.DssGraphAxisAutoFit,new W.TripleId({ObjectId:G.DssGraphO1Body}));if(d){this.mAxisLabelsAutoFit=d!==Q;}if(this.mAxisLabelsAutoFit){f.mRecalculateFrame=true;}}},CreateBackground:function I(){var d=this.mChartContextPtr,c,b;c=new W.TripleId({ObjectId:G.DssGraphBackground,SeriesId:C,GroupId:E});b=new W.Rect2D({x:0,y:0,width:d.mGraphWidth,height:d.mGraphHeight});return new W.RectangleObject({TripleId:c,GraphObjectManager:this,Area:b});},isSupportedChartType:function V(){var c=this.mChartContextPtr,b;b=c.GetGraphMajorType();switch(b){case B.GMT_CATEGORY:case B.GMT_PIE:case B.GMT_BUBBLE:case B.GMT_SCATTER:case B.GMT_GRID:case B.GMT_BOX:return true;default:return false;}},checkDataset:function H(){var c=this.mDatasetPtr.GetSeriesCount(),e=this.mChartContextPtr;if(this.mDatasetPtr.CountMetric()===0&&this.mChartContextPtr.mIsGraphMatrix){var b=this.mDatasetPtr.IsHeaderEmpty(true),d=this.mDatasetPtr.IsHeaderEmpty(false);return(!d||!b);}return true;},CalculateLayout:function S(x){var h=this.mChartContextPtr,y,r,AC,l,AE,f,t,AA,j,m,k,b,s,n,w,AD,v,e,d,i,o,z,AB,q,u,c,p,g;y=0;r=0;if(h.mIsTimeSeriesChart){g=J.sDefaultMarginForTimeSeries;y=g;r=g;this.mRightMargin=0;}else{if(h.mIsUniformAxisMode&&!(h.mIsEntireChart)){g=J.sDefaultUniformAxisMargin;y=g;r=g;this.mRightMargin=r;}else{g=J.sDefaultMargin;y=h.vdHeight(g);r=h.vdWidth(g);this.mRightMargin=r;}}AC=x.x+x.width;l=x.y+x.height;x.x+=r;x.y+=y;AC-=this.mRightMargin;l-=y;x.width=AC-x.x;x.height=l-x.y;this.mLeftMargin=r;this.mTopMargin=y;this.mBottomMargin=y;if(h.mIsTimeSeriesChart){return ;}AE=null;if(this.mIsTitleShown){f=h.mManualLayoutMode&&!h.mRecalculateFrame?new W.Rect2D():h.vdRect(W.gDefaultTitlePosition);t=new W.TripleId({ObjectId:G.DssGraphTitle});c=h.GetProperty(F.DssGraphTextContent,t);if(c){v=c;}else{v="Graph Title";}AE=new W.TextObject({TripleId:t,GraphObjectManager:this,rect:f});AE.SetText(v);this.AddToMapAndList(AE);if(!h.mManualLayoutMode||h.mRecalculateFrame){AA=AE.GetBoundingRect();l=x.y+x.height;x.y=AA.y+AA.height+y;x.height=l-x.y;if(x.height<0){x.height=0;}}if(h.mManualLayoutMode){f=h.GetLocation(F.DssGraphTitleLocation);AE.SetRect(f);AE.CalculateDeviceRect();}else{if(!this.mIsExpanded){h.PutLocation(F.DssGraphTitleLocation,AA);}}}j=null;if(this.mIsSubtitleShown){k=h.mManualLayoutMode&&!h.mRecalculateFrame?new W.Rect2D():h.vdRect(W.gDefaultSubtitlePosition);m=new W.TripleId({ObjectId:G.DssGraphSubtitle});c=h.GetProperty(F.DssGraphTextContent,m);v=(c===null||c===undefined)?("Graph Subtitle"):c;j=new W.TextObject({TripleId:m,GraphObjectManager:this,rect:k});j.SetText(v);this.AddToMapAndList(j);if(!h.mManualLayoutMode||h.mRecalculateFrame){j.MoveTo(k.x,x.y);b=j.GetBoundingRect();l=x.y+x.height;x.y=b.y+b.height+y;x.height=l-x.y;if(x.height<0){x.height=0;}}if(h.mManualLayoutMode){k=h.GetLocation(W.DssGraphSubTitleLocation);j.SetRect(k);j.CalculateDeviceRect();}else{if(!this.mIsExpanded){h.PutLocation(W.DssGraphTitleLocation,b);}}}s=null;if(this.mIsFootnoteShown){w=h.mManualLayoutMode&&!h.mRecalculateFrame?new W.Rect2D():h.vdRect(W.gDefaultFootnotePosition);n=new W.TripleId({ObjectId:G.DssGraphFootnote});c=h.GetProperty(F.DssGraphTextContent,n);if(c===null||c===undefined){v="Graph Footnote";}else{v=c;}s=new W.TextObject({TripleId:n,GraphObjectManager:this,rect:w});s.SetText(v);this.AddToMapAndList(s);if(!h.mManualLayoutMode||h.mRecalculateFrame){AD=s.GetBoundingRect();s.MoveTo(w.x,x.y+x.height-AD.height);x.height=(x.y+x.height-y-AD.height)-x.y;if(x.height<0){x.height=0;}}if(h.mManualLayoutMode){w=h.GetLocation(F.DssGraphFootnoteLocation);s.SetRect(w);s.CalculateDeviceRect();}else{if(!this.mIsExpanded){h.PutLocation(F.DssGraphTitleLocation,AD);}}}e=h.mGraphWidth;d=h.mGraphHeight;if(this.mIsLegendShown&&!h.mIsGraphMatrix){i=this.mDatasetPtr.GetSeriesCount();if(i===1){o=this.mDatasetPtr.GetSeriesLabel(0,false);if(o===""){this.mIsLegendShown=false;}}}if(this.mIsLegendShown){if(x.height>0){this.mLegendPtr=new W.Legend({TripleId:new W.TripleId({ObjectId:K}),GraphObjectManager:this,DataSet:this.mDatasetPtr,Area:x});this.mLegendPtr.GenerateMapAndList();this.mGraphObjectManagerList.push(this.mLegendPtr);if(!h.mManualLayoutMode||h.mRecalculateFrame){z=new W.Rect2D({Rect2D:x});this.mLegendPtr.CalculateFrame(r,y,x);this.mLeftMargin+=x.x-z.x;this.mRightMargin+=z.x+z.width-(x.x+x.width);this.mBottomMargin+=z.y+z.height-(x.y+x.height);if(!h.mManualLayoutMode){if(this.mIsExpanded){if(AE!==null&&AE!==undefined){f=h.vdRect(W.gDefaultTitlePosition);AE.SetRect(f);AE.CalculateDeviceRect();h.PutLocation(F.DssGraphTitleLocation,f);}if(j!==null&&j!==undefined){k=h.vdRect(W.gDefaultSubtitlePosition);j.SetRect(k);j.CalculateDeviceRect();h.PutLocation(F.DssGraphSubTitleLocation,k);}if(s!==null&&s!==undefined){w=h.vdRect(W.gDefaultFootnotePosition);s.SetRect(w);s.CalculateDeviceRect();h.PutLocation(F.DssGraphFootnoteLocation,w);}}}}}}if(h.mManualLayoutMode&&!h.mRecalculateFrame){AB=h.mGraphWidth;q=h.mGraphHeight;if(this.mIsExpanded){h.SetGraphSize(e,d);}if(this.mIsExpanded){h.SetGraphSize(AB,q);}}else{if(!this.mChartContextPtr.mIsGraphMatrix){u=15;c=h.GetProperty(F.DssGraphFontSize100,new W.TripleId({ObjectId:G.DssGraphDataText,SeriesId:0}));if(c){u=Math.floor(c/100+0.5);}if(u>this.mTopMargin){p=u-this.mTopMargin;if(p>x.height/10){p=x.height/10;}x.y+=p;x.height-=p;this.mTopMargin=u;}}}},Draw:function O(){var b,d,c;if(!this.mIsInitialized){this.GenerateMapAndList();}b=this.mGraphObjectList.length;if(b>0){this.mGraphObjectList[0].Draw();}d=this.mPlotManagers.length;for(c=0;c<d;++c){this.mPlotManagers[c].Draw();}if(this.mLegendPtr!==null&&this.mLegendPtr!==undefined){this.mLegendPtr.Draw();}for(c=1;c<b;++c){this.mGraphObjectList[c].Draw();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.hash");mstrmojo.requiresClsP("mstrmojo.chart","TripleId","Rect2D","GenericContext","GraphObjectManager","ChartManager","Point2D","NumberObject","ChartAdvFormat");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType","EnumNumberCategory","EnumLabelLevelOption","EnumImageUsage","EnumAxisDirection","EnumGraphMatrixMajorGraphType","EnumAxisLabelsLocation","EnumGraphMatrixMarkerTypeInChart","EnumFontRotation","EnumRectCompare");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphType","EnumDSSGraphProperty","EnumDSSGraphObject","EnumVariantBool","EnumDSSExtraGraphProperty","EnumDSSGraphFillEffect","EnumDSSGraphStockLayout");mstrmojo.requiresCls("mstrmojo.chart.common.Utility");var As=mstrmojo.chart,Q=As.enums,A4=Q.EnumLayout,A8=Q.EnumMajorGraphType,AW=Q.EnumOrientation,Ad=Q.EnumGraphSubType,Aq=Q.EnumGraphMajorType,j=Q.EnumGraphMatrixMajorGraphType,Aw=Q.EnumAxisDirection,e=Q.EnumAxisLabelsLocation,r=Q.EnumGraphMatrixMajorGraphType,I=Q.EnumFontRotation,Am=Q.EnumGraphMatrixMarkerTypeInChart,Ai=Q.EnumRectCompare,AP=Q.EnumImageUsage,Y=mstrmojo.hash,Aa=As.gNullTripleId,Al=mstrmojo.chart.model,AV=Al.enums,BA=AV.EnumDSSGraphType,BB=AV.EnumDSSGraphProperty,BC=AV.EnumDSSGraphObject,AR=AV.EnumVariantBool,AM=AR.VARIANT_FALSE,Av=AV.EnumDSSExtraGraphProperty,AT=mstrmojo.chart.common.Utility,AX=AT.tripleId;var A0=0,Ac=2,X=0;var AC=new As.Rect2D();var AE=new As.TripleId();var AK=new As.ChartAdvFormat();var AQ=20;function S(BL){var BM=1,BR=2,BN=4,BQ=8;var BP=this.mDatasetPtr.showHideItemsOnAxis(BL),BO=0;if(BP.axisLabels){BO=BO|BN;}if(BP.majorGrids){BO=BO|BR;}if(BP.minorGrids){BO=BO|BQ;}if(BP.axisBody){BO=BO|BM;}return BO;}function Au(BP){var BO={HighTrim:0,LowTrim:0,isCaTrim:true};if(this.mUniformAxisPtr){var BN,BQ=this.mChartContextPtr,BM=BQ.getUniformAxisContext(),BL=BM.CategoryAxis;BN=BP?BL.X:BL.Y;BO.HighTrim=BN.Trims[1];BO.LowTrim=BN.Trims[0];}return BO;}function AA(){var BN={PrimaryHighTrim:0,PrimaryLowTrim:0,SecondaryHighTrim:0,SecondaryLowTrim:0};if(this.mUniformAxisPtr){var BM,BP=this.mUniformAxisPtr,BQ=this.mChartContextPtr,BL=BQ.getUniformAxisContext(),BO=BL.ValueAxis;switch(BP.Key){case"x2":case"X2":BM=BO.X2;BN.SecondaryLowTrim=BM.Trims[0];BN.SecondaryHighTrim=BM.Trims[1];break;case"y2":case"Y2":BM=BO.Y2;BN.SecondaryLowTrim=BM.Trims[0];BN.SecondaryHighTrim=BM.Trims[1];break;case"x":case"x1":case"X":case"X1":BM=BO.X1;BN.PrimaryLowTrim=BM.Trims[0];BN.PrimaryHighTrim=BM.Trims[1];break;default:BM=BO.Y1;BN.PrimaryLowTrim=BM.Trims[0];BN.PrimaryHighTrim=BM.Trims[1];break;}}return BN;}function v(BT){var BR=this.mChartContextPtr.GetGraphMatrixContext(),BU=BT.ShapeType||BR.mMarkerShape;BR.mGraphType=this.mGraphType;BR.updateGMGraphTypeWithMarkerShape(BU);if(BT.DataAreaPaddings){BR.UpdateValueAxisPadding(BT.DataAreaPaddings);}if(BT.ColorBy){var BS=BT.ColorBy;BR.mHasColorBy=BS.HasColorBy||false;}if(BT.SizeBy){var BX=BT.SizeBy;BR.mHasSizeBy=BX.HasSizeBy||BR.mHasSizeBy;BR.mMaxSizeVal=BX.Max||BR.mMaxSizeVal;BR.mMinSizeVal=BX.Min||BR.mMinSizeVal;BR.mCustomScaleForSizeBy=BX.mCustomScaleForSizeBy||BX.CustomScaleForSizeBy;}var BO=this.mChartContextPtr,BW=BO.GetGraphMajorType();BR.mHasSizeBy=(BW===Aq.GMT_BUBBLE)||BR.mHasSizeBy;var BM=1,BY=2;BR.AxisLayout=BT.AxisLayout||(BM|BY);if(BT.ElementInfo){var BQ=BR.mElementsInfo.Max,BN=BR.mElementsInfo.Min,BL=BT.ElementInfo;if(BL.Max){var BV=BL.Max;BQ.Mode=BV.Mode||BQ.Mode;BQ.Size=BV.Size||BQ.Size;}if(BL.Min){var BP=BL.Min;BN.Mode=BP.Mode||BN.Mode;BN.Size=BP.Size||BN.Size;}}}function p(BT){var BP=this.mChartContextPtr,BS=BP.getUniformAxisContext();if(BT.UniformAxisPaddings){var BQ=BT.UniformAxisPaddings;this.UpdateUniformAxisMargins(BQ);if(BP.IsGridChart()===false){var BW=BS.ValueAxis,BN=BW.X1,BM=BW.X2,BV=BW.Y1,BU=BW.Y2;BU.Trims[1]=BQ.ySecondaryHighTrim;BM.Trims[1]=BQ.xSecondaryHighTrim;BU.Trims[0]=BQ.ySecondaryLowTrim;BM.Trims[0]=BQ.xSecondaryLowTrim;BV.Trims[1]=BQ.yPrimaryHighTrim;BN.Trims[1]=BQ.xPrimaryHighTrim;BV.Trims[0]=BQ.yPrimaryLowTrim;BN.Trims[0]=BQ.xPrimaryLowTrim;BM.perCell=BQ.x2PerCell;BU.PerCell=BQ.y2PerCell;BV.PerCell=BQ.yPerCell;BN.PerCell=BQ.xPerCell;}if(BP.IsBubbleChart()===false&&BP.IsScatterChart()===false){var BR=BS.CategoryAxis,BO=BR.X,BL=BR.Y;BO.Trims[0]=BQ.xCaLowTrim;BO.Trims[1]=BQ.xCaHighTrim;BL.Trims[0]=BQ.yCaLowTrim;BL.Trims[1]=BQ.yCaHighTrim;}}BS.mIsAxisTitleAndLabelRequired=false;}function BG(BL){switch(BL){case BC.DssGraphY1Body:case BC.DssGraphY2Body:case BC.DssGraphY3Body:case BC.DssGraphY4Body:case BC.DssGraphX1Body:case BC.DssGraphX2Body:return true;}return false;}function AD(){var BL=this.mChartContextPtr.mGraphType;switch(BL){case BA.DssGraphTypeX_Y_Scatter:case BA.DssGraphTypeDualAxis_X_Y_Scatter:case BA.DssGraphTypeX_Y_Scatter_with_Labels:case BA.DssGraphTypeDualAxis_X_Y_Scatter_with_Labels:case BA.DssGraphTypeBubble:case BA.DssGraphTypeBubble_DualAxis:case BA.DssGraphTypeBubble_With_Labels:case BA.DssGraphTypeBubble_DualAxis_With_Labels:case BA.DssGraphTypeHorizontal_Line_Absolute:case BA.DssGraphTypeHorizontal_Line_Stacked:case BA.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case BA.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case BA.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case BA.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case BA.DssGraphTypeHorizontal_Line_Percent:case BA.DssGraphTypeHorizontal_Bar_Side_by_Side:case BA.DssGraphTypeHorizontal_Bar_Stacked:case BA.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case BA.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case BA.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:case BA.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case BA.DssGraphTypeHorizontal_Bar_Percent:case BA.DssGraphTypeHorizontal_Bar_Absolute:case BA.DssGraphTypeHorizontal_Area_Absolute:case BA.DssGraphTypeHorizontal_Area_Stacked:case BA.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case BA.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case BA.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case BA.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case BA.DssGraphTypeHorizontal_Area_Percent:case BA.DssGraphTypeHorizontal_Bar_DualAxis_Percent:case BA.DssGraphTypeHorizontal_Line_DualAxis_Percent:case BA.DssGraphTypeHorizontal_Area_DualAxis_Percent:return true;default:return false;}}function A1(){switch(this.mChartContextPtr.mGraphType){case BA.DssGraphTypeHorizontal_Line_Absolute:case BA.DssGraphTypeHorizontal_Line_Stacked:case BA.DssGraphTypeHorizontal_Line_BiPolar_Absolute:case BA.DssGraphTypeHorizontal_Line_BiPolar_Stacked:case BA.DssGraphTypeHorizontal_Line_DualAxis_Absolute:case BA.DssGraphTypeHorizontal_Line_DualAxis_Stacked:case BA.DssGraphTypeHorizontal_Line_Percent:case BA.DssGraphTypeHorizontal_Bar_Side_by_Side:case BA.DssGraphTypeHorizontal_Bar_Stacked:case BA.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case BA.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:case BA.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:case BA.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:case BA.DssGraphTypeHorizontal_Bar_Percent:case BA.DssGraphTypeHorizontal_Bar_Absolute:case BA.DssGraphTypeHorizontal_Area_Absolute:case BA.DssGraphTypeHorizontal_Area_Stacked:case BA.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case BA.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case BA.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case BA.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case BA.DssGraphTypeHorizontal_Area_Percent:case BA.DssGraphTypeGridChart:case BA.DssGraphTypeHorizontal_Bar_DualAxis_Percent:case BA.DssGraphTypeHorizontal_Line_DualAxis_Percent:case BA.DssGraphTypeHorizontal_Area_DualAxis_Percent:return true;default:return false;}}function Ar(BL){if(BL){return AD.call(this)?1:0;}return A1.call(this)?0:1;}function Ab(BL){BL.mDataAreaBottomMargin=BL.mDataAreaTopMargin=BL.mDataAreaRightMargin=BL.mDataAreaLeftMargin=0;}function f(BN,BO){if(Ar.call(this,BN,BO)===0){return true;}var BP=this.mChartContextPtr,BL=BP.getValueAxisKeyFromLayout(BN,BO),BM=BP.getUniformAxisContext().ValueAxis;return BM[BL].Metrics.length>0;}function Ax(){var BM=this.mChartContextPtr,BL;if(BM.mIsGraphMatrix){BM.mAbsoluteFontLineSize=true;BM.mManualLayoutMode=false;this.mFontAntiAlias=true;BM.mIsFontAntiAlias=this.mFontAntiAlias;return ;}if(!BM.mIsTimeSeriesChart){BL=BM.GetProperty(BB.DssGraphLockFontSize,Aa);if(BL){BM.mAbsoluteFontLineSize=(BL!==AM);}else{BM.mAbsoluteFontLineSize=true;}BL=BM.GetProperty(BB.DssGraphSeriesByColumn,Aa);if(BL){this.mDatasetPtr.mSeriesByColumn=(BL!==AM);}else{this.mDatasetPtr.mSeriesByColumn=true;}}BL=BM.GetProperty(BB.DssGraphAutoArrange,Aa);if(BL){BM.mManualLayoutMode=(BL===AM);if(BL===AM){BL=BM.GetProperty(Av.DssGraphInfoRecalculateChartFrame,Aa);if(BL){BM.mRecalculateFrame=(BL!==AM);}else{BM.mRecalculateFrame=false;}}}else{BM.mManualLayoutMode=false;}BL=BM.GetProperty(BB.DssGraphFontAntiAlias,Aa);if(BL){this.mFontAntiAlias=BL;}else{this.mFontAntiAlias=true;}BM.SetFontAntiAlias(this.mFontAntiAlias);}function A6(BO,BN,BP,BM){BN=(BN!==undefined)?BN:-1;BP=(BP!==undefined)?BP:true;this.mAxisLayoutHighPadding=0;this.mAxisLayoutLowPadding=0;if(f.call(this,BO,BP)===false){BM.CanSkip=true;return ;}var BQ=this.mChartContextPtr;BM.IsPrimary=BP;BM.MaxLabelLength=BN;var BL=BQ.getUniformAxisContext();BL.mIsAxisTitleAndLabelRequired=true;BQ.mIsEntireChart=false;Ax.call(this);if(f.call(this,BO,BP)===false){BM.CanSkip=true;}}function BK(){this.mAxisLayoutHighPadding=this.mUniformAxisPtr.mHighTrim||0;this.mAxisLayoutLowPadding=this.mUniformAxisPtr.mLowTrim||0;}function AO(BP,BO,BL,BQ,BN){if(this.mVisualMode===A0){BN.CanSkip=true;return ;}if(BP){if(BO<=AQ&&AD.call(this)){BN.CanSkip=true;return ;}}else{if(BL<=AQ&&A1.call(this)===false){BN.CanSkip=true;return ;}}var BR=this.mChartContextPtr;BR.SetGraphSize(BO,BL);BR.mIsEntireChart=false;var BM=BR.getUniformAxisContext();BM.mIsAxisTitleAndLabelRequired=true;if(BQ===undefined){BQ=true;}BN.IsPrimary=BQ;if(BN===undefined){BN={SkipLayout:false};}else{if(BN&&BN.SkipLayout){BN.SkipLayout=BN.SkipLayout&&(this.mUniformAxisPtr!==null);}else{BN.SkipLayout=false;}}BR.populateCanvas();}function a(BM,BT){var BN=200,BQ=201,BL=202,BW=4,BO=1,BX=24,BP=this.mChartContextPtr,BV=BP.GetGraphMatrixContext(),BR=BP.mGraphType;BP.mGraphType=BM;var BU=BP.GetGraphMajorType(),BS=BV.isCombinationChart()||BT===203;if(BT===BN){if(BU===Aq.GMT_CATEGORY){if(BP.IsBarChart()){switch(BM){case BA.DssGraphTypeVertical_Bar_Absolute:case BA.DssGraphTypeVertical_Bar_Side_by_Side:BM=BA.DssGraphTypeVertical_Line_Absolute;break;case BA.DssGraphTypeVertical_Bar_Stacked:BM=BA.DssGraphTypeVertical_Line_Stacked;break;case BA.DssGraphTypeVertical_Bar_BiPolar_Absolute:BM=BA.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BA.DssGraphTypeVertical_Bar_BiPolar_Stacked:BM=BA.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BA.DssGraphTypeVertical_Bar_DualAxis_Absolute:BM=BA.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BA.DssGraphTypeVertical_Bar_DualAxis_Stacked:BM=BA.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BA.DssGraphTypeVertical_Bar_Percent:BM=BA.DssGraphTypeVertical_Line_Percent;break;case BA.DssGraphTypeVertical_Bar_DualAxis_Percent:BM=BA.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BA.DssGraphTypeHorizontal_Bar_DualAxis_Percent:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;case BA.DssGraphTypeHorizontal_Bar_Percent:BM=BA.DssGraphTypeHorizontal_Line_Percent;break;case BA.DssGraphTypeHorizontal_Line_Percent:BM=BA.DssGraphTypeHorizontal_Line_Percent;break;case BA.DssGraphTypeHorizontal_Bar_Absolute:case BA.DssGraphTypeHorizontal_Bar_Side_by_Side:BM=BA.DssGraphTypeHorizontal_Line_Absolute;break;case BA.DssGraphTypeHorizontal_Bar_Stacked:BM=BA.DssGraphTypeHorizontal_Line_Stacked;break;case BA.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:BM=BA.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BA.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:BM=BA.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BA.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BA.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;}}else{if(BP.IsAreaChart()){switch(BM){case BA.DssGraphTypeVertical_Area_Absolute:BM=BA.DssGraphTypeVertical_Line_Absolute;break;case BA.DssGraphTypeVertical_Area_Stacked:BM=BA.DssGraphTypeVertical_Line_Stacked;break;case BA.DssGraphTypeVertical_Area_BiPolar_Absolute:BM=BA.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BA.DssGraphTypeVertical_Area_BiPolar_Stacked:BM=BA.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BA.DssGraphTypeVertical_Area_DualAxis_Absolute:BM=BA.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BA.DssGraphTypeVertical_Area_DualAxis_Stacked:BM=BA.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BA.DssGraphTypeVertical_Area_Percent:BM=BA.DssGraphTypeVertical_Line_Percent;break;case BA.DssGraphTypeHorizontal_Area_Absolute:BM=BA.DssGraphTypeHorizontal_Line_Absolute;break;case BA.DssGraphTypeHorizontal_Area_Stacked:BM=BA.DssGraphTypeHorizontal_Line_Stacked;break;case BA.DssGraphTypeHorizontal_Area_BiPolar_Absolute:BM=BA.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BA.DssGraphTypeHorizontal_Area_BiPolar_Stacked:BM=BA.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BA.DssGraphTypeHorizontal_Area_DualAxis_Absolute:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BA.DssGraphTypeHorizontal_Area_DualAxis_Stacked:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BA.DssGraphTypeHorizontal_Area_Percent:BM=BA.DssGraphTypeHorizontal_Line_Percent;break;case BA.DssGraphTypeVertical_Area_DualAxis_Percent:BM=BA.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BA.DssGraphTypeHorizontal_Area_DualAxis_Percent:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}}}}else{if(BT===BQ||BT===BL){if(BP.IsAreaChart()){switch(BM){case BA.DssGraphTypeVertical_Area_Absolute:BM=BA.DssGraphTypeVertical_Line_Absolute;break;case BA.DssGraphTypeVertical_Area_Stacked:BM=BA.DssGraphTypeVertical_Line_Stacked;break;case BA.DssGraphTypeVertical_Area_BiPolar_Absolute:BM=BA.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BA.DssGraphTypeVertical_Area_BiPolar_Stacked:BM=BA.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BA.DssGraphTypeVertical_Area_DualAxis_Absolute:BM=BA.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BA.DssGraphTypeVertical_Area_DualAxis_Stacked:BM=BA.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BA.DssGraphTypeVertical_Area_Percent:BM=BA.DssGraphTypeVertical_Line_Percent;break;case BA.DssGraphTypeHorizontal_Area_Absolute:BM=BA.DssGraphTypeHorizontal_Line_Absolute;break;case BA.DssGraphTypeHorizontal_Area_Stacked:BM=BA.DssGraphTypeHorizontal_Line_Stacked;break;case BA.DssGraphTypeHorizontal_Area_BiPolar_Absolute:BM=BA.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BA.DssGraphTypeHorizontal_Area_BiPolar_Stacked:BM=BA.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BA.DssGraphTypeHorizontal_Area_DualAxis_Absolute:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BA.DssGraphTypeHorizontal_Area_DualAxis_Stacked:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BA.DssGraphTypeHorizontal_Area_Percent:BM=BA.DssGraphTypeHorizontal_Line_Percent;break;case BA.DssGraphTypeVertical_Area_DualAxis_Percent:BM=BA.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BA.DssGraphTypeHorizontal_Area_DualAxis_Percent:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}else{if(BP.IsBarChart()){switch(BM){case BA.DssGraphTypeVertical_Bar_Absolute:case BA.DssGraphTypeVertical_Bar_Side_by_Side:BM=BA.DssGraphTypeVertical_Line_Absolute;break;case BA.DssGraphTypeVertical_Bar_DualAxis_Stacked:BM=BA.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BA.DssGraphTypeVertical_Bar_Stacked:BM=BA.DssGraphTypeVertical_Line_Stacked;break;case BA.DssGraphTypeVertical_Bar_BiPolar_Stacked:BM=BA.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BA.DssGraphTypeHorizontal_Bar_Stacked:BM=BA.DssGraphTypeHorizontal_Line_Stacked;break;case BA.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BA.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:BM=BA.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BA.DssGraphTypeVertical_Bar_Percent:BM=BA.DssGraphTypeVertical_Line_Percent;break;case BA.DssGraphTypeHorizontal_Bar_Percent:BM=BA.DssGraphTypeHorizontal_Line_Percent;break;case BA.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:case BA.DssGraphTypeVertical_Bar_BiPolar_Absolute:BM=BA.DssGraphTypeVertical_Bar_BiPolar_Absolute;break;case BA.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case BA.DssGraphTypeVertical_Bar_DualAxis_Absolute:BM=BA.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BA.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:case BA.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:BM=BA.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BA.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:case BA.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BA.DssGraphTypeHorizontal_Bar_Side_by_Side:case BA.DssGraphTypeHorizontal_Bar_Absolute:BM=BA.DssGraphTypeHorizontal_Line_Absolute;break;case BA.DssGraphTypeVertical_Bar_DualAxis_Percent:BM=BA.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BA.DssGraphTypeHorizontal_Bar_DualAxis_Percent:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}}}else{if(BT===BW||BT===BO||BT===BX){if(BP.IsAreaChart()){switch(BM){case BA.DssGraphTypeVertical_Area_Absolute:BM=BA.DssGraphTypeVertical_Line_Absolute;break;case BA.DssGraphTypeVertical_Area_Stacked:BM=BA.DssGraphTypeVertical_Line_Stacked;break;case BA.DssGraphTypeVertical_Area_BiPolar_Absolute:BM=BA.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BA.DssGraphTypeVertical_Area_BiPolar_Stacked:BM=BA.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BA.DssGraphTypeVertical_Area_DualAxis_Absolute:BM=BA.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BA.DssGraphTypeVertical_Area_DualAxis_Stacked:BM=BA.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BA.DssGraphTypeVertical_Area_Percent:BM=BA.DssGraphTypeVertical_Line_Percent;break;case BA.DssGraphTypeHorizontal_Area_Absolute:BM=BA.DssGraphTypeHorizontal_Line_Absolute;break;case BA.DssGraphTypeHorizontal_Area_Stacked:BM=BA.DssGraphTypeHorizontal_Line_Stacked;break;case BA.DssGraphTypeHorizontal_Area_BiPolar_Absolute:BM=BA.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BA.DssGraphTypeHorizontal_Area_BiPolar_Stacked:BM=BA.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BA.DssGraphTypeHorizontal_Area_DualAxis_Absolute:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BA.DssGraphTypeHorizontal_Area_DualAxis_Stacked:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BA.DssGraphTypeHorizontal_Area_Percent:BM=BA.DssGraphTypeHorizontal_Line_Percent;break;case BA.DssGraphTypeVertical_Area_DualAxis_Percent:BM=BA.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BA.DssGraphTypeHorizontal_Area_DualAxis_Percent:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}else{if(BP.IsBarChart()){switch(BM){case BA.DssGraphTypeVertical_Bar_Side_by_Side:case BA.DssGraphTypeVertical_Bar_Absolute:BM=BA.DssGraphTypeVertical_Line_Absolute;break;case BA.DssGraphTypeVertical_Bar_DualAxis_Absolute:case BA.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:BM=BA.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BA.DssGraphTypeVertical_Bar_BiPolar_Absolute:case BA.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:BM=BA.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BA.DssGraphTypeHorizontal_Bar_Side_by_Side:case BA.DssGraphTypeHorizontal_Bar_Absolute:BM=BA.DssGraphTypeHorizontal_Line_Absolute;break;case BA.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:case BA.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BA.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:case BA.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:BM=BA.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BA.DssGraphTypeVertical_Bar_DualAxis_Stacked:BM=BA.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BA.DssGraphTypeVertical_Bar_Stacked:BM=BA.DssGraphTypeVertical_Line_Stacked;break;case BA.DssGraphTypeVertical_Bar_BiPolar_Stacked:BM=BA.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BA.DssGraphTypeHorizontal_Bar_Stacked:BM=BA.DssGraphTypeHorizontal_Line_Stacked;break;case BA.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BA.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:BM=BA.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BA.DssGraphTypeVertical_Bar_Percent:BM=BA.DssGraphTypeVertical_Line_Percent;break;case BA.DssGraphTypeHorizontal_Bar_Percent:BM=BA.DssGraphTypeHorizontal_Line_Percent;break;case BA.DssGraphTypeVertical_Bar_DualAxis_Percent:BM=BA.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BA.DssGraphTypeHorizontal_Bar_DualAxis_Percent:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}}}else{if(BS){if(BP.IsBarChart()){switch(BM){case BA.DssGraphTypeVertical_Bar_Absolute:case BA.DssGraphTypeVertical_Bar_Side_by_Side:BM=BA.DssGraphTypeVertical_Line_Absolute;break;case BA.DssGraphTypeVertical_Bar_Stacked:BM=BA.DssGraphTypeVertical_Line_Stacked;break;case BA.DssGraphTypeVertical_Bar_BiPolar_Absolute:BM=BA.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BA.DssGraphTypeVertical_Bar_BiPolar_Stacked:BM=BA.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BA.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:case BA.DssGraphTypeVertical_Bar_DualAxis_Absolute:BM=BA.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BA.DssGraphTypeVertical_Bar_DualAxis_Stacked:BM=BA.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BA.DssGraphTypeVertical_Bar_Percent:BM=BA.DssGraphTypeVertical_Line_Percent;break;case BA.DssGraphTypeHorizontal_Bar_Percent:BM=BA.DssGraphTypeHorizontal_Line_Percent;break;case BA.DssGraphTypeHorizontal_Bar_Absolute:case BA.DssGraphTypeHorizontal_Bar_Side_by_Side:BM=BA.DssGraphTypeHorizontal_Line_Absolute;break;case BA.DssGraphTypeHorizontal_Bar_Stacked:BM=BA.DssGraphTypeHorizontal_Line_Stacked;break;case BA.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:BM=BA.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BA.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:BM=BA.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BA.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BA.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BA.DssGraphTypeHorizontal_Line_Percent:BM=BA.DssGraphTypeHorizontal_Line_Percent;break;case BA.DssGraphTypeVertical_Bar_DualAxis_Percent:BM=BA.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BA.DssGraphTypeHorizontal_Bar_DualAxis_Percent:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}else{if(BP.IsAreaChart()){switch(BM){case BA.DssGraphTypeVertical_Area_Absolute:BM=BA.DssGraphTypeVertical_Line_Absolute;break;case BA.DssGraphTypeVertical_Area_Stacked:BM=BA.DssGraphTypeVertical_Line_Stacked;break;case BA.DssGraphTypeVertical_Area_BiPolar_Absolute:BM=BA.DssGraphTypeVertical_Line_BiPolar_Absolute;break;case BA.DssGraphTypeVertical_Area_BiPolar_Stacked:BM=BA.DssGraphTypeVertical_Line_BiPolar_Stacked;break;case BA.DssGraphTypeVertical_Area_DualAxis_Absolute:BM=BA.DssGraphTypeVertical_Line_DualAxis_Absolute;break;case BA.DssGraphTypeVertical_Area_DualAxis_Stacked:BM=BA.DssGraphTypeVertical_Line_DualAxis_Stacked;break;case BA.DssGraphTypeVertical_Area_Percent:BM=BA.DssGraphTypeVertical_Line_Percent;break;case BA.DssGraphTypeHorizontal_Area_Absolute:BM=BA.DssGraphTypeHorizontal_Line_Absolute;break;case BA.DssGraphTypeHorizontal_Area_Stacked:BM=BA.DssGraphTypeHorizontal_Line_Stacked;break;case BA.DssGraphTypeHorizontal_Area_BiPolar_Absolute:BM=BA.DssGraphTypeHorizontal_Line_BiPolar_Absolute;break;case BA.DssGraphTypeHorizontal_Area_BiPolar_Stacked:BM=BA.DssGraphTypeHorizontal_Line_BiPolar_Stacked;break;case BA.DssGraphTypeHorizontal_Area_DualAxis_Absolute:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Absolute;break;case BA.DssGraphTypeHorizontal_Area_DualAxis_Stacked:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Stacked;break;case BA.DssGraphTypeHorizontal_Area_Percent:BM=BA.DssGraphTypeHorizontal_Line_Percent;break;case BA.DssGraphTypeVertical_Area_DualAxis_Percent:BM=BA.DssGraphTypeVertical_Line_DualAxis_Percent;break;case BA.DssGraphTypeHorizontal_Area_DualAxis_Percent:BM=BA.DssGraphTypeHorizontal_Line_DualAxis_Percent;break;}}}}}}}BP.mGraphType=BR;return BM;}function H(BP,BO,BM){var BL=BM.length,BN;for(BN=0;BN<BL;++BN){if(BM[BN].si===BP&&BM[BN].gi===BO){return true;}}return false;}function n(BO,BZ,BT,BR,BQ,BY){var Ba={},BP=this.mChartContextPtr,BS,BW;if(BP.mCanvas===null){BP.populateCanvas();}BO=BO||1014;BZ=BZ||694;Ba.GW=BO;Ba.GH=BZ;BP.SaveSurfaceToObject(Ba);var BX=this.mChartContextPtr.GetProperty(BB.DssGraphSeriesByColumn,Aa),BV,BL;if(BX&&BX!==AM){BV=BR;BL=BT;}else{BV=BT;BL=BR;}var BM=[];BW=BM.length;if(BW>0){Ba.Areas=[];for(BS=0;BS<BW;++BS){var BN={};var BU=new As.TripleId({ObjectId:BM[BS].GetObjectID(),SeriesId:BM[BS].GetSeriesID(),GroupId:BM[BS].GetGroupID()});if(BU.mObjectId!==BC.DssGraphRiser&&BU.mObjectId!==BC.DssGraphDataMarker&&BU.mObjectId!==BC.DssGraphPieSlice&&BU.mObjectId!==BC.DssGraphLegendMarker&&BU.mObjectId!==BC.DssGraphLegendText&&BU.mObjectId!==BC.DssGraph2DO1Label){continue;}if(!H.call(this,BU.mSeriesId,BU.mGroupId,BY)){continue;}BN.OID=BU.mObjectId;BN.SID=BU.mSeriesId;BN.GID=BU.mGroupId;BN.Shape=BM[BS].GetShape();BN.Coords=BM[BS].GetCoordinates();Ba.Areas.push(BN);}}if(BY.length>0){BW=BY.length;Ba.Selected=[];for(BS=0;BS!==BW;++BS){Ba.Selected.push(BY[BS].sid);Ba.Selected.push(BY[BS].gid);}}return Ba;}function B(BQ){if(BQ){var BP=this.mChartContextPtr,BN=this.mChartManagerPtr;if(!(BP&&BN&&BP.mIsGraphMatrix)){return ;}if(BP.mPartialRendering&&(BP.IsBubbleChart()||BP.IsScatterChart())){var BM=BN.GetGraphObjectManager(As.PlotId0),BL,BO=false;if(BM&&BM.waitingList){BL=BM.waitingList;if(BO){BQ.hiddenItems=BQ.hiddenItems||[];BL.forEach(function(BR){BQ.hiddenItems.push({x:BR.Position.x,y:BR.Position.y,shp:BR.Shape,sz:BR.Size,id:null});});}else{BQ.hiddenItems=BM.waitingList;delete BM.waitingList;}}}}}function N(){this.mDatasetPtr.finalize();var BL=this.mChartManagerPtr;BL.Draw();}function A2(){var BL=this.mChartContextPtr;if(BL.GetGraphMatrixGraphMajorType()===r._AREA&&BL.IsVertical()){return 1;}return 2;}function AI(BM,BO,BN,BL){if(BN===null||BN===undefined){return ;}if(BL){if(BO){BN.ResetAxisPadding();BN.SetDataset(this.mDatasetPtr);BN.AdjustTitleArea(BM);BN.AdjustDataArea(BM,X,X,false);}else{BN.TrimAxisPadding(BM);BN.ReserveTitleAndLabels(BM,X,X);BN.AdjustDeviceDataArea(BM,false);}}else{if(BO){BN.TrimAxisPadding(BM,false);BN.SetDeviceDataArea(BM);BN.ResetAxisPadding();BN.GenerateMapAndList();}else{BN.TrimAxisPadding(BM,false);BN.SetDeviceDataArea(BM);BN.AdjustDeviceDataArea(BM,true);BN.UpdateTitleAndLabelArea(BM);BN.GenerateGridLinesEx();}}}function C(BM,BT,BS){var BN=this.mChartContextPtr;if(!BN.mIsGraphMatrix){return null;}var BO=null;if(BT){BO=this.mUniformAxisPtr;}else{var BL=[BC.DssGraphO1Body,BC.DssGraphX1Body,BC.DssGraphY1Body,BC.DssGraphY2Body];if(!BS&&!BN.IsDualAxis()){BS=true;}if(BN.GetGraphType()===BA.DssGraphTypeGridChart){var BP=new As.CategoryAxisInfo(),BR=this.mDatasetPtr.mSeriesByColumn;if(!BM){BP.ToY(!BR);}else{BP.ToX(BR);}AX.reset(AE,BP.mId.mObjectId,BP.mId.mSeriesId,BP.mId.mGroupId);}else{var BQ;if(BN.IsVertical()){BQ=BM?0:2;}else{BQ=BM?2:0;}if(!BS){BQ++;}AX.reset(AE,BL[BQ],0,-3);}BO=this.mChartManagerPtr.GetGraphObjectManager(AE,true);}return BO;}function BE(BN){var BS=this.mChartContextPtr,BL=false;if(BS.mIsTimeSeriesChart){BL=true;}else{var BP=BS.GetProperty(BB.DssGraph2DOrdSpaceMode,As.gNullTripleId);if(BP){BL=BP;}}var BM,BO=BS.GetGraphType();if(BO>=BA.DssGraphTypeVertical_Line_Absolute&&BO<=BA.DssGraphTypeHorizontal_Line_Percent){BM=true;}var BR=this.mDatasetPtr.GetGroupCount(),BQ=(BR<=1&&BM);BN.mAxisCross=(BL&&BM&&!BQ);}function AL(BL,BR,BS){var BQ=BR[BL.toUpperCase()],BN=BQ.CondenseLabel,BO=BS.PrimaryMetricIndex,BP=BO.length>=1?BO[0]:-1,BM=BN[BP],BT=BS.getCondenseStatus();if(BM!==null&&BM!==undefined){if(BT!==undefined){if(BT!==BM){BS.checkCondense(BM);}}}}function AN(BS,BV){BV=(BV!==undefined)?BV:true;var Be="X1",Bc="X1",BP=C.call(this,BS,true,BV),BQ=0,Ba=BS?Aw.AD_X:Aw.AD_Y,BN=this.mChartContextPtr,BU=BN.getUniformAxisContext(),BT=BU.ValueAxis;var BW=Ar.call(this,BS,BV)===BQ,BY,BZ,BO,Bb,BX;if(BP){if(BW===false){BX=BP.getCondenseStatus();if(BX===null){BY=Be;AL.call(this,BY,BT,BP);}}return BP;}var BR=1;if(BW){var BL=BN.GetGraphType();if(BL===BA.DssGraphTypeGridChart){var Bd=this.mDatasetPtr.mSeriesByColumn;if(BS){Bc=!Bd?"O1":"O2";}else{Bc=Bd?"O1":"O2";Be="Y1";}}else{Bc="O1";if(!BS){Be="Y1";}}if(Bc==="O1"){BN.caKeyMap.c1=Be;}else{BN.caKeyMap.c2=Be;}BP=this.mUniformAxisPtr=new As.CategoryAxis({TripleId:BN.getAxisTripleId(Bc),mChartContextPtr:this.mChartContextPtr,GraphObjectManager:this.mChartManagerPtr,AxisLabelsLocation:e.ALL_BOTTOM,AxisDirection:Ba,IsUA:true});BE.call(this,BP);BZ=S.call(this,Be);BP.SetIntegrity(BZ);}else{if(!BS){Be="Y1";Bc="Y1";}var BM=BS?BT.X1:BT.Y1;if(BV===false){Be=BS?"X2":"Y2";BM=BT[Be];Bc=BS?"X2":"Y2";}BO=BM.Metrics;BP=this.mUniformAxisPtr=new As.ValueAxis({mChartContextPtr:this.mChartContextPtr,TripleId:BN.getAxisTripleId(Bc),GraphObjectManager:this.mChartManagerPtr,Min:BM.Min,Max:BM.Max,LargerGridInterval:false,IsPercent:BN.IsPercentChart(),AxisDirection:Ba,IsShown:true,PrimaryMetricIndex:BO,IsUA:true});BY=Be;AL.call(this,BY,BT,BP);Bb=BT[BY.toUpperCase()];if(Bb.Valid===false){BP.SetIntegrity(BR);}else{BY=Be;if(BY==="x"){BY="X1";}BZ=S.call(this,BY);BP.SetIntegrity(BZ);}}BP.mIsUniformAxis=true;BP.Key=Be;return BP;}function AF(BT,BS,BL,BO){var BN,BP,BR,BM=this.mChartContextPtr,BQ=BM.getUniformAxisContext();if(BS===false){if(BT){BN=BL?"X1":"Y1";}else{BN=BL?"X2":"Y2";}BP=BQ.ValueAxis[BN];BP.Trims[0]=BO.mLowTrim||0;BP.Trims[1]=BO.mHighTrim||0;}else{BN=BL?"X":"Y";BR=BQ.CategoryAxis[BN];BR.Trims[0]=BO.mLowTrim||0;BR.Trims[1]=BO.mHighTrim||0;}}function L(BM,BQ,BO,BP){if(BP===undefined){BP=true;}this.mChartContextPtr.resetCanvas();this.mDatasetPtr.finalize();var BN=AN.call(this,BQ,BP);BN.SetDeviceDataArea(BM);AI.call(this,BM,BO,BN,false);BN.resetRestrictSpace();AF.call(this,BP,BO,BQ,BN);var BL=Ar.call(this,BQ,BP)===1;if(BL){this.mDatasetPtr.saveShownLabels(BN);}BN.Draw();}function F(BQ,BR,BY){var BO=this.mChartContextPtr,BS=BO.mDataset,Ba,BV=BO.getUniformAxisContext(),BZ=BV.ValueAxis,BN=BR?"X":"Y",BX;BN+=BY?"1":"2";BX=BZ[BN].Max;var BU=true;var BM=BS.showDatalabels();if(BM){BU=(BS.dataLabelStyle===2);}var BL=BX,BT,BW=null;if(BU){AK.restore();this.mDatasetPtr.getValueAxisNumberFormat(AK,BQ);var BP=new As.NumberObject({TripleId:new As.TripleId({ObjectId:BC.DssGraphDataText}),GraphObjectManager:this.mUniformAxisPtr,Number:BL,NumberFormat:AK,GraphCollectionObject:BW,Locale:0,clientDrag:false,DataSet:null,IsFinal:false,ColumnOffset:0});if(BP){BT=BP.mText;}Ba=BP;}else{BT=BS.GetTextLabel(0,0);Ba=new As.TextObject({TripleId:new As.TripleId({ObjectId:BC.DssGraphDataText}),GraphObjectManager:this.mUniformAxisPtr,GraphCollectionObject:BW});}if(Ba){Ba.SetText(BT);}return Ba;}function AY(BM){var BL={};switch(BM){case BA.DssGraphTypeVertical_Area_Absolute:BL.mMajorGraphType=A8.MGT_AREA;BL.mLayout=A4.LO_ABSOLUTE;BL.mOrientation=AW.OR_VERTICAL;BL.mGraphSubType=Ad.GST_NULL;break;case BA.DssGraphTypeVertical_Area_Stacked:BL.mMajorGraphType=A8.MGT_AREA;BL.mLayout=A4.LO_STACKED;BL.mOrientation=AW.OR_VERTICAL;BL.mGraphSubType=Ad.GST_NULL;break;case BA.DssGraphTypeVertical_Area_BiPolar_Absolute:BL.mMajorGraphType=A8.MGT_AREA;BL.mLayout=A4.LO_ABSOLUTE;BL.mOrientation=AW.OR_VERTICAL;BL.mGraphSubType=Ad.GST_BIPOLAR;break;case BA.DssGraphTypeVertical_Area_BiPolar_Stacked:BL.mMajorGraphType=A8.MGT_AREA;BL.mLayout=A4.LO_STACKED;BL.mOrientation=AW.OR_VERTICAL;BL.mGraphSubType=Ad.GST_BIPOLAR;break;case BA.DssGraphTypeVertical_Area_DualAxis_Absolute:BL.mMajorGraphType=A8.MGT_AREA;BL.mLayout=A4.LO_ABSOLUTE;BL.mOrientation=AW.OR_VERTICAL;BL.mGraphSubType=Ad.GST_DUALAXIS;break;case BA.DssGraphTypeVertical_Area_DualAxis_Stacked:BL.mMajorGraphType=A8.MGT_AREA;BL.mLayout=A4.LO_STACKED;BL.mOrientation=AW.OR_VERTICAL;BL.mGraphSubType=Ad.GST_DUALAXIS;break;case BA.DssGraphTypeVertical_Area_Percent:BL.mMajorGraphType=A8.MGT_AREA;BL.mLayout=A4.LO_PERCENT;BL.mOrientation=AW.OR_VERTICAL;BL.mGraphSubType=Ad.GST_NULL;break;case BA.DssGraphTypeHorizontal_Area_Absolute:BL.mMajorGraphType=A8.MGT_AREA;BL.mLayout=A4.LO_ABSOLUTE;BL.mOrientation=AW.OR_HORIZONTAL;BL.mGraphSubType=Ad.GST_NULL;break;case BA.DssGraphTypeHorizontal_Area_Stacked:BL.mMajorGraphType=A8.MGT_AREA;BL.mLayout=A4.LO_STACKED;BL.mOrientation=AW.OR_HORIZONTAL;BL.mGraphSubType=Ad.GST_NULL;break;case BA.DssGraphTypeHorizontal_Area_BiPolar_Absolute:BL.mMajorGraphType=A8.MGT_AREA;BL.mLayout=A4.LO_ABSOLUTE;BL.mOrientation=AW.OR_HORIZONTAL;BL.mGraphSubType=Ad.GST_BIPOLAR;break;case BA.DssGraphTypeHorizontal_Area_BiPolar_Stacked:BL.mMajorGraphType=A8.MGT_AREA;BL.mLayout=A4.LO_STACKED;BL.mOrientation=AW.OR_HORIZONTAL;BL.mGraphSubType=Ad.GST_BIPOLAR;break;case BA.DssGraphTypeHorizontal_Area_DualAxis_Absolute:BL.mMajorGraphType=A8.MGT_AREA;BL.mLayout=A4.LO_ABSOLUTE;BL.mOrientation=AW.OR_HORIZONTAL;BL.mGraphSubType=Ad.GST_DUALAXIS;break;case BA.DssGraphTypeHorizontal_Area_DualAxis_Stacked:BL.mMajorGraphType=A8.MGT_AREA;BL.mLayout=A4.LO_STACKED;BL.mOrientation=AW.OR_HORIZONTAL;BL.mGraphSubType=Ad.GST_DUALAXIS;break;case BA.DssGraphTypeHorizontal_Area_Percent:BL.mMajorGraphType=A8.MGT_AREA;BL.mLayout=A4.LO_PERCENT;BL.mOrientation=AW.OR_HORIZONTAL;BL.mGraphSubType=Ad.GST_NULL;break;case BA.DssGraphTypeVertical_Bar_Side_by_Side:BL.mMajorGraphType=A8.MGT_BAR;BL.mLayout=A4.LO_CLUSTER;BL.mOrientation=AW.OR_VERTICAL;BL.mGraphSubType=Ad.GST_NULL;break;case BA.DssGraphTypeVertical_Bar_Stacked:BL.mMajorGraphType=A8.MGT_BAR;BL.mLayout=A4.LO_STACKED;BL.mOrientation=AW.OR_VERTICAL;BL.mGraphSubType=Ad.GST_NULL;break;case BA.DssGraphTypeVertical_Bar_DualAxis_Side_by_Side:BL.mMajorGraphType=A8.MGT_BAR;BL.mLayout=A4.LO_CLUSTER;BL.mOrientation=AW.OR_VERTICAL;BL.mGraphSubType=Ad.GST_DUALAXIS;break;case BA.DssGraphTypeVertical_Bar_DualAxis_Stacked:BL.mMajorGraphType=A8.MGT_BAR;BL.mLayout=A4.LO_STACKED;BL.mOrientation=AW.OR_VERTICAL;BL.mGraphSubType=Ad.GST_DUALAXIS;break;case BA.DssGraphTypeVertical_Bar_BiPolar_Side_by_Side:BL.mMajorGraphType=A8.MGT_BAR;BL.mLayout=A4.LO_CLUSTER;BL.mOrientation=AW.OR_VERTICAL;BL.mGraphSubType=Ad.GST_BIPOLAR;break;case BA.DssGraphTypeVertical_Bar_BiPolar_Stacked:BL.mMajorGraphType=A8.MGT_BAR;BL.mLayout=A4.LO_STACKED;BL.mOrientation=AW.OR_VERTICAL;BL.mGraphSubType=Ad.GST_BIPOLAR;break;case BA.DssGraphTypeVertical_Bar_Percent:BL.mMajorGraphType=A8.MGT_BAR;BL.mLayout=A4.LO_PERCENT;BL.mOrientation=AW.OR_VERTICAL;BL.mGraphSubType=Ad.GST_NULL;break;case BA.DssGraphTypeHorizontal_Bar_Side_by_Side:BL.mMajorGraphType=A8.MGT_BAR;BL.mLayout=A4.LO_CLUSTER;BL.mOrientation=AW.OR_HORIZONTAL;BL.mGraphSubType=Ad.GST_NULL;break;case BA.DssGraphTypeHorizontal_Bar_Stacked:BL.mMajorGraphType=A8.MGT_BAR;BL.mLayout=A4.LO_STACKED;BL.mOrientation=AW.OR_HORIZONTAL;BL.mGraphSubType=Ad.GST_NULL;break;case BA.DssGraphTypeHorizontal_Bar_DualAxis_Side_by_Side:BL.mMajorGraphType=A8.MGT_BAR;BL.mLayout=A4.LO_CLUSTER;BL.mOrientation=AW.OR_HORIZONTAL;BL.mGraphSubType=Ad.GST_DUALAXIS;break;case BA.DssGraphTypeHorizontal_Bar_DualAxis_Stacked:BL.mMajorGraphType=A8.MGT_BAR;BL.mLayout=A4.LO_STACKED;BL.mOrientation=AW.OR_HORIZONTAL;BL.mGraphSubType=Ad.GST_DUALAXIS;break;case BA.DssGraphTypeHorizontal_Bar_BiPolar_Side_by_Side:BL.mMajorGraphType=A8.MGT_BAR;BL.mLayout=A4.LO_CLUSTER;BL.mOrientation=AW.OR_HORIZONTAL;BL.mGraphSubType=Ad.GST_BIPOLAR;break;case BA.DssGraphTypeHorizontal_Bar_BiPolar_Stacked:BL.mMajorGraphType=A8.MGT_BAR;BL.mLayout=A4.LO_STACKED;BL.mOrientation=AW.OR_HORIZONTAL;BL.mGraphSubType=Ad.GST_BIPOLAR;break;case BA.DssGraphTypeHorizontal_Bar_Percent:BL.mMajorGraphType=A8.MGT_BAR;BL.mLayout=A4.LO_PERCENT;BL.mOrientation=AW.OR_HORIZONTAL;BL.mGraphSubType=Ad.GST_NULL;break;case BA.DssGraphTypeVertical_Line_Absolute:BL.mMajorGraphType=A8.MGT_LINE;BL.mLayout=A4.LO_ABSOLUTE;BL.mOrientation=AW.OR_VERTICAL;BL.mGraphSubType=Ad.GST_NULL;break;case BA.DssGraphTypeVertical_Line_Stacked:BL.mMajorGraphType=A8.MGT_LINE;BL.mLayout=A4.LO_STACKED;BL.mOrientation=AW.OR_VERTICAL;BL.mGraphSubType=Ad.GST_NULL;break;case BA.DssGraphTypeVertical_Line_BiPolar_Absolute:BL.mMajorGraphType=A8.MGT_LINE;BL.mLayout=A4.LO_ABSOLUTE;BL.mOrientation=AW.OR_VERTICAL;BL.mGraphSubType=Ad.GST_BIPOLAR;break;case BA.DssGraphTypeVertical_Line_BiPolar_Stacked:BL.mMajorGraphType=A8.MGT_LINE;BL.mLayout=A4.LO_STACKED;BL.mOrientation=AW.OR_VERTICAL;BL.mGraphSubType=Ad.GST_BIPOLAR;break;case BA.DssGraphTypeVertical_Line_DualAxis_Absolute:BL.mMajorGraphType=A8.MGT_LINE;BL.mLayout=A4.LO_ABSOLUTE;BL.mOrientation=AW.OR_VERTICAL;BL.mGraphSubType=Ad.GST_DUALAXIS;break;case BA.DssGraphTypeVertical_Line_DualAxis_Stacked:BL.mMajorGraphType=A8.MGT_LINE;BL.mLayout=A4.LO_STACKED;BL.mOrientation=AW.OR_VERTICAL;BL.mGraphSubType=Ad.GST_DUALAXIS;break;case BA.DssGraphTypeVertical_Line_Percent:BL.mMajorGraphType=A8.MGT_LINE;BL.mLayout=A4.LO_PERCENT;BL.mOrientation=AW.OR_VERTICAL;BL.mGraphSubType=Ad.GST_NULL;break;case BA.DssGraphTypeHorizontal_Line_Absolute:BL.mMajorGraphType=A8.MGT_LINE;BL.mLayout=A4.LO_ABSOLUTE;BL.mOrientation=AW.OR_HORIZONTAL;BL.mGraphSubType=Ad.GST_NULL;break;case BA.DssGraphTypeHorizontal_Line_Stacked:BL.mMajorGraphType=A8.MGT_LINE;BL.mLayout=A4.LO_STACKED;BL.mOrientation=AW.OR_HORIZONTAL;BL.mGraphSubType=Ad.GST_NULL;break;case BA.DssGraphTypeHorizontal_Line_BiPolar_Absolute:BL.mMajorGraphType=A8.MGT_LINE;BL.mLayout=A4.LO_ABSOLUTE;BL.mOrientation=AW.OR_HORIZONTAL;BL.mGraphSubType=Ad.GST_BIPOLAR;break;case BA.DssGraphTypeHorizontal_Line_BiPolar_Stacked:BL.mMajorGraphType=A8.MGT_LINE;BL.mLayout=A4.LO_STACKED;BL.mOrientation=AW.OR_HORIZONTAL;BL.mGraphSubType=Ad.GST_BIPOLAR;break;case BA.DssGraphTypeHorizontal_Line_DualAxis_Absolute:BL.mMajorGraphType=A8.MGT_LINE;BL.mLayout=A4.LO_ABSOLUTE;BL.mOrientation=AW.OR_HORIZONTAL;BL.mGraphSubType=Ad.GST_DUALAXIS;break;case BA.DssGraphTypeHorizontal_Line_DualAxis_Stacked:BL.mMajorGraphType=A8.MGT_LINE;BL.mLayout=A4.LO_STACKED;BL.mOrientation=AW.OR_HORIZONTAL;BL.mGraphSubType=Ad.GST_DUALAXIS;break;case BA.DssGraphTypeHorizontal_Line_Percent:BL.mMajorGraphType=A8.MGT_LINE;BL.mLayout=A4.LO_PERCENT;BL.mOrientation=AW.OR_HORIZONTAL;BL.mGraphSubType=Ad.GST_NULL;break;case BA.DssGraphTypeVertical_Bullet:case BA.DssGraphTypeVertical_Bar_Absolute:BL.mMajorGraphType=A8.MGT_BAR;BL.mLayout=A4.LO_ABSOLUTE;BL.mOrientation=AW.OR_VERTICAL;BL.mGraphSubType=Ad.GST_NULL;break;case BA.DssGraphTypeHorizontal_Bullet:case BA.DssGraphTypeHorizontal_Bar_Absolute:BL.mMajorGraphType=A8.MGT_BAR;BL.mLayout=A4.LO_ABSOLUTE;BL.mOrientation=AW.OR_HORIZONTAL;BL.mGraphSubType=Ad.GST_NULL;break;case BA.DssGraphTypeVertical_Bar_BiPolar_Absolute:BL.mMajorGraphType=A8.MGT_BAR;BL.mLayout=A4.LO_ABSOLUTE;BL.mOrientation=AW.OR_VERTICAL;BL.mGraphSubType=Ad.GST_BIPOLAR;break;case BA.DssGraphTypeVertical_Bar_DualAxis_Absolute:BL.mMajorGraphType=A8.MGT_BAR;BL.mLayout=A4.LO_ABSOLUTE;BL.mOrientation=AW.OR_VERTICAL;BL.mGraphSubType=Ad.GST_DUALAXIS;break;case BA.DssGraphTypeHorizontal_Bar_BiPolar_Absolute:BL.mMajorGraphType=A8.MGT_BAR;BL.mLayout=A4.LO_ABSOLUTE;BL.mOrientation=AW.OR_HORIZONTAL;BL.mGraphSubType=Ad.GST_BIPOLAR;break;case BA.DssGraphTypeHorizontal_Bar_DualAxis_Absolute:BL.mMajorGraphType=A8.MGT_BAR;BL.mLayout=A4.LO_ABSOLUTE;BL.mOrientation=AW.OR_HORIZONTAL;BL.mGraphSubType=Ad.GST_DUALAXIS;break;case BA.DssGraphTypeVertical_Area_DualAxis_Percent:BL.mMajorGraphType=A8.MGT_AREA;BL.mLayout=A4.LO_PERCENT;BL.mOrientation=AW.OR_VERTICAL;BL.mGraphSubType=Ad.GST_DUALAXIS;break;case BA.DssGraphTypeHorizontal_Area_DualAxis_Percent:BL.mMajorGraphType=A8.MGT_AREA;BL.mLayout=A4.LO_PERCENT;BL.mOrientation=AW.OR_HORIZONTAL;BL.mGraphSubType=Ad.GST_DUALAXIS;break;case BA.DssGraphTypeVertical_Bar_DualAxis_Percent:BL.mMajorGraphType=A8.MGT_BAR;BL.mLayout=A4.LO_PERCENT;BL.mOrientation=AW.OR_VERTICAL;BL.mGraphSubType=Ad.GST_DUALAXIS;break;case BA.DssGraphTypeHorizontal_Bar_DualAxis_Percent:BL.mMajorGraphType=A8.MGT_BAR;BL.mLayout=A4.LO_PERCENT;BL.mOrientation=AW.OR_HORIZONTAL;BL.mGraphSubType=Ad.GST_DUALAXIS;break;case BA.DssGraphTypeVertical_Line_DualAxis_Percent:BL.mMajorGraphType=A8.MGT_LINE;BL.mLayout=A4.LO_PERCENT;BL.mOrientation=AW.OR_VERTICAL;BL.mGraphSubType=Ad.GST_DUALAXIS;break;case BA.DssGraphTypeHorizontal_Line_DualAxis_Percent:BL.mMajorGraphType=A8.MGT_LINE;BL.mLayout=A4.LO_PERCENT;BL.mOrientation=AW.OR_HORIZONTAL;BL.mGraphSubType=Ad.GST_DUALAXIS;break;}switch(BL.mGraphSubType){case Ad.GST_NULL:BL.mDualAxes=false;BL.mSplitDualAxes=false;break;case Ad.GST_DUALAXIS:BL.mDualAxes=true;BL.mSplitDualAxes=false;break;case Ad.GST_BIPOLAR:BL.mDualAxes=true;BL.mSplitDualAxes=true;break;}return BL;}function Aj(BP,Bn,BO,BX,Bi){var BR=this.mChartContextPtr,Bb=this.mDatasetPtr,Bh,Bf=BR.getUniformAxisContext(),BW=this.mUniformAxisPtr,BS=new As.Rect2D(),BU=false,Bk,BN,Bd,BY,BT,Ba,BZ,BV,Be,BQ,BM,Bl;BS.ResetRect(BP);Bh=BR.GetProperty(Av.DSSGraphMatrixDataLabelRotated,As.gNullTripleId);var Bc=Bb.showDatalabels();if(Bc&&BR.IsBarChart()&&Bh!==null){var Bg=Bh,Bm=Bf.ValueAxis,Bj=BX?"X":"Y";Bj+=Bi?"1":"2";Bk=Bm[Bj].Max;BM=F.call(this,Bn,BX,Bi);if(BX){BM.GetFormatFont().mFontRotation=I.FR_NORMAL;}else{var BL=AY(BR.GetGraphType());if(BL.mLayout===A4.LO_CLUSTER){Bg=true;}if(Bg){BM.GetFormatFont().mFontRotation=I.FR_90;}else{BM.GetFormatFont().mFontRotation=I.FR_NORMAL;}}BN=BM.GetBoundingRect();Bd=5;BY=BW.GetMaxTick();BT=BW.GetMinTick();Ba=BW.GetPositionByValue(BY);BZ=BW.GetPositionByValue(BT);BV=BW.GetPositionByValue(Bk);if(BX){if(BO-BV<Bd*2+BN.width){BQ=Bd*2+BN.width;Be=BO-BQ;Bl=(Be>BZ);if(Bl&&BQ/(Ba-BZ)<0.2){BS.width-=BQ;BU=true;BP.ResetRect(BS);BW.dataLabelPadding=BQ;}}}else{if(Bk>0&&BV<Bd*2+BN.height){BQ=Bd*2+BN.height;Be=BQ;Bl=(Be>BV);if(Bl&&BQ/(BZ-Ba)<0.2){BS.y+=BQ;BS.height-=BQ;BU=true;BP.ResetRect(BS);BW.dataLabelPadding=BQ;}}}}return BU;}function A7(BN,BM,BL,BO){return Aj.call(this,BN,BM,BL,true,BO);}function P(BN,BM,BL,BO){return Aj.call(this,BN,BM,BL,false,BO);}function Z(BP,BR,BQ){var BN=false,BM=false,BL=Ai.NONE,BO=this.mUniformAxisSpace;if(BR<0||BQ<0){BO.width=BR;BO.height=BQ;return BL;}BN=BR===BO.width;BM=BQ===BO.height;if(BN&&BM){BL=Ai.KeepBoth;}else{if(BN){BL=BQ>BO.height?Ai.ExpandY:Ai.ShrinkY;}else{if(BM){BL=BR>BO.width?Ai.ExpandX:Ai.ShrinkX;}else{BL=Ai.NONE;if(BP){BL=BR>BO.width?Ai.ExpandX:Ai.ShrinkX;}else{BL=BQ>BO.height?Ai.ExpandY:Ai.ShrinkY;}}}}BO.width=BR;BO.height=BQ;return BL;}function E(BM,BL){var BN=this.mChartContextPtr;if(this.mInitialized){return false;}if(BN.GetGraphMajorType()===Aq.GMT_HISTOGRAM){this.mDatasetPtr.mIsForHistogram=true;}BN.SetGraphSize(BM,BL);Ax.call(this);this.mChartManagerPtr=new As.ChartManager({mTripleId:As.ManagerId,mDatasetPtr:this.mDatasetPtr,mChartContextPtr:BN});this.mChartManagerPtr.GenerateMapAndList();this.mInitialized=true;return true;}function x(BL){switch(BL){case BA.DssGraphTypeVertical_Area_Absolute:case BA.DssGraphTypeVertical_Area_Stacked:case BA.DssGraphTypeVertical_Area_BiPolar_Absolute:case BA.DssGraphTypeVertical_Area_BiPolar_Stacked:case BA.DssGraphTypeVertical_Area_DualAxis_Absolute:case BA.DssGraphTypeVertical_Area_DualAxis_Stacked:case BA.DssGraphTypeVertical_Area_Percent:case BA.DssGraphTypeHorizontal_Area_Absolute:case BA.DssGraphTypeHorizontal_Area_Stacked:case BA.DssGraphTypeHorizontal_Area_BiPolar_Absolute:case BA.DssGraphTypeHorizontal_Area_BiPolar_Stacked:case BA.DssGraphTypeHorizontal_Area_DualAxis_Absolute:case BA.DssGraphTypeHorizontal_Area_DualAxis_Stacked:case BA.DssGraphTypeHorizontal_Area_Percent:case BA.DssGraphTypeD3_Connect_Group_Areas:case BA.DssGraphTypeD3_Connect_Group_Ribbons:case BA.DssGraphTypeD3_Connect_Series_Areas:case BA.DssGraphTypeD3_Connect_Series_Ribbons:case BA.DssGraphTypeD3_Surface:case BA.DssGraphTypeD3_Surface_with_Sides:case BA.DssGraphTypeD3_Honeycomb_Surface:return 2;default:return 1;}}function s(BV,BT,BL,BR){var BU=BV?BR:BL,BS=BV?BL:BR,BM=BL,BP=true,BN,BQ,BO=AN.call(this,BV,BT);BQ=BO.resizeAction=Z.call(this,BV,BU,BS);if(BQ===Ai.KeepBoth){return BO;}if(BL>=0){BO.resetRestrictSpace(this.mUniformAxisSpace);}if(BV){BN=this.isAxisLabelRotated(BV,BT);if(BN){if(!(BQ===Ai.ShrinkX||BQ===Ai.ShrinkY||BQ===Ai.ExpandY)){BM=-1;BP=false;}}else{if(BO.getLabelRotation()===I.FR_NORMAL&&BO.resizeAction===Ai.ExpandX){BM=BR;BP=false;}else{BM=-1;BP=false;}}}BO.updateMaxLabelLength(BM,BP);return BO;}function Ah(){if(this.mUniformAxisSpace===null){this.mUniformAxisSpace={width:0,height:0,x:0,y:0};this.mUniformAxisSpace.width=-1;}}mstrmojo.chart.ChartImpl=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.chart.ChartImpl",mFontAntiAlias:true,mDatasetPtr:null,mFormatManager:null,mChartManagerPtr:null,mOldChartManager:null,mChartContextPtr:null,mInitialized:false,mUniformAxisSpace:null,mUniformAxisPtr:null,mVisualMode:null,init:function AZ(BL){this._super(BL);this.mDatasetPtr=this.mDatasetPtr||BL.DataSet||null;this.mChartContextPtr=this.addDisposable(new As.GenericContext(BL));this.mFormatManager=this.mFormatManager||BL.FormatManager||null;this.mVisualMode=Ac;},SetData:function AJ(BM){var BL=this.mDatasetPtr=BM;this.mChartContextPtr.mDataset=BM;BL.SetFormatManager(this.mFormatManager);},GetOptions:function u(BL,BP,BM,BO){var BN,BQ=AX.create(BL,BP,BM);BN=this.mChartContextPtr.GetProperty(BO,BQ);if(BN){return BN;}switch(BO){case BB.DssGraphAutoArrange:return{Value:this.mChartContextPtr.mManualLayoutMode,IsValid:true};case BB.DssGraphType:case BB.DssGraphEnhancedSeriesEffect:case BB.DssGraphCurvedLines:case BB.DssGraphFontAntiAlias:case BB.DssGraphInfoSuppressLastLevel:case BB.DssGraphInfoIncludeSubtotal:case BB.DssGraphInfoNestedLabel:case BB.DssGraphInfoNestedLabelBracket:case BB.DssGraph2DSplitYAutomatic:case BB.DssGraphAxisNumberFormat:return{Value:this.mChartContextPtr.GetProperty(BO,BQ),IsValid:true};case BB.DssGraph2ScaleDirection:if(BL===BB.DssGraphO1Body){return{Value:this.mDatasetPtr.mReverseGroup,IsValid:true};}break;case BB.DssGraphSeriesByColumn:return{Value:this.mDatasetPtr.mSeriesByColumn,IsValid:true};}return{IsValid:false};},OnRectangleSelection:function k(BL,BM){var BO=[],BP,BQ=this.mChartManagerPtr,BN=new As.Rect2D({x:BL.x,y:BL.y,width:BL.w,height:BL.h});BP=BQ.GetGraphObjectManager(As.PlotId0);if(!BP){return BO;}BP.OnRectangleSelection(BN,BO,BM.outPut);return BO;},SaveImageToObject:function At(BP,BM,BQ,BL,BO,BN){BP=BP||1014;BM=BM||694;E.call(this,BP,BM);N.call(this);return n.call(this,BP,BM,BQ,BL,BO,BN);},PlainDraw:function J(BL,BM){var BN=this.mChartContextPtr;BL=BL||BN.mGraphWidth;BM=BM||BN.mGraphHeight;return E.call(this,BL,BM);},GetDataGroup:function q(){if(this.mChartContextPtr.mIsGraphMatrix){return this.mDatasetPtr.GetDataGroup();}return 1;},setCanvasProps:function A3(BL){if(this.mChartContextPtr){this.mChartContextPtr.mCanvasInfo=Y.copy(BL,this.mChartContextPtr.mCanvasInfo);}},SetFormatManager:function BD(BL){this.mFormatManager=BL;this.mChartContextPtr.SetFormatManager(BL);this.mDatasetPtr.SetFormatManager(BL);},IsDataEnough:function O(){if(this.mChartContextPtr.mIsGraphMatrix){return true;}var BM,BL;BM=this.mDatasetPtr.GetGroupCount();BL=x.call(this,this.mChartContextPtr.mGraphType);return BM>=BL;},DrawUniformYAxis:function BJ(BM,BU,BT,BS){var BN=this.mChartContextPtr;BN.startTimer({functionName:"DrawUniformYAxis",purpose:"render uniform Y axis",caller:arguments.caller||"unknown"});BS=BS||{};AO.call(this,false,BM,BU,BT,BS);if(BS.CanSkip){BN.endTimer();return n.call(this,BM,BU,false,false,false,[]);}BT=BS.IsPrimary;var BQ=BN.getUniformAxisContext();if(BS.SkipLayout){this.mUniformAxisPtr.Draw();}else{if(f.call(this,false,BT)===false){BN.endTimer();return n.call(this,BM,BU,false,false,false,[]);}var BR=A1.call(this),BL=Math.round(BS.dataLabelPadding||0),BP=BQ.mDataAreaTopMargin,BV=BU-BP-BQ.mDataAreaBottomMargin,BO=new As.Rect2D({x:(BT?BM:0),y:BP,width:0,height:BV});if(BL){BO.y=BL;BO.height-=BL;}L.call(this,BO,false,BR,BT);}BN.endTimer();return n.call(this,BM,BU,false,false,false,[]);},DrawUniformXAxis:function U(BM,BV,BT,BS){var BN=this.mChartContextPtr;this.mChartContextPtr.startTimer({functionName:"DrawUniformXAxis",purpose:"render uniform X axis",caller:arguments.caller||"unknown"});BS=BS||{};AO.call(this,true,BM,BV,BT,BS);if(BS.CanSkip){BN.endTimer();return n.call(this,BM,BV,false,false,false,[]);}BT=BS.IsPrimary;var BQ=BN.getUniformAxisContext();if(BS.SkipLayout){this.mUniformAxisPtr.Draw();}else{if(f.call(this,true,BT)===false){BN.endTimer();return n.call(this,BM,BV,false,false,false,[]);}var BR=!AD.call(this),BL=Math.round(BS.dataLabelPadding||0),BW=BQ.mDataAreaLeftMargin,BP=0,BU=BM-BW-BQ.mDataAreaRightMargin,BO=new As.Rect2D({x:BW,y:(BT?BP:BV),width:BU,height:0});if(BL){BO.width-=BL;}L.call(this,BO,true,BR,BT);}BN.endTimer();return n.call(this,BM,BV,false,false,false,[]);},DrawDataAreaForUniformAxis:function AG(BO,BL,BN){this.mChartContextPtr.startTimer({functionName:"DrawDataAreaForUniformAxis",purpose:"render data area for the mini chart",caller:arguments.caller||"unknown"});if(this.mVisualMode===A0){return n.call(this,BO,BL,false,false,false,[]);}var BQ=this.mChartContextPtr,BM=BQ.getUniformAxisContext();BM.xDataLabelPadding=BN.xDataLabelPadding||0;BM.yDataLabelPadding=BN.yDataLabelPadding||0;BM.mIsAxisTitleAndLabelRequired=false;this.mInitialized=false;BQ.mIsEntireChart=false;this.mChartContextPtr.populateCanvas();E.call(this,BO,BL);N.call(this);BM.xDataLabelPadding=0;BM.yDataLabelPadding=0;BQ.endTimer();var BP=n.call(this,BO,BL,false,false,false,[]);B.call(this,BP);return BP;},GetUniformAxisMargins:function D(){var BN=this.mChartContextPtr,BM=BN.getUniformAxisContext(),BL={LEFT:BM.mDataAreaLeftMargin,RIGHT:BM.mDataAreaRightMargin,TOP:BM.mDataAreaTopMargin,BOTTOM:BM.mDataAreaBottomMargin};return BL;},UpdateUniformAxisMargins:function A9(BM){var BN=this.mChartContextPtr,BL=BN.getUniformAxisContext();if(BM.LEFT){BL.mDataAreaLeftMargin=BM.LEFT;}if(BM.RIGHT){BL.mDataAreaRightMargin=BM.RIGHT;}if(BM.TOP){BL.mDataAreaTopMargin=BM.TOP;}if(BM.BOTTOM){BL.mDataAreaBottomMargin=BM.BOTTOM;}},GetUniformAxisLabelsInfo:function BH(BN,BO,BM){var BL=AN.call(this,BN);if(BL){return BL.getUniformAxisLabelsInfo(BM);}return[];},GetPositionAtTick:function t(BP,BL,BS){var BM=this.mChartContextPtr,BY,BO,BV,BX;if(!BM.mIsGraphMatrix){return 0;}var BR=BM.getUniformAxisContext();if(!BR){return 0;}var BN=this.mUniformAxisPtr;if(BN){var BU=BN.mTripleId.mObjectId;if(BG.call(this,BU)){var BW=BN.mDeviceDataArea;if(!BN.GetTrimWithPadding()){var BT=new As.Rect2D();if(BL){BY=BR.mDataAreaLeftMargin;BO=0;BV=BS-BY-BR.mDataAreaRightMargin;BT.Reset(BY,BO,BV,0);}else{BY=0;BO=BR.mDataAreaTopMargin;BX=BS-BO-BR.mDataAreaBottomMargin;BT.Reset(BY,BO,0,BX);}BN.TrimAxisPadding(BT,false);BN.SetDeviceDataArea(BT);BN.SetTrimWithPadding(false);}var BQ=BN.GetPositionAtTick(BP);BN.SetDeviceDataArea(BW);return BQ;}}return 0;},getZeroLineInfo:function AS(BP,BO,BN){var BM={};BM.Qualified=this.IsZeroBaseLineQualified(BP,BO);if(BM.Qualified){var BL=this.mUniformAxisPtr;if(BL===null||BL===undefined){this.mUniformAxisPtr=AN.call(this,BP,BO);}BM.Position=this.GetPositionAtTick(0,BP,BN);BM.Shapes=this.mDatasetPtr.GetShapesDistributionByValueAxis();}else{BM.Position=-1;BM.Shapes={};}return BM;},IsZeroBaseLineQualified:function i(BT,BR){BT=BT||false;if(BR===undefined){BR=true;}this.useOriginFormatForZeroLine=false;var BM=this.mChartContextPtr;if(!BM.mIsGraphMatrix){return false;}if(BM.IsBarChart()===false&&BM.IsLineChart()===false&&BM.IsAreaChart()===false){return false;}var BO=this.mUniformAxisPtr;if(BO){var BS=BO.mTripleId.mObjectId;if(BG.call(this,BS)){if(BO.isBaseLineQualified()){return true;}else{if(BM.isCombinationChart()===false){return false;}if(BO.liftedFromZero()){var BU=this.mDatasetPtr.GetShapesDistributionByValueAxis();var BL=BU.Primary;if(BR&&BL&&(BL.BAR&&BL.BAR.length||BL.AREA&&BL.AREA.length)){this.useOriginFormatForZeroLine=true;return true;}BL=BU.Secondary;if(!BR&&BL&&(BL.BAR&&BL.BAR.length||BL.AREA&&BL.AREA.length)){this.useOriginFormatForZeroLine=true;return true;}}}}}else{var BN,BQ=BM.getUniformAxisContext();if(BQ.ValueAxis){if(BR){BN=BT?"X1":"Y1";}else{BN=BT?"X2":"Y2";}var BP=BQ.ValueAxis[BN];if(BP){return BP.Min<0&&BP.Max>0;}}}return false;},GetAxisLabelRotation:function A5(){if(!this.mChartContextPtr.mIsGraphMatrix){return false;}var BL=this.mUniformAxisPtr;if(BL===null){return false;}return BL.getLabelRotation();},GetShownNumericTicks:function z(BL){var BN=this.mChartContextPtr;if(BN.mIsGraphMatrix){var BM=BN.GetGraphMatrixContext();return BL?BM.mShownValueTickSet[0]:BM.mShownValueTickSet[1];}},SetShowNumericTicks:function l(BN,BL){var BO=this.mChartContextPtr;if(BO.mIsGraphMatrix){var BM=BO.GetGraphMatrixContext();if(BL){BM.mShownValueTickSet[0]=BN;}else{BM.mShownValueTickSet[1]=BN;}}},refreshChartComponents:function AH(BV){var BN=this.mChartContextPtr,BZ=BN.IsVertical(),BY=BN.IsBarChart()||BN.IsAreaChart()||BN.IsLineChart(),BW=BN.IsBubbleChart()||BN.IsScatterChart();var Bb=BV.size;if(Bb){BN.SetGraphSize(Bb.w,Bb.h);}var BS=BV.dataProvider;if(BS){this.mDatasetPtr.refresh(BS);}var BO="Y1",BP,BX=this.mChartManagerPtr,BR;var BM=BV.plot;if(BM){var Ba={mObjectId:20002,mSeriesId:0,mGroupId:-3};var BU=BX.GetGraphObjectManager(Ba);if(BU){BU.refresh(BV.purpose,BM);}}var BL=BV.primaryValueAxis;if(BL){if(BY&&!BZ){BO="X1";}BP=BN.getAxisTripleId(BO);BR=BX.GetGraphObjectManager(BP);if(BR){BR.refresh(BV.purpose,BL);}}BO="X1";var BQ=BV.secondaryValueAxis;if(BQ){if(BW){BO="X1";}BP=BN.getAxisTripleId(BO);BR=BX.GetGraphObjectManager(BP);if(BR){BR.refresh(BV.purpose,BQ);}}BO="O1";var BT=BV.primaryCategoryAxis;if(BT){BP=BN.getAxisTripleId(BO);BR=BX.GetGraphObjectManager(BP);if(BR){BR.refresh(BV.purpose,BT);}}},GetDataAreaPadding:function BI(){var BN=this.mChartContextPtr,Bg=BN.GetGraphMatrixContext(),BV={X1:{LowOffset:0,HighOffset:0},X2:{LowOffset:0,HighOffset:0},Y1:{LowOffset:0,HighOffset:0},Y2:{LowOffset:0,HighOffset:0}},Be,Bd;if(!BN.mIsGraphMatrix){return BV;}var Bh=function(Bm){var Bl=0;Bm.forEach(function(Bn){Bl+=Bn;});return Bl;};var BU,BM,BP=0,BR=0,BW=0,Bk=0,Ba=0;if(Bg.isCombinationChart()){var Bb=this.mDatasetPtr.GetSeriesByShape();if(Bb.Circle){BR=Bb.Circle.length;}if(Bb.Square){BW=Bb.Square.length;}if(Bb.Line){Ba=Bb.Line.length;}if(Bb.Area){Bk=Bb.Area.length;}if(Bb.Bar){BP=Bb.Bar.length;}BU=this.mDatasetPtr;BM=BU.GetDiscreteSeries();if(!(BR>0||BW>0||(Bg.mHasSizeBy&&Ba>0)||(!Bg.mHasSizeBy&&(Ba>0||Bk>0)&&BM.length>0&&(AT.HasArrayIntersection(BM,Bb.Line)||AT.HasArrayIntersection(BM,Bb.Area))))){return BV;}if(BP===BU.GetSeriesCount()){return BV;}}else{if(BN.IsBarChart()||BN.mGraphType===BA.DssGraphTypeGridChart||(Bg.mMarkerShape===200&&BN.IsBubbleChart()===false&&BN.IsScatterChart()===false)){return BV;}}var Bf=BN.IsAreaChart()||BN.IsLineChart(),Bi=Bg.isCombinationChart()===false,BQ;if(Bi===false){Bi=Bh([BP,Bk,Ba,BW,BR])<=1;}if(Bi&&BN.GetGraphMajorType()===Aq.GMT_CATEGORY){var BX=2;BU=this.mDatasetPtr;BM=BU.GetDiscreteSeries();if(Bg.mHasSizeBy===false&&(!(Bf&&BM.length>0)||(Bf&&BU.GetGroupCount()<=1&&BU.GetSeriesCount<=1))){BQ=this.GetMaxElementRadius(BN.mGraphWidth,BN.mGraphHeight);if(BN.IsLineChart()){BQ=Math.max(BQ,BX);}BV.Y1.LowOffset=BV.Y1.HighOffset=BV.Y2.LowOffset=BV.Y2.HighOffset=BQ;BV.X2.LowOffset=BV.X2.HighOffset=BQ;BV.X1.LowOffset=BV.X1.HighOffset=BQ;return BV;}}var BS=true;if(BS){if(BN.IsScatterChart()){BQ=this.GetMaxElementRadius(BN.mGraphWidth,BN.mGraphHeight);BV.Y1.LowOffset=BV.Y1.HighOffset=BV.Y2.LowOffset=BV.Y2.HighOffset=BQ;BV.X2.LowOffset=BV.X2.HighOffset=BQ;BV.X1.LowOffset=BV.X1.HighOffset=BQ;return BV;}}var BY=BN.getUniformAxisContext();BY.mIsAxisTitleAndLabelRequired=false;BN.mImageUsage=AP.OBJECT_CLIP_COMPUTATION;E.call(this,BN.mGraphWidth,BN.mGraphHeight);BN.mImageUsage=AP.GENERAL;var Bc=As.PlotId0,Bj=this.mChartManagerPtr.GetGraphObjectManager(Bc);if(!Bj){return BV;}var BO;for(Be=0;Be<2;++Be){for(Bd=0;Bd<2;++Bd){var BT=Be===0,BZ=Bd===0,BL=BT?(BZ?"X1":"X2"):(BZ?"Y1":"Y2");BO=Bj.GetMaxElementOffsetClippedByBoundary(BT,BZ);BV[BL].LowOffset=BO.LowOffset;BV[BL].HighOffset=BO.HighOffset;}}return BV;},GetUniformYAxisWidth:function Af(BW,BL,BV){this.mChartContextPtr.startTimer({functionName:"GetUniformYAxisWidth",purpose:"Create uniform Y axis instance and do axis layout",caller:arguments.caller||"unknown"});Ah.call(this);var BU={};A6.call(this,false,BL,BV,BU);if(BU.CanSkip){return 0;}BL=BU.MaxLabelLength;BV=BU.IsPrimary;var BN=this.mChartContextPtr,BQ=BN.mDataset,BS=BN.getUniformAxisContext(),BT=A1.call(this),BX,BP,BY,BR=900,BO;AC.Reset(X,X,BW,BW-A2.call(this)*X);BN.SetGraphSize(BW,BW-A2.call(this)*X);BP=s.call(this,false,BV,BL,BW);if(BP.resizeAction===Ai.KeepBoth){return this.mUniformAxisSpace.width;}AC.width=Math.max(AC.width,0);AC.height=Math.max(AC.height,0);if(BP.restrictWidth===-1){AC.width=Math.max(AC.width,BR);}else{AC.width=Math.min(BP.restrictWidth,BR);}BO=AC.width;AI.call(this,AC,BT,BP,true);var BM=BQ.showDatalabels();if(!BT&&BM){this.AdjustingAxisPaddingForDataLabel(AC,false,BW,BW);}Ab.call(this,BS,AC,BW,BL,false,BV);BX=0;this.mUniformAxisPtr=BP;if(BV){BY=AC.x+BX;}else{BY=BO-(AC.x+AC.width)-X+BX;}if(this.mUniformAxisSpace.width===-1){BP.restrictWidth=this.mUniformAxisSpace.width=BY;}BK.call(this);BN.endTimer();return Math.max(BY,0);},GetUniformXAxisHeight:function h(BN,BL,BV){this.mChartContextPtr.startTimer({functionName:"GetUniformXAxisHeight",purpose:"Create uniform X axis instance and do axis layout",caller:arguments.caller||"unknown"});Ah.call(this);var BU={};A6.call(this,true,BL,BV,BU);if(BU.CanSkip){return 0;}BL=BU.MaxLabelLength;BV=BU.IsPrimary;var BO=this.mChartContextPtr,BQ=BO.mDataset,BR=BO.getUniformAxisContext(),BT=!AD.call(this),BS=400,BM,BW,BP,BX;AC.Reset(0,0,BN,BS);BO.SetGraphSize(BN,BS);BP=s.call(this,true,BV,BL,BN);if(BP.resizeAction===Ai.KeepBoth){return this.mUniformAxisSpace.height;}AI.call(this,AC,BT,BP,true);BM=BQ.showDatalabels();if(!BT&&BM){this.AdjustingAxisPaddingForDataLabel(AC,true,BN,BV);}Ab.call(this,BR,AC,BN,BL,true,BV);BW=0;this.mUniformAxisPtr=BP;if(BV){BX=BS-(AC.y+AC.height)-X+BW;}else{BX=AC.y;}if(this.mUniformAxisSpace.height===-1){BP.restrictHeight=this.mUniformAxisSpace.height=BX;}BK.call(this);BO.endTimer();return Math.max(BX,0);},UpdatePartialRenderingWindow:function G(BM,BN,BL){BM=BM||false;var BO=this.mChartContextPtr;if(BO.IsScatterChart()||BO.IsBubbleChart()){BO.mPartialRendering=BM;}else{BO.mPartialRendering=BM&&(BN!==undefined);if(BO.mPartialRendering){BO.mPartialRendering=BO.mPartialRendering&&(BN.x!==undefined&&BN.y!==undefined&&BN.width!==undefined&&BN.height!==undefined);}}if(BO.mPartialRendering){if(BO.mRenderingWindow===null){BO.mRenderingWindow={};}if(BN){Y.copy(BN,BO.mRenderingWindow);}}else{BO.mRenderingWindow=null;}if(BL!==undefined){if(BO.mPartialRendering){this.mVisualMode=BL;}else{this.mVisualMode=Ac;}}},updateUniformXAxisLayout:function A(BO){var BM=BO,BL=this.mChartContextPtr.getUniformAxisContext(),BR=BL.CategoryAxis.X,BN=1,BQ=2,BP=3,BS=4;BR.Layout=BM.Layout;if(BM.Layout===BS){BR.Layout=BN;BR.ForbideStagger=true;}else{if(BM.Layout===BP){BR.ForbideStagger=true;}else{BR.ForbideStagger=false;}}BR.StartRow=0;if(BR.Layout===BQ){BR.StartRow=BM.StartRow;}if(BM.LabelWidthLimit!==undefined){BR.LabelWidthLimit=BM.LabelWidthLimit;}BR.EnforceCluster=(!!BM.EnforceCluster)||BR.EnforceCluster;BR.EnforceFringe=(!!BM.EnforceFringe)||BR.EnforceFringe;},updateUniformAxisLabelRotation:function Az(BP,BN){if(BN===undefined){BN=-1;}var BM={NORMAL:1,STAGGER:2,ROTATE:3,HORI_DROP:4};var BO=this.mChartContextPtr,BL=BO.getUniformAxisContext();if(BN===-1){if(BP===undefined){return ;}switch(BP){case BM.NORMAL:case BM.STAGGER:BL.mLabelRotation.X1=I.FR_AUTOMATIC;break;default:BL.mLabelRotation.X1=I.FR_90;break;}}else{if(BN===2){BL.mLabelRotation.X1=I.FR_90;}else{BL.mLabelRotation.X1=I.FR_NORMAL;}}},EnableUniformAxis:function V(BQ,BM){BM=BM||false;var BR=this.mChartContextPtr,BX=BR.getUniformAxisContext(),Bf=BX.ValueAxis,Bd,BN,Bc=Bf.X1,Bb=Bf.X2,BU=Bf.Z,BP=Bf.Y1,BO=Bf.Y2;Bd=AT.isValidNumber(BQ.YMinValue);BN=AT.isValidNumber(BQ.YMaxValue);BP.Valid=Bd&&BN;BP.Min=parseFloat(Bd?BQ.YMinValue:0);BP.Max=parseFloat(BN?BQ.YMaxValue:0);BP.CustomScale=(BQ.YCustomScale!==undefined)?BQ.YCustomScale:false;BP.CondenseLabel=(BQ.YCondenseLabel!==undefined)?BQ.YCondenseLabel:{};BP.CondenseEnforced=BQ.YCondenseEnfored||false;BP.AutoMin=BQ.YAutoMin;BP.AutoMax=BQ.YAutoMax;Bd=AT.isValidNumber(BQ.Y2MinValue)||AT.isValidNumber(BQ.X2MinValue);BN=AT.isValidNumber(BQ.Y2MaxValue)||AT.isValidNumber(BQ.X2MaxValue);BO.Valid=Bd&&BN;BO.Min=parseFloat(AT.isValidNumber(BQ.Y2MinValue)?BQ.Y2MinValue:(AT.isValidNumber(BQ.X2MinValue)?BQ.X2MinValue:0));BO.Max=parseFloat(AT.isValidNumber(BQ.Y2MaxValue)?BQ.Y2MaxValue:(AT.isValidNumber(BQ.X2MaxValue)?BQ.X2MaxValue:0));BO.CustomScale=(BQ.Y2CustomScale!==undefined)?BQ.Y2CustomScale:((BQ.X2CustomScale!==undefined)?BQ.X2CustomScale:false);BO.CondenseLabel=(BQ.Y2CondenseLabel!==undefined)?BQ.Y2CondenseLabel:(BQ.X2CondenseLabel!==undefined?BQ.X2CondenseLabel:{});BO.CondenseEnforced=BQ.Y2CondenseEnfored||BQ.X2CondenseEnfored||false;BO.AutoMin=BQ.Y2AutoMin;BO.AutoMax=BQ.Y2AutoMax;Bd=AT.isValidNumber(BQ.XMinValue);BN=AT.isValidNumber(BQ.XMaxValue);Bc.Valid=Bd&&BN;Bc.Min=parseFloat(Bd?BQ.XMinValue:0);Bc.Max=parseFloat(BN?BQ.XMaxValue:0);Bc.CustomScale=(BQ.XCustomScale!==undefined)?BQ.XCustomScale:false;Bc.CondenseLabel=(BQ.XCondenseLabel!==undefined)?BQ.XCondenseLabel:{};Bc.CondenseEnforced=BQ.XCondenseEnfored||false;Bc.AutoMin=BQ.XAutoMin;Bc.AutoMax=BQ.XAutoMax;Bd=AT.isValidNumber(BQ.X2MinValue);BN=AT.isValidNumber(BQ.X2MaxValue);Bb.Valid=Bd&&BN;Bb.Min=parseFloat(Bd?BQ.X2MinValue:0);Bb.Max=parseFloat(BN?BQ.X2MaxValue:0);Bb.CustomScale=(BQ.X2CustomScale!==undefined)?BQ.X2CustomScale:false;Bb.CondenseLabel=(BQ.X2CondenseLabel!==undefined)?BQ.X2CondenseLabel:{};Bb.CondenseEnforced=BQ.X2CondenseEnfored||false;Bb.AutoMin=BQ.X2AutoMin;Bb.AutoMax=BQ.X2AutoMax;BU.Min=parseFloat(AT.isValidNumber(BQ.ZMinValue)?BQ.ZMinValue:0);BU.Max=parseFloat(AT.isValidNumber(BQ.ZMaxValue)?BQ.ZMaxValue:0);BU.CustomScale=(BQ.ZCustomScale!==undefined)?BQ.ZCustomScale:false;BU.AutoMin=BQ.ZAutoMin;BU.AutoMax=BQ.ZAutoMax;BX.mGraphHeight=(BQ.GraphHeight!==undefined)?BQ.GraphHeight:0;if(BM){return ;}BR.mIsUniformAxisMode=true;BR.mIsGraphMatrix=true;if(BQ.XMetrics){Bc.Metrics.splice(0,Bc.Metrics.length);Bc.Metrics=Bc.Metrics.concat(BQ.XMetrics);}if(BQ.YMetrics){BP.Metrics.splice(0,Bf.Y1.Metrics.length);BP.Metrics=Bf.Y1.Metrics.concat(BQ.YMetrics);}if(BQ.Y2Metrics){BO.Metrics.splice(0,BO.Metrics.length);BO.Metrics=BO.Metrics.concat(BQ.Y2Metrics);}if(BQ.X2Metrics){Bb.Metrics.splice(0,Bb.Metrics.length);Bb.Metrics=Bb.Metrics.concat(BQ.X2Metrics);}if(BQ.ZMetrics){BU.Metrics.splice(0,BU.Metrics.length);BU.Metrics=BU.Metrics.concat(BQ.ZMetrics);}if(BQ.LabelPlacement!==undefined){this.updateUniformAxisLabelRotation(BQ.LabelPlacement,BQ.xAxisRotateMode);}if(BQ.XCategoryAxis){var Be=BQ.XCategoryAxis,BZ=BX.CategoryAxis.X,BS=3;BZ.Truncation={Idices:[],Texts:[]};if(BZ.Layout!==BS){BZ.Truncation.Idices=BQ.TruncatedIdices;BZ.Truncation.Texts=BQ.TruncatedTexts;}this.updateUniformXAxisLayout(Be);}if(BQ.YCategoryAxis){var BW=BQ.YCategoryAxis;var BT=BX.CategoryAxis.Y;if(BW.LabelWidthLimit!==undefined){BT.LabelWidthLimit=BW.LabelWidthLimit;}BT.EnforceCluster=(!!BW.EnforceCluster)||BT.EnforceCluster;BT.EnforceFringe=(!!BW.EnforceFringe)||BT.EnforceFringe;}if(BR.IsScatterChart()||BR.IsBubbleChart()){var Ba=BR.GetGraphMatrixContext(),BY=Ba.AxisLayout;if(BY===null||BY===undefined){return ;}var BV=4,BL=8;if(!!(BY&BV)){BP.Min=parseFloat((BQ.Y2MinValue!==undefined)?BQ.Y2MinValue:0);BP.Max=parseFloat((BQ.Y2MaxValue!==undefined)?BQ.Y2MaxValue:0);BP.CustomScale=(BQ.Y2CustomScale!==undefined)?BQ.Y2CustomScale:false;BP.CondenseLabel=(BQ.Y2CondenseLabel!==undefined)?BQ.Y2CondenseLabel:{};BP.Metrics.splice(0,BP.Metrics.length);BP.Valid=BO.Valid;if(BQ.Y2Metrics){BP.Metrics=BP.Metrics.concat(BQ.Y2Metrics);}BO.Metrics.splice(0,BO.Metrics.length);}if(!!(BY&BL)){Bc.Min=parseFloat((BQ.X2MinValue!==undefined)?BQ.X2MinValue:0);Bc.Max=parseFloat((BQ.X2MaxValue!==undefined)?BQ.X2MaxValue:0);Bc.CustomScale=(BQ.X2CustomScale!==undefined)?BQ.X2CustomScale:false;Bc.CondenseLabel=(BQ.X2CondenseLabel!==undefined)?BQ.X2CondenseLabel:{};Bc.Metrics.splice(0,Bc.Metrics.length);Bc.Valid=BO.Valid;if(BQ.X2Metrics){Bc.Metrics=Bf.Y1.Metrics.concat(BQ.X2Metrics);}BO.Metrics.splice(0,BO.Metrics.length);}}},AdjustingAxisPaddingForDataLabel:function c(BT,BN,BR,BS){var BL=this.mChartContextPtr,BM=BL.getValueAxisKeyFromLayout(BN,BS),BO;var BQ=BL.getAxisTripleId(BM);BO=BL.getUniformAxisInformation(BQ.mObjectId);var BV=BO.Metrics||[];var BU=BL.GetProperty(Av.DSSGraphMatrixUseCustomMinMax,BQ),BP;if(BU){BP=BU;if(BP){return false;}}if(BN){return A7.call(this,BT,BV,BR,BS);}return P.call(this,BT,BV,BR,BS);},ShouldRotateDataLabel:function Ae(){var BM=this.mChartContextPtr,BN=this.mDatasetPtr,BR=BN.showDatalabels(),BS=BM.GetGraphMatrixContext();var BT=false;if(BR){BT=BM.IsBarChart();if(!BT&&BM.isCombinationChart()){var BL=BN.GetSeriesByShape().Bar,BO=BN.GetSeriesCount();BT=(BL.length===BO);if(!BT&&BL.length){BT=true;for(var BP=0;BP<BO;BP++){if(BL.indexOf(BP)===-1&&BN.showSeriesDatalabel(BP)){BT=false;break;}}}}}if(BT){this.mInitialized=false;var BQ=BM.getUniformAxisContext();BQ.mIsAxisTitleAndLabelRequired=false;BM.mIsEntireChart=false;}return{Rotation:BS.mIsNeedRotateDataLabel,Adjust:BT};},ShouldAdjustValueAxis:function M(){return false;},GetMaxElementRadius:function AU(BM,BY,BT){var BN=this.mChartContextPtr,BS=BN.GetGraphMatrixContext(),BL=BN.GetGraphType(),BQ=BN.GetGraphMatrixGraphMajorType(),BX=this.mDatasetPtr.GetGroupCount(),BU;BT=BT||false;switch(BQ){case j._GRID:case j._SCATTER:case j._BUBBLE:return BS.GetMaxMarkerSize(Am._SHAPES_IN_BUBBLESCATTER,false,BX,BS.mHasSizeBy);case j._AREA:BU=((BL>=BA.DssGraphTypeVertical_Area_Absolute&&BL<=BA.DssGraphTypeVertical_Area_Percent));return BS.GetMaxElementSizeInAreaChart(BU,BX);case j._LINE:BU=((BL>=BA.DssGraphTypeVertical_Line_Absolute&&BL<=BA.DssGraphTypeVertical_Line_Percent));if(BS.isCombinationChart()){var BW=0,BV=0,BR=0,BP=4,BO=this.mDatasetPtr.GetSeriesByShape();if(BO.Line&&BO.Line.length>0){BW=BS.GetMaxElementSizeInLineChart(BU,BX,false,BR);}if((BO.Circle&&BO.Circle.length>0)||(BO.Square&&BO.Square.length>0)){BV=BS.GetMaxElementSizeInLineChart(BU,BX,true,BP);}return Math.max(BW,BV);}return BS.GetMaxElementSizeInLineChart(BU,BX);case j._PIE:if(this.mDatasetPtr){BX*=this.mDatasetPtr.GetPieCountAtOneDataPoint(0,0);}BU=this.mChartContextPtr.IsVertical();return BS.GetMaxMarkerSize(Am._PIE,BU,BX,BS.mHasSizeBy);case j._BAR:return 0;default:break;}return 0;},setGraphType:function AB(BL){this.mGraphType=this.mChartContextPtr.mGraphType=BL;},setThemeType:function g(BL){this.mChartContextPtr.mThemeType=BL;},getCondenseStatus:function b(){var BM,BL=this.mUniformAxisPtr;if(BL){BM=BL.mCondenseLabels;}return BM;},enableCondense:function Ao(BM,BL){var BN=this.mUniformAxisPtr;if(BN){BN.checkCondense(BM,BL);}},isAxisLabelRotated:function w(){var BM=this.mUniformAxisPtr;if(BM===null){return false;}var BL=BM.getLabelRotation();return BL===I.FR_90;},liftedFromZero:function BF(){if(this.mUniformAxisPtr){if(this.mMinTick!==undefined){return this.mMinTick===0&&this.mLowTrim>0;}}return false;},configureChart:function Ap(BL){var BN=this.mChartContextPtr;BN.mIsUniformAxisMode=true;BN.mIsGraphMatrix=true;if(BL.ThemeType){this.setThemeType(BL.ThemeType);}if(BL.Usage){BN.mImageUsage=BL.Usage;}if(BL.Timer!==undefined){BN.mUseTimer=BL.Timer||false;}if(BN.mImageUsage===AP.BANNER){return ;}var BM;BM=BL.isABL&&BL.Extremes&&((BL.Extremes.X2Metrics&&BL.Extremes.X2Metrics.length)||(BL.Extremes.Y2Metrics&&BL.Extremes.Y2Metrics.length));if(BL.GraphType){if(BM){BL.GraphType=BN.mapGraphTypeToDualAxis(BL.GraphType);}if(BL.ShapeType){this.setGraphType(a.call(this,BL.GraphType,BL.ShapeType));}else{this.setGraphType(BL.GraphType);}}if(BL.GraphSize){BN.SetGraphSize(BL.GraphSize.W,BL.GraphSize.H);}if(BL.Extremes){this.EnableUniformAxis(BL.Extremes,false);}if(BL.OutputType){BN.mImageFormat=BL.OutputType;}p.call(this,BL);v.call(this,BL);},resetCanvas:function An(){var BL=this.mChartContextPtr;BL.resetCanvas();},updateUniformAxis:function o(BO){var BN=this.mUniformAxisPtr,BM=BN.mDeviceDataArea.width,BL=BN.mDeviceDataArea.height;if(!BN){return n.call(this,BM,BL,false,false,false,[]);}if(BO.Redraw){BN.Draw();}return n.call(this,BM,BL,false,false,false,[]);},getUniformAxisBanding:function y(){var BL=true,BM=this.mUniformAxisPtr;if(BL&&BM){return BM.getBandings();}return[];},getUniformAxisGridLinePosition:function K(BM){var BL=true,BN=this.mUniformAxisPtr;if(BL&&BN){return BN.getGridLinePosition(BM);}return[];},echoCondenseStatus:function T(BO,BM){var BN=this.mUniformAxisPtr;if(BN===null){return ;}var BL=BN.getCondenseStatus();if(BL!==undefined){BO[BM]=BL;}},echoLayoutPaddings:function Ay(BN,BL){var BM=this.mUniformAxisPtr;if(BM===null){return ;}BN[BL]=BN[BL]||{};BN[BL].HighOffset=this.mAxisLayoutHighPadding||0;BN[BL].LowOffset=this.mAxisLayoutLowPadding||0;},UpdateValueAxisPadding:function Ak(BM){var BL=this.mChartContextPtr.GetGraphMatrixContext();BL.UpdateValueAxisPadding(BM);},getUniformAxisTrims:function Ag(BM){var BL=(BM&&AD.call(this)===false)||(!BM&&A1.call(this));if(BL){return Au.call(this,BM);}else{return AA.call(this);}},getUniformAxisFormat:function R(){var BL=this.mUniformAxisPtr;if(!!BL){if(BL.mCondenseLabels){return"Condensed";}if(BL.mNumberFormat){return BL.mNumberFormat.mCustomFormat;}}return undefined;},formatAsUniformAxisLabel:function m(BL){if(!this.mUniformAxisPtr){return undefined;}return this.mUniformAxisPtr.formatAsLabel(BL);},getAxisPadding:function d(BN){var BM=0,BO=1;if(BN===BM){return{L:0,H:(this.mUniformAxisPtr&&this.mUniformAxisPtr.dataLabelPadding||0)};}else{if(BN===BO){var BL=this.mAxisLayoutLowPadding||0;var BP=this.mAxisLayoutHighPadding||0;return{L:BL,H:BP};}else{return{L:0,H:0};}}},getStatistics:function W(BM){var BU={},Ba,BW,Bb,BN,BR=0,BY,BX;Ba=As.PlotId0;switch(BM.Type){case BR:var BV=0,BO=this.mChartContextPtr,BT=this.mDatasetPtr;var BZ=BT.GetSeriesCount(),BL=BT.GetGroupCount();BU.Total=BZ*BL;if(BO.IsScatterChart()||BO.IsBubbleChart()){BW=this.mChartManagerPtr.GetGraphObjectManager(Ba);if(BW){Bb=BW.mGraphObjectList;BN=Bb.length;for(BY=0;BY<BN;++BY){if(Bb[BY].mTripleId.mObjectId===BC.DssGraphRiser){BV++;}}BU.Displayed=BV;}}else{if(BO.IsBarChart()||BO.IsAreaChart()||BO.IsLineChart()||BO.IsGridChart()){if(BT.endSeries!==-1||BT.endGroup!==-1){var Bd=Math.max(BT.startSeries,0),BQ=Math.max(BT.startGroup,0),BS=BT.endSeries===-1?BZ:BT.endSeries,BP=BT.endGroup===-1?BL:BT.endGroup;BU.Displayed=(BP-BQ)*(BS-Bd);}else{BW=this.mChartManagerPtr.GetGraphObjectManager(Ba);if(BW){var Bc=[BW.AreaSeriesRenderer,BW.mBarSeriesRendererPtr,BW.mLineSeriesRendererPtr];for(BX=0;BX<Bc.length;++BX){if(Bc[BX]){Bb=Bc[BX].mGraphObjectList;BN=Bb.length;for(BY=0;BY<BN;++BY){if(Bb[BY].mTripleId.mObjectId===BC.DssGraphRiser){BV++;}}}}BU.Displayed=BV;}}}}break;default:break;}return BU;}});}());