(function(){mstrmojo.boxmodel=mstrmojo.provide("mstrmojo.boxmodel",{rangeIntersect:function E(J,H,I,G){if(J<I){return I<=H;}if(J>I){return J<=G;}return true;},px2Inches:function C(H,G){G=parseInt(G,10);return mstrmojo.NumberFormat.getInstance(mstrConfig.decimalSep,mstrConfig.thousandsSep).format(parseFloat((G/H.zf/H.dpi).toFixed(4)));},offset:function F(I,H){var L=I,G=0,K=0;while(I){G+=I.offsetLeft;K+=I.offsetTop;I=I.offsetParent;if(I===H){break;}}var J;for(J=L&&L.parentNode;J&&J!==H;J=J.parentNode){if(J.scrollTop){K-=J.scrollTop;}if(J.scrollLeft){G-=J.scrollLeft;}}return{left:G,top:K};},convert2px:function D(K,I){if(!/px$/.test(I)){var H=document.createElement("img"),G=H.style,J;G.zIndex=-1;G.left=I;K.appendChild(H);J=G.pixelLeft;K.removeChild(H);return J+"px";}return I;},getEdgeQuadrantByPoint:function B(I,H){var G=H.x-I.x,M=H.y-I.y,J=I.w,L=I.h,K=[["Left","Bottom"],["Top","Right"]];if(M>L/J*G){K=K[0];}else{K=K[1];}return(M<-L/J*G+L)?K[0]:K[1];},isPtInPolygon:function A(I,K){var G=I.x,J=I.y,H=false;K.forEach(function(N,L){var M=K[L-1]||K[K.length-1];if((N.y>=J)!==(M.y>=J)){if((G<(M.x-N.x)*(J-N.y)/(M.y-N.y)+N.x)){H=!H;}}});return H;}});}());(function(){mstrmojo._HasPopup=mstrmojo.provide("mstrmojo._HasPopup",{_mixinName:"mstrmojo._HasPopup",_lastOpened:null,openPopup:function A(G,E){var C=!!G&&(typeof G==="string")&&!G.match(/\./)&&!!this[G],D=mstrmojo.registry.ref(C?this[G]:G);if(D&&D.open){if(C){this[G]=D;}if(D.disposable!==false){this.addDisposable(D);}var J=D.slot&&this[D.slot];if(J){if(D.parent!==this){if(this.addChildren){this.addChildren([D]);}else{var I=false,F=D.domNode||D.placeholder;if(F&&typeof F==="string"){F=document.getElementById(F);}if(!F){I=true;F=document.createElement("span");D.placeholder=F;}if(I||(F.parentNode!==J)){J.appendChild(F);}}}}try{D.open(this,E);}catch(H){console.log("Error opening popup: "+H);}this._lastOpened=D;}},closePopup:function B(){var C=this._lastOpened;if(C&&C.visible&&C.close){C.close();delete this._lastOpened;}}});}());(function(){mstrmojo.vi.ui.theme=mstrmojo.provide("mstrmojo.vi.ui.theme",{getThemeClass:function A(){var D=this.parent||this.opener,C="",B;while(D){var E=D.themeClassName;if(E){C=E;break;}B=D.parent||D.opener;if(B===D){break;}D=B;}return C;}});}());(function(){mstrmojo.requiresDescs(9380,9381,9382,9383,9384,9385,9379,15106,15107,10639,10159,9705,9704);mstrmojo.DI.DIConstants=mstrmojo.provide("mstrmojo.DI.DIConstants",{invalidObjectNameChars:'\\"[]',invalidObjectNameCharsRegex:/[\\"\[\]]/,sourceItemLinkType:{dbList:0,oauthPara:1},setDefaultOAuthParamCMD:"MSTR_DEFAULT_OAUTH_PARAMS",actions:{none:0,importSource:1,editImport:2,transform:3,changeSheet:4,publish:5,changeMappings:6,refine:7,quickPreview:8,savePublish:9,getFlatPreview:10,refreshData:11,mergeCube:12},localStorageKey:{HGOSFileTypeTooltipPop:"HGOSFileTypeTooltipPop"},requestFlag:{mapping:1,preview:2,sourceInfo:4,refineSourceInfo:8,sheets:16,crb:32,transformations:64,transformedPreview:128,relationship:256,stateInfo:512,anyState:268435456,fullData:1024,refineInnerData:2048},formMappingFlag:{formMappingFlagReserved:0,formMappingFlagRemoveGeoRole:1,formMappingFlagRemoveTimeRole:2,formMappingFlagRemoveDeriveFlags:4},browseFlag:{reportBindingTable:1,dataPreview:4,publish:16,cubeConfig:68,reportLevelProperty:256},importBehaviorFlag:{reserved:0,newColumnsSilent:1,dataTypeSilent:2},saveAsFlags:{saveAsOverWrite:32,saveAsManaged:524288,saveAsDDA:33554432,saveAsInMemory:67108864,saveAsWithPrompts:4096,saveAsWithAnswers:4},connectLiveSupport:{connectLiveSupportUnknown:0,connectLiveSupportDDAOrInMemory:1,connectLiveSupportInMemoryOnly:2,connectLiveSupportDDAOnly:3},xdaType:{excel:272,text:288,refine:384,salesforce:337,querybuilder:352,ffsql:304,mdx:2,customFreeFormSQL:3,googleAnalytics:390,googleBigQuery:341,googleBigQueryFFSQL:342,googleBigQuerySingleTable:345,qbSingleTable:368,twitter:343,facebook:344,dataImport:256,projectsImport:400,sparkDataset:416,dataImportFileExcel:16|256,dataImportFileText:32|256,dataImportCustomSQL:48|256,dataImportTable:64|256,dataImportOAuth:80|256,dataImportBISource:144|256,dataImportOAuthSalesforce:1|336,dataImportOAuthGDocs:2|336,dataImportOAuthGDrive:2|336,dataImportOAuthDropbox:3|336,dataImportOAuthGAnalytics:4|336,dataImportOAuthGBigQuery:5|336,dataImportOAuthGBigQueryFFSQL:6|336,dataImportOAuthGBigQuerySingleTable:9|336,spark:160|256},fileTypes:[{n:"CSV/TXT",v:"CSV"},{n:"PARQUET",v:"PARQUET"},{n:"AVRO",v:"AVRO"},{n:"ORC",v:"ORC"},{n:"JSON",v:"JSON"},{n:"PARQ",v:"PARQUET",visible:false}],sourceInfoDesc:{json:"DB_FILE_TYPE_JSON"},sourceType:{file:1,salesforce:2,dropbox:3,googleDrive:4,googleAnalytics:5,googleBigQuery:6,querybuilder:7,mstrFile:8,mdx:9,hadoop:10,twitter:11,facebook:12,bisource:13,remoteProject:14,importfromcube:15,dataFromPushApi:16,newConnector:17,cloudElement:18},sourceSubtype:{localFile:1,url:2,salesforce:3,dropbox:4,googleDrive:5,googleAnalytics:6,googleBigQuery:7,querybuilder:8,samplefile:9,clipboard:10,googleBigQueryFFSQL:11,searchOnSource:12,mdx:13,hadoop:14,twitter:15,facebook:16,bisource:17,remoteProject:18,googleBigQuerySingleTable:19,hanaSingleTable:20,publicData:21,importfromcube:22,dataFromPushApi:23,cloudElement:24,},backendSourceSubtype:{localFile:65537,url:65539,samplefile:65540,clipboard:65538,newConnector:65544,cloudElement:65552,hadoopFileBrowser:65541,customSQL:131073,customSQLWizard:131074,singleTable:131075,bISources:131076,searchAsASource:131078,salesforce:196609,dropbox:196610,facebook:196611,twitter:196612,googleDrive:196613,googleAnalytics:196614,googleBigQuery:196615,googleBigQueryFFSQLModel:196616,googleBigQuerySingleTable:196617,OLAPSources:327681,publicData:65542,dataFromPushApi:65543,dataFromPushApiV2:65545,cloudElement:65552,},sourceItemType:{file:0,url:1,database:2,hadoop:3,olap:4,publicData:5,salesforce:6,googleAnalytics:7,googleBigQuery:8,googleDrive:9,dropbox:10,searchAsASource:11,clipboard:12,bISources:13,facebook:14,twitter:15,samplefile:16,importFromCube:17,addNewConnector:18,newConnector:19,cloudElement:20,unknow:-1},columnState:{reserved:0,unchanged:1,newColumn:2,missing:4,changed:8},operationMode:{create:0,edit:1,refresh:2,subscribe:3,enterCredentials:4,oauth:5,pickTable:6,hadoopPickTable:7,ffsql:8,hadoopFFsql:9},statusCode:{obtainSource:-2147071874,xformsError:-2147071872,mappingError:-2147071871,edit:1,republish:2,schedule:3,enterCredentials:4,pickTable:5,hadoopPickTable:6,ffsql:7,hadoopFFsql:8},pageType:{intro:0,file:1,database:2,emmaPreview:3,redirect:4,analytics:5,dataSelection:6,suggestNewSource:7,sourceIntro:8,sourceObjects:10,sampleFiles:11,dataset:12,externalPage:13,preview:14,clipboard:15,refine:16,parse:17,mstrFile:18,allProjectSource:19,hadoop:20,twitter:21,facebook:22,sourceObjectsDnD:23,schedule:24,publicData:25,republish:26,sourceAdmin:27,importFromCube:28,addNewConnector:29,newConnector:30,addConnectorList:31,cloudElement:32},backendError:{overwriteObject:-2147212339,noPermission:-2147214579,invalidObjectName:-2147213715,unexpectedDataType:-2147212539,noExternalSession:-2147071844,noPrivilege:-2147212082,salesforceUnsavedReport:-2147212081,salesforceObsoleteReport:-2147212080,maxSizeExceeded:-2147212076,maxSizeExceededURL:-2147212121,salesforceUnresolvedFilter:-2147212074,incrementalRefresh:-2147212287,invalidUrl:-2147212062,fileVersionError:-2147212064,emptySheet:-2147212144,refreshTokenUnavailable:-2147202875,cubeQuotaExceeded:-2147071825,notEnoughSpace:-2147071811,importedURLInvalid:-2147212122,unsupportedFileFormat:-2147212063,objectNameTooLong:-2147217407,noExternalSourceInfo:-2147215346,memoryConsumptionExceeded:-2147215346,cubeQuotaReached:-2147071870,switchingFileType:-2147212140,memoryGovernSizeExceeded:-2147181051,stringTooLong:-2147213718,missingColumn:-2147071871,dataDiscoveryError:-2147211998,refineApplyError:-2147202299,serverOutOfMemory:-2147212055,columnCountMatchError:-2147467259,incompatibleDataTypeError:-2147211983,reportTimeout:-2147212335,requestTimeout:-2147206497,databaseCredentialsNotAvailable:-2147212037,ddasupportIncompatible:-2147215326,mergeInvalidXdatype:-2147215325,notFullyControl:-2147214579,shouldBeIgnored:-2147212123,CECredentialNotAvailable:-2147215317,AuthenticationError:-2147215346,queryEngineGeneralError:-2147212544},transformation:{xtab:1,delimiter:2},application:{platform:"Platform",cloudPersonal:"Personal",cloudProfessional:"Professional"},refreshOptions:{replace:1,append:2,update:4},cubeRefreshType:{dummy:-1,reserved:0,add:1,remove:2,update:3,upsert:4,addNewTable:5,deleteTable:6,replaceTable:7,preserve:8},tableStatsExecutionAction:{reserved:0,forceExecution:1,ignore:4,requireFreshData:268435456},sourcesInfoFlags:{none:0,getReports:1,getUserName:2,getTokensInfo:4,revokeSession:8,getGAnalyticsAccount:64},queryBuilderType:{individualTable:1,multipleTables:2,queryScript:3},relationshipEditType:{create:1,changeERType:2,remove:3,flip:8001},ERType:{reserved:0,ERType11:1,ERType1M:2,ERTypeM1:3,ERTypeMM:4,ERTypeParallel:5,ERTypePerpendicular:6},RSType:{reserved:0,auto:1,geo:2,defined:3},tableStates:{newly:1,old:2},behaviorChangeFlag:{multiSheet:4,remapping:8,refreshData:16},menuItems:{SEPARATOR:-1,NONE:0,TABLE_RENAME:1,DO_NOT_IMPORT:2,FLIP_ORDER:3,DELETE:4,RELATIONSHIP_TYPE:5,ONE_TO_ONE:6,ONE_TO_MANY:7,MANY_TO_ONE:8,MANY_TO_MANY:9,REMOVE:10,REFRESH_DATA:11,REFINE:12,CANCEL_REFINE:13,UNLINK:14,CHANGE_DATA_TYPE:15,MARK_GEO_ROLES:16,CREATE_TIME_ATTRIBUTES:17,TO_METRIC:18,TO_ATTRIBUTE:19,MAP_TO_PROJECT_ATTRIBUTE:20,UNMAP:21,MODIFY_ATTRIBUTE_GROUP:22,CREATE_ATTRIBUTE_GROUP:23,HIDE_ALL_ATTRIBUTE_FORMS:24,DEFINE_RELATIONSHIPS:25,LINK:26,ITEM_RENAME:27,CREATE_MULTIFORM_ATTRIBUTE:28,EDIT_MULTIFORM_ATTRIBUTE:29,ADDTO_MULTIFORM_ATTRIBUTE:30,SHOW_ALL_ATTRIBUTE_FORMS:31,SHOW_ALL_COLUMNS:32,PARTITION:33,REFINE_RENAME:34,REFINE_DELETE:35,REFINE_DELETE_ALL:36,REFINE_RESET:37,REFINE_RESET_ALL:38,PARSE:39,IMPORT:40,UNLINK_ALL:41,CREATE_HIERARCHY_ATTRIBUTE:42,EDIT_HIERARCHY_ATTRIBUTE:43,RESET_HIERARCHY_ATTRIBUTE:44},dataTypeMenuItems:{DATE_TIME:"1",NUMBER:"2",TEXT:"3",URL:"5",EMAIL:"6",HTML_TAG:"7",DATE:"8",TIME:"9",SYMBOL:"10",BIG_DECIMAL:"11",PHONE_NUMBER:"12"},columnDataTypes:{reserved:0,integer:1,unsigned:2,numeric:3,decimal:4,real:5,dtdouble:6,dtfloat:7,dtchar:8,varChar:9,longVarChar:10,binary:11,varBin:12,longVarBin:13,date:14,dttime:15,timeStamp:16,nChar:17,nVarChar:18,nlong:22,bigDecimal:30,cellFormatData:31,utf8Char:33,int64:34},formsOptions:{CREATE_MULTIFORM_ATTRIBUTE:1,EDIT_MULTIFORM_ATTRIBUTE:2,ADDTO_MULTIFORM_ATTRIBUTE:3},hierarchyOptions:{CREATE_HIERARCHY_ATTRIBUTE:1,EDIT_HIERARCHY_ATTRIBUTE:2,RESET_HIERARCHY_ATTRIBUTE:3},rdcsFlag:{ID:1,JOIN_ID:2,FILTER_ID:3,DISTANCE:4},timeRoles:{NONE:0,DATE:1,DATE_TIME:2,TIME:3,SECOND:4,MINUTE:5,HOUR:6,DAY:7,WEEK:8,MONTH:9,QUARTER:10,YEAR:11},contextMenuType:{ITEM_MENU:0,TABLE_MENU:1,PREVIEW_ITEM_MENU:2,LINK_MENU:3},dialogType:{fixRefreshErrorDialog:1,allObjectsViewDialog:2,missingColumnsDialog:3,diPageDialog:4,refreshHistoryDialog:5,alternateSourceValidateDialog:6,ddaConfirmDialog:7,publishStatusDialog:8,saveAsDialog:9,cubesList:10,refinePage:11,multiFormEditor:12,sheetsSelectionDialog:13,partitionGroupDialog:14,parseDataDialog:15,errorDialog:16,warningDialog:17,relationDefineDialog:18,qbImportOptionDialog:19,previewRenameDialog:20,mapProjectsAttributeDialog:21,setOAuthParaDialog:22,objectPicker:23,refineClusteringPage:24,refineExtractDialog:25,refineImportDialog:26,twitterAdvOptDialog:27,credentialsDialog:28,mapProjectsAttributeDialog2:29,setWhiteListDialog:30,binaryUploadDialog:31,authenticationDialog:32,sharingDialog:33,hadoopGatewayManagerDialog:34,hadoopGatewayDialog:35,addConnectorDialog:36,hierarchyAttributeDialog:37,hierarchyAttributeResetDialog:38},dataEvents:{DATA_PREVIEW_EVENT:"dataReturned",NO_DATA_RETURNED_EVENT:"noDataReturned"},cubeSchedStatus:{unexecuted:1,successful:2,unscheduled:3,failed:4},privilegeType:{accessDatabase:1,accessFile:2,accessCloud:3},dbType:{MS_ACCESS:100,ORACLE:200,SQL_SERVER:300,INFORMIX:400,SYBASE:500,REDBRICK:600,DB2:700,TANDEM:800,TERADATA:900,UNKNOWN:1000,GENERIC:1100,SAP:1200,NETEZZA:1300,EXCEL:1400,MSFT_AS:1500,ESSBASE:1600,MYSQL:1700,POSTGRESQL:1800,HPNEOVIEW:1900,METAMATRIX:2000,DATALLEGRO:2100,COMPOSITE:2200,ASTER:2300,VERTICA:2400,OPENACCESS:2500,SYBASE_SQL_ANY:2600,SYBASE_IQ:2700,PARACCEL:2800,TM1:2900,XQUERY:3000,HIVE:3100,SAND:3200,SALESFORCE:3300,HIVETHRIFT:3400,VECTORWISE:3500,ENTERPRISEDB:3600,KOGNITIOWX2:3700,EXASOLUTION:3800,INFORMATICA:3900,SAPHANA:4000,IMPALA:4100,AMAZON_REDSHIFT:4200,DENODO:4300,GOOGLE_DRIVE:4400,DROPBOX:4500,GOOGLE_ANALYTICS:4600,GOOGLE_BIGQUERY:4700,CONNECTION_CLOUD:4800,GOOGLE_BIG_QUERY_FFSQL_MODEL:4900,PARSTREAM:5100,MONGODB:5200,MARKLOGIC:5300,BIG_DATA_ENGINE:5400,SEARCH_ENGINE_SOLR:5500,SPLUNK:5600,TWITTER:5700,FACEBOOK:5800,PIG:6400,URL:7700,newConnector:7900,LOACLFILE:8200},getCubeQuotaAndInfosOptions:{GetCubeQuotaAndInfosReserved:0,GetCubeQuotaAndInfosDefault:1,GetCubeQuotaAndInfosQuotaOnly:2,GetCubeQuotaAndInfosAll:3,GetCubeQuotaAndInfosVI:4},homepageViewMode:{GRID_VIEW:0,LIST_VIEW:1},datasetServeMode:{inMemory:1,dda:2,unknow:3},cubePollStatus:{msgID:0,result:1,prompt:2,error:3,xmlResult:21},ibmDb2Versions:[17,18,21,22,23,24,25,37,45,46,47,48,63,66,74,89,92,101,103,105,123,134,157,172,202,232],hadoopDbTypes:[3100,1100,700,4100,7300,6800,6400,8100],formCategory:{longitude:"2345134F4F5E261C3BB902A874467080",latitude:"B191051C48221A6AE44CA2B65B1B65E3"},urlAuthDBRoles:{anonymous:"CB1CB472A07E41D5AE038232839F2064",windows:"95A5ACC02FE94CBABCB65E4F2D2415B2",kerberos:"317D6F016D784836A724AD4D739E1E9C",integrated:"E966E1A0A4C949108287B2E5086B68EB"},urlAuthDBMSId:"497F2406FA154B86810C71EA3D401D6D",newConnectorDBMSId:"565D5DC3A1124726B85FE53EF992472A",hadoopGateWay:{HGoS_CONFIG_HAS_EXIT:1510,CONNOT_AUTHENTICATE:1511,SPACE_OVER:1512,FAIL_COPY_TO_HOST:1513,INSUFFICIENT:1514,DIRECTORY_NO_EXIST:1515,HGOS_DEPLOYED:1518,HGOS_DEPLOYING:1519,CONNOT_AUTHENTICATE2:1520,HGOS_RUNNING:1521,HGOS_STOPPED:1522,HGOS_NOT_DEPLOYING:1523,HGOST_TAR_NOT_EXIST:1524,HGOS_CONF_NOT_EXIST:1530},workstation:{filerBreakLine:new RegExp("[\r\n]","g"),utils:{shouldShowTitleBar:function(){var A=mstrApp.getRootController().rootView.inPageDialog;return !!mstrApp.isWorkstation&&(!!mstrApp.isPopup||!!A);},setNativeWindow:function(C,F){var B=1110,E=590,D=parseInt(C,10),A=parseInt(F,10);if(!window.FormWrapper||!window.FormWrapper.setWindowFrame){return ;}if(C.match(/%$/)&&F.match(/%$/)){window.FormWrapper.setWindowContentSize(1200,680);}else{D=D<B?B:D;A=A<E?E:A;window.FormWrapper.setWindowContentSize(D,A);}},lockResize:function(){if(!window.FormWrapper||!window.FormWrapper.lockResize){return ;}window.FormWrapper.lockResize();},unlockResize:function(){if(!window.FormWrapper||!window.FormWrapper.unlockResize){return ;}window.FormWrapper.unlockResize();}}},authMode:{ANONYMOUS:0,USERNAME:1,OAUTH:2},authModePrefix:{ANONYMOUS:"AuthMode=Anonymous;URL=",USERNAME:"AuthMode=Basic;URL=",OAUTH:"AuthMode=OAuth;URL="},sdkUrl:{MARKPLACE_URL:"https://community.microstrategy.com/s/gallery?tabset-89baf=202df",QUICK_START_URL:"https://lw.microstrategy.com/msdz/MSDL/GARelease_Current/docs/projects/DataConnectorSDK/Content/topics/Quick_Start_Guide.htm"},originalConnector:{elastic:"DE4A8E15405A36D80BF1E1A2BA6F9B66",tapClicks:"1E8ADD3975DA4609B8D00E6211ACAB6A"},googleAnalyticsUrl:{queryExplorer:"https://ga-dev-tools.appspot.com/query-explorer/"},weekDay:[{n:mstrmojo.desc(9380,"Monday"),v:0},{n:mstrmojo.desc(9381,"Tuesday"),v:1},{n:mstrmojo.desc(9382,"Wednesday"),v:2},{n:mstrmojo.desc(9383,"Thursday"),v:3},{n:mstrmojo.desc(9384,"Friday"),v:4},{n:mstrmojo.desc(9385,"Saturday"),v:5},{n:mstrmojo.desc(9379,"Sunday"),v:6}],dateMon:[{n:mstrmojo.desc(15106,"1st day"),v:"1"},{n:mstrmojo.desc(15107,"15th day"),v:"15"}],timeOfDay:[{n:"12:00AM",v:"12:00AM"},{n:"1:00AM",v:"1:00AM"},{n:"2:00AM",v:"2:00AM"},{n:"3:00AM",v:"3:00AM"},{n:"4:00AM",v:"4:00AM"},{n:"5:00AM",v:"5:00AM"},{n:"6:00AM",v:"6:00AM"},{n:"7:00AM",v:"7:00AM"},{n:"8:00AM",v:"8:00AM"},{n:"9:00AM",v:"9:00AM"},{n:"10:00AM",v:"10:00AM"},{n:"11:00AM",v:"11:00AM"},{n:"12:00PM",v:"12:00PM"},{n:"1:00PM",v:"1:00PM"},{n:"2:00PM",v:"2:00PM"},{n:"3:00PM",v:"3:00PM"},{n:"4:00PM",v:"4:00PM"},{n:"5:00PM",v:"5:00PM"},{n:"6:00PM",v:"6:00PM"},{n:"7:00PM",v:"7:00PM"},{n:"8:00PM",v:"8:00PM"},{n:"9:00PM",v:"9:00PM"},{n:"10:00PM",v:"10:00PM"},{n:"11:00PM",v:"11:00PM"}],schedule:{DAILY:"Daily",WEEKDAY:"Weekday",WEEKLY:"Weekly",MONTHLY:"Monthly"},mainPage:{GRID_MODE:0,LIST_MODE:1},sourceIconClsName:{0:"ds-Generic",1:"ds-DB2",2:"ds-DB2",3:"ds-DB2",4:"ds-InformixWire",5:"ds-InformixXPS",6:"ds-PostgreSQL",7:"ds-SAP",8:"ds-SAP",9:"ds-Oracle",10:"ds-MicroSoft",11:"ds-Teradata",12:"ds-MySQL",13:"ds-GreenPlum",14:"ds-Netezza",15:"ds-WebServices",17:"ds-Infobright",18:"ds-Salesforce",19:"ds-MicroSoft",20:"ds-Actian-n",21:"ds-Amazon-Redshift",22:"ds-Impala",23:"ds-Aster",25:"ds-Actian-n",26:"ds-EnterpriseDB",27:"ds-Vertica",28:"ds-Denodo",29:"ds-CiscoDataVirtualization",31:"ds-MicroSoft",32:"ds-GoogleBigQuery",33:"ds-SAP",35:"ds-IBMBigInsights",39:"ds-TM1",41:"ds-WebServices",43:"ds-Amazon-EMR",44:"ds-Apache-Hive",45:"ds-ClouderaHive",46:"ds-HortonworksHive",47:"ds-MapRHive",48:"ds-apache",49:"ds-SharkSpark",50:"ds-MongoDB",52:"ds-MariaDB",51:"ds-MarkLogic",54:"ds-Splunk",55:"ds-DataDirectCloud",56:"ds-ParStream",58:"ds-Phoenix",59:"ds-MicroSoft",60:"ds-DB2",61:"ds-Oracle",62:"ds-Teradata",63:"ds-SAP",65:"ds-PostgreSQL",66:"ds-MySQL",67:"ds-MariaDB",68:"ds-Amazon-EMR",69:"ds-Apache-Hive",70:"ds-ClouderaHive",71:"ds-HortonworksHive",72:"ds-MapRHive",73:"ds-SharkSpark",75:"ds-Amazon-Redshift",76:"ds-PIVOTALHAWQ",77:"ds-MemSQL",78:"ds-Arcadia-Platform",79:"ds-Altibase",80:"ds-MongoDB",81:"ds-Presto",82:"ds-DB2",83:"ds-DB2",84:"ds-InformixWire",85:"ds-SAP",86:"ds-MicroSoft",87:"ds-MicroSoft",88:"ds-MemSQL",90:"ds-GreenPlum",91:"ds-PIVOTALHAWQ",92:"ds-Netezza",93:"ds-Infobright",94:"ds-Actian-n",95:"ds-Impala",96:"ds-IBMBigInsights",97:"ds-Aster",99:"ds-Actian-n",100:"ds-EnterpriseDB",101:"ds-Vertica",102:"ds-Denodo",103:"ds-CiscoDataVirtualization",105:"ds-DataDirectCloud",106:"ds-ParStream",107:"ds-Arcadia-Platform",109:"ds-Presto",110:"ds-Phoenix",111:"ds-Kognitio",112:"ds-Kognitio",113:"ds-Informatica",114:"ds-Informatica",115:"ds-Apache-Cassandra-JDBC",116:"ds-SAP",117:"ds-Actian",118:"ds-Actian",119:"ds-InformixXPS",120:"ds-Apache-Cassandra-JDBC",121:"ds-MapRDrill",122:"ds-Cirro",123:"ds-EXASolution",124:"ds-EXASolution",125:"ds-Oracle",126:"ds-Oracle",127:"ds-Snowflake",128:"ds-Snowflake",129:"ds-Amazon-Aurora",130:"ds-Amazon-Aurora",131:"ds-Amazon-Athena",132:"ds-Amazon-Athena",133:"ds-MapRDrill",134:"ds-Druid",135:"ds-Druid",139:"ds-MongoBI",157:"ds-GoogleBigQuery",161:"ds-MapD",168:"ds-HortonworksSpark",169:"ds-HortonworksSpark",170:"ds-Yellowbrick",},dispTag:{1:"Database",2:"OLAP",4:"BigData",8:"Database",16:"BigData",32:"BigData"},searchTags:{100:["Database","ODBC"],200:["Database","ODBC"],300:["Database","ODBC"],400:["Database","ODBC"],500:["Database","ODBC"],600:["Database","ODBC"],700:["Database","ODBC"],900:["Database","ODBC"],1100:["Database","ODBC"],1200:["OLAP","Cube"],1300:["Database","ODBC"],1400:["Database"],1500:["OLAP","Cube"],1600:["OLAP","Cube"],1700:["Database","ODBC"],1800:["Database","ODBC"],2200:["Database","ODBC"],2300:["Database","ODBC"],2400:["Database","ODBC"],2800:["Database","ODBC"],2900:["OLAP","Cube"],3000:["Database"],3100:["Database","BigData","Hadoop"],3300:["Cloud"],3500:["Database","ODBC"],3600:["Database","ODBC","BigData"],3800:["Database"],3900:["Database"],4000:["Database","ODBC"],4100:["Database","BigData","Hadoop"],4200:["Database","ODBC"],4300:["Database","ODBC"],4700:["Database","Cloud","BigData"],4800:["Cloud"],5200:["Database","NoSQL"],5300:["Database","NoSQL"],5400:["Hadoop"],6400:["Database","BigData","Hadoop"],6600:["Database"],6700:["Database"],6800:["BigData"],6900:["BigData"],7100:["NoSQL"],7200:["Database"],7300:["BigData","Hadoop"],7500:["Database"],7600:["Database"],8000:["Database"],8100:["BigData"],},srcItemTypes:{ALL_SOURCES:"ALL_SOURCES",STATIC_SOURCE:"STATIC_SOURCE",DBTYPE_SOURCE:"DBTYPE_SOURCE",CUSTOM_CONNECTOR:"CUSTOM_CONNECTOR",CLOUDELEMENT_CONNECTOR:"CLOUDELEMENT_CONNECTOR"},combination:{BigData:["BigData","NoSQL","Search","Hadoop"],Apps:["Apps","oAuth","Cloud","Social","BI","PublicData","CE"]},GenericDBStr:"Generic",dataSourceType:{MONGODB:"mongodb",FILE_URL:"fileUrl",FILE_LOCAL:"fileLocal",ES:"elasticsearch",DROPBOX:"dropbox",GOOGLE_DRIVE:"googleDrive",GOOGLE_ANALYTICS:"googleAnalytics",GOOGLE_BIGQUERY:"googleBigQuery",SALESFORCE:"salesforce",FILE:"file",GENERIC_JDBC:"genericJdbc"},ERDF:{ENUM_LOAD_REPORT_BROWSE_TYPE_BINDINGTABLE:1,ENUM_LOAD_REPORT_BROWSE_TYPE_DATAPREVIEW:4,ENUM_LOAD_REPORT_BINDING_FLAG_ALL:15,ENUM_LOAD_REPORT_PREVIEW_FLAG_MappingInfo:1,ENUM_LOAD_REPORT_PREVIEW_FLAG_DataInfo:2,ENUM_LOAD_REPORT_PREVIEW_FLAG_SourceInfo:4,ENUM_LOAD_REPORT_PREVIEW_FLAG_InnerDataInfo:2048,},DSSSubType:{DSSSUBTYPEATTRIBUTE:3072,DSSSUBTYPEATTRIBUTEROLE:3073,DSSSUBTYPEATTRIBUTETRANSFORMATION:3074,DSSSUBTYPEATTRIBUTEABSTRACT:3075,DSSSUBTYPEATTRIBUTERECURSIVE:3076},DSSExType:{DSSEXDISPARK:416},URLMode:{NormalUrl:0,NewConnector:1,NewConnectorEdit:2,CloudElement:3},disableFeatures:{DISABLE_CUSTOM_CONNECTOR:"disableCustomerConnector",DISABLE_DDA:"disableDDA",DISABLE_QUOTA:"disableQuota",DISABLE_HADOOP:"disableHadoop",DISABLE_BI_TOOLS:"disableBITools",DISABLE_CLIP_BOARD:"disableClipboard",DISABLE_FACE_BOOK:"disableFacebook",DISABLE_TWITTER:"disableTwitter",DISABLE_SAMPLE_FILES:"disableSampleFiles",DISABLE_PUBLIC_DATA:"disablePublicData",DISABLE_MERGE_CUBE:"disableMergeCube",DISABLE_CE_SOURCE:"disableCESource",DISABLE_FLATTERN_DB_SOURCE:"disabledSources"},DssXmlPrivileges:{DssXmlPrivilegesUseDatabaseInstanceManager:57},Enum_SourceCategoryType:{File:1,BigData:2,Database:3,OLAP:4,Customized:5,Apps:6,}});}());mstrmojo.chart.model.enums.EnumDSSObjectType={DssTypeUnknown:-1,DssTypeReserved:0,DssTypeGeneric:5,DssTypeFormatBAD:46,DssTypeFilter:1,DssTypeTemplate:2,DssTypeReportDefinition:3,DssTypeMetric:4,DssTypeStyle:6,DssTypeAggMetric:7,DssTypeFolder:8,DssTypeDevice:9,DssTypePrompt:10,DssTypeFunction:11,DssTypeAttribute:12,DssTypeFact:13,DssTypeDimension:14,DssTypeTable:15,DssTypeDatamartReport:16,DssTypeFactGroup:17,DssTypeShortcut:18,DssTypeResolution:19,DssTypeMonitor:20,DssTypeAttributeForm:21,DssTypeSchema:22,DssTypeFormat:23,DssTypeCatalog:24,DssTypeCatalogDefn:25,DssTypeColumn:26,DssTypePropertyGroup:27,DssTypePropertySet:28,DssTypeDBRole:29,DssTypeDBLogin:30,DssTypeDBConnection:31,DssTypeProject:32,DssTypeServerDef:33,DssTypeUser:34,DssTypeTransmitter:35,DssTypeConfiguration:36,DssTypeRequest:37,DssTypeScript:38,DssTypeSearch:39,DssTypeSearchFolder:40,DssTypeDatamart:41,DssTypeFunctionPackageDefinition:42,DssTypeRole:43,DssTypeSecurityRole:44,DssTypeLocale:45,DssTypeConsolidation:47,DssTypeConsolidationElement:48,DssTypeScheduleEvent:49,DssTypeScheduleObject:50,DssTypeScheduleTrigger:51,DssTypeLink:52,DssTypeDbTable:53,DssTypeTableSource:54,DssTypeDocumentDefinition:55,DssTypeDrillMap:56,DssTypeDBMS:57,DssTypeMDSecurityFilter:58,DssTypePromptAnswer:59,DssTypePromptAnswers:60,DssTypeGraphStyle:61,DssTypeChangeJournalSearch:62,DssTypeNCSObjects:255,DssTypeReservedLastOne:63};(function(){var A=/^mstrmojo./;mstrmojo.DynamicClassFactory={newComponent:function(C,B,F){var H=C.prototype.scriptClass.replace(A,"");for(var E=0,D=B&&B.length||0;E<D;E++){if(!B[E]._mixinName){throw new Error('Mixins must have a "_mixinName" property to be used with DynamicClassFactory');}H+="_"+B[E]._mixinName.replace(A,"");}var G=mstrmojo[H];if(!G){G=mstrmojo.declare(C,B,F);mstrmojo[H]=G;}return G;}};}());(function(){function Q(U,R,S){if(U.nodeType===3&&R){return U;}else{var T=(R&&U.nodeType===1&&U.lastChild)?U.lastChild:F(U,S);return T?D(T,S):null;}}function F(S,R){return(S===R)?null:(S.previousSibling||F(S.parentNode,R));}function D(S,R){if(S===R){return null;}if(S.nodeType===3&&I(S)){return S;}else{if(S.nodeType===1&&S.lastChild){return D(S.lastChild);}else{return D(F(S,R));}}}function I(R){return R.textContent||R.nodeValue||R.innerText;}function M(U,R,S){if(U.nodeType===3&&R){return U;}else{var T=(R&&U.nodeType===1&&U.firstChild)?U.firstChild:B(U,S);return T?E(T,S):null;}}function B(S,R){return(S===R)?null:(S.nextSibling||B(S.parentNode,R));}function E(S,R){if(S===R){return null;}if(S.nodeType===3&&I(S)){return S;}else{if(S.nodeType===1&&S.firstChild){return E(S.firstChild);}else{return E(B(S,R));}}}mstrmojo.range=mstrmojo.provide("mstrmojo.range",{EDGE:{EDGE_BEGIN:1,EDGE_END:2,EDGE_MIDDLE:-1},getEdgeInfo:function P(T,U){var R=0,S;if(T.nodeType===1){if(window.getSelection){S=document.createRange();S.selectNode(T);R=S.toString().length;}else{S=document.body.createTextRange();S.moveToElementText(T);R=S.text.length;}}else{R=I(T).length;}return U===R?this.EDGE.EDGE_END:(U===0?this.EDGE.EDGE_BEGIN:this.EDGE.EDGE_MIDDLE);},collapseOnNode:function K(U,S){if(!U.offsetParent){return ;}var T=this.getSelection(),R=this.getRange();if(window.getSelection){R.selectNodeContents(U);R.collapse(S);T.removeAllRanges();T.addRange(R);}else{R.moveToElementText(U);R.collapse(S);R.select();}},collapseOnTextNode:function L(U,V){var T=this.getSelection(),S=this.getRange();if(window.getSelection){var R=M(U,true);S.setStart(R,V);S.collapse(true);T.removeAllRanges();T.addRange(S);}else{S.moveToElementText(U);S.collapse(true);S.move("character",V);S.select();}},collapseOnTextNodeIE:function C(S,T){var U=M(S,true),R;while(U!==null){R=I(U).length;if(R>=T){this.collapseOnTextNode(U,T);break;}else{T-=R;U=M(U,false);}}},getRangeInfo:function J(X,e){var Z=null,k,c=this.getRange(),b;if(X&&X===c.startContainer){var g=c.startContainer.firstChild,U=g&&g.firstChild,d=U&&U.firstChild;if(d){c.setStart(d,c.startOffset);c.setEnd(d,c.endOffset);}}if(window.getSelection){var W=function(m,o,n){var l=m.cloneRange();l.collapse(n);l.setStartBefore(o);return l.toString().length;},S=c.startContainer,f=c.startOffset;if(S.nodeType===1){f=W(c,S,true);}Z={collapsed:c.collapsed,startContainer:S,startOffset:e?e.startOffset:f};if(!c.collapsed){var V=c.endContainer,R=c.endOffset;if(V.nodeType===1){R=W(c,V,false);}Z.endContainer=V;Z.endOffset=R;}Z.range=c;}else{var j,a,Y=function(o,p){var n=o.duplicate(),l=document.body.createTextRange(),m;n.collapse(p);m=n.parentElement();l.moveToElementText(m);l.setEndPoint("EndToStart",n);return{container:m,offset:l.text.length};},h=Y(c,true),T;Z={collapsed:(c.compareEndPoints("StartToEnd",c)===0),startContainer:h.container,startOffset:h.offset};if(!Z.collapsed){T=Y(c,false);Z.endContainer=T.container;Z.endOffset=T.offset;}}return Z;},collapse:function O(S){if(window.getSelection){var T=this.getSelection();if(S){T.collapseToStart();}else{T.collapseToEnd();}}else{var R=this.getRange();R.collapse(S);R.select();}},selectSingleNode:function H(T){var S=this.getSelection(),R=this.getRange();if(window.getSelection){R.selectNodeContents(T);S.removeAllRanges();S.addRange(R);}else{R.moveToElementText(T);R.select();}},selectMultipleNodes:function N(W,S,X,U){var V=this.getSelection(),T=this.getRange();if(window.getSelection){T.setStart(W,S);T.setEnd(X,U);V.removeAllRanges();V.addRange(T);}else{W=(W.nodeType===3)?W.parentNode:W;T.moveToElementText(W);T.move("character",S);X=(X.nodeType===3)?X.parentNode:X;var R=document.body.createTextRange();R.moveToElementText(X);R.move("character",U);T.setEndPoint("EndToStart",R);T.select();}},getSelection:function G(){if(window.getSelection){return window.getSelection();}else{return document.selection;}},getRange:function A(){if(window.getSelection){selection=window.getSelection();if(selection.rangeCount>0){return selection.getRangeAt(0);}else{return document.createRange();}}else{return document.selection.createRange();}}});}());if(!mstrmojo.LoadedExternalJSURLs){mstrmojo.LoadedExternalJSURLs={};}function LoadScriptsExternalJSCallback(){mstrmojo.LoadedExternalJSURLs[mstrmojo._LoadsScript.esScripts.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(mstrmojo._LoadsScript.esScripts,mstrmojo._LoadsScript.callback,mstrmojo._LoadsScript.esScritsContext);mstrmojo._LoadsScript.ExternalJSCallbackIsBusy=false;}if(!mstrmojo._LoadsScript){mstrmojo._LoadsScript=mstrmojo.provide("mstrmojo._LoadsScript",{_meta_usesSuper:false,requiresMethod:function requiresMethod(B){if(!B){return false;}if(typeof this[B]==="function"){return true;}var A=this[B]||(this.methods&&(this.methods[B]||this.methods["*"]));if(typeof A==="string"){this.requiresCls(A);return typeof this[B]==="function";}return false;},requiresCls:function req(mixins,callback){if(mixins){if(typeof mixins==="string"){mixins=[mixins];}mstrmojo.requiresCls.apply(mstrmojo,mixins);var p=this.constructor.prototype,pm=p.mixins;if(!pm){p.mixins={};pm=p.mixins;}var mx=mstrmojo.mixin,i,len;for(i=0,len=mixins.length;i<len;i++){var fqcn=mixins[i];if(!pm[fqcn]){var m=eval(mixins[i]);mx(m,p);pm[fqcn]=true;if(m.__onmixin__){m.__onmixin__.apply(this,[]);}}}if(callback){callback.apply(this,[]);}}},requiresContrib:function reqCb(C,B){var A=this[C];if(A){var E,D=false;if(typeof A==="string"){E=mstrmojo.registry.ref(A);this[C]=E;D=true;}else{E=A;}if(E&&(D||B)){E.parent=this;if(E.startup){E.startup();}}return E;}return null;},requiresExternalScripts:function requiresExternalScripts(G,H,C){if(G&&G instanceof Array){if(G.length===0){if(H){H.call(C);}return false;}if(G[0]&&G[0].forceReload===false&&mstrmojo.LoadedExternalJSURLs[G[0].url]){G.splice(0,1);return this.requiresExternalScripts(G,H,C);}var A=document.createElement("script"),D=!!document.all,B=G[0].url,F=G[0].onError;if(B.substr(0,7)==="file://"){B=B.substr(7);}else{if(mstrApp.isSingleTier&&B.substr(0,4)!=="http"){B="http:"+B;}}A.type="text/javascript";A.src=B;if(F){A.onerror=function(){if(F&&F.callback&&C){F.callback.call(C,F.params);}};}if(!G[0].callbackParamName){if(D){A.onreadystatechange=function(){if(A.readyState==="loaded"||A.readyState==="complete"){A.onreadystatechange=null;A.onerror=null;if(G.length>1){mstrmojo.LoadedExternalJSURLs[G.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(G,H,C);}else{if(G.length===1){mstrmojo.LoadedExternalJSURLs[G[0].url]=true;if(H){H.call(C);}}}}};}else{A.onload=function(){A.error=null;A.onload=null;if(G.length>1){mstrmojo.LoadedExternalJSURLs[G.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(G,H,C);}else{if(G.length===1){mstrmojo.LoadedExternalJSURLs[G[0].url]=true;if(H){H.call(C);}}}};}}else{if(G[0].callbackParamName.length!==0){if(mstrmojo._LoadsScript.ExternalJSCallbackIsBusy&&mstrmojo._LoadsScript.ExternalJSCallbackIsBusy===true){var E=this;window.setTimeout(function(){E.requiresExternalScripts(G,H,C);},500);return ;}mstrmojo._LoadsScript.ExternalJSCallbackIsBusy=true;A.src+="&"+G[0].callbackParamName+"=LoadScriptsExternalJSCallback";mstrmojo._LoadsScript.esScripts=G;mstrmojo._LoadsScript.callback=H;mstrmojo._LoadsScript.esScritsContext=C;}}document.getElementsByTagName("head")[0].appendChild(A);}}});}(function(){mstrmojo.requiresCls("mstrmojo.dom");var F=mstrmojo.dom;var V="touchstart",J="mousedown",P=F.isIOSTouch,S=P?V:J;function W(Y){var X=Y[Y.hotSlot||"domNode"];if(X){if(!Y._closeCallback){var a=Y.id,Z=function(b){return function(d){var c=mstrmojo.all[a];if(c&&!c.ignoreHover){c["auto"+b](d,self);}};};Y._uncloseCallback=Z("Unclose");Y._closeCallback=Z("Close");}F.attachEvent(X,"mouseover",Y._uncloseCallback);F.attachEvent(X,"mouseout",Y._closeCallback);}}function C(Y){if(Y._closeCallback){var X=Y[Y.hotSlot||"domNode"];if(X){F.detachEvent(X,"mouseover",Y._uncloseCallback);F.detachEvent(X,"mouseout",Y._closeCallback);}}}function G(a,Y){var X=a,Z;while(X){if(X.open||X.openPopup){Z=X.ignoreHoverCount||0;Z=Y?(Z+1):(Z>0?Z-1:Z);X.ignoreHoverCount=Z;if(X.set){X.set("ignoreHover",(Z>0));}else{X.ignoreHover=(Z>0);}}X=X.opener||X.parent;if(X&&X.shouldPropagateLockHover&&!X.shouldPropagateLockHover()){break;}}}function E(){var Z=this._lockHoverCallback,Y=this.curtainNode,b=this._onClickChange;if(Z){F.detachEvent(document.body,S,Z,true);delete this._lockHoverCallback;}if(!Y||!b){return ;}var X=mstrApp&&mstrApp.isTouchApp&&mstrApp.isTouchApp()||P,a=X?V:J;F.detachEvent(Y,a,b);delete this._onClickChange;}mstrmojo._CanAutoClose=mstrmojo.provide("mstrmojo._CanAutoClose",{autoCloses:false,autoCloseDelay:100,locksHover:false,hotSlot:null,closeOnClick:false,curtainNode:null,postBuildRendering:function T(){this._super();if(this.autoCloses){W(this);}this.oncloseOnClickChange();},onautoClosesChange:function N(){var X=(this.autoCloses)?W:C;X(this);},oncloseOnClickChange:function I(){if(!this.curtainNode){return ;}var Z=this,X=mstrApp&&mstrApp.isTouchApp&&mstrApp.isTouchApp()||P,Y=X?V:J;this._onClickChange=function(){Z.close();if(X){mstrmojo.touchManager.notify([]);}};F.attachEvent(Z.curtainNode,Y,this._onClickChange);},autoUnclose:function H(){var X=this._autoCloseTimer;if(X){self.clearTimeout(X);delete this._autoCloseTimer;}},autoClose:function L(){if(this.ignoreHover){return ;}if(this._autoCloseTimer){self.clearTimeout(this._autoCloseTimer);}if(this.opener){if(this.autoCloseDelay){var X=this.opener.id;this._autoCloseTimer=self.setTimeout(function(){mstrmojo.all[X].closePopup();},this.autoCloseDelay);}else{this.opener.closePopup();}}},destroy:function U(X){E.call(this);this._super(X);},lockHover:function R(){G(this,true);if(!this._lockHoverCallback){var Y=this.id,X=this._lockHoverCallback=function(Z){mstrmojo.all[Y]._unlockHoverCheck(Z,self);};if((F.isIE7||F.isIE8)&&window.event&&(window.event.type===S)&&this.opener){this.opener._ignoreMousedown=true;}F.attachEvent(document.body,S,X,true);}},unlockHover:function O(){G(this,false);E.call(this);},hoverLock:function(X){G(this,X);},suppressClose:function B(X){return F.contains(this.domNode,X,true,document.body);},_unlockHoverCheck:function D(a,X){var Y=this.opener;if(Y&&Y._ignoreMousedown){delete Y._ignoreMousedown;return ;}var Z=F.eventTarget(X,a);if(!this.suppressClose(Z)){if(this.isWithinParentWidget(Z)){return ;}if(Y&&Y.onPopupAutoClosed){Y.onPopupAutoClosed(a,X);}this.close(Z);}},isWithinParentWidget:function Q(Y){var X=F.findWidget(Y);while(X){if(X===this){return true;}X=X.parent||X.opener;}return false;},open:function K(Y,X){if(this.autoCloses){this.autoUnclose();}this._super(Y,X);if(this.locksHover){this.lockHover();}},close:function M(X){if(this.locksHover){this.unlockHover();}this._super(X);},shouldPropagateLockHover:function A(){return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");mstrmojo.fx={enabled:true};var E=mstrmojo.dom;mstrmojo.fx._Effect=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.fx._Effect",duration:500,interval:50,delay:null,target:null,getTarget:null,widget:null,slot:null,preStart:null,postStart:null,onCancel:null,onEnd:null,revertOnCancel:true,isPlaying:false,started:false,init:function R(W){mstrmojo.hash.copy(W,this);},play:function C(){this.isPlaying=true;this.started=false;if(this.delay){var W=this;this.delayTimer=window.setTimeout(function(){W._start();W=null;},this.delay);}else{this._start();}},pause:function H(){if(this.delayTimer){window.clearTimeout(this.delayTimer);delete this.delayTimer;}if(this.timer){window.clearInterval(this.timer);delete this.timer;}this.isPlaying=false;},cancel:function U(){this.pause();if(this.started){if(this.revertOnCancel){this.counter=0;this.exec();}if(this.onCancel){this.onCancel();}this.started=false;}},_start:function F(){this.started=true;this._doTarget();this.steps=Math.max(Math.ceil(this.duration/this.interval),1);var W=this.ease;if(typeof W==="string"){this.ease=mstrmojo.registry.ref(W);}if(this._doPreStart()===false){this.started=false;this.isPlaying=false;return ;}this.counter=0;this.exec();this.counter++;this._doPostStart();if(this.counter>=this.steps){this._end();}else{var X=this;if(this.timer){window.clearInterval(this.timer);}this.timer=window.setInterval(function Y(){if(X){X.exec();X.counter++;if(X.counter>=X.steps){X._end();X=null;}}},this.interval);}},exec:null,_end:function D(){this.pause();this.started=false;if(this.onEnd){this.onEnd();}},_doTarget:function T(){if(this.getTarget){this.target=this.getTarget();}else{if(this.widget){this.target=this.widget[this.slot||"domNode"];}else{if(this.target){var X=this.target;if(X&&this.slot&&X.scriptClass){var Y=X[this.slot];if(Y){this.widget=X;this.target=Y;}}}}}if(!this.target){var W=this;while(W=W.parent){if(!W||W.domNode){break;}}if(W){this.widget=W;this.target=W[this.slot||"domNode"];}}},_doPreStart:function N(){if(this.preStart){return this.preStart();}},_doPostStart:function S(){if(this.postStart){this.postStart();}}});function M(Z,a){var X=Z.children,W=(X&&X.length)||0,Y;for(Y=0;Y<W;Y++){X[Y][a]();}}mstrmojo.fx.Parallel=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Parallel",init:function R(Z){this._super(Z);var Y=this.children;mstrmojo.registry.refArray(Y);var W=(Y&&Y.length)||0,X;for(X=0;X<W;X++){Y[X].parent=this;}},_start:function F(){this.started=true;if(this.preStart){this.preStart();}M(this,"play");if(this.postStart){this.postStart();}},pause:function H(){M(this,"pause");},cancel:function U(){M(this,"cancel");}});mstrmojo.fx.AnimateProp=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.AnimateProp",props:null,_start:function O(){var Y=this.props,Z;for(Z in Y){var X=Y[Z],W=X.ease;if(typeof W==="string"){X.ease=mstrmojo.registry.ref(W,{dontInst:true});}}this._super();},exec:function P(){var Z=this.props,a;for(a in Z){var X=Z[a],W=(X.ease||mstrmojo.ease.sin)(this.counter,X.start,X.stop-X.start,this.steps-1);if(X.fn){W=X.fn(W);}if(X.suffix){W+=X.suffix;}var Y=X.isStyle===false?this.target:this.target.style;Y[a]=W;}}});mstrmojo.fx.Typewriter=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Typewriter",charGroupSize:1,srcProp:"text",_doPreStart:function(){this._super();this._dynStop=false;if(this.stop==null){var a=this.srcProp,Y;if(a){var W=this.widget||this.parent;Y=W&&W[a];if((Y!=null)&&(typeof (Y)!=="string")){Y=String(Y);}}this.stop=Y;this._dynStop=true;}if(this.stop==null){this.stop="";}var Z=this.target,b=null,X=1;if(Z){Z.innerHTML="";b=document.createTextNode("");Z.appendChild(b);X=Math.max(Math.floor(this.stop.length/this.steps),1);}this.targetTextNode=b;this.charGroupSize=X;},exec:function(){var X=this.targetTextNode;if(!X){return ;}var W;if(this.counter>=this.steps-1){W=this.stop;}else{if(this.counter===0){W="";}else{W=this.stop.substring(0,this.charGroupSize*this.counter)+"_";}}X.nodeValue=W;},_end:function D(){this._super();if(this._dynStop){this.stop=null;delete this._dynStop;}},cancel:function U(){if(this._dynStop){this.stop=null;delete this._dynStop;}}});mstrmojo.requiresCls("mstrmojo.dom");mstrmojo.fx.Fade=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Fade",start:null,stop:null,ease:null,suffix:null,exec:function P(W){if(W==null){W=(this.ease||mstrmojo.ease.sin)(this.counter,this.start,this.stop-this.start,this.steps-1);}if(E.isIE&&!E.isWinPhone){this.target.style.filter="alpha(opacity="+parseInt(W*100,10)+")";}else{this.target.style.opacity=W;}}});mstrmojo.fx.FadeOut=mstrmojo.declare(mstrmojo.fx.Fade,null,{scriptClass:"mstrmojo.fx.FadeOut",start:1,stop:0,revertOnCancel:true,cssDisplay:"block",_end:function D(){if(this.cssDisplay){this.target.style.display="none";this.exec(this.start);}this._super();},cancel:function U(){if(this.started&&this.cssDisplay){this.target.style.display=this.cssDisplay;}this._super();}});mstrmojo.fx.FadeIn=mstrmojo.declare(mstrmojo.fx.Fade,null,{scriptClass:"mstrmojo.fx.FadeIn",start:0,stop:1,revertOnCancel:true,cssDisplay:"block",_doPostStart:function V(){if(this.cssDisplay){this.target.style.display=this.cssDisplay;}this._super();},cancel:function(){if(this.started&&this.revertOnCancel&&this.cssDisplay){this.target.style.display="none";}this._super();}});function I(Y,X,Z){var W=Math.pow(10,Z||2);if(X){return parseInt(W*Y/X,10)/W;}return parseInt(W*Y,10)/W;}mstrmojo.ease={linear:function L(X,W,Z,Y){if(X===Y){return W+Z;}if(X===0){return W;}return W+Z*I(X,Y);},sin:function A(X,W,Z,Y){return W+Z*Math.sin((Math.PI/2)*X/Y);},cos:function B(X,W,Z,Y){return W+Z*Math.cos((Math.PI/2)*(1-X/Y));},sincos:function K(X,W,Z,Y){if(X>Y/2){return W+Z*Math.cos((Math.PI/2)*(1-X/Y));}return W+Z*Math.sin((Math.PI/2)*X/Y);},cossin:function Q(X,W,Z,Y){if(X>Y/2){return W+Z*Math.sin((Math.PI/2)*X/Y);}return W+Z*Math.cos((Math.PI/2)*(1-X/Y));},bounce:function G(X,W,Z,Y){if((X/=Y)<(1/2.75)){return Z*(7.5625*X*X)+W;}if(X<(2/2.75)){return Z*(7.5625*(X-=(1.5/2.75))*X+0.75)+W;}if(X<(2.5/2.75)){return Z*(7.5625*(X-=(2.25/2.75))*X+0.9375)+W;}return Z*(7.5625*(X-=(2.625/2.75))*X+0.984375)+W;},shake:function J(X,W,Z,Y){if(X<Y/2){return W+Z*I(Math.sin(2*Math.PI*X/8),null,2)*2*X/Y;}return W+Z*I(Math.sin(2*Math.PI*X/8),null,2)*2*(1-X/Y);}};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");var E=mstrmojo.dom,M=mstrmojo.hash,B,I=mstrmojo.global.document,K="mousedown",O="mousemove",Q="mouseup";function G(X){if(E.isPrimaryMouseBtn(X)){B.startDragCheck(self,X);}}var U,P,A="mstrmojo-dnd-avatar",T;function F(Y,X){if(X!==undefined&&X!==null){P.innerHTML=X;}T.left=Y.x+"px";T.top=Y.y+"px";}function L(Y,X){if(!U){U=I.createElement("div");T=U.style;U.className=A;U.innerHTML='<div class="'+A+'-inner"></div>';P=U.firstChild;I.body.appendChild(U);}F(Y,X);T.display="block";}function R(){if(T){T.display="none";}}function H(X){var Y=++B.ctxt.moveCount;if(Y>=B.minMoves){B.stopDragCheck();if((X.buttons===1||X.buttons===undefined||E.isIE9)&&(X.which===1||X.button===0||E.isIE8)){B.startDrag(self,X);}}}function N(X){if(E.isPrimaryMouseBtn(X)){B.stopDragCheck();delete B.ctxt;}}function D(X){B.onDragMove(self,X);}function C(X){if(E.isPrimaryMouseBtn(X)){B.stopDrag(window,X);}}function J(Y){var X=E.findWidget(Y);while(X){if(X.draggable){return X;}X=X.parent;}return null;}function S(X){var Z=X.src,Y=J(Z.node);if(!Y){return null;}if(Y.getDragAction){X.action=Y.getDragAction(X);}Z.widget=Y;Z.data=Y.getDragData&&Y.getDragData(X);if(Y.isDragValid){if(!Y.isDragValid(X)){if(!mstrApp.isInVFInteractMode&&(!Y.shouldDragBubble||Y.shouldDragBubble(X)===true)){X.src.node=Y.domNode.parentNode;return S(X);}return null;}}if(Y.ondragstart){Y.ondragstart(X);}return Y;}function W(Z,Y){var X=E.findWidget(Z),a=Y.tgt&&Y.tgt.widget;while(X){if(X.dropZone){if(X===a){return X;}if(X.allowDrop&&X.allowDrop(Y)){return X;}}X=X.parent;}return null;}function V(){if(this.set){this.set("allowingDrop",false);}}mstrmojo.dnd=mstrmojo.dnd||mstrmojo.provide("mstrmojo.dnd",{minMoves:3,enable:function(){if(!mstrmojo.dndEnabled){E.attachEvent(I,K,G);mstrmojo.dndEnabled=true;}},disable:function(){mstrmojo.dndEnabled=false;E.detachEvent(I,K,G);},startDragCheck:function(X,Y){delete this.ctxt;var Z=E.captureEventInfo({hWin:X,e:Y});this.ctxt={src:Z,moveCount:0,last:M.copy(Z.pos),getDirection:function(a){return !!this.dir[a];},getCtxtDragData:function(){var a=this.src;return(a&&a.data)||{};},getCtxtDropData:function(){var a=this.tgt;return(a&&a.data)||{};}};if(this.minMoves){E.attachEvent(I,O,H);E.attachEvent(I,Q,N);}else{this.startDrag(X,Y);}},stopDragCheck:function(){E.detachEvent(I,O,H);E.detachEvent(I,Q,N);},startDrag:function(X,a){var Y=this.ctxt;Y.id=mstrmojo.now();var Z=S(Y);if(!Z){return ;}E.clearBrowserHighlights(X);E.preventDefault(self,a);E.attachEvent(I,O,D);E.attachEvent(I,Q,C);var c=window.mstrApp;if(c&&c.setInteractive){this._changeAppStatus=c.setInteractive(false);}if(!Z.ownAvatar){var b=Y.src;L(b.pos,b.data&&b.data.html);}},stopDrag:function(X,d){E.detachEvent(I,O,D);E.detachEvent(I,Q,C);var a=this.ctxt,Z=a.tgt||{},Y=E.captureEventInfo({hWin:X,e:d,data:Z.data}),c=W(Y.node,a);Y.widget=c;a.tgt=Y;if(c){if(c.ondrop){c.ondrop(a);}else{V.call(c);}}var b=a.src.widget;if(b&&b.ondragend){b.ondragend(a);}if(b&&!b.ownAvatar){R();}if(this._changeAppStatus){window.mstrApp.setInteractive(true);delete this._changeAppStatus;}},onDragMove:function(b,d){if(E.isSafari){E.clearBrowserHighlights();}var X=this.ctxt,a=X.tgt||{},Y=a.widget,c=E.captureEventInfo({hWin:b,e:d,data:a.data}),h=c.widget=W(c.node,X),g=X.last,Z=c.pos;X.dir={x:Z.x>g.x,y:Z.y>g.y};X.last=M.copy(c.pos);X.tgt=c;if(Y!==h){if(Y){if(Y.ondragleave){Y.ondragleave(X);}else{V.call(Y);}}if(h){X.tgt.data=(h.getDropData&&h.getDropData(X))||{};if(h.ondragenter){h.ondragenter(X);}else{if(h.set){h.set("allowingDrop",true);}}}}if(h){if(h.ondragover){h.ondragover(X);}}var f=X.src.widget;if(f&&f.ondragmove){f.ondragmove(X);}if(f&&!f.ownAvatar){F(c.pos);}}});B=mstrmojo.dnd;B.enable();}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var E=mstrmojo.dom;mstrmojo.ui._IsIncFetchList=mstrmojo.provide("mstrmojo.ui._IsIncFetchList",{_mixinName:"mstrmojo.ui._IsIncFetchList",ifDataHelper:null,supportsIncFetch:false,isFetching:false,initScroll:function A(){var I=this.ifDataHelper,H=this,G=this.scrollNode||this.domNode;this.supportsIncFetch=I&&I.hasNext();if(I&&this.supportsIncFetch){this._scroll=function F(){var J=this.scrollNode||this.domNode||G;if(Math.ceil(J.offsetHeight+J.scrollTop)>=J.scrollHeight){H.raiseEvent({name:"incFetch",id:H.id});}};E.attachEvent(G,"scroll",this._scroll);this.attachEventListener("incFetch",this.id,function(J){if(!this.supportsIncFetch||this.isFetching){return ;}if(this.preNext){this.preNext();}this.set("isFetching",true);I.next({complete:function(K){if(H.postNext){H.postNext();}H.set("isFetching",false);},success:function(K){H.addItems(K.items||null);},failure:function(K){H.supportsIncFetch=false;mstrmojo.alert("Error in fetching next: "+K);}});});}},unrender:function D(F){var G=this.scrollNode||this.domNode;E.detachEvent(G,"scroll",this._scroll);this._super(F);},render:function C(){this._super();if(this.supportsIncFetch){var F=this.scrollNode||this.domNode;E.attachEvent(F,"scroll",this._scroll);}},addItems:function B(F){if(this._super){this._super(F);}if(!this.ifDataHelper.hasNext()){this.supportsIncFetch=false;var G=this.scrollNode||this.domNode;E.detachEvent(G,"scroll",this._scroll);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var C=mstrmojo.dom;function D(J,I){var G=[];if(J){var F;for(F in J){var H=Number(F);if(H>=I){G.push(H);}}}G.sort(mstrmojo.array.numSorter);return G;}mstrmojo.ListSelector=mstrmojo.provide("mstrmojo.ListSelector",{premousedown:function E(L,F,N){if(C.isPrimaryMouseBtn(N.e)){var I=N.hWin,J=N.e,G=C.eventTarget(I,J),M=L.listMapper.findIndex(L,F,G);if(M>-1){var H=L.multiSelect,K=C.ctrlKey(I,J),O=C.shiftKey(I,J);if(K||O){C.clearBrowserHighlights(I);}if(H&&(K||(L.selectionPolicy==="toggle"))){L.toggleSelect(M);}else{if(H&&O){L.rangeSelect(M);}else{L.singleSelect(M);}}}}},premouseup:function B(H,K,G){var F=G.hWin,J=G.e,L=C.ctrlKey(F,J),I=C.shiftKey(F,J);if(L||I){C.clearBrowserHighlights(F);}},onadd:function A(I,H){var M=H&&H.value&&H.value.length;if(M){var G=H.index,K=I.selectedIndices,L=D(K,G),J;for(J=L.length-1;J>-1;J--){var F=L[J];K[F+M]=true;delete K[F];}if(I.selectedIndex>=G){I.selectedIndex+=M;}}},onremove:function A(Q,S){var O=S&&S.value&&S.value.length;if(O){var R=S.index,I=R+O-1,M=Q.selectedIndices,L=Q.selectedIndex,G=[],T=[],P=false;if(M){var H;for(H in M){var K=Number(H);if(K>I){G.push(K);}else{if(K>=R){T.push(K);P=true;}}}}G.sort(mstrmojo.array.numSorter);var J,N;for(J=0,N=G.length;J<N;J++){var F=G[J];M[F-O]=true;delete M[F];}if(L>I){Q.selectedIndex-=O;}if(P){Q.removeSelect(T);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");var D=mstrmojo.dom,L=mstrmojo.hash;var O=100;var F=D.supportsTouches?0.5:1;var G=1;var R=100;var P={onvscrollVisibleChange:function(){var U=this.vscrollNode,V=U&&U.style;if(!V){return ;}if(this.vscrollVisible){var T=this.maxPos,W=this.clientSize;V.height=Math.round(W.y*W.y/T.y)+"px";V.left=(W.x-5)+"px";V.display="block";V.opacity=0.5;}else{V.opacity=0;}},onhscrollVisibleChange:function(){var V=this.hscrollNode,U=V&&V.style;if(!U){return ;}if(this.hscrollVisible){var T=this.maxPos,W=this.clientSize;U.width=Math.round(W.x*W.x/T.x)+"px";U.top=(W.y-5)+"px";U.display="block";U.opacity=0.5;}else{U.opacity=0;}}};var M=L.copy({onposChange:function(){var V=this.clientSize,U=this.maxPos,T=0,W=0;if(this.scrollsVert){W=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style[D.CSS3_TRANSFORM]="translateY("+Math.round((V.y-(V.y*V.y/U.y))*this.pos.y/U.y)+"px)";}}if(this.scrollsHoriz){T=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style[D.CSS3_TRANSFORM]="translateX("+Math.round((V.x-(V.y*V.x/U.x))*this.pos.x/U.x)+"px)";}}this.scrollChild.style[D.CSS3_TRANSFORM]="translate3d(-"+parseInt(T,10)+"px, -"+parseInt(W,10)+"px, 0px)";},ondeceleratingChange:function(){this.scrollChild.style[D.CSS3_TRANSITION]=this.decelerating?(D.CSS3_PREFIX+"transform 0.2s linear"):"";}},L.copy(P));var H=L.copy({onposChange:function(){var V=this.clientSize,U=this.maxPos,T=0,X=0,W=this.scrollboxNode;if(this.scrollsVert){X=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style.top=Math.round((V.y-(V.y*V.y/U.y))*this.pos.y/U.y)+"px";}W.scrollTop=parseInt(X,10);}if(this.scrollsHoriz){T=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style.left=Math.round((V.x-(V.y*V.x/U.x))*this.pos.x/U.x)+"px";}W.scrollLeft=parseInt(T,10);}}},L.copy(P));mstrmojo._TouchScrolling=mstrmojo.provide("mstrmojo._TouchScrolling",{FRICTION:0.65,BOUNCEFRICTION:0.5,usesTouches:false,bounces:true,scrollsHoriz:true,scrollsVert:true,pos:null,preBuildRendering:function N(){this.usesTouches=(mstrmojo.dom.supportsTouches&&this.usesTouches&&(this.scrollsHoriz||this.scrollsVert));if(this.usesTouches){this.pos={x:0,y:0};}if(this._super){this._super();}},postBuildRendering:function C(){if(this._super){this._super();}if(this.usesTouches){var W=this.scrollboxNode,V=this.itemsContainerNode||W.firstChild;if(W&&W!==V){this.scrollChild=V;var T=W.style;T.position="relative";T.overflow="hidden";var U=V.style;U.position="absolute";U.left=0;U.top=0;this.markupMethods=L.copy(D.isSafari?M:H,L.copy(this.markupMethods));this.attachTouchEvents();}}},unrender:function(T){if(this.usesTouches){this.detachTouchEvents();}this._super(T);},attachTouchEvents:function(){var U=this.touchNode||this.scrollboxNode;if(U){if(!this._tsCallback){var T=this;this._tsCallback=function(V){T.touchesBegin(self,V);};this._tmCallback=function(V){T.touchesMoved(self,V);};this._teCallback=function(V){T.touchesEnd(self,V);};}D.attachEvent(U,D.TOUCHSTART,this._tsCallback);this._tsNode=U;}},detachTouchEvents:function(){var T=this._tsNode;if(T){D.detachEvent(T,D.TOUCHSTART,this._tsCallback);delete this._tsNode;}},touchesBegin:function J(T,V){var U=V.target&&V.target.tagName;if(U&&(U==="SELECT"||U==="INPUT")){return ;}D.preventDefault(T,V);this.stopDeceleration();this.startTime=new Date();this.startTimePos={x:this.pos.x,y:this.pos.y};this.startTouchPos=D.getMousePosition(D.firstTouch(T,V),T);this.dragging=false;D.attachEvent(window,D.TOUCHMOVE,this._tmCallback);D.attachEvent(window,D.TOUCHEND,this._teCallback);},touchesMoved:function E(b,d){var Z=D.getMousePosition(D.firstTouch(b,d),b);D.preventDefault(b,d);if(!this.dragging){var T=5,h=Math.abs;if((this.scrollsHoriz&&h(Z.x-this.pos.x)>T)||(this.scrollsVert&&h(Z.y-this.pos.y)>T)){this.dragging=true;this.dragStartTime=new Date();this.startTouchPos=Z;var V=this.scrollboxNode,Y={x:V.clientWidth,y:V.clientHeight},f={x:V.scrollWidth,y:V.scrollHeight};this.clientSize=Y;this.scrollSize=f;this.maxPos={x:Math.max(f.x-Y.x,0),y:Math.max(f.y-Y.y,0)};this.showScroll();}}if(this.dragging){D.stopPropogation(b,d);var c=this.startTimePos,X=this.startTouchPos,a=this.maxPos;var W={x:this.scrollsHoriz?Math.max(Math.min(c.x-(Z.x-X.x),a.x),0):0,y:this.scrollsVert?Math.max(Math.min(c.y-(Z.y-X.y),a.y),0):0};this.set("pos",W);this.nextLastDragPos=this.lastDragPos;this.lastDragPos=Z;var U=new Date(),g=this.lastDragTime;this.nextLastDragTime=g;this.lastDragTime=U;if((U-g)>R){this.startTime=this.lastDragTime;this.dragStartTime=this.startTime;this.startTimePos={x:W.x,y:W.y};this.startTouchPos=Z;}}},touchesEnd:function I(T,U){D.preventDefault(T,U);D.detachEvent(window,D.TOUCHMOVE,this._tmCallback);D.detachEvent(window,D.TOUCHEND,this._teCallback);if(this.dragging){this.dragging=false;D.stopPropogation(T,U);if((new Date())-this.lastDragTime<=R){this.startDeceleration(T,U);}else{this.hideScroll();}}},startDeceleration:function B(Y,Z){var W=D.getMousePosition(D.firstChangedTouch(Y,Z),Y),c=((mstrmojo.dom.supportsTouches===null)?this.lastDragPos:this.nextLastDragPos)||W,b={x:W.x-c.x,y:W.y-c.y},T=((mstrmojo.dom.supportsTouches===null)?this.lastDragTime:this.nextLastDragTime),d=T?(new Date())-T:0,V={x:d?Number(b.x*O*F/d).toFixed(2):0,y:d?Number(b.y*O*F/d).toFixed(2):0};var a=this,U=function(e){return(a.scrollsHoriz&&Math.abs(e.x)>=G)||(a.scrollsVert&&Math.abs(e.y)>=G);};if(U(V)){this.velocity=V;this.friction={x:this.FRICTION,y:this.FRICTION};this.set("decelerating",true);var X=function(){a.decelerate();if(!U(a.velocity)){a.stopDeceleration();a=null;}};X();if(this.decelerating){this.decelerationTimer=window.setInterval(X,O);}}else{this.hideScroll();}},stopDeceleration:function A(){this.set("decelerating",false);delete this.velocity;if(this.decelerationTimer){window.clearTimeout(this.decelerationTimer);delete this.decelerationTimer;}this.hideScroll();},decelerate:function S(){var W=this.pos,V=this.velocity,U=this.friction,Z=this.maxPos,X={x:W.x-V.x,y:W.y-V.y},b=this.bounces,T=this.BOUNCEFRICTION;var a=X.x;if(a<0||a>Z.x){X.x=(a<0)?0:Z.x;V.x*=b?-T:0;U.x=T;}var Y=X.y;if(Y<0||Y>Z.y){X.y=(Y<0)?0:Z.y;V.y*=b?-T:0;U.y=T;}this.set("pos",X);this.velocity={x:U.x*V.x,y:U.y*V.y};},hideScroll:function K(){this.set("vscrollVisible",false);this.set("hscrollVisible",false);},showScroll:function Q(){var T=this.maxPos;if(this.scrollsVert&&T.y&&this.vscrollNode){this.set("vscrollVisible",true);}if(this.scrollsHoriz&&T.x&&this.hscrollNode){this.set("hscrollVisible",true);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var K=mstrmojo.array,D=mstrmojo.hash;function E(V,T){var W=[],Q=V.selectedIndices,P=V.allIdx;var R,S,U=V.items;if(V.multiSelect&&(P>-1)&&(K.indexOf(T,V.allIdx)>-1)){for(R=0,S=U.length;R<S;R++){if(!Q[R]){W.push(R);Q[R]=true;V.selectedIndex=R;V.selectedItem=U[R];}}}else{for(R=0,S=T.length;R<S;R++){var X=T[R];if(!Q[X]){Q[X]=true;W.push(X);V.selectedIndex=X;V.selectedItem=U[X];}}}return W;}function J(R){var Q=[],S=R.selectedIndices,P;for(P in S){delete S[P];Q.push(parseInt(P,10));}R.selectedIndex=-1;R.selectedItem=null;return Q;}function H(V,U){var S=[],Q=V.selectedIndices,X=K.indexOf,P=V.allIdx;if(V.multiSelect&&(P>-1)&&(X(U,P)>-1)){return J(V);}if(U.length>0&&Q[P]){if(X(U,P)<0){U.push(P);}}var T=U.length,R;for(R=0;R<T;R++){var W=U[R];if(Q[W]){delete Q[W];S.push(W);if(V.selectedIndex===W){V.selectedIndex=-1;V.selectedItem=null;}}}return S;}function A(S,R){var P=S.selectedIndices;if(!P){P={};S.selectedIndices=P;}if(!R){R={};}var U=S.selectedIndex,T=[],V,Q;for(Q in P){if(!R[Q]){V=parseInt(Q,10);delete P[Q];T.push(V);if(U===V){S.selectedIndex=-1;S.selectedItem=null;}}}var X=[],W=S.items;for(Q in R){if(!P[Q]){V=parseInt(Q,10);P[Q]=true;X.push(V);S.selectedIndex=V;S.selectedItem=W&&W[V];}}return{add:X,rmv:T};}function G(Q,P,R){if(Q.raiseEvent&&((P&&P.length)||(R&&R.length))){Q.raiseEvent({name:"change",added:P,removed:R});}}mstrmojo._ListBase2Selections=mstrmojo.provide("mstrmojo._ListBase2Selections",{multiSelect:false,selectedIndices:null,selectedIndex:-1,selectedItem:null,selectedIndices_bindEvents:"change",selectedIndex_bindEvents:"change",selectedItem_bindEvents:"change",allowUnlistedValues:true,insertUnlistedValuesAt:-1,allIdx:-1,singleSelect:function F(P,Q){if(!this.selectedIndices[P]||(this.selectionPolicy==="reselect")||(P!==this.allIdx&&this.selectedIndices[this.allIdx])){var R=J(this),S=E(this,[P]);if(Q!==true){G(this,S,R);}}},toggleSelect:function O(P,Q){var S,R;if(this.selectedIndices[P]){R=H(this,[P]);}else{S=E(this,[P]);}if(Q!==true){G(this,S,R);}},rangeSelect:function N(P,Q){this.singleSelect(P,Q);},clearSelect:function I(P){var Q=J(this);if(P!==true){G(this,null,Q);}},select:function L(R,P){var Q=A(this,K.hash(R));if((P!==true)&&(Q.add.length||Q.rmv.length)){G(this,Q.add,Q.rmv);}},addSelect:function B(R,P){if(R===null||R===undefined){return null;}if(R.constructor!==Array){R=[R];}var Q=E(this,R);if(P!==true){G(this,Q,null);}return Q;},removeSelect:function M(R,P){if(R===null||R===undefined){return null;}if(R.constructor!==Array){R=[R];}var Q=H(this,R);if(P!==true){G(this,null,Q);}return Q;},_set_selectedIndices:function(S,Q,P){if(this.selectedIndices===Q){return false;}var R=A(this,Q);if(R.add.length||R.rmv.length){if(P!==true){G(this,R.add,R.rmv);}}return false;},_set_selectedIndex:function(S,Q,P){var R={};if(Q>-1){R[Q]=true;}return this._set_selectedIndices(null,R,P);},_set_selectedItem:function(W,T,S){var R=T&&(typeof T==="object"),V=this.itemIdField,Q=-1,U=this.items;if(R&&V!=null){Q=K.find(U,V,T[V]);}else{if(T!=null){Q=K.indexOf(U,T);}}if((Q===-1)&&(T!=null)&&this.allowUnlistedValues){var P=this.insertUnlistedValuesAt;if(P==null||P<0){P=(U&&U.length)||0;}Q=P;this.add([T],Q);}return this._set_selectedIndex(null,Q,S);},initSelections:function C(T,Q,P,S,R){if(!this.selectedIndices){this.selectedIndices={};this.selectedIndex=-1;}if(T){this._set_selectedIndices(null,T,R);}else{if(Q){this.select(Q,R);}else{if(S){this._set_selectedItem(null,S,R);}else{if(P!==null&&P!==undefined){this._set_selectedIndex(null,P,R);}}}}},sortSelectedIndices:function(){return D.keyarray(this.selectedIndices,true).sort(K.numSorter);},removeSelectedItems:function(){var R=this.sortSelectedIndices(),P=R.length,S=R[P-1],Q=this.remove(R);S=Math.min(S+1-P,this.items.length-1);if(S>=0){this.singleSelect(S);}return Q;},getSelectedItems:function(){return K.get(this.items,this.sortSelectedIndices())||[];},setSelectedItems:function(Q,d){if(!Q||!Q.length){return ;}var S=this.items||[],s=this.itemIdField!=null?K.findMulti(S,this.itemIdField,Q):K.indexOfMulti(S,Q),V=Q.length,T=V-s.count,q=this.allowUnlistedValues,b=this.insertUnlistedValuesAt,X=(q&&(b>-1))?T:0;if(b<0){b=S.length;}var R=[],U=[],f=s.map;if(T&&q){var p=0,e;for(e=0;e<V;e++){if(f[e]==null){R.push(Q[e]);U.push(b+p++);}}this.add(R,b);}var W=[],h;for(h in f){var o=f[h];if(o>=b){o+=X;}W.push(o);}var r=W.concat(U),Y=this.addSelect(r,!d);if(!d){var Z=K.hash(Y),g=this.selectedIndices,a=[],l;for(l in g){if(!Z[l]){a.push(parseInt(l,10));}}var P=this.removeSelect(a,true);G(this,Y,P);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var I=mstrmojo.array,M=mstrmojo.hash;function J(U){if(U!==null){return(U.constructor!==Array)?[U]:U;}return null;}function F(e,c,Y){if(!c){return null;}var f=[],V=e.selectedIndices,U=e.allIdx,a=e.noneIdx;if(e.multiSelect&&(a>-1)&&(I.indexOf(c,a)>-1)){return f;}var X,Z,d=e.items,b=e.itemIdField,W=e.selectedItems,h;if(e.multiSelect&&(U>-1)&&(I.indexOf(c,e.allIdx)>-1)){for(X=0,Z=d.length;X<Z;X++){if(!V[X]){f.push(X);V[X]=true;e.selectedIndex=X;e.selectedItem=d[X];}}}else{for(X=0,Z=c.length;X<Z;X++){var g=c[X];if(!V[g]){V[g]=true;if(Y){f.push({idx:g,positions:Y});}else{f.push(g);}e.selectedIndex=g;h=e.selectedItem=d[g];if(W){W[h[b]]=h;}}}}return f;}function D(X,U){var W=[],Y=X.selectedIndices,Z=X.selectedItems,V;for(V in Y){delete Y[V];if(U){W.push({idx:parseInt(V,10),positions:U});}else{W.push(parseInt(V,10));}}X.selectedIndex=-1;X.selectedItem=null;if(Z){X.selectedItems={};}return W;}function T(e,d,Y){if(!d){return null;}var a=[],V=e.selectedIndices,g=I.indexOf,U=e.allIdx,b=e.noneIdx,c=e.itemIdField,W=e.selectedItems;if(e.multiSelect&&(((U>-1)&&(g(d,U)>-1))||((b>-1)&&(g(d,b)>-1)))){return D(e);}if(d.length>0&&V[U]){if(g(d,U)<0){d.push(U);}}var Z=d.length,X;for(X=0;X<Z;X++){var f=d[X];if(V[f]){delete V[f];if(Y){a.push({idx:f,positions:Y});}else{a.push(f);}if(W){delete W[e.items[f][c]];}if(e.selectedIndex===f){e.selectedIndex=-1;e.selectedItem=null;}}}return a;}function C(X,Y,V,U){if(U){return ;}if(this.raiseEvent){if((X&&X.length)||(Y&&Y.length)){try{this.raiseEvent({name:"selectionChange",added:X,removed:Y});}catch(W){T(this,X);F(this,Y);throw W;}}}}function B(V){var W=this.itemIdField,U=this.items;if(typeof V==="object"&&W){return I.find(U,W,V[W]);}return I.indexOf(U,V);}mstrmojo._ListSelections={multiSelect:false,allIdx:-1,noneIdx:-1,itemIdField:"",items:null,selectedIndices:null,selectedIndex:-1,selectedIndices_bindEvents:"selectionChange",selectedIndex_bindEvents:"selectionChange",selectedItem:null,selectedItem_bindEvts:"selectionChange",allowUnlistedValues:true,selectedItems:null,supportsIncFetch:false,init:function(U){this._super(U);if(this.supportsIncFetch&&this.itemIdField){this.selectedItems={};}if(!this.items){this.items=[];}if(!this.selectedIndices){this.selectedIndices={};if(this.selectedIndex>-1){this._set_selectedIndex("selectedIndex",this.selectedIndex,true);}else{if(this.selectedItem){this._set_selectedItem("selectedItem",this.selectedItem,true);}}}},addItems:function K(d){d=J(d);if(!d){return ;}var a=this.items,U=this.items.length,W=this.selectedItems,Y=[],V;a=this.items=a.concat(d);V=a.length;if(W){var Z=this.itemIdField,X,c;for(X=U;X<a.length;X++){c=a[X];if(W[c[Z]]){Y.push(X);}}}if(Y&&Y.length){F(this,Y);}if(V>U){var b=this.itemsContainerNode;if(b){b.innerHTML+=this._buildItemsMarkup(U,V-1).join("");}}},addSelectedItems:function S(U){this.selectItems(U,false);},setSelectedItems:function L(U){this.selectItems(U,true);},selectItems:function R(c,e){c=J(c);if(!c){return ;}if(e&&this.selectedItems){this.selectedItems={};}var W=this.selectedItems,a=this.itemIdField,U=[],Y=this.items.length,Z=[],V=this.allowUnlistedValues,d,b,X;for(X=0;X<c.length;X++){d=c[X];b=B.call(this,d);if(b<0){if(W===null){if(V){U.push(d);b=Y++;Z.push(b);}}else{W[d[a]]=d;}}else{Z.push(b);}}if(U.length>0){this.addItems(U);}if(Z.length>0){if(e){this.select(Z);}else{this.addSelect(Z);}}},unselectItems:function A(V){V=J(V);if(!V){return ;}var a=this.selectedItems,W=[],Z=this.itemIdField,Y,U,X;if(a===null){return ;}for(X=0;X<V.length;X++){Y=V[X];if(a){delete a[Y[Z]];}U=B.call(this,Y);if(U<0){W.push(U);}}if(W.length>0){this.removeSelect(W);}},getSelectedItems:function G(){if(this.selectedItems){return M.valarray(this.selectedItems);}return I.get(this.items,M.keyarray(this.selectedIndices,true));},singleSelect:function(V,W,U){if(V!==-1){this.select([V],W,U);}},singleSelectByField:function O(V,W,U){this.singleSelect(I.find(this.items,W,V),U);},toggleSelect:function Q(U){var W,V;if(this.selectedIndices[U]){V=T(this,[U]);}else{W=F(this,[U]);}C.call(this,W,V,[U]);},select:function(W,V,U){W=J(W);if(!W){return ;}var Y=D(this,U),a=F(this,W,U),X;if(this.selectionPolicy!=="reselect"){for(X=Y.length-1;X>=0;X--){var Z=I.indexOf(a,Y[X]);if(Z>-1){Y.splice(X,1);a.splice(Z,1);}}}C.call(this,a,Y,W,V);},rangeSelect:function H(V,U){var a=this.selectedIndex,Y=a,Z=this.allIdx,W=[],X;if(V===Z||this.selectedIndices[Z]){W.push(Z);}else{if(Y===-1&&this.selectedIndices){for(X in this.selectedIndices){Y=parseInt(X,10);break;}}Y=Y===-1?0:Y;if(Y>V){Y=V;V=a;}for(X=Y;X<=V;X++){W.push(X);}}this.select(W,U);this.selectedIndex=a;},clearSelect:function(U){C.call(this,null,D(this),[],U);if(!U){this.raiseEvent({name:"clearSelection"});if(this.parent){this.parent.raiseEvent({name:"clearSelection"});}}},addSelect:function(X,U,V){X=J(X);if(!X){return ;}var W=F(this,X,V),Z=null,Y=this.noneIdx;if(this.multiSelect&&(Y>-1&&I.indexOf(X,Y)>-1)){Z=T(this,X);}C.call(this,W,Z,X,U);},removeSelect:function(W,U,V){W=J(W);if(!W){return ;}C.call(this,null,T(this,W,V),W,U);},_set_selectedIndices:function P(W,c,U){if(this.selectedItems){this.selectedItems={};}var V=this.selectedIndices;if(V===c){return false;}if(!V){V={};this.selectedIndices=V;}if(!c){c={};}var a=this.selectedIndex,Z=[],b;for(b in V){if(!c[b]){b=parseInt(b,10);delete V[b];Z.push(b);if(a===b){this.selectedIndex=-1;this.selectedItem=null;}}}var f=[],d=this.items,Y=this.itemIdField,e;for(b in c){if(!V[b]){b=parseInt(b,10);V[b]=true;f.push(b);this.selectedIndex=b;e=this.selectedItem=d[b];if(this.selectedItems){this.selectedItems[e[Y]]=e;}}}if(U!==true){var X=[];for(b in c){if(V[b]){b=parseInt(b,10);X.push(b);}}C.call(this,f,Z,X);}return(f.length||Z.length);},_set_selectedIndex:function N(X,V,U){var W={};if(V>-1){W[V]=true;}return this._set_selectedIndices("selectedIndices",W,U);},_set_selectedItem:function E(X,W,V){var U=B.call(this,W);if((U<0)&&(W!==null&&W!==undefined)&&this.allowUnlistedValues&&this.items){this.set("items",this.items.concat(W));U=this.items.length-1;}return this._set_selectedIndex("selectedIndex",U,V);},_addSelections:function(U){return F(this,U);},_removeAll:function(){return D(this);}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var B=mstrmojo.hash;mstrmojo.Base=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.Base",init:function A(C){B.copy(C,this);if(this.postApplyProperties){this.postApplyProperties();}}});}());mstrmojo.DPIManager={classes:[],registerClass:function registerClass(B,C,D,A){this.classes.push({c:B,d:C,s:D,v:A});},setDPI:function(){var A=mstrMobileApp.getDeviceDPI();mstrmojo.array.forEach(this.classes,function(B){B.c.prototype.layoutConfig[B.d][B.s]=B.v[A]+"px";});this.classes=[];}};(function(){document.msCSSOMElementFloatMetrics=true;mstrmojo.requiresCls("mstrmojo.hash");var S=mstrmojo.hash,H="containerNode",G="auto",Q="px";var I={v:G,c:undefined,sv:G};function E(c,f,e){var g=this._layoutWidgets[f],k=c.slot||H,h=g.f,j=g.p,d=(h&&h[k]!==undefined),b=(j&&j[k]!==undefined);if(k&&((!e&&d)||b)){return d?h[k]:(g.x*parseInt(j[k],10)/100)+Q;}return c[(f==="h")?"height":"width"];}function K(g,d,b){if(g.ignoreLayout){return ;}var c=(d===G)||d==="NaNpx",f=(b===G)||b==="NaNpx";var e=g.getLayoutOffsets&&g.getLayoutOffsets();if(e){if(!c){d=(parseInt(d,10)-e.h)+Q;}if(!f){b=(parseInt(b,10)-e.w)+Q;}}if(g.setDimensions){g.setDimensions(d,b);}else{if(g.set){if(!c){g.set("height",d);}if(!f){g.set("width",b);}}}}function Z(e){var c=this.children,g,k;for(g=0,k=(c&&c.length)||0;g<k;g++){var d=c[g],l=d.slot||H;if(l){var j=E.call(this,d,"h",e),m=E.call(this,d,"w",e);this.setSlotDimensions(l,j,m);K(d,j,m);var b=E.call(this,d,"h",e),f=E.call(this,d,"w",e);if(b!==j||f!==m){K(d,b,f);}this.setSlotDimensions(l,b,f);}}this.afterLayout();}function B(){var c=this.children,b=this._layoutWidgets;S.forEach(this.slotNames,function(g,j){if(!g||this.skipsSlotLayout(j)){return ;}var f=(b.h&&b.h.getSlotSizeInfo(j,c))||I,d=(b.w&&b.w.getSlotSizeInfo(j,c))||I,e=f.c||d.c;mstrmojo.array.forEach(e,function(h){K(h,f.v,d.v);});this.setSlotDimensions(j,f.sv,d.sv);},this);this.afterLayout();}function D(c){var b=this.layoutConfig.xt?B:Z;b.call(this,c);}function T(j,e,g){var h=j.slot||H,f=e&&e.a;if(!f||f[h]===undefined){return ;}var b=this[h]["offset"+g],c=f[h];if(b===c){return ;}e.x-=(b-c);f[h]=b;}function J(b){this.beforeLayout();var c=this._layoutWidgets,d=b.src;T.call(this,d,c.h,"Height");T.call(this,d,c.w,"Width");D.call(this,true);}function O(d,h){if(!d){return null;}var b=this.children,r=h.toLowerCase(),j=parseInt(this[r],10),l=j,n={},p={},g={},c={},o={},k,m,e,s,q;for(q in d){if(!d.hasOwnProperty(q)){continue;}s=d[q];if(s.match(/px$/)){j-=parseInt(s,10);n[q]=s;}else{if(s.match(/%$/)){p[q]=s;}else{if(s.match(/all/)){o[q]=l;}else{g[q]=s;}}}}if(!S.isEmpty(g)&&!S.isEmpty(p)){for(k=0,m=(b&&b.length)||0;k<m;k++){e=b[k];q=e.slot||H;if(q&&g[q]&&!e.ignoreLayout){if(e.hasRendered){var f=this[q];c[q]=f.getBoundingClientRect?Math.round(f.getBoundingClientRect()[h.toLowerCase()]):f["offset"+h];j-=c[q];}else{c[q]=0;e.attachEventListener((e instanceof mstrmojo.Container)?"childrenRendered":"renderComplete",this.id,J);}}}}return{f:S.isEmpty(n)?undefined:n,p:S.isEmpty(p)?undefined:p,a:S.isEmpty(c)?undefined:c,n:S.isEmpty(o)?undefined:o,x:j,getSlotSizeInfo:function(AA,v){if(!d[AA]){return I;}var u=mstrmojo.array.filter(v,function(AC){var AB=AC.slot;return AB===AA||(AA===H&&!AB);}),y,z;var t=n[AA];if(t){z=t;}var x=p[AA];if(x){z=(this.x*parseInt(x,10)/100)+Q;}if(g[AA]){z=c[AA];if(z){z+=Q;}else{z=G;}y=G;}var w=o[AA];if(w){z=y=w+Q;}z=z||"0px";return{v:z,c:u,sv:y||z};}};}function R(c){var b=this.domNode;if(!b||!this.layoutConfig){return ;}b.style[c]=this[c];this.doLayout();}mstrmojo._HasLayout=mstrmojo.provide("mstrmojo._HasLayout",{_mixinName:"mstrmojo._HasLayout",height:"auto",width:"auto",ignoreLayout:false,beforeLayout:mstrmojo.emptyFn,afterLayout:mstrmojo.emptyFn,forceLayout:false,layoutConfig:null,init:function V(b){this._super(b);this.layoutConfig=S.clone(this.layoutConfig);},preBuildRendering:function C(){var d=this.cssText||"";var b=this.height;if(b&&b!==G){d+="height:"+this.height+";";}var c=this.width;if(c&&c!==G){d+="width:"+this.width+";";}this.cssText=d;return(this._super)?this._super():true;},postBuildRendering:function W(){this.doLayout();return this._super();},modifyLayoutConfig:function Y(d,c){var b=this.layoutConfig=this.layoutConfig||{};b.h=S.copy(d,b.h);b.w=S.copy(c,b.w);this.doLayout();},getLayoutOffsets:mstrmojo.emptyFn,set:function P(d,b){var c=this._super(d,b);if(d==="visible"&&this._pendingLayoutOnVisible){delete this._pendingLayoutOnVisible;this.doLayout();}return c;},doLayout:function A(){var b=this.layoutConfig;if(!b||(this.height===G&&this.width===G)){return ;}if(b.xt){if(!this.visible){this._pendingLayoutOnVisible=true;return ;}}this.beforeLayout();this._layoutWidgets={h:O.call(this,b.h,"Height"),w:O.call(this,b.w,"Width")};D.call(this,false);this.widgetResized();},browserResized:function F(b){this.setDimensions(b.h,b.w);return true;},onwidthChange:function N(){R.call(this,"width");},onheightChange:function M(){R.call(this,"height");},skipsSlotLayout:function(b){return false;},adjustParentDimensions:function L(){var c=this.parent,b=c&&c._layoutWidgets;if(b){T.call(c,this,b.h,"Height");T.call(c,this,b.w,"Width");}},setDimensions:function U(e,c){var d=(e===G)||e==="NaNpx",f=(c===G)||c==="NaNpx";if((!d&&parseInt(this.height,10)!==parseInt(e,10))||(!f&&parseInt(this.width,10)!==parseInt(c,10))||this.forceLayout){if(!d){this.height=e;}if(!f){this.width=c;}var b=this.domNode,g=b&&b.style;if(g){if(!d){g.height=e;}if(!f){g.width=c;}this.doLayout();}return true;}return false;},setSlotDimensions:function X(e,d,c){var b=this[e]&&this[e].style;if(!b){return ;}if(d!==G&&d!==undefined&&d!=="NaNpx"&&b.height!==d&&parseInt(d)>=0){b.height=d;}if(c!==G&&c!==undefined&&c!=="NaNpx"&&b.width!==c&&parseInt(c)>=0){b.width=c;}}});mstrmojo._HasLayout.getSlotSize=function a(e,f){var c=e&&e.prototype.layoutConfig;if(c){var d=c.h,b=c.w;return{h:(d&&d[f])||undefined,w:(b&&b[f])||undefined};}return null;};}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var O=/this\.([\w\.\[\]\'\"\-]+)/m,D=/this\./m,M=/mstrmojo\.all\[[\'\"]([\w]+)[\'\"]\]\.([\w\.\[\]\'\"\-]+)/m,R=/mstrmojo\.all\[/m,L=/mstrmojo\.all\.([\w]+)\.([\w\.\[\]\'\"\-]+)/m,B=/mstrmojo\.all\./m,C=/\[(\d+)\]/g,E=/\[\'([\w\-]+)\'\]/g,P=/\[\"([\w\-]+)\"\]/g,H=/([\[\]].*)/;mstrmojo.Binding=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.Binding",parent:null,source:null,destination:null,enabled:false,setter:"set",executing:0,init:function N(S){mstrmojo.hash.copy(S,this);mstrmojo.registry.add(this);},destroy:function F(){mstrmojo.publisher.clearSubscriptions(this.id);mstrmojo.registry.remove(this);},exec:function K(){this.executing++;var W=this._sourceFn;if(!W){var V=this.source;if(V!=null){if(typeof (V)=="string"){if(!(V.match("return "))&&!(V.match(/\;\s*\S/))){V="return "+V;}W=new Function(V);}else{if(typeof (V)=="function"){W=V;}}this._sourceFn=W;}}var S,X=this.parent;if(W){try{S=W.apply(X,[]);}catch(U){}}var T=this.setter,Y=this.destination;if(T==null){X[Y]=S;}else{if(typeof (T)=="string"){X[T](Y,S);}else{if(typeof (T)=="function"){T.apply(X,[Y,S]);}}}this.executing--;},enable:function A(){if(!this.enabled){this.exec();var T=this._chains;if(!T){this._parseChains();T=this._chains;}for(var S in T){this._attachChain(T[S]);}this.enabled=true;}},disable:function J(){if(this.enabled){var T=this._chains;if(T){for(var S in T){this._detachChain(T[S]);}}this.enabled=false;}},_chains:null,_parseChains:function(){this._chains={};var U=this._chains;var T=this.source;if(T&&(typeof (T)=="function")){T=T.toString&&T.toString();}if(!T){return ;}function S(b,e,V,X){var W=b,Z;while(Z=W.match(e)){var c=Z[0],a=c.length,d=true;c=c.replace(C,".$1").replace(E,".$1").replace(P,".$1").replace(H,"");for(var Y in U){if(Y.substr(0,a)===c){d=false;break;}else{if(c.indexOf(Y)===0){delete U[Y];}}}if(d){U[c]={host:(V==null)?null:Z[V],parts:Z[X].replace(C,".$1").replace(E,".$1").replace(P,".$1").replace(H,"").split(".")};}W=W.substr(Z.index+a);}}if(D.test(T)){S(T,O,null,1);}if(R.test(T)){S(T,M,1,2);}if(B.test(T)){S(T,L,1,2);}},_attachChain:function Q(S,U){if(!S.evt2idx){S.evt2idx={};}if(!S.idx2evt){S.idx2evt=[];}var d=S.evt2idx,g=S.idx2evt,Z=S.parts;var e=(U>=0)?U:0,b=this.id,W=mstrmojo.all,c=(U>0)?W[g[e-1].context][Z[e-1]]:(S.host?W[S.host]:this.parent),T=Z[e];var V=mstrmojo.array;while(c&&T){if(c.attachEventListener){var f=c[T+"_bindEvents"]||(T+"Change");if(typeof (f)=="string"){f=[f];}var Y=[];for(var a=0,X=f.length;a<X;a++){Y[a]=c.attachEventListener(f[a],b,"_callback");}for(var a=0;a<f.length;a++){d[c.id+"_"+f[a]]=e;}g[e]={context:c.id,evts:f,subs:Y};}c=c[T];T=S.parts[++e];}},_detachChain:function G(S,T){var U=mstrmojo.all,h=S.idx2evt,d=S.evt2idx,a=this.id;var Y=(T>-1)?T:0,b=h.length;if(Y<b){for(;Y<b;Y++){var Z=h[Y];if(!Z){break;}var W=Z.context,c=U[W],g=Z.evts;if(c&&c.detachEventListener){var k=Z.subs;for(var f=0,V=k.length;f<V;f++){c.detachEventListener(k[f]);}}h[Y]=null;for(var X=0,e=g.length;X<e;X++){delete d[W+"_"+g[X]];}}}},_callback:function I(T){this.exec();if(!T||!T.name||!T.src){return ;}var U=T.src.id+"_"+T.name,W=this._chains;for(var X in W){var V=W[X],S=V.evt2idx[U];if(S!=null){this._detachChain(V,S+1);this._attachChain(V,S+1);}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.registry");mstrmojo._PagingList=mstrmojo.provide("mstrmojo._PagingList",{usePaging:false,page:0,totalPages:1,_set_page:function(B,A){if(this.page!==A&&this.usePaging){if(A>=0&&A<this.totalPages){this.page=A;}return true;}return false;},_inScroll:false,_inPaging:false,onscroll:function(){if(this.usePaging&&!this._inPaging){this._inScroll=true;this.set("page",this.listMapper.whichPage(this));this._inScroll=false;}if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.registry","mstrmojo.array","mstrmojo.publisher");var D=mstrmojo.registry,K=mstrmojo.array,I=mstrmojo.publisher;function G(Q,R){if(R){R.parent=Q;var P=D.ref(R);if(R!==P){delete R.parent;}return P;}return null;}function L(Q,R){var P=R.alias;if(P!==null&&P!==""){Q[P]=R;}}function N(Q,R){var P=R.alias;if(R.parent===Q){delete R.parent;}if((P!==null&&P!=="")&&(Q[P]===R)){delete Q[P];}}function A(T,Q){var P=Q&&Q.length,S,R;if(P){S=[];for(R=0;R<P;R++){var U=G(T,Q[R]);if(!U){continue;}S.push(U);L(T,U);}}return S;}mstrmojo._HasChildren=mstrmojo.provide("mstrmojo._HasChildren",{_meta_usesSuper:false,children:null,postCreateChildren:mstrmojo.emptyFn,onaddChild:null,onremoveChild:null,initChildren:function F(){var P="children",Q=this[P];if(!Q){return ;}this[P]=null;this._set_children(P,Q,true);this.postCreateChildren();},_set_children:function E(S,Q,P){var R=this.children;if(Q!==R){if(R){this.removeChildren(null,P);}this.addChildren(Q,0,P);}return false;},destroyChildren:function C(S){var R=this.children,P=(R&&R.length)||0,Q;if(P){for(Q=P-1;Q>-1;Q--){var T=R[Q];if(T&&T.destroy){T.destroy(S);if(!S){N(this,T);}}}if(!S){R.length=0;}}},invalidateChildren:function B(){mstrmojo.array.forEach(this.children,function(P){P.invalidate();});},invalidate:function H(){this.invalidateChildren();},addChildren:function O(U,Q,R){if(!U){return U;}var T=U.constructor===Array,P=A(this,T?U:[U]);if(P&&P.length){var S=this.children||[];if(Q===null||Q===undefined){Q=S.length;}this.children=K.insert(S,Q,P);if(!R&&(this.onaddChild||I.hasSubs(this.id,"addChild"))){this.raiseEvent({name:"addChild",value:P,index:Q});}}return T?P:(P&&P[0]);},removeChildren:function J(V,R){var T=this.children,U=V?[V]:(this.children||[]).concat(),Q=U.length,P=-1,S;if(Q){for(S=Q-1;S>-1;S--){N(this,U[S]);}if(V){P=K.removeItem(T,V);}else{if(T){T.length=0;P=0;}}if(!R&&(this.onremoveChild||I.hasSubs(this.id,"removeChild"))){this.raiseEvent({name:"removeChild",value:U,index:P});}}return P;},removeAndDestroyChild:function M(R,P,Q){if(R){if(R.parent!==this){throw"Unable to remove an object that is not in the children collection.";}this.removeChildren(R,P);R.destroy(Q);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.registry","mstrmojo.hash");var A=false,D="mstrmojo.Binding",I="bindings",H=mstrmojo.registry;function B(K){var L;for(L in K){var J=K[L];if(J&&J.disable){J.destroy();}}}function C(K,M){if(!A){mstrmojo.requiresCls(D);A=true;}var N;for(N in K){var J=K[N];if(J===null||J===undefined){continue;}var L=typeof J;if(L==="string"||L==="function"){J={destination:N,source:J,scriptClass:D};}J.parent=M;J=H.ref(J,{skipLoadChecks:true});K[N]=J;J.enable();}}mstrmojo._HasBindings=mstrmojo.provide("mstrmojo._HasBindings",{_meta_usesSuper:false,initBindings:function E(){this.hasInitBindings=true;var K=mstrmojo.hash.copy(this[I]);if(K){delete this[I];this._set_bindings(I,K);if(this.postCreateBindings){this.postCreateBindings();}}var M=this.children,J=(M&&M.length)||0;if(J){var L;for(L=0;L<J;L++){var N=M[L];if(N&&N.initBindings){N.initBindings();}}}},destroyBindings:function G(){var J=this.bindings;if(J){B(J);delete this.bindings;}},_set_bindings:function F(L,J){var K=this[I];if(J!==K){if(K){B(K);}this[I]=J;if(J){C(J,this);}return true;}return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.string","mstrmojo.array");var M=mstrmojo.locales,I=mstrmojo.string,P=window.mstrConfig,F=mstrmojo.array,C=P.units,R={CM:1,IN:2,MM:3,PT:4,PC:5,PX:6},A={1:"cm",2:"in",3:"mm",4:"pt",5:"pc",6:"px"},E={DEFAULT:-2,FIXED:0,CURR:1,PERCENT:4,FRACTION:5,SCIENTIFIC:6,GENERAL:9};var G=96;String.prototype.reverse=function(){var U="",T;for(T=this.length;T>0;--T){U+=this.charAt(T-1);}return U;};function K(T,V){T=T||"";V=V||T.match(/\".+?\"/g)||[];for(var U=0;U<V.length;U++){T=T.replace(V[U],V[U].substring(1,V[U].length-1).replace(/\$/g,"$$$$"));}return T;}function S(Y){var T=86400000,X=new Date(1900,0,1,0,0,0,0),U=Math.floor(Y)-1,W=Y-U-1;if(Y>=59){U--;}var V=new Date(X.getTime()+(U*T));V.setTime(V.getTime()+W*T+500);return V;}function H(X,e,g){var Y={"d+":X.getDate(),"h+|H":X.getHours(),"s+":X.getSeconds()},T=M.datetime,Z;if(/(y+)/.test(e)){var W=X.getFullYear().toString(),d=RegExp.$1,V=d.length===2,U=W.length;e=e.replace(d,W.substr(V?U-2:0,V?2:U));}if(/(^\[h\])/.test(e)&&g){e=e.replace(RegExp.$1,""+(Math.floor(g*24)));}if(/(\"?:\"?mm)/.test(e)){var a=X.getMinutes();e=e.replace(RegExp.$1,":"+(RegExp.$1.length===1?a:("00"+a).substr(a.toString().length)));}if(/(AM\/PM)/.test(e)){var f=Y["h+"],b=f>11;Y["h+"]=f-(b?12:0);e=e.replace(RegExp.$1,b?"PM":"AM");}for(Z in Y){if(new RegExp("("+Z+")").test(e)){e=e.replace(RegExp.$1,RegExp.$1.length===1?Y[Z]:("00"+Y[Z]).substr((Y[Z].toString()).length));}}if(/(mmmm)/.test(e)){e=e.replace(RegExp.$1,T.MONTHNAME_FULL[X.getMonth()]);}else{if(/(mmm)/.test(e)){e=e.replace(RegExp.$1,T.MONTHNAME_SHORT[X.getMonth()].substr(0,3));}else{if(/((m|M)+)/.test(e)){var c=(X.getMonth()+1).toString();e=e.replace(RegExp.$1,RegExp.$1.length===1?c:("00"+c).substr(c.length));}}}return K(e);}function N(U,X){var V=0,T=X.length,W=0;for(;V<T;V++){if(X[V]==="0"){W++;}else{if(X[V]==="#"){if(W<U){W++;}}else{continue;}}}return W;}mstrmojo.num=mstrmojo.provide("mstrmojo.num",{isInt:function D(T){var W=this.getThousand(),V=new RegExp("^(-)?[0-9]{1,3}(\\"+W+"[0-9]{3})*$"),U=new RegExp("^(-)?[0-9]+$");return(String(T).indexOf(W)&&V.test(T))||U.test(T);},isNumeric:function O(X){var W=this.getDecimal(),Y=this.getThousand(),V=new RegExp("^(-)?[0-9]{1,3}(\\"+Y+"[0-9]{3})*(\\"+W+"[0-9]+)?$"),U=new RegExp("^(-)?[0-9]*(\\"+W+")?[0-9]+$"),T=new RegExp("^(-)?[0-9]{1}(\\"+W+")[1-9]+[eE]{1}[-]{0,1}[0-9]+$");return(String(X).indexOf(Y)&&V.test(X))||U.test(X)||T.test(X);},isBigDecimal:function(U){if(!U){return false;}var T=String(U).match(/^#([^#]+)#$/);if(!T||T.length<=1){return false;}var V=T[1];return this.isNumeric(V);},parseInteger:function L(T,U){if(!this.isInt(T)){return Number.NaN;}return parseInt(this.toString(T,true),U);},parseNumeric:function B(T){if(!this.isNumeric(T)){return Number.NaN;}return parseFloat(this.toString(T,true));},parseBigDecimal:function(T){return String(T).match(/^#(.+)#$/)[1];},inNumericRange:function Q(U,V,T){U=this.parseNumeric(U);T=(T!=null)?this.parseNumeric(this.toLocaleString(T)):Number.NaN;V=(V!=null)?this.parseNumeric(this.toLocaleString(V)):Number.NaN;if(T!=Number.NaN&&(U>T||isNaN(U))){return 1;}if(V!=Number.NaN&&(U<V||isNaN(U))){return -1;}return 0;},convertToUSUnits:function(W,V,U){var T=W;V=V||C;switch(parseInt(V,10)){case R.CM:T=parseFloat(this.toString(W))/2.54+"";break;case R.MM:T=parseFloat(this.toString(W))/25.4+"";break;case R.PT:T=parseFloat(this.toString(W))/72+"";break;case R.PC:T=parseFloat(this.toString(W))/6+"";break;case R.PX:T=parseFloat(this.toString(W))/G+"";break;}return U?T:this.toLocaleString(T);},convertToLocalUnits:function(W,V,U){var T;V=V||C;switch(parseInt(V,10)){case R.CM:T=(parseFloat(this.toString(W))*2.54).toFixed(4)+"";break;case R.MM:T=(parseFloat(this.toString(W))*25.4).toFixed(4)+"";break;case R.PT:T=(parseFloat(this.toString(W))*72).toFixed(4)+"";break;case R.PC:T=(parseFloat(this.toString(W))*6).toFixed(4)+"";break;case R.PX:T=(parseFloat(this.toString(W))*G)+"";break;default:T=parseFloat(this.toString(W)).toFixed(4)+"";}return U?T:this.toLocaleString(T);},convertUnits:function(U,V,T){return this.convertToLocalUnits(this.convertToUSUnits(T,U,true),V,true);},toLocaleString:function(T){return(T+"").replace(".",this.getDecimal());},toString:function(V,T){if(T===true){var U=this.getThousandSepRegex();if(U){V=String(V).replace(U,"");}}return String(V).replace(this.getDecimal(),".");},getThousandSepRegex:function(){if(this.thousandSeparatorRegex==null){this.thousandSeparatorRegex=new RegExp(this.getThousand().replace(/(\W){1}/g,"\\$1"),"g");}return this.thousandSeparatorRegex;},addSeparators:function(V,U){var T=U;if(U=="."||U=="*"||U=="\\"){T="\\"+U;}return V.reverse().replace(/(\d{3})/g,"$1"+U).reverse().replace(new RegExp("^(-)?"+T),"$1");},addSeparators2:function(W,V){var T=W,U=/(\d+)(\d{3})/;while(U.test(T)){T=T.replace(U,"$1"+V+"$2");}return T;},format:function(X,W,a,T){var Z="",Y=(W>0)?".":"",U=[];a=(a)?a:"";for(var V=0;V<W;V++){U.push("0");}U=U.join("");switch(X){case E.GENERAL:Z="0.00";break;case E.PERCENT:Z="0"+Y+U+"%";break;case E.SCIENTIFIC:Z="0"+Y+U+"E+00";break;default:Z='"'+a+'"#,##0'+Y+U;}return this.formatByMask(Z,T);},getDecimalLength:function J(V){var T=V.indexOf("."),W=0;if(T!==-1){var U=V.substr(T+1,V.length).match(/\d+/);if(U&&U.length>0){W=U[0].length;}}return W;},formatByMask:function(AE,AW){var y,l="",r,AZ=false;if(isNaN(AW)){y=new Date(AW);if(isNaN(y)){return AW;}r=true;}if(AE==="General"){var AJ=String(parseFloat(AW).toFixed(2));l=AJ.split(".");if(l.length===2){return l.join(this.getDecimal());}return AJ;}var q=String(AE).split(";"),W=q[0],g="\u00A4",AP=/"[^"]*"/g,k=(AE&&AE.replace(AP,g).replace(/\[.*\]/g,g))||"",AV=["m","y","d","h","s"],AK=false;F.forEach(AV,function(j){AK=AK||k.indexOf(j,0)!==-1;});if(AK){if(window.SSF&&!AZ){l=this.formatBySSF(AE,AW);AZ=true;}if(l!==""){return l;}else{return H(r?y:S(AW),AE,AW);}}var AI=W.indexOf("E+"),c=W.indexOf("%"),u=W.match(/\".+?\"/g),AB=W.match(/\[([=<>]*)(-?\d+\.?\d*)\]/),w=W.indexOf("?/?")>-1,AC=(AI!=-1)?E.SCIENTIFIC:((c!=-1)?E.PERCENT:((u&&!AB)?E.CURR:w?E.FRACTION:E.FIXED)),p="",AR="",n=false,U=new String(AW),b=parseFloat(AW)||this.parseNumeric(AW);if(u){if(W.match(/\[\$.+?\]/g)){for(var d=0;d<u.length;d++){W=W.replace(u[d],u[d].substring(1,u[d].length-1));if(u[d].match(/\[\$.+?\]/g)){u[d]=u[d].replace(/\[\$.+?\]/g,u[d][u[d].indexOf("[$")+2]);}}W=W.replace(/\[\$.+?\]/g,'"#"'.replace("#",W[W.indexOf("[$")+2]));}p=K(W,u);p=p.replace(W.replace(/\".+?\"/g,""),g);}if(b<0){U=U.substring(1,U.length);b=-b;n=true;if(q.length>1){var Z=q[1].replace(/\[.*\]/,"");AR=K(Z.replace(q[0],g));}}var h=this,a=function(v,j){var m=j&&j.replace(g,v);if(j&&(m===j)&&window.SSF){if(AZ){return v;}else{AZ=true;return h.formatBySSF(j,v);}}return(j)?m:"-"+v;};if(AC===E.FRACTION){var AN,AM,AU,o=10,x,t=0,AG,AQ,X,V=false,AD;if(AE.indexOf("# ")>-1){V=true;}for(AN=5;AN>0;AN--){AD="/";for(AM=0;AM<AN;AM++){AD+="?";}if(AE.indexOf(AD)>-1){for(AM=1;AM<AN;AM++){o*=10;}break;}}if(V){t=Math.floor(Number(b));b-=t;}AQ=o/2;AU=-1;AG=b*o;for(AN=o-1;AN>=2;AN--){X=(AG*AN)/o;X=X-Math.floor(X);X=X*o;if(Math.abs(X-o)<X){X=Math.abs(X-o);}X=X/AN;if(X<AQ){AQ=X;AU=AN;}else{if((X==AQ)&&(X==0)){AQ=X;AU=AN;}}}x=Math.round(AU*AG/o);for(AN=AU;AN>=2;AN--){if((x%AN==0)&&(AU%AN==0)){x=x/AN;AU=AU/AN;break;}}if(AU==o){AU=1;x=0;}if(x==0){AU=1;}if(x==AU){if(V){l=""+(t+1);}else{l="1";}}else{if(V&&t>0){if(x==0){l=t;}else{l=t+" "+x+"/"+AU;}}else{if(x==0){l="0";}else{l=x+"/"+AU;}}}if(n){l=a(l,AR);}}else{if(AC==E.SCIENTIFIC){if(b!=0){var AX=Math.floor(Math.log(b)/Math.LN10),AL=b/Math.pow(10,AX),AY=W.substring(0,AI),f=AY.indexOf("."),AF=W.length-W.indexOf("E+")-(""+Math.abs(AX)).length-2,AN,T=AX<0;AX=Math.abs(AX);for(AN=0;AN<AF;AN++){AX="0"+AX;}l+=Number(AL).toFixed((f!=-1)?AY.length-f-1:0);l=((n)?a(l,AR):l)+"E"+(T?"-":"+")+AX;}else{l="0";}}else{if(AC==E.PERCENT){W=W.substring(0,W.length-1);U=String(b*100);}var f=W.indexOf("."),Y=0,AT,s=f>=0?W.substring(0,f):W,z=f>=0?W.substring(f+1,W.length):"",e=false;if(s.match(/[#0\?],$/)){b/=1000;U=String(b);}else{if(z.match(/^[#0]*,/)){var AA=0;e=true;while(AA<z.length){if(z[AA]==="0"||z[AA]==="#"){AA++;}else{if(z[AA]===","){b/=1000;U=String(b);AA++;}else{break;}}}}}AT=this.getDecimalLength(U);if(f!=-1){Y=N(AT,W.substr(f+1,W.length));}l=String((+(Math.round(+(U.indexOf("e")>0?String(parseFloat(U).toFixed(Math.min(Y+2,20))):U+"e"+Math.min(Y,20)))+"e"+-Math.min(Y,20))).toFixed(Math.min(Y,20)));if(AC===E.FIXED){if(/[\[\]><=A-Za-z]|,{2}/.test(W)&&window.SSF){var AO=this.formatBySSF(AE,AW);l=AO!==""?AO:l;AZ=true;}}var AS=l.split(".");var AH=W.replace(/"[^"]*"/g,"").match(/[#\d]+[^\.\d#]+[#\d]+/);if(AH!==null){if(AC===E.CURR){AS[0]=(this.formatBySSF((e?AH[0]&&AH[0].trim():AH.input&&AH.input.trim()),parseFloat(AS[0]))||"").split(".")[0];AZ=true;}if(AS[0].indexOf(",")>=0){AS[0]=AS[0].replace(/,/g,this.getThousand());}else{if(!(this.getThousand()===","&&AS[0].search(this.getThousand())>0)){AS[0]=this.addSeparators2(AS[0],this.getThousand());}}}l=AS.join(this.getDecimal());if(AC==E.CURR){l=p.replace(g,l);if(l===p&&window.SSF){l=this.formatBySSF(AE,AW,l);AZ=true;}}if(AC==E.PERCENT){l+="%";}if(n){l=a(l,AR);}}}return l;},formatBySSF:function(V,U,W){var T=(W!==undefined&&W!==null)?W:"";if(typeof U==="string"){U=parseFloat(U);}try{T=window.SSF.format(V,U);}catch(X){if(window.mstr_profile){window.mstr_profile.log(X);}T=(W||U).toString();}return T;},validateFormat:function(T){var U=true,V=String(T).split(";");if(V[1]&&V[1].indexOf(V[0])<0){U=false;}return U;},generateUniqueID:function(T){var V="0123456789ABCDEF".split(""),W=[];for(var U=0;U<T;U++){W[U]=V[0|Math.random()*16];}return W.join("");},countOfDecimals:function(U,V){var T=String(U);return T.length-(T.indexOf(V!==undefined?V:this.getDecimal())+1);},getThousand:function(){return mstrmojo.locales.number.THOUSANDSEPARATOR;},getDecimal:function(){return mstrmojo.locales.number.DECIMALSEPARATOR;}});mstrmojo.num.UNIT=R;mstrmojo.num.UNIT_SYMBOL=A;})();(function(){mstrmojo.requiresCls("mstrmojo.locales");var X=function(){return mstrmojo.locales.datetime;},L=mstrmojo.string;mstrmojo.date=mstrmojo.provide("mstrmojo.date",{monthNumbers:{Jan:1,Feb:2,Mar:3,Apr:4,May:5,Jun:6,Jul:7,Aug:8,Sep:9,Oct:10,Nov:11,Dec:12},REGEXPS:{DATES:{},TIMES:{}},CACHE:{PARSEDATE:{CONTAINS:{},EQUALS:{}},PARSETIME:{CONTAINS:{},EQUALS:{}}},now:Date.now||function D(){return new Date().getTime();},isDate:function Y(b,f,a){var d=this.parseDate(b,a);var e=!!(d&&this.doesDateExist(d.month,d.day,d.year));if(f){if(e){var c=this.formatDateInfo(d,X().DATEOUTPUTFORMAT);if(a){return{match:d.match,formatted:c};}return c;}return null;}return !!e;},formatDateInfo:function R(d,f){if(!f){return"";}var a=d.day,e=d.month,c=d.year;var b=f.replace(/dd/g,this.formatInteger(a,2)).replace(/d/g,Number(a)).replace(/yyyy/g,Number(c)).replace(/yy/g,this.formatInteger(Number(c)%100,2)).replace(/MMM/g,"~~~~").replace(/MM/g,"@@").replace(/M/g,"^").replace(/MMMM/g,X().MONTHNAME_FULL[Number(e)-1]).replace(/\~\~\~\~/g,X().MONTHNAME_SHORT[Number(e)-1]).replace(/\@\@/g,this.formatInteger(e,2)).replace(/\^/g,Number(d.month));return b;},parseDate:function Z(l,f,j){if(l==null){return false;}if(typeof l!=="string"){l=String(l);}l=L.trim(l);var a=this.CACHE.PARSEDATE[f?"CONTAINS":"EQUALS"],c=a[l];if(c||(c===null)){return c;}var b=null;var h;if(j){h=[j];}else{h=[].concat(X().DATEINPUTFORMATS);h.unshift(X().DATEOUTPUTFORMAT);}var d,e;for(d=0,e=h.length;d<e;d++){var g=this._buildRegExp4DateFormat(h[d]),k=g&&l.match(f?g.reContains:g.reEquals);if(k){b={match:k[0],year:g.yearIndex&&this.fourDigitYear(k[g.yearIndex]),day:g.dayIndex&&parseInt(Number(k[g.dayIndex]),10),month:g.monthIndex&&this.numericMonth(k[g.monthIndex])};break;}}a[l]=b;return b;},isTime:function I(b,e,a){var f=this.parseTime(b,a);var d=!!(f&&this.doesTimeExist(f.hour,f.min,f.sec));if(e){if(d){var c=this.formatTimeInfo(f,X().TIMEOUTPUTFORMAT);if(a){return{match:f.match,formatted:c};}return c;}return null;}return !!d;},parseTime:function J(m,f,k){if(m==null){return false;}if(typeof m!=="string"){m=String(m);}m=L.trim(m);var a=this.CACHE.PARSETIME[f?"CONTAINS":"EQUALS"],c=a[m];if(c||(c===null)){return c;}var b=null;var j;if(k){j=[k];}else{j=[].concat(X().TIMEINPUTFORMATS);j.unshift(X().TIMEOUTPUTFORMAT);}var d,e;for(d=0,e=j.length;d<e;d++){var h=this._buildRegExp4TimeFormat(j[d]),l=h&&m.match(f?h.reContains:h.reEquals);if(l){var g=h.ampmIndex&&l[h.ampmIndex];b={match:l[0],hour:h.hourIndex&&this.capitalHour(l[h.hourIndex],g),min:h.minIndex&&parseInt(Number(l[h.minIndex]),10),sec:h.secIndex&&parseInt(Number(l[h.secIndex]),10)};break;}}a[m]=b;return b;},formatTimeInfo:function S(d,b){if(!b){return"";}var c=!(Number(d.hour)%12)?12:(Number(d.hour)%12),a=b.replace(/HH/g,this.formatInteger(d.hour,2)).replace(/H/g,Number(d.hour)).replace(/hh/g,this.formatInteger(c,2)).replace(/h/g,c).replace(/mm/g,this.formatInteger(Number(d.min)||0,2)).replace(/m/g,Number(d.min)||0).replace(/ss/g,this.formatInteger(Number(d.sec)||0,2)).replace(/s/g,Number(d.sec)||0).replace(/a/g,(Number(d.hour)<12)?X().AM_NAME:X().PM_NAME).replace(/tt/g,(Number(d.hour)<12)?X().AM_NAME:X().PM_NAME).replace(/AM\/PM/g,(Number(d.hour)<12)?X().AM_NAME:X().PM_NAME);return a;},doesTimeExist:function G(f,b,e){var d=parseInt(f,10);if(d>=0&&d<=23){var a=parseInt(b,10);if(a>=0&&a<=59){if(!e){return true;}var c=parseInt(e,10);if(c>=0&&c<=59){return true;}}}return false;},capitalHour:function C(a,b){a=parseInt(Number(a),10);if(b&&(b.match(X().AM_NAME)||b.match(/AM/i))){return a%12;}if(b&&(b.match(X().PM_NAME)||b.match(/PM/i))){return 12+(a%12);}return a;},getTimeStamp:function O(){var b=new Date();var a=[b.getMonth()+1,b.getDate(),b.getFullYear()];var e=[b.getHours(),b.getMinutes(),b.getSeconds()];var d=(e[0]<12)?"AM":"PM";e[0]=(e[0]<12)?e[0]:e[0]-12;e[0]=e[0]||12;for(var c=1;c<3;c++){if(e[c]<10){e[c]="0"+e[c];}}return a.join("-")+" "+e.join("")+" "+d;},isDateAndOrTime:function V(a,b){return this.isDateTime(a,b)||this.isDate(a,b)||this.isTime(a,b);},isDateTime:function B(k,a){var e=this.parseDateAndOrTime(k),h=e&&e.date,d=e&&e.time,g=!!h&&!!d&&this.doesDateExist(h.month,h.day,h.year)&&this.doesTimeExist(d.hour,d.min,d.sec);if(a){if(g){var b=this.formatDateInfo(h,X().DATEOUTPUTFORMAT),c=this.formatTimeInfo(d,X().TIMEOUTPUTFORMAT),j=k.indexOf(h.match),f=k.indexOf(d.match);return(f<j)?c+" "+b:b+" "+c;}return null;}return !!g;},parseDateAndOrTime:function Q(b,a,f){var c=this.parseDate(b,true,a);var d=L.trim((c&&c.match)?b.replace(c.match,""):b),e=this.parseTime(d,false,f);if(!c&&!e){return null;}return{date:c,time:e};},inDateTimeRange:function P(c,e,h){var b=this.parseDateAndOrTime(c),f=b&&b.date,j=b&&b.time;if(!f&&!j){return 0;}if(e!=null){var d=this.parseDateAndOrTime(e);if(f&&d&&d.date){var k=this.compareDate(f,d.date);if(k<0){return -1;}if(k==0){if(j&&d.time&&(this.compareTime(j,d.time)<0)){return -1;}}}}if(h!=null){var a=this.parseDateAndOrTime(h);if(f&&a&&a.date){var g=this.compareDate(f,a.date);if(g>0){return 1;}if(g==0){if(j&&a.time&&(this.compareTime(j,a.time)>0)){return 1;}}}}return 0;},compareDate:function A(c,a){if(c===a){return 0;}var d=typeof c==="string"?this.parseDate(c):c,b=typeof a==="string"?this.parseDate(a):a;if(!d){return -1;}if(!b){return 1;}return(d.year-b.year)||(d.month-b.month)||(d.day-b.day)||0;},compareTime:function K(b,a){if(b===a){return 0;}var d=typeof b==="string"?this.parseTime(b):b,c=typeof a==="string"?this.parseTime(a):a;if(!d){return -1;}if(!c){return 1;}return(d.hour-c.hour)||(d.min-c.min)||(d.sec-c.sec)||0;},compareDateTime:function U(b,a){return this.compareDate(b,a)||this.compareTime(b,a);},compareDateAndOrTime:function E(h,f){if(h===f){return 0;}var b=typeof h==="string"?this.parseDateAndOrTime(h):h,a=typeof f==="string"?this.parseDateAndOrTime(f):f;if(!b){return -1;}if(!a){return 1;}var g=b.date,e=a.date,d=b.time,c=a.time;return this.compareDate(g,e)||this.compareTime(d,c);},_buildRegExp4DateFormat:function N(c){if(!c){return null;}var e=this.REGEXPS.DATES[c];if(!e){if(!this.REGEXPS.MONTHNAME_FULL){this.REGEXPS.MONTHNAME_FULL=X().MONTHNAME_FULL.join("|");this.REGEXPS.MONTHNAME_SHORT=X().MONTHNAME_SHORT.join("|");}e=this.REGEXPS.DATES[c]={};e.formatStr=c;var b=e.reStr=c.replace(/([^M|d|y|\s])/g,"\\$1").replace(/dd/g,"~~~~").replace(/d/g,"(\\d{1,2})").replace(/\~\~\~\~/g,"(\\d\\d)").replace(/yyyy/g,"(\\d\\d\\d\\d)").replace(/yy/g,"(\\d\\d)").replace(/MMMM/g,"@@@@").replace(/MMM/g,"@@@").replace(/MM/g,"(\\d\\d)").replace(/M/g,"(\\d{1,2})").replace("@@@@","("+this.REGEXPS.MONTHNAME_FULL+")").replace("@@@","("+this.REGEXPS.MONTHNAME_SHORT+")");e.reEquals=new RegExp("^"+b+"$");e.reContains=new RegExp("^"+b+"\\b");var f=[{key:"monthIndex",index:c.indexOf("M")},{key:"dayIndex",index:c.indexOf("d")},{key:"yearIndex",index:c.indexOf("y")}];f.sort(function(h,g){return h.index-g.index;});var a=1,d;for(d=0;d<3;d++){e[f[d].key]=f[d].index>-1?a++:null;}}return e;},_buildRegExp4TimeFormat:function F(d){if(!d){return null;}var f=this.REGEXPS.TIMES[d];if(!f){if(!this.REGEXPSTR_AMPM){this.REGEXPSTR_AMPM=[X().AM_NAME,X().PM_NAME,String(X().AM_NAME).toLowerCase(),String(X().PM_NAME).toLowerCase()].join("|");}f=this.REGEXPS.TIMES[d]={};f.formatStr=d;var c=d.replace(/\'\'/g,'"');var g=c.match(/\'(.+?)\'/g);c.replace(/\'(.+?)\'/g,"*");c=c.replace(/([^H|h|m|s|z|Z|a|t|\s|A|P|M|\/])/g,"\\$1").replace(/HH|hh/g,"(\\d\\d)").replace(/H|h/g,"(\\d{1,2})").replace(/mm/g,"(\\d\\d)").replace(/m/g,"(\\d{1,2})").replace(/ss/g,"(\\d\\d)").replace(/s/g,"(\\d{1,2})").replace(/a/g,"("+this.REGEXPSTR_AMPM+")").replace(/AM\/PM/,"("+this.REGEXPSTR_AMPM+")").replace(/tt/g,"("+this.REGEXPSTR_AMPM+")").replace(/z|Z/g,"(.+?)");var e,a;for(e=1,a=(g&&g.length)||0;e<a;e++){c=c.replace(/\*/,g[e]);}c=c.replace(/\"/g,"'");f.reEquals=new RegExp("^"+c+"$");f.reContains=new RegExp(c);var h=[{key:"hourIndex",index:d.search(/h|H/)},{key:"minIndex",index:d.indexOf("m")},{key:"secIndex",index:d.indexOf("s")},{key:"ampmIndex",index:d.search(/tt|a|AM\/PM/)},{key:"zoneIndex",index:d.search(/z|Z/)}];h.sort(function(k,j){return k.index-j.index;});var b=1;for(e=0;e<5;e++){f[h[e].key]=h[e].index>-1?b++:null;}}return f;},doesDateExist:function M(d,a,b){var c=new Date(b,d-1,a);return b==c.getFullYear()&&d==c.getMonth()+1&&a==c.getDate();},fourDigitYear:function T(b){b=parseInt(Number(b),10);if(!isNaN(b)){var a=(X().TWODIGITYEARSTART%100)||0;if(b>=0&&b<=a){b=2000+b;}else{if(b>a&&b<100){b=1900+b;}}}return b;},numericMonth:function W(e){var d=parseInt(Number(e),10),c=mstrmojo.array;if(!isNaN(d)){return d;}var a=(e&&e.length)||0,b=-1;if(a){if(a<=3){b=c.indexOf(X().MONTHNAME_SHORT,e);}if(b===-1){b=c.indexOf(X().MONTHNAME_FULL,e);}}return b+1;},formatInteger:function H(c,b){var f=String(c),e=Math.max(b-f.length,0);if(e>0){var a=[f],d;for(d=1;d<=e;d++){a.push("0");}f=a.reverse().join("");}return f;},getFirstDateOfMonth:function(b,a){return new Date(b,a-1,1);},getDateObject:function(g,a,f,c,e,b){g=g||0;a=a||1;f=f||1;c=c||0;e=e||0;b=b||0;return new Date(g,a-1,f,c,e,b);},getDateFromDateInfo:function(a){return this.getDateObject(a.date&&a.date.year,a.date&&a.date.month,a.date&&a.date.day,a.time&&a.time.hour,a.time&&a.time.min,a.time&&a.time.sec);},getDateJson:function(a){return{year:a.getFullYear(),month:a.getMonth()+1,day:a.getDate(),hour:a.getHours(),min:a.getMinutes(),sec:a.getSeconds()};},isLeapYear:function(a){return !(a%400)||(!(a%4)&&!!(a%100));},getDaysOfMonth:function(c,a){var b=[31,28,31,30,31,30,31,31,30,31,30,31];if(a==2&&this.isLeapYear(c)){return 29;}return b[a-1];},getPreMonth:function(b,a){if(a===1){return{y:b-1,m:12};}return{y:b,m:a-1};},getNextMonth:function(b,a){if(a===12){return{y:b+1,m:1};}return{y:b,m:a+1};}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.locales");var c=mstrmojo.array,P=mstrmojo.meta.TP,G=mstrmojo.meta.STP,O=mstrmojo.hash,F={ANDOR:14,MQ:10,MC:12,AQ:2,AL:6,AC:9,AE:5,F:13,R:21,B:20,XML:1,RLS:15},B={};var W;for(W in F){B[F[W]]=true;}var a={};a[F.AQ]="a";a[F.AL]="a";a[F.AC]="a";a[F.AE]="a";a[F.MQ]="m";a[F.MC]="m";a[F.F]="f";a[F.R]="r";a[F.XML]="p";a[F.ANDOR]="nds";var K={};K[F.MQ]=["not","m","fn","fnt","cs","dmy","idcsi"];K[F.MC]=["not","m","fn","fnt","m2","m3","p","dmy","idcsi"];K[F.AE]=["not","a","fn","es","a2","fm2","p"];K[F.AQ]=["not","a","fm","fn","cs"];K[F.AL]=["not","a","fm","fn","cs"];K[F.AC]=["not","a","fm","a2","fm2","a3","fm3","fn","cs"];K[F.R]=["not","r"];K[F.F]=["not","f"];K[F.XML]=["not","n","p"];K[F.ANDOR]=["not","node","nds","fn"];var M={};M[F.MQ]="METRIC_FNS";M[F.MC]="METRIC_FNS";M[F.AQ]="FORM_FNS";M[F.AL]="FORM_FNS";M[F.AC]="FORM_FNS";M[F.AE]="ELEM_FNS";var N={FILTER:1,REPORT:3,METRIC:4,FOLDER:8,PROMPT:10,FUNCTION:11,ATTR:12,FACT:13,DIM:14,FORM:21,ROLE:43,CONS:47},b={FILTER:256,CUSTOMGROUP:257,PROMPT:2560,PROMPT_BOOLEAN:2561,PROMPT_LONG:2562,PROMPT_STRING:2563,PROMPT_DOUBLE:2564,PROMPT_DATE:2565,PROMPT_OBJECTS:2566,PROMPT_ELEMENTS:2567,PROMPT_EXPRESSION:2568,PROMPT_EXPRESSION_DRAFT:2569,PROMPT_DIMTY:2570,PROMPT_BIGDECIMAL:2571,REPORT_GRID:768,REPORT_GRAPH:769,REPORT_ENGINE:770,REPORT_TEXT:771,REPORT_DATAMART:772,REPORT_BASE:773,REPORT_GRIDGRAPH:774,REPORT_NONINTERACTIVE:775,REPORT_CUBE:776,REPORT_EMMACUBE:779,CONS:12032,NDE:12033},T={a:N.ATTR,a2:N.ATTR,m:N.METRIC,m2:N.METRIC,r:N.REPORT,f:N.FILTER,p:N.PROMPT},U={f:b.FILTER};var V={};V[F.MQ]=N.METRIC;V[F.MC]=N.METRIC;V[F.AQ]=N.ATTR;V[F.AL]=N.ATTR;V[F.AC]=N.ATTR;V[F.AE]=N.ATTR;V[F.F]=N.FILTER;V[F.R]=N.REPORT;var J=function(d){var H=d.length,g={},e;for(e=0;e<H;e++){var h=d[e];g[h.did]=h.n;}return g;},E=function(e){var H=e.length,f;for(f=0;f<H;f++){var d=e[f];if("tp" in d){d.t=d.tp;}}return e;},X=function(e,g){var H=e.length,f;for(f=0;f<H;f++){var d=e[f];if("tp" in d){if(g){d.t=g;}else{delete d.t;}}}return e;},Z=function(d,f){if(!f){f=[];}f.length=0;var e,H;for(e=0,H=d.length;e<H;e++){f[e]=d[e];}return f;},L={0:[{did:"1,76"},{did:"1,79"},{did:"1,77"},{did:"1,80"},{did:"1,78"},{did:"1,81"},{did:"1,18"},{did:"1,43"}],1:[{did:"2,1"},{did:"2,2"},{did:"3,1"},{did:"3,2"}]};var R={0:[{did:"1,22"},{did:"1,57"}]};mstrmojo.expr=mstrmojo.provide("mstrmojo.expr",{ET:F,ETs:B,ET2TGT:a,ET2COND:K,ET2TP:V,FN:{EQUAL:6,NOT_EQUAL:7,GREATER:8,LESS:9,GREATER_EQUAL:10,LESS_EQUAL:11,IN_LIST:22,NOT_IN_LIST:57,BETWEEN:17,NOT_BETWEEN:44,IS_NULL:54,IS_NOT_NULL:55,AND:19,OR:20,NOT:21,SEARCH:158,DESCENDANT:187},FN_MRP:{BETWEEN:3,EXCLUDE_TOP:4,EXCLUDE_BOTTOM:5,BETWEEN_DESCENDING:13},FNT:{DEF:1,RANK:2,PER:3},FN_SEP:",",TP:N,STP:b,DMY_TP:{ATTR:-1,DIM:-2},DTP:{UNKNOWN:-1,INTEGER:1,UNSIGNED:2,NUMERIC:3,DECIMAL:4,REAL:5,DOUBLE:6,FLOAT:7,CHAR:8,VARCHAR:9,LONGVARCHAR:10,BINARY:11,VARBIN:12,LONGVARBIN:13,DATE:14,TIME:15,TIMESTAMP:16,SHORT:21,LONG:22,MBCHAR:23,BOOLEAN:24,PATTERN:25,BIGDECIMAL:30},BFTP:{RESERVED:0,HIDDEN:-1,DATETIME:1,NUMBER:2,TEXT:3,PICTURE:4,URL:5,EMAIL:6,TAG:7,DATE:8,TIME:9,SYMBOL:10,BIGDECIMAL:11,PHONENUMBER:12},METRIC_DTP:3,FN_DTP:{NUM:0,CHAR:1,DATE:2},DTP2PROMPT_STP:{"-1":b.PROMPT,1:b.PROMPT_LONG,2:b.PROMPT_LONG,3:b.PROMPT_LONG,4:b.PROMPT_DOUBLE,5:b.PROMPT_DOUBLE,6:b.PROMPT_DOUBLE,7:b.PROMPT_DOUBLE,8:b.PROMPT_STRING,9:b.PROMPT_STRING,10:b.PROMPT_STRING,14:b.PROMPT_DATE,15:b.PROMPT_DATE,16:b.PROMPT_DATE,21:b.PROMPT_LONG,22:b.PROMPT_LONG,23:b.PROMPT_STRING,24:b.PROMPT_BOOLEAN,30:b.PROMPT_BIGDECIMAL},DTP2FN_DTP:{"-1":0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:1,9:1,10:1,11:0,12:0,13:0,14:0,15:0,16:0,21:0,22:0,23:1,24:0,25:1,30:0,34:0},fnCstCount:function A(e,d){var g=this.FN,h=this.FN_MRP,H=this.FNT;if(d===H.DEF||d===undefined){switch(e){case g.BETWEEN:case g.NOT_BETWEEN:return 2;case g.IS_NULL:case g.IS_NOT_NULL:return 0;}}else{if(d===H.PER||d===H.RANK){switch(e){case h.BETWEEN:case h.BETWEEN_DESCENDING:return 2;}}}return 1;},fn_List:function S(d,H){var e=this.FN;return d==e.IN_LIST||d==e.NOT_IN_LIST;},fn_AC_MC:function Y(d,H){var e=this.FN;return(d==e.EQUAL)||(d==e.NOT_EQUAL)||(d==e.GREATER)||(d==e.LESS)||(d==e.GREATER_EQUAL)||(d==e.LESS_EQUAL);},fnName:function Q(h,g,d,f){var H=this[M[h]];if(H&&H.constructor===Object){H=H[this.DTP2FN_DTP[f]]||H["*"];}if(h===F.MQ){H=H.concat(mstrmojo.locales.expression.MetricRP);}var e=c.find(H,"did",(d||1)+this.FN_SEP+g);if(e>-1){return H[e].n;}return"";},findTargets:function I(n,f,p){if(!p){p={};}if(n){var m;for(m in T){var x=n[m];if(x){if(!x[P]){x[P]=T[m];}if(!x[G]&&U[m]){x[G]=U[m];}p[x[f]]=x;}}if(n.dmy){var j=this.TP.ATTR,q=this.DMY_TP.ATTR,e=n.dmy.uts,w,d;for(w=0,d=(e&&e.length)||0;w<d;w++){var l=e[w];if(l&&l.utp===q){var g=l.utgt;if(!g.t){g.t=j;}p[g[f]]=g;}}}var H=n.nds,o,s;for(o=0,s=(H&&H.length)||0;o<s;o++){this.findTargets(H[o],f,p);}var r=n.cs,v=r&&r.length;if(v){for(o=0;o<v;o++){this.findTargets(r[o],f,p);}}}return p;},onLocaleUpdated:function(){var d=mstrmojo.locales.expression,H=mstrmojo.expr;H.BRANCH_FNS=O.copy(J(d.BranchQual),H.BRANCH_FNS);H.ELEM_FNS=Z(X(d.Element,"fn"),H.ELEM_FNS);H.METRIC_FNS={"*":X(c.filter(d.Metric.concat(d.MetricRP),function(e){return e.did&&(c.find(R["0"],"did",e.did)<0);}))};H.FORM_FNS={0:X(c.filter(d.Attribute,function(e){return e.did&&(c.find(L["0"],"did",e.did)<0);})),1:X(c.filter(d.Attribute,function(e){return e.did&&(c.find(L["1"],"did",e.did)<0);})),2:X(c.filter(d.Attribute,function(e){return e.did&&(c.find(L["0"],"did",e.did)<0)&&(c.find(L["1"],"did",e.did)<0);}))};H.DIMTYLEVELS=Z(X(d.DimtyLevels),H.DIMTYLEVELS);},getSortedObjectsByTypeGroup:function D(g){var e=-1,H=0,d=1,f=2;function h(j){switch(j.t){case N.METRIC:return d;case N.ATTR:case N.DIM:case N.CONS:return H;case N.FILTER:return j.st===b.CUSTOMGROUP?H:f;case -1:return e;default:return f;}}g=c.map(g||[],function(j){return O.copy(j,{});});return g.sort(function(n,m){var o=h(n)-h(m);if(o){return o;}var l=n.n.toUpperCase(),k=m.n.toUpperCase(),j=l.localeCompare(k);if(j){return j;}return n.n.localeCompare(m.n);});},mapBaseFormTypeToDataType:function C(e){e=parseInt(e);if(e===NaN){return -1;}var d=this.BFTP,H=this.DTP;switch(e){case d.DATETIME:return H.TIMESTAMP;case d.DATE:return H.DATE;case d.TIME:return H.TIME;case d.NUMBER:return H.REAL;case d.TEXT:return H.CHAR;case d.BIGDECIMAL:return H.BIGDECIMAL;default:return H.CHAR;}}});mstrmojo.expr.onLocaleUpdated();}());(function(){mstrmojo.requiresCls("mstrmojo.publisher");var C=mstrmojo.publisher;mstrmojo._Provider=mstrmojo.provide("mstrmojo._Provider",{_meta_usesSuper:false,audibles:{"*":true},set:function F(N,H){var G=false,K=this["_set_"+N],I=this[N];if(K){G=K.apply(this,arguments);}else{this[N]=H;G=(I!==H);}if(G){var L=N+"Change",M=this.audibles||{},J=(M[N]===true)||((M[N]!==false)&&(M["*"]!==false));if(J&&(this["pre"+L]||this["on"+L]||this["post"+L]||C.hasSubs(this.id,L))){this.raiseEvent({name:L,prop:N,value:H,valueWas:I});}}return this;},raiseEvent:function B(H){var M=H&&H.name;if(!M){return null;}H.src=this;this.preHandleEvent(H);var K=["pre","on","post"],L=false,I,G;for(I=0,G=K.length;I<G;I++){var J=K[I]+M;if(this[J]){if(this[J](H)===false){L=true;break;}}}if(!L){this.postHandleEvent(H);C.publish(this.id,M,H);}return H;},preHandleEvent:mstrmojo.emptyFn,postHandleEvent:mstrmojo.emptyFn,attachEventListener:function A(G,H,I){return C.subscribe(this.id,G,I,H);},detachEventListener:function E(G){C.unsubscribe(G);},destroy:function D(){C.clearSubscriptions(this.id);if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.array","mstrmojo.string");var W=mstrmojo.dom,L=mstrmojo.string,a=mstrmojo.array;mstrmojo.css=mstrmojo.provide("mstrmojo.css",{DISPLAY_TABLE:W.isNSIE?"block":"table",DISPLAY_CELL:W.isNSIE?"block":"table-cell",MINHEIGHT:W.isIE6?"height":"minHeight",addClass:function M(h,g){if(h){if(g.constructor!==Array){g=[g];}var d=h.className||"",k=" "+d+" ",e=false,b=g.length,f;for(f=0;f<b;f++){var j=g[f];if(!k.match(new RegExp("\\s"+j+"\\s"))){d+=" "+j;e=true;}}if(e){h.className=L.trim(d);}}return h;},removeClass:function O(f,e){if(!f){return ;}if(e.constructor!==Array){e=[e];}var c=" "+(f.className||"")+" ",b=e.length,d;for(d=0;d<b;d++){c=c.replace(new RegExp("\\s"+e[d]+"\\s","g")," ");}f.className=L.trim(c);},addWidgetCssClass:function N(g,e){var c=g.cssClass,f=(c&&c.split(" "))||[],d;e=[].concat(e);for(d=0;d<e.length;d++){var b=e[d];if(a.indexOf(f,b)===-1){f.push(b);}}g.cssClass=f.join(" ");},removeWidgetCssClass:function G(h,f){var c=h.cssClass,g=(c&&c.split(" "))||[],e;f=[].concat(f);for(e=0;e<f.length;e++){var b=f[e];var d=a.indexOf(g,b);if(d!==-1){g.splice(d,1);}}h.cssClass=g.join(" ");},toggleClass:function V(e,d,c){if(c){this.addClass(e,d);}else{this.removeClass(e,d);}},hasClass:function A(d,e){if(d){var b=" "+(d.className||"")+" ";return !!b.match(new RegExp("\\s"+e+"\\s"));}return false;},applyShadow:function H(f,g,e,d,b){var c=f.style;if(W.isDXIE){c.filter+="progid:DXImageTransform.Microsoft.dropshadow(OffX="+g+"px, OffY="+e+"px, Color='"+b+"')";}else{if(W.isFF||W.isWK||W.isIE10){c[W.CSS3_BOXSHADOW]=g+"px "+e+"px "+d+"px "+b;}}},removeShadow:function C(c){var b=c.style;if(W.isFF||W.isWK||W.isIE10){b[W.CSS3_BOXSHADOW]="";}},setOpacity:function X(c,e){if(W.isDXIE&&!W.isIE9){var f=c.currentStyle.filter;var b=null;if(f.length>0){b=c.filters["DXImageTransform.Microsoft.Alpha"];}if(b){b.opacity=e;b.enabled=(e!==100);}else{if(e<100){var d="progid:DXImageTransform.Microsoft.Alpha(Opacity="+e+")";c.style.filter=(f||"")+" "+d;}}}else{c.style.opacity=e/100-(W.isIE9?0.00001:0);}},buildGradient:function P(c,e,b){if(W.supports(W.cssFeatures.GRADIENTS)){var d={};if(W.isDXIE){d.n="filter";d.v="progid:DXImageTransform.Microsoft.Gradient(GradientType="+c+",StartColorStr='"+e+"',EndColorStr='"+b+"')";}else{if(W.isFF){d.n="background-image";d.v="-moz-linear-gradient("+((c===0)?"top":"left")+","+e+","+b+")";}else{if(W.isWK){d.n="background";d.v="-webkit-gradient(linear,"+((c===0)?"left top, left bottom":"left top, right top")+",from("+e+"),to("+b+"))";}else{if(W.isIE10||W.isIEW3C){d.n="background";d.v="linear-gradient("+((c===0)?"to bottom":"to right")+","+e+","+b+")";}}}}return d;}return null;},buildRoundCorners:function R(g,f){if(W.supports(W.cssFeatures.ROUND_CORNERS)){var c=g+"px";var j=c+(f?" "+c+" 0 0":"")+";";if(W.isFF||W.isWinPhone||W.isIE10){return"border-radius:"+j;}if(W.isWK){if(!f){return"-webkit-border-radius:"+c+";";}var h=["left","right"],e=[],b=-1,d;for(d=0;d<2;d++){e[++b]="-webkit-border-top-"+h[d]+"-radius:"+c;e[++b]="-webkit-border-bottom-"+h[d]+"-radius:0";}return e.join(";");}}return"";},getBorderWidthsOrPaddings:function E(d,g){var h={t:0,r:0,b:0,l:0,h:0,w:0};if(!d){return h;}var e=d.split(" "),c=e.length,f;for(f=0;f<c;f++){e[f]=Math.round(g*parseFloat(e[f])/72);}if(c<4){if(c===1){e[1]=e[2]=e[3]=e[0];}else{e[3]=e[1];if(c===2){e[2]=e[0];}}}h.t=e[0];h.r=e[1];h.b=e[2];h.l=e[3];h.h=h.t+h.b;h.w=h.l+h.r;return h;},getBorderWidths:function I(c,b){return this.getBorderWidthsOrPaddings(c,b);},getPaddings:function D(c,b){return this.getBorderWidthsOrPaddings(c,b);},parkAfterFade:function B(b){var c=b.target.style;if(c.opacity===0){c.left="-10000px";window.setTimeout(function(){c.opacity=0.99;},0);return true;}return false;},getStyleValue:function J(b,f){var d=(f==="float"),e;if(b.currentStyle){f=d?"styleFloat":f;e=b.currentStyle[f];}else{if(document.defaultView&&document.defaultView.getComputedStyle){f=d?"cssFloat":f;var c=document.defaultView.getComputedStyle(b,null);e=c?c[f]:null;}}return e;},getComputedStyle:function U(b,d){var c=(window.getComputedStyle)?function(e,f){return window.getComputedStyle(e,f||null);}:function(e){return e.currentStyle||{};};mstrmojo.css.getComputedStyle=c;return c(b,d);},getCssTextFromObj:function F(d){var c="",b;for(b in d){c+=b+":"+d[b]+";";}return c;},onTransitionEnd:function Z(d,b){var c="transition",e=window.Modernizr;if(e.testProp(c)){W.attachOneTimeEvent(d,W.transEndEvtNames[e.prefixed(c)],b);}else{window.setTimeout(b,0);}},onAnimationEnd:function T(d,b){var c="animation",e=window.Modernizr;if(e.testProp(c)){W.attachEvent(d,W.animationEndEvtNames[e.prefixed(c)],b);}else{window.setTimeout(b,0);}},flashClass:function Q(c,b,e){this.toggleClass(c,b,true);var d=this;window.setTimeout(function(){d.toggleClass(c,b,false);},e);},convertCssToCamelCase:function K(b){return b.replace(/\-([a-z])/gi,function(c,d){return d.toUpperCase();});},printCSSInfo:function Y(f){var l=document.styleSheets,o=l.length,g,h;for(h=0;h<o;h++){var k=l[h],m=k.cssRules,d=m?m.length:0,n=0;for(g=0;g<d;g++){var b=m[g].selectorText;if(b){try{n+=b.split(",").length;}catch(e){}}}var c=k.href;if(!f||(c&&c.indexOf(f)>-1)){console.log("Stylesheet: "+c||"Inline CSS Block");console.log("Total rules: "+d);console.log("Total selectors: "+n);}}},cssEscape:function S(h){if(arguments.length===0){throw new TypeError("`CSS.escape` requires an argument.");}var e=String(h),g=e.length,d=-1,f,b="",c=e.charCodeAt(0);while(++d<g){f=e.charCodeAt(d);if(f==0){b+="\uFFFD";continue;}if((f>=1&&f<=31)||f==127||(d==0&&f>=48&&f<=57)||(d==1&&f>=48&&f<=57&&c==45)){b+="\\"+f.toString(16)+" ";continue;}if(d==0&&g==1&&f==45){b+="\\"+e.charAt(d);continue;}if(f>=128||f==45||f==95||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122){b+=e.charAt(d);continue;}b+="\\"+e.charAt(d);}return b;}});}());(function(){mstrmojo.requiresCls("mstrmojo.string");var D=mstrmojo.string,F=1;mstrmojo.ListBuilder=mstrmojo.provide("mstrmojo.ListBuilder",{newContext:function E(G){var I=G.itemMarkupFunction;if(!I){var H=G.itemMarkup||(G.itemField&&'<div class="mstrmojo-text">{@'+G.itemField+"}</div>");I=H?function(K,J,L){return D.apply(H,K);}:null;}return{itemStatus:[],itemFunc:I};},build:function A(I,H,J,G){H.itemStatus[G]=F;return H.itemFunc(J,G,I);},onadd:function B(I,G,H){if(G){mstrmojo.array.insert(G.itemStatus,H.index,new Array(H.value.length));}},onremove:function C(I,G,H){if(G){G.itemStatus.splice(H.index,H.value.length);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.hash");var M=mstrmojo.string,L=mstrmojo.hash,E=mstrmojo.dom;var R=mstrmojo.usesFrames?null:document.createElement("span");var J=/mstrAttach:([\w,]+)/g;var Q;function U(a,b){if(Q===undefined){Q=(mstrApp!==undefined&&mstrApp.isTouchApp&&mstrApp.isTouchApp())||false;}return a.replace(J,function Z(h,k){var d=k.split(","),f=[],c=d.length,g;for(g=0;g<c;g++){var j=d[g];if(j){if(Q){if(j.indexOf("mouse")>-1){continue;}else{if(j==="click"){j="touchend";}}}f.push("on"+j+"=\"mstrmojo.dom.captureDomEvent('{@id}','"+j+"', self, event)\"");}}return f.join(" ");});}var N="preBuildRendering",C="buildRendering",B="postBuildRendering";function X(b){var a=b.markupString;if(a.match(/mstrAttach:/)){a=U(a,b);if(b.markupString===b.constructor.prototype.markupString){b.constructor.prototype.markupString=a;}}var Z=M.apply(a,b);if(Z){if(Z.indexOf("oncontextmenu")>-1){b.hasContextMenuEvent=true;}if(mstrmojo.usesFrames){var c=(b.domNode&&b.domNode.ownerDocument)||window.document;if(!R||R.ownerDocument!==c){R=c.createElement("span");}}R.innerHTML=Z;var e=R.removeChild(R.firstChild);e.mstrmojoId=b.id;return e;}return null;}function A(b){var a=b.markupSlots,Z,c;if(a){Z={};for(c in a){Z[c]=a[c].call(b);}}return Z;}mstrmojo._HasMarkup=mstrmojo.provide("mstrmojo._HasMarkup",{markupString:null,markupMethods:null,markupSlots:null,onRender:mstrmojo.emptyFn,onUnRender:mstrmojo.emptyFn,render:function Y(){if((this[N]&&this[N]()===false)||(this[C]()===false)||(this[B]&&this[B]()===false)){return false;}this.hasRendered=!!this.domNode;this.onRender();var Z="renderComplete";if(mstrmojo.publisher.hasSubs(this.id,Z)){this.raiseEvent({name:Z});}return true;},buildDom:function T(){return X(this);},postBuildDom:null,preBuildRendering:mstrmojo.emptyFn,buildRendering:function F(){var Z=this.domNode,a=this.buildDom();this.domNode=a;if(this.postBuildDom){this.postBuildDom();}if(this.slotNames){this.removeSlots(this.slotNames);}this.addSlots(A(this));this.paint();if(a){var d=Z;if(!d){d=this.placeholder;if(d){if(typeof d==="string"){d=document.getElementById(d);}delete this.placeholder;}}if(d){E.replace(d,a);}}var b="onchildRenderingChange",c=this.parent;if(c&&c[b]){c[b](this);}return true;},postBuildRendering:mstrmojo.emptyFn,unrender:function S(b){if(this.hasRendered){if(!b){try{var Z=this.domNode;if(Z.parentNode){Z.parentNode.removeChild(Z);}if(mstrmojo.dom.isIE&&Z.outerHTML!=="undefined"){Z.outerHTML="";}}catch(a){}}this.domNode=null;this.removeSlots(this.slotNames);this.hasRendered=false;this.onUnRender();}},paint:function K(){var a=this.markupMethods;if(!a){return ;}var d=this,e=function(j){var h=a[j];if(h){try{h.apply(d,[true]);}catch(g){throw new Error(["Error in markup method.","Script class: "+d.scriptClass,"Widget id: "+d.id,"Method name: "+j,"Err: "+g.message].join("\n\n"));}}};var c=a.sequence,Z,b,f;if(c){Z=c.length||0;for(b=0;b<Z;b++){e(c[b]);}}else{for(f in a){e(f);}}},redraw:function P(){return false;},refresh:function D(Z){if(this.hasRendered){if(this.redraw()!==true){var a=this.domNode;this.unrender(true);this.placeholder=a;if(Z){Z();}this.render();}}},set:function I(c,Z){this._super(c,Z);if(this.domNode){var a=this.markupMethods,b=a&&a["on"+c+"Change"];if(b){b.apply(this);}}return this;},slotNames:null,addSlots:function G(a){var Z=this.slotNames,b;if(!Z){Z={};this.slotNames=Z;}for(b in a){this[b]=a[b];Z[b]=true;}},removeSlots:function H(Z){if(Z){var a=this.slotNames,b;for(b in Z){delete this[b];if(a){delete a[b];}}}},captureDomEvent:function W(b,Z,c,a){if(this.enabled!==false){this.raiseEvent(mstrmojo._HasMarkup.newDomEvent(b,Z,c||Z.event,a));}},playEffect:function V(a){var Z=this[a];if(Z&&Z.constructor===Object){Z=mstrmojo.insert(mstrmojo.hash.clone(Z));Z.widget=this;this[a]=Z;}if(Z){Z.play();}}});mstrmojo._HasMarkup.addMarkupMethods=function O(a,Z){a.prototype.markupMethods=L.copy(Z,L.copy(a.prototype.markupMethods));};mstrmojo._HasMarkup.MSTRDomEventType=null;mstrmojo._HasMarkup.newDomEvent=function(c,Z,b,a){return{name:c,hWin:Z,e:b,config:a,ctrlKey:E.ctrlKey(Z,b),shiftKey:E.shiftKey(Z,b),metaKey:E.isMetaKey(Z,b),cancel:function(){E.stopPropogation(Z,b);},preventDefault:function(){E.preventDefault(Z,b);},getTarget:function(){return E.eventTarget(Z,b);}};};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.dom","mstrmojo.ListSelector");var C=mstrmojo.dom,B=C.isIE;mstrmojo.TreeNodeSelector=mstrmojo.provide("mstrmojo.TreeNodeSelector",mstrmojo.mixin({premousedown:function A(E,I,D){var G=(E&&E.tree)||E,H=D&&D.e;if(!H){return false;}var F=G.lastMouseDown;if(F){if((F.e===H)||(B&&((new Date())-F.dt<50))){return false;}}this._super(E,I,D);if(G){if(G.onnodemousedown){G.onnodemousedown(D);}G.lastMouseDown={e:H,dt:new Date()};}return true;}},mstrmojo.hash.copy(mstrmojo.ListSelector)));}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.dnd");var E=mstrmojo.dom;function B(I){return E.contains(this.getMovingHandle(),I.src.node,true,document.body);}mstrmojo._IsMovable=mstrmojo.provide("mstrmojo._IsMovable",{draggable:true,ownAvatar:true,getMovingHandle:function G(){return this.domNode;},getMovingTarget:function H(){return this.domNode;},isDragValid:function A(I){return B.call(this,I)||(this._super&&this._super(I))||false;},ondragstart:function C(J){if(B.call(this,J)){var K=this.getMovingHandle(),I=this.getMovingTarget().style;this._leftPos=parseInt(I.left,10);this._topPos=parseInt(I.top,10);this._hWidth=K.clientWidth;this._hHeight=K.clientHeight;}if(this._super){this._super();}},ondragmove:function F(L){if(B.call(this,L)){var M=L.tgt.pos,J=L.src.pos,K=this.getMovingTarget().style,I=E.windowDim();K.left=this.left=Math.min(Math.max(this._leftPos+M.x-J.x,-this._hWidth+40),I.w-40)+"px";K.top=this.top=Math.min(Math.max(this._topPos+M.y-J.y,-this._hHeight+20),I.h-20)+"px";}if(this._super){this._super();}},ondragend:function D(I){if(B.call(this,I)){delete this._leftPos;delete this._topPos;delete this._hWidth;delete this._hHeight;}if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.registry","mstrmojo.ListBuilder");var H=mstrmojo.hash,E=mstrmojo.registry,G=1;mstrmojo.WidgetListBuilder=mstrmojo.provide("mstrmojo.WidgetListBuilder",mstrmojo.mixin({newContext:function F(J){var K=J.itemFunction;if(!K){var I=J.itemConfig;K=I?function(M,L,N){var O=H.clone(I);O.data=M;O.parent=N;return E.ref(O);}:null;}return{itemStatus:[],itemWidgets:[],itemFunc:K};},build:function A(K,J,N,I){var L=J.itemFunc(N,I,K);if(L){J.itemStatus[I]=G;J.itemWidgets[I]=L;if(L.set){var M=K.selectedIndices;if(M&&M[I]){L.set("selected",true);}}}return L;},onadd:function C(K,I,J){if(I){mstrmojo.array.insert(I.itemWidgets,J.index,new Array(J.value.length));}this._super(K,I,J);},onremove:function D(L,J,K){if(J){var O=J.itemWidgets.splice(K.index,K.value.length),N,I;for(N=0,I=O.length;N<I;N++){var M=O[N];if(M&&M.destroy){delete M.parent;M.destroy();}}}this._super(L,J,K);},onchange:function B(S,J,P,T){if(T){var N=P.itemWidgets,L,O,I,R;for(O=0,I=T.removed,R=I&&I.length;O<R;O++){L=N[I[O]];if(L&&L.set){L.set("selected",false);}}var M,Q,K;for(M=0,Q=T.added,K=Q&&Q.length;M<K;M++){L=N[Q[M]];if(L&&L.set){L.set("selected",true);}}}}},H.copy(mstrmojo.ListBuilder)));}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.css","mstrmojo.array");var E=mstrmojo.dom,Q=mstrmojo.css,B=mstrmojo.string,I="selected",L="hidden";function P(V,W,X,U,Z){var Y=Z.listHooks[V];if(Y&&Y.call(Z,W,X,U)){return ;}Q.toggleClass(W,I,V==="select");}function G(X,W,V){var Y=this[X],U=Y?Y.split(W):[];this[X]=mstrmojo.array.distinct(U.concat(V.split(W))).join(W);}mstrmojo._IsList=mstrmojo.provide("mstrmojo._IsList",{_mixinName:"mstrmojo._IsList",listHooks:{},useListModKeys:false,init:function N(U){this._super(U);this._shiftStartIndex=-1;},getItemMarkup:function D(V,U){return'<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}" title="{@title}">{@en@n}</{@tag}>';},getItemDisplayName:function M(U){return U.n||"";},getItemProps:function R(Y,U){var V=!!this.selectedIndices[U],Z={tag:"div",sel:V,cls:"",n:this.getItemDisplayName(Y),style:"",idx:U,addCls:function W(b){G.call(this,"cls"," ",b);},addStyle:function X(b){G.call(this,"style",";",b);},title:Y.title||""};if(Z.n&&B.isEmpty(Z.n)){Z.n=B.decodeHtmlString("<br/>");}if(V){Z.addCls(I);}var a=Y.cls;if(a){Z.addCls(a);}if(Y.hid){Z.addCls(L);}return Z;},itemRenderer:{render:function S(V,U,W){V._renderIdx=U;return mstrmojo.string.apply(W.getItemMarkup(V,U),W.getItemProps(V,U));},select:function K(V,W,U,X){P("select",V,W,U,X);},unselect:function H(V,W,U,X){P("unselect",V,W,U,X);}},onclick:function T(U){try{var W=this.getItemFromTarget(U.getTarget());if(W){U.cancel();this.doItemSelect(W,U||{});}}catch(V){mstrApp.onerror(V);}},doItemSelect:function C(k,j){var b=j.hWin,c=j.e,g=k._renderIdx,d=k._positionIdx,V=E.isMetaKey(b,c),a=E.shiftKey(b,c),W=this.multiSelect,Z=this.useListModKeys,h=this._shiftStartIndex,X=this.selectedIndices;if(W&&Z&&a&&h>-1){var U=[],Y=[];this.processContinuousSelection(U,Y,g);this.addSelect(U);this.removeSelect(Y);}else{if(W&&(!Z||V)){var f=(X[g])?"remove":"add";this[f+"Select"](g,false,d);}else{this.singleSelect(g,false,d);}this._shiftStartIndex=g;}},processContinuousSelection:function J(W,V,U){var b=this._shiftStartIndex,a=this.selectedIndices,Z=Math.min(b,U),Y=Math.max(b,U),X;for(X=0;X<this.items.length;X++){if(Z<=X&&X<=Y){if(!a[X]){W.push(X);}}else{if(a[X]){V.push(X);}}}},onclearSelection:function A(){this._shiftStartIndex=-1;},getItemNodeFromTarget:function F(V){var U=E.findAncestorByAttr(V,"idx",true,this.domNode);return(U&&U.node)||null;},getItemFromTarget:function O(W){var V=this.getItemNodeFromTarget(W),U=V&&parseInt(V.getAttribute("idx"),10);if(U!==null&&!isNaN(U)&&this.items){return this.items[U];}return undefined;}});mstrmojo._IsList.SELECTED_CLS=I;mstrmojo._IsList.HIDDEN_CLS=L;}());(function(){mstrmojo.requiresCls("mstrmojo.css");var A=mstrmojo.css;mstrmojo.ui._HasUITheme=mstrmojo.provide("mstrmojo.ui._HasUITheme",{_mixinName:"mstrmojo.ui._HasUITheme",themeClassName:"",postBuildRendering:function B(){var D=this.themeClassName;if(D){this.onthemeClassNameChange({value:D});}return this._super();},onthemeClassNameChange:function C(D){var F=this.domNode;if(F){var G=D.value,E=D.valueWas;if(G){A.addClass(F,D.value);}if(E){A.removeClass(F,D.valueWas);}}}});mstrmojo.ui._HasUITheme.EnumThemeNames={LIGHT_THEME:"mojo-theme-light",DARK_THEME:"mojo-theme-dark"};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css");var C=mstrmojo.dom,G=100,L=700;var B="mojo-safari-hide-nativeTooltip",H=mstrmojo.css;function M(O,N){return function(Q){var P=mstrmojo.all[O];if(P.customTooltipHandler){P.customTooltipHandler(Q);}P[(N?"move":"show")+"Tooltip"](Q,self);};}function A(){var O=this.tooltipNode||this.domNode,Q=this.id,N,P="_ontooltip"+(this.isDynamicTooltip?"move":"over");if(!this._ontooltipout){this._ontooltipout=function(R){mstrmojo.all[Q].hideTooltip(R,self);};}if(!this[P]){this[P]=M(Q,this.isDynamicTooltip);}O=[].concat(O);for(N=0;N<O.length;N++){O[N].removeAttribute("title");C.attachEvent(O[N],(this.isDynamicTooltip?"mousemove":"mouseover"),this[P]);C.attachEvent(O[N],"mouseout",this._ontooltipout);}}function I(){var Q=this.tooltipNode||this.domNode,P;if(Q&&Q.constructor!==Array){Q=[Q];}if(Q){var R=this._ontooltipover,O=this._ontooltipout,N=this._ontooltipmove;for(P=0;P<Q.length;P++){if(R){C.detachEvent(Q[P],"mouseover",R);}if(O){C.detachEvent(Q[P],"mouseout",O);}if(N){C.detachEvent(Q[P],"mousemove",N);}}}}mstrmojo._HasTooltip=mstrmojo.provide("mstrmojo._HasTooltip",{tooltip:"",richTooltip:null,useRichTooltip:false,isDynamicTooltip:false,tooltipNode:null,tooltipOpenDelay:700,isIgnoreTooltipCloseDelay:false,hasWidgetContent:false,tooltipCloseDelay:G,hasOpenTooltip:false,postBuildRendering:function(){var N=this._super();if(this.useRichTooltip){A.call(this);}return N;},onuseRichTooltipChange:function K(){if(this.hasRendered){if(this.useRichTooltip){A.call(this);}else{I.call(this);this.hideTooltip();}}},showTooltip:function J(Q,P){var O=this;if(!O.hasOpenTooltip&&(!mstrApp.isInteractive||mstrApp.isInteractive&&mstrApp.isInteractive())){mstrmojo.requiresCls("mstrmojo.tooltip");if(this.updateTooltipConfig){this.updateTooltipConfig(Q);}window.clearTimeout(this._tooltipTimeOut);if(mstrmojo.dom.isIE){var S={};for(var N in Q){S[N]=Q[N];}Q=S;}var T=this.richTooltip?this.richTooltip.areaId:undefined;if(C.isSafari&&Q){var R=Q.srcElement;if(window.getComputedStyle(R)["text-overflow"]==="ellipsis"){this.baseElement=R;H.toggleClass(R,B,true);}}this._tooltipTimeOut=window.setTimeout(function(){var U=O.richTooltip;if(O._closeTooltipTimeout){window.clearTimeout(O._closeTooltipTimeout);delete O._closeTooltipTimeout;}mstrmojo.tooltip.open(O,Q,P);O.tooltip.onmouseover=function(){if(O.richTooltip&&O.richTooltip.enableHover){window.clearTimeout(O._closeTooltipTimeout);window.clearTimeout(O._deactivationTimeout);if(O.tooltip){O.tooltip.onmouseout=function(V){var W=V.e;if((!W.toElement&&!W.relatedTarget)||!C.contains(this.domNode,V.e.toElement||V.e.relatedTarget)){O.hideTooltip();}};}}};O.tooltip.allowOtherTooltips=O.allowOtherTooltips;if(U&&U.onClose){O.tooltip.onClose=U.onClose;}O.hasOpenTooltip=true;O._hasActiveArea=true;O._tooltipAreaId=T;window.clearTimeout(O._deactivationTimeout);delete O._deactivationTimeout;},(this._hasActiveArea&&T&&T===this._tooltipAreaId)?0:this.tooltipOpenDelay);}},moveTooltip:function D(N,P){if(this._tooltipTimeOut){window.clearTimeout(this._tooltipTimeOut);this._tooltipTimeOut=null;mstrmojo.tooltip.close();}var R=this,O=N,Q=P;this._tooltipTimeOut=setTimeout(function(){mstrmojo.tooltip.open(R,O,Q);},this.tooltipOpenDelay);},hideTooltip:function F(){var N=this;window.clearTimeout(this._tooltipTimeOut);if(C.isSafari&&this.baseElement){H.toggleClass(this.baseElement,B,false);}if(this._closeTooltipTimeout){window.clearTimeout(this._closeTooltipTimeout);}if(this._hasActiveArea&&!this._deactivationTimeout){this._deactivationTimeout=window.setTimeout(function(){delete N._deactivationTimeout;delete N._hasActiveArea;delete N._tooltipAreaId;},100);}mstrmojo.requiresCls("mstrmojo.tooltip");if((!this.isIgnoreTooltipCloseDelay)&&N.richTooltip&&N.richTooltip.enableHover){this._closeTooltipTimeout=window.setTimeout(function(){mstrmojo.tooltip.close();delete N._closeTooltipTimeout;},N.richTooltip.tooltipCloseDelay||this.tooltipCloseDelay);}else{if(N.tooltip){this.isIgnoreTooltipCloseDelay=false;mstrmojo.tooltip.close();}}this.hasOpenTooltip=false;},unrender:function E(N){I.call(this);this._super(N);}});mstrmojo._HasTooltip.TOOLTIP_OPEN_DELAY=L;mstrmojo._HasTooltip.TOOLTIP_CLOSE_DELAY=G;}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.fx");var d=mstrmojo.css,J=mstrmojo.dom,R=mstrmojo.array,N={v:{styleDim:"height",styleDir:"top",dimension:"h",position:"y",scroll:"scrollTop",scrollDimension:"scrollHeight",cls:"vertical",hostCls:"hasVertical",scrollNodeCls:"hasVertical"},h:{styleDim:"width",styleDir:"left",dimension:"w",position:"x",scroll:"scrollLeft",scrollDimension:"scrollWidth",cls:"horizontal",hostCls:"hasHorizontal",scrollNodeCls:"hasHorizontal"}},b="scrollingMode",U="scrolling",g=3;var O=J.getOSInfo().name.toLowerCase().indexOf("mac")>=0;function M(){return(this.scrollbarHostNode||(this.scrollNode&&this.scrollNode.parentNode));}function V(m,j){var l=this.scrollNode,h=M.call(this),k={v:m,h:j};R.forEach(["v","h"],function(o){var n=N[o];d.toggleClass(h,n.hostCls,k[o]);d.toggleClass(l,n.scrollNodeCls,k[o]);});}function S(j,h){var o=J.eventTarget(h,j),m=this.scrollNode,l=J.position(m),n=this.scrollTrackNodes,k=this.scrollBarNodes,p=function p(x){var v=o===n[x];if(v){var y=N[x],q=k[x],z=J.position(q),s=J.getMousePosition(j,h)[y.position],t=s-z[y.position],r=t>0?1:-1,w=m[y.scrollDimension],AA=Math.abs(t-(z.h/2))*(w/l[y.dimension]),u={};u[y.scroll]={isStyle:false,start:m[y.scroll],stop:m[y.scroll]+(r*Math.min(w/3,500,AA)),ease:mstrmojo.ease.linear};(new mstrmojo.fx.AnimateProp({props:u,duration:200,interval:10,target:m})).play();}};p.call(this,"h");p.call(this,"v");}function C(j,h){var m=this.scrollNode,l=j.type==="mousewheel",k=l?-1:1;mstrmojo.array.forEach(["h","v"],function(t){var r=N[t],o=l?"wheelDelta":"delta",q=j[o+{h:"X",v:"Y"}[t]]*k,p=Math.abs(q),n=q/p,s=p===3&&J.isFF&&!O;m[r.scroll]+=s?n*40:q;});J.stopPropogation(h,j);J.preventDefault(h,j);}function f(n){var m=N[n],l=this.scrollNode,k=J.position(l),j=k[m.dimension],o=l[m.scrollDimension],h=Math.ceil(j)/o;return A(h,j,o);}function A(j,h,k){return(!isNaN(j)&&j<1)&&(Math.abs(h-k)>g);}function D(AG){var z="px",s=N[AG],m=this.scrollNode,t=M.call(this),AI=J.position(m),u=AI[s.dimension],AB=m[s.scrollDimension],l=Math.ceil(u)/AB,AF=this.scrollBarNodes,q=AF[AG],x=this.scrollTrackNodes,y=x[AG],AD=A(l,u,AB),n=s.cls;if(!q){y=x[AG]=document.createElement("div");var o=this,w=function(AK){S.call(o,AK);},r=function(AK){C.call(o,AK);},AC=function(AM,AK,AL){J.attachEvent(AM,AK,AL);o.installedEventListeners.push({e:AM,evt:AK,fn:AL});};AC(y,"click",w);y.className="mstrmojo-scrolltrack "+n;q=AF[AG]=document.createElement("div");q.className="mstrmojo-scrollbar "+n;y.appendChild(q);t.appendChild(y);var AE=mstrApp.isSingleTier?"mousewheel":"wheel";AC(y,AE,r);AC(q,AE,r);}var AJ=q.style,p=(m[s.scroll]/m[s.scrollDimension]),j=J.delta(m,M.call(this))[s.position],AA=y.style;if(AD){AA[s.styleDir]=j+z;var k=l*u,v=35,AH=u*p,h=u-35;AJ[s.styleDim]=(k<v?v:k)+z;AJ[s.styleDir]=(AH>h?h:AH)+z;}return AD;}function I(){return !(mstrApp.isSingleTier&&O);}mstrmojo.ui._HasScroller=mstrmojo.provide("mstrmojo.ui._HasScroller",{_mixinName:"mstrmojo.ui._HasScroller",hasCustomScrollbar:null,draggable:true,ownAvatar:true,scrollNode:undefined,scrollbarHostNode:undefined,scrollBarNodes:undefined,setupScrollNodes:mstrmojo.emptyFn,installedEventListeners:null,init:function X(h){this._super(h);if(this.hasCustomScrollbar===null){this.hasCustomScrollbar=I();}this.installedEventListeners=[];},onRender:function L(){if(this._super){this._super();}this.updateScrollbars();this.addScrollNodeProperties();},addScrollNodeProperties:function G(){var j=this.scrollNode,k=J.isFF&&!O;if(j){var h=J.attachMarkupEvent(this.id,j,"scroll");this.installedEventListeners.push({e:j,evt:"scroll",fn:h});}if(k){d.addClass(j,"firefox-on-windows");}else{if(J.isEdge){d.addClass(j,"ms-edge");}}if(!this.hasCustomScrollbar){d.addClass(M.call(this),"mstrmojo-sb-host-show-default");d.addClass(j,"mstrmojo-sb-show-default");return ;}if(j){d.addClass(M.call(this),"mstrmojo-scrollbar-host");d.addClass(j,"mstrmojo-scrollNode");}},updateScrollbars:function e(){if(!this.hasRendered){return ;}this.setupScrollNodes();var h,k=false;if(!this.hasCustomScrollbar){if(this.scrollNode){h=this.scrollNode.style;h.overflowY=f.call(this,"v")?"scroll":"hidden";h.overflowX=f.call(this,"h")?"scroll":"hidden";}return ;}if(this.scrollNode){this.scrollBarNodes=this.scrollBarNodes||{};this.scrollTrackNodes=this.scrollTrackNodes||{};V.call(this,k,k);h=this.scrollNode.style;var l=D.call(this,"v"),j=D.call(this,"h");h.overflowY=l?"scroll":"hidden";h.overflowX=j?"scroll":"hidden";V.call(this,l,j);}},onscroll:function a(){var p=this.scrollNode;if(p&&this.hasCustomScrollbar){var m=function m(q){var r=parseInt(q);return r===null||isNaN(r)?0:r;},n=J.position(p),o=n.h-m(d.getStyleValue(p,"padding-bottom")),j=n.w-m(d.getStyleValue(p,"padding-right")),l=this.scrollBarNodes,k=l.v,h=l.h;if(p.scrollHeight-o>0){k.style.top=((o-J.position(k).h)*(p.scrollTop/(p.scrollHeight-o)))+"px";}if(p.scrollWidth-j>0){h.style.left=((j-J.position(h).w)*(p.scrollLeft/(p.scrollWidth-j)))+"px";}}if(this._super){this._super();}if(this.onScrollEnd){this.onScrollEnd();}},getDragData:function F(j){var m=this.scrollNode,l=J.position(m),k=j.src.node,h=this.scrollBarNodes;if(this.isDraggingScrollBar(j)){return{isScrollBar:true,direction:k===h.v?"v":"h",scrollTop:m.scrollTop,scrollLeft:m.scrollLeft,conversionRatio:{y:m.scrollHeight/l.h,x:m.scrollWidth/l.w}};}return(this._super&&this._super(j));},isDragValid:function E(h){return this.isDraggingScrollBar(h)||(this._super&&this._super(h))||false;},isDraggingScrollBar:function W(j){var k=j.src.node,h=this.scrollBarNodes;return !!h&&(k===h.v||k===h.h);},ondragstart:function c(h){if(this.isDraggingScrollBar(h)){d.addClass(h.src.node,U);d.addClass(M.call(this),b);}if(this._super){this._super(h);}},shouldDragBubble:function T(h){var j=h.src.node,k=this.scrollTrackNodes;return !(!!k&&(j===k.v||j===k.h));},ondragmove:function Q(j){if(this.isDraggingScrollBar(j)){var r=j.tgt,h=j.src,s=r.pos,k=h.pos,o=h.node,n=this.scrollNode,q=this.scrollBarNodes,p=h.data,m={y:(s.y-k.y),x:(s.x-k.x)},l=p.conversionRatio;if(o===q.v){n.scrollTop=p.scrollTop+(m.y*l.y);}else{n.scrollLeft=p.scrollLeft+(m.x*l.x);}}if(this._super){this._super(j);}},ondragend:function K(h){if(this.isDraggingScrollBar&&this.isDraggingScrollBar(h)){d.toggleClass(h.src.node,U,false);d.toggleClass(M.call(this),b,false);}if(this._super){this._super(h);}},widgetResized:function P(){if(this._super){this._super();}this.updateScrollbars();},unrender:function Y(h){R.forEach(this.installedEventListeners,function(j){J.detachEvent(j.e,j.evt,j.fn);});this.installedEventListeners=[];delete this.scrollNode;delete this.scrollbarHostNode;delete this.scrollBarNodes;delete this.scrollTrackNodes;this._super(h);},getDefaultScrollBarProps:function Z(h){return N[h];},disableScroll:function B(h,l){var k=this.scrollNode,j=M.call(this);R.forEach(["v","h"],function(n){var m=N[n];d.toggleClass(j,m.hostCls,false);d.toggleClass(k,m.scrollNodeCls,false);});if(k){if(l||l===undefined){k.style.overflowY="hidden";}else{if(k.style.overflowY==="hidden"){k.style.overflowY="auto";}}if(h||h===undefined){k.style.overflowX="hidden";}}},enableScroll:function H(){this.updateScrollbars();if(!this.hasCustomScrollbar&&this.scrollNode){this.scrollNode.style.overflowY=f.call(this,"v")?"scroll":"hidden";}},scrollIntoViewIfNeeded:function(l){var q=this.scrollNode,n=l.clientHeight,m=q.clientHeight,j=J.position(l).y,o=J.position(q).y,k=j-o,h=k<0,p=k+n>m;if(h||p){q.scrollTop+=k+n/2-m/2;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.css");var A=1,K="mstrmojo-itemwrap",J="&nbsp;",I=mstrmojo.array;function B(V){if(!V.pageSize||V.pageSize<=0){var W=V.scrollboxNode;V.pageSize=W&&W.clientHeight||0;}return V.pageSize;}function T(V,W){if(V.usePaging){V.totalPages=1;var Y=V.itemsContainerNode,X=B(V);if(V.usePaging&&Y&&X){V.totalPages=Math.ceil((Y.clientHeight-parseInt(Y.style&&Y.style.paddingBottom||0,10))/X);}if(Y){V.itemsContainerNode.style.paddingBottom=X+"px";}}}mstrmojo.ListMapper=mstrmojo.provide("mstrmojo.ListMapper",{markupPrefix:"",markupSuffix:"",itemWrapperPrefix:function(V){return'<div class="'+this.getWrapperCss(V)+'">';},itemWrapperSuffix:"</div>",itemWrapperPrefill:"&nbsp",wrapperNodes:function C(V){return V.childNodes;},wrapperParentNode:function D(V){return V;},createWrapperNode:function G(V){var W=V.ownerDocument,X=W.createElement("div");return X;},findScrollRange:function N(k,Z,j,n,W,c,o,m){if(!Z){return{start:0,end:0};}var e=this.wrapperNodes(k),g=parseInt(Z/2,10),Y=parseInt(Math.log(Z)/Math.log(2),10),X=0,V=Z-1,f=j+n,d=e[0].offsetTop,b;for(var l=1;l<=Y;l++){b=e[g].offsetTop-d+m;if(b<j){X=g;}else{if(b>f){V=g;}}var a=Math.round(Z/Math.pow(2,l+1));g+=(b>j)?-a:a;g=Math.min(Math.max(0,g),Z-1);}return{start:X,end:V};},findWrapper:function L(X,V){var W=this.wrapperNodes(X);return W&&W[V];},findIndex:function F(V,Y,X){var W=this._nd2iw(V,Y,X);return W?this._iw2idx(V,Y,W):-1;},itemOffsetTop:function U(W,a,V,Y){if(!Y){var X=this.wrapperNodes(a);Y=X&&X[V];if(!Y){return 0;}}var Z=a.firstChild;if(!Z||(Z===Y)){return 0;}else{return Y.offsetTop-Z.offsetTop;}},whereDrop:function S(c,V,X,b,W){var Y=this._nd2iw(c,V,X),d,a,e;if(Y){a=this._iw2idx(c,V,Y);d=a;e=this.itemOffsetTop(c,V,null,Y);var Z=Y.offsetHeight;if(b.y>W.top+e+Z/2){d++;e+=Z;}}else{return c.dropCuePos;}return{left:0,top:e,idx:d,idxActual:a};},getWrapperCss:function(V){return K;},postBuildRendering:function(Z,Y,X,W,V){T(W,this);},buildItemWrappers:function P(e,b,h,d,a,l){var m=this.itemWrapperPrefix(h),g=this.itemWrapperSuffix,Z=m+this.itemWrapperPrefill+g,Y=[this.markupPrefix],W=1,V=h.selectedIndices||{},o=function n(k,j){for(var p=k;p<j;p++){Y[W++]=m;var q=b.build(h,d,e[p],p);if(V[p]){q=q.replace(/class\=\"([^\"]*)\"/,'class="$1 selected"');}Y[W++]=q;Y[W++]=g;}};var c=(e&&e.length)||0;a=a&&b?Math.min(a,c):0;if(a){o(0,a);}l=l&&b?Math.min(l,c-a):0;var f=c-l;for(var X=a;X<f;X++){Y[W++]=Z;}if(l){o(f,c);}Y.push(this.markupSuffix);return Y;},fillItemWrappers:function H(X,g,d,m,f,W,b,l){var e=(g&&g.length)||0,j=this.wrapperNodes(X),n=f.itemStatus,V=mstrmojo.css,Z=m.selectedIndices||{};for(var c=W,h=Math.min(b+1,e),a=0;c<h;c++){if(n[c]!==A){j[c].innerHTML=d.build(m,f,g[c],c);if(Z[c]){var Y=j[c].firstChild;if(Y){V.addClass(Y,["selected"]);}}a++;if(a===l){break;}}}return a;},onadd:function O(e,V,Z,f){if(V&&f){var a=f.value.length,b=this.wrapperNodes(V),d=b[f.index],Y=this.getWrapperCss(e);for(var X=0;X<a;X++){var W=this.createWrapperNode(V);W.className=Y;W.innerHTML=J;if(d){this.wrapperParentNode(V).insertBefore(W,d);}else{this.wrapperParentNode(V).appendChild(W);}}T(e,this);}},onremove:function Q(Y,b,V,X){if(b&&X){var a=this.wrapperNodes(b);if(a){var d=X.value.length;for(var Z=X.index+d-1,W=X.index;Z>=W;Z--){this.wrapperParentNode(b).removeChild(a[Z]);}}T(Y,this);}},onchange:function R(g,X,c,k){if(X&&k){var d=this.wrapperNodes(X);if(d){var W=mstrmojo.css,l=c.itemStatus,h;for(var b=0,V=k.removed,f=V&&V.length;b<f;b++){h=V[b];if(l[h]){W.removeClass(d[h].firstChild,["selected"]);}}for(var Z=0,e=k.added,Y=e&&e.length;Z<Y;Z++){h=e[Z];if(l[h]){W.addClass(d[h].firstChild,["selected"]);}}}}},_nd2iw:function E(W,Z,Y){Z=this.wrapperParentNode(Z);if(Z&&Y&&Z!==Y){var V=W.domNode,X=Y.parentNode;while(X){if(X===Z){return Y;}if(X===V){break;}Y=X;X=Y.parentNode;}}return null;},_iw2idx:function M(X,b,a){var W=X.items&&X.items.length,Y=this.wrapperNodes(b),V=I.findBin(Y,a,"offsetTop",W);for(var Z=V;Z<W;Z++){if(Y[Z].offsetHeight){return Z;}}return -1;},toPage:function(V,X){var W=V.scrollboxNode;if(V.usePaging&&W){W.scrollTop=X*B(V);}else{mstrmojo.alert("paging is not setup, can not perform paging.");}},whichPage:function(V){var W=V.scrollboxNode,X=B(V);return Math.round((W&&X&&W.scrollTop/X)||0);},toItem:function(Z,a){var X=Z&&Z.itemsContainerNode,e=Z.scrollboxNode,V=this.itemOffsetTop(Z,X,a),b=this.wrapperNodes(X)[a].clientHeight,W=e.clientHeight,d=e.scrollTop,Y=d;if(V<d){Y=V;}else{if(d+W-b<V){Y=Math.min(V,V-W+b);}}e.scrollTop=Y;}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.registry","mstrmojo.publisher","mstrmojo._Provider");var G=mstrmojo.hash,A=mstrmojo.array,B=mstrmojo.registry,D=mstrmojo.publisher;mstrmojo.Arr=mstrmojo.declare(null,[mstrmojo._Provider],{scriptClass:"mstrmojo.Arr",postApplyProperties:null,postCreate:null,length_bindEvents:["add","remove"],init:function H(K){var J;if(K&&K.data){J=K.data;delete K.data;}else{if(K){J=K;K=null;}}if(!J||J.constructor!==Array){J=[];}G.copy(mstrmojo.Arr.prototype,J);if(K){G.copy(K,J);}if(J.postApplyProperties){J.postApplyProperties();}B.add(J);if(J.postCreate){J.postCreate();}return J;},destroy:function E(){D.clearSubscriptions(this.id);B.remove(this);},add:function I(L,J,K){var M=L&&L.length;if(M){if(J==null){J=this.length;}A.insert(this,J,L);if(!K&&(this.onadd||D.hasSubs(this.id,"add"))){this.raiseEvent({name:"add",value:L,index:J});}}},remove:function F(J,L,K){if(L==null){L=1;}if((J!=null)&&L){var M=this.splice(J,L);if(!K&&(this.onremove||D.hasSubs(this.id,"remove"))){this.raiseEvent({name:"remove",value:M,index:J});}}}});mstrmojo.Arr.makeObservable=function C(J,K){if(!J){return ;}if(!K){K={};}K.data=J;return this.prototype.init(K);};})();(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.registry","mstrmojo._Provider","mstrmojo.array");var B=mstrmojo.registry,F=mstrmojo.array;mstrmojo.Obj=mstrmojo.declare(mstrmojo.Base,[mstrmojo._Provider],{scriptClass:"mstrmojo.Obj",id:"",init:function I(J){this.disposables=[];this._super(J);B.add(this);if(this.postCreate){this.postCreate();}},addDisposable:function G(M){var K=this.disposables,L,J;if(M.constructor===Array){for(L=0,J=M.length;L<J;L++){K.push(M[L]);}}else{K.push(M);}return M;},destroyDisposables:function D(J){F.forEach(this.disposables,function(K){if(K.destroy){K.destroy(J);}else{if(K.clear){K.clear();}}});this.disposables=[];},throwAbstractMethodError:function A(J){throw new Error(this.scriptClass+" must implement "+J+".");},destroy:function H(J){if(this.destroyed){return ;}this._super(J);this.destroyDisposables(J);B.remove(this);delete this.parent;this.destroyed=true;}});var C=mstrmojo.Obj;C.free=function E(J){if(J instanceof C){J.destroy();}};}());(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.expr","mstrmojo.date","mstrmojo.num","mstrmojo.string");mstrmojo.validation={STATUSCODE:{UNKNOWN:-1,VALID:0,INVALID:1,INVALID_EMPTY:2,INVALID_CHAR:3,INVALID_OUTOFRANGE:4,INVALID_REGEX:5,INVALID_VALIDATOR:6,INVALID_BAD_NUMERICFORMAT:7,INVALID_BAD_DATESTRING:8},TRIGGER:{NONE:0,ONBLUR:1,ONKEYUP:2,VALUESET:4,ALL:7},REGEXP:{US_ZIP:/^\d{5}([\- ]?\d{4})?$/,EMAIL_ADDRESS:/^([a-zA-Z0-9_\.\-])+@(([a-zA-Z0-9\-])+[\.])+([a-zA-Z0-9]{2,4})+$/,SOCIAL_SECURITY_NUMBER:/^((?!000)(?!666)\d{3})(\s|\-)?((?!00)\d{2})\2((?!0000)\d{4})$/,PHONE_NUMBER:/^(?!-)[ \d\-\(\)\.\+]+$/,FILE_NAME:new RegExp('^[^:*?"<>|/\\\\()]+$'),FOLDER_PATH_WIN:new RegExp('^([a-zA-Z]:|\\\\\\\\[^:*?"<>|/\\\\]+|[^:*?"<>|/\\\\]*)(\\\\[^:*?"<>|/\\\\]+)*(\\\\){0,1}$'),FOLDER_PATH_UNIX:new RegExp('^(/){0,1}([^:*?"<>|/\\\\]+/)*([^:*?"<>|/\\\\]+){0,1}$'),PRINTER_PATH_SINGLE:new RegExp('^[^$%:*?"<>|/\\\\]*$'),PRINTER_PATH_MULTIPLE:new RegExp('^((/|\\\\\\\\)[^$%:*?"<>|/\\\\]+)((/|\\\\)[^$%:*?"<>|/\\\\]+)*(/|\\\\){0,1}$')}};var H=mstrmojo.validation,B=H.TRIGGER,b=H.STATUSCODE,A={"-1":-1,1:1,2:1,3:2,4:2,5:2,6:2,7:2,8:3,9:3,10:3,11:4,12:4,13:4,14:6,15:6,16:6,17:3,18:3,21:2,22:2,23:3,24:4,25:3,30:5,34:5};H.VALIDATOR={DEMO:function N(e){var d=parseInt(e,10),f=mstrmojo.validation.STATUSCODE;if(d===0||d===1||d>10){return{code:f.VALID};}return{code:f.INVALID,msg:"This field must be either 0, 1 or greater than 10"};},VALIDATE_PHONENO:function I(d){var e=String(d).replace(/[^\d]/g,"");if(e.length<10){return{code:b.INVALID,msg:mstrmojo.desc(9203,"A telephone number must contain at least 10 digits.")};}if(!H.REGEXP.PHONE_NUMBER.test(d)){return{code:b.INVALID,msg:mstrmojo.desc(9204,"The telephone number contains invalid characters.")};}return{code:b.VALID};},VALIDATE_ZIPCODE:function G(d){var f="",e=this.dtp;if(!H.REGEXP.US_ZIP.test(d)){if(H.isNumeric(e)||H.isInt(e)){f=mstrmojo.desc(9208,"A zip code must be 5 digits or 5+4 digits.");}else{if(H.isString(e)){f=mstrmojo.desc(9206,"The zip code is invalid");}}return{code:b.INVALID,msg:f};}return{code:b.VALID};},VALIDATE_EMAIL:function T(d){var e=d.indexOf("@");if(e===-1){return{code:b.INVALID,msg:mstrmojo.desc(9197,"The email address is missing an at sign (@).")};}if(d.substring(e).indexOf(".")===-1){return{code:b.INVALID,msg:mstrmojo.desc(9198,"The email address is missing a period on the domain.")};}return H.REGEXP.EMAIL_ADDRESS.test(d)?{code:b.VALID}:{code:b.INVALID,msg:mstrmojo.desc(9207,"The email address is invalid.")};},VALIDATE_SSN:function Q(d){var f=this.dtp,e;if(H.isNumeric(f)||H.isInt(f)){e=String(d).replace(/[^\d]/g,"");if(e.length!==9){return{code:b.INVALID,msg:mstrmojo.desc(9209,"A Social Security Number must be 9 digits.")};}}if(!H.REGEXP.SOCIAL_SECURITY_NUMBER.test(d)){return{code:b.INVALID,msg:mstrmojo.desc(9210,"The Social Security Number is invalid.")};}return{code:b.VALID};}};H.isInt=function D(d){return A[d]===1;};H.isNumeric=function Y(d){return A[d]===2||A[d]===5;};H.isString=function J(d){return A[d]===3;};var C=window.mstrConfig,L=C.listSep,S=mstrmojo.expr,M=S.DTP,Z=mstrmojo.num,U=mstrmojo.string,F=mstrmojo.date;function P(l,m){var h=l.dtp,k=l.constraints,o=k.allowedFormatChars||"",g=(A[h]===1),d=H.isNumeric(h),e=(A[h]===6),n=mstrmojo.locales.number.THOUSANDSEPARATOR,f=mstrmojo.locales.number.DECIMALSEPARATOR,j;if(g){if(!l._intRegExp){o+="0-9-"+(l.isList?L:"")+n;l._intRegExp=new RegExp("[^"+o+"]");}j=l._intRegExp;}if(d){if(!l._numericRegExp){o+="0-9-#"+(l.isList?L:"")+f+n;l._numericRegExp=new RegExp("[^"+o+"]");}j=l._numericRegExp;}return !!j&&j.test(m);}function c(l,n){var h=l.dtp,k=l.constraints,g=(A[h]===1),d=H.isNumeric(h),e=(A[h]===6),f=k.min,m=k.max,j;if(f===undefined&&m===undefined){return false;}if(g||d){if(Z.isBigDecimal(n)){return Z.inNumericRange(Z.parseBigDecimal(n),f,m)!==0;}return Z.inNumericRange(n,f,m)!==0;}if(e){return F.inDateTimeRange(n,f,m)!==0;}return false;}function K(e,d){return !Z.isNumeric(d)&&!Z.isBigDecimal(d);}function R(g,e){var f=(g.dtp===M.DATE),d=(g.dtp===M.TIME);return(f?!F.isDate(e):(d?!F.isTime(e):!F.isDateAndOrTime(e)));}mstrmojo._CanValidate=mstrmojo.provide("mstrmojo._CanValidate",{constraints:null,required:false,dtp:M.INTEGER,isList:false,autoFormat:false,validationStatus:null,init:function W(d){this._super(d);if(!this.constraints){this.constraints={};}var e=this.constraints;if(!e.hasOwnProperty("trigger")){e.trigger=B.NONE;}},_set_value:function(j,f){var g=this.value,e=(g!==f);if(e){this.value=f;var h=this.constraints.trigger,d=(h&B.VALUESET)>0;if(d){this.validate(f);}}return e;},validate:function O(){var f=(this.value!==null&&this.value!==undefined)?this.value:"",j=this.isList?f.split(L):[f],h,e,k,d=j.length,g;for(g=0;g<d;g++){h=this.doValidation(j[g]);e=(h.code>b.VALID);if(e){if(d>1){h.msg=mstrmojo.locales.validation.invalidValueInListError.replace("#",j[g]||" ");}break;}}k=e?"onInvalid":"onValid";if(!e&&this.autoFormat){this.format();}this.set("validationStatus",h);if(this[k]){this[k](h);}},format:function X(){var j=this.dtp,f=(A[j]===6);if(!f){return ;}var l=mstrConfig.listSep,o=this.value||"",e=this.isList?o.split(l):[o],n=j===14,m=[],d,g=mstrmojo.locales.datetime,k=e.length,h;for(h=0;h<k;h++){o=e[h];d=F.parseDateAndOrTime(o);if(d){if(n&&d.date){m.push(F.formatDateInfo(d.date,g.DATEOUTPUTFORMAT));}else{m.push((d.date?F.formatDateInfo(d.date,g.DATEOUTPUTFORMAT):"")+" "+(d.time?F.formatTimeInfo(d.time,g.TIMEOUTPUTFORMAT):""));}}}this.set("value",m.join(l));},isValid:function V(){var d=this.validationStatus;if(!d){this.validate();}return this.validationStatus.code===b.VALID;},clearValidation:function a(){this.set("validationStatus",{code:b.VALID});if(this.onClearValidation){this.onClearValidation();}},doValidation:function E(q){var n=this.constraints,o=n.regExp,f=n.validator,d={id:this.id,code:b.VALID,msg:""},m=this.dtp,l=(A[m]===1),e=H.isNumeric(m),g=(A[m]===3),h=(A[m]===6),k=U.isEmpty(q),p=String(q).length,j="",t=mstrmojo.locales.validation;if(this.required&&k){d.code=b.INVALID_EMPTY;d.msg=t.requiredFieldError;return d;}q=U.trim(q);if(!k&&P(this,q)){if(l){j=t.integerDataType;}if(e){j=t.numericDataType;}if(h){j=t.dateDataType;}d.code=b.INVALID_CHAR;d.msg=t.invalidCharError.replace("#",j);return d;}if(!k&&h&&R(this,q)){d.code=b.INVALID_BAD_DATESTRING;d.msg=t.invalidDateStringError;return d;}if(!k&&(e||l)&&K(this,q)){d.code=b.INVALID_BAD_NUMERICFORMAT;d.msg=t.invalidNumericFormatError;return d;}if(!k&&(l||e||h)&&c(this,q)){d.code=b.INVALID_OUTOFRANGE;if(n.min!==null&&n.max!==null){j=t.outofRangeError.replace("# ","").replace("##",Z.toLocaleString(n.min)).replace("###",Z.toLocaleString(n.max));}else{if(n.min!==null){j=t.noLessMinError.replace("##",Z.toLocaleString(n.min)).replace("# ","");}else{if(n.max!==null){j=t.noGreaterMaxError.replace("###",Z.toLocaleString(n.max)).replace("# ","");}}}d.msg=j;return d;}if(g&&n.minLen!==null&&n.maxLen!==null){if(p<n.minLen||p>n.maxLen){d.code=b.INVALID;d.msg=mstrmojo.desc(9211).replace(/#/,n.minLen).replace(/##/,n.maxLen);return d;}}if(o&&!o.test(q)){d.code=b.INVALID_REGEX;d.msg=mstrmojo.desc(9205);return d;}var s=f&&f.apply(this,[q]);if(s){d.code=s.code;d.msg=s.msg;return d;}return d;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");var D={TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4};var C={LEFT_TO_RIGHT:0,RIGHT_TO_LEFT:1};mstrmojo.ui.PopupConfig=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ui.PopupConfig",ENUM_CORNERS:D,isHostedWithin:true,position:null,hostProxyCssClass:"",hostId:"",hostElement:null,anchorElement:null,popupHandlers:null,alignment:null,alignWithAnchor:false,useTooltip:false,useDarkTheme:false,init:function H(I){this.clear();this._super(I);},setAlignment:function E(I,J){this.alignment={host:I,popup:J};},addPopupHandlers:function F(I,K,J){this.popupHandlers[I]={open:K,close:J};},clear:function B(){this.popupHandlers={};var I=this.ENUM_CORNERS;this.alignment={host:I.BOTTOM_LEFT,popup:I.TOP_LEFT};},destroy:function(I){this.anchorElement=null;this.hostElement=null;if(this._super){this._super(I);}}});mstrmojo.ui.PopupConfig.ENUM_CORNERS=D;mstrmojo.ui.PopupConfig.directionCfg={menuDirection:C.LEFT_TO_RIGHT,isRightToLeft:function G(){return this.menuDirection===C.RIGHT_TO_LEFT;},setDirection:function A(I){this.menuDirection=I?C.RIGHT_TO_LEFT:C.LEFT_TO_RIGHT;}};}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");var M=mstrmojo.DI.DIConstants,H=mstrmojo.array,D=M.dbType,F=M.xdaType,I=M.sourceType,K=M.backendSourceSubtype;mstrmojo.DI.DIDatabaseHelper=mstrmojo.declare(mstrmojo.Obj,null,null);mstrmojo.DI.DIDatabaseHelper.getImportOptionByDBType=function A(N){switch(N){case D.SAP:case D.MSFT_AS:case D.ESSBASE:case D.TM1:case D.PIG:return false;default:return true;}};mstrmojo.DI.DIDatabaseHelper.getSourceTypeByDBType=function E(N){switch(N){case D.SAP:case D.MSFT_AS:case D.ESSBASE:case D.TM1:return F.mdx;case D.PIG:return F.ffsql;default:return -1;}};mstrmojo.DI.DIDatabaseHelper.getDescriptionIdByDBType=function(N){switch(N){case D.MS_ACCESS:return 9149;case D.ORACLE:return 8545;case D.SQL_SERVER:return 8552;case D.INFORMIX:return 12995;case D.SYBASE:return 12998;case D.REDBRICK:return 10059;case D.DB2:return 8516;case D.TERADATA:return 8553;case D.SAP:return 13107;case D.NETEZZA:return 8558;case D.EXCEL:return 3958;case D.MSFT_AS:return 13225;case D.ESSBASE:return 13224;case D.MYSQL:return 8556;case D.POSTGRESQL:return 8541;case D.COMPOSITE:return 12991;case D.ASTER:return 10058;case D.VERTICA:return 10062;case D.PARACCEL:return 10056;case D.TM1:return 13223;case D.XQUERY:return 8560;case D.HIVE:return 8561;case D.SALESFORCE:return 9213;case D.SAPHANA:return 12997;case D.GOOGLE_BIGQUERY:return 12450;default:return 4444;}};mstrmojo.DI.DIDatabaseHelper.getOASTFromBEST=function L(N){switch(N){case K.googleBigQuery:case K.googleBigQueryFFSQLModel:case K.googleBigQuerySingleTable:return I.googleBigQuery;case K.dropbox:return I.dropbox;case K.googleAnalytics:return I.googleAnalytics;case K.googleDrive:return I.googleDrive;case K.facebook:return I.facebook;case K.twitter:return I.twitter;case K.salesforce:return I.salesforce;default:return -1;}};mstrmojo.DI.DIDatabaseHelper.isOAuthSourceType=function C(N){var O=[I.googleBigQuery,I.dropbox,I.googleAnalytics,I.googleDrive,I.facebook,I.twitter,I.salesforce];return H.indexOf(O,N)!==-1;};mstrmojo.DI.DIDatabaseHelper.filterDBById=function B(P,N,O){return H.filter(P,function(S){var R=H.indexOf(N,S.id),Q;if(R>-1){Q=O;}else{Q=!O;}return Q;});};mstrmojo.DI.DIDatabaseHelper.filterDBByDispOption=function B(P,N,O){return H.filter(P,function(R){var Q=false;if((R.disp&N)===N){H.forEach(O,function(S){if(R.id===S){Q=true;return false;}});return !Q;}});};mstrmojo.DI.DIDatabaseHelper.getDBIds=function J(O){var N=[];H.forEach(O,function(P){N=N.concat(P.id);});return N;};mstrmojo.DI.DIDatabaseHelper.getUniqueDBTypes=function G(P){var O=[],N;H.forEach(P,function(Q){N=H.indexOf(O,Q.dbType);if(N<0){O.push(Q.dbType);}});return O;};mstrmojo.DI.DIDatabaseHelper.filterDBByAdminConfig=function(O,N){return H.filter(O,function(R){var P=H.indexOf(N,R.id),Q=true;if(P>=0){Q=false;}return Q;});};}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo._LoadsScript","mstrmojo._HasChildren","mstrmojo.Binding","mstrmojo._HasBindings");mstrmojo.Model=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._LoadsScript,mstrmojo._HasChildren,mstrmojo._HasBindings],{scriptClass:"mstrmojo.Model",init:function A(C){this._super(C);if(this.children){this.initChildren();}if(!this.parent){this.initBindings();}},destroy:function B(C){if(this.children){this.destroyChildren(true);}if(this.bindings){this.destroyBindings();}this._super(C);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo._LoadsScript","mstrmojo.Binding","mstrmojo._HasBindings","mstrmojo._HasMarkup","mstrmojo._HasTooltip","mstrmojo.css");mstrmojo.Widget=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._LoadsScript,mstrmojo._HasBindings,mstrmojo._HasMarkup,mstrmojo._HasTooltip],{scriptClass:"mstrmojo.Widget",domNode:null,hasRendered:false,visible:true,enabled:true,tooltip:"",cssClass:"",cssText:"",cssDisplay:"block",slot:"",alias:"",parent:null,init:function A(C){this._super(C);var D=this.parent;if(!D||D.hasInitBindings){this.initBindings();}},destroy:function B(C){if(this.hasRendered){this.unrender(C);}if(this.bindings){this.destroyBindings();}this._super();},invalidate:mstrmojo.emptyFn,widgetResized:mstrmojo.emptyFn});mstrmojo.Widget.cssTextMarkupMethod=function(){this.domNode.style.cssText=this.cssText||"";};mstrmojo.Widget.visibleMarkupMethod=function(){this.domNode.style.display=(this.visible)?this.cssDisplay:"none";};mstrmojo.Widget.topMarkupMethod=function(){var C=this.top;if(C){this.domNode.style.top=C;}};mstrmojo.Widget.leftMarkupMethod=function(){var C=this.left;if(C){this.domNode.style.left=C;}};mstrmojo.Widget.heightMarkupMethod=function(){var C=this.height;if(C){this.domNode.style.height=C;}this.widgetResized();};mstrmojo.Widget.widthMarkupMethod=function(){var C=this.width;if(C){this.domNode.style.width=C;}this.widgetResized();};mstrmojo.Widget.enabledMarkupMethod=function(){mstrmojo.css.toggleClass(this.domNode,"disabled",!this.enabled);};}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");mstrmojo.StepperContentProvider=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.StepperContentProvider",item:null,renderer:null,min:null,max:null,interval:1,minField:"min",maxField:"max",maxLengthField:"maxLength",valField:"value",intField:"interval",canLoop:false,next:mstrmojo.emptyFn,prev:mstrmojo.emptyFn,hasPrev:mstrmojo.emptyFn,hasNext:mstrmojo.emptyFn,renderItemAt:mstrmojo.emptyFn,setVal:mstrmojo.emptyFn,getVal:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.array");var C=mstrmojo.array;mstrmojo.ObjectBrowserDataProvider=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ObjectBrowserDataProvider",path:mstrConfig.taskURL,serverRequest:function(D,E){if(mstrApp&&mstrApp.serverRequest){mstrApp.serverRequest(D,E,{silent:true});}else{mstrmojo.xhr.request("POST",this.path,E,D,undefined,this.XServer,this.baseParams);}},fetchFolderContents:function(D,E,H){var F=D.blockCount,G={taskId:"searchMetadata",styleName:"MojoFolderStyle",blockCount:F,includeAncestorInfo:"true",includeObjectDesc:D.includeObjectDesc,encodeObjectInfo:false};if(D.folderLinksContextId){G.folderLinksContextId=D.folderLinksContextId;}if(D.sId){G.sessionState=D.sId;}if(E.fid){G.rootFolderID=E.fid;}else{if(E.fty){G.rootFolderType=E.fty;}}if(D.browsableTypes){G.objectType=D.browsableTypes;}if(E.blockBegin){G.blockBegin=E.blockBegin;}if(E.searchPattern){if(D.enableQuickSearch){G.quickSearch=D.enableQuickSearch;}G.searchPattern=E.searchPattern;if(E.recursive){G.recursive=E.recursive;}}this.serverRequest(G,H);},newFolder:function(G,H,F,D){var E={taskId:"createFolder",taskContentType:"json",folderID:G,name:H,description:F};this.serverRequest(E,D);},loadObjects:function B(H,I,D,G){var E=[],F=[];C.forEach(H,function(J){E.push(J.did);F.push(J.t);});if(H.length>0&&G){this.serverRequest({taskId:"getObjectInfo",objectIDs:E.join(","),objectTypes:F.join(","),includeDetails:true},I,D);}else{I.success();}},loadRecentSaveAsFolders:function A(E){var D={taskId:"getRecentSaveAsFolders"};this.serverRequest(D,E);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var D=1,B="mstrmojo-itemwrap";mstrmojo.ListMapperHoriz=mstrmojo.provide("mstrmojo.ListMapperHoriz",mstrmojo.hash.copy({markupPrefix:'<table class="mstrmojo-itemwrap-table" cellspacing="0" cellpadding="0"><tbody><tr>',markupSuffix:"</tr></tbody></table>",itemWrapperPrefix:function(H){return'<td class="'+this.getWrapperCss(H)+'">';},getWrapperCss:function(H){return"mstrmojo-itemwrap-td";},itemWrapperPrefill:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",itemWrapperSuffix:"</td>",wrapperNodes:function G(H){return this.wrapperParentNode(H).cells;},wrapperParentNode:function F(H){return H.firstChild.rows[0];},createWrapperNode:function E(H){var I=H.ownerDocument,J=I.createElement("td");return J;},findScrollRange:function C(U,L,S,X,I,P,Y,W){var Q=this.wrapperNodes(U),R=parseInt(L/2,10),K=parseInt(Math.log(L)/Math.log(2),10),J=0,H=L-1,T=I+P,M=Q[0].offsetLeft,O;for(var V=1;V<=K;V++){O=Q[R].offsetLeft-M+Y;if(O<=I){J=R;}else{if(O>=T){H=R;}}var N=Math.round(L/Math.pow(2,V+1));R+=(O>I)?-N:N;R=Math.min(Math.max(0,R),L-1);}return{start:J,end:H};},findIndex:function A(I,M,K){if(M&&K){var H=I.domNode,L=this.wrapperParentNode(M),J=K.parentNode;while(J){if(J===L){return mstrmojo.array.findBin(this.wrapperNodes(M),K,"offsetLeft",I.items&&I.items.length);}else{if(J===H){break;}}K=J;J=K.parentNode;}}return -1;}},mstrmojo.hash.copy(mstrmojo.ListMapper)));})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.WidgetListBuilder");mstrmojo.WidgetTreeBuilder=mstrmojo.provide("mstrmojo.WidgetTreeBuilder",mstrmojo.mixin({newContext:function A(B){var D=this._super(B);if(!B.itemFunction&&D.itemFunc){var C=D.itemFunc;D.itemFunc=function(G,F,H){var E=C(G,F,H);if(E){E.tree=H.tree||H;}return E;};}return D;}},mstrmojo.hash.copy(mstrmojo.WidgetListBuilder)));})();(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var C=1;mstrmojo._hasWidgetListMapper={buildItemWrappers:function A(H,G,F,E,J,I){E.first=J;E.last=I;return this._super(H,G,F,E,0,0);},postBuildRendering:function B(K,I,H,G,F){var J=F.first;if(J){this.fillItemWrappers(K,I,H,G,F,0,J);}if(F.last){var E=I&&I.length||0,L=Math.max(Math.max(0,E-F.last),J);this.fillItemWrappers(K,I,H,G,F,L,E);}if(this._super){this._super(K,I,H,G,F);}},fillItemWrappers:function D(F,N,K,R,M,E,I,Q){var L=(N&&N.length)||0,P=this.wrapperNodes(F),S=M.itemStatus;for(var J=E,O=Math.min(I+1,L),H=0;J<O;J++){if(S[J]!==C){var G=K.build(R,M,N[J],J);if(G){G.placeholder=P[J].firstChild;G.render();}H++;if(H===Q){break;}}}return H;},onchange:null};mstrmojo.WidgetListMapper=mstrmojo.provide("mstrmojo.WidgetListMapper",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapper)));mstrmojo.WidgetListMapper.RENDERED=C;mstrmojo.requiresCls("mstrmojo.ListMapperHoriz");mstrmojo.WidgetListMapperHoriz=mstrmojo.provide("mstrmojo.WidgetListMapperHoriz",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapperHoriz)));})();(function(){mstrmojo.requiresCls("mstrmojo.StepperContentProvider","mstrmojo.num");var A=mstrmojo.num;function B(G,F){var H=F?G.max:G.min,D=F?G.min:G.max,E=G.getVal(F?1:-1);return(H===null||(F?(E<=H):(E>=H))||(D!==null&&G.canLoop));}function C(H,G){var F=H.min,D=H.max,E=H.getVal(G?1:-1);if((G&&D!==null&&E>D)||(!G&&F!==null&&(E<F))){if(H.canLoop){E=((E-F)%(D-F+1))+F;E=(E>=F)?E:E+(D-F+1);}else{return ;}}H.item[H.valField]=H.curVal=E;H.onTraverse();}mstrmojo.NumStepperContentProvider=mstrmojo.declare(mstrmojo.StepperContentProvider,null,{scriptClass:"mstrmojo.NumStepperContentProvider",curVal:null,init:function(E){this._super(E);var F=this.item,D=function(I){var H=I&&F[I];return(H===null||H===undefined);},G=function(I,K,H){var J=H&&D.call(this,K)?null:F[K];if(J!==null&&J!==undefined){this[I]=J;}};G.call(this,"min",this.minField,true);G.call(this,"max",this.maxField,true);G.call(this,"maxLength",this.maxLengthField,true);G.call(this,"interval",this.intField);this._initCurrent();},_initCurrent:function(){var E=this.item,F=this.curVal=E[this.valField];if(F===null||F===undefined){var D=this.min;this.curVal=D!==null?D:0;}},next:function(){C(this,true);},prev:function(){C(this,false);},hasPrev:function(){return B(this,false);},hasNext:function(){return B(this,true);},renderItemAt:function(F){var E=this.getVal(F),D=this.renderer;return D?D.render(E,this):E;},getVal:function(D){return this.curVal+(this.interval*(D||0));},setVal:function(F){var G=this.min,D=this.max,E=this.getVal();if(typeof F!=="number"||isNaN(F)||F===E||A.inNumericRange(F,G,D)!==0){return ;}this.item[this.valField]=this.curVal=F;this.onTraverse();},onTraverse:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.boxmodel","mstrmojo.array","mstrmojo.hash","mstrmojo.dom","mstrmojo.css","mstrmojo.Widget","mstrmojo.Arr","mstrmojo._HasLayout","mstrmojo._ListBase2Selections","mstrmojo.ListSelector","mstrmojo._TouchScrolling","mstrmojo._PagingList");var a=mstrmojo.hash,f=mstrmojo.array,e=mstrmojo.boxmodel,c=mstrmojo.dom;function A(j,l,h){var k=j.listSelector;if(k){k[l](j,j.itemsContainerNode,h);}}function L(j,h){var k=j.lastPagePos;if(!k||k.dragId!==h){k=e.offset(j.itemsContainerNode);k.dragId=h;j.lastPagePos=k;var l=j.scrollboxNode;j.lastScrollPos={left:l.scrollLeft,top:l.scrollTop,width:l.clientWidth,height:l.clientHeight};}}function O(l,o,j){var k=o&&o.node;if(k===l.dropCueNode||k===l.dropCueNode.firstChild){return l.dropCuePos;}var m=l.listMapper;var h=m&&m.whereDrop(l,l.itemsContainerNode,k,o.pos,{left:l.lastPagePos.left-l.lastScrollPos.left,top:l.lastPagePos.top-l.lastScrollPos.top,width:l.lastScrollPos.width,height:l.lastScrollPos.height});var n=l.dropCuePos;return((j!==false)&&n&&h&&(n.idx===h.idx)&&(n.left===h.left)&&(n.top===h.top))?n:h;}var g="attachEventListener";function D(j,h){if(j.makeObservable){h=h||[];if(!h[g]){mstrmojo.hash.make(h,j.itemsScriptClass||mstrmojo.Arr);}}return h;}function H(j,h){if(h&&h[g]){j._sub_its=h;j._sub_add=h[g]("add",j.id,"preadd");j._sub_rmv=h[g]("remove",j.id,"preremove");}}function G(h){if(h._sub_its){var j=mstrmojo.publisher;j.unsubscribe(h._sub_add);j.unsubscribe(h._sub_rmv);delete h._sub_add;delete h._sub_rmv;delete h._sub_its;}}mstrmojo.ListBase2=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._ListBase2Selections,mstrmojo._TouchScrolling,mstrmojo._PagingList,mstrmojo._HasLayout],{scriptClass:"mstrmojo.ListBase2",items:null,markupString:'<div id="{@id}" class="mstrmojo-ListBase2 {@cssClass}" style="position:relative;{@cssText}" mstrAttach:keyup,keypress,mousedown,mouseup,dblclick><div class="mstrmojo-ListBase2-itemsContainer" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode;},itemsContainerNode:function(){return this.domNode.firstChild;},dropCueNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},ondropCuePosChange:function(){var j=this.dropCueNode,h=j&&j.style;if(!h){return ;}var l=this.dropCuePos,k=!!l;if(k){h.left=l.left+"px";h.top=l.top+"px";}h.display=k?"block":"none";},onpageChange:function(){if(this.usePaging&&!this._inScroll){this._inPaging=true;this.listMapper.toPage(this,this.page);this._inPaging=false;}},onwidthChange:function(){if(!isNaN(parseInt(this.width))){this.domNode.style.width=this.width;}},onheightChange:function(){if(!isNaN(parseInt(this.height))){this.domNode.style.height=this.height;}}},autoHide:false,renderOnScroll:false,firstRenderBlockSize:50,renderBlockSize:50,listMapper:null,listBuilder:null,listSelector:mstrmojo.ListSelector,animate:false,itemsEffect:null,containerResizable:true,init:function Z(m){this._super(m);this.items=this.initItems(this.items);var l=this.selectedIndices,j=this.selectedIndicesList,k=this.selectedIndex,n=this.selectedItem;this.selectedIndices={};this.selectedIndex=-1;delete this.selectedIndicesList;delete this.selectedItem;if(l||j||(k>-1)||n){this.initSelections(l,j,k,n);}if(this.postInitItems){this.postInitItems();}},initItems:function I(h){return D(this,h);},preBuildRendering:function W(){var m=this.listBuilder,p=m.newContext(this);this.ctxtBuilder=p;var j=this.markupSlots,l=!!(this.renderOnScroll&&this.renderBlockSize&&j&&j.scrollboxNode),k=this.items,h=(k&&k.length)||0,n=l?this.firstRenderBlockSize:h,o=l?this.firstRenderBlockSize:0;this._eros=l;this.paused=false;this.itemsHtml=this.listMapper.buildItemWrappers(k,m,this,p,n,o).join("");this.itemsContainerCssText="visibility: hidden";if(this._super){this._super();}},postBuildRendering:function E(){delete this.itemsHtml;var m=this.listMapper;if(m&&m.postBuildRendering){m.postBuildRendering(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder);}H(this,this.items);if(this._eros||this.usePaging){if(!this._cb_scroll){var p=this.id;this._cb_scroll=function(){var n=mstrmojo.all[p];n.onscroll();};}mstrmojo.dom.attachEvent(this.scrollboxNode,"scroll",this._cb_scroll);this.onscroll();}if(this.animate){for(var k=0,j=["itemsEffect","scrollEffect"],h=j.length;k<h;k++){var o=j[k],l=this[o];if(l&&l.constructor===Object){l=mstrmojo.insert(mstrmojo.hash.clone(l));l.widget=this;this[o]=l;}}if(this.itemsEffect){this.itemsEffect.play();}}this.itemsContainerNode.style.visibility="inherit";if(this.containerResizable&&this.itemsContainerNode.scrollWidth<this.domNode.scrollWidth){this.itemsContainerNode.style.width=this.domNode.scrollWidth+"px";}if(this._super){this._super();}},unrender:function X(l){G(this);if(this._eros){mstrmojo.dom.detachEvent(this.scrollboxNode,"scroll",this._cb_scroll);delete this._cb_scroll;}for(var j=0,k=["itemsEffect","scrollEffect"],h=k.length;j<h;j++){var m=this[k[j]];if(m&&m.isPlaying){m.cancel();}}this._super(l);},pauseScrollRendering:function P(k,h,j){if(k!==false){k=true;}if(this.paused===!!k){return ;}this.paused=!!k;if(k){if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}}else{this.fill(h,j);}},onscroll:function K(){if(this.paused){return ;}if(this._eros){if(!this._fillTmr){var h=this;this._fillTmr=self.setTimeout(function(){h.fill();h=null;},50);}}if(this._super){this._super();}},fill:function b(h,m){if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}var n=(this.items&&this.items.length)||0;if(!n){if(m){m();}}else{var k=this.scrollboxNode,o=this.itemsContainerNode,l=mstrmojo.boxmodel.offset(o,k),q=this.listMapper,p=q.findScrollRange(o,n,(this.usesTouches&&this.pos&&parseInt(this.pos.y,10))||k.scrollTop,k.clientHeight,(this.usesTouches&&this.pos&&parseInt(this.pos.x,10))||k.scrollLeft,k.clientWidth,l.left,l.top);if(this.fillAt(p.start,p.end)){if(h){h();}var j=this.id;this._fillTmr=window.setTimeout(function(){mstrmojo.all[j].fill(h,m);},100);}else{if(m){m();}}}},fillAt:function M(k,j){var h=this.listMapper;if(h){return h.fillItemWrappers(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder,k,j,this.renderBlockSize);}else{return false;}},add:function R(j,h){if(!j||!j.length){return -1;}var k=this.items;if(h==null){h=a.min(this.selectedIndices,false,true);if(h!==null&&h!==undefined){h++;}}if(h==null||h===-1){h=(k&&k.length)||0;}if(k&&k.add){k.add(j,h);}else{this.set("items",k?f.insert(k.concat(),h,j):j);}return h;},preadd:function B(k){if(this.hasRendered){var n=this.listMapper;if(n){n.onadd(this,this.itemsContainerNode,this.ctxtBuilder,k);}var m=this.listBuilder;if(m){m.onadd(this,this.ctxtBuilder,k);}var j=this.listSelector;if(j){j.onadd(this,k);}if(this._eros){this.onscroll();}else{var l=k.index,h=k.value.length;this.fillAt(l,l+h-1);}}if(this.onadd){this.onadd(k);}if(this._super){this._super(k);}},remove:function U(h){if(h==null){return -1;}if(h.constructor!==Array){return this._remove(h);}var k=this.items;if(k){var j;if(k.remove){for(j=h.length-1;j>-1;j--){k.remove(h[j],1);}}else{k=k.concat();for(j=h.length-1;j>-1;j--){k.splice(h[j],1);}this.set("items",k);}return h[0];}return -1;},_remove:function U(k){var j=this.items;if(!j||(k==null)){return -1;}var h;if(!isNaN(k)){h=k;}else{h=this.itemIndex(k);}if(h>-1){if(j.remove){j.remove(h,1);}else{j=j.concat();j.splice(h,1);this.set("items",j);}}return h;},duplicate:function Y(n,j,k){var l=this.items,h=-1;if(!l||(n==null)){return -1;}if(!isNaN(n)){if(j===null||j===undefined){j=n+1;}n=l[n];}else{if(j===null||j===undefined){j=this.itemIndex(n)+1;}}if(n){var m;m=a.copy(k,a.clone(n));h=this.add([m],j);}return h;},preremove:function N(j){if(this.hasRendered){var l=this.listMapper;if(l){l.onremove(this,this.itemsContainerNode,this.ctxtBuilder,j);}var k=this.listBuilder;if(k){k.onremove(this,this.ctxtBuilder,j);}var h=this.listSelector;if(h){h.onremove(this,j);}if(this._eros){this.onscroll();}}if(this.onremove){this.onremove(j);}if(this._super){this._super(j);}},move:function S(l,q){function o(s,r){return q>=s&&q<=s+r;}var p=(this.items&&this.items.length)||0;if(q===-1||q==null||isNaN(q)){q=p;}else{q=Math.min(q,p);}var k,h,n,m;if(l.constructor===Array){h=l;n=l;m=(h&&h.length)||0;if(o(l[0],l.length)){return false;}k=f.get(this.items,l);}else{if(typeof (l)==="object"){k=[l];m=1;h=this.itemIndex(k[0]);n=[h];if(o(h,1)){return false;}}else{h=l;n=[l];m=1;if(o(h,1)){return false;}k=[this.items[h]];}}for(var j=0;j<m;j++){if(n[j]<=q){q--;}}if(k[0]!=null){this.remove(h);this.add(k,q);}return true;},itemIndex:function F(h){if(h==null){return -1;}var j=this.itemIdField;return j?f.find(this.items,j,h[j]):f.indexOf(this.items,h);},prechange:function T(k){if(this.hasRendered){var j=[this.listBuilder,this.listMapper];for(var l=0,h=j.length;l<h;l++){var m=j[l];if(m&&m.onchange){m.onchange(this,this.itemsContainerNode,this.ctxtBuilder,k);}}}},makeObservable:false,_set_items:function J(o,h){var m=this.items;h=this.initItems(h);this.items=h;if(m!==h){var l=this,k=function(){if(l.autoHide){l.set("visible",!!(h&&h.length));}l=null;},j=this.hasRendered;if(j){this.refresh(k);}else{k();}}return m!==h;},premousedown:function d(h){A(this,"premousedown",h);},premouseup:function Q(h){A(this,"premouseup",h);},scrollTo:function V(j){var h,k=this.listMapper;if(k&&k.toItem){if(!isNaN(j)){h=j;}else{h=this.itemIndex(j);}if(h>=0){k.toItem(this,h);}}},draggable:false,getDragData:function(m){L(this,m.id);var k=O(this,m.src),j=k&&k.idxActual;if((j>-1)&&this.selectedIndices[j]){var l=this.sortSelectedIndices(),h=f.get(this.items,l)||[];switch(h.length){case 1:return a.copy({html:h[0][this.itemDisplayField],index:l[0]},a.copy(h[0]));case 0:return null;default:return a.copy({html:h.length+" selections",indices:l},h);}}},dropZone:false,ondragenter:function(h){L(this,h.id);this.set("dropCuePos",O(this,h.tgt));},ondragover:function(h){this.set("dropCuePos",O(this,h.tgt));},ondragleave:function(h){this.set("dropCuePos",null);},isDragValid:function C(h){return h&&h.src&&h.src.data;},ondragstart:function(h){if(!(h&&h.src&&h.src.data)){return false;}},allowCopy:false,ondragend:function(l){var j=l&&l.tgt,h=j&&j.widget;if(h===this){}else{if(this.tree&&h&&h.tree===this.tree){if(!this.allowCopy||!c.ctrlKey(j.hWin,j.e)){var k=l.src&&l.src.data;if(k&&(k.indices||(k.index!==null))){this.remove(k.indices||k.index);}}}}},ondrop:function(q){var u=q&&q.src,p=u&&u.data;if(p){var k=O(this,q.tgt,false),r=k&&k.idx,l=(p&&p.constructor===Array),j=this.sortSelectedIndices();var n=this.items;r=Math.min(r,n&&n.length)||0;var t=true;if(u.widget===this){t=this.move(j,r);f.forEach(j,function(s){if(s<=r){r--;}});}else{this.add(l?p:[p],r);}if(t){var o=l?p.length:1,h={};for(var m=0;m<o;m++){h[r+m]=true;}this.set("selectedIndices",h);}}this.set("dropCuePos",null);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget");var C=mstrmojo.css,G=mstrmojo.array;function F(H,J){var I={searchMetadata:{taskId:"searchMetadata",styleName:this.searchStyleName,rootFolderID:this.rootID,searchPattern:this.searchPattern+"*",nameWildcards:(this.qse?16:1),quickSearch:this.qse,sortKey:(this.qse?-1:6),blockBegin:this.blockBegin||1,blockCount:this.blockCount,recursive:1,folderBrowserStyle:0,includeAncestorInfo:"true",includeObjectDesc:this.includeObjectDesc,searchXML:this.searchXML||"",dataSourcesXML:this.dataSources||"",objectType:this.objectTypes},browseFolder:{taskId:"searchMetadata",rootFolderID:this.rootID,blockBegin:this.blockBegin,blockCount:this.blockCount,recursive:this.hierarchical?0:(this.searchXML?"":1),folderBrowserStyle:this.hierarchical?1:0,includeAncestorInfo:String(!!this.hierarchical),searchXML:this.searchXML||"",dataSourcesXML:this.dataSources||"",objectType:this.objectTypes},browseElements:{taskId:"browseElements",styleName:"MojoAttributeStyle",attributeID:this.rootID,blockBegin:this.blockBegin,blockCount:this.blockCount,filterXML:this.filterXML||"",searchPattern:this.searchPattern||"",matchCase:!!this.matchCase,dataSourcesXML:this.dataSourcesXML||"",includeFormNames:!!this.collectForms,includeFormValues:!!this.bIncludeFormValues,displayedForms:this.displayedForms||1,dimensionID:this.dimensionId||""}}[H]||{};if(typeof J==="object"){mstrmojo.hash.copy(J,I);}return I;}var B="##searchPattern";mstrmojo.SearchBox2=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.SearchBox2",taskId:"searchMetadata",rootID:null,searchStyleName:"MojoFolderStyle",objectTypes:"3,14,256,257,1024,1027,2048,3072,10",token:{searchMetadata:/\//,browseElements:/(^-)|(,)|( OR )|( AND)|([<>]=?)|(&)|( )|(["\[\]\/])/},blockCount:50,blockBegin:1,minSearchLength:2,matchCase:false,enableMatchCase:true,supportIncFetch:true,quickSearch:false,searchAfterSearchPatternRestored:false,includeObjectDesc:true,forceResetCache:false,onUpdateSearchParams:mstrmojo.emptyFn,markupString:'<table id={@id} cellspacing=0 cellpadding=0 class="mstrmojo-SearchBox-Wrapper {@cssClass}" style="{@cssText};"><tr><td><div class="mstrmojo-SearchBox" mstrAttach:click ><input class="mstrmojo-SearchBox-input" type="text" mstrAttach:keyup,blur /></div></td><td><div class="mstrmojo-SearchBox-bg"><div class="mstrmojo-SearchBox-search" id="{@id}sbSearch" mstrAttach:click ></div></div></td><td><div class="mstrmojo-SearchBox-options" style="{@cssTextShowMC}"><input id="{@id}sbMatchCase" type="checkbox" mstrAttach:click /><label for="{@id}sbMatchCase">'+mstrmojo.desc(4326,"Case Sensitive")+"</label></div></td></tr></table>",markupSlots:{inputNode:function(){return this.domNode.rows[0].cells[0].firstChild.firstChild;},searchNode:function(){return this.domNode.rows[0].cells[1].firstChild.firstChild;},optionNode:function(){return this.domNode.rows[0].cells[2].firstChild.firstChild;}},preBuildRendering:function(){this.cssTextShowMC=this.enableMatchCase?"":"display: none";},postBuildRendering:function(){if(this._super){this._super();}this.matchCase=this.optionNode.checked;},onkeyup:function E(H){var J=this;var I=J.searchTimer;if(I){window.clearTimeout(I);}J.searchTimer=window.setTimeout(function(){J.onkeyupDelayed(H);delete J._searchTimer;},parseInt(H.e.keyCode||H.e.charCode,10)===13?0:J.searchDelay);},onkeyupDelayed:function A(I){var H=I.hWin,K=I.e||H.event;var J=mstrmojo.string.trim(this.inputNode.value);if(this.searchNode){C.toggleClass(this.searchNode,["clear"],J.length>0);}this.showTaskError=false;this.click2Search=false;if(J.length==0||this.autoSubmit||this.onEnter&&K.keyCode===13){this._onsearch();}},onEnter:function(){this._onsearch();},onclick:function(I){var H=I.hWin,K=I.e||H.event,M=K.target||K.srcElement,L=M&&M.id;switch(L.replace(this.id,"")){case"sbDown":if(this.enableMatchCase){var J=this.optionNode.parentNode.style;J.display=J.display=="block"?"none":"block";}break;case"sbSearch":if(this.inputNode.value.length>0){this.clearSearch();}break;case"sbMatchCase":this.set("matchCase",this.optionNode.checked);break;case"sbSpinner":break;}},clearSearch:function(){this.inputNode.value="";C.removeClass(this.searchNode,["clear"]);var I=this.searchCache,H=this.rootID;if(I&&I[H]){I[H][B]="";}this._onsearch(true);},onmatchCaseChange:function(){this.matchCaseChanged=true;this._onsearch();},onrootIDChange:function(){this.rootChanged=true;this._setupCache(this.forceResetCache);var I=this.searchCache[this.rootID];if(I){var H=I[B]||"";this.inputNode.value=H;if(H.length>0){if(H.length>=this.minSearchLength&&this.searchAfterSearchPatternRestored){this._onsearch();}}}},getRootID:function(){},contentWidget:null,_notifyContentWidget:function(I){var H=this.contentWidget||this;H.set("items",I[0]);if(this.supportIncFetch){var J=I[1],L=I[2],K=this.blockCount;H.set("ifs",{np:Math.floor(J/K)+((J%K>0)?1:0),cp:Math.floor(L/K)+((L%K>0)?1:0)});}},_onsearch:function(H){this.getRootID();this._setupCache();var K=mstrmojo.string.trim(this.inputNode.value);if(K.length===0){H=true;}var L=this.token[this.taskId];if(L.test(K)){}if(this.searchPattern==K&&!this.rootChanged&&!this.matchCaseChanged&&!this.click2Search){return ;}var M=this.rootID,J=this.searchCache[M];if((K.length<this.minSearchLength&&!this.click2Search)&&!H){if(this.searchPattern&&this.searchPattern.length>=this.minSearchLength){this._notifyContentWidget(J[M]);this.searchPattern=K;}}else{this.searchPattern=K;J[B]=this.searchPattern;var I=this.filterCache(K,J,H);if((this.click2Search||I===null)&&!H){this.blockBegin=1;this.fetch();return ;}else{this._notifyContentWidget(I);}}J[B]=K;},_setupCache:function(J){var K=this.searchCache,I=this.rootID;if(K&&(J||!K[I])){K[I]=K[I]||{};var H=this.contentWidget&&this.contentWidget.items||this.rootCacheItems||[];K[I][I]=[H,this.totalSize||0,this.blockBegin||1].concat();}},taskCallId:0,path:mstrConfig.taskURL,method:"POST",serverRequest:function D(H,I){if(mstrApp&&mstrApp.serverRequest){mstrApp.serverRequest(H,I);}else{mstrmojo.xhr.request("POST",this.path,I,H,undefined,this.XServer,this.baseParams);}},fetch:function(){this.rootChanged=false;this.matchCaseChanged=false;if(this.spinnerNode){this.spinnerNode.style.display="block";}if(this.preFetch){this.preFetch();}var H=this,I=F.apply(this,[this.taskId]);I.searchPattern=this.searchPattern;this.onUpdateSearchParams(I);var J={success:function(K){var L=K.items||K.es||[];L=[L,K.totalSize||K.sz||0,K.blockBegin||K.bb];mstrmojo.all[H.id].searchCache[H.rootID][(I.searchPattern.length==0?H.rootID:H.buildIndex(I.searchPattern))]=L;H._notifyContentWidget(L);},failure:function(K){if(H.showTaskError){mstrmojo.alert(mstrmojo.desc(8117,"Data request failed:")+" \n"+K.getResponseHeader("X-MSTR-TaskFailureMsg"));}},complete:function(){if(H.spinnerNode){H.spinnerNode.style.display="none";}if(H.postFetch){H.postFetch();}}};this.serverRequest(I,J);},fetchPage:function(H){this.blockBegin=H*this.blockCount+1;this.fetch();},filterCache:function(J,M,I){var H=M&&M[I?this.rootID:this.buildIndex(J)];if(H){return H;}var K=this.token[this.taskId];if(K.test(J)||this.totalSize>this.blockCount){return null;}var O=J.replace(/.$/,"");H=M&&M[this.buildIndex(O)];while(H===undefined&&(O=O.replace(/.$/,"")).length>0){H=M&&M[this.buildIndex(O)];}if(H!==undefined){if(H[1]>this.blockCount){return null;}var L=H[0],N=[];G.forEach(L,function(P){if(P.n.search(new RegExp(J,this.matchCase?"":"i"))>-1){N.push(P);}});this.totalSize=N.length;return(M[this.buildIndex(J)]=[N,N.length,this.blockBegin].concat());}return null;},buildIndex:function(H){if(H.replace(/^\s|\s$/g,"").length===0){return"";}return !this.matchCase?H.toUpperCase():H+"::0";},init:function(H){if(this._super){this._super(H);}this.qse=mstrApp.useQuickSearch&&mstrApp.useQuickSearch()||0;this.autoSubmit=this.quickSearch&&(mstrApp.searchAutoComplete&&mstrApp.searchAutoComplete()||false);this.searchDelay=mstrApp.searchAutoCompleteDelay&&mstrApp.searchAutoCompleteDelay()||0;this.xhr=new mstrmojo.SimpleXHR();this.searchCache=this.searchCache||{};},clear:function(){this.inputNode.value="";C.removeClass(this.searchNode,["clear"]);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.hash","mstrmojo.css","mstrmojo.string");function A(C,B){return mstrmojo.hash.copy(B,{label:"",tabIndex:"",cssDisplay:"inline",name:null,markupString:'<span id="{@id}" class="'+C+' {@cssClass}" style="{@cssText}" title="{@tooltip}"><input id="{@id}_input"  type="{@type}" name="{@name}" value="{@value}" tabIndex="{@tabIndex}" mstrAttach:click tstid="{@tstid}"/><label for="{@id}_input">{@label}</label></span>',markupSlots:{inputNode:function(){return this.domNode.firstChild;},labelNode:function(){return this.domNode.childNodes[1];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=(this.visible)?this.cssDisplay:"none";},onenabledChange:function(){this.inputNode.disabled=!this.enabled;mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,"disabled");},onlabelChange:function(){this.labelNode.innerHTML=mstrmojo.string.encodeHtmlString(this.label);},oncheckedChange:function(){this.inputNode.checked=this.checked;}},checked:false,preclick:function(){this.set("checked",this.inputNode.checked);},isChecked:function(){return this.inputNode.checked;}});}mstrmojo.CheckBox=mstrmojo.declare(mstrmojo.Widget,null,A("mstrmojo-CheckBox",{scriptClass:"mstrmojo.CheckBox",type:"checkbox"}));mstrmojo.ImageCheckBox=mstrmojo.declare(mstrmojo.Widget,null,A("mstrmojo-CheckBox mstrmojo-ImageCheckBox",{scriptClass:"mstrmojo.CheckBox",type:"image",cssDisplay:"block",preclick:function(){this.set("checked",!this.checked);},postCreate:function(){this.markupMethods=mstrmojo.hash.copy(this.markupMethods);this.markupMethods.oncheckedChange=function(){mstrmojo.css.toggleClass(this.inputNode,["checked"],this.checked);};},postBuildRendering:function(){this.inputNode.src=this.src||"../images/1ptrans.gif";if(this._super){return this._super();}return true;}}));mstrmojo.RadioButton=mstrmojo.declare(mstrmojo.Widget,null,A("mstrmojo-RadioButton",{scriptClass:"mstrmojo.RadioButton",type:"radio",postBuildRendering:function(){if(mstrmojo.dom.isIE){this.inputNode.checked=this.checked;}}}));}());(function(){mstrmojo.requiresCls("mstrmojo.Widget");mstrmojo.WaitIcon=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.WaitIcon",cssFloat:"left",visible:false,markupString:'<div id="{@id}" class="mstrmojo-WaitIcon {@cssClass}" style="float:{@cssFloat};{@cssText};"></div>',markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},markupSlots:{}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom","mstrmojo.hash","mstrmojo.css");var C=mstrmojo.dom,B=mstrmojo.hash,E=mstrmojo.css;mstrmojo.Button=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Button",iconClass:"",innerIconClass:"",title:"",text:"&nbsp;",enabled:true,selected:false,markupString:'<div id="{@id}" class="mstrmojo-Button {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}" mstrAttach:touchstart,click,mousedown,mouseup><div class="mstrmojo-Button-text {@innerIconClass}"></div></div>',markupSlots:{textNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:function(){E.toggleClass(this.domNode,"disabled",!this.enabled);},onselectedChange:function(){E.toggleClass(this.domNode,"selected",this.selected);},ontextChange:function(){this.textNode.innerHTML=this.text;},ontitleChange:function(){this.domNode.title=this.title;},onwidthChange:mstrmojo.Widget.widthMarkupMethod},oniconClassChange:function D(J){var K=this.domNode;if(this.hasRendered&&K){K.className=K.className.replace(J.valueWas,"")+" "+J.value;}},onclick:mstrmojo.emptyFn,ontouchend:function I(J){this.onclick(J);}});mstrmojo.Button.newIconButton=function H(L,O,M,J,N){var K={scriptClass:"mstrmojo.Button",title:L,cssClass:O,text:"",onclick:M};if(J){K.bindings=J;}B.copy(N,K);return K;};function F(M,N,J,P){var L=[];if(J){L.push(J);}var O=P&&P.cssClass;if(O){L.push(O);delete P.cssClass;}var K={scriptClass:"mstrmojo.Button",cssClass:L.join(" "),text:M};if(N){K.onclick=N;}return B.copy(P,K);}mstrmojo.Button.newInteractiveButton=function G(M,N,P,O){var L={glowClass:"glow"};if(P&&(C.isFF||C.isWK)){B.copy({onmousedown:function J(){E.applyShadow(this.domNode,0,0,10,P);},onmouseup:function K(){E.removeShadow(this.domNode);}},L);}return F(M,N,"mstrmojo-InteractiveButton",B.copy(O,L));};mstrmojo.Button.newWebButton=function A(K,J,M,L){return F(K,J,"mstrmojo-WebButton"+(M?" hot":""),L);};mstrmojo.Button.newActionButton=function(K,L,M){var J=mstrmojo.Button.newWebButton(K,L,false,M);J.cssClass=J.cssClass+" action-button";return J;};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.Widget","mstrmojo._ListSelections");var E=mstrmojo.dom;mstrmojo.ListBase=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._ListSelections],{scriptClass:"mstrmojo.ListBase",selectionPolicy:null,itemRenderer:null,icnCssText:"",icnCss:"",markupString:'<div id="{@id}" tstid="{@tstid}" class="mstrmojo-ListBase {@cssClass}" style="{@cssText}" mstrAttach:click,dblclick,mousedown,mouseover,mouseout,contextmenu><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div>',markupSlots:{itemsContainerNode:function G(){return this.domNode.firstChild;},scrollboxNode:function A(){return this.domNode;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod},autoHide:false,itemsContainerNode:null,_markupPrefix:null,_markupSuffix:null,_itemPrefix:null,_itemSuffix:null,init:function J(K){this._super(K);if(this.autoHide){this.visible=!!(this.items&&this.items.length);}},buildRendering:function D(){this.itemsHtml="";var K=(this.renderOnScroll?this.items&&((this.renderIndex+1)*this.renderBlockSize):this.items&&this.items.length);if(K){this.itemsHtml=this._buildItemsMarkup(0,K-1,this._markupPrefix&&this._markupPrefix(),this._markupSuffix&&this._markupSuffix(),this._itemPrefix&&this._itemPrefix(),this._itemSuffix&&this._itemSuffix()).join("");}this._super();delete this.itemsHtml;this.addSlots({itemsNode:this.itemsContainerNode.firstChild});},_buildItemsMarkup:function B(K,N,U,L,V,M){var W=[],Q=0;W[Q++]=U||"";var P=this.itemRenderer,T=P&&P.render;if(T&&typeof T==="function"){var R=this.items,S=Math.min(N+1,((R&&R.length)||0)),O;for(O=K;O<S;O++){W[Q++]=V||"";W[Q++]=T(R[O],O,this);W[Q++]=M||"";}}W[Q+1]=L||"";return W;},onselectionChange:function H(W){if(!W){return ;}var S=this.itemRenderer;if(!S){return ;}var U=this.items;if(W.added&&W.added.length>0&&U.length>0&&!mstrmojo.array.some(W.added,function(Z){return !U[Z]||!U[Z].dsbld;})){return ;}var O=S.unselect,R=this.items||[],X=W.removed,N,M,L,P,Y;if(O&&X){for(P=0,Y=X.length;P<Y;P++){N=X[P];if(typeof (N)==="object"){M=(N.idx==0)?0:N.positions;N=N.idx;}else{M=N;}L=this._getItemNode(M);if(L){O(L,R[N],M,this);}}}var K=S.select,V=W.added,Q,T;if(K&&V){for(Q=0,T=V.length;Q<T;Q++){N=V[Q];if(typeof (N)==="object"){M=(N.idx==0)?0:N.positions;N=N.idx;}else{M=N;}L=this._getItemNode(M);if(L){K(L,R[N],M,this);}}}if(this.onchange){this.onchange({added:W.added,removed:W.removed});}},_set_items:function C(N,K){this.renderIndex=0;if(this.autoHide){this.set("visible",!!(K&&K.length));}var M=this.items;this.items=K;if(M!==K){var L=this.hasRendered;if(L){this.unrender(false);}this.clearSelect();if(L){this.render();}return true;}return false;},onItemContextMenu:mstrmojo.emptyFn,oncontextmenu:function F(K){E.preventDefault(window,K.e);var M=K.getTarget(),L=this.getItemFromTarget&&this.getItemFromTarget(M);if(L){if(this.onItemContextMenu(L,K)){K.cancel();}}},_getItemNode:function I(K){var L=this.itemsContainerNode;return(L&&L.childNodes[K])||null;},renderOnScroll:false});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.string");var B=mstrmojo.string;mstrmojo.Label=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Label",allowHTML:false,text:"",title:"",markupString:'<div id="{@id}" class="mstrmojo-Label {@cssClass}" style="{@cssText}" title="{@title} "mstrAttach:click></div>',markupMethods:{ontitleChange:function(){this.domNode.title=this.title;},ontextChange:function(){var C=this.text;C=B.isEmpty(C)?"":C.toString();this.domNode.innerHTML=this.allowHTML?C:B.encodeHtmlString(B.decodeHtmlString(C),true);},oncssTextChange:mstrmojo.Widget.cssTextMarkupMethod,onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:mstrmojo.Widget.enabledMarkupMethod},autoHide:false,_set_text:function A(E,C){if(this.autoHide){this.set("visible",(C!==null)&&(C!=="")&&(C!==undefined));}var D=this.text;this.text=C;return(D!==C);}});}());(function(){mstrmojo.requiresCls("mstrmojo.publisher","mstrmojo.Widget","mstrmojo.array","mstrmojo._HasChildren");var G=mstrmojo.array;function E(P){if(!this.shouldPropagateEnabled){return ;}var O=this._disabledChildren;G.forEach(P,function(Q){if(Q.enabled){O.push(Q.id);Q.set("enabled",false);}});}function J(){G.forEach(this._disabledChildren,function(O){var P=mstrmojo.all[O];if(P&&P.parent===this){P.set("enabled",true);}},this);this._disabledChildren=[];}mstrmojo.Container=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._HasChildren],{scriptClass:"mstrmojo.Container",defaultChildSlot:"containerNode",containerNode:null,preserveChildDomOrder:true,shouldPropagateEnabled:false,init:function M(P){this._super(P);this._disabledChildren=[];this.attachEventListener("addChild",this.id,function(Q){if(this.shouldPropagateEnabled&&!this.enabled){E.call(this,Q.value);}});if(this.children){this.initChildren();}var O=this.parent;if(!O||O.hasInitBindings){this.initBindings();}},destroy:function H(O){if(this.children){this.destroyChildren(true);}if(this.bindings){this.destroyBindings();}this._super(O);},unrender:function I(Q){var R=this.children,O=(R&&R.length)||0,P;for(P=O-1;P>-1;P--){R[P].unrender(true);}this._super(Q);},postBuildRendering:function A(){if(this._super()!==false){this.renderChildren();return true;}return false;},renderChildren:function L(){var Q=this.children,O=(Q&&Q.length)||0,P;for(P=0;P<O;P++){var R=Q[P];if(this.childRenderCheck(R)){R.render();}}},childRenderCheck:function D(P){if(P&&!P.hasRendered){var O=P.slot||this.defaultChildSlot;return !!this[O];}return false;},addChildren:function N(R,P,Q){var O=this._super(R,P,Q);if(O){this.childRenderOnAddCheck(O);}return O;},removeChildren:function F(V,R){var U=V?[V]:(this.children||[]),O=U.length,S;for(S=O-1;S>-1;S--){var Q=U[S],P=Q&&Q.domNode;if(P){var T=this[(Q.slot||this.defaultChildSlot)];if(P.parentNode===T){T.removeChild(P);}}}return this._super(V,R);},childRenderOnAddCheck:function B(Q){if(this.hasRendered&&Q){var O=Q.length,P;for(P=0;P<O;P++){var R=Q[P];if(this.childRenderCheck(R)){R.render();}else{if(R&&R.hasRendered){this.onchildRenderingChange(R);}}}}},onchildRenderingChange:function K(O){var W=O&&O.domNode;if(!W){return ;}var P=this.defaultChildSlot,V=O.slot||P,Y=this[V],Q=this.children;if(!Y){if(W.parentNode){W.parentNode.removeChild(W);}}else{if(W.parentNode===Y){return ;}if(!this.preserveChildDomOrder){Y.appendChild(W);}else{var R,U;for(U=Q.length-1;U>=0;U--){var X=Q[U];if(X===O){break;}if(V===(X.slot||P)){var Z=X.domNode;if(Z&&Z.parentNode===Y){R=Z;}}}if(R){Y.insertBefore(W,R);}else{Y.appendChild(W);}}}if(mstrmojo.publisher.hasSubs(this.id,"childrenRendered")){var S=Q.length,T;for(T=0;T<S;T++){if(!Q[T].domNode){return ;}}this.raiseEvent({name:"childrenRendered"});}},propagateChildProps:function C(S){var R=this[S],Q=this.children||[],O=Q.length,P;for(P=0;P<O;P++){Q[P].set(S,R);}}});mstrmojo.Container.enabledMarkupMethod=function(){mstrmojo.Widget.enabledMarkupMethod.apply(this,arguments);if(this.shouldPropagateEnabled){if(this.enabled){J.call(this);}else{E.call(this,this.children);}}};}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.hash");function A(H,E,G,F){var D=mstrmojo.hash.copy(F,{props:{left:{isStyle:true,start:H,stop:E,suffix:"px",ease:mstrmojo.ease.linear}},duration:G});(new mstrmojo.fx.AnimateProp(D)).play();}function B(K,N,G,L){var I=K.domNode,M=I.offsetWidth,D=K.scrollableIncFetch;var E=K.hasAnimation&&(!(/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent))||Number(RegExp.$1)>3.5),J=L?1:-1,F=parseInt(M,10)*J,H=E?500:0;A(0,-F,H,{target:G,duration:H,preStart:function(){this.target.style.overflowY="hidden";},onEnd:function(){this.target.style.display="none";}});A(F,0,H,{target:N,preStart:function(){this.target.style.display="block";this.target.style.overflowY=(D?"visible":"auto");}});if(K.waiting){A(0,-F,H,{widget:K,slot:"loaderNode",onEnd:function(){this.widget.waiting=false;}});}}var C=function(D){var E=D.currentPage;if(E===D.p1Node){E=D.p2Node;}else{E=D.p1Node;}D.currentPage=E;};mstrmojo.Booklet=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Booklet",pageClass:"mstrmojo-BookletPage",markupString:'<div id="{@id}" class="mstrmojo-Booklet {@cssClass}" style="{@cssText}"><div id="{@id}_p1" class="mstrmojo-BookletPage" ></div><div id="{@id}_p2" class="mstrmojo-BookletPage" style="left:-100%;"></div><div id="{@id}_ldr" class="mstrmojo-BookletLoader" ></div></div>',markupSlots:{containerNode:function(){return this.domNode;},p1Node:function(){return this.domNode.firstChild;},p2Node:function(){return this.domNode.childNodes[1];},loaderNode:function(){return this.domNode.childNodes[2];}},markupMethods:{onnextChange:function(){var G=this.next;if(!G){return ;}var D=this.currentPage,F=this.p1Node,E=this.currentPage=(D==F)?this.p2Node:F;if(!(G instanceof mstrmojo.Obj)){G=this.next=mstrmojo.insert(G);}if(!G.hasRendered){G.placeholder=E.appendChild(document.createElement("span"));G.render();}else{if(E.firstChild){E.replaceChild(G.domNode,E.firstChild);}else{E.appendChild(G.domNode);}}this.set("waiting",false);if(E&&D){B(this,E,D,this.turnDirFwd);}else{if(this.scrollableIncFetch){E.style.overflowY="visible";}}},onwaitingChange:function(D){this.loaderNode.style.left=(this.waiting)?0:"-100%";},onheightChange:function(D){if(this.height){this.domNode.style.height=this.height;}},onwidthChange:function(D){if(this.width){this.domNode.style.width=this.width;}}},enabled:true,waiting:false,next:null,currentPage:null,turnDirFwd:true,hasAnimation:true,scrollableIncFetch:false,FORWARD:true,REVERSE:false,turnFwd:function(D){this.turn(D,this.FORWARD);},turnBack:function(D){this.turn(D,this.REVERSE);},turn:function(D,E){this.set("turnDirFwd",E);this.set("next",D);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.locales","mstrmojo.date","mstrmojo.DI.DIConstants","mstrmojo.DI.DIDatabaseHelper");mstrmojo.requiresDescs(2052,2170,2265,3434,3544,4530,4699,8002,8984,9614,9919,9920,9921,9922,12491,12492,12493,12494,12495,12509,12771,13031,13131,13132,13980,13981,8536);var T=mstrmojo.DI.DIConstants,O=T.dataTypeMenuItems,L=T.rdcsFlag,D=mstrmojo.dom,J=mstrmojo.array;mstrmojo.DI.DIHelpers=mstrmojo.declare(mstrmojo.Obj,null,null);mstrmojo.DI.DIHelpers.isIE7=function N(){return mstrmojo.dom.isIE7;};mstrmojo.DI.DIHelpers.isIE=function(){return D.isIE||!!D.userAgent.match(/Trident\/7\.0/);};mstrmojo.DI.DIHelpers.isIEOrEdge=function(){return mstrmojo.dom.isEdge||this.isIE();};mstrmojo.DI.DIHelpers.getURLCaption=function(){var U="";if(mstrApp.diParams&&mstrApp.diParams.EnableURLImport){if(mstrApp.diParams.EnableFileImport){if(mstrApp.isSingleTier){if(window.FormWrapper!==window.client){U+="File://";}}else{U+="File://";}}if(mstrApp.diParams.EnableHttpImport){if(U!==""){U+=", ";}U+="Http://, Https://";}if(mstrApp.diParams.EnableFTPImport){if(U!==""){U+=", ";}U+="Ftp://";}}return U;};mstrmojo.DI.DIHelpers.getUrlTooltip=function C(){var U="";if(!mstrApp.diParams){return U;}if(!mstrApp.diParams.EnableURLImport){U=mstrmojo.desc(12491,"URL file uploads are currently disabled. Please contact your administrator.");}else{U=mstrmojo.desc(12492,"Use one of the following URL formats to upload your file:")+" ";U+=mstrmojo.DI.DIHelpers.getURLCaption();if(mstrApp.enableFileImport){U+="\r\r";U+=mstrmojo.desc(12493,"'File://' format allows you to upload files in your local machine. For example: File://ComputerName/path/FileName.");}if(mstrApp.enableHttpImport||mstrApp.enableHttpsImport){U+="\r\r";if(mstrApp.enableFileImport){U+=mstrmojo.desc(12494,"Some other examples are:");}else{U+=mstrmojo.desc(12495,"Some examples are:");}}if(mstrApp.enableHttpImport){U+="\r";U+="http://host/path/FileName";U+="\r";U+="https://user:password@host/path/FileName";}if(mstrApp.enableFtpImport){U+="\r";U+="ftp://user:password@host/path/FileName";U+="\r";U+="ftp://user:password@host:port/path/FileName";}}return U;};mstrmojo.DI.DIHelpers.createMSTRObjects=function(W,Y){var U,X,V;if(W.constructor===Array){U=W;for(V=0;V<U.length;V++){U[V]=mstrmojo.DI.DIHelpers.createMSTRObjects(W[V],Y);}}else{if(typeof W==="object"){U=new mstrmojo.Obj(W);for(X in W){if(!Y||Y.indexOf(X)===-1){if(W.hasOwnProperty(X)){U.set(X,mstrmojo.DI.DIHelpers.createMSTRObjects(W[X],Y));}}}}else{U=W;}}return U;};mstrmojo.DI.DIHelpers.getURLParameters=function(U){var V;var Y;var X=[];if(U){if(U.indexOf("?")>0){U=U.substr(U.indexOf("?")+1);}Y=U.split("&");for(V=0;V<Y.length;V++){var W=Y[V].split("=");if(W.length===2){X[W[0]]=W[1];}}}return X;};mstrmojo.DI.DIHelpers.getBackendSourceType=function(U){var V=T.backendSourceSubtype.localFile;switch(U){case T.sourceSubtype.dropbox:V=T.backendSourceSubtype.dropbox;break;case T.sourceSubtype.bisource:V=T.backendSourceSubtype.bISources;break;case T.sourceSubtype.clipboard:V=T.backendSourceSubtype.clipboard;break;case T.sourceSubtype.facebook:V=T.backendSourceSubtype.facebook;break;case T.sourceSubtype.googleAnalytics:V=T.backendSourceSubtype.googleAnalytics;break;case T.sourceSubtype.googleBigQuery:V=T.backendSourceSubtype.googleBigQuery;break;case T.sourceSubtype.googleBigQueryFFSQL:V=T.backendSourceSubtype.googleBigQueryFFSQLModel;break;case T.sourceSubtype.googleBigQuerySingleTable:V=T.backendSourceSubtype.googleBigQuerySingleTable;break;case T.sourceSubtype.googleDrive:V=T.backendSourceSubtype.googleDrive;break;case T.sourceSubtype.hadoop:V=T.backendSourceSubtype.hadoopFileBrowser;break;case T.sourceSubtype.localFile:V=T.backendSourceSubtype.localFile;break;case T.sourceSubtype.mdx:V=T.backendSourceSubtype.OLAPSources;break;case T.sourceSubtype.salesforce:V=T.backendSourceSubtype.salesforce;break;case T.sourceSubtype.samplefile:V=T.backendSourceSubtype.samplefile;break;case T.sourceSubtype.searchOnSource:V=T.backendSourceSubtype.searchAsASource;break;case T.sourceSubtype.twitter:V=T.backendSourceSubtype.twitter;break;case T.sourceSubtype.url:V=T.backendSourceSubtype.url;break;case T.sourceSubtype.publicData:V=T.backendSourceSubtype.publicData;break;case T.sourceSubtype.cloudElement:V=T.backendSourceSubtype.cloudElement;break;}return V;};mstrmojo.DI.DIHelpers.getStateParameters=function(V){var U;var Y;var W=[];if(V.indexOf(":")>=0){Y=V.split(":");}else{Y=V.split("%3A");}for(U=0;U<Y.length;U++){var X=Y[U];if(X.substr(2,1)==="_"){W[X.substr(0,2)]=X.substr(3);}}return W;};mstrmojo.DI.DIHelpers.getExtensionType=function(W){var V=W.toLowerCase(),U;if(V===".xls"||V===".xlsx"||V===".xlsm"){U=T.xdaType.excel;}else{if(V===".txt"||V===".csv"||V===".tsv"||V===".prn"){U=T.xdaType.text;}else{U=0;}}return U;};mstrmojo.DI.DIHelpers.setTablesrc=function(U,W,V){if(W){if(!U.tablesSrc[W]){U.tablesSrc[W]=[];}U.tablesSrc[W].push(V);}};function S(U){var W={0:2,1:2,2:2,3:2,4:2,5:2,6:2,7:2,8:3,9:3,10:3,11:2,12:2,13:2,14:8,15:9,16:1,17:3,18:3,21:2,22:2,23:3,30:11,31:2,33:3,34:2},Z={1:T.columnDataTypes.integer,2:T.columnDataTypes.integer,6:T.columnDataTypes.dtdouble,7:T.columnDataTypes.dtfloat,21:T.columnDataTypes.integer,22:T.columnDataTypes.nlong,30:T.columnDataTypes.bigDecimal,34:T.columnDataTypes.int64},V=W[U],Y=Z[U],X="";switch(V.toString()){case T.dataTypeMenuItems.NUMBER:switch(Y){case T.columnDataTypes.integer:X=mstrmojo.desc(9614,"Integer");break;case T.columnDataTypes.nlong:X=mstrmojo.desc(13131,"Long");break;case T.columnDataTypes.int64:X=mstrmojo.desc(13132,"Big Integer");break;case T.columnDataTypes.dtfloat:X=mstrmojo.desc(8002,"Float");break;case T.columnDataTypes.dtdouble:X=mstrmojo.desc(2265,"Double");break;case T.columnDataTypes.bigDecimal:X=mstrmojo.desc(9920,"Big Decimal");break;default:X=mstrmojo.desc(3434,"Number");break;}break;case T.dataTypeMenuItems.DATE:X=mstrmojo.desc(2052,"Date");break;case T.dataTypeMenuItems.DATE_TIME:X=mstrmojo.desc(9919,"DateTime");break;case T.dataTypeMenuItems.TIME:X=mstrmojo.desc(2170,"Time");break;case T.dataTypeMenuItems.TEXT:X=mstrmojo.desc(3544,"Text");break;case T.dataTypeMenuItems.HTML_TAG:X=mstrmojo.desc(9921,"HTML Tag");break;case T.dataTypeMenuItems.PHONE_NUMBER:X=mstrmojo.desc(8984,"Phone Number");break;case T.dataTypeMenuItems.SYMBOL:X=mstrmojo.desc(4530,"Symbol");break;case T.dataTypeMenuItems.URL:X=mstrmojo.desc(9922,"URL");break;case T.dataTypeMenuItems.EMAIL:X=mstrmojo.desc(4699,"Email");break;}return X;}mstrmojo.DI.DIHelpers.getDataTypeString=S;mstrmojo.DI.DIHelpers.parseAlternateSourceValidationResults=function M(c){var a=[],Y,Z,b,d,U,W,X,V;J.forEach(c,function(e){Y=Z=b=d="";W=(e.vt===3)?1:0;switch(e.vt){case 0:case 1:case 2:case 3:Y=e.n;Z=S(e.ddt);U=e.src;b=U.n;d=S(U.ddt);break;case 4:Y=e.n;Z=S(e.ddt);break;case 8:U=e.src;b=U.n;d=S(U.ddt);break;}X=Z?Y+"("+Z+")":Y;V=d?b+"("+d+")":b;a.push([X,W,V]);});return a;};mstrmojo.DI.DIHelpers.getURLFileName=function(V){var U=V.lastIndexOf("/");return U>=0&&U+1!==V.length?V.substr(U+1):V;};mstrmojo.DI.DIHelpers.isOperationMode=function(U){return U!==undefined&&U!==null;};mstrmojo.DI.DIHelpers.isCtrlKey=function(U,W){var V=W||(U||window).event;return V.ctrlKey||V.metaKey;};mstrmojo.DI.DIHelpers.isRefreshable=function(V){var U,W=0;for(U in V.importSources){var X=V.importSources[U];if(X.type===T.sourceType.file&&(X.subtype===T.sourceSubtype.url||X.subtype===T.sourceSubtype.publicData)){if(!X.sourceInfo||X.sourceInfo.url.indexOf("http://mirror.microstrategy.com/datahub/samples")!==0){W++;}}}if(V.getAllTableID().length===W&&!mstrApp.diParams.EnableHttpImport&&!mstrApp.diParams.EnableFTPImport&&!mstrApp.diParams.EnableFileImport&&!mstrApp.diParams.EnableURLImport){return false;}return true;};mstrmojo.DI.DIHelpers.strStartsWith=function(V,U){return V.indexOf(U)===0;};mstrmojo.DI.DIHelpers.adjustDataIdx=function(X,W){var U=[],V;if(!X||X.length===0){return ;}J.forEach(X,function(Y){V=Y.subColumns;if(V&&V.length>1){U=U.concat(V);}else{U.push(Y);}});U.sort(function(Z,Y){return Z[W]-Y[W];});};mstrmojo.DI.DIHelpers.setDataIdx=function(W,V,U){if(!V||V.length===0){return ;}if(V[0].hasOwnProperty("clix")){J.forEach(W,function(Y){var X=Y.ix;Y[U]=J.find(V,"clix",X);if(Y.isMultiForm){J.forEach(Y.subColumns,function(Z){Z[U]=J.find(V,"clix",Z.ix);});}});}if(V[0].hasOwnProperty("did")){J.forEach(W,function(Z){var Y=Z.did;var X=J.find(V,"did",Y);if(X!==-1){Z[U]=X;}if(Z.isMultiForm){J.forEach(Z.subColumns,function(a){X=J.find(V,"did",a.did);if(X!==-1){a[U]=X;}});}});}};mstrmojo.DI.DIHelpers.encodeData=function(U){var V="";if(U!==undefined){if(typeof U==="number"){V=U;}else{V=mstrmojo.string.encodeHtmlString(U,false,true);}}return V;};var E={0:"Bytes",1:"KB",2:"MB",3:"GB",4:"TB",5:"PB"};function P(U){return E[U]||"unknown";}mstrmojo.DI.DIHelpers.getRoundSize=function I(V){var U;for(U=0;(V/1024)>1;U++){V=V/1024;}V=V.toPrecision(3);return V+P(U);};mstrmojo.DI.DIHelpers.findNewElements=function(W,X){var V=[],U;if(W&&W.length){J.forEach(X,function(Y){U=J.indexOf(W,Y);if(U===-1){V.push(Y);}});}else{if(X&&X.length){V=[].concat(X);}}return V;};mstrmojo.DI.DIHelpers.generateCubeName=function(V){var U,W,X=50;U=V.join(" ");if(U.length>X){U=U.slice(0,X)+"...";}W=V.length;if(W>1){U+=" ("+W+" tables)";}return U;};mstrmojo.DI.DIHelpers.parseValidateSourceResults=function(V){var U={isValidate:true,hasError:false,tbids:[],tableValidate:[],missingColumnTbids:[],mismatchedDatatypeTbids:[],missingTableTbids:[],errorTableTbids:[],missingColumns:{},mismatchedDatatypeColumns:{},missingTablesColumns:{},errorTableErrCode:{},errorTableErrMsg:{}},W=V&&V.vts;J.forEach(W,function(e){var X=e.tbid,f=e.vt,Z=e.emsg,c=e.cols||[],Y=true,d=false,b,g=[],a=[];if(f===1){Y=true;}else{switch(f){case T.backendError.switchingFileType:case T.backendError.noExternalSession:case T.backendError.databaseCredentialsNotAvailable:case T.backendError.CECredentialNotAvailable:case T.backendError.AuthenticationError:case T.backendError.shouldBeIgnored:d=true;break;}J.forEach(c,function(h){var j=h.vt;switch(j){case 1:a.push(h);break;case 4:g.push(h);break;}});}if(d){U.errorTableTbids.push(X);U.errorTableErrCode[X]=f;U.errorTableErrMsg[X]=Z;U.isValidate=false;U.hasError=true;}b=g.length>0&&g.length===c.length;if(g.length>0||a.length>0){Y=false;}else{Y=true;}if(Y===false){U.isValidate=false;}U.tbids.push(X);U.tableValidate.push(Y);if(g.length>0){if(b){U.missingTableTbids.push(X);U.missingTablesColumns[X]=g;}else{U.missingColumnTbids.push(X);U.missingColumns[X]=g;}}if(a.length>0){U.mismatchedDatatypeTbids.push(X);U.mismatchedDatatypeColumns[X]=a;}});return U;};mstrmojo.DI.DIHelpers.truncate=function(W,Y,U){if(W&&W.length>Y){var a=3,V=Y-a,Z=Math.ceil(V/2),X=Math.floor(V/2);if(U){return W.substr(0,V)+"...";}else{return W.substr(0,Z)+"..."+W.substr(W.length-X);}}else{return W;}};mstrmojo.DI.DIHelpers.getAbsoluteFileName=function(U){var V,W=U.lastIndexOf("\\");if(W===-1){W=U.lastIndexOf("/");}V=U.substring(W+1,U.length);return V;};mstrmojo.DI.DIHelpers.reevaluatePopupPosition=function(U){if(U){var V=U.style,Y=V.display,X=V.left,W=V.top;V.display="block";if(parseInt(X.substring(0,X.length-2))<0){V.left="0px";}if(parseInt(W.substring(0,W.length-2))<0){V.top="0px";}V.display=Y;}};mstrmojo.DI.DIHelpers.expandNode=function(V){var U=V.visible;V.set("visible",!U);return !U;};mstrmojo.DI.DIHelpers.normalizeTimestamp=function(W){var V=W.replace(/-/g,"/");var U=V.indexOf(".");if(U>0){V=V.substring(0,U);}return V;};mstrmojo.DI.DIHelpers.getBackendErrorStr=function(V,U){var W="";switch(V){case T.backendError.switchingFileType:W=mstrmojo.desc(12509,"Switching the file type is not allowed during republishing or editing the cube.");break;case T.backendError.noExternalSession:case T.backendError.databaseCredentialsNotAvailable:case T.backendError.CECredentialNotAvailable:case T.backendError.AuthenticationError:W=mstrmojo.desc(14392,"We do not have the credentials needed to get the data for this table. Please provide the credentials to proceed publishing this table.");break;}return W;};mstrmojo.DI.DIHelpers.getCommonElements=function(X,Z,Y){var V=[],W,U;for(W=0;X&&W<X.length;W++){for(U=0;Z&&U<Z.length;U++){if(Y(X[W],Z[U])){V.push(X[W]);break;}}}return V;};mstrmojo.DI.DIHelpers.formatDateAndTime=function(c,X){var b=mstrmojo.date;var V=mstrmojo.locales;var W,d,a,Z,U,Y;W=b.parseDateAndOrTime(c);d=W.date;a=W.time;if(X){Y=new Date(Date.UTC(d.year,d.month-1,d.day,a.hour,a.min,a.sec));W=b.getDateJson(Y);d=W;a=W;}Z=b.formatDateInfo(d,V.datetime.DATEDISPLAYFORMAT);U=b.formatTimeInfo(a,V.datetime.TIMEDISPLAYFORMAT);return Z+" "+U;};mstrmojo.DI.DIHelpers.isServerBasedWS=function(){return !!mstrApp.isWorkstation&&!mstrApp.isSingleTier;};mstrmojo.DI.DIHelpers.isLocalWS=function(){return !!mstrApp.isWorkstation&&!!mstrApp.isSingleTier;};mstrmojo.DI.DIHelpers.isDIinVI=function(){return !!mstrApp.isWorkstation&&!!mstrApp.isSingleTier&&!!mstrApp.isPopup;};mstrmojo.DI.DIHelpers.extractFileNameFromHadoopURL=function(V){if(!V){return"";}var U,W;U=V.lastIndexOf("/")+1;W=V.substring(U);return W;};mstrmojo.DI.DIHelpers.extractFileExtensionFromHadoopURL=function(V){if(!V){return"";}var U,W;U=V.lastIndexOf("/")+1;W=V.substring(U);return W.substring(W.lastIndexOf(".")+1);};mstrmojo.DI.DIHelpers.isWS=function(){return !!mstrApp.isWorkstation;};mstrmojo.DI.DIHelpers.getEnvObj=function(){var X=(navigator.platform.indexOf("Win")!==-1?"Win":"Mac"),U=!!mstrApp.isWorkstation?"WS":"Web",V=[];V.push(U,X);return{ENV:V.join("-"),isWSClient:function(){if(!window.FormWrapper||!window.FormWrapper.isDesktop){return false;}return !window.FormWrapper.isDesktop();},isDesktopClient:function(){if(!window.FormWrapper||!window.FormWrapper.isDesktop){return false;}return window.FormWrapper.isDesktop();},isWeb:function(){return U==="Web";},isWS:function(){return U==="WS";},isWin:function(){return X==="Win";},isMac:function(){return X==="Mac";},isDataSet:function(){return mstrApp.placeholder==="DIApp"||mstrApp.placeholder==="mainDIApp"||mstrApp.placeholder==="QBApp";},isDIinVI:function(){return !!mstrApp.isFromVI;},isInDI:function(){return mstrApp.placeholder==="DIApp"||mstrApp.placeholder==="mainDIApp";},isInQB:function(){return mstrApp.placeholder==="QBApp";},isAppSchema:function(){return !!window.mstrAppSchema;},isWebWin:function(){return this.isWeb()&&this.isWin();},isWebMac:function(){return this.isWeb()&&this.isMac();},isWebDataSet:function(){return this.isWeb()&&this.isDataSet();},isWebDossier:function(){return this.isWeb()&&this.isDIinVI();},isWSWin:function(){return this.isWS()&&this.isWin();},isWSMac:function(){return this.isWS()&&this.isMac();},isWSDataSet:function(){return this.isWS()&&this.isDataSet();},isServerBasedWS:mstrmojo.DI.DIHelpers.isServerBasedWS,isWSDossier:function(){return this.isWS()&&this.isDIinVI();},isWSLiveMode:function W(){return this.isWS()&&parseInt(window.FormWrapper.isWSLiveMode(),10)===1;},isWSDossierLocalMode:function(){return this.isWSDossier()&&!this.isWSLiveMode();},isWebWinDataSet:function(){return this.isWeb()&&this.isWin()&&this.isDataSet();},isWebMacDataSet:function(){return this.isWeb()&&this.isMac()&&this.isDataSet();},isWebWinDossier:function(){return this.isWeb()&&this.isWin()&&this.isDIinVI();},isWebMacDossier:function(){return this.isWeb()&&this.isMac()&&this.isDIinVI();},isWSWinDataSet:function(){return this.isWS()&&this.isWin()&&this.isDataSet();},isWSMacDataSet:function(){return this.isWS()&&this.isMac()&&this.isDataSet();},isWSWinDossier:function(){return this.isWS()&&this.isWin()&&this.isDIinVI();},isWSMacDossier:function(){return this.isWS()&&this.isMac()&&this.isDIinVI();},isStandaloneDataSet:function(){return !this.isDIinVI()&&this.isDataSet();}};};mstrmojo.DI.DIHelpers.isOnetier=function(){return !!mstrApp.isSingleTier;};mstrmojo.DI.DIHelpers.getHierarchyMappingXML=function(Z,a){var W="";var V=0,X=1,Y=12;if(a&&a[L.ID]){W+="<mpcs>";W+="<mpc ";W+='did="'+a[L.ID].did+'" drvflg="'+V+(a[L.ID].n?('" n="'+a[L.ID].n+'" ot="'):"")+Y+'" recurisve="'+X+'" ';if(!!Z&&Z!==""){W+='oid="'+Z+'" ';}W+=">";if(a[L.JOIN_ID]){W+="<rdcs>";}for(var U=L.JOIN_ID;U<=L.DISTANCE;U++){if(a[U]!==undefined){W+='<rdc did="'+a[U].did+'" fg="'+U+'"/>';}}if(a[L.JOIN_ID]){W+="</rdcs>";}W+="</mpc>";W+="</mpcs>";}return W;};mstrmojo.DI.DIHelpers.getOperationMode=function(){return mstrApp.getRootController().getModel().operationMode;};mstrmojo.DI.DIHelpers.standardizeDBRolesFormat=function Q(c){var W=["att","dbRole","tableMap"],d,f,Z,U,X,V,a,Y,e,g,b=(function(){var h="list",k="number",j="text";function l(m,r,q,p,o,n){if(m&&q){if(n){m.push({field:r,fieldV:q,IDS:p,options:n,tp:o});}else{m.push({field:r,fieldV:q,IDS:p,tp:o});}}}return{authenticationmethod:function(m,n){l(m,"auth",n,7776,h,[{IDS:13980,n:mstrmojo.desc(13980),v:"1"},{IDS:13981,n:mstrmojo.desc(13981),v:"4"}]);},databasename:function(m,n){l(m,"db",n,8519,j);},hostname:function(m,n){l(m,"host",n,8533,j);},port:function(m,n){l(m,"port",n,8534,k);},server:function(m,n){l(m,"svr",n,8536,j);}};}());c=Object.keys(c).map(function(h){return mstrmojo.DI.DIHelpers.createMSTRObjects(c[h],W);});J.forEach(c,function(h){J.forEach(h.tables,function(j){j.dbRole=(j.dbRole&&j.dbRole.oi)||j.dbRole;j.dbmsObj=j.dbmsObj&&j.dbmsObj.oi;f=j.dbRole;if(f){f.dbmsObj=j.dbmsObj;Z=f.dbmsObj;if(!f.dbms){f.dbms=f.def&&f.def.dbms&&f.def.dbms.did;}}if(!Z||Z.DBInfo){return ;}Z.DBInfo={};d=Z.DBInfo;U=f.efd;if(!U){return ;}U.forEach(function(k){X=k.oi&&k.oi.def;if(!X){return ;}g=X.dbtp;if(g){f.db_type=g;d.dbTypes={dbt:{v:g,n:mstrmojo.desc(mstrmojo.DI.DIDatabaseHelper.getDescriptionIdByDBType(g))}};}V=X.cnsr;if(!V){return ;}e=[];Y=null;f.connstr=V;V.split(";").forEach(function(l){a=l.split("=");a[0]=a[0].toLowerCase().trim();if(a[0]==="driver"){d.driverInstalled=true;}else{if(a[0]==="authenticationmethod"){Y=a;}else{if(b[a[0]]){b[a[0]](e,a[1]);}}}});if(Y){b[Y[0]](e,Y[1]);}});});});return c;};mstrmojo.DI.DIHelpers.filterDisableSources=function A(U){return J.indexOf(mstrApp.diParams.disabledSources,U)<0;};mstrmojo.DI.DIHelpers.getPopupWindowOptions=function R(){var Y={};var W=window.screenX||window.screenLeft||0,V=window.screenY||window.screenTop||0,X=800,U=600,Z;if(document.body&&document.body.offsetWidth){X=document.body.offsetWidth;U=document.body.offsetHeight;}if(document.compatMode==="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth){X=document.documentElement.offsetWidth;U=document.documentElement.offsetHeight;}if(window.innerWidth&&window.innerHeight){X=window.innerWidth;U=window.innerHeight;}if(window.outerWidth){X=window.outerWidth;}if(window.outerHeight){U=window.outerHeight;}Y.height=U*0.5;Y.width=X*0.8;if(Y.height<600||isNaN(Y.height)){Y.height=600;}if(Y.width<800||isNaN(Y.width)){Y.width=800;}Y.left=W+(X-Y.width)/2;Y.top=V+(U-Y.height)/8;if(this.getEnvObj().isWSWin()&&this.getEnvObj().isDIinVI()){Y.left=(window.screen.width-Y.width)/2;Y.top=(window.screen.height-Y.height)/2;}Z="width="+Y.width+",height="+Y.height;Z+=",toolbar=0,scrollbars=1,status=1,resizable=1,location=1,menuBar=0";Z+=",left="+Y.left+",top="+Y.top;return Z;};mstrmojo.DI.DIHelpers.createPopupWindow=function G(V,U){var W,X;X=this.getPopupWindowOptions();if(!V){V="";}W=window.open(V,U,X);return{wnd:W};};mstrmojo.DI.DIHelpers.openPopupWindow=function H(X,V,U){var W;if(X&&!X.closed){X.location=U;X.focus();}else{W=this.createPopupWindow(U);X=W.wnd;if(X){X.focus();}}return X;};mstrmojo.DI.DIHelpers.sendResponse2Window=function B(V,U,Y){var X;if(Y){X=Y;}else{X=window.opener;}if(X){if(U===undefined){U=window.location.origin;if(!U){U=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");}}try{if(this.isIE()&&X.postMessagePassthrough){X.postMessagePassthrough(V,U);try{window.open("","_self","");window.close();}catch(Z){window.close();}}else{X.postMessage(V,U);}}catch(W){console.log("postMessage error: "+W);}}};mstrmojo.DI.DIHelpers.convertDataSourceType2SourceType=function F(U){switch(U){case T.dataSourceType.DROPBOX:return T.sourceType.dropbox;case T.dataSourceType.GOOGLE_DRIVE:return T.sourceType.googleDrive;case T.dataSourceType.GOOGLE_ANALYTICS:return T.sourceType.googleAnalytics;case T.dataSourceType.SALESFORCE:return T.sourceType.salesforce;case T.dataSourceType.GOOGLE_BIGQUERY:return T.sourceType.googleBigQuery;default:return -1;}};mstrmojo.DI.DIHelpers.highlightKeyWords=function K(c,d,U){var W="\\*.?+$^[](){}|/",e=c,a,X;if(c===""){return d;}for(X in W){if(W.hasOwnProperty(X)){a=W[X];e=e.replace(new RegExp("\\"+a,"g"),"\\"+a);}}var b=new RegExp("("+e+")","ig");var V="\u001E",Z=mstrmojo.string.encodeHtmlString,Y;if(b.test(d)){d=d.replace(b,function(f){return V+f+V;});Y=J.map((d||"").split(V),function(g,f){return(f%2===0)?Z(g):('<span class="'+U+'">'+Z(g)+"</span>");});return Y.join("");}};mstrmojo.DI.DIHelpers.detectCustomImg=function(X,W){if(!X||!(W.nodeType&&W.nodeType===window.Node.ELEMENT_NODE)){return ;}var U=X.replace?X.replace(/\s+/g,""):"";var Y=document.getElementsByTagName("head")[0];var V=document.createElement("img");V.src="../javascript/mojo/css/images/DI/connectors/"+U+".png";V.onload=function(){W.style.background="url(../javascript/mojo/css/images/DI/connectors/"+U+".png) no-repeat";Y.removeChild(V);};V.onerror=function(){W.style.background="url(../javascript/mojo/css/images/DI/connectors/default.png) no-repeat";Y.removeChild(V);};Y.appendChild(V);};mstrmojo.DI.DIHelpers.spliceUrlBySeparator=function(V){var U=V.split("#");return U.slice(U.length/2+1).join("#");};mstrmojo.DI.DIHelpers.isOriginalConnector=function(V){var U=T.originalConnector;if(U.elastic===V||U.tapClicks===V){return true;}return false;};mstrmojo.DI.DIHelpers.acceptEventFromAncestor=function(U){if(!U){return true;}if(!this.domNode||typeof U.contains!=="function"||!this.hasRendered){return false;}return U.contains(this.domNode);};mstrmojo.DI.DIHelpers.isdbRoleWritable=function(U){if(mstrmojo.DI.DIHelpers.isOnetier()){return true;}else{return U.writable==="1"&&mstrApp.rootController.hasPrivilege(T.DssXmlPrivileges.DssXmlPrivilegesUseDatabaseInstanceManager);}};mstrmojo.DI.DIHelpers.isdbRoleUsable=function(U){return mstrmojo.DI.DIHelpers.isOnetier()?true:U.usable==="1";};mstrmojo.DI.DIHelpers.applyDriverSuffix=function(W){if(!W||!W.Preferences){return ;}var U=JSON.stringify(W),V=W.Preferences.driverNameSuffix,Y=this.getEnvObj();var X="Platform";if(Y.isDesktopClient()){X=Y.isMac()?"DesktopMac":"DesktopWin";}else{if(Y.isWSClient()){X=Y.isMac()?"WorkstationMac":"WorkstationWin";}}var Z=V[J.find(V,"n",X)];return JSON.parse(U.replace(/!#DRIVERSUFFIX#!/g,Z?Z.value:""));};mstrmojo.DI.DIHelpers.isGeo=function(U){return U.georole&&U.georole>0;};mstrmojo.DI.DIHelpers.isTime=function(U){return U.dtp===parseInt(O.DATE,10)||U.dtp===parseInt(O.DATE_TIME,10)||U.dtp===parseInt(O.TIME,10);};}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.ui._HasUITheme","mstrmojo.vi.ui.theme","mstrmojo.dom");function f(g,j){if(!mstrmojo.DocInfoWindow){return ;}var h=g;while(h){if(h instanceof mstrmojo.DocInfoWindow){h[j?"registerScrollLock":"releaseScrollLock"](this);break;}h=h.parent;}}var N=mstrmojo.array,D=mstrmojo.dom,S=mstrmojo.hash,d=mstrmojo.css,G="px",K=mstrmojo.ui._HasUITheme.EnumThemeNames;var C=false;function M(g,j){if(!mstrmojo.DocInfoWindow){return ;}var h=g;while(h){if(h instanceof mstrmojo.DocInfoWindow){h[j?"registerLock":"releaseLock"](this);this.lockIW=j?h:null;break;}h=h.parent;}}var V=mstrmojo.ui.PopupConfig,O=V.directionCfg,B=V.ENUM_CORNERS,Y=B.TOP_LEFT,U=B.TOP_RIGHT,I=B.BOTTOM_RIGHT,H=B.BOTTOM_LEFT;function J(g){return(g===H||g===Y);}function c(g){return(g===U||g===I);}function Q(g){return(g===I||g===H);}function T(g){return(g===U||g===Y);}function Z(p,j,x,AD){var AG=x.x,AF=x.y,AC=x.w||0,s=x.h||0,h=AD.w,y=AD.h,AB=p.alignment,n=AB.popup,l=AB.host,AE=c(l),AH=Q(l),AA=false,v=false,k=false,w=false,m=false,t=false,z=D.isMobile,q=mstrmojo.ui.PopupConfig.directionCfg;if(J(n)){var o=AG+h+(AE?AC:0);AA=j.w<o;m=z&&(AA||q.isRightToLeft());}if(T(n)){var u=AF+y+(AH?s:0);v=j.h<u;t=z&&v;}if(c(n)||m){var r=AG-h+((AE&&!m)?AC:0);k=r<0;}if(Q(n)||t){var g=AF-y+((AH&&!t)?s:0);w=g<0;}return{top:w,bottom:v,left:k,right:AA};}function F(h){var g=this.popupConfig;if(g){S.forEach(g.popupHandlers,function(k,l){var j=k[h?"open":"close"];if(j){j.call(mstrmojo.all[l]||j,!!h);}});}}function L(h){var g=this.popupConfig;if(g&&!g.isHostedWithin){var j=this.hostProxy;if(j){j.style.display=h?"":"none";}}}function e(g){return g!==undefined&&g!==null&&!isNaN(g);}mstrmojo._IsPopup={visible:false,lockIWForScroll:false,disposable:true,opener:null,onOpen:mstrmojo.emptyFn,onClose:mstrmojo.emptyFn,popupConfig:null,hostProxy:undefined,open:function P(j,g){F.call(this,true);if(this.updatePopupConfig){this.updatePopupConfig(g,j);}else{S.forEach(g,function(m,l){this.set(l,m);},this);}var h="popup-mid-render";this.set("opener",j);if(!this.hasRendered){var k=this.visible;this.visible=false;this.render();d.addClass(this.domNode,h);this.set("visible",k);}if(this.nudge){this.domNode.style.top="-10000px";}L.call(this,true);this.set("visible",true);if(this.lockIWForScroll){f.call(this,this.opener,true);}if(g&&g.lockIW){M.call(this,g.lockIW,true);}if(this.nudge){this.nudge();}if(this.adjustSize){this.adjustSize();}this.adjustCornersForPopupOverflow();this.onOpen();d.removeClass(this.domNode,h);},adjustCornersForPopupOverflow:function a(){var r=this.popupConfig;if(!r){return false;}var AV=(r.includeScroll!==undefined)?r.includeScroll:true;var m=r.anchorElement||r.hostElement,k=r.position||D.position(m,AV),AB=m&&m.style&&m.style.zIndex;if(!r.isHostedWithin){var Ad=this.hostProxy,AU=this.hostProxy=document.createElement("div");document.body.appendChild(AU);AU.appendChild(this.domNode);if(Ad){Ad.parentNode.removeChild(Ad);}var AL=AU.style,AM={x:"left",y:"top",w:"width"};AU.className=r.hostProxyCssClass;AL.position="absolute";AL.background="none";d.addClass(AU,"mstrmojo-popup-widget-hosted");AL.height="0";N.forEach(["x","y","w"],function(Am){var Al=k[Am];if(e(Al)){AL[AM[Am]]=Al+G;}});}var AA=r.ENUM_CORNERS,Aj=AA.BOTTOM_LEFT,AN=AA.BOTTOM_RIGHT,h=AA.TOP_RIGHT,AG=AA.TOP_LEFT;var p=D.position(document.body),AP=D.position(this.domNode),AY=Z(r,p,k,AP),o=AY.right,z=AY.bottom,Ak=AY.left,AT=AY.top,AC=r.alignment,AK=AC.popup,j=AC.host,u=AK,y=j,AO=D.isMobile,x=m&&m.classList&&m.classList.contains("mstrmojo-ui-Menu-item"),AQ=this.id,v=m&&m.parentNode,AR=v&&v.parentElement,AJ=m||this.domNode,AH,Ae=this.domNode.style;if(AR&&AR.classList.contains("mstrmojo-ui-Menu")){AJ=AR;}AH=D.position(AJ);if(x&&((Ak&&o)||(AT&&z))){if(AR){Ae.top=AH.y+"px";Ae.left=AH.x+"px";var Ac=document.getElementsByClassName("mstrmojo-ui-Menu");N.forEach(Ac,function(Al){if(AQ!==Al.id){Al.style.visibility="hidden";}});}r.anchorElement=AJ;r.position={h:0,w:0,x:(AH.x+AP.w)>p.w?Math.min(AH.x,5):AH.x,y:(AH.y+AP.h)>p.h?Math.min(AH.y,90):AH.y};this.adjustCornersForPopupOverflow();return ;}if(O.isRightToLeft()&&(!AO||AP.w>0)){if(!AO||!Ak){o=true;}else{if(!AO||!o){O.setDirection(false);this.resetDirection=true;if(AO){y=(y===h)?AG:Aj;}}}}else{if(o){O.setDirection(true);this.resetDirection=true;}}if(o||Ak){if(J(y)){y=T(y)?h:AN;}else{if(c(y)){y=T(y)?AG:Aj;}}if(o&&J(u)){u=T(u)?h:AN;}else{if(Ak&&c(u)){u=T(u)?AG:Aj;}}}if(z||AT){if(J(y)){y=T(y)?Aj:AG;}else{if(c(y)){y=T(y)?AN:h;}}if(z&&T(u)){u=J(u)?Aj:AN;}else{if(AT&&Q(u)){u=J(u)?AG:h;}}}if(AT||o||z||Ak){if(C){console.log("Overflow directions: "+JSON.stringify(AY));}this._orgalgn={host:j,popup:AK};r.setAlignment(y,u);}if(!r.isHostedWithin){if(e(k.y)&&e(k.h)){this.hostProxy.style.top=(k.y+(Q(u)?(r.alignWithAnchor===true?k.h:0):(r.alignWithAnchor===true?0:k.h)))+G;this.hostProxy.style.zIndex=(e(AB)&&(AB>100))?AB+1:101;}}var AS,Ag={};if(r.isHostedWithin&&!!this.opener){AS=d.getComputedStyle(this.opener.domNode);}N.forEach(["left","right","top","bottom"],function(Al){Ag[Al]=AS?parseInt(AS["border-"+Al+"-width"]||0,10):0;});var Aa=Q(y),Ab=c(y),t=Q(u),n=c(u),AW=function(Am,Al){return"calc(100% + "+(Al?Ag[Am]:0)+"px)";},w=function(Am,Al){return(Al?-Ag[Am]:0)+"px";};var q,AX,g,l;q=AX=g=l="auto";if(t){g=Aa?w("top"):AW("top");}else{q=Aa?AW("bottom"):w("bottom");}if(n){AX=Ab?w("left"):AW("left");}else{l=Ab?AW("right"):w("right");}Ae.top=q;Ae.right=AX;Ae.bottom=g;Ae.left=l;var s=D.position(this.domNode),AI=5;if(z||AT){var Ah=s.y,AD=D.getMaxScrollHeight()+"px",Af=this.scrollNode,AE=Af&&Af.style.maxHeight;if(Ah<0||(Ah+s.h>p.h)){if(Af&&AD!==AE){Af.style.maxHeight=AD;this.updateScrollbars();}var AZ=(-k.y+AI)+G;if(!r.isHostedWithin){if(this.hostProxy){this.hostProxy.style.top=0;}AZ=AI+G;}Ae.top=AZ;Ae.bottom="auto";}}if(Ak||o){var Ai=s.x;if(Ai<0||(Ai+s.w>p.w)){var AF=(-k.x+AI)+G;if(!r.isHostedWithin){if(this.hostProxy){this.hostProxy.style.left=0;}AF=AI+G;}Ae.left=AF;Ae.right="auto";}}return true;},close:function R(h){if(this.keepOpen){return ;}if(this.onClose){this.onClose(h);}L.call(this,false);if(this.lockIWForScroll){f.call(this,this.opener,false);}this.set("visible",false);this.set("opener",null);if(this.lockIW){M.call(this,this.lockIW,false);}F.call(this,false);var g=this._orgalgn;if(g){this.popupConfig.setAlignment(g.host,g.popup);}if(this.resetDirection){this.resetDirection=false;O.setDirection(false);}},preBuildRendering:function A(h){this._super(h);var l=this.popupConfig;if(l&&!l.isHostedWithin){var g=l.hostProxyCssClass.split(" "),k=false;N.forEach(S.keyarray(K),function(m){if(g.indexOf(K[m])>=0){k=true;return false;}});if(!(k||l.noInheritTheme)){var j=mstrmojo.vi.ui.theme.getThemeClass.call(this);if(j){g.push(j);}}l.hostProxyCssClass=g.join(" ");}},buildRendering:function E(){var g=this._super();if(g){if(!this.parent&&!this.domNode.parentElement){document.body.appendChild(this.domNode);}}return g;},postBuildRendering:function X(){var g=this,h=this.popupConfig;if(h&&!this._ListenerProc){this._ListenerProc=function(){g.monitorWindow();};D.attachEvent(window,"resize",this._ListenerProc);}this._super();},monitorWindow:function(){var h=D.getMaxScrollHeight();if(this.updateScrollbars&&this.scrollNode){this.scrollNode.style.maxHeight=(this.scrollNodeMaxHeight||h)+"px";this.updateScrollbars();}if(this.visible){var g=this,j=null;window.clearTimeout(j);j=window.setTimeout(function(){g.scrollNode.style.maxHeight=(g.scrollNodeMaxHeight||h)+G;g.adjustCornersForPopupOverflow();},175);}},destroy:function b(g){if(this._ListenerProc){D.detachEvent(window,"resize",this._ListenerProc);delete this._ListenerProc;}this._super(g);},unrender:function W(g){if(this.popupConfig&&!this.popupConfig.isHostedWithin&&this.hostProxy){document.body.removeChild(this.hostProxy);delete this.hostProxy;}this._super(g);}};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.Container","mstrmojo._IsPopup","mstrmojo.boxmodel","mstrmojo.dom","mstrmojo.ui._HasScroller");var L=mstrmojo.boxmodel,I=mstrmojo.dom,M=mstrmojo.css,O="mstrmojo-Tooltip",A="mstrmojo-scrollNode",E=20;function C(S,T,R){var U="connectScrollbox";if(R){U="dis"+U;}var Q=S&&S.parent;while(Q){if(Q[U]){Q[U](T);}Q=Q.parent;}}function G(){if(!this._paintHandle){var R=this.id,Q=function(V){var Z=mstrmojo.all[R];if(!Z){return ;}delete Z._paintHandle;var T=[O],a=Z.cssClass;if(a){T.push(a);}var S=mstrApp.getThemeClassName&&mstrApp.getThemeClassName(),X=Z.opener;if(X&&X.getTooltipThemeClass){S=X.getTooltipThemeClass();}T.push(S);Z.domNode.className=T.join(" ");var Y=Z.content,U=Z.contentNode,W=Z.arrowNode;U.className=(O+"-content "+A+" "+Z.contentNodeCssClass);U.style.cssText=Z.contentNodeCssText;if(!Z.hasWidgetContent){U.innerHTML=Y;}W.style.cssText="";Z.domNode.style.visibility=!!Y?"visible":"hidden";Z.updatePosition();if(!V&&Z.optimizePos){Z.optimizePos();}Z.updateScrollbars();};if(!this._hasPaint){Q(true);this._hasPaint=true;}else{this._paintHandle=window.setTimeout(Q,0);}}}function B(U,c,j,V){var Y=c&&(c.richTooltip||c.tooltip),m=j?I.getMousePosition(j,V||self):null,b=Y&&(typeof Y==="string");var k="",a="",X="",g=Y,Z=null,Q=mstrmojo.tooltip.POS_TOPLEFT,S=null,d=null,R=null,l=false,T=null,W=mstrmojo._HasTooltip.TOOLTIP_CLOSE_DELAY;var f=false,h=false;if(Y&&!b){a=Y.cssClass||a;k=Y.contentNodeCssClass||k;X=Y.contentNodeCssText||X;g=Y.content||"";Z=Y.refNode||Z;Q=Y.posType||Q;S=Y.left||0;d=Y.top||0;f=Y.keepArrowXPos||f;h=Y.keepArrowYPos||h;R=Y.updatePosition||null;l=Y.hasWidgetContent;T=Y.children;W=Y.tooltipCloseDelay||mstrmojo._HasTooltip.TOOLTIP_CLOSE_DELAY;}U.set("contentNodeCssClass",k);U.set("cssClass",a);U.set("contentNodeCssText",X);U.set("content",g);U.set("refNode",Z);U.set("posType",Q);U.set("left",b?((m&&m.x)||U.left):S);U.set("top",(b||!Y)?((m&&(m.y+E))||U.top):d);U.set("keepArrowXPos",f);U.set("keepArrowYPos",h);if(R){U.set("updatePosition",R);}else{U.set("updatePosition",mstrmojo.Tooltip.prototype.updatePosition);}U.set("hasWidgetContent",l);U.set("children",T);U.set("tooltipCloseDelay",W);}mstrmojo.Tooltip=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsPopup,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.Tooltip",content:null,top:null,left:null,refNode:null,keepArrowXPos:false,keepArrowYPos:false,posType:"TL",allowOtherTooltips:false,markupString:'<div id="{@id}" class="'+O+' {@cssClass}" style="{@cssText}" mstrAttach:mouseover,mouseout><div class="'+O+'-shadow {@shadowNodeCssClass}"></div><div class="'+O+'-contentWrapper"><div class="'+O+"-content "+A+' {@contentNodeCssClass}" style="{@contentNodeCssText}"></div></div><div class="'+O+'-arrow"></div></div>',markupSlots:{containerNode:function(){return this.domNode.children[1];},contentNode:function(){return this.domNode.children[1].firstChild;},shadowNode:function(){return this.domNode.firstChild;},arrowNode:function(){return this.domNode.children[2];}},setupScrollNodes:function D(){this.scrollNode=this.contentNode;this.scrollbarHostNode=this.containerNode;},_previousVisible:false,markupMethods:{onvisibleChange:function(){var R=this.domNode.style,Q=!!this.visible;if(this._previousVisible!==Q){R.visibility="hidden";}R.display=Q?"block":"none";this._previousVisible=Q;if(Q){this.updatePosition();if(this.content){G.call(this);}}},onleftChange:G,ontopChange:G,onrefNodeChange:G,onposTypeChange:G,oncontentNodeCssClassChange:G,oncontentNodeCssTextChange:G,oncontentChange:G,oncssClassChange:G},preBuildRendering:function N(){if(!this.slot&&!this.placeholder){this.placeholder=document.body.appendChild(document.createElement("div"));}return this._super();},updatePosition:function H(V){if(!this.visible&&!V){return ;}var U=this.refNode,T=U?L.offset(U,document.body):{left:I.getHorizontalScroll(),top:I.getVerticalScroll()},m=this.domNode.style,f=this.containerNode,h=f.offsetWidth,Z=f.offsetHeight,R=this.posType,c=R.indexOf("R")>-1,W=R.indexOf("B")>-1,b=this.top!==null?parseInt(this.top,10)+T.top-(W?Z:0):null,S=this.left!==null?parseInt(this.left,10)+T.left-(c?h:((R.indexOf("C")>-1)?Math.floor(h/2):0)):null,k=false,a=false,d,X,j=I.windowDim(),g=I.getHorizontalScroll()+j.w,Q=I.getVerticalScroll()+j.h,e=this.arrowNode,l=null;if(S!==null){d=Math.min(Math.max(S,0),g-h);m.left=d+"px";k=S!==d;}if(b!==null){X=Math.min(Math.max(b,0),Q-Z);m.top=X+"px";a=b!==X;}if(k||a){var Y,o=this.keepArrowXPos&&k,n=this.keepArrowYPos&&a;if(o||n){l=M.getComputedStyle(e);Y=l.left;}if(Y&&Y.endsWith("%")){Y=parseFloat(Y)/100*h;}if(o){e.style.left=(parseInt(Y,10)+S-d)+"px";}if(n){e.style.top=(parseInt(l.top,10)+b-X)+"px";}}M.toggleClass(this.domNode,"offset",k||a);},_on_tooltip_change:function(Q){B(this,Q&&Q.src);},_set_opener:function(T,S){var R=this.opener,Q=S!==R;if(Q){if(S){C(S,this);}if(R){C(S,this,true);}if(R&&R.detachEventListener){R.detachEventListener(this._richSubs);R.detachEventListener(this._ttpSubs);}if(S&&S.attachEventListener){this._richSubs=S.attachEventListener("richTooltipChange",this.id,"_on_tooltip_change");this._ttpSubs=S.attachEventListener("tooltipChange",this.id,"_on_tooltip_change");}this.opener=S;}return Q;},updatePopupConfig:function(Q,R){B(this,R,Q&&Q.e,Q&&Q.win);},onscroll:function K(){if(this.visible&&this.nudge){this.nudge();}this._super();},onmouseover:mstrmojo.emptyFn,onmouseout:mstrmojo.emptyFn});var J=null;mstrmojo.tooltip={POS_TOPLEFT:"TL",POS_BOTTOMLEFT:"BL",POS_TOPRIGHT:"TR",POS_BOTTOMRIGHT:"BR",POS_BOTTOMCENTER:"BC",POS_TOPCENTER:"TC",open:function F(R,T,S,Q){if(R&&R.hasWidgetContent&&J){J.destroy();}if(!J||!mstrmojo.all[J.id]){J=new mstrmojo.Tooltip();}Q=Q||{};Q.e=T;Q.win=S;J.open(R,Q);R.tooltip=J;},close:function P(){if(J&&!J.allowOtherTooltips){var Q=J.opener;if(Q){Q.tooltip=null;}J.close();if(Q&&Q.hasWidgetContent){J.destroy();}}}};}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._IsPopup","mstrmojo._CanAutoClose");function A(B){return function(){this.domNode.style[B]=this[B]||"";};}mstrmojo.Popup=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.Popup",shadowNodeCssClass:"mstrmojo-popup-shadow",titleNodeCssClass:"mstrmojo-popup-title",contentNodeCssClass:"mstrmojo-popup-content",cssDisplay:"block",keepOpen:false,markupString:'<div id="{@id}" class="mstrmojo-Popup {@cssClass}" style="{@cssText}"><div class="mstrmojo-Popup-shadow {@shadowNodeCssClass}"></div><div class="mstrmojo-Popup-title {@titleNodeCssClass}">{@title}</div><div class="mstrmojo-Popup-content {@contentNodeCssClass}"></div></div>',markupSlots:{containerNode:function(){return this.domNode.lastChild;},shadowNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onleftChange:A("left"),ontopChange:A("top"),onzIndexChange:A("zIndex")}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.ui._HasScroller","mstrmojo.css","mstrmojo.DI.DIHelpers");var F=mstrmojo.css,H=mstrmojo.string,A=mstrmojo.desc(14058,"Show Details"),E=mstrmojo.desc(14059,"Hide Details"),B=mstrmojo.DI.DIHelpers,D=mstrmojo.desc(14060,"We are sorry for the inconvenience. Please {contact} your administrator for help.").replace("{",'<span class="dyn-link">').replace("}","</span>");mstrmojo.ui.editors.ErrorDialogContent=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.editors.ErrorDialogContent",markupString:'<div class="mstrmojo-error-content {@cssClass}" mstrAttach:click><div class="scroll-container"><div>{@shortDesc}</div><div class="contact">'+D+'</div><div class="toggle-details-link" >'+A+'</div><div class="error-details">{@longDesc}</div></div></div>',markupSlots:{scrollNode:function(){return this.domNode.firstChild;},contactNode:function(){return this.domNode.firstChild.children[1].getElementsByClassName("dyn-link")[0];},toggleDetailsNode:function(){return this.domNode.firstChild.children[2];},errorDetailsNode:function(){return this.domNode.firstChild.children[3];}},markupMethods:{onshowDetailsChange:function(){var K=this.showDetails;this.toggleDetailsNode.innerHTML=K?E:A;F.toggleClass(this.domNode,"show-details",K);this.updateScrollbars();}},cssClass:undefined,shortDesc:undefined,longDesc:undefined,showDetails:false,showToggle:true,enableContactStr:true,allowHTML:false,init:function I(K){this._super(K);this.shortDesc=this.shortDesc||mstrmojo.desc(14061,"An error has occurred");},onclick:function J(K){var M=K.getTarget(),L,N=this.longDesc;if(M===this.contactNode){L="mailto:?subject="+encodeURI("Issue: "+this.shortDesc)+(N?("&body="+encodeURI("Detail:\r\n"+N)):"");mstrApp.openPage(L,"_self");}else{if(M===this.toggleDetailsNode){this.set("showDetails",!this.showDetails);this.parent.raiseEvent({name:"EditorResized"});this.parent.positionDialog();}}},setupScrollNodes:function C(){this.scrollNode=this.scrollNode;},preBuildRendering:function G(){this._super&&this._super();if(!this.allowHTML){this.longDesc=H.encodeHtmlString(H.decodeHtmlString(this.longDesc,true),true);}},postBuildRendering:function(){var K=this.domNode.firstChild.children[1];this._super&&this._super();!this.showToggle&&F.addClass(this.toggleDetailsNode,"hide");!this.enableContactStr&&F.addClass(K,"invisible");}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.Widget","mstrmojo.css","mstrmojo.dom");var Y=mstrmojo.css,F=mstrmojo.dom;var Z={9:"Tab",13:"Enter",27:"Esc",38:"ArrowUp",40:"ArrowDown"};function A(){var c=this.value,b=this.inputNode,d=b.value,a=(c!==null&&c!==undefined)?String(c):"";if(a!==d&&(!this.keepEmpty||d!==this.emptyText)){b.value=a;}if(b.mstrmojoEmpty){Y.removeClass(b,[this.emptyClass]);b.mstrmojoEmpty=null;}}function X(){var a=this.inputNode;a.value=this.emptyText||"";Y.addClass(a,[this.emptyClass]);a.mstrmojoEmpty=true;}function N(){var a=this.inputNode;if(a){this.readingDom=true;this.set("value",a.value);this.readingDom=false;}}function U(a){var b=this;if(a===-1){N.call(this);}else{if(this._lastTimeoutId){window.clearTimeout(this._lastTimeoutId);}this._lastTimeoutId=window.setTimeout(function(){delete b._lastTimeoutId;N.call(b);},a||100);}}mstrmojo.TextBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.TextBox",value:"",type:"text",hint:"",readOnly:false,size:"",maxLength:"",cssDisplay:"inline",tabIndex:"",emptyText:"",keepEmpty:false,emptyClass:"mstrmojo-empty",valueChangeDelay:-1,textValid:true,autoComplete:true,autoCorrect:true,autoCapitalize:true,spellCheck:true,markupString:'<input id="{@id}" class="mstrmojo-TextBox {@cssClass}"  style="{@cssText}" title="{@tooltip}" type="{@type}" value="" size="{@size}" maxlength="{@maxLength}" index="{@tabIndex}"min="{@min}" max="{@max}" placeholder="{@hint}" mstrAttach:focus,keyup,blur,paste,cut,input,click,keydown,mousedown  tstid="{@tstid}"/>',markupSlots:{inputNode:function D(){return this.domNode;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,oncssClassChange:function S(){this.inputNode.className="mstrmojo-TextBox "+(this.cssClass||"");},onhintChange:function O(){this.inputNode.setAttribute("placeholder",this.hint);},onenabledChange:function E(){var a=this.inputNode;a.disabled=!this.enabled;Y.toggleClass(a,"disabled",!this.enabled);},onvalueChange:function P(){var a=this.value,b=(a===undefined)||(a===null)||(a==="");if(b){if(!this.hasFocus){X.call(this);}else{this.inputNode.value="";}}else{A.call(this);}if(F.isIE9){this.inputNode.type=b?"text":this.type;}},ontooltipChange:function R(){this.domNode.title=this.tooltip;},onreadOnlyChange:function H(){this.inputNode.readOnly=this.readOnly;},ontextValidChange:function B(){Y.toggleClass(this.inputNode,["err"],!this.textValid);}},postBuildRendering:function V(){this._super();var a=this.inputNode;a.setAttribute("autocomplete",this.autoComplete?"on":"off");a.setAttribute("autocorrect",this.autoCorrect?"on":"off");a.setAttribute("autocapitalize",this.autoCapitalize?"on":"off");a.setAttribute("spellcheck",this.spellCheck?"true":"false");},focus:function Q(){if(this.inputNode&&this.inputNode.offsetParent){try{this.inputNode.focus();}catch(a){}}},prefocus:function M(){this.hasFocus=true;A.call(this);},blur:function T(){this.inputNode.blur();},preblur:function W(){window.setTimeout(function(){},200);this.hasFocus=false;N.call(this);var a=this.value;if(((a===null||a==="")&&this.emptyText)||(this.keepEmpty&&a===this.emptyText)){X.call(this);}},prekeyup:function I(b){var a=b.hWin,c=b.e||a.event;U.call(this,this.valueChangeDelay);var d=Z[c.keyCode];if(this["on"+d]){this["on"+d](b);}},preinput:function J(){U.call(this,this.valueChangeDelay);},prepaste:function K(){U.call(this);},precut:function G(){U.call(this);},setInvalidState:function C(a){this.set("textValid",false);if(a){this.domNode.setAttribute("title",a);}},cleanUp:function L(){this.inputNode.value="";this.set("textValid",true);this.domNode.setAttribute("title",this.tooltip);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.css");var F="",B="row-",E=mstrmojo.css.DISPLAY_TABLE;mstrmojo.Table=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Table",cellCssClass:"",rows:-1,cols:-1,_trows:-1,cellPadding:0,cellSpacing:0,layout:null,markupString:'<table id="{@id}" class="mstrmojo-Table {@cssClass}" style="{@cssText}" cellpadding="{@cellPadding}" cellspacing="{@cellSpacing}">{@tableHtml}</table>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?E:"none";}},preBuildRendering:function G(){var I=[],P=this.cellCssClass;if(this.layout){var Q=this._trows=this.layout.length;for(var K=0;K<Q;K++){var H=this.layout[K],R=H.cells,O=R.length,L=[];for(var J=0;J<O;J++){var N=R[J],M="";M+=((N.cssClass||P)?' class="'+(N.cssClass||P)+'"':"");M+=(N.cssText?' style="'+N.cssText+'"':"");M+=(N.rowSpan?' rowspan="'+N.rowSpan+'"':"");M+=(N.colSpan?' colspan="'+N.colSpan+'"':"");L[J]="<td"+M+"></td>";}var S="";S+=(H.cssClass?' class="'+H.cssClass+'"':"");S+=(H.cssText?' style="'+H.cssText+'"':"");I[K]="<tr"+S+">"+L.join("")+"</tr>";}}else{this._trows=this.rows;var M=(P?' class="'+P+'"':""),L=[];for(var K=0;K<this.rows;K++){for(var J=0;J<this.cols;J++){L[J]="<td"+M+"></td>";}I[K]="<tr>"+L.join("")+"</tr>";}}this.tableHtml=I.join("");if(this._super){this._super();}},postBuildRendering:function C(){if(this._trows){var M={},I=this.containerNode.rows,N=I.length;for(var L=0;L<N;L++){var K=I[L].cells,H=K.length;M[B+L]=I[L];for(var J=0;J<H;J++){M[F+L+","+J]=K[J];}}this.addSlots(M);}this._super();},childRenderCheck:function D(I){if(I&&!I.hasRendered){var H=I.slot||this.defaultChildSlot;return !!this[H]||H.match(/^([\d]+),([\d]+)$/);}return false;},on_child_change_rendering:function A(L){var H=(L&&L.src)||L,O=H&&H.domNode;if(O){var U=H.slot;if(!this[U]){var M=U&&U.match(/^([\d]+),([\d]+)$/);if(M){var R=parseInt(M[1],10),V=parseInt(M[2],10),Q=this.containerNode,T=this[(B+R)],N=[];if(!T){var J=Q.rows,S=J&&J.length||0;for(var K=S;K<=R;K++){N[B+K]=Q.insertRow();}T=N[B+R];}var P=T.cells&&T.cells.length||0;for(var K=P;K<=V;K++){var I=T.insertCell(K);N[F+R+","+K]=I;if(this.cellCssClass){I.className=this.cellCssClass;}}this.addSlots(N);}}}this._super(L);}});})();(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.Container");var D="slot";mstrmojo.HBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.HBox",cellCssClass:"",cellSpacing:0,cellPadding:0,markupString:'<table id="{@id}" class="mstrmojo-HBox {@cssClass}" style="{@cssText}" cellspacing="{@cellSpacing}" cellpadding="{@cellPadding}">{@colHTML}<tr>{@tableHtml}</tr></table>',colHTML:"",markupSlots:{containerNode:function(){return this.domNode.rows[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}},buildRendering:function B(){this.tableHtml="";var N=[],F=this.children,K=(F&&F.length)||0,I;if(K){var G=0,J=this.cellCssClass?' class="mstrmojo-HBox-cell '+this.cellCssClass+'" ':"",M="<td "+J+"></td>";for(I=0;I<K;I++){N[G++]=M;F[I].slot=D+I;}this.tableHtml=N.join("");}this._super();if(K){var L={},H=this.containerNode.cells;for(I=0;I<K;I++){L["slot"+I]=H[I];}this.addSlots(L);}},addChildren:function E(K,F,G){if(!K){return K;}if(F===undefined||isNaN(F)||F<0){var J=this.children;F=(J&&J.length)||0;}var I=0,H;if(K.constructor===Array){for(I=0,H=K.length;I<H;I++){K[I].slot=D+(F+I);}}else{K.slot=D+F;}return this._super(K,F,G);},childRenderCheck:function C(G){if(G&&!G.hasRendered){var F=G.slot||this.defaultChildSlot;return !!this[F]||F.match(/^slot[\d]+$/);}return false;},onchildRenderingChange:function A(I){var F=(I&&I.src)||I,L=F&&F.domNode;if(L){var Q=F.slot;if(!this[Q]){var J=Q&&Q.match(/^slot([\d]+)$/);if(J){var O=parseInt(J[1],10),N=this.containerNode,P=N.cells,M=(P&&P.length)||0,K={};for(var H=M;H<=O;H++){var G=N.insertCell(H);K["slot"+H]=G;if(this.cellCssClass){G.className=this.cellCssClass;}}this.addSlots(K);}}}this._super(I);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container");var A=mstrmojo.Widget;mstrmojo.Box=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Box",markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:A.visibleMarkupMethod,onheightChange:A.heightMarkupMethod,onwidthChange:A.widthMarkupMethod}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.Container","mstrmojo._HasPopup");var E=function(){var G=this.opener;if(G.direction.toLowerCase()==="up"){this.domNode.style.top=-G.domNode.offsetHeight+"px";}};mstrmojo.DropDownButton=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.DropDownButton",height:"",text:"",direction:"down",enabled:true,title:"",allowHTML:true,markupString:'<div id="{@id}" class="mstrmojo-DropDownButton {@cssClass} {@direction}" style="{@cssText}"><div class="mstrmojo-DropDownButton-boxNode {@cssClass}-boxNode" title="{@title}" mstrAttach:mousedown><div class="mstrmojo-DropDownButton-iconNode {@cssClass}-iconNode">{@text}</div></div><div class="mstrmojo-DropDownButton-popupNode {@cssClass}-popupNode"></div></div>',markupSlots:{boxNode:function(){return this.domNode.firstChild;},iconNode:function(){return this.domNode.firstChild.firstChild;},popupNode:function(){return this.domNode.lastChild;}},markupMethods:{onheightChange:function(){this.boxNode.style.height=this.height||"";},ontextChange:function(){this.iconNode.innerHTML=this.getTextInnerHTML();},ontitleChange:function(){this.boxNode.title=this.title;},onenabledChange:function(){mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);},onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},preBuildRendering:function C(){if(this._super){this._super();}var G=this.popupRef;if(G){if(G.nudge){G.nudge=mstrmojo.func.composite([G.nudge,E]);}else{if(this.direction.toLowerCase()!=="down"){G.nudge=E;}}}},popupRef:null,popupOpenConfig:null,destroy:function D(G){var H=this.popupRef;if(H&&H.hasRendered){H.destroy(false);}if(this._super){this._super(G);}},togglePopup:function F(){var G=this._lastOpened;if(G&&G.visible){this.closePopup();}else{this.openPopup("popupRef",this.popupOpenConfig);}},premousedown:function A(G){this.togglePopup();},getTextInnerHTML:function B(){return this.allowHTML?this.text:mstrmojo.string.encodeHtmlString(this.text);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container");mstrmojo.FieldSet=mstrmojo.declare(mstrmojo.Container,null,{legend:null,scriptClass:"mstrmojo.FieldSet",markupString:'<fieldset id="{@id}" class="mstrmojo-FieldSet {@cssClass}" style="{@cssText}"><legend class="{@cssClass}-legend">{@legend}</legend></fieldset>',markupSlots:{legendNode:function(){return this.domNode.firstChild;},containerNode:function(){return this.domNode;}},markupMethods:{onlegendChange:function(){this.legendNode.innerHTML=mstrmojo.string.encodeHtmlString((this.legend!=null)?this.legend:"");},onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom");var M=mstrmojo.Widget,G=mstrmojo.dom,N=mstrmojo.global.document,C=50,B=500;mstrmojo.Stepper=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Stepper",orientation:"vertical",provider:null,title:"",markupString:'<div id="{@id}" class="mstrmojo-Stepper {@orientation} {@cssClass}" mstrAttach:click,mousedown,selectstart><div class="title">{@title}</div><div class="next">+</div><div class="text">{@itemHtml}</div><div class="prev">-</div></div>',markupSlots:{titleNode:function(){return this.domNode.firstChild;},nextNode:function(){return this.domNode.children[1];},textNode:function(){return this.domNode.children[2];},prevNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:M.visibleMarkupMethod,onheightChange:M.heightMarkupMethod,onwidthChange:M.widthMarkupMethod,onenabledChange:function I(){mstrmojo.css.toggleClass(this.domNode,"disabled",!this.enabled);}},preBuildRendering:function J(){this.itemHtml=this.provider.renderItemAt();this._super();},processEvent:function A(O){if(G.contains(this.textNode,O)||O===this.titleNode){return ;}var Q=this.provider,P=((O===this.nextNode)?"Next":"Prev");if(Q["has"+P]()){Q[P.toLowerCase()]();this.updateDisplayText();}},updateDisplayText:function E(){this.textNode.innerHTML=this.provider.renderItemAt();},startStepperInterval:function F(O,P){var Q=this;this._holdTimer=setInterval(function(){Q[P](O);},C);},stopStepperInterval:function H(){if(this._holdTimer){clearInterval(this._holdTimer);delete this._holdTimer;}},onclick:function L(O){this.processEvent(O.e.target);},onmousedown:function D(O){if(!this._holdTimer&&!this._startHoldTimer){var P=this;this._startHoldTimer=setTimeout(function(){delete P._startHoldTimer;P.startStepperInterval(O,"onclick");},B);G.attachOneTimeEvent(N,"mouseup",function(){if(P._startHoldTimer){clearTimeout(P._startHoldTimer);delete P._startHoldTimer;}P.stopStepperInterval();},true);}},onselectstart:function K(){return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Label","mstrmojo.css","mstrmojo.hash");mstrmojo.TristateCheckBox=mstrmojo.declare(mstrmojo.Label,null,{scriptClass:"mstrmojo.TristateCheckBox",grayed:true,checked:true,cssClass:"tristate",onclick:function(){if(this.grayed){this.set("grayed",!this.grayed);}else{this.set("checked",!this.checked);}},markupMethods:mstrmojo.hash.copy({oncheckedChange:function(){mstrmojo.css.toggleClass(this.domNode,"checked",this.checked);},ongrayedChange:function(){mstrmojo.css.toggleClass(this.domNode,"grayed",this.grayed);},onenabledChange:function(){mstrmojo.css.toggleClass(this.domNode,"disabled",!this.enabled);}},mstrmojo.hash.copy(mstrmojo.Label.prototype.markupMethods))});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo.dom","mstrmojo.hash","mstrmojo._IsList");var D=mstrmojo.dom,F=mstrmojo.hash;function E(G){if(G){var I=D.findAncestorByAttr(G,"idx",true,this.domNode),H=I&&this.items[parseInt(I.value,10)];if(H){return{item:H,node:I&&I.node};}}return null;}mstrmojo.txEditor.MetaDataUnitList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.txEditor.MetaDataUnitList",markupString:'<div id="{@id}" class="mstrmojo-ListBase {@cssClass}" style="{@cssText}" mstrAttach:dblclick><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div>',cssClass:"mstrmojo-TransactionEditor-MetaDataUnitList",markupMethods:F.copy({onheightChange:function(){if(this.height){this.domNode.style.height=this.height+"px";}}},F.copy(mstrmojo.ListBase.prototype.markupMethods)),draggable:true,isDragValid:function A(G){return this.draggable&&!isNaN(parseInt(G.src.node.getAttribute("idx"),10));},getDragData:function C(G){var J={},H=G.src.node,K=E.call(this,H),I=K&&K.item;G.src.node=K&&K.node?K.node:H;if(I){J.item=F.clone(I);J.html=J.html||I.n;}return J;},ondblclick:function B(G){this._super&&this._super(G);var H=G.target||D.eventTarget(G.hWin,G.e),K=E.call(this,H),I=K&&K.item;if(I){var J={item:F.clone(I)};mstrmojo.all.offModel.sendData(J);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Button");mstrmojo.HTMLButton=mstrmojo.declare(mstrmojo.Button,null,{scriptClass:"mstrmojo.HTMLButton",markupString:'<input id="{@id}" type="button" class="mstrmojo-text mstrmojo-HTMLButton mstrButton {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}" mstrAttach:click />',markupSlots:{inputNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"inline":"none";},onenabledChange:function(){mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);},onselectedChange:function(){mstrmojo.css[this.selected?"addClass":"removeClass"](this.domNode,["selected"]);},ontextChange:function(){this.inputNode.value=this.text!=null?this.text:"";},oniconClassChange:function(){this.domNode.className="mstrmojo-text mstrmojo-HTMLButton mstrButton "+this.cssClass+" "+this.iconClass+(this.enabled?"":" disabled");}}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2","mstrmojo.ListMapper","mstrmojo.ListBuilder","mstrmojo.ListSelector");mstrmojo.List=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.List",renderOnScroll:true,listMapper:mstrmojo.ListMapper,listBuilder:mstrmojo.ListBuilder,listSelector:mstrmojo.ListSelector,itemIdField:"dssid",itemField:"n",itemMarkup:null,itemMarkupFunction:null});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2");function B(E){var I=E.ctxtBuilder;if(I){var H=I.itemWidgets,G;for(G=H.length-1;G>-1;G--){var F=H[G];if(F){F.destroy(true);}}}}mstrmojo.WidgetListBase=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.WidgetListBase",unrender:function C(G){var I=this.ctxtBuilder;if(I){var H=I.itemWidgets,F;for(F=H.length-1;F>-1;F--){var E=H[F];if(E&&E.hasRendered){E.unrender(true);}}}this._super(G);},refresh:function A(E){B(this);if(this._super){this._super(E);}},destroy:function D(E){B(this);this._super(E);}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2","mstrmojo.ListMapperHoriz","mstrmojo.ListBuilder");mstrmojo.ListHoriz=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.ListHoriz",renderOnScroll:true,listMapper:mstrmojo.ListMapperHoriz,listBuilder:mstrmojo.ListBuilder,itemField:"n",itemMarkup:null,itemMarkupFunction:null});})();(function(){mstrmojo.requiresCls("mstrmojo.ListHoriz","mstrmojo.fx");mstrmojo.FishEye=mstrmojo.declare(mstrmojo.ListHoriz,null,{scriptClass:"mstrmojo.FishEye",width:16,size:10,step:16,speed:2,cssClass:"mstrmojo-FishEye",cssClassItem:"mstrmojo-dot",itemMarkupFunction:function(B,A,C){return'<div class="mstrmojo-fisheye-item '+C.cssClassItem+'" title="'+B.n+'" idx="'+A+'" did="'+B.did+'">&nbsp;</div>';},onchange:function(){this.scroll2();this.parent.set("selectedIndex",this.selectedIndex);},as:new mstrmojo.fx.AnimateProp(),onitemsChange:function(){if(this._super){this._super();}this.last=this.items.length-1;this.first=Math.max(0,this.last-this.size);if(this.items.length>this.size){this.scroll("left",this.width);}},scroll2:function(){var A=this.selectedIndex-this.last;if(this.selectedIndex==this.first&&this.first>0){this.scroll("right",this.width);}else{if(this.selectedIndex==this.last&&this.last<this.items.length-1){this.scroll("left",this.width);}else{if(this.selectedIndex>this.last){A=this.selectedIndex-this.last;this.scroll("left",this.width*A,A);this.last=Math.min(this.items.length-1,this.last+A);}else{if(this.selectedIndex<this.first){A=this.first-this.selectedIndex;this.scroll("right",this.width*A,A);this.first=Math.max(0,this.first-A);}}}}},scroll:function(C,F,E){var B=this.itemsContainerNode,I=B&&B.style;var D=this.as,H=parseInt(mstrmojo.css.getStyleValue(B,{left:"right",right:"left"}[C]),10),H=isNaN(H)?0:H,A=parseInt(I.left,10)||0,G=A+(C=="left"?-1:1)*(F||(Math.min(this.step,(-1)*H)));D.target=B;D.props={left:{start:A,stop:G,duration:100,interval:10,suffix:"px"}};D.play();E=E===undefined?1:E;this.first+=(C=="left"?1:-1)*E;this.last=this.first+this.size-1;this.parent.set("scrollable",this.last<this.items.length-1);this.parent.set("rightScrollable",this.first>0);return G;},srcId:null,postBuildRendering:function(){if(this._super){this._super();}this.hasRendered=!!this.domNode;var E=this.itemsContainerNode,A=E&&E.firstChild,B=A&&A.rows&&A.rows[0],D=B&&B.cells&&B.cells[0];this.first=0;this.last=this.size-1;var C=this.srcId;if(C&&mstrmojo.all[C]&&mstrmojo.all[C].attachEventListener){mstrmojo.all[C].attachEventListener("change",this.id,function(F){if(this.items[this.items.length-1]!=F.src.selectedItem){this.items.add([mstrmojo.hash.copy(F.src.selectedItem)]);this.set("selectedIndex",this.items.length-1);}if(this.items.length>this.size){this.set("rightScrollable",this.items.length>this.size);this.scroll("left",this.width*(this.selectedIndex-this.last),(this.selectedIndex-this.last));}});}this.itemsContainerNode.style.left=Math.min(0,(this.size-this.items.length+1))*this.width+"px";}});})();(function(){mstrmojo.requiresCls("mstrmojo.WidgetListBase","mstrmojo.WidgetListMapper","mstrmojo.WidgetListBuilder");mstrmojo.WidgetList=mstrmojo.declare(mstrmojo.WidgetListBase,null,{scriptClass:"mstrmojo.WidgetList",renderOnScroll:true,listMapper:mstrmojo.WidgetListMapper,listBuilder:mstrmojo.WidgetListBuilder,itemConfig:null,itemFunction:null,initBindings:function(){this._super();var E=this.ctxtBuilder,D=E&&E.itemWidgets;if(D){for(var C=0,A=D.length;C<A;C++){var B=D[C];if(B&&B.initBindings){B.initBindings();}}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListSelector","mstrmojo.List","mstrmojo.string");mstrmojo.OBList=mstrmojo.declare(mstrmojo.List,null,{scriptClass:"mstrmojo.OBList",cssClass:"mstrmojo-OBList",itemClass:"mstrmojo-OBListItem",iconClass:"mstrmojo-OBListItemIcon",textClass:"mstrmojo-OBListItemText",iconCssPrefx:"mstrmojo-OBIcon_",itemMarkupFunction:function(C,A,B){return'<div class="'+B.itemClass+(C[B.itemType]?" t_"+C[B.itemType]:"")+(C[B.itemSubType]?" st_"+C[B.itemSubType]:"")+(C[this.itemISC]?" isc":"")+(C[B.itemViewMedia]?" vm_"+C[B.itemViewMedia]:"")+'"><table cellspacing="0" cellpadding="0"><tbody><tr><td>'+B.getIcon(C)+'</td><td><div class="'+B.textClass+'" title="'+B.getTooltip(C)+'">'+mstrmojo.string.htmlAngles(C.n)+"</div></td></tr></tbody></table></div>";},getIcon:function(F){var E=F[this.itemType],D=F[this.itemSubType],B=" t"+E,C=(parseInt(E,10)===1||parseInt(E,10)===3||parseInt(D,10)===14082)?" st"+D:"",G=F[this.itemISC]?'class="mstrmojo-ListIcon isc"':"",A=(F[this.itemViewMedia]===2048||F[this.itemViewMedia]===8192)?" hvi":"";return'<span class="mstrmojo-ListIcon '+B+C+A+'"><span '+G+"></span></span>";},getTooltip:function(C){var D="",F=C.anc&&C.anc.items,A=F&&F.length,B;if(A>0){for(B=0;B<A-1;B++){D+=F[B].n+" > ";}D+=F[A-1].n;}var E=C.desc,G=128;if(E){D+="\r\n\r\n"+mstrmojo.string.encodeHtmlString(E.substring(0,G))+(E.length>G?"...":"");}return D;},listSelector:mstrmojo.ListSelector,selectionPolicy:"reselect",itemType:"t",itemSubType:"st",itemISC:"isc",itemViewMedia:"dvm",useDblSelect:false});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.string","mstrmojo.dom","mstrmojo.Popup","mstrmojo.List","mstrmojo.DropDownButton");var B=mstrmojo.dom;mstrmojo.Pulldown=mstrmojo.declare(mstrmojo.DropDownButton,null,{scriptClass:"mstrmojo.Pulldown",cssClass:"mstrmojo-Pulldown",items:null,itemIdField:"dssid",itemField:"n",itemCSS:"css",itemTitleField:null,defaultSelection:0,defaultText:null,title:"",value:null,popupToBody:false,popupCssClass:"",popupZIndex:null,fixWidth:false,fixHeight:false,allowHTML:false,_set_items:function(H,F){var G=this.items;this.items=F||[];return G!==this.items;},markupMethods:mstrmojo.hash.copy({onvalueChange:function(){var G=this.value,F=this.selectedIndex,I=this.items||[],J,H;if(F===undefined||(G!==null&&(F===-1||(F!==-1&&I[F]&&I[F][this.itemIdField]!==G)))){F=mstrmojo.array.find(I,this.itemIdField,G);F=(F>-1)?F:this.defaultSelection;this.selectedIndex=F;}else{if(G===null){this.selectedIndex=this.defaultSelection;}}this.selectedItem=J=I[this.selectedIndex];if(J){H=J[this.itemField];}else{H=this.defaultText||"";}this.set("text",H);}},mstrmojo.hash.copy(mstrmojo.DropDownButton.prototype.markupMethods)),prevalueChange:function D(){var G=this.value,F=-1;if(G!==null){F=mstrmojo.array.find(this.items,this.itemIdField,G);}if(F>-1){this.selectedItem=this.items[F];this.selectedIndex=F;}},togglePopup:function E(){if(this.popupToBody){var I=B.position(this.popupNode,true),H=this.popupRef,F={left:Math.round(I.x)+"px",top:Math.round(I.y)+"px"};if(!H.hasRendered){delete H.slot;F.placeholder=document.body.appendChild(document.createElement("div"));}this.popupOpenConfig=this.popupOpenConfig||{};mstrmojo.hash.copy(F,this.popupOpenConfig);}else{this.popupRef.slot="popupNode";}if(this._super){this._super();}var G=this.popupRef.domNode;if(G){if(this.fixWidth){G.style.width=(this.domNode.offsetWidth-2)+"px";}else{G.style.minWidth=(this.domNode.offsetWidth-2)+"px";}}},premousedown:function A(F){if(B.getButton(F.hWin,F.e)===B.MOUSE_BUTTON.LEFT){this.togglePopup();}},unrender:function C(F){var G=this.popupRef;if(this.popupToBody&&G.hasRendered){G.unrender(false);}if(this._super){this._super(F);}},itemName:function(H,F,G){return this.allowHTML?H[G.itemField]:mstrmojo.string.encodeHtmlString(H[G.itemField]);},popupRef:{scriptClass:"mstrmojo.Popup",slot:"popupNode",cssClass:"mstrmojo-Pulldown-Popup",autoCloses:false,modal:false,autoClose:true,locksHover:true,adjustSize:function(){var G=this.opener,F=this.domNode;if(G&&G.fixWidth){mstrmojo.css.addClass(F,["fix-width"]);}if(G&&G.fixHeight){mstrmojo.css.addClass(F,["fix-height"]);}},onOpen:function(){var H=this.opener,G=H&&H.popupZIndex,I=(H&&H.popupCssClass)||"",F=this.domNode;if(G){F.style.zIndex=G;}if(I){mstrmojo.css.addClass(F,[I]);}this.adjustSize();},children:[{scriptClass:"mstrmojo.List",alias:"list",itemMarkupFunction:function(I,F,G){var H=I[G.itemCSS]||G.parent.opener.item2textCss&&G.parent.opener.item2textCss(I)||"",J=G.parent.opener.itemName;return'<div class="mstrmojo-Pulldown-listItem"><div class="mstrmojo-text '+H+'" title="'+I[G.itemTitleField||G.itemField]+'">'+(J(I,F,G)||"&nbsp;")+"</div></div>";},renderOnScroll:false,bindings:{itemIdField:"this.parent.opener.itemIdField",itemField:"this.parent.opener.itemField",itemCSS:"this.parent.opener.itemCSS",itemTitleField:"this.parent.opener.itemTitleField",items:"this.parent.opener.items",selectionPolicy:"this.parent.opener.selectionPolicy",selectedIndex:"this.parent.opener.selectedIndex"},onmousedown:function(){this.parent.close();},onchange:function(){var H=this.parent,I=H.visible,F=H.opener,G=this.selectedItem;if(!F||!G||!I){return ;}F.set("value",G[this.itemIdField]);}}]}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.Button","mstrmojo.DropDownButton","mstrmojo.Label","mstrmojo.WaitIcon");mstrmojo.IncFetch=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.IncFetch",markupString:'<div id="{@id}" class="mstrmojo-IncFetch {@cssClass}" style="{@cssText}"><div class="mstrmojo-IncFetch-content"></div><div class="mstrmojo-clearMe"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},preBuildRendering:function A(){var J=[],F=this.ds,M=this.cp,P=this.np,C=this.ps,E=this.id,G=2;var L=function(){mstrmojo.all[E].set("cp",this.text);};var H={f:1,p:Math.max(M-1,1),n:Math.min(M+1,P),l:P};for(var O in H){J.push(new mstrmojo.Button({iconClass:"arrow "+O,title:F[O],enabled:(H[O]!==M),text:H[O],onclick:L}));}var D=Math.max(Math.min(M-2,P-4),1),I=Math.min(D+4,P);for(var K=D;K<=I;K++){var N;if(K===M){if(I-D===4&&P!==5){N=new mstrmojo.DropDownButton({height:"13px",title:F.a?F.a:"",text:K,direction:"up",popupRef:{scriptClass:"mstrmojo.Popup",slot:"popupNode",contentNodeCssClass:"goto",autoCloses:false,locksHover:true,children:[{scriptClass:"mstrmojo.VBox",children:[{scriptClass:"mstrmojo.Label",cssText:"float:left;",text:F.gt},{scriptClass:"mstrmojo.TextBox",cssText:"float:left;",size:3,maxLength:String(P).length,onEnter:function(){var R=this.inputNode.value,T=this.parent.parent;if(R===""){T.close();return ;}var Q=parseInt(R,10),S=!(isNaN(Q)||Q<1||Q>P);if(S){mstrmojo.all[E].set("cp",Q);T.close();}else{this.setInvalidState(F.v.replace("###",P).replace("##",1).replace(" #",""));}}},{scriptClass:"mstrmojo.Button",cssText:"float:left",iconClass:"apply",title:F.ap?F.ap:"",onclick:function(){this.parent.children[1].onEnter();}}]}],onOpen:function(){mstrmojo.css.addClass(this.parent.domNode,["open"]);var Q=this.children[0].children[1].inputNode;window.setTimeout(function(){Q.focus();},0);},onClose:function(){mstrmojo.css.removeClass(this.parent.domNode,["open"]);this.children[0].children[1].cleanUp();}}});}else{N=new mstrmojo.Button({iconClass:"pg on",text:K});}}else{N=new mstrmojo.Button({iconClass:"pg",text:K,onclick:L});}J.splice(G++,0,N);}J.splice(G++,0,new mstrmojo.Label({text:F.pgs.replace("###",P).replace("##",""),cssText:"float:left;margin:1px 1px 1px 3px;"}));this._iWait=new mstrmojo.WaitIcon({cssText:"margin-top:-2px;"});J.push(this._iWait);this.addChildren(J);return this._super?this._super():true;},_set_cp:function B(D,C){if(parseInt(C,10)!==this.cp){this.raiseEvent({name:"fetch",v:C,iWait:this._iWait});}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.func","mstrmojo.array","mstrmojo.Button","mstrmojo.HBox","mstrmojo.dom","mstrmojo.Box");var D=mstrmojo.dom;mstrmojo.Dialog=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Dialog",title:"",buttons:null,alignment:"center",btnAlignment:"right",zIndex:10,modal:true,markupString:'<div id="{@id}" class="mstrmojo-Dialog {@cssClass}" style="z-index: 1100;" tabindex="0" mstrAttach:click><div class="win mstrmojo-Editor" style="{@cssText}"><div class="mstrmojo-Editor-titlebar"><div class="mstrmojo-Editor-title">{@title}</div></div><div class="mstrmojo-Editor-content"></div><div class="mstrmojo-Editor-buttons"></div></div><div class="mstrmojo-Editor-curtain"></div><div class="mstrmojo-Editor-tip"></div></div>',markupSlots:{editorNode:function(){return this.domNode.firstChild;},curtainNode:function(){return this.domNode.childNodes[1];},titleNode:function(){return this.domNode.firstChild.firstChild;},containerNode:function(){return this.domNode.firstChild.childNodes[1];},buttonNode:function(){return this.domNode.firstChild.lastChild;},tipNode:function(){return this.domNode.lastChild;}},editorNode:null,btnHbox:null,markupMethods:{onzIndexChange:function(){this.editorNode.style.zIndex=this.zIndex;this.curtainNode.style.zIndex=this.zIndex-1;},onwidthChange:function(){this.editorNode.style.width=this.width||"auto";},onvisibleChange:function(L){if(L){return ;}var J=this.visible,K=J?"block":"none";this.editorNode.style.display=K;if(this.modal){this.curtainNode.style.display=K;}},onleftChange:function(){this.editorNode.style.left=this.left||"";},ontopChange:function(){this.editorNode.style.top=this.top||"";},ontitleChange:function(){this.titleNode.firstChild.innerHTML=this.title||"";}},preBuildRendering:function F(){var J;var K=this.buttons;if(K&&!this.btnHbox){for(J in K){K[J].cssClass=(K[J].cssClass||"")+(this.noButtonCls?"":" mstrmojo-Editor-button");}this.addChildren([{scriptClass:"mstrmojo.HBox",cssText:"float:"+this.btnAlignment,slot:"buttonNode",alias:"btnHbox",children:K},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-clearMe",slot:"buttonNode"}]);}if(this.modal){this.cssClass+=" modal";}return this._super();},buildRendering:function B(){var J=this.placeholder;if(this._super()){if(!this.parent&&!J){document.body.appendChild(this.domNode);}return true;}return false;},getResizeHandler:function E(){var J=this.id;return function(){var K=mstrmojo.all[J];K.resizeDialog();K.positionDialog();};},postBuildRendering:function A(){this._super();if(this.modal&&this.visible){this.curtainNode.style.display="block";}if(!this._resizeHandler){var K=this._resizeHandler=this.getResizeHandler();D.attachEvent(window,"resize",K);}this.resizeDialog();this.positionDialog();try{this.domNode.focus();}catch(J){}return true;},resizeDialog:function G(){if(this.modal){this.resizeCurtain();}},resizeCurtain:function C(){var K=this,O=K.curtainNode,J=document.body,M=document.documentElement,N=O.style,L=K.curtainPosition;N.width=Math.max(J.clientWidth,M.scrollWidth)+"px";if(L&&L.h){N.height=L.h+"px";}else{N.height=Math.max(J.clientHeight,M.scrollHeight)+"px";}if(L&&L.y){N.top=L.y+"px";}K.raiseEvent({name:"resizeCurtain"});},positionDialog:function H(){var K=this.editorNode,M=this.left,L=this.top;if(!M||!L){D.center(K);var J=K.style;if(this.alignment==="top"){J.top="10px";}if(M){J.left=M;}if(L){J.top=L;}}},destroy:function(K){var J=this._resizeHandler;if(J){D.detachEvent(window,"resize",J);}this._super(K);}});mstrmojo.toast=function I(O,M,Q,J){var P="mojoToast9",N,L=M||3000;if(J&&J.id){P=J.id+"-"+P;}try{mstrmojo.all[P].destroy();}catch(K){}mstrmojo.insert({id:P,scriptClass:"mstrmojo.Label",cssClass:(J&&J.cssClass)?J.cssClass:"toastCss",text:O}).render();N=mstrmojo.all[P].domNode;if(J&&J.dom){J.dom.appendChild(N);}else{document.body.appendChild(N);D.bottomCenter(N);}window.setTimeout(function(){if(Q){Q();}try{mstrmojo.all[P].destroy();}catch(R){}},L);};mstrmojo.mask={show:function(){var J=mstrmojo.mask.win=mstrmojo.insert({scriptClass:"mstrmojo.Box",cssClass:"fullscreen-mask"});J.render();document.body.appendChild(J.domNode);},hide:function(){mstrmojo.mask.win.destroy();}};}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.TextBox");var A=mstrmojo.css,C=mstrmojo.dom;mstrmojo.TextArea=mstrmojo.declare(mstrmojo.TextBox,null,{scriptClass:"mstrmojo.TextArea",markupString:'<textarea id="{@id}" class="mstrmojo-TextArea {@cssClass}"  style="{@cssText}" title="{@tooltip}" placeholder="{@placeholderText}" rows="{@rows}" cols="{@cols}" maxlength="{@maxLength}" index="{@tabIndex}" mstrAttach:focus,keydown,keyup,blur></textarea>',maxLength:256,onkeydown:function B(K){var I=this.inputNode,J=this.value,E=this.maxLength,F=(J&&J.length)||0,M=K.e,L=M.keyCode;this.isDeleteKeys=L===8||L===46;this.isArrowKeys=L===37||L===38||L===39||L===40;if(E!==undefined&&E<=F){var G=I.selectionEnd,H=(G!==undefined)?(G-I.selectionStart)>0:document.selection.createRange().text.length>0;if(!this.isDeleteKeys&&!this.isArrowKeys&&!H){if(C.isIE7||C.isIE8||C.isIE9){I.blur();window.setTimeout(function(){I.focus();},1);}C.preventDefault(window,M);return false;}}}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.TextArea,{oncssClassChange:function D(){A.addClass(this.domNode,this.cssClass||"");}});})();(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.tooltip","mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.hash","mstrmojo.string");mstrmojo.requiresDescs(11038,11935,11936,11937,11856,11938,13138,13230,13260,14633,14636);var C=mstrmojo.hash.copy,P=mstrmojo.css,J=mstrmojo.dom,N=mstrmojo.array,E=mstrmojo.string,Q=function Q(V,T){if(!V){return ;}var S=T&&T.length||0,U;for(U=S;U>0;U--){V=V.replace(new Array(U+2).join("#"),T[U-1]);}return V;},L=function L(T){if(!T){return ;}var Z=this,V=J.position(T.refNode||Z.refNode),Y=J.position(Z.domNode),X=T.position||R.RIGHT,U=0,a=0,S=9+(T.margin!==undefined?T.margin:0),W=" ";switch(X){case R.TOP:a=-Y.h-S;W+="t";break;case R.BOTTOM:a=V.h+S;W+="b";break;case R.LEFT:U=-Y.w-S;W+="l";break;case R.RIGHT:U=V.w+S;W+="r";break;}mstrmojo.hash.forEach(C(T,{left:U,top:a,contentNodeCssClass:W,visible:false}),function(b,c){this[c]=b;},this);this.set("visible",T.invalid);},A=function A(S){var W=this,U,V=S.errorCode,X=S.errorMsg,T=S.args,Y=mstrmojo.vi.ui.rw.selectors.EnumWarningMessages;if(S.invalid){U={content:V!==null?(W.generateContentHTML(Q(Y[V],T))||Y["*"]):X};}return U;};mstrmojo.vi.ui.rw.selectors.EnumWarningMessages=C(mstrmojo.locales.validation,{"*":mstrmojo.desc(11038,"Invalid"),invalidValueVIWarning:mstrmojo.desc(11935,"Invalid characters"),emptyValueVIWarning:mstrmojo.desc(11936,"Please enter a number"),notIntegerVIWarning:mstrmojo.desc(11937,"Please enter an integer"),outOfRangeVIWarning:mstrmojo.desc(11856,"Please enter value between ## and ###."),noMultiSelectionVIWaring:mstrmojo.desc(11938,"This selector does not support multiple selections."),continuousSelectionVIWaring:mstrmojo.desc(13138,"This selector does not support non-continuous selections."),bigDecimalMetricSliderVIWaring:mstrmojo.desc(13230,"Cannot qualify on big decimal value. Please change qualification type to Rank"),unableDisplaySelectionVIWarning:mstrmojo.desc(13260,"Filter cannot display actual selections."),imageSizeExceedLimitVIWarning:mstrmojo.desc(14633,"Cannot embed an image larger than ##MB. Your image is still ###MB after compression. Enter a URL to the image instead."),imageFileTypeNotSupportedVIWarning:mstrmojo.desc(14636,"Invalid image format. Please use .png, .jpg, .jpeg, .gif or .bmp."),imageOverSizeNoCompessionVIWarning:mstrmojo.desc(14665,"Cannot embed an image larger than ##MB. Enter a URL to the image instead.")});mstrmojo.vi.ui.rw.selectors.EnumWarningPosition={TOP:1,BOTTOM:2,LEFT:3,RIGHT:4};var R=mstrmojo.vi.ui.rw.selectors.EnumWarningPosition;mstrmojo.vi.ui.rw.selectors._HasWarningMessage=mstrmojo.provide("mstrmojo.vi.ui.rw.selectors._HasWarningMessage",{_mixinName:"mstrmojo.vi.ui.rw.selectors._HasWarningMessage",warningSlotName:"warning",showWarning:function G(U){var Y=this,a=Y.warningSlotName,c=Y[a],S=U&&U.lasting||6000,X=U.refNode||this.domNode,T=U.highlight!==false,b=U.closeOnClick===false?false:true,Z;if(!c){c=new mstrmojo.Tooltip({refNode:X,highlight:T,closeOnClick:b,updatePopupConfig:null,cssClass:"vi-warning vi-tooltip-V"});Y.addDisposable(c);Y[a]=c;Z=Y.closeOnClick=Y.getCloseOnClickListener();J.attachEvent(document.body,"click",Z);}var W=U.position||R.TOP,V="vi-warning vi-tooltip-";switch(W){case R.TOP:c.cssClass=V+"V";break;case R.BOTTOM:c.cssClass=V+"A";break;case R.LEFT:c.cssClass=V+"D";break;case R.RIGHT:c.cssClass=V+"C";break;}c.open(Y,A.call(Y,U));this.adjustPosition(U);if(T){P.toggleClass(c.refNode,"mstrmojo-Warning",true);}window.clearTimeout(Y._warningTimeOut);Y._warningTimeOut=window.setTimeout(function(){Y.hideWarning();},S);},hideWarning:function H(){var T=this,S=T[T.warningSlotName];if(S&&S.visible&&S.close){if(S.highlight){P.toggleClass(S.refNode,"mstrmojo-Warning",false);}S.close();window.clearTimeout(T._warningTimeOut);delete T._warningTimeOut;}},getCloseOnClickListener:function I(){var S=this;return function(){var T=S[S.warningSlotName];if(T.closeOnClick){S.hideWarning();}};},adjustPosition:function M(S){var T=this;L.call(T[T.warningSlotName],S);},generateContentHTML:function D(S){return E.encodeHtmlString(S,true);},bindWarningHandler:function F(){N.forEach(arguments,function S(U){if(!U||!U.attachEventListener){return ;}var V=U._validationEventListener,T;if(V){U.detachEventListener(V);delete U._validationEventListener;}T=this.getValidationEvtListener();if(T){U._validationEventListener=U.attachEventListener("validationChange",this.id,T);}},this);},getValidationEvtListener:function B(){var T=this;return function S(U){var V=U.value;T[(V&&V.invalid?"show":"hide")+"Warning"](V);};},unrender:function K(S){var T=this[this.warningSlotName];if(T){T.unrender();}this._super(S);},destroy:function O(S){J.detachEvent(document.body,"click",this.closeOnClick);return this._super(S);}});}());(function(){mstrmojo.requiresCls("mstrmojo.TextBox","mstrmojo._CanValidate","mstrmojo.css","mstrmojo.validation","mstrmojo.vi.ui.rw.selectors._HasWarningMessage");var H=mstrmojo.css,E=mstrmojo.validation,G=E.TRIGGER,J=E.STATUSCODE;function F(L){if((this.constraints.trigger&L)>0){this.validate();}}mstrmojo.ValidationTextBox=mstrmojo.declare(mstrmojo.TextBox,[mstrmojo._CanValidate,mstrmojo.vi.ui.rw.selectors._HasWarningMessage],{scriptClass:"mstrmojo.ValidationTextBox",validationDelay:500,getInvalidMsg:function K(L){return(L&&L.msg?L.msg:"");},postBuildRendering:function A(){this._super();this._original_tooltip=this.inputNode.title;},prekeyup:function I(L){this._super(L);var P=(this.constraints.trigger&G.ONKEYUP)>0;if(P){var M=this.validationDelay;if(M){this.clearValDelayTimer();var O=this._validateHandler;if(!O){var N=this;this._validateHandler=O=function(){N.validate();if(N._valDelayTimer){window.clearTimeout(N._valDelayTimer);delete N._valDelayTimer;}};}this._valDelayTimer=window.setTimeout(O,M);}else{this.validate();}}},preinput:function D(L){this._super(L);F.call(this,G.ONKEYUP);},preblur:function B(L){this._super(L);F.call(this,G.ONBLUR);},clearValidation:function C(){this._super();var L=this.inputNode;H.removeClass(L,this.constraints.invalidCssClass||"mstrmojo-TextBox-ErrValidation");L.title=this._original_tooltip;},clearValDelayTimer:function(){var L=this._valDelayTimer;if(L){window.clearTimeout(L);}}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.ValidationTextBox,{onvalidationStatusChange:function(){var P=this.validationStatus;if(!P){return ;}var N=this.inputNode,L=(P.code>J.VALID),M=this.constraints.invalidCssClass;H.toggleClass(N,M||"mstrmojo-TextBox-ErrValidation",L);var O=L?this.getInvalidMsg(P):this._original_tooltip;if(!this.useRichTooltip&&O!==undefined&&O!==null){N.setAttribute("title",O);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.fx","mstrmojo.Dialog","mstrmojo.Label","mstrmojo._IsPopup","mstrmojo._HasPopup","mstrmojo._IsMovable","mstrmojo.ui._HasUITheme","mstrmojo.Button","mstrmojo.dom","mstrmojo.hash","mstrmojo.array","mstrmojo.tooltip","mstrmojo.ui.editors.ErrorDialogContent");var j=mstrmojo.func.composite,M=mstrmojo.dom,Z=mstrmojo.Button.newWebButton,C=mstrmojo.css,Y=mstrmojo.all,N=mstrmojo.hash,b=mstrmojo.DI.DIHelpers,W=mstrmojo.array;function V(q){if(!this.modal){return ;}var r=window.mstrApp;if(r&&r.modalEditorChange){r.modalEditorChange(this.id,q);}}mstrmojo.Editor=mstrmojo.declare(mstrmojo.Dialog,[mstrmojo._IsPopup,mstrmojo._HasPopup,mstrmojo._IsMovable,mstrmojo.ui._HasUITheme],{scriptClass:"mstrmojo.Editor",title:"",allowHTMLTitle:false,help:"",autoClose:false,showTitle:true,openEffect:null,themeClassName:"mojo-theme-light",useRichTooltip:true,closeEffect:null,onEditorResized:null,markupString:'<div id="{@id}" class="mstrmojo-Editor-wrapper"><div class="mstrmojo-Editor {@cssClass}" style="z-index:{@zIndex};{@cssText}" mstrAttach:mouseup,mousedown,click,contextmenu>{@titlebarHTML}<div class="mstrmojo-Editor-content"></div><div class="mstrmojo-Editor-buttons"></div></div><div class="mstrmojo-Editor-curtain"></div></div>',titleMarkupString:'<div class="mstrmojo-Editor-title-container"><div class="mstrmojo-Editor-title"></div><div class="edt-title-btn mstrmojo-Editor-help" tooltip="'+mstrmojo.desc(1143,"help")+'"></div><div class="edt-title-btn mstrmojo-Editor-close" tooltip="'+mstrmojo.desc(2102,"Close")+'"></div></div><div class="mstrmojo-Editor-titleSpacer"></div>',markupSlots:{editorNode:function X(){return this.domNode.firstChild;},titleContainerNode:function k(){return this.domNode.firstChild.firstChild;},titlebarNode:function m(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild:null;},titleNode:function R(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild:null;},helpNode:function n(){return this.showTitle?this.domNode.firstChild.firstChild.children[1]:null;},closeNode:function E(){return this.showTitle?this.domNode.firstChild.firstChild.lastChild:null;},containerNode:function S(){return this.domNode.firstChild.childNodes[2];},buttonNode:function I(){return this.domNode.firstChild.childNodes[3];},curtainNode:function o(){return this.domNode.lastChild;}},markupMethods:{ontitleChange:function(){if(this.showTitle){this.titleNode.innerHTML=this.allowHTMLTitle?this.title:mstrmojo.string.encodeHtmlString(this.title);}},onzIndexChange:function(){var q=this.zIndex;this.editorNode.style.zIndex=q;this.curtainNode.style.zIndex=q-1;},onvisibleChange:function(t){if(t){return ;}var s=this.visible,r="closeEffect",q="none";if(s){r="openEffect";q="block";}if(this[r]){this.playEffect(r);}else{this.editorNode.style.display=q;if(this.modal){this.curtainNode.style.display=q;}}},onhelpChange:function e(){if(this.showTitle){var r=this.help,q=this.helpNode;if(!r){q.style.display="none";}else{q.style.display="block";}}},onleftChange:function F(){this.editorNode.style.left=this.left||"";},ontopChange:function H(){this.editorNode.style.top=this.top||"";}},open:function Q(r,q){this._super(r,q);V.call(this,true);},close:function g(q){this._super(q);V.call(this,false);},unrender:function B(q){this._super(q);V.call(this,false);},destroy:function h(q){this._super(q);V.call(this,false);},preBuildRendering:function A(){if(!this.slot&&!this.placeholder){this.placeholder=document.body.appendChild(document.createElement("div"));this._curtain_to_body=true;V.call(this,true);}this.titlebarHTML=(this.showTitle)?this.titleMarkupString:"<div></div><div></div>";return this._super();},getMovingHandle:function l(){return this.titlebarNode;},getMovingTarget:function U(){return this.editorNode;},onPreClose:function G(){this.hideTooltip();return true;},premousedown:function P(q){var r=q.getTarget();if(r===this.closeNode||r===this.helpNode){C.toggleClass(r,"active",true);}},premouseup:function O(q){var r=q.getTarget();if(r===this.closeNode||r===this.helpNode){C.toggleClass(r,"active",false);}if(q.getTarget()===this.closeNode&&this.onPreClose()){this.close();}},onclick:function d(q){if(q.getTarget()===this.helpNode){if(mstrApp.showHelpTopic){mstrApp.showHelpTopic(this.help);}else{window.open(mstrmojo.helpPath()+(this.help||""),"_blank");return false;}}},_set_visible:function c(w,s){var r=(this[w]!==s);if(r){this[w]=s;var u=this._close_handler;if(s){if(this._curtain_to_body){this.resizeDialog();this.positionDialog();}if(this.autoClose){var t=this;u=this._close_handler=u||function(v){var x=M.eventTarget(self,v);if(x&&x.parentNode&&!M.contains(t.editorNode,x,true,document.body)){t.close();}};M.attachEvent(document.body,"mousedown",u);}}else{var q=this._curtain_handler;if(q){M.detachEvent(window,"resize",q);}if(u){M.detachEvent(document.body,"mousedown",u);}}}return r;},showTooltip:function p(w,v){var u=this,r=M.findAncestorByAttr(M.eventTarget(v,w),"tooltip",true,this.domNode),s=r&&r.value;if(!u.hasOpenTooltip&&s){var q=M.position(r.node);u.richTooltip={cssClass:"vi-regular A-center vi-tooltip-A",content:s,top:Math.max(q.y+40,0),left:Math.max(q.x+4,0),posType:mstrmojo.tooltip.POS_TOPCENTER};this._super(w,v);}}});mstrmojo.Editor.openEffect_fadeIn={scriptClass:"mstrmojo.fx.AnimateProp",slot:"curtainNode",props:{backgroundColor:{start:255,stop:0,fn:function(q){q=Math.round(q);return["rgb(",q,",",q,",",q,")"].join("");}}},preStart:function(){var r=this.target,q=this.widget;q.editorNode.style.display="block";if(!q.modal){return false;}r.style.display="block";C.setOpacity(r,60);return true;}};mstrmojo.Editor.closeEffect_fadeOut={scriptClass:"mstrmojo.fx.FadeOut",slot:"curtainNode",start:0.6,stop:0,preStart:function(){var q=this.widget;q.editorNode.style.display="none";return !!q.modal;}};function D(q){return function(){Y[q].destroy();};}function J(r,y,z,AA){var q=y.id||"mojoAlertx9",v,x=y.buttons;W.forEach(x,function(AC){var AB=AC.onclick;AC.onclick=function(AD){var AE=Y[q];if(AB&&AB.call(AC,AD)===false){return ;}AE.destroy();AE=null;};});try{!!Y[q]&&Y[q].destroy();}catch(w){}var s=y.cssClass,t=[];if(s){t.push(s);delete y.cssClass;}if(AA){t.push(AA);}t.push("mstrmojo-alert");v={scriptClass:"mstrmojo.Editor",id:q,width:"475px",zIndex:1000,title:z||mstrmojo.desc(11812,"Notification"),cssClass:t.join(" "),children:[{scriptClass:"mstrmojo.Box",cssClass:"alert-content",children:[{scriptClass:"mstrmojo.Label",text:r,allowHTML:y.allowHTML}]}],visible:true};var u=new mstrmojo.Editor(N.copy(y,v));u.render();return u;}if(window.mstrConfig&&!window.mstrConfig.simpleDialog){mstrmojo.notify=function L(r,x,s){s=s||{};var y=s.forceClose,w=s.callback||mstrmojo.emptyFn,v=N.copy(x||{},{buttons:y?[mstrmojo.Button.newActionButton((s.buttonText||mstrmojo.desc(8607,"Dismiss")),w)]:null,showTitle:false,modal:false,top:"42px"}),t=s.duration||6000;var u=J(r,v,"",y?"ed-notify":"ed-toast"),q=u.id;if(!y){window.setTimeout(j([w,D(q)]),t);}else{window.setTimeout(function(){if(Y[q]){Y[q].editorNode.style.opacity=0.75;}},6000);}return u;};mstrmojo.confirm=function f(q,w,y){w=w||{};var s=w.confirmBtn||{},v=w.cancelBtn||{},x=s.hot!==false,r=!!v.hot,u=y&&y.title,t=[Z(s.t||mstrmojo.desc(219,"Yes"),s.fn,x,s.cfg),Z(v.t||mstrmojo.desc(218,"No"),v.fn,r,v.cfg)];return J(q,N.copy(y||{},{buttons:t,onPreClose:function(){if(v&&v.fn){v.fn();}return true;}}),u,b.getEnvObj().isStandaloneDataSet()?["error-dialogue-in-dataset"]:[]);};mstrmojo.warn=function K(s,q,r){r=r||{};r.cssClass=(r.cssClass||"")+" mstrmojo-warning";return mstrmojo.confirm(s,q,r);};mstrmojo.alert=function a(v,s,u,w,q,t){var r={title:u||mstrmojo.desc(12405,"Alert"),zIndex:w,cssClass:q,buttons:[Z(mstrmojo.desc(1442,"OK"),s,true)],onPreClose:function(){if(s){s();}return true;}};N.forEach(r,function(y,x){if(!y){delete r[x];}});return J(v,N.copy(t,r),u,b.getEnvObj().isStandaloneDataSet()?["error-dialogue-in-dataset"]:[]);};mstrmojo.error=function T(v,r,u){var s=v||{};var t=mstrmojo.desc(96,"Error");var q=!(b.getEnvObj().isInDI()||b.getEnvObj().isInQB());if(u){t=(u.title)?u.title:mstrmojo.desc(96,"Error");u.title=t;if(u.enableContactStr===false){q=false;}}J("",N.copy(u||{},{buttons:[Z(mstrmojo.desc(1442,"OK"),r,true)],children:[{scriptClass:"mstrmojo.ui.editors.ErrorDialogContent",shortDesc:s.shortDesc,longDesc:s.longDesc,showToggle:!!(s.longDesc),enableContactStr:q,allowHTML:!!(u&&u.allowHTML===true)}]}),t,b.getEnvObj().isStandaloneDataSet()?["error-dialogue-in-dataset"]:[]);};}mstrmojo.Editor.ButtonConfigType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.OBList","mstrmojo.ui._IsIncFetchList","mstrmojo.ui._HasScroller");var F=mstrmojo.array,A=mstrmojo.chart.model.enums.EnumDSSObjectType;function D(G){return{browseConfig:null,parent:G,next:function(J){var I=this.browseConfig;if(!I){return ;}I.blockBegin+=I.blockCount;var H={taskId:"searchMetadata",styleName:"MojoFolderStyle",blockBegin:I.blockBegin,blockCount:I.blockCount,includeAncestorInfo:true};if(I.folderLinksContextId){H.folderLinksContextId=I.folderLinksContextId;}if(I.includeObjectDesc){H.includeObjectDesc=I.includeObjectDesc;}if(I.rootFolderID){H.rootFolderID=I.rootFolderID;}else{if(I.rootFolderType){H.rootFolderType=I.rootFolderType;}}if(I.browsableTypes){H.objectType=I.browsableTypes;}if(I.searchPattern){H.searchPattern=I.searchPattern;if(I.recursive){H.recursive=I.recursive;}}this.parent.set("waiting",true);if(I.dataProvider){I.dataProvider.serverRequest(H,J);}else{mstrmojo.xhr.request("POST",mstrConfig.taskURL,J,H);}},hasNext:function(){var H=this.browseConfig;return(H.blockBegin+H.blockCount-1)<H.totalSize;}};}mstrmojo.mstr.ui.IncFetchOBList=mstrmojo.declare(mstrmojo.OBList,[mstrmojo.ui._IsIncFetchList,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.mstr.ui.IncFetchOBList",cssClass:"mstrmojo-OBList mstrmojo-IF-OBList",makeObservable:true,renderOnScroll:false,waiting:false,markupString:'<div id="{@id}" class="mstrmojo-ListBase2 {@cssClass}" style="position:relative;{@cssText}" mstrAttach:keypress,mousedown,mouseup,dblclick><div class="scroll-box" style="{@scrollBoxCssText}"><div class="mstrmojo-ListBase2-itemsContainer" style="{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode.firstChild;},itemsContainerNode:function(){return this.domNode.firstChild.firstChild;},dropCueNode:function(){return this.domNode.firstChild.lastChild;}},markupMethods:{onwaitingChange:function(){this.onwaitingChange();}},init:function E(G){if(this._super){this._super(G);}this.ifDataHelper=D(this);if(G.browseConfig){this.ifDataHelper.browseConfig=G.browseConfig;}},onwaitingChange:mstrmojo.emptyFn,addItems:function B(G){var H=this.browseConfig.browsableViewMedias;if(G&&H){var I={};F.forEach(H.split(","),function(J){I[parseInt(J,10)]=true;});G=F.filter(G,function(J){return(J.t!==A.DssTypeDocumentDefinition)||I[J.dvm];});}this.add(G,-1);this.set("waiting",false);if(this._super){this._super(G);}if(this.scrollNode){this.updateScrollbars();}},setupScrollNodes:function C(){this.scrollNode=this.scrollboxNode;}});}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo.dom","mstrmojo.TreeNodeSelector");var B=mstrmojo.dom,A={0:"closed",1:"opened",2:"leaf"};mstrmojo.TreeNode=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.TreeNode",markupString:'<li id="{@id}" class="mstrmojo-TreeNode {@cssClass}" style="{@cssText}" mstrAttach:mousedown,mouseover><div class="mstrmojo-TreeNode-div"><img class="mstrmojo-TreeNode-state" src="../images/1ptrans.gif" /><span class="mstrmojo-TreeNode-text {@textCssClass}"></span></div><ul class="mstrmojo-TreeNode-itemsContainer">{@itemsHtml}</ul></li>',markupSlots:{stateNode:function(){return this.domNode.firstChild.firstChild;},textNode:function(){return this.domNode.firstChild.lastChild;},itemsContainerNode:function(){return this.domNode.lastChild;}},markupMethods:{ontextChange:function(){this.textNode.innerHTML=mstrmojo.string.encodeHtmlString(this.text);},onstateChange:function(){this.stateNode.className="mstrmojo-TreeNode-state "+(A[this.state]||"closed");this.itemsContainerNode.style.display=(this.state===1)?"block":"none";},onselectedChange:function(){var D=this.selected?"addClass":"removeClass";mstrmojo.css[D](this.domNode.firstChild,["selected"]);},ondropCuePosChange:mstrmojo.WidgetList.prototype.markupMethods.ondropCuePosChange},renderOnScroll:false,listSelector:mstrmojo.TreeNodeSelector,premousedown:function C(D){var E=this._super(D),F=B.eventTarget(D.hWin,D.e);if(F===this.stateNode){if(this.state!==2){this.set("state",this.state===1?0:1);}}return E;},preclick:function(D){mstrmojo.dom.stopPropogation(D.hWin,D.e);},prechange:function(D){var E=this._super(D);if(E!==false){var F=this.tree;if(F&&F.onnodechange){F.onnodechange(D);}}return E;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Arr","mstrmojo.Button","mstrmojo.HBox","mstrmojo.FishEye");var A=function(B){return mstrmojo.hash.copy(B,{scriptClass:"mstrmojo.Button",text:"",enabled:false,dir:"left",cssClass:"mstrmojo-icon left",onclick:function(){var D=this.parent.fishEyeList,C=D&&D.scroll(this.dir,D.step);}});};mstrmojo.FishEyeContainer=mstrmojo.declare(mstrmojo.HBox,null,{scriptClass:"mstrmojo.FishEyeContainer",cssClass:"mstrmojo-FishEyeContainer",selectedIndex:-1,setItems:function(B){this.fishEyeList.set("items",B);},setSelectedIndex:function(B){this.fishEyeList.set("selectedIndex",B);},scrollable:false,rightScrollbale:false,children:[A({bindings:{enabled:"!!this.parent.scrollable"}}),({scriptClass:"mstrmojo.FishEye",alias:"fishEyeList",items:mstrmojo.Arr.makeObservable([]),srcId:"obList"}),A({alias:"feScrollRight",cssClass:"mstrmojo-icon right",dir:"right",bindings:{enabled:"!!this.parent.rightScrollable"}})]});mstrmojo.css=mstrmojo.hash.copy({getStyleValue:function(D,E){var B=null;if(D.currentStyle){E=(E==="float"?"styleFloat":E);B=D.currentStyle[E];}if(document.defaultView&&document.defaultView.getComputedStyle){E=(E==="float"?"cssFloat":E);var C=document.defaultView.getComputedStyle(D,null);B=C?C[E]:null;}return B;},setStyleValue:function(D,F,E){var B=function(G){return !!(G&&(typeof G==="object")&&(typeof G.length==="number"));};if(B(F)&&B(E)){var C;for(C in F){D.style[F[C]]=E[C];}}else{D.style[F]=E;}}},mstrmojo.css);}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo.WidgetTreeBuilder","mstrmojo.TreeNodeSelector");var E=false;mstrmojo.WidgetTree=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.WidgetTree",listBuilder:mstrmojo.WidgetTreeBuilder,listSelector:mstrmojo.TreeNodeSelector,renderOnScroll:true,itemIdField:"dssid",itemDisplayField:"n",itemIconField:"tp",itemChildrenField:"items",itemFunction:function D(L,I,J){if(!E){mstrmojo.requiresCls("mstrmojo.TreeNode");E=true;}var H=J.tree||J,K=new mstrmojo.TreeNode({data:L,state:0,parent:J,tree:H,multiSelect:J.multiSelect,text:L[J.itemDisplayField],textCssClass:H.item2textCss(L),items:L[J.itemChildrenField],itemIdField:J.itemIdField,itemDisplayField:J.itemDisplayField,itemIconField:J.itemIconField,itemChildrenField:J.itemChildrenField,itemFunction:J.itemFunction,listSelector:J.listSelector});return K;},item2textCss:function B(H){return H[this.itemIconField];},selectionParentNode:null,init:function F(H){this._super(H);this.selectionParentNode=this;this.tree=this;},clearTreeSelect:function A(){(this.selectionParentNode||this).clearSelect();},prechange:function G(H){var I=this._super(H);this.onnodechange(H);return I;},onnodechange:function C(I){if(!I){return ;}var J=mstrmojo.hash,M=this.selectionParentNode,L=I.src;if(L===M){if(J.isEmpty(L.selectedIndices)){L=this;this.selectionParentNode=this;}this.raiseEvent({name:"selectionChange",parentNode:L,parentNodeWas:M,added:I.added,removed:I.removed});}else{if(I.added&&I.added.length){var K=[];if(!J.isEmpty(M.selectedIndices)){K=mstrmojo.hash.keyarray(M.selectedIndices,true);M.clearSelect();}this.selectionParentNode=L;this.raiseEvent({name:"selectionChange",parentNode:L,parentNodeWas:M,added:I.added,removed:K});}else{}}}});})();(function(){mstrmojo.requiresCls("mstrmojo._CanValidate","mstrmojo.hash","mstrmojo.num","mstrmojo.date","mstrmojo.Container","mstrmojo.ValidationTextBox","mstrmojo.Table","mstrmojo.Label","mstrmojo.CheckBox","mstrmojo.DynamicClassFactory","mstrmojo.TristateCheckBox");mstrmojo.requiresDescs(2789,3575,5291,5292,5443,7658,7659,7660,8248,8249,8274,9274,9511,9894,9895,9896,9897);var T=mstrmojo.hash,M=mstrmojo.validation,Q=mstrmojo.num,P=mstrmojo.date,K=M.TRIGGER,X="M/d/yyyy",J="H:mm:ss";var F=function F(){var Y=mstrmojo.all.teModel.currentTxInput.ctl.pr.vls;this.set("checked",Y.length===this.value);return true;},C=function B(){var Z,Y=[];for(Z=0;Z<this.value;Z++){Y.push({n:Z+1,v:Z+1});}mstrmojo.all.teModel.currentTxInput.ctl.pr.vls=Y;};mstrmojo.txEditor.CommonComponent={CTRL_TYPES:{CTRL_TEXTFIELD:1,CTRL_SWITCH:2,CTRL_LIST:3,CTRL_SLIDER:4,CTRL_CALENDAR:5,CTRL_TIMEPICKER:6,CTRL_TOGGLE:7,CTRL_TEXTAREA:8,CTRL_SIG_CAPTURE:9,CTRL_RATING:10,CTRL_RANK:11,CTRL_STEPPER:12,CTRL_BARCODE:13,CTRL_LIKERTSCALE:14},CONTROL_NAMES:{1:mstrmojo.desc(3575),2:mstrmojo.desc(7660),3:mstrmojo.desc(5292),4:mstrmojo.desc(7658),5:mstrmojo.desc(5443),6:mstrmojo.desc(8249),7:mstrmojo.desc(8248),8:mstrmojo.desc(8274),9:mstrmojo.desc(9274),10:mstrmojo.desc(9894),11:mstrmojo.desc(2789),12:mstrmojo.desc(7659),13:mstrmojo.desc(9895),14:mstrmojo.desc(9896)},INPUT_VALUES:{INPUT_VALUES_CALCULATED:0,INPUT_VALUES_MANUAL:1,INPUT_VALUES_DATASET:2},CHANGE_TYPES:{CHANGE_TYPE_DEFAULT:1,CHANGE_TYPE_MARK_SELECTION:2},LIST_TYPES:{LIST_TYPE_PULLDOWN:0,LIST_TYPE_RADIOLIST:1},LIST_NAMES:{0:mstrmojo.desc(5291),1:mstrmojo.desc(9897)},RW_UNIT_TYPE:{RW_UNIT_FIELDGROUP:51,RW_UNIT_GRIDGRAPH:52},TAP_PANEL:{TNX_MAP:0,TNX_LOCL:1},STATEMENT_TYPE:{STATEMENT_UPDATE:0,STATEMENT_INSERT:1,STATEMENT_DELETE:2},CSI_KEYWORD_TYPE:{UPDATE:312,SET:313,INSERT:314,DELETE:315,WHERE:316,INTO:317,VALUES:318,FROM:319,FIELDUNIT:321},SAVING_PHASE:{MAPPING:1,LOCL:2,ALL:3},isStringType:function(Y){return M.isString(Y);},isNumericType:function(Y){return M.isNumeric(Y)||M.isInt(Y);},toLocaleUnits:function I(Y){return Q.convertToLocalUnits(Y).replace(/0{1,}$/,"").replace(/\.$/,".0").replace(/,$/,",0");},toUSUnits:function S(Y){return Q.toString(Q.convertToUSUnits(Y),true);},toUSDateString:function O(Y){if(Y){var Z=P.parseDateAndOrTime(Y);if(Z){return(Z.date?P.formatDateInfo(Z.date,X):"")+(Z.date&&Z.time?" ":"")+(Z.time?P.formatTimeInfo(Z.time,J):"");}}return"";},toLocaleDateString:function D(Y){if(Y){var Z=P.parseDateAndOrTime(Y,X,J);if(Z){return(Z.date?P.formatDateInfo(Z.date,mstrmojo.locales.datetime.DATEOUTPUTFORMAT):"")+(Z.date&&Z.time?" ":"")+(Z.time?P.formatTimeInfo(Z.time,mstrmojo.locales.datetime.TIMEOUTPUTFORMAT):"");}}return"";},showError:function E(Z){var Y=mstrmojo.all.mstrTE.curtain;Y.set("visible",true);mstrmojo.alert(Z,function(){Y.set("visible",false);},null,1000,"mstrmojo-TransactionEditor-Alert");},setChildrenVisibility:function N(c,Z){var b=c.children,Y=(b&&b.length)||0,d,a;for(a=0;a<Y;a++){d=b[a];d.set("visible",(Z&&d.getVisibility)?d.getVisibility():Z);}},createPanel:function U(Y){return T.copy(Y,{scriptClass:"mstrmojo.txEditor.Container"});},getVis:function A(){var Y=(!this._isVisible||this._isVisible())?true:false;if(Y&&this._initValue){this._initValue();}return Y;},onValChg:function W(){var Y=mstrmojo.all.teModel,Z=Y&&Y.currentTxInput;if(Z&&this.visible&&this.enabled){this.updateModel(this.isValid()?this.value:null);}else{if(this.inputNode){this.clearValidation();}}},createTextInput:function G(Z,a){var Y=this;return T.copy(Z,{scriptClass:"mstrmojo.ValidationTextBox",cssClass:"mstrmojo-TransactionEditor-TextBox",required:true,constraints:{trigger:K.ALL,max:Z.max,min:Z.min},onValid:Y.onValChg,onInvalid:Y.onValChg,getVisibility:Y.getVis,_set_value:function(g,d){var e=this.value,c=(e!==d);this.value=d;var f=this.constraints.trigger,b=(f&K.VALUESET)>0;if(b){this.validate(d);}return c;},_initValue:function(){this.set("value",mstrmojo.all.teModel.currentTxInput.ctl.pr[a]);},updateModel:function(b){mstrmojo.all.teModel.currentTxInput.ctl.pr[a]=b;}});},createCheckBox:function V(b,c,Z){var Y=Z||[true,false],a=this;return T.copy(b,{scriptClass:"mstrmojo.TristateCheckBox",cssClass:"tristate mstrmojo-TransactionEditor-CheckBox",grayed:false,getVisibility:a.getVis,_initValue:function(){var d=mstrmojo.all.teModel.currentTxInput.ctl.pr[c];this.set("checked",d===Y[0]);},oncheckedChange:function(){mstrmojo.all.teModel.currentTxInput.ctl.pr[c]=this.checked?Y[0]:Y[1];}});},createRequiredCheckBox:function H(Z){var Y=this;return T.copy(Z,{scriptClass:"mstrmojo.TristateCheckBox",cssClass:"tristate mstrmojo-TransactionEditor-CheckBox",text:mstrmojo.desc(9511),grayed:false,getVisibility:Y.getVis,_initValue:function(){this.set("checked",mstrmojo.all.teModel.currentTxInput.req===1);},oncheckedChange:function(){mstrmojo.all.teModel.currentTxInput.req=this.checked?1:0;}});},createLabel:function R(Y,Z){return T.copy(Y,{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-TransactionEditor-Label",text:Z});},createVlsRadioButton:function L(e){var c=e.value,Y=(c&&c.length)||0,Z=e.label||"",d=e.group||"RadioButton",b=[],f=[],a;for(a=0;a<Y;a++){b.push({scriptClass:"mstrmojo.CheckBox",value:c[a],type:"radio",label:c[a]+"-"+Z,name:d,slot:"0,"+a,getVisibility:F,onclick:C});f.push({});}return T.copy(e,{scriptClass:"mstrmojo.txEditor.Table",layout:[{cells:f}],children:b});}};mstrmojo.txEditor.Table=mstrmojo.declare(mstrmojo.Table,null,{scriptClass:"mstrmojo.txEditor.Table",postvisibleChange:function(){if(this._super){this._super();}mstrmojo.txEditor.CommonComponent.setChildrenVisibility(this,this.visible);}});mstrmojo.txEditor.Container=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.txEditor.Container",markupString:'<div id="{@id}" class="{@cssClass}" style="{@cssText}"></div>',cssClass:"mstrmojo-TransactionEditor-Panel",markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";mstrmojo.txEditor.CommonComponent.setChildrenVisibility(this,this.visible);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ValidationTextBox","mstrmojo.hash");var A=mstrmojo.hash;mstrmojo.ui.editors.controls.ValidationTextBox=mstrmojo.declare(mstrmojo.ValidationTextBox,null,{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",errRevert:true,dtp:null,validationDelay:3000,orignText:null,trigger:mstrmojo.validation.TRIGGER.ONKEYUP,init:function(B){B=B||{};B.constraints=B.constraints||{};B.constraints.trigger=this.trigger;this._super(B);},prekeyup:function(B){if(B.e.keyCode===13){this.blur();return ;}this._super(B);},onfocus:function(){this.orignText=this.value;},onblur:function(){if(this.value!=this.orignText){this.validate();}},validate:function(){this._super();this.orignText=this.value;this.clearValDelayTimer();},preinput:mstrmojo.emptyFn,postinput:function(){var B=this.doValidation(this.value);if(B.code<=mstrmojo.validation.STATUSCODE.VALID){this.clearValidation();if(!this.errRevert){this.hideTooltip();}}},updateTooltipConfig:function(){this.richTooltip={posType:mstrmojo.tooltip.POS_BOTTOMLEFT,cssClass:"vi-warning vi-tooltip-C vi-calculation-warning",left:this.domNode.offsetWidth+12,top:this.domNode.offsetHeight+5,refNode:this.domNode,content:mstrmojo.desc(13819,"Invalid input")};},onInvalid:function(){if(!this.errRevert){this.hideTooltip();this.showTooltip();}else{this.clearValidation();this.set("value",this.orignText);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Stepper","mstrmojo._HasLayout","mstrmojo.ui.editors.controls.ValidationTextBox","mstrmojo.expr","mstrmojo.css");var C=mstrmojo.expr.DTP,B=mstrmojo.css,A="mstrmojo-Stepper-ErrValidation";mstrmojo.ui.editors.controls.Stepper=mstrmojo.declare(mstrmojo.Stepper,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.editors.controls.Stepper",markupString:'<div id="{@id}" class="mstrmojo-Stepper {@orientation} {@cssClass}" mstrAttach:click,mousedown,mouseup,mousemove,selectstart><div class="title">{@title}</div><div class="next">+</div><div class="text"></div><div class="prev">-</div></div>',layoutConfig:{w:{textNode:"100%"},xt:true},textInput:null,init:function E(F){var G=F.provider;if(!!mstrApp.isWSStyling){this.layoutConfig=null;}this.children=[{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",alias:"textInput",slot:"textNode",dtp:G.dtp||C.INTEGER,maxLength:G.maxLength,constraints:{validator:G.validator,max:G.max,min:G.min},onValid:function(){var H=this.parent;B.removeClass(H.domNode,A);G.setVal(parseInt(this.value,10)||0);H.updateDisplayText();}}];this._super(F);this.addDisposable(G);B.addWidgetCssClass(this,"mstrmojo-ui-ctrl-Stepper");},postBuildRendering:function(){this.updateDisplayText();this._super();},updateDisplayText:function D(){this.textInput.set("value",this.provider.getVal());}});}());(function(){mstrmojo.requiresCls("mstrmojo._CanValidate","mstrmojo.HBox","mstrmojo.Label","mstrmojo.WidgetList","mstrmojo.TextBox","mstrmojo.num","mstrmojo.expr","mstrmojo.ValidationTextBox","mstrmojo.txEditor.CommonComponent","mstrmojo.txEditor.Container","mstrmojo.txEditor.Table");mstrmojo.requiresDescs(8329);var G=mstrmojo.txEditor.CommonComponent,F=G.CTRL_TYPES,B=G.INPUT_VALUES,C=G.LIST_TYPES,A=mstrmojo.validation,I=A.TRIGGER,D=mstrmojo.expr.DTP,H=mstrmojo.num;function E(J){var K=(!!J.rowHeaders),N=K?J.rowHeaders[0]:"",M=K?J.rowHeaders[1]:"",L=J.colHeader||"";return{scriptClass:"mstrmojo.txEditor.Table",layout:[{cells:[{},{}]},{cells:[{cssClass:"top-align"},{}]}],children:[{slot:"0,1",scriptClass:"mstrmojo.HBox",getVisibility:function(){return K;},children:[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-Label left",text:N},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-Label right",text:M}]},G.createLabel({slot:"1,0",cssClass:"mstrmojo-Label colHeader"},L),{slot:"1,1",scriptClass:"mstrmojo.WidgetList",renderOnScroll:false,maxID:1,itemIdField:"idx",makeObservable:true,getVisibility:function(){this.set("items",mstrmojo.all.teModel.currentTxInput.ctl.pr.vls);return true;},onitemsChange:function(){var P=mstrmojo.all.teModel.currentTxInput,Q=P&&P.ctl.pr,O=Q.vls;if(O.length===0){this.add([{},{}],0);}if(Q.t===F.CTRL_TOGGLE||(Q.t===F.CTRL_LIST&&Q.st===C.LIST_TYPE_PULLDOWN)){if(!O[0].unset){this.add([{n:Q.ust,unset:1}],0);}}},itemFunction:function(S,O,P){S.idx=P.maxID++;var R=mstrmojo.all.teModel.currentTxInput.dtp,Q;if(S.unset){Q={scriptClass:"mstrmojo.TextBox",cssClass:"fixed-width",enabled:false,value:mstrmojo.desc(8329)};}else{Q={scriptClass:"mstrmojo.ValidationTextBox",cssClass:"fixed-width",maxLength:256,dtp:R,constraints:{trigger:I.ONKEYUP},value:H.toLocaleString(S.v||""),onValid:function(){this.parent.data.v=H.toString(this.value||"",true);this.parent.data.invalidFlag=0;},onInvalid:function(){this.parent.data.invalidFlag=1;}};}return new mstrmojo.HBox({data:S,children:[Q,{scriptClass:"mstrmojo.ValidationTextBox",cssClass:"mstrmojo-TransactionEditor-TextBox fixed-width",dtp:D.VARCHAR,maxLength:256,value:S.n,constraints:{trigger:I.ONKEYUP},onValid:function(){var T=this.parent.data;if(T.unset){mstrmojo.all.teModel.currentTxInput.ctl.pr.ust=this.value;}T.n=this.value;},visible:!!M},{scriptClass:"mstrmojo.Button",text:"",cssClass:"mstrmojo-TransactionEditor-ManualList-AddButton",onclick:function(){P.add([{}],P.itemIndex(this.parent.data)+1);}},{scriptClass:"mstrmojo.Button",text:"",cssClass:"mstrmojo-TransactionEditor-ManualList-RemoveButton",visible:O>0,onclick:function(){P.remove(this.parent.data);}}]});}}]};}mstrmojo.txEditor.ManualPanel=mstrmojo.declare(mstrmojo.txEditor.Container,null,{scriptClass:"mstrmojo.txEditor.ManualPanel",cssClass:"mstrmojo-TransactionEditor-Panel manual",rowHeaders:null,colHeader:null,init:function(J){this._super(J);this.set("children",E({rowHeaders:this.rowHeaders,colHeader:this.colHeader}));},getVisibility:function(){var J=mstrmojo.all.teModel.currentTxInput.ctl.pr;return J.t===F.CTRL_TOGGLE||J.ipt===B.INPUT_VALUES_MANUAL;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash","mstrmojo.array","mstrmojo.Widget","mstrmojo.txEditor.CommonComponent");var Q=mstrmojo.array,G=mstrmojo.string,P=mstrmojo.css,N=mstrmojo.hash,M=mstrmojo.txEditor.CommonComponent,F=M.CSI_KEYWORD_TYPE,E=["=","+","-","*","/","<",">"],T=E.concat(["(",")",",",";"," "]),I={AND:true,OR:true,NOT:true},R=null,A=U();function K(V){if(!R){R={};Q.forEach(T,function(W){R[W]=true;});}return !!R[V];}function U(){var V={};Q.forEach(E,function(W){V[W]=true;});return V;}function B(V){return V&&A[V];}function S(X){var V={isDelimiter:false,isMstrObj:true,v:X.v||X.n};if(12===X.tp){V.exv=X.fid;V.extp="8";var W=(X.n.split("@"))[0];V.oi={did:X.did,t:12,n:W};}else{if(4===X.tp){V.oi={did:X.did,t:4,n:X.n};}else{if(X.key){V.exv=X.key;V.extp="8";V.tp=F.FIELDUNIT;}}}return V;}function D(b){var Z=b.v,X=mstrmojo.all.offModel,Y=X.tgtDs&&X.tgtDs.dsObjs,a=X.offTxs.tscObjs,V=!(Y&&a)?(Y||a||[]):Y.concat(a),W=0,c;Q.forEach(V,function(d){if(d.n==Z){++W;c=d;}});if(W==1){N.copy(S(c),b);b.isMstrObj=true;return true;}if(W>1){}return false;}function H(V){if(!V){return false;}return !!(I[V.toUpperCase()]||A[V]);}mstrmojo.txEditor.CSIStatementToken=mstrmojo.declare(mstrmojo.Widget,null,{data:null,markupString:'<span id={@id} class="mstrmojo-TransactionEditor-Token {@cssClass}"></span>',markupMethods:{ondataChange:function(){var V=this.data;if(V.v===","){this.domNode.innerHTML=String(V.v)+"&nbsp;";}else{this.domNode.innerHTML=G.encodeHtmlString(String(V.v));}P.toggleClass(this.domNode,["mstr"],this.isMstrObj());P.toggleClass(this.domNode,["keyword"],H(String(V.v)));}},isMstrObj:function(){var V=this.data.isMstrObj||(this.length()&&D.call(this,this.data));this.data.isMstrObj=V;return V;},length:function C(){return this.data.v.length;},isDelimiter:function O(){var V=this.data.isDelimiter||(this.length()===1&&K(this.data.v));this.data.isDelimiter=V;return V;},split2Tokens:function J(Z){var Y=this.data,W=Y&&Y.v,a=W.substring(0,Z),V=W.substring(Z),X=[];a&&X.push({v:a});V&&X.push({v:V});return X;},mergeTo:function(W){var Y=this.data,X=Y&&Y.v||"",V=W.data.v;return{v:X+V};},spliceContent:function L(a,Y,W){var Z=this.data,X=Z&&Z.v,b=X.substring(0,a);N.clear(Z);Y=(null==Y)?(X.length-a):Y;var V=X.substring(a+Y);Z.v=b+(W||"")+V;Z.isMstrObj=false;Z.isDelimiter=false;this.set("data",Z);this.paint();}});mstrmojo.txEditor.CSIStatementToken.isDelimiter=K;mstrmojo.txEditor.CSIStatementToken.isMstrObj=D;mstrmojo.txEditor.CSIStatementToken.mstrObj2Token=S;mstrmojo.txEditor.CSIStatementToken.isOperation=B;}());(function(){mstrmojo.requiresCls("mstrmojo._CanValidate","mstrmojo.num","mstrmojo.hash","mstrmojo.expr","mstrmojo.Table","mstrmojo.Pulldown","mstrmojo.txEditor.CommonComponent","mstrmojo.txEditor.Container","mstrmojo.txEditor.Table");mstrmojo.requiresDescs(527,2069,3691,5258,6076,6079,7899,8263,9904,9905,9906);var F=mstrmojo.num,G=mstrmojo.hash,B=mstrmojo.validation,I=B.TRIGGER,H=B.STATUSCODE,E=mstrmojo.txEditor.CommonComponent,D=E.LIST_TYPES,A=E.RW_UNIT_TYPE,C=mstrmojo.expr.DTP;mstrmojo.txEditor.ListPropertiesPanel=mstrmojo.declare(mstrmojo.txEditor.Container,null,{scriptClass:"mstrmojo.txEditor.ListPropertiesPanel",cssClass:"mstrmojo-TransactionEditor-Panel list",refreshChildren:function(){E.setChildrenVisibility(this,false);E.setChildrenVisibility(this,true);},children:[{scriptClass:"mstrmojo.txEditor.Table",layout:[{cells:[{colSpan:3}]},{cells:[{},{colSpan:2}]},{cells:[{},{colSpan:2}]},{cells:[{},{},{}]}],children:[E.createRequiredCheckBox({slot:"0,0"}),E.createLabel({slot:"1,0",cssClass:"mstrmojo-TransactionEditor-Label list"},mstrmojo.desc(5258)),{slot:"1,1",scriptClass:"mstrmojo.Pulldown",popupToBody:true,popupZIndex:112,defaultText:" ",defaultSelection:-1,itemIdField:"st",getVisibility:function(){var M=mstrmojo.all.teModel.rwTxs.tp,K=[D.LIST_TYPE_PULLDOWN],L,J;if(M===A.RW_UNIT_FIELDGROUP){K.push(D.LIST_TYPE_RADIOLIST);}for(L=0,J=K.length;L<J;L++){K[L]={st:K[L],n:E.LIST_NAMES[K[L]]};}this.set("items",K);this.set("value",mstrmojo.all.teModel.currentTxInput.ctl.pr.st);return true;},onvalueChange:function(){if(this.visible){var M=mstrmojo.all.teModel.rwTxs,K=this.value,L=mstrmojo.array.filter(M.dfvs,function(O){return O.t===E.CTRL_TYPES.CTRL_LIST&&O.st===K;})[0],N=G.make(G.clone(L),mstrmojo.Obj),J=G.make({pr:N,dirty:-1},mstrmojo.Obj);mstrmojo.all.teModel.currentTxInput.set("ctl",J);this.parent.parent.refreshChildren();}}},E.createLabel({slot:"2,0",cssClass:"mstrmojo-TransactionEditor-Label list",getVisibility:function(){return mstrmojo.all.teModel.currentTxInput.ctl.pr.st===D.LIST_TYPE_RADIOLIST;}},mstrmojo.desc(9904)),{slot:"2,1",alias:"disPicker",scriptClass:"mstrmojo.Pulldown",popupToBody:true,popupZIndex:112,itemIdField:"v",items:[{n:mstrmojo.desc(2069),v:0},{n:mstrmojo.desc(3691),v:1}],getVisibility:function(){var L=mstrmojo.all.teModel.currentTxInput.ctl.pr,K=L.ipr,J=L.st===D.LIST_TYPE_RADIOLIST;if(J){this.set("value",(K===undefined)?null:(K===1?0:1));}return J;},defaultText:" ",defaultSelection:-1,onvalueChange:function(){var J=mstrmojo.all.teModel.currentTxInput.ctl.pr;J.set("ipr",(this.value===0)?1:(J.ipr===1?0:J.ipr));}},E.createLabel({slot:"3,0",cssClass:"mstrmojo-TransactionEditor-Label list",getVisibility:function(){var J=mstrmojo.all.teModel.currentTxInput.ctl.pr;return J.st===D.LIST_TYPE_RADIOLIST&&J.ipr!==1;},bindings:{visible:"this.parent.disPicker.value === 1"}},mstrmojo.desc(9905)),E.createTextInput({slot:"3,1",size:14,dtp:C.VARCHAR,required:false,min:2,max:999999,_initValue:function(){var J=mstrmojo.all.teModel.currentTxInput.ctl.pr.ipr;this.set("value",J?F.parseInteger(J):"");},_isVisible:function(){var J=mstrmojo.all.teModel.currentTxInput.ctl.pr;return J.st===D.LIST_TYPE_RADIOLIST&&J.ipr!==1;},bindings:{visible:"this.parent.disPicker.value === 1"},onvisibleChange:function(){if(this.visible){this._initValue();}},constraints:{trigger:I.ALL,validator:function(J){if(J===""||(F.isInt(J)&&F.parseInteger(J)>=this.min&&F.parseInteger(J)<=this.max)){return{code:H.VALID};}if(F.isInt(J)){return{code:H.INVALID,msg:mstrmojo.desc(6079).replace("#","").replace("##",this.min).replace("###",this.max)};}return{code:H.INVALID,msg:mstrmojo.desc(7899).replace(/#/,mstrmojo.desc(6076))};}},updateModel:function(J){mstrmojo.all.teModel.currentTxInput.ctl.pr.ipr=(J==="")?0:J;}}),E.createLabel({slot:"3,2",cssClass:"mstrmojo-TransactionEditor-Label list hint",getVisibility:function(){var J=mstrmojo.all.teModel.currentTxInput.ctl.pr;return J.st===D.LIST_TYPE_RADIOLIST&&J.ipr!==1;},bindings:{visible:"this.parent.disPicker.value === 1"}},mstrmojo.desc(9906))]},{scriptClass:"mstrmojo.txEditor.ValuesPropsPanel",rowHeaders:[mstrmojo.desc(527),mstrmojo.desc(8263)]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.Model","mstrmojo.hash","mstrmojo.num","mstrmojo.string","mstrmojo.date","mstrmojo.Arr","mstrmojo.array","mstrmojo.txEditor.CommonComponent");mstrmojo.requiresDescs(8258,8278,8279,8283,8284,8999);var K=mstrmojo.hash,J=mstrmojo.num,E=mstrmojo.string,A=mstrmojo.array,H=mstrmojo.date,I=mstrmojo.txEditor.CommonComponent,N=I.CHANGE_TYPES,F=I.CTRL_TYPES,C=I.INPUT_VALUES,D=I.LIST_TYPES,M=12,G=5;var L=function L(P){return P.t===F.CTRL_LIST&&P.st===D.LIST_TYPE_PULLDOWN;};mstrmojo.txEditor.MappingTxModel=mstrmojo.declare(mstrmojo.Model,null,{scriptClass:"mstrmojo.txEditor.MappingTxModel",markMappedObjects:function(){var Q=this.rwTxs.tscObjs,T=this.txRpt.inputs,S,P;for(S=0,P=Q.length;S<P;S++){Q[S].mapped=0;}for(S=0,P=T.length;S<P;S++){var R=T[S].toi;if(J.isInt(R)){Q[R].mapped=1;}}this.raiseEvent({name:"InputMappingModify"});},setTxReport:function(Q,P,R){this.isNew=R;this.rwTxs.txRptId=Q;if(!this.rwTxs.ctp){this.rwTxs.ctp=N.CHANGE_TYPE_DEFAULT;}if(!this.rwTxs.arn){this.rwTxs.arn=0;}mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(S){if(S){S.nm=P;mstrmojo.all.teModel.set("txRpt",S);mstrmojo.all.teModel.markMappedObjects();}},failure:function(S){I.showError(S.getResponseHeader("X-MSTR-TaskFailureMsg"));}},{taskId:"getTransactionReportDefinition",transactionReportId:Q});},_set_rwTxs:function(T,R){var Q=R.tscObjs,P=Q.length,S;for(S=0;S<P;S++){Q[S].idx=S;}this.rwTxs=R;if(this.rwTxs.txRptId){this.setTxReport(this.rwTxs.txRptId,this.rwTxs.txRptName,false);}this.dirty=false;return true;},_set_txRpt:function(U,e){var b,W,Z,c,d,X,T;if(e){for(b=0,W=e.inputs.length;b<W;b++){var S=e.inputs[b];K.make(S,mstrmojo.Obj);S.edt=0;S.ctl=null;for(Z=0,c=this.rwTxs.tscObjs.length;Z<c;Z++){var Y=this.rwTxs.tscObjs[Z];if(this.isNew){if(Y.did===S.did&&Y.fid===S.fid){S.toi=Y.idx;break;}}else{if(Y.tix===S.tix){S.toi=Y.idx;S.edt=Y.edt;S.req=Y.req;S.ctl=Y.ctl||null;if(S.ctl){var P=this.rwTxs.dfvs,R=S.ctl.pr;if(S.dtp===14||S.dtp===15||S.dtp===16){if(R.t===F.CTRL_CALENDAR){R.max=I.toLocaleDateString(R.max);R.min=I.toLocaleDateString(R.min);}else{if(R.vls){var Q=R.vls;for(d=0,T=Q.length;d<T;d++){var V=Q[d];V.v=I.toLocaleDateString(V.v);}}}}R.dtp=S.dtp;for(X=0,T=P.length;X<T;X++){if(P[X].t===R.t&&(P[X].st===R.st||(R.st===undefined&&P[X].st===0))){S.ctl.pr=K.copy(R,K.clone(P[X]));break;}}if(R.t===F.CTRL_LIST&&R.ipt===C.INPUT_VALUES_DATASET&&!S.ctl.ddic){S.ctl.ddic={};}K.make(S.ctl,mstrmojo.Obj);K.make(S.ctl.pr,mstrmojo.Obj);K.make(S.ctl.ddic,mstrmojo.Obj);}if(S.edt===1&&!S.ctl){S.edt=0;}break;}}}}}else{this.set("currentTxInput",null);if(this.rwTxs){A.forEach(this.rwTxs.tscObjs,function(a){a.mapped=0;a.edt=0;if(a.ctl){a.ctl={ctlKey:a.ctl.ctlKey};}});}}this.txRpt=e;return true;},_set_currentTxInput:function(Q,P){if(P&&P.ctl){P.ctl.dirty=-1;}this.currentTxInput=P;return true;},updateTxMapping:function(U,Q){var T,P;if(J.isInt(Q)){var S=this.rwTxs.tscObjs,R=this.txRpt.inputs;if(J.isInt(U.toi)){S[U.toi].mapped=0;}S[Q].mapped=1;if(U.ctl&&U.ctl===S[U.toi].ctl){U.ctl=K.clone(U.ctl);}for(T=0,P=R.length;T<P;T++){if(R[T].toi===Q){R[T].set("toi",null);R[T].set("edt",0);R[T].set("ctl",null);break;}}U.set("toi",Q);this.raiseEvent({name:"InputMappingModify"});}},updateDDICSetting:function(V){var S,Q;if(!V.ctl.ddic){var R=new mstrmojo.Obj(),T=mstrmojo.all.teModel.rwTxs,U=T.ds,P=mstrmojo.array.find(T.tscObjs,"idx",V.toi),W=T.tscObjs[P];if(W.tp===M){for(S=0,Q=U.length;S<Q;S++){if(mstrmojo.array.find(U[S].attrs,"did",W.did)>-1){R.dsid=U[S].dsid;R.dst=U[S].dst;break;}}R.cst=W.tp;R.csid=W.did;if(V.ctl.pr.t===F.CTRL_BARCODE){R.mfid=W.fid;}R.wfid=W.fid;R.dfid=1;}V.ctl.set("ddic",R);}},getControls:function(S){var Q,R,P;if(I.isNumericType(S)){Q=[F.CTRL_SLIDER,F.CTRL_TEXTFIELD,F.CTRL_TEXTAREA,F.CTRL_SWITCH,F.CTRL_LIST,F.CTRL_TOGGLE,F.CTRL_RATING,F.CTRL_STEPPER,F.CTRL_LIKERTSCALE,F.CTRL_BARCODE];}else{if(I.isStringType(S)){Q=[F.CTRL_TEXTFIELD,F.CTRL_TEXTAREA,F.CTRL_SWITCH,F.CTRL_LIST,F.CTRL_TOGGLE,F.CTRL_SIG_CAPTURE,F.CTRL_BARCODE];}else{if(S===14){Q=[F.CTRL_CALENDAR,F.CTRL_TEXTFIELD,F.CTRL_TEXTAREA,F.CTRL_LIST];}else{if(S===15){Q=[F.CTRL_TIMEPICKER,F.CTRL_TEXTFIELD,F.CTRL_TEXTAREA,F.CTRL_LIST];}else{if(S===16){Q=[F.CTRL_CALENDAR,F.CTRL_TIMEPICKER,F.CTRL_TEXTFIELD,F.CTRL_TEXTAREA,F.CTRL_LIST];}else{Q=[F.CTRL_TEXTFIELD,F.CTRL_TEXTAREA,F.CTRL_SWITCH,F.CTRL_LIST,F.CTRL_SLIDER,F.CTRL_CALENDAR,F.CTRL_TIMEPICKER,F.CTRL_TOGGLE];}}}}}for(R=0,P=Q.length;R<P;R++){switch(Q[R]){case F.CTRL_LIST:Q[R]=mstrmojo.array.filter(this.rwTxs.dfvs,L)[0];break;default:Q[R]=this.rwTxs.dfvs[mstrmojo.array.find(this.rwTxs.dfvs,"t",Q[R])];}Q[R].n=I.CONTROL_NAMES[Q[R].t];}return Q;},isAllInputsMapped:function(){var R=mstrmojo.all.teModel.txRpt.inputs,Q,P;for(Q=0,P=R.length;Q<P;Q++){if(!J.isInt(R[Q].toi)){I.showError(mstrmojo.desc(8257));return false;}}return true;},isPropertiesValid:function(){var Z=this.currentTxInput,Q=Z&&Z.editing&&Z.ctl.pr,Y="",V,U,X,R;if(Q){for(V in Q){if(V==="vls"){for(U=0,X=Q.vls.length;U<X;U++){R=Q.vls[U];if(R.invalidFlag===1){Y=mstrmojo.desc(8258);break;}}}else{if(Q[V]===null){if(Q.ipt!==undefined&&Q.ipt!==C.INPUT_VALUES_CALCULATED&&(V==="min"||V==="max"||V==="itv")){continue;}else{if(Q.t===F.CTRL_TEXTFIELD){if((I.isNumericType(Z.dtp)&&((V==="min"&&Q.emin)||(V==="max"&&Q.emax)))||(I.isStringType(Z.dtp)&&(V==="ml"||V==="mnl"))||(Q.vm===G&&V==="rgx")){Y=mstrmojo.desc(8258);}}else{Y=mstrmojo.desc(8258);}}}}if(Y){break;}}if(!Y){switch(Q.t){case F.CTRL_TEXTFIELD:if(I.isNumericType(Z.dtp)){if(Q.emin&&Q.emax){if(parseFloat(Q.min)>parseFloat(Q.max)){Y=mstrmojo.desc(8283);}}}else{if(I.isStringType(Z.dtp)){if(parseInt(Q.mnl,10)>parseInt(Q.ml,10)){Y=mstrmojo.desc(8999);}}}break;case F.CTRL_CALENDAR:if(Q.min&&Q.max&&H.compareDateAndOrTime(Q.min,Q.max)>0){Y=mstrmojo.desc(8278);}break;case F.CTRL_RATING:if(Q.vls.length===0){Y=mstrmojo.desc(8258);}break;case F.CTRL_SLIDER:case F.CTRL_LIST:case F.CTRL_STEPPER:case F.CTRL_BARCODE:if(Q.t===F.CTRL_STEPPER||Q.ipt===C.INPUT_VALUES_CALCULATED){var T=parseFloat(Q.min),a=parseFloat(Q.max),W=a-T,S=parseFloat(Q.itv),P=0.00001;if(W<=0){Y=mstrmojo.desc(8283);}else{if(S-W>P||Math.abs(Math.round(W/S)*S-W)>P){Y=mstrmojo.desc(8284);}}break;}else{if(Q.t===F.CTRL_BARCODE||Q.ipt===C.INPUT_VALUES_DATASET){if(Q.t===F.CTRL_BARCODE&&!Q.em){break;}var b=Z.ctl.ddic;if(!b.dsid||!b.csid||!b.wfid||!b.dfid){Y=mstrmojo.desc(8258);}if(Q.t===F.CTRL_BARCODE&&!b.mfid){Y=mstrmojo.desc(8258);}break;}}case F.CTRL_TOGGLE:var c=true;for(V=0,X=Q.vls.length;V<X;V++){R=Q.vls[V];if(!E.isEmpty(R.n)||!E.isEmpty(R.v)){c=false;break;}}if(c){Y=mstrmojo.desc(8279);}break;}}}if(Y){I.showError(Y);return false;}return true;},clearDirtyFlags:function O(){this.isNew=false;this.dirty=false;var Q=this.rwTxs&&this.rwTxs.tscObjs||[],S,R,P;for(R=0,P=Q.length;R<P;++R){S=Q[R];S.mark=0;if(S.ctl){S.ctl.dirty=false;}}},hasDirtyTscObjs:function B(){var U=this.isNew||(!this.txRpt)||this.dirty;if(!U){var R=this.txRpt.inputs,Q=this.rwTxs.tscObjs,S,V,T,P;for(T=0,P=R.length;T<P&&!U;++T){S=R[T];V=Q[S.toi];if(!V||V.tix!==S.tix||V.edt!==S.edt||(S.ctl&&S.ctl.dirty)){U=true;}}}return U;},getXML:function(){if(!this.txRpt){return E.json2xml("rwTxs",{keyCtx:this.rwTxs.keyCtx},{isSerializable:function(){return true;}});}var V=this.txRpt.inputs,T=this.rwTxs.tscObjs,R=[],P,S,X,Y,Q;for(S=0,X=V.length;S<X;S++){Y=V[S];Q=T[Y.toi];if(this.isNew||Q.tix!==Y.tix||Q.edt!==Y.edt||(Y.ctl&&Y.ctl.dirty)){R.push(Q);}Q.tix=Y.tix;Q.edt=Y.edt;Q.req=Y.req||0;P=Q.ctl&&Q.ctl.ctlKey;Q.ctl=Y.ctl;if(Q.ctl){Q.ctl.ctlKey=P||mstrmojo.all.teModel.getNewCtlKey();}Q.mark=-1;}for(S=0;S<T.length;S++){Q=T[S];if(!Q.mark&&J.isInt(Q.tix)){Q.edt=0;Q.req=0;Q.ctl=null;Q.tix=-1;R.push(Q);}Q.mark=0;}var W={isSerializable:function(l,h,m){var a=h[m],o=a.t;switch(l){case"keyCtx":case"txRptId":case"tp":case"ctp":case"arc":case"sci":case"arn":case"tscObjs":case"did":case"fid":case"key":case"edt":case"req":case"tix":case"ctl":case"ctlKey":case"ddic":case"dsid":case"dst":case"csid":case"cst":case"wfid":case"dfid":case"mfid":case"pr":case"ml":case"mnl":case"emax":case"emin":case"vm":case"rgx":case"siwc":case"sp":case"pl":case"w":case"wm":case"ict":case"ipt":case"itv":case"dm":case"t":case"ust":case"sgl":case"psw":case"ldw":case"st":case"mint":case"maxt":case"stl":case"em":case"ipr":case"sort":case"sortfmid":case"sortdir":return true;case"min":case"max":var n=a[l];if(o===F.CTRL_CALENDAR){return{att:l+'="'+E.encodeXMLAttribute(I.toUSDateString(n))+'"'};}return true;case"vls":var b=a.vls,g=a.dtp,k=/(\^|\||\\)/g,e=[],f,c=function(j){if(E.isEmpty(j)){j="";}return(typeof j==="string")?j.replace(k,"\\$1"):j;};if((o===F.CTRL_LIST||o===F.CTRL_SLIDER)&&a.ipt!==C.INPUT_VALUES_MANUAL){return{att:'vls=""'};}for(f=0;f<b.length;f++){var d=b[f],p="";if(d.unset){continue;}if(o===F.CTRL_TOGGLE||o===F.CTRL_LIST||o===F.CTRL_RATING||o===F.CTRL_LIKERTSCALE){p+=c(d.n)+"^";}if(!E.isEmpty(d.v)){if(g===14||g===15||g===16){p+=c(I.toUSDateString(d.v));}else{p+=c(d.v);}}if(p){e.push(p);}}return{att:'vls="'+E.encodeXMLAttribute(e.join("|"))+'"'};}return false;},getArrItemName:function(c,a,b){if(c==="tscObjs"){return"tscObj";}},skipNull:true};var Z=this.rwTxs.tscObjs;this.rwTxs.tscObjs=R;var U=E.json2xml("rwTxs",this.rwTxs,W);this.rwTxs.tscObjs=Z;return U;}});}());(function(){mstrmojo.requiresCls("mstrmojo.txEditor.CommonComponent","mstrmojo.txEditor.Container");mstrmojo.requiresDescs(9273);var A=mstrmojo.txEditor.CommonComponent;mstrmojo.txEditor.SignatureCapturePropertiesPanel=mstrmojo.declare(mstrmojo.txEditor.Container,null,{scriptClass:"mstrmojo.txEditor.SignatureCapturePropertiesPanel",children:[A.createRequiredCheckBox(),A.createCheckBox({text:mstrmojo.desc(9273)},"sgl")]});}());(function(){mstrmojo.requiresCls("mstrmojo.num","mstrmojo.txEditor.CommonComponent","mstrmojo.txEditor.Container","mstrmojo.txEditor.Table");mstrmojo.requiresDescs(7578,7579,9898);var B=mstrmojo.txEditor.CommonComponent,A=mstrmojo.num;mstrmojo.txEditor.SwitchPropertiesPanel=mstrmojo.declare(mstrmojo.txEditor.Container,null,{scriptClass:"mstrmojo.txEditor.SwitchPropertiesPanel",children:[{scriptClass:"mstrmojo.txEditor.Table",layout:[{cells:[{colSpan:2}]},{cells:[{},{}]},{cells:[{},{}]},{cells:[{colSpan:2}]}],children:[B.createRequiredCheckBox({slot:"0,0"}),B.createLabel({slot:"1,0"},mstrmojo.desc(7579)),B.createTextInput({slot:"1,1",size:7,_initValue:function(){var C=mstrmojo.all.teModel.currentTxInput;this.set("dtp",C.dtp);this.set("value",A.toLocaleString(C.ctl.pr.vls[0].v));},updateModel:function(C){var D=mstrmojo.all.teModel.currentTxInput.ctl.pr.vls[0];D.invalidFlag=C?0:1;D.v=A.toString(C,true);}}),B.createLabel({slot:"2,0"},mstrmojo.desc(7578)),B.createTextInput({slot:"2,1",size:7,_initValue:function(){var C=mstrmojo.all.teModel.currentTxInput;this.set("dtp",C.dtp);this.set("value",A.toLocaleString(C.ctl.pr.vls[1].v));},updateModel:function(C){var D=mstrmojo.all.teModel.currentTxInput.ctl.pr.vls[1];D.invalidFlag=C?0:1;D.v=A.toString(C,true);}}),B.createCheckBox({slot:"3,0",text:mstrmojo.desc(9898)},"stl",[1,0])]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.FieldSet","mstrmojo.TristateCheckBox","mstrmojo.txEditor.CommonComponent");mstrmojo.requiresDescs(702,8280,8281,8308,8309,9910,9911);var B=mstrmojo.txEditor.CommonComponent;function A(){this.set("checked",!this.checked);mstrmojo.all.teModel.dirty=true;}mstrmojo.txEditor.AdvancedSetting=mstrmojo.declare(mstrmojo.FieldSet,null,{scriptClass:"mstrmojo.txEditor.AdvancedSetting",cssClass:"mstrmojo-TransactionEditor-AdvancedField",legend:mstrmojo.desc(702),bindings:{visible:"mstrmojo.all.teModel.txRpt"},children:[{scriptClass:"mstrmojo.TristateCheckBox",grayed:false,cssDisplay:"inline",text:mstrmojo.desc(8280),bindings:{checked:"!!mstrmojo.all.teModel.rwTxs.arc",visible:function(){return mstrmojo.all.teModel.rwTxs.tp===B.RW_UNIT_TYPE.RW_UNIT_GRIDGRAPH;}},onclick:A,oncheckedChange:function(){if(this.checked!==undefined){mstrmojo.all.teModel.rwTxs.arc=this.checked;}}},{scriptClass:"mstrmojo.TristateCheckBox",grayed:false,cssDisplay:"inline",text:mstrmojo.desc(8281),bindings:{checked:function(){return mstrmojo.all.teModel.rwTxs.ctp===B.CHANGE_TYPES.CHANGE_TYPE_MARK_SELECTION;},visible:function(){return mstrmojo.all.teModel.rwTxs.tp===B.RW_UNIT_TYPE.RW_UNIT_GRIDGRAPH;}},onclick:A,oncheckedChange:function(){if(this.checked!==undefined){mstrmojo.all.teModel.rwTxs.ctp=this.checked?B.CHANGE_TYPES.CHANGE_TYPE_MARK_SELECTION:B.CHANGE_TYPES.CHANGE_TYPE_DEFAULT;}}},{scriptClass:"mstrmojo.TristateCheckBox",grayed:false,cssDisplay:"inline",bindings:{text:function(){return(mstrmojo.all.teModel.rwTxs.tp===B.RW_UNIT_TYPE.RW_UNIT_GRIDGRAPH)?mstrmojo.desc(8309):mstrmojo.desc(8308);},checked:"!!mstrmojo.all.teModel.rwTxs.sci"},onclick:A,oncheckedChange:function(){if(this.checked!==undefined){mstrmojo.all.teModel.rwTxs.sci=this.checked;}}},{scriptClass:"mstrmojo.TristateCheckBox",grayed:false,cssDisplay:"inline",bindings:{text:function(){return(mstrmojo.all.teModel.rwTxs.tp===B.RW_UNIT_TYPE.RW_UNIT_GRIDGRAPH)?mstrmojo.desc(9910):mstrmojo.desc(9911);},checked:"!!mstrmojo.all.teModel.rwTxs.arn"},onclick:A,oncheckedChange:function(){if(this.checked!==undefined){mstrmojo.all.teModel.rwTxs.arn=this.checked?(mstrmojo.all.teModel.rwTxs.tp===B.RW_UNIT_TYPE.RW_UNIT_GRIDGRAPH?-1:1):0;}}}]});}());(function(){mstrmojo.requiresCls("mstrmojo.expr","mstrmojo.txEditor.CommonComponent","mstrmojo.txEditor.Container","mstrmojo.txEditor.Table");mstrmojo.requiresDescs(272,3389,8251,8252,8259,8260);var B=mstrmojo.txEditor.CommonComponent,A=mstrmojo.expr.DTP;mstrmojo.txEditor.TextAreaPropertiesPanel=mstrmojo.declare(mstrmojo.txEditor.Container,null,{scriptClass:"mstrmojo.txEditor.TextAreaPropertiesPanel",children:[{scriptClass:"mstrmojo.txEditor.Table",layout:[{cells:[{colSpan:3}]},{cells:[{colSpan:3}]},{cells:[{colSpan:3}]},{cells:[{},{},{}]},{cells:[{},{},{}]},{cells:[{},{},{}]},{cells:[{},{},{}]}],children:[B.createRequiredCheckBox({slot:"0,0"}),B.createCheckBox({slot:"1,0",alias:"textAreaDM",text:mstrmojo.desc(8260),_isVisible:function(){return mstrmojo.all.teModel.rwTxs.tp===B.RW_UNIT_TYPE.RW_UNIT_FIELDGROUP;},oncheckedChange:function(){var C=mstrmojo.all.teModel.currentTxInput.ctl.pr;C.set("dm",this.checked?1:0);C.set("wm",this.checked?0:1);if(this.checked){this.parent.textAreaSIWC.set("checked",false);}}},"dm",[1,0]),B.createCheckBox({slot:"2,0",text:mstrmojo.desc(8251),alias:"textAreaSIWC",bindings:{enabled:"!this.parent.textAreaDM.checked"},_initValue:function(){var C=mstrmojo.all.teModel.currentTxInput.ctl.pr;this.set("enabled",C.dm===0);this.set("checked",C.siwc);},oncheckedChange:function(){var C=mstrmojo.all.teModel.currentTxInput.ctl.pr;C.set("siwc",this.checked);if(!this.checked){this.parent.textAreaSP.set("checked",false);}}},"siwc"),B.createCheckBox({slot:"3,0",alias:"textAreaSP",text:mstrmojo.desc(3389),cssClass:"tristate mstrmojo-TransactionEditor-CheckBox textAreaSP",bindings:{enabled:"this.parent.textAreaSIWC.checked"},_initValue:function(){var C=mstrmojo.all.teModel.currentTxInput.ctl.pr;this.set("enabled",C.siwc);this.set("checked",C.sp);}},"sp"),B.createTextInput({slot:"3,1",size:7,dtp:A.INTEGER,min:1,max:999999,bindings:{enabled:"this.parent.textAreaSP.checked"},_initValue:function(){var C=mstrmojo.all.teModel.currentTxInput.ctl.pr;this.set("enabled",C.sp);this.set("value",C.pl);}},"pl"),B.createLabel({slot:"3,2"},mstrmojo.desc(8259)),B.createLabel({slot:"4,0"},mstrmojo.desc(272)),B.createTextInput({slot:"4,1",size:7,dtp:A.DOUBLE,min:0,max:999999,_initValue:function(){var C=mstrmojo.all.teModel.currentTxInput.ctl.pr;this.set("enabled",C.wm);this.set("value",B.toLocaleUnits(C.w));},bindings:{enabled:"!this.parent.textAreaDM.checked"},updateModel:function(C){mstrmojo.all.teModel.currentTxInput.ctl.pr.w=C?B.toUSUnits(C):null;}}),B.createLabel({slot:"4,2"},mstrApp.unitsLabel),B.createLabel({slot:"5,0"},mstrmojo.desc(8252)+":"),B.createTextInput({slot:"5,1",size:7,dtp:A.INTEGER,min:1,max:999999},"ml"),B.createLabel({slot:"5,2"},mstrmojo.desc(8259))]}]});}());(function(){mstrmojo.requiresCls("mstrmojo._CanValidate","mstrmojo.expr","mstrmojo.txEditor.CommonComponent");mstrmojo.requiresDescs(2699,7580,8277);var E=mstrmojo.txEditor.CommonComponent,B=mstrmojo.expr.DTP,D=mstrmojo.validation,A=D.TRIGGER,C=D.STATUSCODE;mstrmojo.txEditor.TimePickerPropertiesPanel=mstrmojo.declare(mstrmojo.txEditor.Container,null,{scriptClass:"mstrmojo.txEditor.TimePickerPropertiesPanel",children:[{scriptClass:"mstrmojo.txEditor.Table",layout:[{cells:[{colSpan:3}]},{cells:[{},{},{}]}],children:[E.createRequiredCheckBox({slot:"0,0"}),E.createLabel({slot:"1,0"},mstrmojo.desc(7580)),E.createTextInput({slot:"1,1",size:7,dtp:B.INTEGER,constraints:{trigger:A.ALL,validator:function(F){if(60%F){return{code:C.INVALID,msg:mstrmojo.desc(8277)};}return{code:C.VALID};}}},"itv"),E.createLabel({slot:"1,2"},mstrmojo.desc(2699))]}]});}());(function(){mstrmojo.requiresCls("mstrmojo._CanValidate","mstrmojo.Pulldown","mstrmojo.expr","mstrmojo.num","mstrmojo.txEditor.CommonComponent","mstrmojo.txEditor.Container","mstrmojo.txEditor.Table");mstrmojo.requiresDescs(1549,2099,2100,4449,8252,8259,8330,8983,8984,8985,8986,8987,8988,8998);var H=mstrmojo.txEditor.CommonComponent,E=mstrmojo.expr.DTP,I=mstrmojo.num,D=mstrmojo.validation,O=D.TRIGGER,N=D.STATUSCODE,B=0,A=1,P=2,M=3,L=4,F=5,J=[{n:mstrmojo.desc(1549),v:B},{n:mstrmojo.desc(8983),v:F}],G=[{n:mstrmojo.desc(1549),v:B},{n:mstrmojo.desc(8984),v:A},{n:mstrmojo.desc(8985),v:M},{n:mstrmojo.desc(8986),v:L},{n:mstrmojo.desc(8983),v:F}],K=[{n:mstrmojo.desc(1549),v:B},{n:mstrmojo.desc(8984),v:A},{n:mstrmojo.desc(8987),v:P},{n:mstrmojo.desc(8985),v:M},{n:mstrmojo.desc(8986),v:L},{n:mstrmojo.desc(8983),v:F}],C=H.getVis;mstrmojo.txEditor.TextFieldPropertiesPanel=mstrmojo.declare(mstrmojo.txEditor.Container,null,{scriptClass:"mstrmojo.txEditor.TextFieldPropertiesPanel",cssClass:"mstrmojo-TransactionEditor-TextField",children:[{scriptClass:"mstrmojo.txEditor.Table",layout:[{cells:[{colSpan:3}]},{cells:[{},{},{}]},{cells:[{},{},{}]},{cells:[{},{colSpan:2}]},{cells:[{},{colSpan:2}]},{cells:[{},{colSpan:2}]},{cells:[{},{colSpan:2}]},{cells:[{colSpan:3}]}],children:[H.createRequiredCheckBox({slot:"0,0"}),H.createLabel({slot:"5,0"},mstrmojo.desc(14627,"Validation:")),{slot:"5,1",alias:"textFieldValidation",scriptClass:"mstrmojo.Pulldown",popupToBody:true,popupZIndex:112,itemIdField:"v",defaultText:" ",defaultSelection:0,getVisibility:C,_initValue:function(){var S=mstrmojo.all.teModel.currentTxInput,R=S.dtp,Q=S.ctl.pr.vm;this.set("items",H.isNumericType(R)?G:(H.isStringType(R)?K:J));this.set("value",Q);},onvalueChange:function(){mstrmojo.all.teModel.currentTxInput.ctl.pr.set("vm",this.value);}},H.createLabel({slot:"1,0",getVisibility:function(){return H.isStringType(mstrmojo.all.teModel.currentTxInput.dtp);}},mstrmojo.desc(8252)+":"),H.createTextInput({slot:"1,1",size:7,dtp:E.INTEGER,min:1,max:999999,_isVisible:function(){return H.isStringType(mstrmojo.all.teModel.currentTxInput.dtp);},bindings:{enabled:function(){var Q=parseInt(this.parent.textFieldValidation.value,10);if(Q===A||Q===M||Q===L){this.set("value",256);return false;}return true;}}},"ml"),H.createLabel({slot:"1,2",getVisibility:function(){return H.isStringType(mstrmojo.all.teModel.currentTxInput.dtp);}},mstrmojo.desc(8259)),H.createLabel({slot:"2,0",getVisibility:function(){return H.isStringType(mstrmojo.all.teModel.currentTxInput.dtp);}},mstrmojo.desc(8988)+":"),H.createTextInput({slot:"2,1",size:7,dtp:E.INTEGER,min:0,max:999999,_isVisible:function(){return H.isStringType(mstrmojo.all.teModel.currentTxInput.dtp);},bindings:{enabled:function(){var Q=parseInt(this.parent.textFieldValidation.value,10);if(Q===A||Q===M||Q===L){this.set("mnl",0);return false;}return true;}}},"mnl"),H.createLabel({slot:"2,2",getVisibility:function(){return H.isStringType(mstrmojo.all.teModel.currentTxInput.dtp);}},mstrmojo.desc(8259)),H.createCheckBox({slot:"3,0",alias:"textFieldMinValue",text:mstrmojo.desc(2100),_isVisible:function(){return H.isNumericType(mstrmojo.all.teModel.currentTxInput.dtp);}},"emin"),H.createTextInput({slot:"3,1",size:7,dtp:E.DOUBLE,_isVisible:function(){return H.isNumericType(mstrmojo.all.teModel.currentTxInput.dtp);},_initValue:function(){this.set("value",I.toLocaleString(mstrmojo.all.teModel.currentTxInput.ctl.pr.min));},bindings:{enabled:"this.parent.textFieldMinValue.checked"},updateModel:function(Q){mstrmojo.all.teModel.currentTxInput.ctl.pr.min=(Q?I.toString(Q,true):null);}},"min"),H.createCheckBox({slot:"4,0",alias:"textFieldMaxValue",text:mstrmojo.desc(2099),_isVisible:function(){return H.isNumericType(mstrmojo.all.teModel.currentTxInput.dtp);}},"emax"),H.createTextInput({slot:"4,1",size:7,dtp:E.DOUBLE,_isVisible:function(){return H.isNumericType(mstrmojo.all.teModel.currentTxInput.dtp);},_initValue:function(){this.set("value",I.toLocaleString(mstrmojo.all.teModel.currentTxInput.ctl.pr.max));},bindings:{enabled:"this.parent.textFieldMaxValue.checked"},updateModel:function(Q){mstrmojo.all.teModel.currentTxInput.ctl.pr.max=(Q?I.toString(Q,true):null);}},"max"),H.createLabel({slot:"6,0",bindings:{visible:function(){return this.parent.textFieldValidation.value===F;}},getVisibility:function(){return this.parent.textFieldValidation.value===F;}},mstrmojo.desc(4449)+":"),H.createTextInput({slot:"6,1",dtp:E.VARCHAR,constraints:{trigger:O.ALL,validator:function(Q){try{new RegExp(Q);return{code:N.VALID};}catch(R){return{code:N.INVALID,msg:mstrmojo.desc(8998)};}}},_isVisible:function(){return this.parent.textFieldValidation.value===F;},bindings:{visible:function(){return this.parent.textFieldValidation.value===F;}},onvisibleChange:function(){if(this.visible){this.set("value",mstrmojo.all.teModel.currentTxInput.ctl.pr.rgx);}}},"rgx"),H.createCheckBox({slot:"7,0",text:mstrmojo.desc(8330),_isVisible:function(){return mstrmojo.all.teModel.rwTxs.tp===H.RW_UNIT_TYPE.RW_UNIT_FIELDGROUP;}},"psw")]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.Pulldown","mstrmojo.txEditor.CommonComponent","mstrmojo.txEditor.Container","mstrmojo.txEditor.Table");mstrmojo.requiresDescs(5258,9907,9908);var C=mstrmojo.txEditor.CommonComponent,B=0,A=1,D=[{v:B,n:'<div class="mstrmojo-TransactionEditor-RatingStyle1"></div>'},{v:A,n:'<div class="mstrmojo-TransactionEditor-RatingStyle2"></div>'}];mstrmojo.txEditor.RatingPropertiesPanel=mstrmojo.declare(mstrmojo.txEditor.Container,null,{scriptClass:"mstrmojo.txEditor.RatingPropertiesPanel",cssClass:"mstrmojo-TransactionEditor-Panel rating",children:[{scriptClass:"mstrmojo.txEditor.Table",layout:[{cells:[{colSpan:2}]},{cells:[{},{}]},{cells:[{},{}]}],children:[C.createRequiredCheckBox({slot:"0,0"}),C.createLabel({slot:"1,0"},mstrmojo.desc(9907)),C.createVlsRadioButton({value:[3,5,10],group:"starRating",label:mstrmojo.desc(9908),slot:"1,1"}),C.createLabel({slot:"2,0"},mstrmojo.desc(5258)),{slot:"2,1",scriptClass:"mstrmojo.Pulldown",cssClass:"mstrmojo-Pulldown",popupToBody:true,popupZIndex:112,itemIdField:"v",items:D,getVisibility:function(){this.set("value",mstrmojo.all.teModel.currentTxInput.ctl.pr.stl);return true;},defaultText:" ",defaultSelection:-1,onvalueChange:function(){mstrmojo.all.teModel.currentTxInput.ctl.pr.stl=this.value;}}]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.FieldSet","mstrmojo.txEditor.MetaDataUnitList","mstrmojo.txEditor.CommonComponent");var C=mstrmojo.hash,B=mstrmojo.txEditor.CommonComponent,A=25;mstrmojo.txEditor.MetaDataListContainer=mstrmojo.declare(mstrmojo.FieldSet,null,{scriptClass:"mstrmojo.txEditor.MetaDataListContainer",cssClass:"mstrmojo-TransactionEditor-MetaDataListContainer",markupMethods:C.copy({onheightChange:function(){if(this.height){this.domNode.style.height=this.height+"px";this.mdList.set("height",this.height-this.mdLabel.getHeight()-2);}}},C.copy(mstrmojo.FieldSet.prototype.markupMethods)),children:[B.createLabel({cssClass:"mstrmojo-TransactionEditor-MetaDataListLabel",alias:"mdLabel",height:A,cssText:"height:"+A+"px;line-height:"+A+"px;margin:0px",bindings:{text:"this.parent.label"},getHeight:function(){return this.height;}},""),{scriptClass:"mstrmojo.txEditor.MetaDataUnitList",bindings:{items:function(){return this.parent.items;}},alias:"mdList"}]});}());(function(){mstrmojo.requiresCls("mstrmojo.Pulldown","mstrmojo.hash","mstrmojo.txEditor.CommonComponent");mstrmojo.requiresDescs(13207);var A=mstrmojo.txEditor.CommonComponent,D=mstrmojo.hash,C=A.STATEMENT_TYPE,B=[{v:C.STATEMENT_UPDATE,n:"Update"},{v:C.STATEMENT_INSERT,n:"Insert"},{v:C.STATEMENT_DELETE,n:"Delete"}];mstrmojo.txEditor.CSISelectManipulationPanel=mstrmojo.declare(mstrmojo.txEditor.Table,null,{scriptClass:"mstrmojo.txEditor.CSISelectManipulationPanel",cssClass:"mstrmojo-TransactionEditor-CSISelectManipulationPanel",markupMethods:D.copy({onheightChange:function(){if(this.height){this.domNode.style.height=this.height+"px";}}},D.copy(mstrmojo.Table.prototype.markupMethods)),layout:[{cells:[{},{}]}],children:[A.createLabel({slot:"0,0"},mstrmojo.desc(13207,"CSI statement manipulation")+": "),{slot:"0,1",scriptClass:"mstrmojo.Pulldown",cssClass:"mstrmojo-Pulldown",popupToBody:true,popupZIndex:112,itemIdField:"v",items:B,defaultSelection:0,fixWidth:true,bindings:{value:"this.parent.parent.statementType"},onvalueChange:function(){this.parent.parent.set("statementType",this.value);}}]});}());(function(){mstrmojo.requiresCls("mstrmojo.Table","mstrmojo.txEditor.CommonComponent","mstrmojo.txEditor.Container","mstrmojo.txEditor.Table");mstrmojo.requiresDescs(2099,2100,7580,11187);var E=mstrmojo.txEditor.CommonComponent,H=E.INPUT_VALUES,A=E.CTRL_TYPES,B=mstrmojo.num,G=mstrmojo.string,D=mstrmojo.validation.STATUSCODE,F=mstrmojo.locales.validation,C=mstrmojo.expr.DTP;mstrmojo.txEditor.CalculatedPanel=mstrmojo.declare(mstrmojo.txEditor.Container,null,{scriptClass:"mstrmojo.txEditor.CalculatedPanel",cssClass:"mstrmojo-TransactionEditor-Panel calculated",onvisibleChange:function(){if(this.parent.visible&&!this.visible){var I=mstrmojo.all.teModel.currentTxInput.ctl.pr;I.set("max",100);I.set("min",0);I.set("itv",10);}},getVisibility:function(){var I=mstrmojo.all.teModel.currentTxInput.ctl.pr;return I.t===A.CTRL_STEPPER||I.ipt===H.INPUT_VALUES_CALCULATED;},children:[{scriptClass:"mstrmojo.txEditor.Table",rows:3,cols:2,children:[E.createLabel({slot:"0,0"},mstrmojo.desc(2100)),E.createTextInput({slot:"0,1",size:7,dtp:C.DOUBLE,_initValue:function(){this.set("value",B.toLocaleString(mstrmojo.all.teModel.currentTxInput.ctl.pr.min));},updateModel:function(I){mstrmojo.all.teModel.currentTxInput.ctl.pr.min=(I?B.toString(I,true):null);}},"min"),E.createLabel({slot:"1,0"},mstrmojo.desc(2099)),E.createTextInput({slot:"1,1",size:7,dtp:C.DOUBLE,_initValue:function(){this.set("value",B.toLocaleString(mstrmojo.all.teModel.currentTxInput.ctl.pr.max));},updateModel:function(I){mstrmojo.all.teModel.currentTxInput.ctl.pr.max=(I?B.toString(I,true):null);}},"max"),E.createLabel({slot:"2,0"},mstrmojo.desc(7580)),E.createTextInput({slot:"2,1",size:7,dtp:C.DOUBLE,min:0,_initValue:function(){this.set("value",B.toLocaleString(mstrmojo.all.teModel.currentTxInput.ctl.pr.itv));},doValidation:function(I){if(G.isEmpty(I)){return{code:D.INVALID_EMPTY,msg:F.requiredFieldError};}if(!B.isNumeric(I)){return{code:D.INVALID_CHAR,msg:F.invalidCharError.replace("#",F.numericDataType)};}if(parseFloat(I)<=this.min){var J=mstrmojo.desc(11187);return{code:D.INVALID_OUTOFRANGE,msg:J.replace("#",this.min)};}return{code:D.VALID};},updateModel:function(I){mstrmojo.all.teModel.currentTxInput.ctl.pr.itv=(I?B.toString(I,true):null);}},"itv")]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.expr","mstrmojo.txEditor.CommonComponent","mstrmojo.txEditor.Container","mstrmojo.txEditor.Table");mstrmojo.requiresDescs(493,9901,9902,9903);var B=mstrmojo.txEditor.CommonComponent,A=mstrmojo.expr.DTP;mstrmojo.txEditor.LikertScalePropertiesPanel=mstrmojo.declare(mstrmojo.txEditor.Container,null,{scriptClass:"mstrmojo.txEditor.LikertScalePropertiesPanel",cssClass:"mstrmojo-TransactionEditor-Panel likertscale",children:[{scriptClass:"mstrmojo.txEditor.Table",layout:[{cells:[{colSpan:2}]},{cells:[{},{}]},{cells:[{},{}]},{cells:[{},{}]}],children:[B.createRequiredCheckBox({slot:"0,0"}),B.createLabel({slot:"1,0"},mstrmojo.desc(9901)),B.createVlsRadioButton({value:[5,7,10],group:"likertScale",label:mstrmojo.desc(493),slot:"1,1"}),B.createLabel({slot:"2,0"},mstrmojo.desc(9902)),B.createTextInput({slot:"2,1",size:14,dtp:A.VARCHAR,required:false},"mint"),B.createLabel({slot:"3,0"},mstrmojo.desc(9903)),B.createTextInput({slot:"3,1",size:14,dtp:A.VARCHAR,required:false},"maxt")]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.HBox","mstrmojo.HTMLButton","mstrmojo.txEditor.CommonComponent");mstrmojo.requiresDescs(134,221,1442,8256,8298);var F=mstrmojo.txEditor.CommonComponent,E=F.TAP_PANEL,G=F.SAVING_PHASE;function D(I){mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(J){if(!J||J.status===2||J.status===3){F.showError(mstrmojo.desc(8256));mstrmojo.all.mstrTE.set("saving",false);}else{if(J.status===1||J.status===21){if(I){I();}mstrmojo.all.mstrTE.set("saving",false);}else{D(I);}}},failure:function(){F.showError(mstrmojo.desc(8256));mstrmojo.all.mstrTE.set("saving",false);}},{taskId:"pollStatus",msgID:mstrmojo.all.teModel.messageID});}function B(O,J){mstrmojo.all.mstrTE.set("saving",true);var J=J||G.ALL,L=J&G.MAPPING,K=J&G.LOCL,M=mstrmojo.all.teModel,I=mstrmojo.all.offModel,N={taskId:"saveRWTransactions",msgID:mstrmojo.all.teModel.messageID,nodeKey:M.nodeKey&&M.nodeKey.k||"",sectionKey:M.nodeKey&&M.nodeKey.sk||"",rwTransactionInfoXML:(L&&M.getXML())||"",isEditExistingTXProperty:!M.isNew,rwLocalTransactionInfoXML:(K&&I.getXML())||"",savingPhase:J};if(microstrategy&&microstrategy.updateManager){N.rwb=microstrategy.updateManager.getRWBState(true);}mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(P){if(O){O(P);}mstrmojo.all.mstrTE.set("saving",false);},failure:function(P){var Q=P.getResponseHeader("X-MSTR-TaskFailureMsg");if(Q.indexOf("Task exceeded the maximum wait time")>-1){D(O);}else{L&&F.showError(mstrmojo.desc(8256));K&&I.set("validationError",Q);mstrmojo.all.mstrTE.set("saving",false);}}},N);}function C(K){var J=mstrmojo.all.teModel,I=mstrmojo.all.mstrTE;if(!I.saving&&(!J.txRpt||(J.isPropertiesValid()&&J.isAllInputsMapped()))){B(K,G.MAPPING);}}function A(K){var J=mstrmojo.all.offModel,I=mstrmojo.all.mstrTE;if(!I.saving){B(K,G.LOCL);}}function H(J,K){var I=function(L){J.onsave&&J.onsave(J,L);J.clearDirtyFlags&&J.clearDirtyFlags();K&&K(L);};if(J.id==="teModel"){C(I);}else{A(I);}}mstrmojo.txEditor.ButtonsBar=mstrmojo.declare(mstrmojo.HBox,null,{scriptClass:"mstrmojo.txEditor.ButtonsBar",cssClass:"mstrmojo-Editor-buttonBox",cssText:mstrmojo.dom.isIE7?"float:none":"",slot:"buttonNode",children:[{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",alias:"applyButton",text:mstrmojo.desc(134,"Apply"),onclick:function(){var L=this.parent.parent.txTap,K=(L.activePanel===0),I=mstrmojo.all.offModel,M=mstrmojo.all.teModel,J=K?M:I;if(K){if(J.hasDirtyTscObjs()){H(J,function(N){if(!!N.localTxnCleared&&I&&!I.isRemoved()){F.showError(mstrmojo.desc(13727,"Local transaction deleted since it is no longer valid."));I.set("tgtDs",null);I.reset();}});}}else{if(J.isDirtyState()){H(J,function(N){J.reset();});}}}},{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(1442),bindings:{text:'mstrmojo.all.mstrTE.saving? mstrmojo.desc(8298) + "..." : mstrmojo.desc(1442)'},onclick:function(){var J=mstrmojo.all.mstrTE,M=J.txTap.activePanel,I=mstrmojo.all.teModel,L=null;if(!J.saving){if(M===E.TNX_MAP){if(!I.txRpt||(I.isPropertiesValid()&&I.isAllInputsMapped())){L=G.MAPPING;}}else{L=G.LOCL;}if(!!L){var K=this;B(function(N){if(I.onsave){I.onsave(I,N);}K.parent.parent.close();},L);}}}},{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(221,"Cancel"),onclick:function(){if(!mstrmojo.all.mstrTE.saving){this.parent.parent.close();}}}]});F.applyChanges=H;}());(function(){mstrmojo.requiresCls("mstrmojo.Table","mstrmojo.Pulldown","mstrmojo.txEditor.CommonComponent","mstrmojo.txEditor.Container","mstrmojo.txEditor.Table","mstrmojo.Label","mstrmojo.HBox","mstrmojo.HTMLButton");mstrmojo.requiresDescs(2149,4190,5247,8501,9899,9900);var G=mstrmojo.txEditor.CommonComponent,E=G.CTRL_TYPES,B=G.INPUT_VALUES,D=mstrmojo.Button.newWebButton,H="mstrTransactionSortEditor",A=1,I=0,C=-1;function F(){return mstrmojo.all.teModel.currentTxInput.ctl.pr.t===E.CTRL_BARCODE;}mstrmojo.txEditor.DatasetPanel=mstrmojo.declare(mstrmojo.txEditor.Container,null,{scriptClass:"mstrmojo.txEditor.DatasetPanel",cssClass:"mstrmojo-TransactionEditor-Panel dataset",onvisibleChange:function(){var J=mstrmojo.all.teModel;if(this.visible){J.updateDDICSetting(J.currentTxInput);}else{if(this.parent.visible){J.currentTxInput.ctl.ddic=null;}}},getVisibility:function(){return mstrmojo.all.teModel.currentTxInput.ctl.pr.ipt===B.INPUT_VALUES_DATASET;},children:[{scriptClass:"mstrmojo.txEditor.Table",layout:[{cells:[{},{}]},{cells:[{},{}]},{cells:[{},{},{}]},{cells:[{},{}]},{cells:[{colSpan:2}]},{cells:[{},{}]}],children:[G.createLabel({slot:"0,0"},mstrmojo.desc(4190)),{slot:"0,1",alias:"dstPicker",scriptClass:"mstrmojo.Pulldown",popupToBody:true,popupZIndex:112,itemIdField:"dsid",defaultText:" ",defaultSelection:-1,getVisibility:function(){var J=mstrmojo.all.teModel;this.set("items",J.rwTxs.ds);this.set("value",J.currentTxInput.ctl.ddic.dsid);return true;},onvalueChange:function(){if(this.visible){var J=mstrmojo.all.teModel.currentTxInput.ctl.ddic;J.dsid=this.value;J.dst=this.selectedItem&&this.selectedItem.dst;J.cst=null;this.parent.attPicker.set("items",this.selectedItem&&this.selectedItem.attrs);this.parent.attPicker.set("value",null);this.parent.wfrmPicker.set("value",null);if(F()){this.parent.mfrmPicker.set("value",null);this.parent.wmEqualCheck.set("checked",false);}}}},G.createLabel({slot:"1,0"},mstrmojo.desc(2149)),{slot:"1,1",alias:"attPicker",scriptClass:"mstrmojo.Pulldown",popupToBody:true,popupZIndex:112,itemIdField:"did",defaultText:" ",defaultSelection:-1,items:[],getVisibility:function(){var J=this.parent.dstPicker.selectedItem;this.set("items",J&&J.attrs);this.set("value",mstrmojo.all.teModel.currentTxInput.ctl.ddic.csid);return true;},onvalueChange:function(){if(this.visible){var J=mstrmojo.all.teModel.currentTxInput.ctl.ddic;J.csid=this.value;J.cst=this.selectedItem&&this.selectedItem.tp;this.parent.dfrmPicker.set("items",this.selectedItem&&[{fid:"1",n:"Automatic"}].concat(this.selectedItem.frms));this.parent.dfrmPicker.set("value",this.selectedItem?"1":null);this.parent.wfrmPicker.set("items",this.selectedItem&&this.selectedItem.frms);this.parent.wfrmPicker.set("value",null);if(F()){this.parent.mfrmPicker.set("items",this.selectedItem&&this.selectedItem.frms);this.parent.mfrmPicker.set("value",null);this.parent.wmEqualCheck.set("checked",false);}}}},G.createLabel({slot:"2,0"},mstrmojo.desc(5247)),{slot:"2,1",alias:"dfrmPicker",scriptClass:"mstrmojo.Pulldown",popupToBody:true,popupZIndex:112,itemIdField:"fid",defaultText:" ",defaultSelection:-1,items:[],getVisibility:function(){var J=this.parent.attPicker.selectedItem;this.set("items",J&&[{fid:"1",n:"Automatic"}].concat(J.frms));this.set("value",mstrmojo.all.teModel.currentTxInput.ctl.ddic.dfid);return true;},onvalueChange:function(){if(this.visible){mstrmojo.all.teModel.currentTxInput.ctl.ddic.dfid=this.value;}}},{slot:"2,2",alias:"sortButton",scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-TransactionEditor-SortButton",bindings:{enabled:"!!this.parent.dfrmPicker.value"},onclick:function(){var L=H,K=this.parent.attPicker.selectedItem,J;if(!mstrmojo.all[L]){mstrmojo.insert(mstrmojo.txEditor.SortEditor);}J=mstrmojo.all[L];J.sortTxModel.set("items",[{fid:"0",n:"Default"}].concat(K.frms));J.sortTxModel.set("text",K.n);J.open();},getVisibility:function(){return mstrmojo.all.teModel.currentTxInput.ctl.pr.t===E.CTRL_LIST;}},G.createLabel({slot:"3,0",getVisibility:F},mstrmojo.desc(9899)),{slot:"3,1",alias:"mfrmPicker",scriptClass:"mstrmojo.Pulldown",popupToBody:true,popupZIndex:112,itemIdField:"fid",defaultText:" ",defaultSelection:-1,items:[],getVisibility:function(){var K=F(),J=this.parent.attPicker.selectedItem;if(K){this.set("items",J&&J.frms);this.set("value",mstrmojo.all.teModel.currentTxInput.ctl.ddic.mfid);}return K;},onvalueChange:function(){if(this.visible){var J=mstrmojo.all.teModel.currentTxInput.ctl.ddic;J.mfid=this.value;if(this.parent.wmEqualCheck.checked===false){this.parent.wfrmPicker.set("value",this.value);}}}},{slot:"4,0",alias:"wmEqualCheck",scriptClass:"mstrmojo.TristateCheckBox",cssClass:"tristate mstrmojo-TransactionEditor-CheckBox",grayed:false,text:mstrmojo.desc(9900),getVisibility:function(){var J=mstrmojo.all.teModel.currentTxInput.ctl.ddic,K=F();if(K){this.set("checked",J.wfid!==J.mfid);}return K;},oncheckedChange:function(){if(this.visible){var J=mstrmojo.all.teModel.currentTxInput.ctl.ddic;if(!this.checked){this.parent.wfrmPicker.set("value",J.mfid);}}}},G.createLabel({slot:"5,0",getVisibility:function(){return(mstrmojo.all.teModel.currentTxInput.ctl.pr.t!==E.CTRL_BARCODE)||this.parent.wmEqualCheck.checked;},bindings:{visible:"this.parent.wmEqualCheck.checked"}},mstrmojo.desc(8501)),{slot:"5,1",alias:"wfrmPicker",scriptClass:"mstrmojo.Pulldown",popupToBody:true,popupZIndex:112,itemIdField:"fid",defaultText:" ",defaultSelection:-1,items:[],getVisibility:function(){return !F()||this.parent.wmEqualCheck.checked;},onvisibleChange:function(){if(this.visible){var J=this.parent.attPicker.selectedItem;this.set("items",J&&J.frms);this.set("value",mstrmojo.all.teModel.currentTxInput.ctl.ddic.wfid);}},bindings:{visible:"this.parent.wmEqualCheck.checked"},onvalueChange:function(){mstrmojo.all.teModel.currentTxInput.ctl.ddic.wfid=this.value;}}]}]});mstrmojo.txEditor.SortEditor={id:H,scriptClass:"mstrmojo.Editor",title:"Sort",zIndex:150,cssClass:"mstrmojo-TransactionEditor-SortEditor",help:"configure_transactions_dialog_box.htm",postCreate:function(){var J={scriptClass:"mstrmojo.Model",id:"sortModel"};this.sortTxModel=mstrmojo.insert(J);},onOpen:function(){var J=mstrmojo.all.teModel.currentTxInput.ctl.ddic.sort||{sortfmid:"0",sortdir:-1};this.sortTxModel.set("sortdir",J.sortdir);this.sortTxModel.set("sortfmid",J.sortfmid);},onClose:function(){this.sortTxModel.sortdir=null;this.sortTxModel.sortfmid=null;},children:[{scriptClass:"mstrmojo.Table",alias:"sortTable",rows:1,cols:3,children:[{scriptClass:"mstrmojo.Label",alias:"sortAttr",slot:"0,0",bindings:{text:"this.parent.parent.sortTxModel.text"},},{scriptClass:"mstrmojo.Pulldown",alias:"sortForm",slot:"0,1",popupToBody:true,popupZIndex:160,itemIdField:"fid",bindings:{items:"this.parent.parent.sortTxModel.items",value:"this.parent.parent.sortTxModel.sortfmid"},onvalueChange:function(){var J=this.parent.parent.sortTxModel;J.sortfmid=this.value;if(this.value==="0"){J.set("sortdir",C);}else{if(J.sortdir===C){J.set("sortdir",A);}}}},{scriptClass:"mstrmojo.RadioList",alias:"sortDir",slot:"0,2",itemIdField:"v",allowUnlistedValues:false,bindings:{enabled:function(){return this.parent.parent.sortTxModel.sortdir!==C;},selectedItem:function(){return{v:this.parent.parent.sortTxModel.sortdir};}},items:[{n:"Ascending",v:A},{n:"Descending",v:I}],onchange:function(){var J=this.parent.parent.sortTxModel;selectedItem=this.selectedItem;J.sortdir=(!!selectedItem)?selectedItem.v:C;}}]},{scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBox",slot:"buttonNode",children:[{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(1442),onclick:function(){var J=mstrmojo.all.teModel.currentTxInput.ctl.ddic,K=this.parent.parent.sortTxModel;J.sort=(K.sortfmid!=="0")?{sortfmid:K.sortfmid,sortdir:K.sortdir}:null;this.parent.parent.close();}},{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(221),onclick:function(){this.parent.parent.close();}},]}],};}());(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.hash","mstrmojo.func","mstrmojo.css","mstrmojo.string","mstrmojo.HBox","mstrmojo.Box","mstrmojo.DropDownButton","mstrmojo.Popup","mstrmojo.WidgetTree","mstrmojo.ObjectBrowserDataProvider","mstrmojo.OBList","mstrmojo.FishEyeContainer","mstrmojo.SearchBox2","mstrmojo.Booklet","mstrmojo.IncFetch","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.mstr.ui.IncFetchOBList","mstrmojo.DI.DIConstants");var Q=mstrmojo.hash,Y=mstrmojo.func,A=mstrmojo.string,M=mstrmojo.meta.TP,G="5CECE58CC1D549F890EB61C4DB2156A3",V="E0CCB9CF22104A489CBE78D974AFD19E",S=mstrmojo.chart.model.enums.EnumDSSObjectType,L=mstrmojo.array,E=mstrmojo.dom,P=mstrmojo.DI.DIConstants,a=function(j,k,d){var g=j.scrollableIncFetch,f=g?"mstrmojo.mstr.ui.IncFetchOBList":"mstrmojo.OBList",h={scriptClass:f,items:k.items,multiSelect:d};if(g){h.browseConfig={blockBegin:k.bb,blockCount:k.bc,totalSize:k.sz,folderLinksContextId:j.folderLinksContextId,rootFolderID:k.did,browsableTypes:j.browsableTypes,browsableViewMedias:j.browsableViewMedias,dataProvider:j.dataProvider};h.onwaitingChange=function(){if(j.booklet){j.booklet.set("waiting",this.waiting);}};}var e=mstrmojo.insert(h);e.render();return e;},B=function(f,g,d){var e=mstrmojo.ObjectBrowser.widgetHandler||a;return e(f,g,d);},O={success:function(f){var g=this.ob,e=f.items,h=g.pageCache[g.currentPage],d=h._w;h.items=e;d.set("items",e);this.ob=null;this.item=null;window.clearTimeout(g._btm);g.booklet.set("waiting",false);if(g.scrollableIncFetch&&d.scrollNode){d.initScroll();d.updateScrollbars();}},failure:function(d){window.alert(d.getResponseHeader("X-MSTR-TaskFailureMsg"));this.ob.booklet.set("waiting",false);}},U=function(j,h,f){var g=f?-1:1,e=j.pageCache.length,k;for(k=j.currentPage+g;k<e&&k>=0;k+=g){var d=j.pageCache[k];if(d._k===h.k){return{steps:k-j.currentPage,cache:d};}}return null;},D=function(h,g,f,j){var k=h.currentPage+1,e=h.pageCache.length,d;for(d=k;d<e;d++){h.pageCache[d]._w.destroy();delete h.pageCache[d].items;}h.pageCache=h.pageCache.slice(0,k);j._w=f;j._k=g.k;h.pageCache[k]=j;h.cacheChange();},I=function(e){var d=mstrmojo.hash.walk("anc.items.0.items",e);this.set("canGoUp",!(!e.pf||!d));},J=function(h,g,j,f,e){delete h._btm;var d;if(!f){d=B(h,j,h.multiSelect);d.attachEventListener("change",h.id,"navigate");if(h.useDblSelect||h.useBothSglDblSelect){d.attachEventListener("dblclick",h.id,"dblselect");}}else{d=j._w;}h.obList=d;h.booklet.turn(d,e>0);window.setTimeout(function(){h.onBrowsing=false;},300);if(!f){D(h,g,d,j);}h.set("currentFolder",j);h.set("currentPage",h.currentPage+e);h.updateUpButton(j);if(h.scrollableIncFetch&&d.scrollNode){d.initScroll();d.updateScrollbars();}},R=function(f,e,d){var g=U(f,e,false);g=g||U(f,e,true);if(!g){window.clearTimeout(f._btm);f._btm=window.setTimeout(function(){f.booklet.set("waiting",true);},300);d.ob=f;d.item=e;f.getDataProvider().fetchFolderContents(f,e,d);}else{J(f,e,g.cache,true,g.steps);}},C=function(e,f,g,d){R(e,{fid:e.pageCache[e.currentPage].did,blockBegin:f,searchPattern:g,recursive:d},O);},K={success:function(e){var f=this.ob;if(f){window.clearTimeout(f._btm);if(!e.items){e.items=[{did:"empty",n:"("+mstrmojo.desc(2210)+")",t:"e"}];}var d=function h(j){var m=j.length,k;for(k=0;k<m;k++){var l=j[k];if(l.did===G||l.did===V){l.n=(l.did===G)?mstrmojo.desc(8112):mstrmojo.desc(9277);}if(l.items){d(l.items);}}};if(e.did===G||e.did===V){e.n=(e.did===G)?mstrmojo.desc(8112):mstrmojo.desc(9277);if(e.anc&&e.anc.items){d(e.anc.items);}}if(e&&e.items&&f.browsableViewMedias){var g={};L.forEach(f.browsableViewMedias.split(","),function(j){g[parseInt(j,10)]=true;});e.items=L.filter(e.items,function(j){return(j.t!==S.DssTypeDocumentDefinition)||g[j.dvm];});}if(e&&e.items&&mstrApp&&mstrApp.isSingleTier){e.items=L.filter(e.items,function(j){return(j.st!==772);});}if(f.isImportFromCube){e.items=L.filter(e.items,function(j){return(j.et!==P.DSSExType.DSSEXDISPARK);});}if(e.did&&this.item.k!==e.did){this.item.k=e.did;}J(f,this.item,e,false,1);this.ob=null;this.item=null;}},failure:function(d){this.ob.booklet.set("waiting",false);if(this.ob.onError){this.ob.onError(d);}else{if(d.getResponseHeader){mstrmojo.alert(d.getResponseHeader("X-MSTR-TaskFailureMsg"));}else{mstrmojo.alert(d.message);}}},complete:function(){if(this.ob){this.ob.onBrowsing=false;}}},c=function(f){var e=f.pageCache.length,d;for(d=0;d<e;d++){f.pageCache[d]._w.destroy();}f.pageCache=[];f.currentPage=-1;f.cacheChange();},N=function(g,f,h){var d=g.onBrowseFolder;if(d){d[0][d[1]](f);}if(f&&parseInt(f.acg,10)===33){return ;}var e={};if(f){e.k=f.did;e.fid=f.did;}else{if(g.rootFolderID){e.k=g.rootFolderID;e.fid=g.rootFolderID;}else{if(g.rootFolderType){e.k=g.rootFolderType;e.fty=g.rootFolderType;}else{if(g.folderLinksContextId){e.k=g.folderLinksContextId;}}}}R(g,e,Y.wrapMethods(h,Q.copy(K)));},X=function(j,d,f){if(!f){return d;}var g=j.showCompletePath,l=d[0],h,e;while(l){var k;for(k=f.length-1;k>=0;k--){if(l.did===f[k].did){f.splice(k,1);l._isSc=true;}}e=l;l._open=true;l=l.items;l=l&&l[0];if(!l){e.lastLeaf=true;}}if(!g){l=d[0];while(l){if(l._isSc){d[0]=l;break;}l=l.items;l=l&&l[0];}}return d.concat(f);},W=function(e,d,f){e._naviInfo=X(e,d,f);};mstrmojo.ObjectBrowser=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.ObjectBrowser",rootFolderType:null,rootFolderID:null,sId:null,closeOnSelect:true,browsableTypes:null,browsableViewMedias:null,includeObjectDesc:false,closeable:true,fishEyeVisible:false,searchVisible:true,upButtonVisible:false,currentFolder:null,pageCache:[],currentPage:-1,blockCount:50,canGoUp:true,folderLinksContextId:null,minSearchLength:2,showCompletePath:true,multiSelect:false,onCloseCB:null,onSelectCB:null,onBrowseFolder:null,scrollableIncFetch:false,useBothSglDblSelect:false,displaySaveLabel:false,useOldSearch:false,getDataProvider:function(){if(!this.dataProvider){this.dataProvider=mstrmojo.insert({scriptClass:"mstrmojo.ObjectBrowserDataProvider"});}return this.dataProvider;},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},children:[{scriptClass:"mstrmojo.HBox",alias:"titleBar",cssClass:"mstrmojo-OB-titleTable",children:[{alias:"saveLabel",scriptClass:"mstrmojo.Label",cssClass:"msrmojo-save-label",text:mstrmojo.desc(3178,"Save in:"),bindings:{visible:"this.parent.parent.displaySaveLabel"}},{alias:"title",scriptClass:"mstrmojo.DropDownButton",cssClass:"mstrmojo-FormatEditor-DropDownButton",cssText:"margin:0px;",popupRef:{scriptClass:"mstrmojo.Popup",alias:"popup",contentNodeCssClass:"mstrmojo-OBNavigatorPopup",cssText:"position:relative;",slot:"popupNode",locksHover:true,onOpen:function(){var d=this.opener.parent.parent,g=this.tree,f=d._naviInfo,e=this.parent.parent.parent.extraDDItems;if(g.items!==f){g._pup=this;this.ob=d;if(e){L.forEach(e,function(h){h.isExtra=true;});f=f.concat(e);}g.set("items",f);}if(d.getRecents&&!mstrApp.isSingleTier){d.getRecents(this);}},children:[{alias:"tree",scriptClass:"mstrmojo.WidgetTree",itemIdField:"did",itemFunction:function(h,d,e){var g=mstrmojo.WidgetTree.prototype.itemFunction(h,d,e);if(h.isExtra){if(h.cssClass){g.cssClass=h.cssClass;}g.onmousedown=h.onmousedown||mstrmojo.emptyFn;return g;}if(h._open){g.state=1;}g._ll=!!h.lastLeaf;g._pup=e._pup;g.onmousedown=function(j){var k=mstrmojo.dom.eventTarget(j.hWin,j.e),l=this._pup;if(k===this.domNode||k===this.textNode){if(!this._ll){N(l.ob,this.data);}l.close();}};g.markupMethods=Q.copy(g.markupMethods);g.markupMethods.onstateChange=function(){var j=this.data.items?this.state:0;this.stateNode.className="mstrmojo-TreeNode-state "+({0:"closed",1:"opened",2:"leaf"}[j]||"closed");this.itemsContainerNode.style.display=(j===1)?"block":"none";};g.useRichTooltip=true;var f=g.postBuildRendering;g.postBuildRendering=function(){if(f){f.call(g);}if(g.textNode.parentNode.clientWidth){g.textNode.style.width=(g.textNode.parentNode.clientWidth-20)+"px";}};g.premouseover=function(l){if(this.useRichTooltip){var k=this.textNode;if(k.clientWidth<k.scrollWidth){var j=E.position(k);this.richTooltip={areaId:this.id,cssClass:"vi-regular vi-tooltip-C",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_TOPLEFT,content:A.encodeHtmlString(this.data[this.itemDisplayField]),top:j.y-2,left:j.x+j.w+6};}else{this.richTooltip=null;}mstrmojo.dom.stopPropogation(l.hWin,l.e);}return true;};return g;}}]}},{alias:"upButton",scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-OBListItemIcon up",title:mstrmojo.desc(1152,"Up One Level"),onclick:function(){this.parent.parent.goUp();},bindings:{enabled:"this.parent.parent.canGoUp",visible:"this.parent.parent.upButtonVisible"}},{alias:"closebtn",scriptClass:"mstrmojo.Button",iconClass:"mstrmojo-OBCloseButton",title:mstrmojo.desc(2102,"Close"),bindings:{visible:"this.parent.parent.closeable"},onclick:function(){this.parent.parent.close();}}]},{alias:"fishEye",scriptClass:"mstrmojo.FishEyeContainer",cssText:"width:100%",bindings:{visible:"this.parent.fishEyeVisible"}},{alias:"searchUpBar",scriptClass:"mstrmojo.HBox",cssClass:"searchBox",children:[{alias:"obSearchBox",scriptClass:"mstrmojo.SearchBox2",cssClass:"mstrmojo-charcoalbox mstrmojo-dxsprite",cssText:"margin: 3px 0; ",contentWidget:mstrmojo.all.obList,taskId:"searchMetadata",searchIncFetch:true,enableMatchCase:false,forceResetCache:true,bindings:{minSearchLength:"this.parent.parent.minSearchLength",quickSearch:"this.parent.parent.quickSearch"},serverRequest:function(d,e){this.parent.parent.getDataProvider().serverRequest(d,e);},preFetch:function(){this.objectTypes=this.parent.parent.browsableTypes||this.objectTypes;this.parent.parent.booklet.set("waiting",true);},postFetch:function(){this.parent.parent.booklet.set("waiting",false);},postBuildRendering:function Z(){if(this._super){this._super();}this.inputNode.setAttribute("placeholder"," "+mstrmojo.desc(12666,"Search..."));},onUpdateSearchParams:function H(f){var e=this.parent.parent,d=e.sId;if(d){f.sessionState=d;}if(e.useOldSearch){f.quickSearch=0;f.nameWildcards=1;f.sortKey=6;}}}],bindings:{visible:"this.parent.searchVisible"}},{scriptClass:"mstrmojo.Booklet",cssClass:"mstrmojo-OB-booklet",alias:"booklet",hasAnimation:false,bindings:{scrollableIncFetch:"this.parent.scrollableIncFetch"}},{alias:"obIncFetch",scriptClass:"mstrmojo.IncFetch",height:"17px",cssText:"height:0px;overflow:hidden;",visible:false,np:0,cp:0,ds:{f:mstrmojo.desc(4046,"First"),p:mstrmojo.desc(1058,"Previous"),n:mstrmojo.desc(1059,"Next"),l:mstrmojo.desc(4049,"Last"),pgs:mstrmojo.desc(5972,"## of ### pages"),gt:mstrmojo.desc(5878,"Go to:"),v:mstrmojo.desc(6079,"This field should be # between ## and ###.")},onvisibleChange:function(e){var g=parseInt(this.height,10),d=this.np>1,f={target:this.domNode,props:{height:{start:(d?0:g),stop:(d?g:0),suffix:"px"}},onEnd:function(){if(d){this.target.style.overflow="visible";}}},j=new mstrmojo.fx.AnimateProp(f);this.domNode.style.overflow="hidden";mstrmojo.css.toggleClass(this.parent.domNode,"show-inc-fetch",this.visible);j.play();},onifsChange:function(d){var e=this.np;mstrmojo.hash.copy(d.value,this);if(this.np>1){this.children=null;this.refresh();}if((e<=1&&this.np>1)||(e>1&&this.np<=1)||(e===0&&this.np>0)){this.set("visible",this.np>1);}this.cssText="";}}],destroy:function b(){c(this);if(this._super){this._super();}},postBuildRendering:function(){if(this._super){this._super();}if(this.fishEye&&this.fishEyeVisible){this.fishEye.attachEventListener("selectedIndexChange",this.id,"onFishEyeChange");}var f=this.searchUpBar;if(f&&f.obSearchBox&&this.searchVisible){this.obSearchBox=this.searchUpBar.obSearchBox;this.obSearchBox.attachEventListener("itemsChange",this.id,"onSearchItemsChange");var d=this.obSearchBox.contentWidget||this.obSearchBox;if(!this.scrollableIncFetch){d.attachEventListener("ifsChange",this.id,function(g){if(!this.scrollableIncFetch){this.obIncFetch.set("ifs",g.value);}});}}if(!this.scrollableIncFetch&&this.obIncFetch){var e=this.obIncFetch;e.attachEventListener("fetch",this.id,function(g){e.cp=g.v;e.children=null;e.refresh();C(this,(g.v-1)*this.blockCount+1,this.searchVisible?this.obSearchBox.inputNode.value:"",1);});}mstrmojo.css.addClass(this.domNode,"mstrmojo-ObjectBrowser");},onSearchItemsChange:function(e){var f=e.value,d=this.pageCache[this.currentPage]._w;if(!f||f.length===0){f=[{did:"empty",n:"("+mstrmojo.desc(2210,"")+")",t:"e"}];}else{if(this.browsableViewMedias){var g={};L.forEach(this.browsableViewMedias.split(","),function(h){g[parseInt(h,10)]=true;});f=L.filter(f,function(h){return(h.t!==S.DssTypeDocumentDefinition)||g[h.dvm];});}}d.set("items",f);},navigate:function(l){var d=l.src,n=d.selectedItem,f=this.multiSelect,j=f&&d.getSelectedItems(),k=this,e=l.added&&l.added.length,h=l.removed&&l.removed.length,g=f?j.length===1&&(!h||e):!!n;if(g&&n.did==="empty"){return ;}if(g&&parseInt(n[M],10)===8){if(!this.onBrowsing){this.onBrowsing=true;N(this,n);}}else{if((n&&(!this.useDblSelect||this.useBothSglDblSelect))||j){this.select(f?j:n);}}},browseFolder:function(d,e){N(this,{did:d,n:e});},onFishEyeChange:function(d){this.goToPage(d.value);},goToPage:function(d){if(d<this.pageCache.length&&d!==this.currentPage){var f=d>this.currentPage,e=this.pageCache[d];this.set("currentPage",d);this.booklet.turn(e._w,f);this.set("currentFolder",e);I.call(this,e);}},oncurrentPageChange:function(d){if(this.fishEye){this.fishEye.setSelectedIndex(d.value);}var e=this.pageCache[this.currentPage];this.titleBar.title.set("text",mstrmojo.string.encodeHtmlString(e.n));if(this.searchVisible&&this.obSearchBox){this.obSearchBox.set("rootCacheItems",e.items||[]);this.obSearchBox.set("totalSize",e.sz);this.obSearchBox.set("rootID",e.did);this.obSearchBox.clearSearch();}if(!this.scrollableIncFetch&&this.obIncFetch){this.obIncFetch.set("ifs",{np:Math.floor(e.sz/e.bc)+((e.sz%e.bc>0)?1:0),cp:Math.floor(e.bb/e.bc)+((e.bb%e.bc>0)?1:0)});}},cacheChange:function(){if(this.fishEye&&this.fishEyeVisible){this.fishEye.setItems(this.pageCache);}},browse:function(e,d){Q.copy(e,this);if(this.searchVisible&&this.obSearchBox){this.obSearchBox.clear();}c(this);N(this,undefined,d);},close:function(){var e=this.ctx||this,d=e.onCloseCB;if(d){d[0][d[1]]();}e.set("visible",false);},select:function(e){var d=this.onSelectCB;if(d){d[0][d[1]](e);}if(this.closeOnSelect){this.close();}},dblselect:function T(e){var f=e&&e.src.selectedItem;if(!f||(f&&f.did==="empty")||f[M]===8){return ;}if(this.useBothSglDblSelect){var d=this.onDblSelectCB;if(d){d[0][d[1]](f);}if(this.closeOnSelect){this.close();}}else{this.select(f);}},goUp:function(){if(this.canGoUp){N(this,{did:this.currentFolder.pf});}},updateUpButton:function F(d){I.call(this,d);},oncurrentFolderChange:function(d){var e=d.value;W(this,e.anc.items,e.sc);},refreshContent:function(d){C(this,d);},onError:null,onheightChange:function(){var d=["titleBar","fishEye","searchUpBar","obIncFetch"],f=0,e;for(e in d){f+=parseInt(this[d[e]].domNode.offsetHeight,10);}this.booklet.set("height",parseInt(this.height,10)-f+"px");}});}());(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.hash","mstrmojo.Table","mstrmojo.Label","mstrmojo.TextBox","mstrmojo.DropDownButton","mstrmojo.Popup","mstrmojo.ObjectBrowser");mstrmojo.requiresDescs(1825,8282);function A(C){return[{slot:"0,0",scriptClass:"mstrmojo.Label",text:C.desc},{slot:"0,1",scriptClass:"mstrmojo.TextBox",readOnly:true,bindings:{value:function(){if(!C.isOffline){return this.parent.model.txRpt.nm;}else{return this.parent.model.tgtDs.n;}}}},{slot:"0,2",scriptClass:"mstrmojo.DropDownButton",cssClass:"mstrmojo-TransactionEditor-DropDownButton",text:"...",title:mstrmojo.desc(1825,"Browse"),popupRef:{scriptClass:"mstrmojo.Popup",cssClass:"mstrmojo-TransactionEditor-ObjectBrowserPopup",slot:"popupNode",locksHover:true,onOpen:function(){this.objectBrowser.browse({browsableTypes:C.openType,onSelectCB:[this,"onSelect"],onCloseCB:[this,"close"]});this.objectBrowser.obSearchBox.objectTypes=C.objectTypes;this.objectBrowser.set("visible",true);},onSelect:function(E){if(E.did){var D=C.model;if(!C.isOffline){mstrmojo.all.ctrlPropPanel.show=false;D.set("txRpt",null);D.setTxReport(E.did,E.n,true);}else{D.set("tgtDs",null);D.setTargetDataset(E.did,E.n);}}},children:[{alias:"objectBrowser",scriptClass:"mstrmojo.ObjectBrowser",folderLinksContextId:14,closeOnSelect:true,useAnimate:true,closeable:true,showCompletePath:false}]}},{slot:"0,3",scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-TransactionEditor-RemoveAscBtn",title:mstrmojo.desc(8282),text:"x",onclick:function(){if(C.isOffline){C.model.set("tgtDs",null);}else{C.model.set("txRpt",null);}}}];}var B=mstrmojo.hash;mstrmojo.txEditor.ReportSelector=mstrmojo.declare(mstrmojo.Table,null,{scriptClass:"mstrmojo.txEditor.ReportSelector",cssClass:"mstrmojo-TransactionEditor-ReportSelector",rows:1,cols:4,markupMethods:B.copy({onheightChange:function(){if(this.height){this.domNode.style.height=this.height+"px";}}},B.copy(mstrmojo.Table.prototype.markupMethods)),init:function(C){this._super(C);this.model=C.model=mstrmojo.all[this.modelId];this.set("children",A(C));}});}());(function(){mstrmojo.requiresCls("mstrmojo.txEditor.CommonComponent","mstrmojo.txEditor.Container","mstrmojo.txEditor.DatasetPanel");mstrmojo.requiresDescs(9909);var A=mstrmojo.txEditor.CommonComponent,B=A.INPUT_VALUES;mstrmojo.txEditor.BarcodePropertiesPanel=mstrmojo.declare(mstrmojo.txEditor.Container,null,{scriptClass:"mstrmojo.txEditor.BarcodePropertiesPanel",cssClass:"mstrmojo-TransactionEditor-Panel barcode",children:[A.createRequiredCheckBox(),A.createCheckBox({text:mstrmojo.desc(9909),cssClass:"tristate mstrmojo-TransactionEditor-CheckBox above",oncheckedChange:function(){var C=mstrmojo.all.teModel.currentTxInput.ctl.pr;C.set("em",this.checked);C.ipt=this.checked?B.INPUT_VALUES_DATASET:B.INPUT_VALUES_MANUAL;this.parent.dataset.set("visible",this.checked);}},"em"),{scriptClass:"mstrmojo.txEditor.DatasetPanel",alias:"dataset"}]});}());(function(){mstrmojo.requiresCls("mstrmojo.txEditor.CommonComponent","mstrmojo.Container","mstrmojo.Table","mstrmojo.txEditor.CalculatedPanel","mstrmojo.txEditor.ManualPanel","mstrmojo.txEditor.DatasetPanel");mstrmojo.requiresDescs(272,8254,8331,8332,8502,8260,8261,8262);var D=mstrmojo.txEditor.CommonComponent,A=D.CTRL_TYPES,F=D.LIST_TYPES,H=D.INPUT_VALUES,B=mstrmojo.expr.DTP,G=[{n:mstrmojo.desc(8261),v:H.INPUT_VALUES_CALCULATED},{n:mstrmojo.desc(8262),v:H.INPUT_VALUES_MANUAL}],E=G.concat({n:mstrmojo.desc(8502),v:H.INPUT_VALUES_DATASET});function C(I){return[{scriptClass:"mstrmojo.txEditor.Table",layout:[{cells:[{colSpan:3}]},{cells:[{},{},{}]},{cells:[{},{},{}]},{cells:[{},{colSpan:2}]}],children:[D.createCheckBox({slot:"0,0",alias:"dmCheck",text:mstrmojo.desc(8260),_isVisible:function(){var J=mstrmojo.all.teModel.currentTxInput.ctl.pr;return J.t===A.CTRL_SLIDER||J.st===F.LIST_TYPE_PULLDOWN;},oncheckedChange:function(){if(this.visible){var J=mstrmojo.all.teModel.currentTxInput.ctl.pr;J.set("dm",this.checked?1:0);J.set("wm",this.checked?0:1);}}},"dm",[1,0]),D.createLabel({slot:"1,0",getVisibility:function(){var J=mstrmojo.all.teModel.currentTxInput.ctl.pr;return J.t===A.CTRL_SLIDER||J.st===F.LIST_TYPE_PULLDOWN;}},mstrmojo.desc(272)),D.createTextInput({slot:"1,1",dtp:B.DOUBLE,size:7,min:0,max:999999,_isVisible:function(){var J=mstrmojo.all.teModel.currentTxInput.ctl.pr;return J.t===A.CTRL_SLIDER||J.st===F.LIST_TYPE_PULLDOWN;},_initValue:function(){var J=mstrmojo.all.teModel.currentTxInput.ctl.pr;this.set("enabled",J.wm===1);this.set("value",D.toLocaleUnits(J.w));},bindings:{enabled:"!this.parent.dmCheck.checked"},updateModel:function(J){mstrmojo.all.teModel.currentTxInput.ctl.pr.w=J?D.toUSUnits(J):null;}},"w"),D.createLabel({slot:"1,2",getVisibility:function(){var J=mstrmojo.all.teModel.currentTxInput.ctl.pr;return J.t===A.CTRL_SLIDER||J.st===F.LIST_TYPE_PULLDOWN;}},mstrApp.unitsLabel),D.createLabel({slot:"2,0",getVisibility:function(){return mstrmojo.all.teModel.currentTxInput.ctl.pr.t===A.CTRL_SLIDER;}},mstrmojo.desc(8331)+":"),D.createTextInput({slot:"2,1",dtp:B.INTEGER,size:7,min:0,max:50,_isVisible:function(){return mstrmojo.all.teModel.currentTxInput.ctl.pr.t===A.CTRL_SLIDER;},_initValue:function(){var J=mstrmojo.all.teModel.currentTxInput.ctl.pr;this.set("value",J.ldw);this.set("enabled",J.dm===1);},bindings:{enabled:"!!this.parent.dmCheck.checked"}},"ldw"),D.createLabel({slot:"2,2",getVisibility:function(){return mstrmojo.all.teModel.currentTxInput.ctl.pr.t===A.CTRL_SLIDER;}},mstrmojo.desc(8332)),D.createLabel({slot:"3,0"},mstrmojo.desc(8254)+":"),{slot:"3,1",scriptClass:"mstrmojo.Pulldown",popupToBody:true,popupZIndex:112,itemIdField:"v",defaultText:" ",defaultSelection:-1,getVisibility:function(){var J=mstrmojo.all.teModel.currentTxInput.ctl.pr;this.set("items",(J.t===A.CTRL_LIST)?E:G);this.set("value",J.ipt);return true;},onvalueChange:function(){if(this.visible){mstrmojo.all.teModel.currentTxInput.ctl.pr.ipt=this.value;this.parent.parent.switchPanel(this.value);}}}]},{scriptClass:"mstrmojo.txEditor.CalculatedPanel",alias:"calculated"},{scriptClass:"mstrmojo.txEditor.ManualPanel",alias:"manual",rowHeaders:I.rowHeaders,colHeader:I.colHeader},{scriptClass:"mstrmojo.txEditor.DatasetPanel",alias:"dataset"}];}mstrmojo.txEditor.ValuesPropsPanel=mstrmojo.declare(mstrmojo.txEditor.Container,null,{scriptClass:"mstrmojo.txEditor.ValuesPropsPanel",cssClass:"mstrmojo-TransactionEditor-DisplayStyleField",rowHeaders:null,colHeader:null,switchPanel:function(I){this.calculated.set("visible",I===H.INPUT_VALUES_CALCULATED);this.manual.set("visible",I===H.INPUT_VALUES_MANUAL);this.dataset.set("visible",I===H.INPUT_VALUES_DATASET);},init:function(I){this._super(I);this.set("children",C({rowHeaders:this.rowHeaders,colHeader:this.colHeader}));}});}());(function(){mstrmojo.requiresCls("mstrmojo.txEditor.CommonComponent","mstrmojo.txEditor.Container","mstrmojo.txEditor.CalculatedPanel");var A=mstrmojo.txEditor.CommonComponent;mstrmojo.txEditor.StepperPropertiesPanel=mstrmojo.declare(mstrmojo.txEditor.Container,null,{scriptClass:"mstrmojo.txEditor.StepperPropertiesPanel",children:[A.createRequiredCheckBox(),{scriptClass:"mstrmojo.txEditor.CalculatedPanel",alias:"calculated"}]});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.txEditor.MetaDataListContainer","mstrmojo.txEditor.CommonComponent");mstrmojo.requiresDescs(8245,8246,13209);var C=mstrmojo.hash,A=mstrmojo.txEditor.CommonComponent,B=A.RW_UNIT_TYPE;mstrmojo.txEditor.MetaDataObjPanel=mstrmojo.declare(mstrmojo.txEditor.Table,null,{scriptClass:"mstrmojo.txEditor.MetaDataObjPanel",cssClass:"mstrmojo-TransactionEditor-MetaDataObjPanel",markupMethods:C.copy({onheightChange:function(){if(this.height){this.domNode.style.height=this.height+"px";this.tgtOj.set("height",this.height/2);this.srcOj.set("height",this.height/2);}}},C.copy(mstrmojo.Table.prototype.markupMethods)),layout:[{cells:[{}]},{cells:[{}]}],children:[{scriptClass:"mstrmojo.txEditor.MetaDataListContainer",slot:"0,0",bindings:{items:"mstrmojo.all.offModel.tgtDs.dsObjs"},label:mstrmojo.desc(13209,"Dataset object")+":",alias:"tgtOj"},{scriptClass:"mstrmojo.txEditor.MetaDataListContainer",slot:"1,0",bindings:{items:"mstrmojo.all.offModel.offTxs.mappedObjs",label:function(){return(mstrmojo.all.offModel.offTxs.tp===B.RW_UNIT_FIELDGROUP?mstrmojo.desc(8246,"Fields"):mstrmojo.desc(8245,"Grid object"))+":";}},alias:"srcOj"}]});}());(function(){mstrmojo.requiresCls("mstrmojo.Model","mstrmojo.string","mstrmojo.array","mstrmojo.hash","mstrmojo.txEditor.CSIStatementToken","mstrmojo.txEditor.CommonComponent");var I=mstrmojo.string,R=mstrmojo.array,N=mstrmojo.hash,M=mstrmojo.txEditor.CommonComponent,F=M.CSI_KEYWORD_TYPE,A=M.STATEMENT_TYPE,O=mstrmojo.txEditor.CSIStatementToken.isOperation,C=0;DssRWManipulationAddOfflineTransaction=201;DssRWManipulationRemoveOfflineTransaction=202;DssRWManipulationUpdateOfflineTransaction=203;function L(U){var T=[];R.forEach(U,function(V){if(V.mapped){T.push(V);}});return T;}function E(X){var V=mstrmojo.all.offModel.offTxs.tscObjs||[],W="",U=V.length,T;for(T=0;T<U;++T){if(V[T].tn===X.v){X.tn=X.v;X.v=V[T].n;X.exv=V[T].key;X.extp="8";break;}}}function P(U){var T=A.STATEMENT_UPDATE,Z,X,W,a=[],Y=[],V=function(b){return((b.tp>=F.UPDATE&&b.tp<=F.FROM)||35===b.tp||-1===b.tp);};R.forEach(U,function(c){if(F.UPDATE===c.tp){T=A.STATEMENT_UPDATE;Z=F.WHERE;}else{if(F.INSERT===c.tp){T=A.STATEMENT_INSERT;Z=F.VALUES;}else{if(F.DELETE===c.tp){T=A.STATEMENT_DELETE;}else{if(269===c.tp){var b=c.oi;if(b){X=b.did;W=b.n;}}else{if(Z&&Z===c.tp){a.push(Y);Y=[];}else{if(!V(c)&&(c.oi||F.FIELDUNIT===c.tp)){c.isMstrObj=true;}}}}}}c.isRecognized=true;if(F.FIELDUNIT===c.tp){E(c);}if(37!==c.tp){Y.push(c);}});if(Y){a.push(Y);}return{tgtDsId:X,tgtDsName:W,tknstrm:{csType:T,clauses:a}};}mstrmojo.txEditor.LocalTxModel=mstrmojo.declare(mstrmojo.Model,null,{scriptClass:"mstrmojo.txEditor.LocalTxModel",enablePlainText:false,setTargetDataset:function(U,T){mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(V){if(V){V.n=V.n||T;mstrmojo.all.offModel.set("tgtDs",V);}},failure:function(V){M.showError(V.getResponseHeader("X-MSTR-TaskFailureMsg"));}},{taskId:"getRWTransactionTargetDataset",datasetId:U});},_set_offTxs:function(V,d){this.offTxs=N.make(d,mstrmojo.Obj);var T=this.offTxs,X=T.tscObjs,Z=T.localCsiTknStrm,b=Z&&Z.items;if(X){T.mappedObjs=L(X);}if(b){N.copy(P(b),T);}var e=T.tgtDsId,c=T.tgtDsName;if(e){this.setTargetDataset(e,c);}if(this.enablePlainText&&T.offPlainText){var U=I.trim(T.offPlainText),a=U.slice(0,6).toUpperCase(),W=("UPDATE"===a?0:("INSERT"===a?"1":"2")),Y=function(){var f,h;if(0===W){f=new RegExp("UPDATE.*SET");h="WHERE";}else{if(1===W){f=new RegExp("INSERT INTO [a-zA-Z_0-9]*\\s+");h="VALUES";}else{f=new RegExp("DELETE FROM [a-zA-Z_0-9]*\\s+");}}var k=U.replace(f,""),g=h?k.split(h):[k],j=[];R.forEach(g,function(l){j.push([{v:I.trim(l)}]);});return j;};T.tknstrm={clauses:Y(),csType:W};}return true;},ontgtDsChange:function(){var T=this.offTxs,U=this.tgtDs;if(T&&(!U||U.did!=T.tgtDsId)){this.set("isDirty",true);}},onEditableObjsChange:function(T){var U=this.offTxs;if(U){U.set("mappedObjs",L(U.tscObjs));}},_set_isDirty:function(U,T){this.isDirty=T;if(T&&this.validationError){this.set("validationError",null);}return true;},_postprocessTokenStream:function S(V){var V=V||[],U=V.length,Z=V[U-1],W=[],T="",X,a,Y=function(){W.push({v:T,tp:2,lv:1});T="";};if(V[0]&&V[0].tp!=35){W.push({v:"#",tp:35,lv:4,sta:2,isDelimiter:true});}for(i=0;i<U;++i){X=V[i];if(!X){continue;}else{if(!(X.isDelimiter||X.isMstrObj||X.isRecognized)){T+=X.v;}else{if(!I.isEmpty(T)){Y();a=W[W.length-1];}if(X.isDelimiter&&a&&(a.isDelimiter||O(a.v))){a.v+=X.v;N.copy({tp:2,lv:1,isDelimiter:true},a);if(a.oi){a.oi=null;}}else{if(!X.oi){X.tp=X.tp||2;X.lv=X.lv||1;}if(F.FIELDUNIT===X.tp){X.v=X.tn||X.v;}W.push(X);a=X;}}}}if(!I.isEmpty(T)){Y();}if(Z&&Z.tp!==-1){if(Z.v!==";"){W.push({v:";",tp:2,lv:1});}W.push({v:"",tp:-1,lv:4,sta:2});}return W;},getValidationXML:function D(){var U=this.getTokenStreamXML(),T=(this.tgtDs&&this.tgtDs.did)?DssRWManipulationUpdateOfflineTransaction:C,V="";if(T!=C&&!!this.offTxs.localCtlKey){V='<rwLocalTxXML nodekey="'+this.nodeKey+'" manipulationMethod="'+T+'" localCtlKey="'+this.offTxs.localCtlKey+'">'+U+"</rwLocalTxXML>";}return V;},isRemoved:function Q(){return !this.tgtDs;},getXML:function H(){var U=this.enablePlainText?this.getCSIPlainText():this.getTokenStreamXML(),T=this.getManipulationMethod(),V="";if(!this.offTxs.localCtlKey){this.offTxs.localCtlKey=mstrmojo.all.teModel.getNewCtlKey();}if(T!==C){V='<rwLocalTxXML nodekey="'+this.nodeKey+'" manipulationMethod="'+T+'" localCtlKey="'+this.offTxs.localCtlKey+'">'+U+"</rwLocalTxXML>";}return V;},getTokenStreamXML:function J(){var U=this.offTxs.tknstrm,V=U&&U.clauses,T="";if(this.tgtDs&&this.tgtDs.did){T=this.getClauseXML(V);T="<tknstrm>"+T+"</tknstrm>";}return T;},getCSIPlainText:function K(){var W={312:1,313:2,314:1,315:1,316:2,317:1,318:2,319:2},T=this.offTxs.tknstrm,Z=T&&T.clauses,Y=Z&&Z.length||0,b="",X=[],V,a;if(this.tgtDs&&this.tgtDs.did){for(V=0;V<Y;++V){X=X.concat(Z[V]);}a=X[X.length-1];if(a&&a.v!==";"){X.push({v:";"});}var U=function(c){return c.oi&&3===c.oi.t;};R.forEach(X,function(d){var e=d.tp&&W[d.tp],c=U(d);if(e===2){b+=" ";}if(c){b+="[";}b+=d.v;if(c){b+="]";}if(e>0||c){b+=" ";}});b="<fmu>"+b+"</fmu>";}return b;},getManipulationMethod:function G(){var U=this.offTxs,W=this.tgtDs,V=U&&U.tgtDsId,T=W&&W.did;if(!V&&T){return DssRWManipulationAddOfflineTransaction;}if(V&&T&&this.isDirty){return DssRWManipulationUpdateOfflineTransaction;}if(V&&!T){return DssRWManipulationRemoveOfflineTransaction;}return C;},getClauseXML:function B(Z){var X=[],T=Z.length,V,W,Y={items:true,v:true,tp:true,lv:true,oi:true,n:true,did:true,t:true,key:true,extp:true,exv:true,sc:true,sctt:true,desc:true,sta:true},U={getArrItemName:function(c,a,b){return"tkn";},isSerializable:function(c,b,a){return !!Y[c];},skipNull:true};for(W=0;W<T;++W){X=X.concat(Z[W]);}X=this._postprocessTokenStream(X);V=I.json2xml("uselessEnd",{items:X},U);return V.replace(/\<\/?uselessEnd[^\>]*\>/g,"");},dbClickReceiver:null,setReciever:function(T){if(T!==this.dbClickReceiver&&T instanceof mstrmojo.txEditor.CSIStatementTokenInput){this.dbClickReceiver=T;}},removeReceiver:function(T){if(this.dbClickReceiver===T){this.dbClickReceiver=null;}},sendData:function(T){if(this.dbClickReceiver&&this.dbClickReceiver.isActive()){this.dbClickReceiver.sendData(T);}},validateLocalTXN:function(U){var T=this;if(T.validting){return ;}T.validting=true;mstrmojo.all.mstrTE.set("saving",true);mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(){if(U){U();}mstrmojo.all.mstrTE.set("saving",false);},failure:function(V){var W=V.getResponseHeader("X-MSTR-TaskFailureMsg");T.set("validationError",W);mstrmojo.all.mstrTE.set("saving",false);}},{taskId:"validateLocalTransaction",msgID:T.messageID,rwLocalTransactionInfoXML:T.getXML(),isValidateLocalTXN:true});T.validting=false;},isDirtyState:function(){return !!this.isDirty;},clearDirtyFlags:function(){this.set("isDirty",false);},reset:function(){this.isDirty=false;var T=this.offTxs,U=this.tgtDs;if(T){T.tgtDsId=U&&U.did;T.tgtDsName=U&&U.n;if(!T.tgtDsId){delete T.localCtlKey;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.dom","mstrmojo.string","mstrmojo.css","mstrmojo.WidgetList","mstrmojo.WidgetListMapper","mstrmojo.range","mstrmojo.txEditor.CSIStatementToken","mstrmojo.txEditor.CommonComponent");mstrmojo.requiresDescs(1442);var S=mstrmojo.hash,W=mstrmojo.dom,M=mstrmojo.range,L=mstrmojo.string,X=mstrmojo.css,O=M.EDGE,a=mstrmojo.Enum_Keys,V=mstrmojo.txEditor.CSIStatementToken.isDelimiter,h=mstrmojo.txEditor.CSIStatementToken.isMstrObj,j=mstrmojo.txEditor.CSIStatementToken.mstrObj2Token;mstrmojo.txEditor.SpanListMapper=mstrmojo.provide("mstrmojo.txEditor.SpanListMapper",mstrmojo.mixin({itemWrapperPrefix:function(k){return'<span class="'+this.getWrapperCss(k)+'">';},itemWrapperPrefill:"&nbsp;",itemWrapperSuffix:"</span>",createWrapperNode:function I(k){var l=k.ownerDocument;return l.createElement("span");}},S.copy(mstrmojo.WidgetListMapper)));function Q(k){return !W.contains(this.editNode,k.startContainer,false,document.body);}function D(m){var l=(W.isIE&&!W.isIE9)?m.keyCode:m.charCode;return(l>0)?String.fromCharCode(l):null;}function e(){var m=this,l=m.editNode,k=S.clone(this.items);l.contentEditable=false;this.set("items",k);mstrmojo.warn(mstrmojo.desc(13728,"We do not support IME in local transaction editor."),null,{buttons:[{scriptClass:"mstrmojo.Button",text:mstrmojo.desc(1442),onclick:function(){l.contentEditable=true;}}],cssClass:"mstrmojo-TransactionEditor-Alert"});}mstrmojo.txEditor.CSIStatementTokenInput=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.txEditor.CSIStatementTokenInput",makeObservable:true,dropZone:true,cssClass:"mstrmojo-TransactionEditor-CSIStatementTokenInput",markupString:'<div id={@id} class="mstrmojo-TokenInputBox {@cssClass}" style="{@cssText}"><div class="mstrmojo-TokenInputBox-edit disabled" contenteditable="false" tabindex="1" spellcheck="false" mstrAttach:dragstart,focus,mouseup,keydown,keypress,keyup,contextmenu>{@itemsHtml}</div><textarea class = "mstrmojo-TokenInputBox-clipboard" onkeyup = "return mstrmojo.all.{@id}.handlepaste(event);"></textarea></div>',markupSlots:{editNode:function(){return this.domNode.firstChild;},itemsContainerNode:function(){return this.domNode.firstChild;},clipboardNode:function(){return this.domNode.lastChild;}},markupMethods:S.copy({onheightChange:function(){if(this.height){this.domNode.style.height=this.height+"px";}},onactiveChange:function(){this.editNode.contentEditable=(this.active?"true":"false");this.enabled=!!this.active;X.toggleClass(this.editNode,"disabled",!this.active);if(!this.active&&this.items&&this.items.length&&this.hasRendered){this.clearTokens();}}},S.copy(mstrmojo.WidgetList.prototype.markupMethods)),bindings:{active:"!!mstrmojo.all.offModel.tgtDs.did"},items:null,itemFunction:function F(m,k,l){if(m.did){m.isMstrObj=true;}return new mstrmojo.txEditor.CSIStatementToken({data:m});},listMapper:mstrmojo.txEditor.SpanListMapper,isDelimiter:V,isMstrObj:h,isRecognizedToken:function(k){return k.isDelimiter()||k.isMstrObj();},allowDrop:function(){return this.isActive();},isActive:function(){return this.active;},postBuildRendering:function Y(){this._super&&this._super();if(W.isFF){document.body.spellcheck=false;var l=this,k=function(){e.call(l);};W.attachEvent(l.domNode,"compositionstart",k,true);}},oncontextmenu:function U(k){var l=k.e;if(l){W.stopPropogation(window,l);W.preventDefault(window,l);}return false;},onfocus:function g(){mstrmojo.all.offModel.setReciever(this);},_delaySetCaretPos:function B(k,m){var l=this.editNode,n=this,o=function(){try{l.focus();l.focus();M.collapseOnNode(k,m);n._saveRangeInfo=M.getRangeInfo();}catch(p){}};window.setTimeout(o,0);},checkMergeTwoTokens:function R(o,m){if(o===m){return ;}if(o>m){o=[m,m=o][0];}var n=this.ctxtBuilder.itemWidgets,l=n[o],k=n[m];if((l&&!this.isRecognizedToken(l))&&(k&&!this.isRecognizedToken(k))){this.remove([o,m]);this.add([l.mergeTo(k)],o);M.collapseOnTextNode(n[o].domNode,l.length());}},widgetHandleDelete:function P(o){if(o.collapsed){var n,m,k,p=o.startOffset,l=this.ctxtBuilder.itemWidgets;if(Q.call(this,o)){M.collapseOnNode(this.editNode,false);return ;}n=M.getEdgeInfo(o.startContainer,o.startOffset);m=W.findWidget(o.startContainer);k=this.itemIndex(m.data);if(n===O.EDGE_END){k++;m=l[k];p=0;}if(!m){M.collapseOnNode(this.editNode,false);return ;}if(m.length()===1){this.remove(k);m=l[k];if(m){M.collapseOnNode(m.domNode,true);this.checkMergeTwoTokens(k-1,k);}else{M.collapseOnNode(this.editNode,false);}}else{m.spliceContent(p,1);M.collapseOnTextNode(m.domNode,p);}}else{this.widgetDeleteTokens(o);}},widgetHandleBackspace:function d(o){if(o.collapsed){var n,m,k,p=o.startOffset,l=this.ctxtBuilder.itemWidgets;if(Q.call(this,o)){if(p>0&&W.isFF){m=l[this.items.length-1];M.collapseOnNode(m.domNode,false);o=M.getRangeInfo();}else{M.collapseOnNode(this.editNode,true);return ;}}n=M.getEdgeInfo(o.startContainer,o.startOffset);m=W.findWidget(o.startContainer);k=this.itemIndex(m.data);if(n===O.EDGE_BEGIN){k--;m=l[k];p=m&&m.length();}if(!m){M.collapseOnNode(this.editNode,true);return ;}if(m.length()===1){this.remove(k);m=l[k-1];if(m){M.collapseOnNode(m.domNode,false);this.checkMergeTwoTokens(k-1,k);}else{M.collapseOnNode(this.editNode,true);}}else{m.spliceContent(p-1,1);M.collapseOnTextNode(m.domNode,p-1);this.checkMergeTwoTokens(k,k+1);this.checkMergeTwoTokens(k-1,k);}}else{this.widgetDeleteTokens(o);}},widgetDeleteTokens:function N(t){var x=function(z){var y=z;do{if(y.nodeType===3){return y;}}while(y=y.firstChild);return z;},l=t.startOffset,k=t.endOffset,w=W.findWidget(W.isIE?x(t.startContainer):t.startContainer),u=W.findWidget(W.isIE?x(t.endContainer):t.endContainer),p=this.itemIndex(w.data),n=this.itemIndex(u.data),r=M.getEdgeInfo(t.startContainer,l),v=M.getEdgeInfo(t.endContainer,k);if(w===u){if((r===O.EDGE_BEGIN)&&(v===O.EDGE_END)){this.remove(p);u=this.ctxtBuilder.itemWidgets[p-1];if(u){M.collapseOnNode(u.domNode,false);}else{M.collapseOnNode(this.editNode,true);}}else{w.spliceContent(l,k-l);M.collapseOnNode(u.domNode,l);}}else{var s=(r===O.EDGE_BEGIN?p:p+1),m=(v===O.EDGE_END?n:n-1),q=[],o;for(o=s;o<=m;++o){q.push(o);}this.remove(q);if(r===O.EDGE_MIDDLE){w.spliceContent(l);}if(v===O.EDGE_MIDDLE){u.spliceContent(0,k);}if(r===O.EDGE_BEGIN){p=p-1;w=this.ctxtBuilder.itemWidgets[p];}M.collapseOnNode(w?w.domNode:this.editNode,false);this.checkMergeTwoTokens(p,p+1);}this.editNode.focus();},widgetHandleInput:function C(p,q){if(!p.collapsed){this.widgetDeleteTokens(p);p=M.getRangeInfo();}var n=this.ctxtBuilder.itemWidgets;if(Q.call(this,p)){this.add([{v:q,isDelimiter:this.isDelimiter(q)}],0);r=n[0];M.collapseOnNode(r.domNode,false);return ;}var m=M.getEdgeInfo(p.startContainer,p.startOffset),r=W.findWidget(p.startContainer),s=this.itemIndex(r.data),u={v:q,isDelimiter:this.isDelimiter(q)},l,k;if(this.isDelimiter(q)||this.isMstrObj(u)){if(m===O.EDGE_MIDDLE){var o=r.split2Tokens(p.startOffset);this.remove(s);this.add([o[0],u,o[1]],s);this.checkMergeTwoTokens(s-1,s);this.checkMergeTwoTokens(s+2,s+3);++s;}else{s=(m===O.EDGE_BEGIN)?s:s+1;this.add([u],s);}r=n[s];M.collapseOnNode(r.domNode,false);}else{l=p.startOffset;if(this.isRecognizedToken(r)&&m!==O.EDGE_MIDDLE){k=n[(m===O.EDGE_BEGIN)?s-1:s+1];if(k&&!this.isRecognizedToken(k)){r=k;l=(m===O.EDGE_BEGIN)?r.length():0;}}if(!this.isRecognizedToken(r)||m===O.EDGE_MIDDLE){r.spliceContent(l,0,q);M.collapseOnTextNode(r.domNode,l+1);}else{this.add([u],(m===O.EDGE_BEGIN)?s:s+1);r=n[(m===O.EDGE_BEGIN)?s:s+1];M.collapseOnNode(r.domNode,false);}}},insertTokens:function A(q){var n=this._saveRangeInfo||M.getRangeInfo();if(!n||Q.call(this,n)){this.add(q);var l=this.ctxtBuilder.itemWidgets,m=l.length;this._delaySetCaretPos(m>0?l[m-1].domNode:this.editNode,false);}else{if(!n.collapsed){this.widgetDeleteTokens(n);n=M.getRangeInfo();}var k=M.getEdgeInfo(n.startContainer,n.startOffset),r=W.findWidget(n.startContainer),s=this.itemIndex(r.data);if(k===O.EDGE_MIDDLE){var o=r.split2Tokens(n.startOffset);this.remove(s);q.unshift(o[0]);q.push(o[1]);this.add(q,s);}else{s=(k===O.EDGE_BEGIN?s:s+1);this.add(q,s);}if(k===O.EDGE_MIDDLE){s+=1;}r=this.ctxtBuilder.itemWidgets[s];this._delaySetCaretPos(r.domNode,false);}this.raiseChangeEvent({type:"insert"});var p=this;window.setTimeout(function(){p._saveRangeInfo=M.getRangeInfo();},50);},clearTokens:function c(k){this.set("items",k||[]);this._saveRangeInfo=null;this._delaySetCaretPos(this.editNode,false);this.raiseChangeEvent({type:"clear"});},onkeydown:function H(l){var q=l.e||window.event,m=q.keyCode||q.charCode,o=false,p=M.getRangeInfo();switch(m){case a.DELETE:try{this.widgetHandleDelete(p);this.raiseChangeEvent({type:"delete"});}catch(n){}o=true;break;case a.BACKSPACE:try{this.widgetHandleBackspace(p);this.raiseChangeEvent({type:"backspace"});}catch(n){}o=true;break;case 86:if(q.ctrlKey){this._saveRangeInfo=M.getRangeInfo();if(!this._saveRangeInfo.collapsed){this.widgetHandleDelete(this._saveRangeInfo);this._saveRangeInfo=M.getRangeInfo(this.editNode,this._saveRangeInfo);}this.clipboardNode.focus();o=false;}break;case 229:e.call(this);o=true;break;default:}W.stopPropogation(window,q);if(o){W.preventDefault(window,q);return false;}else{return true;}},onkeyup:function T(k){this._saveRangeInfo=M.getRangeInfo();},onkeypress:function E(k){var m=k.e||window.event,n=D(m);if(n&&!(n==="c"&&m.ctrlKey)){try{this.widgetHandleInput(M.getRangeInfo(),n);this.raiseChangeEvent({type:"input"});}catch(l){}W.stopPropogation(window,m);W.preventDefault(window,m);return false;}return true;},handlepaste:function f(n){var r=this.clipboardNode.value;this.clipboardNode.value="";var o=[],q=this,m=r&&r.length,l,s="",p,k=function(u){if(!L.isEmpty(s)){if(u){o.push({v:s});s="";}else{var t={v:s};if(q.isMstrObj(t)){o.push(t);s="";}}}};if(m>0){for(l=0;l<m;++l){p=r.charAt(l);if(this.isDelimiter(p)){k(true);o.push({v:p,isDelimiter:true});}else{s=s+p;k(false);}}k(true);this.insertTokens(o);}},onmouseup:function K(k){var l=M.getRangeInfo();if(!Q.call(this,l)){this._saveRangeInfo=l;}},ondragstart:function b(k){var l=k.e;if(l){W.stopPropogation(window,l);W.preventDefault(window,l);}return false;},ondragenter:mstrmojo.emptyFn,ondragover:mstrmojo.emptyFn,insertMstrToken:function J(k){if(k){var l=j(k);this.insertTokens([l]);}},ondrop:function Z(k){var l=k.src.data&&k.src.data.item;this.insertMstrToken(l);},sendData:function G(l){var k=l&&l.item;this.insertMstrToken(k);},raiseChangeEvent:function(k){k.name="clauseModify";mstrmojo.all.offModel.set("isDirty",true);this.raiseEvent(k);}});}());(function(){mstrmojo.requiresCls("mstrmojo.txEditor.CommonComponent","mstrmojo.txEditor.Container","mstrmojo.txEditor.ManualPanel");mstrmojo.requiresDescs(527,3877,8255);var A=mstrmojo.txEditor.CommonComponent;mstrmojo.txEditor.TogglePropertiesPanel=mstrmojo.declare(mstrmojo.txEditor.Container,null,{scriptClass:"mstrmojo.txEditor.TogglePropertiesPanel",children:[A.createRequiredCheckBox(),{scriptClass:"mstrmojo.txEditor.ManualPanel",alias:"manual",rowHeaders:[mstrmojo.desc(527),mstrmojo.desc(3877)],colHeader:mstrmojo.desc(8255)+":"}]});}());(function(){mstrmojo.requiresCls("mstrmojo.publisher","mstrmojo.Widget","mstrmojo.fx","mstrmojo.locales","mstrmojo.expr","mstrmojo.Button","mstrmojo.date","mstrmojo.ui.editors.controls.Stepper","mstrmojo.css");var AB=function(){return mstrmojo.locales.datetime;},j=mstrmojo.dom,h=mstrmojo.expr,y=h.DTP,Z=mstrmojo.date,J=mstrmojo.publisher,e=mstrmojo.hash,l=mstrmojo.array,N=l.removeIndices,k=mstrmojo.css;var AA=0,C=3,M=4,o=5,Q=6;var AC="month",c="day",V="year",X="hour",AF="minute",v="second";var G='<table border="0" cellpadding="0" cellspacing="0">',u="</table>";function O(AG){return'<table border="0" cellpadding="0" cellspacing="0" style="'+AG+'">';}function H(AJ,AG,AH){var AI=Z.getFirstDateOfMonth(AJ,AG);return(AI.getDay()-AH+8)%7;}function m(AJ){var AI=Z.parseDateAndOrTime(AJ),AK,AG,AH;if(AI){AH={};AK=AI.date;AG=AI.time;if(AK){e.copy(AK,AH);}if(AG){e.copy(AG,AH);}}return AH;}function F(AH,AK,AJ,AI,AG){var AL=Z.formatDateInfo({day:AH,month:AK,year:AJ},AB().DATEOUTPUTFORMAT);return Z.inDateTimeRange(AL,AI,AG)===0;}function T(AK,AJ,AI){var AH=AK.decreaseButton,AG=AK.increaseButton,AL="mstrmojo-Calendar";AH.className=(AL+"-decrease");AG.className=(AL+"-increase");}function W(AK,AH,AM,AJ){var AI=0,AG=AK.length,AL;for(AI=0;AI<AG;AI++){AL=AK[AI];if(AL&&AL.day===AH&&AL.month===AM&&AL.year===AJ){return AI;}}return -1;}function p(AG,AI,AH){var AJ=new Date();return(AJ.getFullYear()===AH)&&((AJ.getMonth()+1)===AI)&&(AJ.getDate()===AG);}function t(AN,AO){var AS=AN.dayView.getElementsByTagName("div"),AQ=AN.selectedDates,AI=AQ[AO],AR=AN.browseYear,AH=AN.browseMonth,AK=Z.getDaysOfMonth(AR,AH),AJ=Z.getPreMonth(AR,AH),AM=Z.getDaysOfMonth(AJ.y,AJ.m),AG=H(AR,AH,AN.firstDayOfWeek),AL=((AI.month===AH)?AI.day+AG-1:(AI.month>AH?AI.day+AG+AK-1:AG-AM+AI.day-1)),AP=AS[AL];if(AP){b(AP,AN,false);}N(AQ,AO,1);}function B(AG){var AH=AG.selectedDates;while(AH.length){t(AG,0);}}function AE(AI,AG){var AH=K(AI,AG),AJ=AI.selectedDates;AJ.push({day:AH.d,month:AH.m,year:AH.y});b(AG,AI,true);}function n(AI,AJ){if(!AJ||!AJ.length){return null;}var AL=AI.selectedDates;for(var AH=0,AG=AJ.length;AH<AG;AH++){var AK=AJ[AH],AM=q(AI,AK);AL.push({day:AK.d,month:AK.m,year:AK.y});if(AM){b(AM,AI,true);}}}function q(AO,AQ){var AS=AO.dayView.getElementsByTagName("div"),AJ=AS.length,AR=AO.browseYear,AH=AO.browseMonth,AK=Z.getPreMonth(AR,AH),AL=Z.getDaysOfMonth(AK.y,AK.m),AW=Z.getNextMonth(AR,AH),AI=Z.getDaysOfMonth(AR,AH),AG=H(AR,AH,AO.firstDayOfWeek);var AM=AG>0?{y:AK.y,m:AK.m,d:AS[0].innerHTML}:{y:AR,m:AH,d:AS[0].innerHTML},AU=(AS.length-AI-AG)>0?{y:AW.y,m:AW.m,d:AS[AJ-1].innerHTML}:{y:AR,m:AH,d:AS[AJ-1].innerHTML},AV=S(AM,AQ),AN=S(AQ,AU),AP=null;if(AV>=0&&AN>=0){var AT=0;if(AV<AG){AT=-1;}if(AN<(AS.length-AG-AI)){AT=1;}AP=((AT===0)?AQ.d+AG-1:(AT===1?AQ.d+AG+AI-1:AG-AL+AQ.d-1));return AS[AP];}else{return null;}}function f(AO,AG){var AQ=AO.selectedDates,AI=AQ.length;if(!AI){return null;}var AH=AQ[AI-1],AJ=K(AO,AG),AT=S({y:AH.year,m:AH.month,d:AH.day},AJ),AU=[],AL=AT>0,AR=Math.abs(AT);for(var AN=0;AN<=AR;AN++){var AM=new Date(AJ.y,AJ.m-1,AJ.d);AM.setDate(AM.getDate()+(AL?-AN:AN));var AS=AM.getFullYear(),AK=AM.getMonth()+1,AP=AM.getDate();if(AO.isDateDisabled(AP,AK,AS,AO.min,AO.max)&&!AO.canSelectDisabledDate){continue;}AU.push({y:AS,m:AK,d:AP});}return AU;}function S(AJ,AI){var AG=new Date(AJ.y,AJ.m-1,AJ.d),AH=new Date(AI.y,AI.m-1,AI.d);return(AH-AG)/1000/3600/24;}function K(AI,AG){var AJ=AI.browseYear,AL=AI.browseMonth,AK=parseInt(AG.innerHTML,10),AM=parseInt(AG.getAttribute("m"),10),AH=null;AH=(AM===0)?{y:AJ,m:AL}:(AM===1?Z.getNextMonth(AJ,AL):Z.getPreMonth(AJ,AL));AH.d=AK;return AH;}function g(AG){var AI=AG.selectedDates,AH=AI.length;return(AH===0)?null:AI[AH-1];}function b(AH,AI,AG){var AJ=AI.selectedColor;k.toggleClass(AH,["selected",AI.selectedCssStyle],AG);AH.parentNode.style.backgroundColor=AG?AJ:"";AH.style.backgroundColor=AG?AJ:"";}function x(AG){return AG.selectedColor?('style="background-color:'+AG.selectedColor+';"'):"";}function P(AG){return(AG.tagName.toLowerCase()==="td")?AG.firstChild:AG;}function R(AH,AI){var AJ=Z.getDateJson(AH),AG=Z.formatDateInfo(AJ,mstrmojo.locales.datetime.DATEOUTPUTFORMAT);if(AI===y.TIMESTAMP){AG+=" "+Z.formatTimeInfo(this.timeVal,mstrmojo.locales.datetime.TIMEOUTPUTFORMAT);}return AG;}function r(AL,AI){var AG=this.advancedValues,AH=null;AG.set(AL,AI);switch(AG.baseDate){case C:AH=new Date();break;case M:break;case o:break;case Q:break;default:return ;}var AJ=AG.monthsToAdjust;if(AJ>0){AH.setMonth(AH.getMonth()+(AG.toAddMonths?AJ:-AJ));}var AK=AG.daysToAdjust;if(AK>0){AH.setDate(AH.getDate()+(AG.toAddDays?AK:-AK));}this.set("value",R.call(this,AH,this.dtp));}function U(){var AG=this.advancedValues,AH=["isDyn"];if(AG.baseDate===AA){return null;}AH.push(AG.baseDate);AH.push(AG.toAddDays?AG.daysToAdjust:-AG.daysToAdjust);AH.push(AG.toAddMonths?AG.monthsToAdjust:-AG.monthsToAdjust);AH.push(0);AH.push(0);AH.push(0);AH.push(0);AH.push(this.value);AH.push(this.timeVal.hour);AH.push(this.timeVal.min);AH.push(this.timeVal.sec);return AH.join("::");}function AD(AG){if(AG.value!==undefined&&this.hasRendered){this.updateSelectedDate();}}function I(AI,AH){var AJ=this,AG=function(AK){return AK[0].toUpperCase()+AK.substring(1);};return{scriptClass:"mstrmojo.HBox",cssClass:"dateAdjustBox",alias:AI+"AdjustBox",children:[{scriptClass:"mstrmojo.ui.Pulldown",selectedIndex:AH>0?0:1,onitemSelected:function(AL,AK){r.call(AJ,"toAdd"+AG(AI),AK===0);},items:[{did:0,n:mstrmojo.desc(9424,"plus")},{did:1,n:mstrmojo.desc(9425,"minus")}]},{scriptClass:"mstrmojo.ui.editors.controls.Stepper",width:null,height:null,provider:new mstrmojo.NumStepperContentProvider({item:{interval:1,min:0,value:Math.abs(AH)},onTraverse:function(){r.call(AJ,AI+"ToAdjust",this.curVal);}})},{scriptClass:"mstrmojo.Label",text:AI==="days"?mstrmojo.desc(707,"Days"):mstrmojo.desc(710,"Months")}]};}function Y(){this.buttonsNode.style.display=(this.wasAdvanced||this.changeValueOnOK||(this.showAdvanced&&this.isAdvanced)?"block":"none");this.advancedNode.style.display=this.showAdvanced?"block":"none";}mstrmojo.Calendar=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Calendar",cssPrefix:"",browseMonth:null,browseYear:null,yearRangStart:null,selectedDates:null,selectedColor:"",isMultiSelect:false,hilightToday:false,yearViewSize:5,cssTextDay:"",cssTextMonth:"",cssTextYear:"",cssTextWeekDay:"",cssTextHeader:"",cssTextMonthYearLabel:"",forceNonEmptySelection:false,showCurMonthDatesOnly:false,currentView:c,duration:600,timeDelimiter:":",dtp:y.DATE,value:"",firstDayOfWeek:1,changeValueOnOK:false,wasAdvanced:false,showAdvanced:false,isAdvanced:false,dynDateValue:null,canSelectDisabledDate:false,monthNames:function(AG){return AB().MONTHNAME_SHORT[AG];},dayNames:function(AG){return AB().dayShortNames[AG];},min:null,max:null,supportedViews:{day:true,month:true,year:true,hour:true,minute:true,second:true},sDirMatrix:{day:{month:"down",year:"down",hour:"up",minute:"up",second:"up"},month:{day:"up",year:"left",hour:"up",minute:"up",second:"up"},year:{day:"up",month:"right",hour:"up",minute:"up",second:"up"},hour:{day:"down",month:"down",year:"down",minute:"left",second:"left"},minute:{day:"down",month:"down",year:"down",hour:"right",second:"left"},second:{day:"down",month:"down",year:"down",hour:"right",minute:"right"}},markupString:'<div id="{@id}" class="{@cssPrefix} mstrmojo-Calendar {@cssClass}" style="{@cssText}" mstrAttach:mousedown,mouseup,mouseover,mouseout><div class="mstrmojo-Calendar-header" style="{@cssTextHeader}"><div class="mstrmojo-Calendar-decrease"></div><div class="mstrmojo-Calendar-increase"></div><div class="mstrmojo-Calendar-title"><span class="mstrmojo-Calendar-monthLabel" style="{@cssTextMonthYearLabel}">{@browseMonth}</span><span class="mstrmojo-Calendar-yearLabel" style="{@cssTextMonthYearLabel}">{@browseYear}</span></div></div><div class="mstrmojo-Calendar-body" style="{@cssTextBody}"><div class="mstrmojo-Calendar-dayView"></div></div><div class="mstrmojo-Calendar-timePart"><span class="mstrmojo-Calendar-hourLabel">00</span><span class="mstrmojo-Calendar-timeDelimiter">{@timeDelimiter}</span><span class="mstrmojo-Calendar-minuteLabel">00</span><span class="mstrmojo-Calendar-timeDelimiter">{@timeDelimiter}</span><span class="mstrmojo-Calendar-secondLabel">00</span><span class="mstrmojo-Calendar-AMPMLabel">AM</span></div><div class="mstrmojo-Calendar-advanced"></div><div class="mstrmojo-Calendar-buttons cf"></div></div>',markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onbrowseMonthChange:function(){this.monthLabel.innerHTML=this.monthNames(this.browseMonth-1);},onbrowseYearChange:function(){this.yearLabel.innerHTML=this.browseYear;},ondtpChange:function(){this.timePart.style.display=(this.dtp===y.TIMESTAMP||this.dtp===y.TIME)?"block":"none";this.advancedNode.style.display=this.showAdvanced?"block":"none";},onvalueChange:function(){if(this.lastValue===undefined||this.value!==this.lastValue){this.updateSelectedDate();}},onchangeValueOnOKChange:Y,onisAdvancedChange:Y},markupSlots:{monthLabel:function(){return this.domNode.firstChild.lastChild.firstChild;},yearLabel:function(){return this.domNode.firstChild.lastChild.lastChild;},decreaseButton:function(){return this.domNode.firstChild.firstChild;},increaseButton:function(){return this.domNode.firstChild.childNodes[1];},bodyContainer:function(){return this.domNode.childNodes[1];},dayView:function(){return this.domNode.childNodes[1].firstChild;},monthView:function(){return this.domNode.childNodes[1].firstChild;},yearView:function(){return this.domNode.childNodes[1].firstChild;},hourView:function(){return this.domNode.childNodes[1].firstChild;},minuteView:function(){return this.domNode.childNodes[1].firstChild;},secondView:function(){return this.domNode.childNodes[1].firstChild;},timePart:function(){return this.domNode.childNodes[2];},hourLabel:function(){return this.domNode.childNodes[2].firstChild;},minuteLabel:function(){return this.domNode.childNodes[2].childNodes[2];},secondLabel:function(){return this.domNode.childNodes[2].childNodes[4];},AMPMLabel:function(){return this.domNode.childNodes[2].childNodes[5];},advancedNode:function(){return this.domNode.childNodes[3];},buttonsNode:function(){return this.domNode.childNodes[4];}},init:function z(AG){if(this._super){this._super(AG);}if(this.duration<1){this.duration=1;}if(!this.selectedDates){this.selectedDates=[];}this.timeVal={hour:0,min:0,sec:0};},ondynDateValueChange:function s(AG){if(AG.value!==undefined&&this.hasRendered){this.updateSelectedDate();this.buildChildren();}},onminChange:AD,onmaxChange:AD,buildChildren:function a(){var AM=this;if(this.showAdvanced){var AJ=this.dynDateValue,AI=this.advancedValues||this.addDisposable(new mstrmojo.Model({})),AP=AJ&&AJ.split("::")||[],AL=AP[1]||AA,AH=AP[2]||0,AQ=AP[3]||0,AN=function AN(){if(AM.isAdvanced){AM.wasAdvanced=true;AM.changeValueOnOK=true;}AM.set("isAdvanced",!AM.isAdvanced);mstrmojo.css.toggleClass(AM.markupSlots.dayView.call(AM),["ddSelected"],AM.isAdvanced);r.call(AM,"baseDate",AM.isAdvanced?3:0);if(AM.parent&&AM.parent.nudge&&AM.isAdvanced){AM.parent.nudge();}};this.advancedValues=AI;AI.baseDate=parseInt(AL);AI.toAddDays=AH>=0;AI.daysToAdjust=Math.abs(AH);AI.toAddMonths=AQ>=0;AI.monthsToAdjust=Math.abs(AQ);this.isAdvanced=!!this.dynDateValue;if(this.domNode){mstrmojo.css.toggleClass(this.markupSlots.dayView.call(this),["ddSelected"],this.isAdvanced);}if(this.isAdvanced&&this.value){var AG=m(this.value),AK=this.timeVal;if(AG&&AG.hour!==undefined){AK.hour=AG.hour;AK.min=AG.min;AK.sec=AG.sec;}}r.call(AM,"baseDate",this.isAdvanced?3:0);this.destroyChildren(false);this.addChildren([{scriptClass:"mstrmojo.HBox",alias:"checkLabel",slot:"advancedNode",children:[{scriptClass:"mstrmojo.ui.Checkbox",alias:"checkbox",checked:!!AM.isAdvanced,oncheckedChange:AN},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13844,"Dynamic Date"),onclick:function AO(){this.parent.checkbox.onclick();}}]},{scriptClass:"mstrmojo.Box",alias:"advancedPanel",slot:"advancedNode",bindings:{visible:"this.parent.isAdvanced"},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(9423,"Today"),cssClass:"tdLabel"},I.call(this,"days",AH),I.call(this,"months",AQ)]},]);}else{this.destroyChildren(false);}this.addChildren([mstrmojo.Button.newWebButton(mstrmojo.desc(2140,"Cancel"),function(){AM.parent.close();},false,{slot:"buttonsNode"}),mstrmojo.Button.newWebButton(mstrmojo.desc(1442,"OK"),function(){if(AM.changeValueOnOK||AM.isAdvanced||AM.wasAdvanced){AM.updateValue(true);}},true,{slot:"buttonsNode"})]);},preBuildRendering:function A(){this.buildChildren();return this._super();},getSelectedDatesAsString:function E(AH){var AG=[];l.forEach(this.selectedDates,function(AI){AG.push(Z.formatDateInfo(AI,AH||AB().DATEOUTPUTFORMAT));});return AG;},updateSelectedDate:function L(AL){var AG=this.value,AI=this.timeVal,AK=this.selectedDates,AJ,AM=function(AO,AN){AO.set("browseYear",AN.year);AO.set("browseMonth",AN.month);AO.updateTimePart();AO.updateView(AO.currentView);if(!AO.changeValueOnOK&&AO.hasRendered&&AO.closeOnValueChange!=true){AO.updateValue();}};if(this.wasAdvanced){this.wasAdvanced=false;this.changeValueOnOK=false;}if(AG){AJ=m(AG);if(AJ&&AJ.hour!==undefined){AI.hour=AJ.hour;AI.min=AJ.min;AI.sec=AJ.sec;if(this.dtp===y.TIME&&(AJ.year===undefined||AJ.month===undefined||AJ.day===undefined)){var AH=Z.getDateJson(new Date());AJ.year=AH.year;AJ.month=AH.month;AJ.day=AH.day;}}}if((AJ&&!this.isMultiSelect)||AL){B(this);}if(AK.length===0){if(!AJ){if(this.parent.opener&&this.parent.opener.defaultDate){AJ=m(this.parent.opener.defaultDate);}else{AJ=Z.getDateJson(new Date());}}if(!this.canSelectDisabledDate&&this.isDateDisabled(AJ.day,AJ.month,AJ.year,this.min,this.max)){if(this.min&&Z.compareDate(AJ,this.min)<0){AJ=m(this.min);}else{if(this.max&&Z.compareDate(AJ,this.max)>0){AJ=m(this.max);}}}AK.push(AJ);AM(this,AJ);}else{AJ=AK[0];if(this.value!==null){AM(this,AJ);}}},updateValue:function d(AG){var AI=g(this),AH="";if(AI){AH=Z.formatDateInfo(AI,AB().DATEOUTPUTFORMAT);if(this.dtp!==y.DATE){var AJ=Z.formatTimeInfo(this.timeVal,AB().TIMEOUTPUTFORMAT);if(this.dtp===y.TIME){AH=AJ;}else{AH+=" "+AJ;}}}this.lastValue=AH;this.set("value",AH);if(this.showAdvanced){this.set("dynDateValue",AG?U.call(this):null);}if(this.onValueUpdate){this.onValueUpdate();}},updateTimePart:function w(){var AH=this.timeVal,AG=AH.hour||0,AI=(AG%12===0)?12:(AG%12);this.hourLabel.innerHTML=AI;this.minuteLabel.innerHTML=Z.formatInteger(AH.min||0,2);this.secondLabel.innerHTML=Z.formatInteger(AH.sec||0,2);this.AMPMLabel.innerHTML=AG<12?" "+AB().AM_NAME:" "+AB().PM_NAME;},premousedown:function(AG){var AI=AG.e,AH=j.eventTarget(AG.hWin,AI);if(AH===this.decreaseButton||AH===this.increaseButton){if(j.isFF){j.stopPropogation(window,AI);}return true;}else{return this.processEvent(AH,AI);}},premouseup:function(AG){var AI=AG.e;if(AI.ctrlKey||AI.shiftKey){j.clearBrowserHighlights();}var AH=j.eventTarget(AG.hWin,AI);if(AH===this.decreaseButton&&!AH.disabled){this.decrease();return true;}if(AH===this.increaseButton&&!AH.disabled){this.increase();return true;}},processEvent:function(AR,AY){var AJ=this.currentView,AK=this.selectedDates,AO,AT,AZ,AG,AQ;if(AR===this.monthLabel){if(AJ!==AC){this.switchViewTo(AC);}return true;}if(AR===this.yearLabel){if(AJ!==V){this.adjustYearStart();this.switchViewTo(V);return true;}}if(AR===this.hourLabel){if(AJ!==X){this.switchViewTo(X);}return true;}if(AR===this.minuteLabel){if(AJ!==AF){this.switchViewTo(AF);}return true;}if(AR===this.secondLabel){if(AJ!==v){this.switchViewTo(v);}return true;}if(AR===this.AMPMLabel){if(AJ!==X){this.switchViewTo(X);}return true;}if(AJ===X){var AM=AR.getAttribute("h");AQ=parseInt(AR.innerHTML,10);if(!isNaN(AM)&&!isNaN(AQ)){AM=parseInt(AM,10);this.timeVal.hour=AQ%12+AM*12;this.updateTimePart();this.switchViewTo(c);if(!this.changeValueOnOK){this.updateValue();}}return true;}if(AJ===AF){AQ=parseInt(AR.innerHTML,10);if(!isNaN(AQ)){this.timeVal.min=AQ;this.updateTimePart();this.switchViewTo(c);if(!this.changeValueOnOK){this.updateValue();}}return true;}if(AJ===v){AQ=parseInt(AR.innerHTML,10);if(!isNaN(AQ)){this.timeVal.sec=AQ;this.updateTimePart();this.switchViewTo(c);if(!this.changeValueOnOK){this.updateValue();}}return true;}if(AJ===c){var AX=this.browseYear,AH=this.browseMonth,AI;AR=P(AR);AZ=parseInt(AR.innerHTML,10);AG=parseInt(AR.getAttribute("m"),10);if(!isNaN(AZ)&&!isNaN(AG)){AI=(AG===0)?{y:AX,m:AH}:(AG===1?Z.getNextMonth(AX,AH):Z.getPreMonth(AX,AH));if((!this.canSelectDisabledDate&&this.isDateDisabled(AZ,AI.m,AI.y,this.min,this.max))||AY.button===2){return true;}if(this.isAdvanced){return true;}var AU=W(AK,AZ,AH,AX),AS=AK.length>1,AP=this.forceNonEmptySelection,AV=this.isMultiSelect,AN=AV&&AY.ctrlKey,AW=AV&&AY.shiftKey,AL=null;if(AW){AL=f(this,AR);B(this);n(this,AL);}else{if(AN){if(AU===-1){AE(this,AR);}else{if(!AP||AS){t(this,AU);}}}else{B(this);if(AS||AU===-1||AP){AE(this,AR);}}}if(this.onselect||J.hasSubs(this.id,"select")){this.raiseEvent({name:"select",value:this.selectedDates});}if(AG===1){this.increase();}else{if(AG===-1){this.decrease();}}if(!this.changeValueOnOK){this.updateValue();}else{if(this.showAdvanced){this.checkLabel.checkbox.set("checked",false);r.call(this,"baseDate",0);}}}return true;}if(AJ===AC){AR=P(AR);AT=parseInt(AR.getAttribute("m"),10);if(!isNaN(AT)){this.set("browseMonth",AT+1);this.switchViewTo(c);}return true;}if(AJ===V){AR=P(AR);AO=parseInt(AR.innerHTML,10);if(!isNaN(AO)){this.set("browseYear",AO);this.switchViewTo(c);}return true;}return true;},decrease:function(){var AI=this.currentView,AL=AI,AK=this.browseYear,AG=this.browseMonth,AH=this.yearRangStart,AJ;switch(AI){case c:AJ=Z.getPreMonth(AK,AG);this.set("browseMonth",AJ.m);this.set("browseYear",AJ.y);break;case AC:this.set("browseYear",AK-1);break;case V:this.yearRangStart=AH-this.yearViewSize*this.yearViewSize;break;case X:AL=v;break;case AF:AL=X;break;case v:AL=AF;break;}this.switchViewTo(AL,"right");},increase:function(){var AI=this.currentView,AL=AI,AK=this.browseYear,AG=this.browseMonth,AH=this.yearRangStart,AJ;switch(AI){case c:AJ=Z.getNextMonth(AK,AG);this.set("browseMonth",AJ.m);this.set("browseYear",AJ.y);break;case AC:this.set("browseYear",AK+1);break;case V:this.yearRangStart=AH+this.yearViewSize*this.yearViewSize;break;case X:AL=AF;break;case AF:AL=v;break;case v:AL=X;break;}this.switchViewTo(AL,"left");},updateView:function(AG){var AH=this[AG+"ViewHTML"]();this[AG+"View"].innerHTML=AH;},adjustYearStart:function(){this.yearRangStart=this.browseYear-10-this.browseYear%5;},switchViewTo:function(AH,AJ){var AN="mstrmojo-Calendar-"+AH+"View",AM=document.createElement("div"),AG=this[this.currentView+"View"],AK=AH+"ViewHTML",AL=this[this.currentView+"Label"],AI=this[AH+"Label"];if(!this.supportedViews[AH]){return ;}if(!AJ){AJ=this.sDirMatrix[this.currentView][AH];}AM.className=AN;AM.innerHTML=this[AK]();this.currentView=AH;this[AH+"View"]=AM;mstrmojo.css.toggleClass(AM,["ddSelected"],this.isAdvanced);this._slideIntoView(AG,AM,AJ);},_slideIntoView:function(AK,AO,AI){var AG=this.bodyContainer,AM=(AI==="left"||AI==="right")?AK.offsetWidth:AK.offsetHeight,AH=(AI==="left"||AI==="right")?"left":"top",AN=(AI==="left"||AI==="up")?AM:-AM,AL=new mstrmojo.fx.AnimateProp({props:{},duration:this.duration,interval:this.duration/10,target:AK,onEnd:function(){AG.removeChild(AK);}}),AJ=new mstrmojo.fx.AnimateProp({props:{},duration:this.duration,interval:this.duration/10,target:AO});AO.style[AH]=AN+"px";AG.appendChild(AO);AL.props[AH]={start:0,stop:-AN,suffix:"px"};AJ.props[AH]={start:AN,stop:0,suffix:"px"};AL.play();AJ.play();},dayViewHTML:function(){var AL=this.browseYear,AO=this.browseMonth,AT=Z.getDaysOfMonth(AL,AO),AX=Z.getPreMonth(AL,AO),AI=Z.getDaysOfMonth(AX.y,AX.m),AH=Z.getNextMonth(AL,AO),AP=H(AL,AO,this.firstDayOfWeek),AM=[],AJ=x(this),AZ=0,AG=this.selectedDates,AR=this.min,AV=this.max,Aa,AS,AW,AU,AY=this.showCurMonthDatesOnly?'style="visibility:hidden;"':"";T(this,{d:AI,m:AX.m,y:AX.y},{d:1,m:AH.m,y:AH.y});AM.push(O(this.cssTextDay));AM.push(this._dayViewTHead());AM.push("<tr>");for(AW=0;AW<AP;AW++){Aa=AI-AP+AW+1;AS=this.isDateDisabled(Aa,AX.m,AX.y,AR,AV)?"disabled":"";AM.push("<td "+AY+'><div class="mstrmojo-Calendar-day-pre '+AS+'" m="-1">');AM.push(Aa);AM.push("</div></td>");AZ++;}for(AW=0;AW<AT;AW++){Aa=AW+1;AS=this.isDateDisabled(Aa,AO,AL,AR,AV)?" disabled":"";var AK=p(Aa,AO,AL),AN=AK?" today":"",AQ=W(AG,Aa,AO,AL)!==-1;AN=(this.hilightToday&&AK)?" hilightToday":AN;AM.push("<td "+(AK?('class="'+AN+'" '):" ")+(AQ?AJ:"")+'><div class="mstrmojo-Calendar-day-cur'+(AQ?(" selected "):"")+AS+'" m="0"'+(AQ?AJ:"")+">");AM.push(AW+1);AM.push("</div></td>");if((++AZ)%7===0){AM.push("</tr><tr>");}}for(AU=AZ;AU<42;AU++){Aa=AZ-AT-AP+1;AS=this.isDateDisabled(Aa,AH.m,AH.y,AR,AV)?"disabled":"";AM.push("<td "+AY+'><div class="mstrmojo-Calendar-day-next '+AS+'" m="1">');AM.push(Aa);AM.push("</div></td>");if((++AZ)%7===0&&AZ!==42){AM.push("</tr><tr>");}}AM.push("</tr>");AM.push(u);return AM.join("");},_dayViewTHead:function(){var AJ=[],AK='<thead><tr class="mstrmojo-Calendar-thead" style="'+this.cssTextWeekDay+';">',AI="</tr></thead>",AH=this.firstDayOfWeek-1,AL=this.dayNames,AG;AJ.push(AK);for(AG=AH;AG<AH+7;AG++){AJ.push("<td>");AJ.push(AL(AG%7));AJ.push("</td>");}AJ.push(AI);return AJ.join("");},monthViewHTML:function(){var AH=[],AJ=this.browseMonth-1,AI=this.browseYear,AG;T(this,{d:31,m:12,y:AI-1},{d:1,m:1,y:AI+1});AH.push(O(this.cssTextMonth));AH.push("<tr>");for(AG=0;AG<12;AG++){AH.push("<td "+((AG===AJ)?x(this):"")+'><div class="mstrmojo-Calendar-month'+((AG===AJ)?" selected":"")+'" m="');AH.push(String(AG));AH.push('">');AH.push(this.monthNames(AG));AH.push("</div></td>");if(AG%3===2){AH.push("</tr><tr>");}}AH.pop();AH.push("</tr>");AH.push(u);return AH.join("");},yearViewHTML:function(){var AL=this.yearRangStart,AH=[],AJ=this.browseYear,AK,AG,AI=this.yearViewSize;T(this,{d:31,m:12,y:AL-1},{d:1,m:1,y:AL+AI*AI});AH.push(O(this.cssTextYear));AH.push("<tr>");for(AG=0;AG<AI*AI;AG++){AK=AL+AG;AH.push("<td "+((AJ===AK)?x(this):"")+'><div class="mstrmojo-Calendar-year'+((AJ===AK)?" selected":"")+'">');AH.push(AK);AH.push("</div></td>");if(AG%AI===(AI-1)){AH.push("</tr><tr>");}}AH.pop();AH.push("</tr>");AH.push(u);return AH.join("");},hourViewHTML:function(){var AI=[],AH=this.timeVal.hour,AG;AI.push(G);AI.push('<tr><td colspan="6"><div class="mstrmojo-Calendar-hourTitle">');AI.push(AB().AM_NAME);AI.push("</div></td></tr>");for(AG=0;AG<12;AG++){AI.push('<td><div class="mstrmojo-Calendar-hour'+((AG===AH)?" selected":"")+'" h="0">');AI.push((AG===0)?12:AG);AI.push("</div></td>");if(AG===5){AI.push("</tr><tr>");}}AI.push('</tr><tr><td colspan="6"><div class="mstrmojo-Calendar-hourTitle">');AI.push(AB().PM_NAME);AI.push("</div></td></tr>");for(AG=0;AG<12;AG++){AI.push('<td><div class="mstrmojo-Calendar-hour'+(((12+AG)===AH)?" selected":"")+'" h="1">');AI.push((AG===0)?12:AG);AI.push("</div></td>");if(AG===5){AI.push("</tr><tr>");}}AI.push("</tr>");AI.push(u);return AI.join("");},minuteViewHTML:function(){return this._minuteSecondViewHTML(this.timeVal.min,"mstrmojo-Calendar-minute");},secondViewHTML:function(){return this._minuteSecondViewHTML(this.timeVal.sec,"mstrmojo-Calendar-second");},_minuteSecondViewHTML:function(AI,AJ){var AH=[],AG;AH.push(G);AH.push("<tr>");for(AG=0;AG<60;AG++){AH.push('<td><div class="');AH.push(AJ);AH.push((AG===AI)?' selected">':'">');AH.push(AG);AH.push("</div></td>");if(AG%10===9){AH.push("</tr><tr>");}}AH.pop();AH.push("</tr>");AH.push(u);return AH.join("");},isDateDisabled:function(AG,AI,AH){return !F(AG,AI,AH,this.min,this.max);},unrender:function D(AG){delete this.lastValue;this._super(AG);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ValidationTextBox","mstrmojo.Calendar","mstrmojo.Popup","mstrmojo._HasPopup","mstrmojo.locales","mstrmojo.date","mstrmojo.string");var B=mstrmojo.ValidationTextBox.prototype.markupMethods,D=mstrmojo.string,A=function(){return mstrmojo.locales.datetime;},C=mstrmojo.date;mstrmojo.DateTextBox=mstrmojo.declare(mstrmojo.ValidationTextBox,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.DateTextBox",calendarToBody:false,calendarZIndex:100,changeValueOnOK:false,dynDateValue:null,showAdvanced:false,canSelectDisabledDate:false,isList:false,dtp:14,defaultDate:null,autoFormat:true,enabled:true,min:"",max:"",markupString:'<div id="{@id}" class="mstrmojo-DateTextBox {@cssClass}" style="{@cssText}"><input class="mstrmojo-DateTextBox-input" type="text" title="{@tooltip}"value="{@value}" size="{@size}" maxlength="{@maxLength}" index="{@tabIndex}" mstrAttach:focus,keyup,blur /><div class="mstrmojo-DateTextBox-icon" mstrAttach:click> </div><div class="mstrmojo-DateTextBox-popup"></div></div>',markupSlots:{inputNode:function(){return this.domNode.firstChild;},iconNode:function(){return this.domNode.childNodes[1];},popupNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},onwidthChange:function(){if(this.width){this.inputNode.style.width=(this.width-20)+"px";this.iconNode.style.left=(this.width-18)+"px";this.domNode.style.width=this.width+"px";}},onvalueChange:B.onvalueChange,onenabledChange:B.onenabledChange,onvalidationStatusChange:B.onvalidationStatusChange},calConfig:null,calendar:{scriptClass:"mstrmojo.Popup",cssClass:"mstrmojo-DateTextBox-calendar",locksHover:true,slot:"popupNode",onOpen:function(){var H=this.opener,G=H&&H.calendarZIndex,I=this.cal,E=H&&H.calConfig;if(G){this.domNode.style.zIndex=G;}for(var F in E){I.set(F,E[F]);}},children:[{scriptClass:"mstrmojo.Calendar",alias:"cal",forceNonEmptySelection:true,bindings:{showAdvanced:"this.parent.opener.showAdvanced",dtp:"this.parent.opener.dtp",value:"this.parent.opener.value",dynDateValue:"this.parent.opener.dynDateValue",enabled:"this.parent.opener.enabled",min:"this.parent.opener.min",max:"this.parent.opener.max",canSelectDisabledDate:"this.parent.opener.canSelectDisabledDate",changeValueOnOK:function(){var F=this.parent.opener.dtp,E=this.parent.opener.changeValueOnOK;return F===15||F===16||E;}},closeOnValueChange:true,onValueUpdate:function(F){var I=this.parent&&this.parent.opener;if(I){var G=I.value,E=window.mstrConfig&&window.mstrConfig.listSep||";",H=I.dtp===15?C.formatTimeInfo(this.timeVal,A().TIMEOUTPUTFORMAT):this.value;if(I.isList&&!D.isEmpty(G)){I.set("value",I.value+E+H);}else{I.set("dynDateValue",this.dynDateValue);I.set("value",H);}I.closePopup();}}}]},onclick:function(E){var F=this._lastOpened,G=this._calendarConfig;if(!G){G={};if(this.calendarToBody){delete this.calendar.slot;G.placeholder=document.body.appendChild(document.createElement("div"));G.nudge=function(){var M=this.opener;if(M){var H=mstrmojo.dom.position(M.popupNode,true),L=this.domNode,P=L.offsetHeight,I=L.offsetWidth,J=mstrmojo.dom.windowDim(),K=H.x,N=H.y;if(N+P>=J.h){N=Math.max(N-P,0);}if(K+I>=J.w){K=Math.max(K-I,0);}var O=L.style;O.top=N+"px";O.left=K+"px";}};}this._calendarConfig=G;}G.lockIW=this;if(F&&F.visible){this.closePopup();}else{this.openPopup("calendar",G);this.calendar.cal.updateSelectedDate(true);}},unrender:function(){this._super();if(this.calendarToBody&&this._calendarConfig){delete this._calendarConfig;}if(this.calendar.hasRendered){this.calendar.unrender();}},_set_value:function(H,F){var G=this.value,E=(G!==F);if(E){this.value=F;this.validate(F);}if(this.showAdvanced&&this.dynDateChanged){this.dynDateChanged=false;E=true;}return E;},_set_dynDateValue:function(H,F){var G=this.dynDateValue,E=(G!==F);if(E){this.dynDateValue=F;this.dynDateChanged=true;}return E;}});})();(function(){mstrmojo.requiresCls("mstrmojo.FieldSet","mstrmojo.dom","mstrmojo.hash","mstrmojo.Label","mstrmojo.TextArea","mstrmojo.txEditor.CSIStatementTokenInput","mstrmojo.txEditor.CommonComponent");var B=mstrmojo.hash,E=mstrmojo.txEditor.CommonComponent,H=25;function D(){return[];}mstrmojo.txEditor.CSIClausePanel=mstrmojo.declare(mstrmojo.FieldSet,null,{scriptClass:"mstrmojo.txEditor.CSIClausePanel",cssClass:"mstrmojo-TransactionEditor-CSIClausePanel",clauseIdx:0,clearInputs:function C(){this.clInput.clearTokens();},postBuildRendering:function A(){this._super();if(!this._clauseModifyListener){this._clauseModifyListener=this.clInput.attachEventListener("clauseModify",this.id,"onclauseChange");}},isActive:function I(){var L=mstrmojo.all.offModel.offTxs,K=L&&L.tknstrm,J=K&&K.csType;return J===this.st;},onclauseChange:function F(K){if(this.isActive()&&K.name==="clauseModify"){var M=mstrmojo.all.offModel.offTxs.tknstrm.clauses,L=this.getPrefixItems(),J=this.getPostItems();if(M){M[this.clauseIdx]=L.concat(this.clInput.items).concat(J);}}},getPrefixItems:D,getPostItems:D,_preprocessTokenStream:mstrmojo.emptyFn,markupMethods:B.copy({onheightChange:function(){if(this.height){this.domNode.style.height=this.height+"px";this.clInput.set("height",this.height-this.clLabel.getHeight()-2);}}},B.copy(mstrmojo.FieldSet.prototype.markupMethods)),children:[E.createLabel({cssClass:"mstrmojo-TransactionEditor-CSIClauseLabel",alias:"clLabel",height:H,cssText:"height:"+H+"px;line-height:"+H+"px;margin:0px",bindings:{text:function(){var L=this.parent.labelPrefix,J=this.parent.dsName,M=this.parent.labelSuffix,K=L;if(J){K+=(" "+J);K+=(M?(" "+M):"");}return K;}},getHeight:function(){return this.height;}}),{scriptClass:"mstrmojo.txEditor.CSIStatementTokenInput",isActive:function(){return this.active&&this.parent.isActive();},alias:"clInput"}],destroy:function G(J){if(this._clauseModifyListener){this.clInput.detachEventListener(this._clauseModifyListener);}this._super(J);}});}());(function(){mstrmojo.requiresCls("mstrmojo.txEditor.CommonComponent","mstrmojo.txEditor.Container","mstrmojo.txEditor.ValuesPropsPanel");mstrmojo.requiresDescs(2175);var A=mstrmojo.txEditor.CommonComponent;mstrmojo.txEditor.SliderPropertiesPanel=mstrmojo.declare(mstrmojo.txEditor.Container,null,{scriptClass:"mstrmojo.txEditor.SliderPropertiesPanel",children:[A.createRequiredCheckBox(),{scriptClass:"mstrmojo.txEditor.ValuesPropsPanel",colHeader:mstrmojo.desc(2175)+":"}]});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Table","mstrmojo.array","mstrmojo.txEditor.CSIClausePanel","mstrmojo.txEditor.CommonComponent");var E=mstrmojo.hash,B=mstrmojo.array,A=mstrmojo.txEditor.CommonComponent,D=A.STATEMENT_TYPE,C=A.CSI_KEYWORD_TYPE;mstrmojo.txEditor.CSIInsertStatementPanel=mstrmojo.declare(mstrmojo.Table,null,{scriptClass:"mstrmojo.txEditor.CSIInsertStatementPanel",cssClass:"mstrmojo-TransactionEditor-CSIInsertStatementPanel",markupMethods:E.copy({onheightChange:function(){if(this.height){this.domNode.style.height=this.height+"px";this.inClause.set("height",this.height/2);this.vClause.set("height",this.height/2);}}},E.copy(mstrmojo.Table.prototype.markupMethods)),onvisibleChange:function(){if(!this.visible){this.inClause&&this.inClause.clearInputs();this.vClause&&this.vClause.clearInputs();}},layout:[{cells:[{}]},{cells:[{}]}],children:[{scriptClass:"mstrmojo.txEditor.CSIClausePanel",slot:"0,0",alias:"inClause",labelPrefix:"Insert into",getPrefixItems:function(){var F=[],G=mstrmojo.all.offModel.tgtDs;F.push({v:"INSERT",tp:C.INSERT,isMstrObj:true});F.push({v:"INTO",tp:C.INTO,isMstrObj:true});if(G&&G.n){F.push({v:G.n,oi:{did:G.did,t:G.tp,n:G.n},isMstrObj:true});}return F;},_preprocessTokenStream:function(G){var H={37:true,314:true,317:true,269:true},F=[];B.forEach(G,function(I){if(!H[I.tp]){F.push(I);}});return F;},st:D.STATEMENT_INSERT,bindings:{dsName:"mstrmojo.all.offModel.tgtDs.n",clause:function(){var F=mstrmojo.all.offModel.offTxs.tknstrm.clauses[0]||[];if(this.isActive()){this.clInput.set("items",this._preprocessTokenStream(F));}return F;}}},{scriptClass:"mstrmojo.txEditor.CSIClausePanel",slot:"1,0",alias:"vClause",labelPrefix:"values",getPrefixItems:function(){return[{v:"VALUES",tp:C.VALUES,isMstrObj:true}];},_preprocessTokenStream:function(G){var F=[];B.forEach(G,function(H){if(H.tp!==-1&&H.tp!==C.VALUES){F.push(H);}});return F;},clauseIdx:1,st:D.STATEMENT_INSERT,bindings:{clause:function(){var F=mstrmojo.all.offModel.offTxs.tknstrm.clauses[1]||[];if(this.isActive()){this.clInput.set("items",this._preprocessTokenStream(F));}return F;}}}]});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Table","mstrmojo.array","mstrmojo.txEditor.CSIClausePanel","mstrmojo.txEditor.CommonComponent");var E=mstrmojo.hash,B=mstrmojo.array,A=mstrmojo.txEditor.CommonComponent,D=A.STATEMENT_TYPE,C=A.CSI_KEYWORD_TYPE;mstrmojo.txEditor.CSIUpdateStatementPanel=mstrmojo.declare(mstrmojo.Table,null,{scriptClass:"mstrmojo.txEditor.CSIUpdateStatementPanel",cssClass:"mstrmojo-TransactionEditor-CSIUpdateStatementPanel",markupMethods:E.copy({onheightChange:function(){if(this.height){this.domNode.style.height=this.height+"px";this.upClause.set("height",this.height/2);this.whClause.set("height",this.height/2);}}},E.copy(mstrmojo.Table.prototype.markupMethods)),onvisibleChange:function(){if(!this.visible){this.upClause&&this.upClause.clearInputs();this.whClause&&this.whClause.clearInputs();}},layout:[{cells:[{}]},{cells:[{}]}],children:[{scriptClass:"mstrmojo.txEditor.CSIClausePanel",slot:"0,0",alias:"upClause",labelPrefix:"Update",getPrefixItems:function(){var F=[],G=mstrmojo.all.offModel.tgtDs;F.push({v:"UPDATE",tp:C.UPDATE,isMstrObj:true});if(G&&G.n){F.push({v:G.n,oi:{did:G.did,t:G.tp,n:G.n},isMstrObj:true});}F.push({v:"SET",tp:C.SET,isMstrObj:true});return F;},_preprocessTokenStream:function(G){var H={37:true,269:true,312:true,313:true},F=[];B.forEach(G,function(I){if(!H[I.tp]){F.push(I);}});return F;},labelSuffix:"set",st:D.STATEMENT_UPDATE,bindings:{dsName:"mstrmojo.all.offModel.tgtDs.n",clause:function(){var F=mstrmojo.all.offModel.offTxs.tknstrm.clauses[0]||[];if(this.isActive()){this.clInput.set("items",this._preprocessTokenStream(F));}return F;}}},{scriptClass:"mstrmojo.txEditor.CSIClausePanel",slot:"1,0",alias:"whClause",getPrefixItems:function(){var F=this.clInput.items;return(F&&F.length>0)?[{v:"WHERE",tp:C.WHERE,isMstrObj:true}]:[];},_preprocessTokenStream:function(G){var F=[];B.forEach(G,function(H){if(H.tp!==-1&&H.tp!==C.WHERE){F.push(H);}});return F;},clauseIdx:1,st:D.STATEMENT_UPDATE,labelPrefix:"where",bindings:{clause:function(){var F=mstrmojo.all.offModel.offTxs.tknstrm.clauses[1]||[];if(this.isActive()){this.clInput.set("items",this._preprocessTokenStream(F));}return F;}}}]});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Table","mstrmojo.array","mstrmojo.txEditor.CSIClausePanel","mstrmojo.txEditor.CommonComponent");var E=mstrmojo.hash,B=mstrmojo.array,A=mstrmojo.txEditor.CommonComponent,D=A.STATEMENT_TYPE,C=A.CSI_KEYWORD_TYPE;mstrmojo.txEditor.CSIDeleteStatementPanel=mstrmojo.declare(mstrmojo.Table,null,{scriptClass:"mstrmojo.txEditor.CSIDeleteStatementPanel",cssClass:"mstrmojo-TransactionEditor-CSIDeleteStatementPanel",markupMethods:E.copy({onheightChange:function(){if(this.height){this.deClause.set("height",this.height/2);}}},E.copy(mstrmojo.Table.prototype.markupMethods)),onvisibleChange:function(){if(!this.visible){this.deClause&&this.deClause.clearInputs();}},layout:[{cells:[{}]}],children:[{scriptClass:"mstrmojo.txEditor.CSIClausePanel",slot:"0,0",alias:"deClause",labelPrefix:"Delete from",labelSuffix:"where",getPrefixItems:function(){var F=[],G=mstrmojo.all.offModel.tgtDs;F.push({v:"DELETE",tp:C.DELETE,isMstrObj:true});F.push({v:"FROM",tp:C.FROM,isMstrObj:true});if(G&&G.n){F.push({v:G.n,oi:{did:G.did,t:G.tp,n:G.n},isMstrObj:true});}F.push({v:"WHERE",tp:C.WHERE,isMstrObj:true});return F;},_preprocessTokenStream:function(G){var F=[];rmBeginTps={37:true,315:true,319:true,269:true,316:true,"-1":true};B.forEach(G,function(H){if(!rmBeginTps[H.tp]){F.push(H);}});return F;},st:D.STATEMENT_DELETE,bindings:{dsName:"mstrmojo.all.offModel.tgtDs.n",clause:function(){var F=mstrmojo.all.offModel.offTxs.tknstrm.clauses[0]||[];if(this.isActive()){this.clInput.set("items",this._preprocessTokenStream(F));}return F;}}}]});}());(function(){mstrmojo.requiresCls("mstrmojo._CanValidate","mstrmojo.DateTextBox","mstrmojo.txEditor.CommonComponent","mstrmojo.txEditor.Container","mstrmojo.txEditor.Table");mstrmojo.requiresDescs(2099,2100,8253);var C=mstrmojo.txEditor.CommonComponent,B=mstrmojo.validation,A=B.TRIGGER;mstrmojo.txEditor.CalendarPropertiesPanel=mstrmojo.declare(mstrmojo.txEditor.Container,null,{scriptClass:"mstrmojo.txEditor.CalendarPropertiesPanel",children:[{scriptClass:"mstrmojo.txEditor.Table",layout:[{cells:[{colSpan:2}]},{cells:[{},{}]},{cells:[{},{}]},{cells:[{colSpan:2}]}],children:[C.createRequiredCheckBox({slot:"0,0"}),C.createLabel({slot:"1,0"},mstrmojo.desc(2100)),{slot:"1,1",scriptClass:"mstrmojo.DateTextBox",cssClass:"mstrmojo-TransactionEditor-DateTextBox",cssDisplay:"inline-block",width:120,autoFormat:false,getVisibility:function(){var D=mstrmojo.all.teModel.currentTxInput;this.set("dtp",D.dtp);this.set("value",D.ctl.pr.min);return true;},required:false,constraints:{trigger:A.ALL},onValid:C.onValChg,onInvalid:C.onValChg,updateModel:function(D){mstrmojo.all.teModel.currentTxInput.ctl.pr.min=D;},calendarToBody:true,calendarZIndex:112},C.createLabel({slot:"2,0"},mstrmojo.desc(2099)),{slot:"2,1",scriptClass:"mstrmojo.DateTextBox",cssClass:"mstrmojo-TransactionEditor-DateTextBox",cssDisplay:"inline-block",width:120,autoFormat:false,getVisibility:function(){var D=mstrmojo.all.teModel.currentTxInput;this.set("dtp",D.dtp);this.set("value",D.ctl.pr.max);return true;},required:false,constraints:{trigger:A.ALL},onValid:C.onValChg,onInvalid:C.onValChg,updateModel:function(D){mstrmojo.all.teModel.currentTxInput.ctl.pr.max=D;},calendarToBody:true,calendarZIndex:112},C.createCheckBox({slot:"3,0",text:mstrmojo.desc(8253)},"ict")]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.fx","mstrmojo.Box","mstrmojo.FieldSet","mstrmojo.txEditor.CommonComponent","mstrmojo.txEditor.ListPropertiesPanel","mstrmojo.txEditor.TextAreaPropertiesPanel","mstrmojo.txEditor.SwitchPropertiesPanel","mstrmojo.txEditor.CalendarPropertiesPanel","mstrmojo.txEditor.TimePickerPropertiesPanel","mstrmojo.txEditor.TextFieldPropertiesPanel","mstrmojo.txEditor.SignatureCapturePropertiesPanel","mstrmojo.txEditor.RatingPropertiesPanel","mstrmojo.txEditor.LikertScalePropertiesPanel","mstrmojo.txEditor.SliderPropertiesPanel","mstrmojo.txEditor.TogglePropertiesPanel","mstrmojo.txEditor.StepperPropertiesPanel","mstrmojo.txEditor.BarcodePropertiesPanel");mstrmojo.requiresDescs(8250);var B=mstrmojo.hash,A=mstrmojo.txEditor.CommonComponent;function C(I,E,F,L,D,H,J){var K={target:I,onEnd:function(){if(D){D();}},props:{}};K.props[E]={ease:H||mstrmojo.ease.sin,start:parseInt(F,10),stop:parseInt(L,10),suffix:"px"};K=B.copy(J,K);var G=new mstrmojo.fx.AnimateProp(K);G.play();}mstrmojo.txEditor.ControlPropsPanel=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.txEditor.ControlPropsPanel",cssClass:"mstrmojo-TransactionEditor-CtrlPropsPanel",targetDOM:null,panelIdx:0,playEffect:function(E,H){if(E==="open"){this.targetDOM.appendChild(this.containerNode);}var G,D,F=this;switch(E){case"open":G=0;D=this.containerNode.childNodes[0].clientHeight;break;case"close":G=this.containerNode.clientHeight;D=0;break;}C(this.containerNode,"height",G,D,function(){if(E==="open"){F.containerNode.style.height="auto";}else{if(E==="close"){F.targetDOM.removeChild(F.containerNode);}}if(H){H();}},null);},closeWithNoAnimation:function(){var E=this.targetDOM,D=this.containerNode;this.show=false;mstrmojo.all.teModel.currentTxInput.editing=false;if(E&&D){E.removeChild(D);}},onshowChange:function(){mstrmojo.all.teModel.currentTxInput.editing=this.show;this.playEffect(this.show?"open":"close");},_set_panelIdx:function(E,D){this.panelIdx=D;this.ctrlProps.display(D);},children:[{scriptClass:"mstrmojo.FieldSet",alias:"ctrlProps",legend:mstrmojo.desc(8250),cssClass:"mstrmojo-TransactionEditor-CtrlPropsPanel",display:function(E){A.setChildrenVisibility(this,false);var D={1:this.textField,2:this.switch1,3:this.list,4:this.slider,5:this.calendar,6:this.timePicker,7:this.toggle,8:this.textArea,9:this.sigCap,10:this.rating,12:this.stepper,13:this.barcode,14:this.likertscale}[E];if(D){D.set("visible",true);}},children:[{scriptClass:"mstrmojo.txEditor.TextFieldPropertiesPanel",alias:"textField"},{scriptClass:"mstrmojo.txEditor.SwitchPropertiesPanel",alias:"switch1"},{scriptClass:"mstrmojo.txEditor.SliderPropertiesPanel",alias:"slider"},{scriptClass:"mstrmojo.txEditor.ListPropertiesPanel",alias:"list"},{scriptClass:"mstrmojo.txEditor.CalendarPropertiesPanel",alias:"calendar"},{scriptClass:"mstrmojo.txEditor.TimePickerPropertiesPanel",alias:"timePicker"},{scriptClass:"mstrmojo.txEditor.TogglePropertiesPanel",alias:"toggle"},{scriptClass:"mstrmojo.txEditor.TextAreaPropertiesPanel",alias:"textArea"},{scriptClass:"mstrmojo.txEditor.SignatureCapturePropertiesPanel",alias:"sigCap"},{scriptClass:"mstrmojo.txEditor.RatingPropertiesPanel",alias:"rating"},{scriptClass:"mstrmojo.txEditor.StepperPropertiesPanel",alias:"stepper"},{scriptClass:"mstrmojo.txEditor.BarcodePropertiesPanel",alias:"barcode"},{scriptClass:"mstrmojo.txEditor.LikertScalePropertiesPanel",alias:"likertscale"}],postCreate:function(){var E,D;for(E=0,D=this.children.length;E<D;E++){this.children[E].visible=false;}}}]});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.FieldSet","mstrmojo.txEditor.CSIUpdateStatementPanel","mstrmojo.txEditor.CSIInsertStatementPanel","mstrmojo.txEditor.CSIDeleteStatementPanel","mstrmojo.txEditor.CommonComponent");var C=mstrmojo.hash,A=mstrmojo.txEditor.CommonComponent,B=A.STATEMENT_TYPE;mstrmojo.txEditor.CSIStatementManipulationPanel=mstrmojo.declare(mstrmojo.FieldSet,null,{scriptClass:"mstrmojo.txEditor.CSIStatementManipulationPanel",cssClass:"mstrmojo-TransactionEditor-CSIStatementManipulationPanel",markupMethods:C.copy({onheightChange:function(){if(this.height){this.domNode.style.height=this.height+"px";this.upSta.set("height",this.height);this.inSta.set("height",this.height);this.deSta.set("height",this.height);}}},C.copy(mstrmojo.FieldSet.prototype.markupMethods)),children:[{scriptClass:"mstrmojo.txEditor.CSIUpdateStatementPanel",alias:"upSta",bindings:{visible:function(){return this.parent.parent.statementType===B.STATEMENT_UPDATE;}}},{scriptClass:"mstrmojo.txEditor.CSIInsertStatementPanel",alias:"inSta",bindings:{visible:function(){return this.parent.parent.statementType===B.STATEMENT_INSERT;}}},{scriptClass:"mstrmojo.txEditor.CSIDeleteStatementPanel",alias:"deSta",bindings:{visible:function(){return this.parent.parent.statementType===B.STATEMENT_DELETE;}}}]});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.FieldSet","mstrmojo.txEditor.CommonComponent","mstrmojo.txEditor.CSISelectManipulationPanel","mstrmojo.txEditor.CSIStatementManipulationPanel");var C=mstrmojo.hash,A=mstrmojo.txEditor.CommonComponent,B=A.STATEMENT_TYPE;mstrmojo.txEditor.CSIStatementPanel=mstrmojo.declare(mstrmojo.FieldSet,null,{scriptClass:"mstrmojo.txEditor.CSIStatementPanel",cssClass:"mstrmojo-TransactionEditor-CSIStatementPanel",markupMethods:C.copy({onheightChange:function(){if(this.height){this.domNode.style.height=this.height+"px";this.csSta.set("height",this.height-this.csSel.getHeight());}}},C.copy(mstrmojo.FieldSet.prototype.markupMethods)),bindings:{statementType:function(){var F=mstrmojo.all.offModel.offTxs,E=F&&F.tknstrm,D=E&&E.csType;if(F&&!E){F.tknstrm={csType:this.statementType,clauses:[]};}return D?parseInt(D):B.STATEMENT_UPDATE;}},onstatementTypeChange:function(){var D=mstrmojo.all.offModel,F=D&&D.offTxs,E=F&&F.tknstrm;if(E&&E.csType!==this.statementType){E.csType=this.statementType;E.clauses=[];}},children:[{scriptClass:"mstrmojo.txEditor.CSISelectManipulationPanel",alias:"csSel",height:38,getHeight:function(){return this.height;}},{scriptClass:"mstrmojo.txEditor.CSIStatementManipulationPanel",alias:"csSta"},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-txEditor-CSIStatementError",bindings:{visible:"!!mstrmojo.all.offModel.validationError",text:"mstrmojo.all.offModel.validationError"}}]});}());(function(){mstrmojo.requiresCls("mstrmojo.num","mstrmojo.hash","mstrmojo.Label","mstrmojo.Pulldown","mstrmojo.Button","mstrmojo.TristateCheckBox","mstrmojo.FieldSet","mstrmojo.Table","mstrmojo.txEditor.CommonComponent","mstrmojo.txEditor.ControlPropsPanel");mstrmojo.requiresDescs(4694,8243,8244,8245,8246,8247,8250);var G=mstrmojo.txEditor.CommonComponent,H=mstrmojo.num,L=mstrmojo.hash;var E=function E(){mstrmojo.all.teModel.updateTxMapping(this.txInput,this.value);if(this.value===null){this.set("selectedIndex",-1);}if(this.txInput.editing){mstrmojo.all.ctrlPropPanel.set("show",false);}},F=function F(){this.popupRef.children[0].itemMarkupFunction=function(Q,N,O){var P=O.parent.opener;return'<div class="mstrmojo-Pulldown-listItem'+(P.itemCssClass?" "+P.itemCssClass:"")+(Q.mapped?" mapped":"")+'"><div class="mstrmojo-text">'+Q.n+"</div></div>";};},C=function C(){if(this.txInput.editing){mstrmojo.all.ctrlPropPanel.set("show",false);}this.txInput.set("edt",this.checked?1:0);},J=function K(){this.set("value",this.enabled?this.items[0].t:null);},D=function D(){if(this.value){var N=mstrmojo.array.find(this.items,"t",this.value),P=L.make(L.clone(this.items[N]),mstrmojo.Obj),O=L.make({pr:P,dirty:-1},mstrmojo.Obj);P.dtp=this.txInput.dtp;this.txInput.set("ctl",O);}else{this.txInput.ctl=null;}if(this.txInput.editing){mstrmojo.all.ctrlPropPanel.set("panelIdx",this.value);}},M=function M(){var P=mstrmojo.all.teModel,Q=this,O=!this.txInput.editing,N=mstrmojo.all.ctrlPropPanel;if(P.isPropertiesValid()){if(N.show&&!this.txInput.editing){P.currentTxInput.editing=false;N.show=false;N.playEffect("close",function(){Q.onclick();});}else{if(O){P.set("currentTxInput",this.txInput);N.set("panelIdx",this.txInput.ctl.pr.t);N.targetDOM=this.parent[this.row+1+",0"];}N.set("show",O);}}};var B={enabled:function(){var N=this.txInput.toi;return(N>=0)&&!mstrmojo.all.teModel.rwTxs.tscObjs[N].mo;},checked:"this.enabled && this.txInput.edt == 1"};function A(P){var O=[],R,N,T={cssClass:"row-relative",cells:[{cssClass:"c1"},{cssClass:"c2"},{cssClass:"c3"},{cssClass:"c4"},{}]},Q={cells:[{colSpan:5,cssClass:"top-align"}]},S=P.length;O.push(T);for(R=0,N=S;R<N;R++){O.push(T);O.push(Q);}return O.concat(Q);}function I(P){var O=[],R,Q,N,S=P.length,T;O.push({slot:"0,0",scriptClass:"mstrmojo.Label",text:mstrmojo.desc(8244)},{slot:"0,1",scriptClass:"mstrmojo.Label",text:(mstrmojo.all.teModel.rwTxs.tp===G.RW_UNIT_TYPE.RW_UNIT_FIELDGROUP)?mstrmojo.desc(8246):mstrmojo.desc(8245)},{slot:"0,2",scriptClass:"mstrmojo.Label",text:mstrmojo.desc(4694)},{slot:"0,3",scriptClass:"mstrmojo.Label",text:mstrmojo.desc(8247)},{slot:"0,4",scriptClass:"mstrmojo.Label"});for(R=0,N=S;R<N;R++){Q=R*2+1;T=P[R].tix;O.push({slot:Q+",0",scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-TransactionEditor-TransactionInput",text:P[R].n},{slot:Q+",1",txInput:P[R],scriptClass:"mstrmojo.Pulldown",cssClass:"mstrmojo-Pulldown",popupToBody:true,popupZIndex:112,itemIdField:"idx",itemField:"n",items:mstrmojo.all.teModel.rwTxs.tscObjs,itemCssClass:"Transactable-Object",value:P[R].toi,bindings:{value:"this.txInput.toi"},defaultText:" ",defaultSelection:-1,onvalueChange:E,postCreate:F},{slot:Q+",2",txInput:P[R],scriptClass:"mstrmojo.TristateCheckBox",grayed:false,checked:P[R].edt===1,bindings:B,oncheckedChange:C},{slot:Q+",3",txInput:P[R],scriptClass:"mstrmojo.Pulldown",popupToBody:true,popupZIndex:112,itemIdField:"t",items:mstrmojo.all.teModel.getControls(P[R].dtp),defaultText:" ",defaultSelection:-1,enabled:H.isInt(P[R].toi)&&P[R].edt===1,value:P[R].ctl&&P[R].ctl.pr.t,bindings:{enabled:"this.txInput.edt == 1",value:"this.txInput.ctl.pr.t"},onenabledChange:J,onvalueChange:D},{slot:Q+",4",row:Q,tix:T,txInput:P[R],scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-TransactionEditor-ExpandButton",title:mstrmojo.desc(8250),bindings:{enabled:"this.txInput.edt == 1"},onclick:M});}return O;}mstrmojo.txEditor.FieldsMapTable=mstrmojo.declare(mstrmojo.FieldSet,null,{scriptClass:"mstrmojo.txEditor.FieldsMapTable",cssClass:"mstrmojo-TransactionEditor-InputPropertiesField",legend:mstrmojo.desc(8243),bindings:{visible:"mstrmojo.all.teModel.txRpt != null"},children:[G.createPanel({cssClass:"mstrmojo-TransactionEditor-scrollableInputPanel",children:[{scriptClass:"mstrmojo.Table",cellPadding:1,bindings:{items:"mstrmojo.all.teModel.txRpt.inputs"},onitemsChange:function(){this.destroyChildren();var N=this.items;if(N&&N.length>0){this.layout=A(N);this.set("children",I(N));this.refresh();mstrmojo.dom.center(mstrmojo.all.mstrTE.editorNode);}}}]})]});}());(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.ObjectBrowser","mstrmojo.HBox","mstrmojo.HTMLButton","mstrmojo.FieldSet","mstrmojo.txEditor.ControlPropsPanel","mstrmojo.txEditor.ReportSelector","mstrmojo.txEditor.AdvancedSetting","mstrmojo.txEditor.FieldsMapTable");mstrmojo.requiresDescs(8241);var A="teModel";mstrmojo.txEditor.MappingTxPanel=mstrmojo.declare(mstrmojo.FieldSet,null,{scriptClass:"mstrmojo.txEditor.MappingTxPanel",cssClass:"mstrmojo-TransactionEditor-MappingTxPanel",postCreate:function(){var B={scriptClass:"mstrmojo.txEditor.ControlPropsPanel",id:"ctrlPropPanel"};mstrmojo.insert(B).render();},onvisibleChange:function(){if(!this.visible&&this.hasRendered){var B=mstrmojo.all.ctrlPropPanel,C=mstrmojo.all[A];if(B.show){B.closeWithNoAnimation();}this.initRenderWidth=this.domNode.offsetWidth;this.initRenderHeight=this.domNode.offsetHeight;}},getInitRenderWidth:function(){return this.initRenderWidth||0;},getInitRenderHeight:function(){return this.initRenderHeight||0;},children:[{scriptClass:"mstrmojo.txEditor.ReportSelector",alias:"txRpt",desc:mstrmojo.desc(8241)+":",openType:"778,8",modelId:A},{scriptClass:"mstrmojo.txEditor.FieldsMapTable",alias:"txFmt"},{scriptClass:"mstrmojo.txEditor.AdvancedSetting",alias:"txAds"}]});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.txEditor.CommonComponent","mstrmojo.txEditor.MetaDataObjPanel","mstrmojo.txEditor.CSIStatementPanel");var A=mstrmojo.hash;mstrmojo.txEditor.LocalPropsPanel=mstrmojo.declare(mstrmojo.txEditor.Table,null,{scriptClass:"mstrmojo.txEditor.LocalPropsPanel",cssClass:"mstrmojo-TransactionEditor-LocalPropsPanel",markupMethods:A.copy({onheightChange:function(){if(this.height){this.domNode.style.height=this.height+"px";this.lpMdp.set("height",this.height);this.lpCsi.set("height",this.height);}},onwidthChange:function(){if(this.width){this.domNode.style.width=this.width+"px";}}},A.copy(mstrmojo.Table.prototype.markupMethods)),layout:[{cells:[{cssClass:"left"},{cssClass:"right"}]}],children:[{scriptClass:"mstrmojo.txEditor.MetaDataObjPanel",slot:"0,0",alias:"lpMdp"},{scriptClass:"mstrmojo.txEditor.CSIStatementPanel",slot:"0,1",alias:"lpCsi"}]});}());(function(){mstrmojo.requiresCls("mstrmojo.FieldSet","mstrmojo.hash","mstrmojo.dnd","mstrmojo.txEditor.ReportSelector","mstrmojo.txEditor.LocalPropsPanel");mstrmojo.requiresDescs(13208);mstrmojo.txEditor.LocalTxPanel=mstrmojo.declare(mstrmojo.FieldSet,null,{scriptClass:"mstrmojo.txEditor.LocalTxPanel",cssClass:"mstrmojo-TransactionEditor-LocalTxPanel",markupMethods:{onheightChange:function(){if(this.height){this.domNode.style.height=this.height+"px";this.lcPosp.set("height",this.height-this.lcTxRpt.getHeight());}},onwidthChange:function(){if(this.width){this.lcPosp.set("width",this.width);}},onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},children:[{scriptClass:"mstrmojo.txEditor.ReportSelector",alias:"lcTxRpt",desc:mstrmojo.desc(13208,"Target dataset")+":",openType:"8,768,769,774",modelId:"offModel",isOffline:true,height:38,getHeight:function(){return this.height;}},{scriptClass:"mstrmojo.txEditor.LocalPropsPanel",alias:"lcPosp"}]});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.FieldSet","mstrmojo.hash","mstrmojo.css","mstrmojo.dom","mstrmojo.Button","mstrmojo.txEditor.CommonComponent","mstrmojo.txEditor.MappingTxPanel","mstrmojo.txEditor.LocalTxPanel","mstrmojo.css");mstrmojo.requiresDescs(221,1442,13210,13211);var F=mstrmojo.css,E=mstrmojo.dom,C=mstrmojo.hash,D=mstrmojo.txEditor.CommonComponent,G=0,A=1;function H(N,M){F.toggleClass(N,"active",M);}function K(N,M){mstrmojo.confirm(mstrmojo.desc(13729,"You need to apply changes first."),{confirmBtn:{t:mstrmojo.desc(1442,"OK"),fn:function(){D.applyChanges(N,M);}},cancelBtn:{t:mstrmojo.desc(221,"Cancel")}},{cssClass:"mstrmojo-TransactionEditor-ConfirmEditor",zIndex:999});}function B(){var N=mstrmojo.all.teModel,M=mstrmojo.all.offModel,O=this;if(!N.txRpt){D.showError(mstrmojo.desc(13730,"You need to configure transaction mapping first."));}else{if(N.isPropertiesValid()&&N.isAllInputsMapped()){if(N.hasDirtyTscObjs()){K(N,function(P){if(!!P.localTxnCleared&&M&&!M.isRemoved()){D.showError(mstrmojo.desc(13727,"Local transaction deleted since it is no longer valid."));M.set("tgtDs",null);M.reset();}O.set("activePanel",A);});}else{return true;}}}return false;}function J(){var M=mstrmojo.all.offModel,N=this;if(M.isDirtyState()){K(M,function(O){M.reset();N.set("activePanel",G);});}else{return true;}return false;}mstrmojo.txEditor.TapSelector=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.txEditor.TapSelector",fstTapName:mstrmojo.desc(13210,"Transaction Mapping"),secTapName:mstrmojo.desc(13211,"Local Transaction"),markupString:'<table class="mstrmojo-TransactionEditor-TapSelector {@cssClass}" style="{@cssStyle}" cellspacing="0" cellpadding="0"><tbody><tr><td class="first"></td><td class="selector left"><div mstrAttach:click>{@fstTapName}</div></td><td class="selector right"><div mstrAttach:click>{@secTapName}</div></td><td class="last"></td></tr></tbody></table>',markupSlots:{firstTapNode:function(){return this.domNode.tBodies[0].rows[0].cells[1].firstChild;},secondTapNode:function(){return this.domNode.tBodies[0].rows[0].cells[2].firstChild;}},markupMethods:{onactivePanelChange:function(){H(this.firstTapNode,this.activePanel===G);H(this.secondTapNode,this.activePanel===A);this.switchActivePanel(this.activePanel);}},switchActivePanel:mstrmojo.emptyFn,preclick:function I(M){this._super&&this._super(M);var O=E.eventTarget(M.hWin,M.e),N=(this.activePanel===G);if(O===this.firstTapNode&&!N&&J.call(this)){this.set("activePanel",G);}else{if(O===this.secondTapNode&&N&&B.call(this)){this.set("activePanel",A);}}}});mstrmojo.txEditor.TapContentPanel=mstrmojo.declare(mstrmojo.FieldSet,null,{scriptClass:"mstrmojo.txEditor.TapContentPanel",cssClass:"mstrmojo-TransactionEditor-TapContentPanel",minHeight:280,minWidth:524,markupMethods:{onminHeightChange:function(){this.domNode.style.minHeight=this.minHeight+"px";this.txLtp.set("height",this.minHeight);},onminWidthChange:function(){this.domNode.style.minWidth=this.minWidth+"px";this.txLtp.set("width",this.minWidth);},onactivePanelChange:function(){if(this.hasRendered){var O=this.activePanel;if(O===A){var P=this.txMap,M=P.getInitRenderWidth(),N=P.getInitRenderHeight();if(M>this.minWidth){this.set("minWidth",M);}if(N>this.minHeight){this.set("minHeight",N);}}}}},children:[{scriptClass:"mstrmojo.txEditor.MappingTxPanel",alias:"txMap",bindings:{visible:function(){return this.parent.activePanel===G;}}},{scriptClass:"mstrmojo.txEditor.LocalTxPanel",alias:"txLtp",bindings:{visible:function(){return this.parent.activePanel===A;}}}]});mstrmojo.txEditor.TapPanel=mstrmojo.declare(mstrmojo.FieldSet,null,{scriptClass:"mstrmojo.txEditor.TapPanel",cssClass:"mstrmojo-TransactionEditor-TapPanel",activePanel:G,onactivePanelChange:function(){this.txTcp.set("activePanel",this.activePanel);},children:[{scriptClass:"mstrmojo.txEditor.TapSelector",alias:"txTps",bindings:{activePanel:"this.parent.activePanel"},switchActivePanel:function L(M){this.parent.set("activePanel",M);}},{scriptClass:"mstrmojo.txEditor.TapContentPanel",alias:"txTcp",bindings:{activePanel:"this.parent.activePanel"}}]});}());(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.ObjectBrowser","mstrmojo.HBox","mstrmojo.Label","mstrmojo.HTMLButton","mstrmojo.txEditor.TapPanel","mstrmojo.txEditor.ButtonsBar","mstrmojo.txEditor.MappingTxModel","mstrmojo.txEditor.LocalTxModel");mstrmojo.requiresDescs(8297);var A={scriptClass:"mstrmojo.Label",alias:"curtain",slot:"editorNode",cssClass:"mstrmojo-TransactionEditor-disableCurtain",bindings:{visible:"mstrmojo.all.mstrTE.saving"},onvisibleChange:function(){mstrmojo.css.toggleClass(this.domNode,"saving",mstrmojo.all.mstrTE.saving);}};mstrmojo.txEditor.TransactionEditor={id:"mstrTE",scriptClass:"mstrmojo.Editor",title:mstrmojo.desc(8297),zIndex:112,cssClass:"mstrmojo-TransactionEditor",help:"configure_transactions_dialog_box.htm",isNew:false,onOpen:function(){this.localTxModel.isDirty=false;},onClose:function(){this.mappingTxModel.rwTxs=null;this.mappingTxModel.currentTxInput=null;mstrmojo.all.ctrlPropPanel.show=false;this.mappingTxModel.set("txRpt",null);this.localTxModel.offTxs=null;this.localTxModel.set("tgtDs",null);},postCreate:function(){var C={scriptClass:"mstrmojo.txEditor.MappingTxModel",id:"teModel"},B={scriptClass:"mstrmojo.txEditor.LocalTxModel",id:"offModel"};this.mappingTxModel=mstrmojo.insert(C);this.localTxModel=mstrmojo.insert(B);if(!this._inputModifyListener){this._inputModifyListener=this.mappingTxModel.attachEventListener("InputMappingModify","offModel","onEditableObjsChange");}},children:[{scriptClass:"mstrmojo.txEditor.TapPanel",bindings:{activePanel:function(){var C=mstrmojo.all.teModel.rwTxs,B=C&&C.txRptId;return !B?0:this.activePanel;}},alias:"txTap"},{scriptClass:"mstrmojo.txEditor.ButtonsBar",alias:"txBtn"},A]};}());