(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.tooltip");var $DOM=mstrmojo.dom,$STR=mstrmojo.string,$HASH=mstrmojo.hash,$ARR=mstrmojo.array,$TTP=mstrmojo.tooltip;mstrmojo.ui._HasListTooltip=mstrmojo.provide("mstrmojo.ui._HasListTooltip",{_mixinName:"mstrmojo.ui._HasListTooltip",tooltipOrientation:"horizontal",tooltipOffset:8,tooltipMarkup:'<div class="content" style="{@style}">{@c}</div>',tooltipCss:{},tooltipContrast:false,getTooltipText:function getTooltipText(item){return item&&($STR.encodeHtmlString(item.ttp,true)||$STR.encodeHtmlString(item.n,true));},showTooltip:function showTooltip(e,win){var $this=this;if(!$this.hasOpenTooltip&&!($this._lastOpened&&$this._lastOpened.visible)){var target=$DOM.eventTarget(win,e),item=$this.getItemFromTarget(target),node=$this.getItemNodeFromTarget(target),name=$this.getTooltipText(item),cfg=$this.tooltipCss;if(!name||item.ttpDisabled){return ;}if($this.showTooltipForLargeText){if(node.offsetWidth>=node.scrollWidth){return ;}}var position=$DOM.position(node),tooltipLeft,tooltipTop,positionType,contentStyle="",tooltipOffset=$this.tooltipOffset,ctxt=(item&&item.ctxt)||{};if(this.tooltipOrientation==="vertical"){tooltipLeft=position.x+position.w/2;positionType=ctxt.posType||$TTP.POS_TOPCENTER;tooltipTop=position.y+position.h+tooltipOffset;var cssClasses="mojo-theme-light vi-regular vi-tooltip-A";if(!ctxt.posType){cssClasses+=" A-center";}$this.tooltipCss=$HASH.copy({cssClass:cssClasses},cfg);}else{var winDimension=$DOM.windowDim(),widthBuffer=40,rightPosition=position.x+position.w+tooltipOffset,leftPosition=position.x-tooltipOffset,leftWidth=leftPosition-widthBuffer,rightWidth=winDimension.w-(rightPosition+widthBuffer),tooltipCssString="vi-regular vi-tooltip-",contentWidth;tooltipTop=position.y;if(rightWidth>=leftWidth){tooltipLeft=rightPosition;contentWidth=rightWidth;positionType=ctxt.posType||$TTP.POS_TOPLEFT;cfg.cssClass=tooltipCssString+"C "+cfg.rightCssClass;}else{tooltipLeft=leftPosition;contentWidth=leftWidth;positionType=ctxt.posType||$TTP.POS_TOPRIGHT;cfg.cssClass=tooltipCssString+"D "+cfg.leftCssClass;}contentStyle="max-width: "+contentWidth+"px;";}if($this.tooltipContrast){cfg.cssClass=cfg.cssClass+" contrast";}if(cfg&&cfg.getItemCssClass){cfg.cssClass=$ARR.filter([cfg.cssClass,cfg.getItemCssClass(item)],function(cls){return !!cls;}).join(" ");}var tlp=$this.richTooltip=$HASH.copy($this.tooltipCss,{content:$STR.apply($this.tooltipMarkup,{c:name,style:contentStyle}),top:tooltipTop,left:tooltipLeft,posType:positionType});if($this.itemDisabled){tlp.cssClass+=" vi-warning";}if(ctxt.hoverable){tlp.enableHover=true;}if(ctxt.posType==="TL"){tlp.left=position.x;}tlp.keepArrowXPos=!!$this.keepArrowXPos;tlp.keepArrowYPos=!!$this.keepArrowYPos;this._super(e,win);}},onclick:function onclick(evt){var $this=this;window.setTimeout(function(){if($this.hasOpenTooltip){$this.hideTooltip();}window.clearTimeout($this._tooltipTimeOut);},0);this._super(evt);}});}());