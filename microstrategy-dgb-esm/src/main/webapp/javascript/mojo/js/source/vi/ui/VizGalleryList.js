(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList","mstrmojo.array","mstrmojo.hash","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.vi.models.DropZonesModel");mstrmojo.requiresClsP("mstrmojo.vi.viz","EnumVisualizationTemplates","EnumVizStyles","EnumWidgetTypes");mstrmojo.requiresDescs(11819,11825,11827,16057,16058,16059,16060,16061,16062,16063,16064,16065,16066,16067,16068,16069,16070,16071,16072,16073,16074,16075,16076,16077,16078,16079,16080,16081,16082,16083,16084,16085,16086,16087,16088,16089,16090,16091,16092,16093,16208,16209);var $MOJO=mstrmojo,$ARRAY=$MOJO.array,$HASH=$MOJO.hash,$DOM=mstrmojo.dom,$STRING=mstrmojo.string,$VIZ=$MOJO.vi.viz,$ENUM_REQUIREMENT_TYPE=mstrmojo.vi.models.DropZonesModel.ENUM_REQUIREMENT_TYPE,REQ_ATTRIBUTE=$ENUM_REQUIREMENT_TYPE.ATTRIBUTE,REQ_METRIC=$ENUM_REQUIREMENT_TYPE.METRIC,$VIZ_TEMPLATES=$VIZ.EnumVisualizationTemplates,$VIZ_STYLES=$VIZ.EnumVizStyles,GRAPH_MATRIX_STYLE=$VIZ_STYLES.GRAPH_MATRIX,NEW_GRAPH_MATRIX_STYLE=$VIZ_STYLES.NEW_GRAPH_MATRIX,WTP_GRAPH_MATRIX=$VIZ.EnumWidgetTypes.GRAPH_MATRIX,MAPBOX_STYLE=$VIZ_STYLES.MAPBOX,$VIZ_TEMPLATES_MAP={},CUSTOM_STYLE="custom",PLUGINS="plugins.";$VIZ_TEMPLATES_MAP[$VIZ_STYLES.GOOGLE_MAP]=$VIZ_TEMPLATES.GOOGLEMAP;$VIZ_TEMPLATES_MAP[$VIZ_STYLES.HEAT_MAP]=$VIZ_TEMPLATES.HEATMAP;$VIZ_TEMPLATES_MAP[$VIZ_STYLES.ESRI_MAP]=$VIZ_TEMPLATES.ESRIMAP;$VIZ_TEMPLATES_MAP[$VIZ_STYLES.NETWORK]=$VIZ_TEMPLATES.NETWORK;$VIZ_TEMPLATES_MAP[$VIZ_STYLES.IMAGE_LAYOUT]=$VIZ_TEMPLATES.IMAGELAYOUT;var OLD_KPI_VIZ=["plugins.KPIWidget.KPIWidget","plugins.SmartKPIWidget.SmartKPIWidget"];function getItemRequirements(metrics,attributes,isSingleMetric){var requirements=[],fnPushReq=function(type,value){var ret={t:type,r:value};if(type===REQ_METRIC&&isSingleMetric){ret.s=true;}requirements.push(ret);};if(metrics){fnPushReq(REQ_METRIC,metrics);}if(attributes){fnPushReq(REQ_ATTRIBUTE,attributes);}return requirements;}var $GM_ITEMS=[{n:mstrmojo.desc(11820,"Bar Chart"),id:"BarChart",mr:getItemRequirements(1,1),vt:{v:$VIZ_TEMPLATES.GRAPHMATRIXVERTICALBARAUTOMATIC,h:$VIZ_TEMPLATES.GRAPHMATRIXHORIZONTALBARAUTOMATIC}},{n:mstrmojo.desc(8121,"Line Chart"),id:"LineChart",mr:getItemRequirements(1,1),vt:{v:$VIZ_TEMPLATES.GRAPHMATRIXVERTICALLINEAUTOMATIC,h:$VIZ_TEMPLATES.GRAPHMATRIXHORIZONTALLINEAUTOMATIC}},{n:mstrmojo.desc(11821,"Area Chart"),id:"AreaChart",mr:getItemRequirements(1,1),vt:{v:$VIZ_TEMPLATES.GRAPHMATRIXVERTICALAREAAUTOMATIC,h:$VIZ_TEMPLATES.GRAPHMATRIXHORIZONTALAREAAUTOMATIC}},{n:mstrmojo.desc(11822,"Bubble Chart"),id:"BubbleChart",mr:getItemRequirements(2,1),vt:$VIZ_TEMPLATES.GRAPHMATRIXBUBBLECIRCLEMM},{n:mstrmojo.desc(11823,"Pie Chart"),id:"PieChart",mr:getItemRequirements(1,1),vt:$VIZ_TEMPLATES.GRAPHMATRIXPIE},{n:mstrmojo.desc(11824,"Combo Chart"),id:"ComboChart",mr:getItemRequirements(2,1),vt:$VIZ_TEMPLATES.GRAPHCOMBINATIONBARAREADUALAXIS}];$GM_ITEMS.forEach(function(vis){vis.s=GRAPH_MATRIX_STYLE;vis.wtp=WTP_GRAPH_MATRIX;});var $NGM_ITEMS=[{n:mstrmojo.desc(15130,"Clustered Bar Chart"),id:"ClusteredBarChart",mr:getItemRequirements(1,1),vt:{v:$VIZ_TEMPLATES.GRAPHMATRIXVERTICALBARCLUSTERED,h:$VIZ_TEMPLATES.GRAPHMATRIXHORIZONTALBARCLUSTERED}},{n:mstrmojo.desc(15129,"Stacked Bar Chart"),id:"BarChart",mr:getItemRequirements(1,1),vt:{v:$VIZ_TEMPLATES.GRAPHMATRIXVERTICALBARSTACKED,h:$VIZ_TEMPLATES.GRAPHMATRIXHORIZONTALBARSTACKED}},{n:mstrmojo.desc(8121,"Line Chart"),id:"LineChart",mr:getItemRequirements(1,1),vt:{v:$VIZ_TEMPLATES.GRAPHMATRIXVERTICALLINEAUTOMATIC,h:$VIZ_TEMPLATES.GRAPHMATRIXHORIZONTALLINEAUTOMATIC}},{n:mstrmojo.desc(15233,"Stacked Area Chart"),id:"AreaChart",mr:getItemRequirements(1,1),vt:{v:$VIZ_TEMPLATES.GRAPHMATRIXVERTICALAREASTACKED,h:$VIZ_TEMPLATES.GRAPHMATRIXHORIZONTALAREASTACKED}},{n:mstrmojo.desc(11822,"Bubble Chart"),id:"BubbleChart",mr:getItemRequirements(2,1),vt:$VIZ_TEMPLATES.GRAPHMATRIXBUBBLECIRCLEMM},{n:mstrmojo.desc(350,"Histogram"),id:"Histogram",mr:getItemRequirements(1,1,true),vt:$VIZ_TEMPLATES.GRAPHMATRIXVERTICALHISTOGRAM},{n:mstrmojo.desc(15411,"Grid Chart"),id:"GridChart",mr:getItemRequirements(0,0),vt:$VIZ_TEMPLATES.GRAPHMATRIXGRIDCHART},{n:mstrmojo.desc(3156,"Box Plot"),id:"BoxPlot",mr:getItemRequirements(1,1),vt:{v:$VIZ_TEMPLATES.GRAPHMATRIXVERTICALBOXPLOT,h:$VIZ_TEMPLATES.GRAPHMATRIXHORIZONTALBOXPLOT}},{n:mstrmojo.desc(5594,"Waterfall"),id:"Waterfall",mr:getItemRequirements(1,1),vt:{v:$VIZ_TEMPLATES.GRAPHMATRIXVERTICALWATERFALL,h:$VIZ_TEMPLATES.GRAPHMATRIXHORIZONTALWATERFALL}}];$NGM_ITEMS.forEach(function(vis){vis.cls="ngm";vis.s=NEW_GRAPH_MATRIX_STYLE;vis.wtp=WTP_GRAPH_MATRIX;});var TOOLTIP_CONTENTS={GridChart:{summary:mstrmojo.desc(16057,"Displays data in a tabular format"),example:mstrmojo.desc(16058,"Example: Create directory with customer information and key performance indicators (KPIs)"),requirements:mstrmojo.desc(16059,"Uses 1+ ##attributes### and/or 1+ #metrics###")},BarChart:{summary:mstrmojo.desc(16060,"Uses length to compare data values across categories"),example:mstrmojo.desc(16061,"Example: Compare profit data of different sales teams"),requirements:mstrmojo.desc(16062,"Uses 1+ ##attributes### and 1+ #metrics###")},ClusteredBarChart:{summary:mstrmojo.desc(16060,"Uses length to compare data values across categories"),example:mstrmojo.desc(16061,"Example: Compare profit data of different sales teams"),requirements:mstrmojo.desc(16062,"Uses 1+ ##attributes### and 1+ #metrics###")},LineChart:{summary:mstrmojo.desc(16065,"Uses a line to show the value of a metric over time"),example:mstrmojo.desc(16066,"Example: Show stock prices over the past decade"),requirements:mstrmojo.desc(16067,"Uses 1+ ##attributes### and 1+ #metrics### (time attribute recommended)")},AreaChart:{summary:mstrmojo.desc(16068,"Uses the area within a line chart to show the value of a metric over time"),example:mstrmojo.desc(16069,"Example: Compare the amount of revenue from different sources over time"),requirements:mstrmojo.desc(16067,"Uses 1+ ##attributes### and 1+ #metrics### (time attribute recommended)")},BubbleChart:{summary:mstrmojo.desc(16070,"Uses position, color and size to show relationships and correlations"),example:mstrmojo.desc(16071,"Example: Compare GDP, population and life expectancy for different countries"),requirements:mstrmojo.desc(16072,"Uses 1+ ##attributes### and 2+ #metrics###")},PieChart:{summary:mstrmojo.desc(16073,"Shows the composition of a total value broken by category"),example:mstrmojo.desc(16074,"Example: Compare the proportions of funding sources for a university"),requirements:mstrmojo.desc(16075,"Uses 1+ ##attributes### and 1 #metric###")},ComboChart:{summary:mstrmojo.desc(16076,"Combines a line and bar chart for comparison of metrics with different units"),example:mstrmojo.desc(16077,"Example: Compare monthly precipitation and temperature in a given region"),requirements:mstrmojo.desc(16078,"Uses 1+ ##attributes### and 2+ #metrics###")},Histogram:{summary:mstrmojo.desc(16087,"Uses length to show the frequency of values within given categories/metric ranges"),example:mstrmojo.desc(16088,"Example: Determine the number of employees that fall within a given salary range"),requirements:mstrmojo.desc(16075,"Uses 1+ ##attributes### and 1 #metric###")},BoxPlot:{summary:mstrmojo.desc(16089,"Uses several data points to visualize means, medians, ranges and outliers"),example:mstrmojo.desc(16090,"Example: Show how customer satisfaction scores vary among different survey questions"),requirements:mstrmojo.desc(16091,"Uses 1+ ##attributes### and 1+ #metrics###")},Waterfall:{summary:mstrmojo.desc(16092,"Uses bars and colors to show how categories increase or decrease a metric value"),example:mstrmojo.desc(16093,"Example: Examine how different spending and income categories impact monthly budgeting"),requirements:mstrmojo.desc(16091,"Uses 1+ ##attributes### and 1+ #metrics###")},VIHeatMapVisualizationStyle:{summary:mstrmojo.desc(16063,"Uses rectangles of varying sizes and colors to show hierarchical data"),example:mstrmojo.desc(16064,"Example: Compare sales from different clothing categories at a retail store"),requirements:mstrmojo.desc(16062,"Uses 1+ ##attributes### and 1+ #metrics###")},MapboxVisualizationStyle:{summary:mstrmojo.desc(16079,"Uses Mapbox to visualize data geographically"),example:mstrmojo.desc(16080,"Example: Use layering and clustering features to visualize frequency of earthquakes around the world"),requirements:mstrmojo.desc(16081,"Uses 1+ ##attributes### (including one geographic) and 1+ #metrics###")},NetworkVisualizationStyle:{summary:mstrmojo.desc(16084,"Uses links and nodes to show relationships between data"),example:mstrmojo.desc(16085,"Example: Create a family tree"),requirements:mstrmojo.desc(16086,"Uses 2+ ##attributes### and 1+ #metrics###")},GoogleMapVisualizationStyle:{summary:mstrmojo.desc(16082,"Uses ESRI maps to visualize data geographically"),example:mstrmojo.desc(16083,"Example: Create a density map of world population"),requirements:mstrmojo.desc(16081,"Uses 1+ ##attributes### (including one geographic) and 1+ #metrics###")},KPICardVisualizationStyle:{summary:mstrmojo.desc(16208,"Provides quick performance indications as a single numeric or with an additional trend indicator"),example:mstrmojo.desc(16209,"Example: View daily unique visitor counts for a website over the last month"),requirements:mstrmojo.desc(16075,"Uses 1+ ##attributes### and 1 #metric###")}};var VIZ_LIST_TYPE={BUILT_IN_LIST:1,CUSTOM_LIST:2};function getVizList(vizListType){var vizItems=[],visList=mstrConfig.pluginsVisList||{},fnAddRequirement=function(type,value,requirements){requirements=requirements||[];value=isNaN(value)?0:parseInt(value,10);if(value>0){requirements.push({t:type,r:value});}return requirements;};Object.keys(visList).forEach(function(vizType){var viz=visList[vizType],vizStyle=viz.s,vizName=viz.d,vizClass=viz.c,hasVizType=vizClass.indexOf(PLUGINS)!==-1?VIZ_LIST_TYPE.CUSTOM_LIST:VIZ_LIST_TYPE.BUILT_IN_LIST;if(!(vizListType&hasVizType)){return ;}if(vizStyle===GRAPH_MATRIX_STYLE){viz.st.forEach(function(visName){var gmVisPos=$ARRAY.find($GM_ITEMS,"id",visName);if(gmVisPos>=0){vizItems.push($GM_ITEMS[gmVisPos]);}});return ;}if(vizStyle===NEW_GRAPH_MATRIX_STYLE){if(mstrApp.supportFeature("ngm")){var isPartial=mstrApp.supportFeature("ngmPartial");viz.st.forEach(function(visName){var gmVisPos=$ARRAY.find($NGM_ITEMS,"id",visName);if(gmVisPos>=0){if(isPartial){if(visName==="Waterfall"||visName==="Histogram"||visName==="BoxPlot"){vizItems.push($NGM_ITEMS[gmVisPos]);}}else{vizItems.push($NGM_ITEMS[gmVisPos]);}}});}return ;}if(vizStyle===MAPBOX_STYLE&&!mstrApp.supportFeature("mbx")){return ;}if(vizStyle==="VisBuilderNew"&&!mstrApp.isVisBuilder){return ;}if(OLD_KPI_VIZ.indexOf(vizClass)>=0){return ;}var descriptorID=viz.desc;if(descriptorID){vizName=mstrmojo.desc(descriptorID,"");}var minReq;if(vizStyle===$VIZ_STYLES.KPICARD){minReq=getItemRequirements(viz.mm,viz.ma,true);}else{minReq=fnAddRequirement(REQ_ATTRIBUTE,viz.ma,fnAddRequirement(REQ_METRIC,viz.mm));}vizItems.push({n:vizName,s:vizStyle,mr:minReq,id:vizStyle,dz:viz.dz,vt:$VIZ_TEMPLATES_MAP[vizStyle],wtp:viz.wtp,isNS:viz.isNS,pn:viz.pn||null});});$ARRAY.forEach(vizItems,function(item){if(item.id in TOOLTIP_CONTENTS){var c=TOOLTIP_CONTENTS[item.id];item.summary=c.summary;item.example=c.example;item.requirements=c.requirements;}});return vizItems;}function getVisType(style){return getVizList(VIZ_LIST_TYPE.BUILT_IN_LIST+VIZ_LIST_TYPE.CUSTOM_LIST).filter(function(viz){return viz.s===style;}).map(function(viz){return{s:viz.s,vt:viz.vt||-1};})[0];}function removeCustomViz(vizname,pluginname){window.FormWrapper.doVisRemove(vizname,pluginname);}mstrmojo.vi.ui.VizGalleryList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList,mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.vi.ui.VizGalleryList",init:function init(props){this._super(props);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-VIGalleryList");this.items=(this.items||[]).concat(getVizList(this.type));},items:null,useRichTooltip:true,itemMarkup:null,type:VIZ_LIST_TYPE.BUILT_IN_LIST,getItemMarkup:function getItemMarkup(item){if(!this.itemMarkup){this.itemMarkup=this._super(item).replace(">{@en@n}<",'><div><div><div class="unsafe-icn"></div></div></div><');}return this.itemMarkup;},getItemProps:function getItemProps(item,idx){var props=this._super(item,idx);props.addCls("ic-"+item.id);if(item.isNS){props.addCls("nonsafe");}if(this.type===VIZ_LIST_TYPE.CUSTOM_LIST){props.addCls(CUSTOM_STYLE);}return props;},select:function(idxs,bSuppressEvt){if(!idxs){return ;}idxs=$ARRAY.ensureArray(idxs);var rmv=this._removeAll(),add=this._addSelections(idxs),i;if(this.selectionPolicy!=="reselect"){for(i=rmv.length-1;i>=0;i--){var ind=$ARRAY.indexOf(add,rmv[i]);if(ind>-1){rmv.splice(i,1);add.splice(ind,1);}}}var evt={name:"selectionChange",added:add,removed:rmv};if(bSuppressEvt){if(this.onselectionChange){this.onselectionChange(evt);}}else{this.raiseEvent(evt);}},showTooltip:function showTooltip(evt,win){var evtTarget=$DOM.eventTarget(win,evt);if(evtTarget.className.indexOf("unsafe-ic")===-1){return ;}$DOM.stopPropogation(null,evt);var target=$DOM.findAncestorByAttr(evtTarget,"idx",true,this.domNode),node=target&&target.node,isCustom=node&&node.className.indexOf(CUSTOM_STYLE)>-1,gallery=this.parent,list=isCustom?gallery&&gallery.customVizList:gallery&&gallery.vizList,item=target&&list&&list.items[target.value],name=item&&item.n;if(!name||name===""){return ;}var position=$DOM.position(node),ttpDsc=mstrmojo.desc(15365,"Visualizations that use it may display as a grid when this dossier is opened in a context where these plugins are not available."),ttpName=mstrmojo.desc(15364,"## plugin is only available on your local machine.").replace("##",name),content='<div class="name">'+ttpName+'</div><div class="dsc">'+ttpDsc+"</div>";this.richTooltip={posType:mstrmojo.tooltip.POS_TOPRIGHT,cssClass:"viGallery-tooltip vi-warning nsicn-tooltip vi-regular vi-tooltip-D",content:content,top:position.y-12,left:position.x-7,keepArrowYPos:true};this._super(evt,win);},onItemContextMenu:function onItemContextMenu(item,evt){var menuCfg;if(item.pn&&!(mstrApp.supportFeature(mstrmojo.vi.enums.EnumFeatures.SUPPORT_LIVEMODE)&&mstrApp.getWSLiveMode())){this.hideTooltip();menuCfg=new mstrmojo.ui.menus.MenuConfig({position:mstrmojo.dom.getMousePosition(evt.e,evt.hWin),isHostedWithin:false});menuCfg.addMenuItem(mstrmojo.desc(629,"Delete"),"",function(){removeCustomViz(item.id,item.pn);});this.openPopup(menuCfg.newInstance());}}});mstrmojo.vi.ui.VizGalleryList.getVizList=getVizList;mstrmojo.vi.ui.VizGalleryList.getVisType=getVisType;mstrmojo.vi.ui.VizGalleryList.VIZ_LIST_TYPE=VIZ_LIST_TYPE;}());