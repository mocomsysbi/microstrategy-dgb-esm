(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.dom","mstrmojo.Label","mstrmojo.TextBox","mstrmojo.warehouse.dbroles.DBRoleHelper");mstrmojo.requiresDescs(12937,12938);var $DBHLP=mstrmojo.warehouse.dbroles.DBRoleHelper,$DOM=mstrmojo.dom,$S=mstrmojo.string;var TXT=0,DROPDOWN=1;mstrmojo.warehouse.dbroles.DBRoleSetting=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.warehouse.dbroles.DBRoleSetting",cssClass:"mstrmojo-wh-DBRoleSetting",postBuildRendering:function postBuildRendering(){if(this._super){this._super();}this.infobox.captionlbl.set("text",this.caption);if(this.mode===DROPDOWN){this.infobox.dropDown.set("selectedIndex",0);}var cw=$DOM.position(this.infobox.captionlbl.domNode).w,tw=$DOM.position(this.infobox.txt.domNode).w,bw=$DOM.position(this.infobox.domNode).w;if((cw+tw)>bw){this.infobox.txt.domNode.style.width=(bw-cw-10)+"px";}},caption:"",text:"",infobox:undefined,captionlbl:undefined,ontextChange:function ontextChange(){if(this.mode===TXT){this.infobox.txt.set("value",this.text);}else{if(this.mode===DROPDOWN){this.infobox.dropDown.set("selectedIndex",parseInt(this.text));}}},isNumeric:false,isPassword:false,hiddenPwd:"",isRequired:false,enabled:true,field:undefined,parentRBAlias:"",mode:TXT,focus:function focus(){this.infobox.txt.focus();},getValue:function getValue(){return this.text;},setValue:function setValue(val){this.set("text",val);this.set("value",val);},onenabledChange:function onenabledChange(){this.infobox.captionlbl.set("enabled",this.enabled);this.infobox.txt.set("enabled",this.enabled);this.infobox.dropDown.set("enabled",this.enabled);},disableTextbox:function disableTextbox(){this.infobox.txt.set("enabled",false);},isValid:function isValid(){var value=$S.trim(this.getValue()),retVal={val:true,msg:""};if(!this.enabled){return retVal;}if(!this.isRequired&&value===""){return retVal;}if(this.isRequired&&value===""){retVal.val=false;retVal.msg=mstrmojo.desc(12937,"Value for '##' cannot be empty").replace("##",this.caption);return retVal;}if(this.isNumeric&&!$DBHLP.isNumeric(value)){retVal.val=false;retVal.msg=mstrmojo.desc(12938,"Only numeric values are allowed for '##'").replace("##",this.caption);return retVal;}return retVal;},children:[{scriptClass:"mstrmojo.Box",alias:"infobox",children:[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-wh-DBRoleSetting-Label",alias:"captionlbl",text:"this.parent.caption",useRichTooltip:true,updateTooltipConfig:function(){var pos=$DOM.position(this.domNode),shiftY=-40,shiftX=10;this.set("richTooltip",{cssClass:"vi-regular V-center vi-tooltip-V",top:Math.max(pos.y+shiftY,0),left:Math.max(pos.x+shiftX,0),posType:mstrmojo.tooltip.POS_TOPCENTER,content:this.text});}},{scriptClass:"mstrmojo.TextBox",spellCheck:false,autoCapitalize:false,cssClass:"mstrmojo-wh-DBRoleSetting-Info",alias:"txt",bindings:{visible:function(){return this.parent.parent.mode===TXT;}},preBuildRendering:function preBuildRendering(){var p=this.parent.parent;if(p.isPassword){this.set("type","password");this.set("autoComplete",(mstrApp.autocomplete==="1"));}},onEnter:function onEnter(){var p=this.parent.parent;if(p.onEnter){p.onEnter(p.parent.parent);}},onvalueChange:function onvalueChange(evt){this.parent.parent.setValue(evt.value);}},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-wh-DBRoleSetting-Info",alias:"dropDown",bindings:{visible:function(){return this.parent.parent.mode===DROPDOWN;},items:function(){return this.parent.parent.items;}},onitemSelected:function onvalueChange(evt){this.parent.parent.setValue(evt.v);}}]}]});}());