(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._Formattable","mstrmojo.MetricSlider","mstrmojo.MetricQualification","mstrmojo.SearchBoxSelector","mstrmojo.TextBoxSelector","mstrmojo.css","mstrmojo.dom","mstrmojo.expr","mstrmojo.array","mstrmojo.hash","mstrmojo.func","mstrmojo.string","mstrmojo._IsSelectorTarget","mstrmojo.elementHelper","mstrmojo.MetricSelectorUtility","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.vi._MonitorsAppState","mstrmojo.mstr.EnumDSSXMLBaseFormType","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.mstr.EnumDSSConsolidationType");mstrmojo.requiresDescs(4729,4730,4732,4733,4734,4735,5225,5443,6738,8967,12297);var $ARR=mstrmojo.array,$HASH=mstrmojo.hash,$DOM=mstrmojo.dom,$EXPR=mstrmojo.expr,$BFTP=$EXPR.BFTP,$TP=$EXPR.TP,$STP=$EXPR.STP,$CSS=mstrmojo.css,$U=mstrmojo.MetricSelectorUtility,$DS_UTILS=mstrmojo.vi.ui.DatasetUnitMenuUtils,STYLE_PULLDOWN=0,STYLE_SLIDER=1,STYLE_LIST=2,STYLE_RADIO=3,STYLE_CHECKBOX=4,STYLE_BUTTON=5,STYLE_LINK=6,STYLE_METRIC_SLIDER=7,STYLE_METRIC_QUALIFICATION=8,STYLE_SEARCH_BOX=9,STYLE_TEXT_BOX=10,STYLE_ATTR_QUALIFICATION=11,STYLE_VISUALIZATION_FILTER=12,$ELEMENT_HELPER=mstrmojo.elementHelper,ELEM_ALL_ID=$ELEMENT_HELPER.ELEM_ALL_ID,$WRAP=mstrmojo.func.wrapMethods,escapeInvalidXML=mstrmojo.string.escapeIllegalXML,$MSTR=mstrmojo.mstr,FORM_TYPE_HTML_TAG=$MSTR.EnumDSSXMLBaseFormType.DssXmlBaseFormHTMLTag,ENUM_CONSOLIDATION_TYPE=$MSTR.EnumDSSConsolidationType,ENUM_OBJECT_TYPE=$MSTR.EnumDSSXMLObjectTypes,TP_FILTER=$TP.FILTER,TP_METRIC=$TP.METRIC,TP_ATTRIBUTE=$TP.ATTR,TP_CONSOLIDATION=$TP.CONS,DS_EXPAND=0,STP_DERIVED_ELEMENT=$STP.NDE,STP_RECURSIVE_ATTRIBUTE=3076,STP_DERIVED_ATTRIBUTE=3077,STP_CUSTOM_GROUP=$STP.CUSTOMGROUP,$ALL_ELEM=$ELEMENT_HELPER.ELEM_ALL,POPUP_LIST_MAX_HEIGHT=338;mstrmojo.DocSelectorEvtType=null;var widgetMap={};widgetMap[STYLE_METRIC_SLIDER]="MetricSlider";widgetMap[STYLE_METRIC_QUALIFICATION]="MetricQualification";widgetMap[STYLE_SEARCH_BOX]="SearchBoxSelector";widgetMap[STYLE_TEXT_BOX]="TextBoxSelector";var ST_UC_ON_DS=2;var getEvent=function getEvent(){var defaultEvent={type:parseInt(this.type,10),src:this.k,ck:this.ck,ctlKey:this.ckey,tks:this.tks,include:this.include,isUConDS:!!this.defn.dsTks};if(this.style===STYLE_METRIC_QUALIFICATION||this.style===STYLE_METRIC_SLIDER){mstrmojo.hash.copy(defaultEvent,{srcid:this.srcid,srct:this.type,f:this.f,ft:this.ft,qt:this.qt,unset:!!this.unset,cs:this.cs});}return defaultEvent;},shouldFetchElemsForPause=function shouldFetchElemsForPause(){var node=this.node,data=node&&node.data,defn=node&&node.defn,srcType=defn&&defn.srct;return((mstrApp.isAppStatePause&&mstrApp.isAppStatePause())||mstrConfig.resolveOnly)&&this.style!==STYLE_SEARCH_BOX&&srcType&&this.hasAttrData()&&!data[$DATA_PARAMS.ELMSREADY]&&!data[$DATA_PARAMS.ELMSREQUEST]&&parseInt(defn.ds,10)===DS_EXPAND&&!data[$DATA_PARAMS.DISABLED];},_fetchAllElems=function _fetchAllElems(isEmptyUCONDS){var defn=this.node.defn,data=this.node.data,isPauseMode=mstrApp.isAppStatePause&&mstrApp.isAppStatePause()||mstrConfig.resolveOnly,taskParams={taskId:"browseElements",styleName:"MojoAttributeStyle",attributeID:defn.srcid||"",dataSourcesXML:defn.dsrc||"",browseFlags:1};if(!defn.srcid){return ;}var getDatasetIDbyAttID=function(attributeID){var model=this.model,datasets=model.datasets,dsIDs=Object.keys(datasets),atts=[],datasetID;$ARR.forEach(dsIDs,function(dsID){atts=datasets[dsID].att;$ARR.forEach(atts,function(att){if(att&&att.did===attributeID){datasetID=dsID;return false;}});if(!!datasetID){return false;}});return datasetID;};if(!isEmptyUCONDS){taskParams.datasetID=defn.dsid||getDatasetIDbyAttID.call(this,defn.srcid);taskParams.messageID=this.model.mid;if(!taskParams.datasetID){return ;}}var me=this,callbacks={success:function(res){me.bGetElems=true;me.set("wait",false);if(res&&res.es){data.elms=(defn.srcid)?$ELEMENT_HELPER.buildElemsTerseID(res.es,defn.srcid,true):res.es;if(isPauseMode){me.toggleDisplayAll(defn.showall);}var parent=me.parent,grandParent=parent&&parent.parent;if(defn.sec&&data.ces&&data.elms&&data.elms.length>0&&parent){parent.set("count",$ELEMENT_HELPER.buildElemsCountStr(data.ces,data.elms,me.isSelectionExcluded()));}if(me.isInvalid){me.isInvalid=false;}if(me.hasRendered){me.refresh();if(isPauseMode&&parent){$CSS.toggleClass(parent&&parent.domNode,"invalid",false);if(grandParent){grandParent.rebuildChild(parent);}}if(me.isInFilterPanel()){if(parent&&parent.defn&&parent.defn.ttl){parent.updateContentHeight();}if(grandParent&&grandParent.refreshFP){grandParent.refreshFP();}}}}},failure:function(res){if(isPauseMode){me.model.setDataReady(me.k,me.id,$DATA_PARAMS.DISABLED,true);var portlet=me.parent;me.isInvalid=true;$CSS.toggleClass(portlet&&portlet.domNode,"invalid",true);if(me.isInFilterPanel()){if(portlet){portlet.canCollapse=false;if(portlet.titleBar){portlet.titleBar.canCollapse=false;}portlet.generateToolbar();}}else{if(portlet.hasRendered&&portlet.showInvalidMessage){portlet.showInvalidMessage();}}return ;}mstrmojo.alert(res.getResponseHeader("X-MSTR-TaskFailureMsg"));},complete:function(){if(isPauseMode){me.node.data[$DATA_PARAMS.ELMSREQUEST]=false;me.model.setDataReady(me.k,me.id,$DATA_PARAMS.ELMSREQUEST,false);if(!mstrApp.isSingleTier){mstrApp.hideWait();}}}};this.set("wait",true);if(isPauseMode){data[$DATA_PARAMS.ELMSREQUEST]=true;this.model.setDataReady(this.k,this.id,$DATA_PARAMS.ELMSREQUEST,true);}if(mstrApp.isSingleTier&&isPauseMode){mstrApp.serverRequest(taskParams,callbacks,{hideFailureErr:true});}else{if(isPauseMode){mstrApp.showWait();}mstrmojo.xhr.request("POST",mstrConfig.taskURL,callbacks,taskParams,false,null,true);}},_isDocSelectorAdaptor={getWidgetClass:function getWidgetClass(selectorContainer,selectorStyle,isHoriz){var scriptClass=widgetMap[selectorStyle];if(scriptClass&&scriptClass.constructor===Array){scriptClass=scriptClass[isHoriz?0:1];}return scriptClass;},getWidgetConfig:function getWidgetConfig(selectorContainer,selectorStyle,defn,elements){var isHoriz=selectorStyle===2?false:defn.horiz,fmts=selectorContainer.getFormats(),height=fmts&&fmts.height,cfg={scriptClass:this.getWidgetClass(selectorContainer,selectorStyle,isHoriz),docSelector:selectorContainer,enabled:this.enabled,multiSelect:defn.multi,isHoriz:isHoriz,include:defn.include,itemWidthMode:defn.iwm,allIdx:$ARR.find(elements,"v",mstrmojo.elementHelper.ELEM_ALL_ID),noneIdx:defn.include?-1:$ARR.find(elements,"v",mstrmojo.elementHelper.ELEM_ALL_ID),renderAllItems:!height,onchange:function onchange(){if(!selectorContainer._inSyncPhase){selectorContainer.selectorControlChange(this);}}};if(cfg.noneIdx!==-1){cfg.allIdx=-1;}if(fmts&&selectorStyle===mstrmojo.DocSelector.STYLES.PULLDOWN){if(fmts.color){cfg.itemCssText="color: "+fmts.color+";";}if(fmts.font){cfg.itemCssText=(cfg.itemCssText||" ")+"font:"+fmts.font;}if(mstrApp.isExpress){cfg.cssTextClass="express";}}return cfg;},expandOrEditToFetchElements:function expandOrEditToFetchElements(){var data=this.node&&this.node.data;if(data&&data[$DATA_PARAMS.DISABLED]){data[$DATA_PARAMS.DISABLED]=false;}this.model.setDataReady(this.k,this.id,$DATA_PARAMS.disabled,false);this.checkAndFetchAllElemsForDelayed();},checkAndFetchAllElemsForDelayed:function checkAndFetchAllElemsForDelayed(bForceFetch){if(bForceFetch||shouldFetchElemsForPause.call(this)){_fetchAllElems.call(this);}},newSelectorWidget:function newSelectorWidget(selectorContainer){var selectorStyle=selectorContainer.style,node=selectorContainer.node,defn=node.defn,data=node.data,elements=data.elms||[],isFilterPanel=selectorContainer.isInFilterPanel(),selectorCtrl,cfg=this.getWidgetConfig(selectorContainer,selectorStyle,defn,elements),scriptClass=cfg.scriptClass,itemChangeFun=function(item){var popupList=this.getPopupList(),items=this.items;if(popupList.items.length!==items.length){this.selectedIndex=$ARR.find(items,"v",item.v);}if(item){this.set("text",item.n||mstrmojo.desc(14561,"(null)"));}};if(!scriptClass){selectorCtrl=new mstrmojo.Label({cssClass:"unsupported",text:"This selector is not supported."});}else{if(selectorStyle===STYLE_PULLDOWN){if(mstrApp&&mstrApp.isVI){cfg.useDarkTheme=!isFilterPanel&&mstrApp.getRootController().isDarkThemeSelected();cfg.scrollNodeMaxHeight=POPUP_LIST_MAX_HEIGHT;cfg.focusOnPopup=true;cfg.allowEmptyText=true;cfg.onitemSelected=cfg.onitemSelected?mstrmojo.func.composite([itemChangeFun,cfg.onitemSelected]):itemChangeFun;cfg.customizeSearchResult=function(result){var resultIdx,allIdx=this.allIdx,multiselect=this.multiSelect,len=result.length,allSrchRes={v:"u;",n:mstrmojo.desc(13976,"(All search results)"),t:ENUM_OBJECT_TYPE.Dimension,_renderIdx:allIdx};if(len!==this.items.length){if(allIdx>=0){resultIdx=$ARR.find(result,"v","u;");if(resultIdx>-1){if(multiselect&&len>1){result.splice(resultIdx,1,allSrchRes);}else{result.splice(resultIdx,1);}}else{if(multiselect&&len>0){result.splice(allIdx,0,allSrchRes);}}}}};cfg.setDefaultListAndIndex=function(oldItems){var popupList=this.getPopupList();popupList.set("items",oldItems);if(!this.multiSelect){popupList.set("selectedIndex",this.selectedIndex);this.set("text",oldItems[this.selectedIndex].n||mstrmojo.desc(14561,"(null)"));}else{this.set("selectedIndices",this.selectedIndices);}};cfg.onclearSelection=function(){var selectedItem=this.getSelectedItem(),popup=this.getPopupList();if(selectedItem){popup.set("selectedIndex",$ARR.find(popup.items,"v",selectedItem.v));}};}}delete cfg.scriptClass;var Clazz=$HASH.walk(scriptClass,mstrmojo);selectorCtrl=new Clazz(cfg);}return selectorCtrl;},getCekEvtListener:function getCekEvtListener(selectorContainer,selectorCtrl){return function(evt){var indices=[],elements=this.node.data.elms,hashMap={};$ARR.forEach(elements,function(ele,idx){hashMap[ele.v]=idx;});$ARR.forEach(evt.value,function(v){var idx=hashMap[v];if(idx>-1){indices.push(idx);}});this.handleActionInSyncPhase(function(){if(selectorCtrl&&selectorCtrl.select){selectorCtrl.select(indices);}});};},newAndInitWidget:function newAndInitWidget(selectorContainer){var selectorWidget,cekEvtListener=selectorContainer._cekEvtListener,node=selectorContainer.node,defn=node.defn,cekContextId=selectorContainer.id,fnCEK;if(cekEvtListener){defn.detachEventListener(cekEvtListener);delete selectorContainer._cekEvtListener;}selectorWidget=this.newSelectorWidget(selectorContainer);if(selectorWidget){fnCEK=this.getCekEvtListener(selectorContainer,selectorWidget);}cekContextId=fnCEK.cekContextId||cekContextId;fnCEK=fnCEK.cekEvtListener||fnCEK;if(fnCEK){selectorContainer._cekEvtListener=defn.attachEventListener("cekChange",cekContextId,fnCEK);}selectorContainer.addChildren(selectorWidget);return selectorWidget;},updateWidget:function updateWidget(selectorContainer){var children=selectorContainer.children,selectorWidget=children&&children[0];if(!selectorWidget){selectorWidget=this.newAndInitWidget(selectorContainer);}else{selectorWidget.set("enabled",this.enabled);}return selectorWidget;}};function checkStyle(styles){return styles.some(function(style){return this.style===style;},this);}function getMetricUnit(){var selector=this;return selector.model.getDatasetUnits(["mx"],function(unit){return unit.did===selector.defn.srcid;})[0]||{};}function getCGBSelectedItems(elements,hasAll,isFirst,isLast,unsetCount,hasTotals,include){if(!elements){return[];}var index=0,i,len=elements.length-(hasTotals?1:0)-(hasAll?1:0),sel=[];if(include){if(isFirst&&hasAll){index++;}else{if(isLast){index=(elements.length-1);if(hasTotals){index--;}}}for(i=0;i<unsetCount;i++){if(isFirst){if(index<=len&&elements[index]){sel.push(elements[index++]);}}else{if(isLast){if(index>=(hasAll?1:0)){sel.push(elements[index--]);}}}}}else{if(isFirst){index=unsetCount;if(hasTotals){index--;}}else{if(isLast){index=0;if(hasAll){index++;}}}for(i=unsetCount+1;i<=len;i++){if(index<=len){sel.push(elements[index++]);}}}return sel;}mstrmojo.DocSelector=mstrmojo.declare(mstrmojo.Container,[mstrmojo._Formattable,mstrmojo._IsSelectorTarget,_isDocSelectorAdaptor,mstrmojo.vi._MonitorsAppState],{scriptClass:"mstrmojo.DocSelector",markupString:'<div id="{@id}" k="{@k}" class="mstrmojo-DocSelector {@cssClass} {@extCls}" nm="{@en@n}" title="{@tooltip}" style="{@domNodeCssText}"><div class="filter" style="{@filterNodeCssText}"></div><div class="wait" style="display:none;z-index:100;position:absolute;top:0;left:0;width:100%;height:100%"></div><div class="content" style="{@contentNodeCssText}"></div></div>',markupSlots:{filterNode:function(){return this.domNode.firstChild;},contentNode:function(){return this.domNode.lastChild;},dimNode:function(){return this.domNode.lastChild;},containerNode:function(){return this.domNode.lastChild;},scrollboxNode:function(){return this.domNode.lastChild;},wIconNode:function(){return this.domNode.childNodes[1];}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onenableChange:mstrmojo.Widget.enabledMarkupMethod,onincludeChange:function(){$CSS.toggleClass(this.domNode,"strikeout",!this.include);},onwaitChange:function(){$CSS.toggleClass(this.domNode,"wait",!!this.wait);this.wIconNode.style.display=((this.wait)?"block":"none");}},_ieformatHandlers:{domNode:["F","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["width","B","P"],filterNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},formatHandlers:{domNode:["F","text-align","vertical-align","line-height","z-index","top","left"],contentNode:["height","width","B","P","fx","background-color"],item:["color","font","text-decoration","text-align","line-height"]},ckey:null,ck:null,tks:null,style:0,selIdx:null,extCls:"",min:-1,max:-1,bGetElems:false,n:"",_inSyncPhase:false,toggleDisplayAll:function toggleDisplayAll(showAll){var node=this.node,data=node.data,defn=node.defn,allElem=$ARR.filterOne(data.elms,function(e){return e.t===14;});if(showAll&&!allElem){allElem=$ALL_ELEM;data.elms=$ARR.insert(data.elms,0,[allElem]);}if(!showAll&&allElem){data.elms=$ARR.filter(data.elms,function(e){return e.t!==14;});}if(this.children&&this.children[0]){var ALLIdx=$ARR.find(data.elms,"v",mstrmojo.elementHelper.ELEM_ALL_ID);this.children[0].items=data.elms;this.children[0].allIdx=ALLIdx;this.children[0].noneIdx=defn.include?-1:ALLIdx;}data[$DATA_PARAMS.ELMSREADY]=true;this.model.setDataReady(this.k,this.id,$DATA_PARAMS.ELMSREADY,true,"elms",data.elms);},init:function init(props){this._super(props);if(mstrmojo.dom.isIE){this.formatHandlers=this._ieformatHandlers;}var defn=props.node.defn,defStyle=defn.style;this.n=defn.n;if(mstrApp.showSelectAllMenuOptionForSelector===1&&defn.multi){switch(defStyle){case STYLE_LIST:case STYLE_CHECKBOX:case STYLE_BUTTON:case STYLE_LINK:this.spm=true;break;}}},_fetchOnInit4UCOnDS:function _fetchOnInt(elements){var isEmptyUCONDS=!this.bGetElems&&parseInt(this.node.defn.subTp,10)===ST_UC_ON_DS,nodeData=this.node.data;if(isEmptyUCONDS||shouldFetchElemsForPause.call(this)){_fetchAllElems.call(this,isEmptyUCONDS);elements=nodeData.elms;}return elements;},initControlInfo:function initControlInfo(){var node=this.node,data=node.data,defn=node.defn,elements=data.elms,currentSelections=data.ces;var defnProps=["include","ckey","ck","tks","style","multi","iase","showall"];elements=this._fetchOnInit4UCOnDS(elements,data);this.type=defn.ct;var fmts=defn.fmts;if(fmts){var w=fmts.width;if(!w||parseInt(w,10)<=0){fmts.width="95px";}}$HASH.copyProps(defnProps,defn,this);var selectedIndices=this.selIdx={},firstRun=false,multi=defn.multi;if((defn.style===STYLE_SLIDER)||multi){if(!this.oces&&(currentSelections!==undefined)){this.oces=$HASH.cloneArray(currentSelections);firstRun=true;}var hasAll=defn.showall,hasAllSelected=($ARR.find(currentSelections,"v",mstrmojo.elementHelper.ELEM_ALL_ID)>-1),isUC=(parseInt(defn.dfm,10)===1),isUnset=(data.unset===true),clearCGBSelections=(!isUC&&isUnset&&(currentSelections&&currentSelections.length===0)),allSelected=(hasAll&&hasAllSelected)||(hasAllSelected&&!isUC&&isUnset)||(hasAll&&isUC&&isUnset);if(allSelected){currentSelections=elements;}else{if(clearCGBSelections){if(!firstRun&&(defn.sus!==1)){var hasTotals=defn.htot,isFirst=(defn.sus===2),isLast=(defn.sus===4),unsetCount=defn.suc||1;currentSelections=getCGBSelectedItems(elements,hasAll,isFirst,isLast,unsetCount,hasTotals,this.include);}else{if(this.oces){currentSelections=this.oces;}}}}}if(currentSelections){var selElements={};$ARR.forEach(currentSelections,function(ele){selElements[escapeInvalidXML(ele.v)]=true;});$ARR.forEach(elements,function(el,idx){if(selElements[escapeInvalidXML(el.v)]){selectedIndices[idx]=true;}});}if(defn.min>=0){this.min=defn.min;}if(defn.max>=0){this.max=defn.max;}if(this.isRecursiveAttributeSelector()){this.levelForms=data.lvfs||[];}},resetFormatHandlers:function resetFormatHandlers(){this.formatHandlers={contentNode:["RW"]};},_getSelectionCount:function getSelectionCount(widget){return $HASH.keyarray(widget.selectedIndices).length;},canApply:function canApply(widget){var defn=this.defn,multi=defn.multi,min=this.min,max=multi?this.max:1,ct=this._getSelectionCount(widget||this.content);return(min>=0&&max>=0&&min>max)||((min<0||min<=ct)&&(max<0||max>=ct));},_buildEvent:mstrmojo.emptyFn,selectorControlChange:function selectorControlChange(widget){var rEvt=getEvent.call(this),filterPanel=this.isInFilterPanel()&&this.getFilterPanel(),controlAutoSubmit=(filterPanel&&filterPanel.isAutoApply());this._buildEvent(rEvt,widget);if(!this.canApply(widget)){var sbp=this.getPanelContainer();if(this.isInSearchBoxPanel(sbp)){sbp.set("canApplySbp",false);}if(controlAutoSubmit){this.set("err",true);mstrmojo.alert(mstrmojo.desc(12297,"One or more selectors are incorrectly set. Please review the selector(s) and try again."));}if(filterPanel){filterPanel.set("applyEnabled",false);}return ;}if(controlAutoSubmit){this.set("err",false);}if(mstrApp.isExpress&&this.node.defn.style===STYLE_PULLDOWN){this.handleExpressPulldown();}if(rEvt.requireToggle){this.deferredEvt=rEvt;this.set("include",rEvt.include);this.deferredEvt=undefined;}else{this.slice(rEvt);}if(this.node.data.unset===true){this.node.data.unset=null;}var model=this.model,ctl=model&&model.controller,view=ctl&&ctl.view,curK=this.k,curLK=this.defn&&this.defn._lkz;$ARR.forEach(view&&view.children,function(child){var defn=child.defn,loaded=defn&&defn.loaded,units=defn&&defn.units;if(loaded&&child.k!==curLK){for(var uk in units){if(uk===curK){if(units[uk].tsk!==""){defn.loaded=false;}break;}}}});},showInfoWin:function showInfoWin(anchor){var defn=this.node&&this.node.defn,ifwtg=defn&&defn.ifw,m=this.model,ifws=[].concat(m.getTargetInfoWin(ifwtg)).concat(m.getTargetInfoWin(this.tks));if(ifws&&ifws.length){var horiz=this.defn.horiz,actualAnchor=anchor||this.contentNode,aPos=$DOM.position(actualAnchor),sPos=$DOM.position(this.contentNode),position=(horiz||parseInt(this.defn.style,10)===STYLE_SLIDER)?null:{x:sPos.x,y:aPos.y,w:sPos.w,h:aPos.h},i;for(i=0;i<ifws.length;i++){m.showInfoWin(ifws[i],actualAnchor,horiz?"v":"h",false,$HASH.copy(position));}}},unrender:function unrender(ignoreDom){delete this.formatHandlers;this._super(ignoreDom);},postBuildRendering:function postBuildRendering(){var style=this.node.defn.style,filterNodeStyle=this.filterNode.style,contentNode=this.contentNode,defn=this.node.defn;if(this.isInFilterPanel()&&!this.isHorizFP()){this.domNode.style.width=this.contentNode.style.width="100%";if(this.formatHandlers.filterNode){this.filterNode.style.width=this.contentNode.style.width="100%";}this.set("visible",parseInt(defn.ds,10)===DS_EXPAND);}this.handleActionInSyncPhase(this._super,this);if(mstrApp.isExpress&&style===STYLE_PULLDOWN){this.handleExpressPulldown();}if(this.isInFilterPanel()&&this.parent.adjustFP){this.parent.adjustFP();}if(this.formatHandlers.filterNode){var f=this.getFormats();if(!f.width){filterNodeStyle.width=contentNode.clientWidth+"px";}if(!f.height){filterNodeStyle.height=contentNode.clientHeight+"px";}}else{filterNodeStyle.display="none";}this.model.attachEventListener("CGBMapChange",this.id,"onCGBMapChange");if($DOM.isAndroid&&style===STYLE_SLIDER){contentNode.style.overflow="visible";}$CSS.toggleClass(this.parent.domNode,"invalid",this.isInvalid);return true;},updateHeight:function updateHeight(){this.contentNode.style.height=this.filterNode.style.height=this.content.getClientHeight()+"px";var parent=this.parent;if(parent&&(parent.defn.ttl!==undefined)&&parent.updateContentHeight){parent.updateContentHeight();}},handleExpressPulldown:function handleExpressPulldown(){var zoomFactor=this.model.getZoomFactor();if(zoomFactor!==1){var pulldownText=this.contentNode.firstChild.firstChild,textHeight=parseInt(window.getComputedStyle(pulldownText).height),newHeight=textHeight*zoomFactor+"px";pulldownText.style.height=newHeight;pulldownText.style.lineHeight=newHeight;}var node=document.createElement("DIV");node.setAttribute("class","mstrmojo-ui-Pulldown-arrow");node.setAttribute("src","#");this.content.selectedNode.appendChild(node);},handleActionInSyncPhase:function syncAction(actionFn,context){var oldSyncState=this._inSyncPhase;this._inSyncPhase=true;try{if(context){actionFn.call(context);}else{actionFn();}}catch(e){throw ("There was an error handling the selector action in sync phase.");}this._inSyncPhase=oldSyncState;},onCGBMapChange:function onCGBMapChange(evt){var cgbMap=evt.cgbMap;if(!cgbMap){return ;}var tks=this.tks;$HASH.forEach(this.defn.cgb,function(key){var targetKey=cgbMap[key];if(targetKey&&tks.indexOf(targetKey)<0){tks+="\u001E"+targetKey;}});this.tks=tks;},onAppStateChange:function onAppStateChange(evt){var appStates=mstrmojo.vi.VisualInsightApp.APP_STATES,pauseMode=appStates.PAUSE,isPauseMode=mstrApp.isAppStatePause&&mstrApp.isAppStatePause(),model=this.model,node=this.node,data=node&&node.data,updateCSKeys=model.updateCSKeysforPause,k=this.k,id=this.id;var wasPauseMode=evt.valueWas&pauseMode;if(data){if(isPauseMode&&!wasPauseMode){if(this.hasAttrData()){var hasData=($ARR.indexOf(updateCSKeys,this.ckey)===-1)&&data.elms&&(data.elms.length>0),isSearchBox=this.style===STYLE_SEARCH_BOX,elmsReady=hasData&&!isSearchBox;data[$DATA_PARAMS.ELMSREADY]=elmsReady;data[$DATA_PARAMS.CESREADY]=hasData;data[$DATA_PARAMS.DISABLED]=!hasData&&!isSearchBox;model.setDataReady(k,id,$DATA_PARAMS.ELMSREADY,elmsReady);model.setDataReady(k,id,$DATA_PARAMS.CESREADY,hasData);model.setDataReady(k,id,$DATA_PARAMS.DISABLED,!hasData&&!isSearchBox);if(!elmsReady&&this.shouldDisableGdde()){this.isInvalid=true;}}else{if(this.hasQualData()){data[$DATA_PARAMS.METRICVALUES]=!mstrConfig.resolveOnly;model.setDataReady(k,id,$DATA_PARAMS.METRICVALUES,!mstrConfig.resolveOnly);data[$DATA_PARAMS.CSREADY]=true;if(this.isAttrQualSelector()&&this.children&&this.children.length){model.setDataReady(k,id,$DATA_PARAMS.CSREADY,true,"cs",this.children[0].cs);}else{model.setDataReady(k,id,$DATA_PARAMS.CSREADY,true);}}}}if(!isPauseMode&&wasPauseMode){if(this.hasAttrData()){data[$DATA_PARAMS.ELMSREADY]=data[$DATA_PARAMS.CESREADY]=data[$DATA_PARAMS.ELMSREQUEST]=data[$DATA_PARAMS.DISABLED]=false;model.setDataReady(k,id,$DATA_PARAMS.DISABLED,false);model.setDataReady(k,id,$DATA_PARAMS.ELMSREADY,false);model.setDataReady(k,id,$DATA_PARAMS.CESREADY,false);model.setDataReady(k,id,$DATA_PARAMS.ELMSREQUEST,false);}else{if(this.hasQualData()){data[$DATA_PARAMS.METRICVALUES]=data[$DATA_PARAMS.CSREADY]=false;model.setDataReady(k,id,$DATA_PARAMS.METRICVALUES,false);model.setDataReady(k,id,$DATA_PARAMS.CSREADY,false);}}}}},update:function update(node){this._super(node);var isPause=mstrApp.isAppStatePause&&mstrApp.isAppStatePause()||mstrConfig.resolveOnly,nodeData=this.node&&this.node.data,model=this.model;if(isPause&&nodeData){if(!node.data){node.data={};}var newNodeData=node.data;if(nodeData[$DATA_PARAMS.CESREADY]){newNodeData.ces=nodeData.ces;newNodeData[$DATA_PARAMS.CESREADY]=nodeData[$DATA_PARAMS.CESREADY];}else{if(!this.hasQualData()){newNodeData.ces=node.defn&&node.defn.ces;newNodeData[$DATA_PARAMS.CESREADY]=true;model.setDataReady(this.k,this.id,$DATA_PARAMS.CESREADY,true,"ces",newNodeData.ces);}}if(nodeData[$DATA_PARAMS.ELMSREADY]){newNodeData[$DATA_PARAMS.ELMSREADY]=nodeData[$DATA_PARAMS.ELMSREADY];newNodeData.elms=nodeData.elms;}if(nodeData[$DATA_PARAMS.DISABLED]){newNodeData[$DATA_PARAMS.DISABLED]=nodeData[$DATA_PARAMS.DISABLED];}if(nodeData[$DATA_PARAMS.METRICVALUES]){newNodeData[$DATA_PARAMS.METRICVALUES]=nodeData[$DATA_PARAMS.METRICVALUES];$U.restoreMetricSelectorProps(newNodeData,nodeData);}if(nodeData[$DATA_PARAMS.CSREADY]){newNodeData[$DATA_PARAMS.CSREADY]=nodeData[$DATA_PARAMS.CSREADY];$U.restoreMetricSelectorSelections(newNodeData,nodeData);}}this.node=node;var defn=this.node.defn,data=this.node.data,style=defn.style,elements=data.elms,parent=this.parent,isScroller=(style===STYLE_SLIDER),isSearchBox=(style===STYLE_SEARCH_BOX),isDynamicSelector=this.isDynamicAttributeSelector(),tempHTMLNode,tagNode;if(isPause){if(data&&defn){if(this.hasAttrData()){model.setDataReady(this.k,this.id,$DATA_PARAMS.CESREADY,true);if(isSearchBox){data.elms=data.ces;data[$DATA_PARAMS.ELMSREADY]=false;data[$DATA_PARAMS.DISABLED]=false;model.setDataReady(this.k,this.id,$DATA_PARAMS.ELMSREADY,false);model.setDataReady(this.k,this.id,$DATA_PARAMS.DISABLED,false);}else{model.setDataReady(this.k,this.id,$DATA_PARAMS.DISABLED,!nodeData[$DATA_PARAMS.ELMSREADY]);}if(!data[$DATA_PARAMS.ELMSREADY]&&this.shouldDisableGdde()){this.isInvalid=true;}}else{if(this.hasQualData()){model.setDataReady(this.k,this.id,$DATA_PARAMS.CSREADY,true);}}}}if(defn.srct===TP_ATTRIBUTE&&defn.srcid&&this.model.getBrowseFormTypes&&this.model.getBrowseFormTypes(defn.srcid).indexOf(FORM_TYPE_HTML_TAG)>-1){tempHTMLNode=window.document.createElement("span");$ARR.forEach(elements,function(element){tempHTMLNode.innerHTML=element.n;tagNode=tempHTMLNode.firstChild;element.n=tagNode&&(tagNode.text||tagNode.alt)||element.n||"";});tagNode=null;tempHTMLNode=null;}if(isScroller&&defn.multi){var allIdx=$ARR.find(elements,"v",mstrmojo.elementHelper.ELEM_ALL_ID);if(allIdx>-1){data.del={idx:allIdx,elem:elements[allIdx]};$ARR.removeIndices(elements,allIdx,1);}}if(defn.sec){var ces=[].concat(node.data.ces||[]);if(parent&&(parent.count!==null&&parent.count!==undefined)){if(isScroller||isDynamicSelector){parent.set("count","");}else{if((ces&&elements&&elements.length)||defn.sos){if(!defn.include){var cesAll=$ARR.find(ces,"v",mstrmojo.elementHelper.ELEM_ALL_ID);if(cesAll>=0){$ARR.removeIndices(ces,cesAll,1);}}var he={};$ARR.forEach(elements,function(e){he[e.v]=true;});ces=$ARR.filter(ces,function(e){return he[e.v];});var countCES=ces,countElements;if(!isSearchBox){if(!defn.multi){countCES=elements;}countElements=elements;}if(node.data.unset){parent.set("count",$ELEMENT_HELPER.buildElemsCountStr(countElements,countElements));}else{parent.set("count",$ELEMENT_HELPER.buildElemsCountStr(countCES,countElements,this.isSelectionExcluded()));}}}}}if(this.content){this.content.allIdx=$ARR.find(this.node.data.elms,"v",ELEM_ALL_ID);}this.initControlInfo();var widget=this.content=this.updateWidget(this);if(!widget){this.set("visible",false);}this.clearCache();},refresh:function refresh(){var parent=this.parent,defn=this.node&&this.node.defn;if(parent&&parent.generateToolbar){parent.set((this.isInFilterPanel()?"baseTitle":"title"),defn.ttl);parent.generateToolbar();}this._super();if(parent.fc&&parent.updateContentHeight){parent.updateContentHeight();}},onselectAllChange:function onselectAllChange(evt){var listObj=this.children&&this.children[0],items=listObj.items,allIdx=listObj.allIdx,sel=listObj.selectedIndices,idx,idxs=[];if(evt.value){if(sel[allIdx]){listObj.removeSelect(allIdx,true);var ir=listObj.itemRenderer,unselect=ir&&ir.unselect;if(unselect){var el=listObj._getItemNode(allIdx);if(el){unselect(el,items[allIdx],allIdx,listObj);}}}for(idx=0;idx<items.length;idx++){if(idx!==allIdx&&!sel[idx]){idxs.push(idx);}}listObj.addSelect(idxs);}else{for(idx in sel){idxs.push(parseInt(idx,10));}listObj.removeSelect(idxs);}},onincludeChange:function onincludeChange(evt){var defn=this.node.defn,include=evt.value,model=this.model,fps=this.isInFilterPanel()&&this.getFilterPanel(),update=model.getDataService().newUpdate(fps);defn.include=this.include=include;if(fps&&fps._bufferedSlices){fps.applyBufferedSlices(true,update);}if(this.style!==STYLE_METRIC_SLIDER&&this.style!==STYLE_ATTR_QUALIFICATION){var rEvt=getEvent.call(this);rEvt.ckey=this.ckey;rEvt.changeInclude=true;if(defn.srct===TP_ATTRIBUTE||defn.srct===TP_CONSOLIDATION){var me=this,m=this.model,k=this.node.k,ds=m.getDataService(),sliceCallback=m.getSliceCallback(rEvt),disablePU=this.isDynamicAttributeSelector(),actions=[ds.getSelectorShowAllAction({ck:defn.ck,ckey:defn.ckey,type:defn.type,showAll:include}),ds.getSelectorIncludeAction({ck:defn.ck,ckey:defn.ckey,type:defn.type,include:include})],callback=$WRAP(sliceCallback,{success:function(res){me.set("wait",false);if(mstrApp.isAppStatePause&&mstrApp.isAppStatePause()){me.toggleDisplayAll(include);}if(!disablePU){m.partialUpdate(res.data,m.getTargetDefn(k));}if(!me.isInFilterPanel()&&me.parent){me.parent.selectVIUnit(me,true);}}});this.showall=this.defn.showall=evt.value;var deferredEvt=this.deferredEvt;if(!!deferredEvt){m.sliceDeferred(update,deferredEvt);}actions=!!deferredEvt?actions.concat(update.actions):(update.actions||[]).concat(actions);this.set("wait",true);m.controller.cmdMgr.execute({execute:function(){this.submit(actions,callback);},urInfo:{extraPuKeys:defn.ck.split("\u001E").slice(1),treesToRender:3}});}else{this.slice(rEvt);}}},getSelectorStyleList:function getSelectorStyleList(){var styles=[],srcType=this.defn.srct;if(this.useAttrStyle()){var isNotInFilterPanel=!this.isInFilterPanel();if(this.isRecursiveAttributeSelector()){return[{n:mstrmojo.desc(4733,"Check Boxes"),v:STYLE_CHECKBOX},{n:mstrmojo.desc(8967,"Search Box"),v:STYLE_SEARCH_BOX},{n:mstrmojo.desc(4729,"Drop-down"),v:STYLE_PULLDOWN}];}styles=[{n:mstrmojo.desc(4733,"Check Boxes"),v:STYLE_CHECKBOX},{n:mstrmojo.desc(4730,"Slider"),v:STYLE_SLIDER}];if(srcType===TP_ATTRIBUTE){styles.push({n:mstrmojo.desc(8967,"Search Box"),v:STYLE_SEARCH_BOX});}if(isNotInFilterPanel){styles=styles.concat([{n:mstrmojo.desc(4735,"Link Bar"),v:STYLE_LINK},{n:mstrmojo.desc(4734,"Button Bar"),v:STYLE_BUTTON}]);}styles=styles.concat([{n:mstrmojo.desc(4732,"Radio Buttons"),v:STYLE_RADIO},{n:mstrmojo.desc(4729,"Drop-down"),v:STYLE_PULLDOWN}]);if(isNotInFilterPanel){styles=styles.concat([{n:mstrmojo.desc(6738,"List Box"),v:STYLE_LIST}]);}var attrUnit=$DS_UTILS.getUnitFromDataset(this.model.datasets,this.defn.srcid,12),hasCalendarForm=attrUnit&&$ARR.some(attrUnit.fs,function(f){return(f.bftp===$BFTP.DATE||f.bftp===$BFTP.DATETIME)&&(f.istf||f.idf);});if(hasCalendarForm&&(attrUnit&&!attrUnit.de)){styles.push({n:mstrmojo.desc(5443,"Calendar"),v:STYLE_ATTR_QUALIFICATION});}}else{if(srcType===TP_METRIC){var node=this.node,defn=node&&node.defn,data=node&&node.data;if((mstrApp.isAppStatePause&&mstrApp.isAppStatePause()||mstrConfig.resolveOnly)&&defn&&defn.style!==STYLE_METRIC_SLIDER&&!(data&&data.max&&data.min)){styles=[{n:mstrmojo.desc(5225,"Qualification"),v:STYLE_METRIC_QUALIFICATION}];}else{styles=[{n:mstrmojo.desc(4730,"Slider"),v:STYLE_METRIC_SLIDER},{n:mstrmojo.desc(5225,"Qualification"),v:STYLE_METRIC_QUALIFICATION}];}}}return styles;},supportsInclude:function isIncludeSupported(){var defn=this.defn;if(this.isRecursiveAttributeSelector()){return !this.isDynamicAttributeSelector();}return((defn.srct===TP_ATTRIBUTE&&!this.hasDE)||(defn.srct===TP_METRIC&&defn.style===STYLE_METRIC_SLIDER))&&!this.isSolrSelector()&&!mstrApp.isInVFConfigMode;},isSelectionExcluded:function isSelectionExcluded(){return this.isDynamicAttributeSelector()&&!this.defn.include;},isSolrSelector:function isSolrSelector(){return this.model.isFromSolrCube(this.defn.srcid);},isMetricSelector:function isMetricSelector(){return this.defn.srct===TP_METRIC;},isRankMetricSelector:function isRankMetricSelector(){var func=getMetricUnit.call(this).f;return func&&typeof func==="string"&&func.search(/rank/i)===0;},isNumericMetricSelector:function isNumericMetricSelector(){var dt=getMetricUnit.call(this).dt;return this.model.isNumericDataType(dt);},isAttributeSelector:function isAttributeSelector(){return this.defn.srct===TP_ATTRIBUTE;},supportsShowAllToggle:function supportsShowAllToggle(){return this.defn.srct===TP_ATTRIBUTE||this.defn.srct===TP_CONSOLIDATION||(this.defn.srct===TP_FILTER&&this.defn.srcst===STP_CUSTOM_GROUP);},useAttrStyle:function useAttrStyle(){var srcType=this.defn.srct;return srcType===TP_FILTER||srcType===TP_ATTRIBUTE||srcType===TP_CONSOLIDATION;},hasAttrData:function hasAttrData(){return this.useAttrStyle()&&!this.isAttrQualSelector();},hasQualData:function hasQualData(){return this.isAttrQualSelector()||this.isMetricSelector();},isDerivedAttributeSelector:function isDerivedAttributeSelector(){return this.defn.srct===TP_ATTRIBUTE&&this.defn.srcst===STP_DERIVED_ATTRIBUTE;},isNewDerivedElementSelector:function isNewDerivedElementSelector(){return this.defn.srct===TP_CONSOLIDATION&&this.defn.srcst===STP_DERIVED_ELEMENT;},isNewDerivedRecursiveElementSelector:function isNewDerivedRecursiveElementSelector(){return this.isNewDerivedElementSelector()&&this.defn.ndetype===ENUM_CONSOLIDATION_TYPE.DssRecursiveDerivedElement;},isAttrQualSelector:function isAttrQualSelector(){return this.defn.srct===TP_ATTRIBUTE&&this.defn.style===STYLE_ATTR_QUALIFICATION;},isRecursiveAttributeSelector:function isRecursiveAttributeSelector(){var defn=this.defn;return defn.srct===TP_ATTRIBUTE&&defn.srcst===STP_RECURSIVE_ATTRIBUTE||this.isNewDerivedRecursiveElementSelector();},isDynamicAttributeSelector:function isDynamicAttributeSelector(){return this.isRecursiveAttributeSelector()&&this.isInFilterPanel()&&this.defn.style===STYLE_CHECKBOX;},allowsOrientationChange:function allowsOrientationChange(){return !this.isAttrQualSelector()&&!checkStyle.call(this,[STYLE_SEARCH_BOX,STYLE_LIST,STYLE_PULLDOWN,STYLE_SLIDER,STYLE_METRIC_SLIDER,STYLE_METRIC_QUALIFICATION]);},isSearchBox:function isSearchBox(){return checkStyle.call(this,[STYLE_SEARCH_BOX]);},isAttrElemListSelector:function isAttrElemListSelector(){return this.defn.srct===TP_ATTRIBUTE&&this.defn.style!==STYLE_ATTR_QUALIFICATION;},isCGSelector:function isCGSelector(){return this.defn.srcst===STP_CUSTOM_GROUP;},isGeoSelector:function isGeoSelector(){var attrUnit=$DS_UTILS.getUnitFromDataset(this.model.datasets,this.defn.srcid,12);return !!attrUnit&&$DS_UTILS.isGeoAttr(attrUnit);},shouldDisableGdde:function shouldDisableGdde(){return this.isCGSelector()||this.isGeoSelector();},getInvalidTooltip:function getInvalidTooltip(){var tooltipText=mstrmojo.desc(15787,"Unable to retrieve the list of elements for this filter")+mstrmojo.desc(1006,"."),resumeText=" "+mstrmojo.desc(15931,"Please resume data retrieval to use this filter.");if(this.isCGSelector()){tooltipText=mstrmojo.desc(15924,"This Filter is based on a Custom Group, which is not supported when data retrieval is paused.")+resumeText;}else{if(this.isGeoSelector()){tooltipText=mstrmojo.desc(15932,"This filter is based on a Geo Attribute, which is not supported when data retrieval is paused.")+resumeText;}}return tooltipText;},slice:function slice(rEvt){var m=this.model;if(rEvt&&rEvt.eid){rEvt.eid=escapeInvalidXML(rEvt.eid);}if(m.closeSelWarnFlag){m.closeSelWarnFlag(this.k);}if(this.isInFilterPanel()){var fp=this.getFilterPanel();if(fp&&!fp.isAutoApply()){fp.bufferSlice(rEvt);return ;}}var sbp=this.getPanelContainer();if(this.isInSearchBoxPanel(sbp)){sbp.parent.bufferSlice(rEvt);sbp.set("canApplySbp",sbp.canApplySearchBoxPanel());return ;}var panelStack=sbp&&sbp.parent;if(panelStack&&panelStack.bufferSlice&&panelStack.hasDisabledSelectionApply&&panelStack.hasDisabledSelectionApply()&&rEvt&&!rEvt.forceApply){panelStack.bufferSlice(rEvt);return ;}m.slice(rEvt);},isInFilterPanel:function isInFilterPanel(){var parent=this.parent;return(parent&&parent.isInFilterPanel&&parent.isInFilterPanel())||false;},isHorizFP:function isHorizFP(){var parent=this.parent;return(parent&&parent.isHorizFP&&parent.isHorizFP())||false;},getFilterPanel:function getFilterPanel(){var parent=this.parent;return(parent&&parent.getFilterPanel&&parent.getFilterPanel())||null;},isInSearchBoxPanel:function(panel){var p=panel||this.getPanelContainer();return p&&(p.isSbp||(p._isSearchBoxPanel&&p._isSearchBoxPanel()));},getPanelContainer:function(){var en=mstrmojo.EnumRWUnitType,p;for(p=this.parent;p&&p.defn;p=p.parent){if(parseInt(p.defn.t,10)===en.PANEL){return p;}}return null;},clearSelector:function clearSelector(applyNow){var evt=getEvent.call(this),elementIDs=[ELEM_ALL_ID],elements=this.node.data.elms||[],elementSeparator="\u001E",style=this.style,include=this.defn.include,filteringNothing=this.isFilterNothing&&this.isFilterNothing(),defn=this.node.defn,isCustGroupOrCons=defn.srcst===257||(defn.srct===47&&defn.srcst!==12033),selectAllForUnset=mstrApp&&mstrApp.getSelectAllForUnsetForVI&&mstrApp.getSelectAllForUnsetForVI(),allItem=[$ALL_ELEM],paramFlag=$DATA_PARAMS.CESREADY,prop="ces",value=[],isPauseMode=mstrApp.isAppStatePause&&mstrApp.isAppStatePause();if(style===STYLE_SEARCH_BOX){if(selectAllForUnset){evt.eid=elementIDs.join(elementSeparator);value=allItem;}else{evt.ckey=this.ckey;evt.unset=true;}this.defn.set("cek",[]);}else{if(style===STYLE_METRIC_SLIDER||style===STYLE_METRIC_QUALIFICATION){evt.cs="";evt.ckey=this.ckey;evt.unset=true;defn.set("cek",{cs:null,qua:this.qua,include:include,f:null,ft:null});paramFlag=$DATA_PARAMS.CSREADY;prop=["f","ft","cs"];value=[null,null,""];}else{if(style===STYLE_ATTR_QUALIFICATION){evt.unset=true;evt.ckey=this.ckey;var cs=[{v:""},{v:""}];defn.set("cek",{cs:cs});paramFlag=$DATA_PARAMS.CSREADY;prop="cs";value=cs;}else{if(selectAllForUnset){evt.eid=elementIDs.join(elementSeparator);value=allItem;}else{evt.ckey=this.ckey;evt.unset=true;}var firstItem;if((include||style===STYLE_SLIDER)&&this.multi){$ARR.forEach(elements,function(elem){var v=elem.v;if(elementIDs[0]!==v){elementIDs.push(v);if(!firstItem){firstItem=[elem];}}});}var unsetToAll=include||style===STYLE_SLIDER;if(!isCustGroupOrCons){defn.set("cek",unsetToAll?elementIDs:[]);value=unsetToAll?allItem:[];}else{if(isPauseMode){defn.set("cek",(unsetToAll&&elementIDs.length>1)?[elementIDs[1]]:[]);}value=firstItem||[];}prop="ces";}}}if(this.defn.sec&&style!==STYLE_SLIDER){this.parent.set("count",style===STYLE_SEARCH_BOX?"":$ELEMENT_HELPER.buildElemsCountStr(elementIDs,elements,this.isSelectionExcluded()));}evt[applyNow?"forceApply":"forceBuffer"]=true;if(filteringNothing&&!isCustGroupOrCons){evt.ignoreTargetData=true;}evt.retrieveCtrlKey=isCustGroupOrCons;if(isPauseMode){var docModel=this.model,layoutDefn=docModel.getCurrentLayoutDef(),units=layoutDefn&&layoutDefn.units,ctlKey=this.k;if(units&&units[ctlKey]){units[ctlKey].cesChange=false;}docModel.setDataReady(ctlKey,this.id,paramFlag,true,prop,value);}this.slice(evt);},allowsTogglingMultiSelect:function allowsTogglingMultiSelect(){return checkStyle.call(this,[STYLE_PULLDOWN,STYLE_BUTTON,STYLE_LINK,STYLE_SEARCH_BOX,STYLE_SLIDER,STYLE_LIST]);},allowsTogglingAutoSearch:function allowsTogglingAutoSearch(){return !this.isRecursiveAttributeSelector()&&checkStyle.call(this,[STYLE_SEARCH_BOX]);},allowsSameSizeItems:function allowsSameSizeItems(){return checkStyle.call(this,[STYLE_CHECKBOX,STYLE_RADIO,STYLE_BUTTON,STYLE_LINK])&&!this.isRecursiveAttributeSelector();},supportsSetTarget:function supportsSetTarget(){var definition=this.defn;return this.isAttrElemListSelector()||(definition.srct===TP_CONSOLIDATION||definition.srcst===STP_CUSTOM_GROUP);},supportSelectionColor:function supportSelectionColor(){return checkStyle.call(this,[STYLE_LIST,STYLE_LINK]);}});mstrmojo.DocSelector.UC_ON_DS=ST_UC_ON_DS;mstrmojo.DocSelector.STYLES={PULLDOWN:STYLE_PULLDOWN,SCROLLER:STYLE_SLIDER,LIST:STYLE_LIST,RADIO:STYLE_RADIO,CHECKBOX:STYLE_CHECKBOX,BUTTON:STYLE_BUTTON,LINK:STYLE_LINK,METRIC_SLIDER:STYLE_METRIC_SLIDER,METRIC_QUAL:STYLE_METRIC_QUALIFICATION,SEARCH_BOX:STYLE_SEARCH_BOX,TEXT_BOX:STYLE_TEXT_BOX,ATTR_QUAL:STYLE_ATTR_QUALIFICATION,VISUALIZATION:STYLE_VISUALIZATION_FILTER};mstrmojo.DocSelector.DATAPARAMS={CESREADY:"cesReady",ELMSREADY:"elmsReady",ELMSREQUEST:"elemsRequest",METRICVALUES:"metricValues",CSREADY:"csReady",DISABLED:"disabled"};var $DATA_PARAMS=mstrmojo.DocSelector.DATAPARAMS;}());