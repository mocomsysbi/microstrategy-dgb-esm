(function(){mstrmojo.requiresCls("mstrmojo._FillsBrowser","mstrmojo._HasLayout","mstrmojo.DI.DIFooter","mstrmojo.DI.DIFileUpload","mstrmojo.DI.DIURLUpload","mstrmojo.DI.DISampleFiles","mstrmojo.DI.DIPreview","mstrmojo.DI.DIExitOptions","mstrmojo.DI.DISourceList","mstrmojo.DI.DICubesList","mstrmojo.DI.DISourceIntro","mstrmojo.DI.DIDatabaseIntro","mstrmojo.DI.ProgressPolyfill","mstrmojo.DI.DISourceObjects","mstrmojo.DI.DISourceObjectsGA","mstrmojo.DI.DIDataset","mstrmojo.DI.DIMappingPage","mstrmojo.DI.TableSources","mstrmojo.DI.DIClipboard","mstrmojo.DI.DIPublicData","mstrmojo.qb.QBContainer","mstrmojo.DI.DIHadoop","mstrmojo.DI.DITwitterPage","mstrmojo.DI.DIFacebookPage","mstrmojo.DI.DISourceObjectsDnD","mstrmojo.ui.SearchablePulldown","mstrmojo.DI.DIRemoteProjects","mstrmojo.DI.DIHelpers","mstrmojo.DI.DIWorkstationHelpers","mstrmojo.css","mstrmojo.DI.DISourceListAdmin","mstrmojo.DI.DISearchTableBox","mstrmojo.DI.DIToolbar","mstrmojo.hash");mstrmojo.requiresDescs(118,172,531,773,1059,1143,1302,3389,7972,10236,10766,11677,12446,12479,12480,12484,12490,12715,12716,12721,12722,12723,12752,12805,12806,13152,13308,13466,13467,13468,13469,13612,13781,13852,13978,14512,14791,4381,14825,14826,12444,12712,14907,14908,15350,15351,15352,15353);var $WIDGET=mstrmojo.Widget,$DOM=mstrmojo.dom,$HELPER=mstrmojo.DI.DIHelpers,$H=mstrmojo.hash,constants=mstrmojo.DI.DIConstants,$WSHelpers=mstrmojo.DI.DIWorkstationHelpers,pageType=constants.pageType,operationMode=constants.operationMode,$ARR=mstrmojo.array,$CSS=mstrmojo.css,GRID_MODE=constants.mainPage.GRID_MODE,LIST_MODE=constants.mainPage.LIST_MODE;var responsivePage=[pageType.dataSelection,pageType.sourceAdmin,pageType.emmaPreview];var allProjectPage={scriptClass:"mstrmojo.DI.DIRemoteProjects",alias:"allProjectPage",pageType:pageType.allProjectSource,slot:"layoutNode"};var hadoopPage={scriptClass:"mstrmojo.DI.DIHadoop",alias:"hadoopPage",pageType:pageType.hadoop,slot:"layoutNode",size:{h:"552px",w:"1010px"}};var mstrFileUpload={scriptClass:"mstrmojo.DI.DIMstrUpload",alias:"mstrFileUpload",slot:"layoutNode"};var fileUploadPage={scriptClass:"mstrmojo.DI.DIFileUpload",pageType:pageType.file,slot:"layoutNode",size:{h:"552px",w:"1010px"}};var urlUploadPage={scriptClass:"mstrmojo.DI.DIURLUpload",pageType:pageType.file,slot:"layoutNode",size:{h:"552px",w:"1010px"}};var clipboardPage={scriptClass:"mstrmojo.DI.DIClipboard",alias:"clipboardPage",cssClassLabel:"mstrmojo-clipboard-label",pageType:pageType.clipboard,slot:"layoutNode",size:{h:"552px",w:"1010px"}};var publicDataPage={scriptClass:"mstrmojo.DI.DIPublicData",pageType:pageType.publicData,slot:"layoutNode",size:{h:"557px",w:"1010px"}};var databasePage={scriptClass:"mstrmojo.DI.DIDatabaseIntro",pageType:pageType.database,slot:"layoutNode",size:{w:"1328px",h:"636px"}};var singleTableQB={scriptClass:"mstrmojo.qb.QBContainer",pageType:pageType.database,slot:"layoutNode",size:{w:"1328px",h:"636px"}};var datasetPage={scriptClass:"mstrmojo.DI.DIDataset",pageType:pageType.dataset,slot:"layoutNode"};var sampleFilesPage={scriptClass:"mstrmojo.DI.DISampleFiles",pageType:pageType.sampleFiles,slot:"layoutNode",size:{h:"552px",w:"1010px"}};var sourceList={scriptClass:"mstrmojo.DI.DISourceList",alias:"sourceList",pageType:pageType.dataSelection,slot:"layoutNode",size:{h:"557px",w:"1010px"}};var sourceObjectsPage={scriptClass:"mstrmojo.DI.DISourceObjects",pageType:pageType.sourceObjects,slot:"layoutNode"};var sourceObjectsDnDPage={scriptClass:"mstrmojo.DI.DISourceObjectsDnD",pageType:pageType.sourceObjectsDnD,slot:"layoutNode",size:{h:"556px",w:"1010px"}};var sourceObjectsGAPage={scriptClass:"mstrmojo.DI.DISourceObjectsGA",alias:"sourceObjectsPage",pageType:pageType.sourceObjects,slot:"layoutNode",size:{h:"552px",w:"1010px"}};var emptyPage={scriptClass:"mstrmojo.Box",alias:"emptyPage",slot:"layoutNode",size:{h:"557px",w:"1010px"}};var previewPage={scriptClass:"mstrmojo.DI.DIPreview",pageType:pageType.preview,slot:"layoutNode"};var MTDIPage={scriptClass:"mstrmojo.DI.DIMappingPage",pageType:pageType.emmaPreview,slot:"layoutNode",size:{w:"95%",h:"95%"},pageRatio:0.95};var footer={scriptClass:"mstrmojo.DI.DIFooter",slot:"footerNode",alias:"footer"};var redirect={scriptClass:"mstrmojo.DI.DIExitOptions",pageType:pageType.redirect,slot:"layoutNode",size:{h:"380px",w:"440px"}};var twitterPage={scriptClass:"mstrmojo.DI.DITwitterPage",pageType:pageType.twitter,slot:"layoutNode",size:{h:"552px",w:"1010px"}};var facebookPage={scriptClass:"mstrmojo.DI.DIFacebookPage",pageType:pageType.facebook,slot:"layoutNode",size:{h:"552px",w:"1010px"}};var sourceAdminPage={scriptClass:"mstrmojo.DI.DISourceListAdmin",pageType:pageType.sourceAdmin,slot:"layoutNode",size:{h:"557px",w:"1010px"}};var virtualHeader={scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-di-virtul-header-container",slot:"virtualHeaderNode",alias:"virtualHeader",isHeader:true,ontitleTextChange:function(){if(this.hasRendered){this.title.set("text",this.titleText);}},onsubtitleTextChange:function(){if(this.hasRendered){this.subtitle.set("text",this.subtitleText);}},children:[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-di-title",alias:"title",text:mstrmojo.desc(4381,"Data Sources")},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-di-title mstrmojo-di-subtitle",alias:"subtitle",ontextChange:function ontextChange(evt){if(evt.value!==""){this.text="("+evt.value+")";}else{this.text="";}}},{scriptClass:"mstrmojo.Button",cssClass:"di-title-btn",iconClass:"mstrmojo-di-close",alias:"closeBtn",title:mstrmojo.desc(2102,"Close"),tooltipOpenDelay:0,useRichTooltip:true,updateTooltipConfig:function(){var pos=$DOM.position(this.domNode);this.set("richTooltip",{cssClass:"vi-regular A-center vi-tooltip-A",top:Math.max(pos.y+40,0),left:Math.max(pos.x+4,0),posType:mstrmojo.tooltip.POS_TOPCENTER,content:this.title});},onclick:function(){this._ontooltipout();mstrApp.getRootController().onCancelButtonClick();},premousedown:function(){$CSS.toggleClass(this.domNode,"hit",true);},premouseup:function(){$CSS.toggleClass(this.domNode,"hit",false);}},{scriptClass:"mstrmojo.Button",cssClass:"di-title-btn",iconClass:"mstrmojo-di-help",title:mstrmojo.desc(1143,"Help"),tooltipOpenDelay:0,useRichTooltip:true,bindings:{visible:function(){return true;}},updateTooltipConfig:function(){var pos=$DOM.position(this.domNode);this.set("richTooltip",{cssClass:"vi-regular A-center vi-tooltip-A",top:Math.max(pos.y+40,0),left:Math.max(pos.x+4,0),posType:mstrmojo.tooltip.POS_TOPCENTER,content:this.title});},onclick:function(){mstrApp.getRootController().onHelpButtonClick();},premousedown:function(){$CSS.toggleClass(this.domNode,"hit",true);},premouseup:function(){$CSS.toggleClass(this.domNode,"hit",false);}},{alias:"customizeButton",scriptClass:"mstrmojo.Button",cssClass:"di-title-btn",iconClass:"mstrmojo-di-customize",title:mstrmojo.desc(14512,"Customize your page"),tooltipOpenDelay:0,useRichTooltip:true,visible:false,updateTooltipConfig:function(){var pos=$DOM.position(this.domNode);this.set("richTooltip",{cssClass:"vi-regular A-center vi-tooltip-A",top:Math.max(pos.y+40,0),left:Math.max(pos.x+4,0),posType:mstrmojo.tooltip.POS_TOPCENTER,content:this.title});},onclick:function(){mstrApp.getRootController().showPage(constants.pageType.sourceAdmin);},premousedown:function(){$CSS.toggleClass(this.domNode,"hit",true);},premouseup:function(){$CSS.toggleClass(this.domNode,"hit",false);}}]};var header={scriptClass:"mstrmojo.Box",slot:"headerNode",alias:"header",isHeader:true,ontitleTextChange:function(){if(this.hasRendered){this.title.set("text",this.titleText);}},onsubtitleTextChange:function(){if(this.hasRendered){this.subtitle.set("text",this.subtitleText);}},children:[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-di-title",alias:"title",text:mstrmojo.desc(4381,"Data Sources")},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-di-title mstrmojo-di-subtitle",alias:"subtitle",ontextChange:function ontextChange(evt){if(evt.value!==""){this.text="("+evt.value+")";}else{this.text="";}}},{scriptClass:"mstrmojo.Button",cssClass:"di-title-btn",iconClass:"mstrmojo-di-close",alias:"closeBtn",title:mstrmojo.desc(2102,"Close"),tooltipOpenDelay:0,useRichTooltip:true,updateTooltipConfig:function(){var pos=$DOM.position(this.domNode);this.set("richTooltip",{cssClass:"vi-regular A-center vi-tooltip-A",top:Math.max(pos.y+40,0),left:Math.max(pos.x+4,0),posType:mstrmojo.tooltip.POS_TOPCENTER,content:this.title});},onclick:function(){this._ontooltipout();mstrApp.getRootController().onCancelButtonClick();},premousedown:function(){$CSS.toggleClass(this.domNode,"hit",true);},premouseup:function(){$CSS.toggleClass(this.domNode,"hit",false);}},{scriptClass:"mstrmojo.Button",cssClass:"di-title-btn",iconClass:"mstrmojo-di-help",title:mstrmojo.desc(1143,"Help"),tooltipOpenDelay:0,useRichTooltip:true,updateTooltipConfig:function(){var pos=$DOM.position(this.domNode);this.set("richTooltip",{cssClass:"vi-regular A-center vi-tooltip-A",top:Math.max(pos.y+40,0),left:Math.max(pos.x+4,0),posType:mstrmojo.tooltip.POS_TOPCENTER,content:this.title});},onclick:function(){mstrApp.getRootController().onHelpButtonClick();},premousedown:function(){$CSS.toggleClass(this.domNode,"hit",true);},premouseup:function(){$CSS.toggleClass(this.domNode,"hit",false);}},{alias:"customizeButton",scriptClass:"mstrmojo.Button",cssClass:"di-title-btn",iconClass:"mstrmojo-di-customize",title:mstrmojo.desc(14512,"Customize your page"),tooltipOpenDelay:0,useRichTooltip:true,visible:false,updateTooltipConfig:function(){var pos=$DOM.position(this.domNode);this.set("richTooltip",{cssClass:"vi-regular A-center vi-tooltip-A",top:Math.max(pos.y+40,0),left:Math.max(pos.x+4,0),posType:mstrmojo.tooltip.POS_TOPCENTER,content:this.title});},onclick:function(){mstrApp.getRootController().showPage(constants.pageType.sourceAdmin);},premousedown:function(){$CSS.toggleClass(this.domNode,"hit",true);},premouseup:function(){$CSS.toggleClass(this.domNode,"hit",false);}},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(12668,"All Objects View")+"...",visible:false,cssClass:"all-objects-view-link",alias:"allObjectsLink",onclick:function showAllObjects(){mstrApp.getRootController().allObjectsController.showAllObjects();}},{scriptClass:"mstrmojo.DI.DISearchTableBox",alias:"searchTable",visible:false}]};var sourceObjectsPages={};var sourceIntroPages={};var pT=new Array(pageType.emmaPreview,pageType.dataSelection);function getPopupWindowOptions(){var wnd_settings={};var screenX=window.screenX||window.screenLeft||0,screenY=window.screenY||window.screenTop||0,wndW=800,wndH=600,wnd_options;if(document.body&&document.body.offsetWidth){wndW=document.body.offsetWidth;wndH=document.body.offsetHeight;}if(document.compatMode==="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth){wndW=document.documentElement.offsetWidth;wndH=document.documentElement.offsetHeight;}if(window.innerWidth&&window.innerHeight){wndW=window.innerWidth;wndH=window.innerHeight;}if(window.outerWidth){wndW=window.outerWidth;}if(window.outerHeight){wndH=window.outerHeight;}wnd_settings.height=wndH*0.5;wnd_settings.width=wndW*0.8;if(wnd_settings.height<600||isNaN(wnd_settings.height)){wnd_settings.height=600;}if(wnd_settings.width<800||isNaN(wnd_settings.width)){wnd_settings.width=800;}wnd_settings.left=screenX+(wndW-wnd_settings.width)/2;wnd_settings.top=screenY+(wndH-wnd_settings.height)/8;wnd_options="width="+wnd_settings.width+",height="+wnd_settings.height;wnd_options+=",toolbar=0,scrollbars=1,status=1,resizable=1,location=1,menuBar=0";wnd_options+=",left="+wnd_settings.left+",top="+wnd_settings.top;return wnd_options;}function createOAuthPopupWindow(authURL){var wnd,wnd_options;wnd_options=getPopupWindowOptions();if(!authURL){authURL="";}wnd=window.open(authURL,"Authorization",wnd_options);return{wnd:wnd};}function openOAuthPopupWindow(wnd,authURL){var r;if(wnd&&!wnd.closed){wnd.location=authURL;wnd.focus();}else{r=createOAuthPopupWindow(authURL);wnd=r.wnd;if(wnd){wnd.focus();}}return wnd;}function tableParse(str){var urlObject=JSON.parse(str);var urlList=new Array();for(var i=0;i<urlObject.tableList.length;i++){var tablename=urlObject.tableList[i];urlList[i]="TABLENAME="+tablename.tableName+";GENERICPARA={"+JSON.stringify(urlObject)+"};";}return urlList;}function createPage(newPage,model,title,slot,inPageDialog){var page=null;var cfg=newPage,cfg_clone,toolbarHeight=0;if(slot){page=slot.get();}if((cfg.pageType===pageType.emmaPreview||cfg.pageType===pageType.dataSelection)&&this.toolbarNode){toolbarHeight=this.toolbarNode.offsetHeight;}if(!!$HELPER.isWS()&&!mstrApp.isPopup&&!inPageDialog&&cfg.size){$WSHelpers.setNativeWindow(cfg.size.w,cfg.size.h);}if(!!$HELPER.isWS()&&this.header&&!!cfg.pageType&&(pT.indexOf(cfg.pageType))<0){this.headerNode.style.display="none";this.layoutNode.style.height=parseInt(this.height,10)-(this.footerHeight+this.layoutBorder+this.virtualHeaderHeight)+"px";this.set("headerHeight",0);this.setDimensions(this.height,this.width);this.windowResize({h:this.height,w:this.width});}else{this.headerNode.style.display="block";this.set("headerHeight",this.headerNode?this.headerNode.offsetHeight:0);this.layoutNode.style.height=parseInt(this.height,10)-(this.headerHeight+this.footerHeight+this.layoutBorder+this.virtualHeaderHeight+toolbarHeight)+"px";this.setDimensions(this.height,this.width);this.windowResize({h:this.height,w:this.width});}if(!!$HELPER.isWS()&&(!!mstrApp.isPopup||!!inPageDialog)){this.virtualHeaderNode.style.display="block";}else{this.virtualHeaderNode.style.display="none";}if(!page){if(model){newPage.model=model;}if(slot&&slot.getConfig()){cfg=slot.getConfig().properties||{};cfg=mstrmojo.hash.copy(newPage,cfg);}if(!!$HELPER.isWS()&&!mstrApp.isPopup&&!!inPageDialog&&cfg.size.h){cfg_clone=JSON.parse(JSON.stringify(cfg));cfg_clone.size.h=parseInt(cfg_clone.size.h,10)+this.virtualHeaderHeight+"px";cfg_clone.model=model;page=this.addChildren(mstrmojo.insert(cfg_clone));}else{page=this.addChildren(mstrmojo.insert(cfg));}page.render();if(page.alias==="sourceIntroPage"){sourceIntroPages[newPage.sourceInfo.id]=page;}if(newPage.sourceObjectsInfo){sourceObjectsPages[newPage.sourceObjectsInfo.name]=page;}if(slot){slot.set(page);}}this.currentPage=page;if(slot.getConfig()&&page.updatePageConfig){page.updatePageConfig(slot.getConfig());}if(this.header&&!this.virtualHeader){this.header.set("titleText",title);}else{if(this.virtualHeader){this.virtualHeader.set("titleText",title);}}if(title==="Preview"&&$HELPER.getEnvObj().isWSWin()&&!$HELPER.getEnvObj().isDIinVI()){this.headerNode.style.borderTop="solid 1px #d7d7d7";}if(slot){window.setTimeout(function(){slot.destroy();},0);}}function resizeCurtainNode(){var curtainNode=this.curtainNode;if(!curtainNode){return ;}var body=document.body,docElement=document.documentElement,cs=curtainNode.style;cs.width=Math.max(body.clientWidth,docElement.scrollWidth)+"px";cs.height=Math.max(body.clientHeight,docElement.scrollHeight)+"px";}function centralizeNode(){if(this.domNode){var dn=this.domNode,dnStyle=dn&&dn.style;if(dnStyle){dnStyle.height=this.height;dnStyle.width=this.width;}mstrmojo.dom.center(this.domNode);$HELPER.reevaluatePopupPosition(this.domNode);if(this.parent&&this.parent.setPosition){this.parent.setPosition(dnStyle.left,dnStyle.top);}}}function getTitleForSourceObjects(sourceType){var title;switch(sourceType){case constants.sourceType.salesforce:title=mstrmojo.desc(15350,"Data from Salesforce");break;case constants.sourceType.dropbox:title=mstrmojo.desc(15351,"Data from Dropbox");break;case constants.sourceType.googleAnalytics:title=mstrmojo.desc(15352,"Data from Google Analytics");break;case constants.sourceType.googleDrive:title=mstrmojo.desc(15353,"Data from Google Drive");break;default:title=mstrmojo.desc(10766,"Select Data");break;}return title;}function getSize(size,isBrowserResize){var browserSize=this.getBrowserDimensions(),retSize={},pt=$H.walk("currentPage.pageType",this);var browserWidth=parseInt(browserSize.w,10);if(responsivePage.indexOf(pt)>=0){if(pt===pageType.emmaPreview&&($HELPER.getEnvObj().isWeb()||$HELPER.getEnvObj().isWSDossier())){return $WSHelpers.getResponsivePageSize.call(this,isBrowserResize,this.inPageDialog,MTDIPage.pageRatio);}return $WSHelpers.getResponsivePageSize.call(this,isBrowserResize,this.inPageDialog);}if(size.h.match(/%$/)){retSize.h=parseInt(browserSize.h,10)*parseInt(size.h,10)/100+"px";}else{retSize.h=size.h;}if(mstrApp.isPopup){if(browserWidth>=800&&browserWidth<=1063){retSize.w=(browserWidth*0.95)+"px";return retSize;}}if(mstrApp.isPopup){if(browserWidth<800){retSize.w="760px";return retSize;}}if(size.w.match(/%$/)){retSize.w=browserWidth*parseInt(size.w,10)/100+"px";}else{retSize.w=size.w;}return retSize;}function getIsHadoopQB(tableID){var source=mstrApp.getRootController().getModel().getImportSource(tableID),isHadoop=false;if(!source){return isHadoop;}switch(source.databaseType){case 3100:case 4100:case 7300:case 6800:case 6400:case 8100:isHadoop=true;break;case 700:isHadoop=$ARR.indexOf(constants.ibmDb2Versions,source.databaseVersion)===-1;break;default:break;}return isHadoop;}mstrmojo.DI.DIRootView=mstrmojo.declare(mstrmojo.Container,[mstrmojo._FillsBrowser,mstrmojo._HasLayout],{scriptClass:"mstrmojo.DI.DIRootView",markupString:'<div id="{@id}" class="mstrmojo-di-view {@cssClass}" mstrAttach:contextmenu><div class="mstrmojo-di-virtul-header"></div><div class="mstrmojo-di-header"></div><div class="mstrmojo-di-toolbar"></div><div class="mstrmojo-di-layout"></div><div class="mstrmojo-di-footer"></div><div class="mstrmojo-di-curtain"></div></div>',markupSlots:{virtualHeaderNode:function(){return this.domNode.children[0];},headerNode:function(){return this.domNode.children[1];},toolbarNode:function(){return this.domNode.children[2];},layoutNode:function(){return this.domNode.children[3];},footerNode:function(){return this.domNode.children[4];},curtainNode:function(){return this.domNode.children[5];}},offsetHeight:45,offsetWidth:1,headerHeight:41,footerHeight:56,layoutBorder:2,virtualHeaderHeight:0,showHeader:true,visible:false,saveVisualTime:4000,saveVisualTimeoutID:null,saveVisualTimeoutFn:null,inPageDialog:false,markupMethods:{onvisibleChange:$WIDGET.visibleMarkupMethod,onheightChange:$WIDGET.heightMarkupMethod,onwidthChange:$WIDGET.widthMarkupMethod},showPage:function showPage(page,sourceInfo,slot,footerCfg){var controller=mstrApp.getRootController(),model=controller.getModel();if(sourceInfo){if(($HELPER.isOnetier()||$HELPER.isWS())&&sourceInfo.checkConectivity&&window.FormWrapper.testInternetConnection()!==0){var errorMessage=mstrmojo.desc(13961,"No Internet connection. You can configure an Internet proxy through your computer's #."),replaceStr='<a href="" onclick="mstrApp.getRootController().dialogController.close(mstrmojo.DI.DIConstants.dialogType.errorDialog);window.setTimeout(function(){window.FormWrapper.showProxyEditor();},100);return false;">'+mstrmojo.desc(14125,"settings")+"</a>";errorMessage=errorMessage.replace("#",replaceStr)+".";controller.displayError(errorMessage,false,"",null,mstrmojo.desc(11812,"Notification"));return ;}}this.set("visible",true);this.clearModalNodes();this.raiseEvent({name:"preShowRootViewPage",currentPage:this.currentPage,pageType:page});if(this.currentPage){this.currentPage.set("visible",false);}var footerConfig={};var CONTINUE_TEXT=mstrmojo.desc(13852,"Prepare Data"),FINISH_TEXT=model.operationMode===constants.operationMode.edit?mstrmojo.desc(13850,"Update Dataset"):mstrmojo.desc(1302,"Finish");var continueText=CONTINUE_TEXT,slotCfg=slot&&slot.getConfig(),tableID,qbParams,dialogController=controller.dialogController,isPreview=false,title,hasContainer=mstrApp.container,isEMMACube=mstrApp.isEMMACube,sourceType,XDA_TYPE=constants.xdaType;if(!footerCfg&&slotCfg){footerCfg=slotCfg.footerConfig;}mstrApp.QTtabIndex=[mstrApp.diParams.isMDD?"EDD":"TD",(model.operationMode===operationMode.refresh)?"refresh":"select",0];switch(page){case pageType.dataSelection:sourceList.size=$WSHelpers.getResponsivePageSize.call(this,false,this.inPageDialog);createPage.call(this,sourceList,model,(!!$HELPER.isWS())?mstrmojo.desc(4381,"Data Sources"):mstrmojo.desc(12721,"Connect to Your Data"),slot,this.inPageDialog);footerConfig={next:{visible:false,enabled:false,text:continueText},back:{visible:false},cancel:{visible:false},finish:{visible:false},cubeQuota:{visible:true},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false},sourceAdmin:{visible:true},};if(!($HELPER.isOnetier()||$HELPER.isWS())&&mstrApp.launchingApp&&mstrApp.launchingApp.pageName==="Html5Vi"){if(!model.hasEMMAReportInstance()){footerConfig.managedCheckbox={visible:false,enabled:true};}}if(model.analysisID){footerConfig.cubeQuota={visible:false};}if(!$HELPER.isOnetier()&&model.operationMode===constants.operationMode.edit&&!model.cubesInfo){controller.getCubeQuota();}break;case pageType.mstrFile:createPage.call(this,mstrFileUpload,model,mstrmojo.desc(12479,"Mstr File upload"),slot,this.inPageDialog);footerConfig={next:{visible:false,text:continueText},back:{visible:false},cancel:{visible:false},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};break;case pageType.allProjectSource:createPage.call(this,allProjectPage,model,mstrmojo.desc(12480,"Connect to MicroStrategy Projects"),slot,this.inPageDialog);footerConfig={next:{visible:false,text:continueText},back:{visible:true},finish:{visible:true,enabled:false},cancel:{visible:true},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};break;case pageType.hadoop:hadoopPage.refreshMode=footerCfg&&footerCfg.next.visible&&(!!footerCfg.next.isRefresh);createPage.call(this,hadoopPage,model,mstrmojo.desc(12805,"Connect to Hadoop"),slot,this.inPageDialog);footerConfig=footerCfg||{next:{visible:true,text:continueText},back:{visible:true},cancel:{visible:true},finish:{visible:true,enabled:false},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};break;case pageType.dataset:createPage.call(this,datasetPage,model,mstrmojo.desc(11677,"Select a dataset"),slot,this.inPageDialog);footerConfig={next:{visible:true,text:continueText},back:{visible:false},cancel:{visible:true},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};break;case pageType.file:if(sourceInfo!==null){if(sourceInfo===1){if(model.operationMode!==constants.operationMode.create&&mstrApp.diParams.EnableURLImport===false){sourceInfo=0;}}}if(slot.getConfig()&&slot.getConfig().sourceInfo!==undefined){sourceInfo=slot.getConfig().sourceInfo;}if(sourceInfo===0){fileUploadPage.sourceSubtype=constants.sourceSubtype.localFile;createPage.call(this,fileUploadPage,model,(!!$HELPER.isWS())?mstrmojo.desc(14826,"Local Drive"):mstrmojo.desc(12715,"Upload your files"),slot,this.inPageDialog);}else{urlUploadPage.sourceSubtype=constants.sourceSubtype.url;urlUploadPage.isNewConnector=false;urlUploadPage.isFromCloudElement=false;mstrApp.isNewConnectorEdit=false;mstrApp.isNewConnector=false;createPage.call(this,urlUploadPage,model,(!!$HELPER.isWS())?mstrmojo.desc(14767,"Data from URL"):mstrmojo.desc(14791,"Paste your URLs"),slot,this.inPageDialog);var isCESourceInSchedule=(model.operationMode===constants.operationMode.subscribe&&slotCfg&&slotCfg.properties&&slotCfg.properties.currentSource&&slotCfg.properties.currentSource.subtype===constants.sourceSubtype.cloudElement);if(mstrApp.isNewConnectorEdit||isCESourceInSchedule){this.set("visible",false);}}footerConfig=footerCfg||{next:{visible:true,text:continueText},back:{visible:true},cancel:{visible:true},finish:{visible:true},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};break;case pageType.database:if(sourceInfo!==null){databasePage.sourceInfo=sourceInfo;}if(isEMMACube){continueText=CONTINUE_TEXT;if(!$HELPER.isWS()){title=(sourceInfo&&sourceInfo.type===constants.xdaType.mdx)?mstrmojo.desc(13152,"Import From Cubes"):mstrmojo.desc(12716,"Import From Tables");}else{if(sourceInfo){switch(sourceInfo.type){case constants.xdaType.mdx:title=mstrmojo.desc(13152,"Import From Cubes");break;case constants.xdaType.qbSingleTable:case constants.xdaType.googleBigQuerySingleTable:title=mstrmojo.desc(14907,"Import from Table - Select");break;case constants.xdaType.querybuilder:case constants.xdaType.ffsql:case constants.xdaType.googleBigQuery:case constants.xdaType.googleBigQueryFFSQL:title=mstrmojo.desc(14908,"Import from Table - SQL Editor");break;default:title=mstrmojo.desc(12752,"BI Sources");break;}}}createPage.call(this,singleTableQB,model,title,slot,this.inPageDialog);qbParams=controller.getQueryBuilderParams(sourceInfo.type,sourceInfo.extParams||null);slotCfg=slot&&slot.getConfig();tableID=slotCfg&&slotCfg.properties&&slotCfg.properties.tableID;if(tableID){qbParams.tableID=tableID;qbParams.isHadoopQB=getIsHadoopQB(tableID);}var me=this,isSapHanaSingleTable=false,hasNonSapHana=false;mstrmojo.hash.forEach(controller.model.importSources,function(source){if(source.subtype===constants.sourceSubtype.hanaSingleTable){isSapHanaSingleTable=true;}else{hasNonSapHana=true;}});qbParams.isSapHanaSingleTable=isSapHanaSingleTable;qbParams.hasNonSapHana=hasNonSapHana;if(isSapHanaSingleTable){mstrApp.supportDBObjects=controller.model.supportDBObjects;}qbParams.diShowFooterFunction=function(footerConfig){me.showFooter(footerConfig);};if(!mstrApp.isPopup&&!this.inPageDialog){qbParams.size=mstrApp.size;}this.currentPage.size=qbParams.size;mstrmojo.hash.copy(qbParams,this.currentPage.QBParams);if(controller.dataService.messageID){if(this.currentPage.QBParams.size){this.currentPage.QBParams.size=getSize.call(me,this.currentPage.QBParams.size);}this.currentPage.loadQB();}else{controller.createNewReportInstance({success:function(){var params=me.currentPage.QBParams;params.size=getSize.call(me,params.size);params.messageID=controller.dataService.messageID;controller.getQBParamsDDA(params);params.operationMode=model.operationMode;me.currentPage.loadQB();},failure:function(res){controller.displayError(mstrmojo.desc(12783,"Create EMMA Report Instance error. Please check the metadata."),false,res.message||"");}});}}else{createPage.call(this,databasePage,model,mstrmojo.desc(10766,"Select Data"),slot,this.inPageDialog);}footerConfig=footerCfg||{next:{visible:true,enabled:true,text:continueText},back:{visible:true},cancel:{visible:true},finish:{visible:false},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};if(isEMMACube){footerConfig.next.enabled=false;footerConfig.finish.enabled=false;tableID=qbParams&&qbParams.tableID;if(tableID){sourceType=sourceInfo.type;footerConfig.back.visible=false;}}if(sourceInfo.type===constants.xdaType.mdx){footerConfig.next.visible=false;}else{if(sourceInfo.sourceType===constants.sourceType.bisource){footerConfig.cancel.visible=true;if(this.header){this.header.set("titleText",mstrmojo.desc(12752,"BI Sources"));this.header.set("subtitleText",mstrmojo.desc(12806,"Import from SAP Business Object, Cognos, and OBIEE"));}}}break;case pageType.newConnector:if(sourceInfo===1){if(model.operationMode!==constants.operationMode.create&&mstrApp.diParams.EnableURLImport===false){sourceInfo=0;}}if(slot.getConfig()&&slot.getConfig().sourceInfo!==undefined){sourceInfo=slot.getConfig().sourceInfo;}if(sourceInfo===0){fileUploadPage.sourceSubtype=constants.sourceSubtype.localFile;createPage.call(this,fileUploadPage,model,(!!mstrApp.isWorkstation)?mstrmojo.desc(14826,"Local Drive"):mstrmojo.desc(12715,"Upload your files"),slot);}else{urlUploadPage.sourceSubtype=constants.sourceSubtype.url;urlUploadPage.isNewConnector=true;if($HELPER.isServerBasedWS()&&$HELPER.getEnvObj().isMac()){urlUploadPage.size={h:"768px",w:"1366px"};}createPage.call(this,urlUploadPage,model,(!!mstrApp.isWorkstation)?mstrmojo.desc(14767,"Data from URL"):mstrmojo.desc(14791,"Paste your URLs"),slot);var controller=mstrApp.getRootController();controller.showPage(constants.pageType.dataSelection);}footerConfig=footerCfg||{next:{visible:false,text:continueText},back:{visible:true},cancel:{visible:true},finish:{visible:true},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};break;case pageType.cloudElement:if(slot.getConfig()&&slot.getConfig().sourceInfo!==undefined){sourceInfo=slot.getConfig().sourceInfo;}urlUploadPage.sourceSubtype=constants.sourceSubtype.cloudElement;urlUploadPage.isFromCloudElement=true;urlUploadPage.isNewConnector=false;urlUploadPage.sourceInfo=sourceInfo;if($HELPER.isServerBasedWS()&&$HELPER.getEnvObj().isMac()){urlUploadPage.size={h:"768px",w:"1366px"};}createPage.call(this,urlUploadPage,model,(!!mstrApp.isWorkstation)?mstrmojo.desc(14767,"Data from URL"):mstrmojo.desc(14791,"Paste your URLs"),slot);if(slot.getConfig()&&slot.getConfig().properties&&slot.getConfig().properties.tableID){this.set("visible",false);}else{mstrApp.getRootController().showPage(constants.pageType.dataSelection);}footerConfig=footerCfg||{next:{visible:false,text:continueText},back:{visible:true},cancel:{visible:true},finish:{visible:true},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};break;case pageType.sampleFiles:createPage.call(this,sampleFilesPage,model,(!!$HELPER.isWS())?mstrmojo.desc(12712,"Sample Files"):mstrmojo.desc(12446,"File Samples"),slot,this.inPageDialog);footerConfig=footerCfg||{next:{visible:true,text:continueText},back:{visible:true},cancel:{visible:true},finish:{visible:true,enabled:false,text:mstrmojo.desc(1302,"Finish")},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};break;case pageType.emmaPreview:MTDIPage.size=$WSHelpers.getResponsivePageSize.call(this,null,null,MTDIPage.pageRatio);var SAVE_TEXT=mstrmojo.desc(13612,"Save Progress");if(($HELPER.isOnetier()||$HELPER.isWS())){footerConfig={next:{visible:true,text:FINISH_TEXT},back:{visible:false},cancel:{visible:true},finish:{visible:false},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};}else{footerConfig={next:{visible:true,text:FINISH_TEXT},back:{visible:false},cancel:{visible:true},finish:{visible:false},cubeQuota:{visible:false},dda:{visible:false},save:{visible:true,text:SAVE_TEXT},managedCheckbox:{visible:false}};}if(model.isManagedCube){footerConfig.save={visible:false};}createPage.call(this,MTDIPage,model,mstrmojo.desc(3389,"Preview"),slot,this.inPageDialog);this.header.set("subtitleText","");mstrApp.QTtabIndex=[mstrApp.diParams.isMDD?"EDD":"TD","review",0];isPreview=true;break;case pageType.preview:createPage.call(this,previewPage,model,mstrmojo.desc(3389,"Preview"),slot,this.inPageDialog);footerConfig={next:{visible:true},back:{visible:true},cancel:{visible:true},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};mstrApp.QTtabIndex=[mstrApp.diParams.isMDD?"EDD":"TD","review",0];break;case pageType.redirect:createPage.call(this,redirect,model,mstrmojo.desc(13308,"Start your analysis"),slot,this.inPageDialog);this.domNode.className+=" start-your-analysis";footerConfig={next:{visible:false},back:{visible:false},cancel:{visible:false},previewNote:{visible:false},finish:{visible:false},dda:{visible:false},cubeQuota:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};break;case pageType.sourceIntro:mstrApp.getRootController().getOAuthSourceReports(sourceInfo.type,false,slot);break;case pageType.sourceObjects:title=getTitleForSourceObjects(sourceInfo.type);if(constants.sourceType.googleAnalytics===sourceInfo.type){sourceObjectsGAPage.sourceObjectsInfo=sourceInfo;createPage.call(this,sourceObjectsGAPage,model,title,slot,this.inPageDialog);}else{sourceObjectsPage.sourceObjectsInfo=sourceInfo;createPage.call(this,sourceObjectsPage,model,title,slot,this.inPageDialog);}footerConfig=footerCfg||{next:{visible:true,text:continueText},back:{visible:true},cancel:{visible:true},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};break;case pageType.sourceObjectsDnD:title=getTitleForSourceObjects(sourceInfo.type);if(constants.sourceType.googleAnalytics===sourceInfo.type){sourceObjectsGAPage.sourceObjectsInfo=sourceInfo;createPage.call(this,sourceObjectsGAPage,model,title,slot,this.inPageDialog);}else{sourceObjectsDnDPage.sourceObjectsInfo=sourceInfo;createPage.call(this,sourceObjectsDnDPage,model,title,slot,this.inPageDialog);}footerConfig=footerCfg||{next:{visible:true,text:continueText},back:{visible:true},cancel:{visible:true},finish:{visible:true,enabled:false},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};break;case pageType.suggestNewSource:var add="productfeedback@microstrategy.com",product=($HELPER.isOnetier()||$HELPER.isWS())?"Analytics%20Desktop":"Analytics%20Enterprise",topic="New%20Data%20Source%20Suggestion";mstrApp.getRootController().openMailClient("mailto:"+add+"?subject="+product+":%20"+topic);break;case pageType.clipboard:clipboardPage.url=sourceInfo;createPage.call(this,clipboardPage,model,mstrmojo.desc(12490,"Create custom data"),slot,this.inPageDialog);if(model.operationMode===constants.operationMode.refresh){footerConfig=footerCfg||{next:{visible:true,text:mstrmojo.desc(773,"Refresh")},back:{visible:false},cancel:{visible:true},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};}else{footerConfig=footerCfg||{next:{visible:true,text:continueText},back:{visible:true},cancel:{visible:true},finish:{visible:true,enabled:false},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};}break;case pageType.twitter:twitterPage.sourceObjectsInfo=sourceInfo;createPage.call(this,twitterPage,model,mstrmojo.desc(12722,"Import data from Twitter"),slot,this.inPageDialog);footerConfig=footerCfg||{next:{visible:true,enabled:false,text:continueText},cancel:{visible:true},finish:{visible:true,enabled:false},back:{visible:true},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};break;case pageType.facebook:facebookPage.sourceObjectsInfo=sourceInfo;createPage.call(this,facebookPage,model,mstrmojo.desc(12723,"Import data from Facebook"),slot,this.inPageDialog);footerConfig=footerCfg||{next:{visible:true,enabled:false,text:continueText},cancel:{visible:true},finish:{visible:true,enabled:false},back:{visible:true},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};break;case pageType.publicData:publicDataPage.url=sourceInfo;createPage.call(this,publicDataPage,model,mstrmojo.desc(13978,"Public Data"),slot,this.inPageDialog);if(model.operationMode===constants.operationMode.refresh){footerConfig={next:{visible:true,text:mstrmojo.desc(773,"Refresh")},back:{visible:false},cancel:{visible:true},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};}else{footerConfig=footerCfg||{next:{visible:true,text:continueText},back:{visible:true},cancel:{visible:true},finish:{visible:true,enabled:false},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};}break;case pageType.sourceAdmin:sourceAdminPage.size=$WSHelpers.getResponsivePageSize.call(this,false,this.inPageDialog);createPage.call(this,sourceAdminPage,model,mstrmojo.desc(4381,"Data Sources"),slot,this.inPageDialog);footerConfig=footerCfg||{next:{visible:false},back:{visible:false},cancel:{visible:true},finish:{visible:true,enabled:true,text:mstrmojo.desc(118,"Save")},cubeQuota:{visible:false},dda:{visible:false},save:{visible:false},managedCheckbox:{visible:false}};break;}if(page===pageType.dataSelection||page===pageType.redirect||page===pageType.sourceIntro||page===pageType.suggestNewSource||page===pageType.newConnector){this.showFooterDividerLine(false);}else{this.showFooterDividerLine(true);}if(controller.model.isAddingNewTable&&page!==pageType.sourceAdmin){if(footerConfig.next&&page!=pageType.emmaPreview){footerConfig.next.text=mstrmojo.desc(531,"Add");}if(footerConfig.finish){footerConfig.finish.visible=false;}}if(!footerConfig.mdxRACheckbox){footerConfig.mdxRACheckbox={visible:false};}if(page!==pageType.newConnector&&page!==pageType.cloudElement){this.showFooter(footerConfig);}this.currentPage.set("visible",true);this.raiseEvent({name:"postShowRootViewPage",currentPage:this.currentPage});if(this.currentPage.size&&(hasContainer||this.inPageDialog)){this.windowResize(this.currentPage.size);}if(!mstrApp.isPopup&&!this.inPageDialog){this.windowResize({h:this.height,w:this.width});}if(dialogController&&dialogController.pageZIndex>0){dialogController.centerPageDialog();}if(controller.connectorScrollTop){var sourceGrid=this.currentPage.sourceTable;sourceGrid&&(sourceGrid.domNode.scrollTop=controller.connectorScrollTop);delete controller.connectorScrollTop;}return this.currentPage;},showFooter:function showFooter(footerConfig){this.raiseEvent({name:"updateFooterConfig",config:footerConfig});this.footer.showControls(footerConfig);},showFooterDividerLine:function showFooterDividerLine(isshow){if(isshow){this.layoutNode.className="mstrmojo-di-layout";this.footerNode.className="mstrmojo-di-footer";}else{this.layoutNode.className="mstrmojo-di-layout-noborder";this.footerNode.className="mstrmojo-di-footer-noborder";}},setModalNodes:function(modalNodes,modalZIndex){var curtainNode=this.curtainNode;if(!curtainNode){return ;}this.clearModalNodes();var zIndex=modalZIndex||9999;var i;if(!modalNodes||!modalNodes.length){return ;}this.modalNodes=modalNodes;for(i=0;i<modalNodes.length;i++){this.modalNodesZIndexes.push(modalNodes[i].style.zIndex);}for(i=0;i<modalNodes.length;i++){modalNodes[i].style.zIndex=zIndex;if(modalNodes[i].style.position===""){modalNodes[i].style.position="relative";}}this.curtainNode.style.display=this.visible?"block":"none";this.curtainNode.style.zIndex=zIndex-1;resizeCurtainNode.call(this);modalNodes[0].focus();},clearModalNodes:function(){var curtainNode=this.curtainNode;if(!curtainNode){return ;}var i,origZIndexes,nodes,node;nodes=this.modalNodes;origZIndexes=this.modalNodesZIndexes;for(i=0;nodes&&i<nodes.length;i++){node=nodes[i];if(node&&node.style){node.style.zIndex=origZIndexes[i];}}this.modalNodes=[];this.modalNodesZIndexes=[];this.curtainNode.style.height="0px";this.curtainNode.style.weight="0px";this.curtainNode.style.display="none";},windowResize:function windowResize(size,isBrowserResize){var height,width,retSize,model,layoutHeight,toolbarHeight=0,$this=this;if(!size||!size.h||!size.w){return ;}retSize=getSize.call(this,size,isBrowserResize);mstrApp.size=retSize;height=retSize.h;width=retSize.w;if(this.currentPage&&this.currentPage.pageType==pageType.hadoop&&this.domNode){if(parseInt(width)+parseInt(this.domNode.style.left)>document.body.clientWidth){width=(document.body.clientWidth-parseInt(this.domNode.style.left)*2);width=(width<863?863:width)+"px";}if(parseInt(height)+parseInt(this.domNode.style.top)>document.body.clientHeight){height=(document.body.clientHeight-parseInt(this.domNode.style.top)*2);height=(height<200?200:height)+"px";}}if(!$HELPER.isWS()&&this.currentPage&&(this.currentPage.pageType===pageType.emmaPreview||this.currentPage.pageType===pageType.dataSelection)&&this.toolbarNode&&this.domNode){toolbarHeight=this.toolbarNode.offsetHeight;}if(mstrApp.isWorkstation&&mstrApp.isPopup&&parseInt(width)<979){width="979px";retSize.w=width;}if(!this.layoutConfig){this.layoutConfig={h:{},w:{}};}this.layoutConfig.w.layoutNode=width;layoutHeight=parseInt(height,10)-(this.headerHeight+this.footerHeight+this.layoutBorder+this.virtualHeaderHeight)-toolbarHeight+"px";this.layoutConfig.h.layoutNode=layoutHeight;retSize.layoutH=layoutHeight;this.setDimensions(height,width);if(mstrApp.isPopup||this.inPageDialog){resizeCurtainNode.call(this);centralizeNode.call(this);}model=mstrApp.getRootController().model;if(model){model.raiseEvent({name:"windowSizeChanged",size:retSize,target:$this.domNode});}},browserResized:function browserResized(size){var height,width,event;if(this.domNode){if(document.createEvent){event=document.createEvent("MouseEvents");event.initMouseEvent("mousedown",true,true,window,0,0,0,0,0,false,false,false,false,0,null);this.domNode.dispatchEvent(event);}else{if(document.createEventObject){event=document.createEventObject();this.domNode.fireEvent("onmousedown",event);}}}if(mstrApp.isPopup){height=this.height;width=this.width;this.setDimensions(height,width);if(this.currentPage){this.windowResize(this.currentPage.size);}resizeCurtainNode.call(this);centralizeNode.call(this);}else{if(($HELPER.isOnetier()||$HELPER.isWS())){height=parseInt(size.h,10);width=parseInt(size.w,10);}else{height=(parseInt(size.h,10)-this.offsetHeight);width=(parseInt(size.w,10)-this.offsetWidth);}if(!this.layoutConfig){this.layoutConfig={h:{},w:{}};}if(!this.inPageDialog){this.layoutConfig.w.layoutNode=width+"px";this.layoutConfig.h.layoutNode=height-(this.headerHeight+this.footerHeight+this.layoutBorder+this.virtualHeaderHeight)+"px";this.setDimensions(height+"px",width+"px");}this.windowResize({h:height+"px",w:width+"px"},true);}return true;},preBuildRendering:function preBuildRendering(){if(this._super){this._super();}mstrmojo.DI.ProgressPolyfill.createProgressPolyfill();var children=[];if(!this.footer){footer.model=mstrApp.getRootController().getModel();children.push(footer);}if(!this.header&&this.showHeader){if($HELPER.isWS()){if(!!$HELPER.isWS()&&(!!mstrApp.isPopup||!!this.inPageDialog)){this.set("virtualHeaderHeight",29);children.push(virtualHeader);}else{this.set("virtualHeaderHeight",0);}children.push(new mstrmojo.DI.DIToolbar({slot:"headerNode",alias:"header",showCloseBtn:false}));}else{children.push(header);children.push(new mstrmojo.DI.DIToolbar({slot:"toolbarNode",alias:"toolbar",showCloseBtn:false}));}}this.addChildren(children);if(!!$HELPER.isWS()&&!mstrApp.isPopup){this.header.set("titleText",mstrmojo.desc(4381,"Data Sources"));}this.footer.showControls({next:{visible:false},back:{visible:false},cancel:{visible:false}});if(!this.emptyPage){this.currentPage=this.addChildren(emptyPage);if(this.currentPage.size&&mstrApp.container){this.windowResize(this.currentPage.size);}}if(mstrApp.isPopup){mstrmojo.css.addWidgetCssClass(this,"mstrmojo-di-view-popup");}if(!!$HELPER.isWS()&&!mstrApp.isPopup&&!this.inPageDialog){$WSHelpers.lockResize();}},oncontextmenu:function oncontextmenu(evt){var target=$DOM.eventTarget(evt.hWin,evt.e),tagName;if(target&&target.tagName){tagName=target.tagName.toLowerCase();}if(tagName!=="input"&&tagName!=="textarea"&&target.contentEditable!=="true"){$DOM.preventDefault(window,evt.e);return false;}},setHomepageViewMode:function setHomepageViewMode(value){sourceList.mode=value;},focusFooter:function focusFooter(){if(this.footer&&this.footer.containerNode){this.footer.containerNode.focus();}},showSaveVisual:function(){var me=this,oldTitle=me.header&&me.header.subtitle&&me.header.subtitle.text,title=mstrmojo.desc(13781,"Saved Successfully");if(!me.header.isHeader){return ;}if(me.saveVisualTimeoutID){window.clearTimeout(me.saveVisualTimeoutID);}else{me.header.subtitle.set("text",title);$CSS.toggleClass(me.header.subtitle.domNode,"saveVisual",true);me.saveVisualTimeoutFn=function(){me.header.subtitle.set("text",oldTitle||"");$CSS.toggleClass(me.header.subtitle.domNode,"saveVisual",false);me.saveVisualTimeoutID=null;};}me.saveVisualTimeoutID=window.setTimeout(me.saveVisualTimeoutFn,me.saveVisualTime);},destroy:function(ignore){if(this.saveVisualTimeoutID){window.clearTimeout(this.saveVisualTimeoutID);}this._super(ignore);},setSourceListMode:function setSourceListMode(mode){var currentPage=this.currentPage;if(currentPage&&currentPage.pageType===constants.pageType.dataSelection){currentPage.set("mode",mode);}},updateSourceListPage:function updateSourceListPage(){var currentPage=this.currentPage;if(currentPage&&currentPage.pageType===constants.pageType.dataSelection){currentPage.update();}},setSearchPattern:function setSearchPattern(pattern){var currentPage=this.currentPage;if(currentPage&&currentPage.pageType===constants.pageType.dataSelection){if(currentPage.mode===LIST_MODE){currentPage.onSearch(pattern);}else{currentPage.onSearchGridView(pattern);}}},setDimensions:function(h,w){if($HELPER.getEnvObj().isWS()&&!mstrApp.isPopup&&!this.inPageDialog&&$WSHelpers.isDIFullScreenModeOnMac()){this._super(window.innerHeight+"px",window.innerWidth+"px");}else{this._super(h,w);}}});}());