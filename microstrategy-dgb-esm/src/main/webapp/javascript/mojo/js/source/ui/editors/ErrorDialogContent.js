(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.ui._HasScroller","mstrmojo.css","mstrmojo.DI.DIHelpers");var $CSS=mstrmojo.css,$STR=mstrmojo.string,showDetailsStr=mstrmojo.desc(14058,"Show Details"),hideDetailsStr=mstrmojo.desc(14059,"Hide Details"),$DIHELPER=mstrmojo.DI.DIHelpers,contactStr=mstrmojo.desc(14060,"We are sorry for the inconvenience. Please {contact} your administrator for help.").replace("{",'<span class="dyn-link">').replace("}","</span>");mstrmojo.ui.editors.ErrorDialogContent=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.editors.ErrorDialogContent",markupString:'<div class="mstrmojo-error-content {@cssClass}" mstrAttach:click><div class="scroll-container"><div>{@shortDesc}</div><div class="contact">'+contactStr+'</div><div class="toggle-details-link" >'+showDetailsStr+'</div><div class="error-details">{@longDesc}</div></div></div>',markupSlots:{scrollNode:function(){return this.domNode.firstChild;},contactNode:function(){return this.domNode.firstChild.children[1].getElementsByClassName("dyn-link")[0];},toggleDetailsNode:function(){return this.domNode.firstChild.children[2];},errorDetailsNode:function(){return this.domNode.firstChild.children[3];}},markupMethods:{onshowDetailsChange:function(){var showDetails=this.showDetails;this.toggleDetailsNode.innerHTML=showDetails?hideDetailsStr:showDetailsStr;$CSS.toggleClass(this.domNode,"show-details",showDetails);this.updateScrollbars();}},cssClass:undefined,shortDesc:undefined,longDesc:undefined,showDetails:false,showToggle:true,enableContactStr:true,allowHTML:false,init:function init(props){this._super(props);this.shortDesc=this.shortDesc||mstrmojo.desc(14061,"An error has occurred");},onclick:function onclick(evt){var target=evt.getTarget(),url,longDesc=this.longDesc;if(target===this.contactNode){url="mailto:?subject="+encodeURI("Issue: "+this.shortDesc)+(longDesc?("&body="+encodeURI("Detail:\r\n"+longDesc)):"");mstrApp.openPage(url,"_self");}else{if(target===this.toggleDetailsNode){this.set("showDetails",!this.showDetails);this.parent.raiseEvent({name:"EditorResized"});this.parent.positionDialog();}}},setupScrollNodes:function setupScrollNodes(){this.scrollNode=this.scrollNode;},preBuildRendering:function preBuildRendering(){this._super&&this._super();if(!this.allowHTML){this.longDesc=$STR.encodeHtmlString($STR.decodeHtmlString(this.longDesc,true),true);}},postBuildRendering:function(){var contactNode=this.domNode.firstChild.children[1];this._super&&this._super();!this.showToggle&&$CSS.addClass(this.toggleDetailsNode,"hide");!this.enableContactStr&&$CSS.addClass(contactNode,"invisible");}});})();