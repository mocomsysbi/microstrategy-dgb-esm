(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.Button","mstrmojo.hash","mstrmojo.Container","mstrmojo._HasLayout","mstrmojo.EditableLabel");mstrmojo.requiresClsP("mstrmojo.vi.models","EnumPanelTypes","VIComponentMap");var VI_FILTER_STACK=mstrmojo.vi.models.VIComponentMap.TYPES.FILTER_STACK;function getButtonConfig(text,fn,isHot,props){return mstrmojo.Button.newWebButton(text,fn,isHot,mstrmojo.hash.copy(props,{slot:"btnNode",ignoreLayout:true}));}mstrmojo.vi.ui.VisFilterInlineDialog=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.vi.ui.VisFilterInlineDialog",filterName:"Visualization Filter 1",isEdit:false,markupString:'<div id="{@id}" class="mstrmojo-visfilter-dialog {@cssClass}"><div class="content"></div><div class="buttons"></div></div>',markupSlots:{titlebarNode:function titlebarNode(){return this.domNode.firstChild;},btnNode:function btnNode(){return this.domNode.childNodes[1];}},id:"visualizationFilterToolbar",layoutConfig:{w:{titlebarNode:"100%",btnNode:"0px"},xt:true},children:[{scriptClass:"mstrmojo.Label",slot:"titlebarNode",cssClass:"title",text:mstrmojo.desc(15289,"Configure Visualization Filter:")},{scriptClass:"mstrmojo.EditableLabel",slot:"titlebarNode",cssClass:"filtername",alias:"filterNameLabel",text:this.filterName,editOnClick:false,editOnDoubleClick:true,onTextEditComplete:function(textChanged,oldText){this.set("text",this.text);mstrApp.restoreVFTitle=this.text;this.parent.model.getSelectedViUnit().updateDisplayName(this.text,oldText);}},getButtonConfig(mstrmojo.desc(221,"Cancel"),function cancel(){this.parent.cancel();},false,{alias:"cancelBtn"}),getButtonConfig(mstrmojo.desc(8473,"Done"),function save(){this.parent.save();},true,{alias:"saveBtn",enabled:false})],open:function open(){this.updateDisplayFilterName(this.filterName);this.cancelBtn.set("visible",!this.isEdit);if(this.isEdit){this.toggleSaveBtn(true);}},updateDisplayFilterName:function updateDisplayFilterName(displayText){mstrApp.restoreVFTitle=displayText;this.filterNameLabel.set("text",displayText);},toggleSaveBtn:function toggleSaveBtn(enable){this.saveBtn.set("enabled",enable);},cancel:function cancel(){var model=this.model,stack=model.getVIMap().getComponent(VI_FILTER_STACK),rootController=mstrApp.getRootController();mstrApp.isInVFConfigPage=false;rootController.view.closeInlineDialog();model.removeVizFilterUnit(mstrApp.restoreVFCreate);model.destroyVisualiztionselector();rootController.restorePanelStatus(stack);rootController.maskMenuToolbar(false);this.clearVFFlags();},save:function save(){var docModel=this.model,rootController=mstrApp.getRootController();if(!this.isEdit){docModel.saveVisAsSelector();}else{docModel.saveVisSelectorAndExit();}mstrApp.isInVFConfigPage=false;rootController.view.closeInlineDialog();rootController.maskMenuToolbar(false);this.clearVFFlags();},clearVFFlags:function clearVFFlags(){delete mstrApp.requireRestoreVFConfigMode;delete mstrApp.restoreVFCreate;delete mstrApp.restoreVFTitle;delete mstrApp.isVFEditingMode;delete mstrApp.isEnableSaveBtn;delete mstrApp.restoreVFKey;}});}());