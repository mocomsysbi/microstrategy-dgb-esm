(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.DI.DIHelpers","mstrmojo.DI.DIConstants");var $HELPER=mstrmojo.DI.DIHelpers;var minWidth=1010,minHeight=552;function validate(h,w,ratio){ratio=ratio||0.8;if(!h||!w){return{w:minWidth,h:minHeight};}return{w:(w*ratio>minWidth?Math.floor(w*ratio):minWidth).toString()+"px",h:(h*ratio>minHeight?Math.floor(h*ratio):minHeight).toString()+"px"};}mstrmojo.DI.DIWorkstationHelpers=mstrmojo.declare(mstrmojo.Obj,null,null);mstrmojo.DI.DIWorkstationHelpers.shouldShowTitleBar=function(){var inPageDialog=mstrApp.getRootController().rootView.inPageDialog;return !!mstrApp.isWorkstation&&(!!mstrApp.isPopup||!!inPageDialog);};mstrmojo.DI.DIWorkstationHelpers.setNativeWindow=function(w,h){var minW=1010,minH=552,width=parseInt(w,10),height=parseInt(h,10);if(!window.FormWrapper||!window.FormWrapper.setWindowContentSize||mstrmojo.DI.DIWorkstationHelpers.isDIFullScreenModeOnMac()){return ;}if(w.match(/%$/)&&h.match(/%$/)){window.FormWrapper.setWindowContentSize(1200,680);}else{width=width<minW?minW:width;height=height<minH?minH:height;window.FormWrapper.setWindowContentSize(width,height);}};mstrmojo.DI.DIWorkstationHelpers.lockResize=function(){if(!window.FormWrapper||!window.FormWrapper.lockResize){return ;}window.FormWrapper.lockResize();};mstrmojo.DI.DIWorkstationHelpers.unlockResize=function(){if(!window.FormWrapper||!window.FormWrapper.unlockResize){return ;}window.FormWrapper.unlockResize();};mstrmojo.DI.DIWorkstationHelpers.getResponsivePageSize=function(isBrowserResize,inPageDialog,ratio){if($HELPER.getEnvObj().isServerBasedWS()&&!$HELPER.getEnvObj().isWSLiveMode()&&$HELPER.getEnvObj().isMac()){return isBrowserResize?(inPageDialog?validate(minHeight,minWidth,ratio?ratio:1):validate(window.innerHeight,window.innerWidth,ratio?ratio:1)):(inPageDialog?validate(minHeight,minWidth,ratio?ratio:1):{w:"1366px",h:"768px"});}if($HELPER.getEnvObj().isServerBasedWS()&&!$HELPER.getEnvObj().isWSLiveMode()&&$HELPER.getEnvObj().isWin()){return isBrowserResize?(inPageDialog?validate(minHeight,minWidth,ratio?ratio:1):validate(window.innerHeight,window.innerWidth,ratio?ratio:1)):(inPageDialog?validate(minHeight,minWidth,ratio?ratio:1):mstrmojo.DI.DIWorkstationHelpers.getCurrentScreenSizeForWindowsWorkstation());}if(inPageDialog){return validate(minHeight,minWidth,1);}if($HELPER.getEnvObj().isWebDataSet()||$HELPER.getEnvObj().isWebDossier()||$HELPER.getEnvObj().isWSDossier()){return validate(window.innerHeight,window.innerWidth,ratio?ratio:null);}return validate();};mstrmojo.DI.DIWorkstationHelpers.isDIFullScreenModeOnMac=function(){if(!window.FormWrapper||!window.FormWrapper.isDIFullScreenModeOnMac){return false;}return window.FormWrapper.isDIFullScreenModeOnMac();};mstrmojo.DI.DIWorkstationHelpers.getCurrentScreenSizeForWindowsWorkstation=function(){var fn=mstrmojo.hash.walk("FormWrapper.getCurrentScreenSize",window),size=JSON.parse(fn&&fn()),defaultW="1366px",defaultH="768px";return{w:size&&size.width?((parseInt(size.width)*0.8).toString()+"px"):defaultW,h:size&&size.height?((parseInt(size.height)*0.8).toString()+"px"):defaultH};};}());