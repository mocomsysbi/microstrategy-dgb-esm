(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.array","mstrmojo.Container","mstrmojo._HasLayout","mstrmojo.ui._HasScroller","mstrmojo.vi.ui.toolbars.Toolbar","mstrmojo.ui.menus.ToolbarConfig","mstrmojo.ui.menus.MenuConfig","mstrmojo.Popup","mstrmojo._HasPopup","mstrmojo.HBox","mstrmojo.Label","mstrmojo.Pulldown","mstrmojo.tooltip","mstrmojo.Button","mstrmojo.gmaps.MapEnums","mstrmojo.gmaps.MapUtils","mstrmojo.gmaps.MapSearchWidget","mstrmojo.gmaps.MapLayerControlListNew","mstrmojo.gmaps.MapMoreControls","mstrmojo.gmaps.layer.LassoLayer","mstrmojo.hash");mstrmojo.requiresDescs(1158,8218,10372,1442,221,10979,10980,10981,9879,9876,9881,5567,15636,15752,15753);var $MOJO=mstrmojo,$DOM=$MOJO.dom,$CSS=$MOJO.css,$ARR=$MOJO.array,$TOOLTIP=$MOJO.tooltip,$GMAPS=$MOJO.gmaps,$MUTIL=$GMAPS.MapUtils,LassoLayer=$GMAPS.layer.LassoLayer,$EnumPropertyType=$GMAPS.EnumPropertyType,$EnumGraphicType=$GMAPS.EnumGraphicType,$EnumToolbarButtonType=$GMAPS.EnumToolbarButtonType,$EnumToolbarState=$GMAPS.EnumToolbarState,MapSearchWidget=$GMAPS.MapSearchWidget,MapLayerControlListNew=$GMAPS.MapLayerControlListNew,MapMoreControls=$GMAPS.MapMoreControls,$EDZ=$MOJO.vi.viz.EnumDSSDropZones,$HASH=$MOJO.hash;var TOOLBAR_HEIGHT="28px";mstrmojo.gmaps.MapToolbarNew=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.gmaps.MapToolbarNew",markupString:'<div id="{@id}-toolbarwrapper" class="mstrMapToolBarBoxNew"><div class="map-toolbar-searchbar" mstrAttach:mousedown></div><div class="map-toolbar-mapCtrlBar"><div class="map-toolbar-selection"></div><div class="map-toolbar-ctrl map-toolbar-layerCtrl"></div><div class="map-toolbar-ctrl map-toolbar-styleCtrl"></div><div class="map-toolbar-ctrl map-toolbar-moreCtrl"></div></div><div class="mapboxgl-ctrl-bottom-right"><div></div><div class="mapboxgl-ctrl mapboxgl-ctrl-group" style="width: 28px"><div style="height: 28px"></div><div style="height: 28px"></div><div style="height: 28px"></div></div></div></div>',markupSlots:{searchBarNode:function(){return this.domNode.firstChild;},mapCtrlNode:function(){return this.domNode.childNodes[1];},selectionBarNode:function(){return this.domNode.childNodes[1].childNodes[0];},layerCtrlNode:function(){return this.domNode.childNodes[1].childNodes[1];},styleCtrlNode:function(){return this.domNode.childNodes[1].childNodes[2];},moreCtrlNode:function(){return this.domNode.childNodes[1].childNodes[3];},bottomRightNode:function(){return this.domNode.childNodes[2];},resetBtnNode:function(){return this.domNode.childNodes[2].childNodes[0];},zoomInBtnNode:function(){return this.domNode.childNodes[2].childNodes[1].childNodes[0];},zoomOutBtnNode:function(){return this.domNode.childNodes[2].childNodes[1].childNodes[1];},compassBtnNode:function(){return this.domNode.childNodes[2].childNodes[1].childNodes[2];}},markupMethods:{onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod},mapStyleData:null,lassoLayer:null,parent:null,map:null,mapStyleMenu:null,init:function init(props){this._super(props);this.initComponents();},initComponents:function initComponents(){this.initSearchBar();this.initMapCtrlBar();this.initBottomRightBar();},initSearchBar:function initSearchBar(){var me=this;this.addChildren(new MapSearchWidget({slot:"searchBarNode",alias:"searchBar",suggestionSource:me.getBaseLayer()}));},initMapCtrlBar:function initMapCtrlBar(){this.initMapStyleCtrl();this.initSelectionBar();this.initLayerCtrl();this.initMoreCtrl();},initBottomRightBar:function initBottomRightBar(){this.initBottomRightBtn("resetBtn","resetBtnNode","mapboxgl-ctrl mapboxgl-ctrl-reset",15752,"Reset view");this.initBottomRightBtn("zoomInBtn","zoomInBtnNode","mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in",5567,"Zoom in");this.initBottomRightBtn("zoomOutBtn","zoomOutBtnNode","mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out",15636,"Zoom out");this.initCompassBtn();},initBottomRightBtn:function initBottomRightBtn(alias,slot,iconClass,desc_id,desc){var btn=mstrmojo.insert({alias:alias,slot:slot,scriptClass:"mstrmojo.Button",iconClass:iconClass,getTooltipContent:function(){return mstrmojo.desc(desc_id,desc);},updateTooltipConfig:this.updateBottomRightTooltipConfig,useRichTooltip:true,enabled:true,onclick:function onclick(){var map=$HASH.walk("parent.map.domNode",this),hiddenBtn=map&&map.getElementsByClassName(iconClass)[1];if(hiddenBtn){var event=document.createEvent("MouseEvents");event.initEvent("click",true,false);hiddenBtn.dispatchEvent(event);}}});this.addChildren(btn);},initCompassBtn:function initCompassBtn(){var compassBtn=mstrmojo.insert({alias:"compassBtn",slot:"compassBtnNode",scriptClass:"mstrmojo.Button",iconClass:"mapboxgl-ctrl-icon mapboxgl-ctrl-compass",getTooltipContent:function(){return mstrmojo.desc(15753,"Rotate and Tilt");},updateTooltipConfig:this.updateBottomRightTooltipConfig,useRichTooltip:true,enabled:true});this.addChildren(compassBtn);},setVisibility:function setVisibility(isVisible){if(this.domNode&&$MUTIL.checkDefined(this.domNode.style)){this.domNode.style.display=(!!isVisible)?"block":"none";}},postBuildRendering:function postBuildRendering(){this._super();var toolBarDiv=this.map&&this.map.toolBarDiv;if(!!toolBarDiv&&!!this.domNode){toolBarDiv.appendChild(this.domNode);}this.updateToolbarStyle();this.refreshMapStyleCtrl();},updateToolbarStyle:function updateToolbarStyle(){this.updateSearchBarStyle();this.updateMapCtrlStyle();this.updateBottomRightStyle();},updateSearchBarStyle:function updateSearchBarStyle(){var map=this.map,searchBar=this.searchBar,isTitleBarVisible=map&&map.isTitleBarVisible();if(!isTitleBarVisible){this.searchBarNode.style.top="24px";}else{this.searchBarNode.style.top="3px";}if(searchBar){searchBar.updatePopupPosition();}},updateMapCtrlStyle:function updateMapCtrlStyle(){var map=this.map,mapHeight=map&&map.getHeight(),mapCtrlNode=this.mapCtrlNode,layerCtrlNode=this.layerCtrlNode;if(mapHeight&&mapCtrlNode){mapCtrlNode.style.bottom=-(mapHeight-6)+"px";}},updateBottomRightStyle:function updateBottomRightStyle(){var map=this.map,mapHeight=map&&map.getHeight(),bottomRightNode=this.bottomRightNode;if(mapHeight&&bottomRightNode){bottomRightNode.style.bottom=-mapHeight+"px";}},update:function update(){this.refreshMapStyleCtrl();this.refreshSearchBar();},preRefresh:function preRefresh(){var searchBar=this.searchBar;return searchBar&&searchBar.isFocus();},resize:function resize(){var toolBarDiv=this.map&&this.map.toolBarDiv,domNode=this.domNode;if(!!toolBarDiv&&!toolBarDiv.contains(domNode)){toolBarDiv.appendChild(domNode);}this.updateToolbarStyle();},inSelectionState:function inSelectionState(){var state=parseInt(this.state,10);return state===$EnumToolbarState.SINGLE_SELECT||state===$EnumToolbarState.RECTANGLE_SELECT||state===$EnumToolbarState.FREE_SELECT||state===$EnumToolbarState.CIRCLE_SELECT;},onstateChange:function onstateChange(){var mapViewer=this.parent,state=parseInt(this.state,10),selectionBar=this.selectionBar,layerSelectorList=this.layerCtrl&&this.layerCtrl.layerSelectorList,rectSelect,circleSelect,freeSelect;if(!mapViewer||!selectionBar){return ;}rectSelect=selectionBar.rectSelect;if(rectSelect){rectSelect.set("selected",state===$EnumToolbarState.RECTANGLE_SELECT);}circleSelect=selectionBar.circleSelect;if(circleSelect){circleSelect.set("selected",state===$EnumToolbarState.CIRCLE_SELECT);}freeSelect=selectionBar.freeSelect;if(freeSelect){freeSelect.set("selected",state===$EnumToolbarState.FREE_SELECT);}if(layerSelectorList){layerSelectorList.set("selected",state===$EnumToolbarState.LAYERS_SELECT);}mapViewer.set("enablePopup",state===$EnumToolbarState.NORMAL);if(!this.inSelectionState()){this.removeLassoLayer();}},initSelectionBar:function initSelectionBar(){var me=this,selectionBar=mstrmojo.insert({alias:"selectionBar",scriptClass:"mstrmojo.HBox",slot:"selectionBarNode",state:$EnumToolbarState.NORMAL,children:[me.getSelectionBtn("rectSelect","mstrtbMapRectangleSearch",mstrmojo.desc(15641,"Box Select"),$EnumToolbarButtonType.RECTANGLE_SELECT,$EnumToolbarState.RECTANGLE_SELECT),me.getSelectionBtn("freeSelect","mstrtbMapFreeSelectButton",mstrmojo.desc(15642,"Lasso Select"),$EnumToolbarButtonType.FREE_SELECT,$EnumToolbarState.FREE_SELECT),me.getSelectionBtn("circleSelect","mstrtbMapCircleSelectButton",mstrmojo.desc(15711,"Range Select"),$EnumToolbarButtonType.CIRCLE_SELECT,$EnumToolbarState.CIRCLE_SELECT)]});this.addChildren(selectionBar);},getSelectionBtn:function getSelectionBtn(alias,iconClass,tooltipContent,toolbarButtonType,toolbarState){var me=this;return{alias:alias,scriptClass:"mstrmojo.Button",iconClass:"map-toolbar-ctrl "+iconClass,getTooltipContent:function(){return this.tooltipContent;},tooltipContent:tooltipContent,updateTooltipConfig:me.updateButtonTooltipConfig,useRichTooltip:true,enabled:true,toolbarButtonType:toolbarButtonType,onclick:function onclick(){me.onClickSelectionBar(this,toolbarState);}};},onClickSelectionBar:function onClickSelectionBar(selectionBtn,toolbarState){var mapViewer=this.parent,selectionBar=this.selectionBar;if(!mapViewer||!selectionBar){return ;}if(!selectionBtn.selected){this.set("state",toolbarState);mapViewer.set("enablePopup",false);mapViewer.set("infoWindowVisible",false);this.appendLassoLayer();}else{this.resetSelectionState();}if(mapViewer.hideInfoWindow instanceof Function){mapViewer.hideInfoWindow();}window.clearTimeout(this.timer);},refreshSearchBar:function refreshSearchBar(){var searchBar=this.searchBar;if(searchBar){searchBar.suggestionSource=this.getBaseLayer();}},initLayerCtrl:function initLayerCtrl(){var me=this,height="22px";this.addChildren(mstrmojo.insert({alias:"layerCtrl",slot:"layerCtrlNode",scriptClass:"mstrmojo.HBox",height:height,children:[{alias:"layerSelectorList",scriptClass:"mstrmojo.Pulldown",popupToBody:true,cssClass:"mstrtbMapGridSelector",height:height,popupZIndex:999,getTooltipContent:function(){return mstrmojo.desc(15712,"Controller on layers");},updateTooltipConfig:me.updateButtonTooltipConfig,useRichTooltip:true,enabled:true,toolbarButtonType:$EnumToolbarButtonType.LAYERS_SELECT,layerCtrlList:null,onmousedown:function onmousedown(){var mapViewer=me.parent,layerCtrlList=this.layerCtrlList;if($MUTIL.checkHasFunction(mapViewer,"hideInfoWindow")){mapViewer.hideInfoWindow();}this.set("selected",!this.selected);if($MUTIL.checkHasFunction(layerCtrlList,"destroy")){layerCtrlList.destroy();}delete this.layerCtrlList;this.closePopup();this.layerCtrlList=new MapLayerControlListNew({sourceToolbar:me});this.openPopup(this.layerCtrlList);$MUTIL.addArrowNode(this.layerCtrlList.domNode);}}]}));},initMoreCtrl:function initMoreCtrl(){var me=this;this.addChildren(mstrmojo.insert({alias:"moreCtrl",scriptClass:"mstrmojo.Pulldown",slot:"moreCtrlNode",popupToBody:true,cssClass:"moreCtrlSelector",popupZIndex:999,getTooltipContent:function(){return mstrmojo.desc(15860,"More controls");},updateTooltipConfig:me.updateButtonTooltipConfig,useRichTooltip:true,enabled:true,moreCtrlBox:null,onmousedown:function onmousedown(){var mapViewer=me.parent,moreCtrlBox=this.moreCtrlBox;if($MUTIL.checkHasFunction(mapViewer,"hideInfoWindow")){mapViewer.hideInfoWindow();}this.set("selected",!this.selected);if($MUTIL.checkHasFunction(moreCtrlBox,"destroy")){moreCtrlBox.destroy();}delete this.moreCtrlBox;this.closePopup();this.moreCtrlBox=new MapMoreControls({sourceToolbar:me});this.openPopup(this.moreCtrlBox);$MUTIL.addArrowNode(this.moreCtrlBox.domNode);}}));},initMapStyleCtrl:function initMapStyleCtrl(){var me=this;this.addChildren(mstrmojo.insert({alias:"mapStyleCtrl",slot:"styleCtrlNode",scriptClass:"mstrmojo.vi.ui.toolbars.Toolbar",useRichTooltip:true,getTooltipContent:function(){return this.getTooltipText();},offsetTop:18,updateTooltipConfig:this.updateButtonTooltipConfig,getTooltipText:function(){return mstrmojo.desc(15713,"Map styles");},height:TOOLBAR_HEIGHT,postclick:function(){var menu=this._lastOpened;$MUTIL.addArrowNode(menu&&menu.domNode);},openMenu:function(menuCfg,item){var popupMenu;menuCfg.hostId=this.id;menuCfg.hostElement=this._getItemNode(item._renderIdx);if(menuCfg.hostElement){menuCfg.anchorElement=menuCfg.hostElement.childNodes[0];}this.openPopup(menuCfg.newInstance());popupMenu=this._lastOpened;if(popupMenu&&popupMenu.domNode){var itemCnt=popupMenu.items.length,lastItem=popupMenu._getItemNode(itemCnt-1),last2Item=(itemCnt%2===0)?popupMenu._getItemNode(itemCnt-2):null;if(lastItem){lastItem.style.marginBottom=0;}if(last2Item){last2Item.style.marginBottom=0;}popupMenu.domNode.style.overflow="visible";popupMenu.domNode.style.paddingBottom="8px";}me.setMapStyleMenuEventHandler(popupMenu);}}));},setMapStyleMenuEventHandler:function setMapStyleMenuEventHandler(popupMenu){var me=this,origMouseOver=popupMenu.onmouseover,origMouseOut=popupMenu.onmouseout;me.mapStyleMenu=popupMenu;popupMenu.onCloseMenuCallBack=function(){me.mapStyleMenu=null;};popupMenu.onmouseover=function(evt){var fromElem=evt.e.fromElement;if(origMouseOver){origMouseOver.call(popupMenu,evt);}if(!$DOM.contains(this.domNode,fromElem,true)){me.forceToolbarVisible();}};popupMenu.onmouseout=function(evt){var toElem=evt.e.toElement;if(origMouseOut){origMouseOut.call(popupMenu,evt);}if(!$DOM.contains(me.map.domNode,toElem,true)&&!$DOM.contains(this.domNode,toElem,true)){this.domNode.style.display=me.map.isCurrentVizBoxSelected()?"":"none";me.resetToolbarVisiblilityToCSS();}};},refreshMapStyleCtrl:function refreshMapStyleCtrl(){var mapStyleCtrl=this.mapStyleCtrl,toolbarCfg=new mstrmojo.ui.menus.ToolbarConfig(),styleMenuCfg=this._getMapStyleMenuConfig(),oldToolbarCfg,me=this;if(!mapStyleCtrl){return ;}oldToolbarCfg=mapStyleCtrl.toolbarCfg;if(oldToolbarCfg){mapStyleCtrl.toolbarCfg=null;if(oldToolbarCfg.destroy instanceof Function){oldToolbarCfg.destroy();}}if(!!styleMenuCfg){toolbarCfg.addDisposable(styleMenuCfg);toolbarCfg.addMenuToolbarBtn("","mapStyleSelectVBox",styleMenuCfg);}mapStyleCtrl.set("toolbarCfg",toolbarCfg);mapStyleCtrl.render();if(!!styleMenuCfg){var anchorElement=document.createElement("div");anchorElement.style.width="auto";anchorElement.style.height="20px";anchorElement.style.top="-11px";anchorElement.style.position="relative";mapStyleCtrl.itemsNode.appendChild(anchorElement);styleMenuCfg.anchorElement=anchorElement;}},_getMapStyleMenuConfig:function _getMapStyleMenuConfig(){var menuCfg=new mstrmojo.ui.menus.MenuConfig(),mapStyleData=this._getMapStyleData(),me=this,fnCustomMarkup=function(){return'<div class="{@cls} test" idx="{@idx}"><div>{@en@n}</div></div>';},fnGetHandler=function(value){return function(){var map=me.map;if($MUTIL.checkDefined(value)&&$MUTIL.checkHasFunction(map,"writeProperties")){map.writeProperties($EnumPropertyType.mapStyle,value);}};},mapStyle,mapStyleValue,mapStyleName,i,il;if(!mapStyleData||!$ARR.isArray(mapStyleData)||mapStyleData.length<1){return ;}menuCfg.menuCssClass=this.getStyleCssClassName("mapStylesMenuNew");menuCfg.isHostedWithin=false;menuCfg.supportsScroll=true;for(i=0,il=mapStyleData.length;i<il;i++){mapStyle=mapStyleData[i];mapStyleValue=mapStyle.v;mapStyleName=mapStyle.n;menuCfg.addCustomMenuItem(mapStyleName,"CSS"+mapStyle.type+(mapStyle.id||i),fnGetHandler(mapStyleValue),(function(selected){return function(){var cls="{@cls}"+(selected?" selected":"");return'<div class="'+cls+'" idx="{@idx}"><div class="label">{@en@n}</div><div class="state">'+mstrmojo.desc(514,"Selected")+"</div></div>";};})(mapStyle.selected));}return menuCfg;},_getMapStyleData:function _getMapStyleData(){var baseLayer=this.getBaseLayer();if(baseLayer&&baseLayer.getMapStyleData instanceof Function){return baseLayer.getMapStyleData();}},forceToolbarVisible:function forceToolbarVisible(){this.domNode.style.display="block";this.bottomRightNode.style.display="block";},resetToolbarVisiblilityToCSS:function resetToolbarVisiblilityToCSS(){this.domNode.style.display="";this.bottomRightNode.style.display="";},changeMapStyleMenuVisibilityWithMapToolBar:function changeMapStyleMenuVisibilityWithMapToolBar(event){if(this.mapStyleCtrl&&this.mapStyleMenu){if(event.e.type==="mouseout"){var toElem=event.e.toElement;if($DOM.contains(this.mapStyleMenu.domNode,toElem,true)){this.forceToolbarVisible();}else{if(!$DOM.contains(this.map.domNode,toElem,true)){this.resetToolbarVisiblilityToCSS();this.mapStyleMenu.domNode.style.display=this.map.isCurrentVizBoxSelected()?"":"none";}}}else{if(event.e.type==="mouseover"){this.resetToolbarVisiblilityToCSS();this.mapStyleMenu.domNode.style.display="";}}}},getBaseLayer:function getBaseLayer(){return this.parent&&this.parent.baseLayer;},appendLassoLayer:function appendLassoLayer(){this.removeLassoLayer();this.lassoLayer=new LassoLayer({parent:this.parent,selectionType:this.state});},removeLassoLayer:function removeLassoLayer(){var lassoLayer=this.lassoLayer;if(lassoLayer&&lassoLayer.destroy instanceof Function){lassoLayer.destroy();}delete this.lassoLayer;},updateButtonTooltipConfig:function updateButtonTooltipConfig(){var position=$DOM.position(this.domNode);this.richTooltip={content:this.getTooltipContent(),cssClass:"vi-regular vi-tooltip-V V-center",posType:$TOOLTIP.POS_TOPCENTER,top:position.y-position.h-(this.offsetTop||24),left:position.x+13};},updateBottomRightTooltipConfig:function updateBottomRightTooltipConfig(){var position=$DOM.position(this.domNode);this.richTooltip={content:this.getTooltipContent(),cssClass:"vi-regular vi-tooltip-D",top:position.y-5,left:position.x-9,posType:$TOOLTIP.POS_TOPRIGHT};},getStyleCssClassName:function getStyleCssClassName(baseClassName){var themeClassName=$MUTIL.getThemeClass();if($MUTIL.checkDefined(themeClassName)){baseClassName+=themeClassName;}return baseClassName;},getLayerCtrlList:function getLayerCtrlList(){var items=[],mapViewer=this.parent,layerIdxMappingArr=this.map&&this.map.layerIdxMappingArr,layerKey,graphicLayer,layerItem,k,kl;if(!mapViewer||!$ARR.isArray(layerIdxMappingArr)||layerIdxMappingArr.length<1){console.log("getLayerCtrlList(): no graphic layer found");return items;}for(k=0,kl=layerIdxMappingArr.length;k<kl;k++){layerKey=layerIdxMappingArr[k];graphicLayer=mapViewer.getGraphicLayer(layerKey);if(graphicLayer){layerItem={v:k,id:layerKey,n:graphicLayer.getLayerName(),isVisible:graphicLayer.isVisible(),isVisFilterSource:!!graphicLayer.isVisFilterSource(),dlAttr:graphicLayer.getDropZonesItem($EDZ.GeoAttribute)||"",dlMetric:graphicLayer.hasColorByAttribute()?"":(graphicLayer.getDropZonesItem($EDZ.ColorBy)||"")};if(graphicLayer.graphicType===$EnumGraphicType.Marker||graphicLayer.graphicType===$EnumGraphicType.Bubble){layerItem.isClustered=!!graphicLayer.isClustered;}items.push(layerItem);}}return items;},onselectedMetricIdxChange:function onselectedMetricIdxChange(layerKey,metricIndex,metricId){var graphicLayer=this.getGraphicLayer(layerKey);if(graphicLayer){graphicLayer.handleMetricSelectionChange(metricIndex,metricId);}},getLayerSelectedMetricIdx:function getLayerSelectedMetricIdx(layerKey){var layer=this.getGraphicLayer(layerKey);if(layer&&layer.getSelectedMetricIdx instanceof Function){return layer.getSelectedMetricIdx();}},getGraphicLayer:function getGraphicLayer(layerKey){var mapViewer=this.parent;if(mapViewer&&mapViewer.getGraphicLayer instanceof Function){return mapViewer.getGraphicLayer(layerKey);}},setLayerVisibility:function setLayerVisibility(layerKey,isVisible){var value=isVisible?"0":"1",map=this.map;if(map&&layerKey){map.writeProperties($EnumPropertyType.isHidden,value,layerKey);}},submitLayerVisibleChanges:function submitLayerVisibleChanges(undoConfig,redoConfig){var map=this.map;if(map){map.saveGraphicLayerVisibleInfo(undoConfig,redoConfig);}},resetSelectionState:function resetSelectionState(){var mapViewer=this.parent;if(!mapViewer){return ;}this.set("state",$EnumToolbarState.NORMAL);mapViewer.set("enablePopup",true);mapViewer.set("infoWindowVisible",true);this.removeLassoLayer();},destroy:function destroy(){var baseLayer=$HASH.walk("parent.baseLayer",this);if(baseLayer){baseLayer.detachCompassEvent();}delete this.parent;delete this.map;this._super();}});}());