(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom","mstrmojo.css","mstrmojo.hash","mstrmojo.SearchWidget","mstrmojo.ui.Pulldown");var $CSS=mstrmojo.css,$DOM=mstrmojo.dom,$HASH=mstrmojo.hash,KEY_CODE_NAME={9:"Tab",13:"Enter",27:"Esc",38:"ArrowUp",40:"ArrowDown"},CLEAR_BTN="sbClear",SEARCH_BTN="sbSearch";mstrmojo.SearchWidget2=mstrmojo.declare(mstrmojo.SearchWidget,null,{scriptClass:"mstrmojo.SearchWidget2",markupString:'<table id={@id} cellspacing="0" cellpadding="0" class="mstrmojo-SearchWidget mstrmojo-SearchBox-Wrapper {@cssClass}" style="{@cssText};"><tr><td class="mstrmojo-searchBox-firstCell"><div></div></td><td><div class="mstrmojo-SearchBox" mstrAttach:click ><input class="mstrmojo-SearchBox-input" type="text" style="width:{@width};" placeholder="{@placeholderText}" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" mstrAttach:keyup,blur/></div></td><td><div class="mstrmojo-SearchBox-clear" id="{@id}'+CLEAR_BTN+'" mstrAttach:click></div></td><td><div class="mstrmojo-SearchBox-bg"><div class="mstrmojo-SearchBox-search" id="{@id}'+SEARCH_BTN+'" mstrAttach:click ></div></div></td></tr></table>',markupSlots:{filterNode:function(){return this.domNode.rows[0].cells[0].firstChild;},inputNode:function(){return this.domNode.rows[0].cells[1].firstChild.firstChild;},clearNode:function(){return this.domNode.rows[0].cells[2].firstChild;},searchNode:function(){return this.domNode.rows[0].cells[3].firstChild.firstChild;}},filterNode:null,hasFilter:false,onfilterItemSelected:mstrmojo.emptyFn,filterSelectedIndex:null,filterItems:[],onfilterItemsChange:function(){this.filter.set("items",this.filterItems);this.filter.set("selectedIndex",this.filterSelectedIndex);},onfilterSelectedIndexChange:function(){this.filter.set("selectedIndex",this.filterSelectedIndex);},init:function init(props){if(this.hasFilter||props.hasFilter){this.children=[{scriptClass:"mstrmojo.ui.Pulldown",slot:"filterNode",alias:"filter",items:props.filterItems||[],selectedIndex:props.filterSelectedIndex||0,onitemSelected:function onitemSelected(item,selectedIndex){var selectedNode=this.selectedNode;this.parent.filterSelectedIndex=selectedIndex;this.parent.onfilterItemSelected(item,selectedNode);},getPopupListConfig:function getPopupListConfig(){return $HASH.copy({useRichTooltip:true,showTooltip:function showTooltip(e,win){var target=$DOM.eventTarget(win,e),node=this.getItemNodeFromTarget(target);if(node&&(node.scrollWidth>node.clientWidth)){this.constructor.prototype.showTooltip.call(this,e,win);}}},this.constructor.prototype.getPopupListConfig.call(this));}}];}this._super(props);},postBuildRendering:function postBuildRendering(){if(this._super){this._super();}if(this.hasFilter){this.filter.set("items",this.filterItems||[]);this.filter.set("selectedIndex",this.filterSelectedIndex||0);}}});}());