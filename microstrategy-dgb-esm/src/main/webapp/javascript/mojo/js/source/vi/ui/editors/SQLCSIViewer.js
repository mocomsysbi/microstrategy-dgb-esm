(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.string","mstrmojo.Box","mstrmojo.HBox","mstrmojo.Button","mstrmojo.Label","mstrmojo.TextArea","mstrmojo.Editor","mstrmojo.ui._HasScroller","mstrmojo.ui.ScrollableContainer");var $DOM=mstrmojo.dom,$NWB=mstrmojo.Button.newWebButton,$ARR=mstrmojo.array,$CSS=mstrmojo.css,$STR=mstrmojo.string;mstrmojo.vi.ui.editors.SQLCSIViewer=mstrmojo.declare(mstrmojo.Editor,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.vi.ui.editors.SQLCSIViewer",title:mstrmojo.desc(15619,"Query Details"),cssClass:"mstrmojo-charcoalboxe mstrmojo-SQLV mstrmojo-vi-ui-SQLV",csiText:"",copied:false,onOpen:function onOpen(){this.set("copied",false);this.updateScrollbars();},oncsiTextChange:function oncsiTextChange(v){this.content.csiTextLabel.set("text",$STR.encodeHtmlString(v.value));this.updateScrollbars();},setupScrollNodes:function setupScrollNodes(){this.scrollNode=this.content.containerNode;},children:[{scriptClass:"mstrmojo.Box",alias:"content",cssClass:"mstrmojo-SQLV-content-container",cssText:"",markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" style="{@cssText}"><div class="scroll-container" style="overflow:hidden;"></div><textarea name="csi_text" style="position:absolute;top:0;right:10000px"></textarea></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;},csiInputNode:function(){return this.domNode.lastChild;}},slot:"containerNode",csiTextLabel:undefined,children:[{scriptClass:"mstrmojo.Label",alias:"csiTextLabel",allowHTML:false,text:""}]},{alias:"buttonBar",scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBar",slot:"buttonNode",children:[{alias:"successIcon",cssClass:"success-icon",scriptClass:"mstrmojo.Label",bindings:{visible:"this.parent.parent.copied"}},{alias:"successTooltip",cssClass:"notice-toaster-label",scriptClass:"mstrmojo.Label",text:mstrmojo.desc(15620,"Statement Copied to Clipboard"),bindings:{visible:"this.parent.parent.copied"}},$NWB(mstrmojo.desc(14502,"Copy to Clipboard"),function onclick(){var viewer=this.parent.parent,csiTextField=viewer.content.csiInputNode;csiTextField.innerText=viewer.csiText;csiTextField.select();try{var isSuccessful=document.execCommand("copy");viewer.set("copied",isSuccessful);}catch(error){}},false,{cssClass:"copy-button",alias:"btnCopy"}),$NWB(mstrmojo.desc(2102,"Close"),function onclick(){this.parent.parent.close();},false,{alias:"btnClose"})]}]});})();