(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.HBox","mstrmojo.TextBox","mstrmojo.Button","mstrmojo.vi.ui.ElementsBrowser","mstrmojo.vi.ui.IncHierarchyList","mstrmojo.Label","mstrmojo.css","mstrmojo.hash","mstrmojo.desc");mstrmojo.requiresDescs(15830,10);var $DESC=mstrmojo.desc,$CSS=mstrmojo.css,$HASH=mstrmojo.hash;mstrmojo.vi.ui.editors.HierarchyElementsListPanel=mstrmojo.declare(mstrmojo.vi.ui.ElementsBrowser,null,{scriptClass:"mstrmojo.vi.ui.editors.HierarchyElementsListPanel",markupString:'<div id="{@id}" class="mstrmojo-Box mstrmojo-ui-vi-ElementsBrowser mstrmojo-HierarchyElementsListPanel {@cssClass}" style="{@cssText}"><div class="searchBar"><div></div><div></div></div><div></div></div>',markupSlots:{containerNode:function(){return this.domNode;},titleNode:function(){return this.domNode.firstChild.childNodes[0];},searchBoxNode:function(){return this.domNode.firstChild.childNodes[1];},elementListNode:function(){return this.domNode.childNodes[1];}},layoutConfig:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"title",text:$DESC(15830,"Elements List"),slot:"titleNode"},{scriptClass:"mstrmojo.SearchWidget",slot:"searchBoxNode",alias:"searchBox",quickSearchForClear:true,placeholderText:$DESC(10,"Search"),onsearch:function onsearch(pattern){var isSamePattern=!this.parent.searchPattern&&!pattern;if(!isSamePattern){this.parent.set("searchPattern",pattern);}},onclear:function onclear(){this.onsearch();},},{scriptClass:"mstrmojo.vi.ui.IncHierarchyList",alias:"elementList",slot:"elementListNode",allowUnlistedValues:false,bindings:{multiSelect:function(){return this.parent.multiSelect;},useListModKeys:function(){return this.parent.useListModKeys;},disableDrop:function(){return this.parent.disableDrop;}},getDataHelper:function(){return this.parent.ifDataHelper;},getAttribute:function(){return this.parent.attribute;},isHiearachyDisplay:function isHiearachyDisplay(){var eleBrowser=this.parent;return !eleBrowser.searchPattern||eleBrowser.searchPattern==="";},setSelectedItems:function setSelectedItems(exprJSON){if(typeof exprJSON==="object"){this.setSelectionByExprJSON(exprJSON);}},postSelectionChange:function postSelectionChange(){var attribute=this.getAttribute();if(attribute){this.parent.onItemsSelectionChange(this.buildSelectionExprJSON(attribute));}},ondblclick:function ondblclick(evt){this.parent.handleDblClick(this,evt);},handleSetParent:function handleSetParent(parentElement){this.parent.handleSetParent(parentElement);},getCurrentPE:function getCurrentPE(){return this.parent.getCurrentPE();},getExcludeList:function getExcludeList(){return this.parent.getExcludeList();},processDragStart:function processDragStart(context){return this.parent.processDragStart(context);},processDrop:function processDrop(context){return this.parent.processDrop(context);},processDragEnd:function processDragEnd(context){return this.parent.processDragEnd(context);}}],onattributeChange:function onattributeChange(evt){var eleList=this.elementList;eleList.clearItems();this._super(evt);},getSearchBox:function getSearchBox(){return this.searchBox;},onsearchPatternChange:function onsearchPatternChange(){this._super();this.toggleFlatCssClassForList();},toggleFlatCssClassForList:function toggleFlatCssClassForList(){var eleList=this.elementList;if(eleList.hasRendered){$CSS.toggleClass(eleList.domNode,"flat",!eleList.isHiearachyDisplay());}},resetDisplay:function resetDisplay(){var docCtrl=mstrApp.rootCtrl.docCtrl,docModel=docCtrl.model;this.getSearchBox().reset();this.searchPattern="";this.toggleFlatCssClassForList();this.elementList.clearSelect();this.set("ifDataSource",docCtrl.dataService());this.onUpdateBrowseElementsParams=function(params){$HASH.copyProps(["datasetID","messageID"],this.getBrowseConfig(),params);};this.set("attribute",$HASH.copyProps(["did","fs","n","t","st"],docModel.findUnitInDataSet(this.getAttributeIdFromModel())));this.postResetDisplay();},_set_selectedItems:null,getAttributeIdFromModel:mstrmojo.emptyFn,getBrowseConfig:mstrmojo.emptyFn,postResetDisplay:mstrmojo.emptyFn,onElementsListchange:mstrmojo.emptyFn,updateClearAllBtnState:mstrmojo.emptyFn,handleDblClick:mstrmojo.emptyFn,handleSetParent:mstrmojo.emptyFn,getCurrentPE:mstrmojo.emptyFn,getExcludeList:mstrmojo.emptyFn,processDragStart:mstrmojo.emptyFn,processDrop:mstrmojo.emptyFn,processDragEnd:mstrmojo.emptyFn});}());