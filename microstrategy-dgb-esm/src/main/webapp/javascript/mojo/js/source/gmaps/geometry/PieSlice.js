(function(){mstrmojo.requiresCls("mstrmojo.gmaps.MapUtils","mstrmojo.gmaps.geometry.Point");var $MUTIL=mstrmojo.gmaps.MapUtils;function degreeAngleToRadian(degree){return degree*Math.PI/180;}mstrmojo.gmaps.geometry.PieSlice=mstrmojo.declare(mstrmojo.gmaps.geometry.Point,null,{scriptClass:"mstrmojo.gmaps.geometry.PieSlice",nodeTag:"path",isRing:true,startDegree:0,endDegree:90,innerR:15,outterR:25,strokeScale:1.2,getSlicePath:function getSlicePath(x,y){var startRadian=degreeAngleToRadian(this.startDegree),endRadian=degreeAngleToRadian(this.endDegree),isLargeArc=Math.abs(endRadian-startRadian)>Math.PI?1:0,outterR=this.outterR,innerR=this.innerR,outterX1=x+outterR*Math.cos(startRadian),outterY1=y+outterR*Math.sin(startRadian),outterX2=x+outterR*Math.cos(endRadian),outterY2=y+outterR*Math.sin(endRadian),innerX1,innerY1,innerX2,innerY2,d,checkVal=function(valArray){var i;for(i=0;i<valArray.length;i++){if(isNaN(valArray[i])){console.log("invalid param for drawing pie slice");return false;}}return true;};if(!checkVal([x,y,outterR,startRadian,endRadian])){return ;}if(this.isRing){innerX1=x+innerR*Math.cos(startRadian);innerY1=y+innerR*Math.sin(startRadian);innerX2=x+innerR*Math.cos(endRadian);innerY2=y+innerR*Math.sin(endRadian);d="M "+outterX1+","+outterY1+" A "+outterR+","+outterR+" 0 "+isLargeArc+",1 "+outterX2+","+outterY2+" L "+innerX2+","+innerY2+" A "+innerR+","+innerR+" 0 "+isLargeArc+",0 "+innerX1+","+innerY1+" Z";}else{d="M "+outterX1+","+outterY1+" A "+outterR+","+outterR+" 0 "+isLargeArc+",1 "+outterX2+","+outterY2+" L "+x+","+y+" Z";}return d;},setPosition:function setPosition(props){this._super(props);if(!!$MUTIL.checkVal(this.x)&&!!$MUTIL.checkVal(this.y)){$MUTIL.setNodeAttributes(this.node,{d:this.getSlicePath(this.x,this.y)});}},getGeometrySize:function getGeometrySize(){if($MUTIL.checkVal(this.outterR)){var diameter=2*this.outterR;return{width:diameter,height:diameter};}},getPercentage:function getPercentage(){if($MUTIL.checkVal(this.startDegree)&&$MUTIL.checkVal(this.endDegree)){return(Math.abs((this.endDegree-this.startDegree)/360)*100).toFixed(2)+"%";}}});}());