(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.func","mstrmojo.vi.controllers.EnumEvents");var ARRAY=mstrmojo.array,FUNC=mstrmojo.func,EVENTS=mstrmojo.vi.controllers.EnumEvents;mstrmojo.vi.controllers.ControlUtils=mstrmojo.provide("mstrmojo.vi.controllers.ControlUtils",{findNewSelectedIndex:function findNewSelectedIndex(deletedIndex,currentSelectedIndex,panelCnt){deletedIndex.sort(function(a,b){return a-b;});var idx=deletedIndex.indexOf(currentSelectedIndex);var hash={};ARRAY.forEach(deletedIndex,function(item){hash[item]=true;});var delta=1;if(currentSelectedIndex+(deletedIndex.length-idx)===panelCnt){delta=-1;}var newSelectedIndex=currentSelectedIndex+delta;while(hash[newSelectedIndex]){newSelectedIndex+=delta;}return newSelectedIndex;},rebuildAndUpdateTOCcallback:function rebuildAndUpdateTOCcallback(){var model=this;return FUNC.wrapMethods(model.getRebuildCallback(),{success:function(){model.raiseEvent({name:EVENTS.UPDATE_TOC});}});}});})();