(function(){mstrmojo.requiresCls("mstrmojo.gmaps.MapEnums","mstrmojo.gmaps.MapUtils","mstrmojo.gmaps.layer.svg.GraphicLayerViewer","mstrmojo.gmaps.layer.svg.MarkerLayerViewer","mstrmojo.gmaps.layer.svg.BubbleLayerViewer","mstrmojo.gmaps.layer.svg.PolygonLayerViewer","mstrmojo.gmaps.layer.svg.PathLayerViewer","mstrmojo.gmaps.layer.canvas.DensityLayerViewer","mstrmojo.gmaps.layer.mapbox.CircleLayerViewer","mstrmojo.gmaps.layer.mapbox.ImageLayerViewer","mstrmojo.gmaps.layer.mapbox.MarkerLayerViewer","mstrmojo.gmaps.layer.mapbox.PolygonLayerViewer");var $GMAPS=mstrmojo.gmaps,$MUTIL=$GMAPS.MapUtils,$LAYER=$GMAPS.layer,$EnumGraphicType=$GMAPS.EnumGraphicType,$EnumMarkerType=$GMAPS.EnumMarkerType,$EnumRenderMethod=$GMAPS.EnumRenderMethod;getViewClsName:function getViewClsName(params,renderMethod){var hasImgThreshold;if(renderMethod===$EnumRenderMethod.mapbox){switch(params.graphicType){case $EnumGraphicType.Area:return"PolygonLayerViewer";case $EnumGraphicType.Bubble:return"CircleLayerViewer";case $EnumGraphicType.Density:return"CircleLayerViewer";case $EnumGraphicType.Marker:hasImgThreshold=params.parent&&params.parent.hasImgThreshold();if(hasImgThreshold||params.markerType===$EnumMarkerType.Image){return"ImageLayerViewer";}else{if(params.markerType&&params.markerType!==$EnumMarkerType.Circle){return"MarkerLayerViewer";}}default:return"CircleLayerViewer";}}else{if(renderMethod===$EnumRenderMethod.svg){switch(params.graphicType){case $EnumGraphicType.Area:return"PolygonLayerViewer";case $EnumGraphicType.Bubble:return"BubbleLayerViewer";case $EnumGraphicType.Path:return"PathLayerViewer";case $EnumGraphicType.Marker:default:return"MarkerLayerViewer";}}else{if(renderMethod===$EnumRenderMethod.canvas){return"DensityLayerViewer";}}}}mstrmojo.gmaps.layer.GraphicLayerViewerFactory=mstrmojo.provide("mstrmojo.gmaps.layer.GraphicLayerViewerFactory",{_mixinName:"mstrmojo.gmaps.layer.GraphicLayerViewerFactory",create:function create(params,renderMethod){if(params&&renderMethod){var viewCls=getViewClsName(params,renderMethod),LAYER=$LAYER[renderMethod][viewCls];if(LAYER){return new LAYER(params);}}},callFnForViewer:function callFnForViewer(viewer,fnName){var args=Array.prototype.slice.call(arguments,2);if($MUTIL.checkHasFunction(viewer,fnName)){viewer[fnName].apply(viewer,args);}}});}());