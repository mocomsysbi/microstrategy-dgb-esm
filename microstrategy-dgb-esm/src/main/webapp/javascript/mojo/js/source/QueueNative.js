(function(){mstrmojo.requiresCls("mstrmojo.ServerProxy");mstrmojo.QueueNative=mstrmojo.declare(mstrmojo.ServerProxy,null,{scriptClass:"mstrmojo.QueueNative",queue:[],requestCount:0,transport:null,createRequest:function(requestId,callback,params,config){return this._super(requestId,callback,params,config);},advance:function(){var curTask=this.queue.shift();if(curTask){this.request(curTask.callback,curTask.params,false,{});}},queueHandle:function(params,callback){if(this.requestCount>0){this.queue.push({callback:callback,params:params});this.requestCount++;}else{this.requestCount++;this.request(callback,params,false,{});}},response:function response(requestId,status,res){var request=this.getRequest(requestId);if(request){request.gotResponse=true;var callback=request.callback,methodName=(status&&!res.mstrerr)?"success":"failure";try{if(callback[methodName]){callback[methodName](res,request);}}finally{callback.complete(requestId);}this.requestCount--;this.advance();}},});}());