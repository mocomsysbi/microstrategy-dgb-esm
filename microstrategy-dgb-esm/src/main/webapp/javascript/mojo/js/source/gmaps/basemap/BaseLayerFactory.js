(function(){mstrmojo.requiresCls("mstrmojo.gmaps.MapEnums","mstrmojo.gmaps.basemap.EsriBaseLayer","mstrmojo.gmaps.basemap.GoogleBaseLayer","mstrmojo.gmaps.basemap.ImageBaseLayer","mstrmojo.gmaps.basemap.MapboxGLBaseLayer","mstrmojo.gmaps.basemap.MapboxBaseLayer");var $GMAPS=mstrmojo.gmaps,$BASEMAP=$GMAPS.basemap,$EnumBaseMapType=$GMAPS.EnumBaseMapType;function loadProps(_baseLayer,props){if((_baseLayer.getZoom instanceof Function)&&(_baseLayer.getLngLatCenter instanceof Function)){props.originalZoom=parseInt(_baseLayer.getZoom());props.originalLatLngCenter=_baseLayer.getLngLatCenter();if(props.GL_SUPPORTED){if(_baseLayer.baseMapType===$EnumBaseMapType.Mapbox){props.originalZoom++;}else{if(props.baseMapType===$EnumBaseMapType.Mapbox){props.originalZoom--;}}}}return props;}function createMapboxVis(props){if(!props.GL_SUPPORTED){return new $BASEMAP.MapboxBaseLayer(props);}return new $BASEMAP.MapboxGLBaseLayer(props);}mstrmojo.gmaps.basemap.BaseLayerFactory=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.gmaps.basemap.BaseLayerFactory",_baseLayer:null,create:function create(props){var _baseLayer=this._baseLayer;if(_baseLayer&&_baseLayer.baseMapType!==props.baseMapType){props=loadProps(_baseLayer,props);this.destroy();}if(!this._baseLayer){switch(props.baseMapType){case $EnumBaseMapType.Esri:default:this._baseLayer=new $BASEMAP.EsriBaseLayer(props);break;case $EnumBaseMapType.Google:this._baseLayer=new $BASEMAP.GoogleBaseLayer(props);break;case $EnumBaseMapType.Image:this._baseLayer=new $BASEMAP.ImageBaseLayer(props);break;case $EnumBaseMapType.Mapbox:this._baseLayer=createMapboxVis(props);break;}}return this._baseLayer;},get:function get(){return this._baseLayer;},destroy:function destroy(){if(this._baseLayer&&this._baseLayer.destroy){this._baseLayer.destroy();}delete this._baseLayer;}});}());