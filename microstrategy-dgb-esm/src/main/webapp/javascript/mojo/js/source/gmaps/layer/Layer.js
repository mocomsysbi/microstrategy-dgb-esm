(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.gmaps.MapUtils","mstrmojo.gmaps.geometry.Extent");var $MOJO=mstrmojo,$emptyFn=$MOJO.emptyFn,$GMAPS=$MOJO.gmaps,$MUTIL=$GMAPS.MapUtils,Extent=$GMAPS.geometry.Extent;mstrmojo.gmaps.layer.Layer=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.gmaps.layer.Layer",parent:null,map:null,div_:null,key:null,_active:false,geoExtent:null,mXMLNS:"http://www.w3.org/2000/svg",init:function init(props){this._super(props);if(this.parent){this.map=this.parent.parent;}this._initLayerDomTree();},_initLayerDomTree:$emptyFn,updateMapExtent:function updateMapExtent(){var mapViewer=this.parent;if(!!mapViewer&&mapViewer.updateMapExtent instanceof Function){this._active=true;mapViewer.updateMapExtent(this.key);}},setVisibility:function setVisibility(isVisible){var div_=this.getNode();if(div_&&div_.style){div_.style.display=(!!isVisible)?"block":"none";}},getCurrentSize:function getCurrentSize(){var div_=this.getNode(),rect=div_&&div_.getBoundingClientRect();if(rect){return{width:rect.width,height:rect.height};}},resize:function resize(width,height){var div_=this.div_,currentSize=this.getCurrentSize();if(!!div_&&$MUTIL.checkVal(height)&&$MUTIL.checkVal(width)&&currentSize&&!(height===currentSize.height&&width===currentSize.width)){$MUTIL.setCssStyles(div_,{height:parseInt(height)+"px",width:parseInt(width)+"px"});return true;}},panBy:$emptyFn,getNode:function getNode(){return this.div_;},getBaseLayer:function getBaseLayer(){return this.parent&&this.parent.baseLayer;},getGeoExtent:function getGeoExtent(){return this.cloneExtent(this.geoExtent);},getWidth:function getWidth(){var map=this.map;if(map){return parseInt(map.width);}},getHeight:function getHeight(){var map=this.map;if(map){return parseInt(map.height);}},getGraphicsOffset:function getGraphicsOffset(){var parent=this.parent,translate=parent&&parent.cssTransform;return(!!translate&&$MUTIL.checkVal(translate.x)&&$MUTIL.checkVal(translate.y))?translate:null;},isActive:function isActive(){return !!this._active;},isForPremium:function isForPremium(){var parent=this.parent;return !!(parent&&parent.constructor===$MOJO.mapbox.MapboxViewer);},cloneExtent:function cloneExtent(extent){if(!extent){return ;}var latSouth=extent.latSouth,latNorth=extent.latNorth,lngWest=extent.lngWest,lngEast=extent.lngEast;if($MUTIL.checkVal(latSouth)&&$MUTIL.checkVal(latNorth)&&$MUTIL.checkVal(lngWest)&&$MUTIL.checkVal(lngEast)){return new Extent({isGeo:extent.isGeo,latSouth:latSouth,latNorth:latNorth,lngWest:lngWest,lngEast:lngEast});}},addEventListeners:$emptyFn,removeEventListeners:$emptyFn,destroyLayerDom:function destroyLayerDom(){this.removeEventListeners();if(!!this.div_){this.div_.innerHTML="";if(this.div_.parentNode){this.div_.parentNode.removeChild(this.div_);}}delete this.div_;},unrender:function unrender(){this._active=false;},destroyObj:function destroyObj(obj){var parent=this.parent;if(parent&&parent.destroyObj instanceof Function){parent.destroyObj(obj);}},destroy:function destroy(){this.unrender();delete this.parent;delete this.map;this.destroyObj(this.geoExtent);delete this.geoExtent;this.destroyLayerDom();this._super();}});}());