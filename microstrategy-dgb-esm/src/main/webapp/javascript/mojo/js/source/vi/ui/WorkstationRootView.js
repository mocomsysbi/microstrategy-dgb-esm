(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.vi.enums.EnumHiddenSections","mstrmojo.vi.ui.RootView","mstrmojo.vi.ui.ShareLinkBar");var MENU_BAR_HEIGHT="0px",TOOL_BAR_HEIGHT="36px",$CSS=mstrmojo.css,CSS_INLINE_DIALOG="inline-dialog-mode";mstrmojo.vi.ui.WorkstationRootView=mstrmojo.declare(mstrmojo.vi.ui.RootView,[],{scriptClass:"mstrmojo.vi.ui.WorkstationRootView",markupString:'<div id="{@id}" class="mstrmojo-RootView {@cssClass}" style="{@cssText}" mstrAttach:contextmenu,click><div class="mstrmojo-RootView-pathbar"></div><div class="mstrmojo-RootView-sharelinkbar"></div><div class="mstrmojo-RootView-menutoolbar {@cssClassToolbar}"><div class="mstrmojo-RootView-menubar"></div><div class="mstrmojo-RootView-toolbar"></div></div><div id="mstrmojo-RootView-inlineDialog"></div><div><div class="mstrmojo-RootView-togglebar"></div><div class="mstrmojo-RootView-toc"></div><div class="mstrmojo-RootView-datasets"></div><div class="mstrmojo-RootView-content"></div><div class="mstrmojo-RootView-gallery"></div></div><div id="canvasOverlay"></div><div id="annotate_tools"></div></div>',markupSlots:{pathbarNode:function(){return this.domNode.firstChild;},sharelinkNode:function(){return this.domNode.childNodes[1];},menuToolbarNode:function(){return this.domNode.childNodes[2];},menubarNode:function(){return this.domNode.childNodes[2].childNodes[0];},toolbarNode:function(){return this.domNode.childNodes[2].childNodes[1];},inlineDialogNode:function(){return this.domNode.childNodes[3];},contentNode:function(){return this.domNode.childNodes[4];},toggleViewBarNode:function(){return this.domNode.childNodes[4].firstChild;},tableofContentNode:function(){return this.domNode.childNodes[4].childNodes[1];},datasetsNode:function(){return this.domNode.childNodes[4].childNodes[2];},containerNode:function(){return this.domNode.childNodes[4].childNodes[3];},galleryNode:function(){return this.domNode.childNodes[4].lastChild;},annotationsOverlayNode:function(){return this.domNode.childNodes[5];},annotationsToolbarNode:function(){return this.domNode.childNodes[6];}},menutoolbarHeight:"36px",init:function init(props){this._super(props);this.setSharelinkbar(new mstrmojo.vi.ui.ShareLinkBar({visible:false}));this.layoutConfig={h:{pathbarNode:"0px",menuToolbarNode:this.menutoolbarHeight,sharelinkNode:"auto",toggleViewBarNode:"100%",tableofContentNode:"100%",datasetsNode:"100%",inlineDialogNode:"0px",containerNode:"100%",galleryNode:"100%"},w:{pathbarNode:"all",menuToolbarNode:"all",sharelinkNode:"all",toggleViewBarNode:"38px",tableofContentNode:"auto",datasetsNode:"auto",inlineDialogNode:"all",containerNode:"100%",galleryNode:"auto"},xt:true};this.updateLayoutConfig();},updateLayoutConfig:function updateLayoutConfig(ignoreSelectionMode){var isPresentationMode=mstrApp.isAppStatePresentation(),isSelectionMode=(!ignoreSelectionMode&&mstrApp.isAppStateSelection()),HIDDEN_SEC=mstrmojo.vi.enums.EnumHiddenSections,SIZE_HIDDEN="0px",SIZE_MENU_DEFAULT="22px",SIZE_TOOLBAR_DEFAULT="36px";if(!this.hasMenubar||(isPresentationMode&&!mstrApp.enhancedPrensetation)){MENU_BAR_HEIGHT=SIZE_HIDDEN;TOOL_BAR_HEIGHT=SIZE_TOOLBAR_DEFAULT;this.menutoolbarHeight=isSelectionMode?SIZE_HIDDEN:SIZE_TOOLBAR_DEFAULT;}else{MENU_BAR_HEIGHT=SIZE_MENU_DEFAULT;TOOL_BAR_HEIGHT=SIZE_TOOLBAR_DEFAULT;this.menutoolbarHeight=(isSelectionMode||mstrApp.isInVFConfigPage)?SIZE_MENU_DEFAULT:"58px";}if(mstrApp.isSectionHidden(HIDDEN_SEC.DOCKTOP)){MENU_BAR_HEIGHT=SIZE_HIDDEN;TOOL_BAR_HEIGHT=SIZE_HIDDEN;this.menutoolbarHeight=SIZE_HIDDEN;}this.layoutConfig.w.toggleViewBarNode=isPresentationMode?"0px":(!mstrApp.isShare&&(mstrApp.isSectionHidden(HIDDEN_SEC.TOV))?"auto":"38px");this.layoutConfig.h.menuToolbarNode=this.menutoolbarHeight;$CSS.toggleClass(this.menubarNode,"noItems",!this.hasMenubar);},onthemeClassNameChange:function onthemeClassNameChange(evt){if(mstrmojo.ui._HasUITheme.EnumThemeNames.DARK_THEME!==evt.value){this._super(evt);}},openInlineDialog:function(params){var layoutConfigHeight=this.layoutConfig.h;layoutConfigHeight.menuToolbarNode=MENU_BAR_HEIGHT;layoutConfigHeight.inlineDialogNode=TOOL_BAR_HEIGHT;$CSS.toggleClass(this.menubarNode,CSS_INLINE_DIALOG,true);$CSS.toggleClass(this.toolbarNode,CSS_INLINE_DIALOG,true);var inlineDialog=mstrmojo.insert(params);this.addView(inlineDialog,"inlineDialogNode","inlineDialog");this.doLayout();inlineDialog.open();},closeInlineDialog:function(){this.removeAndDestroyChild(this.inlineDialog);$CSS.toggleClass(this.menubarNode,CSS_INLINE_DIALOG,false);$CSS.toggleClass(this.toolbarNode,CSS_INLINE_DIALOG,false);this.updateLayoutConfig(true);var layoutConfigHeight=this.layoutConfig.h;layoutConfigHeight.menuToolbarNode=this.menutoolbarHeight;layoutConfigHeight.inlineDialogNode="0px";this.doLayout();},setDimensions:function setDimensions(h,w){this.updateLayoutConfig();var hasDimChanged=this._super(h,w);return hasDimChanged;},setSharelinkbar:function setSharelinkbar(sharelinkbar){return this.addView(sharelinkbar,"sharelinkNode","linkbar");},setToggleViewBar:function setToggleViewBar(toggleViewBar){this.addView(toggleViewBar,"toggleViewBarNode","toggleViewBar",true);this.doLayout();},toggleToggleViewBar:function toggleToggleViewBar(isVisible){this.toggleViewBarNode.style.display=isVisible?this.cssDisplay:"none";this.doLayout();},setTocPanel:function setTocPanel(tableofContent){this.addView(tableofContent,"tableofContentNode","tocPanel",true);this.doLayout();}});}());