(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.dom","mstrmojo.EnumRWUnitType","mstrmojo.Label","mstrmojo.ui.Pulldown","mstrmojo.vi.ui.TargetSelector","mstrmojo.vi.ui.TruncatedList","mstrmojo.vi.ui.InlineDialogBase");mstrmojo.requiresDescs(16166,11955,11956);var $ARR=mstrmojo.array,$CSS=mstrmojo.css,$DOM=mstrmojo.dom;mstrmojo.vi.ui.FilterBoxInlineDialog=mstrmojo.declare(mstrmojo.vi.ui.InlineDialogBase,null,{scriptClass:"mstrmojo.vi.ui.FilterBoxInlineDialog",tocEnabled:false,selectFilters:true,init:function init(props){this._super(props);$CSS.addWidgetCssClass(this,"filter-box-dialog");},_setTargetsFunc:function _setTargetsFunc(){this.vis.setTargets(this.changes.filterKeys);},toggleFields:function toggleFields(){if(this.cgbs.length!==0){this.forType.set("visible",true);}},_addChildren:function _addChildren(){var me=this,myVis=me.vis,model=myVis.model,cc=[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-title-label",cssDisplay:"inline",allowHTML:true,text:mstrmojo.desc(16166,"Use <span>#</span> to filter data in").replace("#",myVis.title),visible:true},me._createTruncatedList(),{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-for-type",cssDisplay:"inline-block",alias:"forType",value:0,visible:false,selectedIndex:0,isHostedWithin:true,enabled:false,items:[{n:mstrmojo.desc(11955,"for #").replace("#",(me.cgbs[0]||{}).n),v:false},{n:mstrmojo.desc(11956,"for All Data"),v:true}],onitemSelected:function(item){me.changes.forAllData=item.v;},onenabledChange:function(){$CSS.toggleClass(this.domNode,"disabled",!this.enabled);}}],viss=model.getPanel(this.currentPanelKey,this.currentLayoutKey).children||[],i,targetKeys={};for(i=viss.length-1;i>=0;i--){me._addVis(viss[i],targetKeys);}this.addChildren(cc);this.targetKeys=targetKeys;}});}());