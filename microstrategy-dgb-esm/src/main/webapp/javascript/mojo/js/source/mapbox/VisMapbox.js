(function(){mstrmojo.requiresCls("mstrmojo.VisMapBase","mstrmojo.gmaps.MapEnums","mstrmojo.gmaps.MapUtils","mstrmojo.mapbox.MapboxViewer","mstrmojo.PerformanceLogOutput");var $MOJO=mstrmojo,$GMAPS=$MOJO.gmaps,$MUTIL=$GMAPS.MapUtils,$EnumPropertyType=$GMAPS.EnumPropertyType,$EnumMarkerType=$GMAPS.EnumMarkerType,$EnumBaseMapType=$GMAPS.EnumBaseMapType,$PerfLog=$MOJO.PerformanceLogOutput,CSS_LOADED=false;mstrmojo.mapbox.VisMapbox=mstrmojo.declare(mstrmojo.VisMapBase,null,{scriptClass:"mstrmojo.mapbox.VisMapbox",viewerCls:$MOJO.mapbox.MapboxViewer,defaultMarkerType:$EnumMarkerType.Circle,buildMap:function buildMap(){this._super();$PerfLog.endTimer("timerid_callback_LoadMainModule");$PerfLog.endTimer("timerid_callback_CustomLayerinitShapeInfo");},oldDataAdaptor:function oldDataAdaptor(){var vp=this.getProperties();if(vp){vp[$EnumPropertyType.baseMapType]=$EnumBaseMapType.Mapbox;}this._super();},createDefaultVp:function createDefaultVp(){var props=this._super()||{};props[$EnumPropertyType.markerType]=$EnumMarkerType.Circle;return props;},loadMapCss:function loadMapCss(){this._super();if(!CSS_LOADED){$MOJO.insertCSSLinks([$MOJO.getStyleRoot()+"/mstr/mapbox-gl.css"]);CSS_LOADED=true;}},isZoomThroughLayerCtrlShown:function isZoomThroughLayerCtrlShown(){var mapViewer=this.mapViewer,layerCount=mapViewer&&mapViewer.getGraphicLayerCount();return layerCount>1;},isZoomThroughLayerEnable:function isZoomThroughLayerEnable(){var zoomThroughtLayerEnablePropName=$EnumPropertyType.enableZoomThroughLayer,enabled=$MUTIL.parseBoolean(this.getPropertyValue(zoomThroughtLayerEnablePropName));return enabled&&this.isZoomThroughLayerCtrlShown();},postViewerInit:function postViewerInit(){this._super();var srcFilterPortlet=this.srcFilterPortlet;if(srcFilterPortlet){srcFilterPortlet.updateVisFilterTitle();}},onmouseout:function(event){var toolbar=this.mapViewer&&this.mapViewer.toolbar;if(toolbar){toolbar.changeMapStyleMenuVisibilityWithMapToolBar(event);}},onmouseover:function(event){var toolbar=this.mapViewer&&this.mapViewer.toolbar;if(toolbar){toolbar.changeMapStyleMenuVisibilityWithMapToolBar(event);}}});}());