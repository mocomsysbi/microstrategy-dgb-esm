(function(){mstrmojo.requiresCls("mstrmojo.EnumAuthenticationModes");var $AUTH_MODES=mstrmojo.EnumAuthenticationModes;function createTokenAndOpenLink(url){var identityToken,libraryTab,cb={success:function(res){identityToken=res.identityToken;},complete:function(){if(identityToken){url=url+"?idToken="+identityToken;}libraryTab.location.href=url;}};if(mstrConfig.seamlessLoginEnabled){if(mstrConfig.authMode===$AUTH_MODES.INTEGRATED.toString()){url+="?loginMode="+$AUTH_MODES.INTEGRATED;window.open(url,"_blank");}else{libraryTab=window.open();mstrmojo.xhr.request("GET",mstrConfig.taskURL,cb,{taskId:"createIdentityToken"});}}else{window.open(url,"_blank");}}function isLibraryConfigured(){return mstrConfig&&mstrConfig.features&&mstrConfig.features["show-dossier-library-link"]&&!!mstrConfig.libraryWebBaseURL;}function constructLibraryUrl(docId){var url=mstrConfig.libraryWebBaseURL+"app";if(docId){url+="/"+mstrConfig.projectId+"/"+docId;}return url;}mstrmojo.util.LibraryHelper=mstrmojo.provide("mstrmojo.util.LibraryHelper",{createTokenAndOpenLink:createTokenAndOpenLink,isLibraryConfigured:isLibraryConfigured,constructLibraryUrl:constructLibraryUrl});})();