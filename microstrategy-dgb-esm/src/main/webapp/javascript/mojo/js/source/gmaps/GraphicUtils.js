(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.gmaps.geometry.Extent");var $MOJO=mstrmojo,$ARR=$MOJO.array,Extent=$MOJO.gmaps.geometry.Extent;function getTheAreaOfPolygon(points){if(!points||points.length<=0){return 0;}var area=0,len=points.length,i,px,py,p2x,p2y;for(i=0;i<len-1;i++){px=points[i][0];py=points[i][1];p2x=points[i+1][0];p2y=points[i+1][1];area+=(px*p2y-p2x*py);}px=points[len-1][0];py=points[len-1][1];p2x=points[0][0];p2y=points[0][1];area+=(px*p2y-p2x*py);return Math.abs(area);}function getTheBiggestPointsArray(points){var i,n=(points&&points.length)||0,area,maxArea=Number.NEGATIVE_INFINITY,maxIndex=-1;if(n===1){return 0;}for(i=0;i<n;i++){area=getTheAreaOfPolygon(points[i]);if(area>maxArea){maxArea=area;maxIndex=i;}}return maxIndex;}function _calGeoExtentOfPolyline(geoPointArr,isNotGeo){if(!$ARR.isArray(geoPointArr)||geoPointArr.length<1){return ;}var geoExtent=new Extent({isGeo:!isNotGeo}),point,j,jl;for(j=0,jl=geoPointArr.length;j<jl;j++){point=geoPointArr[j];geoExtent.mergePoint(point.lat,point.lng);}return geoExtent;}mstrmojo.gmaps.GraphicUtils=mstrmojo.provide("mstrmojo.gmaps.GraphicUtils",{_mixinName:"mstrmojo.gmaps.GraphicUtils",getCentroidOfPolygon:function getCentroidOfPolygon(points){var index=getTheBiggestPointsArray(points);if(index<0){return null;}points=points[index];var area=0,innerArea,len=points.length,i,px,py,p2x,p2y,centroid=[0,0];for(i=0;i<len-1;i++){px=points[i][0];py=points[i][1];p2x=points[i+1][0];p2y=points[i+1][1];innerArea=(px*p2y-p2x*py);area+=innerArea;centroid[0]+=(px+p2x)*innerArea;centroid[1]+=(py+p2y)*innerArea;}px=points[len-1][0];py=points[len-1][1];p2x=points[0][0];p2y=points[0][1];innerArea=(px*p2y-p2x*py);area+=innerArea;centroid[0]+=(px+p2x)*innerArea;centroid[1]+=(py+p2y)*innerArea;area=area*3;centroid=[centroid[0]/area,centroid[1]/area];return centroid;},calGeoExtent:function calGeoExtent(isNotGeo,coordArr){var geoExtent,i,il;if(!$ARR.isArray(coordArr)||coordArr.length<1){return ;}geoExtent=new Extent({isGeo:!isNotGeo});for(i=0,il=coordArr.length;i<il;i++){geoExtent.union(_calGeoExtentOfPolyline(coordArr[i],isNotGeo));}return geoExtent;},unifyPolygonJSON:function unifyPolygonJSON(screenPolylineArr){if(!screenPolylineArr){return ;}return $ARR.map(screenPolylineArr,function(polyline){return $ARR.map(polyline,function(point){if(point){return[point.x,point.y];}});});}});}());