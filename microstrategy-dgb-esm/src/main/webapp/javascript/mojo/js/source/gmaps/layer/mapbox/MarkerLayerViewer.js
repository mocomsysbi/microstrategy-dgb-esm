(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.gmaps.MapEnums","mstrmojo.gmaps.layer.mapbox.GraphicLayerViewer");var $MOJO=mstrmojo,$HASH=$MOJO.hash,$ARR=$MOJO.array,$EnumMarkerType=$MOJO.gmaps.EnumMarkerType,TEXT_FONTS=["map_marker Regular"],LAYOUT={"text-line-height":1,"text-padding":0,"text-anchor":"center","text-allow-overlap":true,"icon-optional":true,"text-font":TEXT_FONTS};function getMarkerIcon(markerType){switch(markerType){case $EnumMarkerType.Square:return String.fromCharCode("0xe802");case $EnumMarkerType.Diamond:return String.fromCharCode("0xe800");case $EnumMarkerType.Pin:return String.fromCharCode("0xe801");case $EnumMarkerType.Circle:default:return String.fromCharCode("0xe804");}}function getMarkerSize(markerType){switch(markerType){case $EnumMarkerType.Square:return 8;case $EnumMarkerType.Diamond:case $EnumMarkerType.Pin:case $EnumMarkerType.Circle:default:return 11;}}mstrmojo.gmaps.layer.mapbox.MarkerLayerViewer=mstrmojo.declare(mstrmojo.gmaps.layer.mapbox.GraphicLayerViewer,null,{scriptClass:"mstrmojo.gmaps.layer.mapbox.MarkerLayerViewer",type:"symbol",markerType:null,shapeFmtNames:{fillColor:"text-color",fillOpacity:"text-opacity",strokeColor:"text-halo-color",strokeWidth:"text-halo-width"},getExtraSourceProps:function getExtraSourceProps(){return{buffer:10};},getLayout:function getLayout(){var markerType=this.markerType;return $HASH.copy(LAYOUT,{"text-field":getMarkerIcon(markerType),"text-size":getMarkerSize(markerType)});},getPaint:function getPaint(){return $HASH.copy({"text-translate-anchor":"viewport"},this._super());},setMarkerType:function setMarkerType(markerType){var layers=this.getPrimaryShapeLayers(),map=this.getMapInstance();if(map){$ARR.forEach(layers,function(layer){map.setLayoutProperty(layer,"text-field",getMarkerIcon(markerType));map.setLayoutProperty(layer,"text-size",getMarkerSize(markerType));});}this.markerType=markerType;},getLabelOffset:function getLabelOffset(){return[0,3];}});}());