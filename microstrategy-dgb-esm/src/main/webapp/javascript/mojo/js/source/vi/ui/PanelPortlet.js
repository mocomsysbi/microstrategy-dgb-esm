(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout","mstrmojo.vi.ui._IsPanel","mstrmojo.dom","mstrmojo.css");var $DOM=mstrmojo.dom;mstrmojo.vi.ui.PanelPortlet=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo.vi.ui._IsPanel],{scriptClass:"mstrmojo.vi.ui.PanelPortlet",init:function init(props){this._super(props);if(!!mstrApp.isWSStyling){this.paddingCfg={levelDiff:10,paddingLeft:8};}mstrmojo.css.addWidgetCssClass(this,"mstrmojo-VIPanelPortlet");this.markupMethods=mstrmojo.hash.copy(this.markupMethods,{onenabledChange:mstrmojo.Widget.enabledMarkupMethod});},layoutConfig:{h:{titlebarNode:"20px",containerNode:"100%"},w:{titlebarNode:"100%",containerNode:"100%"},xt:true},showTitleBarContextMenu:false,preOpenContextMenu:mstrmojo.emptyFn,canCollapse:true,level:null,onCollapsedChange:mstrmojo.emptyFn,panelId:"",ignoreLayout:true,paddingCfg:{levelDiff:13,paddingLeft:9},togglePortlet:function togglePortlet(isCollapsed){if(this.canCollapse){this.titleBar.set("isCollapsed",isCollapsed);}},customizeTitleBarCfg:function customizeTitleBarCfg(cfg){return cfg;},getTitleBarCfg:function getTitleBarCfg(){var cfg=this._super(),me=this;cfg.canCollapse=this.canCollapse;cfg.cssClass="small";cfg.editTitleOnDoubleClick=false;if(this.showTitleBarContextMenu){cfg.oncontextmenu=function(evt){$DOM.preventDefault(window,evt.e);var target=evt.getTarget();if($DOM.contains(this.textNode,target,true,this.domNode)){evt.cancel();this.tbToolbar.closePopup();var menuCfg=this.getMenuConfig();if(menuCfg){menuCfg.hostId=this.tbToolbar.id;menuCfg.hostElement=this.tbToolbar.domNode;menuCfg.position=$DOM.getMousePosition(evt.e,evt.hWin);me.preOpenContextMenu();this.tbToolbar.openPopup(menuCfg.newInstance());menuCfg.position=null;}}};}cfg.onToggleCollapseByUI=function(){me.onCollapsedChange();};return this.customizeTitleBarCfg(cfg);},onRender:function onRender(){this._super();if(this.level!==null){this.titleBar.leftToolNode.style.paddingLeft=(this.paddingCfg.paddingLeft)+this.level*(this.paddingCfg.levelDiff)+"px";this.titleBar.doLayout();}},updateToolbar:function updateToolbar(cfg){var me=this;this.addMenuItems(cfg);cfg.preShowMenu=function(){me.preOpenContextMenu();};var panelId=this.panelId;if(panelId){mstrmojo.all[panelId].addPopupHandlers(cfg);}return this._super(cfg);},addMenuItems:function addMenuItems(cfg){},getLayoutOffsets:function(){var portletSrc=this.portletSrc;return(portletSrc&&portletSrc.scriptClass==="mstrmojo.gmaps.MapLayerZone")?{h:0,w:26}:{h:0,w:18};}});}());