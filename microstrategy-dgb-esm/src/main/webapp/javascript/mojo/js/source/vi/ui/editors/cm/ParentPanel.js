(function(){mstrmojo.requiresClsP("mstrmojo","Box","HBox","TextBox","Button","Label","tooltip","dom","string","hash","Widget");mstrmojo.requiresCls("mstrmojo.vi.ui.editors.cm.IncFetchElementList");mstrmojo.requiresDescs(15597,15598,15627);var $DESC=mstrmojo.desc,$H=mstrmojo.hash,$ENC=mstrmojo.string.encodeHtmlString,$DOM=mstrmojo.dom;mstrmojo.vi.ui.editors.cm.ParentPanel=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.vi.ui.editors.cm.ParentPanel",cssClass:"mstrmojo-ParentPanel mstrmojo-ui-vi-ElementsBrowser",children:[{scriptClass:"mstrmojo.Box",alias:"labelBox",children:[{scriptClass:"mstrmojo.Label",cssDisplay:"inline-block",text:$DESC(15597,"Parent:")},{scriptClass:"mstrmojo.Label",cssDisplay:"inline-block",alias:"parentLabel",useRichTooltip:true,item:{},text:"",onitemChange:function(){this.set("text",this.item&&this.item.n);},updateTooltipConfig:function(){var target=this.domNode,position;if((target.scrollWidth>target.clientWidth||!target.textContent)&&(this.item&&this.item.v)){position=$DOM.position(this.domNode);this.richTooltip={cssClass:"vi-regular vi-tooltip-V",posType:mstrmojo.tooltip.POS_BOTTOMLEFT,content:target.textContent||("<b>Name: </b>"+$ENC(this.item.n)+"<br><b>ID: </b>"+$ENC(this.item.v)),top:position.y,left:position.x};}else{delete this.richTooltip;}}}]},{scriptClass:"mstrmojo.Box",cssClass:"disableMsg",visible:false,alias:"disableMsg",children:{scriptClass:"mstrmojo.Widget",markupString:"<div>"+$ENC($DESC(15627,"Setting the parent of a calculated member is not supported against Essbase."))+"</div>"}},{scriptClass:"mstrmojo.Box",cssClass:"eb-box-search",alias:"searchBox",children:[{scriptClass:"mstrmojo.TextBox",alias:"searchTB",hint:$DESC(15598,"Search Parent..."),cssClass:"eb-searchBox",valueChangeDelay:300,autoComplete:false,autoCorrect:false,autoCapitalize:false,onEnter:function onEnter(){var text=this.value,parentPanel=this.parent.parent;parentPanel.set("searchPattern",text);},onvalueChange:function onvalueChange(){var text=this.value,parentPanel=this.parent.parent;parentPanel.set("searchPattern",text);}},{scriptClass:"mstrmojo.Button",cssClass:"eb-searchBox-clear",text:"",onclick:function(){var searchTB=this.parent.searchTB;searchTB.set("value","");searchTB.focus();},bindings:{visible:"(this.parent.searchTB.value || '').length > 0"}}]},{scriptClass:"mstrmojo.vi.ui.editors.cm.IncFetchElementList",alias:"parentElementList",onchange:function(){if(this.selectedItem){this.parent.labelBox.parentLabel.set("item",this.selectedItem);if(this.toBeSelectedItem.v!==this.selectedItem.v){this.parent.set("isPEChanged",true);}this.set("toBeSelectedItem",this.selectedItem);}}}],parentLabel:function parentLabel(){return this.labelBox.parentLabel;},searchTextBox:function searchTextBox(){return this.searchBox.searchTB;},getSelectedParent:function getSelectedParent(){return this.parentElementList.selectedItem;},disableSetParent:function disableSetParent(){this.disableMsg.set("visible",true);this.searchBox.set("visible",false);this.parentElementList.set("visible",false);},resetDisplay:function resetDisplay(parentElement,browseConfig,isEssbaseSource){if(isEssbaseSource){this.disableSetParent();return ;}var peList=this.parentElementList;peList.clearSelect();this.set("isPEChanged",false);peList.set("toBeSelectedItem",$H.copy(parentElement,{}));peList.scrollNode.scrollTop=0;peList.scrollNode.scrollLeft=0;peList.updateScrollbars();this.browseConfig=browseConfig;this.searchTextBox().set("value","");this.set("targetAttribute",browseConfig.attributeID);this.parentLabel().set("item",parentElement);},onsearchPatternChange:function onsearchPatternChange(){this.parentElementList.startBrowsing(this.browseConfig,this.searchPattern);this.targetAttribute=this.browseConfig.attributeID;},ontargetAttributeChange:function ontargetAttributeChange(){this.parentElementList.startBrowsing(this.browseConfig,this.searchPattern);this.searchPattern=this.searchTextBox.value;}});}());