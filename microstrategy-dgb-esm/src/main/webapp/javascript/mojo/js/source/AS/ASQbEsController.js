(function(){mstrmojo.requiresCls("mstrmojo.qb.es.Controller");mstrmojo.AS.ASQbEsController=mstrmojo.declare(mstrmojo.qb.es.Controller,null,{onFinishButtonClick:function onFinishButtonClick(){var result={};var model=mstrApp.rootController.model,dbrs=model.dbrs,tables=model.tables,dbr=dbrs.find(function(obj){return obj.did===model.SelDBRoleID;});tables.forEach(function(tbl){var dbrId=tbl.dbr;tbl.name=tbl.n;if(!result[dbrId]){var dbr=dbrs.find(function(obj){return obj.did===dbrId;});result[dbrId]={id:dbrId,type:dbr.mdDBRole.db_type,name:dbr.n,tables:[]};}result[dbrId].tables.push(tbl);});window.mstrAppSchema&&window.mstrAppSchema.callbacks.fetchTablesCallback(result);mstrApp.getRootController().exitApplication();}});}());