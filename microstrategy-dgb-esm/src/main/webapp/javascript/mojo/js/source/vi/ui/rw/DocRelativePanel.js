(function(){mstrmojo.requiresCls("mstrmojo.DocPanel","mstrmojo.vi._MonitorsAppState","mstrmojo.vi._MonitorsLayoutMode","mstrmojo.vi.ui._HasBoxLayout","mstrmojo.ui._HasScroller","mstrmojo.vi.ui.BoxLayoutConfig","mstrmojo.vi.ui.rw.VizBox","mstrmojo.vi.ui.rw.FilterBox","mstrmojo.func","mstrmojo.array","mstrmojo.hash","mstrmojo.string","mstrmojo.boxmodel","mstrmojo.models.FormatModel","mstrmojo.vi.models.EnumDragSources","mstrmojo.vi.enums.EnumFeatures","mstrmojo.vi.controllers.EnumEvents","mstrmojo.vi.enums.EnumThemeProperties","mstrmojo.css","mstrmojo.vi.ui._HasGroup","mstrmojo.DocDataService");var $FUNC=mstrmojo.func,$ARR=mstrmojo.array,$HASH=mstrmojo.hash,$CSS=mstrmojo.css,$STR=mstrmojo.string,$DRAG_SRC=mstrmojo.vi.models.EnumDragSources,$PORTAL_STATES=mstrmojo.vi.ui.rw.VizBox.ENUM_PORTAL_STATE,$FORMAT_MODEL=mstrmojo.models.FormatModel,$GET_FORMAT_OBJ=$FORMAT_MODEL.getFormatUpdate,$ENUM_FORMAT_PROPERTIES=$FORMAT_MODEL.ENUM_PROPERTY_NAMES,FEATURES=mstrmojo.vi.enums.EnumFeatures,ENUM_EVENTS=mstrmojo.vi.controllers.EnumEvents,$ENUM_THEME_SUBTYPE_LAYOUT=mstrmojo.vi.enums.EnumThemeProperties.SUBTYPE.LAYOUT,LAYOUT_BREAK_POINT=768,SCROLLBAR_WIDTH=11,STATE_REGULAR=0,STATE_TABLET=1;var CONTAINER_NODE_MARGIN=2;function addBoxFormatActions(actions,skipPartialRetrieval){actions=actions||[];(this.children||[]).forEach(function(child){var childPositionProps=child.addFormatProps(undefined,skipPartialRetrieval);if(childPositionProps){actions.push(childPositionProps);}});return actions;}function addBoxLayoutAction(actions,skipPartialRetrieval){actions.push(this.model.getUnitFormatAction(this,1,$GET_FORMAT_OBJ($ENUM_FORMAT_PROPERTIES.LAYOUT_XML,this.boxLayoutConfig.getBoxState()),skipPartialRetrieval));return actions;}function generateChildToolbars(){(this.children||[]).forEach(function(child){child.generateToolbar();});}function raisePanelDisplaying(){if(this.visible){this.raiseEvent({name:"panelDisplaying"});var node=this.node,defn=node.defn,panelKey=node.k,layoutKey=defn._lkz;this.model.raiseEvent({name:"panelDisplaying",panelKey:panelKey,layoutKey:layoutKey});}}function toggleDragAllowedStatus(show){$CSS.toggleClass(this.domNode,"undraggable-uc",show);}function toggleHighlight(){var isValidMode=!mstrApp.isAppStatePresentation()&&!mstrApp.isAppStateSelection(),dNode=this.domNode;$CSS.toggleClass(this.domNode,"pulse",isValidMode);setTimeout(function(){$CSS.toggleClass(dNode,"pulse",false);},500);}function convertLayoutXMLToSingleColumn(layoutXML,containerWidth,padding){var me=this,childArr=[],groupBoxMap={},groupIdMap={},groupInfo=this.getGroupInfo();$HASH.forEach(groupInfo,function(group,groupId){group.forEach(function(unitKey){groupIdMap[unitKey]=groupId;});});var traverseLayoutXML=function(layoutXML){if(layoutXML.t==="c"){layoutXML.f=true;layoutXML.l=layoutXML.h;var unitKey=layoutXML.k,groupId=groupIdMap[unitKey],groupArr;if(groupId&&groupId!==""){groupArr=groupBoxMap[groupId];if(!groupArr){groupArr=groupBoxMap[groupId]=[];}groupArr.push(layoutXML);if(childArr.indexOf(groupArr)===-1){childArr.push(groupArr);}}else{layoutXML.w=containerWidth;childArr.push(layoutXML);}}else{$ARR.forEach(layoutXML.children,function(child){traverseLayoutXML(child);});}};traverseLayoutXML(layoutXML);var rootChildren=[],totalHeight=0;childArr.forEach(function(child){if(Array.isArray(child)){var length=child.length,unit1,unit2,box1,box2,style1,style2,groupArr,clearArr=[],totalWidth,unitHeight,i,j;var fnCalculateWidth=function(units){units.forEach(function(unit){unit.f=false;unit.l=parseInt(unit.w/totalWidth,10);});};for(i=0;i<length;i++){unit1=child[i];if(!unit1){continue;}unitHeight=unit1.h;box1=me.getUnitByKey(unit1.k);style1=box1.originalDim||box1.domNode.style;box1.originalDim=undefined;groupArr=[unit1];totalWidth=unit1.w;for(j=i+1;j<length;j++){unit2=child[j];if(!unit2){continue;}box2=me.getUnitByKey(unit2.k);style2=box2.originalDim||box2.domNode.style;clearArr.push(box2);if(style1.top===style2.top&&style1.height===style2.height){groupArr.push(unit2);child[j]=undefined;totalWidth+=unit2.w;}}if(groupArr.length>1){fnCalculateWidth(groupArr);rootChildren.push({children:groupArr,o:"h",t:"b",f:true,l:unit1.h,h:unit1.h,w:containerWidth});}else{unit1.w=containerWidth;rootChildren.push(unit1);}totalHeight+=unitHeight;}$ARR.forEach(clearArr,function(boxItem){boxItem.originalDim=undefined;});}else{rootChildren.push(child);totalHeight+=child.h;}});return{children:rootChildren,o:"v",t:"b",h:totalHeight+(rootChildren.length-1)*padding,w:containerWidth};}mstrmojo.vi.ui.rw.DocRelativePanel=mstrmojo.declare(mstrmojo.DocPanel,[mstrmojo.vi.ui._HasBoxLayout,mstrmojo.ui._HasScroller,mstrmojo.vi._MonitorsAppState,mstrmojo.vi._MonitorsLayoutMode,mstrmojo.vi.ui._HasGroup],{scriptClass:"mstrmojo.vi.ui.rw.DocRelativePanel",formatHandlers:null,childPadding:4,allowPanelEdgeTargeting:true,children:null,model:null,titleText:null,previousLayout:null,subPanelCssText:"position:absolute;",markupString:'<div id="{@id}" class="mstrmojo-DocPanel {@cssClass}" style="{@cssText}{@domNodeCssText}"><div class="mstrmojo-DocSubPanel-content" style="{@containerNodeCssText}{@subPanelCssText}"><div></div></div></div>',markupSlots:{panelNode:function(){return this.domNode;},subPanelNode:function(){return this.domNode.firstChild;},containerNode:function(){return this.domNode.firstChild.firstChild;}},init:function init(props){this._super(props);this.childPadding=mstrApp.getThemeProps($ENUM_THEME_SUBTYPE_LAYOUT).drpChildPadding;$CSS.addWidgetCssClass(this,"mstrmojo-VIDocRelativePanel");var id=this.id;this.controller.view.getLayout(this.node.defn._lkz).attachEventListener("layoutRedisplay",id,function(){if(this.selected){raisePanelDisplaying.call(this);}});this.markupMethods=$FUNC.override({onvisibleChange:function(){this._super();if(this.visible){generateChildToolbars.call(this);}raisePanelDisplaying.call(this);}},$HASH.copy(this.markupMethods));this.boxLayoutConfig=new mstrmojo.vi.ui.BoxLayoutConfig({hostId:id,padding:this.childPadding,needsValidation:true,getBoxChildClass:function(boxChild){return mstrmojo.all[id].getBoxLayoutChild(boxChild).scriptClass;}});this.model.attachEventListener("viIconTabClicked",id,function(evt){var hgl=this.model.hgl;if(evt.id==="vi_flt"&&!hgl){toggleHighlight.call(this);}});this.model.attachEventListener(ENUM_EVENTS.UPDATE_TOC,id,function(){if(this.isPanelDisplaying()){generateChildToolbars.call(this);}}.bind(this));this.model.attachEventListener("visOutsideScrolled",id,function(evt){if(this.scrollbarHostNode){this.scrollbarHostNode.scrollTop+=-evt.deltaY;this.scrollbarHostNode.scrollLeft+=-evt.deltaX;}}.bind(this));this.isInteractive=mstrApp.allowWebDashboardDesign();},onAppStateChange:function(){if(this._tgtSelections&&!mstrApp.isAppStateSelection()){this._tgtSelections.clear();}},onLayoutModeChange:function(){this.isInteractive=mstrApp.allowWebDashboardDesign()&&!mstrApp.isLayoutModePreview();if(!mstrApp.supportFeature(FEATURES.SUPPORT_RESPONSIVE_RESIZING)){var docLayout=this.controller.view.layoutViewer.docLayout,layoutWidth=parseInt(docLayout.width,10)||0;if(layoutWidth<=LAYOUT_BREAK_POINT){this.buildBoxLayout();}}},onremoveChild:function onremoveChild(){toggleDragAllowedStatus.call(this,!this.hasMultipleChildren());},onaddChild:function onaddChild(){toggleDragAllowedStatus.call(this,!this.hasMultipleChildren());},setupScrollNodes:function setupScrollNodes(){if(mstrApp.supportFeature(FEATURES.SUPPORT_RESPONSIVE)){this.scrollNode=this.subPanelNode;this.scrollbarHostNode=this.panelNode;}else{this.scrollNode=null;this.scrollbarHostNode=null;}},isPanelDisplaying:function(){return this.selected&&this.node.defn._lkz===this.model.getCurrentLayoutKey();},getLayoutOffsets:function getLayoutOffsets(){var LAYOUT_PROPS=mstrApp.getThemeProps($ENUM_THEME_SUBTYPE_LAYOUT);return{h:8-2*CONTAINER_NODE_MARGIN+LAYOUT_PROPS.drpLOHW_Compensation,w:8-2*CONTAINER_NODE_MARGIN+LAYOUT_PROPS.drpLOHW_Compensation};},getBoxLayoutChild:function getBoxLayoutChild(boxChild){var box=this._super(boxChild);if(!box){return this.getUnitByKey(boxChild.k);}return box;},addChildren:function addChildren(children,idx,silent){this._super(children,idx,silent);var model=this.model,keyMap=model.findKeyMap(this.node);if(keyMap){var isReplaced=this.boxLayoutConfig.replaceLayoutXmlKeys(keyMap);if(isReplaced){var keyBoxes=model.replaceKeyBoxes=model.replaceKeyBoxes||[];keyBoxes.push(this);}}this.buildBoxLayout();},refresh:function refresh(){this.boxLayoutConfig.dirty=true;this._super();this.buildBoxLayout();},update:function update(node){var defn=node.defn,layoutXML=defn&&defn.layoutXML,boxLayoutConfig=this.boxLayoutConfig;if(layoutXML){boxLayoutConfig.box=layoutXML;}else{this.defn.layoutXML=boxLayoutConfig.useDefaultBox(node.data.objects||[]);}this.titleText=defn&&defn.ttl;this.title=$STR.encodeHtmlString(this.titleText);},hasMultipleChildren:function hasMultipleChildren(){return(this.children.length>1);},getSplitterHost:function getSplitterHost(){return this.containerNode;},getTargetKeysByType:function getTargetKeysByType(types){return(this.children||[]).filter(function(child){return(types||[]).indexOf(parseInt(child.defn.t,10))>-1;}).map(function(child){return child.k;});},getTargetKeysExcludingTypes:function getTargetKeysExcludingTypes(types){return(this.children||[]).filter(function(child){return(types||[]).indexOf(parseInt(child.defn.t,10))<0;}).map(function(child){return child.k;});},insertNewBoxAndSaveDeferred:function(update,box,actions,callback,targetBox,edge){var id=this.id;this.addChildren([box]);this._super(update,box,actions,$FUNC.wrapMethods({failure:function(){mstrmojo.all[id].removeChildren(box);box.destroy();}},callback),targetBox,edge);},addUnit:function addUnit(unit,targetBox,edge,update,skipPartialRetrieval){this.addChildren([unit]);var newChild=this.insertNewBox(unit,targetBox,edge,update);if(update){this.addSaveBoxLayoutActions(update,skipPartialRetrieval);}return newChild;},restoreAnyMaxedVizBox:function restoreAnyMaxedVizBox(){var maxedVizBox=this.maximizedBox;if(!maxedVizBox||!maxedVizBox.isMaxed){return ;}this.setPortalState(maxedVizBox,$PORTAL_STATES.RESTORE,false);delete maxedVizBox.isMaxed;$CSS.toggleClass(maxedVizBox.maxRestoreBtnNode,"restore",maxedVizBox.isMaxed);},setPortalState:function setPortalState(box,state,silent){var id=this.id,model=this.model,boxDefn=box.defn,oldState=boxDefn.ds,portalChangeCallback=function(currentState){var relativePanel=mstrmojo.all[id];if(!mstrmojo.all[box.id]){var boxKey=box.k;mstrmojo.array.forEach(relativePanel.children,function(child){if(child.k===boxKey){box=child;return false;}});}if(!mstrmojo.all[box.id]){return ;}var isStateMaximized=box.isMaxed=currentState===$PORTAL_STATES.MAXIMIZE,newZIndex=isStateMaximized?2:1;if(isStateMaximized){relativePanel.maximizedBox=box;}else{if(currentState===$PORTAL_STATES.RESTORE){delete relativePanel.maximizedBox;}}toggleDragAllowedStatus.call(this,box.isMaxed);box.set("zIndex",newZIndex);boxDefn.ds=currentState;relativePanel.buildBoxLayout();box.generateToolbar();};if(!silent){model.controller.cmdMgr.execute({execute:function execute(){var relativePanel=mstrmojo.all[id],isStateMaximized=state===$PORTAL_STATES.MAXIMIZE,newZIndex=isStateMaximized?2:1,actions=[model.getUnitFormatAction(box,1,{FormattingOrder:{ZIndex:newZIndex},FormattingView:{WindowState:state}})];addBoxFormatActions.call(relativePanel,actions);this.submit(actions,{failure:function failure(){portalChangeCallback(oldState);}},mstrmojo.DocDataService.RAPID_EXEC);portalChangeCallback(state);},urInfo:{silent:true,undo:function undo(){portalChangeCallback(oldState);},redo:function redo(){portalChangeCallback(state);}}});}else{portalChangeCallback(state);}},buildBoxLayout:function buildBoxLayout(animate,newBoxState){if(!this.visible){return ;}if(!this.children){return ;}var boxLayoutConfig=this.boxLayoutConfig,isWorkstationStyling=mstrApp.isWSStyling;if(boxLayoutConfig.needsValidation){var children=this.children;if(!boxLayoutConfig.validateBoxLayout(children)){this.defn.layoutXML=boxLayoutConfig.useDefaultBox(children);}boxLayoutConfig.needsValidation=false;}if(isWorkstationStyling&&this.height&&this.width){this.height=(parseInt(this.height,10)-2*CONTAINER_NODE_MARGIN)+"px";this.width=(parseInt(this.width,10)-2*CONTAINER_NODE_MARGIN)+"px";}this._super(animate,newBoxState);var maximizedBox=this.maximizedBox;if(maximizedBox){if(maximizedBox.domNode){var boxStyle=maximizedBox.domNode.style;maximizedBox.originalDim={top:boxStyle.top,height:boxStyle.height};}if(this.height!==undefined&&this.width!==undefined){maximizedBox.updateLayout({left:"0px",top:"0px",height:this.height,width:this.width});}}if(isWorkstationStyling&&this.height&&this.width){this.height=(parseInt(this.height,10)+2*CONTAINER_NODE_MARGIN)+"px";this.width=(parseInt(this.width,10)+2*CONTAINER_NODE_MARGIN)+"px";}if(mstrApp.isAppStateSelection()){this.model.raiseEvent({name:"buildBoxLayoutComplete"});}},endBoxMove:function endBoxMove(context,boxChild){this._super(context,boxChild);this.getSplitterHost().appendChild(boxChild.domNode);},getChildPositionActions:function getChildPositionActions(skipPartialRetrieval){return addBoxFormatActions.call(this,[],skipPartialRetrieval);},getBoxLayoutActions:function getBoxLayoutActions(skipPartialRetrieval){return addBoxLayoutAction.call(this,[],skipPartialRetrieval);},getBoxLayoutSaveCallback:function getBoxLayoutSaveCallback(){var id=this.id;return{success:function(){generateChildToolbars.call(mstrmojo.all[id]);}};},addSaveBoxLayoutActions:function addSaveBoxLayoutActions(update,skipPartialRetrieval){var id=this.id,actions=update.actions;addBoxFormatActions.call(this,actions,skipPartialRetrieval);addBoxLayoutAction.call(this,actions,skipPartialRetrieval);update.addCallbacks({success:function(){generateChildToolbars.call(mstrmojo.all[id]);}});},saveBoxLayout:function saveBoxLayout(cmd,stage,callback,update,skipPartialRetrieval){this._super(cmd,stage,callback,update,skipPartialRetrieval);this.defn.layoutXML=this.boxLayoutConfig.box;if(update){update.addCallbacks(this.getBoxLayoutSaveCallback());}},postBuildBoxLayout:function postBuildBoxLayout(){var selectedUnitKey=this.model.getLatestSelectedViUnitKey(),unit=selectedUnitKey&&this.getUnitByKey(selectedUnitKey);if(unit){this.model.selectVIUnit(unit.id);}else{this.selectFirstBox();}},postCalculateBoxLayout:function postCalculateBoxLayout(layoutCfg,outerDimensions,fnBuildLayout){var layoutModes=mstrmojo.vi.VisualInsightApp.LAYOUT_MODES,STATE_TOGGLE_PREVIEW=layoutModes.PREVIEW_TOGGLED,supportResponsiveResizing=mstrApp.supportFeature(FEATURES.SUPPORT_RESPONSIVE_RESIZING),layoutMode=mstrApp.layoutMode,docSection=this.controller.view.layoutViewer.docLayout.docSection,sectionWidth=parseInt(docSection.width,10)||0;if(mstrApp.supportFeature(FEATURES.SUPPORT_RESPONSIVE)){if(sectionWidth<=LAYOUT_BREAK_POINT&&(supportResponsiveResizing||layoutMode===STATE_TOGGLE_PREVIEW)){if(!this.previousLayout){this.previousLayout=$HASH.clone(layoutCfg);}outerDimensions.width=Math.min(outerDimensions.width,parseInt(this.width,10));var layoutChildren=layoutCfg.children,layoutFirstChild=layoutChildren[0];if(!(layoutFirstChild.h||layoutFirstChild.w)){outerDimensions.width-=SCROLLBAR_WIDTH;fnBuildLayout.call(this,layoutCfg,outerDimensions,0);outerDimensions.width+=SCROLLBAR_WIDTH;}if(this.maximizedBox){if(this.previousLayout){layoutCfg=$HASH.clone(this.previousLayout);}outerDimensions.width=parseInt(this.width,10);outerDimensions.height=parseInt(this.height,10);}else{if(layoutChildren.length>1){var containerNode=this.containerNode,containerHeight=containerNode&&containerNode.clientHeight,cfgHeight=layoutCfg.h,outerHeight=outerDimensions.height;if((cfgHeight&&cfgHeight<outerHeight)||(containerHeight&&containerHeight<outerHeight)){layoutChildren.forEach(function(child){child.f=false;});fnBuildLayout.call(this,layoutCfg,outerDimensions,0);}layoutCfg=convertLayoutXMLToSingleColumn.call(this,$HASH.clone(layoutCfg),outerDimensions.width,this.boxLayoutConfig.padding);outerDimensions.width=layoutCfg.w;outerDimensions.height=layoutCfg.h;}}if(outerDimensions.height>parseInt(this.height,10)){outerDimensions.width-=SCROLLBAR_WIDTH;}if(!mstrApp.isLayoutModePreview()&&supportResponsiveResizing){mstrApp.set("layoutMode",layoutModes.PREVIEW_RESIZE);}}else{if(layoutMode!==STATE_TOGGLE_PREVIEW){if(this.previousLayout){layoutCfg=$HASH.clone(this.previousLayout);this.previousLayout=null;outerDimensions.width=parseInt(this.width,10);outerDimensions.height=parseInt(this.height,10);var docPanelNode=this.domNode;if(docPanelNode){docPanelNode.scrollTop=0;}mstrApp.set("layoutMode",layoutModes.DEFAULT);}}else{layoutCfg=null;docSection.domNode.style.left=(sectionWidth-LAYOUT_BREAK_POINT)/2+"px";window.setTimeout(function(){docSection.set("width",LAYOUT_BREAK_POINT+"px");}.bind(this),0);}}}return layoutCfg;},selectFirstBox:function selectFirstBox(){var firstBoxId=this.firstVizBoxId||this.firstBoxId,isSelectMode=mstrApp.isAppStateSelection();if(this.visible&&firstBoxId&&!isSelectMode){this.model.selectVIUnit(firstBoxId);}},selectVIUnit:function selectVIUnit(viUnit,forceSelection){var tgtSelections=this._tgtSelections,rtn=true;if(tgtSelections){if(viUnit.id===tgtSelections.id){rtn=false;}else{rtn=tgtSelections.toggleSelection(viUnit.k);tgtSelections.notify();}}else{this.model.selectVIUnit(viUnit.id,forceSelection);}return rtn;},getUnitByKey:function getUnitByKey(key){return(this.children||[]).filter(function(unit){return unit.k===key;})[0];},enterTargetSelectionMode:function enterTargetSelectionMode(fnCallback,filterId,targetKeys,fnInitChild,fnClear){if(!this._tgtSelections&&this.children&&this.children[0].hasRendered){this.children.forEach(function(child){fnInitChild(child);});var model=this.model,unit=model.getSelectedViUnit(),origId=unit&&unit.id,unitCache={},fnGetKeys=function(){return $HASH.keyarray(unitCache).filter(function(key){return unitCache[key];});};this._tgtSelections={id:filterId,notify:function(isDone,extra){fnCallback(fnGetKeys(),!!isDone,extra);},toggleSelection:function(id){unitCache[id]=!unitCache[id];return unitCache[id];},getSelections:function(){return fnGetKeys();},remove:function(id){if(unitCache[id]!==undefined){delete unitCache[id];}},restore:function(){model.selectVIUnit(origId,true);},clear:function(){fnClear();}};model.selectVIUnit("");(targetKeys||[]).forEach(function(tgtKey){model.getUnitInstance(tgtKey,1).parent.selectVIUnit();},this);}},exitTargetSelectionMode:function exitTargetSelectionMode(isDone,fnEnableChild){var tgtSelections=this._tgtSelections;if(tgtSelections){delete this._tgtSelections;this.children.forEach(function(child){fnEnableChild(child);});tgtSelections.restore();if(isDone){tgtSelections.notify(isDone);}}},unload:function unload(){this.destroyChildren();this.defn.l=false;this.builtChildren=false;},getPanelTargetEdge:function getPanelTargetEdge(context){if(context.src.widget.parent!==this&&context.getCtxtDragData().src!==$DRAG_SRC.FILTERS){return"";}return this._super(context);},setLastSelectionClass:function setLastSelectionClass(newKey,oldKey){if(newKey!==oldKey){var unit,lastSelectedClass="lastSelected";if(oldKey){unit=this.getUnitByKey(oldKey);$CSS.removeClass(unit.domNode,lastSelectedClass);}if(newKey){unit=this.getUnitByKey(newKey);$CSS.addClass(unit.domNode,lastSelectedClass);}}},dropBox:function dropBox(context,targetBox,edge,saveLayout){saveLayout=false;this._super(context,targetBox,edge,saveLayout);var panel=this,model=panel.model,dataService=mstrmojo.DocDataService;var uiState=model.getUIState();uiState[$HASH.keyarray(uiState)[0]].boxState=$HASH.clone(context.box.initState);model.execute({execute:function(){panel.saveBoxLayout(this);},urInfo:{callback:dataService.EMPTY_CALLBACK,extras:dataService.SUPPRESS_DATA},undoUIState:uiState});}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.vi.ui.rw.DocRelativePanel,{onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod});mstrmojo.vi.ui.rw.DocRelativePanel.getLayoutBreakPoint=function(){return LAYOUT_BREAK_POINT;};mstrmojo.vi.ui.rw.DocRelativePanel.EnumPreviewModes={DefaultDesktop:STATE_REGULAR,DefaultPreview:STATE_TABLET,TabletPreview:STATE_TABLET};}());