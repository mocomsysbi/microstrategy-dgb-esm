(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.DI.DIConstants","mstrmojo.hash");mstrmojo.requiresDescs(96,198,5720,10399,10492,11960,12676,12677,12678,12955,12957,12958,12960,12961,12962,12963,12964,12965,12966,12967,12968,13096,13097,14193,16038);var $H=mstrmojo.hash;var sourceInfoFlags=mstrmojo.DI.DIConstants.sourcesInfoFlags;var FETCHING_FILES_STR=mstrmojo.desc(12676,"Fetching files...");var FETCHING_CUBE_INFO_STR=mstrmojo.desc(12677,"Fetching Cube Information...");var WAITING_STR=mstrmojo.desc(5720,"Waiting...");var SAVING_STR=mstrmojo.desc(10492,"Saving...");var SEARCHING_STR=mstrmojo.desc(14193,"Searching Data...");var DIConstants=mstrmojo.DI.DIConstants;function submitRequest(callback,params,config,waitBoxCfg){mstrApp.serverRequest(params,callback,config,undefined,undefined,undefined,undefined,waitBoxCfg);}mstrmojo.DI.DIDataService=mstrmojo.declare(mstrmojo.Obj,null,{messageID:"",emmaIRRMessageID:"",archSpark:function archSpark(callback,params,waitBoxCfg){submitRequest.call(this,callback,$H.copy(params,{taskId:"arch.spark"}),{showProgress:true,showProgressText:true,},waitBoxCfg);},deleteObject:function deleteObject(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"deleteObject"}),{showProgress:true,showProgressText:true,progressText:mstrmojo.desc(10399,"Deleting")});},renameObject:function deleteObject(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"renameObject"}),{showProgress:true,showProgressText:true,progressText:mstrmojo.desc(13973,"Renaming")});},getCubeQuota:function getCubeQuota(callback,params,config){submitRequest.call(this,callback,$H.copy(params,{taskId:"qBuilder.GetQuota"}),config||{showProgress:false,showProgressText:false,progressText:mstrmojo.desc(12955,"Getting information about your cubes...")});},getUserDICubeInfo:function getUserDICubeInfo(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"getUserDICubeInfo"}),{showProgress:false,showProgressText:false});},getDBMSObjects:function getDBMSObjects(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"arch.getDBObjects"}),{doNotHold:true,showProgress:false});},getExternalSourcesInfo:function getExternalSourcesInfo(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"getDIExternalInfo"}),{showProgress:true,showProgressText:true,progressText:mstrmojo.desc(12955,"Getting information about your cubes...")});},getDIProjectSettings:function getDIProjectSettings(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"getDIProjectSettings"}),{showProgress:true,showProgressText:true,progressText:mstrmojo.desc(12957,"Fetching Data Import Settings...")});},getOAuthSourceReports:function getOAuthSourceReports(callback,params){var defaultFlags=sourceInfoFlags.getReports|sourceInfoFlags.getTokensInfo|sourceInfoFlags.getUserName;submitRequest.call(this,callback,$H.copy(params,{taskId:"qBuilder.FetchSourceObjects",flags:defaultFlags|(params.flags||defaultFlags)}),{showProgress:true,showProgressText:true,progressText:FETCHING_FILES_STR});},getHadoopFolderSize:function getHadoopFolderSize(callback,params){var defaultFlags=sourceInfoFlags.getReports|sourceInfoFlags.getTokensInfo|sourceInfoFlags.getUserName;submitRequest.call(this,callback,$H.copy(params,{taskId:"qBuilder.FetchSourceObjects",flags:defaultFlags|(params.flags||defaultFlags)}),{showProgress:false,showProgressText:false});},browseURLPath:function browseURLPath(callback,params){var defaultFlags=1,fg;if(params.flags){fg=params.flags|defaultFlags;}else{fg=defaultFlags;}submitRequest.call(this,callback,$H.copy(params,{taskId:"qBuilder.FetchSourceObjects",flags:fg}),{showProgress:true,showProgressText:true,progressText:FETCHING_FILES_STR});},getShapeKeys:function getShapeKeys(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"getMapShapes",showWait:false}),{doNotHold:true,showProgress:false});},getWebServiceURL:function getWebServiceURL(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"GetWebServiceURL"}),{showProgress:true,showProgressText:true,progressText:mstrmojo.desc(12678,"Fetching Web Service URL for authorization...")});},getWebServiceCatalog:function getWebServiceCatalog(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"GetWebServiceCatalog"}),{showProgress:true,showProgressText:true,progressText:FETCHING_FILES_STR});},signOutOAuthSource:function signOutOAuthSource(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"qBuilder.FetchSourceObjects",flags:sourceInfoFlags.revokeSession}),{showProgress:true,showProgressText:true,progressText:mstrmojo.desc(12960,"Signing out...")});},importOAuthReport:function importOAuthReport(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"qBuilder.ImportSourceObject",flags:7}),{showProgress:true,showProgressText:true,progressText:mstrmojo.desc(12961,"Uploading data...")});},importURL:function importURL(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"importFile",taskContentType:"json",taskEnv:"xhr",messageid:this.messageID}),{showProgress:true,showProgressText:true,progressText:mstrmojo.desc(12962,"Fetching data from the given URL...")});},importFile:function importFile(fileUploader,callback,params){fileUploader.submit($H.copy(params,{taskId:"importFile",taskContentType:"json",taskEnv:"xhr",fileType:"application/octet-stream"}),callback,{showProgress:true,showProgressText:true,showCancel:true,onCancel:function(){mstrmojo.xhr.cancel();mstrApp.serverProxy.cancelFileReader&&mstrApp.serverProxy.cancelFileReader(params.tableID);mstrApp.hideProgress();if(callback.cancel){callback.cancel();}},progressText:mstrmojo.desc(16038,"Uploading File #...").replace("#",params.fileName)});},oneTierImportFile:function oneTierImportFile(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"importFile"}),{showProgress:true,showProgressText:true,progressText:mstrmojo.desc(12963,"Uploading File...")});},launchOneTierBrowser:function launchOneTierBrowser(callback){window.FormWrapper.openFileDialog(callback);},launchOneTierUploader:function launchOneTierUploader(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"onetier.import"}),{showProgress:true,showProgressText:true,progressText:mstrmojo.desc(11960,"Loading Data...")});},createOneTierDoc:function createOneTierDoc(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"onetier.createVI"}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},handleMissingColumns:function handleMissingColumns(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"recoverDataDiscoveryErrors",msgid:this.messageID}),{showProgress:true,showProgressText:false,progressText:""});},getImportedData:function getImportedData(callback,params,config){var bflag;if(!params.browsetype){params.browsetype=mstrmojo.DI.DIConstants.browseFlag.dataPreview|mstrmojo.DI.DIConstants.browseFlag.reportBindingTable|mstrmojo.DI.DIConstants.browseFlag.reportLevelProperty;}if(params.previewflag){params.previewflag|=mstrmojo.DI.DIConstants.requestFlag.stateInfo;}if(!params.bindingflag){bflag=2;}else{bflag=params.bindingflag;}submitRequest.call(this,callback,$H.copy(params,{taskId:"qBuilder.GetReportXDADefinition",msgid:this.messageID,bindingflag:bflag}),{showWait:true,showProgress:true,showProgressText:true,progressText:WAITING_STR});},editImportedData:function editImportedData(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"editCube",msgID:this.messageID}),{showProgress:true,showProgressText:true,progressText:(params.trans?mstrmojo.desc(12964,"Transforming data..."):FETCHING_CUBE_INFO_STR)});},loadProject:function loadProject(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"getProjects"}),callback,{showProgress:true,showProgressText:true,progressText:(mstrmojo.desc(12965,"Fetching Projects Information..."))});},loginProject:function loadProject(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"login"}),callback,{showProgress:true,showProgressText:true,progressText:(mstrmojo.desc(12966,"Login Projects..."))});},changeMappings:function changeMappings(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"qBuilder.RemapObject",msgid:this.messageID}),{showProgress:true,showProgressText:true,progressText:SAVING_STR});},saveAndPublish:function saveAndPublish(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"saveAndPublishCube",msgID:this.messageID}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},saveAndPublishEMMA:function saveAndPublishEMMA(callback,params,saveAsDialog,config){var finalParams=$H.copy(params,{taskId:"saveAndPublishCube",msgID:this.messageID});var dataservice=this;var cb={success:function(res){if(res.msgId){dataservice.messageID=res.msgId;}mstrApp.getRootController().model.getHistoryList().set("canSendToHistoryList",true);}};if(saveAsDialog){saveAsDialog.saveParams=finalParams;saveAsDialog.saveAsCallback=function(){return mstrmojo.func.wrapMethods(cb,callback,{});};if(!saveAsDialog.visible){saveAsDialog.open();}}else{submitRequest.call(this,mstrmojo.func.wrapMethods(cb,callback,{}),finalParams,config||{showProgress:false});}},pollStatus:function pollStatus(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"pollStatus",resultSetType:3,pollingFrequency:500,maxWait:60000,taskEnv:"xhr",taskContentType:"json",msgID:this.messageID}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},pollEmmaStatus:function pollEmmaStatus(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"pollEmmaStatus",resultSetType:3,pollingFrequency:500,maxWait:60000,taskEnv:"xhr",taskContentType:"json",msgID:this.messageID}),{showProgress:false});},fetchFolderContents:function fetFolderContents(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"searchMetadata",styleName:"MojoFolderStyle",includeAncestorInfo:false,includeObjectDesc:false,fields:"name"}),{showProgress:true,showProgressText:true,progressText:mstrmojo.desc(12967,"Fetching folder contents...")});},searchFolderContents:function searchFolderContents(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"searchMetadata",styleName:"MojoFolderStyle",includeAncestorInfo:false,includeObjectDesc:false,fields:"name",recursive:0}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},fetchRemoteFolderContents:function fetchRemoteFolderContents(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"getFolderContentFromRemote",msgid:this.messageID,type:8,flags:268453447}),{showProgress:true,showProgressText:true,progressText:mstrmojo.desc(12967,"Fetching folder contents...")});},fetchRemoteFolderID:function fetchRemoteFolderID(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"getFolderIDFromRemote",folderName:7,msgid:this.messageID}),{showProgress:true,showProgressText:true,progressText:mstrmojo.desc(13096,"Fetching remote folder id...")});},getProjectsFromRemote:function getProjectsFromRemote(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"getProjectsFromRemote",msgid:this.messageID,sessionState:mstrApp.sessionState}),{showProgress:true,showProgressText:true,progressText:mstrmojo.desc(13097,"Fetching remote projects...")});},createEMMAReportInstance:function createEMMAReportInstance(callback,params){var ds=this;var cb={success:function(res){if(res&&res.msgid){ds.set("messageID",res.msgid);}}};submitRequest.call(this,mstrmojo.func.wrapMethods(cb,callback,{}),$H.copy(params,{taskId:"DICreateEMMAReportInstance"}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},createEMMASourceTable:function createEMMASourceTable(callback,params){var ds=this;var cb={success:function(res){if(res&&res.msgid){ds.set("messageID",res.msgid);}}};submitRequest.call(this,mstrmojo.func.wrapMethods(cb,callback,{}),$H.copy(params,{taskId:"DICreateEMMASourceTable",msgid:this.messageID}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},editEMMASourceTable:function editEMMASourceTable(callback,params){var ds=this;var cb={success:function(res){if(res&&res.msgid){ds.set("messageID",res.msgid);}}};submitRequest.call(this,mstrmojo.func.wrapMethods(cb,callback,{}),$H.copy(params,{taskId:"DIEditEMMASourceTable",msgid:this.messageID}),{showProgress:true,showProgressText:false});},removeEMMASourceTable:function removeEMMASourceTable(callback,params){var ds=this;var cb={success:function(res){if(res&&res.msgid){ds.set("messageID",res.msgid);}}};submitRequest.call(this,mstrmojo.func.wrapMethods(cb,callback,{}),$H.copy(params,{taskId:"DIRemoveEMMASourceTable",msgid:this.messageID}),{showProgress:true,showProgressText:false});},persistCubeConfigInfo:function persistCubeConfigInfo(callback,params){var ds=this;var cb={success:function(res){if(res&&res.msgid){ds.set("messageID",res.msgid);}}};submitRequest.call(this,mstrmojo.func.wrapMethods(cb,callback,{}),$H.copy(params,{taskId:"DIPersistCubeConfigInfo",msgid:this.messageID}),{showProgress:true,showProgressText:false});},startRefineStage:function startRefineStage(callback,params){var ds=this;var cb={success:function(res){if(res&&res.msgid){ds.set("messageID",res.msgid);}}};submitRequest.call(this,mstrmojo.func.wrapMethods(cb,callback,{}),$H.copy(params,{taskId:"DIStartRefineStage",msgid:this.messageID}),{showProgress:true,showProgressText:false});},cancelRefineStage:function cancelRefineStage(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"DICancelRefineStage",msgid:this.messageID}),{showProgress:true,showProgressText:false});},cancelAggFilter:function cancelAggFilter(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"DIStartOrCancelAggFilterChange",msgid:this.messageID,cancel:1}),{showProgress:true,showProgressText:false});},autoMappingSourceTable:function autoMappingSourceTable(callback,params){var ds=this;var cb={success:function(res){if(res&&res.msgid){ds.set("messageID",res.msgid);}}};submitRequest.call(this,mstrmojo.func.wrapMethods(cb,callback,{}),$H.copy(params,{taskId:"DIAutoMappingEMMASourceTable",msgid:this.messageID}),{showProgress:true});},autoMap:function autoMap(callback,params){var me=this;var cb={success:function(res){if(res&&res.msgid){me.set("messageID",res.msgid);}}};submitRequest.call(this,mstrmojo.func.wrapMethods(cb,callback,{}),$H.copy(params,{taskId:"qBuilder.AutoMapTables",msgid:this.messageID,showWait:true}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},prepareData:function prepareData(callback,params,hideCancel){var me=this;var cb={success:function(res){if(res&&res.msgid){me.set("messageID",res.msgid);}var TableCount=1;var waitMsg=mstrmojo.desc(13196,"Prepare data ## of ### tables...").replace("###",TableCount).replace("##",TableCount);me.taskByPollStatus(callback,res,waitMsg,{showWait:true},{hideCancel:hideCancel});}};submitRequest.call(this,cb,$H.copy(params,{taskId:"DIDataPreparation",msgid:this.messageID,showWait:true}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},taskByPollStatus:function taskByPollStatus(callback,result,message,waitBoxCfg,cfg){var me=this,pollStatus="pollStatus";if(mstrApp.isSingleTier){pollStatus="DIPollStatus";}submitRequest.call(me,mstrmojo.DI.DIDataService.taskByPollStatusCb.call(me,callback,result,message,waitBoxCfg,cfg),{taskId:pollStatus,resultSetType:3,threadId:result.tid,maxWait:60000,taskEnv:"xhr",taskContentType:"json",isAsync:true,msgid:me.messageID},{},waitBoxCfg);},sendToHistoryList:function sendToHistoryList(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"DISendToInbox",msgid:this.messageID}),{showProgress:true});},setDataImportInfo:function setDataImportInfo(callback,params){var ds=this;var cb={success:function(res){if(res&&res.msgid){ds.set("messageID",res.msgid);}}};submitRequest.call(this,mstrmojo.func.wrapMethods(cb,callback,{}),$H.copy(params,{taskId:"DISetDataImportInfo",msgid:this.messageID}),{showProgress:true});},changeMappingSourceTable:function changeMappingSourceTable(callback,params){var ds=this;var cb={success:function(res){if(res&&res.msgid){ds.set("messageID",res.msgid);}}};submitRequest.call(this,mstrmojo.func.wrapMethods(cb,callback,{}),$H.copy(params,{taskId:"DIChangeMappingEMMASourceTable",msgid:this.messageID}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},updateMappingSourceTable:function updateMappingSourceTable(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"setCubeAttributeFormMapping",msgid:this.messageID}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},detectRelationshipSourceTable:function detectRelationshipSourceTable(callback,params){var ds=this;var cb={success:function(res){if(res&&res.msgid){ds.set("messageID",res.msgid);}}};submitRequest.call(this,mstrmojo.func.wrapMethods(cb,callback,{}),$H.copy(params,{taskId:"DIDetectRelationshipEMMASourceTable",msgID:this.messageID}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},editRelationshipSourceTable:function editRelationshipSourceTable(callback,params){var ds=this;var cb={success:function(res){if(res&&res.msgid){ds.set("messageID",res.msgid);}}};submitRequest.call(this,mstrmojo.func.wrapMethods(cb,callback,{}),$H.copy(params,{taskId:"DIEditRelationshipEMMASourceTable",msgid:this.messageID}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},saveEMMASchedule:function saveEMMASchedule(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"DISaveEMMASchedule",msgid:this.emmaIRRMessageID||""}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},getObjectSubscriptions:function getObjectSubscription(callback,params){if(!params){params={};}if(params.deliveryType===undefined){params.deliveryType=16;}submitRequest.call(this,callback,$H.copy(params,{taskId:"GetObjectSubscriptions",msgid:this.messageID}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},getAvailableTriggers:function getAvailableTriggers(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"getSchedules",msgid:this.messageID}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},getSubscriptionInfo:function getSubscriptionInfo(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"DIGetSubscriptionInfo",msgid:this.messageID}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},removeSubscription:function removeSubscription(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"cancelSubscriptionsTask",msgid:this.messageID}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},getScheduleStatus:function getScheduleStatus(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"DIGetScheduleStatus"}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},searchMetadata:function searchMetadata(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"searchMetadata"}),{showProgress:false});},objectSearch:function objectSearch(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"objectSearch"}),{showProgress:false});},getAttributeForms:function getAttributeForms(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"getAttributeForms"}),{showProgress:false});},getAttributeGroupInfo:function getAttributeGroupInfo(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"getCubeAttributeGroupInfo",msgid:this.messageID}),{showProgress:true,showProgressText:true,progressText:FETCHING_CUBE_INFO_STR});},duplicateReportInstance:function duplicateReportInstance(callback,params,config){var VIApp=mstrApp.isFromVI?mstrApp.launchingApp:mstrApp,isResolveOnly=!!(mstrConfig.resolveOnly||VIApp.isAppStatePause&&VIApp.isAppStatePause());submitRequest.call(this,callback,$H.copy(params,{taskId:"duplicateReportInstance",skipRebuild:isResolveOnly}),config||{showProgress:true,showProgressText:true,progressText:FETCHING_CUBE_INFO_STR});},changePartition:function changePartition(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"DIChangePartition",msgid:this.messageID,showWait:true}),{showProgress:false});},createEmmaIRRReportInstance:function createEmmaIRRReportInstance(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"DICreateEmmaIRRReportInstance"}),{showProgress:true});},publishNonEmmaCube:function publishNonEmmaCube(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"reportExecute",styleName:" "}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},createEmmaIRRSourceTables:function createEmmaIRRSourceTables(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"DICreateEmmaIRRSourceTables",msgid:this.emmaIRRMessageID}),{showProgress:true});},editEmmaIRRSourceTable:function editEmmaIRRSourceTable(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"DIEditEmmaIRRSourceTable",msgid:this.emmaIRRMessageID}),{showProgress:true});},deleteEmmaIRRSourceTable:function deleteEmmaIRRSourceTable(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"DIDeleteEmmaIRRSourceTable",msgid:this.emmaIRRMessageID}),{showProgress:false});},getEmmaIRRAttributes:function getEmmaIRRAttributes(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"DIGetEmmaIRRAttributes",msgid:this.messageID}),{showProgress:true});},setEmmaIRRFilter:function setEmmaIRRFilter(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"DISetEmmaIRRFilter",msgid:this.emmaIRRMessageID}),{showProgress:true});},validateEmmaIRRAlternateSource:function validateEmmaIRRAlternateSource(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"DIValidateEmmaIRRAlternateSource",msgid:this.emmaIRRMessageID}),{showProgress:true});},getSecurityFilter:function getSecurityFilter(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"DIGetCubeSecurityFilter"}),{showProgress:true,showProgressText:true,progressText:FETCHING_CUBE_INFO_STR});},loadDBRoles:function loadDBRoles(callback,params){submitRequest.call(this,callback,$H.copy(params,{isDataImport:false,reverseOrder:true,verbose:true,taskId:"getDBInstances"}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},archSearch:function(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"arch.search",objecttypes:29,skipSchemaIDCheck:true,flags:1+2+256+512+8192+16384,domain:4,specialparse:"getDBRoles",xmlflags:1,sessionState:""}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},saveDBRole:function saveDBRole(callback,params){submitRequest.call(this,callback,$H.copy(params,{skipSchemaIDCheck:true,taskId:"arch.saveDBRole",showWait:true}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},setDBRole:function setDBRole(callback,params){submitRequest.call(this,callback,$H.copy(params,{msgid:this.messageID,taskId:"qBuilder.SetDBRole"}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},populateDBRoles:function populateDBRoles(callback,params){submitRequest.call(this,callback,$H.copy(params,{isDataImport:false,reverseOrder:true,verbose:true,taskId:"getDBInstances",skipSchemaIDCheck:true}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},getObjectFolder:function getObjectFolder(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"DIGetObjectFolder"}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},deleteDBRole:function populateDBRoles(callback,params){submitRequest.call(this,callback,$H.copy(params,{skipSchemaIDCheck:true,taskId:"arch.deleteObject",objecttype:29}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},openMailClient:function openMailClient(url){if(mstrApp.isSingleTier){window.FormWrapper.mailService(url);}else{mstrApp.openPage(url);}},validateSource:function validateSource(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"DIValidateEmmaSourceTask",msgid:this.messageID}),{showProgress:true});},scrapeWiki:function scrapeWiki(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"wikiScrapper"}),{showProgress:!(params.shouldSuggest),showProgressText:true,progressText:SEARCHING_STR});},toggleDatasetServeMode:function toggleDatasetServeMode(callback,params){var ds=this;var cb={success:function(res){if(res&&res.msgid){ds.set("messageID",res.msgid);}}};submitRequest.call(this,mstrmojo.func.wrapMethods(cb,callback,{}),$H.copy(params,{taskId:"DIToggleDatasetServeMode",msgid:this.messageID}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},setPreference:function setPreference(callback,params){submitRequest.call(this,callback,$H.copy(params,{skipSchemaIDCheck:true,taskId:"setPreference"}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},updatePreferences:function updatePreferences(callback,key,value){var params={taskId:"updatePreference"};if(key){params[key]=value;}submitRequest.call(this,callback,params,{showProgress:true,showProgressText:true,progressText:WAITING_STR});},getPreferences:function getPreferences(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"getPreferences"}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},getProjectAttributeInfo:function getProjectAttributeInfo(callback,params){submitRequest.call(this,callback,$H.copy(params,{skipSchemaIDCheck:true,taskId:"GetProjectAttributeInfo"}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},clearRelationship:function clearRelationship(callback,params){var ds=this;var cb={success:function(res){if(res&&res.msgid){ds.set("messageID",res.msgid);}}};submitRequest.call(this,mstrmojo.func.wrapMethods(cb,callback,{}),$H.copy(params,{taskId:"DIClearRelationshipEMMASourceTable",msgid:this.messageID}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},DISetURLWhiteListTask:function DISetURLWhiteListTask(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"DISetURLWhiteListTask"}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},getImportFromCube:function getMyTask(callback,params){var ds=this;var cb={success:function(res){if(res&&res.msgid){ds.set("messageID",res.msgid);}}};submitRequest.call(this,mstrmojo.func.wrapMethods(cb,callback,{}),$H.copy(params,{msgid:this.messageID,taskId:"DIImportFromCube"}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},DIManageHadoopGateway:function DIManageHadoopGateway(callback,params,cfg){submitRequest.call(this,callback,$H.copy(params,{taskId:"DIManageHadoopGateway"}),cfg!==undefined?cfg:{showProgress:true,showProgressText:true,progressText:WAITING_STR});},getObjectInfo:function getObjectInfo(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"getObjectInfo"}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},getCustomConnector:function getCustomConnector(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"arch.getCustomConnector",objecttypes:29,skipSchemaIDCheck:true,flags:1+2+256+512+8192+16384,domain:4,specialparse:"getDBRoles",xmlflags:1,sessionState:"",typeFilter:DIConstants.dbType.newConnector,uses:DIConstants.newConnectorDBMSId+",57"}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},deleteCustomDBMS:function deleteCustomDBMS(callback,params){submitRequest.call(this,callback,$H.copy(params,{skipSchemaIDCheck:true,taskId:"arch.deleteObject",objecttype:57}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},searchObjectName:function searchObjectName(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"objectSearch",styleName:"MojoFolderStyle",includeAncestorInfo:false,includeObjectDesc:false,fields:"name",objectType:"776,779,8"}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},getPreConfigOauth:function(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"ResetOAuthPara",}),{showProgress:true,showProgressText:true,progressText:WAITING_STR});},getCubeQuotaByRestAPI:function(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"getCubeQuotaOfUser",}),{showProgress:false,showProgressText:false});},getCloudElementToken:function(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"DIGetCloudElementToken"}),{showProgress:true,showProgressText:true,progressText:mstrmojo.desc(5720,"Waiting...")});},getSingleDBRole:function(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"qBuilder.GetSingleDBRole"}),{showProgress:false,showProgressText:false});},removeOrDuplicateRI:function removeOrDuplicateRI(callback,params){submitRequest.call(this,callback,$H.copy(params,{taskId:"qBuilder.RemoveOrDuplicateRI"}),{showProgress:false,showProgressText:false});}});mstrmojo.DI.DIDataService.taskByPollStatusCb=function taskByPollStatusCb(callback,result,message,waitBoxCfg,cfg,pollStatusTask,taskByPollStatus){var me=this;return{success:function success(res){if(res.status==="1"||res.status===1){mstrApp.hideWait(true);if(callback.success){if(pollStatusTask==="arch.PollStatusCatalogAction"){callback.success(res.response);}else{callback.success(result);}}}else{if(res.status==="2"||res.status===2){callback.failure();mstrmojo.error({longDesc:JSON.parse(res.response).message},null,{title:mstrmojo.desc(96,"Error")});}else{var isPoll=!!message?true:me.isPolling;message&&mstrApp.showWait({showCancel:(cfg&&cfg.hideCancel)?false:true,message:message,onCancel:function(){isPoll=false;mstrApp.hideWait(true);if(callback.canceled){callback.canceled(null,result);}}});var waitTime=cfg&&cfg.waitTime;var preTime=cfg&&cfg.preTime;if(waitTime){var prev=waitTime;waitTime=waitTime+preTime;waitTime=waitTime>=5000?5000:waitTime;preTime=prev;}else{waitTime=1000;preTime=1000;}window.setTimeout(function(){if(isPoll){me.taskByPollStatus(callback,result,message,waitBoxCfg,{waitTime:waitTime,preTime:preTime},pollStatusTask);}},waitTime);}}},failure:function failure(res){message&&mstrApp.hideWait(true);if(callback.failure){callback.failure(res);}},canceled:function canceled(reqId){message&&mstrApp.hideWait(true);}};};}());