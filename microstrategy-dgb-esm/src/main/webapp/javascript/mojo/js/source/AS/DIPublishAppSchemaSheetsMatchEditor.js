(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.Button","mstrmojo.Box","mstrmojo.dom","mstrmojo.Label","mstrmojo.Image","mstrmojo.Pulldown","mstrmojo.tooltip","mstrmojo.CheckBox","mstrmojo.TextBox","mstrmojo.SREditor","mstrmojo.DI.DIHelpers","mstrmojo.warehouse.EnumDatabaseType","mstrmojo.DI.DIModel","mstrmojo.locales","mstrmojo.date","mstrmojo.css","mstrmojo.string");var $A=mstrmojo.array,$H=mstrmojo.hash,$DIHelper=mstrmojo.DI.DIHelpers,$S=mstrmojo.string,constants=mstrmojo.DI.DIConstants;mstrmojo.AS.DIPublishAppSchemaSheetsMatchEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.AS.DIPublishAppSchemaSheetsMatchEditor",cssClass:"mstrmojo-di-appschema-sheetsmatch-editor mstrmojo-di-scheduleEMMA refreshMode",title:"Match Worksheet",onOpen:function(){},onClose:function(){},postData:undefined,callback:mstrmojo.emptyFn,children:[{scriptClass:"mstrmojo.Label",text:"Please make sure the updated worksheets are matched with the original ones."},{scriptClass:"mstrmojo.DataGrid",lockHeader:true,alias:"tablesheetsGrid",cssText:"height: 260px;",cssClass:"mstrmojo-di-tablesheets-list mstrmojo-di-tablestatuslist mstrmojo-di-appschema-tablestatuslist",columns:[{headerText:"Table",headerCss:"",dataField:"tableName",dataFunction:function(item,index,grid){return item.tableName;}},{headerText:"Original worksheet",headerCss:"",dataField:"originalWorksheet",dataFunction:function(item,index,grid){return item.originalWorksheet;}},{headerText:"Updated worksheet",headerCss:"",dataField:"updatedWorksheet",dataWidget:{scriptClass:"mstrmojo.Pulldown",popupZIndex:99999,popupToBody:true,isHostedWithin:false,colWidth:"230",onvalueChange:function(){var grid=this.parent.parent,selItem=this.items[this.selectedIndex];grid.postData[this.idx]["sheetIndex"]=selItem.sheetIndex;},bindings:{items:function(){return this.parent.parent.items[this.idx].updatedWorksheet;},selectedIndex:function(){var items=this.parent.parent.items,idx=this.idx,item=items[idx],updatedWorksheet=item.updatedWorksheet[idx],selectedIndex=updatedWorksheet.dssid||0,value=updatedWorksheet.n;this.set("text",value);return selectedIndex;}}}}]},{slot:"buttonNode",alias:"cancelButton",scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-di-button mstrmojo-WebButton",text:mstrmojo.desc(221,"Cancel"),onclick:function(){var editor=this.parent;editor.cancelCb();editor.close();}},{slot:"buttonNode",alias:"okButton",scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-di-button mstrmojo-WebButton",text:mstrmojo.desc(1442,"OK"),onclick:function(){var editor=this.parent;console.log(editor.children[1].postData);editor.callback(editor.children[1].postData);editor.close();}}]});})();