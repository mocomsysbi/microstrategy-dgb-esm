(function(){mstrmojo.requiresCls("mstrmojo._IsInputControl","mstrmojo.TableLayoutList","mstrmojo._IsTableLayoutListDIC","mstrmojo.dom","mstrmojo.hash","mstrmojo.css");var $D=mstrmojo.dom,$C=mstrmojo.css,$H=mstrmojo.hash,STYLES_LIST={0:"default",1:"stars_dots"};function setZoomedBackground(me){if(me.owner&&me.owner.model){var model=me.owner.model,zf=model.getZoomFactor&&model.getZoomFactor()||1;if(zf!==1){var wrappers=me.domNode.getElementsByClassName("item_wrapper"),elements=[];$A.forEach(wrappers,function(wrapper){elements.push(wrapper.firstChild);});me.zoomBackground(zf,elements);}}}mstrmojo.RatingDIC=mstrmojo.declare(mstrmojo.TableLayoutList,[mstrmojo._IsTableLayoutListDIC,mstrmojo._IsInputControl],{scriptClass:"mstrmojo.RatingDIC",styleCssClass:"rate",markupString:'<div id="{@id}" class="mstrmojo-ListBase {@cssClass}" style="{@cssText}" mstrAttach:click,mouseover,mouseout><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div>',lastIdx:null,init:function(props){this._super(props);this.items=this.getItems();this.starCount=this.items&&this.items.length;$C.addWidgetCssClass(this,STYLES_LIST[this.dic.stl||0]);},setRating:function(idx){var i=0,starCount=this.starCount,leCss="less_equal";if(this.lastIdx==undefined||this.lastIdx!=idx){for(i;i<starCount;i++){if(i<=idx){$C.addClass(this._getItemNode(i),leCss);}else{$C.removeClass(this._getItemNode(i),leCss);}}this.lastIdx=idx;setZoomedBackground(this);}},onvalueChange:function(){this._super&&this._super();var idx=mstrmojo.array.find(this.items,"v",this.value);this.setRating(idx);},onmouseover:function(evt){this._super&&this._super(evt);var target=evt.target||$D.eventTarget(evt.hWin,evt.e),idx=target&&target.getAttribute("idx");if(idx!=undefined){this.setRating(idx);}},onmouseout:function(evt){this._super&&this._super(evt);var idx=mstrmojo.array.find(this.items,"v",this.value);this.setRating(idx);},postBuildRendering:function(){this._super();if(!mstrmojo.isDescendant(this.owner,this)&&this.showByDefault){this.set("height",(this.openerStyle.ih||0)+"px");this.set("width",(this.openerStyle.iw||0)+"px");}var idx=mstrmojo.array.find(this.items,"v",this.value);if(idx>-1){this.setRating(idx);}if(this.owner&&this.owner.model){var model=this.owner.model;zf=model.getZoomFactor&&model.getZoomFactor()||1;if(zf!==1){var wrappers=this.domNode.getElementsByClassName("item_wrapper"),elements=[];$A.forEach(wrappers,function(wrapper){elements.push(wrapper.firstChild);});this.zoomStyle(zf,elements,42,41);}}$C.toggleClass(this.domNode,"disabled",!this.enabled);}});}());