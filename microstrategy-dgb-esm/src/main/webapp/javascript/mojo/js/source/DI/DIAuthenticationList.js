(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.ui.ScrollableList","mstrmojo.architect.menu.EnumMenuActions","mstrmojo.ui.menus._HasMenuPopup");var $CSS=mstrmojo.css,$DOM=mstrmojo.dom;var $ENUM_MENU_ACTIONS=mstrmojo.architect.menu.EnumMenuActions;mstrmojo.DI.DIAuthenticationList=mstrmojo.declare(mstrmojo.ui.ScrollableList,[mstrmojo.ui._HasListTooltip,mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.DI.DIAuthenticationList",selectionPolicy:"reselect",mode:"",useRichTooltip:true,executeCommand:mstrmojo.emptyFn,setupScrollNodes:function(){this.scrollNode=this.scrollNode;},onitemsChange:function(){this.updateScrollbars();$CSS.toggleClass(this.domNode,"edit",this.mode==="edit");},onmodeChange:function(){var bottom=this.parent.bottom,isEdit=this.mode==="edit";$CSS.toggleClass(this.domNode,"edit",isEdit);bottom.children[0].set("visible",!isEdit);bottom.children[1].set("visible",!isEdit);bottom.children[2].set("visible",isEdit);},getItemMarkup:function(item,idx){var markup=mstrmojo._IsList.getItemMarkup.call(this,item,idx);return markup.replace("{@en@n}",'<span class="icon"></span><span class="text">{@en@n}</span><span class="btn"></span>');},onclick:function(evt){var node=evt.getTarget(),item=this.getItemNodeFromTarget(node);if(item&&item.childNodes[2]===node){this.handleBtnAction(this.getItemFromTarget(node),evt);return ;}return mstrmojo._IsList.onclick.call(this,evt);},handleBtnAction:function(item,evt){var me=this,target=evt.getTarget(),menuHelper,cfg;menuHelper=this.ctxMenuHelper=this.ctxMenuHelper||new mstrmojo.warehouse.menu.DBConnectionsMenu({queryVisible:function(item){var visible;switch(item&&item.action){case $ENUM_MENU_ACTIONS.EDIT:visible=true;break;case $ENUM_MENU_ACTIONS.DELETE:visible=true;break;case $ENUM_MENU_ACTIONS.SHARE:visible=!!mstrApp.diParams.Share&&!mstrApp.isSingleTier;break;default:visible=false;break;}return visible;},queryChecked:function(){return false;},executeCommand:function(item){var data=this.data,action=item.action;me.executeCommand(action,data);}});menuHelper.data=item;cfg=menuHelper.getMenuConfig();cfg.hostId=this.id;cfg.hostElement=target;cfg.isHostedWithin=false;cfg.hostProxyCssClass="item-mn-proxy";cfg.position=$DOM.position(cfg.hostElement,true);this.openPopup(new mstrmojo.ui.menus.Menu({popupConfig:cfg}));}});}());